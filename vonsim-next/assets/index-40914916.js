var K_=Object.defineProperty;var Z_=(t,e,n)=>e in t?K_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>(Z_(t,typeof e!="symbol"?e+"":e,n),n),_m=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var S=(t,e,n)=>(_m(t,e,"read from private field"),n?n.call(t):e.get(t)),ue=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},j=(t,e,n,i)=>(_m(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var Ge=(t,e,n)=>(_m(t,e,"access private method"),n);function Y_(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function qc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $E={exports:{}},Pp={},LE={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc=Symbol.for("react.element"),J_=Symbol.for("react.portal"),q_=Symbol.for("react.fragment"),Q_=Symbol.for("react.strict_mode"),eN=Symbol.for("react.profiler"),tN=Symbol.for("react.provider"),nN=Symbol.for("react.context"),iN=Symbol.for("react.forward_ref"),rN=Symbol.for("react.suspense"),sN=Symbol.for("react.memo"),oN=Symbol.for("react.lazy"),X1=Symbol.iterator;function aN(t){return t===null||typeof t!="object"?null:(t=X1&&t[X1]||t["@@iterator"],typeof t=="function"?t:null)}var IE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BE=Object.assign,zE={};function Gl(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||IE}Gl.prototype.isReactComponent={};Gl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function FE(){}FE.prototype=Gl.prototype;function Av(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||IE}var Pv=Av.prototype=new FE;Pv.constructor=Av;BE(Pv,Gl.prototype);Pv.isPureReactComponent=!0;var K1=Array.isArray,jE=Object.prototype.hasOwnProperty,Rv={current:null},VE={key:!0,ref:!0,__self:!0,__source:!0};function UE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)jE.call(e,i)&&!VE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Qc,type:t,key:s,ref:o,props:r,_owner:Rv.current}}function lN(t,e){return{$$typeof:Qc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qc}function uN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Z1=/\/+/g;function Nm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uN(""+t.key):e.toString(36)}function xh(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qc:case J_:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Nm(o,0):i,K1(r)?(n="",t!=null&&(n=t.replace(Z1,"$&/")+"/"),xh(r,e,n,"",function(u){return u})):r!=null&&(Tv(r)&&(r=lN(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Z1,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",K1(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Nm(s,a);o+=xh(s,e,n,l,r)}else if(l=aN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Nm(s,a++),o+=xh(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bd(t,e,n){if(t==null)return t;var i=[],r=0;return xh(t,i,"","",function(s){return e.call(n,s,r++)}),i}function cN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},bh={transition:null},dN={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:bh,ReactCurrentOwner:Rv};$e.Children={map:bd,forEach:function(t,e,n){bd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bd(t,function(){e++}),e},toArray:function(t){return bd(t,function(e){return e})||[]},only:function(t){if(!Tv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=Gl;$e.Fragment=q_;$e.Profiler=eN;$e.PureComponent=Av;$e.StrictMode=Q_;$e.Suspense=rN;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dN;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=BE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Rv.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)jE.call(e,l)&&!VE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Qc,type:t.type,key:r,ref:s,props:i,_owner:o}};$e.createContext=function(t){return t={$$typeof:nN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tN,_context:t},t.Consumer=t};$e.createElement=UE;$e.createFactory=function(t){var e=UE.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:iN,render:t}};$e.isValidElement=Tv;$e.lazy=function(t){return{$$typeof:oN,_payload:{_status:-1,_result:t},_init:cN}};$e.memo=function(t,e){return{$$typeof:sN,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=bh.transition;bh.transition={};try{t()}finally{bh.transition=e}};$e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};$e.useCallback=function(t,e){return xn.current.useCallback(t,e)};$e.useContext=function(t){return xn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return xn.current.useEffect(t,e)};$e.useId=function(){return xn.current.useId()};$e.useImperativeHandle=function(t,e,n){return xn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return xn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return xn.current.useReducer(t,e,n)};$e.useRef=function(t){return xn.current.useRef(t)};$e.useState=function(t){return xn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return xn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return xn.current.useTransition()};$e.version="18.2.0";LE.exports=$e;var b=LE.exports;const q=qc(b),Ov=Y_({__proto__:null,default:q},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hN=b,fN=Symbol.for("react.element"),pN=Symbol.for("react.fragment"),mN=Object.prototype.hasOwnProperty,gN=hN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yN={key:!0,ref:!0,__self:!0,__source:!0};function WE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)mN.call(e,i)&&!yN.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:fN,type:t,key:s,ref:o,props:r,_owner:gN.current}}Pp.Fragment=pN;Pp.jsx=WE;Pp.jsxs=WE;$E.exports=Pp;var C=$E.exports;var h0={},HE={exports:{}},ti={},GE={exports:{}},XE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,$){var F=O.length;O.push($);e:for(;0<F;){var Y=F-1>>>1,ie=O[Y];if(0<r(ie,$))O[Y]=$,O[F]=ie,F=Y;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var $=O[0],F=O.pop();if(F!==$){O[0]=F;e:for(var Y=0,ie=O.length,ce=ie>>>1;Y<ce;){var ve=2*(Y+1)-1,be=O[ve],we=ve+1,Q=O[we];if(0>r(be,F))we<ie&&0>r(Q,be)?(O[Y]=Q,O[we]=F,Y=we):(O[Y]=be,O[ve]=F,Y=ve);else if(we<ie&&0>r(Q,F))O[Y]=Q,O[we]=F,Y=we;else break e}}return $}function r(O,$){var F=O.sortIndex-$.sortIndex;return F!==0?F:O.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var $=n(u);$!==null;){if($.callback===null)i(u);else if($.startTime<=O)i(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function x(O){if(m=!1,w(O),!p)if(n(l)!==null)p=!0,z(k);else{var $=n(u);$!==null&&L(x,$.startTime-O)}}function k(O,$){p=!1,m&&(m=!1,g(E),E=-1),f=!0;var F=h;try{for(w($),d=n(l);d!==null&&(!(d.expirationTime>$)||O&&!T());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,h=d.priorityLevel;var ie=Y(d.expirationTime<=$);$=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(l)&&i(l),w($)}else i(l);d=n(l)}if(d!==null)var ce=!0;else{var ve=n(u);ve!==null&&L(x,ve.startTime-$),ce=!1}return ce}finally{d=null,h=F,f=!1}}var A=!1,P=null,E=-1,R=5,N=-1;function T(){return!(t.unstable_now()-N<R)}function B(){if(P!==null){var O=t.unstable_now();N=O;var $=!0;try{$=P(!0,O)}finally{$?I():(A=!1,P=null)}}else A=!1}var I;if(typeof y=="function")I=function(){y(B)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,D=_.port2;_.port1.onmessage=B,I=function(){D.postMessage(null)}}else I=function(){v(B,0)};function z(O){P=O,A||(A=!0,I())}function L(O,$){E=v(function(){O(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,z(k))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var F=h;h=$;try{return O()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=h;h=O;try{return $()}finally{h=F}},t.unstable_scheduleCallback=function(O,$,F){var Y=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,O){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=F+ie,O={id:c++,callback:$,priorityLevel:O,startTime:F,expirationTime:ie,sortIndex:-1},F>Y?(O.sortIndex=F,e(u,O),n(l)===null&&O===n(u)&&(m?(g(E),E=-1):m=!0,L(x,F-Y))):(O.sortIndex=ie,e(l,O),p||f||(p=!0,z(k))),O},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(O){var $=h;return function(){var F=h;h=$;try{return O.apply(this,arguments)}finally{h=F}}}})(XE);GE.exports=XE;var vN=GE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE=b,ei=vN;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZE=new Set,nc={};function aa(t,e){Sl(t,e),Sl(t+"Capture",e)}function Sl(t,e){for(nc[t]=e,t=0;t<e.length;t++)ZE.add(e[t])}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f0=Object.prototype.hasOwnProperty,wN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y1={},J1={};function xN(t){return f0.call(J1,t)?!0:f0.call(Y1,t)?!1:wN.test(t)?J1[t]=!0:(Y1[t]=!0,!1)}function bN(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SN(t,e,n,i){if(e===null||typeof e>"u"||bN(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new bn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new bn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new bn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new bn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new bn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new bn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new bn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new bn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new bn(t,5,!1,t.toLowerCase(),null,!1,!1)});var _v=/[\-:]([a-z])/g;function Nv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_v,Nv);Zt[e]=new bn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_v,Nv);Zt[e]=new bn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_v,Nv);Zt[e]=new bn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new bn(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new bn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mv(t,e,n,i){var r=Zt.hasOwnProperty(e)?Zt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SN(e,n,r,i)&&(n=null),i||r===null?xN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var cs=KE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sd=Symbol.for("react.element"),Na=Symbol.for("react.portal"),Ma=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),p0=Symbol.for("react.profiler"),YE=Symbol.for("react.provider"),JE=Symbol.for("react.context"),$v=Symbol.for("react.forward_ref"),m0=Symbol.for("react.suspense"),g0=Symbol.for("react.suspense_list"),Lv=Symbol.for("react.memo"),ws=Symbol.for("react.lazy"),qE=Symbol.for("react.offscreen"),q1=Symbol.iterator;function iu(t){return t===null||typeof t!="object"?null:(t=q1&&t[q1]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,Mm;function Eu(t){if(Mm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mm=e&&e[1]||""}return`
`+Mm+t}var Dm=!1;function $m(t,e){if(!t||Dm)return"";Dm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Dm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Eu(t):""}function kN(t){switch(t.tag){case 5:return Eu(t.type);case 16:return Eu("Lazy");case 13:return Eu("Suspense");case 19:return Eu("SuspenseList");case 0:case 2:case 15:return t=$m(t.type,!1),t;case 11:return t=$m(t.type.render,!1),t;case 1:return t=$m(t.type,!0),t;default:return""}}function y0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ma:return"Fragment";case Na:return"Portal";case p0:return"Profiler";case Dv:return"StrictMode";case m0:return"Suspense";case g0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case JE:return(t.displayName||"Context")+".Consumer";case YE:return(t._context.displayName||"Context")+".Provider";case $v:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lv:return e=t.displayName||null,e!==null?e:y0(t.type)||"Memo";case ws:e=t._payload,t=t._init;try{return y0(t(e))}catch{}}return null}function EN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return y0(e);case 8:return e===Dv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function QE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CN(t){var e=QE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kd(t){t._valueTracker||(t._valueTracker=CN(t))}function eC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=QE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function tf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function v0(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Q1(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tC(t,e){e=e.checked,e!=null&&Mv(t,"checked",e,!1)}function w0(t,e){tC(t,e);var n=Qs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?x0(t,e.type,n):e.hasOwnProperty("defaultValue")&&x0(t,e.type,Qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ex(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function x0(t,e,n){(e!=="number"||tf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cu=Array.isArray;function Ya(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Qs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function b0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Cu(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qs(n)}}function nC(t,e){var n=Qs(e.value),i=Qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function nx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function S0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ed,rC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ed=Ed||document.createElement("div"),Ed.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ed.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ic(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Iu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AN=["Webkit","ms","Moz","O"];Object.keys(Iu).forEach(function(t){AN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Iu[e]=Iu[t]})});function sC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Iu.hasOwnProperty(t)&&Iu[t]?(""+e).trim():e+"px"}function oC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=sC(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var PN=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k0(t,e){if(e){if(PN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function E0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C0=null;function Iv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var A0=null,Ja=null,qa=null;function ix(t){if(t=nd(t)){if(typeof A0!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Np(e),A0(t.stateNode,t.type,e))}}function aC(t){Ja?qa?qa.push(t):qa=[t]:Ja=t}function lC(){if(Ja){var t=Ja,e=qa;if(qa=Ja=null,ix(t),e)for(t=0;t<e.length;t++)ix(e[t])}}function uC(t,e){return t(e)}function cC(){}var Lm=!1;function dC(t,e,n){if(Lm)return t(e,n);Lm=!0;try{return uC(t,e,n)}finally{Lm=!1,(Ja!==null||qa!==null)&&(cC(),lC())}}function rc(t,e){var n=t.stateNode;if(n===null)return null;var i=Np(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var P0=!1;if(es)try{var ru={};Object.defineProperty(ru,"passive",{get:function(){P0=!0}}),window.addEventListener("test",ru,ru),window.removeEventListener("test",ru,ru)}catch{P0=!1}function RN(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Bu=!1,nf=null,rf=!1,R0=null,TN={onError:function(t){Bu=!0,nf=t}};function ON(t,e,n,i,r,s,o,a,l){Bu=!1,nf=null,RN.apply(TN,arguments)}function _N(t,e,n,i,r,s,o,a,l){if(ON.apply(this,arguments),Bu){if(Bu){var u=nf;Bu=!1,nf=null}else throw Error(U(198));rf||(rf=!0,R0=u)}}function la(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rx(t){if(la(t)!==t)throw Error(U(188))}function NN(t){var e=t.alternate;if(!e){if(e=la(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return rx(r),t;if(s===i)return rx(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function fC(t){return t=NN(t),t!==null?pC(t):null}function pC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pC(t);if(e!==null)return e;t=t.sibling}return null}var mC=ei.unstable_scheduleCallback,sx=ei.unstable_cancelCallback,MN=ei.unstable_shouldYield,DN=ei.unstable_requestPaint,Et=ei.unstable_now,$N=ei.unstable_getCurrentPriorityLevel,Bv=ei.unstable_ImmediatePriority,gC=ei.unstable_UserBlockingPriority,sf=ei.unstable_NormalPriority,LN=ei.unstable_LowPriority,yC=ei.unstable_IdlePriority,Rp=null,gr=null;function IN(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(Rp,t,void 0,(t.current.flags&128)===128)}catch{}}var zi=Math.clz32?Math.clz32:FN,BN=Math.log,zN=Math.LN2;function FN(t){return t>>>=0,t===0?32:31-(BN(t)/zN|0)|0}var Cd=64,Ad=4194304;function Au(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function of(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Au(a):(s&=o,s!==0&&(i=Au(s)))}else o=n&~r,o!==0?i=Au(o):s!==0&&(i=Au(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-zi(e),r=1<<n,i|=t[n],e&=~r;return i}function jN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VN(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zi(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=jN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function T0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vC(){var t=Cd;return Cd<<=1,!(Cd&4194240)&&(Cd=64),t}function Im(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ed(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zi(e),t[e]=n}function UN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-zi(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function zv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-zi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ue=0;function wC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xC,Fv,bC,SC,kC,O0=!1,Pd=[],Vs=null,Us=null,Ws=null,sc=new Map,oc=new Map,As=[],WN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ox(t,e){switch(t){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(e.pointerId)}}function su(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=nd(e),e!==null&&Fv(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function HN(t,e,n,i,r){switch(e){case"focusin":return Vs=su(Vs,t,e,n,i,r),!0;case"dragenter":return Us=su(Us,t,e,n,i,r),!0;case"mouseover":return Ws=su(Ws,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return sc.set(s,su(sc.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,oc.set(s,su(oc.get(s)||null,t,e,n,i,r)),!0}return!1}function EC(t){var e=Oo(t.target);if(e!==null){var n=la(e);if(n!==null){if(e=n.tag,e===13){if(e=hC(n),e!==null){t.blockedOn=e,kC(t.priority,function(){bC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);C0=i,n.target.dispatchEvent(i),C0=null}else return e=nd(n),e!==null&&Fv(e),t.blockedOn=n,!1;e.shift()}return!0}function ax(t,e,n){Sh(t)&&n.delete(e)}function GN(){O0=!1,Vs!==null&&Sh(Vs)&&(Vs=null),Us!==null&&Sh(Us)&&(Us=null),Ws!==null&&Sh(Ws)&&(Ws=null),sc.forEach(ax),oc.forEach(ax)}function ou(t,e){t.blockedOn===e&&(t.blockedOn=null,O0||(O0=!0,ei.unstable_scheduleCallback(ei.unstable_NormalPriority,GN)))}function ac(t){function e(r){return ou(r,t)}if(0<Pd.length){ou(Pd[0],t);for(var n=1;n<Pd.length;n++){var i=Pd[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Vs!==null&&ou(Vs,t),Us!==null&&ou(Us,t),Ws!==null&&ou(Ws,t),sc.forEach(e),oc.forEach(e),n=0;n<As.length;n++)i=As[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<As.length&&(n=As[0],n.blockedOn===null);)EC(n),n.blockedOn===null&&As.shift()}var Qa=cs.ReactCurrentBatchConfig,af=!0;function XN(t,e,n,i){var r=Ue,s=Qa.transition;Qa.transition=null;try{Ue=1,jv(t,e,n,i)}finally{Ue=r,Qa.transition=s}}function KN(t,e,n,i){var r=Ue,s=Qa.transition;Qa.transition=null;try{Ue=4,jv(t,e,n,i)}finally{Ue=r,Qa.transition=s}}function jv(t,e,n,i){if(af){var r=_0(t,e,n,i);if(r===null)Xm(t,e,i,lf,n),ox(t,i);else if(HN(r,t,e,n,i))i.stopPropagation();else if(ox(t,i),e&4&&-1<WN.indexOf(t)){for(;r!==null;){var s=nd(r);if(s!==null&&xC(s),s=_0(t,e,n,i),s===null&&Xm(t,e,i,lf,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Xm(t,e,i,null,n)}}var lf=null;function _0(t,e,n,i){if(lf=null,t=Iv(i),t=Oo(t),t!==null)if(e=la(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lf=t,null}function CC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($N()){case Bv:return 1;case gC:return 4;case sf:case LN:return 16;case yC:return 536870912;default:return 16}default:return 16}}var Ls=null,Vv=null,kh=null;function AC(){if(kh)return kh;var t,e=Vv,n=e.length,i,r="value"in Ls?Ls.value:Ls.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return kh=r.slice(t,1<i?1-i:void 0)}function Eh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rd(){return!0}function lx(){return!1}function ni(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rd:lx,this.isPropagationStopped=lx,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rd)},persist:function(){},isPersistent:Rd}),e}var Xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uv=ni(Xl),td=yt({},Xl,{view:0,detail:0}),ZN=ni(td),Bm,zm,au,Tp=yt({},td,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==au&&(au&&t.type==="mousemove"?(Bm=t.screenX-au.screenX,zm=t.screenY-au.screenY):zm=Bm=0,au=t),Bm)},movementY:function(t){return"movementY"in t?t.movementY:zm}}),ux=ni(Tp),YN=yt({},Tp,{dataTransfer:0}),JN=ni(YN),qN=yt({},td,{relatedTarget:0}),Fm=ni(qN),QN=yt({},Xl,{animationName:0,elapsedTime:0,pseudoElement:0}),eM=ni(QN),tM=yt({},Xl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nM=ni(tM),iM=yt({},Xl,{data:0}),cx=ni(iM),rM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oM[t])?!!e[t]:!1}function Wv(){return aM}var lM=yt({},td,{key:function(t){if(t.key){var e=rM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wv,charCode:function(t){return t.type==="keypress"?Eh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uM=ni(lM),cM=yt({},Tp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dx=ni(cM),dM=yt({},td,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wv}),hM=ni(dM),fM=yt({},Xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),pM=ni(fM),mM=yt({},Tp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gM=ni(mM),yM=[9,13,27,32],Hv=es&&"CompositionEvent"in window,zu=null;es&&"documentMode"in document&&(zu=document.documentMode);var vM=es&&"TextEvent"in window&&!zu,PC=es&&(!Hv||zu&&8<zu&&11>=zu),hx=String.fromCharCode(32),fx=!1;function RC(t,e){switch(t){case"keyup":return yM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Da=!1;function wM(t,e){switch(t){case"compositionend":return TC(e);case"keypress":return e.which!==32?null:(fx=!0,hx);case"textInput":return t=e.data,t===hx&&fx?null:t;default:return null}}function xM(t,e){if(Da)return t==="compositionend"||!Hv&&RC(t,e)?(t=AC(),kh=Vv=Ls=null,Da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PC&&e.locale!=="ko"?null:e.data;default:return null}}var bM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function px(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bM[t.type]:e==="textarea"}function OC(t,e,n,i){aC(i),e=uf(e,"onChange"),0<e.length&&(n=new Uv("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Fu=null,lc=null;function SM(t){jC(t,0)}function Op(t){var e=Ia(t);if(eC(e))return t}function kM(t,e){if(t==="change")return e}var _C=!1;if(es){var jm;if(es){var Vm="oninput"in document;if(!Vm){var mx=document.createElement("div");mx.setAttribute("oninput","return;"),Vm=typeof mx.oninput=="function"}jm=Vm}else jm=!1;_C=jm&&(!document.documentMode||9<document.documentMode)}function gx(){Fu&&(Fu.detachEvent("onpropertychange",NC),lc=Fu=null)}function NC(t){if(t.propertyName==="value"&&Op(lc)){var e=[];OC(e,lc,t,Iv(t)),dC(SM,e)}}function EM(t,e,n){t==="focusin"?(gx(),Fu=e,lc=n,Fu.attachEvent("onpropertychange",NC)):t==="focusout"&&gx()}function CM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Op(lc)}function AM(t,e){if(t==="click")return Op(e)}function PM(t,e){if(t==="input"||t==="change")return Op(e)}function RM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wi=typeof Object.is=="function"?Object.is:RM;function uc(t,e){if(Wi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!f0.call(e,r)||!Wi(t[r],e[r]))return!1}return!0}function yx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vx(t,e){var n=yx(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yx(n)}}function MC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function DC(){for(var t=window,e=tf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tf(t.document)}return e}function Gv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TM(t){var e=DC(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MC(n.ownerDocument.documentElement,n)){if(i!==null&&Gv(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=vx(n,s);var o=vx(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OM=es&&"documentMode"in document&&11>=document.documentMode,$a=null,N0=null,ju=null,M0=!1;function wx(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;M0||$a==null||$a!==tf(i)||(i=$a,"selectionStart"in i&&Gv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ju&&uc(ju,i)||(ju=i,i=uf(N0,"onSelect"),0<i.length&&(e=new Uv("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=$a)))}function Td(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var La={animationend:Td("Animation","AnimationEnd"),animationiteration:Td("Animation","AnimationIteration"),animationstart:Td("Animation","AnimationStart"),transitionend:Td("Transition","TransitionEnd")},Um={},$C={};es&&($C=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function _p(t){if(Um[t])return Um[t];if(!La[t])return t;var e=La[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $C)return Um[t]=e[n];return t}var LC=_p("animationend"),IC=_p("animationiteration"),BC=_p("animationstart"),zC=_p("transitionend"),FC=new Map,xx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(t,e){FC.set(t,e),aa(e,[t])}for(var Wm=0;Wm<xx.length;Wm++){var Hm=xx[Wm],_M=Hm.toLowerCase(),NM=Hm[0].toUpperCase()+Hm.slice(1);ho(_M,"on"+NM)}ho(LC,"onAnimationEnd");ho(IC,"onAnimationIteration");ho(BC,"onAnimationStart");ho("dblclick","onDoubleClick");ho("focusin","onFocus");ho("focusout","onBlur");ho(zC,"onTransitionEnd");Sl("onMouseEnter",["mouseout","mouseover"]);Sl("onMouseLeave",["mouseout","mouseover"]);Sl("onPointerEnter",["pointerout","pointerover"]);Sl("onPointerLeave",["pointerout","pointerover"]);aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pu));function bx(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,_N(i,e,void 0,t),t.currentTarget=null}function jC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;bx(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;bx(r,a,u),s=l}}}if(rf)throw t=R0,rf=!1,R0=null,t}function Qe(t,e){var n=e[B0];n===void 0&&(n=e[B0]=new Set);var i=t+"__bubble";n.has(i)||(VC(e,t,2,!1),n.add(i))}function Gm(t,e,n){var i=0;e&&(i|=4),VC(n,t,i,e)}var Od="_reactListening"+Math.random().toString(36).slice(2);function cc(t){if(!t[Od]){t[Od]=!0,ZE.forEach(function(n){n!=="selectionchange"&&(MM.has(n)||Gm(n,!1,t),Gm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Od]||(e[Od]=!0,Gm("selectionchange",!1,e))}}function VC(t,e,n,i){switch(CC(e)){case 1:var r=XN;break;case 4:r=KN;break;default:r=jv}n=r.bind(null,e,n,t),r=void 0,!P0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Xm(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Oo(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}dC(function(){var u=s,c=Iv(n),d=[];e:{var h=FC.get(t);if(h!==void 0){var f=Uv,p=t;switch(t){case"keypress":if(Eh(n)===0)break e;case"keydown":case"keyup":f=uM;break;case"focusin":p="focus",f=Fm;break;case"focusout":p="blur",f=Fm;break;case"beforeblur":case"afterblur":f=Fm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=ux;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=JN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=hM;break;case LC:case IC:case BC:f=eM;break;case zC:f=pM;break;case"scroll":f=ZN;break;case"wheel":f=gM;break;case"copy":case"cut":case"paste":f=nM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=dx}var m=(e&4)!==0,v=!m&&t==="scroll",g=m?h!==null?h+"Capture":null:h;m=[];for(var y=u,w;y!==null;){w=y;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,g!==null&&(x=rc(y,g),x!=null&&m.push(dc(y,x,w)))),v)break;y=y.return}0<m.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==C0&&(p=n.relatedTarget||n.fromElement)&&(Oo(p)||p[ts]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Oo(p):null,p!==null&&(v=la(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(m=ux,x="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=dx,x="onPointerLeave",g="onPointerEnter",y="pointer"),v=f==null?h:Ia(f),w=p==null?h:Ia(p),h=new m(x,y+"leave",f,n,c),h.target=v,h.relatedTarget=w,x=null,Oo(c)===u&&(m=new m(g,y+"enter",p,n,c),m.target=w,m.relatedTarget=v,x=m),v=x,f&&p)t:{for(m=f,g=p,y=0,w=m;w;w=ga(w))y++;for(w=0,x=g;x;x=ga(x))w++;for(;0<y-w;)m=ga(m),y--;for(;0<w-y;)g=ga(g),w--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=ga(m),g=ga(g)}m=null}else m=null;f!==null&&Sx(d,h,f,m,!1),p!==null&&v!==null&&Sx(d,v,p,m,!0)}}e:{if(h=u?Ia(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=kM;else if(px(h))if(_C)k=PM;else{k=CM;var A=EM}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=AM);if(k&&(k=k(t,u))){OC(d,k,n,c);break e}A&&A(t,h,u),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&x0(h,"number",h.value)}switch(A=u?Ia(u):window,t){case"focusin":(px(A)||A.contentEditable==="true")&&($a=A,N0=u,ju=null);break;case"focusout":ju=N0=$a=null;break;case"mousedown":M0=!0;break;case"contextmenu":case"mouseup":case"dragend":M0=!1,wx(d,n,c);break;case"selectionchange":if(OM)break;case"keydown":case"keyup":wx(d,n,c)}var P;if(Hv)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Da?RC(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(PC&&n.locale!=="ko"&&(Da||E!=="onCompositionStart"?E==="onCompositionEnd"&&Da&&(P=AC()):(Ls=c,Vv="value"in Ls?Ls.value:Ls.textContent,Da=!0)),A=uf(u,E),0<A.length&&(E=new cx(E,t,null,n,c),d.push({event:E,listeners:A}),P?E.data=P:(P=TC(n),P!==null&&(E.data=P)))),(P=vM?wM(t,n):xM(t,n))&&(u=uf(u,"onBeforeInput"),0<u.length&&(c=new cx("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=P))}jC(d,e)})}function dc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=rc(t,n),s!=null&&i.unshift(dc(t,s,r)),s=rc(t,e),s!=null&&i.push(dc(t,s,r))),t=t.return}return i}function ga(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sx(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=rc(n,s),l!=null&&o.unshift(dc(n,l,a))):r||(l=rc(n,s),l!=null&&o.push(dc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DM=/\r\n?/g,$M=/\u0000|\uFFFD/g;function kx(t){return(typeof t=="string"?t:""+t).replace(DM,`
`).replace($M,"")}function _d(t,e,n){if(e=kx(e),kx(t)!==e&&n)throw Error(U(425))}function cf(){}var D0=null,$0=null;function L0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var I0=typeof setTimeout=="function"?setTimeout:void 0,LM=typeof clearTimeout=="function"?clearTimeout:void 0,Ex=typeof Promise=="function"?Promise:void 0,IM=typeof queueMicrotask=="function"?queueMicrotask:typeof Ex<"u"?function(t){return Ex.resolve(null).then(t).catch(BM)}:I0;function BM(t){setTimeout(function(){throw t})}function Km(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ac(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ac(e)}function Hs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kl=Math.random().toString(36).slice(2),ur="__reactFiber$"+Kl,hc="__reactProps$"+Kl,ts="__reactContainer$"+Kl,B0="__reactEvents$"+Kl,zM="__reactListeners$"+Kl,FM="__reactHandles$"+Kl;function Oo(t){var e=t[ur];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ts]||n[ur]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cx(t);t!==null;){if(n=t[ur])return n;t=Cx(t)}return e}t=n,n=t.parentNode}return null}function nd(t){return t=t[ur]||t[ts],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ia(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Np(t){return t[hc]||null}var z0=[],Ba=-1;function fo(t){return{current:t}}function rt(t){0>Ba||(t.current=z0[Ba],z0[Ba]=null,Ba--)}function Je(t,e){Ba++,z0[Ba]=t.current,t.current=e}var eo={},sn=fo(eo),Mn=fo(!1),Ho=eo;function kl(t,e){var n=t.type.contextTypes;if(!n)return eo;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Dn(t){return t=t.childContextTypes,t!=null}function df(){rt(Mn),rt(sn)}function Ax(t,e,n){if(sn.current!==eo)throw Error(U(168));Je(sn,e),Je(Mn,n)}function UC(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,EN(t)||"Unknown",r));return yt({},n,i)}function hf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||eo,Ho=sn.current,Je(sn,t),Je(Mn,Mn.current),!0}function Px(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=UC(t,e,Ho),i.__reactInternalMemoizedMergedChildContext=t,rt(Mn),rt(sn),Je(sn,t)):rt(Mn),Je(Mn,n)}var _r=null,Mp=!1,Zm=!1;function WC(t){_r===null?_r=[t]:_r.push(t)}function jM(t){Mp=!0,WC(t)}function po(){if(!Zm&&_r!==null){Zm=!0;var t=0,e=Ue;try{var n=_r;for(Ue=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}_r=null,Mp=!1}catch(r){throw _r!==null&&(_r=_r.slice(t+1)),mC(Bv,po),r}finally{Ue=e,Zm=!1}}return null}var za=[],Fa=0,ff=null,pf=0,hi=[],fi=0,Go=null,Ur=1,Wr="";function ko(t,e){za[Fa++]=pf,za[Fa++]=ff,ff=t,pf=e}function HC(t,e,n){hi[fi++]=Ur,hi[fi++]=Wr,hi[fi++]=Go,Go=t;var i=Ur;t=Wr;var r=32-zi(i)-1;i&=~(1<<r),n+=1;var s=32-zi(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ur=1<<32-zi(e)+r|n<<r|i,Wr=s+t}else Ur=1<<s|n<<r|i,Wr=t}function Xv(t){t.return!==null&&(ko(t,1),HC(t,1,0))}function Kv(t){for(;t===ff;)ff=za[--Fa],za[Fa]=null,pf=za[--Fa],za[Fa]=null;for(;t===Go;)Go=hi[--fi],hi[fi]=null,Wr=hi[--fi],hi[fi]=null,Ur=hi[--fi],hi[fi]=null}var Qn=null,Jn=null,ot=!1,Mi=null;function GC(t,e){var n=gi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qn=t,Jn=Hs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qn=t,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Go!==null?{id:Ur,overflow:Wr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qn=t,Jn=null,!0):!1;default:return!1}}function F0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function j0(t){if(ot){var e=Jn;if(e){var n=e;if(!Rx(t,e)){if(F0(t))throw Error(U(418));e=Hs(n.nextSibling);var i=Qn;e&&Rx(t,e)?GC(i,n):(t.flags=t.flags&-4097|2,ot=!1,Qn=t)}}else{if(F0(t))throw Error(U(418));t.flags=t.flags&-4097|2,ot=!1,Qn=t}}}function Tx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qn=t}function Nd(t){if(t!==Qn)return!1;if(!ot)return Tx(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!L0(t.type,t.memoizedProps)),e&&(e=Jn)){if(F0(t))throw XC(),Error(U(418));for(;e;)GC(t,e),e=Hs(e.nextSibling)}if(Tx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jn=Hs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jn=null}}else Jn=Qn?Hs(t.stateNode.nextSibling):null;return!0}function XC(){for(var t=Jn;t;)t=Hs(t.nextSibling)}function El(){Jn=Qn=null,ot=!1}function Zv(t){Mi===null?Mi=[t]:Mi.push(t)}var VM=cs.ReactCurrentBatchConfig;function Ri(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var mf=fo(null),gf=null,ja=null,Yv=null;function Jv(){Yv=ja=gf=null}function qv(t){var e=mf.current;rt(mf),t._currentValue=e}function V0(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function el(t,e){gf=t,Yv=ja=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(On=!0),t.firstContext=null)}function Si(t){var e=t._currentValue;if(Yv!==t)if(t={context:t,memoizedValue:e,next:null},ja===null){if(gf===null)throw Error(U(308));ja=t,gf.dependencies={lanes:0,firstContext:t}}else ja=ja.next=t;return e}var _o=null;function Qv(t){_o===null?_o=[t]:_o.push(t)}function KC(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Qv(e)):(n.next=r.next,r.next=n),e.interleaved=n,ns(t,i)}function ns(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xs=!1;function ew(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gs(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Be&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ns(t,n)}return r=i.interleaved,r===null?(e.next=e,Qv(i)):(e.next=r.next,r.next=e),i.interleaved=e,ns(t,n)}function Ch(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,zv(t,n)}}function Ox(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yf(t,e,n,i){var r=t.updateQueue;xs=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=yt({},d,h);break e;case 2:xs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ko|=o,t.lanes=o,t.memoizedState=d}}function _x(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var YC=new KE.Component().refs;function U0(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dp={isMounted:function(t){return(t=t._reactInternals)?la(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=yn(),r=Ks(t),s=Gr(i,r);s.payload=e,n!=null&&(s.callback=n),e=Gs(t,s,r),e!==null&&(Fi(e,t,r,i),Ch(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=yn(),r=Ks(t),s=Gr(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gs(t,s,r),e!==null&&(Fi(e,t,r,i),Ch(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),i=Ks(t),r=Gr(n,i);r.tag=2,e!=null&&(r.callback=e),e=Gs(t,r,i),e!==null&&(Fi(e,t,i,n),Ch(e,t,i))}};function Nx(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!uc(n,i)||!uc(r,s):!0}function JC(t,e,n){var i=!1,r=eo,s=e.contextType;return typeof s=="object"&&s!==null?s=Si(s):(r=Dn(e)?Ho:sn.current,i=e.contextTypes,s=(i=i!=null)?kl(t,r):eo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dp,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Mx(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Dp.enqueueReplaceState(e,e.state,null)}function W0(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=YC,ew(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Si(s):(s=Dn(e)?Ho:sn.current,r.context=kl(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(U0(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Dp.enqueueReplaceState(r,r.state,null),yf(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function lu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===YC&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Md(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Dx(t){var e=t._init;return e(t._payload)}function qC(t){function e(g,y){if(t){var w=g.deletions;w===null?(g.deletions=[y],g.flags|=16):w.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function i(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=Zs(g,y),g.index=0,g.sibling=null,g}function s(g,y,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<y?(g.flags|=2,y):w):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,w,x){return y===null||y.tag!==6?(y=ng(w,g.mode,x),y.return=g,y):(y=r(y,w),y.return=g,y)}function l(g,y,w,x){var k=w.type;return k===Ma?c(g,y,w.props.children,x,w.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ws&&Dx(k)===y.type)?(x=r(y,w.props),x.ref=lu(g,y,w),x.return=g,x):(x=_h(w.type,w.key,w.props,null,g.mode,x),x.ref=lu(g,y,w),x.return=g,x)}function u(g,y,w,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=ig(w,g.mode,x),y.return=g,y):(y=r(y,w.children||[]),y.return=g,y)}function c(g,y,w,x,k){return y===null||y.tag!==7?(y=Fo(w,g.mode,x,k),y.return=g,y):(y=r(y,w),y.return=g,y)}function d(g,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ng(""+y,g.mode,w),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sd:return w=_h(y.type,y.key,y.props,null,g.mode,w),w.ref=lu(g,null,y),w.return=g,w;case Na:return y=ig(y,g.mode,w),y.return=g,y;case ws:var x=y._init;return d(g,x(y._payload),w)}if(Cu(y)||iu(y))return y=Fo(y,g.mode,w,null),y.return=g,y;Md(g,y)}return null}function h(g,y,w,x){var k=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(g,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sd:return w.key===k?l(g,y,w,x):null;case Na:return w.key===k?u(g,y,w,x):null;case ws:return k=w._init,h(g,y,k(w._payload),x)}if(Cu(w)||iu(w))return k!==null?null:c(g,y,w,x,null);Md(g,w)}return null}function f(g,y,w,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(w)||null,a(y,g,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sd:return g=g.get(x.key===null?w:x.key)||null,l(y,g,x,k);case Na:return g=g.get(x.key===null?w:x.key)||null,u(y,g,x,k);case ws:var A=x._init;return f(g,y,w,A(x._payload),k)}if(Cu(x)||iu(x))return g=g.get(w)||null,c(y,g,x,k,null);Md(y,x)}return null}function p(g,y,w,x){for(var k=null,A=null,P=y,E=y=0,R=null;P!==null&&E<w.length;E++){P.index>E?(R=P,P=null):R=P.sibling;var N=h(g,P,w[E],x);if(N===null){P===null&&(P=R);break}t&&P&&N.alternate===null&&e(g,P),y=s(N,y,E),A===null?k=N:A.sibling=N,A=N,P=R}if(E===w.length)return n(g,P),ot&&ko(g,E),k;if(P===null){for(;E<w.length;E++)P=d(g,w[E],x),P!==null&&(y=s(P,y,E),A===null?k=P:A.sibling=P,A=P);return ot&&ko(g,E),k}for(P=i(g,P);E<w.length;E++)R=f(P,g,E,w[E],x),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?E:R.key),y=s(R,y,E),A===null?k=R:A.sibling=R,A=R);return t&&P.forEach(function(T){return e(g,T)}),ot&&ko(g,E),k}function m(g,y,w,x){var k=iu(w);if(typeof k!="function")throw Error(U(150));if(w=k.call(w),w==null)throw Error(U(151));for(var A=k=null,P=y,E=y=0,R=null,N=w.next();P!==null&&!N.done;E++,N=w.next()){P.index>E?(R=P,P=null):R=P.sibling;var T=h(g,P,N.value,x);if(T===null){P===null&&(P=R);break}t&&P&&T.alternate===null&&e(g,P),y=s(T,y,E),A===null?k=T:A.sibling=T,A=T,P=R}if(N.done)return n(g,P),ot&&ko(g,E),k;if(P===null){for(;!N.done;E++,N=w.next())N=d(g,N.value,x),N!==null&&(y=s(N,y,E),A===null?k=N:A.sibling=N,A=N);return ot&&ko(g,E),k}for(P=i(g,P);!N.done;E++,N=w.next())N=f(P,g,E,N.value,x),N!==null&&(t&&N.alternate!==null&&P.delete(N.key===null?E:N.key),y=s(N,y,E),A===null?k=N:A.sibling=N,A=N);return t&&P.forEach(function(B){return e(g,B)}),ot&&ko(g,E),k}function v(g,y,w,x){if(typeof w=="object"&&w!==null&&w.type===Ma&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Sd:e:{for(var k=w.key,A=y;A!==null;){if(A.key===k){if(k=w.type,k===Ma){if(A.tag===7){n(g,A.sibling),y=r(A,w.props.children),y.return=g,g=y;break e}}else if(A.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ws&&Dx(k)===A.type){n(g,A.sibling),y=r(A,w.props),y.ref=lu(g,A,w),y.return=g,g=y;break e}n(g,A);break}else e(g,A);A=A.sibling}w.type===Ma?(y=Fo(w.props.children,g.mode,x,w.key),y.return=g,g=y):(x=_h(w.type,w.key,w.props,null,g.mode,x),x.ref=lu(g,y,w),x.return=g,g=x)}return o(g);case Na:e:{for(A=w.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(g,y.sibling),y=r(y,w.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=ig(w,g.mode,x),y.return=g,g=y}return o(g);case ws:return A=w._init,v(g,y,A(w._payload),x)}if(Cu(w))return p(g,y,w,x);if(iu(w))return m(g,y,w,x);Md(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(g,y.sibling),y=r(y,w),y.return=g,g=y):(n(g,y),y=ng(w,g.mode,x),y.return=g,g=y),o(g)):n(g,y)}return v}var Cl=qC(!0),QC=qC(!1),id={},yr=fo(id),fc=fo(id),pc=fo(id);function No(t){if(t===id)throw Error(U(174));return t}function tw(t,e){switch(Je(pc,e),Je(fc,t),Je(yr,id),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:S0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=S0(e,t)}rt(yr),Je(yr,e)}function Al(){rt(yr),rt(fc),rt(pc)}function eA(t){No(pc.current);var e=No(yr.current),n=S0(e,t.type);e!==n&&(Je(fc,t),Je(yr,n))}function nw(t){fc.current===t&&(rt(yr),rt(fc))}var dt=fo(0);function vf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ym=[];function iw(){for(var t=0;t<Ym.length;t++)Ym[t]._workInProgressVersionPrimary=null;Ym.length=0}var Ah=cs.ReactCurrentDispatcher,Jm=cs.ReactCurrentBatchConfig,Xo=0,mt=null,Nt=null,It=null,wf=!1,Vu=!1,mc=0,UM=0;function qt(){throw Error(U(321))}function rw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wi(t[n],e[n]))return!1;return!0}function sw(t,e,n,i,r,s){if(Xo=s,mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ah.current=t===null||t.memoizedState===null?XM:KM,t=n(i,r),Vu){s=0;do{if(Vu=!1,mc=0,25<=s)throw Error(U(301));s+=1,It=Nt=null,e.updateQueue=null,Ah.current=ZM,t=n(i,r)}while(Vu)}if(Ah.current=xf,e=Nt!==null&&Nt.next!==null,Xo=0,It=Nt=mt=null,wf=!1,e)throw Error(U(300));return t}function ow(){var t=mc!==0;return mc=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?mt.memoizedState=It=t:It=It.next=t,It}function ki(){if(Nt===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=It===null?mt.memoizedState:It.next;if(e!==null)It=e,Nt=t;else{if(t===null)throw Error(U(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},It===null?mt.memoizedState=It=t:It=It.next=t}return It}function gc(t,e){return typeof e=="function"?e(t):e}function qm(t){var e=ki(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=Nt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Xo&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,mt.lanes|=c,Ko|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Wi(i,e.memoizedState)||(On=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,mt.lanes|=s,Ko|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qm(t){var e=ki(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Wi(s,e.memoizedState)||(On=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function tA(){}function nA(t,e){var n=mt,i=ki(),r=e(),s=!Wi(i.memoizedState,r);if(s&&(i.memoizedState=r,On=!0),i=i.queue,aw(sA.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,yc(9,rA.bind(null,n,i,r,e),void 0,null),zt===null)throw Error(U(349));Xo&30||iA(n,e,r)}return r}function iA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rA(t,e,n,i){e.value=n,e.getSnapshot=i,oA(e)&&aA(t)}function sA(t,e,n){return n(function(){oA(e)&&aA(t)})}function oA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wi(t,n)}catch{return!0}}function aA(t){var e=ns(t,1);e!==null&&Fi(e,t,1,-1)}function $x(t){var e=er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gc,lastRenderedState:t},e.queue=t,t=t.dispatch=GM.bind(null,mt,t),[e.memoizedState,t]}function yc(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function lA(){return ki().memoizedState}function Ph(t,e,n,i){var r=er();mt.flags|=t,r.memoizedState=yc(1|e,n,void 0,i===void 0?null:i)}function $p(t,e,n,i){var r=ki();i=i===void 0?null:i;var s=void 0;if(Nt!==null){var o=Nt.memoizedState;if(s=o.destroy,i!==null&&rw(i,o.deps)){r.memoizedState=yc(e,n,s,i);return}}mt.flags|=t,r.memoizedState=yc(1|e,n,s,i)}function Lx(t,e){return Ph(8390656,8,t,e)}function aw(t,e){return $p(2048,8,t,e)}function uA(t,e){return $p(4,2,t,e)}function cA(t,e){return $p(4,4,t,e)}function dA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hA(t,e,n){return n=n!=null?n.concat([t]):null,$p(4,4,dA.bind(null,e,t),n)}function lw(){}function fA(t,e){var n=ki();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&rw(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function pA(t,e){var n=ki();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&rw(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function mA(t,e,n){return Xo&21?(Wi(n,e)||(n=vC(),mt.lanes|=n,Ko|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,On=!0),t.memoizedState=n)}function WM(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var i=Jm.transition;Jm.transition={};try{t(!1),e()}finally{Ue=n,Jm.transition=i}}function gA(){return ki().memoizedState}function HM(t,e,n){var i=Ks(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},yA(t))vA(e,n);else if(n=KC(t,e,n,i),n!==null){var r=yn();Fi(n,t,i,r),wA(n,e,i)}}function GM(t,e,n){var i=Ks(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(yA(t))vA(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Wi(a,o)){var l=e.interleaved;l===null?(r.next=r,Qv(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=KC(t,e,r,i),n!==null&&(r=yn(),Fi(n,t,i,r),wA(n,e,i))}}function yA(t){var e=t.alternate;return t===mt||e!==null&&e===mt}function vA(t,e){Vu=wf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wA(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,zv(t,n)}}var xf={readContext:Si,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},XM={readContext:Si,useCallback:function(t,e){return er().memoizedState=[t,e===void 0?null:e],t},useContext:Si,useEffect:Lx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ph(4194308,4,dA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ph(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ph(4,2,t,e)},useMemo:function(t,e){var n=er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=er();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=HM.bind(null,mt,t),[i.memoizedState,t]},useRef:function(t){var e=er();return t={current:t},e.memoizedState=t},useState:$x,useDebugValue:lw,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=$x(!1),e=t[0];return t=WM.bind(null,t[1]),er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=mt,r=er();if(ot){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),zt===null)throw Error(U(349));Xo&30||iA(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Lx(sA.bind(null,i,s,t),[t]),i.flags|=2048,yc(9,rA.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=er(),e=zt.identifierPrefix;if(ot){var n=Wr,i=Ur;n=(i&~(1<<32-zi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=mc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KM={readContext:Si,useCallback:fA,useContext:Si,useEffect:aw,useImperativeHandle:hA,useInsertionEffect:uA,useLayoutEffect:cA,useMemo:pA,useReducer:qm,useRef:lA,useState:function(){return qm(gc)},useDebugValue:lw,useDeferredValue:function(t){var e=ki();return mA(e,Nt.memoizedState,t)},useTransition:function(){var t=qm(gc)[0],e=ki().memoizedState;return[t,e]},useMutableSource:tA,useSyncExternalStore:nA,useId:gA,unstable_isNewReconciler:!1},ZM={readContext:Si,useCallback:fA,useContext:Si,useEffect:aw,useImperativeHandle:hA,useInsertionEffect:uA,useLayoutEffect:cA,useMemo:pA,useReducer:Qm,useRef:lA,useState:function(){return Qm(gc)},useDebugValue:lw,useDeferredValue:function(t){var e=ki();return Nt===null?e.memoizedState=t:mA(e,Nt.memoizedState,t)},useTransition:function(){var t=Qm(gc)[0],e=ki().memoizedState;return[t,e]},useMutableSource:tA,useSyncExternalStore:nA,useId:gA,unstable_isNewReconciler:!1};function Pl(t,e){try{var n="",i=e;do n+=kN(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function eg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function H0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YM=typeof WeakMap=="function"?WeakMap:Map;function xA(t,e,n){n=Gr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Sf||(Sf=!0,ty=i),H0(t,e)},n}function bA(t,e,n){n=Gr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){H0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){H0(t,e),typeof i!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ix(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new YM;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=cD.bind(null,t,e,n),e.then(t,t))}function Bx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zx(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gr(-1,1),e.tag=2,Gs(n,e,1))),n.lanes|=1),t)}var JM=cs.ReactCurrentOwner,On=!1;function hn(t,e,n,i){e.child=t===null?QC(e,null,n,i):Cl(e,t.child,n,i)}function Fx(t,e,n,i,r){n=n.render;var s=e.ref;return el(e,r),i=sw(t,e,n,i,s,r),n=ow(),t!==null&&!On?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,is(t,e,r)):(ot&&n&&Xv(e),e.flags|=1,hn(t,e,i,r),e.child)}function jx(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!gw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,SA(t,e,s,i,r)):(t=_h(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:uc,n(o,i)&&t.ref===e.ref)return is(t,e,r)}return e.flags|=1,t=Zs(s,i),t.ref=e.ref,t.return=e,e.child=t}function SA(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(uc(s,i)&&t.ref===e.ref)if(On=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(On=!0);else return e.lanes=t.lanes,is(t,e,r)}return G0(t,e,n,i,r)}function kA(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Ua,Gn),Gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Je(Ua,Gn),Gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Je(Ua,Gn),Gn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Je(Ua,Gn),Gn|=i;return hn(t,e,r,n),e.child}function EA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function G0(t,e,n,i,r){var s=Dn(n)?Ho:sn.current;return s=kl(e,s),el(e,r),n=sw(t,e,n,i,s,r),i=ow(),t!==null&&!On?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,is(t,e,r)):(ot&&i&&Xv(e),e.flags|=1,hn(t,e,n,r),e.child)}function Vx(t,e,n,i,r){if(Dn(n)){var s=!0;hf(e)}else s=!1;if(el(e,r),e.stateNode===null)Rh(t,e),JC(e,n,i),W0(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Si(u):(u=Dn(n)?Ho:sn.current,u=kl(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Mx(e,o,i,u),xs=!1;var h=e.memoizedState;o.state=h,yf(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Mn.current||xs?(typeof c=="function"&&(U0(e,n,c,i),l=e.memoizedState),(a=xs||Nx(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,ZC(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ri(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Si(l):(l=Dn(n)?Ho:sn.current,l=kl(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Mx(e,o,i,l),xs=!1,h=e.memoizedState,o.state=h,yf(e,i,o,r);var p=e.memoizedState;a!==d||h!==p||Mn.current||xs?(typeof f=="function"&&(U0(e,n,f,i),p=e.memoizedState),(u=xs||Nx(e,n,u,i,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return X0(t,e,n,i,s,r)}function X0(t,e,n,i,r,s){EA(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Px(e,n,!1),is(t,e,s);i=e.stateNode,JM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Cl(e,t.child,null,s),e.child=Cl(e,null,a,s)):hn(t,e,a,s),e.memoizedState=i.state,r&&Px(e,n,!0),e.child}function CA(t){var e=t.stateNode;e.pendingContext?Ax(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ax(t,e.context,!1),tw(t,e.containerInfo)}function Ux(t,e,n,i,r){return El(),Zv(r),e.flags|=256,hn(t,e,n,i),e.child}var K0={dehydrated:null,treeContext:null,retryLane:0};function Z0(t){return{baseLanes:t,cachePool:null,transitions:null}}function AA(t,e,n){var i=e.pendingProps,r=dt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Je(dt,r&1),t===null)return j0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Bp(o,i,0,null),t=Fo(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Z0(n),e.memoizedState=K0,t):uw(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return qM(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Zs(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Zs(a,s):(s=Fo(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Z0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=K0,i}return s=t.child,t=s.sibling,i=Zs(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function uw(t,e){return e=Bp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dd(t,e,n,i){return i!==null&&Zv(i),Cl(e,t.child,null,n),t=uw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qM(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=eg(Error(U(422))),Dd(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Bp({mode:"visible",children:i.children},r,0,null),s=Fo(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Cl(e,t.child,null,o),e.child.memoizedState=Z0(o),e.memoizedState=K0,s);if(!(e.mode&1))return Dd(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(U(419)),i=eg(s,i,void 0),Dd(t,e,o,i)}if(a=(o&t.childLanes)!==0,On||a){if(i=zt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ns(t,r),Fi(i,t,r,-1))}return mw(),i=eg(Error(U(421))),Dd(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=dD.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Jn=Hs(r.nextSibling),Qn=e,ot=!0,Mi=null,t!==null&&(hi[fi++]=Ur,hi[fi++]=Wr,hi[fi++]=Go,Ur=t.id,Wr=t.overflow,Go=e),e=uw(e,i.children),e.flags|=4096,e)}function Wx(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),V0(t.return,e,n)}function tg(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function PA(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(hn(t,e,i.children,n),i=dt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wx(t,n,e);else if(t.tag===19)Wx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Je(dt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&vf(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),tg(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&vf(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}tg(e,!0,n,null,s);break;case"together":tg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function is(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ko|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Zs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QM(t,e,n){switch(e.tag){case 3:CA(e),El();break;case 5:eA(e);break;case 1:Dn(e.type)&&hf(e);break;case 4:tw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Je(mf,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Je(dt,dt.current&1),e.flags|=128,null):n&e.child.childLanes?AA(t,e,n):(Je(dt,dt.current&1),t=is(t,e,n),t!==null?t.sibling:null);Je(dt,dt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return PA(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Je(dt,dt.current),i)break;return null;case 22:case 23:return e.lanes=0,kA(t,e,n)}return is(t,e,n)}var RA,Y0,TA,OA;RA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Y0=function(){};TA=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,No(yr.current);var s=null;switch(n){case"input":r=v0(t,r),i=v0(t,i),s=[];break;case"select":r=yt({},r,{value:void 0}),i=yt({},i,{value:void 0}),s=[];break;case"textarea":r=b0(t,r),i=b0(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=cf)}k0(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(nc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(nc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};OA=function(t,e,n,i){n!==i&&(e.flags|=4)};function uu(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function eD(t,e,n){var i=e.pendingProps;switch(Kv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return Dn(e.type)&&df(),Qt(e),null;case 3:return i=e.stateNode,Al(),rt(Mn),rt(sn),iw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Nd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mi!==null&&(ry(Mi),Mi=null))),Y0(t,e),Qt(e),null;case 5:nw(e);var r=No(pc.current);if(n=e.type,t!==null&&e.stateNode!=null)TA(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return Qt(e),null}if(t=No(yr.current),Nd(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[ur]=e,i[hc]=s,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":case"embed":Qe("load",i);break;case"video":case"audio":for(r=0;r<Pu.length;r++)Qe(Pu[r],i);break;case"source":Qe("error",i);break;case"img":case"image":case"link":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"input":Q1(i,s),Qe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",i);break;case"textarea":tx(i,s),Qe("invalid",i)}k0(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&_d(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_d(i.textContent,a,t),r=["children",""+a]):nc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qe("scroll",i)}switch(n){case"input":kd(i),ex(i,s,!0);break;case"textarea":kd(i),nx(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=cf)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[ur]=e,t[hc]=i,RA(t,e,!1,!1),e.stateNode=t;e:{switch(o=E0(n,i),n){case"dialog":Qe("cancel",t),Qe("close",t),r=i;break;case"iframe":case"object":case"embed":Qe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Pu.length;r++)Qe(Pu[r],t);r=i;break;case"source":Qe("error",t),r=i;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),r=i;break;case"details":Qe("toggle",t),r=i;break;case"input":Q1(t,i),r=v0(t,i),Qe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=yt({},i,{value:void 0}),Qe("invalid",t);break;case"textarea":tx(t,i),r=b0(t,i),Qe("invalid",t);break;default:r=i}k0(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?oC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ic(t,l):typeof l=="number"&&ic(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qe("scroll",t):l!=null&&Mv(t,s,l,o))}switch(n){case"input":kd(t),ex(t,i,!1);break;case"textarea":kd(t),nx(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Qs(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Ya(t,!!i.multiple,s,!1):i.defaultValue!=null&&Ya(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=cf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)OA(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=No(pc.current),No(yr.current),Nd(e)){if(i=e.stateNode,n=e.memoizedProps,i[ur]=e,(s=i.nodeValue!==n)&&(t=Qn,t!==null))switch(t.tag){case 3:_d(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_d(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ur]=e,e.stateNode=i}return Qt(e),null;case 13:if(rt(dt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&Jn!==null&&e.mode&1&&!(e.flags&128))XC(),El(),e.flags|=98560,s=!1;else if(s=Nd(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[ur]=e}else El(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),s=!1}else Mi!==null&&(ry(Mi),Mi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?$t===0&&($t=3):mw())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return Al(),Y0(t,e),t===null&&cc(e.stateNode.containerInfo),Qt(e),null;case 10:return qv(e.type._context),Qt(e),null;case 17:return Dn(e.type)&&df(),Qt(e),null;case 19:if(rt(dt),s=e.memoizedState,s===null)return Qt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)uu(s,!1);else{if($t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vf(t),o!==null){for(e.flags|=128,uu(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Je(dt,dt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Et()>Rl&&(e.flags|=128,i=!0,uu(s,!1),e.lanes=4194304)}else{if(!i)if(t=vf(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),uu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ot)return Qt(e),null}else 2*Et()-s.renderingStartTime>Rl&&n!==1073741824&&(e.flags|=128,i=!0,uu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Et(),e.sibling=null,n=dt.current,Je(dt,i?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return pw(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Gn&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function tD(t,e){switch(Kv(e),e.tag){case 1:return Dn(e.type)&&df(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Al(),rt(Mn),rt(sn),iw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nw(e),null;case 13:if(rt(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));El()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rt(dt),null;case 4:return Al(),null;case 10:return qv(e.type._context),null;case 22:case 23:return pw(),null;case 24:return null;default:return null}}var $d=!1,nn=!1,nD=typeof WeakSet=="function"?WeakSet:Set,re=null;function Va(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){wt(t,e,i)}else n.current=null}function J0(t,e,n){try{n()}catch(i){wt(t,e,i)}}var Hx=!1;function iD(t,e){if(D0=af,t=DC(),Gv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for($0={focusedElem:t,selectionRange:n},af=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ri(e.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(x){wt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return p=Hx,Hx=!1,p}function Uu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&J0(e,n,s)}r=r.next}while(r!==i)}}function Lp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function q0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _A(t){var e=t.alternate;e!==null&&(t.alternate=null,_A(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ur],delete e[hc],delete e[B0],delete e[zM],delete e[FM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NA(t){return t.tag===5||t.tag===3||t.tag===4}function Gx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Q0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cf));else if(i!==4&&(t=t.child,t!==null))for(Q0(t,e,n),t=t.sibling;t!==null;)Q0(t,e,n),t=t.sibling}function ey(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ey(t,e,n),t=t.sibling;t!==null;)ey(t,e,n),t=t.sibling}var Ft=null,Ni=!1;function ps(t,e,n){for(n=n.child;n!==null;)MA(t,e,n),n=n.sibling}function MA(t,e,n){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(Rp,n)}catch{}switch(n.tag){case 5:nn||Va(n,e);case 6:var i=Ft,r=Ni;Ft=null,ps(t,e,n),Ft=i,Ni=r,Ft!==null&&(Ni?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(Ni?(t=Ft,n=n.stateNode,t.nodeType===8?Km(t.parentNode,n):t.nodeType===1&&Km(t,n),ac(t)):Km(Ft,n.stateNode));break;case 4:i=Ft,r=Ni,Ft=n.stateNode.containerInfo,Ni=!0,ps(t,e,n),Ft=i,Ni=r;break;case 0:case 11:case 14:case 15:if(!nn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&J0(n,e,o),r=r.next}while(r!==i)}ps(t,e,n);break;case 1:if(!nn&&(Va(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){wt(n,e,a)}ps(t,e,n);break;case 21:ps(t,e,n);break;case 22:n.mode&1?(nn=(i=nn)||n.memoizedState!==null,ps(t,e,n),nn=i):ps(t,e,n);break;default:ps(t,e,n)}}function Xx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nD),e.forEach(function(i){var r=hD.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ci(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ft=a.stateNode,Ni=!1;break e;case 3:Ft=a.stateNode.containerInfo,Ni=!0;break e;case 4:Ft=a.stateNode.containerInfo,Ni=!0;break e}a=a.return}if(Ft===null)throw Error(U(160));MA(s,o,r),Ft=null,Ni=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){wt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DA(e,t),e=e.sibling}function DA(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ci(e,t),Zi(t),i&4){try{Uu(3,t,t.return),Lp(3,t)}catch(m){wt(t,t.return,m)}try{Uu(5,t,t.return)}catch(m){wt(t,t.return,m)}}break;case 1:Ci(e,t),Zi(t),i&512&&n!==null&&Va(n,n.return);break;case 5:if(Ci(e,t),Zi(t),i&512&&n!==null&&Va(n,n.return),t.flags&32){var r=t.stateNode;try{ic(r,"")}catch(m){wt(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tC(r,s),E0(a,o);var u=E0(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?oC(r,d):c==="dangerouslySetInnerHTML"?rC(r,d):c==="children"?ic(r,d):Mv(r,c,d,u)}switch(a){case"input":w0(r,s);break;case"textarea":nC(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ya(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Ya(r,!!s.multiple,s.defaultValue,!0):Ya(r,!!s.multiple,s.multiple?[]:"",!1))}r[hc]=s}catch(m){wt(t,t.return,m)}}break;case 6:if(Ci(e,t),Zi(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){wt(t,t.return,m)}}break;case 3:if(Ci(e,t),Zi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ac(e.containerInfo)}catch(m){wt(t,t.return,m)}break;case 4:Ci(e,t),Zi(t);break;case 13:Ci(e,t),Zi(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(hw=Et())),i&4&&Xx(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(nn=(u=nn)||c,Ci(e,t),nn=u):Ci(e,t),Zi(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(re=t,c=t.child;c!==null;){for(d=re=c;re!==null;){switch(h=re,f=h.child,h.tag){case 0:case 11:case 14:case 15:Uu(4,h,h.return);break;case 1:Va(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){wt(i,n,m)}}break;case 5:Va(h,h.return);break;case 22:if(h.memoizedState!==null){Zx(d);continue}}f!==null?(f.return=h,re=f):Zx(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sC("display",o))}catch(m){wt(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){wt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ci(e,t),Zi(t),i&4&&Xx(t);break;case 21:break;default:Ci(e,t),Zi(t)}}function Zi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NA(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ic(r,""),i.flags&=-33);var s=Gx(t);ey(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Gx(t);Q0(t,a,o);break;default:throw Error(U(161))}}catch(l){wt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rD(t,e,n){re=t,$A(t)}function $A(t,e,n){for(var i=(t.mode&1)!==0;re!==null;){var r=re,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||$d;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||nn;a=$d;var u=nn;if($d=o,(nn=l)&&!u)for(re=r;re!==null;)o=re,l=o.child,o.tag===22&&o.memoizedState!==null?Yx(r):l!==null?(l.return=o,re=l):Yx(r);for(;s!==null;)re=s,$A(s),s=s.sibling;re=r,$d=a,nn=u}Kx(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,re=s):Kx(t)}}function Kx(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nn||Lp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!nn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Ri(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_x(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_x(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&ac(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}nn||e.flags&512&&q0(e)}catch(h){wt(e,e.return,h)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Zx(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function Yx(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lp(4,e)}catch(l){wt(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){wt(e,r,l)}}var s=e.return;try{q0(e)}catch(l){wt(e,s,l)}break;case 5:var o=e.return;try{q0(e)}catch(l){wt(e,o,l)}}}catch(l){wt(e,e.return,l)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var sD=Math.ceil,bf=cs.ReactCurrentDispatcher,cw=cs.ReactCurrentOwner,wi=cs.ReactCurrentBatchConfig,Be=0,zt=null,Rt=null,Kt=0,Gn=0,Ua=fo(0),$t=0,vc=null,Ko=0,Ip=0,dw=0,Wu=null,Rn=null,hw=0,Rl=1/0,Rr=null,Sf=!1,ty=null,Xs=null,Ld=!1,Is=null,kf=0,Hu=0,ny=null,Th=-1,Oh=0;function yn(){return Be&6?Et():Th!==-1?Th:Th=Et()}function Ks(t){return t.mode&1?Be&2&&Kt!==0?Kt&-Kt:VM.transition!==null?(Oh===0&&(Oh=vC()),Oh):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:CC(t.type)),t):1}function Fi(t,e,n,i){if(50<Hu)throw Hu=0,ny=null,Error(U(185));ed(t,n,i),(!(Be&2)||t!==zt)&&(t===zt&&(!(Be&2)&&(Ip|=n),$t===4&&Ps(t,Kt)),$n(t,i),n===1&&Be===0&&!(e.mode&1)&&(Rl=Et()+500,Mp&&po()))}function $n(t,e){var n=t.callbackNode;VN(t,e);var i=of(t,t===zt?Kt:0);if(i===0)n!==null&&sx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&sx(n),e===1)t.tag===0?jM(Jx.bind(null,t)):WC(Jx.bind(null,t)),IM(function(){!(Be&6)&&po()}),n=null;else{switch(wC(i)){case 1:n=Bv;break;case 4:n=gC;break;case 16:n=sf;break;case 536870912:n=yC;break;default:n=sf}n=UA(n,LA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LA(t,e){if(Th=-1,Oh=0,Be&6)throw Error(U(327));var n=t.callbackNode;if(tl()&&t.callbackNode!==n)return null;var i=of(t,t===zt?Kt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ef(t,i);else{e=i;var r=Be;Be|=2;var s=BA();(zt!==t||Kt!==e)&&(Rr=null,Rl=Et()+500,zo(t,e));do try{lD();break}catch(a){IA(t,a)}while(1);Jv(),bf.current=s,Be=r,Rt!==null?e=0:(zt=null,Kt=0,e=$t)}if(e!==0){if(e===2&&(r=T0(t),r!==0&&(i=r,e=iy(t,r))),e===1)throw n=vc,zo(t,0),Ps(t,i),$n(t,Et()),n;if(e===6)Ps(t,i);else{if(r=t.current.alternate,!(i&30)&&!oD(r)&&(e=Ef(t,i),e===2&&(s=T0(t),s!==0&&(i=s,e=iy(t,s))),e===1))throw n=vc,zo(t,0),Ps(t,i),$n(t,Et()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:Eo(t,Rn,Rr);break;case 3:if(Ps(t,i),(i&130023424)===i&&(e=hw+500-Et(),10<e)){if(of(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){yn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=I0(Eo.bind(null,t,Rn,Rr),e);break}Eo(t,Rn,Rr);break;case 4:if(Ps(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-zi(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Et()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*sD(i/1960))-i,10<i){t.timeoutHandle=I0(Eo.bind(null,t,Rn,Rr),i);break}Eo(t,Rn,Rr);break;case 5:Eo(t,Rn,Rr);break;default:throw Error(U(329))}}}return $n(t,Et()),t.callbackNode===n?LA.bind(null,t):null}function iy(t,e){var n=Wu;return t.current.memoizedState.isDehydrated&&(zo(t,e).flags|=256),t=Ef(t,e),t!==2&&(e=Rn,Rn=n,e!==null&&ry(e)),t}function ry(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function oD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Wi(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ps(t,e){for(e&=~dw,e&=~Ip,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zi(e),i=1<<n;t[n]=-1,e&=~i}}function Jx(t){if(Be&6)throw Error(U(327));tl();var e=of(t,0);if(!(e&1))return $n(t,Et()),null;var n=Ef(t,e);if(t.tag!==0&&n===2){var i=T0(t);i!==0&&(e=i,n=iy(t,i))}if(n===1)throw n=vc,zo(t,0),Ps(t,e),$n(t,Et()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Eo(t,Rn,Rr),$n(t,Et()),null}function fw(t,e){var n=Be;Be|=1;try{return t(e)}finally{Be=n,Be===0&&(Rl=Et()+500,Mp&&po())}}function Zo(t){Is!==null&&Is.tag===0&&!(Be&6)&&tl();var e=Be;Be|=1;var n=wi.transition,i=Ue;try{if(wi.transition=null,Ue=1,t)return t()}finally{Ue=i,wi.transition=n,Be=e,!(Be&6)&&po()}}function pw(){Gn=Ua.current,rt(Ua)}function zo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LM(n)),Rt!==null)for(n=Rt.return;n!==null;){var i=n;switch(Kv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&df();break;case 3:Al(),rt(Mn),rt(sn),iw();break;case 5:nw(i);break;case 4:Al();break;case 13:rt(dt);break;case 19:rt(dt);break;case 10:qv(i.type._context);break;case 22:case 23:pw()}n=n.return}if(zt=t,Rt=t=Zs(t.current,null),Kt=Gn=e,$t=0,vc=null,dw=Ip=Ko=0,Rn=Wu=null,_o!==null){for(e=0;e<_o.length;e++)if(n=_o[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}_o=null}return t}function IA(t,e){do{var n=Rt;try{if(Jv(),Ah.current=xf,wf){for(var i=mt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}wf=!1}if(Xo=0,It=Nt=mt=null,Vu=!1,mc=0,cw.current=null,n===null||n.return===null){$t=1,vc=e,Rt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Bx(o);if(f!==null){f.flags&=-257,zx(f,o,a,s,e),f.mode&1&&Ix(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){Ix(s,u,e),mw();break e}l=Error(U(426))}}else if(ot&&a.mode&1){var v=Bx(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),zx(v,o,a,s,e),Zv(Pl(l,a));break e}}s=l=Pl(l,a),$t!==4&&($t=2),Wu===null?Wu=[s]:Wu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=xA(s,l,e);Ox(s,g);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xs===null||!Xs.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=bA(s,a,e);Ox(s,x);break e}}s=s.return}while(s!==null)}FA(n)}catch(k){e=k,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(1)}function BA(){var t=bf.current;return bf.current=xf,t===null?xf:t}function mw(){($t===0||$t===3||$t===2)&&($t=4),zt===null||!(Ko&268435455)&&!(Ip&268435455)||Ps(zt,Kt)}function Ef(t,e){var n=Be;Be|=2;var i=BA();(zt!==t||Kt!==e)&&(Rr=null,zo(t,e));do try{aD();break}catch(r){IA(t,r)}while(1);if(Jv(),Be=n,bf.current=i,Rt!==null)throw Error(U(261));return zt=null,Kt=0,$t}function aD(){for(;Rt!==null;)zA(Rt)}function lD(){for(;Rt!==null&&!MN();)zA(Rt)}function zA(t){var e=VA(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,e===null?FA(t):Rt=e,cw.current=null}function FA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tD(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$t=6,Rt=null;return}}else if(n=eD(n,e,Gn),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);$t===0&&($t=5)}function Eo(t,e,n){var i=Ue,r=wi.transition;try{wi.transition=null,Ue=1,uD(t,e,n,i)}finally{wi.transition=r,Ue=i}return null}function uD(t,e,n,i){do tl();while(Is!==null);if(Be&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(UN(t,s),t===zt&&(Rt=zt=null,Kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ld||(Ld=!0,UA(sf,function(){return tl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wi.transition,wi.transition=null;var o=Ue;Ue=1;var a=Be;Be|=4,cw.current=null,iD(t,n),DA(n,t),TM($0),af=!!D0,$0=D0=null,t.current=n,rD(n),DN(),Be=a,Ue=o,wi.transition=s}else t.current=n;if(Ld&&(Ld=!1,Is=t,kf=r),s=t.pendingLanes,s===0&&(Xs=null),IN(n.stateNode),$n(t,Et()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Sf)throw Sf=!1,t=ty,ty=null,t;return kf&1&&t.tag!==0&&tl(),s=t.pendingLanes,s&1?t===ny?Hu++:(Hu=0,ny=t):Hu=0,po(),null}function tl(){if(Is!==null){var t=wC(kf),e=wi.transition,n=Ue;try{if(wi.transition=null,Ue=16>t?16:t,Is===null)var i=!1;else{if(t=Is,Is=null,kf=0,Be&6)throw Error(U(331));var r=Be;for(Be|=4,re=t.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(re=u;re!==null;){var c=re;switch(c.tag){case 0:case 11:case 15:Uu(8,c,s)}var d=c.child;if(d!==null)d.return=c,re=d;else for(;re!==null;){c=re;var h=c.sibling,f=c.return;if(_A(c),c===u){re=null;break}if(h!==null){h.return=f,re=h;break}re=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Uu(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,re=g;break e}re=s.return}}var y=t.current;for(re=y;re!==null;){o=re;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,re=w;else e:for(o=y;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Lp(9,a)}}catch(k){wt(a,a.return,k)}if(a===o){re=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,re=x;break e}re=a.return}}if(Be=r,po(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(Rp,t)}catch{}i=!0}return i}finally{Ue=n,wi.transition=e}}return!1}function qx(t,e,n){e=Pl(n,e),e=xA(t,e,1),t=Gs(t,e,1),e=yn(),t!==null&&(ed(t,1,e),$n(t,e))}function wt(t,e,n){if(t.tag===3)qx(t,t,n);else for(;e!==null;){if(e.tag===3){qx(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xs===null||!Xs.has(i))){t=Pl(n,t),t=bA(e,t,1),e=Gs(e,t,1),t=yn(),e!==null&&(ed(e,1,t),$n(e,t));break}}e=e.return}}function cD(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Kt&n)===n&&($t===4||$t===3&&(Kt&130023424)===Kt&&500>Et()-hw?zo(t,0):dw|=n),$n(t,e)}function jA(t,e){e===0&&(t.mode&1?(e=Ad,Ad<<=1,!(Ad&130023424)&&(Ad=4194304)):e=1);var n=yn();t=ns(t,e),t!==null&&(ed(t,e,n),$n(t,n))}function dD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jA(t,n)}function hD(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),jA(t,n)}var VA;VA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mn.current)On=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return On=!1,QM(t,e,n);On=!!(t.flags&131072)}else On=!1,ot&&e.flags&1048576&&HC(e,pf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Rh(t,e),t=e.pendingProps;var r=kl(e,sn.current);el(e,n),r=sw(null,e,i,t,r,n);var s=ow();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(i)?(s=!0,hf(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ew(e),r.updater=Dp,e.stateNode=r,r._reactInternals=e,W0(e,i,t,n),e=X0(null,e,i,!0,s,n)):(e.tag=0,ot&&s&&Xv(e),hn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Rh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=pD(i),t=Ri(i,t),r){case 0:e=G0(null,e,i,t,n);break e;case 1:e=Vx(null,e,i,t,n);break e;case 11:e=Fx(null,e,i,t,n);break e;case 14:e=jx(null,e,i,Ri(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ri(i,r),G0(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ri(i,r),Vx(t,e,i,r,n);case 3:e:{if(CA(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,ZC(t,e),yf(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Pl(Error(U(423)),e),e=Ux(t,e,i,n,r);break e}else if(i!==r){r=Pl(Error(U(424)),e),e=Ux(t,e,i,n,r);break e}else for(Jn=Hs(e.stateNode.containerInfo.firstChild),Qn=e,ot=!0,Mi=null,n=QC(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(El(),i===r){e=is(t,e,n);break e}hn(t,e,i,n)}e=e.child}return e;case 5:return eA(e),t===null&&j0(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,L0(i,r)?o=null:s!==null&&L0(i,s)&&(e.flags|=32),EA(t,e),hn(t,e,o,n),e.child;case 6:return t===null&&j0(e),null;case 13:return AA(t,e,n);case 4:return tw(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Cl(e,null,i,n):hn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ri(i,r),Fx(t,e,i,r,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Je(mf,i._currentValue),i._currentValue=o,s!==null)if(Wi(s.value,o)){if(s.children===r.children&&!Mn.current){e=is(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Gr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),V0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),V0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,el(e,n),r=Si(r),i=i(r),e.flags|=1,hn(t,e,i,n),e.child;case 14:return i=e.type,r=Ri(i,e.pendingProps),r=Ri(i.type,r),jx(t,e,i,r,n);case 15:return SA(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ri(i,r),Rh(t,e),e.tag=1,Dn(i)?(t=!0,hf(e)):t=!1,el(e,n),JC(e,i,r),W0(e,i,r,n),X0(null,e,i,!0,t,n);case 19:return PA(t,e,n);case 22:return kA(t,e,n)}throw Error(U(156,e.tag))};function UA(t,e){return mC(t,e)}function fD(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(t,e,n,i){return new fD(t,e,n,i)}function gw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pD(t){if(typeof t=="function")return gw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$v)return 11;if(t===Lv)return 14}return 2}function Zs(t,e){var n=t.alternate;return n===null?(n=gi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _h(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")gw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ma:return Fo(n.children,r,s,e);case Dv:o=8,r|=8;break;case p0:return t=gi(12,n,e,r|2),t.elementType=p0,t.lanes=s,t;case m0:return t=gi(13,n,e,r),t.elementType=m0,t.lanes=s,t;case g0:return t=gi(19,n,e,r),t.elementType=g0,t.lanes=s,t;case qE:return Bp(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YE:o=10;break e;case JE:o=9;break e;case $v:o=11;break e;case Lv:o=14;break e;case ws:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=gi(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Fo(t,e,n,i){return t=gi(7,t,i,e),t.lanes=n,t}function Bp(t,e,n,i){return t=gi(22,t,i,e),t.elementType=qE,t.lanes=n,t.stateNode={isHidden:!1},t}function ng(t,e,n){return t=gi(6,t,null,e),t.lanes=n,t}function ig(t,e,n){return e=gi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mD(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Im(0),this.expirationTimes=Im(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Im(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function yw(t,e,n,i,r,s,o,a,l){return t=new mD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ew(s),t}function gD(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Na,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function WA(t){if(!t)return eo;t=t._reactInternals;e:{if(la(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Dn(n))return UC(t,n,e)}return e}function HA(t,e,n,i,r,s,o,a,l){return t=yw(n,i,!0,t,r,s,o,a,l),t.context=WA(null),n=t.current,i=yn(),r=Ks(n),s=Gr(i,r),s.callback=e??null,Gs(n,s,r),t.current.lanes=r,ed(t,r,i),$n(t,i),t}function zp(t,e,n,i){var r=e.current,s=yn(),o=Ks(r);return n=WA(n),e.context===null?e.context=n:e.pendingContext=n,e=Gr(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Gs(r,e,o),t!==null&&(Fi(t,r,o,s),Ch(t,r,o)),o}function Cf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vw(t,e){Qx(t,e),(t=t.alternate)&&Qx(t,e)}function yD(){return null}var GA=typeof reportError=="function"?reportError:function(t){console.error(t)};function ww(t){this._internalRoot=t}Fp.prototype.render=ww.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));zp(t,e,null,null)};Fp.prototype.unmount=ww.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zo(function(){zp(null,t,null,null)}),e[ts]=null}};function Fp(t){this._internalRoot=t}Fp.prototype.unstable_scheduleHydration=function(t){if(t){var e=SC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<As.length&&e!==0&&e<As[n].priority;n++);As.splice(n,0,t),n===0&&EC(t)}};function xw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eb(){}function vD(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Cf(o);s.call(u)}}var o=HA(e,i,t,0,null,!1,!1,"",eb);return t._reactRootContainer=o,t[ts]=o.current,cc(t.nodeType===8?t.parentNode:t),Zo(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Cf(l);a.call(u)}}var l=yw(t,0,!1,null,null,!1,!1,"",eb);return t._reactRootContainer=l,t[ts]=l.current,cc(t.nodeType===8?t.parentNode:t),Zo(function(){zp(e,l,n,i)}),l}function Vp(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Cf(o);a.call(l)}}zp(e,o,t,r)}else o=vD(n,e,t,r,i);return Cf(o)}xC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Au(e.pendingLanes);n!==0&&(zv(e,n|1),$n(e,Et()),!(Be&6)&&(Rl=Et()+500,po()))}break;case 13:Zo(function(){var i=ns(t,1);if(i!==null){var r=yn();Fi(i,t,1,r)}}),vw(t,1)}};Fv=function(t){if(t.tag===13){var e=ns(t,134217728);if(e!==null){var n=yn();Fi(e,t,134217728,n)}vw(t,134217728)}};bC=function(t){if(t.tag===13){var e=Ks(t),n=ns(t,e);if(n!==null){var i=yn();Fi(n,t,e,i)}vw(t,e)}};SC=function(){return Ue};kC=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};A0=function(t,e,n){switch(e){case"input":if(w0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Np(i);if(!r)throw Error(U(90));eC(i),w0(i,r)}}}break;case"textarea":nC(t,n);break;case"select":e=n.value,e!=null&&Ya(t,!!n.multiple,e,!1)}};uC=fw;cC=Zo;var wD={usingClientEntryPoint:!1,Events:[nd,Ia,Np,aC,lC,fw]},cu={findFiberByHostInstance:Oo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xD={bundleType:cu.bundleType,version:cu.version,rendererPackageName:cu.rendererPackageName,rendererConfig:cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fC(t),t===null?null:t.stateNode},findFiberByHostInstance:cu.findFiberByHostInstance||yD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{Rp=Id.inject(xD),gr=Id}catch{}}ti.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wD;ti.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xw(e))throw Error(U(200));return gD(t,e,null,n)};ti.createRoot=function(t,e){if(!xw(t))throw Error(U(299));var n=!1,i="",r=GA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=yw(t,1,!1,null,null,n,!1,i,r),t[ts]=e.current,cc(t.nodeType===8?t.parentNode:t),new ww(e)};ti.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=fC(e),t=t===null?null:t.stateNode,t};ti.flushSync=function(t){return Zo(t)};ti.hydrate=function(t,e,n){if(!jp(e))throw Error(U(200));return Vp(null,t,e,!0,n)};ti.hydrateRoot=function(t,e,n){if(!xw(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=GA;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=HA(e,null,t,1,n??null,r,!1,s,o),t[ts]=e.current,cc(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Fp(e)};ti.render=function(t,e,n){if(!jp(e))throw Error(U(200));return Vp(null,t,e,!1,n)};ti.unmountComponentAtNode=function(t){if(!jp(t))throw Error(U(40));return t._reactRootContainer?(Zo(function(){Vp(null,null,t,!1,function(){t._reactRootContainer=null,t[ts]=null})}),!0):!1};ti.unstable_batchedUpdates=fw;ti.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!jp(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Vp(t,e,n,!1,i)};ti.version="18.2.0-next-9e3b772b8-20220608";function XA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XA)}catch(t){console.error(t)}}XA(),HE.exports=ti;var ua=HE.exports;const KA=qc(ua);var tb=ua;h0.createRoot=tb.createRoot,h0.hydrateRoot=tb.hydrateRoot;function bD(t,{insertAt:e}={}){if(!t||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}bD(`[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 6px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:-3px;margin-right:4px}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:-1px}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:auto;border:none;cursor:pointer;outline:none;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:auto}[data-sonner-toast] [data-cancel]{color:var(--color);background:var(--border-color)}[data-sonner-toast] [data-close-button]{position:absolute;left:0;top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:translate(-35%,-35%);border-radius:50%;opacity:0;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]{opacity:1}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}
`);var SD=t=>{switch(t){case"success":return CD;case"error":return AD;default:return null}},kD=Array(12).fill(0),ED=({visible:t})=>q.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},q.createElement("div",{className:"sonner-spinner"},kD.map((e,n)=>q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),CD=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),AD=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sy=0,PD=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...i}=t,r=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:sy++;return this.toasts.find(s=>s.id===r)?this.toasts=this.toasts.map(s=>s.id===r?(this.publish({...s,...t,id:r,title:n}),{...s,...t,id:r,title:n}):s):this.addToast({title:n,...i,id:r}),r},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.promise=(t,e)=>{let n=this.create({...e,promise:t,type:"loading",message:e.loading});return(t instanceof Promise?t:t()).then(i=>{let r=typeof e.success=="function"?e.success(i):e.success;this.create({id:n,type:"success",message:r})}).catch(i=>{let r=typeof e.error=="function"?e.error(i):e.error;this.create({id:n,type:"error",message:r})}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||sy++;this.publish({jsx:t(n),id:n,...e})},this.subscribers=[],this.toasts=[]}},bs=new PD,RD=(t,e)=>{let n=(e==null?void 0:e.id)||sy++;return bs.addToast({title:t,...e,id:n}),n},TD=RD,Up=Object.assign(TD,{success:bs.success,error:bs.error,custom:bs.custom,message:bs.message,promise:bs.promise,dismiss:bs.dismiss}),OD=3,_D="32px",ND=4e3,MD=356,ZA=14,DD=20,$D=200,LD=t=>{let{invert:e,toast:n,interacting:i,setHeights:r,visibleToasts:s,heights:o,index:a,toasts:l,expanded:u,removeToast:c,closeButton:d,style:h,className:f="",descriptionClassName:p="",duration:m,position:v,expandByDefault:g}=t,[y,w]=q.useState(!1),[x,k]=q.useState(!1),[A,P]=q.useState(!1),[E,R]=q.useState(!1),[N,T]=q.useState(0),[B,I]=q.useState(0),_=q.useRef(null),D=a===0,z=a+1<=s,L=n.type,O=n.className||"",$=n.descriptionClassName||"",F=q.useMemo(()=>o.findIndex(se=>se.toastId===n.id)||0,[o,n.id]),Y=q.useMemo(()=>n.duration||m||ND,[n.duration,m]),ie=q.useRef(0),ce=q.useRef(0),ve=q.useRef(Y),be=q.useRef(0),we=q.useRef(null),[Q,ge]=v.split("-"),_e=q.useMemo(()=>o.reduce((se,Pe,bt)=>bt>=F?se:se+Pe.height,0),[o,F]),ke=n.invert||e,Se=L==="loading";ce.current=q.useMemo(()=>F*ZA+_e,[F,_e]),q.useEffect(()=>{w(!0)},[]),q.useLayoutEffect(()=>{if(!y)return;let se=_.current,Pe=se.style.height;se.style.height="auto";let bt=se.getBoundingClientRect().height;se.style.height=Pe,I(bt),r(ln=>ln.find(Bn=>Bn.toastId===n.id)?ln.map(Bn=>Bn.toastId===n.id?{...Bn,height:bt}:Bn):[{toastId:n.id,height:bt},...ln])},[y,n.title,n.description,r,n.id]);let xe=q.useCallback(()=>{k(!0),T(ce.current),r(se=>se.filter(Pe=>Pe.toastId!==n.id)),setTimeout(()=>{c(n)},$D)},[n,c,r,ce]);return q.useEffect(()=>{if(n.promise&&L==="loading"||n.duration===1/0)return;let se;return u||i?(()=>{if(be.current<ie.current){let Pe=new Date().getTime()-ie.current;ve.current=ve.current-Pe}be.current=new Date().getTime()})():(ie.current=new Date().getTime(),se=setTimeout(()=>{var Pe;(Pe=n.onAutoClose)==null||Pe.call(n,n),xe()},ve.current)),()=>clearTimeout(se)},[u,i,g,n,Y,xe,n.promise,L]),q.useEffect(()=>{let se=_.current;if(se){let Pe=se.getBoundingClientRect().height;return I(Pe),r(bt=>[{toastId:n.id,height:Pe},...bt]),()=>r(bt=>bt.filter(ln=>ln.toastId!==n.id))}},[r,n.id]),q.useEffect(()=>{n.delete&&xe()},[xe,n.delete]),q.createElement("li",{"aria-live":n.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:_,className:f+" "+O,"data-sonner-toast":"","data-styled":!n.jsx,"data-mounted":y,"data-promise":!!n.promise,"data-removed":x,"data-visible":z,"data-y-position":Q,"data-x-position":ge,"data-index":a,"data-front":D,"data-swiping":A,"data-type":L,"data-invert":ke,"data-swipe-out":E,"data-expanded":!!(u||g&&y),style:{"--index":a,"--toasts-before":a,"--z-index":l.length-a,"--offset":`${x?N:ce.current}px`,"--initial-height":g?"auto":`${B}px`,...h,...n.style},onPointerDown:se=>{Se||(T(ce.current),se.target.setPointerCapture(se.pointerId),se.target.tagName!=="BUTTON"&&(P(!0),we.current={x:se.clientX,y:se.clientY}))},onPointerUp:()=>{var se,Pe,bt;if(E)return;we.current=null;let ln=Number(((se=_.current)==null?void 0:se.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(ln)>=DD){T(ce.current),(Pe=n.onDismiss)==null||Pe.call(n,n),xe(),R(!0);return}(bt=_.current)==null||bt.style.setProperty("--swipe-amount","0px"),P(!1)},onPointerMove:se=>{var Pe;if(!we.current)return;let bt=se.clientY-we.current.y,ln=se.clientX-we.current.x,Bn=(Q==="top"?Math.min:Math.max)(0,bt),wd=se.pointerType==="touch"?10:2;Math.abs(Bn)>wd?(Pe=_.current)==null||Pe.style.setProperty("--swipe-amount",`${bt}px`):Math.abs(ln)>wd&&(we.current=null)}},d&&!n.jsx?q.createElement("button",{"aria-label":"Close toast","data-disabled":Se,"data-close-button":!0,onClick:Se?void 0:()=>{var se;xe(),(se=n.onDismiss)==null||se.call(n,n)}},q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,n.jsx||q.isValidElement(n.title)?n.jsx||n.title:q.createElement(q.Fragment,null,L||n.icon||n.promise?q.createElement("div",{"data-icon":""},n.promise?q.createElement(ED,{visible:L==="loading"}):null,n.icon||SD(L)):null,q.createElement("div",{"data-content":""},q.createElement("div",{"data-title":""},n.title),n.description?q.createElement("div",{"data-description":"",className:p+$},n.description):null),n.cancel?q.createElement("button",{"data-button":!0,"data-cancel":!0,onClick:()=>{var se;xe(),(se=n.cancel)!=null&&se.onClick&&n.cancel.onClick()}},n.cancel.label):null,n.action?q.createElement("button",{"data-button":"",onClick:se=>{var Pe;(Pe=n.action)==null||Pe.onClick(se),!se.defaultPrevented&&xe()}},n.action.label):null))},ID=t=>{var e;let{invert:n,position:i="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,theme:u="light",richColors:c,duration:d,style:h,visibleToasts:f=OD,toastOptions:p}=t,[m,v]=q.useState([]),[g,y]=q.useState([]),[w,x]=q.useState(!1),[k,A]=q.useState(!1),[P,E]=q.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),[R,N]=i.split("-"),T=q.useRef(null),B=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=q.useCallback(_=>v(D=>D.filter(({id:z})=>z!==_.id)),[]);return q.useEffect(()=>bs.subscribe(_=>{if(_.dismiss){v(D=>D.map(z=>z.id===_.id?{...z,delete:!0}:z));return}setTimeout(()=>{KA.flushSync(()=>{v(D=>{let z=D.findIndex(L=>L.id===_.id);return z!==-1?[...D.slice(0,z),{...D[z],..._},...D.slice(z+1)]:[_,...D]})})})}),[]),q.useEffect(()=>{if(u!=="system"){E(u);return}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:_})=>{E(_?"dark":"light")})},[u]),q.useEffect(()=>{m.length<=1&&x(!1)},[m]),q.useEffect(()=>{let _=D=>{var z,L;r.every(O=>D[O]||D.code===O)&&(x(!0),(z=T.current)==null||z.focus()),D.code==="Escape"&&(document.activeElement===T.current||(L=T.current)!=null&&L.contains(document.activeElement))&&x(!1)};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),m.length?q.createElement("section",{"aria-label":`Notifications ${B}`,tabIndex:-1},q.createElement("ol",{tabIndex:-1,ref:T,className:a,"data-sonner-toaster":!0,"data-theme":P,"data-rich-colors":c,"data-y-position":R,"data-x-position":N,style:{"--front-toast-height":`${(e=g[0])==null?void 0:e.height}px`,"--offset":typeof l=="number"?`${l}px`:l||_D,"--width":`${MD}px`,"--gap":`${ZA}px`,...h},onMouseEnter:()=>x(!0),onMouseMove:()=>x(!0),onMouseLeave:()=>{k||x(!1)},onPointerDown:()=>{A(!0)},onPointerUp:()=>A(!1)},m.map((_,D)=>q.createElement(LD,{key:_.id,index:D,toast:_,duration:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:f,closeButton:o,interacting:k,position:i,style:p==null?void 0:p.style,removeToast:I,toasts:m,heights:g,setHeights:y,expandByDefault:s,expanded:w})))):null};let BD=0;function de(t,e){const n=`atom${++BD}`,i={toString:()=>n};return typeof t=="function"?i.read=t:(i.init=t,i.read=r=>r(i),i.write=(r,s,o)=>s(i,typeof o=="function"?o(r(i)):o)),e&&(i.write=e),i}const nb=t=>"init"in t,ib=t=>!!t.write,Af=new WeakMap,zD=(t,e)=>{Af.set(t,e),t.catch(()=>{}).finally(()=>Af.delete(t))},rb=(t,e)=>{const n=Af.get(t);n&&(Af.delete(t),n(e))},sb=(t,e)=>{t.status="fulfilled",t.value=e},ob=(t,e)=>{t.status="rejected",t.reason=e},FD=t=>typeof(t==null?void 0:t.then)=="function",Bd=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),ab=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),du=t=>"v"in t&&t.v instanceof Promise,jD=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,zd=t=>{if("e"in t)throw t.e;return t.v},bw=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let i,r;const s=E=>t.get(E),o=(E,R)=>{const N=t.get(E);if(t.set(E,R),n.has(E)||n.set(E,N),N&&du(N)){const T="v"in R?R.v instanceof Promise?R.v:Promise.resolve(R.v):Promise.reject(R.e);rb(N.v,T)}},a=(E,R,N)=>{const T=new Map;let B=!1;N.forEach((I,_)=>{!I&&_===E&&(I=R),I&&(T.set(_,I),R.d.get(_)!==I&&(B=!0))}),(B||R.d.size!==T.size)&&(R.d=T)},l=(E,R,N)=>{const T=s(E),B={d:(T==null?void 0:T.d)||new Map,v:R};if(N&&a(E,B,N),T&&Bd(T,B)&&T.d===B.d)return T;if(T&&du(T)&&du(B)&&jD(T,B)){if(T.d===B.d)return T;B.v=T.v}return o(E,B),B},u=(E,R,N,T)=>{if(FD(R)){let B;const I=new Promise((_,D)=>{let z=!1;R.then(L=>{if(!z){z=!0;const O=s(E),$=l(E,I,N);sb(I,L),_(L),(O==null?void 0:O.d)!==$.d&&k(E,$,O==null?void 0:O.d)}},L=>{if(!z){z=!0;const O=s(E),$=l(E,I,N);ob(I,L),D(L),(O==null?void 0:O.d)!==$.d&&k(E,$,O==null?void 0:O.d)}}),B=L=>{z||(z=!0,L.then(O=>sb(I,O),O=>ob(I,O)),_(L))}});return I.orig=R,I.status="pending",zD(I,_=>{_&&B(_),T==null||T()}),l(E,I,N)}return l(E,R,N)},c=(E,R,N)=>{const T=s(E),B={d:(T==null?void 0:T.d)||new Map,e:R};return N&&a(E,B,N),T&&ab(T,B)&&T.d===B.d?T:(o(E,B),B)},d=(E,R)=>{const N=s(E);if(!R&&N&&(e.has(E)||Array.from(N.d).every(([L,O])=>L===E||d(L)===O)))return N;const T=new Map;let B=!0;const I=L=>{if(L===E){const $=s(L);if($)return T.set(L,$),zd($);if(nb(L))return T.set(L,void 0),L.init;throw new Error("no atom init")}const O=d(L);return T.set(L,O),zd(O)};let _,D;const z={get signal(){return _||(_=new AbortController),_.signal},get setSelf(){return!D&&ib(E)&&(D=(...L)=>{if(!B)return y(E,...L)}),D}};try{const L=E.read(I,z);return u(E,L,T,()=>_==null?void 0:_.abort())}catch(L){return c(E,L,T)}finally{B=!1}},h=E=>zd(d(E)),f=E=>{let R=e.get(E);return R||(R=w(E)),R},p=(E,R)=>!R.l.size&&(!R.t.size||R.t.size===1&&R.t.has(E)),m=E=>{const R=e.get(E);R&&p(E,R)&&x(E)},v=E=>{const R=new Map,N=new WeakMap,T=I=>{const _=e.get(I);_==null||_.t.forEach(D=>{D!==I&&(R.set(D,(R.get(D)||new Set).add(I)),N.set(D,(N.get(D)||0)+1),T(D))})};T(E);const B=I=>{const _=e.get(I);_==null||_.t.forEach(D=>{var z;if(D!==I){let L=N.get(D);if(L&&N.set(D,--L),!L){let O=!!((z=R.get(D))!=null&&z.size);if(O){const $=s(D),F=d(D,!0);O=!$||!Bd($,F)}O||R.forEach($=>$.delete(D))}B(D)}})};B(E)},g=(E,...R)=>{let N=!0;const T=_=>zd(d(_)),B=(_,...D)=>{let z;if(_===E){if(!nb(_))throw new Error("atom not writable");const L=s(_),O=u(_,D[0]);(!L||!Bd(L,O))&&v(_)}else z=g(_,...D);if(!N){const L=A()}return z},I=E.write(T,B,...R);return N=!1,I},y=(E,...R)=>{const N=g(E,...R),T=A();return N},w=(E,R)=>{var N;(N=s(E))==null||N.d.forEach((B,I)=>{const _=e.get(I);_?_.t.add(E):I!==E&&w(I,E)}),d(E);const T={t:new Set(R&&[R]),l:new Set};if(e.set(E,T),ib(E)&&E.onMount){const B=E.onMount((...I)=>y(E,...I));B&&(T.u=B)}return T},x=E=>{var R;const N=(R=e.get(E))==null?void 0:R.u;N&&N(),e.delete(E);const T=s(E);T&&(du(T)&&rb(T.v),T.d.forEach((B,I)=>{if(I!==E){const _=e.get(I);_&&(_.t.delete(E),p(I,_)&&x(I))}}))},k=(E,R,N)=>{const T=new Set(R.d.keys());N==null||N.forEach((B,I)=>{if(T.has(I)){T.delete(I);return}const _=e.get(I);_&&(_.t.delete(E),p(I,_)&&x(I))}),T.forEach(B=>{const I=e.get(B);I?I.t.add(E):e.has(E)&&w(B,E)})},A=()=>{let E;for(;n.size;){const R=Array.from(n);n.clear(),R.forEach(([N,T])=>{const B=s(N);if(B){B.d!==(T==null?void 0:T.d)&&k(N,B,T==null?void 0:T.d);const I=e.get(N);I&&!(T&&!du(T)&&(Bd(T,B)||ab(T,B)))&&I.l.forEach(_=>_())}})}};return{get:h,set:y,sub:(E,R)=>{const N=f(E),T=A(),B=N.l;return B.add(R),()=>{B.delete(R),m(E)}}}};let rg;const VD=()=>(rg||(rg=bw()),rg),YA=b.createContext(void 0),JA=t=>{const e=b.useContext(YA);return(t==null?void 0:t.store)||e||VD()},UD=({children:t,store:e})=>{const n=b.useRef();return!e&&!n.current&&(n.current=bw()),b.createElement(YA.Provider,{value:e||n.current},t)},WD=t=>typeof(t==null?void 0:t.then)=="function",HD=q.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function xr(t,e){const n=JA(e),[[i,r,s],o]=b.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=i;(r!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return b.useEffect(()=>{const u=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),u},[n,t,l]),b.useDebugValue(a),WD(a)?HD(a):a}function GD(t,e){const n=JA(e);return b.useCallback((...r)=>n.set(t,...r),[n,t])}function qA(t,e){return[xr(t,e),GD(t,e)]}const{createElement:Tl,createContext:XD,forwardRef:QA,useCallback:ys,useContext:e2,useEffect:Xr,useImperativeHandle:t2,useLayoutEffect:KD,useMemo:ZD,useRef:Kn,useState:Gu}=Ov,lb=Ov["useId".toString()],Pf=KD,YD=typeof lb=="function"?lb:()=>null;let JD=0;function Sw(t=null){const e=YD(),n=Kn(t||e||null);return n.current===null&&(n.current=""+JD++),n.current}const Wp=XD(null);Wp.displayName="PanelGroupContext";function n2({children:t=null,className:e="",collapsedSize:n=0,collapsible:i=!1,defaultSize:r=null,forwardedRef:s,id:o=null,maxSize:a=100,minSize:l=10,onCollapse:u=null,onResize:c=null,order:d=null,style:h={},tagName:f="div"}){const p=e2(Wp);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const m=Sw(o),{collapsePanel:v,expandPanel:g,getPanelStyle:y,registerPanel:w,resizePanel:x,unregisterPanel:k}=p,A=Kn({onCollapse:u,onResize:c});if(Xr(()=>{A.current.onCollapse=u,A.current.onResize=c}),l<0||l>100)throw Error(`Panel minSize must be between 0 and 100, but was ${l}`);if(a<0||a>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${a}`);if(r!==null){if(r<0||r>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${r}`);l>r&&!i&&(console.error(`Panel minSize ${l} cannot be greater than defaultSize ${r}`),r=l)}const P=y(m,r),E=Kn({size:ub(P)}),R=Kn({callbacksRef:A,collapsedSize:n,collapsible:i,defaultSize:r,id:m,idWasAutoGenerated:o==null,maxSize:a,minSize:l,order:d});return Pf(()=>{E.current.size=ub(P),R.current.callbacksRef=A,R.current.collapsedSize=n,R.current.collapsible=i,R.current.defaultSize=r,R.current.id=m,R.current.idWasAutoGenerated=o==null,R.current.maxSize=a,R.current.minSize=l,R.current.order=d}),Pf(()=>(w(m,R),()=>{k(m)}),[d,m,w,k]),t2(s,()=>({collapse:()=>v(m),expand:()=>g(m),getCollapsed(){return E.current.size===0},getSize(){return E.current.size},resize:N=>x(m,N)}),[v,g,m,x]),Tl(f,{children:t,className:e,"data-panel":"","data-panel-collapsible":i||void 0,"data-panel-id":m,"data-panel-size":parseFloat(""+P.flexGrow).toFixed(1),id:`data-panel-id-${m}`,style:{...P,...h}})}const Nh=QA((t,e)=>Tl(n2,{...t,forwardedRef:e}));n2.displayName="Panel";Nh.displayName="forwardRef(Panel)";function ub(t){const{flexGrow:e}=t;return typeof e=="string"?parseFloat(e):e}const Yo=10;function Ru(t,e,n,i,r,s,o,a){const{sizes:l}=a||{},u=l||s;if(r===0)return u;const c=li(e),d=u.concat();let h=0;{const m=r<0?i:n,v=c.findIndex(x=>x.current.id===m),g=c[v],y=u[v],w=cb(g,Math.abs(r),y,t);if(y===w)return u;w===0&&y>0&&o.set(m,y),r=r<0?y-w:w-y}let f=r<0?n:i,p=c.findIndex(m=>m.current.id===f);for(;;){const m=c[p],v=u[p],g=Math.abs(r)-Math.abs(h),y=cb(m,0-g,v,t);if(v!==y&&(y===0&&v>0&&o.set(m.current.id,v),h+=v-y,d[p]=y,h.toPrecision(Yo).localeCompare(Math.abs(r).toPrecision(Yo),void 0,{numeric:!0})>=0))break;if(r<0){if(--p<0)break}else if(++p>=c.length)break}return h===0?u:(f=r<0?i:n,p=c.findIndex(m=>m.current.id===f),d[p]=u[p]+h,d)}function ya(t,e,n){e.forEach((i,r)=>{const s=t[r];if(!s)return;const{callbacksRef:o,collapsedSize:a,collapsible:l,id:u}=s.current,c=n[u];if(c!==i){n[u]=i;const{onCollapse:d,onResize:h}=o.current;h&&h(i,c),l&&d&&((c==null||c===a)&&i!==a?d(!1):c!==a&&i===a&&d(!0))}})}function sg(t,e){if(e.length<2)return[null,null];const n=e.findIndex(o=>o.current.id===t);if(n<0)return[null,null];const i=n===e.length-1,r=i?e[n-1].current.id:t,s=i?t:e[n+1].current.id;return[r,s]}function i2(t,e,n){if(t.size===1)return"100";const r=li(t).findIndex(o=>o.current.id===e),s=n[r];return s==null?"0":s.toPrecision(Yo)}function qD(t){const e=document.querySelector(`[data-panel-id="${t}"]`);return e||null}function kw(t){const e=document.querySelector(`[data-panel-group-id="${t}"]`);return e||null}function Hp(t){const e=document.querySelector(`[data-panel-resize-handle-id="${t}"]`);return e||null}function QD(t){return r2().findIndex(i=>i.getAttribute("data-panel-resize-handle-id")===t)??null}function r2(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function s2(t){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Ew(t,e,n){var l,u,c,d;const i=Hp(e),r=s2(t),s=i?r.indexOf(i):-1,o=((u=(l=n[s])==null?void 0:l.current)==null?void 0:u.id)??null,a=((d=(c=n[s+1])==null?void 0:c.current)==null?void 0:d.id)??null;return[o,a]}function li(t){return Array.from(t.values()).sort((e,n)=>{const i=e.current.order,r=n.current.order;return i==null&&r==null?0:i==null?-1:r==null?1:i-r})}function cb(t,e,n,i){var c;const r=n+e,{collapsedSize:s,collapsible:o,maxSize:a,minSize:l}=t.current;if(o){if(n>s){if(r<=l/2+s)return s}else if(!((c=i==null?void 0:i.type)==null?void 0:c.startsWith("key"))&&r<l)return s}return Math.min(a,Math.max(l,r))}function o2(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}function e$({committedValuesRef:t,groupId:e,panels:n,setSizes:i,sizes:r,panelSizeBeforeCollapse:s}){Xr(()=>{const{direction:o,panels:a}=t.current,l=kw(e),{height:u,width:c}=l.getBoundingClientRect(),h=s2(e).map(f=>{const p=f.getAttribute("data-panel-resize-handle-id"),m=li(a),[v,g]=Ew(e,p,m);if(v==null||g==null)return()=>{};let y=0,w=100,x=0,k=0;m.forEach(T=>{T.current.id===v?(w=T.current.maxSize,y=T.current.minSize):(x+=T.current.minSize,k+=T.current.maxSize)});const A=Math.min(w,100-x),P=Math.max(y,(m.length-1)*100-k),E=i2(a,v,r);f.setAttribute("aria-valuemax",""+Math.round(A)),f.setAttribute("aria-valuemin",""+Math.round(P)),f.setAttribute("aria-valuenow",""+Math.round(parseInt(E)));const R=T=>{if(!T.defaultPrevented)switch(T.key){case"Enter":{T.preventDefault();const B=m.findIndex(I=>I.current.id===v);if(B>=0){const I=m[B],_=r[B];if(_!=null){let D=0;_.toPrecision(Yo)<=I.current.minSize.toPrecision(Yo)?D=o==="horizontal"?c:u:D=-(o==="horizontal"?c:u);const z=Ru(T,a,v,g,D,r,s.current,null);r!==z&&i(z)}}break}}};f.addEventListener("keydown",R);const N=qD(v);return N!=null&&f.setAttribute("aria-controls",N.id),()=>{f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow"),f.removeEventListener("keydown",R),N!=null&&f.removeAttribute("aria-controls")}});return()=>{h.forEach(f=>f())}},[t,e,n,s,i,r])}function t$({disabled:t,handleId:e,resizeHandler:n}){Xr(()=>{if(t||n==null)return;const i=Hp(e);if(i==null)return;const r=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),n(s);break}case"F6":{s.preventDefault();const o=r2(),a=QD(e);o2(a!==null);const l=s.shiftKey?a>0?a-1:o.length-1:a+1<o.length?a+1:0;o[l].focus();break}}};return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}},[t,e,n])}function n$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function a2(t,e,n,i=0,r=null){const s=n==="horizontal";let o=0;if(oy(t))o=s?t.clientX:t.clientY;else if(ay(t)){const c=t.touches[0];o=s?c.screenX:c.screenY}else return 0;const a=Hp(e),l=r||a.getBoundingClientRect(),u=s?l.left:l.top;return o-u-i}function i$(t,e,n,i,r,s,o){const{dragOffset:a=0,dragHandleRect:l,sizes:u}=o||{},c=u||s;if(r$(t)){const d=r==="horizontal",f=kw(e).getBoundingClientRect(),p=d?f.width:f.height,m=t.shiftKey?10:100,v=p/m;let g=0;switch(t.key){case"ArrowDown":g=d?0:v;break;case"ArrowLeft":g=d?-v:0;break;case"ArrowRight":g=d?v:0;break;case"ArrowUp":g=d?0:-v;break;case"End":g=p;break;case"Home":g=-p;break}const[y,w]=Ew(e,n,i),x=g<0?y:w,k=i.findIndex(P=>P.current.id===x),A=i[k];if(A.current.collapsible){const P=c[k];(P===0||P.toPrecision(Yo)===A.current.minSize.toPrecision(Yo))&&(g=g<0?-A.current.minSize*p:A.current.minSize*p)}return g}else return a2(t,n,r,a,l)}function r$(t){return t.type==="keydown"}function oy(t){return t.type.startsWith("mouse")}function ay(t){return t.type.startsWith("touch")}let ly=null,Mo=null;function l2(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function s$(){Mo!==null&&(document.head.removeChild(Mo),ly=null,Mo=null)}function og(t){if(ly===t)return;ly=t;const e=l2(t);Mo===null&&(Mo=document.createElement("style"),document.head.appendChild(Mo)),Mo.innerHTML=`*{cursor: ${e}!important;}`}function o$(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function u2(t){return t.map(e=>{const{minSize:n,order:i}=e.current;return i?`${i}:${n}`:`${n}`}).sort((e,n)=>e.localeCompare(n)).join(",")}function c2(t,e){try{const n=e.getItem(`PanelGroup:sizes:${t}`);if(n){const i=JSON.parse(n);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function a$(t,e,n){const i=c2(t,n);if(i){const r=u2(e);return i[r]??null}return null}function l$(t,e,n,i){const r=u2(e),s=c2(t,i)||{};s[r]=n;try{i.setItem(`PanelGroup:sizes:${t}`,JSON.stringify(s))}catch(o){console.error(o)}}const ag={};function db(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}const Tu={getItem:t=>(db(Tu),Tu.getItem(t)),setItem:(t,e)=>{db(Tu),Tu.setItem(t,e)}};function d2({autoSaveId:t,children:e=null,className:n="",direction:i,disablePointerEventsDuringResize:r=!1,forwardedRef:s,id:o=null,onLayout:a,storage:l=Tu,style:u={},tagName:c="div"}){const d=Sw(o),[h,f]=Gu(null),[p,m]=Gu(new Map),v=Kn(null);Kn({didLogDefaultSizeWarning:!1,didLogIdAndOrderWarning:!1,prevPanelIds:[]});const g=Kn({onLayout:a});Xr(()=>{g.current.onLayout=a});const y=Kn({}),[w,x]=Gu([]),k=Kn(new Map),A=Kn(0),P=Kn({direction:i,panels:p,sizes:w});t2(s,()=>({getLayout:()=>{const{sizes:L}=P.current;return L},setLayout:L=>{const O=L.reduce((ie,ce)=>ie+ce,0);o2(O===100,"Panel sizes must add up to 100%");const{panels:$}=P.current,F=y.current,Y=li($);x(L),ya(Y,L,F)}}),[]),Pf(()=>{P.current.direction=i,P.current.panels=p,P.current.sizes=w}),e$({committedValuesRef:P,groupId:d,panels:p,setSizes:x,sizes:w,panelSizeBeforeCollapse:k}),Xr(()=>{const{onLayout:L}=g.current,{panels:O,sizes:$}=P.current;if($.length>0){L&&L($);const F=y.current,Y=li(O);ya(Y,$,F)}},[w]),Pf(()=>{if(P.current.sizes.length===p.size)return;let O=null;if(t){const $=li(p);O=a$(t,$,l)}if(O!=null)x(O);else{const $=li(p);let F=0,Y=0,ie=0;if($.forEach(ce=>{ie+=ce.current.minSize,ce.current.defaultSize===null?F++:Y+=ce.current.defaultSize}),Y>100)throw new Error("Default panel sizes cannot exceed 100%");if($.length>1&&F===0&&Y!==100)throw new Error("Invalid default sizes specified for panels");if(ie>100)throw new Error("Minimum panel sizes cannot exceed 100%");x($.map(ce=>ce.current.defaultSize===null?(100-Y)/F:ce.current.defaultSize))}},[t,p,l]),Xr(()=>{if(t){if(w.length===0||w.length!==p.size)return;const L=li(p);ag[t]||(ag[t]=o$(l$,100)),ag[t](t,L,w,l)}},[t,p,w,l]);const E=ys((L,O)=>{const{panels:$}=P.current;return $.size===0?{flexBasis:0,flexGrow:O??void 0,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:i2($,L,w),flexShrink:1,overflow:"hidden",pointerEvents:r&&h!==null?"none":void 0}},[h,r,w]),R=ys((L,O)=>{m($=>{if($.has(L))return $;const F=new Map($);return F.set(L,O),F})},[]),N=ys(L=>$=>{$.preventDefault();const{direction:F,panels:Y,sizes:ie}=P.current,ce=li(Y),[ve,be]=Ew(d,L,ce);if(ve==null||be==null)return;let we=i$($,d,L,ce,F,ie,v.current);if(we===0)return;const ge=kw(d).getBoundingClientRect(),_e=F==="horizontal";document.dir==="rtl"&&_e&&(we=-we);const ke=_e?ge.width:ge.height,Se=we/ke*100,xe=Ru($,Y,ve,be,Se,ie,k.current,v.current),se=!n$(ie,xe);if((oy($)||ay($))&&A.current!=Se&&og(se?_e?"horizontal":"vertical":_e?we<0?"horizontal-min":"horizontal-max":we<0?"vertical-min":"vertical-max"),se){const Pe=y.current;x(xe),ya(ce,xe,Pe)}A.current=Se},[d]),T=ys(L=>{m(O=>{if(!O.has(L))return O;const $=new Map(O);return $.delete(L),$})},[]),B=ys(L=>{const{panels:O,sizes:$}=P.current,F=O.get(L);if(F==null)return;const{collapsedSize:Y,collapsible:ie}=F.current;if(!ie)return;const ce=li(O),ve=ce.indexOf(F);if(ve<0)return;const be=$[ve];if(be===Y)return;k.current.set(L,be);const[we,Q]=sg(L,ce);if(we==null||Q==null)return;const _e=ve===ce.length-1?be:Y-be,ke=Ru(null,O,we,Q,_e,$,k.current,null);if($!==ke){const Se=y.current;x(ke),ya(ce,ke,Se)}},[]),I=ys(L=>{const{panels:O,sizes:$}=P.current,F=O.get(L);if(F==null)return;const{collapsedSize:Y,minSize:ie}=F.current,ce=k.current.get(L)||ie;if(!ce)return;const ve=li(O),be=ve.indexOf(F);if(be<0||$[be]!==Y)return;const[Q,ge]=sg(L,ve);if(Q==null||ge==null)return;const ke=be===ve.length-1?Y-ce:ce,Se=Ru(null,O,Q,ge,ke,$,k.current,null);if($!==Se){const xe=y.current;x(Se),ya(ve,Se,xe)}},[]),_=ys((L,O)=>{const{panels:$,sizes:F}=P.current,Y=$.get(L);if(Y==null)return;const{collapsedSize:ie,collapsible:ce,maxSize:ve,minSize:be}=Y.current,we=li($),Q=we.indexOf(Y);if(Q<0)return;const ge=F[Q];if(ge===O)return;ce&&O===ie||(O=Math.min(ve,Math.max(be,O)));const[_e,ke]=sg(L,we);if(_e==null||ke==null)return;const xe=Q===we.length-1?ge-O:O-ge,se=Ru(null,$,_e,ke,xe,F,k.current,null);if(F!==se){const Pe=y.current;x(se),ya(we,se,Pe)}},[]),D=ZD(()=>({activeHandleId:h,collapsePanel:B,direction:i,expandPanel:I,getPanelStyle:E,groupId:d,registerPanel:R,registerResizeHandle:N,resizePanel:_,startDragging:(L,O)=>{if(f(L),oy(O)||ay(O)){const $=Hp(L);v.current={dragHandleRect:$.getBoundingClientRect(),dragOffset:a2(O,L,i),sizes:P.current.sizes}}},stopDragging:()=>{s$(),f(null),v.current=null},unregisterPanel:T}),[h,B,i,I,E,d,R,N,_,T]),z={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Tl(Wp.Provider,{children:Tl(c,{children:e,className:n,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":d,style:{...z,...u}}),value:D})}const h2=QA((t,e)=>Tl(d2,{...t,forwardedRef:e}));d2.displayName="PanelGroup";h2.displayName="forwardRef(PanelGroup)";function uy({children:t=null,className:e="",disabled:n=!1,id:i=null,onDragging:r,style:s={},tagName:o="div"}){const a=Kn(null),l=Kn({onDragging:r});Xr(()=>{l.current.onDragging=r});const u=e2(Wp);if(u===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:c,direction:d,groupId:h,registerResizeHandle:f,startDragging:p,stopDragging:m}=u,v=Sw(i),g=c===v,[y,w]=Gu(!1),[x,k]=Gu(null),A=ys(()=>{a.current.blur(),m();const{onDragging:R}=l.current;R&&R(!1)},[m]);Xr(()=>{if(n)k(null);else{const E=f(v);k(()=>E)}},[n,v,f]),Xr(()=>{if(n||x==null||!g)return;const E=B=>{x(B)},R=B=>{x(B)},T=a.current.ownerDocument;return T.body.addEventListener("contextmenu",A),T.body.addEventListener("mousemove",E),T.body.addEventListener("touchmove",E),T.body.addEventListener("mouseleave",R),window.addEventListener("mouseup",A),window.addEventListener("touchend",A),()=>{T.body.removeEventListener("contextmenu",A),T.body.removeEventListener("mousemove",E),T.body.removeEventListener("touchmove",E),T.body.removeEventListener("mouseleave",R),window.removeEventListener("mouseup",A),window.removeEventListener("touchend",A)}},[d,n,g,x,A]),t$({disabled:n,handleId:v,resizeHandler:x});const P={cursor:l2(d),touchAction:"none",userSelect:"none"};return Tl(o,{children:t,className:e,"data-resize-handle-active":g?"pointer":y?"keyboard":void 0,"data-panel-group-direction":d,"data-panel-group-id":h,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":v,onBlur:()=>w(!1),onFocus:()=>w(!0),onMouseDown:E=>{p(v,E.nativeEvent);const{onDragging:R}=l.current;R&&R(!0)},onMouseUp:A,onTouchCancel:A,onTouchEnd:A,onTouchStart:E=>{p(v,E.nativeEvent);const{onDragging:R}=l.current;R&&R(!0)},ref:a,role:"separator",style:{...P,...s},tabIndex:0})}uy.displayName="PanelResizeHandle";const u$="modulepreload",c$=function(t){return"/vonsim-next/"+t},hb={},d$=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=c$(s),s in hb)return;hb[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let c=r.length-1;c>=0;c--){const d=r[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":u$,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function h$(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){const{Workbox:h}=await d$(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);a=new h("/vonsim-next/sw.js",{scope:"/vonsim-next/",type:"classic"}),u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let f=!1;const p=()=>{f=!0,a==null||a.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?p():!f&&(i==null||i()):m.isExternal?window.location.reload():!f&&(i==null||i()):m.isUpdate||i==null||i()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(f=>{s?s("/vonsim-next/sw.js",f):r==null||r(f)}).catch(f=>{o==null||o(f)})}}return l=d(),c}function f$(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=b.useState(!1),[u,c]=b.useState(!1),[d]=b.useState(()=>h$({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}function f2(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=f2(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function nt(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=f2(t))&&(i&&(i+=" "),i+=e);return i}var p$=function(){};function m$(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function g$(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var y$=typeof window<"u",v$=y$?window:null,fb=function(t){return!!t.addEventListener},pb=function(t){return!!t.on},w$=function(t,e,n,i){n===void 0&&(n=v$),b.useEffect(function(){if(e&&n)return fb(n)?m$(n,t,e,i):pb(n)&&n.on(t,e,i),function(){fb(n)?g$(n,t,e,i):pb(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])};const p2=w$;var x$=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},b$=function(t,e,n,i){e===void 0&&(e=p$),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=b.useMemo(function(){var u=x$(t),c=function(d){if(u(d))return e(d)};return c},i);p2(s,l,o,a)};const m2=b$;function Rf(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}function g2(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const mb=["en","es"];function Cw(t){return function(n,i,...r){const s=g2(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}class Bt{constructor(e,n){Z(this,"start");Z(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new Bt(i,r)}toJSON(){return this.range}}function y2(t){const e=t.charCodeAt(0);return M.fitsUnsigned(e,8)?e:null}function Aw(t){return M.fitsUnsigned(t,8)?String.fromCharCode(t):null}var lt,vt;const Le=class Le{constructor(e,n){ue(this,lt,void 0);ue(this,vt,void 0);j(this,lt,e|0),j(this,vt,n)}get size(){return S(this,vt)}is8bits(){return S(this,vt)===8}is16bits(){return S(this,vt)===16}get unsigned(){return S(this,lt)}get signed(){return S(this,lt)<=Le.maxSignedValue(S(this,vt))?S(this,lt):S(this,lt)-(Le.maxValue(S(this,vt))+1)}get low(){return this.is8bits()?this:Le.fromUnsigned(S(this,lt)&Le.maxValue(8),8)}get high(){return this.is8bits()?new Le(0,8):Le.fromUnsigned(S(this,lt)>>8&Le.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Le.fromUnsigned(S(this,lt)&~Le.maxValue(8)|e.unsigned,S(this,vt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Le.fromUnsigned(S(this,lt)&Le.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=S(this,vt))throw new RangeError(`Index ${e} out of bounds for byte of size ${S(this,vt)}`);return(S(this,lt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=S(this,vt))throw new RangeError(`Index ${e} out of bounds for byte of size ${S(this,vt)}`);return n?Le.fromUnsigned(S(this,lt)|1<<e,S(this,vt)):Le.fromUnsigned(S(this,lt)&~(1<<e),S(this,vt))}add(e){return e=Number(e),Le.fromUnsigned(S(this,lt)+e,S(this,vt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:S(this,lt)===S(e,lt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(S(this,vt));for(let n=0;n<S(this,vt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return S(this,lt).toString(16).padStart(S(this,vt)/4,"0").toUpperCase();case"bin":return S(this,lt).toString(2).padStart(S(this,vt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return S(this,vt)===8?Aw(S(this,lt))??"---":this.low.toString("ascii")+this.high.toString("ascii")}}toJSON(){return S(this,lt)}valueOf(){return S(this,lt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=Le.minSignedValue(n)&&e<=Le.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=Le.minValue()&&e<=Le.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=Le.minSignedValue(n)&&e<=Le.maxSignedValue(n)}static fromUnsigned(e,n){if(!Le.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new Le(e,n)}static fromSigned(e,n){if(!Le.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new Le(e+Le.maxValue(n)+1,n):new Le(e,n)}static fromNumber(e,n){return e<0?Le.fromSigned(e,n):Le.fromUnsigned(e,n)}static fromChar(e){const n=y2(e)??-1;return Le.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*Le.maxValue(e));return new Le(n,e)}static zero(e){return new Le(0,e)}};lt=new WeakMap,vt=new WeakMap;let M=Le;var Nr;const Es=class Es{constructor(e){ue(this,Nr,void 0);j(this,Nr,e)}get value(){return S(this,Nr).unsigned}get byte(){return S(this,Nr)}toString(e=!0){let n=S(this,Nr).toString("hex");return e&&(n+="h"),n}toJSON(){return S(this,Nr).toJSON()}valueOf(){return S(this,Nr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Es.MIN_ADDRESS&&e<=Es.MAX_ADDRESS}static from(e){if(e=Number(e),!Es.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=M.fromUnsigned(e,16);return new Es(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i}};Nr=new WeakMap,Z(Es,"MIN_ADDRESS",0),Z(Es,"MAX_ADDRESS",32767);let pe=Es;var Mr;const Cs=class Cs{constructor(e){ue(this,Mr,void 0);j(this,Mr,e)}get value(){return S(this,Mr).unsigned}get byte(){return S(this,Mr)}toString(e=!0){let n=S(this,Mr).toString("hex");return e&&(n+="h"),n}toJSON(){return S(this,Mr).toJSON()}valueOf(){return S(this,Mr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Cs.MIN_ADDRESS&&e<=Cs.MAX_ADDRESS}static from(e){if(e=Number(e),!Cs.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=M.fromUnsigned(e,8);return new Cs(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Mr=new WeakMap,Z(Cs,"MIN_ADDRESS",0),Z(Cs,"MAX_ADDRESS",127);let Ln=Cs;const gb=pe.from(pe.MAX_ADDRESS).toString(),S$=Ln.from(Ln.MAX_ADDRESS).toString(),k$={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${pe.format(t)} is out of range (max memory address: ${gb}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${pe.format(t)}, which is outside the memory range (max memory address: ${gb}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${S$}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"label-should-be-writable":t=>`Label ${t} doesn't point to a writable memory address — should point to a DB or DW declaration.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},yb=pe.from(pe.MAX_ADDRESS).toString(),E$=Ln.from(Ln.MAX_ADDRESS).toString(),C$={"address-has-code":t=>`La dirección de memoria ${pe.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${t} está fuera de rango (dirección máxima de memoria: ${yb}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vacío. El programa debe tener, al menos, una instrucción END.","end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${pe.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${yb}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${E$}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"label-should-be-writable":t=>`La etiqueta ${t} no apunta a una dirección de memoria modificable — debería apuntar a una declaración DB o DW.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${t}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},A$=Cw({en:k$,es:C$});class K extends Error{constructor(n,...i){super();Z(this,"code");Z(this,"context");Z(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof Bt?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return A$(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof K?n:new K("unexpected-error",n)}}var _s,pl;class P${constructor(){Z(this,"codeMemory",new Set);Z(this,"labels",new Map);ue(this,_s,!1);ue(this,pl,!1)}loadStatements(e){if(S(this,_s))throw new Error("Tried to load statements twice");j(this,_s,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new K("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:pe.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:pe.from(0)})}return n}computeAddresses(e){if(S(this,pl))throw new Error("Tried to compute addresses twice");j(this,pl,!0),this.codeMemory.clear();const n=new Set;let i=null;return Rf(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){i=s.newAddress;return}if(i===null)throw new K("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!pe.inRange(i+l))throw new K("instruction-out-of-range",i+l).at(s);const u=pe.from(i+l);if(n.has(u.value))throw new K("occupied-address",u).at(s);n.add(u.value),s.isInstruction()&&this.codeMemory.add(u.value)}const a=pe.from(i);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),i+=o},K.from)}labelExists(e){if(!S(this,_s))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!S(this,_s))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!S(this,_s))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!S(this,pl))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof pe&&(e=e.value),this.codeMemory.has(e)}}_s=new WeakMap,pl=new WeakMap;const R$=["AL","BL","CL","DL","AH","BH","CH","DH"],v2=["AX","BX","CX","DX","SP"],Tf=[...R$,...v2],Pw=["DB","DW","EQU"],Rw=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],T$=["OFFSET","ORG","BYTE","WORD","PTR","END",...Tf,...Rw,...Pw];class O${constructor(e,n,i){Z(this,"type");Z(this,"lexeme");Z(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class _${constructor(e){Z(this,"scanned",!1);Z(this,"tokens",[]);Z(this,"position",new Bt(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new Bt(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new K("lexer.unterminated-string").at(this.position);if(this.peek().charCodeAt(0)>255)throw new K("lexer.only-ascii").at(new Bt(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new K("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new K("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();T$.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new K("lexer.unexpected-character",e).at(this.position)}return this.position=new Bt(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new O$(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new Bt(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Ht{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}Z(Ht,"numberLiteral",(...e)=>new N$(...e)),Z(Ht,"label",(...e)=>new M$(...e)),Z(Ht,"unaryOperation",(...e)=>new D$(...e)),Z(Ht,"binaryOperation",(...e)=>new $$(...e));class N$ extends Ht{constructor(n,i){super(i);Z(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class M$ extends Ht{constructor(n,i,r){super(r);Z(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new K("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new K("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new K("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class D$ extends Ht{constructor(n,i,r){super(r);Z(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class $$ extends Ht{constructor(n,i,r,s){super(s);Z(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Gp{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Dr;class w2 extends Gp{constructor(n,i,r){super(r);Z(this,"type","data-directive");Z(this,"label");Z(this,"values");ue(this,Dr,null);this.values=n,this.label=i}get start(){if(S(this,Dr)===null)throw new Error("Start not set");return S(this,Dr)}setStart(n){if(S(this,Dr)!==null)throw new Error("Start already set");j(this,Dr,n)}toJSON(){return{...super.toJSON(),...S(this,Dr)?{start:S(this,Dr).toJSON()}:{},directive:this.directive,label:this.label}}}Dr=new WeakMap;var Bo,Ns,ml;class L$ extends w2{constructor(n,i,r){super(n,i,r);Z(this,"directive","EQU");ue(this,Bo,"not-processed");ue(this,Ns,null);ue(this,ml,null)}toJSON(){var n;return{...super.toJSON(),value:S(this,ml)??((n=S(this,Ns))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(S(this,Ns))throw new Error("Constant already validated");if(!this.label)throw new K("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new K("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new K("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new K("cannot-be-unassinged","EQU").at(n);j(this,Ns,n.value)}evaluateExpressions(n){if(!S(this,Ns))throw new Error("Constant not validated");if(S(this,Bo)==="processed")return S(this,ml);if(S(this,Bo)==="processing")throw new K("circular-reference").at(this.position);j(this,Bo,"processed");const i=S(this,Ns).evaluate(n);return j(this,Bo,"processed"),j(this,ml,i),i}evaluate(n){return this.evaluateExpressions(n)}}Bo=new WeakMap,Ns=new WeakMap,ml=new WeakMap;const Ou=Symbol("unassigned");var kn,Ti;class I$ extends w2{constructor(n,i,r,s){super(i,r,s);Z(this,"size");ue(this,kn,null);ue(this,Ti,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!S(this,kn))throw new Error("Data directive not validated");return S(this,kn).length*(this.size/8)}getValues(){if(!S(this,Ti))throw new Error("Data directive not evaluated");return S(this,Ti)}toJSON(){return{...super.toJSON(),values:(S(this,Ti)??S(this,kn)??this.values).map(n=>n===Ou?"?":n.toJSON())}}validate(){if(S(this,kn))throw new Error("Data directive already validated");j(this,kn,[]);for(const n of this.values)if(n.isUnassigned())S(this,kn).push(Ou);else if(n.isString()){if(this.directive!=="DB")throw new K("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=y2(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new Bt(n.position.start+r,n.position.start+r+1),a=Ht.numberLiteral(s,o);S(this,kn).push(a)}}else S(this,kn).push(n.value);if(S(this,kn).length===0)throw new K("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!S(this,kn))throw new Error("Data directive not validated");if(S(this,Ti))throw new Error("Data directive already evaluated");j(this,Ti,[]);const i=Rf(S(this,kn),r=>{if(r===Ou)S(this,Ti).push(Ou);else{const s=r.evaluate(n);if(!M.fits(s,this.size))throw new K("value-out-of-range",s,this.size).at(this);const o=M.fromNumber(s,this.size);S(this,Ti).push(o)}},K.from);return i.length>0&&j(this,Ti,null),i}}kn=new WeakMap,Ti=new WeakMap;class Tw{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class B$ extends Tw{constructor(n,i){super(i);Z(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class z$ extends Tw{constructor(n){super(n);Z(this,"type","unassigned")}}class F$ extends Tw{constructor(n){super(n.position);Z(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function j$(t,e,n){const i=Bt.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new I$(t.type,e,n,i);case"EQU":return new L$(e,n,i)}}class V$ extends Gp{constructor(n){super(n);Z(this,"type","end")}}function Ao(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var $r;class ca extends Gp{constructor(n,i,r){super(r);Z(this,"type","instruction");Z(this,"label");Z(this,"operands");ue(this,$r,null);this.operands=n,this.label=i}get start(){if(S(this,$r)===null)throw new Error("Start not set");return S(this,$r)}setStart(n){if(S(this,$r)!==null)throw new Error("Start already set");j(this,$r,n)}toJSON(){return{...super.toJSON(),...S(this,$r)?{start:S(this,$r).toJSON()}:{},instruction:this.instruction,label:this.label}}}$r=new WeakMap;var en,ui;class U$ extends ca{constructor(n,i,r,s){super(i,r,s);ue(this,en,null);ue(this,ui,null);this.instruction=n}get length(){if(!S(this,en))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=S(this,en);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!S(this,ui))throw new Error("Instruction not evaluated");return S(this,ui)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=Ao(s)<<3,o[1]|=Ao(r)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=Ao(r)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=Ao(r)<<0,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}case"mem<-reg":{r.mode==="direct"?(o[1]=192,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=208,o[1]|=Ao(s)<<0;break}case"mem<-imd":{r.mode==="direct"?(o[1]=200,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...S(this,ui)??S(this,en)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(S(this,en))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new K("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new K("size-mismatch",r.size,i.size).at(this);j(this,en,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new K("size-mismatch",r.size,i.size).at(this);j(this,en,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new K("size-mismatch",r.size,i.size).at(this);j(this,en,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}if(r.value.isLabel()){const s=r.isDataDirectiveLabel(n);if(s){if(s!==i.size)throw new K("size-mismatch",s,i.size).at(this);j(this,en,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:Ht.label(r.value.value,!0,r.value.position)}});return}}j(this,en,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else if(i.value.isLabel()){if(s=i.isDataDirectiveLabel(n)||"auto",s==="auto")throw new K("label-should-be-writable",i.value.value).at(i);o={mode:"direct",address:Ht.label(i.value.value,!0,i.value.position)}}else throw new K("destination-cannot-be-immediate").at(i);if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new K("size-mismatch",s,r.size).at(this);j(this,en,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.isDataDirectiveLabel(n))throw new K("double-memory-access").at(this);if(s==="auto")throw new K("unknown-size").at(i);j(this,en,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new K("double-memory-access").at(this)}}evaluateExpressions(n){if(!S(this,en))throw new Error("Instruction not validated");if(S(this,ui))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=S(this,en),a=l=>{const u=l.evaluate(n);if(!pe.inRange(u))throw new K("address-out-of-range",u).at(l);const c=pe.from(u);if(n.addressIsReserved(c))throw new K("address-has-code",c).at(l);return c};switch(i){case"reg<-reg":{j(this,ui,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{j(this,ui,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!M.fits(l,r))throw new K("value-out-of-range",l,r).at(o);const u=M.fromNumber(l,r);j(this,ui,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{j(this,ui,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!M.fits(l,r))throw new K("value-out-of-range",l,r).at(o);const u=M.fromNumber(l,r);j(this,ui,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}en=new WeakMap,ui=new WeakMap;var rr,Lr;class W$ extends ca{constructor(n,i,r,s){super(i,r,s);ue(this,rr,null);ue(this,Lr,null);Z(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!S(this,Lr))throw new Error("Instruction not evaluated");return S(this,Lr)}toJSON(){return{...super.toJSON(),...S(this,Lr)?{value:S(this,Lr).toJSON()}:S(this,rr)?{initialValue:S(this,rr).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(S(this,rr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new K("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new K("expects-immediate").at(n);j(this,rr,n.value)}evaluateExpressions(n){if(!S(this,rr))throw new Error("Instruction not validated");if(S(this,Lr))throw new Error("Instruction aready evaluated");const i=S(this,rr).evaluate(n);if(!M.fitsUnsigned(i,8))throw new K("invalid-interrupt",i).at(S(this,rr));j(this,Lr,M.fromUnsigned(i,8))}}rr=new WeakMap,Lr=new WeakMap;var Oi,Ir,TE;let H$=(TE=class extends ca{constructor(n,i,r,s){super(i,r,s);ue(this,Oi,null);ue(this,Ir,null);this.instruction=n}get length(){if(!S(this,Oi))throw new Error("Instruction not validated");return S(this,Oi).port==="fixed"?2:1}toBytes(){const n=[],i={IN:80,OUT:84};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(S(this,Ir)===null)throw new Error("Operation not set");return S(this,Ir)}toJSON(){return{...super.toJSON(),...S(this,Ir)??S(this,Oi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(S(this,Oi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new K("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new K("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new K("expects-dx").at(i);j(this,Oi,{port:"variable",size:r});return}if(i.isNumberExpression()){j(this,Oi,{port:"fixed",size:r,address:i.value});return}throw new K("expects-immediate").at(i)}evaluateExpressions(n){if(!S(this,Oi))throw new Error("Instruction not validated");if(S(this,Ir))throw new Error("Instruction aready evaluated");const i=S(this,Oi);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Ln.inRange(r))throw new K("io-address-out-of-range",r).at(this);const s=Ln.from(r);j(this,Ir,{port:"fixed",size:i.size,address:s})}else j(this,Ir,{port:"variable",size:i.size})}},Oi=new WeakMap,Ir=new WeakMap,TE);var Br,zr,OE;let G$=(OE=class extends ca{constructor(n,i,r,s){super(i,r,s);ue(this,Br,null);ue(this,zr,null);Z(this,"length",3);this.instruction=n}toBytes(){const n=[],i={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(S(this,zr)===null)throw new Error("Instruction not evaluated");return S(this,zr)}toJSON(){return{...super.toJSON(),...S(this,zr)?{address:S(this,zr).toJSON()}:S(this,Br)?{jumpTo:S(this,Br)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(S(this,Br))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new K("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new K("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new K("label-not-found",r).at(i);if(s!=="instruction")throw new K("label-should-be-an-instruction",r).at(i);j(this,Br,r)}evaluateExpressions(n){if(!S(this,Br))throw new Error("Instruction not validated");if(S(this,zr))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(S(this,Br));if(!pe.inRange(i))throw new K("address-out-of-range",i).at(this);j(this,zr,pe.from(i))}},Br=new WeakMap,zr=new WeakMap,OE);var sr,_E;let X$=(_E=class extends ca{constructor(n,i,r,s){super(i,r,s);ue(this,sr,null);Z(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:96,POP:104}[this.instruction];return i|=Ao(this.register),new Uint8Array([i])}get register(){if(!S(this,sr))throw new Error("Instruction not evaluated");return S(this,sr)}toJSON(){return{...super.toJSON(),...S(this,sr)?{register:S(this,sr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(S(this,sr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new K("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new K("expects-word-register").at(n);j(this,sr,n.value)}evaluateExpressions(){if(!S(this,sr))throw new Error("Instruction not validated")}},sr=new WeakMap,_E);var Vn,or;class K$ extends ca{constructor(n,i,r,s){super(i,r,s);ue(this,Vn,null);ue(this,or,null);this.instruction=n}get length(){if(!S(this,Vn))throw new Error("Instruction not validated");const{mode:n}=S(this,Vn);let i=2;return n==="mem-direct"&&(i+=2),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=Ao(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!S(this,or))throw new Error("Instruction not evaluated");return S(this,or)}toJSON(){return{...super.toJSON(),...S(this,or)??S(this,Vn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(S(this,Vn))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new K("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){j(this,Vn,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new K("unknown-size").at(i);j(this,Vn,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new K("unknown-size").at(i);j(this,Vn,{mode:"mem-indirect",size:i.size});return}if(i.value.isLabel()){const r=i.isDataDirectiveLabel(n);if(r){j(this,Vn,{mode:"mem-direct",size:r,address:Ht.label(i.value.value,!0,i.value.position)});return}}throw new K("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!S(this,Vn))throw new Error("Instruction not validated");if(S(this,or))throw new Error("Instruction aready evaluated");const i=S(this,Vn);switch(i.mode){case"reg":{j(this,or,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!pe.inRange(r))throw new K("address-out-of-range",r).at(i.address);const s=pe.from(r);if(n.addressIsReserved(s))throw new K("address-has-code",s).at(i.address);j(this,or,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{j(this,or,{mode:"mem-indirect",size:i.size});return}default:return i}}}Vn=new WeakMap,or=new WeakMap;var gl;class Z$ extends ca{constructor(n,i,r,s){super(i,r,s);ue(this,gl,!1);Z(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(S(this,gl))throw new Error("Instruction already validated");if(this.operands.length>0)throw new K("expects-no-operands").at(this);j(this,gl,!0)}evaluateExpressions(){if(!S(this,gl))throw new Error("Instruction not validated")}}gl=new WeakMap;class Xp{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class Y$ extends Xp{constructor(n){super(n.position);Z(this,"type","register");Z(this,"value");this.value=n.type}get size(){return v2.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class J$ extends Xp{constructor(n,i){super(i);Z(this,"type","indirect-address");Z(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class q$ extends Xp{constructor(n,i,r){super(r);Z(this,"type","direct-address");Z(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class Q$ extends Xp{constructor(n){super(n.position);Z(this,"type","number-expression");this.value=n}isDataDirectiveLabel(n){if(!this.value.isLabel())return!1;const i=this.value;if(i.offset)return!1;if(!n.labelExists(i.value))throw new K("label-not-found",i.value).at(this.position);const r=n.getLabelType(i.value);return r==="DB"?8:r==="DW"?16:!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function vb(t,e,n){const i=Bt.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new Z$(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new U$(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new K$(t.type,e,n,i);case"PUSH":case"POP":return new X$(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new G$(t.type,e,n,i);case"IN":case"OUT":return new H$(t.type,e,n,i);case"INT":return new W$(t.type,e,n,i)}}class eL extends Gp{constructor(n,i){super(i);Z(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let tL=class{constructor(e){Z(this,"tokens");Z(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new K("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new K("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new eL(i,Bt.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new K("end-must-be-the-last-statement").at(e);return new V$(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...Pw);if(e&&!n)throw new K("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),j$(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new B$(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new z$(e.position)}return new F$(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...Rw);if(e&&!n){const s=this.peek();throw new K("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return vb(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),vb(n,r,i)}instructionOperand(){if(this.match(...Tf)){const n=this.previous();return new Y$(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new K("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Tf)){this.consume("BX",new K("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new K("parser.expected-literal-after-literal","]","BX"));return new J$(e==null?void 0:e.type,Bt.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new K("parser.expected-literal-after-expression","]"));return new q$(i,e==null?void 0:e.type,Bt.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new K("parser.expected-literal-after-literal","[","PTR");return new Q$(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new K("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new K("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Ht.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new K("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new K("parser.expected-label-after-offset").at(this.peek());if(!n)throw new K("parser.expected-argument").at(this.peek());return Ht.label(n.lexeme.toUpperCase(),e!==null,Bt.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new K("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Ht.unaryOperation(e.type==="PLUS"?"+":"-",n,Bt.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Ht.binaryOperation(e,"*",n,Bt.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Ht.binaryOperation(e,n.type==="PLUS"?"+":"-",i,Bt.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function x2(t){try{const n=new _$(t).scanTokens(),r=new tL(n).parse(),s=r.at(-1);if(!s)throw new K("empty-program");if(!s.isEnd())throw new K("end-must-be-the-last-statement").at(s);let o=[];const a=new P$;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Rf(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},K.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=Rf(r,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},K.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u}}catch(e){return{success:!1,errors:[K.from(e)]}}}class Pr{constructor(e){Z(this,"computer");this.computer=e.computer}}const nL=pe.from(pe.MAX_ADDRESS).toString(),iL={"address-has-instruction":t=>`Memory address ${pe.format(t)} has an instruction, and cannot be read nor written.`,"address-out-of-range":t=>`Memory address ${pe.format(t)} is out of range (max memory address: ${nL}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-implemented":t=>`I/O memory address ${Ln.format(t)} has no implementation.`,"no-instruction":t=>`Expected instruction at memory address ${pe.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},rL=pe.from(pe.MAX_ADDRESS).toString(),sL={"address-has-instruction":t=>`La dirección de memoria ${t} tiene una instrucción, y no se puede leer ni escribir.`,"address-out-of-range":t=>`La dirección de memoria ${pe.format(t)} está fuera de rango (dirección máxima de memoria: ${rL}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-implemented":t=>`La dirección de memoria E/S ${Ln.format(t)} no está implementada.`,"no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${t} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},oL=Cw({en:iL,es:sL});class At extends Error{constructor(n,...i){super();Z(this,"code");Z(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return oL(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof At?n:new At("unexpected-error",n)}}class ds{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const r=e.cpu.getRegister("IP").toString("hex");throw new At("unexpected-error",`Could not read instruction byte at address ${r}h`)}yield*e.cpu.updateWordRegister("IP",r=>r.add(1)),yield*e.cpu.getMBR(n)}}var kp,b2;class aL extends ds{constructor(){super(...arguments);ue(this,kp)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ge(this,kp,b2).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=M.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>M.maxValue(r)?(c.CF=!0,u=M.fromUnsigned(h-M.maxValue(r)-1,r)):(c.CF=!1,u=M.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=M.fromUnsigned(h+M.maxValue(r)+1,r)):(c.CF=!1,u=M.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}kp=new WeakSet,b2=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};var Ep,S2;class lL extends ds{constructor(){super(...arguments);ue(this,Ep)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ge(this,Ep,S2).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=M.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=M.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===M.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",M.fromSigned(1,16));const o=i.unsigned+1;o>M.maxValue(this.operation.size)?(s.CF=!0,r=M.fromUnsigned(o-M.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=M.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",M.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=M.fromUnsigned(o+M.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=M.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Ep=new WeakSet,S2=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class uL extends ds{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Cp,k2;class cL extends ds{constructor(){super(...arguments);ue(this,Cp)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ge(this,Cp,k2).call(this),willUse:{ri:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",M.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new At("io-memory-not-implemented",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new At("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new At("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Cp=new WeakSet,k2=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class dL extends ds{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class hL extends ds{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function Po(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function fL(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Ap,E2;class pL extends ds{constructor(){super(...arguments);ue(this,Ap)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ge(this,Ap,E2).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd",id:i==="reg<-mem"||i==="reg<-imd"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return r===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[a,l]=fL(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(!(yield*n.cpu.useBus("mem-write"))||l&&(yield*n.cpu.updateWordRegister("ri",u=>u.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Ap=new WeakSet,E2=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};class mL extends ds{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class gL extends ds{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function yL(t){switch(t.instruction){case"MOV":return new pL(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new aL(t);case"NOT":case"NEG":case"INC":case"DEC":return new lL(t);case"IN":case"OUT":return new cL(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new gL(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new dL(t);case"RET":case"IRET":return new mL(t);case"INT":return new uL(t);case"CLI":case"STI":case"NOP":case"HLT":return new hL(t)}}const Wa={0:32768,3:32771,6:32774,7:32775};function vL(t){return Object.values(Wa).includes(t.unsigned)}function*wL(t,e){switch(e.unsigned){case Wa[0]:return yield{type:"cpu:int.0"},!1;case Wa[3]:return yield{type:"cpu:int.3"},!0;case Wa[6]:{yield*t.cpu.copyWordRegister("BX","ri");const n=yield*t.io.console.read();if(yield*t.cpu.updateWordRegister("id",n.withHigh(M.zero(8))),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("id.l"),!(yield*t.cpu.useBus("mem-write")))return!1;break}case Wa[7]:{if(yield*t.cpu.copyWordRegister("AX","id"),!(yield*t.cpu.pushToStack())||(yield*t.cpu.copyWordRegister("BX","id"),!(yield*t.cpu.pushToStack())))return!1;yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",M.zero(8));const n=t.cpu.getRegister("AL");for(yield*t.cpu.aluExecute("SUB",n,{CF:!1,OF:!1,SF:n.signed<0,ZF:n.isZero()});!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read")))return!1;yield*t.cpu.getMBR("id.l");const i=t.cpu.getRegister("id.l");yield*t.io.console.write(i),yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",M.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",M.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===M.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","BX"),!(yield*t.cpu.popFromStack())))return!1;yield*t.cpu.copyWordRegister("id","AX");break}default:throw new Error("Invalid interrupt number")}return!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","IP"),!(yield*t.cpu.popFromStack()))?!1:(yield*t.cpu.copyWordRegister("id","FLAGS"),!0)}var yl,Re,Un,un,Ms,Pa,En,ai,NE;let xL=(NE=class extends Pr{constructor(n){super(n);ue(this,Ms);ue(this,En);ue(this,yl,void 0);ue(this,Re,void 0);ue(this,Un,void 0);ue(this,un,void 0);n.data==="unchanged"?(j(this,Re,S(n.previous.cpu,Re)),j(this,Un,S(n.previous.cpu,Un)),j(this,un,S(n.previous.cpu,un))):n.data==="randomize"?(j(this,Re,{AX:M.random(16),BX:M.random(16),CX:M.random(16),DX:M.random(16),SP:M.random(16),IP:M.random(16),IR:M.random(8),ri:M.random(16),id:M.random(16),left:M.random(16),right:M.random(16),result:M.random(16),FLAGS:M.random(16)}),j(this,Un,M.random(16)),j(this,un,M.random(8))):(j(this,Re,{AX:M.zero(16),BX:M.zero(16),CX:M.zero(16),DX:M.zero(16),SP:M.zero(16),IP:M.zero(16),IR:M.zero(8),ri:M.zero(16),id:M.zero(16),left:M.zero(16),right:M.zero(16),result:M.zero(16),FLAGS:M.zero(16)}),j(this,Un,M.zero(16)),j(this,un,M.zero(8))),S(this,Re).SP=M.fromUnsigned(pe.MAX_ADDRESS+1,16),S(this,Re).IP=M.fromUnsigned(8192,16),Ge(this,En,ai).call(this,"IF",!0),j(this,yl,new Map);for(const i of n.program.instructions){const r=yL(i);S(this,yl).set(r.start.value,r)}}*run(){for(;;){const n=S(this,Re).IP;if(vL(n)){if(!(yield*wL(this.computer,n)))return}else{const i=S(this,yl).get(n.unsigned);if(!i){yield{type:"cpu:error",error:new At("no-instruction",S(this,Re).IP)};return}if(!(yield*i.execute(this.computer)))return}if(this.getFlag("IF")&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const i=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",M.zero(8)),yield*this.startInterrupt(i)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;let i=M.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),i=i.add(1),yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(S(this,Re)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:S(this,Un).toJSON(),MBR:S(this,un).toJSON()}}getRegister(n){const[i,r]=Po(n);return r==="low"?S(this,Re)[i].low:r==="high"?S(this,Re)[i].high:S(this,Re)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Ge(this,Ms,Pa).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Ge(this,Ms,Pa).call(this,i,r),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ge(this,Ms,Pa).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ge(this,Ms,Pa).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return S(this,Re).FLAGS.bit(0);case"ZF":return S(this,Re).FLAGS.bit(6);case"SF":return S(this,Re).FLAGS.bit(7);case"IF":return S(this,Re).FLAGS.bit(9);case"OF":return S(this,Re).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Ge(this,En,ai).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Ge(this,En,ai).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Ge(this,En,ai).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Ge(this,En,ai).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Ge(this,En,ai).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:S(this,Re).FLAGS}}*aluExecute(n,i,r){S(this,Re).result=i.is8bits()?S(this,Re).result.withLow(i):i,typeof r.CF=="boolean"&&Ge(this,En,ai).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Ge(this,En,ai).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Ge(this,En,ai).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Ge(this,En,ai).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Ge(this,En,ai).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:S(this,Re).result,flags:S(this,Re).FLAGS}}*setMAR(n){const i=this.getRegister(n);j(this,Un,i),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Ge(this,Ms,Pa).call(this,n,S(this,un)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);j(this,un,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(S(this,Un));return i?(j(this,un,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(S(this,Un),S(this,un)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(S(this,Un).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(j(this,un,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(S(this,Un).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,S(this,un))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{const i=yield*this.computer.io.pic.handleINTR();return j(this,un,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return pe.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?pe.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new At("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new At("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return pe.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),pe.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new At("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new At("stack-underflow")},!1)}},yl=new WeakMap,Re=new WeakMap,Un=new WeakMap,un=new WeakMap,Ms=new WeakSet,Pa=function(n,i){const[r,s]=Po(n);if(s===null){if(S(this,Re)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);S(this,Re)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?S(this,Re)[r]=S(this,Re)[r].withLow(i):S(this,Re)[r]=S(this,Re)[r].withHigh(i)}},En=new WeakSet,ai=function(n,i){switch(n){case"CF":S(this,Re).FLAGS=S(this,Re).FLAGS.withBit(0,i);return;case"ZF":S(this,Re).FLAGS=S(this,Re).FLAGS.withBit(6,i);return;case"SF":S(this,Re).FLAGS=S(this,Re).FLAGS.withBit(7,i);return;case"IF":S(this,Re).FLAGS=S(this,Re).FLAGS.withBit(9,i);return;case"OF":S(this,Re).FLAGS=S(this,Re).FLAGS.withBit(11,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},NE),bL=class extends Pr{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}};var Wn,vl;class SL extends Pr{constructor(n){super(n);ue(this,Wn,void 0);ue(this,vl,null);n.data==="unchanged"?j(this,Wn,S(n.previous.io.console,Wn)):j(this,Wn,"")}get screen(){return S(this,Wn)}clear(){return this.write(M.fromUnsigned(12,8))}*read(){yield{type:"console:read"};const n=S(this,vl);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return j(this,vl,null),n}setLastCharRead(n){j(this,vl,n)}*write(n){switch(n.unsigned){case 8:j(this,Wn,S(this,Wn).slice(0,-1));break;case 10:j(this,Wn,S(this,Wn)+`
`);break;case 12:j(this,Wn,"");break;default:j(this,Wn,S(this,Wn)+Aw(n.unsigned));break}yield{type:"console:write",char:n}}toJSON(){return S(this,Wn)}}Wn=new WeakMap,vl=new WeakMap;let kL=class extends Pr{*press(){yield{type:"f10:press"},yield{type:"f10:int.on"},yield*this.computer.io.pic.interrupt(0),yield{type:"f10:int.off"}}toJSON(){return null}};class Kp extends Pr{}var pr,Fr,Cn,cn,_i,wl,Mh,xl,Dh;let EL=(pr=class extends Kp{constructor(n){super(n);ue(this,wl);ue(this,xl);ue(this,Fr,void 0);ue(this,Cn,void 0);ue(this,cn,void 0);ue(this,_i,void 0);j(this,Fr,M.fromUnsigned(255,8)),j(this,Cn,M.fromUnsigned(0,8)),j(this,cn,M.fromUnsigned(0,8)),n.data==="unchanged"?j(this,_i,S(n.previous.io.pic,_i)):n.data==="randomize"?j(this,_i,new Array(pr.LINES).fill(M.zero(8)).map(()=>M.random(8))):j(this,_i,new Array(pr.LINES).fill(M.zero(8)))}chipSelect(n){const r=4+pr.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=M.zero(8);else if(n==="IMR")i=S(this,Fr);else if(n==="IRR")i=S(this,Cn);else if(n==="ISR")i=S(this,cn);else{const r=Number(n.slice(3));i=S(this,_i)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")S(this,cn).isZero()||(yield{type:"pic:intr.off"},j(this,cn,M.zero(8)),yield{type:"pic:register.update",register:"ISR",value:S(this,cn)},yield*Ge(this,xl,Dh).call(this));else if(n==="IMR")j(this,Fr,i),yield{type:"pic:register.update",register:"IMR",value:S(this,Fr)},yield*Ge(this,xl,Dh).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));S(this,_i)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=pr.LINES)throw new RangeError(`Invalid interrupt line ${n}`);S(this,Cn).bit(n)||(j(this,Cn,S(this,Cn).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:S(this,Cn)},yield*Ge(this,xl,Dh).call(this))}isINTRActive(){return S(this,cn).isZero()&&Ge(this,wl,Mh).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!S(this,cn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Ge(this,wl,Mh).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");j(this,cn,S(this,cn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:S(this,cn)},j(this,Cn,S(this,Cn).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:S(this,Cn)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=S(this,_i)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:S(this,Fr).toJSON(),IRR:S(this,Cn).toJSON(),ISR:S(this,cn).toJSON(),lines:S(this,_i).map(n=>n.toJSON())}}},Fr=new WeakMap,Cn=new WeakMap,cn=new WeakMap,_i=new WeakMap,wl=new WeakSet,Mh=function(){for(let n=0;n<pr.LINES;n++)if(S(this,Cn).bit(n)&&!S(this,Fr).bit(n))return n;return null},xl=new WeakSet,Dh=function*(){S(this,cn).isZero()&&Ge(this,wl,Mh).call(this)!==null&&(yield{type:"pic:intr.on"})},Z(pr,"LINES",8),pr);var ar,Ds,ME;let CL=(ME=class extends Kp{constructor(n){super(n);ue(this,ar,void 0);ue(this,Ds,void 0);j(this,ar,M.zero(8)),j(this,Ds,M.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=S(this,ar);else if(n==="COMP")i=S(this,Ds);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")j(this,ar,i);else if(n==="COMP")j(this,Ds,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=S(this,ar).unsigned===M.maxValue(8)?M.zero(8):S(this,ar).add(1);j(this,ar,n),yield{type:"timer:register.update",register:"CONT",value:n},S(this,Ds).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:S(this,ar).toJSON(),COMP:S(this,Ds).toJSON()}}},ar=new WeakMap,Ds=new WeakMap,ME);class Zp extends Pr{constructor(n){super(n);Z(this,"clock");Z(this,"console");Z(this,"f10");Z(this,"pic");Z(this,"timer");this.clock=new bL(n),this.console=new SL(n),this.f10=new kL(n),this.pic=new EL(n),this.timer=new CL(n)}*chipSelect(n){const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const r=this.timer.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:r}):(yield{type:"bus:io.error",error:new At("io-memory-not-implemented",n)},null)}*read(n){const{chip:i,register:r}=n;return i==="pic"?yield*this.pic.read(r):i==="timer"?yield*this.timer.read(r):(yield{type:"bus:io.error",error:new At("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return r==="pic"?(yield*this.pic.write(s,i),!0):r==="timer"?(yield*this.timer.write(s,i),!0):(yield{type:"bus:io.error",error:new At("device-not-connected",r)},!1)}toJSON(){return{clock:this.clock.toJSON(),console:this.console.toJSON(),f10:this.f10.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}}Z(Zp,"SIZE",Ln.MAX_ADDRESS+1);var lr,dn,DE;let AL=(DE=class extends Kp{constructor(n){super(n);ue(this,lr,void 0);ue(this,dn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?j(this,lr,M.zero(8)):n.data==="randomize"?j(this,lr,M.random(8)):j(this,lr,M.zero(8)),j(this,dn,M.zero(8))}get interrupts(){return S(this,dn).bit(7)}get DATA(){return S(this,lr)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=S(this,lr);else if(n==="STATE")i=S(this,dn);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")j(this,lr,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.computer.io.printer.busy),j(this,dn,i),yield{type:"handshake:register.update",register:n,value:i},S(this,dn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),j(this,dn,S(this,dn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:S(this,dn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){j(this,dn,S(this,dn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:S(this,dn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:S(this,lr).toJSON(),STATE:S(this,dn).toJSON()}}},lr=new WeakMap,dn=new WeakMap,DE);var ci,jr,$s;const tc=class tc extends Pr{constructor(n){super(n);ue(this,ci,void 0);ue(this,jr,void 0);ue(this,$s,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(j(this,ci,S(n.previous.io.printer,ci)),j(this,jr,S(n.previous.io.printer,jr)),j(this,$s,S(n.previous.io.printer,$s))):(j(this,ci,[]),j(this,jr,""),j(this,$s,!1))}get busy(){return S(this,ci).length>=tc.BUFFER_SIZE}*setStrobe(n){const i=S(this,$s);if(i===n)return;if(j(this,$s,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();S(this,ci).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){j(this,jr,""),yield{type:"printer:paper.replace"}}*print(){if(S(this,ci).length===0)return;const[n,...i]=S(this,ci);if(j(this,ci,i),yield{type:"printer:buffer.pop",char:n},i.length===tc.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=Aw(n.unsigned);j(this,jr,S(this,jr)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:S(this,jr),buffer:[...S(this,ci).map(n=>n.unsigned)]}}};ci=new WeakMap,jr=new WeakMap,$s=new WeakMap,Z(tc,"BUFFER_SIZE",5);let Of=tc,PL=class extends Of{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}};class RL extends Zp{constructor(n){super(n);Z(this,"printer");Z(this,"handshake");this.printer=new PL(n),this.handshake=new AL(n)}*chipSelect(n){const i=this.handshake.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="handshake"?yield*this.handshake.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="handshake"?(yield*this.handshake.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),handshake:this.handshake.toJSON()}}}class C2 extends Kp{constructor(n){super(n);Z(this,"PA");Z(this,"PB");Z(this,"CA");Z(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=M.random(8),this.PB=M.random(8),this.CA=M.random(8),this.CB=M.random(8)):(this.PA=M.zero(8),this.PB=M.zero(8),this.CA=M.zero(8),this.CB=M.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let TL=class extends C2{readData(){const e=this.PB.unsigned&~this.CB.unsigned;return M.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.computer.io.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=M.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA},this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1))))}};class OL extends Of{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}}class _L extends Zp{constructor(n){super(n);Z(this,"printer");Z(this,"pio");this.printer=new OL(n),this.pio=new TL(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),pio:this.pio.toJSON()}}}var Vr;class NL extends Pr{constructor(n){super(n);ue(this,Vr,void 0);n.data==="unchanged"&&"leds"in n.previous.io?j(this,Vr,S(n.previous.io.leds,Vr)):n.data==="randomize"?j(this,Vr,M.random(8)):j(this,Vr,M.zero(8))}get state(){return S(this,Vr)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return S(this,Vr).toJSON()}}Vr=new WeakMap;class ML extends C2{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=M.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.computer.io.leds.update(M.fromUnsigned(n,8))}}}var di;class DL extends Pr{constructor(n){super(n);ue(this,di,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?j(this,di,S(n.previous.io.switches,di)):n.data==="randomize"?j(this,di,M.random(8)):j(this,di,M.zero(8))}get state(){return S(this,di)}*toggle(n){j(this,di,S(this,di).withBit(n,!S(this,di).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return S(this,di).toJSON()}}di=new WeakMap;class $L extends Zp{constructor(n){super(n);Z(this,"leds");Z(this,"switches");Z(this,"pio");this.leds=new NL(n),this.switches=new DL(n),this.pio=new ML(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),leds:this.leds.toJSON(),switches:this.switches.toJSON(),pio:this.pio.toJSON()}}}var Wo,Hn,bl;let LL=(Wo=class extends Pr{constructor(n){super(n);ue(this,Hn,void 0);ue(this,bl,void 0);n.data==="unchanged"?j(this,Hn,S(n.previous.memory,Hn)):n.data==="randomize"?j(this,Hn,new Uint8Array(Wo.SIZE).map(()=>M.random(8).unsigned)):j(this,Hn,new Uint8Array(Wo.SIZE));for(const[i,r]of Object.entries(Wa)){const s=M.fromUnsigned(r,16);S(this,Hn).set(s.toUint8Array(),Number(i)*4)}for(const i of n.program.data){let r=i.start.value;for(const s of i.getValues())s!==Ou&&S(this,Hn).set(s.toUint8Array(),r),r+=i.size/8}j(this,bl,new Set);for(const i of n.program.instructions){S(this,Hn).set(i.toBytes(),i.start.value);for(let r=0;r<i.length;r++)S(this,bl).add(i.start.value+r)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!pe.inRange(n))return yield{type:"memory:read.error",error:new At("address-out-of-range",n)},null;const i=M.fromUnsigned(S(this,Hn).at(n),8);return yield{type:"memory:read.ok",value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},pe.inRange(n)?S(this,bl).has(n)?(yield{type:"memory:write.error",error:new At("address-has-instruction",n)},!1):(S(this,Hn).set([i.unsigned],n),yield{type:"memory:write.ok"},!0):(yield{type:"memory:write.error",error:new At("address-out-of-range",n)},!1)}toJSON(){return[...S(this,Hn)]}},Hn=new WeakMap,bl=new WeakMap,Z(Wo,"SIZE",pe.MAX_ADDRESS+1),Wo);class wb{constructor(e){Z(this,"cpu");Z(this,"memory");Z(this,"io");const n={computer:this,...e};switch(this.cpu=new xL(n),this.memory=new LL(n),e.devices){case"pio-switches-and-leds":{this.io=new $L(n);break}case"pio-printer":{this.io=new _L(n);break}case"handshake":{this.io=new RL(n);break}default:throw new Error("Invalid devices configuration")}}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var St;class IL{constructor(){ue(this,St,new wb({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){j(this,St,new wb({...e,previous:S(this,St)}))}getComputerState(){var e;return((e=S(this,St))==null?void 0:e.toJSON())||null}startCPU(){if(!S(this,St))throw new At("no-program");return S(this,St).cpu.run()}get devices(){if(!S(this,St))throw new Error("No computer loaded!");return{clock:{tick:()=>S(this,St).io.clock.tick()},console:{readChar:e=>S(this,St).io.console.setLastCharRead(e),clear:()=>S(this,St).io.console.clear()},f10:{press:()=>S(this,St).io.f10.press()},printer:{connected:()=>"printer"in S(this,St).io,clear:()=>{if("printer"in S(this,St).io)return S(this,St).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in S(this,St).io)return S(this,St).io.printer.print();console.warn("No printer connected to the computer!")}},switches:{connected:()=>"printer"in S(this,St).io,toggle:e=>{if("switches"in S(this,St).io)return S(this,St).io.switches.toggle(e);console.warn("No switches connected to the computer!")}}}}}St=new WeakMap;class Ve{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),cr.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let i=[];return this.decompose(e,n,i,0),cr.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Xu(this),s=new Xu(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Xu(this,e)}iterRange(e,n=this.length){return new A2(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new P2(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ve.empty:e.length<=32?new kt(e):cr.from(kt.split(e,[]))}}class kt extends Ve{constructor(e,n=BL(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new zL(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new kt(xb(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=$h(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new kt(a,o.length+s.length));else{let l=a.length>>1;i.push(new kt(a.slice(0,l)),new kt(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof kt))return super.replace(e,n,i);let r=$h(this.text,$h(i.text,xb(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new kt(r,s):cr.from(kt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new kt(i,r)),i=[],r=-1);return r>-1&&n.push(new kt(i,r)),n}}class cr extends Ve{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?i.push(a):a.decompose(e-o,n-o,i,u)}o=l+1}}replace(e,n,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),u=this.lines-o.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[r]=l,new cr(c,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof cr))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],u=e.children[s];if(l!=u)return i+l.scanIdentical(u,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new kt(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof cr)for(let m of f.children)d(m);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof kt&&l&&(p=c[c.length-1])instanceof kt&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new kt(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:cr.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new cr(a,n)}}Ve.empty=new kt([""],0);function BL(t){let e=-1;for(let n of t)e+=n.length+1;return e}function $h(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function xb(t,e,n){return $h(t,[""],e,n)}class Xu{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof kt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof kt?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof kt){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof kt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class A2{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Xu(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class P2{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ve.prototype[Symbol.iterator]=function(){return this.iter()},Xu.prototype[Symbol.iterator]=A2.prototype[Symbol.iterator]=P2.prototype[Symbol.iterator]=function(){return this});class zL{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}let nl="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<nl.length;t++)nl[t]+=nl[t-1];function FL(t){for(let e=1;e<nl.length;e+=2)if(nl[e]>t)return nl[e-1]<=t;return!1}function bb(t){return t>=127462&&t<=127487}const Sb=8205;function rn(t,e,n=!0,i=!0){return(n?R2:jL)(t,e,i)}function R2(t,e,n){if(e==t.length)return e;e&&T2(t.charCodeAt(e))&&O2(t.charCodeAt(e-1))&&e--;let i=fn(t,e);for(e+=$i(i);e<t.length;){let r=fn(t,e);if(i==Sb||r==Sb||n&&FL(r))e+=$i(r),i=r;else if(bb(r)){let s=0,o=e-2;for(;o>=0&&bb(fn(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function jL(t,e,n){for(;e>0;){let i=R2(t,e-2,n);if(i<e)return i;e--}return 0}function T2(t){return t>=56320&&t<57344}function O2(t){return t>=55296&&t<56320}function fn(t,e){let n=t.charCodeAt(e);if(!O2(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return T2(i)?(n-55296<<10)+(i-56320)+65536:n}function Ow(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function $i(t){return t<65536?1:2}const cy=/\r\n?|\n/;var Tn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Tn||(Tn={}));class vr{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){dy(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new vr(e)}composeDesc(e){return this.empty?e:e.empty?this:_2(this,e)}mapDesc(e,n=!1){return e.empty?this:hy(this,e,n)}mapPos(e,n=-1,i=Tn.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=r+a;if(l<0){if(u>e)return s+(e-r);s+=a}else{if(i!=Tn.Simple&&u>=e&&(i==Tn.TrackDel&&r<e&&u>e||i==Tn.TrackBefore&&r<e||i==Tn.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new vr(e)}static create(e){return new vr(e)}}class Mt extends vr{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return dy(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return hy(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(Ve.empty);i.push(o?e.slice(s,s+o):Ve.empty)}s+=o}return new Mt(n,i)}compose(e){return this.empty?e:e.empty?this:_2(this,e,!0)}map(e,n=!1){return e.empty?this:hy(this,e,n,!0)}iterChanges(e,n=!1){dy(this,e,n)}get desc(){return vr.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new wc(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);tn(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;tn(n,c,d),d>0&&Bs(i,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);tn(n,c,-1),tn(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new Mt(n,i),filtered:vr.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!r.length)return;o<n&&tn(r,n-o,-1);let d=new Mt(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof Mt){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?Ve.of(f.split(i||cy)):f:Ve.empty,m=p.length;if(d==h&&m==0)return;d<o&&l(),d>o&&tn(r,d-o,-1),tn(r,h-d,m),Bs(s,r,p),o=h}}return u(e),l(!a),a}static empty(e){return new Mt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(Ve.empty);i[r]=Ve.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new Mt(n,i)}static createSet(e,n){return new Mt(e,n)}}function tn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Bs(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Ve.empty);t.push(n)}}function dy(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let u=r,c=s,d=Ve.empty;for(;u+=a,c+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function hy(t,e,n,i=!1){let r=[],s=i?[]:null,o=new wc(t),a=new wc(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);tn(r,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(tn(r,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(tn(r,0,o.ins),s&&Bs(s,r,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;tn(r,u,l<o.i?o.ins:0),s&&l<o.i&&Bs(s,r,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?Mt.createSet(r,s):vr.create(r);throw new Error("Mismatched change set lengths")}}function _2(t,e,n=!1){let i=[],r=n?[]:null,s=new wc(t),o=new wc(e);for(let a=!1;;){if(s.done&&o.done)return r?Mt.createSet(i,r):vr.create(i);if(s.ins==0)tn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)tn(i,0,o.ins,a),r&&Bs(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;tn(i,l,c,a),r&&c&&Bs(r,i,o.text)}else o.ins==-1?(tn(i,s.off?0:s.len,l,a),r&&Bs(r,i,s.textBit(l))):(tn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Bs(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>u),s.forward2(l),o.forward(l)}}}}class wc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Ve.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Ve.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Do{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Do(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return V.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return V.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return V.range(e.anchor,e.head)}static create(e,n,i){return new Do(e,n,i)}}class V{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:V.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new V([this.main],0)}addRange(e,n=!0){return V.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,V.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new V(e.ranges.map(n=>Do.fromJSON(n)),e.main)}static single(e,n=e){return new V([V.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return V.normalized(e.slice(),n);i=s.to}return new V(e,n)}static cursor(e,n=0,i,r){return Do.create(e,e,(n==0?0:n<0?4:8)|(i==null?3:Math.min(2,i))|(r??33554431)<<5)}static range(e,n,i,r){let s=(i??33554431)<<5|(r==null?3:Math.min(2,r));return n<e?Do.create(n,e,24|s):Do.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?V.range(l,a):V.range(a,l))}}return new V(e,n)}}function N2(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let _w=0;class le{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=_w++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new le(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:Nw),!!e.static,e.enables)}of(e){return new Lh([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Lh(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Lh(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function Nw(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Lh{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=_w++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||fy(d,c)){let f=i(d);if(a?!kb(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let m=Nf(h,p);if(this.dependencies.every(v=>v instanceof le?h.facet(v)===d.facet(v):v instanceof an?h.field(v,!1)==d.field(v,!1):!0)||(a?kb(f=i(d),m,r):r(f=i(d),m)))return d.values[o]=m,0}else f=i(d);return d.values[o]=f,1}}}}function kb(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function fy(t,e){let n=!1;for(let i of e)Ku(t,i)&1&&(n=!0);return n}function VL(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<i.length;c++){let d=Nf(l,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of i)Ku(l,u);return l.values[o]=a(l),1},update(l,u){if(!fy(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=fy(l,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&Nw(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const Eb=le.define({static:!0});class an{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new an(_w++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Eb).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,Eb.of({field:this,create:e})]}get extension(){return this}}const Ro={lowest:4,low:3,default:2,high:1,highest:0};function hu(t){return e=>new M2(e,t)}const rd={highest:hu(Ro.highest),high:hu(Ro.high),default:hu(Ro.default),low:hu(Ro.low),lowest:hu(Ro.lowest)};class M2{constructor(e,n){this.inner=e,this.prec=n}}class sd{of(e){return new py(this,e)}reconfigure(e){return sd.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class py{constructor(e,n){this.compartment=e,this.inner=n}}class _f{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of UL(e,n,o))h instanceof an?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of r)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,m=c&&c[h]||[];if(f.every(v=>v.type==0))if(a[p.id]=l.length<<1|1,Nw(m,f))l.push(i.facet(p));else{let v=p.combine(f.map(g=>g.value));l.push(i&&p.compare(v,i.facet(p))?i.facet(p):v)}else{for(let v of f)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=u.length<<1,u.push(g=>v.dynamicSlot(g)));a[p.id]=u.length<<1,u.push(v=>VL(v,p,f))}}let d=u.map(h=>h(a));return new _f(e,o,d,a,l,s)}}function UL(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let u=i[l].indexOf(o);u>-1&&i[l].splice(u,1),o instanceof py&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof py){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof M2)s(o.inner,o.prec);else if(o instanceof an)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Lh)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Ro.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Ro.default),i.reduce((o,a)=>o.concat(a))}function Ku(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Nf(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const D2=le.define(),$2=le.define({combine:t=>t.some(e=>e),static:!0}),L2=le.define({combine:t=>t.length?t[0]:void 0,static:!0}),I2=le.define(),B2=le.define(),z2=le.define(),F2=le.define({combine:t=>t.length?t[0]:!1});class hs{constructor(e,n){this.type=e,this.value=n}static define(){return new WL}}class WL{of(e){return new hs(this,e)}}class HL{constructor(e){this.map=e}of(e){return new Ne(this,e)}}class Ne{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ne(this.type,n)}is(e){return this.type==e}static define(e={}){return new HL(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}Ne.reconfigure=Ne.define();Ne.appendConfig=Ne.define();class Lt{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&N2(i,n.newLength),s.some(a=>a.type==Lt.time)||(this.annotations=s.concat(Lt.time.of(Date.now())))}static create(e,n,i,r,s,o){return new Lt(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Lt.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Lt.time=hs.define();Lt.userEvent=hs.define();Lt.addToHistory=hs.define();Lt.remote=hs.define();function GL(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function j2(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=Mt.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:Ne.mapEffects(t.effects,r).concat(Ne.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function my(t,e,n){let i=e.selection,r=il(e.annotations);return e.userEvent&&(r=r.concat(Lt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Mt?e.changes:Mt.of(e.changes||[],n,t.facet(L2)),selection:i&&(i instanceof V?i:V.single(i.anchor,i.head)),effects:il(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function V2(t,e,n){let i=my(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=j2(i,my(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=Lt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return KL(n?XL(r):r)}function XL(t){let e=t.startState,n=!0;for(let r of e.facet(I2)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:GL(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=Mt.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Lt.create(e,r,t.selection&&t.selection.map(s),Ne.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(B2);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof Lt?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Lt?t=s[0]:t=V2(e,il(s),!1)}return t}function KL(t){let e=t.startState,n=e.facet(z2),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=j2(i,my(e,s,t.changes.newLength),!0))}return i==t?t:Lt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const ZL=[];function il(t){return t==null?ZL:Array.isArray(t)?t:[t]}var Xt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Xt||(Xt={}));const YL=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let gy;try{gy=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function JL(t){if(gy)return gy.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||YL.test(n)))return!0}return!1}function qL(t){return e=>{if(!/\S/.test(e))return Xt.Space;if(JL(e))return Xt.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Xt.Word;return Xt.Other}}class De{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ku(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Ku(this,i),Nf(this,i)}update(...e){return V2(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(sd.reconfigure)?(n&&(r=new Map,n.compartments.forEach((a,l)=>r.set(l,a)),n=null),r.set(o.value.compartment,o.value.extension)):o.is(Ne.reconfigure)?(n=null,i=o.value):o.is(Ne.appendConfig)&&(n=null,i=il(i).concat(o.value));let s;n?s=e.startState.values.slice():(n=_f.resolve(i,r,this),s=new De(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new De(n,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:V.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=il(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(l.range.map(d)),r=r.compose(c),o=Ne.mapEffects(o,c).concat(Ne.mapEffects(il(l.effects),d))}return{changes:r,selection:V.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Mt?e:Mt.of(e,this.doc.length,this.facet(De.lineSeparator))}toText(e){return Ve.of(e.split(this.facet(De.lineSeparator)||cy))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Ku(this,n),Nf(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof an&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return De.create({doc:e.doc,selection:V.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=_f.resolve(e.extensions||[],new Map),i=e.doc instanceof Ve?e.doc:Ve.of((e.doc||"").split(n.staticFacet(De.lineSeparator)||cy)),r=e.selection?e.selection instanceof V?e.selection:V.single(e.selection.anchor,e.selection.head):V.single(0);return N2(r,i.length),n.staticFacet($2)||(r=r.asSingle()),new De(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(De.tabSize)}get lineBreak(){return this.facet(De.lineSeparator)||`
`}get readOnly(){return this.facet(F2)}phrase(e,...n){for(let i of this.facet(De.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(D2))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return qL(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=rn(n,o,!1);if(s(n.slice(l,o))!=Xt.Word)break;o=l}for(;a<r;){let l=rn(n,a);if(s(n.slice(a,l))!=Xt.Word)break;a=l}return o==a?null:V.range(o+i,a+i)}}De.allowMultipleSelections=$2;De.tabSize=le.define({combine:t=>t.length?t[0]:4});De.lineSeparator=L2;De.readOnly=F2;De.phrases=le.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});De.languageData=D2;De.changeFilter=I2;De.transactionFilter=B2;De.transactionExtender=z2;sd.reconfigure=Ne.define();function mo(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Jo{eq(e){return this==e}range(e,n=e){return yy.create(e,n,this)}}Jo.prototype.startSide=Jo.prototype.endSide=0;Jo.prototype.point=!1;Jo.prototype.mapMode=Tn.TrackDel;let yy=class U2{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new U2(e,n,i)}};function vy(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Mw{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new Mw(r,s,i,a):null,pos:o}}}class it{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new it(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(vy)),this.isEmpty)return n.length?it.of(n):this;let a=new W2(this,null,-1).goto(0),l=0,u=[],c=new qo;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(yy.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?it.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new it(i,n,s||it.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return xc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return xc.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=Cb(o,a,i),u=new fu(o,l,s),c=new fu(a,l,s);i.iterGaps((d,h,f)=>Ab(u,d,c,h,f,r)),i.empty&&i.length==0&&Ab(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Cb(s,o),l=new fu(s,a,0).goto(i),u=new fu(o,a,0).goto(i);for(;;){if(l.to!=u.to||!wy(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>r)return!0;l.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new fu(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:Math.min(c.length,l);r.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(r.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new qo;for(let r of e instanceof yy?[e]:n?QL(e):e)i.add(r.from,r.to,r.value);return i.finish()}}it.empty=new it([],[],null,-1);function QL(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(vy(e,i)>0)return t.slice().sort(vy);e=i}return t}it.empty.nextLayer=it.empty;class qo{finishChunk(e){this.chunks.push(new Mw(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new qo)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(it.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=it.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Cb(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class W2{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class xc{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new W2(o,n,i,s));return r.length==1?r[0]:new xc(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)lg(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)lg(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),lg(this.heap,0)}}}function lg(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class fu{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=xc.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Fd(this.active,e),Fd(this.activeTo,e),Fd(this.activeRank,e),this.minActive=Pb(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;jd(this.active,n,i),jd(this.activeTo,n,r),jd(this.activeRank,n,s),e&&jd(e,n,this.cursor.from),this.minActive=Pb(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Fd(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function Ab(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&wy(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!wy(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function wy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Fd(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function jd(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function Pb(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Yp(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=rn(t,r));return i}function eI(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=rn(t,r)}return i===!0?-1:t.length}const xy="ͼ",Rb=typeof Symbol>"u"?"__"+xy:Symbol.for(xy),by=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class to{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Tb[Rb]||1;return Tb[Rb]=e+1,xy+e.toString(36)}static mount(e,n){(e[by]||new tI(e)).mount(Array.isArray(n)?n:[n])}}let Ob=new Map;class tI{constructor(e){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=Ob.get(n);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[by]=r;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Ob.set(n,this)}else{this.styleTag=n.createElement("style");let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[by]=this}mount(e){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var no={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},bc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nI=typeof navigator<"u"&&/Mac/.test(navigator.platform),iI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ut=0;Ut<10;Ut++)no[48+Ut]=no[96+Ut]=String(Ut);for(var Ut=1;Ut<=24;Ut++)no[Ut+111]="F"+Ut;for(var Ut=65;Ut<=90;Ut++)no[Ut]=String.fromCharCode(Ut+32),bc[Ut]=String.fromCharCode(Ut);for(var ug in no)bc.hasOwnProperty(ug)||(bc[ug]=no[ug]);function rI(t){var e=nI&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||iI&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?bc:no)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Mf(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Sy(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function sI(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ih(t,e){if(!e.anchorNode)return!1;try{return Sy(t,e.anchorNode)}catch{return!1}}function Sc(t){return t.nodeType==3?Qo(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Df(t,e,n,i){return n?_b(t,e,n,i,-1)||_b(t,e,n,i,1):!1}function $f(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function _b(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:io(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=$f(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?io(t):0}else return!1}}function io(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Dw(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function oI(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function aI(t,e,n,i,r,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body;if(f)h=oI(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let v=c.getBoundingClientRect();h={left:v.left,right:v.left+c.clientWidth,top:v.top,bottom:v.top+c.clientHeight}}let p=0,m=0;if(r=="nearest")e.top<h.top?(m=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+m&&(m=e.bottom-h.bottom+m+o)):e.bottom>h.bottom&&(m=e.bottom-h.bottom+o,n<0&&e.top-m<h.top&&(m=-(h.top+m-e.top+o)));else{let v=e.bottom-e.top,g=h.bottom-h.top;m=(r=="center"&&v<=g?e.top+v/2-g/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-g+o)-h.top}if(i=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),n>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,n<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||m)if(f)u.scrollBy(p,m);else{let v=0,g=0;if(m){let y=c.scrollTop;c.scrollTop+=m,g=c.scrollTop-y}if(p){let y=c.scrollLeft;c.scrollLeft+=p,v=c.scrollLeft-y}e={left:e.left-v,top:e.top-g,right:e.right-v,bottom:e.bottom-g},v&&Math.abs(v-p)<1&&(i="nearest"),g&&Math.abs(g-m)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function lI(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class uI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?io(n):0),i,Math.min(e.focusOffset,i?io(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let va=null;function H2(t){if(t.setActive)return t.setActive();if(va)return t.focus(va);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(va==null?{get preventScroll(){return va={preventScroll:!0},!0}}:void 0),!va){va=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Nb;function Qo(t,e,n=e){let i=Nb||(Nb=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function rl(t,e,n){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function cI(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function G2(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function dI(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,io(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=io(n))}else{if(n==t)return!0;i=$f(n),n=n.parentNode}}function X2(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class mn{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new mn(e.parentNode,$f(e),n)}static after(e,n){return new mn(e.parentNode,$f(e)+1,n)}}const $w=[];class qe{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=qe.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=Mb(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=Mb(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=io(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!qe.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=$w){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new K2(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}qe.prototype.breakAfter=0;function Mb(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class K2{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Z2(t,e,n,i,r,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,a,l))){if(i<u.length){let f=u[i];f&&r<f.length?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,l)?s[s.length-1]=f:(r&&f.merge(0,r,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function Y2(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,Z2(t,u,c,a,l,i,0,r,s)}const Ha="￿";class J2{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(De.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ha}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=qe.get(r),l=qe.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Db(r))||Db(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=qe.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(n,i.offset))}}function Db(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class $b{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let Yn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ky=typeof document<"u"?document:{documentElement:{style:{}}};const Ey=/Edge\/(\d+)/.exec(Yn.userAgent),q2=/MSIE \d/.test(Yn.userAgent),Cy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yn.userAgent),Jp=!!(q2||Cy||Ey),Lb=!Jp&&/gecko\/(\d+)/i.test(Yn.userAgent),cg=!Jp&&/Chrome\/(\d+)/.exec(Yn.userAgent),Ib="webkitFontSmoothing"in ky.documentElement.style,Q2=!Jp&&/Apple Computer/.test(Yn.vendor),Bb=Q2&&(/Mobile\/\w+/.test(Yn.userAgent)||Yn.maxTouchPoints>2);var ae={mac:Bb||/Mac/.test(Yn.platform),windows:/Win/.test(Yn.platform),linux:/Linux|X11/.test(Yn.platform),ie:Jp,ie_version:q2?ky.documentMode||6:Cy?+Cy[1]:Ey?+Ey[1]:0,gecko:Lb,gecko_version:Lb?+(/Firefox\/(\d+)/.exec(Yn.userAgent)||[0,0])[1]:0,chrome:!!cg,chrome_version:cg?+cg[1]:0,ios:Bb,android:/Android\b/.test(Yn.userAgent),webkit:Ib,safari:Q2,webkit_version:Ib?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:ky.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const hI=256;class br extends qe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof br)||this.length-(n-e)+i.length>hI||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new br(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new mn(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return fI(this.dom,e,n)}}class rs extends qe{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(G2(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof rs&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(Y2(this,e,n,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new rs(this.mark,n,o)}domAtPos(e){return eP(this,e)}coordsAt(e,n){return nP(this,e,n)}}function fI(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?ae.chrome||ae.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Qo(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return ae.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?Dw(l,o<0):l||null}class $o extends qe{constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}static create(e,n,i){return new $o(e,n,i)}split(e){let n=$o.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof $o)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof $o&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ve.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Ve.empty}domAtPos(e){return(this.length?e==0:this.side>0)?mn.before(this.dom):mn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Dw(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ol extends qe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ol&&e.side==this.side}split(){return new Ol(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?mn.before(this.dom):mn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ve.empty}get isHidden(){return!0}}br.prototype.children=$o.prototype.children=Ol.prototype.children=$w;function eP(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new mn(n,0)}function tP(t,e,n){let i,{children:r}=t;n>0&&e instanceof rs&&r.length&&(i=r[r.length-1])instanceof rs&&i.mark.eq(e.mark)?tP(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function nP(t,e,n){let i=null,r=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):pI(t)}function pI(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Sc(e);return n[n.length-1]||null}function Ay(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const zb=Object.create(null);function Lw(t,e,n){if(t==e)return!0;t||(t=zb),e||(e=zb);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Py(t,e,n){let i=null;if(e)for(let r in e)n&&r in n||t.removeAttribute(i=r);if(n)for(let r in n)e&&e[r]==n[r]||t.setAttribute(i=r,n[r]);return!!i}function mI(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class da{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}destroy(e){}}var gt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(gt||(gt={}));class ze extends Jo{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new od(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new ro(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=iP(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new ro(e,i,r,n,e.widget||null,!0)}static line(e){return new ad(e)}static set(e,n=!1){return it.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ze.none=it.empty;class od extends ze{constructor(e){let{start:n,end:i}=iP(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof od&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Lw(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}od.prototype.point=!1;class ad extends ze{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ad&&this.spec.class==e.spec.class&&Lw(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}ad.prototype.mapMode=Tn.TrackBefore;ad.prototype.point=!0;class ro extends ze{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Tn.TrackBefore:Tn.TrackAfter:Tn.TrackDel}get type(){return this.startSide<this.endSide?gt.WidgetRange:this.startSide<=0?gt.WidgetBefore:gt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ro&&gI(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}ro.prototype.point=!0;function iP(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function gI(t,e){return t==e||!!(t&&e&&t.compare(e))}function Ry(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class pn extends qe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof pn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Y2(this,e,n,i?i.children:[],s,o),!0}split(e){let n=new pn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Lw(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){tP(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=Ay(n,this.attrs||{})),i&&(this.attrs=Ay({class:i},this.attrs||{}))}domAtPos(e){return eP(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(G2(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Py(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&qe.get(r)instanceof rs;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=qe.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!ae.ios||!this.children.some(s=>s instanceof br))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof br)||/[^ -~]/.test(i.text))return null;let r=Sc(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=nP(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}get type(){return gt.Text}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof pn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class jo extends qe{constructor(e,n,i){super(),this.widget=e,this.length=n,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof jo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?mn.before(this.dom):mn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new jo(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i}get children(){return $w}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ve.empty}domBoundsAround(){return null}become(e){return e instanceof jo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Zu{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof jo&&e.type==gt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new pn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Vd(new Ol(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Vd(new br(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof ro){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof ro)if(i.block){let{type:l}=i;l==gt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new jo(i.widget||new Fb("div"),a,l))}else{let l=$o.create(i.widget||new Fb("span"),a,a?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(Vd(new Ol(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Vd(l,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Zu(e,n,i,s);return o.openEnd=it.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Vd(t,e){for(let n of e)t=new rs(n,[t],t.length);return t}class Fb extends da{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const rP=le.define(),sP=le.define(),oP=le.define(),aP=le.define(),Ty=le.define(),lP=le.define(),uP=le.define(),cP=le.define({combine:t=>t.some(e=>e)}),dP=le.define({combine:t=>t.some(e=>e)});class Lf{constructor(e,n="nearest",i="nearest",r=5,s=5){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new Lf(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const jb=Ne.define({map:(t,e)=>t.map(e)});function ji(t,e,n){let i=t.facet(aP);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const qp=le.define({combine:t=>t.length?t[0]:!0});let yI=0;const _u=le.define();class Yt{constructor(e,n,i,r){this.id=e,this.create=n,this.domEventHandlers=i,this.extension=r(this)}static define(e,n){const{eventHandlers:i,provide:r,decorations:s}=n||{};return new Yt(yI++,e,i,o=>{let a=[_u.of(o)];return s&&a.push(kc.of(l=>{let u=l.plugin(o);return u?s(u):ze.none})),r&&a.push(r(o)),a})}static fromClass(e,n){return Yt.define(i=>new e(i),n)}}class dg{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(ji(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){ji(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){ji(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const hP=le.define(),Iw=le.define(),kc=le.define(),Bw=le.define(),fP=le.define();function pP(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(fP)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Nu=le.define();class xi{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new xi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new xi(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!l)return i;new xi(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class If{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Mt.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new xi(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new If(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var ft=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(ft||(ft={}));const Oy=ft.LTR,vI=ft.RTL;function mP(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const wI=mP("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),xI=mP("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),_y=Object.create(null),Yi=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);_y[e]=n,_y[n]=-e}function bI(t){return t<=247?wI[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?xI[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const SI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class sl{constructor(e,n,i){this.from=e,this.to=n,this.level=i}get dir(){return this.level%2?vI:Oy}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const at=[];function kI(t,e){let n=t.length,i=e==Oy?1:2,r=e==Oy?2:1;if(!t||i==1&&!SI.test(t))return gP(n);for(let o=0,a=i,l=i;o<n;o++){let u=bI(t.charCodeAt(o));u==512?u=a:u==8&&l==4&&(u=16),at[o]=u==4?2:u,u&7&&(l=u),a=u}for(let o=0,a=i,l=i;o<n;o++){let u=at[o];if(u==128)o<n-1&&a==at[o+1]&&a&24?u=at[o]=a:at[o]=256;else if(u==64){let c=o+1;for(;c<n&&at[c]==64;)c++;let d=o&&a==8||c<n&&at[c]==8?l==1?1:8:256;for(let h=o;h<c;h++)at[h]=d;o=c-1}else u==8&&l==1&&(at[o]=1);a=u,u&7&&(l=u)}for(let o=0,a=0,l=0,u,c,d;o<n;o++)if(c=_y[u=t.charCodeAt(o)])if(c<0){for(let h=a-3;h>=0;h-=3)if(Yi[h+1]==-c){let f=Yi[h+2],p=f&2?i:f&4?f&1?r:i:0;p&&(at[o]=at[Yi[h]]=p),a=h;break}}else{if(Yi.length==189)break;Yi[a++]=o,Yi[a++]=u,Yi[a++]=l}else if((d=at[o])==2||d==1){let h=d==i;l=h?0:1;for(let f=a-3;f>=0;f-=3){let p=Yi[f+2];if(p&2)break;if(h)Yi[f+2]|=2;else{if(p&4)break;Yi[f+2]|=4}}}for(let o=0;o<n;o++)if(at[o]==256){let a=o+1;for(;a<n&&at[a]==256;)a++;let l=(o?at[o-1]:i)==1,u=(a<n?at[a]:i)==1,c=l==u?l?1:2:i;for(let d=o;d<a;d++)at[d]=c;o=a-1}let s=[];if(i==1)for(let o=0;o<n;){let a=o,l=at[o++]!=1;for(;o<n&&l==(at[o]!=1);)o++;if(l)for(let u=o;u>a;){let c=u,d=at[--u]!=2;for(;u>a&&d==(at[u-1]!=2);)u--;s.push(new sl(u,c,d?2:1))}else s.push(new sl(a,o,0))}else for(let o=0;o<n;){let a=o,l=at[o++]==2;for(;o<n&&l==(at[o]==2);)o++;s.push(new sl(a,o,l?1:2))}return s}function gP(t){return[new sl(0,t,0)]}let yP="";function EI(t,e,n,i,r){var s;let o=i.head-t.from,a=-1;if(o==0){if(!r||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),a=0)}else if(o==t.length){if(r)return null;let h=e[e.length-1];h.level!=n&&(o=h.side(!0,n),a=e.length-1)}a<0&&(a=sl.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let l=e[a];o==l.side(r,n)&&(l=e[a+=r?1:-1],o=l.side(!r,n));let u=r==(l.dir==n),c=rn(t.text,o,u);if(yP=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=l.side(r,n))return V.cursor(c+t.from,u?-1:1,l.level);let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return!d&&l.level!=n?V.cursor(r?t.to:t.from,r?-1:1,n):d&&d.level<l.level?V.cursor(d.side(!r,n)+t.from,r?1:-1,d.level):V.cursor(c+t.from,r?-1:1,l.level)}class Vb extends qe{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new pn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xi(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=this.view.inputState.composing<0?null:AI(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:a,to:l}=this.hasComposition;n=new xi(a,l,e.changes.mapPos(a,-1),e.changes.mapPos(l,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(ae.ie||ae.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),o=TI(r,s,e.changes);return n=xi.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=ae.chrome||ae.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof jo&&o.widget instanceof Ub&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,m;if(i&&i.range.fromB<d&&i.range.toB>c){let x=Zu.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=Zu.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=x.breakAtStart,p=x.openStart,m=k.openEnd;let A=this.compositionView(i);k.breakAtStart?A.breakAfter=1:k.content.length&&A.merge(A.length,A.length,k.content[0],!1,k.openStart,0)&&(A.breakAfter=k.content[0].breakAfter,k.content.shift()),x.content.length&&A.merge(0,0,x.content[x.content.length-1],!0,0,x.openEnd)&&x.content.pop(),h=x.content.concat(A).concat(k.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:m}=Zu.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:g}=s.findPos(u,1),{i:y,off:w}=s.findPos(l,-1);Z2(this,y,w,v,g,h,f,p,m)}i&&this.fixCompositionDOM(i)}compositionView(e){let n=new br(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new rs(r,[n],n.length);let i=new pn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let a=qe.get(s);a!=o&&(a&&(a.dom=null),o.setDOM(s))},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&Ih(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.domAtPos(a.anchor),u=a.empty?l:this.domAtPos(a.head);if(ae.gecko&&a.empty&&!this.hasComposition&&CI(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new mn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!Df(l.node,l.offset,c.anchorNode,c.anchorOffset)||!Df(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{ae.android&&ae.chrome&&this.dom.contains(c.focusNode)&&OI(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Mf(this.view.root);if(d)if(a.empty){if(ae.gecko){let h=PI(l.node,l.offset);if(h&&h!=3){let f=wP(l.node,l.offset,h==1?1:-1);f&&(l=new mn(f,h==1?0:f.nodeValue.length))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new mn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new mn(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Mf(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=pn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}nearest(e){for(let n=e;n;){let i=qe.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof pn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=gt.WidgetBefore&&s.type!=gt.WidgetAfter&&(!r||n==2||this.children[r-1].breakAfter||this.children[r-1].type==gt.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);i=o}}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof pn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof br))return null;let s=rn(r.text,i);if(s==i)return null;let o=Qo(r.dom,i,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==ft.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,m=p?Sc(p):[];if(m.length){let v=m[m.length-1],g=l?v.right-f.left:f.right-v.left;g>a&&(a=g,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?ft.RTL:ft.LTR}measureTextSize(){for(let s of this.children)if(s instanceof pn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Sc(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new K2(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=n.lineBlockAt(o).bottom-n.lineBlockAt(i).top;e.push(ze.replace({widget:new Ub(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return ze.set(e)}updateDeco(){let e=this.view.state.facet(kc).map((n,i)=>(this.dynamicDecorationMap[i]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=pP(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom};aI(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==ft.LTR)}}function CI(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class Ub extends da{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function vP(t){let e=t.observer.selectionRange,n=e.focusNode&&wP(e.focusNode,e.focusOffset,0);if(!n)return null;let i=qe.get(n),r,s;if(i instanceof br)r=i.posAtStart,s=r+i.length;else e:for(let o=0,a=n;;){for(let u=a.previousSibling,c;u;u=u.previousSibling){if(c=qe.get(u)){r=s=c.posAtEnd+o;break e}let d=new J2([],t.state);if(d.readNode(u),d.text.indexOf(Ha)>-1)return null;o+=d.text.length}if(a=a.parentNode,!a)return null;let l=qe.get(a);if(l){r=s=l.posAtStart+o;break}}return{from:r,to:s,node:n}}function AI(t,e){let n=vP(t);if(!n)return null;let{from:i,to:r,node:s}=n,o=e.mapPos(i,-1),a=e.mapPos(r,1),l=s.nodeValue;if(/[\n\r]/.test(l))return null;if(a-o!=l.length){let h=e.mapPos(i,1),f=e.mapPos(r,-1);if(f-h==l.length)o=h,a=f;else if(t.state.doc.sliceString(a-l.length,a)==l)o=a-l.length;else if(t.state.doc.sliceString(o,o+l.length)==l)a=o+l.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,a)!=l||o>u.head||a<u.head)return null;let c=[],d=new xi(i,r,o,a);for(let h=s.parentNode;;h=h.parentNode){let f=qe.get(h);if(f instanceof rs)c.push({node:h,deco:f.mark});else{if(f instanceof pn||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:d,text:s,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new od({inclusive:!0,attributes:mI(h),tagName:h.tagName.toLowerCase()})});else return null}}}function wP(t,e,n){if(n<=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=io(i);else break}if(n>=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r<i.childNodes.length&&n>=0)i=i.childNodes[r],r=0;else break}return null}function PI(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class RI{constructor(){this.changes=[]}compareRange(e,n){Ry(e,n,this.changes)}comparePoint(e,n){Ry(e,n,this.changes)}}function TI(t,e,n){let i=new RI;return it.compare(t,e,n,i),i.changes}function OI(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function _I(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return V.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=rn(r.text,s,!1):a=rn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let u=rn(r.text,o,!1);if(i(r.text.slice(u,o))!=l)break;o=u}for(;a<r.length;){let u=rn(r.text,a);if(i(r.text.slice(a,u))!=l)break;a=u}return V.range(o+r.from,a+r.from)}function NI(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function MI(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function hg(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Wb(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Hb(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Ny(t,e,n){let i,r,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let m=Sc(p);for(let v=0;v<m.length;v++){let g=m[v];r&&hg(r,g)&&(g=Wb(Hb(g,r.bottom),r.top));let y=NI(e,g),w=MI(n,g);if(y==0&&w==0)return p.nodeType==3?Gb(p,e,n):Ny(p,e,n);if(!i||o>w||o==w&&s>y){i=p,r=g,s=y,o=w;let x=w?n<g.top?-1:1:y?e<g.left?-1:1:0;a=!x||(x>0?v<m.length-1:v>0)}y==0?n>g.bottom&&(!c||c.bottom<g.bottom)?(l=p,c=g):n<g.top&&(!d||d.top>g.top)&&(u=p,d=g):c&&hg(c,g)?c=Hb(c,g.bottom):d&&hg(d,g)&&(d=Wb(d,g.top))}}if(c&&c.bottom>=n?(i=l,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Gb(i,h,n);if(a&&i.contentEditable!="false")return Ny(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function Gb(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Qo(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((ae.chrome||ae.gecko)&&Qo(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};r=a+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function xP(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let x=t.viewState.heightOracle.textHeight/2,k=!1;l=t.elementAtHeight(h),l.type!=gt.Text;)for(;h=i>0?l.bottom+x:l.top-x,!(h>=0&&h<=u);){if(k)return n?null:0;k=!0,i=-i}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:Xb(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Xb(t,o,l,c,d);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,v=m.elementFromPoint(c,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(c=Math.max(o.left+1,Math.min(o.right-1,c)),v=m.elementFromPoint(c,d),v&&!t.contentDOM.contains(v)&&(v=null));let g,y=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let x=p.caretPositionFromPoint(c,d);x&&({offsetNode:g,offset:y}=x)}else if(p.caretRangeFromPoint){let x=p.caretRangeFromPoint(c,d);x&&({startContainer:g,startOffset:y}=x,(!t.contentDOM.contains(g)||ae.safari&&DI(g,y,c)||ae.chrome&&$I(g,y,c))&&(g=void 0))}}if(!g||!t.docView.dom.contains(g)){let x=pn.find(t.docView,f);if(!x)return h>l.top+l.height/2?l.to:l.from;({node:g,offset:y}=Ny(x.dom,c,d))}let w=t.docView.nearest(g);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let x=w.dom.getBoundingClientRect();return e.y<x.top||e.y<=x.bottom&&e.x<=(x.left+x.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(g,y)+w.posAtStart}function Xb(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+eI(o,s,t.state.tabSize)}function DI(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Qo(t,i-1,i).getBoundingClientRect().left>n}function $I(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Qo(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function My(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==gt.Text))return i}return n}function LI(t,e,n,i){let r=My(t,e.head),s=!i||r.type!=gt.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==ft.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return V.cursor(l,n?-1:1)}return V.cursor(n?r.to:r.from,n?-1:1)}function Kb(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let u=EI(r,s,o,a,n),c=yP;if(!u){if(r.number==(n?t.state.doc.lines:1))return a;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=V.cursor(n?r.from:r.to)}if(l){if(!l(c))return a}else{if(!i)return u;l=i(c)}a=u}}function II(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Xt.Space&&(r=o),r==o}}function BI(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return V.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,m=xP(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<r:m>r))return V.cursor(m,e.assoc,void 0,o)}}function Bh(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function fg(t,e,n){let i=Bh(t.state.facet(Bw).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:V.cursor(i,i<n.from?1:-1)}class zI{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(i,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(r.type,e,r)?r.preventDefault():i(e,r))};for(let i in Tt){let r=Tt[i];e.contentDOM.addEventListener(i,s=>{Zb(e,s)&&n(r,s)},Dy[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{if(i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(Tt.mousedown,i),!i.defaultPrevented&&i.button==2)){let r=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=r,200)}}),e.scrollDOM.addEventListener("drop",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(Tt.drop,i)}),ae.chrome&&ae.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,ae.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var i;let r;this.customHandlers=[];for(let s of n)if(r=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{Zb(e,a)&&this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,n,i){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,i,n)||i.defaultPrevented)return!0}catch(o){ji(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,n,e)}catch(s){ji(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&SP.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),ae.android&&ae.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let i;return ae.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((i=bP.find(r=>r.keyCode==n.keyCode))&&!n.ctrlKey||FI.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=i||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,rl(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ae.safari&&!ae.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const bP=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],FI="dthko",SP=[16,17,18,20,91,92,224,225],Ud=6;function Wd(t){return Math.max(0,t)*.7+8}function jI(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class VI{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=lI(e.contentDOM),this.atoms=e.state.facet(Bw).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(De.allowMultipleSelections)&&UI(e,n),this.dragging=HI(e,n)&&AP(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&jI(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=pP(this.view);e.clientX-o.left<=s.left+Ud?i=-Wd(s.left-e.clientX):e.clientX+o.right>=s.right-Ud&&(i=Wd(e.clientX-s.right)),e.clientY-o.top<=s.top+Ud?r=-Wd(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Ud&&(r=Wd(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=Bh(this.atoms,r.from,0);o!=r.from&&(s=V.cursor(o,-1))}else{let o=Bh(this.atoms,r.from,-1),a=Bh(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=V.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?V.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection)||i.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function UI(t,e){let n=t.state.facet(rP);return n.length?n[0](e):ae.mac?e.metaKey:e.ctrlKey}function WI(t,e){let n=t.state.facet(sP);return n.length?n[0](e):ae.mac?!e.altKey:!e.ctrlKey}function HI(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Mf(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Zb(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=qe.get(n))&&i.ignoreEvent(e))return!1;return!0}const Tt=Object.create(null),Dy=Object.create(null),kP=ae.ie&&ae.ie_version<15||ae.ios&&ae.webkit_version<604;function GI(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),EP(t,n.value)},50)}function EP(t,e){let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if($y!=null&&n.selection.ranges.every(l=>l.empty)&&$y==s.toString()){let l=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:V.cursor(u.from+d.length)}})}else o?i=n.changeByRange(l=>{let u=s.line(r++);return{changes:{from:l.from,to:l.to,insert:u.text},range:V.cursor(l.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Tt.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};Tt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Tt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Dy.touchstart=Dy.touchmove={passive:!0};Tt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let i of t.state.facet(oP))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=ZI(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new VI(t,e,n,i)),i&&t.observer.ignore(()=>H2(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function Yb(t,e,n,i){if(i==1)return V.cursor(e,n);if(i==2)return _I(t.state,e,n);{let r=pn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,V.range(o,a)}}let CP=(t,e)=>t>=e.top&&t<=e.bottom,Jb=(t,e,n)=>CP(e,n)&&t>=n.left&&t<=n.right;function XI(t,e,n,i){let r=pn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&Jb(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&Jb(n,i,a)?1:o&&CP(i,o)?-1:1}function qb(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:XI(t,n,e.clientX,e.clientY)}}const KI=ae.ie&&ae.ie_version<=11;let Qb=null,eS=0,tS=0;function AP(t){if(!KI)return t.detail;let e=Qb,n=tS;return Qb=t,tS=Date.now(),eS=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(eS+1)%3:1}function ZI(t,e){let n=qb(t,e),i=AP(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=qb(t,s),u,c=Yb(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=Yb(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?V.range(h,f):V.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(u=YI(r,l.pos))?u:a?r.addRange(c):V.create([c])}}}function YI(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return V.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Tt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:i}=t.inputState;i&&(i.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function nS(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=i&&s&&s.dragging&&WI(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}Tt.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let i=Array(n.length),r=0,s=()=>{++r==n.length&&nS(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}}else nS(t,e,e.dataTransfer.getData("Text"),!0)};Tt.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=kP?null:e.clipboardData;n?(EP(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):GI(t)};function JI(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function qI(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}let $y=null;Tt.copy=Tt.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=qI(t.state);if(!n&&!r)return;$y=r?n:null;let s=kP?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):JI(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const PP=hs.define();function RP(t,e){let n=[];for(let i of t.facet(uP)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:PP.of(!0)}):null}function TP(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=RP(t.state,e);n?t.dispatch(n):t.update([])}},10)}Tt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),TP(t)};Tt.blur=t=>{t.observer.clearSelectionRange(),TP(t)};Tt.compositionstart=Tt.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};Tt.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,ae.chrome&&ae.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};Tt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Tt.beforeinput=(t,e)=>{var n;let i;if(ae.chrome&&ae.android&&(i=bP.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const iS=["pre-wrap","normal","pre-line","break-spaces"];class QI{constructor(e){this.lineWrapping=e,this.doc=Ve.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return iS.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=iS.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class e3{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class dr{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?gt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ro?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new dr(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var tt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(tt||(tt={}));const zh=.001;class vn{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>zh&&(e.heightChanged=!0),this.height=n)}replace(e,n,i){return vn.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=r[a],h=s.lineAt(l,tt.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,tt.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,tt.ByPosNoHeight,i,0,0));c+=h.from-l,l=h.from;let p=zw.build(i.setDoc(o),e,c,d);s=s.replace(l,u,p)}return s.updateHeight(i,0)}static empty(){return new Xn(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new t3(vn.of(e.slice(0,n)),o,vn.of(e.slice(i)))}}vn.prototype.size=1;class OP extends vn{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new dr(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Xn extends OP{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new dr(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Xn||r instanceof jt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof jt?r=new Xn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):vn.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class jt extends vn{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(i,e-d/2);return new dr(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:d}=n.doc.line(s+u);return new dr(c,d,i+a*u,a,0)}}lineAt(e,n,i,r,s){if(n==tt.ByHeight)return this.blockAt(e,i,r,s);if(n==tt.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new dr(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=r+a*d+l*(u.from-s-d);return new dr(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new dr(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof jt?i[i.length-1]=new jt(s.length+r):i.push(null,new jt(r-1))}if(e>0){let s=i[0];s instanceof jt?i[0]=new jt(e+s.length):i.unshift(new jt(e-1),null)}return vn.of(i)}decomposeLeft(e,n){n.push(new jt(e-1),null)}decomposeRight(e,n){n.push(null,new jt(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new jt(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=zh&&(l=-2);let h=new Xn(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new jt(s-a).updateHeight(e,a));let u=vn.of(o);return(l<0||Math.abs(u.height-this.height)>=zh||Math.abs(l-this.heightMetrics(e,n).perLine)>=zh)&&(e.heightChanged=!0),u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class t3 extends vn{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==tt.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==tt.ByPosNoHeight?tt.ByPosNoHeight:tt.ByPos;return l?u.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let u=this.lineAt(l,tt.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&rS(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),rS(s,a)}return vn.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?vn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function rS(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof jt&&(i=t[e+1])instanceof jt&&t.splice(e-1,3,new jt(n.length+1+i.length))}const n3=5;class zw{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Xn?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Xn(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new OP(o,r,i)):(o||s||r>=n3)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Xn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new jt(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Xn)return e;let n=new Xn(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let i=(n=e.deco)===null||n===void 0?void 0:n.type;i==gt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i!=gt.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Xn)&&!this.isCovered?this.nodes.push(new Xn(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Xn&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new zw(i,e);return it.spans(n,i,r,s,0),s.finish(i)}}function i3(t,e,n){let i=new r3;return it.compare(t,e,n,i,0),i.changes}class r3{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&Ry(e,n,this.changes,5)}}function s3(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=u==t.parentNode?h.bottom:Math.min(l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function o3(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class pg{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return ze.replace({widget:new a3(this.size,e)}).range(this.from,this.to)}}class a3 extends da{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class sS{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=oS,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ft.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Iw).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new QI(n),this.stateDeco=e.facet(kc).filter(i=>typeof i!="function"),this.heightMap=vn.empty().applyChanges(this.stateDeco,Ve.empty,this.heightOracle.setDoc(e.doc),[new xi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ze.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Hd(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?oS:new c3(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Mu(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(kc).filter(c=>typeof c!="function");let r=e.changedRanges,s=xi.extendWithRanges(r,i3(i,this.stateDeco,e?e.changes:Mt.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(dP)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?ft.RTL:ft.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0,d=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=X2(e.scrollDOM);let f=(this.printing?o3:s3)(n,this.paddingTop),p=f.top-this.pixelViewport.top,m=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let g=a.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let w=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(w)&&(o=!0),o||r.lineWrapping&&Math.abs(g-this.contentDOMWidth)>r.charWidth){let{lineHeight:x,charWidth:k,textHeight:A}=e.docView.measureTextSize();o=x>0&&r.refresh(s,x,k,A,g/k,w),o&&(e.docView.minWidth=0,u|=8)}p>0&&m>0?c=Math.max(p,m):p<0&&m<0&&(c=Math.min(p,m)),r.heightChanged=!1;for(let x of this.viewports){let k=x.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(x);this.heightMap=(o?vn.empty().applyChanges(this.stateDeco,Ve.empty,this.heightOracle,[new xi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new e3(x.from,k))}r.heightChanged&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Hd(r.lineAt(o-i*1e3,tt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,tt.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,tt.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new Hd(r.lineAt(h-1e3/2,tt.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,tt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Hd(this.heightMap.lineAt(i,tt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,tt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,tt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,tt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new pg(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=ft.LTR&&!i)return[];let a=[],l=(u,c,d,h)=>{if(c-u<s)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let v of p)if(v>u&&v<c){l(u,v-10,d,h),l(v+10,c,d,h);return}let m=u3(e,v=>v.from>=d.from&&v.to<=d.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-c)<s&&!p.some(g=>v.from<g&&v.to>g));if(!m){if(c<d.to&&n&&i&&n.visibleRanges.some(v=>v.from<=c&&v.to>=c)){let v=n.moveToLineBoundary(V.cursor(c),!1,!0).head;v>u&&(c=v)}m=new pg(u,c,this.gapSize(d,u,c,h))}a.push(m)};for(let u of this.viewportLines){if(u.length<o)continue;let c=l3(u.from,u.to,this.stateDeco);if(c.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,v;if(d!=null){let g=Xd(c,d),y=((this.visibleBottom-this.visibleTop)/2+p)/u.height;m=g-y,v=g+y}else m=(this.visibleTop-u.top-p)/u.height,v=(this.visibleBottom-u.top+p)/u.height;h=Gd(c,m),f=Gd(c,v)}else{let p=c.total*this.heightOracle.charWidth,m=r*this.heightOracle.charWidth,v,g;if(d!=null){let y=Xd(c,d),w=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/p;v=y-w,g=y+w}else v=(this.pixelViewport.left-m)/p,g=(this.pixelViewport.right+m)/p;h=Gd(c,v),f=Gd(c,g)}h>u.from&&l(u.from,h,u,c),f<u.to&&l(f,u.to,u,c)}return a}gapSize(e,n,i,r){let s=Xd(r,i)-Xd(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){pg.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ze.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];it.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Mu(this.heightMap.lineAt(e,tt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Mu(this.heightMap.lineAt(this.scaler.fromDOM(e),tt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Mu(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Hd{constructor(e,n){this.from=e,this.to=n}}function l3(t,e,n){let i=[],r=t,s=0;return it.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Gd({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Xd(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function u3(t,e){for(let n of t)if(e(n))return n}const oS={toDOM(t){return t},fromDOM(t){return t},scale:1};class c3{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let u=n.lineAt(a,tt.ByPos,e,0,0).top,c=n.lineAt(l,tt.ByPos,e,0,0).bottom;return r+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function Mu(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new dr(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Mu(r,e)):t._content)}const Kd=le.define({combine:t=>t.join(" ")}),Ly=le.define({combine:t=>t.indexOf(!0)>-1}),Iy=to.newName(),_P=to.newName(),NP=to.newName(),MP={"&light":"."+_P,"&dark":"."+NP};function By(t,e,n){return new to(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const d3=By("."+Iy,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},MP);class h3{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:p3(e),l=new J2(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=m3(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Sy(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Sy(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=V.single(u,l)}}}function DP(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,u=null;(s===8||ae.android&&e.text.length<a-o)&&(l=r.to,u="end");let c=f3(t.state.doc.sliceString(o,a,Ha),e.text,l-o,u);c&&(ae.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Ha+Ha&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:Ve.of(e.text.slice(c.from,c.toB).split(Ha))})}else i&&(!t.hasFocus&&t.state.facet(qp)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(ae.mac||ae.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=V.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ve.of([" "])}):ae.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=V.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ve.of([" "])}),n){let o=t.state;if(ae.ios&&t.inputState.flushIOSKey(t)||ae.android&&(n.from==r.from&&n.to==r.to&&n.insert.length==1&&n.insert.lines==2&&rl(t.contentDOM,"Enter",13)||(n.from==r.from-1&&n.to==r.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&rl(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&n.insert.length==0&&rl(t.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(t.state.facet(lP).some(c=>c(t,n.from,n.to,a)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let l;if(n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=r.from<n.from?o.sliceDoc(r.from,n.from):"",d=r.to>n.to?o.sliceDoc(n.to,r.to):"";l=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let c=o.changes(n),d=i&&i.main.to<=c.newLength?i.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){let h=t.state.sliceDoc(n.from,n.to),f=vP(t)||t.state.doc.lineAt(r.head),p=r.to-n.to,m=r.to-r.from;l=o.changeByRange(v=>{if(v.from==r.from&&v.to==r.to)return{changes:c,range:d||v.map(c)};let g=v.to-p,y=g-h.length;if(v.to-v.from!=m||t.state.sliceDoc(y,g)!=h||f&&v.to>=f.from&&v.from<=f.to)return{range:v};let w=o.changes({from:y,to:g,insert:n.insert}),x=v.to-r.to;return{changes:w,range:d?V.range(Math.max(0,d.anchor+x),Math.max(0,d.head+x)):v.map(w)}})}else l={changes:c,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(l,{scrollIntoView:!0,userEvent:u}),!0}else if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function f3(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function p3(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new $b(n,i)),(r!=n||s!=i)&&e.push(new $b(r,s))),e}function m3(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?V.single(n+e,i+e):null}const g3={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},mg=ae.ie&&ae.ie_version<=11;class y3{constructor(e){this.view=e,this.active=!1,this.selectionRange=new uI,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(ae.ie&&ae.ie_version<=11||ae.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),mg&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(qp)?i.root.activeElement!=this.dom:!Ih(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(ae.ie&&ae.ie_version<=11||ae.android&&ae.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Df(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=ae.safari&&e.root.nodeType==11&&sI(this.dom.ownerDocument)==this.dom&&v3(this.view)||Mf(e.root);if(!n||this.selectionRange.eq(n))return!1;let i=Ih(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&dI(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,g3),mg&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),mg&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&rl(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Ih(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new h3(this.view,e,n,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let i=this.view.state,r=DP(this.view,n);return this.view.state==i&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=aS(n,e.previousSibling||e.target.previousSibling,-1),r=aS(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function aS(t,e,n){for(;e;){let i=qe.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function v3(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return Df(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}class fe{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||cI(e.parent)||document,this.viewState=new sS(e.state||De.create(e)),this.plugins=this.state.facet(_u).map(n=>new dg(n));for(let n of this.plugins)n.update(this);this.observer=new y3(this),this.inputState=new zI(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Vb(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof Lt?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(PP))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=RP(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(De.phrases)!=this.state.facet(De.phrases))return this.setState(s);r=If.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Lf(f.empty?f:V.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(jb)&&(d=f.value)}this.viewState.update(r,d),this.bidiCache=Bf.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Nu)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Kd)!=r.state.facet(Kd)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let h of this.state.facet(Ty))h(r);(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!DP(this,c)&&u.force&&rl(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new sS(e),this.plugins=e.facet(_u).map(i=>new dg(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Vb(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(_u),i=e.state.facet(_u);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new dg(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,{scrollTop:r}=i,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;r!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(X2(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return ji(this.state,p),lS}}),d=If.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let f=0;f<u.length;f++)if(c[f]!=lS)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){ji(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=i.scrollTop=r+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(Ty))a(n)}get themeClasses(){return Iy+" "+(this.state.facet(Ly)?NP:_P)+" "+this.state.facet(Kd)}updateAttrs(){let e=uS(this,hP,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(qp)?"true":"false",class:"cm-content",style:`${ae.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),uS(this,Iw,n);let i=this.observer.ignore(()=>{let r=Py(this.contentDOM,this.contentAttrs,n),s=Py(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(fe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Nu),to.mount(this.root,this.styleModules.concat(d3).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return fg(this,e,Kb(this,e,n,i))}moveByGroup(e,n){return fg(this,e,Kb(this,e,n,i=>II(this,e.head,i)))}moveToLineBoundary(e,n,i=!0){return LI(this,e,n,i)}moveVertically(e,n,i){return fg(this,e,BI(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),xP(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[sl.find(s,e-r.from,-1,n)];return Dw(i,o.dir==ft.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(cP)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>w3)return gP(e.length);let n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n)return r.order;let i=kI(e.text,n);return this.bidiCache.push(new Bf(e.from,e.to,n,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ae.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{H2(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return jb.of(new Lf(typeof e=="number"?V.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return Yt.define(()=>({}),{eventHandlers:e})}static theme(e,n){let i=to.newName(),r=[Kd.of(i),Nu.of(By(`.${i}`,e))];return n&&n.dark&&r.push(Ly.of(!0)),r}static baseTheme(e){return rd.lowest(Nu.of(By("."+Iy,e,MP)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&qe.get(i)||qe.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}fe.styleModule=Nu;fe.inputHandler=lP;fe.focusChangeEffect=uP;fe.perLineTextDirection=cP;fe.exceptionSink=aP;fe.updateListener=Ty;fe.editable=qp;fe.mouseSelectionStyle=oP;fe.dragMovesSelection=sP;fe.clickAddsSelectionRange=rP;fe.decorations=kc;fe.atomicRanges=Bw;fe.scrollMargins=fP;fe.darkTheme=Ly;fe.contentAttributes=Iw;fe.editorAttributes=hP;fe.lineWrapping=fe.contentAttributes.of({class:"cm-lineWrapping"});fe.announce=Ne.define();const w3=4096,lS={};class Bf{constructor(e,n,i,r){this.from=e,this.to=n,this.dir=i,this.order=r}static update(e,n){if(n.empty)return e;let i=[],r=e.length?e[e.length-1].dir:ft.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Bf(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return i}}function uS(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&Ay(o,n)}return n}const x3=ae.mac?"mac":ae.windows?"win":ae.linux?"linux":"key";function b3(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Zd(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const S3=rd.default(fe.domEventHandlers({keydown(t,e){return IP(LP(e.state),t,e,"editor")}})),$P=le.define({enables:S3}),cS=new WeakMap;function LP(t){let e=t.facet($P),n=cS.get(e);return n||cS.set(e,n=C3(e.reduce((i,r)=>i.concat(r),[]))),n}function k3(t,e,n){return IP(LP(t.state),e,t,n)}let Rs=null;const E3=4e3;function C3(t,e=x3){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(g=>b3(g,e));for(let g=1;g<p.length;g++){let y=p.slice(0,g).join(" ");r(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let x=Rs={view:w,prefix:y,scope:o};return setTimeout(()=>{Rs==x&&(Rs=null)},E3),!0}]})}let m=p.join(" ");r(m,!1);let v=f[m]||(f[m]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&v.run.push(l),u&&(v.preventDefault=!0),c&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in c)c[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function IP(t,e,n,i){let r=rI(e),s=fn(r,0),o=$i(s)==r.length&&r!=" ",a="",l=!1,u=!1,c=!1;Rs&&Rs.view==n&&Rs.scope==i&&(a=Rs.prefix+" ",SP.indexOf(e.keyCode)<0&&(u=!0,Rs=null));let d=new Set,h=v=>{if(v){for(let g of v.run)if(!d.has(g)&&(d.add(g),g(n,e)))return v.stopPropagation&&(c=!0),!0;v.preventDefault&&(v.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,m;return f&&(h(f[a+Zd(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ae.windows&&e.ctrlKey&&e.altKey)&&(p=no[e.keyCode])&&p!=r?(h(f[a+Zd(p,e,!0)])||e.shiftKey&&(m=bc[e.keyCode])!=r&&m!=p&&h(f[a+Zd(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+Zd(r,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class ld{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=BP(e);return[new ld(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return A3(e,n,i)}}function BP(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==ft.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function dS(t,e,n){let i=V.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:gt.Text}}function A3(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==ft.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=BP(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=My(t,i),p=My(t,r),m=f.type==gt.Text?f:null,v=p.type==gt.Text?p:null;if(m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=dS(t,i,m)),v&&(t.lineWrapping||p.widgetLineBreaks)&&(v=dS(t,r,v)),m&&v&&m.from==v.from)return y(w(n.from,n.to,m));{let k=m?w(n.from,null,m):x(f,!1),A=v?w(null,n.to,v):x(p,!0),P=[];return(m||f).to<(v||p).from-(m&&v?1:0)||f.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<A.top?P.push(g(d,k.bottom,h,A.top)):k.bottom<A.top&&t.elementAtHeight((k.bottom+A.top)/2).type==gt.Text&&(k.bottom=A.top=(k.bottom+A.top)/2),y(k).concat(P).concat(y(A))}function g(k,A,P,E){return new ld(e,k-l.left,A-l.top-.01,P-k,E-A+.01)}function y({top:k,bottom:A,horizontal:P}){let E=[];for(let R=0;R<P.length;R+=2)E.push(g(P[R],k,P[R+1],A));return E}function w(k,A,P){let E=1e9,R=-1e9,N=[];function T(_,D,z,L,O){let $=t.coordsAtPos(_,_==P.to?-2:2),F=t.coordsAtPos(z,z==P.from?2:-2);!$||!F||(E=Math.min($.top,F.top,E),R=Math.max($.bottom,F.bottom,R),O==ft.LTR?N.push(s&&D?d:$.left,s&&L?h:F.right):N.push(!s&&L?d:F.left,!s&&D?h:$.right))}let B=k??P.from,I=A??P.to;for(let _ of t.visibleRanges)if(_.to>B&&_.from<I)for(let D=Math.max(_.from,B),z=Math.min(_.to,I);;){let L=t.state.doc.lineAt(D);for(let O of t.bidiSpans(L)){let $=O.from+L.from,F=O.to+L.from;if($>=z)break;F>D&&T(Math.max($,D),k==null&&$<=B,Math.min(F,z),A==null&&F>=I,O.dir)}if(D=L.to+1,D>=z)break}return N.length==0&&T(B,k==null,I,A==null,t.textDirection),{top:E,bottom:R,horizontal:N}}function x(k,A){let P=a.top+(A?k.top:k.bottom);return{top:P,bottom:P,horizontal:[]}}}function P3(t,e){return t.constructor==e.constructor&&t.eq(e)}class R3{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Fh)!=e.state.facet(Fh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(Fh);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!P3(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Fh=le.define();function zP(t){return[Yt.define(e=>new R3(e,t)),Fh.of(t)]}const FP=!ae.ios,Ec=le.define({combine(t){return mo(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function T3(t={}){return[Ec.of(t),O3,_3,N3,dP.of(!0)]}function jP(t){return t.startState.facet(Ec)!=t.state.facet(Ec)}const O3=zP({above:!0,markers(t){let{state:e}=t,n=e.facet(Ec),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||FP:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:V.cursor(r.head,r.head>r.anchor?-1:1);for(let l of ld.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=jP(t);return n&&hS(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){hS(e.state,t)},class:"cm-cursorLayer"});function hS(t,e){e.style.animationDuration=t.facet(Ec).cursorBlinkRate+"ms"}const _3=zP({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:ld.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||jP(t)},class:"cm-selectionLayer"}),VP={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};FP&&(VP[".cm-line"].caretColor="transparent !important");const N3=rd.highest(fe.theme(VP)),UP=Ne.define({map(t,e){return t==null?null:e.mapPos(t)}}),Du=an.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(UP)?i.value:n,t)}}),M3=Yt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Du);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Du)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Du),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Du)!=t&&this.view.dispatch({effects:UP.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function D3(){return[Du,M3]}function fS(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function $3(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class L3{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,u,c)=>r(c,u,u+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,u,c)=>{let d=i(a,l,u);d&&c(u,u+a[0].length,d)};else if(i)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new qo,i=n.add.bind(n);for(let{from:r,to:s}of $3(e,this.maxLength))fS(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(m,v,g)=>h.push(g.range(m,v));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else fS(e.state.doc,this.regexp,c,d,(m,v)=>this.addMatch(v,e,m,p));n=n.update({filterFrom:c,filterTo:d,filter:(m,v)=>m<c||v>d,add:h})}}return n}}const zy=/x/.unicode!=null?"gu":"g",I3=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,zy),B3={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let gg=null;function z3(){var t;if(gg==null&&typeof document<"u"&&document.body){let e=document.body.style;gg=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return gg||!1}const jh=le.define({combine(t){let e=mo(t,{render:null,specialChars:I3,addSpecialChars:null});return(e.replaceTabs=!z3())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,zy)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,zy)),e}});function F3(t={}){return[jh.of(t),j3()]}let pS=null;function j3(){return pS||(pS=Yt.fromClass(class{constructor(t){this.view=t,this.decorations=ze.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(jh)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new L3({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=fn(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Yp(o.text,a,i-o.from);return ze.replace({widget:new H3((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=ze.replace({widget:new W3(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(jh);t.startState.facet(jh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const V3="•";function U3(t){return t>=32?V3:t==10?"␤":String.fromCharCode(9216+t)}class W3 extends da{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=U3(this.code),i=e.state.phrase("Control character")+" "+(B3[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class H3 extends da{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function G3(){return K3}const X3=ze.line({class:"cm-activeLine"}),K3=Yt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(X3.range(r.from)),e=r.from)}return ze.set(n)}},{decorations:t=>t.decorations}),Yd="-10000px";class WP{constructor(e,n,i){this.facet=n,this.createTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){var n;let i=e.state.facet(this.facet),r=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let a=r[o],l=-1;if(a){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==a.create&&(l=u)}if(l<0)s[o]=this.createTooltipView(a);else{let u=s[o]=this.tooltipViews[l];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function Z3(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const yg=le.define({combine:t=>{var e,n,i;return{position:ae.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Z3}}}),mS=new WeakMap,HP=Yt.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(yg);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new WP(t,Fw,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(yg);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Yd,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let i=this.manager.tooltipViews[n];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(yg).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:i}=t,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){l.style.top=Yd;continue}let d=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,f=c.right-c.left,p=(e=mS.get(a))!==null&&e!==void 0?e:c.bottom-c.top,m=a.offset||J3,v=this.view.textDirection==ft.LTR,g=c.width>i.right-i.left?v?i.left:i.right-c.width:v?Math.min(u.left-(d?14:0)+m.x,i.right-f):Math.max(i.left,u.left-f+(d?14:0)-m.x),y=!!o.above;!o.strictSide&&(y?u.top-(c.bottom-c.top)-m.y<i.top:u.bottom+(c.bottom-c.top)+m.y>i.bottom)&&y==i.bottom-u.bottom>u.top-i.top&&(y=!y);let w=(y?u.top-i.top:i.bottom-u.bottom)-h;if(w<p&&a.resize!==!1){if(w<this.view.defaultLineHeight){l.style.top=Yd;continue}mS.set(a,p),l.style.height=(p=w)+"px"}else l.style.height&&(l.style.height="");let x=y?u.top-p-h-m.y:u.bottom+h+m.y,k=g+f;if(a.overlap!==!0)for(let A of r)A.left<k&&A.right>g&&A.top<x+p&&A.bottom>x&&(x=y?A.top-p-2-h:A.bottom+h+2);this.position=="absolute"?(l.style.top=x-t.parent.top+"px",l.style.left=g-t.parent.left+"px"):(l.style.top=x+"px",l.style.left=g+"px"),d&&(d.style.left=`${u.left+(v?m.x:-m.x)-(g+14-7)}px`),a.overlap!==!0&&r.push({left:g,top:x,right:k,bottom:x+p}),l.classList.toggle("cm-tooltip-above",y),l.classList.toggle("cm-tooltip-below",!y),a.positioned&&a.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Yd}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Y3=fe.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),J3={x:0,y:0},Fw=le.define({enables:[HP,Y3]}),zf=le.define();class jw{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new WP(e,zf,n=>this.createHostedView(n))}static create(e){return new jw(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const q3=Fw.compute([zf],t=>{let e=t.facet(zf).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:jw.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Q3{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let i=this.view.coordsAtPos(n);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(a=>a.from<=n&&a.to>=n),s=r&&r.dir==ft.RTL?-1:1,o=this.source(this.view,n,e.x<i.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:n};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>ji(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!gS(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=(n=i==null?void 0:i.end)!==null&&n!==void 0?n:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!e5(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!gS(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function gS(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function e5(t,e,n,i,r,s){let o=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let d=u[c];if(Math.max(d.top-r,r-d.bottom,d.left-i,i-d.right)<=s)return!0}return!1}function t5(t,e={}){let n=Ne.define(),i=an.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,Tn.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),r);a.pos=o,r.end!=null&&(a.end=s.changes.mapPos(r.end)),r=a}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(i5)&&(r=null);return r},provide:r=>zf.from(r)});return[i,Yt.define(r=>new Q3(r,t,i,n,e.hoverTime||300)),q3]}function n5(t,e){let n=t.plugin(HP);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const i5=Ne.define(),yS=le.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Cc(t,e){let n=t.plugin(GP),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const GP=Yt.fromClass(class{constructor(t){this.input=t.state.facet(_l),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(yS);this.top=new Jd(t,!0,e.topContainer),this.bottom=new Jd(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(yS);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Jd(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Jd(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(_l);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>fe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Jd{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=vS(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=vS(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function vS(t){let e=t.nextSibling;return t.remove(),e}const _l=le.define({enables:GP});class so extends Jo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}so.prototype.elementClass="";so.prototype.toDOM=void 0;so.prototype.mapMode=Tn.TrackBefore;so.prototype.startSide=so.prototype.endSide=-1;so.prototype.point=!0;const Vh=le.define(),Uh=le.define(),Fy=le.define({combine:t=>t.some(e=>e)});function r5(t){let e=[s5];return t&&t.fixed===!1&&e.push(Fy.of(!0)),e}const s5=Yt.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Uh).map(e=>new xS(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Fy),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Fy)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=it.iter(this.view.state.facet(Vh),this.view.viewport.from),i=[],r=this.gutters.map(s=>new o5(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==gt.Text&&o){jy(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==gt.Text){jy(n,i,s.from);for(let o of r)o.line(this.view,s,i)}for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Uh),n=t.state.facet(Uh),i=t.docChanged||t.heightChanged||t.viewportChanged||!it.eq(t.startState.facet(Vh),t.state.facet(Vh),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new xS(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>fe.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==ft.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function wS(t){return Array.isArray(t)?t:[t]}function jy(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class o5{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=it.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=n.top-this.height;if(this.i==r.elements.length){let o=new XP(e,n.height,s,i);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,n.height,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];jy(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n);i&&this.addElement(e,n,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class xS{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=wS(n.markers(e)),n.initialSpacer&&(this.spacer=new XP(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=wS(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!it.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class XP{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),a5(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function a5(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const l5=le.define(),Ga=le.define({combine(t){return mo(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return i}})}});class vg extends so{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function wg(t,e){return t.state.facet(Ga).formatNumber(e,t.state)}const u5=Uh.compute([Ga],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(l5)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new vg(wg(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Ga)!=e.state.facet(Ga),initialSpacer(e){return new vg(wg(e,bS(e.state.doc.lines)))},updateSpacer(e,n){let i=wg(n.view,bS(n.view.state.doc.lines));return i==e.number?e:new vg(i)},domEventHandlers:t.facet(Ga).domEventHandlers}));function c5(t={}){return[Ga.of(t),r5(),u5]}function bS(t){let e=9;for(;e<t;)e=e*10+9;return e}const d5=new class extends so{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},h5=Vh.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(d5.range(r)))}return it.of(e)});function f5(){return h5}const KP=new sd;function ZP(t){window.codemirror&&window.codemirror.dispatch({effects:KP.reconfigure(De.readOnly.of(t))})}const Vy=Ne.define(),p5=an.define({create(){return ze.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(Vy)&&(n=ze.none,i.value!==null&&(n=n.update({add:[m5.range(i.value)]})));return n},provide:t=>fe.decorations.from(t)}),m5=ze.line({class:"!bg-sky-400/30"});function YP(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:Vy.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:Vy.of(e)})}}const g5=pe.from(pe.MAX_ADDRESS).toString(),y5={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Ln.format(e)})`},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},control:{action:{start:"Start",stop:"Stop"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",phase:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped"}},memory:{name:"Memory",cell:t=>`Cell ${pe.format(t)}`,"start-address":"Start address","start-address-must-be-integer":"Start address must be an integer.","start-address-too-big":`Start address must be less or equal to ${g5}.`},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},console:"Console",f10:{name:"F10",interrupt:"Interrupt"},leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",language:{label:"Language"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which preset of devices to use.","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer (PIO)",handshake:"Printer (Handshake)"},speeds:{label:"Speeds",executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"}},footer:{documentation:"Documentation","report-issue":"Report an issue",copyright:"III-LIDI, FI, UNLP"}},v5=pe.from(pe.MAX_ADDRESS).toString(),w5={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Ln.format(e)})`},update:{"update-available":"¡Hay una nueva versión disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},control:{action:{start:"Ejecutar",stop:"Detener"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",phase:{fetching:"Leyendo instrucción...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido"}},memory:{name:"Memoria",cell:t=>`Celda ${pe.format(t)}`,"start-address":"Dirección de inicio","start-address-must-be-integer":"El valor de inicio debe ser un número entero.","start-address-too-big":`El valor de inicio debe ser menor o igual a ${v5}.`},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},console:"Consola",f10:{name:"F10",interrupt:"Interrumpir"},leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},switches:"Teclas",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",language:{label:"Idioma"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué conjunto de dispositivos usar.","pio-switches-and-leds":"Teclas y luces","pio-printer":"Impresora (PIO)",handshake:"Impresora (Handshake)"},speeds:{label:"Velocidades",executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"}},footer:{documentation:"Documentación","report-issue":"Reportar un error",copyright:"III-LIDI, FI, UNLP"}},Qp=Cw({en:y5,es:w5}),G=bw();function x5(t){return C.jsx(UD,{store:G,children:t.children})}const b5=Symbol(),S5=t=>typeof(t==null?void 0:t.then)=="function";function k5(t){let e,n;const i={getItem:(r,s)=>{var o,a;const l=c=>{if(c=c||"",e!==c){try{n=JSON.parse(c)}catch{return s}e=c}return n},u=(a=(o=t())==null?void 0:o.getItem(r))!=null?a:null;return S5(u)?u.then(l):l(u)},setItem:(r,s)=>{var o;return(o=t())==null?void 0:o.setItem(r,JSON.stringify(s))},removeItem:r=>{var s;return(s=t())==null?void 0:s.removeItem(r)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&(i.subscribe=(r,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===r){let u;try{u=JSON.parse(l.newValue||"")}catch{u=o}s(u)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),i}const E5=k5(()=>typeof window<"u"?window.localStorage:void 0);function C5(t,e,n=E5,i){const r=i==null?void 0:i.unstable_getOnInit,s=de(r?n.getItem(t,e):e);return s.onMount=a=>{r||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},de(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===b5?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}var je;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(je||(je={}));var Uy;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Uy||(Uy={}));const te=je.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ts=t=>{switch(typeof t){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(t)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(t)?te.array:t===null?te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?te.promise:typeof Map<"u"&&t instanceof Map?te.map:typeof Set<"u"&&t instanceof Set?te.set:typeof Date<"u"&&t instanceof Date?te.date:te.object;default:return te.unknown}},H=je.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),A5=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Vi extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return r(this),i}toString(){return this.message}get message(){return JSON.stringify(this.issues,je.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Vi.create=t=>new Vi(t);const Ac=(t,e)=>{let n;switch(t.code){case H.invalid_type:t.received===te.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case H.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,je.jsonStringifyReplacer)}`;break;case H.unrecognized_keys:n=`Unrecognized key(s) in object: ${je.joinValues(t.keys,", ")}`;break;case H.invalid_union:n="Invalid input";break;case H.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${je.joinValues(t.options)}`;break;case H.invalid_enum_value:n=`Invalid enum value. Expected ${je.joinValues(t.options)}, received '${t.received}'`;break;case H.invalid_arguments:n="Invalid function arguments";break;case H.invalid_return_type:n="Invalid function return type";break;case H.invalid_date:n="Invalid date";break;case H.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:je.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case H.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case H.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case H.custom:n="Invalid input";break;case H.invalid_intersection_types:n="Intersection results could not be merged";break;case H.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case H.not_finite:n="Number must be finite";break;default:n=e.defaultError,je.assertNever(t)}return{message:n}};let JP=Ac;function P5(t){JP=t}function Ff(){return JP}const jf=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};let a="";const l=i.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...r,path:s,message:r.message||a}},R5=[];function ne(t,e){const n=jf({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ff(),Ac].filter(i=>!!i)});t.common.issues.push(n)}class on{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Ce;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n)i.push({key:await r.key,value:await r.value});return on.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Ce;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Ce=Object.freeze({status:"aborted"}),qP=t=>({status:"dirty",value:t}),wn=t=>({status:"valid",value:t}),Wy=t=>t.status==="aborted",Hy=t=>t.status==="dirty",Vf=t=>t.status==="valid",Uf=t=>typeof Promise<"u"&&t instanceof Promise;var he;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(he||(he={}));class Sr{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const SS=(t,e)=>{if(Vf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Vi(t.common.issues);return this._error=n,this._error}}};function Oe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:i??a.defaultError}:{message:n??a.defaultError},description:r}}class Me{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ts(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ts(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new on,ctx:{common:e.parent.common,data:e.data,parsedType:Ts(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Uf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ts(e)},s=this._parseSync({data:e,path:r.path,parent:r});return SS(r,s)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ts(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Uf(r)?r:Promise.resolve(r));return SS(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:H.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Hi({schema:this,typeName:ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Kr.create(this,this._def)}nullable(){return na.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ui.create(this,this._def)}promise(){return Ml.create(this,this._def)}or(e){return Oc.create([this,e],this._def)}and(e){return _c.create(this,e,this._def)}transform(e){return new Hi({...Oe(this._def),schema:this,typeName:ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Lc({...Oe(this._def),innerType:this,defaultValue:n,typeName:ye.ZodDefault})}brand(){return new eR({typeName:ye.ZodBranded,type:this,...Oe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Xf({...Oe(this._def),innerType:this,catchValue:n,typeName:ye.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ud.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const T5=/^c[^\s-]{8,}$/i,O5=/^[a-z][a-z0-9]*$/,_5=/[0-9A-HJKMNP-TV-Z]{26}/,N5=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,M5=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,D5=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,$5=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,L5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,I5=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function B5(t,e){return!!((e==="v4"||!e)&&$5.test(t)||(e==="v6"||!e)&&L5.test(t))}class Li extends Me{constructor(){super(...arguments),this._regex=(e,n,i)=>this.refinement(r=>e.test(r),{validation:n,code:H.invalid_string,...he.errToObj(i)}),this.nonempty=e=>this.min(1,he.errToObj(e)),this.trim=()=>new Li({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Li({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Li({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){const s=this._getOrReturnCtx(e);return ne(s,{code:H.invalid_type,expected:te.string,received:s.parsedType}),Ce}const i=new on;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),ne(r,{code:H.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),ne(r,{code:H.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?ne(r,{code:H.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ne(r,{code:H.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")M5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"email",code:H.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")D5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"emoji",code:H.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")N5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"uuid",code:H.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")T5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"cuid",code:H.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")O5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"cuid2",code:H.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")_5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"ulid",code:H.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ne(r,{validation:"url",code:H.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"regex",code:H.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),ne(r,{code:H.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),ne(r,{code:H.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),ne(r,{code:H.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?I5(s).test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:H.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="ip"?B5(e.data,s.version)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"ip",code:H.invalid_string,message:s.message}),i.dirty()):je.assertNever(s);return{status:i.value,value:e.data}}_addCheck(e){return new Li({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...he.errToObj(e)})}url(e){return this._addCheck({kind:"url",...he.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...he.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...he.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...he.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...he.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...he.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...he.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...he.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...he.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...he.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...he.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...he.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...he.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...he.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...he.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Li.create=t=>{var e;return new Li({checks:[],typeName:ye.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Oe(t)})};function z5(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class oo extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){const s=this._getOrReturnCtx(e);return ne(s,{code:H.invalid_type,expected:te.number,received:s.parsedType}),Ce}let i;const r=new on;for(const s of this._def.checks)s.kind==="int"?je.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{code:H.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ne(i,{code:H.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ne(i,{code:H.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?z5(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),ne(i,{code:H.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{code:H.not_finite,message:s.message}),r.dirty()):je.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,i,r){return new oo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:he.toString(r)}]})}_addCheck(e){return new oo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:he.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:he.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:he.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:he.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&je.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}oo.create=t=>new oo({checks:[],typeName:ye.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Oe(t)});class ao extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==te.bigint){const s=this._getOrReturnCtx(e);return ne(s,{code:H.invalid_type,expected:te.bigint,received:s.parsedType}),Ce}let i;const r=new on;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ne(i,{code:H.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ne(i,{code:H.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),ne(i,{code:H.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):je.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,i,r){return new ao({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:he.toString(r)}]})}_addCheck(e){return new ao({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ao.create=t=>{var e;return new ao({checks:[],typeName:ye.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Oe(t)})};class Pc extends Me{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==te.boolean){const i=this._getOrReturnCtx(e);return ne(i,{code:H.invalid_type,expected:te.boolean,received:i.parsedType}),Ce}return wn(e.data)}}Pc.create=t=>new Pc({typeName:ye.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Oe(t)});class ea extends Me{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){const s=this._getOrReturnCtx(e);return ne(s,{code:H.invalid_type,expected:te.date,received:s.parsedType}),Ce}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ne(s,{code:H.invalid_date}),Ce}const i=new on;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),ne(r,{code:H.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),ne(r,{code:H.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):je.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ea({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:he.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:he.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ea.create=t=>new ea({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ye.ZodDate,...Oe(t)});class Wf extends Me{_parse(e){if(this._getType(e)!==te.symbol){const i=this._getOrReturnCtx(e);return ne(i,{code:H.invalid_type,expected:te.symbol,received:i.parsedType}),Ce}return wn(e.data)}}Wf.create=t=>new Wf({typeName:ye.ZodSymbol,...Oe(t)});class Rc extends Me{_parse(e){if(this._getType(e)!==te.undefined){const i=this._getOrReturnCtx(e);return ne(i,{code:H.invalid_type,expected:te.undefined,received:i.parsedType}),Ce}return wn(e.data)}}Rc.create=t=>new Rc({typeName:ye.ZodUndefined,...Oe(t)});class Tc extends Me{_parse(e){if(this._getType(e)!==te.null){const i=this._getOrReturnCtx(e);return ne(i,{code:H.invalid_type,expected:te.null,received:i.parsedType}),Ce}return wn(e.data)}}Tc.create=t=>new Tc({typeName:ye.ZodNull,...Oe(t)});class Nl extends Me{constructor(){super(...arguments),this._any=!0}_parse(e){return wn(e.data)}}Nl.create=t=>new Nl({typeName:ye.ZodAny,...Oe(t)});class Vo extends Me{constructor(){super(...arguments),this._unknown=!0}_parse(e){return wn(e.data)}}Vo.create=t=>new Vo({typeName:ye.ZodUnknown,...Oe(t)});class ss extends Me{_parse(e){const n=this._getOrReturnCtx(e);return ne(n,{code:H.invalid_type,expected:te.never,received:n.parsedType}),Ce}}ss.create=t=>new ss({typeName:ye.ZodNever,...Oe(t)});class Hf extends Me{_parse(e){if(this._getType(e)!==te.undefined){const i=this._getOrReturnCtx(e);return ne(i,{code:H.invalid_type,expected:te.void,received:i.parsedType}),Ce}return wn(e.data)}}Hf.create=t=>new Hf({typeName:ye.ZodVoid,...Oe(t)});class Ui extends Me{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==te.array)return ne(n,{code:H.invalid_type,expected:te.array,received:n.parsedType}),Ce;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(ne(n,{code:o?H.too_big:H.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ne(n,{code:H.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ne(n,{code:H.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new Sr(n,o,n.path,a)))).then(o=>on.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new Sr(n,o,n.path,a)));return on.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new Ui({...this._def,minLength:{value:e,message:he.toString(n)}})}max(e,n){return new Ui({...this._def,maxLength:{value:e,message:he.toString(n)}})}length(e,n){return new Ui({...this._def,exactLength:{value:e,message:he.toString(n)}})}nonempty(e){return this.min(1,e)}}Ui.create=(t,e)=>new Ui({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ye.ZodArray,...Oe(e)});function Ra(t){if(t instanceof ct){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Kr.create(Ra(i))}return new ct({...t._def,shape:()=>e})}else return t instanceof Ui?new Ui({...t._def,type:Ra(t.element)}):t instanceof Kr?Kr.create(Ra(t.unwrap())):t instanceof na?na.create(Ra(t.unwrap())):t instanceof kr?kr.create(t.items.map(e=>Ra(e))):t}class ct extends Me{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=je.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==te.object){const u=this._getOrReturnCtx(e);return ne(u,{code:H.invalid_type,expected:te.object,received:u.parsedType}),Ce}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ss&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Sr(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof ss){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")a.length>0&&(ne(r,{code:H.unrecognized_keys,keys:a}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Sr(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key;u.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>on.mergeObjectSync(i,u)):on.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return he.errToObj,new ct({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&o!==void 0?o:i.defaultError;return n.code==="unrecognized_keys"?{message:(a=he.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new ct({...this._def,unknownKeys:"strip"})}passthrough(){return new ct({...this._def,unknownKeys:"passthrough"})}extend(e){return new ct({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ct({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ye.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ct({...this._def,catchall:e})}pick(e){const n={};return je.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new ct({...this._def,shape:()=>n})}omit(e){const n={};return je.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new ct({...this._def,shape:()=>n})}deepPartial(){return Ra(this)}partial(e){const n={};return je.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new ct({...this._def,shape:()=>n})}required(e){const n={};return je.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof Kr;)s=s._def.innerType;n[i]=s}}),new ct({...this._def,shape:()=>n})}keyof(){return QP(je.objectKeys(this.shape))}}ct.create=(t,e)=>new ct({shape:()=>t,unknownKeys:"strip",catchall:ss.create(),typeName:ye.ZodObject,...Oe(e)});ct.strictCreate=(t,e)=>new ct({shape:()=>t,unknownKeys:"strict",catchall:ss.create(),typeName:ye.ZodObject,...Oe(e)});ct.lazycreate=(t,e)=>new ct({shape:t,unknownKeys:"strip",catchall:ss.create(),typeName:ye.ZodObject,...Oe(e)});class Oc extends Me{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Vi(a.ctx.common.issues));return ne(n,{code:H.invalid_union,unionErrors:o}),Ce}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Vi(l));return ne(n,{code:H.invalid_union,unionErrors:a}),Ce}}get options(){return this._def.options}}Oc.create=(t,e)=>new Oc({options:t,typeName:ye.ZodUnion,...Oe(e)});const Wh=t=>t instanceof Mc?Wh(t.schema):t instanceof Hi?Wh(t.innerType()):t instanceof Dc?[t.value]:t instanceof lo?t.options:t instanceof $c?Object.keys(t.enum):t instanceof Lc?Wh(t._def.innerType):t instanceof Rc?[void 0]:t instanceof Tc?[null]:null;class em extends Me{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.object)return ne(n,{code:H.invalid_type,expected:te.object,received:n.parsedType}),Ce;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(ne(n,{code:H.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Ce)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const o=Wh(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new em({typeName:ye.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,...Oe(i)})}}function Gy(t,e){const n=Ts(t),i=Ts(e);if(t===e)return{valid:!0,data:t};if(n===te.object&&i===te.object){const r=je.objectKeys(e),s=je.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=Gy(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===te.array&&i===te.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=Gy(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===te.date&&i===te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class _c extends Me{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(Wy(s)||Wy(o))return Ce;const a=Gy(s.value,o.value);return a.valid?((Hy(s)||Hy(o))&&n.dirty(),{status:n.value,value:a.data}):(ne(i,{code:H.invalid_intersection_types}),Ce)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}_c.create=(t,e,n)=>new _c({left:t,right:e,typeName:ye.ZodIntersection,...Oe(n)});class kr extends Me{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.array)return ne(i,{code:H.invalid_type,expected:te.array,received:i.parsedType}),Ce;if(i.data.length<this._def.items.length)return ne(i,{code:H.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ce;!this._def.rest&&i.data.length>this._def.items.length&&(ne(i,{code:H.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Sr(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>on.mergeArray(n,o)):on.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new kr({...this._def,rest:e})}}kr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new kr({items:t,typeName:ye.ZodTuple,rest:null,...Oe(e)})};class Nc extends Me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.object)return ne(i,{code:H.invalid_type,expected:te.object,received:i.parsedType}),Ce;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new Sr(i,a,i.path,a)),value:o._parse(new Sr(i,i.data[a],i.path,a))});return i.common.async?on.mergeObjectAsync(n,r):on.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof Me?new Nc({keyType:e,valueType:n,typeName:ye.ZodRecord,...Oe(i)}):new Nc({keyType:Li.create(),valueType:e,typeName:ye.ZodRecord,...Oe(n)})}}class Gf extends Me{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.map)return ne(i,{code:H.invalid_type,expected:te.map,received:i.parsedType}),Ce;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],u)=>({key:r._parse(new Sr(i,a,i.path,[u,"key"])),value:s._parse(new Sr(i,l,i.path,[u,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Ce;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Ce;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}Gf.create=(t,e,n)=>new Gf({valueType:e,keyType:t,typeName:ye.ZodMap,...Oe(n)});class ta extends Me{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.set)return ne(i,{code:H.invalid_type,expected:te.set,received:i.parsedType}),Ce;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(ne(i,{code:H.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(ne(i,{code:H.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Ce;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...i.data.values()].map((l,u)=>s._parse(new Sr(i,l,i.path,u)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new ta({...this._def,minSize:{value:e,message:he.toString(n)}})}max(e,n){return new ta({...this._def,maxSize:{value:e,message:he.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ta.create=(t,e)=>new ta({valueType:t,minSize:null,maxSize:null,typeName:ye.ZodSet,...Oe(e)});class ol extends Me{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.function)return ne(n,{code:H.invalid_type,expected:te.function,received:n.parsedType}),Ce;function i(a,l){return jf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ff(),Ac].filter(u=>!!u),issueData:{code:H.invalid_arguments,argumentsError:l}})}function r(a,l){return jf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ff(),Ac].filter(u=>!!u),issueData:{code:H.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof Ml?wn(async(...a)=>{const l=new Vi([]),u=await this._def.args.parseAsync(a,s).catch(h=>{throw l.addIssue(i(a,h)),l}),c=await o(...u);return await this._def.returns._def.type.parseAsync(c,s).catch(h=>{throw l.addIssue(r(c,h)),l})}):wn((...a)=>{const l=this._def.args.safeParse(a,s);if(!l.success)throw new Vi([i(a,l.error)]);const u=o(...l.data),c=this._def.returns.safeParse(u,s);if(!c.success)throw new Vi([r(u,c.error)]);return c.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ol({...this._def,args:kr.create(e).rest(Vo.create())})}returns(e){return new ol({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new ol({args:e||kr.create([]).rest(Vo.create()),returns:n||Vo.create(),typeName:ye.ZodFunction,...Oe(i)})}}class Mc extends Me{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Mc.create=(t,e)=>new Mc({getter:t,typeName:ye.ZodLazy,...Oe(e)});class Dc extends Me{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ne(n,{received:n.data,code:H.invalid_literal,expected:this._def.value}),Ce}return{status:"valid",value:e.data}}get value(){return this._def.value}}Dc.create=(t,e)=>new Dc({value:t,typeName:ye.ZodLiteral,...Oe(e)});function QP(t,e){return new lo({values:t,typeName:ye.ZodEnum,...Oe(e)})}class lo extends Me{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return ne(n,{expected:je.joinValues(i),received:n.parsedType,code:H.invalid_type}),Ce}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),i=this._def.values;return ne(n,{received:n.data,code:H.invalid_enum_value,options:i}),Ce}return wn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return lo.create(e)}exclude(e){return lo.create(this.options.filter(n=>!e.includes(n)))}}lo.create=QP;class $c extends Me{_parse(e){const n=je.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==te.string&&i.parsedType!==te.number){const r=je.objectValues(n);return ne(i,{expected:je.joinValues(r),received:i.parsedType,code:H.invalid_type}),Ce}if(n.indexOf(e.data)===-1){const r=je.objectValues(n);return ne(i,{received:i.data,code:H.invalid_enum_value,options:r}),Ce}return wn(e.data)}get enum(){return this._def.values}}$c.create=(t,e)=>new $c({values:t,typeName:ye.ZodNativeEnum,...Oe(e)});class Ml extends Me{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.promise&&n.common.async===!1)return ne(n,{code:H.invalid_type,expected:te.promise,received:n.parsedType}),Ce;const i=n.parsedType===te.promise?n.data:Promise.resolve(n.data);return wn(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ml.create=(t,e)=>new Ml({type:t,typeName:ye.ZodPromise,...Oe(e)});class Hi extends Me{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null;if(r.type==="preprocess"){const o=r.transform(i.data);return i.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:i.path,parent:i})):this._def.schema._parseSync({data:o,path:i.path,parent:i})}const s={addIssue:o=>{ne(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Ce:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Ce:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Vf(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Vf(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);je.assertNever(r)}}Hi.create=(t,e,n)=>new Hi({schema:t,typeName:ye.ZodEffects,effect:e,...Oe(n)});Hi.createWithPreprocess=(t,e,n)=>new Hi({schema:e,effect:{type:"preprocess",transform:t},typeName:ye.ZodEffects,...Oe(n)});class Kr extends Me{_parse(e){return this._getType(e)===te.undefined?wn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Kr.create=(t,e)=>new Kr({innerType:t,typeName:ye.ZodOptional,...Oe(e)});class na extends Me{_parse(e){return this._getType(e)===te.null?wn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}na.create=(t,e)=>new na({innerType:t,typeName:ye.ZodNullable,...Oe(e)});class Lc extends Me{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===te.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Lc.create=(t,e)=>new Lc({innerType:t,typeName:ye.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Oe(e)});class Xf extends Me{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Uf(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Vi(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Vi(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Xf.create=(t,e)=>new Xf({innerType:t,typeName:ye.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Oe(e)});class Kf extends Me{_parse(e){if(this._getType(e)!==te.nan){const i=this._getOrReturnCtx(e);return ne(i,{code:H.invalid_type,expected:te.nan,received:i.parsedType}),Ce}return{status:"valid",value:e.data}}}Kf.create=t=>new Kf({typeName:ye.ZodNaN,...Oe(t)});const F5=Symbol("zod_brand");class eR extends Me{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class ud extends Me{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Ce:s.status==="dirty"?(n.dirty(),qP(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Ce:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new ud({in:e,out:n,typeName:ye.ZodPipeline})}}const tR=(t,e={},n)=>t?Nl.create().superRefine((i,r)=>{var s,o;if(!t(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;r.addIssue({code:"custom",...u,fatal:l})}}):Nl.create(),j5={object:ct.lazycreate};var ye;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(ye||(ye={}));const V5=(t,e={message:`Input not instance of ${t.name}`})=>tR(n=>n instanceof t,e),nR=Li.create,iR=oo.create,U5=Kf.create,W5=ao.create,rR=Pc.create,H5=ea.create,G5=Wf.create,X5=Rc.create,K5=Tc.create,Z5=Nl.create,Y5=Vo.create,J5=ss.create,q5=Hf.create,Q5=Ui.create,e4=ct.create,t4=ct.strictCreate,n4=Oc.create,i4=em.create,r4=_c.create,s4=kr.create,o4=Nc.create,a4=Gf.create,l4=ta.create,u4=ol.create,c4=Mc.create,d4=Dc.create,h4=lo.create,f4=$c.create,p4=Ml.create,kS=Hi.create,m4=Kr.create,g4=na.create,y4=Hi.createWithPreprocess,v4=ud.create,w4=()=>nR().optional(),x4=()=>iR().optional(),b4=()=>rR().optional(),S4={string:t=>Li.create({...t,coerce:!0}),number:t=>oo.create({...t,coerce:!0}),boolean:t=>Pc.create({...t,coerce:!0}),bigint:t=>ao.create({...t,coerce:!0}),date:t=>ea.create({...t,coerce:!0})},k4=Ce;var xo=Object.freeze({__proto__:null,defaultErrorMap:Ac,setErrorMap:P5,getErrorMap:Ff,makeIssue:jf,EMPTY_PATH:R5,addIssueToContext:ne,ParseStatus:on,INVALID:Ce,DIRTY:qP,OK:wn,isAborted:Wy,isDirty:Hy,isValid:Vf,isAsync:Uf,get util(){return je},get objectUtil(){return Uy},ZodParsedType:te,getParsedType:Ts,ZodType:Me,ZodString:Li,ZodNumber:oo,ZodBigInt:ao,ZodBoolean:Pc,ZodDate:ea,ZodSymbol:Wf,ZodUndefined:Rc,ZodNull:Tc,ZodAny:Nl,ZodUnknown:Vo,ZodNever:ss,ZodVoid:Hf,ZodArray:Ui,ZodObject:ct,ZodUnion:Oc,ZodDiscriminatedUnion:em,ZodIntersection:_c,ZodTuple:kr,ZodRecord:Nc,ZodMap:Gf,ZodSet:ta,ZodFunction:ol,ZodLazy:Mc,ZodLiteral:Dc,ZodEnum:lo,ZodNativeEnum:$c,ZodPromise:Ml,ZodEffects:Hi,ZodTransformer:Hi,ZodOptional:Kr,ZodNullable:na,ZodDefault:Lc,ZodCatch:Xf,ZodNaN:Kf,BRAND:F5,ZodBranded:eR,ZodPipeline:ud,custom:tR,Schema:Me,ZodSchema:Me,late:j5,get ZodFirstPartyTypeKind(){return ye},coerce:S4,any:Z5,array:Q5,bigint:W5,boolean:rR,date:H5,discriminatedUnion:i4,effect:kS,enum:h4,function:u4,instanceof:V5,intersection:r4,lazy:c4,literal:d4,map:a4,nan:U5,nativeEnum:f4,never:J5,null:K5,nullable:g4,number:iR,object:e4,oboolean:b4,onumber:x4,optional:m4,ostring:w4,pipeline:v4,preprocess:y4,promise:p4,record:o4,set:l4,strictObject:t4,string:nR,symbol:G5,transformer:kS,tuple:s4,undefined:X5,union:n4,unknown:Y5,void:q5,NEVER:k4,ZodIssueCode:H,quotelessJson:A5,ZodError:Vi});const sR=["randomize","clean","unchanged"],oR=["pio-switches-and-leds","pio-printer","handshake"],Xy=xo.object({language:xo.enum(mb).catch(()=>{const t=navigator.language.toLowerCase();for(const e of mb)if(t.startsWith(e))return e;return"en"}),dataOnLoad:xo.enum(sR).catch("randomize"),devices:xo.enum(oR).catch("pio-switches-and-leds"),executionUnit:xo.number().int().min(5).max(500).catch(150),clockSpeed:xo.number().int().min(10).max(1e3).catch(30),printerSpeed:xo.number().int().min(10).max(1e3).catch(1e3)}),E4=Xy.parse({}),Zl=C5("vonsim-settings",E4,{getItem(t,e){try{const n=localStorage.getItem(t);return Xy.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=Xy.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{unstable_getOnInit:!0}),os=()=>G.get(Zl),xg=de(M.zero(16)),bg=de(M.zero(16)),Sg=de(M.zero(16)),kg=de(M.zero(16)),Eg=de(M.zero(16)),Cg=de(M.zero(16)),C4=de(M.zero(8)),Ag=de(M.zero(16)),Pg=de(M.zero(16)),Rg=de(M.zero(16)),Tg=de(M.zero(16)),Og=de(M.zero(16)),_g=de(M.zero(16)),aR=de(M.zero(16)),Dl=de(M.zero(8)),ri=t=>de(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),si=t=>de(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),et={AX:xg,AL:ri(xg),AH:si(xg),BX:bg,BL:ri(bg),BH:si(bg),CX:Sg,CL:ri(Sg),CH:si(Sg),DX:kg,DL:ri(kg),DH:si(kg),SP:Eg,"SP.l":ri(Eg),"SP.h":si(Eg),IP:Cg,"IP.l":ri(Cg),"IP.h":si(Cg),IR:C4,ri:Ag,"ri.l":ri(Ag),"ri.h":si(Ag),id:Pg,"id.l":ri(Pg),"id.h":si(Pg),left:Rg,"left.l":ri(Rg),"left.h":si(Rg),right:Tg,"right.l":ri(Tg),"right.h":si(Tg),result:Og,"result.l":ri(Og),"result.h":si(Og),FLAGS:_g,"FLAGS.l":ri(_g),"FLAGS.h":si(_g),MAR:aR,MBR:Dl},Os=de({phase:"stopped"}),lR=de("ADD");function A4(t){G.set(et.AX,M.fromUnsigned(t.cpu.AX,16)),G.set(et.BX,M.fromUnsigned(t.cpu.BX,16)),G.set(et.CX,M.fromUnsigned(t.cpu.CX,16)),G.set(et.DX,M.fromUnsigned(t.cpu.DX,16)),G.set(et.SP,M.fromUnsigned(t.cpu.SP,16)),G.set(et.IP,M.fromUnsigned(t.cpu.IP,16)),G.set(et.IR,M.fromUnsigned(t.cpu.IR,8)),G.set(et.ri,M.fromUnsigned(t.cpu.ri,16)),G.set(et.id,M.fromUnsigned(t.cpu.id,16)),G.set(et.left,M.fromUnsigned(t.cpu.left,16)),G.set(et.right,M.fromUnsigned(t.cpu.right,16)),G.set(et.result,M.fromUnsigned(t.cpu.result,16)),G.set(et.FLAGS,M.fromUnsigned(t.cpu.FLAGS,16)),G.set(et.MAR,M.fromUnsigned(t.cpu.MAR,16)),G.set(et.MBR,M.fromUnsigned(t.cpu.MBR,8)),G.set(Os,{phase:"stopped"})}const Vw=de(new Array(pe.MAX_ADDRESS+1).fill(M.zero(8))),Ky=de(pe.from(4096)),ES=8,P4=de(t=>{const e=t(Ky),n=e.value-e.value%ES,i=t(Vw),r=[];for(let s=0;s<ES;s++)r.push({address:pe.from(n+s),value:i[n+s]});return r});function R4(t){G.set(Vw,t.memory.map(e=>M.fromUnsigned(e,8)))}const Uw=de(M.fromUnsigned(255,8)),Ww=de(M.fromUnsigned(0,8)),Hw=de(M.fromUnsigned(0,8)),Zf=[de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8))];function T4(t){G.set(Uw,M.fromUnsigned(t.io.pic.IMR,8)),G.set(Ww,M.fromUnsigned(t.io.pic.IRR,8)),G.set(Hw,M.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Zf.length;e++)G.set(Zf[e],M.fromUnsigned(t.io.pic.lines[e],8))}var O4=Object.defineProperty,_4=(t,e)=>{for(var n in e)O4(t,n,{get:e[n],enumerable:!0})},Gi={};_4(Gi,{assign:()=>D4,colors:()=>Ys,createStringInterpolator:()=>qw,skipAnimation:()=>mR,to:()=>pR,willAdvance:()=>Qw});var Gw=dd(),Ae=t=>cd(t,Gw),Xw=dd();Ae.write=t=>cd(t,Xw);var tm=dd();Ae.onStart=t=>cd(t,tm);var Kw=dd();Ae.onFrame=t=>cd(t,Kw);var Zw=dd();Ae.onFinish=t=>cd(t,Zw);var al=[];Ae.setTimeout=(t,e)=>{const n=Ae.now()+e,i=()=>{const s=al.findIndex(o=>o.cancel==i);~s&&al.splice(s,1),Fs-=~s?1:0},r={time:n,handler:t,cancel:i};return al.splice(uR(n),0,r),Fs+=1,cR(),r};var uR=t=>~(~al.findIndex(e=>e.time>t)||~al.length);Ae.cancel=t=>{tm.delete(t),Kw.delete(t),Zw.delete(t),Gw.delete(t),Xw.delete(t)};Ae.sync=t=>{Zy=!0,Ae.batchedUpdates(t),Zy=!1};Ae.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Ae.onStart(n)}return i.handler=t,i.cancel=()=>{tm.delete(n),e=null},i};var Yw=typeof window<"u"?window.requestAnimationFrame:()=>{};Ae.use=t=>Yw=t;Ae.now=typeof performance<"u"?()=>performance.now():Date.now;Ae.batchedUpdates=t=>t();Ae.catch=console.error;Ae.frameLoop="always";Ae.advance=()=>{Ae.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):hR()};var zs=-1,Fs=0,Zy=!1;function cd(t,e){Zy?(e.delete(t),t(0)):(e.add(t),cR())}function cR(){zs<0&&(zs=0,Ae.frameLoop!=="demand"&&Yw(dR))}function N4(){zs=-1}function dR(){~zs&&(Yw(dR),Ae.batchedUpdates(hR))}function hR(){const t=zs;zs=Ae.now();const e=uR(zs);if(e&&(fR(al.splice(0,e),n=>n.handler()),Fs-=e),!Fs){N4();return}tm.flush(),Gw.flush(t?Math.min(64,zs-t):16.667),Kw.flush(),Xw.flush(),Zw.flush()}function dd(){let t=new Set,e=t;return{add(n){Fs+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Fs-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Fs-=e.size,fR(e,i=>i(n)&&t.add(i)),Fs+=t.size,e=t)}}}function fR(t,e){t.forEach(n=>{try{e(n)}catch(i){Ae.catch(i)}})}function Yy(){}var M4=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),W={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Tr(t,e){if(W.arr(t)){if(!W.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Te=(t,e)=>t.forEach(e);function Er(t,e,n){if(W.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var gn=t=>W.und(t)?[]:W.arr(t)?t:[t];function Yu(t,e){if(t.size){const n=Array.from(t);t.clear(),Te(n,e)}}var $u=(t,...e)=>Yu(t,n=>n(...e)),Jw=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),qw,pR,Ys=null,mR=!1,Qw=Yy,D4=t=>{t.to&&(pR=t.to),t.now&&(Ae.now=t.now),t.colors!==void 0&&(Ys=t.colors),t.skipAnimation!=null&&(mR=t.skipAnimation),t.createStringInterpolator&&(qw=t.createStringInterpolator),t.requestAnimationFrame&&Ae.use(t.requestAnimationFrame),t.batchedUpdates&&(Ae.batchedUpdates=t.batchedUpdates),t.willAdvance&&(Qw=t.willAdvance),t.frameLoop&&(Ae.frameLoop=t.frameLoop)},Ju=new Set,mi=[],Ng=[],Yf=0,nm={get idle(){return!Ju.size&&!mi.length},start(t){Yf>t.priority?(Ju.add(t),Ae.onStart($4)):(gR(t),Ae(Jy))},advance:Jy,sort(t){if(Yf)Ae.onFrame(()=>nm.sort(t));else{const e=mi.indexOf(t);~e&&(mi.splice(e,1),yR(t))}},clear(){mi=[],Ju.clear()}};function $4(){Ju.forEach(gR),Ju.clear(),Ae(Jy)}function gR(t){mi.includes(t)||yR(t)}function yR(t){mi.splice(L4(mi,e=>e.priority>t.priority),0,t)}function Jy(t){const e=Ng;for(let n=0;n<mi.length;n++){const i=mi[n];Yf=i.priority,i.idle||(Qw(i),i.advance(t),i.idle||e.push(i))}return Yf=0,Ng=mi,Ng.length=0,mi=e,mi.length>0}function L4(t,e){const n=t.findIndex(e);return n<0?t.length:n}var I4=(t,e,n)=>Math.min(Math.max(n,t),e),B4={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ii="[-+]?\\d*\\.?\\d+",Jf=Ii+"%";function im(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var z4=new RegExp("rgb"+im(Ii,Ii,Ii)),F4=new RegExp("rgba"+im(Ii,Ii,Ii,Ii)),j4=new RegExp("hsl"+im(Ii,Jf,Jf)),V4=new RegExp("hsla"+im(Ii,Jf,Jf,Ii)),U4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,W4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,H4=/^#([0-9a-fA-F]{6})$/,G4=/^#([0-9a-fA-F]{8})$/;function X4(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=H4.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ys&&Ys[t]!==void 0?Ys[t]:(e=z4.exec(t))?(wa(e[1])<<24|wa(e[2])<<16|wa(e[3])<<8|255)>>>0:(e=F4.exec(t))?(wa(e[1])<<24|wa(e[2])<<16|wa(e[3])<<8|PS(e[4]))>>>0:(e=U4.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=G4.exec(t))?parseInt(e[1],16)>>>0:(e=W4.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=j4.exec(t))?(CS(AS(e[1]),qd(e[2]),qd(e[3]))|255)>>>0:(e=V4.exec(t))?(CS(AS(e[1]),qd(e[2]),qd(e[3]))|PS(e[4]))>>>0:null}function Mg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function CS(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Mg(r,i,t+1/3),o=Mg(r,i,t),a=Mg(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function wa(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function AS(t){return(parseFloat(t)%360+360)%360/360}function PS(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function qd(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function RS(t){let e=X4(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Ic=(t,e,n)=>{if(W.fun(t))return t;if(W.arr(t))return Ic({range:t,output:e,extrapolate:n});if(W.str(t.output[0]))return qw(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=Z4(u,s);return K4(u,s[c],s[c+1],r[c],r[c+1],l,o,a,i.map)}};function K4(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function Z4(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Y4=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return I4(0,1,r/t)},qf=1.70158,Qd=qf*1.525,TS=qf+1,OS=2*Math.PI/3,_S=2*Math.PI/4.5,eh=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e1={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>TS*t*t*t-qf*t*t,easeOutBack:t=>1+TS*Math.pow(t-1,3)+qf*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Qd+1)*2*t-Qd)/2:(Math.pow(2*t-2,2)*((Qd+1)*(t*2-2)+Qd)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*OS),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*OS)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*_S))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*_S)/2+1,easeInBounce:t=>1-eh(1-t),easeOutBounce:eh,easeInOutBounce:t=>t<.5?(1-eh(1-2*t))/2:(1+eh(2*t-1))/2,steps:Y4},Bc=Symbol.for("FluidValue.get"),$l=Symbol.for("FluidValue.observers"),pi=t=>!!(t&&t[Bc]),An=t=>t&&t[Bc]?t[Bc]():t,NS=t=>t[$l]||null;function J4(t,e){t.eventObserved?t.eventObserved(e):t(e)}function zc(t,e){const n=t[$l];n&&n.forEach(i=>{J4(i,e)})}var vR=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");q4(this,t)}},q4=(t,e)=>wR(t,Bc,e);function Yl(t,e){if(t[Bc]){let n=t[$l];n||wR(t,$l,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Fc(t,e){const n=t[$l];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[$l]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var wR=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Hh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Q4=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,MS=new RegExp(`(${Hh.source})(%|[a-z]+)`,"i"),eB=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,rm=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,xR=t=>{const[e,n]=tB(t);if(!e||Jw())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&rm.test(n))return xR(n);if(n)return n}return t},tB=t=>{const e=rm.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Dg,nB=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,bR=t=>{Dg||(Dg=Ys?new RegExp(`(${Object.keys(Ys).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>An(s).replace(rm,xR).replace(Q4,RS).replace(Dg,RS)),n=e.map(s=>s.match(Hh).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Ic({...t,output:s}));return s=>{var l;const o=!MS.test(e[0])&&((l=e.find(u=>MS.test(u)))==null?void 0:l.replace(Hh,""));let a=0;return e[0].replace(Hh,()=>`${r[a++](s)}${o||""}`).replace(eB,nB)}},t1="react-spring: ",SR=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${t1}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},iB=SR(console.warn);function rB(){iB(`${t1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var sB=SR(console.warn);function oB(){sB(`${t1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function sm(t){return W.str(t)&&(t[0]=="#"||/\d/.test(t)||!Jw()&&rm.test(t)||t in(Ys||{}))}var Xa=Jw()?b.useEffect:b.useLayoutEffect,aB=()=>{const t=b.useRef(!1);return Xa(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function kR(){const t=b.useState()[1],e=aB();return()=>{e.current&&t(Math.random())}}function lB(t,e){const[n]=b.useState(()=>({inputs:e,result:t()})),i=b.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&uB(e,s.inputs)||(s={inputs:e,result:t()}):s=n,b.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function uB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var ER=t=>b.useEffect(t,cB),cB=[];function dB(t){const e=b.useRef();return b.useEffect(()=>{e.current=t}),e.current}var jc=Symbol.for("Animated:node"),hB=t=>!!t&&t[jc]===t,tr=t=>t&&t[jc],n1=(t,e)=>M4(t,jc,e),om=t=>t&&t[jc]&&t[jc].getPayload(),CR=class{constructor(){n1(this,this)}getPayload(){return this.payload||[]}},hd=class extends CR{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,W.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new hd(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return W.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,W.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Vc=class extends hd{constructor(t){super(0),this._string=null,this._toString=Ic({output:[t,t]})}static create(t){return new Vc(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(W.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Ic({output:[this.getValue(),t]})),this._value=0,super.reset()}},Qf={dependencies:null},am=class extends CR{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Er(this.source,(n,i)=>{hB(n)?e[i]=n.getValue(t):pi(n)?e[i]=An(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Te(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Er(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Qf.dependencies&&pi(t)&&Qf.dependencies.add(t);const e=om(t);e&&Te(e,n=>this.add(n))}},AR=class extends am{constructor(t){super(t)}static create(t){return new AR(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(fB)),!0)}};function fB(t){return(sm(t)?Vc:hd).create(t)}function qy(t){const e=tr(t);return e?e.constructor:W.arr(t)?AR:sm(t)?Vc:hd}var DS=(t,e)=>{const n=!W.fun(t)||t.prototype&&t.prototype.isReactComponent;return b.forwardRef((i,r)=>{const s=b.useRef(null),o=n&&b.useCallback(p=>{s.current=gB(r,p)},[r]),[a,l]=mB(i,e),u=kR(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new pB(c,l),h=b.useRef();Xa(()=>(h.current=d,Te(l,p=>Yl(p,d)),()=>{h.current&&(Te(h.current.deps,p=>Fc(p,h.current)),Ae.cancel(h.current.update))})),b.useEffect(c,[]),ER(()=>()=>{const p=h.current;Te(p.deps,m=>Fc(m,p))});const f=e.getComponentProps(a.getValue());return b.createElement(t,{...f,ref:o})})},pB=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ae.write(this.update)}};function mB(t,e){const n=new Set;return Qf.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new am(t),Qf.dependencies=null,[t,n]}function gB(t,e){return t&&(W.fun(t)?t(e):t.current=e),e}var $S=Symbol.for("AnimatedComponent"),yB=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new am(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=LS(o)||"Anonymous";return W.str(o)?o=s[o]||(s[o]=DS(o,r)):o=o[$S]||(o[$S]=DS(o,r)),o.displayName=`Animated(${a})`,o};return Er(t,(o,a)=>{W.arr(t)&&(a=LS(o)),s[a]=s(o)}),{animated:s}},LS=t=>W.str(t)?t:t&&W.str(t.displayName)?t.displayName:W.fun(t)&&t.name||null;function Pn(t,...e){return W.fun(t)?t(...e):t}var qu=(t,e)=>t===!0||!!(e&&t&&(W.fun(t)?t(e):gn(t).includes(e))),PR=(t,e)=>W.obj(t)?e&&t[e]:t,RR=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,vB=t=>t,i1=(t,e=vB)=>{let n=wB;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);W.und(s)||(i[r]=s)}return i},wB=["config","onProps","onStart","onChange","onPause","onResume","onRest"],xB={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function bB(t){const e={};let n=0;if(Er(t,(i,r)=>{xB[r]||(e[r]=i,n++)}),n)return e}function r1(t){const e=bB(t);if(e){const n={to:e};return Er(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Uc(t){return t=An(t),W.arr(t)?t.map(Uc):sm(t)?Gi.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function SB(t){for(const e in t)return!0;return!1}function Qy(t){return W.fun(t)||W.arr(t)&&W.obj(t[0])}function IS(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function kB(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var EB={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},ev={...EB.default,mass:1,damping:1,easing:e1.linear,clamp:!1},CB=class{constructor(){this.velocity=0,Object.assign(this,ev)}};function AB(t,e,n){n&&(n={...n},BS(n,e),e={...n,...e}),BS(t,e),Object.assign(t,e);for(const o in ev)t[o]==null&&(t[o]=ev[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return W.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function BS(t,e){if(!W.und(e.decay))t.duration=void 0;else{const n=!W.und(e.tension)||!W.und(e.friction);(n||!W.und(e.frequency)||!W.und(e.damping)||!W.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var zS=[],PB=class{constructor(){this.changed=!1,this.values=zS,this.toValues=null,this.fromValues=zS,this.config=new CB,this.immediate=!1}};function TR(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,c=qu(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{W.und(n.pause)||(r.paused=qu(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||qu(p,e)),l=Pn(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),l=u.time-Ae.now()}function h(){l>0&&!Gi.skipAnimation?(r.delayed=!0,u=Ae.setTimeout(f,l),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var s1=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?ll(t.get()):e.every(n=>n.noop)?OR(t.get()):Di(t.get(),e.every(n=>n.finished)),OR=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Di=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),ll=t=>({value:t,cancelled:!0,finished:!1});function _R(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=i1(e,(v,g)=>g==="onRest"?void 0:v);let c,d;const h=new Promise((v,g)=>(c=v,d=g)),f=v=>{const g=r<=(n.cancelId||0)&&ll(i)||r!==n.asyncId&&Di(i,!1);if(g)throw v.result=g,d(v),v},p=(v,g)=>{const y=new FS,w=new jS;return(async()=>{if(Gi.skipAnimation)throw Wc(n),w.result=Di(i,!1),d(w),w;f(y);const x=W.obj(v)?{...v}:{...g,to:v};x.parentId=r,Er(u,(A,P)=>{W.und(x[P])&&(x[P]=A)});const k=await i.start(x);return f(y),n.paused&&await new Promise(A=>{n.resumeQueue.add(A)}),k})()};let m;if(Gi.skipAnimation)return Wc(n),Di(i,!1);try{let v;W.arr(t)?v=(async g=>{for(const y of g)await p(y)})(t):v=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([v.then(c),h]),m=Di(i.get(),!0,!1)}catch(v){if(v instanceof FS)m=v.result;else if(v instanceof jS)m=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return W.fun(o)&&Ae.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Wc(t,e){Yu(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var FS=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},jS=class extends Error{constructor(){super("SkipAnimationSignal")}},tv=t=>t instanceof o1,RB=1,o1=class extends vR{constructor(){super(...arguments),this.id=RB++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=tr(this);return t&&t.getValue()}to(...t){return Gi.to(this,t)}interpolate(...t){return rB(),Gi.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){zc(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||nm.sort(this),zc(this,{type:"priority",parent:this,priority:t})}},ia=Symbol.for("SpringPhase"),NR=1,nv=2,iv=4,$g=t=>(t[ia]&NR)>0,ms=t=>(t[ia]&nv)>0,pu=t=>(t[ia]&iv)>0,VS=(t,e)=>e?t[ia]|=nv|NR:t[ia]&=~nv,US=(t,e)=>e?t[ia]|=iv:t[ia]&=~iv,ut=class extends o1{constructor(t,e){if(super(),this.animation=new PB,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!W.und(t)||!W.und(e)){const n=W.obj(t)?{...t}:{...e,from:t};W.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ms(this)||this._state.asyncTo)||pu(this)}get goal(){return An(this.animation.to)}get velocity(){const t=tr(this);return t instanceof hd?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return $g(this)}get isAnimating(){return ms(this)}get isPaused(){return pu(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=om(i.to);!o&&pi(i.to)&&(r=gn(An(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Vc?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const m=i.fromValues[c],v=u.v0!=null?u.v0:u.v0=W.arr(s.velocity)?s.velocity[c]:s.velocity;let g;const y=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(W.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,x=Math.exp(-(1-w)*p);f=m+v/(1-w)*(1-x),h=Math.abs(u.lastPosition-f)<=y,g=v*x}else{g=u.lastVelocity==null?v:u.lastVelocity;const w=s.restVelocity||y/10,x=s.clamp?0:s.bounce,k=!W.und(x),A=m==d?u.v0>0:m<d;let P,E=!1;const R=1,N=Math.ceil(t/R);for(let T=0;T<N&&(P=Math.abs(g)>w,!(!P&&(h=Math.abs(d-f)<=y,h)));++T){k&&(E=f==d||f>d==A,E&&(g=-g*x,f=d));const B=-s.tension*1e-6*(f-d),I=-s.friction*.001*g,_=(B+I)/s.mass;g=g+_*R,f=f+g*R}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=m+s.easing(w)*(d-m),g=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=g,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=tr(this),l=a.getValue();if(e){const u=An(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ae.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ms(this)){const{to:t,config:e}=this.animation;Ae.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return W.und(t)?(n=this.queue||[],this.queue=[]):n=[W.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>s1(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Wc(this._state,t&&this._lastCallId),Ae.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=W.obj(n)?n[e]:n,(n==null||Qy(n))&&(n=void 0),i=W.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return $g(this)||(t.reverse&&([n,i]=[i,n]),i=An(i),W.und(i)?tr(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,i1(t,(o,a)=>/^on/.test(a)?PR(o,n):o)),HS(this,t,"onProps"),gu(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return TR(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{pu(this)||(US(this,!0),$u(s.pauseQueue),gu(this,"onPause",Di(this,mu(this,this.animation.to)),this))},resume:()=>{pu(this)&&(US(this,!1),ms(this)&&this._resume(),$u(s.resumeQueue),gu(this,"onResume",Di(this,mu(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=MR(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(ll(this));const i=!W.und(t.to),r=!W.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(ll(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;r&&!i&&(!e.default||W.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!Tr(d,u);h&&(a.from=d),d=An(d);const f=!Tr(c,l);f&&this._focus(c);const p=Qy(e.to),{config:m}=a,{decay:v,velocity:g}=m;(i||r)&&(m.velocity=0),e.config&&!p&&AB(m,Pn(e.config,s),e.config!==o.config?Pn(o.config,s):void 0);let y=tr(this);if(!y||W.und(c))return n(Di(this,!0));const w=W.und(e.reset)?r&&!e.default:!W.und(d)&&qu(e.reset,s),x=w?d:this.get(),k=Uc(c),A=W.num(k)||W.arr(k)||sm(k),P=!p&&(!A||qu(o.immediate||e.immediate,s));if(f){const T=qy(c);if(T!==y.constructor)if(P)y=this._set(k);else throw Error(`Cannot animate between ${y.constructor.name} and ${T.name}, as the "to" prop suggests`)}const E=y.constructor;let R=pi(c),N=!1;if(!R){const T=w||!$g(this)&&h;(f||T)&&(N=Tr(Uc(x),k),R=!N),(!Tr(a.immediate,P)&&!P||!Tr(m.decay,v)||!Tr(m.velocity,g))&&(R=!0)}if(N&&ms(this)&&(a.changed&&!w?R=!0:R||this._stop(l)),!p&&((R||pi(l))&&(a.values=y.getPayload(),a.toValues=pi(c)?null:E==Vc?[1]:gn(k)),a.immediate!=P&&(a.immediate=P,!P&&!w&&this._set(l)),R)){const{onRest:T}=a;Te(TB,I=>HS(this,e,I));const B=Di(this,mu(this,l));$u(this._pendingCalls,B),this._pendingCalls.add(n),a.changed&&Ae.batchedUpdates(()=>{var I;a.changed=!w,T==null||T(B,this),w?Pn(o.onRest,B):(I=a.onStart)==null||I.call(a,B,this)})}w&&this._set(x),p?n(_R(e.to,e,this._state,this)):R?this._start():ms(this)&&!f?this._pendingCalls.add(n):n(OR(x))}_focus(t){const e=this.animation;t!==e.to&&(NS(this)&&this._detach(),e.to=t,NS(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;pi(e)&&(Yl(e,this),tv(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;pi(t)&&Fc(t,this)}_set(t,e=!0){const n=An(t);if(!W.und(n)){const i=tr(this);if(!i||!Tr(n,i.getValue())){const r=qy(n);!i||i.constructor!=r?n1(this,r.create(n)):i.setValue(n),i&&Ae.batchedUpdates(()=>{this._onChange(n,e)})}}return tr(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,gu(this,"onStart",Di(this,mu(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Pn(this.animation.onChange,t,this)),Pn(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;tr(this).reset(An(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),ms(this)||(VS(this,!0),pu(this)||this._resume())}_resume(){Gi.skipAnimation?this.finish():nm.start(this)}_stop(t,e){if(ms(this)){VS(this,!1);const n=this.animation;Te(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),zc(this,{type:"idle",parent:this});const i=e?ll(this.get()):Di(this.get(),mu(this,t??n.to));$u(this._pendingCalls,i),n.changed&&(n.changed=!1,gu(this,"onRest",i,this))}}};function mu(t,e){const n=Uc(e),i=Uc(t.get());return Tr(i,n)}function MR(t,e=t.loop,n=t.to){const i=Pn(e);if(i){const r=i!==!0&&r1(i),s=(r||t).reverse,o=!r||r.reset;return ep({...t,loop:e,default:!1,pause:void 0,to:!s||Qy(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function ep(t){const{to:e,from:n}=t=r1(t),i=new Set;return W.obj(e)&&WS(e,i),W.obj(n)&&WS(n,i),t.keys=i.size?Array.from(i):null,t}function WS(t,e){Er(t,(n,i)=>n!=null&&e.add(i))}var TB=["onStart","onRest","onChange","onPause","onResume"];function HS(t,e,n){t.animation[n]=e[n]!==RR(e,n)?PR(e[n],t.key):void 0}function gu(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var OB=["onStart","onChange","onRest"],_B=1,NB=class{constructor(t,e){this.id=_B++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];W.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(ep(t)),this}start(t){let{queue:e}=this;return t?e=gn(t).map(ep):this.queue=[],this._flush?this._flush(this,e):(IR(this,e),MB(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;Te(gn(e),i=>n[i].stop(!!t))}else Wc(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(W.und(t))this.start({pause:!0});else{const e=this.springs;Te(gn(t),n=>e[n].pause())}return this}resume(t){if(W.und(t))this.start({pause:!1});else{const e=this.springs;Te(gn(t),n=>e[n].resume())}return this}each(t){Er(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Yu(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&Yu(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Yu(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Ae.onFrame(this._onFrame)}};function MB(t,e){return Promise.all(e.map(n=>DR(t,n))).then(n=>s1(t,n))}async function DR(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,u=W.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const c=W.arr(r)||W.fun(r)?r:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):Te(OB,m=>{const v=e[m];if(W.fun(v)){const g=t._events[m];e[m]=({finished:y,cancelled:w})=>{const x=g.get(v);x?(y||(x.finished=!1),w&&(x.cancelled=!0)):g.set(v,{value:null,finished:y||!1,cancelled:w||!1})},u&&(u[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,$u(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),f=e.cancel===!0||RR(e,"cancel")===!0;(c||f&&d.asyncId)&&h.push(TR(++t._lastAsyncId,{props:e,state:d,actions:{pause:Yy,resume:Yy,start(m,v){f?(Wc(d,t._lastAsyncId),v(ll(t))):(m.onRest=a,v(_R(c,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const p=s1(t,await Promise.all(h));if(o&&p.finished&&!(n&&p.noop)){const m=MR(e,o,r);if(m)return IR(t,[m]),DR(t,m,!0)}return l&&Ae.batchedUpdates(()=>l(p,t,t.item)),p}function DB(t,e){const n={...t.springs};return e&&Te(gn(e),i=>{W.und(i.keys)&&(i=ep(i)),W.obj(i.to)||(i={...i,to:void 0}),LR(n,i,r=>$R(r))}),$B(t,n),n}function $B(t,e){Er(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,Yl(n,t))})}function $R(t,e){const n=new ut;return n.key=t,e&&Yl(n,e),n}function LR(t,e,n){e.keys&&Te(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function IR(t,e){Te(e,n=>{LR(t.springs,n,i=>$R(i,t))})}var lm=({children:t,...e})=>{const n=b.useContext(tp),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=lB(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=tp;return b.createElement(s,{value:e},t)},tp=LB(lm,{});lm.Provider=tp.Provider;lm.Consumer=tp.Consumer;function LB(t,e){return Object.assign(t,b.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var IB=()=>{const t=[],e=function(i){oB();const r=[];return Te(t,(s,o)=>{if(W.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return Te(t,i=>i.pause(...arguments)),this},e.resume=function(){return Te(t,i=>i.resume(...arguments)),this},e.set=function(i){Te(t,(r,s)=>{const o=W.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return Te(t,(s,o)=>{if(W.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return Te(t,i=>i.stop(...arguments)),this},e.update=function(i){return Te(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return W.fun(i)?i(s,r):i};return e._getProps=n,e};function BB(t,e,n){const i=W.fun(e)&&e,{reset:r,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:u,ref:c,config:d}=i?i():e,h=b.useMemo(()=>i||arguments.length==3?IB():void 0,[]),f=gn(t),p=[],m=b.useRef(null),v=r?null:m.current;Xa(()=>{m.current=p}),ER(()=>(Te(p,_=>{h==null||h.add(_.ctrl),_.ctrl.ref=h}),()=>{Te(m.current,_=>{_.expired&&clearTimeout(_.expirationId),IS(_.ctrl,h),_.ctrl.stop(!0)})}));const g=FB(f,i?i():e,v),y=r&&m.current||[];Xa(()=>Te(y,({ctrl:_,item:D,key:z})=>{IS(_,h),Pn(u,D,z)}));const w=[];if(v&&Te(v,(_,D)=>{_.expired?(clearTimeout(_.expirationId),y.push(_)):(D=w[D]=g.indexOf(_.key),~D&&(p[D]=_))}),Te(f,(_,D)=>{p[D]||(p[D]={key:g[D],item:_,phase:"mount",ctrl:new NB},p[D].ctrl.item=_)}),w.length){let _=-1;const{leave:D}=i?i():e;Te(w,(z,L)=>{const O=v[L];~z?(_=p.indexOf(O),p[_]={...O,item:f[z]}):D&&p.splice(++_,0,O)})}W.fun(s)&&p.sort((_,D)=>s(_.item,D.item));let x=-o;const k=kR(),A=i1(e),P=new Map,E=b.useRef(new Map),R=b.useRef(!1);Te(p,(_,D)=>{const z=_.key,L=_.phase,O=i?i():e;let $,F;const Y=Pn(O.delay||0,z);if(L=="mount")$=O.enter,F="enter";else{const be=g.indexOf(z)<0;if(L!="leave")if(be)$=O.leave,F="leave";else if($=O.update)F="update";else return;else if(!be)$=O.enter,F="enter";else return}if($=Pn($,_.item,D),$=W.obj($)?r1($):{to:$},!$.config){const be=d||A.config;$.config=Pn(be,_.item,D,F)}x+=o;const ie={...A,delay:Y+x,ref:c,immediate:O.immediate,reset:!1,...$};if(F=="enter"&&W.und(ie.from)){const be=i?i():e,we=W.und(be.initial)||v?be.from:be.initial;ie.from=Pn(we,_.item,D)}const{onResolve:ce}=ie;ie.onResolve=be=>{Pn(ce,be);const we=m.current,Q=we.find(ge=>ge.key===z);if(Q&&!(be.cancelled&&Q.phase!="update")&&Q.ctrl.idle){const ge=we.every(_e=>_e.ctrl.idle);if(Q.phase=="leave"){const _e=Pn(a,Q.item);if(_e!==!1){const ke=_e===!0?0:_e;if(Q.expired=!0,!ge&&ke>0){ke<=2147483647&&(Q.expirationId=setTimeout(k,ke));return}}}ge&&we.some(_e=>_e.expired)&&(E.current.delete(Q),l&&(R.current=!0),k())}};const ve=DB(_.ctrl,ie);F==="leave"&&l?E.current.set(_,{phase:F,springs:ve,payload:ie}):P.set(_,{phase:F,springs:ve,payload:ie})});const N=b.useContext(lm),T=dB(N),B=N!==T&&SB(N);Xa(()=>{B&&Te(p,_=>{_.ctrl.start({default:N})})},[N]),Te(P,(_,D)=>{if(E.current.size){const z=p.findIndex(L=>L.key===D.key);p.splice(z,1)}}),Xa(()=>{Te(E.current.size?E.current:P,({phase:_,payload:D},z)=>{const{ctrl:L}=z;z.phase=_,h==null||h.add(L),B&&_=="enter"&&L.start({default:N}),D&&(kB(L,D.ref),(L.ref||h)&&!R.current?L.update(D):(L.start(D),R.current&&(R.current=!1)))})},r?void 0:n);const I=_=>b.createElement(b.Fragment,null,p.map((D,z)=>{const{springs:L}=P.get(D)||D.ctrl,O=_({...L},D.item,D,z);return O&&O.type?b.createElement(O.type,{...O.props,key:W.str(D.key)||W.num(D.key)?D.key:D.ctrl.id,ref:O.ref}):O}));return h?[I,h]:I}var zB=1;function FB(t,{key:e,keys:n=e},i){if(n===null){const r=new Set;return t.map(s=>{const o=i&&i.find(a=>a.item===s&&a.phase!=="leave"&&!r.has(a));return o?(r.add(o),o.key):zB++})}return W.und(n)?t:W.fun(n)?t.map(n):gn(n)}var jB=class extends o1{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Ic(...e);const n=this._get(),i=qy(n);n1(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Tr(e,n)||(tr(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&GS(this._active)&&Lg(this)}_get(){const t=W.arr(this.source)?this.source.map(An):gn(An(this.source));return this.calc(...t)}_start(){this.idle&&!GS(this._active)&&(this.idle=!1,Te(om(this),t=>{t.done=!1}),Gi.skipAnimation?(Ae.batchedUpdates(()=>this.advance()),Lg(this)):nm.start(this))}_attach(){let t=1;Te(gn(this.source),e=>{pi(e)&&Yl(e,this),tv(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Te(gn(this.source),t=>{pi(t)&&Fc(t,this)}),this._active.clear(),Lg(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=gn(this.source).reduce((e,n)=>Math.max(e,(tv(n)?n.priority:0)+1),0))}};function VB(t){return t.idle!==!1}function GS(t){return!t.size||Array.from(t).every(VB)}function Lg(t){t.idle||(t.idle=!0,Te(om(t),e=>{e.done=!0}),zc(t,{type:"idle",parent:t}))}Gi.assign({createStringInterpolator:bR,to:(t,e)=>new jB(t,e)});var BR=/^--/;function UB(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!BR.test(t)&&!(Qu.hasOwnProperty(t)&&Qu[t])?e+"px":(""+e).trim()}var XS={};function WB(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,u=Object.values(l),c=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:XS[d]||(XS[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in i)if(i.hasOwnProperty(d)){const h=UB(d,i[d]);BR.test(d)?t.style.setProperty(d,h):t.style[d]=h}c.forEach((d,h)=>{t.setAttribute(d,u[h])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var Qu={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HB=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),GB=["Webkit","Ms","Moz","O"];Qu=Object.keys(Qu).reduce((t,e)=>(GB.forEach(n=>t[HB(n,e)]=t[e]),t),Qu);var XB=/^(matrix|translate|scale|rotate|skew)/,KB=/^(translate)/,ZB=/^(rotate|skew)/,Ig=(t,e)=>W.num(t)&&t!==0?t+e:t,Gh=(t,e)=>W.arr(t)?t.every(n=>Gh(n,e)):W.num(t)?t===e:parseFloat(t)===e,YB=class extends am{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Ig(a,"px")).join(",")})`,Gh(o,0)])),Er(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(XB.test(a)){if(delete i[a],W.und(o))return;const l=KB.test(a)?"px":ZB.test(a)?"deg":"";r.push(gn(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${Ig(h,l)})`,Gh(h,0)]:u=>[`${a}(${u.map(c=>Ig(c,l)).join(",")})`,Gh(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new JB(r,s)),super(i)}},JB=class extends vR{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Te(this.inputs,(n,i)=>{const r=An(n[0]),[s,o]=this.transforms[i](W.arr(r)?r:n.map(An));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Te(this.inputs,e=>Te(e,n=>pi(n)&&Yl(n,this)))}observerRemoved(t){t==0&&Te(this.inputs,e=>Te(e,n=>pi(n)&&Fc(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),zc(this,t)}},qB=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Gi.assign({batchedUpdates:ua.unstable_batchedUpdates,createStringInterpolator:bR,colors:B4});var QB=yB(qB,{applyAnimatedValues:WB,createAnimatedStyle:t=>new YB(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Pt=QB.animated;const xt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"}},We=(t=xt.stone[800])=>({backgroundColor:new ut(t),opacity:new ut(1)}),Ai=()=>({strokeDashoffset:new ut(1),opacity:new ut(1)}),a1={bus:{address:{stroke:new ut(xt.stone[700])},data:{stroke:new ut(xt.stone[700])},rd:{stroke:new ut(xt.stone[700])},wr:{stroke:new ut(xt.stone[700])},iom:Ai(),mem:{stroke:new ut(xt.red[500])},pic:Ai(),timer:Ai(),intr:Ai(),inta:Ai(),int0:Ai(),int1:Ai(),int2:Ai()},clock:{angle:new ut(0)},cpu:{internalBus:{address:{strokeDashoffset:new ut(1),opacity:new ut(1),path:new ut("")},data:{strokeDashoffset:new ut(1),opacity:new ut(1),path:new ut("")}},alu:{operands:Ai(),results:Ai(),cog:{rot:new ut(0)},operation:{backgroundColor:new ut(xt.stone[800])}},decoder:{path:Ai(),progress:{progress:new ut(0),opacity:new ut(1)}},AX:We(),BX:We(),CX:We(),DX:We(),SP:We(),IP:We(),IR:We(),ri:We(),id:We(),left:We(),right:We(),result:We(),FLAGS:We(),MAR:We(),MBR:We()},pic:{IMR:We(),IRR:We(),ISR:We(),INT0:We(),INT1:We(),INT2:We(),INT3:We(),INT4:We(),INT5:We(),INT6:We(),INT7:We()},timer:{CONT:We(),COMP:We()}};function ht(t){return g2(a1,t)}function zR(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof ut?e[n]=i.get():e[n]=zR(i)}return e}const e8=zR(a1);function FR(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof ut?i.set(e[n]):FR(t[n],e[n])}}const t8=()=>FR(a1,e8),np=new Set;async function Xe(t,e){Array.isArray(t)||(t=[t]);const n={duration:os().executionUnit*e.duration,easing:e1[e.easing]};return await Promise.all(t.map(async({key:i,from:r,to:s})=>{if(s===void 0&&r===void 0)return null;const o=ht(i);if(s===void 0)return o.set(r);{np.add(i);const a=await ht(i).start({from:r,to:s,config:n});return np.delete(i),a}}))}const n8=()=>np.forEach(t=>ht(t).resume());function i8(){np.clear(),t8()}async function nr(t,e=xt.mantis[400]){return await Xe({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function ir(t){return await Xe({key:`${t}.backgroundColor`,to:xt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function ip(t){await Xe({key:"bus.data.stroke",to:xt.mantis[400]},{duration:5,easing:"easeOutSine"}),await nr("cpu.MBR"),G.set(Dl,t),await ir("cpu.MBR")}async function Ll(t,e){return await Xe([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function Il(t){return await Xe({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}const l1=de(M.zero(8)),u1=de(M.zero(8));function r8(t){G.set(l1,M.fromUnsigned(t.io.timer.CONT,8)),G.set(u1,M.fromUnsigned(t.io.timer.COMP,8))}const jR=de(M.fromUnsigned(0,8)),VR=de(M.fromUnsigned(1,8));function s8(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{G.set(Dl,t.value);return}case"handshake:write":case"handshake:register.update":switch(t.register){case"DATA":{G.set(jR,t.value);return}case"STATE":{G.set(VR,t.value);return}default:return t.register}case"handshake:write.ok":return;case"handshake:interrupt":return;default:return t}}const UR=de(M.zero(8));function o8(t){switch(t.type){case"leds:update":{G.set(UR,t.state);return}default:return t}}const WR=de(M.zero(8)),HR=de(M.zero(8)),GR=de(M.zero(8)),XR=de(M.zero(8));function a8(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{G.set(Dl,t.value);return}case"pio:write":case"pio:register.update":switch(t.register){case"PA":{G.set(WR,t.value);return}case"PB":{G.set(HR,t.value);return}case"CA":{G.set(GR,t.value);return}case"CB":{G.set(XR,t.value);return}default:return t.register}case"pio:write.ok":return;default:return t}}const rv=de([]),sv=de("");function l8(t){switch(t.type){case"printer:buffer.add":{G.set(rv,e=>[...e,t.char]);return}case"printer:buffer.pop":{G.set(rv,e=>e.slice(1));return}case"printer:busy.off":return;case"printer:busy.on":return;case"printer:data.read":return;case"printer:paper.print":{const e=jn.getComputerState().io;"printer"in e&&G.set(sv,e.printer.paper);return}case"printer:paper.replace":{G.set(sv,"");return}case"printer:strobe.off":return;case"printer:strobe.on":return;default:return t}}const KR=de(M.zero(8));function u8(t){switch(t.type){case"switches:toggle":{G.set(KR,e=>e.withBit(t.index,!e.bit(t.index)));return}default:return t}}async function c8(t){switch(t.type){case"bus:io.selected":{await Promise.all([Xe({key:"bus.mem.stroke",to:xt.stone[700]},{duration:1,easing:"easeInSine"}),Ll(`bus.${t.chip}`,15)]);return}case"bus:io.error":{ra(t.error);return}case"bus:reset":{await Promise.all([Xe([{key:"bus.address.stroke",to:xt.stone[700]},{key:"bus.data.stroke",to:xt.stone[700]},{key:"bus.rd.stroke",to:xt.stone[700]},{key:"bus.wr.stroke",to:xt.stone[700]}],{duration:1,easing:"easeInSine"}),Xe({key:"bus.mem.stroke",to:xt.red[500]},{duration:1,easing:"easeOutSine"}),Il("bus.iom"),Il("bus.pic")]);return}default:return t}}async function d8(t){switch(t.type){case"clock:tick":return;default:return t.type}}function h8(t){switch(t){case"IP":return"M 551 309 H 575 V 349 H 598";case"SP":return"M 551 349 H 598";case"ri":return"M 544 388 H 575 V 349 H 598";default:throw new Error(`Invalid register ${t}`)}}function f8(){const{path:t,...e}=ht("cpu.internalBus.address");return C.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[C.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598"].join(" ")}),C.jsx(Pt.path,{d:t,className:"fill-none stroke-blue-500 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var c1={exports:{}},ul=typeof Reflect=="object"?Reflect:null,KS=ul&&typeof ul.apply=="function"?ul.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},Xh;ul&&typeof ul.ownKeys=="function"?Xh=ul.ownKeys:Object.getOwnPropertySymbols?Xh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Xh=function(e){return Object.getOwnPropertyNames(e)};function p8(t){console&&console.warn&&console.warn(t)}var ZR=Number.isNaN||function(e){return e!==e};function He(){He.init.call(this)}c1.exports=He;c1.exports.once=v8;He.EventEmitter=He;He.prototype._events=void 0;He.prototype._eventsCount=0;He.prototype._maxListeners=void 0;var ZS=10;function um(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(He,"defaultMaxListeners",{enumerable:!0,get:function(){return ZS},set:function(t){if(typeof t!="number"||t<0||ZR(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ZS=t}});He.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};He.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ZR(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function YR(t){return t._maxListeners===void 0?He.defaultMaxListeners:t._maxListeners}He.prototype.getMaxListeners=function(){return YR(this)};He.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")KS(l,this,n);else for(var u=l.length,c=tT(l,u),i=0;i<u;++i)KS(c[i],this,n);return!0};function JR(t,e,n,i){var r,s,o;if(um(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=YR(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,p8(a)}return t}He.prototype.addListener=function(e,n){return JR(this,e,n,!1)};He.prototype.on=He.prototype.addListener;He.prototype.prependListener=function(e,n){return JR(this,e,n,!0)};function m8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qR(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=m8.bind(i);return r.listener=n,i.wrapFn=r,r}He.prototype.once=function(e,n){return um(n),this.on(e,qR(this,e,n)),this};He.prototype.prependOnceListener=function(e,n){return um(n),this.prependListener(e,qR(this,e,n)),this};He.prototype.removeListener=function(e,n){var i,r,s,o,a;if(um(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():g8(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};He.prototype.off=He.prototype.removeListener;He.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function QR(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?y8(r):tT(r,r.length)}He.prototype.listeners=function(e){return QR(this,e,!0)};He.prototype.rawListeners=function(e){return QR(this,e,!1)};He.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):eT.call(t,e)};He.prototype.listenerCount=eT;function eT(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}He.prototype.eventNames=function(){return this._eventsCount>0?Xh(this._events):[]};function tT(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function g8(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function y8(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function v8(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}nT(t,e,s,{once:!0}),e!=="error"&&w8(t,r,{once:!0})})}function w8(t,e,n){typeof t.on=="function"&&nT(t,"error",e,n)}function nT(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var x8=c1.exports;function Cr(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Cr.prototype[Symbol.iterator]=function(){return this});Cr.of=function(){var t=arguments,e=t.length,n=0;return new Cr(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Cr.empty=function(){var t=new Cr(function(){return{done:!0}});return t};Cr.fromSequence=function(t){var e=0,n=t.length;return new Cr(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Cr.is=function(t){return t instanceof Cr?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var cm=Cr;const Ei=qc(cm);var dm={};dm.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";dm.SYMBOL_SUPPORT=typeof Symbol<"u";var b8=cm,iT=dm,S8=iT.ARRAY_BUFFER_SUPPORT,k8=iT.SYMBOL_SUPPORT;function E8(t){return typeof t=="string"||Array.isArray(t)||S8&&ArrayBuffer.isView(t)?b8.fromSequence(t):typeof t!="object"||t===null?null:k8&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var rT=function(e){var n=E8(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},C8=rT,A8=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=C8(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const sT=qc(A8);var P8=cm,R8=rT,T8=function(){var e=arguments,n=null,i=-1;return new P8(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=R8(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Zr=qc(T8);function O8(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let Dt=O8;typeof Object.assign=="function"&&(Dt=Object.assign);function bi(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Gt(t){return typeof t=="object"&&t!==null}function oT(t){let e;for(e in t)return!1;return!0}function oi(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Pi(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function YS(t){return!(!Gt(t)||t.attributes&&!Array.isArray(t.attributes))}function _8(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class d1 extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ee extends d1{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ee.prototype.constructor)}}class X extends d1{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,X.prototype.constructor)}}class me extends d1{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,me.prototype.constructor)}}function aT(t,e){this.key=t,this.attributes=e,this.clear()}aT.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function lT(t,e){this.key=t,this.attributes=e,this.clear()}lT.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function uT(t,e){this.key=t,this.attributes=e,this.clear()}uT.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Jl(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Jl.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Jl.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};Jl.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Jl.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const cT=0,dT=1,N8=2,hT=3;function fs(t,e,n,i,r,s,o){let a,l,u,c;if(i=""+i,n===cT){if(a=t._nodes.get(i),!a)throw new X(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===hT){if(r=""+r,l=t._edges.get(r),!l)throw new X(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new X(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(i),!l)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===dT?a=l.source:a=l.target,u=r,c=s}return[a,u,c]}function M8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fs(this,e,n,i,r,s);return o.attributes[a]}}function D8(t,e,n){t.prototype[e]=function(i,r){const[s]=fs(this,e,n,i,r);return s.attributes}}function $8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fs(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function L8(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=fs(this,e,n,i,r,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function I8(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=fs(this,e,n,i,r,s,o);if(typeof u!="function")throw new ee(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function B8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fs(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function z8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fs(this,e,n,i,r,s);if(!Gt(a))throw new ee(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function F8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fs(this,e,n,i,r,s);if(!Gt(a))throw new ee(`Graph.${e}: provided attributes are not a plain object.`);return Dt(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function j8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fs(this,e,n,i,r,s);if(typeof a!="function")throw new ee(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const V8=[{name:t=>`get${t}Attribute`,attacher:M8},{name:t=>`get${t}Attributes`,attacher:D8},{name:t=>`has${t}Attribute`,attacher:$8},{name:t=>`set${t}Attribute`,attacher:L8},{name:t=>`update${t}Attribute`,attacher:I8},{name:t=>`remove${t}Attribute`,attacher:B8},{name:t=>`replace${t}Attributes`,attacher:z8},{name:t=>`merge${t}Attributes`,attacher:F8},{name:t=>`update${t}Attributes`,attacher:j8}];function U8(t){V8.forEach(function({name:e,attacher:n}){n(t,e("Node"),cT),n(t,e("Source"),dT),n(t,e("Target"),N8),n(t,e("Opposite"),hT)})}function W8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=bi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function H8(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=bi(this,s,o,n),!r)throw new X(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function G8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=bi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function X8(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=bi(this,a,l,n),!o)throw new X(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function K8(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=bi(this,a,l,n),!o)throw new X(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new ee(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Z8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=bi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function Y8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=bi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Gt(r))throw new ee(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function J8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=bi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Gt(r))throw new ee(`Graph.${e}: provided attributes are not a plain object.`);return Dt(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function q8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=bi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new ee(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Q8=[{name:t=>`get${t}Attribute`,attacher:W8},{name:t=>`get${t}Attributes`,attacher:H8},{name:t=>`has${t}Attribute`,attacher:G8},{name:t=>`set${t}Attribute`,attacher:X8},{name:t=>`update${t}Attribute`,attacher:K8},{name:t=>`remove${t}Attribute`,attacher:Z8},{name:t=>`replace${t}Attributes`,attacher:Y8},{name:t=>`merge${t}Attributes`,attacher:J8},{name:t=>`update${t}Attributes`,attacher:q8}];function ez(t){Q8.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const tz=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function nz(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function iz(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Bg(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Ei(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function rz(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function sz(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function zg(t,e){let n=t[e];return n.next!==void 0?new Ei(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Ei.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function oz(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):sT(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function fT(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=i(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function az(t,e){if(t.size===0)return Ei.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Ei(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function h1(t,e,n,i,r,s){const o=e?iz:nz;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function lz(t,e,n,i){const r=[];return h1(!1,t,e,n,i,function(s){r.push(s)}),r}function uz(t,e,n){let i=Ei.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Zr(i,Bg(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Zr(i,Bg(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Zr(i,Bg(n.undirected))),i}function f1(t,e,n,i,r,s,o){const a=n?sz:rz;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function cz(t,e,n,i,r){const s=[];return f1(!1,t,e,n,i,r,function(o){s.push(o)}),s}function dz(t,e,n,i){let r=Ei.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Zr(r,zg(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Zr(r,zg(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Zr(r,zg(n.undirected,i))),r}function hz(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return oz(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new X(`Graph.${n}: could not find the "${s}" node in the graph.`);return lz(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new X(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new X(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return cz(i,this.multi,r,a,o)}throw new ee(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function fz(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,fT(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new X(`Graph.${s}: could not find the "${u}" node in the graph.`);return h1(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new X(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new X(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return f1(!1,i,this.multi,r,h,c,d)}throw new ee(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,m,v,g,y,w,x)=>{d[f++]=c(p,m,v,g,y,w,x)})}else d=[],u.push((h,f,p,m,v,g,y)=>{d.push(c(h,f,p,m,v,g,y))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,m,v,g,y)=>{c(h,f,p,m,v,g,y)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new ee(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new ee(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,m,v,g,y,w)=>{h=c(h,f,p,m,v,g,y,w)}),this[s].apply(this,u),h}}function pz(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=l,fT(!0,this,i,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new X(`Graph.${s}: could not find the "${l}" node in the graph.`);return h1(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new X(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new X(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return f1(!0,i,this.multi,r,d,u,c)}throw new ee(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,m,v,g)=>u(d,h,f,p,m,v,g)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,m,v,g)=>!u(d,h,f,p,m,v,g)),!this[s].apply(this,l)}}function mz(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Ei.empty();if(!arguments.length)return az(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new X(`Graph.${s}: could not find the "${o}" node in the graph.`);return uz(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new X(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new X(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return dz(i,r,l,a)}throw new ee(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function gz(t){tz.forEach(e=>{hz(t,e),fz(t,e),pz(t,e),mz(t,e)})}const yz=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function hm(){this.A=null,this.B=null}hm.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};hm.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function yu(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function p1(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return yu(t,null,i,i.undirected,r);if(typeof n=="string")return yu(t,null,i,i[n],r)}const s=new hm;let o;if(e!=="undirected"){if(n!=="out"){if(o=yu(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=yu(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=yu(t,s,i,i.undirected,r),t&&o))return o}function vz(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return p1(!1,t,e,n,function(r){i.push(r)}),i}function vu(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Ei(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function wz(t,e,n){if(t!=="mixed"){if(t==="undirected")return vu(null,n,n.undirected);if(typeof e=="string")return vu(null,n,n[e])}let i=Ei.empty();const r=new hm;return t!=="undirected"&&(e!=="out"&&(i=Zr(i,vu(r,n,n.in))),e!=="in"&&(i=Zr(i,vu(r,n,n.out)))),t!=="directed"&&(i=Zr(i,vu(r,n,n.undirected))),i}function xz(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new X(`Graph.${n}: could not find the "${s}" node in the graph.`);return vz(i==="mixed"?this.type:i,r,o)}}function bz(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new X(`Graph.${s}: could not find the "${u}" node in the graph.`);p1(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new ee(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function Sz(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new X(`Graph.${o}: could not find the "${u}" node in the graph.`);return p1(!0,i==="mixed"?this.type:i,r,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function kz(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Ei.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new X(`Graph.${s}: could not find the "${o}" node in the graph.`);return wz(i==="mixed"?this.type:i,r,a)}}function Ez(t){yz.forEach(e=>{xz(t,e),bz(t,e),Sz(t,e),kz(t,e)})}function th(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,u,c,d,h,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do{if(h=d.target,p=!0,f=r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do{if(h=d.target,h.key!==u&&(h=d.source),p=!0,f=r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(n&&!p&&(f=r(l.key,null,l.attributes,null,null,null,null),t&&f))return null}}function Cz(t,e){const n={key:t};return oT(e.attributes)||(n.attributes=Dt({},e.attributes)),n}function Az(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return oT(n.attributes)||(i.attributes=Dt({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function Pz(t){if(!Gt(t))throw new ee('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ee("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Gt(t.attributes)||t.attributes===null))throw new ee("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Rz(t){if(!Gt(t))throw new ee('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ee("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ee("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Gt(t.attributes)||t.attributes===null))throw new ee("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ee("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Tz=_8(),Oz=new Set(["directed","undirected","mixed"]),JS=new Set(["domain","_events","_eventsCount","_maxListeners"]),_z=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Nz={allowSelfLoops:!0,multi:!1,type:"mixed"};function Mz(t,e,n){if(n&&!Gt(n))throw new ee(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new me(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function qS(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function pT(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new me(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new me(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Gt(a))throw new ee(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new me(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new X(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new X(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new me(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new me(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Jl(i,r,l,u,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function Dz(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new me(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new me(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ee(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Gt(a))throw new ee(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new me(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new me(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!u:!a)return y;if(l){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Dt(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new me(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,v=!1;c||(c=qS(t,s,{}),m=!0,s===o&&(d=c,v=!0)),d||(d=qS(t,o,{}),v=!0),h=new Jl(i,r,c,d,a),t._edges.set(r,h);const g=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,g&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,g&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,m,v]}function xa(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Ze extends x8.EventEmitter{constructor(e){if(super(),e=Dt({},Nz,e),typeof e.multi!="boolean")throw new ee(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Oz.has(e.type))throw new ee(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ee(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?aT:e.type==="directed"?lT:uT;oi(this,"NodeDataClass",n);const i="geid_"+Tz()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};oi(this,"_attributes",{}),oi(this,"_nodes",new Map),oi(this,"_edges",new Map),oi(this,"_directedSize",0),oi(this,"_undirectedSize",0),oi(this,"_directedSelfLoopCount",0),oi(this,"_undirectedSelfLoopCount",0),oi(this,"_edgeKeyGenerator",s),oi(this,"_options",e),JS.forEach(o=>oi(this,o,this[o])),Pi(this,"order",()=>this._nodes.size),Pi(this,"size",()=>this._edges.size),Pi(this,"directedSize",()=>this._directedSize),Pi(this,"undirectedSize",()=>this._undirectedSize),Pi(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Pi(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Pi(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Pi(this,"multi",this._options.multi),Pi(this,"type",this._options.type),Pi(this,"allowSelfLoops",this._options.allowSelfLoops),Pi(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new ee(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new ee(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new ee(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new me("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new X(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new me("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new X(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new me("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new X(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new X(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new X(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Mz(this,e,n).key}mergeNode(e,n){if(n&&!Gt(n))throw new ee(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(Dt(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ee(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do xa(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do xa(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do xa(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=bi(this,i,r,this.type),!n)throw new X(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new X(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return xa(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new me("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new me("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=bi(this,e,n,"directed");if(!i)throw new X(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return xa(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new me("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new me("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=bi(this,e,n,"undirected");if(!i)throw new X(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return xa(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ee("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Gt(e))throw new ee("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Gt(e))throw new ee("Graph.mergeAttributes: provided attributes are not a plain object.");return Dt(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ee("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ee("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!YS(n))throw new ee("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ee("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!YS(n))throw new ee("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ee("Graph.forEachAdjacencyEntry: expecting a callback.");th(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ee("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");th(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ee("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");th(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ee("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");th(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):sT(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ee("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new ee("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new ee("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new ee("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ee("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ee("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ee("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ee("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Ei(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Cz(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=Az(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Ze)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!Gt(e))throw new ee("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Gt(e.attributes))throw new ee("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ee("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],Pz(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ee("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Rz(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new Ze(Dt({},this._options,e));return n.replaceAttributes(Dt({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Dt({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new me(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new me("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new me("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,pT(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Dt({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!JS.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,oi(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Ze.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ze.prototype.inspect);_z.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?pT:Dz;t.generateKey?Ze.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Ze.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});U8(Ze);ez(Ze);gz(Ze);Ez(Ze);class mT extends Ze{constructor(e){const n=Dt({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ee("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ee('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class m1 extends Ze{constructor(e){const n=Dt({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ee("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ee('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class gT extends Ze{constructor(e){const n=Dt({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ee("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class yT extends Ze{constructor(e){const n=Dt({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ee("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ee('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class vT extends Ze{constructor(e){const n=Dt({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ee("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ee('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function ql(t){t.from=function(e,n){const i=Dt({},e.options,n),r=new t(i);return r.import(e),r}}ql(Ze);ql(mT);ql(m1);ql(gT);ql(yT);ql(vT);Ze.Graph=Ze;Ze.DirectedGraph=mT;Ze.UndirectedGraph=m1;Ze.MultiGraph=gT;Ze.MultiDirectedGraph=yT;Ze.MultiUndirectedGraph=vT;Ze.InvalidArgumentsGraphError=ee;Ze.NotFoundGraphError=X;Ze.UsageGraphError=me;var $z=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},wT=dm,Lz=wT.ARRAY_BUFFER_SUPPORT,Iz=wT.SYMBOL_SUPPORT,Bz=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Lz&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(Iz&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},xT=cm,zz=Bz;function Ot(){this.clear()}Ot.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Ot.prototype.enqueue=function(t){return this.items.push(t),++this.size};Ot.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};Ot.prototype.peek=function(){if(this.size)return this.items[this.offset]};Ot.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};Ot.prototype.toArray=function(){return this.items.slice(this.offset)};Ot.prototype.values=function(){var t=this.items,e=this.offset;return new xT(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};Ot.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new xT(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(Ot.prototype[Symbol.iterator]=Ot.prototype.values);Ot.prototype.toString=function(){return this.toArray().join(",")};Ot.prototype.toJSON=function(){return this.toArray()};Ot.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Ot,enumerable:!1}),t};typeof Symbol<"u"&&(Ot.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ot.prototype.inspect);Ot.from=function(t){var e=new Ot;return zz(t,function(n){e.enqueue(n)}),e};Ot.of=function(){return Ot.from(arguments)};var Fz=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},bT=$z,jz=Fz;function Vz(t,e,n){if(!bT(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,m,v,g=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,m=u.length;f<m;f++)for(c=u[f],d=r(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){g=!0;break e}}else for(u=l,l=[],f=0,m=u.length;f<m;f++)for(c=u[f],d=i(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){g=!0;break e}if(!g)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function ST(t,e,n){if(!bT(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!i.has(u)&&(i.add(u),jz(c,e[t](u)),r[u]=s);s++,o=c}return r}ST.bind(null,"outboundNeighbors");ST.bind(null,"neighbors");var Uz=Vz;const oe=new m1({allowSelfLoops:!1});oe.addNode("MBR",{position:[610,250]});oe.addNode("AX",{position:[522,45]});oe.addNode("BX",{position:[522,85]});oe.addNode("CX",{position:[522,125]});oe.addNode("DX",{position:[522,165]});oe.addNode("id",{position:[522,205]});oe.addNode("IP",{position:[451,309]});oe.addNode("SP",{position:[451,349]});oe.addNode("ri",{position:[451,388]});oe.addNode("result",{position:[370,130]});oe.addNode("FLAGS",{position:[250,225]});oe.addNode("IR",{position:[205,272]});oe.addNode("left",{position:[60,85]});oe.addNode("right",{position:[60,145]});oe.addNode("AX join",{position:[492,45]});oe.addNode("BX join",{position:[492,85]});oe.addNode("CX join",{position:[492,125]});oe.addNode("DX join",{position:[492,165]});oe.addNode("id join",{position:[492,205]});oe.addNode("data mbr join",{position:[492,250]});oe.addNode("IP join",{position:[421,309]});oe.addNode("SP join",{position:[421,349]});oe.addNode("ri join",{position:[421,388]});oe.addNode("addresses mbr join",{position:[421,250]});oe.addNode("result mbr join",{position:[370,250]});oe.addNode("FLAGS mbr join",{position:[250,250]});oe.addNode("IR mbr join",{position:[205,250]});oe.addNode("left join",{position:[30,85]});oe.addNode("right join",{position:[30,145]});oe.addNode("operands mbr join",{position:[30,250]});oe.addUndirectedEdge("AX","AX join");oe.addUndirectedEdge("BX","BX join");oe.addUndirectedEdge("CX","CX join");oe.addUndirectedEdge("DX","DX join");oe.addUndirectedEdge("id","id join");oe.addUndirectedEdge("AX join","BX join");oe.addUndirectedEdge("BX join","CX join");oe.addUndirectedEdge("CX join","DX join");oe.addUndirectedEdge("DX join","id join");oe.addUndirectedEdge("id join","data mbr join");oe.addUndirectedEdge("data mbr join","MBR");oe.addUndirectedEdge("IP","IP join");oe.addUndirectedEdge("SP","SP join");oe.addUndirectedEdge("ri","ri join");oe.addUndirectedEdge("IP join","SP join");oe.addUndirectedEdge("SP join","ri join");oe.addUndirectedEdge("IP join","addresses mbr join");oe.addUndirectedEdge("addresses mbr join","data mbr join");oe.addUndirectedEdge("result","result mbr join");oe.addUndirectedEdge("result mbr join","addresses mbr join");oe.addUndirectedEdge("FLAGS","FLAGS mbr join");oe.addUndirectedEdge("FLAGS mbr join","result mbr join");oe.addUndirectedEdge("IR","IR mbr join");oe.addUndirectedEdge("IR mbr join","FLAGS mbr join");oe.addUndirectedEdge("left","left join");oe.addUndirectedEdge("right","right join");oe.addUndirectedEdge("left join","right join");oe.addUndirectedEdge("right join","operands mbr join");oe.addUndirectedEdge("operands mbr join","IR mbr join");function Wz(t,e){const n=Uz(oe,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const i=oe.getNodeAttribute(n[0],"position");let r=`M ${i[0]} ${i[1]}`;for(let s=1;s<n.length;s++){const[o,a]=oe.getNodeAttribute(n[s],"position");r+=` L ${o} ${a}`}return r}function Hz(){const{path:t,...e}=ht("cpu.internalBus.data");return C.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[C.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 272 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),C.jsx(Pt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const Fg=(t,e)=>{const n=Wz(t,e);return Xe([{key:"cpu.internalBus.data.path",from:n},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},jg=()=>Xe({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});async function Gz(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await Xe([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),G.set(lR,t.operation),await Promise.all([Xe({key:"cpu.alu.operation.backgroundColor",to:xt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Xe({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Xe({key:"cpu.alu.operation.backgroundColor",to:xt.stone[800]},{duration:1,easing:"easeOutQuart"}),Xe([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([nr("cpu.result"),nr("cpu.FLAGS")]),G.set(et.FLAGS,t.flags),G.set(et.result,t.result),await Promise.all([ir("cpu.result"),ir("cpu.FLAGS")]),await Xe([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{G.set(Os,e=>e.phase==="stopped"?e:{...e,phase:"interrupt"}),await Xe([{key:"cpu.id.opacity",to:1},{key:"cpu.ri.opacity",to:1}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{YP(t.instruction.position.start),G.set(Os,{phase:"fetching",metadata:t.instruction}),await Xe([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:.4},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:.4}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{G.set(Os,e=>e.phase==="stopped"?e:{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase});return}case"cpu:decode":{await Xe([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Xe([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Xe([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{G.set(Os,{phase:"stopped",error:t.error}),ra(t.error);return}case"cpu:halt":case"cpu:int.0":{G.set(Os,{phase:"stopped"}),ra();return}case"cpu:int.3":{n6();return}case"cpu:int.6":return;case"cpu:int.7":return;case"cpu:inta.off":{await Il("bus.inta");return}case"cpu:inta.on":{await Ll("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await Xe({key:`bus.${e}.stroke`,to:xt.red[500]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Ll("bus.iom",15);return}case"cpu:mar.set":{await Xe([{key:"cpu.internalBus.address.path",from:h8(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await nr("cpu.MAR",xt.blue[500]),G.set(aR,G.get(et[t.register])),await Xe({key:"bus.address.stroke",to:xt.blue[500]},{duration:5,easing:"easeOutSine"}),await Promise.all([ir("cpu.MAR"),Xe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=Po(t.register);await Fg("MBR",e),await nr(`cpu.${e}`),G.set(et[t.register],G.get(Dl)),await Promise.all([ir(`cpu.${e}`),jg()]);return}case"cpu:mbr.set":{const[e]=Po(t.register);await Fg(e,"MBR"),await nr("cpu.MBR"),G.set(Dl,G.get(et[t.register])),await Xe({key:"bus.data.stroke",to:xt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Promise.all([ir("cpu.MBR"),jg()]);return}case"cpu:register.copy":{const[e]=Po(t.src),[n]=Po(t.dest);e!==n&&await Fg(e,n),await nr(`cpu.${n}`),G.set(et[t.dest],G.get(et[t.src])),await Promise.all([ir(`cpu.${n}`),e!==n&&jg()]);return}case"cpu:register.update":{const[e]=Po(t.register);await nr(`cpu.${e}`),G.set(et[t.register],t.value),await ir(`cpu.${e}`);return}default:return t}}async function Xz(t){switch(t.type){case"f10:press":return;case"f10:int.off":{await Il("bus.int0");return}case"f10:int.on":{await Ll("bus.int0",10);return}default:return t}}async function Kz(t){switch(t.type){case"memory:read":{pe.inRange(t.address)&&G.set(Ky,pe.from(t.address));return}case"memory:read.ok":{await ip(t.value);return}case"memory:write":{if(pe.inRange(t.address)){const e=Number(t.address);G.set(Ky,pe.from(t.address)),G.set(Vw,n=>[...n.slice(0,e),t.value,...n.slice(e+1)])}return}case"memory:write.ok":return;case"memory:read.error":case"memory:write.error":{ra(t.error);return}default:return t}}async function Zz(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await ip(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await nr(`pic.${t.register}`),t.register){case"IMR":{G.set(Uw,t.value);break}case"IRR":{G.set(Ww,t.value);break}case"ISR":{G.set(Hw,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));G.set(Zf[e],t.value);break}default:return t}await ir(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await Il("bus.intr");return}case"pic:intr.on":{await Ll("bus.intr",10);return}case"pic:int.send":{await ip(t.number);return}default:return t}}async function Yz(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await ip(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await nr(`timer.${t.register}`),t.register){case"CONT":{G.set(l1,t.value);break}case"COMP":{G.set(u1,t.value);break}default:return t.register}await ir(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await Il("bus.int1");return}case"timer:int.on":{await Ll("bus.int1",10);return}default:return t}}const Jz=de("");async function qz(t){switch(t.type){case"console:read":{G.set(wr,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{G.sub(wr,()=>{const n=G.get(wr);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"console:write":{G.set(Jz,jn.getComputerState().io.console);return}default:return t}}const Qz={bus:"#2563eb",clock:"#65a30d",console:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",switches:"#65a30d",timer:"#2563eb"};async function e6(t){const[e,n]=t.type.split(":");console.group(`%c ${e} %c ${n}`,`background: ${Qz[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof M?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof pe?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Ln?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r} %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}if(console.groupEnd(),e==="bus")return await c8(t);if(e==="clock")return await d8(t);if(e==="console")return qz(t);if(e==="cpu")return await Gz(t);if(e==="f10")return await Xz(t);if(e==="handshake")return s8(t);if(e==="leds")return o8(t);if(e==="memory")return await Kz(t);if(e==="pic")return await Zz(t);if(e==="pio")return a8(t);if(e==="printer")return l8(t);if(e==="switches")return u8(t);if(e==="timer")return await Yz(t);throw new Error(`Unknown event type: ${t.type}`)}function t6(t){const e=t.translate(os().language);Up.error(e)}const jn=new IL,wr=de({type:"stopped"}),g1=()=>G.get(wr);function ra(t){t&&t6(t),YP(null),ZP(!1),G.set(wr,{type:"stopped",error:t}),G.set(Os,{phase:"stopped",error:t}),i8()}function n6(){G.set(wr,{type:"paused"})}function i6(){Up.error(Qp(os().language,"messages.assemble-error"))}function wu(){Up.error(Qp(os().language,"messages.invalid-action"))}function r6(t){A4(t),R4(t),T4(t),r8(t),"handshake"in t.io&&(G.set(jR,M.fromUnsigned(t.io.handshake.DATA,8)),G.set(VR,M.fromUnsigned(t.io.handshake.STATE,8))),"leds"in t.io&&G.set(UR,M.fromUnsigned(t.io.leds,8)),"pio"in t.io&&(G.set(WR,M.fromUnsigned(t.io.pio.PA,8)),G.set(HR,M.fromUnsigned(t.io.pio.PB,8)),G.set(GR,M.fromUnsigned(t.io.pio.CA,8)),G.set(XR,M.fromUnsigned(t.io.pio.CB,8))),"printer"in t.io&&(G.set(rv,t.io.printer.buffer.map(e=>M.fromUnsigned(e,8))),G.set(sv,t.io.printer.paper)),"switches"in t.io&&G.set(KR,M.fromUnsigned(t.io.switches,8))}async function s6(...t){const e=t[0],n=g1();switch(e){case"cpu.run":{if(n.type==="running")return wu();if(n.type==="stopped"){if(!window.codemirror)return;const i=window.codemirror.state.doc.toString(),r=x2(i);if(!r.success)return i6();ZP(!0),jn.loadProgram({program:r,data:os().dataOnLoad,devices:os().devices}),r6(jn.getComputerState()),G.set(wr,{type:"running",until:"infinity"}),Ta(jn.startCPU()),o6()}else G.set(wr,{type:"running",until:"infinity",waitingForInput:!1}),n8();return}case"cpu.stop":{ra();return}case"f10.press":{if(n.type!=="running")return wu();Ta(jn.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!jn.devices.switches.connected())return wu();const i=t[1];Ta(jn.devices.switches.toggle(i));return}case"console.handleKey":{if(n.type!=="running"||!n.waitingForInput)return wu();const i=t[1];let r;if(i.inputType==="insertLineBreak")r=`
`;else if(i.inputType==="insertText"||i.inputType==="insertCompositionText"){if(!i.data)return;r=i.data}else return;jn.devices.console.readChar(M.fromChar(r)),G.set(wr,{...n,waitingForInput:!1});return}case"console.clean":{Ta(jn.devices.console.clear());return}case"printer.clean":{if(!jn.devices.printer.connected())return wu();Ta(jn.devices.printer.clear());return}default:return e}}async function Ta(t){try{for(;g1().type==="running";){const e=t.next();if(e.done)break;await e6(e.value)}t.return()}catch(e){const n=At.from(e);ra(n)}}async function o6(){try{for(;g1().type==="running";){const t=os().clockSpeed;await Xe({key:"clock.angle",from:0,to:360},{duration:t,easing:"linear"}),Ta(jn.devices.clock.tick())}}catch(t){const e=At.from(t);ra(e)}}function kT(){return[xr(wr),s6]}const a6=()=>qA(Zl),l6=de(t=>t(Zl).language),u6=()=>xr(l6);de(t=>t(Zl).dataOnLoad);de(t=>t(Zl).devices);const c6=de(t=>{const e=t(Zl);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}}),d6=()=>xr(c6);function ii(){const t=u6();return(e,...n)=>Qp(t,e,...n)}function h6({className:t}){const e=ii(),[n,i]=kT(),r=b.useCallback(s=>{s.key==="F5"?(s.preventDefault(),s.shiftKey?i("cpu.stop"):i("cpu.run")):s.key==="F11"&&(s.preventDefault(),i("cpu.step"))},[i]);return p2("keydown",r,void 0,[i]),C.jsx("div",{className:nt("flex items-center justify-center gap-4",t),children:n.type==="stopped"?C.jsxs("button",{className:"flex w-min items-center gap-1 rounded-md bg-mantis-500 p-2 text-mantis-50 transition-colors hover:enabled:bg-mantis-600 hover:enabled:text-white disabled:opacity-40",onClick:()=>i("cpu.run"),children:[C.jsx("span",{className:"icon-[lucide--play] block h-5 w-5"}),C.jsx("span",{className:"whitespace-nowrap font-semibold tracking-wide",children:e("control.action.start")})]}):C.jsxs("button",{className:"flex w-min items-center gap-1 rounded-md bg-mantis-500 p-2 text-mantis-50 transition-colors hover:enabled:bg-mantis-600 hover:enabled:text-white disabled:opacity-40",onClick:()=>i("cpu.stop"),children:[C.jsx("span",{className:"icon-[lucide--stop-circle] block h-5 w-5"}),C.jsx("span",{className:"whitespace-nowrap font-semibold tracking-wide",children:e("control.action.stop")})]})})}function Fe(){return Fe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Fe.apply(this,arguments)}function rp(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function fm(t,e=[]){let n=[];function i(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,m=(h==null?void 0:h[t][l])||a,v=b.useMemo(()=>p,Object.values(p));return b.createElement(m.Provider,{value:v},f)}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=b.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const r=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,f6(r,...e)]}function f6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function p6(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function ET(...t){return e=>t.forEach(n=>p6(n,e))}function _t(...t){return b.useCallback(ET(...t),t)}const Hc=b.forwardRef((t,e)=>{const{children:n,...i}=t,r=b.Children.toArray(n),s=r.find(g6);if(s){const o=s.props.children,a=r.map(l=>l===s?b.Children.count(o)>1?b.Children.only(null):b.isValidElement(o)?o.props.children:null:l);return b.createElement(ov,Fe({},i,{ref:e}),b.isValidElement(o)?b.cloneElement(o,void 0,a):null)}return b.createElement(ov,Fe({},i,{ref:e}),n)});Hc.displayName="Slot";const ov=b.forwardRef((t,e)=>{const{children:n,...i}=t;return b.isValidElement(n)?b.cloneElement(n,{...y6(i,n.props),ref:e?ET(e,n.ref):n.ref}):b.Children.count(n)>1?b.Children.only(null):null});ov.displayName="SlotClone";const m6=({children:t})=>b.createElement(b.Fragment,null,t);function g6(t){return b.isValidElement(t)&&t.type===m6}function y6(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function CT(t){const e=t+"CollectionProvider",[n,i]=fm(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:m}=f,v=q.useRef(null),g=q.useRef(new Map).current;return q.createElement(r,{scope:p,itemMap:g,collectionRef:v},m)},a=t+"CollectionSlot",l=q.forwardRef((f,p)=>{const{scope:m,children:v}=f,g=s(a,m),y=_t(p,g.collectionRef);return q.createElement(Hc,{ref:y},v)}),u=t+"CollectionItemSlot",c="data-radix-collection-item",d=q.forwardRef((f,p)=>{const{scope:m,children:v,...g}=f,y=q.useRef(null),w=_t(p,y),x=s(u,m);return q.useEffect(()=>(x.itemMap.set(y,{ref:y,...g}),()=>void x.itemMap.delete(y))),q.createElement(Hc,{[c]:"",ref:w},v)});function h(f){const p=s(t+"CollectionConsumer",f);return q.useCallback(()=>{const v=p.collectionRef.current;if(!v)return[];const g=Array.from(v.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((x,k)=>g.indexOf(x.ref.current)-g.indexOf(k.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,i]}const v6=b.createContext(void 0);function AT(t){const e=b.useContext(v6);return t||e||"ltr"}const w6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Jt=w6.reduce((t,e)=>{const n=b.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?Hc:e;return b.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),b.createElement(a,Fe({},o,{ref:r}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function x6(t,e){t&&ua.flushSync(()=>t.dispatchEvent(e))}function as(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...n)},[])}function b6(t,e=globalThis==null?void 0:globalThis.document){const n=as(t);b.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[n,e])}const av="dismissableLayer.update",S6="dismissableLayer.pointerDownOutside",k6="dismissableLayer.focusOutside";let QS;const E6=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),C6=b.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=t,c=b.useContext(E6),[d,h]=b.useState(null),f=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=b.useState({}),m=_t(e,E=>h(E)),v=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(g),w=d?v.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,k=w>=y,A=A6(E=>{const R=E.target,N=[...c.branches].some(T=>T.contains(R));!k||N||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},f),P=P6(E=>{const R=E.target;[...c.branches].some(T=>T.contains(R))||(o==null||o(E),a==null||a(E),E.defaultPrevented||l==null||l())},f);return b6(E=>{w===c.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},f),b.useEffect(()=>{if(d)return i&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(QS=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),ek(),()=>{i&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=QS)}},[d,f,i,c]),b.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),ek())},[d,c]),b.useEffect(()=>{const E=()=>p({});return document.addEventListener(av,E),()=>document.removeEventListener(av,E)},[]),b.createElement(Jt.div,Fe({},u,{ref:m,style:{pointerEvents:x?k?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,P.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,A.onPointerDownCapture)}))});function A6(t,e=globalThis==null?void 0:globalThis.document){const n=as(t),i=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let c=function(){PT(S6,n,u,{discrete:!0})};var l=c;const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function P6(t,e=globalThis==null?void 0:globalThis.document){const n=as(t),i=b.useRef(!1);return b.useEffect(()=>{const r=s=>{s.target&&!i.current&&PT(k6,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function ek(){const t=new CustomEvent(av);document.dispatchEvent(t)}function PT(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?x6(r,s):r.dispatchEvent(s)}let Vg=0;function R6(){b.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:tk()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:tk()),Vg++,()=>{Vg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(i=>i.remove()),Vg--}},[])}function tk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const Ug="focusScope.autoFocusOnMount",Wg="focusScope.autoFocusOnUnmount",nk={bubbles:!1,cancelable:!0},T6=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),u=as(r),c=as(s),d=b.useRef(null),h=_t(e,m=>l(m)),f=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(i){let y=function(A){if(f.paused||!a)return;const P=A.target;a.contains(P)?d.current=P:vs(d.current,{select:!0})},w=function(A){if(f.paused||!a)return;const P=A.relatedTarget;P!==null&&(a.contains(P)||vs(d.current,{select:!0}))},x=function(A){const P=document.activeElement;for(const E of A)E.removedNodes.length>0&&(a!=null&&a.contains(P)||vs(a))};var m=y,v=w,g=x;document.addEventListener("focusin",y),document.addEventListener("focusout",w);const k=new MutationObserver(x);return a&&k.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),k.disconnect()}}},[i,a,f.paused]),b.useEffect(()=>{if(a){rk.add(f);const m=document.activeElement;if(!a.contains(m)){const g=new CustomEvent(Ug,nk);a.addEventListener(Ug,u),a.dispatchEvent(g),g.defaultPrevented||(O6($6(RT(a)),{select:!0}),document.activeElement===m&&vs(a))}return()=>{a.removeEventListener(Ug,u),setTimeout(()=>{const g=new CustomEvent(Wg,nk);a.addEventListener(Wg,c),a.dispatchEvent(g),g.defaultPrevented||vs(m??document.body,{select:!0}),a.removeEventListener(Wg,c),rk.remove(f)},0)}}},[a,u,c,f]);const p=b.useCallback(m=>{if(!n&&!i||f.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,g=document.activeElement;if(v&&g){const y=m.currentTarget,[w,x]=_6(y);w&&x?!m.shiftKey&&g===x?(m.preventDefault(),n&&vs(w,{select:!0})):m.shiftKey&&g===w&&(m.preventDefault(),n&&vs(x,{select:!0})):g===y&&m.preventDefault()}},[n,i,f.paused]);return b.createElement(Jt.div,Fe({tabIndex:-1},o,{ref:h,onKeyDown:p}))});function O6(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(vs(i,{select:e}),document.activeElement!==n)return}function _6(t){const e=RT(t),n=ik(e,t),i=ik(e.reverse(),t);return[n,i]}function RT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ik(t,e){for(const n of t)if(!N6(n,{upTo:e}))return n}function N6(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function M6(t){return t instanceof HTMLInputElement&&"select"in t}function vs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&M6(t)&&e&&t.select()}}const rk=D6();function D6(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=sk(t,e),t.unshift(e)},remove(e){var n;t=sk(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function sk(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function $6(t){return t.filter(e=>e.tagName!=="A")}const ls=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},L6=Ov["useId".toString()]||(()=>{});let I6=0;function TT(t){const[e,n]=b.useState(L6());return ls(()=>{t||n(i=>i??String(I6++))},[t]),t||(e?`radix-${e}`:"")}function Ql(t){return t.split("-")[1]}function y1(t){return t==="y"?"height":"width"}function Yr(t){return t.split("-")[0]}function ha(t){return["top","bottom"].includes(Yr(t))?"x":"y"}function ok(t,e,n){let{reference:i,floating:r}=t;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,a=ha(e),l=y1(a),u=i[l]/2-r[l]/2,c=a==="x";let d;switch(Yr(e)){case"top":d={x:s,y:i.y-r.height};break;case"bottom":d={x:s,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:o};break;case"left":d={x:i.x-r.width,y:o};break;default:d={x:i.x,y:i.y}}switch(Ql(e)){case"start":d[a]-=u*(n&&c?-1:1);break;case"end":d[a]+=u*(n&&c?-1:1)}return d}const B6=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=ok(u,i,l),h=i,f={},p=0;for(let m=0;m<a.length;m++){const{name:v,fn:g}=a[m],{x:y,y:w,data:x,reset:k}=await g({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=w??d,f={...f,[v]:{...f[v],...x}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):k.rects),{x:c,y:d}=ok(u,h,l)),m=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};function us(t,e){return typeof t=="function"?t(e):t}function OT(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function sp(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Gc(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=us(e,t),p=OT(f),m=a[h?d==="floating"?"reference":"floating":d],v=sp(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),g=d==="floating"?{...o.floating,x:i,y:r}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(y))&&await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1},x=sp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:y,strategy:l}):g);return{top:(v.top-x.top+p.top)/w.y,bottom:(x.bottom-v.bottom+p.bottom)/w.y,left:(v.left-x.left+p.left)/w.x,right:(x.right-v.right+p.right)/w.x}}const Xc=Math.min,Co=Math.max;function lv(t,e,n){return Co(t,Xc(e,n))}const ak=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a}=e,{element:l,padding:u=0}=us(t,e)||{};if(l==null)return{};const c=OT(u),d={x:n,y:i},h=ha(r),f=y1(h),p=await o.getDimensions(l),m=h==="y",v=m?"top":"left",g=m?"bottom":"right",y=m?"clientHeight":"clientWidth",w=s.reference[f]+s.reference[h]-d[h]-s.floating[f],x=d[h]-s.reference[h],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let A=k?k[y]:0;A&&await(o.isElement==null?void 0:o.isElement(k))||(A=a.floating[y]||s.floating[f]);const P=w/2-x/2,E=A/2-p[f]/2-1,R=Xc(c[v],E),N=Xc(c[g],E),T=R,B=A-p[f]-N,I=A/2-p[f]/2+P,_=lv(T,I,B),D=Ql(r)!=null&&I!=_&&s.reference[f]/2-(I<T?R:N)-p[f]/2<0?I<T?T-I:B-I:0;return{[h]:d[h]-D,data:{[h]:_,centerOffset:I-_+D}}}}),_T=["top","right","bottom","left"];_T.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const z6={left:"right",right:"left",bottom:"top",top:"bottom"};function op(t){return t.replace(/left|right|bottom|top/g,e=>z6[e])}function F6(t,e,n){n===void 0&&(n=!1);const i=Ql(t),r=ha(t),s=y1(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=op(o)),{main:o,cross:op(o)}}const j6={start:"end",end:"start"};function Hg(t){return t.replace(/start|end/g,e=>j6[e])}const V6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...m}=us(t,e),v=Yr(i),g=Yr(o)===o,y=await(a.isRTL==null?void 0:a.isRTL(l.floating)),w=d||(g||!p?[op(o)]:function(T){const B=op(T);return[Hg(T),B,Hg(B)]}(o));d||f==="none"||w.push(...function(T,B,I,_){const D=Ql(T);let z=function(L,O,$){const F=["left","right"],Y=["right","left"],ie=["top","bottom"],ce=["bottom","top"];switch(L){case"top":case"bottom":return $?O?Y:F:O?F:Y;case"left":case"right":return O?ie:ce;default:return[]}}(Yr(T),I==="start",_);return D&&(z=z.map(L=>L+"-"+D),B&&(z=z.concat(z.map(Hg)))),z}(o,p,f,y));const x=[o,...w],k=await Gc(e,m),A=[];let P=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&A.push(k[v]),c){const{main:T,cross:B}=F6(i,s,y);A.push(k[T],k[B])}if(P=[...P,{placement:i,overflows:A}],!A.every(T=>T<=0)){var E,R;const T=(((E=r.flip)==null?void 0:E.index)||0)+1,B=x[T];if(B)return{data:{index:T,overflows:P},reset:{placement:B}};let I=(R=P.filter(_=>_.overflows[0]<=0).sort((_,D)=>_.overflows[1]-D.overflows[1])[0])==null?void 0:R.placement;if(!I)switch(h){case"bestFit":{var N;const _=(N=P.map(D=>[D.placement,D.overflows.filter(z=>z>0).reduce((z,L)=>z+L,0)]).sort((D,z)=>D[1]-z[1])[0])==null?void 0:N[0];_&&(I=_);break}case"initialPlacement":I=o}if(i!==I)return{reset:{placement:I}}}return{}}}};function lk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function uk(t){return _T.some(e=>t[e]>=0)}const U6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=us(t,e);switch(i){case"referenceHidden":{const s=lk(await Gc(e,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:uk(s)}}}case"escaped":{const s=lk(await Gc(e,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:uk(s)}}}default:return{}}}}},W6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,r=await async function(s,o){const{placement:a,platform:l,elements:u}=s,c=await(l.isRTL==null?void 0:l.isRTL(u.floating)),d=Yr(a),h=Ql(a),f=ha(a)==="x",p=["left","top"].includes(d)?-1:1,m=c&&f?-1:1,v=us(o,s);let{mainAxis:g,crossAxis:y,alignmentAxis:w}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...v};return h&&typeof w=="number"&&(y=h==="end"?-1*w:w),f?{x:y*m,y:g*p}:{x:g*p,y:y*m}}(e,t);return{x:n+r.x,y:i+r.y,data:r}}}};function NT(t){return t==="x"?"y":"x"}const H6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...l}=us(t,e),u={x:n,y:i},c=await Gc(e,l),d=ha(Yr(r)),h=NT(d);let f=u[d],p=u[h];if(s){const v=d==="y"?"bottom":"right";f=lv(f+c[d==="y"?"top":"left"],f,f-c[v])}if(o){const v=h==="y"?"bottom":"right";p=lv(p+c[h==="y"?"top":"left"],p,p-c[v])}const m=a.fn({...e,[d]:f,[h]:p});return{...m,data:{x:m.x-n,y:m.y-i}}}}},G6=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=us(t,e),c={x:n,y:i},d=ha(r),h=NT(d);let f=c[d],p=c[h];const m=us(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=d==="y"?"height":"width",x=s.reference[d]-s.floating[w]+v.mainAxis,k=s.reference[d]+s.reference[w]-v.mainAxis;f<x?f=x:f>k&&(f=k)}if(u){var g,y;const w=d==="y"?"width":"height",x=["top","left"].includes(Yr(r)),k=s.reference[h]-s.floating[w]+(x&&((g=o.offset)==null?void 0:g[h])||0)+(x?0:v.crossAxis),A=s.reference[h]+s.reference[w]+(x?0:((y=o.offset)==null?void 0:y[h])||0)-(x?v.crossAxis:0);p<k?p=k:p>A&&(p=A)}return{[d]:f,[h]:p}}}},X6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:i,platform:r,elements:s}=e,{apply:o=()=>{},...a}=us(t,e),l=await Gc(e,a),u=Yr(n),c=Ql(n),d=ha(n)==="x",{width:h,height:f}=i.floating;let p,m;u==="top"||u==="bottom"?(p=u,m=c===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(m=u,p=c==="end"?"top":"bottom");const v=f-l[p],g=h-l[m],y=!e.middlewareData.shift;let w=v,x=g;if(d){const A=h-l.left-l.right;x=c||y?Xc(g,A):A}else{const A=f-l.top-l.bottom;w=c||y?Xc(v,A):A}if(y&&!c){const A=Co(l.left,0),P=Co(l.right,0),E=Co(l.top,0),R=Co(l.bottom,0);d?x=h-2*(A!==0||P!==0?A+P:Co(l.left,l.right)):w=f-2*(E!==0||R!==0?E+R:Co(l.top,l.bottom))}await o({...e,availableWidth:x,availableHeight:w});const k=await r.getDimensions(s.floating);return h!==k.width||f!==k.height?{reset:{rects:!0}}:{}}}};function qn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ar(t){return qn(t).getComputedStyle(t)}function MT(t){return t instanceof qn(t).Node}function uo(t){return MT(t)?(t.nodeName||"").toLowerCase():"#document"}function Xi(t){return t instanceof HTMLElement||t instanceof qn(t).HTMLElement}function ck(t){return typeof ShadowRoot<"u"&&(t instanceof qn(t).ShadowRoot||t instanceof ShadowRoot)}function Kc(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Ar(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function K6(t){return["table","td","th"].includes(uo(t))}function uv(t){const e=v1(),n=Ar(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function v1(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function pm(t){return["html","body","#document"].includes(uo(t))}const cv=Math.min,cl=Math.max,ap=Math.round,nh=Math.floor,co=t=>({x:t,y:t});function DT(t){const e=Ar(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Xi(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=ap(n)!==s||ap(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function Jr(t){return t instanceof Element||t instanceof qn(t).Element}function w1(t){return Jr(t)?t:t.contextElement}function dl(t){const e=w1(t);if(!Xi(e))return co(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=DT(e);let o=(s?ap(n.width):n.width)/i,a=(s?ap(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const Z6=co(0);function $T(t){const e=qn(t);return v1()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Z6}function sa(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=w1(t);let o=co(1);e&&(i?Jr(i)&&(o=dl(i)):o=dl(t));const a=function(h,f,p){return f===void 0&&(f=!1),!(!p||f&&p!==qn(h))&&f}(s,n,i)?$T(s):co(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=qn(s),f=i&&Jr(i)?qn(i):i;let p=h.frameElement;for(;p&&i&&f!==h;){const m=dl(p),v=p.getBoundingClientRect(),g=getComputedStyle(p),y=v.left+(p.clientLeft+parseFloat(g.paddingLeft))*m.x,w=v.top+(p.clientTop+parseFloat(g.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,d*=m.y,l+=y,u+=w,p=qn(p).frameElement}}return sp({width:c,height:d,x:l,y:u})}function mm(t){return Jr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function qr(t){var e;return(e=(MT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function LT(t){return sa(qr(t)).left+mm(t).scrollLeft}function Bl(t){if(uo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ck(t)&&t.host||qr(t);return ck(e)?e.host:e}function IT(t){const e=Bl(t);return pm(e)?t.ownerDocument?t.ownerDocument.body:t.body:Xi(e)&&Kc(e)?e:IT(e)}function lp(t,e){var n;e===void 0&&(e=[]);const i=IT(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=qn(i);return r?e.concat(s,s.visualViewport||[],Kc(i)?i:[]):e.concat(i,lp(i))}function dk(t,e,n){let i;if(e==="viewport")i=function(r,s){const o=qn(r),a=qr(r),l=o.visualViewport;let u=a.clientWidth,c=a.clientHeight,d=0,h=0;if(l){u=l.width,c=l.height;const f=v1();(!f||f&&s==="fixed")&&(d=l.offsetLeft,h=l.offsetTop)}return{width:u,height:c,x:d,y:h}}(t,n);else if(e==="document")i=function(r){const s=qr(r),o=mm(r),a=r.ownerDocument.body,l=cl(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),u=cl(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let c=-o.scrollLeft+LT(r);const d=-o.scrollTop;return Ar(a).direction==="rtl"&&(c+=cl(s.clientWidth,a.clientWidth)-l),{width:l,height:u,x:c,y:d}}(qr(t));else if(Jr(e))i=function(r,s){const o=sa(r,!0,s==="fixed"),a=o.top+r.clientTop,l=o.left+r.clientLeft,u=Xi(r)?dl(r):co(1);return{width:r.clientWidth*u.x,height:r.clientHeight*u.y,x:l*u.x,y:a*u.y}}(e,n);else{const r=$T(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return sp(i)}function BT(t,e){const n=Bl(t);return!(n===e||!Jr(n)||pm(n))&&(Ar(n).position==="fixed"||BT(n,e))}function Y6(t,e,n){const i=Xi(e),r=qr(e),s=n==="fixed",o=sa(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=co(0);if(i||!i&&!s)if((uo(e)!=="body"||Kc(r))&&(a=mm(e)),Xi(e)){const u=sa(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else r&&(l.x=LT(r));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function hk(t,e){return Xi(t)&&Ar(t).position!=="fixed"?e?e(t):t.offsetParent:null}function fk(t,e){const n=qn(t);if(!Xi(t))return n;let i=hk(t,e);for(;i&&K6(i)&&Ar(i).position==="static";)i=hk(i,e);return i&&(uo(i)==="html"||uo(i)==="body"&&Ar(i).position==="static"&&!uv(i))?n:i||function(r){let s=Bl(r);for(;Xi(s)&&!pm(s);){if(uv(s))return s;s=Bl(s)}return null}(t)||n}const J6={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=Xi(n),s=qr(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=co(1);const l=co(0);if((r||!r&&i!=="fixed")&&((uo(n)!=="body"||Kc(s))&&(o=mm(n)),Xi(n))){const u=sa(n);a=dl(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},getDocumentElement:qr,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[...n==="clippingAncestors"?function(l,u){const c=u.get(l);if(c)return c;let d=lp(l).filter(m=>Jr(m)&&uo(m)!=="body"),h=null;const f=Ar(l).position==="fixed";let p=f?Bl(l):l;for(;Jr(p)&&!pm(p);){const m=Ar(p),v=uv(p);v||m.position!=="fixed"||(h=null),(f?!v&&!h:!v&&m.position==="static"&&h&&["absolute","fixed"].includes(h.position)||Kc(p)&&!v&&BT(l,p))?d=d.filter(g=>g!==p):h=m,p=Bl(p)}return u.set(l,d),d}(e,this._c):[].concat(n),i],o=s[0],a=s.reduce((l,u)=>{const c=dk(e,u,r);return l.top=cl(c.top,l.top),l.right=cv(c.right,l.right),l.bottom=cv(c.bottom,l.bottom),l.left=cl(c.left,l.left),l},dk(e,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:fk,getElementRects:async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||fk,s=this.getDimensions;return{reference:Y6(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return DT(t)},getScale:dl,isElement:Jr,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function q6(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=w1(t),c=r||s?[...u?lp(u):[],...lp(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&a?function(v,g){let y,w=null;const x=qr(v);function k(){clearTimeout(y),w&&w.disconnect(),w=null}return function A(P,E){P===void 0&&(P=!1),E===void 0&&(E=1),k();const{left:R,top:N,width:T,height:B}=v.getBoundingClientRect();if(P||g(),!T||!B)return;const I={rootMargin:-nh(N)+"px "+-nh(x.clientWidth-(R+T))+"px "+-nh(x.clientHeight-(N+B))+"px "+-nh(R)+"px",threshold:cl(0,cv(1,E))||1};let _=!0;function D(z){const L=z[0].intersectionRatio;if(L!==E){if(!_)return A();L?A(!1,L):y=setTimeout(()=>{A(!1,1e-7)},100)}_=!1}try{w=new IntersectionObserver(D,{...I,root:x.ownerDocument})}catch{w=new IntersectionObserver(D,I)}w.observe(v)}(!0),k}(u,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[g]=v;g&&g.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let m=l?sa(t):null;return l&&function v(){const g=sa(t);!m||g.x===m.x&&g.y===m.y&&g.width===m.width&&g.height===m.height||n(),m=g,h=requestAnimationFrame(v)}(),n(),()=>{c.forEach(v=>{r&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const Q6=(t,e,n)=>{const i=new Map,r={platform:J6,...n},s={...r.platform,_c:i};return B6(t,e,{...r,platform:s})},e9=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?ak({element:i.current,padding:r}).fn(n):{}:i?ak({element:i,padding:r}).fn(n):{}}}};var Kh=typeof document<"u"?b.useLayoutEffect:b.useEffect;function up(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!up(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!up(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function zT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function pk(t,e){const n=zT(t);return Math.round(e*n)/n}function mk(t){const e=b.useRef(t);return Kh(()=>{e.current=t}),e}function t9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=b.useState(i);up(h,i)||f(i);const[p,m]=b.useState(null),[v,g]=b.useState(null),y=b.useCallback(z=>{z!=A.current&&(A.current=z,m(z))},[m]),w=b.useCallback(z=>{z!==P.current&&(P.current=z,g(z))},[g]),x=s||p,k=o||v,A=b.useRef(null),P=b.useRef(null),E=b.useRef(c),R=mk(l),N=mk(r),T=b.useCallback(()=>{if(!A.current||!P.current)return;const z={placement:e,strategy:n,middleware:h};N.current&&(z.platform=N.current),Q6(A.current,P.current,z).then(L=>{const O={...L,isPositioned:!0};B.current&&!up(E.current,O)&&(E.current=O,ua.flushSync(()=>{d(O)}))})},[h,e,n,N]);Kh(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[u]);const B=b.useRef(!1);Kh(()=>(B.current=!0,()=>{B.current=!1}),[]),Kh(()=>{if(x&&(A.current=x),k&&(P.current=k),x&&k){if(R.current)return R.current(x,k,T);T()}},[x,k,T,R]);const I=b.useMemo(()=>({reference:A,floating:P,setReference:y,setFloating:w}),[y,w]),_=b.useMemo(()=>({reference:x,floating:k}),[x,k]),D=b.useMemo(()=>{const z={position:n,left:0,top:0};if(!_.floating)return z;const L=pk(_.floating,c.x),O=pk(_.floating,c.y);return a?{...z,transform:"translate("+L+"px, "+O+"px)",...zT(_.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:O}},[n,a,_.floating,c.x,c.y]);return b.useMemo(()=>({...c,update:T,refs:I,elements:_,floatingStyles:D}),[c,T,I,_,D])}function FT(t){const[e,n]=b.useState(void 0);return ls(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}const jT="Popper",[VT,UT]=fm(jT),[n9,WT]=VT(jT),i9=t=>{const{__scopePopper:e,children:n}=t,[i,r]=b.useState(null);return b.createElement(n9,{scope:e,anchor:i,onAnchorChange:r},n)},r9="PopperAnchor",s9=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=WT(r9,n),o=b.useRef(null),a=_t(e,o);return b.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:b.createElement(Jt.div,Fe({},r,{ref:a}))}),HT="PopperContent",[o9,QW]=VT(HT),a9=b.forwardRef((t,e)=>{var n,i,r,s,o,a,l,u;const{__scopePopper:c,side:d="bottom",sideOffset:h=0,align:f="center",alignOffset:p=0,arrowPadding:m=0,collisionBoundary:v=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:w=!1,avoidCollisions:x=!0,onPlaced:k,...A}=t,P=WT(HT,c),[E,R]=b.useState(null),N=_t(e,Pe=>R(Pe)),[T,B]=b.useState(null),I=FT(T),_=(n=I==null?void 0:I.width)!==null&&n!==void 0?n:0,D=(i=I==null?void 0:I.height)!==null&&i!==void 0?i:0,z=d+(f!=="center"?"-"+f:""),L=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},O=Array.isArray(v)?v:[v],$=O.length>0,F={padding:L,boundary:O.filter(l9),altBoundary:$},{refs:Y,floatingStyles:ie,placement:ce,isPositioned:ve,middlewareData:be}=t9({strategy:"fixed",placement:z,whileElementsMounted:q6,elements:{reference:P.anchor},middleware:[W6({mainAxis:h+D,alignmentAxis:p}),x&&H6({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?G6():void 0,...F}),x&&V6({...F}),X6({...F,apply:({elements:Pe,rects:bt,availableWidth:ln,availableHeight:Bn})=>{const{width:wd,height:X_}=bt.reference,xd=Pe.floating.style;xd.setProperty("--radix-popper-available-width",`${ln}px`),xd.setProperty("--radix-popper-available-height",`${Bn}px`),xd.setProperty("--radix-popper-anchor-width",`${wd}px`),xd.setProperty("--radix-popper-anchor-height",`${X_}px`)}}),T&&e9({element:T,padding:m}),u9({arrowWidth:_,arrowHeight:D}),w&&U6({strategy:"referenceHidden"})]}),[we,Q]=GT(ce),ge=as(k);ls(()=>{ve&&(ge==null||ge())},[ve,ge]);const _e=(r=be.arrow)===null||r===void 0?void 0:r.x,ke=(s=be.arrow)===null||s===void 0?void 0:s.y,Se=((o=be.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[xe,se]=b.useState();return ls(()=>{E&&se(window.getComputedStyle(E).zIndex)},[E]),b.createElement("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:ve?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(a=be.transformOrigin)===null||a===void 0?void 0:a.x,(l=be.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},b.createElement(o9,{scope:c,placedSide:we,onArrowChange:B,arrowX:_e,arrowY:ke,shouldHideArrow:Se},b.createElement(Jt.div,Fe({"data-side":we,"data-align":Q},A,{ref:N,style:{...A.style,animation:ve?void 0:"none",opacity:(u=be.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function l9(t){return t!==null}const u9=t=>({name:"transformOrigin",options:t,fn(e){var n,i,r,s,o;const{placement:a,rects:l,middlewareData:u}=e,d=((n=u.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=d?0:t.arrowWidth,f=d?0:t.arrowHeight,[p,m]=GT(a),v={start:"0%",center:"50%",end:"100%"}[m],g=((i=(r=u.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+h/2,y=((s=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+f/2;let w="",x="";return p==="bottom"?(w=d?v:`${g}px`,x=`${-f}px`):p==="top"?(w=d?v:`${g}px`,x=`${l.floating.height+f}px`):p==="right"?(w=`${-f}px`,x=d?v:`${y}px`):p==="left"&&(w=`${l.floating.width+f}px`,x=d?v:`${y}px`),{data:{x:w,y:x}}}});function GT(t){const[e,n="center"]=t.split("-");return[e,n]}const c9=i9,d9=s9,h9=a9,f9=b.forwardRef((t,e)=>{var n;const{container:i=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...r}=t;return i?KA.createPortal(b.createElement(Jt.div,Fe({},r,{ref:e})),i):null});function dv({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=p9({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:i,a=as(n),l=b.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else r(u)},[s,t,r,a]);return[o,l]}function p9({defaultProp:t,onChange:e}){const n=b.useState(t),[i]=n,r=b.useRef(i),s=as(e);return b.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}function XT(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const m9=b.forwardRef((t,e)=>b.createElement(Jt.span,Fe({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var g9=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ba=new WeakMap,ih=new WeakMap,rh={},Gg=0,KT=function(t){return t&&(t.host||KT(t.parentNode))},y9=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=KT(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},v9=function(t,e,n,i){var r=y9(e,Array.isArray(t)?t:[t]);rh[n]||(rh[n]=new WeakMap);var s=rh[n],o=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else{var f=h.getAttribute(i),p=f!==null&&f!=="false",m=(ba.get(h)||0)+1,v=(s.get(h)||0)+1;ba.set(h,m),s.set(h,v),o.push(h),m===1&&p&&ih.set(h,!0),v===1&&h.setAttribute(n,"true"),p||h.setAttribute(i,"true")}})};return c(e),a.clear(),Gg++,function(){o.forEach(function(d){var h=ba.get(d)-1,f=s.get(d)-1;ba.set(d,h),s.set(d,f),h||(ih.has(d)||d.removeAttribute(i),ih.delete(d)),f||d.removeAttribute(n)}),Gg--,Gg||(ba=new WeakMap,ba=new WeakMap,ih=new WeakMap,rh={})}},w9=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=e||g9(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),v9(i,r,n,"aria-hidden")):function(){return null}},hr=function(){return hr=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hr.apply(this,arguments)};function ZT(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function x9(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Zh="right-scroll-bar-position",Yh="width-before-scroll-bar",b9="with-scroll-bars-hidden",S9="--removed-body-scroll-bar-size";function k9(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function E9(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}function C9(t,e){return E9(e||null,function(n){return t.forEach(function(i){return k9(i,n)})})}function A9(t){return t}function P9(t,e){e===void 0&&(e=A9);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return r}function R9(t){t===void 0&&(t={});var e=P9(null);return e.options=hr({async:!0,ssr:!1},t),e}var YT=function(t){var e=t.sideCar,n=ZT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return b.createElement(i,hr({},n))};YT.isSideCarExport=!0;function T9(t,e){return t.useMedium(e),YT}var JT=R9(),Xg=function(){},gm=b.forwardRef(function(t,e){var n=b.useRef(null),i=b.useState({onScrollCapture:Xg,onWheelCapture:Xg,onTouchMoveCapture:Xg}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,m=t.allowPinchZoom,v=t.as,g=v===void 0?"div":v,y=ZT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,x=C9([n,e]),k=hr(hr({},y),r);return b.createElement(b.Fragment,null,c&&b.createElement(w,{sideCar:JT,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n}),o?b.cloneElement(b.Children.only(a),hr(hr({},k),{ref:x})):b.createElement(g,hr({},k,{className:l,ref:x}),a))});gm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gm.classNames={fullWidth:Yh,zeroRight:Zh};var gk,O9=function(){if(gk)return gk;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _9(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=O9();return e&&t.setAttribute("nonce",e),t}function N9(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function M9(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var D9=function(){var t=0,e=null;return{add:function(n){t==0&&(e=_9())&&(N9(e,n),M9(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},$9=function(){var t=D9();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},qT=function(){var t=$9(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},L9={left:0,top:0,right:0,gap:0},Kg=function(t){return parseInt(t||"",10)||0},I9=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Kg(n),Kg(i),Kg(r)]},B9=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return L9;var e=I9(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},z9=qT(),F9=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(b9,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zh,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(Yh,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(Zh," .").concat(Zh,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Yh," .").concat(Yh,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body {
    `).concat(S9,": ").concat(a,`px;
  }
`)},j9=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i,s=b.useMemo(function(){return B9(r)},[r]);return b.createElement(z9,{styles:F9(s,!e,r,n?"":"!important")})},hv=!1;if(typeof window<"u")try{var sh=Object.defineProperty({},"passive",{get:function(){return hv=!0,!0}});window.addEventListener("test",sh,sh),window.removeEventListener("test",sh,sh)}catch{hv=!1}var Sa=hv?{passive:!1}:!1,V9=function(t){return t.tagName==="TEXTAREA"},QT=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!V9(t)&&n[e]==="visible")},U9=function(t){return QT(t,"overflowY")},W9=function(t){return QT(t,"overflowX")},yk=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=eO(t,n);if(i){var r=tO(t,n),s=r[1],o=r[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},H9=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},G9=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},eO=function(t,e){return t==="v"?U9(e):W9(e)},tO=function(t,e){return t==="v"?H9(e):G9(e)},X9=function(t,e){return t==="h"&&e==="rtl"?-1:1},K9=function(t,e,n,i,r){var s=X9(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=tO(t,a),p=f[0],m=f[1],v=f[2],g=m-v-s*p;(p||g)&&eO(t,a)&&(d+=g,h+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(r&&d===0||!r&&o>d)||!c&&(r&&h===0||!r&&-o>h))&&(u=!0),u},oh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},vk=function(t){return[t.deltaX,t.deltaY]},wk=function(t){return t&&"current"in t?t.current:t},Z9=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Y9=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},J9=0,ka=[];function q9(t){var e=b.useRef([]),n=b.useRef([0,0]),i=b.useRef(),r=b.useState(J9++)[0],s=b.useState(function(){return qT()})[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=x9([t.lockRef.current],(t.shards||[]).map(wk),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(m,v){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var g=oh(m),y=n.current,w="deltaX"in m?m.deltaX:y[0]-g[0],x="deltaY"in m?m.deltaY:y[1]-g[1],k,A=m.target,P=Math.abs(w)>Math.abs(x)?"h":"v";if("touches"in m&&P==="h"&&A.type==="range")return!1;var E=yk(P,A);if(!E)return!0;if(E?k=P:(k=P==="v"?"h":"v",E=yk(P,A)),!E)return!1;if(!i.current&&"changedTouches"in m&&(w||x)&&(i.current=k),!k)return!0;var R=i.current||k;return K9(R,v,m,R==="h"?w:x,!0)},[]),l=b.useCallback(function(m){var v=m;if(!(!ka.length||ka[ka.length-1]!==s)){var g="deltaY"in v?vk(v):oh(v),y=e.current.filter(function(k){return k.name===v.type&&k.target===v.target&&Z9(k.delta,g)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(wk).filter(Boolean).filter(function(k){return k.contains(v.target)}),x=w.length>0?a(v,w[0]):!o.current.noIsolation;x&&v.cancelable&&v.preventDefault()}}},[]),u=b.useCallback(function(m,v,g,y){var w={name:m,delta:v,target:g,should:y};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(x){return x!==w})},1)},[]),c=b.useCallback(function(m){n.current=oh(m),i.current=void 0},[]),d=b.useCallback(function(m){u(m.type,vk(m),m.target,a(m,t.lockRef.current))},[]),h=b.useCallback(function(m){u(m.type,oh(m),m.target,a(m,t.lockRef.current))},[]);b.useEffect(function(){return ka.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Sa),document.addEventListener("touchmove",l,Sa),document.addEventListener("touchstart",c,Sa),function(){ka=ka.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Sa),document.removeEventListener("touchmove",l,Sa),document.removeEventListener("touchstart",c,Sa)}},[]);var f=t.removeScrollBar,p=t.inert;return b.createElement(b.Fragment,null,p?b.createElement(s,{styles:Y9(r)}):null,f?b.createElement(j9,{gapMode:"margin"}):null)}const Q9=T9(JT,q9);var nO=b.forwardRef(function(t,e){return b.createElement(gm,hr({},t,{ref:e,sideCar:Q9}))});nO.classNames=gm.classNames;const eF=nO,tF=[" ","Enter","ArrowUp","ArrowDown"],nF=[" ","Enter"],ym="Select",[vm,x1,iF]=CT(ym),[eu,eH]=fm(ym,[iF,UT]),b1=UT(),[rF,fa]=eu(ym),[sF,oF]=eu(ym),aF=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f}=t,p=b1(e),[m,v]=b.useState(null),[g,y]=b.useState(null),[w,x]=b.useState(!1),k=AT(u),[A=!1,P]=dv({prop:i,defaultProp:r,onChange:s}),[E,R]=dv({prop:o,defaultProp:a,onChange:l}),N=b.useRef(null),T=m?!!m.closest("form"):!0,[B,I]=b.useState(new Set),_=Array.from(B).map(D=>D.props.value).join(";");return b.createElement(c9,p,b.createElement(rF,{required:f,scope:e,trigger:m,onTriggerChange:v,valueNode:g,onValueNodeChange:y,valueNodeHasChildren:w,onValueNodeHasChildrenChange:x,contentId:TT(),value:E,onValueChange:R,open:A,onOpenChange:P,dir:k,triggerPointerDownPosRef:N,disabled:h},b.createElement(vm.Provider,{scope:e},b.createElement(sF,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(D=>{I(z=>new Set(z).add(D))},[]),onNativeOptionRemove:b.useCallback(D=>{I(z=>{const L=new Set(z);return L.delete(D),L})},[])},n)),T?b.createElement(rO,{key:_,"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:E,onChange:D=>R(D.target.value),disabled:h},E===void 0?b.createElement("option",{value:""}):null,Array.from(B)):null))},lF="SelectTrigger",uF=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=b1(n),o=fa(lF,n),a=o.disabled||i,l=_t(e,o.onTriggerChange),u=x1(n),[c,d,h]=sO(p=>{const m=u().filter(y=>!y.disabled),v=m.find(y=>y.value===o.value),g=oO(m,p,v);g!==void 0&&o.onValueChange(g.value)}),f=()=>{a||(o.onOpenChange(!0),h())};return b.createElement(d9,Fe({asChild:!0},s),b.createElement(Jt.button,Fe({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},r,{ref:l,onClick:Ct(r.onClick,p=>{p.currentTarget.focus()}),onPointerDown:Ct(r.onPointerDown,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(f(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:Ct(r.onKeyDown,p=>{const m=c.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(m&&p.key===" ")&&tF.includes(p.key)&&(f(),p.preventDefault())})})))}),cF="SelectValue",dF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o,...a}=t,l=fa(cF,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=_t(e,l.onValueNodeChange);return ls(()=>{u(c)},[u,c]),b.createElement(Jt.span,Fe({},a,{ref:d,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:s)}),hF=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return b.createElement(Jt.span,Fe({"aria-hidden":!0},r,{ref:e}),i||"▼")}),fF=t=>b.createElement(f9,Fe({asChild:!0},t)),zl="SelectContent",pF=b.forwardRef((t,e)=>{const n=fa(zl,t.__scopeSelect),[i,r]=b.useState();if(ls(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?ua.createPortal(b.createElement(iO,{scope:t.__scopeSelect},b.createElement(vm.Slot,{scope:t.__scopeSelect},b.createElement("div",null,t.children))),s):null}return b.createElement(mF,Fe({},t,{ref:e}))}),Or=10,[iO,wm]=eu(zl),mF=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:v,...g}=t,y=fa(zl,n),[w,x]=b.useState(null),[k,A]=b.useState(null),P=_t(e,Q=>x(Q)),[E,R]=b.useState(null),[N,T]=b.useState(null),B=x1(n),[I,_]=b.useState(!1),D=b.useRef(!1);b.useEffect(()=>{if(w)return w9(w)},[w]),R6();const z=b.useCallback(Q=>{const[ge,..._e]=B().map(xe=>xe.ref.current),[ke]=_e.slice(-1),Se=document.activeElement;for(const xe of Q)if(xe===Se||(xe==null||xe.scrollIntoView({block:"nearest"}),xe===ge&&k&&(k.scrollTop=0),xe===ke&&k&&(k.scrollTop=k.scrollHeight),xe==null||xe.focus(),document.activeElement!==Se))return},[B,k]),L=b.useCallback(()=>z([E,w]),[z,E,w]);b.useEffect(()=>{I&&L()},[I,L]);const{onOpenChange:O,triggerPointerDownPosRef:$}=y;b.useEffect(()=>{if(w){let Q={x:0,y:0};const ge=ke=>{var Se,xe,se,Pe;Q={x:Math.abs(Math.round(ke.pageX)-((Se=(xe=$.current)===null||xe===void 0?void 0:xe.x)!==null&&Se!==void 0?Se:0)),y:Math.abs(Math.round(ke.pageY)-((se=(Pe=$.current)===null||Pe===void 0?void 0:Pe.y)!==null&&se!==void 0?se:0))}},_e=ke=>{Q.x<=10&&Q.y<=10?ke.preventDefault():w.contains(ke.target)||O(!1),document.removeEventListener("pointermove",ge),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",_e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",_e,{capture:!0})}}},[w,O,$]),b.useEffect(()=>{const Q=()=>O(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[O]);const[F,Y]=sO(Q=>{const ge=B().filter(Se=>!Se.disabled),_e=ge.find(Se=>Se.ref.current===document.activeElement),ke=oO(ge,Q,_e);ke&&setTimeout(()=>ke.ref.current.focus())}),ie=b.useCallback((Q,ge,_e)=>{const ke=!D.current&&!_e;(y.value!==void 0&&y.value===ge||ke)&&(R(Q),ke&&(D.current=!0))},[y.value]),ce=b.useCallback(()=>w==null?void 0:w.focus(),[w]),ve=b.useCallback((Q,ge,_e)=>{const ke=!D.current&&!_e;(y.value!==void 0&&y.value===ge||ke)&&T(Q)},[y.value]),be=i==="popper"?xk:gF,we=be===xk?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:v}:{};return b.createElement(iO,{scope:n,content:w,viewport:k,onViewportChange:A,itemRefCallback:ie,selectedItem:E,onItemLeave:ce,itemTextRefCallback:ve,focusSelectedItem:L,selectedItemText:N,position:i,isPositioned:I,searchRef:F},b.createElement(eF,{as:Hc,allowPinchZoom:!0},b.createElement(T6,{asChild:!0,trapped:y.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:Ct(r,Q=>{var ge;(ge=y.trigger)===null||ge===void 0||ge.focus({preventScroll:!0}),Q.preventDefault()})},b.createElement(C6,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},b.createElement(be,Fe({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Q=>Q.preventDefault()},g,we,{onPlaced:()=>_(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:Ct(g.onKeyDown,Q=>{const ge=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!ge&&Q.key.length===1&&Y(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let ke=B().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(ke=ke.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const Se=Q.target,xe=ke.indexOf(Se);ke=ke.slice(xe+1)}setTimeout(()=>z(ke)),Q.preventDefault()}})}))))))}),gF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=fa(zl,n),o=wm(zl,n),[a,l]=b.useState(null),[u,c]=b.useState(null),d=_t(e,P=>c(P)),h=x1(n),f=b.useRef(!1),p=b.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:g,focusSelectedItem:y}=o,w=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&m&&v&&g){const P=s.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),R=s.valueNode.getBoundingClientRect(),N=g.getBoundingClientRect();if(s.dir!=="rtl"){const Se=N.left-E.left,xe=R.left-Se,se=P.left-xe,Pe=P.width+se,bt=Math.max(Pe,E.width),ln=window.innerWidth-Or,Bn=rp(xe,[Or,ln-bt]);a.style.minWidth=Pe+"px",a.style.left=Bn+"px"}else{const Se=E.right-N.right,xe=window.innerWidth-R.right-Se,se=window.innerWidth-P.right-xe,Pe=P.width+se,bt=Math.max(Pe,E.width),ln=window.innerWidth-Or,Bn=rp(xe,[Or,ln-bt]);a.style.minWidth=Pe+"px",a.style.right=Bn+"px"}const T=h(),B=window.innerHeight-Or*2,I=m.scrollHeight,_=window.getComputedStyle(u),D=parseInt(_.borderTopWidth,10),z=parseInt(_.paddingTop,10),L=parseInt(_.borderBottomWidth,10),O=parseInt(_.paddingBottom,10),$=D+z+I+O+L,F=Math.min(v.offsetHeight*5,$),Y=window.getComputedStyle(m),ie=parseInt(Y.paddingTop,10),ce=parseInt(Y.paddingBottom,10),ve=P.top+P.height/2-Or,be=B-ve,we=v.offsetHeight/2,Q=v.offsetTop+we,ge=D+z+Q,_e=$-ge;if(ge<=ve){const Se=v===T[T.length-1].ref.current;a.style.bottom="0px";const xe=u.clientHeight-m.offsetTop-m.offsetHeight,se=Math.max(be,we+(Se?ce:0)+xe+L),Pe=ge+se;a.style.height=Pe+"px"}else{const Se=v===T[0].ref.current;a.style.top="0px";const se=Math.max(ve,D+m.offsetTop+(Se?ie:0)+we)+_e;a.style.height=se+"px",m.scrollTop=ge-ve+m.offsetTop}a.style.margin=`${Or}px 0`,a.style.minHeight=F+"px",a.style.maxHeight=B+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,m,v,g,s.dir,i]);ls(()=>w(),[w]);const[x,k]=b.useState();ls(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const A=b.useCallback(P=>{P&&p.current===!0&&(w(),y==null||y(),p.current=!1)},[w,y]);return b.createElement(yF,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:A},b.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x}},b.createElement(Jt.div,Fe({},r,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}}))))}),xk=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Or,...s}=t,o=b1(n);return b.createElement(h9,Fe({},o,s,{ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[yF,vF]=eu(zl,{}),bk="SelectViewport",wF=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=wm(bk,n),s=vF(bk,n),o=_t(e,r.onViewportChange),a=b.useRef(0);return b.createElement(b.Fragment,null,b.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),b.createElement(vm.Slot,{scope:n},b.createElement(Jt.div,Fe({"data-radix-select-viewport":"",role:"presentation"},i,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...i.style},onScroll:Ct(i.onScroll,l=>{const u=l.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&c){const h=Math.abs(a.current-u.scrollTop);if(h>0){const f=window.innerHeight-Or*2,p=parseFloat(c.style.minHeight),m=parseFloat(c.style.height),v=Math.max(p,m);if(v<f){const g=v+h,y=Math.min(f,g),w=g-y;c.style.height=y+"px",c.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,c.style.justifyContent="flex-end")}}}a.current=u.scrollTop})}))))}),xF="SelectGroup";eu(xF);const fv="SelectItem",[bF,SF]=eu(fv),kF=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=fa(fv,n),l=wm(fv,n),u=a.value===i,[c,d]=b.useState(s??""),[h,f]=b.useState(!1),p=_t(e,g=>{var y;return(y=l.itemRefCallback)===null||y===void 0?void 0:y.call(l,g,i,r)}),m=TT(),v=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};return b.createElement(bF,{scope:n,value:i,disabled:r,textId:m,isSelected:u,onItemTextChange:b.useCallback(g=>{d(y=>{var w;return y||((w=g==null?void 0:g.textContent)!==null&&w!==void 0?w:"").trim()})},[])},b.createElement(vm.ItemSlot,{scope:n,value:i,disabled:r,textValue:c},b.createElement(Jt.div,Fe({role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1},o,{ref:p,onFocus:Ct(o.onFocus,()=>f(!0)),onBlur:Ct(o.onBlur,()=>f(!1)),onPointerUp:Ct(o.onPointerUp,v),onPointerMove:Ct(o.onPointerMove,g=>{if(r){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}else g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ct(o.onPointerLeave,g=>{if(g.currentTarget===document.activeElement){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}}),onKeyDown:Ct(o.onKeyDown,g=>{var y;((y=l.searchRef)===null||y===void 0?void 0:y.current)!==""&&g.key===" "||(nF.includes(g.key)&&v(),g.key===" "&&g.preventDefault())})}))))}),ah="SelectItemText",EF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=fa(ah,n),a=wm(ah,n),l=SF(ah,n),u=oF(ah,n),[c,d]=b.useState(null),h=_t(e,g=>d(g),l.onItemTextChange,g=>{var y;return(y=a.itemTextRefCallback)===null||y===void 0?void 0:y.call(a,g,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=b.useMemo(()=>b.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},f),[l.disabled,l.value,f]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=u;return ls(()=>(m(p),()=>v(p)),[m,v,p]),b.createElement(b.Fragment,null,b.createElement(Jt.span,Fe({id:l.textId},s,{ref:h})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ua.createPortal(s.children,o.valueNode):null)}),rO=b.forwardRef((t,e)=>{const{value:n,...i}=t,r=b.useRef(null),s=_t(e,r),o=XT(n);return b.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),b.createElement(m9,{asChild:!0},b.createElement("select",Fe({},i,{ref:s,defaultValue:n})))});rO.displayName="BubbleSelect";function sO(t){const e=as(t),n=b.useRef(""),i=b.useRef(0),r=b.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(i.current),u!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function oO(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=CF(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function CF(t,e){return t.map((n,i)=>t[(e+i)%t.length])}const AF=aF,aO=uF,PF=dF,RF=hF,TF=fF,lO=pF,OF=wF,uO=kF,_F=EF,Zg=AF,Yg=PF,Jh=b.forwardRef(({className:t,children:e,...n},i)=>C.jsxs(aO,{ref:i,className:nt("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,C.jsx(RF,{asChild:!0,children:C.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));Jh.displayName=aO.displayName;const qh=b.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>C.jsx(TF,{children:C.jsx(lO,{ref:r,className:nt("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:C.jsx(OF,{className:"p-1",children:e})})}));qh.displayName=lO.displayName;const Lu=b.forwardRef(({className:t,children:e,...n},i)=>C.jsx(uO,{ref:i,className:nt("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:C.jsx(_F,{children:e})}));Lu.displayName=uO.displayName;const cO=["PageUp","PageDown"],dO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hO={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},fd="Slider",[pv,NF,MF]=CT(fd),[fO,tH]=fm(fd,[MF]),[DF,xm]=fO(fd),$F=b.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[i],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,...p}=t,[m,v]=b.useState(null),g=_t(e,_=>v(_)),y=b.useRef(new Set),w=b.useRef(0),x=o==="horizontal",k=m?!!m.closest("form"):!0,A=x?LF:IF,[P=[],E]=dv({prop:c,defaultProp:u,onChange:_=>{var D;(D=[...y.current][w.current])===null||D===void 0||D.focus(),d(_)}}),R=b.useRef(P);function N(_){const D=GF(P,_);I(_,D)}function T(_){I(_,w.current)}function B(){const _=R.current[w.current];P[w.current]!==_&&h(P)}function I(_,D,{commit:z}={commit:!1}){const L=YF(s),O=JF(Math.round((_-i)/s)*s+i,L),$=rp(O,[i,r]);E((F=[])=>{const Y=WF(F,$,D);if(ZF(Y,l*s)){w.current=Y.indexOf($);const ie=String(Y)!==String(F);return ie&&z&&h(Y),ie?Y:F}else return F})}return b.createElement(DF,{scope:t.__scopeSlider,disabled:a,min:i,max:r,valueIndexToChangeRef:w,thumbs:y.current,values:P,orientation:o},b.createElement(pv.Provider,{scope:t.__scopeSlider},b.createElement(pv.Slot,{scope:t.__scopeSlider},b.createElement(A,Fe({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:g,onPointerDown:Ct(p.onPointerDown,()=>{a||(R.current=P)}),min:i,max:r,inverted:f,onSlideStart:a?void 0:N,onSlideMove:a?void 0:T,onSlideEnd:a?void 0:B,onHomeKeyDown:()=>!a&&I(i,0,{commit:!0}),onEndKeyDown:()=>!a&&I(r,P.length-1,{commit:!0}),onStepKeyDown:({event:_,direction:D})=>{if(!a){const O=cO.includes(_.key)||_.shiftKey&&dO.includes(_.key)?10:1,$=w.current,F=P[$],Y=s*O*D;I(F+Y,$,{commit:!0})}}})))),k&&P.map((_,D)=>b.createElement(UF,{key:D,name:n?n+(P.length>1?"[]":""):void 0,value:_})))}),[pO,mO]=fO(fd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),LF=b.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=b.useState(null),f=_t(e,w=>h(w)),p=b.useRef(),m=AT(r),v=m==="ltr",g=v&&!s||!v&&s;function y(w){const x=p.current||d.getBoundingClientRect(),k=[0,x.width],P=S1(k,g?[n,i]:[i,n]);return p.current=x,P(w-x.left)}return b.createElement(pO,{scope:t.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width"},b.createElement(gO,Fe({dir:m,"data-orientation":"horizontal"},c,{ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const x=y(w.clientX);o==null||o(x)},onSlideMove:w=>{const x=y(w.clientX);a==null||a(x)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:w=>{const k=hO[g?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:k?-1:1})}})))}),IF=b.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=b.useRef(null),d=_t(e,c),h=b.useRef(),f=!r;function p(m){const v=h.current||c.current.getBoundingClientRect(),g=[0,v.height],w=S1(g,f?[i,n]:[n,i]);return h.current=v,w(m-v.top)}return b.createElement(pO,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1},b.createElement(gO,Fe({"data-orientation":"vertical"},u,{ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=p(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=p(m.clientY);o==null||o(v)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:m=>{const g=hO[f?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:g?-1:1})}})))}),gO=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=xm(fd,n);return b.createElement(Jt.span,Fe({},u,{ref:e,onKeyDown:Ct(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):cO.concat(dO).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Ct(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():i(d)}),onPointerMove:Ct(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:Ct(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})}))}),BF="SliderTrack",zF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=xm(BF,n);return b.createElement(Jt.span,Fe({"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation},i,{ref:e}))}),Sk="SliderRange",FF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=xm(Sk,n),s=mO(Sk,n),o=b.useRef(null),a=_t(e,o),l=r.values.length,u=r.values.map(h=>yO(h,r.min,r.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return b.createElement(Jt.span,Fe({"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0},i,{ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}}))}),kk="SliderThumb",jF=b.forwardRef((t,e)=>{const n=NF(t.__scopeSlider),[i,r]=b.useState(null),s=_t(e,a=>r(a)),o=b.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return b.createElement(VF,Fe({},t,{ref:s,index:o}))}),VF=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,...r}=t,s=xm(kk,n),o=mO(kk,n),[a,l]=b.useState(null),u=_t(e,v=>l(v)),c=FT(a),d=s.values[i],h=d===void 0?0:yO(d,s.min,s.max),f=HF(i,s.values.length),p=c==null?void 0:c[o.size],m=p?XF(p,h,o.direction):0;return b.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),b.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${h}% + ${m}px)`}},b.createElement(pv.ItemSlot,{scope:t.__scopeSlider},b.createElement(Jt.span,Fe({role:"slider","aria-label":t["aria-label"]||f,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},r,{ref:u,style:d===void 0?{display:"none"}:t.style,onFocus:Ct(t.onFocus,()=>{s.valueIndexToChangeRef.current=i})}))))}),UF=t=>{const{value:e,...n}=t,i=b.useRef(null),r=XT(e);return b.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[r,e]),b.createElement("input",Fe({style:{display:"none"}},n,{ref:i,defaultValue:e}))};function WF(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function yO(t,e,n){const s=100/(n-e)*(t-e);return rp(s,[0,100])}function HF(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function GF(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function XF(t,e,n){const i=t/2,s=S1([0,50],[0,i]);return(i-s(e)*n)*n}function KF(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function ZF(t,e){if(e>0){const n=KF(t);return Math.min(...n)>=e}return!0}function S1(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function YF(t){return(String(t).split(".")[1]||"").length}function JF(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const vO=$F,qF=zF,QF=FF,ej=jF,Qh=b.forwardRef(({className:t,...e},n)=>C.jsxs(vO,{ref:n,className:nt("relative flex touch-none select-none items-center",t),...e,children:[C.jsx(qF,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:C.jsx(QF,{className:"absolute h-full bg-mantis-400"})}),C.jsx(ej,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Qh.displayName=vO.displayName;const wO=de(!1);function tj({className:t}){const e=ii(),[n,i]=a6();return C.jsxs("div",{className:t,children:[C.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[C.jsx("span",{className:"icon-[lucide--settings] h-6 w-6"})," ",e("settings.title")]}),C.jsxs(Ea,{children:[C.jsx(Ca,{children:C.jsxs(Aa,{children:[C.jsx("span",{className:"icon-[lucide--languages] h-6 w-6"}),e("settings.language.label")]})}),C.jsxs(Zg,{value:n.language,onValueChange:r=>i(s=>({...s,language:r})),children:[C.jsx(Jh,{className:"w-32",children:C.jsx(Yg,{})}),C.jsxs(qh,{children:[C.jsx(Lu,{value:"en",children:C.jsxs("span",{className:"inline-flex items-center gap-2",children:[C.jsx("span",{className:"icon-[circle-flags--uk] h-4 w-4"})," English"]})}),C.jsx(Lu,{value:"es",children:C.jsxs("span",{className:"inline-flex items-center gap-2",children:[C.jsx("span",{className:"icon-[circle-flags--ar] h-4 w-4"})," Español"]})})]})]})]}),C.jsx("hr",{className:"border-stone-600"}),C.jsxs(Ea,{children:[C.jsxs(Ca,{children:[C.jsxs(Aa,{children:[C.jsx("span",{className:"icon-[lucide--memory-stick] h-6 w-6"}),e("settings.dataOnLoad.label")]}),C.jsx(Ek,{children:e("settings.dataOnLoad.description")})]}),C.jsxs(Zg,{value:n.dataOnLoad,onValueChange:r=>i(s=>({...s,dataOnLoad:r})),children:[C.jsx(Jh,{className:"w-32 min-w-[theme(width.32)]",children:C.jsx(Yg,{})}),C.jsx(qh,{children:sR.map(r=>C.jsx(Lu,{value:r,children:e(`settings.dataOnLoad.${r}`)},r))})]})]}),C.jsxs(Ea,{children:[C.jsxs(Ca,{children:[C.jsxs(Aa,{children:[C.jsx("span",{className:"icon-[lucide--monitor-smartphone] h-6 w-6"}),e("settings.devices.label")]}),C.jsx(Ek,{children:e("settings.devices.description")})]}),C.jsxs(Zg,{value:n.devices,onValueChange:r=>i(s=>({...s,devices:r})),children:[C.jsx(Jh,{className:"w-48 min-w-[theme(width.48)]",children:C.jsx(Yg,{})}),C.jsx(qh,{children:oR.map(r=>C.jsx(Lu,{value:r,children:e(`settings.devices.${r}`)},r))})]})]}),C.jsx("hr",{className:"border-stone-600"}),C.jsxs(Ea,{children:[C.jsx(Ca,{children:C.jsxs(Aa,{children:[C.jsx("span",{className:"icon-[lucide--gauge] h-6 w-6"}),e("settings.speeds.executionUnit")]})}),C.jsx(Qh,{className:"w-44",value:[500-n.executionUnit],onValueChange:r=>i(s=>({...s,executionUnit:500-r[0]})),min:0,max:495,step:1})]}),C.jsxs(Ea,{children:[C.jsx(Ca,{children:C.jsxs(Aa,{children:[C.jsx("span",{className:"icon-[lucide--clock] h-6 w-6"}),e("settings.speeds.clockSpeed")]})}),C.jsx(Qh,{className:"w-44",value:[1e3-n.clockSpeed],onValueChange:r=>i(s=>({...s,clockSpeed:1e3-r[0]})),min:0,max:990,step:10})]}),C.jsxs(Ea,{children:[C.jsx(Ca,{children:C.jsxs(Aa,{children:[C.jsx("span",{className:"icon-[lucide--printer] h-6 w-6"}),e("settings.speeds.printerSpeed")]})}),C.jsx(Qh,{className:"w-44",value:[1e3-n.printerSpeed],onValueChange:r=>i(s=>({...s,printerSpeed:1e3-r[0]})),min:0,max:990,step:10})]})]})}function Ea({children:t}){return C.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ca({children:t}){return C.jsx("div",{className:"grow",children:t})}function Aa({children:t}){return C.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Ek({children:t}){return C.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function nj(){const t=ii(),[e,n]=qA(wO);return C.jsxs("header",{className:"relative p-2 text-sm text-white",children:[C.jsx(h6,{className:" absolute inset-0"}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex select-none items-center justify-center",children:[C.jsx("img",{src:"/favicon.svg",className:"mr-2 h-10 w-10"}),C.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",C.jsx("span",{className:"text-mantis-400",children:"Sim"})]})]}),C.jsx("button",{className:nt("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:C.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}const ij=1024;let rj=0;class Jg{constructor(e,n){this.from=e,this.to=n}}class Ie{constructor(e={}){this.id=rj++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=In.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Ie.closedBy=new Ie({deserialize:t=>t.split(" ")});Ie.openedBy=new Ie({deserialize:t=>t.split(" ")});Ie.group=new Ie({deserialize:t=>t.split(" ")});Ie.contextHash=new Ie({perNode:!0});Ie.lookAhead=new Ie({perNode:!0});Ie.mounted=new Ie({perNode:!0});const sj=Object.create(null);class In{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):sj,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new In(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Ie.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(Ie.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}In.none=new In("",Object.create(null),0,8);class k1{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new In(i.name,r,i.id,i.flags):i)}return new k1(n)}}const lh=new WeakMap,Ck=new WeakMap;var Wt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Wt||(Wt={}));class pt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(Ie.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new hp(this.topNode,e)}cursorAt(e,n=0,i=0){let r=lh.get(this)||this.topNode,s=new hp(r);return s.moveTo(e,n),lh.set(this,s._tree),s}get topNode(){return new Qr(this,0,0,null)}resolve(e,n=0){let i=Fl(lh.get(this)||this.topNode,e,n,!1);return lh.set(this,i),i}resolveInner(e,n=0){let i=Fl(Ck.get(this)||this.topNode,e,n,!0);return Ck.set(this,i),i}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Wt.IncludeAnonymous)>0;for(let l=this.cursor(o|Wt.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:A1(In.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new pt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new pt(In.none,n,i,r)))}static build(e){return aj(e)}}pt.empty=new pt(In.none,[],[],0);class E1{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new E1(this.buffer,this.index)}}class pa{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return In.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(xO(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let u=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,u)}return new pa(s,o,this.set)}}function xO(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function bO(t,e){let n=t.childBefore(e);for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(t=n,n=i.prevSibling):n=i}return t}function Fl(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Qr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Wt.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Qr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Qr{constructor(e,n,i,r){this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(xO(r,i,d,d+c.length)){if(c instanceof pa){if(s&Wt.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new js(new oj(o,c,e,d),null,h)}else if(s&Wt.IncludeAnonymous||!c.type.isAnonymous||C1(c)){let h;if(!(s&Wt.IgnoreMounts)&&c.props&&(h=c.prop(Ie.mounted))&&!h.overlay)return new Qr(h.tree,d,e,o);let f=new Qr(c,d,e,o);return s&Wt.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&Wt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Wt.IgnoreOverlays)&&(r=this._tree.prop(Ie.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Qr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new hp(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return Fl(this,e,n,!1)}resolveInner(e,n=0){return Fl(this,e,n,!0)}enterUnfinishedNodesBefore(e){return bO(this,e)}getChild(e,n=null,i=null){let r=cp(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return cp(this,e,n,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return dp(this,e)}}function cp(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(;!r.type.is(n);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function dp(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class oj{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class js{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new js(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Wt.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new js(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new js(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new js(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new hp(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new pt(this.type,e,n,this.to-this.from)}resolve(e,n=0){return Fl(this,e,n,!1)}resolveInner(e,n=0){return Fl(this,e,n,!0)}enterUnfinishedNodesBefore(e){return bO(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,i=null){let r=cp(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return cp(this,e,n,i)}get node(){return this}matchContext(e){return dp(this,e)}}class hp{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Qr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Qr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Wt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Wt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Wt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Wt.IncludeAnonymous||a instanceof pa||!a.type.isAnonymous||C1(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new js(this.buffer,n,this.stack[r]);return this.bufferNode=new js(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return dp(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return dp(this.node,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function C1(t){return t.children.some(e=>e instanceof pa||!e.type.isAnonymous||C1(e))}function aj(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=ij,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new E1(n,n.length):n,l=i.types,u=0,c=0;function d(x,k,A,P,E){let{id:R,start:N,end:T,size:B}=a,I=c;for(;B<0;)if(a.next(),B==-1){let O=s[R];A.push(O),P.push(N-x);return}else if(B==-3){u=R;return}else if(B==-4){c=R;return}else throw new RangeError(`Unrecognized record size: ${B}`);let _=l[R],D,z,L=N-x;if(T-N<=r&&(z=m(a.pos-k,E))){let O=new Uint16Array(z.size-z.skip),$=a.pos-z.size,F=O.length;for(;a.pos>$;)F=v(z.start,O,F);D=new pa(O,T-z.start,i),L=z.start-x}else{let O=a.pos-B;a.next();let $=[],F=[],Y=R>=o?R:-1,ie=0,ce=T;for(;a.pos>O;)Y>=0&&a.id==Y&&a.size>=0?(a.end<=ce-r&&(f($,F,N,ie,a.end,ce,Y,I),ie=$.length,ce=a.end),a.next()):d(N,O,$,F,Y);if(Y>=0&&ie>0&&ie<$.length&&f($,F,N,ie,N,ce,Y,I),$.reverse(),F.reverse(),Y>-1&&ie>0){let ve=h(_);D=A1(_,$,F,0,$.length,0,T-N,ve,ve)}else D=p(_,$,F,T-N,I-T)}A.push(D),P.push(L)}function h(x){return(k,A,P)=>{let E=0,R=k.length-1,N,T;if(R>=0&&(N=k[R])instanceof pt){if(!R&&N.type==x&&N.length==P)return N;(T=N.prop(Ie.lookAhead))&&(E=A[R]+N.length+T)}return p(x,k,A,P,E)}}function f(x,k,A,P,E,R,N,T){let B=[],I=[];for(;x.length>P;)B.push(x.pop()),I.push(k.pop()+A-E);x.push(p(i.types[N],B,I,R-E,T-R)),k.push(E-A)}function p(x,k,A,P,E=0,R){if(u){let N=[Ie.contextHash,u];R=R?[N].concat(R):[N]}if(E>25){let N=[Ie.lookAhead,E];R=R?[N].concat(R):[N]}return new pt(x,k,A,P,R)}function m(x,k){let A=a.fork(),P=0,E=0,R=0,N=A.end-r,T={size:0,start:0,skip:0};e:for(let B=A.pos-x;A.pos>B;){let I=A.size;if(A.id==k&&I>=0){T.size=P,T.start=E,T.skip=R,R+=4,P+=4,A.next();continue}let _=A.pos-I;if(I<0||_<B||A.start<N)break;let D=A.id>=o?4:0,z=A.start;for(A.next();A.pos>_;){if(A.size<0)if(A.size==-3)D+=4;else break e;else A.id>=o&&(D+=4);A.next()}E=z,P+=I,R+=D}return(k<0||P==x)&&(T.size=P,T.start=E,T.skip=R),T.size>4?T:void 0}function v(x,k,A){let{id:P,start:E,end:R,size:N}=a;if(a.next(),N>=0&&P<o){let T=A;if(N>4){let B=a.pos-(N-4);for(;a.pos>B;)A=v(x,k,A)}k[--A]=T,k[--A]=R-x,k[--A]=E-x,k[--A]=P}else N==-3?u=P:N==-4&&(c=P);return A}let g=[],y=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,g,y,-1);let w=(e=t.length)!==null&&e!==void 0?e:g.length?y[0]+g[0].length:0;return new pt(l[t.topID],g.reverse(),y.reverse(),w)}const Ak=new WeakMap;function ef(t,e){if(!t.isAnonymous||e instanceof pa||e.type!=t)return 1;let n=Ak.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof pt)){n=1;break}n+=ef(t,i)}Ak.set(e,n)}return n}function A1(t,e,n,i,r,s,o,a,l){let u=0;for(let p=i;p<r;p++)u+=ef(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,m,v,g,y){for(let w=v;w<g;){let x=w,k=m[w],A=ef(t,p[w]);for(w++;w<g;w++){let P=ef(t,p[w]);if(A+P>=c)break;A+=P}if(w==x+1){if(A>c){let P=p[x];f(P.children,P.positions,0,P.children.length,m[x]+y);continue}d.push(p[x])}else{let P=m[w-1]+p[w-1].length-k;d.push(A1(t,p,m,x,w,k,P,null,l))}h.push(k+y-s)}}return f(e,n,i,r,0),(a||l)(d,h,o)}class Uo{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new Uo(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new Uo(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return r}}class SO{startParse(e,n,i){return typeof e=="string"&&(e=new lj(e)),i=i?i.length?i.map(r=>new Jg(r.from,r.to)):[new Jg(0,0)]:[new Jg(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class lj{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Ie({perNode:!0});let uj=0;class Vt{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=uj++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Vt([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new fp;return n=>n.modified.indexOf(e)>-1?n:fp.get(n.base||n,n.modified.concat(e).sort((i,r)=>i.id-r.id))}}let cj=0;class fp{constructor(){this.instances=[],this.id=cj++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&dj(n,a.modified));if(i)return i;let r=[],s=new Vt(r,e,n);for(let a of n)a.instances.push(s);let o=hj(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(fp.get(a,l));return s}}function dj(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function hj(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function fj(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+r);let c=new pp(i,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return kO.add(e)}const kO=new Ie;class pp{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}pp.empty=new pp([],2,null);function EO(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function pj(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function mj(t,e,n,i=0,r=t.length){let s=new gj(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class gj{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=yj(e)||pp.empty,d=pj(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(Ie.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),m=e.firstChild();for(let v=0,g=a;;v++){let y=v<h.overlay.length?h.overlay[v]:null,w=y?y.from+a:l,x=Math.max(n,g),k=Math.min(i,w);if(x<k&&m)for(;e.from<k&&(this.highlightRange(e,x,k,r,s),this.startSpan(Math.min(k,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>i)break;g=y.to+a,g>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+a),Math.min(i,g),"",p),this.startSpan(Math.min(i,g),u))}m&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function yj(t){let e=t.type.prop(kO);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const J=Vt.define,uh=J(),Ss=J(),Pk=J(Ss),Rk=J(Ss),ks=J(),ch=J(ks),qg=J(ks),Qi=J(),bo=J(Qi),Ji=J(),qi=J(),mv=J(),xu=J(mv),dh=J(),Ee={comment:uh,lineComment:J(uh),blockComment:J(uh),docComment:J(uh),name:Ss,variableName:J(Ss),typeName:Pk,tagName:J(Pk),propertyName:Rk,attributeName:J(Rk),className:J(Ss),labelName:J(Ss),namespace:J(Ss),macroName:J(Ss),literal:ks,string:ch,docString:J(ch),character:J(ch),attributeValue:J(ch),number:qg,integer:J(qg),float:J(qg),bool:J(ks),regexp:J(ks),escape:J(ks),color:J(ks),url:J(ks),keyword:Ji,self:J(Ji),null:J(Ji),atom:J(Ji),unit:J(Ji),modifier:J(Ji),operatorKeyword:J(Ji),controlKeyword:J(Ji),definitionKeyword:J(Ji),moduleKeyword:J(Ji),operator:qi,derefOperator:J(qi),arithmeticOperator:J(qi),logicOperator:J(qi),bitwiseOperator:J(qi),compareOperator:J(qi),updateOperator:J(qi),definitionOperator:J(qi),typeOperator:J(qi),controlOperator:J(qi),punctuation:mv,separator:J(mv),bracket:xu,angleBracket:J(xu),squareBracket:J(xu),paren:J(xu),brace:J(xu),content:Qi,heading:bo,heading1:J(bo),heading2:J(bo),heading3:J(bo),heading4:J(bo),heading5:J(bo),heading6:J(bo),contentSeparator:J(Qi),list:J(Qi),quote:J(Qi),emphasis:J(Qi),strong:J(Qi),link:J(Qi),monospace:J(Qi),strikethrough:J(Qi),inserted:J(),deleted:J(),changed:J(),invalid:J(),meta:dh,documentMeta:J(dh),annotation:J(dh),processingInstruction:J(dh),definition:Vt.defineModifier(),constant:Vt.defineModifier(),function:Vt.defineModifier(),standard:Vt.defineModifier(),local:Vt.defineModifier(),special:Vt.defineModifier()};EO([{tag:Ee.link,class:"tok-link"},{tag:Ee.heading,class:"tok-heading"},{tag:Ee.emphasis,class:"tok-emphasis"},{tag:Ee.strong,class:"tok-strong"},{tag:Ee.keyword,class:"tok-keyword"},{tag:Ee.atom,class:"tok-atom"},{tag:Ee.bool,class:"tok-bool"},{tag:Ee.url,class:"tok-url"},{tag:Ee.labelName,class:"tok-labelName"},{tag:Ee.inserted,class:"tok-inserted"},{tag:Ee.deleted,class:"tok-deleted"},{tag:Ee.literal,class:"tok-literal"},{tag:Ee.string,class:"tok-string"},{tag:Ee.number,class:"tok-number"},{tag:[Ee.regexp,Ee.escape,Ee.special(Ee.string)],class:"tok-string2"},{tag:Ee.variableName,class:"tok-variableName"},{tag:Ee.local(Ee.variableName),class:"tok-variableName tok-local"},{tag:Ee.definition(Ee.variableName),class:"tok-variableName tok-definition"},{tag:Ee.special(Ee.variableName),class:"tok-variableName2"},{tag:Ee.definition(Ee.propertyName),class:"tok-propertyName tok-definition"},{tag:Ee.typeName,class:"tok-typeName"},{tag:Ee.namespace,class:"tok-namespace"},{tag:Ee.className,class:"tok-className"},{tag:Ee.macroName,class:"tok-macroName"},{tag:Ee.propertyName,class:"tok-propertyName"},{tag:Ee.operator,class:"tok-operator"},{tag:Ee.comment,class:"tok-comment"},{tag:Ee.meta,class:"tok-meta"},{tag:Ee.invalid,class:"tok-invalid"},{tag:Ee.punctuation,class:"tok-punctuation"}]);var Qg;const Ka=new Ie;function vj(t){return le.define({combine:t?e=>e.concat(t):void 0})}const wj=new Ie;class Bi{constructor(e,n,i=[],r=""){this.data=e,this.name=r,De.prototype.hasOwnProperty("tree")||Object.defineProperty(De.prototype,"tree",{get(){return Ki(this)}}),this.parser=n,this.extension=[Ul.of(this),De.languageData.of((s,o,a)=>{let l=Tk(s,o,a),u=l.type.prop(Ka);if(!u)return[];let c=s.facet(u),d=l.type.prop(wj);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return Tk(e,n,i).type.prop(Ka)==this.data}findRegions(e){let n=e.facet(Ul);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Ka)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(Ie.mounted);if(a){if(a.tree.prop(Ka)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof pt&&r(u,s.positions[l]+o)}};return r(Ki(e),0),i}get allowsNesting(){return!0}}Bi.setState=Ne.define();function Tk(t,e,n){let i=t.facet(Ul),r=Ki(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Wt.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Ki(t){let e=t.field(Bi.state,!1);return e?e.tree:pt.empty}class xj{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let bu=null;class jl{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new jl(e,n,[],pt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new xj(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=pt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Uo.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Uo.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=bu;bu=this;try{return e()}finally{bu=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Ok(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),i=Uo.applyChanges(i,l),r=pt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new jl(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=Ok(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends SO{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=bu;if(l){for(let u of r)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new pt(In.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return bu}}function Ok(t,e,n){return Uo.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Vl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Vl(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=jl.create(e.facet(Ul).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Vl(i)}}Bi.state=an.define({create:Vl.init,update(t,e){for(let n of e.effects)if(n.is(Bi.setState))return n.value;return e.startState.facet(Ul)!=e.state.facet(Ul)?Vl.init(e.state):t.apply(e)}});let CO=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(CO=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const e0=typeof navigator<"u"&&(!((Qg=navigator.scheduling)===null||Qg===void 0)&&Qg.isInputPending)?()=>navigator.scheduling.isInputPending():null,bj=Yt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Bi.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Bi.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=CO(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Bi.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!e0?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>e0&&e0()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Bi.setState.of(new Vl(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>ji(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ul=le.define({combine(t){return t.length?t[0]:null},enables:t=>[Bi.state,bj,fe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Sj{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const AO=le.define(),P1=le.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function oa(t){let e=t.facet(P1);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function mp(t,e){let n="",i=t.tabSize,r=t.facet(P1)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function PO(t,e){t instanceof De&&(t=new R1(t));for(let i of t.state.facet(AO)){let r=i(t,e);if(r!==void 0)return r}let n=Ki(t.state);return n?Ej(t,n,e):null}class R1{constructor(e,n={}){this.state=e,this.options=n,this.unit=oa(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Yp(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const kj=new Ie;function Ej(t,e,n){return RO(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function Cj(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Aj(t){let e=t.type.prop(kj);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(Ie.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Oj(o,!0,1,void 0,s&&!Cj(o)?r.from:void 0)}return t.parent==null?Pj:null}function RO(t,e,n){for(;t;t=t.parent){let i=Aj(t);if(i)return i(T1.create(n,e,t))}return null}function Pj(){return 0}class T1 extends R1{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.node=i}static create(e,n,i){return new T1(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Rj(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?RO(e,this.pos,this.base):0}}function Rj(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Tj(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function Oj(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=e?Tj(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const _j=200;function Nj(){return De.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+_j)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let d=PO(o,c.from);if(d==null)continue;let h=/^\s*/.exec(c.text)[0],f=mp(o,d);h!=f&&l.push({from:c.from,to:c.from+h.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const Mj=le.define(),Dj=new Ie;function $j(t,e,n){let i=Ki(t);if(i.length<n)return null;let r=i.resolveInner(n,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(Dj);if(a&&(o.to<i.length-50||i.length==t.doc.length||!Lj(o))){let l=a(o,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(s=l)}}return s}function Lj(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function TO(t,e,n){for(let i of t.facet(Mj)){let r=i(t,e,n);if(r)return r}return $j(t,e,n)}function OO(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const O1=Ne.define({map:OO}),bm=Ne.define({map:OO});function _O(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const pd=an.define({create(){return ze.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(O1)&&!Ij(t,n.value.from,n.value.to)?t=t.update({add:[_k.range(n.value.from,n.value.to)]}):n.is(bm)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>fe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(_k.range(i,r))}return ze.set(e,!0)}});function NO(t,e,n){var i;let r=null;return(i=t.field(pd,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function Ij(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function MO(t,e){return t.field(pd,!1)?e:e.concat(Ne.appendConfig.of(Uj()))}const Bj=t=>{for(let e of _O(t)){let n=TO(t.state,e.from,e.to);if(n)return t.dispatch({effects:MO(t.state,[O1.of(n),DO(t,n)])}),!0}return!1},zj=t=>{if(!t.state.field(pd,!1))return!1;let e=[];for(let n of _O(t)){let i=NO(t.state,n.from,n.to);i&&e.push(bm.of(i),DO(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function DO(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return fe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const Fj=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=TO(e,r.from,r.to);s&&n.push(O1.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:MO(t.state,n)}),!!n.length},jj=t=>{let e=t.state.field(pd,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(bm.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},Vj={placeholderDOM:null,placeholderText:"…"},$O=le.define({combine(t){return mo(t,Vj)}});function Uj(t){let e=[pd,Wj];return t&&e.push($O.of(t)),e}const _k=ze.replace({widget:new class extends da{toDOM(t){let{state:e}=t,n=e.facet($O),i=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),a=NO(t.state,o.from,o.to);a&&t.dispatch({effects:bm.of(a)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),Wj=fe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Sm{constructor(e,n){this.specs=e;let i;function r(a){let l=to.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof Bi?a=>a.prop(Ka)==o.data:o?a=>a==o:void 0,this.style=EO(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new to(i):null,this.themeType=n.themeType}static define(e,n){return new Sm(e,n||{})}}const gv=le.define(),LO=le.define({combine(t){return t.length?[t[0]]:null}});function t0(t){let e=t.facet(gv);return e.length?e:t.facet(LO)}function Hj(t,e){let n=[Xj],i;return t instanceof Sm&&(t.module&&n.push(fe.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(LO.of(t)):i?n.push(gv.computeN([fe.darkTheme],r=>r.facet(fe.darkTheme)==(i=="dark")?[t]:[])):n.push(gv.of(t)),n}class Gj{constructor(e){this.markCache=Object.create(null),this.tree=Ki(e.state),this.decorations=this.buildDeco(e,t0(e.state))}update(e){let n=Ki(e.state),i=t0(e.state),r=i!=t0(e.startState);n.length<e.view.viewport.to&&!r&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,n){if(!n||!this.tree.length)return ze.none;let i=new qo;for(let{from:r,to:s}of e.visibleRanges)mj(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=ze.mark({class:l})))},r,s);return i.finish()}}const Xj=rd.high(Yt.fromClass(Gj,{decorations:t=>t.decorations})),Kj=1e4,Zj="()[]{}",Yj=new Ie;function yv(t,e,n){let i=t.prop(e<0?Ie.openedBy:Ie.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function vv(t){let e=t.type.prop(Yj);return e?e(t.node):t}function hh(t,e,n,i={}){let r=i.maxScanDistance||Kj,s=i.brackets||Zj,o=Ki(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=yv(l.type,n,s);if(u&&l.from<l.to){let c=vv(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return Jj(t,e,n,l,c,u,s)}}return qj(t,e,n,o,a.type,r,s)}function Jj(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=vv(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(yv(c.type,n,o))u++;else if(yv(c.type,-n,o)){if(u==0){let d=vv(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function qj(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let m=n>0?0:f.length-1,v=n>0?f.length:-1;m!=v;m+=n){let g=o.indexOf(f[m]);if(!(g<0||i.resolveInner(p+m,1).type!=r))if(g%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+m,to:p+m+1},matched:g>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function Nk(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class IO{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Nk(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Nk(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function Qj(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||e7,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||M1}}function e7(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const Mk=new WeakMap;class _1 extends Bi{constructor(e){let n=vj(e.languageData),i=Qj(e),r,s=new class extends SO{createParse(o,a,l){return new n7(r,o,a,l)}};super(n,s,[AO.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=s7(n),r=this,this.streamParser=i,this.stateAfter=new Ie({perNode:!0}),this.tokenTable=e.tokenTable?new jO(i.tokenTable):r7}static define(e){return new _1(e)}getIndent(e,n){let i=Ki(e.state),r=i.resolve(n);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=Mk.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=N1(this,i,0,r.from,s??n),l,u;if(a?(u=a.state,l=a.pos+1):(u=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),h=Math.min(n,d.to);if(d.length){let f=o?o(d.from):-1,p=new IO(d.text,e.state.tabSize,e.unit,f<0?void 0:f);for(;p.pos<h-d.from;)zO(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==n)break;l=d.to+1}let c=e.lineAt(n);return o&&s==null&&Mk.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function N1(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof pt&&l<r&&N1(t,a,l,i,r);if(u)return u}return null}function BO(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof pt){if(!(l=BO(t,a,n-o,i-o,r)))break;return r?new pt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function t7(t,e,n,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),a=s<=n&&o>n&&N1(t,r.tree,0-r.offset,n,o),l;if(a&&(l=BO(t,r.tree,n+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(i?oa(i):4),tree:pt.empty}}class n7{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=jl.get(),o=r[0].from,{state:a,tree:l}=t7(e,i,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(oa(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=jl.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,n,i,r),s}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new IO(n,e?e.state.tabSize:4,e?oa(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=zO(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=pt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:i7,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new pt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new pt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function zO(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const M1=Object.create(null),Zc=[In.none],i7=new k1(Zc),Dk=[],FO=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])FO[t]=VO(M1,e);class jO{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),FO)}resolve(e){return e?this.table[e]||(this.table[e]=VO(this.extra,e)):0}}const r7=new jO(M1);function n0(t,e){Dk.indexOf(t)>-1||(Dk.push(t),console.warn(e))}function VO(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||Ee[s];o?typeof o=="function"?n?n=o(n):n0(s,`Modifier ${s} used at start of tag`):n?n0(s,`Tag ${s} used as modifier`):n=o:n0(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let i=e.replace(/ /g,"_"),r=In.define({id:Zc.length,name:i,props:[fj({[i]:n})]});return Zc.push(r),r.id}function s7(t){let e=In.define({id:Zc.length,name:"Document",props:[Ka.add(()=>t)]});return Zc.push(e),e}const o7=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=D1(t.state,n.from);return i.line?a7(t):i.block?d7(t):!1};function md(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const a7=md($1,0),l7=md($1,1),u7=md($1,2),c7=md(UO,0),d7=md((t,e)=>UO(t,e,f7(e)),0);function D1(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Su=50;function h7(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Su,i),o=t.sliceDoc(r,r+Su),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,d;r-i<=2*Su?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+Su),d=t.sliceDoc(r-Su,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function f7(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function UO(t,e,n=e.selection.ranges){let i=n.map(s=>D1(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>h7(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function $1(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,u=D1(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const wv=hs.define(),p7=hs.define(),m7=le.define(),WO=le.define({combine(t){return mo(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}});function g7(t){let e=0;return t.iterChangedRanges((n,i)=>e=i),e}const HO=an.define({create(){return mr.empty},update(t,e){let n=e.state.facet(WO),i=e.annotation(wv);if(i){let l=e.docChanged?V.single(g7(e.changes)):void 0,u=_n.fromTransaction(e,l),c=i.side,d=c==0?t.undone:t.done;return u?d=gp(d,d.length,n.minDepth,u):d=KO(d,e.startState.selection),new mr(c==0?i.rest:d,c==0?d:i.rest)}let r=e.annotation(p7);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Lt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=_n.fromTransaction(e),o=e.annotation(Lt.time),a=e.annotation(Lt.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new mr(t.done.map(_n.fromJSON),t.undone.map(_n.fromJSON))}});function y7(t={}){return[HO,WO.of(t),fe.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?GO:e.inputType=="historyRedo"?xv:null;return i?(e.preventDefault(),i(n)):!1}})]}function L1(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(HO,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const GO=L1(0,!1),xv=L1(1,!1),v7=L1(0,!0);class _n{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new _n(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new _n(e.changes&&Mt.fromJSON(e.changes),[],e.mapped&&vr.fromJSON(e.mapped),e.startSelection&&V.fromJSON(e.startSelection),e.selectionsAfter.map(V.fromJSON))}static fromTransaction(e,n){let i=yi;for(let r of e.startState.facet(m7)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new _n(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,yi)}static selection(e){return new _n(void 0,yi,void 0,void 0,e)}}function gp(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function w7(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(i=!0)}}),i}function x7(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function XO(t,e){return t.length?e.length?t.concat(e):t:e}const yi=[],b7=200;function KO(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-b7));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),gp(t,t.length-1,1e9,n.setSelAfter(i)))}else return[_n.selection([e])]}function S7(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function i0(t,e){if(!t.length)return t;let n=t.length,i=yi;for(;n;){let r=k7(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[_n.selection(i)]:yi}function k7(t,e,n){let i=XO(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):yi,n);if(!t.changes)return _n.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new _n(r,Ne.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const E7=/^(input\.type|delete)($|\.)/;class mr{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new mr(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||E7.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,w7(a.changes,e.changes))||i=="input.type.compose")?o=gp(o,o.length-1,r.minDepth,new _n(e.changes.compose(a.changes),XO(e.effects,a.effects),a.mapped,a.startSelection,yi)):o=gp(o,o.length,r.minDepth,e),new mr(o,yi,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:yi;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&x7(s[s.length-1],e)?this:new mr(KO(this.done,e),this.undone,n,i)}addMapping(e){return new mr(i0(this.done,e),i0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:wv.of({side:e,rest:S7(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?yi:r.slice(0,r.length-1);return s.mapped&&(o=i0(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:wv.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}mr.empty=new mr(yi,yi);function gd(t,e){return V.create(t.ranges.map(e),t.mainIndex)}function go(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ma({state:t,dispatch:e},n){let i=gd(t.selection,n);return i.eq(t.selection)?!1:(e(go(t,i)),!0)}function km(t,e){return V.cursor(e?t.to:t.from)}function ZO(t,e){return ma(t,n=>n.empty?t.moveByChar(n,e):km(n,e))}function yo(t){return t.textDirectionAt(t.state.selection.main.head)==ft.LTR}const $k=t=>ZO(t,!yo(t)),Lk=t=>ZO(t,yo(t));function YO(t,e){return ma(t,n=>n.empty?t.moveByGroup(n,e):km(n,e))}const C7=t=>YO(t,!yo(t)),A7=t=>YO(t,yo(t));function JO(t,e){return ma(t,n=>{if(!n.empty)return km(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const Ik=t=>JO(t,!1),Bk=t=>JO(t,!0);function qO(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(fe.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function QO(t,e){let n=qO(t),{state:i}=t,r=gd(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):km(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=fe.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(go(i,r),{effects:s}),!0}const r0=t=>QO(t,!1),s0=t=>QO(t,!0);function Em(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=V.cursor(i.from+s))}return r}const zk=t=>ma(t,e=>Em(t,e,!0)),Fk=t=>ma(t,e=>Em(t,e,!1)),P7=t=>ma(t,e=>V.cursor(t.lineBlockAt(e.head).from,1)),R7=t=>ma(t,e=>V.cursor(t.lineBlockAt(e.head).to,-1));function T7(t,e,n){let i=!1,r=gd(t.selection,s=>{let o=hh(t,s.head,-1)||hh(t,s.head,1)||s.head>0&&hh(t,s.head-1,1)||s.head<t.doc.length&&hh(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?V.range(s.anchor,a):V.cursor(a)});return i?(e(go(t,r)),!0):!1}const O7=({state:t,dispatch:e})=>T7(t,e,!1);function vo(t,e){let n=gd(t.state.selection,i=>{let r=e(i);return V.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(go(t.state,n)),!0)}function e_(t,e){return vo(t,n=>t.moveByChar(n,e))}const jk=t=>e_(t,!yo(t)),Vk=t=>e_(t,yo(t));function t_(t,e){return vo(t,n=>t.moveByGroup(n,e))}const _7=t=>t_(t,!yo(t)),N7=t=>t_(t,yo(t));function n_(t,e){return vo(t,n=>t.moveVertically(n,e))}const Uk=t=>n_(t,!1),Wk=t=>n_(t,!0);function i_(t,e){return vo(t,n=>t.moveVertically(n,e,qO(t).height))}const Hk=t=>i_(t,!1),Gk=t=>i_(t,!0),Xk=t=>vo(t,e=>Em(t,e,!0)),Kk=t=>vo(t,e=>Em(t,e,!1)),M7=t=>vo(t,e=>V.cursor(t.lineBlockAt(e.head).from)),D7=t=>vo(t,e=>V.cursor(t.lineBlockAt(e.head).to)),Zk=({state:t,dispatch:e})=>(e(go(t,{anchor:0})),!0),Yk=({state:t,dispatch:e})=>(e(go(t,{anchor:t.doc.length})),!0),Jk=({state:t,dispatch:e})=>(e(go(t,{anchor:t.selection.main.anchor,head:0})),!0),qk=({state:t,dispatch:e})=>(e(go(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),$7=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),L7=({state:t,dispatch:e})=>{let n=Am(t).map(({from:i,to:r})=>V.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:V.create(n),userEvent:"select"})),!0};function Cm(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(n="delete.backward",l=fh(t,l,!1)):l>o&&(n="delete.forward",l=fh(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=fh(t,o,!1),a=fh(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:V.cursor(o)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?fe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function fh(t,e,n){if(t instanceof fe)for(let i of t.state.facet(fe.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const r_=(t,e)=>Cm(t,n=>{let{state:i}=t,r=i.doc.lineAt(n),s,o;if(!e&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,n-r.from))){if(s[s.length-1]=="	")return n-1;let a=Yp(s,i.tabSize),l=a%oa(i)||oa(i);for(let u=0;u<l&&s[s.length-1-u]==" ";u++)n--;o=n}else o=rn(r.text,n-r.from,e,e)+r.from,o==n&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),o0=t=>r_(t,!1),Qk=t=>r_(t,!0),s_=(t,e)=>Cm(t,n=>{let i=n,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=rn(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||i!=n)&&(a=c),i=l}return i}),eE=t=>s_(t,!1),I7=t=>s_(t,!0),tE=t=>Cm(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),B7=t=>Cm(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),z7=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ve.of(["",""])},range:V.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},F7=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:rn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:rn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:V.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Am(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function o_(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Am(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(V.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(V.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:V.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const j7=({state:t,dispatch:e})=>o_(t,e,!1),V7=({state:t,dispatch:e})=>o_(t,e,!0);function a_(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Am(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const U7=({state:t,dispatch:e})=>a_(t,e,!1),W7=({state:t,dispatch:e})=>a_(t,e,!0),H7=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Am(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=gd(e.selection,r=>t.moveVertically(r,!0)).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function G7(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Ki(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(Ie.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const nE=X7(!1);function X7(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&G7(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new R1(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=PO(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",mp(e,c)];return l&&d.push(mp(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ve.of(d)},range:V.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function l_(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:V.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const iE=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(l_(t,(n,i)=>{i.push({from:n.from,insert:t.facet(P1)})}),{userEvent:"input.indent"})),!0),rE=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(l_(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Yp(r,t.tabSize),o=0,a=mp(t,Math.max(0,s-oa(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function Ye(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)u_(t,arguments[e]);return t}function u_(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)u_(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const sE=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Yc{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(sE(a)):sE,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return fn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Ow(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=$i(e);let r=this.normalize(n);for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:n+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(Yc.prototype[Symbol.iterator]=function(){return this});const c_={from:-1,to:-1,match:/.*/.exec("")},I1="gm"+(/x/.unicode==null?"":"u");class d_{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=c_,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new h_(e,n,i,r,s);this.re=new RegExp(n,I1+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=yp(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=yp(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const a0=new WeakMap;class hl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=a0.get(e);if(!r||r.from>=i||r.to<=n){let a=new hl(n,e.sliceString(n,i));return a0.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),a0.set(e,new hl(o,s)),new hl(n,s.slice(n-o,i-o))}}class h_{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=c_,this.matchPos=yp(e,r),this.re=new RegExp(n,I1+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=hl.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=yp(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=hl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(d_.prototype[Symbol.iterator]=h_.prototype[Symbol.iterator]=function(){return this});function K7(t){try{return new RegExp(t,I1),!0}catch{return!1}}function yp(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function bv(t){let e=Ye("input",{class:"cm-textfield",name:"line"}),n=Ye("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:vp.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},Ye("label",t.state.phrase("Go to line"),": ",e)," ",Ye("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,a,l,u,c]=r,d=u?+u.slice(1):0,h=l?+l:o.number;if(l&&c){let m=h/100;a&&(m=m*(a=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*m)}else l&&a&&(h=h*(a=="-"?-1:1)+o.number);let f=s.doc.line(Math.max(1,Math.min(s.doc.lines,h))),p=V.cursor(f.from+Math.max(0,Math.min(d,f.length)));t.dispatch({effects:[vp.of(!1),fe.scrollIntoView(p.from,{y:"center"})],selection:p}),t.focus()}return{dom:n}}const vp=Ne.define(),oE=an.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(vp)&&(t=n.value);return t},provide:t=>_l.from(t,e=>e?bv:null)}),Z7=t=>{let e=Cc(t,bv);if(!e){let n=[vp.of(!0)];t.state.field(oE,!1)==null&&n.push(Ne.appendConfig.of([oE,Y7])),t.dispatch({effects:n}),e=Cc(t,bv)}return e&&e.dom.querySelector("input").focus(),!0},Y7=fe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),J7=({state:t,dispatch:e})=>{let{selection:n}=t,i=V.create(n.ranges.map(r=>t.wordAt(r.head)||V.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function q7(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Yc(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Yc(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Q7=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return J7({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=q7(t,i);return r?(e(t.update({selection:t.selection.addRange(V.range(r.from,r.to),!1),effects:fe.scrollIntoView(r.to)})),!0):!1},tu=le.define({combine(t){return mo(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new lV(e),scrollToMatch:e=>fe.scrollIntoView(e)})}});class f_{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||K7(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new iV(this):new tV(this)}getCursor(e,n=0,i){let r=e.doc?e:De.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?_a(this,r,n,i):Oa(this,r,n,i)}}class p_{constructor(e){this.spec=e}}function Oa(t,e,n,i){return new Yc(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?eV(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function eV(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(wp(r,n-s))!=Xt.Word||e(xp(r,n-s))!=Xt.Word)&&(e(xp(r,i-s))!=Xt.Word||e(wp(r,i-s))!=Xt.Word))}class tV extends p_{constructor(e){super(e)}nextMatch(e,n,i){let r=Oa(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=Oa(this.spec,e,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Oa(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Oa(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Oa(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function _a(t,e,n,i){return new d_(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?nV(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function wp(t,e){return t.slice(rn(t,e,!1),e)}function xp(t,e){return t.slice(e,rn(t,e))}function nV(t){return(e,n,i)=>!i[0].length||(t(wp(i.input,i.index))!=Xt.Word||t(xp(i.input,i.index))!=Xt.Word)&&(t(xp(i.input,i.index+i[0].length))!=Xt.Word||t(wp(i.input,i.index+i[0].length))!=Xt.Word)}class iV extends p_{nextMatch(e,n,i){let r=_a(this.spec,e,i,e.doc.length).next();return r.done&&(r=_a(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=_a(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n))}matchAll(e,n){let i=_a(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=_a(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Jc=Ne.define(),B1=Ne.define(),Js=an.define({create(t){return new l0(Sv(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Jc)?t=new l0(n.value.create(),t.panel):n.is(B1)&&(t=new l0(t.query,n.value?z1:null));return t},provide:t=>_l.from(t,e=>e.panel)});class l0{constructor(e,n){this.query=e,this.panel=n}}const rV=ze.mark({class:"cm-searchMatch"}),sV=ze.mark({class:"cm-searchMatch cm-searchMatch-selected"}),oV=Yt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Js))}update(t){let e=t.state.field(Js);(e!=t.startState.field(Js)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return ze.none;let{view:n}=this,i=new qo;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?sV:rV)})}return i.finish()}},{decorations:t=>t.decorations});function yd(t){return e=>{let n=e.state.field(Js,!1);return n&&n.query.spec.valid?t(e,n):w_(e)}}const aE=yd((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=V.single(i.from,i.to),s=t.state.facet(tu);return t.dispatch({selection:r,effects:[F1(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),v_(t),!0}),lE=yd((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=V.single(r.from,r.to),o=t.state.facet(tu);return t.dispatch({selection:s,effects:[F1(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),v_(t),!0}),m_=yd((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:V.create(n.map(i=>V.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),aV=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Yc(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(V.range(a.value.from,a.value.to))}return e(t.update({selection:V.create(s,o),userEvent:"select.search.matches"})),!0},uE=yd((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=[],a,l,u=[];if(s.from==i&&s.to==r&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),u.push(fe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=V.single(s.from-c,s.to-c),u.push(F1(t,s)),u.push(n.facet(tu).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:u,userEvent:"input.replace"}),!0}),g_=yd((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:fe.announce.of(i),userEvent:"input.replace.all"}),!0});function z1(t){return t.state.facet(tu).createPanel(t)}function Sv(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(tu);return new f_({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function y_(t){let e=Cc(t,z1);return e&&e.dom.querySelector("[main-field]")}function v_(t){let e=y_(t);e&&e==t.root.activeElement&&e.select()}const w_=t=>{let e=t.state.field(Js,!1);if(e&&e.panel){let n=y_(t);if(n&&n!=t.root.activeElement){let i=Sv(t.state,e.query.spec);i.valid&&t.dispatch({effects:Jc.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[B1.of(!0),e?Jc.of(Sv(t.state,e.query.spec)):Ne.appendConfig.of(cV)]});return!0},x_=t=>{let e=t.state.field(Js,!1);if(!e||!e.panel)return!1;let n=Cc(t,z1);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:B1.of(!1)}),!0};class lV{constructor(e){this.view=e;let n=this.query=e.state.field(Js).query.spec;this.commit=this.commit.bind(this),this.searchField=Ye("input",{value:n.search,placeholder:zn(e,"Find"),"aria-label":zn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ye("input",{value:n.replace,placeholder:zn(e,"Replace"),"aria-label":zn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ye("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Ye("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Ye("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Ye("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Ye("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>aE(e),[zn(e,"next")]),i("prev",()=>lE(e),[zn(e,"previous")]),i("select",()=>m_(e),[zn(e,"all")]),Ye("label",null,[this.caseField,zn(e,"match case")]),Ye("label",null,[this.reField,zn(e,"regexp")]),Ye("label",null,[this.wordField,zn(e,"by word")]),...e.state.readOnly?[]:[Ye("br"),this.replaceField,i("replace",()=>uE(e),[zn(e,"replace")]),i("replaceAll",()=>g_(e),[zn(e,"replace all")])],Ye("button",{name:"close",onclick:()=>x_(e),"aria-label":zn(e,"close"),type:"button"},["×"])])}commit(){let e=new f_({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Jc.of(e)}))}keydown(e){k3(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?lE:aE)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),uE(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Jc)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(tu).top}}function zn(t,e){return t.state.phrase(e)}const ph=30,mh=/[\s\.,:;?!]/;function F1(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-ph),o=Math.min(r,n+ph),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<ph;l++)if(!mh.test(a[l+1])&&mh.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-ph;l--)if(!mh.test(a[l-1])&&mh.test(a[l])){a=a.slice(0,l);break}}return fe.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const uV=fe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),cV=[Js,rd.lowest(oV),uV];class dV{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=Ki(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(b_(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function cE(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function hV(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=cE(e)+cE(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function fV(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:hV(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class dE{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function fl(t){return t.selection.main.from}function b_(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const pV=hs.define();function mV(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i)?{range:a}:{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:e},range:V.cursor(a.from+s+e.length)})),{userEvent:"input.complete"})}const hE=new WeakMap;function gV(t){if(!Array.isArray(t))return t;let e=hE.get(t);return e||hE.set(t,e=fV(t)),e}const S_=Ne.define(),j1=Ne.define();class yV{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=fn(e,n),r=$i(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(fn(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=fn(e,0),w=$i(y),x=w==e.length?0:-100;if(y!=n[0])if(y==i[0])x+=-200;else return!1;return this.ret(x,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<l;){let x=fn(e,y);(x==n[u]||x==i[u])&&(r[u++]=y),y+=$i(x)}if(u<l)return!1}let c=0,d=0,h=!1,f=0,p=-1,m=-1,v=/[a-z]/.test(e),g=!0;for(let y=0,w=Math.min(e.length,200),x=0;y<w&&d<l;){let k=fn(e,y);a<0&&(c<l&&k==n[c]&&(s[c++]=y),f<l&&(k==n[f]||k==i[f]?(f==0&&(p=y),m=y+1,f++):f=0));let A,P=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(A=Ow(k))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!y||P==1&&v||x==0&&P!=0)&&(n[d]==k||i[d]==k&&(h=!0)?o[d++]=y:o.length&&(g=!1)),x=P,y+=$i(k)}return d==l&&o[0]==0&&g?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-200+-700-e.length,[p,m]):d==l?this.result(-100+(h?-200:0)+-700+(g?0:-1100),o,e):n.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?$i(fn(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}const Hr=le.define({combine(t){return mo(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:vV,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>fE(e(i),n(i)),optionClass:(e,n)=>i=>fE(e(i),n(i)),addToOptions:(e,n)=>e.concat(n)})}});function fE(t,e){return t?e?t+" "+e:t:e}function vV(t,e,n,i,r){let s=t.textDirection==ft.RTL,o=s,a=!1,l="top",u,c,d=e.left-r.left,h=r.right-e.right,f=i.right-i.left,p=i.bottom-i.top;if(o&&d<Math.min(f,h)?o=!1:!o&&h<Math.min(f,d)&&(o=!0),f<=(o?d:h))u=Math.max(r.top,Math.min(n.top,r.bottom-p))-e.top,c=Math.min(400,o?d:h);else{a=!0,c=Math.min(400,(s?e.right:r.right-e.left)-30);let m=r.bottom-e.bottom;m>=p||m>e.top?u=n.bottom-e.top:(l="bottom",u=e.bottom-n.top)}return{style:`${l}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":o?"left":"right")}}function wV(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r){let s=document.createElement("span");s.className="cm-completionLabel";let o=n.displayLabel||n.label,a=0;for(let l=0;l<r.length;){let u=r[l++],c=r[l++];u>a&&s.appendChild(document.createTextNode(o.slice(a,u)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(u,c))),d.className="cm-completionMatchedText",a=c}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function pE(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class xV{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(Hr);this.optionContent=wV(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=pE(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let u=l.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<s.length){this.applyCompletion(e,s[+c[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Hr).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:j1.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,i,r;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=s.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=pE(n.options.length,n.selected,this.view.state.facet(Hr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>ji(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&SV(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Hr).positionInfo(this.view,n,r,i,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,l);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function bV(t,e){return n=>new xV(n,t,e)}function SV(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<n.top?t.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(t.scrollTop+=i.bottom-n.bottom)}function mE(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function kV(t,e){let n=[],i=null,r=l=>{n.push(l);let{section:u}=l.completion;if(u){i||(i=[]);let c=typeof u=="string"?u:u.name;i.some(d=>d.name==c)||i.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult()){let u=l.result.getMatch;if(l.result.filter===!1)for(let c of l.result.options)r(new dE(c,l.source,u?u(c):[],1e9-n.length));else{let c=new yV(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(c.match(d.label)){let h=d.displayLabel?u?u(d,c.matched):[]:c.matched;r(new dE(d,l.source,h,c.score+(d.boost||0)))}}}if(i){let l=Object.create(null),u=0,c=(d,h)=>{var f,p;return((f=d.rank)!==null&&f!==void 0?f:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(d.name<h.name?-1:1)};for(let d of i.sort(c))u-=1e5,l[d.name]=u;for(let d of n){let{section:h}=d.completion;h&&(d.score+=l[typeof h=="string"?h:h.name])}}let s=[],o=null,a=e.facet(Hr).compareCompletions;for(let l of n.sort((u,c)=>c.score-u.score||a(u.completion,c.completion))){let u=l.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?s.push(l):mE(l.completion)>mE(o)&&(s[s.length-1]=l),o=l.completion}return s}class Za{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Za(this.options,gE(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s){let o=kV(e,n);if(!o.length)return r&&e.some(l=>l.state==1)?new Za(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let a=n.facet(Hr).selectOnOpen?0:-1;if(r&&r.selected!=a&&r.selected!=-1){let l=r.options[r.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){a=u;break}}return new Za(o,gE(i,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:bV(nu,E_),above:s.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new Za(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class bp{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new bp(AV,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Hr),s=(i.override||n.languageDataAt("autocomplete",fl(n)).map(gV)).map(a=>(this.active.find(u=>u.source==a)||new Zn(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!EV(s,this.active)?o=Za.build(s,n,this.id,o,i):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Zn(a.source,0):a));for(let a of e.effects)a.is(k_)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new bp(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:CV}}function EV(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const CV={"aria-autocomplete":"list"};function gE(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const AV=[];function PV(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Zn{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=PV(e),r=this;i?r=r.handleUserEvent(e,i,n):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new Zn(r.source,0));for(let s of e.effects)if(s.is(S_))r=new Zn(r.source,1,s.value?fl(e.state):-1);else if(s.is(j1))r=new Zn(r.source,0);else if(s.is(TV))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new Zn(this.source,1)}handleChange(e){return e.changes.touchesRange(fl(e.startState))?new Zn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Zn(this.source,this.state,e.mapPos(this.explicitPos))}}class ec extends Zn{constructor(e,n,i,r,s){super(e,2,n),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,n,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=fl(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&fl(e.startState)==this.from)return new Zn(this.source,n=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return RV(this.result.validFor,e.state,s,o)?new ec(this.source,l,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new dV(e.state,a,l>=0)))?new ec(this.source,l,u,u.from,(r=u.to)!==null&&r!==void 0?r:fl(e.state)):new Zn(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Zn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ec(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function RV(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):b_(t,!0).test(r)}const TV=Ne.define({map(t,e){return t.map(n=>n.map(e))}}),k_=Ne.define(),nu=an.define({create(){return bp.start()},update(t,e){return t.update(e)},provide:t=>[Fw.from(t,e=>e.tooltip),fe.contentAttributes.from(t,e=>e.attrs)]});function E_(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(nu).active.find(r=>r.source==e.source);return i instanceof ec?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},mV(t.state,n,i.from,i.to)),{annotations:pV.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}function gh(t,e="option"){return n=>{let i=n.state.field(nu,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Hr).interactionDelay)return!1;let r=1,s;e=="page"&&(s=n5(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:k_.of(a)}),!0}}const yE=t=>{let e=t.state.field(nu,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Hr).interactionDelay?!1:E_(t,e.open.options[e.open.selected])},OV=t=>t.state.field(nu,!1)?(t.dispatch({effects:S_.of(!0)}),!0):!1,_V=t=>{let e=t.state.field(nu,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:j1.of(null)}),!0)},C_={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},A_=new class extends Jo{};A_.startSide=1;A_.endSide=-1;const u0="()[]{}<>";function NV(t){for(let e=0;e<u0.length;e+=2)if(u0.charCodeAt(e)==t)return u0.charAt(e+1);return Ow(t<128?t:t+1)}function MV(t,e){return t.languageDataAt("closeBrackets",e)[0]||C_}const DV=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=MV(t,t.selection.main.head).brackets||C_.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=LV(t.doc,o.head);for(let l of i)if(l==a&&$V(t.doc,o.head)==NV(fn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:V.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function $V(t,e){let n=t.sliceString(e,e+2);return n.slice(0,$i(fn(n,0)))}function LV(t,e){let n=t.sliceString(e-2,e);return $i(fn(n,0))==n.length?n:n.slice(1)}class IV{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class To{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(Lo).markerFilter;s&&(r=s(r));let o=ze.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?ze.widget({widget:new KV(a),diagnostic:a}).range(a.from):ze.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new To(o,n,Wl(o))}}function Wl(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new IV(r,s,o.diagnostic),!1}),i}function BV(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(i=>i.is(V1))||t.changes.touchesRange(n.from,n.to))}function P_(t,e){return t.field(Nn,!1)?e:e.concat(Ne.appendConfig.of(__))}function zV(t,e){return{effects:P_(t,[V1.of(e)])}}const V1=Ne.define(),U1=Ne.define(),R_=Ne.define(),Nn=an.define({create(){return new To(ze.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=Wl(n,t.selected.diagnostic,r)||Wl(n,null,r)}t=new To(n,t.panel,i)}for(let n of e.effects)n.is(V1)?t=To.init(n.value,t.panel,e.state):n.is(U1)?t=new To(t.diagnostics,n.value?Pm.open:null,t.selected):n.is(R_)&&(t=new To(t.diagnostics,t.panel,n.value));return t},provide:t=>[_l.from(t,e=>e.panel),fe.decorations.from(t,e=>e.diagnostics)]});function FV(t){let e=t.field(Nn,!1);return e?e.diagnostics.size:0}const jV=ze.mark({class:"cm-lintRange cm-lintRange-active"});function VV(t,e,n){let{diagnostics:i}=t.state.field(Nn),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(Lo).tooltipFilter;return a&&(r=a(r)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:UV(t,r)}}}:null}function UV(t,e){return Ye("ul",{class:"cm-tooltip-lint"},e.map(n=>O_(t,n,!1)))}const WV=t=>{let e=t.state.field(Nn,!1);(!e||!e.panel)&&t.dispatch({effects:P_(t.state,[U1.of(!0)])});let n=Cc(t,Pm.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},vE=t=>{let e=t.state.field(Nn,!1);return!e||!e.panel?!1:(t.dispatch({effects:U1.of(!1)}),!0)},HV=t=>{let e=t.state.field(Nn,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},GV=Yt.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Lo);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Lo);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(zV(this.view.state,r))},i=>{ji(this.view.state,i)})}}update(t){let e=t.state.facet(Lo);(t.docChanged||e!=t.startState.facet(Lo)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Lo=le.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},mo(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function XV(t,e={}){return[Lo.of({source:t,config:e}),GV,__]}function T_(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function O_(t,e,n){var i;let r=n?T_(e.actions):[];return Ye("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ye("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=Wl(t.state.field(Nn).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),Ye("u",u.slice(c,c+1)),u.slice(c+1)];return Ye("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Ye("div",{class:"cm-diagnosticSource"},e.source))}class KV extends da{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ye("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class wE{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=O_(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Pm{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)vE(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=T_(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=Wl(this.view.state.field(Nn).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Ye("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Ye("div",{class:"cm-panel-lint"},this.list,Ye("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>vE(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Nn).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Nn),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new wE(this.view,l.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new wE(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Nn),i=Wl(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:R_.of(i)})}static open(e){return new Pm(e)}}function ZV(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function yh(t){return ZV(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const YV=fe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:yh("#d11")},".cm-lintRange-warning":{backgroundImage:yh("orange")},".cm-lintRange-info":{backgroundImage:yh("#999")},".cm-lintRange-hint":{backgroundImage:yh("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),__=[Nn,fe.decorations.compute([Nn],t=>{let{selected:e,panel:n}=t.field(Nn);return!e||!n||e.from==e.to?ze.none:ze.set([jV.range(e.from,e.to)])}),t5(VV,{hideOn:BV}),YV],N_=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},JV=N_("up"),qV=N_("down"),QV=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(V.range(s,s)):e=V.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},eU=[{key:"Ctrl-Space",run:OV},{key:"Escape",run:_V},{key:"ArrowDown",run:gh(!0)},{key:"ArrowUp",run:gh(!1)},{key:"PageDown",run:gh(!0,"page")},{key:"PageUp",run:gh(!1,"page")},{key:"Enter",run:yE},{key:"Tab",run:yE},{key:"Mod-f",run:w_,scope:"editor search-panel"},{key:"Escape",run:x_,scope:"editor search-panel"},{key:"Alt-Enter",run:m_,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:g_,scope:"editor search-panel"},{key:"Ctrl-g",run:Z7},{key:"Mod-d",run:Q7,preventDefault:!0},{key:"Shift-Mod-l",run:aV},{key:"Enter",run:nE,shift:nE},{key:"ArrowLeft",run:$k,shift:jk,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:C7,shift:_7},{key:"ArrowRight",run:Lk,shift:Vk,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:A7,shift:N7},{key:"ArrowUp",run:Ik,shift:Uk,preventDefault:!0},{key:"ArrowDown",run:Bk,shift:Wk,preventDefault:!0},{key:"Home",run:Fk,shift:Kk},{mac:"Cmd-ArrowLeft",run:Fk,shift:Kk},{key:"Mod-Home",run:Zk,shift:Jk},{mac:"Cmd-ArrowUp",run:Zk,shift:Jk},{key:"PageUp",run:r0,shift:Hk},{mac:"Ctrl-ArrowUp",run:r0,shift:Hk},{key:"PageDown",run:s0,shift:Gk},{mac:"Ctrl-ArrowDown",run:s0,shift:Gk},{key:"End",run:zk,shift:Xk},{mac:"Cmd-ArrowRight",run:zk,shift:Xk},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:JV,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:qV,preventDefault:!0},{key:"Shift-Alt-i",run:QV},{key:"Mod-End",run:Yk,shift:qk},{mac:"Cmd-ArrowDown",run:Yk,shift:qk},{key:"Mod-a",run:$7},{key:"Backspace",run:DV},{key:"Backspace",run:o0,shift:o0},{key:"Delete",run:Qk},{key:"Mod-Backspace",mac:"Alt-Backspace",run:eE},{key:"Mod-Delete",mac:"Alt-Delete",run:I7},{mac:"Mod-Backspace",run:B7},{mac:"Mod-Delete",run:tE},{mac:"Ctrl-b",run:$k,shift:jk,preventDefault:!0},{mac:"Ctrl-f",run:Lk,shift:Vk},{mac:"Ctrl-p",run:Ik,shift:Uk},{mac:"Ctrl-n",run:Bk,shift:Wk},{mac:"Ctrl-a",run:P7,shift:M7},{mac:"Ctrl-e",run:R7,shift:D7},{mac:"Ctrl-d",run:Qk},{mac:"Ctrl-h",run:o0},{mac:"Ctrl-k",run:tE},{mac:"Ctrl-Alt-h",run:eE},{mac:"Ctrl-o",run:z7},{mac:"Ctrl-t",run:F7},{mac:"Ctrl-v",run:s0},{mac:"Alt-v",run:r0},{key:"Shift-Mod-k",run:H7},{key:"Alt-ArrowDown",run:V7},{key:"Alt-ArrowUp",run:j7},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:W7},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:U7},{key:"Mod-l",run:L7,preventDefault:!0},{key:"Shift-Mod-\\",run:O7},{key:"Tab",run:iE,shift:rE,preventDefault:!0},{key:"Mod-[",run:rE},{key:"Mod-]",run:iE},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Bj},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:zj},{key:"Mod-k Mod-0",run:Fj},{key:"Mod-k Mod-j",run:jj},{key:"Mod-k Mod-c",run:l7},{key:"Mod-k Mod-u",run:u7},{key:"Mod-/",run:o7},{key:"Shift-Alt-a",run:c7},{key:"Mod-z",run:GO,preventDefault:!0},{key:"Mod-y",run:xv,preventDefault:!0},{key:"Mod-Shift-z",run:xv,preventDefault:!0},{key:"Mod-u",run:v7,preventDefault:!0},{key:"Mod-Shift-m",run:WV},{key:"F8",run:HV}];function tU(t){const e=document.createElement("div");return xE(t.state,e),{dom:e,update(n){xE(n.view.state,e)}}}function xE(t,e){const n=FV(t);e.textContent=Qp(os().language,"editor.lintSummary",n),e.className=nt("border-t border-stone-600 bg-stone-800 pr-3 text-right font-sans text-xs tracking-wider",n===0?"text-stone-400":"font-semibold text-red-400")}const M_="vonsim-program",nU=Yt.fromClass(class{constructor(t){Z(this,"timeout",null);this.view=t}update(t){t.docChanged&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=this.view.state.doc.toString();localStorage.setItem(M_,e),this.timeout=null},500))}}),iU=`; ¡Bienvenido a VonSim!
; Este es un ejemplo de código que calcula los primeros
; n números de la sucesión de Fibonacci, y se guardan a
; partir de la posición 1000h de la memoria.

     n EQU 10    ; Calcula los primeros 10 números

       ORG 1000h
inicio DB 1

       ORG 2000h
       MOV BX, OFFSET inicio + 1
       MOV AL, 0
       MOV AH, inicio

BUCLE: CMP BX, OFFSET inicio + n
       JNS FIN
       MOV CL, AH
       ADD CL, AL
       MOV AL, AH
       MOV AH, CL
       MOV [BX], CL
       INC BX
       JMP BUCLE
  FIN: HLT
       END
`,rU=localStorage.getItem(M_)||iU,Fn={comment:Ee.comment,"data-directive":Vt.define(),identifier:Ee.variableName,instruction:Vt.define(),label:Ee.labelName,number:Ee.number,operator:Ee.operator,offset:Vt.define(),"ptr-size":Vt.define(),punctuation:Ee.punctuation,register:Vt.define(),special:Vt.define(),string:Ee.string,unassigned:Vt.define()},sU=_1.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":Pw.includes(e)?"data-directive":Rw.includes(e)?"instruction":Tf.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Fn}),oU=Hj(Sm.define([{tag:Fn.comment,class:"text-stone-400 italic"},{tag:Fn["data-directive"],class:"text-rose-400"},{tag:Fn.instruction,class:"text-mantis-400"},{tag:Fn.number,class:"text-amber-500 font-semibold"},{tag:Fn.operator,class:"text-rose-400"},{tag:Fn.offset,class:"text-rose-400 italic"},{tag:Fn["ptr-size"],class:"text-rose-400 italic"},{tag:Fn.punctuation,class:"text-stone-500"},{tag:Fn.register,class:"text-amber-500 italic"},{tag:Fn.special,class:"text-sky-300 italic"},{tag:Fn.string,class:"text-emerald-300"},{tag:Fn.unassigned,class:"text-rose-400"}])),aU=XV(t=>{const e=t.state.doc.toString(),n=x2(e);if(n.success)return[];const i=os().language;return n.errors.map(r=>{var a,l;const s=((a=r.position)==null?void 0:a.start)??0,o=((l=r.position)==null?void 0:l.end)??e.length;return{message:r.translate(i),severity:"error",from:s,to:o}})},{delay:200});function lU(){return new Sj(sU,[oU,aU])}function uU({className:t}){const[e,n]=b.useState(),i=b.useCallback(r=>{r&&n(r)},[]);return b.useEffect(()=>{if(e)return window.codemirror=new fe({state:De.create({doc:rU,extensions:[De.tabSize.of(2),KP.of(De.readOnly.of(!1)),nU,c5(),p5,f5(),F3(),y7(),T3(),D3(),De.allowMultipleSelections.of(!0),Nj(),G3(),$P.of([...eU,{key:"Escape",run:r=>(r.dispatch({selection:V.create([r.state.selection.main],0)}),!0)}]),lU(),_l.of(tU)]}),parent:e}),()=>{var r;return(r=window.codemirror)==null?void 0:r.destroy()}},[e]),m2(r=>r.ctrlKey&&r.key==="s",r=>{if(r.preventDefault(),!window.codemirror)return;const s=new Blob([window.codemirror.state.doc.toString()],{type:"text/plain"}),o=URL.createObjectURL(s),a=document.createElement("a");a.style.display="none",a.href=o,a.download=`vonsim-${new Date().toISOString().slice(0,16)}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}),C.jsx("div",{ref:i,className:nt("overflow-auto font-mono",t)})}var vi=function(t,e){return Number(t.toFixed(e))},cU=function(t,e){return typeof t=="number"?t:e},st=function(t,e,n){n&&typeof n=="function"&&n(t,e)},dU=function(t){return-Math.cos(t*Math.PI)/2+.5},hU=function(t){return t},fU=function(t){return t*t},pU=function(t){return t*(2-t)},mU=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},gU=function(t){return t*t*t},yU=function(t){return--t*t*t+1},vU=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},wU=function(t){return t*t*t*t},xU=function(t){return 1- --t*t*t*t},bU=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},SU=function(t){return t*t*t*t*t},kU=function(t){return 1+--t*t*t*t*t},EU=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},D_={easeOut:dU,linear:hU,easeInQuad:fU,easeOutQuad:pU,easeInOutQuad:mU,easeInCubic:gU,easeOutCubic:yU,easeInOutCubic:vU,easeInQuart:wU,easeOutQuart:xU,easeInOutQuart:bU,easeInQuint:SU,easeOutQuint:kU,easeInOutQuint:EU},$_=function(t){typeof t=="number"&&cancelAnimationFrame(t)},fr=function(t){t.mounted&&($_(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function L_(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;fr(t),t.animation=function(){if(!t.mounted)return $_(t.animation);var o=new Date().getTime()-r,a=o/n,l=D_[e],u=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function CU(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function wo(t,e,n,i){var r=CU(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):L_(t,i,n,function(f){var p=a+c*f,m=l+d*f,v=u+h*f;s(p,m,v)})}}function AU(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=i-a,c=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var PU=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,u=t-e-a,c=a,d=i-r-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},W1=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=AU(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=PU(o,l,u,a,c,d,!!r);return h},kv=function(t,e,n,i){return i?t<e?vi(e,2):t>n?vi(n,2):vi(t,2):vi(t,2)},Hl=function(t,e){var n=W1(t,e);return t.bounds=n,n};function Rm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=kv(t,a-d,u+d,i),p=kv(e,l-h,c+h,i);return{x:f,y:p}}function Tm(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=Rm(d,h,r,s,0,0,null);return f}function vd(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var bE=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o=r==null?void 0:r.contains(s),a=i&&s&&o;if(!a)return!1;var l=Om(s,n);return!l},SE=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},RU=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},TU=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function OU(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,m=n>d||n<h,v=i>f||i<p,g=n>d?u.offsetWidth:t.setup.minPositionX||0,y=i>f?u.offsetHeight:t.setup.minPositionY||0,w=Tm(t,g,y,r,t.bounds,a||l),x=w.x,k=w.y;return{scale:r,positionX:m?x:n,positionY:v?k:i}}}function _U(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=Rm(e,n,a,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var NU=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,u=r.positionY;if(!i)return{x:l,y:u};var c=e-i.x,d=n-i.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},Sp=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},MU=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},DU=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!i)};function $U(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function kE(t,e,n,i,r,s,o,a,l,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return i?e:kv(t,s,o,r)}function LU(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function IU(t,e){var n=MU(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var u=LU(o,a),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=l-r,m=c*c+d*d,v=Math.sqrt(m)/p;t.velocity={velocityX:h,velocityY:f,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function BU(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=DU(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,m=i.zoomAnimation,v=i.panning,g=v.lockAxisY,y=v.lockAxisX,w=m.animationType,x=p.sizeX,k=p.sizeY,A=p.velocityAlignmentTime,P=A,E=$U(t,l),R=Math.max(E,P),N=Sp(t,x),T=Sp(t,k),B=N*r.offsetWidth/100,I=T*r.offsetHeight/100,_=u+B,D=c-B,z=d+I,L=h-I,O=t.transformState,$=new Date().getTime();L_(t,w,R,function(F){var Y=t.transformState,ie=Y.scale,ce=Y.positionX,ve=Y.positionY,be=new Date().getTime()-$,we=be/P,Q=D_[p.animationType],ge=1-Q(Math.min(1,we)),_e=1-F,ke=ce+o*_e,Se=ve+a*_e,xe=kE(ke,O.positionX,ce,y,f,c,u,D,_,ge),se=kE(Se,O.positionY,ve,g,f,h,d,L,z,ge);(ce!==ke||ve!==Se)&&t.setTransformState(ie,xe,se)})}}function EE(t,e){var n=t.transformState.scale;fr(t),Hl(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?TU(t,e):RU(t,e)}function I_(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,a=r.sizeY,l=r.animationTime,u=r.animationType,c=s||e<i||!o&&!a;if(!c){var d=OU(t);d&&wo(t,d,l,u)}}function CE(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=NU(t,e,n),u=l.x,c=l.y,d=Sp(t,o),h=Sp(t,a);IU(t,{x:u,y:c}),_U(t,u,c,d,h)}}function zU(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?BU(t):I_(t)}}function H1(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=vd(vi(e,2),s,o,0,!1),u=Hl(t,l),c=Tm(t,n,i,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function B_(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||i>=o;if((i>=1||a)&&I_(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,m=H1(t,o,f,p);m&&wo(t,m,c,d)}}var qs=function(){return qs=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qs.apply(this,arguments)};function AE(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var vh={previousScale:1,scale:1,positionX:0,positionY:0},ku={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},z_=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:vh.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:vh.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:vh.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:vh.positionY}},PE=function(t){var e=qs({},ku);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof ku[n]<"u";if(r&&i){var s=Object.prototype.toString.call(ku[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=qs(qs({},ku[n]),t[n]):a?e[n]=AE(AE([],ku[n],!0),t[n],!0):e[n]=t[n]}}),e},F_=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=vd(vi(d,3),a,o,c,!1);return h};function j_(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=F_(t,e,n),m=H1(t,p,h,f);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");wo(t,m,i,r)}function V_(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=z_(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=W1(t,a.scale),f=Rm(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(i==null||i(),wo(t,p,e,n))}}function FU(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function jU(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=FU(e,i,r,s),f=h.x,p=h.y,m=d.width/s.scale,v=d.height/s.scale,g=i.offsetWidth/m,y=i.offsetHeight/v,w=vd(n||Math.min(g,y),l,u,0,!1),x=(c.width-m*w)/2,k=(c.height-v*w)/2,A=(c.left-f)*w+x,P=(c.top-p)*w+k,E=W1(t,w),R=Rm(A,P,E,a,0,0,i),N=R.x,T=R.y;return{positionX:N,positionY:T,scale:w}}var VU=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),j_(t,1,e,n,i)}},UU=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),j_(t,-1,e,n,i)}},WU=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?u:i};wo(t,f,r,s)}}},HU=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),V_(t,e,n)}},GU=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=U_(e||r.scale,s,o);wo(t,a,n,i)}}},XU=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),fr(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=jU(t,o,n);wo(t,a,i,r)}}},Ev=function(t){return{instance:t,zoomIn:VU(t),zoomOut:UU(t),setTransform:WU(t),resetTransform:HU(t),centerView:GU(t),zoomToElement:XU(t)}},KU=function(t){return{instance:t,state:t.transformState}},Ke=function(t){var e={};return Object.assign(e,KU(t)),Object.assign(e,Ev(t)),e},c0=!1;function d0(){try{var t={get passive(){return c0=!0,!1}};return t}catch{return c0=!1,c0}}var Om=function(t,e){var n=t.tagName.toUpperCase(),i=e.find(function(s){return s.toUpperCase()===n});if(i)return!0;var r=e.find(function(s){return t.classList.contains(s)});return!!r},Cv=function(t){t&&clearTimeout(t)},ZU=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},U_=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function YU(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var JU=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Om(u,o);return!d},qU=function(t){return t?t.deltaY<0?1:-1:0};function QU(t,e){var n=qU(t),i=cU(e,n);return i}function W_(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var eW=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(r)return p;var m=i?!1:!f,v=vd(vi(p,3),u,l,h,m&&!d);return v},tW=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},nW=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Om(o,r);return!l},iW=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},rW=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=vi(r[0].clientX-i.left,5),o=vi(r[0].clientY-i.top,5),a=vi(r[1].clientX-i.left,5),l=vi(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},H_=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},sW=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,u=a.size,c=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return vd(vi(h,2),o,s,u,!c&&!l)},oW=160,aW=100,lW=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(fr(t),st(Ke(t),e,i),st(Ke(t),e,r))},uW=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,m=d.size,v=d.disabled,g=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=QU(e,null),x=p?y*Math.abs(e.deltaY):g,k=eW(t,w,x,!e.ctrlKey);if(l!==k){var A=Hl(t,k),P=W_(e,s,l),E=v||m===0||c||f,R=u&&E,N=Tm(t,P.x,P.y,k,A,R),T=N.x,B=N.y;t.previousWheelEvent=e,t.setTransformState(k,T,B),st(Ke(t),e,i),st(Ke(t),e,r)}},cW=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;Cv(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(B_(t,e.x,e.y),t.wheelAnimationTimer=null)},aW);var s=tW(t,e);s&&(Cv(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,st(Ke(t),e,i),st(Ke(t),e,r))},oW))},dW=function(t,e){var n=H_(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,fr(t)},hW=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,u=l.disabled,c=l.size;if(!(i===null||!n)){var d=rW(e,r,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var h=H_(e),f=sW(t,h);if(f!==r){var p=Hl(t,f),m=u||c===0||a,v=o&&m,g=Tm(t,d.x,d.y,f,p,v),y=g.x,w=g.y;t.pinchMidpoint=d,t.lastDistance=h,t.setTransformState(f,y,w)}}}},fW=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,B_(t,e==null?void 0:e.x,e==null?void 0:e.y)},G_=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;Cv(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,st(Ke(t),e,n)},i)},pW=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;st(Ke(t),e,i),V_(t,o,a,function(){return st(Ke(t),e,r)}),G_(t,e)};function mW(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,m=c.animationType;if(!d&&!i){if(h==="reset")return pW(t,e);if(!s)return console.error("No ContentComponent found");var v=h==="zoomOut"?-1:1,g=F_(t,v,f);if(o!==g){st(Ke(t),e,l);var y=W_(e,s,o),w=H1(t,g,y.x,y.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");st(Ke(t),e,u),wo(t,w,p,m),G_(t,e)}}}var gW=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=r==null?void 0:r.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=Om(l,a);return!d},yW=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){Hl(n,n.transformState.scale),n.setup=PE(i)},this.initializeWindowEvents=function(){var i,r=d0(),s=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,r),o==null||o.addEventListener("mousemove",n.onPanning,r),o==null||o.addEventListener("mouseup",n.onPanningStop,r),s==null||s.addEventListener("mouseleave",n.clearPanning,r),o==null||o.addEventListener("keyup",n.setKeyUnPressed,r),o==null||o.addEventListener("keydown",n.setKeyPressed,r)},this.cleanupWindowEvents=function(){var i,r,s=d0(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),fr(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=d0();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(Ke(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(Ke(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=JU(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(lW(n,i),uW(n,i),cW(n,i))}}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=bE(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),fr(n),EE(n,i),st(Ke(n),i,s))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=SE(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),CE(n,i.clientX,i.clientY),st(Ke(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(zU(n),st(Ke(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=nW(n,i);l&&(dW(n,i),fr(n),st(Ke(n),i,o),st(Ke(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=iW(n);l&&(i.preventDefault(),i.stopPropagation(),hW(n,i),st(Ke(n),i,o),st(Ke(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(fW(n),st(Ke(n),i,s),st(Ke(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=bE(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&i.touches.length===1)n.onDoubleClick(i);else{n.lastTouch=+new Date,fr(n);var l=i.touches,u=l.length===1,c=l.length===2;u&&(fr(n),EE(n,i),st(Ke(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=SE(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];CE(n,a.clientX,a.clientY),st(Ke(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=gW(n,i);s&&mW(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=Ke(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),st(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=U_(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):ZU(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return Ke(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Hl(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=Ke(n);st(s,void 0,n.props.onInit)},this.props=e,this.setup=PE(this.props),this.transformState=z_(this.props)}return t}(),G1=q.createContext(null),vW=function(t,e){return typeof t=="function"?t(e):t},wW=q.forwardRef(function(t,e){var n=b.useRef(new yW(t)).current,i=vW(t.children,Ev(n));return b.useImperativeHandle(e,function(){return Ev(n)},[n]),b.useEffect(function(){n.update(t)},[n,t]),q.createElement(G1.Provider,{value:n},i)});q.forwardRef(function(t,e){var n=b.useRef(null),i=b.useContext(G1);return b.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),q.createElement("div",qs({},t,{ref:YU([n,e])}))});function xW(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var bW=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,RE={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};xW(bW);var SW=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=b.useContext(G1).init,f=b.useRef(null),p=b.useRef(null);return b.useEffect(function(){var m=f.current,v=p.current;m!==null&&v!==null&&h&&h(m,v)},[]),q.createElement("div",qs({},u,{ref:f,className:"react-transform-wrapper ".concat(RE.wrapper," ").concat(i),style:o}),q.createElement("div",qs({},d,{ref:p,className:"react-transform-component ".concat(RE.content," ").concat(s),style:a}),e))};function kW({className:t}){const e=ii();return C.jsx("div",{className:nt("absolute z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",t),children:C.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg font-bold text-white",children:e("computer.chip-select.name")})})}function EW({className:t}){const e=ii(),n=["M 380 420 H 820 V 400","M 820 420 V 805","M 450 805 H 999","M 583 805 V 875"].join(" "),i=["M 380 440 H 840 V 400","M 840 440 V 815","M 450 815 H 999","M 573 815 V 875"].join(" "),r="M 750 545 H 860 V 400";return C.jsxs("svg",{viewBox:"0 0 1500 1100",className:nt("pointer-events-none absolute z-[15] h-[1100px] w-[1500px]",t),children:[C.jsx(gs,{x:384,y:415,children:"rd"}),C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),C.jsx(Pt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:ht("bus.rd")}),C.jsx(gs,{x:384,y:435,children:"wr"}),C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),C.jsx(Pt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:ht("bus.wr")}),C.jsx(gs,{x:384,y:455,children:"io/m"}),C.jsx(So,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),C.jsx(gs,{x:715,y:550,children:e("computer.chip-select.mem")}),C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),C.jsx(Pt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:ht("bus.mem")}),C.jsx(gs,{x:510,y:585,children:e("computer.chip-select.pic")}),C.jsx(So,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),C.jsx(gs,{x:545,y:585,children:e("computer.chip-select.timer")}),C.jsx(So,{springs:"bus.timer",d:"M 563 595 V 875"}),C.jsx(gs,{x:75,y:490,children:"intr"}),C.jsx(So,{springs:"bus.intr",d:"M 110 700 V 470"}),C.jsx(gs,{x:125,y:490,children:"inta"}),C.jsx(So,{springs:"bus.inta",d:"M 160 470 V 700"}),C.jsx(So,{springs:"bus.int0",d:"M 145 950 V 900"}),C.jsx(So,{springs:"bus.int1",d:"M 500 955 H 400 V 900"})]})}function gs({x:t,y:e,children:n}){return C.jsx("text",{className:"fill-stone-400 font-mono text-xs font-bold tracking-wider",x:t,y:e,children:n})}function So({d:t,springs:e}){return C.jsxs(C.Fragment,{children:[C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),C.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),C.jsx(Pt.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:ht(e)})]})}function CW({className:t}){const e=["M 699 349 H 800","M 725 349 V 770","M 450 770 H 999","M 618 770 V 875"].join(" "),n=["M 687 249 H 800","M 770 249 V 790","M 450 790 H 999","M 598 790 V 875"].join(" ");return C.jsxs("svg",{viewBox:"0 0 1500 1100",className:nt("pointer-events-none absolute z-[5] h-[1100px] w-[1500px]",t),children:[C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),C.jsx(Pt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:ht("bus.data")}),C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),C.jsx(Pt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:ht("bus.address")})]})}function AW({className:t}){return C.jsxs("div",{className:nt("absolute",t),children:[C.jsx(CW,{className:"inset-0"}),C.jsx(EW,{className:"inset-0"}),C.jsx(kW,{className:"left-[500px] top-[525px]"})]})}function PW({className:t}){const e=ht("clock.angle");return C.jsx("div",{className:nt("absolute z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",t),children:C.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[C.jsx("circle",{cx:"12",cy:"12",r:"10"}),C.jsx(Pt.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}function Io({name:t,valueAtom:e,springs:n,emphasis:i=!1,title:r,className:s}){const o=xr(e),a=o.low,l=o.is16bits()?o.high:null;return C.jsxs(Pt.div,{title:r,className:nt("flex w-min items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",i?"border-mantis-400 text-lg":"border-stone-600 text-base",s),style:ht(n),children:[C.jsx("span",{className:"mr-2 font-bold",children:t}),l&&C.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:l.toString("hex")}),C.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:a.toString("hex")})]})}function RW(){const t=xr(et.FLAGS),e=xr(lR),n=t.bit(0),i=t.bit(6),r=t.bit(7),s=t.bit(9),o=t.bit(11);return C.jsxs(C.Fragment,{children:[C.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[C.jsx(Pt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 173 85 H 220",pathLength:1,strokeDasharray:1,style:ht("cpu.alu.operands")}),C.jsx(Pt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 182 145 H 220",pathLength:1,strokeDasharray:1,style:ht("cpu.alu.operands")}),C.jsx(Pt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:ht("cpu.alu.results")}),C.jsx(Pt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:ht("cpu.alu.results")}),C.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),C.jsx(Pt.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:ht("cpu.alu.cog").rot.to(a=>`rotate(${a*60}deg)`)}}),C.jsx(Pt.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:ht("cpu.alu.operation"),children:e}),C.jsxs(Pt.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:ht("cpu.FLAGS"),children:[C.jsx("span",{className:nt("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),C.jsx("span",{className:nt("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"ZF"}),C.jsx("span",{className:nt("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"SF"}),C.jsx("span",{className:nt("rounded p-1 font-light",s?"bg-mantis-400":"bg-stone-900"),children:"IF"}),C.jsx("span",{className:nt("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"OF"})]})]})}function TW(){const t=ii(),e=xr(Os),n=b.useMemo(()=>{if(!("metadata"in e)||e.metadata.operands.length===0)return"";if(e.phase==="fetching-operands"){let s=" __";for(let o=1;o<e.metadata.operands.length;o++)s+=", __";return s}else return" "+e.metadata.operands.join(", ")},[e]),{executionUnit:i}=d6(),r=BB(e.phase,{from:{transform:"translateY(-100%)"},enter:{transform:"translateY(0%)"},leave:{transform:"translateY(100%)"},config:{duration:5*i,easing:e1.easeOutElastic}});return C.jsxs(C.Fragment,{children:[C.jsx("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:C.jsx(Pt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:ht("cpu.decoder.path")})}),C.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:C.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs font-semibold tracking-wide text-white",children:t("computer.cpu.control-unit")})}),C.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[C.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[C.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),C.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:C.jsx(Pt.div,{className:"h-full bg-mantis-400",style:{width:ht("cpu.decoder.progress.progress").to(s=>`${s*100}%`),opacity:ht("cpu.decoder.progress.opacity")}})})]}),C.jsx("div",{className:"relative mt-4 h-8 w-48 overflow-hidden rounded-lg border border-stone-600 bg-stone-900",children:r((s,o)=>C.jsx(Pt.div,{className:"absolute inset-0 flex items-center",style:s,children:C.jsx("span",{className:"w-full text-center align-middle text-sm leading-none",children:t(`computer.cpu.phase.${o}`)})}))}),C.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:C.jsx("p",{className:"text-center font-mono",children:e.phase==="fetching"||e.phase==="stopped"?C.jsx("span",{className:"font-bold italic text-stone-400",children:"???"}):C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"font-bold text-mantis-400",children:e.metadata.name}),C.jsx("span",{className:"text-white",children:n})]})})})]})]})}function OW({className:t}){const e=ii();return C.jsxs("div",{className:nt("absolute z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[C.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:e("computer.cpu.name")}),C.jsx(f8,{}),C.jsx(Hz,{}),C.jsx(Sn,{name:"left",className:"left-[60px] top-[70px]"}),C.jsx(Sn,{name:"right",className:"left-[60px] top-[130px]"}),C.jsx(Sn,{name:"result",className:"left-[300px] top-[100px]"}),C.jsx(RW,{}),C.jsx(Sn,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),C.jsx(Sn,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),C.jsx(Sn,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),C.jsx(Sn,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),C.jsx(Sn,{name:"id",className:"left-[520px] top-[190px]"}),C.jsx(Sn,{name:"MBR",className:"right-[-38px] top-[233px]"}),C.jsx(Sn,{name:"IR",className:"left-[171px] top-[270px]"}),C.jsx(TW,{}),C.jsx(Sn,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),C.jsx(Sn,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),C.jsx(Sn,{name:"ri",className:"left-[450px] top-[372px]"}),C.jsx(Sn,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function Sn({name:t,emphasis:e,className:n}){const i=ii();return C.jsx(Io,{name:t,valueAtom:et[t],springs:`cpu.${t}`,emphasis:e,title:i("computer.cpu.register",t),className:nt("absolute",n)})}const _W="_pushable_1nhoa_2",NW="_front_1nhoa_15",MW="_shadow_1nhoa_20",DW="_edge_1nhoa_52",wh={pushable:_W,front:NW,shadow:MW,edge:DW};function $W({className:t}){const e=ii(),[n,i]=kT();return m2("F10",r=>{r.preventDefault(),i("f10.press")}),C.jsx("div",{className:nt("absolute z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:C.jsxs("button",{className:wh.pushable,disabled:n.type!=="running",onClick:()=>i("f10.press"),title:e("computer.f10.name"),children:[C.jsx("div",{className:wh.shadow}),C.jsx("div",{className:wh.edge}),C.jsx("span",{className:wh.front,children:e("computer.f10.interrupt")})]})})}function LW({className:t}){const e=ii(),n=xr(P4);return C.jsxs("div",{className:nt("absolute z-10 h-[400px] w-[150px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[C.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:e("computer.memory.name")}),C.jsx("div",{className:"m-4 w-min overflow-hidden rounded-lg border border-stone-600",children:C.jsx("table",{className:"font-mono text-lg",children:C.jsx("tbody",{children:n.map((i,r)=>C.jsxs("tr",{title:e("computer.memory.cell",i.address),className:"border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",children:[C.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:i.address.toString()}),C.jsx("td",{className:"px-2 py-1",children:i.value.toString("hex")})]},r))})})})]})}function IW({className:t}){const e=ii();return C.jsxs("div",{className:nt("absolute z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[C.jsxs("div",{className:"flex items-start",children:[C.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:e("computer.pic")}),C.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[C.jsx(Io,{name:"IMR",title:e("generics.io-register","IMR",33),valueAtom:Uw,springs:"pic.IMR",emphasis:!0}),C.jsx(Io,{name:"IRR",title:e("generics.io-register","IRR",34),valueAtom:Ww,springs:"pic.IRR",emphasis:!0}),C.jsx(Io,{name:"ISR",title:e("generics.io-register","ISR",35),valueAtom:Hw,springs:"pic.ISR",emphasis:!0})]})]}),C.jsx("hr",{className:"mb-2 border-stone-600"}),C.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:Zf.map((n,i)=>C.jsx(Io,{name:`INT${i}`,title:e("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]})}function BW({className:t}){const e=ii();return C.jsxs("div",{className:nt("absolute z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[C.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:e("computer.timer")}),C.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[C.jsx(Io,{name:"CONT",title:e("generics.io-register","CONT",16),valueAtom:l1,springs:"timer.CONT"}),C.jsx(Io,{name:"COMP",title:e("generics.io-register","COMP",17),valueAtom:u1,springs:"timer.COMP"})]})]})}function zW(){return C.jsx(wW,{minScale:.5,initialPositionX:0,initialPositionY:0,children:C.jsx(SW,{wrapperClass:"!w-full !h-full",contentClass:"!p-[100px]",children:C.jsxs("div",{className:"relative h-[1100px] w-[1500px] border border-red-500",children:[C.jsx(AW,{className:"left-0 top-0"}),C.jsx(OW,{className:"left-0 top-0"}),C.jsx(LW,{className:"left-[800px] top-0"}),C.jsx(IW,{className:"left-0 top-[700px]"}),C.jsx(BW,{className:"left-[500px] top-[875px]"}),C.jsx(PW,{className:"left-[520px] top-[930px]"}),C.jsx($W,{className:"left-[50px] top-[950px]"})]})})})}function FW(){const t=ii(),e=xr(wO),{updateServiceWorker:n}=f$({onNeedRefresh(){Up(t("update.update-available"),{action:{label:t("update.reload"),onClick:()=>n(!0)}})}});return C.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",children:[C.jsx(nj,{}),C.jsxs(h2,{autoSaveId:"layout",tagName:"main",direction:"horizontal",className:"overflow-auto px-2",children:[C.jsx(Nh,{id:"panel-editor",order:1,minSize:20,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:C.jsx(uU,{className:"h-full w-full"})}),C.jsx(uy,{className:"w-2"}),C.jsx(Nh,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:C.jsx(zW,{})}),e&&C.jsxs(C.Fragment,{children:[C.jsx(uy,{className:"w-2"}),C.jsx(Nh,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:C.jsx(tj,{className:"h-full w-full"})})]})]}),C.jsxs("footer",{className:"py-1 text-center text-xs font-semibold tracking-wider text-stone-500",children:[C.jsx("a",{href:"/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),C.jsx("span",{className:"px-2",children:"·"}),C.jsx("a",{href:"https://github.com/vonsim/vonsim",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),C.jsx("span",{className:"px-2",children:"·"}),C.jsx("a",{href:"https://github.com/vonsim/vonsim/issues/new?labels=new+version",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.report-issue")}),C.jsx("span",{className:"px-2",children:"·"}),C.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:["© Copyright 2017-",new Date().getFullYear()," — ",t("footer.copyright")]})]})]})}window.codemirror=null;h0.createRoot(document.getElementById("root")).render(C.jsxs(q.StrictMode,{children:[C.jsx(ID,{richColors:!0,closeButton:!0,position:"top-center"}),C.jsx(x5,{children:C.jsx(FW,{})})]}));
