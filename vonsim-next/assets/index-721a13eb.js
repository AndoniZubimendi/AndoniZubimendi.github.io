var sO=Object.defineProperty;var oO=(t,e,n)=>e in t?sO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(oO(t,typeof e!="symbol"?e+"":e,n),n),Pp=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var x=(t,e,n)=>(Pp(t,e,"read from private field"),n?n.call(t):e.get(t)),ie=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},F=(t,e,n,i)=>(Pp(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var Te=(t,e,n)=>(Pp(t,e,"access private method"),n);function lO(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function sc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wk={exports:{}},xf={},bk={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc=Symbol.for("react.element"),aO=Symbol.for("react.portal"),uO=Symbol.for("react.fragment"),cO=Symbol.for("react.strict_mode"),dO=Symbol.for("react.profiler"),hO=Symbol.for("react.provider"),fO=Symbol.for("react.context"),pO=Symbol.for("react.forward_ref"),mO=Symbol.for("react.suspense"),gO=Symbol.for("react.memo"),yO=Symbol.for("react.lazy"),Vw=Symbol.iterator;function vO(t){return t===null||typeof t!="object"?null:(t=Vw&&t[Vw]||t["@@iterator"],typeof t=="function"?t:null)}var xk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sk=Object.assign,kk={};function da(t,e,n){this.props=t,this.context=e,this.refs=kk,this.updater=n||xk}da.prototype.isReactComponent={};da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ck(){}Ck.prototype=da.prototype;function cy(t,e,n){this.props=t,this.context=e,this.refs=kk,this.updater=n||xk}var dy=cy.prototype=new Ck;dy.constructor=cy;Sk(dy,da.prototype);dy.isPureReactComponent=!0;var Hw=Array.isArray,Ek=Object.prototype.hasOwnProperty,hy={current:null},Ak={key:!0,ref:!0,__self:!0,__source:!0};function Pk(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ek.call(e,i)&&!Ak.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:oc,type:t,key:s,ref:o,props:r,_owner:hy.current}}function wO(t,e){return{$$typeof:oc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fy(t){return typeof t=="object"&&t!==null&&t.$$typeof===oc}function bO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ww=/\/+/g;function Rp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bO(""+t.key):e.toString(36)}function Od(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case oc:case aO:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Rp(o,0):i,Hw(r)?(n="",t!=null&&(n=t.replace(Ww,"$&/")+"/"),Od(r,e,n,"",function(u){return u})):r!=null&&(fy(r)&&(r=wO(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Ww,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Hw(t))for(var l=0;l<t.length;l++){s=t[l];var a=i+Rp(s,l);o+=Od(s,e,n,a,r)}else if(a=vO(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=i+Rp(s,l++),o+=Od(s,e,n,a,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dc(t,e,n){if(t==null)return t;var i=[],r=0;return Od(t,i,"","",function(s){return e.call(n,s,r++)}),i}function xO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Td={transition:null},SO={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Td,ReactCurrentOwner:hy};be.Children={map:Dc,forEach:function(t,e,n){Dc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dc(t,function(){e++}),e},toArray:function(t){return Dc(t,function(e){return e})||[]},only:function(t){if(!fy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=da;be.Fragment=uO;be.Profiler=dO;be.PureComponent=cy;be.StrictMode=cO;be.Suspense=mO;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SO;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Sk({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=hy.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Ek.call(e,a)&&!Ak.hasOwnProperty(a)&&(i[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:oc,type:t.type,key:r,ref:s,props:i,_owner:o}};be.createContext=function(t){return t={$$typeof:fO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hO,_context:t},t.Consumer=t};be.createElement=Pk;be.createFactory=function(t){var e=Pk.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:pO,render:t}};be.isValidElement=fy;be.lazy=function(t){return{$$typeof:yO,_payload:{_status:-1,_result:t},_init:xO}};be.memo=function(t,e){return{$$typeof:gO,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Td.transition;Td.transition={};try{t()}finally{Td.transition=e}};be.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};be.useCallback=function(t,e){return rn.current.useCallback(t,e)};be.useContext=function(t){return rn.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};be.useEffect=function(t,e){return rn.current.useEffect(t,e)};be.useId=function(){return rn.current.useId()};be.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return rn.current.useMemo(t,e)};be.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};be.useRef=function(t){return rn.current.useRef(t)};be.useState=function(t){return rn.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return rn.current.useTransition()};be.version="18.2.0";bk.exports=be;var S=bk.exports;const U=sc(S),kO=lO({__proto__:null,default:U},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO=S,EO=Symbol.for("react.element"),AO=Symbol.for("react.fragment"),PO=Object.prototype.hasOwnProperty,RO=CO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MO={key:!0,ref:!0,__self:!0,__source:!0};function Rk(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)PO.call(e,i)&&!MO.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:EO,type:t,key:s,ref:o,props:r,_owner:RO.current}}xf.Fragment=AO;xf.jsx=Rk;xf.jsxs=Rk;wk.exports=xf;var k=wk.exports;var eg={},Mk={exports:{}},$n={},Ok={exports:{}},Tk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,_){var j=L.length;L.push(_);e:for(;0<j;){var ee=j-1>>>1,re=L[ee];if(0<r(re,_))L[ee]=_,L[j]=re,j=ee;else break e}}function n(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var _=L[0],j=L.pop();if(j!==_){L[0]=j;e:for(var ee=0,re=L.length,ge=re>>>1;ee<ge;){var rt=2*(ee+1)-1,ut=L[rt],Ze=rt+1,bt=L[Ze];if(0>r(ut,j))Ze<re&&0>r(bt,ut)?(L[ee]=bt,L[Ze]=j,ee=Ze):(L[ee]=ut,L[rt]=j,ee=rt);else if(Ze<re&&0>r(bt,j))L[ee]=bt,L[Ze]=j,ee=Ze;else break e}}return _}function r(L,_){var j=L.sortIndex-_.sortIndex;return j!==0?j:L.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var _=n(u);_!==null;){if(_.callback===null)i(u);else if(_.startTime<=L)i(u),_.sortIndex=_.expirationTime,e(a,_);else break;_=n(u)}}function b(L){if(g=!1,w(L),!p)if(n(a)!==null)p=!0,$(C);else{var _=n(u);_!==null&&z(b,_.startTime-L)}}function C(L,_){p=!1,g&&(g=!1,m(I),I=-1),f=!0;var j=h;try{for(w(_),d=n(a);d!==null&&(!(d.expirationTime>_)||L&&!M());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,h=d.priorityLevel;var re=ee(d.expirationTime<=_);_=t.unstable_now(),typeof re=="function"?d.callback=re:d===n(a)&&i(a),w(_)}else i(a);d=n(a)}if(d!==null)var ge=!0;else{var rt=n(u);rt!==null&&z(b,rt.startTime-_),ge=!1}return ge}finally{d=null,h=j,f=!1}}var P=!1,R=null,I=-1,E=5,A=-1;function M(){return!(t.unstable_now()-A<E)}function O(){if(R!==null){var L=t.unstable_now();A=L;var _=!0;try{_=R(!0,L)}finally{_?D():(P=!1,R=null)}}else P=!1}var D;if(typeof y=="function")D=function(){y(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,B=N.port2;N.port1.onmessage=O,D=function(){B.postMessage(null)}}else D=function(){v(O,0)};function $(L){R=L,P||(P=!0,D())}function z(L,_){I=v(function(){L(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,$(C))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var _=3;break;default:_=h}var j=h;h=_;try{return L()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,_){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=h;h=L;try{return _()}finally{h=j}},t.unstable_scheduleCallback=function(L,_,j){var ee=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ee+j:ee):j=ee,L){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=j+re,L={id:c++,callback:_,priorityLevel:L,startTime:j,expirationTime:re,sortIndex:-1},j>ee?(L.sortIndex=j,e(u,L),n(a)===null&&L===n(u)&&(g?(m(I),I=-1):g=!0,z(b,j-ee))):(L.sortIndex=re,e(a,L),p||f||(p=!0,$(C))),L},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(L){var _=h;return function(){var j=h;h=_;try{return L.apply(this,arguments)}finally{h=j}}}})(Tk);Ok.exports=Tk;var OO=Ok.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nk=S,_n=OO;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dk=new Set,wu={};function Bo(t,e){Hl(t,e),Hl(t+"Capture",e)}function Hl(t,e){for(wu[t]=e,t=0;t<e.length;t++)Dk.add(e[t])}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tg=Object.prototype.hasOwnProperty,TO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gw={},Xw={};function NO(t){return tg.call(Xw,t)?!0:tg.call(Gw,t)?!1:TO.test(t)?Xw[t]=!0:(Gw[t]=!0,!1)}function DO(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LO(t,e,n,i){if(e===null||typeof e>"u"||DO(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var py=/[\-:]([a-z])/g;function my(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(py,my);It[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(py,my);It[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(py,my);It[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function gy(t,e,n,i){var r=It.hasOwnProperty(e)?It[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LO(e,n,r,i)&&(n=null),i||r===null?NO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Wr=Nk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lc=Symbol.for("react.element"),el=Symbol.for("react.portal"),tl=Symbol.for("react.fragment"),yy=Symbol.for("react.strict_mode"),ng=Symbol.for("react.profiler"),Lk=Symbol.for("react.provider"),Ik=Symbol.for("react.context"),vy=Symbol.for("react.forward_ref"),ig=Symbol.for("react.suspense"),rg=Symbol.for("react.suspense_list"),wy=Symbol.for("react.memo"),es=Symbol.for("react.lazy"),Bk=Symbol.for("react.offscreen"),Jw=Symbol.iterator;function ba(t){return t===null||typeof t!="object"?null:(t=Jw&&t[Jw]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,Mp;function Ha(t){if(Mp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mp=e&&e[1]||""}return`
`+Mp+t}var Op=!1;function Tp(t,e){if(!t||Op)return"";Op=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var a=`
`+r[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Op=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ha(t):""}function IO(t){switch(t.tag){case 5:return Ha(t.type);case 16:return Ha("Lazy");case 13:return Ha("Suspense");case 19:return Ha("SuspenseList");case 0:case 2:case 15:return t=Tp(t.type,!1),t;case 11:return t=Tp(t.type.render,!1),t;case 1:return t=Tp(t.type,!0),t;default:return""}}function sg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case tl:return"Fragment";case el:return"Portal";case ng:return"Profiler";case yy:return"StrictMode";case ig:return"Suspense";case rg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ik:return(t.displayName||"Context")+".Consumer";case Lk:return(t._context.displayName||"Context")+".Provider";case vy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wy:return e=t.displayName||null,e!==null?e:sg(t.type)||"Memo";case es:e=t._payload,t=t._init;try{return sg(t(e))}catch{}}return null}function BO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sg(e);case 8:return e===yy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _k(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _O(t){var e=_k(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ic(t){t._valueTracker||(t._valueTracker=_O(t))}function $k(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=_k(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function sh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function og(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yw(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ds(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fk(t,e){e=e.checked,e!=null&&gy(t,"checked",e,!1)}function lg(t,e){Fk(t,e);var n=Ds(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ag(t,e.type,n):e.hasOwnProperty("defaultValue")&&ag(t,e.type,Ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ag(t,e,n){(e!=="number"||sh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wa=Array.isArray;function yl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ds(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ug(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Wa(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ds(n)}}function zk(t,e){var n=Ds(e.value),i=Ds(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Qw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bc,Uk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bc=Bc||document.createElement("div"),Bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$O=["Webkit","ms","Moz","O"];Object.keys(tu).forEach(function(t){$O.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tu[e]=tu[t]})});function Vk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tu.hasOwnProperty(t)&&tu[t]?(""+e).trim():e+"px"}function Hk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Vk(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var FO=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dg(t,e){if(e){if(FO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function hg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fg=null;function by(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pg=null,vl=null,wl=null;function Zw(t){if(t=uc(t)){if(typeof pg!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Af(e),pg(t.stateNode,t.type,e))}}function Wk(t){vl?wl?wl.push(t):wl=[t]:vl=t}function Gk(){if(vl){var t=vl,e=wl;if(wl=vl=null,Zw(t),e)for(t=0;t<e.length;t++)Zw(e[t])}}function Xk(t,e){return t(e)}function Jk(){}var Np=!1;function Yk(t,e,n){if(Np)return t(e,n);Np=!0;try{return Xk(t,e,n)}finally{Np=!1,(vl!==null||wl!==null)&&(Jk(),Gk())}}function xu(t,e){var n=t.stateNode;if(n===null)return null;var i=Af(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var mg=!1;if(Fr)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){mg=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{mg=!1}function zO(t,e,n,i,r,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var nu=!1,oh=null,lh=!1,gg=null,jO={onError:function(t){nu=!0,oh=t}};function UO(t,e,n,i,r,s,o,l,a){nu=!1,oh=null,zO.apply(jO,arguments)}function VO(t,e,n,i,r,s,o,l,a){if(UO.apply(this,arguments),nu){if(nu){var u=oh;nu=!1,oh=null}else throw Error(W(198));lh||(lh=!0,gg=u)}}function _o(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Kk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e1(t){if(_o(t)!==t)throw Error(W(188))}function HO(t){var e=t.alternate;if(!e){if(e=_o(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return e1(r),t;if(s===i)return e1(r),e;s=s.sibling}throw Error(W(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==i)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function qk(t){return t=HO(t),t!==null?Qk(t):null}function Qk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qk(t);if(e!==null)return e;t=t.sibling}return null}var Zk=_n.unstable_scheduleCallback,t1=_n.unstable_cancelCallback,WO=_n.unstable_shouldYield,GO=_n.unstable_requestPaint,lt=_n.unstable_now,XO=_n.unstable_getCurrentPriorityLevel,xy=_n.unstable_ImmediatePriority,e2=_n.unstable_UserBlockingPriority,ah=_n.unstable_NormalPriority,JO=_n.unstable_LowPriority,t2=_n.unstable_IdlePriority,Sf=null,Ki=null;function YO(t){if(Ki&&typeof Ki.onCommitFiberRoot=="function")try{Ki.onCommitFiberRoot(Sf,t,void 0,(t.current.flags&128)===128)}catch{}}var bi=Math.clz32?Math.clz32:QO,KO=Math.log,qO=Math.LN2;function QO(t){return t>>>=0,t===0?32:31-(KO(t)/qO|0)|0}var _c=64,$c=4194304;function Ga(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?i=Ga(l):(s&=o,s!==0&&(i=Ga(s)))}else o=n&~r,o!==0?i=Ga(o):s!==0&&(i=Ga(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-bi(e),r=1<<n,i|=t[n],e&=~r;return i}function ZO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eT(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bi(s),l=1<<o,a=r[o];a===-1?(!(l&n)||l&i)&&(r[o]=ZO(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function yg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n2(){var t=_c;return _c<<=1,!(_c&4194240)&&(_c=64),t}function Dp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bi(e),t[e]=n}function tT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-bi(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Sy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-bi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Me=0;function i2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var r2,ky,s2,o2,l2,vg=!1,Fc=[],Ss=null,ks=null,Cs=null,Su=new Map,ku=new Map,as=[],nT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n1(t,e){switch(t){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":Su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(e.pointerId)}}function Sa(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=uc(e),e!==null&&ky(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function iT(t,e,n,i,r){switch(e){case"focusin":return Ss=Sa(Ss,t,e,n,i,r),!0;case"dragenter":return ks=Sa(ks,t,e,n,i,r),!0;case"mouseover":return Cs=Sa(Cs,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Su.set(s,Sa(Su.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ku.set(s,Sa(ku.get(s)||null,t,e,n,i,r)),!0}return!1}function a2(t){var e=lo(t.target);if(e!==null){var n=_o(e);if(n!==null){if(e=n.tag,e===13){if(e=Kk(n),e!==null){t.blockedOn=e,l2(t.priority,function(){s2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);fg=i,n.target.dispatchEvent(i),fg=null}else return e=uc(n),e!==null&&ky(e),t.blockedOn=n,!1;e.shift()}return!0}function i1(t,e,n){Nd(t)&&n.delete(e)}function rT(){vg=!1,Ss!==null&&Nd(Ss)&&(Ss=null),ks!==null&&Nd(ks)&&(ks=null),Cs!==null&&Nd(Cs)&&(Cs=null),Su.forEach(i1),ku.forEach(i1)}function ka(t,e){t.blockedOn===e&&(t.blockedOn=null,vg||(vg=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,rT)))}function Cu(t){function e(r){return ka(r,t)}if(0<Fc.length){ka(Fc[0],t);for(var n=1;n<Fc.length;n++){var i=Fc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ss!==null&&ka(Ss,t),ks!==null&&ka(ks,t),Cs!==null&&ka(Cs,t),Su.forEach(e),ku.forEach(e),n=0;n<as.length;n++)i=as[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<as.length&&(n=as[0],n.blockedOn===null);)a2(n),n.blockedOn===null&&as.shift()}var bl=Wr.ReactCurrentBatchConfig,ch=!0;function sT(t,e,n,i){var r=Me,s=bl.transition;bl.transition=null;try{Me=1,Cy(t,e,n,i)}finally{Me=r,bl.transition=s}}function oT(t,e,n,i){var r=Me,s=bl.transition;bl.transition=null;try{Me=4,Cy(t,e,n,i)}finally{Me=r,bl.transition=s}}function Cy(t,e,n,i){if(ch){var r=wg(t,e,n,i);if(r===null)Vp(t,e,i,dh,n),n1(t,i);else if(iT(r,t,e,n,i))i.stopPropagation();else if(n1(t,i),e&4&&-1<nT.indexOf(t)){for(;r!==null;){var s=uc(r);if(s!==null&&r2(s),s=wg(t,e,n,i),s===null&&Vp(t,e,i,dh,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Vp(t,e,i,null,n)}}var dh=null;function wg(t,e,n,i){if(dh=null,t=by(i),t=lo(t),t!==null)if(e=_o(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Kk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return dh=t,null}function u2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XO()){case xy:return 1;case e2:return 4;case ah:case JO:return 16;case t2:return 536870912;default:return 16}default:return 16}}var gs=null,Ey=null,Dd=null;function c2(){if(Dd)return Dd;var t,e=Ey,n=e.length,i,r="value"in gs?gs.value:gs.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Dd=r.slice(t,1<i?1-i:void 0)}function Ld(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zc(){return!0}function r1(){return!1}function Fn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zc:r1,this.isPropagationStopped=r1,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zc)},persist:function(){},isPersistent:zc}),e}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ay=Fn(ha),ac=Qe({},ha,{view:0,detail:0}),lT=Fn(ac),Lp,Ip,Ca,kf=Qe({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Py,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ca&&(Ca&&t.type==="mousemove"?(Lp=t.screenX-Ca.screenX,Ip=t.screenY-Ca.screenY):Ip=Lp=0,Ca=t),Lp)},movementY:function(t){return"movementY"in t?t.movementY:Ip}}),s1=Fn(kf),aT=Qe({},kf,{dataTransfer:0}),uT=Fn(aT),cT=Qe({},ac,{relatedTarget:0}),Bp=Fn(cT),dT=Qe({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),hT=Fn(dT),fT=Qe({},ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pT=Fn(fT),mT=Qe({},ha,{data:0}),o1=Fn(mT),gT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vT[t])?!!e[t]:!1}function Py(){return wT}var bT=Qe({},ac,{key:function(t){if(t.key){var e=gT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ld(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Py,charCode:function(t){return t.type==="keypress"?Ld(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ld(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xT=Fn(bT),ST=Qe({},kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l1=Fn(ST),kT=Qe({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Py}),CT=Fn(kT),ET=Qe({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),AT=Fn(ET),PT=Qe({},kf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RT=Fn(PT),MT=[9,13,27,32],Ry=Fr&&"CompositionEvent"in window,iu=null;Fr&&"documentMode"in document&&(iu=document.documentMode);var OT=Fr&&"TextEvent"in window&&!iu,d2=Fr&&(!Ry||iu&&8<iu&&11>=iu),a1=String.fromCharCode(32),u1=!1;function h2(t,e){switch(t){case"keyup":return MT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var nl=!1;function TT(t,e){switch(t){case"compositionend":return f2(e);case"keypress":return e.which!==32?null:(u1=!0,a1);case"textInput":return t=e.data,t===a1&&u1?null:t;default:return null}}function NT(t,e){if(nl)return t==="compositionend"||!Ry&&h2(t,e)?(t=c2(),Dd=Ey=gs=null,nl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d2&&e.locale!=="ko"?null:e.data;default:return null}}var DT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DT[t.type]:e==="textarea"}function p2(t,e,n,i){Wk(i),e=hh(e,"onChange"),0<e.length&&(n=new Ay("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ru=null,Eu=null;function LT(t){E2(t,0)}function Cf(t){var e=sl(t);if($k(e))return t}function IT(t,e){if(t==="change")return e}var m2=!1;if(Fr){var _p;if(Fr){var $p="oninput"in document;if(!$p){var d1=document.createElement("div");d1.setAttribute("oninput","return;"),$p=typeof d1.oninput=="function"}_p=$p}else _p=!1;m2=_p&&(!document.documentMode||9<document.documentMode)}function h1(){ru&&(ru.detachEvent("onpropertychange",g2),Eu=ru=null)}function g2(t){if(t.propertyName==="value"&&Cf(Eu)){var e=[];p2(e,Eu,t,by(t)),Yk(LT,e)}}function BT(t,e,n){t==="focusin"?(h1(),ru=e,Eu=n,ru.attachEvent("onpropertychange",g2)):t==="focusout"&&h1()}function _T(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cf(Eu)}function $T(t,e){if(t==="click")return Cf(e)}function FT(t,e){if(t==="input"||t==="change")return Cf(e)}function zT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ci=typeof Object.is=="function"?Object.is:zT;function Au(t,e){if(Ci(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!tg.call(e,r)||!Ci(t[r],e[r]))return!1}return!0}function f1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p1(t,e){var n=f1(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f1(n)}}function y2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?y2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function v2(){for(var t=window,e=sh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sh(t.document)}return e}function My(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jT(t){var e=v2(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&y2(n.ownerDocument.documentElement,n)){if(i!==null&&My(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=p1(n,s);var o=p1(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var UT=Fr&&"documentMode"in document&&11>=document.documentMode,il=null,bg=null,su=null,xg=!1;function m1(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xg||il==null||il!==sh(i)||(i=il,"selectionStart"in i&&My(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),su&&Au(su,i)||(su=i,i=hh(bg,"onSelect"),0<i.length&&(e=new Ay("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=il)))}function jc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rl={animationend:jc("Animation","AnimationEnd"),animationiteration:jc("Animation","AnimationIteration"),animationstart:jc("Animation","AnimationStart"),transitionend:jc("Transition","TransitionEnd")},Fp={},w2={};Fr&&(w2=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Ef(t){if(Fp[t])return Fp[t];if(!rl[t])return t;var e=rl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in w2)return Fp[t]=e[n];return t}var b2=Ef("animationend"),x2=Ef("animationiteration"),S2=Ef("animationstart"),k2=Ef("transitionend"),C2=new Map,g1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Us(t,e){C2.set(t,e),Bo(e,[t])}for(var zp=0;zp<g1.length;zp++){var jp=g1[zp],VT=jp.toLowerCase(),HT=jp[0].toUpperCase()+jp.slice(1);Us(VT,"on"+HT)}Us(b2,"onAnimationEnd");Us(x2,"onAnimationIteration");Us(S2,"onAnimationStart");Us("dblclick","onDoubleClick");Us("focusin","onFocus");Us("focusout","onBlur");Us(k2,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);Bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xa));function y1(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,VO(i,e,void 0,t),t.currentTarget=null}function E2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&r.isPropagationStopped())break e;y1(r,l,u),s=a}else for(o=0;o<i.length;o++){if(l=i[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&r.isPropagationStopped())break e;y1(r,l,u),s=a}}}if(lh)throw t=gg,lh=!1,gg=null,t}function $e(t,e){var n=e[Ag];n===void 0&&(n=e[Ag]=new Set);var i=t+"__bubble";n.has(i)||(A2(e,t,2,!1),n.add(i))}function Up(t,e,n){var i=0;e&&(i|=4),A2(n,t,i,e)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Pu(t){if(!t[Uc]){t[Uc]=!0,Dk.forEach(function(n){n!=="selectionchange"&&(WT.has(n)||Up(n,!1,t),Up(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uc]||(e[Uc]=!0,Up("selectionchange",!1,e))}}function A2(t,e,n,i){switch(u2(e)){case 1:var r=sT;break;case 4:r=oT;break;default:r=Cy}n=r.bind(null,e,n,t),r=void 0,!mg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Vp(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;o=o.return}for(;l!==null;){if(o=lo(l),o===null)return;if(a=o.tag,a===5||a===6){i=s=o;continue e}l=l.parentNode}}i=i.return}Yk(function(){var u=s,c=by(n),d=[];e:{var h=C2.get(t);if(h!==void 0){var f=Ay,p=t;switch(t){case"keypress":if(Ld(n)===0)break e;case"keydown":case"keyup":f=xT;break;case"focusin":p="focus",f=Bp;break;case"focusout":p="blur",f=Bp;break;case"beforeblur":case"afterblur":f=Bp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=s1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=uT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=CT;break;case b2:case x2:case S2:f=hT;break;case k2:f=AT;break;case"scroll":f=lT;break;case"wheel":f=RT;break;case"copy":case"cut":case"paste":f=pT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=l1}var g=(e&4)!==0,v=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var y=u,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=xu(y,m),b!=null&&g.push(Ru(y,b,w)))),v)break;y=y.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==fg&&(p=n.relatedTarget||n.fromElement)&&(lo(p)||p[zr]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?lo(p):null,p!==null&&(v=_o(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=s1,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=l1,b="onPointerLeave",m="onPointerEnter",y="pointer"),v=f==null?h:sl(f),w=p==null?h:sl(p),h=new g(b,y+"leave",f,n,c),h.target=v,h.relatedTarget=w,b=null,lo(c)===u&&(g=new g(m,y+"enter",p,n,c),g.target=w,g.relatedTarget=v,b=g),v=b,f&&p)t:{for(g=f,m=p,y=0,w=g;w;w=Wo(w))y++;for(w=0,b=m;b;b=Wo(b))w++;for(;0<y-w;)g=Wo(g),y--;for(;0<w-y;)m=Wo(m),w--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Wo(g),m=Wo(m)}g=null}else g=null;f!==null&&v1(d,h,f,g,!1),p!==null&&v!==null&&v1(d,v,p,g,!0)}}e:{if(h=u?sl(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=IT;else if(c1(h))if(m2)C=FT;else{C=_T;var P=BT}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=$T);if(C&&(C=C(t,u))){p2(d,C,n,c);break e}P&&P(t,h,u),t==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&ag(h,"number",h.value)}switch(P=u?sl(u):window,t){case"focusin":(c1(P)||P.contentEditable==="true")&&(il=P,bg=u,su=null);break;case"focusout":su=bg=il=null;break;case"mousedown":xg=!0;break;case"contextmenu":case"mouseup":case"dragend":xg=!1,m1(d,n,c);break;case"selectionchange":if(UT)break;case"keydown":case"keyup":m1(d,n,c)}var R;if(Ry)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else nl?h2(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(d2&&n.locale!=="ko"&&(nl||I!=="onCompositionStart"?I==="onCompositionEnd"&&nl&&(R=c2()):(gs=c,Ey="value"in gs?gs.value:gs.textContent,nl=!0)),P=hh(u,I),0<P.length&&(I=new o1(I,t,null,n,c),d.push({event:I,listeners:P}),R?I.data=R:(R=f2(n),R!==null&&(I.data=R)))),(R=OT?TT(t,n):NT(t,n))&&(u=hh(u,"onBeforeInput"),0<u.length&&(c=new o1("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=R))}E2(d,e)})}function Ru(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=xu(t,n),s!=null&&i.unshift(Ru(t,s,r)),s=xu(t,e),s!=null&&i.push(Ru(t,s,r))),t=t.return}return i}function Wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function v1(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===i)break;l.tag===5&&u!==null&&(l=u,r?(a=xu(n,s),a!=null&&o.unshift(Ru(n,a,l))):r||(a=xu(n,s),a!=null&&o.push(Ru(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GT=/\r\n?/g,XT=/\u0000|\uFFFD/g;function w1(t){return(typeof t=="string"?t:""+t).replace(GT,`
`).replace(XT,"")}function Vc(t,e,n){if(e=w1(e),w1(t)!==e&&n)throw Error(W(425))}function fh(){}var Sg=null,kg=null;function Cg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Eg=typeof setTimeout=="function"?setTimeout:void 0,JT=typeof clearTimeout=="function"?clearTimeout:void 0,b1=typeof Promise=="function"?Promise:void 0,YT=typeof queueMicrotask=="function"?queueMicrotask:typeof b1<"u"?function(t){return b1.resolve(null).then(t).catch(KT)}:Eg;function KT(t){setTimeout(function(){throw t})}function Hp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Cu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Cu(e)}function Es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fa=Math.random().toString(36).slice(2),Vi="__reactFiber$"+fa,Mu="__reactProps$"+fa,zr="__reactContainer$"+fa,Ag="__reactEvents$"+fa,qT="__reactListeners$"+fa,QT="__reactHandles$"+fa;function lo(t){var e=t[Vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zr]||n[Vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x1(t);t!==null;){if(n=t[Vi])return n;t=x1(t)}return e}t=n,n=t.parentNode}return null}function uc(t){return t=t[Vi]||t[zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Af(t){return t[Mu]||null}var Pg=[],ol=-1;function Vs(t){return{current:t}}function Ue(t){0>ol||(t.current=Pg[ol],Pg[ol]=null,ol--)}function Ie(t,e){ol++,Pg[ol]=t.current,t.current=e}var Ls={},Vt=Vs(Ls),vn=Vs(!1),Co=Ls;function Wl(t,e){var n=t.type.contextTypes;if(!n)return Ls;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function wn(t){return t=t.childContextTypes,t!=null}function ph(){Ue(vn),Ue(Vt)}function S1(t,e,n){if(Vt.current!==Ls)throw Error(W(168));Ie(Vt,e),Ie(vn,n)}function P2(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(W(108,BO(t)||"Unknown",r));return Qe({},n,i)}function mh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ls,Co=Vt.current,Ie(Vt,t),Ie(vn,vn.current),!0}function k1(t,e,n){var i=t.stateNode;if(!i)throw Error(W(169));n?(t=P2(t,e,Co),i.__reactInternalMemoizedMergedChildContext=t,Ue(vn),Ue(Vt),Ie(Vt,t)):Ue(vn),Ie(vn,n)}var pr=null,Pf=!1,Wp=!1;function R2(t){pr===null?pr=[t]:pr.push(t)}function ZT(t){Pf=!0,R2(t)}function Hs(){if(!Wp&&pr!==null){Wp=!0;var t=0,e=Me;try{var n=pr;for(Me=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}pr=null,Pf=!1}catch(r){throw pr!==null&&(pr=pr.slice(t+1)),Zk(xy,Hs),r}finally{Me=e,Wp=!1}}return null}var ll=[],al=0,gh=null,yh=0,Jn=[],Yn=0,Eo=null,Ar=1,Pr="";function eo(t,e){ll[al++]=yh,ll[al++]=gh,gh=t,yh=e}function M2(t,e,n){Jn[Yn++]=Ar,Jn[Yn++]=Pr,Jn[Yn++]=Eo,Eo=t;var i=Ar;t=Pr;var r=32-bi(i)-1;i&=~(1<<r),n+=1;var s=32-bi(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ar=1<<32-bi(e)+r|n<<r|i,Pr=s+t}else Ar=1<<s|n<<r|i,Pr=t}function Oy(t){t.return!==null&&(eo(t,1),M2(t,1,0))}function Ty(t){for(;t===gh;)gh=ll[--al],ll[al]=null,yh=ll[--al],ll[al]=null;for(;t===Eo;)Eo=Jn[--Yn],Jn[Yn]=null,Pr=Jn[--Yn],Jn[Yn]=null,Ar=Jn[--Yn],Jn[Yn]=null}var Bn=null,Ln=null,He=!1,mi=null;function O2(t,e){var n=Qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function C1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Ln=Es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Eo!==null?{id:Ar,overflow:Pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Ln=null,!0):!1;default:return!1}}function Rg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mg(t){if(He){var e=Ln;if(e){var n=e;if(!C1(t,e)){if(Rg(t))throw Error(W(418));e=Es(n.nextSibling);var i=Bn;e&&C1(t,e)?O2(i,n):(t.flags=t.flags&-4097|2,He=!1,Bn=t)}}else{if(Rg(t))throw Error(W(418));t.flags=t.flags&-4097|2,He=!1,Bn=t}}}function E1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function Hc(t){if(t!==Bn)return!1;if(!He)return E1(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cg(t.type,t.memoizedProps)),e&&(e=Ln)){if(Rg(t))throw T2(),Error(W(418));for(;e;)O2(t,e),e=Es(e.nextSibling)}if(E1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ln=Es(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ln=null}}else Ln=Bn?Es(t.stateNode.nextSibling):null;return!0}function T2(){for(var t=Ln;t;)t=Es(t.nextSibling)}function Gl(){Ln=Bn=null,He=!1}function Ny(t){mi===null?mi=[t]:mi.push(t)}var eN=Wr.ReactCurrentBatchConfig;function ci(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var vh=Vs(null),wh=null,ul=null,Dy=null;function Ly(){Dy=ul=wh=null}function Iy(t){var e=vh.current;Ue(vh),t._currentValue=e}function Og(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function xl(t,e){wh=t,Dy=ul=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function ri(t){var e=t._currentValue;if(Dy!==t)if(t={context:t,memoizedValue:e,next:null},ul===null){if(wh===null)throw Error(W(308));ul=t,wh.dependencies={lanes:0,firstContext:t}}else ul=ul.next=t;return e}var ao=null;function By(t){ao===null?ao=[t]:ao.push(t)}function N2(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,By(e)):(n.next=r.next,r.next=n),e.interleaved=n,jr(t,i)}function jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ts=!1;function _y(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function As(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,jr(t,n)}return r=i.interleaved,r===null?(e.next=e,By(i)):(e.next=r.next,r.next=e),i.interleaved=e,jr(t,n)}function Id(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Sy(t,n)}}function A1(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bh(t,e,n,i){var r=t.updateQueue;ts=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var d=r.baseState;o=0,c=u=a=null,l=s;do{var h=l.lane,f=l.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,g=l;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Qe({},d,h);break e;case 2:ts=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=f,a=d):c=c.next=f,o|=h;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(c===null&&(a=d),r.baseState=a,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Po|=o,t.lanes=o,t.memoizedState=d}}function P1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(W(191,r));r.call(i)}}}var L2=new Nk.Component().refs;function Tg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rf={isMounted:function(t){return(t=t._reactInternals)?_o(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=tn(),r=Rs(t),s=Nr(i,r);s.payload=e,n!=null&&(s.callback=n),e=As(t,s,r),e!==null&&(xi(e,t,r,i),Id(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=tn(),r=Rs(t),s=Nr(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=As(t,s,r),e!==null&&(xi(e,t,r,i),Id(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tn(),i=Rs(t),r=Nr(n,i);r.tag=2,e!=null&&(r.callback=e),e=As(t,r,i),e!==null&&(xi(e,t,i,n),Id(e,t,i))}};function R1(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Au(n,i)||!Au(r,s):!0}function I2(t,e,n){var i=!1,r=Ls,s=e.contextType;return typeof s=="object"&&s!==null?s=ri(s):(r=wn(e)?Co:Vt.current,i=e.contextTypes,s=(i=i!=null)?Wl(t,r):Ls),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function M1(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Rf.enqueueReplaceState(e,e.state,null)}function Ng(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=L2,_y(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ri(s):(s=wn(e)?Co:Vt.current,r.context=Wl(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Tg(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Rf.enqueueReplaceState(r,r.state,null),bh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ea(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var i=n.stateNode}if(!i)throw Error(W(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;l===L2&&(l=r.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Wc(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function O1(t){var e=t._init;return e(t._payload)}function B2(t){function e(m,y){if(t){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function r(m,y){return m=Ms(m,y),m.index=0,m.sibling=null,m}function s(m,y,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,y,w,b){return y===null||y.tag!==6?(y=Qp(w,m.mode,b),y.return=m,y):(y=r(y,w),y.return=m,y)}function a(m,y,w,b){var C=w.type;return C===tl?c(m,y,w.props.children,b,w.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===es&&O1(C)===y.type)?(b=r(y,w.props),b.ref=Ea(m,y,w),b.return=m,b):(b=jd(w.type,w.key,w.props,null,m.mode,b),b.ref=Ea(m,y,w),b.return=m,b)}function u(m,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Zp(w,m.mode,b),y.return=m,y):(y=r(y,w.children||[]),y.return=m,y)}function c(m,y,w,b,C){return y===null||y.tag!==7?(y=bo(w,m.mode,b,C),y.return=m,y):(y=r(y,w),y.return=m,y)}function d(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Qp(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Lc:return w=jd(y.type,y.key,y.props,null,m.mode,w),w.ref=Ea(m,null,y),w.return=m,w;case el:return y=Zp(y,m.mode,w),y.return=m,y;case es:var b=y._init;return d(m,b(y._payload),w)}if(Wa(y)||ba(y))return y=bo(y,m.mode,w,null),y.return=m,y;Wc(m,y)}return null}function h(m,y,w,b){var C=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:l(m,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lc:return w.key===C?a(m,y,w,b):null;case el:return w.key===C?u(m,y,w,b):null;case es:return C=w._init,h(m,y,C(w._payload),b)}if(Wa(w)||ba(w))return C!==null?null:c(m,y,w,b,null);Wc(m,w)}return null}function f(m,y,w,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,l(y,m,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Lc:return m=m.get(b.key===null?w:b.key)||null,a(y,m,b,C);case el:return m=m.get(b.key===null?w:b.key)||null,u(y,m,b,C);case es:var P=b._init;return f(m,y,w,P(b._payload),C)}if(Wa(b)||ba(b))return m=m.get(w)||null,c(y,m,b,C,null);Wc(y,b)}return null}function p(m,y,w,b){for(var C=null,P=null,R=y,I=y=0,E=null;R!==null&&I<w.length;I++){R.index>I?(E=R,R=null):E=R.sibling;var A=h(m,R,w[I],b);if(A===null){R===null&&(R=E);break}t&&R&&A.alternate===null&&e(m,R),y=s(A,y,I),P===null?C=A:P.sibling=A,P=A,R=E}if(I===w.length)return n(m,R),He&&eo(m,I),C;if(R===null){for(;I<w.length;I++)R=d(m,w[I],b),R!==null&&(y=s(R,y,I),P===null?C=R:P.sibling=R,P=R);return He&&eo(m,I),C}for(R=i(m,R);I<w.length;I++)E=f(R,m,I,w[I],b),E!==null&&(t&&E.alternate!==null&&R.delete(E.key===null?I:E.key),y=s(E,y,I),P===null?C=E:P.sibling=E,P=E);return t&&R.forEach(function(M){return e(m,M)}),He&&eo(m,I),C}function g(m,y,w,b){var C=ba(w);if(typeof C!="function")throw Error(W(150));if(w=C.call(w),w==null)throw Error(W(151));for(var P=C=null,R=y,I=y=0,E=null,A=w.next();R!==null&&!A.done;I++,A=w.next()){R.index>I?(E=R,R=null):E=R.sibling;var M=h(m,R,A.value,b);if(M===null){R===null&&(R=E);break}t&&R&&M.alternate===null&&e(m,R),y=s(M,y,I),P===null?C=M:P.sibling=M,P=M,R=E}if(A.done)return n(m,R),He&&eo(m,I),C;if(R===null){for(;!A.done;I++,A=w.next())A=d(m,A.value,b),A!==null&&(y=s(A,y,I),P===null?C=A:P.sibling=A,P=A);return He&&eo(m,I),C}for(R=i(m,R);!A.done;I++,A=w.next())A=f(R,m,I,A.value,b),A!==null&&(t&&A.alternate!==null&&R.delete(A.key===null?I:A.key),y=s(A,y,I),P===null?C=A:P.sibling=A,P=A);return t&&R.forEach(function(O){return e(m,O)}),He&&eo(m,I),C}function v(m,y,w,b){if(typeof w=="object"&&w!==null&&w.type===tl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Lc:e:{for(var C=w.key,P=y;P!==null;){if(P.key===C){if(C=w.type,C===tl){if(P.tag===7){n(m,P.sibling),y=r(P,w.props.children),y.return=m,m=y;break e}}else if(P.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===es&&O1(C)===P.type){n(m,P.sibling),y=r(P,w.props),y.ref=Ea(m,P,w),y.return=m,m=y;break e}n(m,P);break}else e(m,P);P=P.sibling}w.type===tl?(y=bo(w.props.children,m.mode,b,w.key),y.return=m,m=y):(b=jd(w.type,w.key,w.props,null,m.mode,b),b.ref=Ea(m,y,w),b.return=m,m=b)}return o(m);case el:e:{for(P=w.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(m,y.sibling),y=r(y,w.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=Zp(w,m.mode,b),y.return=m,m=y}return o(m);case es:return P=w._init,v(m,y,P(w._payload),b)}if(Wa(w))return p(m,y,w,b);if(ba(w))return g(m,y,w,b);Wc(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(m,y.sibling),y=r(y,w),y.return=m,m=y):(n(m,y),y=Qp(w,m.mode,b),y.return=m,m=y),o(m)):n(m,y)}return v}var Xl=B2(!0),_2=B2(!1),cc={},qi=Vs(cc),Ou=Vs(cc),Tu=Vs(cc);function uo(t){if(t===cc)throw Error(W(174));return t}function $y(t,e){switch(Ie(Tu,e),Ie(Ou,t),Ie(qi,cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cg(e,t)}Ue(qi),Ie(qi,e)}function Jl(){Ue(qi),Ue(Ou),Ue(Tu)}function $2(t){uo(Tu.current);var e=uo(qi.current),n=cg(e,t.type);e!==n&&(Ie(Ou,t),Ie(qi,n))}function Fy(t){Ou.current===t&&(Ue(qi),Ue(Ou))}var Xe=Vs(0);function xh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gp=[];function zy(){for(var t=0;t<Gp.length;t++)Gp[t]._workInProgressVersionPrimary=null;Gp.length=0}var Bd=Wr.ReactCurrentDispatcher,Xp=Wr.ReactCurrentBatchConfig,Ao=0,Ke=null,mt=null,xt=null,Sh=!1,ou=!1,Nu=0,tN=0;function _t(){throw Error(W(321))}function jy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ci(t[n],e[n]))return!1;return!0}function Uy(t,e,n,i,r,s){if(Ao=s,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bd.current=t===null||t.memoizedState===null?sN:oN,t=n(i,r),ou){s=0;do{if(ou=!1,Nu=0,25<=s)throw Error(W(301));s+=1,xt=mt=null,e.updateQueue=null,Bd.current=lN,t=n(i,r)}while(ou)}if(Bd.current=kh,e=mt!==null&&mt.next!==null,Ao=0,xt=mt=Ke=null,Sh=!1,e)throw Error(W(300));return t}function Vy(){var t=Nu!==0;return Nu=0,t}function Ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ke.memoizedState=xt=t:xt=xt.next=t,xt}function si(){if(mt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=xt===null?Ke.memoizedState:xt.next;if(e!==null)xt=e,mt=t;else{if(t===null)throw Error(W(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},xt===null?Ke.memoizedState=xt=t:xt=xt.next=t}return xt}function Du(t,e){return typeof e=="function"?e(t):e}function Jp(t){var e=si(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var i=mt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((Ao&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=i):a=a.next=d,Ke.lanes|=c,Po|=c}u=u.next}while(u!==null&&u!==s);a===null?o=i:a.next=l,Ci(i,e.memoizedState)||(mn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=a,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ke.lanes|=s,Po|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yp(t){var e=si(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Ci(s,e.memoizedState)||(mn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function F2(){}function z2(t,e){var n=Ke,i=si(),r=e(),s=!Ci(i.memoizedState,r);if(s&&(i.memoizedState=r,mn=!0),i=i.queue,Hy(V2.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,Lu(9,U2.bind(null,n,i,r,e),void 0,null),Ct===null)throw Error(W(349));Ao&30||j2(n,e,r)}return r}function j2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function U2(t,e,n,i){e.value=n,e.getSnapshot=i,H2(e)&&W2(t)}function V2(t,e,n){return n(function(){H2(e)&&W2(t)})}function H2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ci(t,n)}catch{return!0}}function W2(t){var e=jr(t,1);e!==null&&xi(e,t,1,-1)}function T1(t){var e=Ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Du,lastRenderedState:t},e.queue=t,t=t.dispatch=rN.bind(null,Ke,t),[e.memoizedState,t]}function Lu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function G2(){return si().memoizedState}function _d(t,e,n,i){var r=Ii();Ke.flags|=t,r.memoizedState=Lu(1|e,n,void 0,i===void 0?null:i)}function Mf(t,e,n,i){var r=si();i=i===void 0?null:i;var s=void 0;if(mt!==null){var o=mt.memoizedState;if(s=o.destroy,i!==null&&jy(i,o.deps)){r.memoizedState=Lu(e,n,s,i);return}}Ke.flags|=t,r.memoizedState=Lu(1|e,n,s,i)}function N1(t,e){return _d(8390656,8,t,e)}function Hy(t,e){return Mf(2048,8,t,e)}function X2(t,e){return Mf(4,2,t,e)}function J2(t,e){return Mf(4,4,t,e)}function Y2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K2(t,e,n){return n=n!=null?n.concat([t]):null,Mf(4,4,Y2.bind(null,e,t),n)}function Wy(){}function q2(t,e){var n=si();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&jy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Q2(t,e){var n=si();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&jy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Z2(t,e,n){return Ao&21?(Ci(n,e)||(n=n2(),Ke.lanes|=n,Po|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function nN(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var i=Xp.transition;Xp.transition={};try{t(!1),e()}finally{Me=n,Xp.transition=i}}function eC(){return si().memoizedState}function iN(t,e,n){var i=Rs(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},tC(t))nC(e,n);else if(n=N2(t,e,n,i),n!==null){var r=tn();xi(n,t,i,r),iC(n,e,i)}}function rN(t,e,n){var i=Rs(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(tC(t))nC(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(r.hasEagerState=!0,r.eagerState=l,Ci(l,o)){var a=e.interleaved;a===null?(r.next=r,By(e)):(r.next=a.next,a.next=r),e.interleaved=r;return}}catch{}finally{}n=N2(t,e,r,i),n!==null&&(r=tn(),xi(n,t,i,r),iC(n,e,i))}}function tC(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function nC(t,e){ou=Sh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function iC(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Sy(t,n)}}var kh={readContext:ri,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},sN={readContext:ri,useCallback:function(t,e){return Ii().memoizedState=[t,e===void 0?null:e],t},useContext:ri,useEffect:N1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_d(4194308,4,Y2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _d(4194308,4,t,e)},useInsertionEffect:function(t,e){return _d(4,2,t,e)},useMemo:function(t,e){var n=Ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ii();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=iN.bind(null,Ke,t),[i.memoizedState,t]},useRef:function(t){var e=Ii();return t={current:t},e.memoizedState=t},useState:T1,useDebugValue:Wy,useDeferredValue:function(t){return Ii().memoizedState=t},useTransition:function(){var t=T1(!1),e=t[0];return t=nN.bind(null,t[1]),Ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ke,r=Ii();if(He){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Ct===null)throw Error(W(349));Ao&30||j2(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,N1(V2.bind(null,i,s,t),[t]),i.flags|=2048,Lu(9,U2.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ii(),e=Ct.identifierPrefix;if(He){var n=Pr,i=Ar;n=(i&~(1<<32-bi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oN={readContext:ri,useCallback:q2,useContext:ri,useEffect:Hy,useImperativeHandle:K2,useInsertionEffect:X2,useLayoutEffect:J2,useMemo:Q2,useReducer:Jp,useRef:G2,useState:function(){return Jp(Du)},useDebugValue:Wy,useDeferredValue:function(t){var e=si();return Z2(e,mt.memoizedState,t)},useTransition:function(){var t=Jp(Du)[0],e=si().memoizedState;return[t,e]},useMutableSource:F2,useSyncExternalStore:z2,useId:eC,unstable_isNewReconciler:!1},lN={readContext:ri,useCallback:q2,useContext:ri,useEffect:Hy,useImperativeHandle:K2,useInsertionEffect:X2,useLayoutEffect:J2,useMemo:Q2,useReducer:Yp,useRef:G2,useState:function(){return Yp(Du)},useDebugValue:Wy,useDeferredValue:function(t){var e=si();return mt===null?e.memoizedState=t:Z2(e,mt.memoizedState,t)},useTransition:function(){var t=Yp(Du)[0],e=si().memoizedState;return[t,e]},useMutableSource:F2,useSyncExternalStore:z2,useId:eC,unstable_isNewReconciler:!1};function Yl(t,e){try{var n="",i=e;do n+=IO(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Kp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aN=typeof WeakMap=="function"?WeakMap:Map;function rC(t,e,n){n=Nr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Eh||(Eh=!0,Vg=i),Dg(t,e)},n}function sC(t,e,n){n=Nr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Dg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Dg(t,e),typeof i!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function D1(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new aN;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=SN.bind(null,t,e,n),e.then(t,t))}function L1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function I1(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nr(-1,1),e.tag=2,As(n,e,1))),n.lanes|=1),t)}var uN=Wr.ReactCurrentOwner,mn=!1;function Yt(t,e,n,i){e.child=t===null?_2(e,null,n,i):Xl(e,t.child,n,i)}function B1(t,e,n,i,r){n=n.render;var s=e.ref;return xl(e,r),i=Uy(t,e,n,i,s,r),n=Vy(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ur(t,e,r)):(He&&n&&Oy(e),e.flags|=1,Yt(t,e,i,r),e.child)}function _1(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Zy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,oC(t,e,s,i,r)):(t=jd(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Au,n(o,i)&&t.ref===e.ref)return Ur(t,e,r)}return e.flags|=1,t=Ms(s,i),t.ref=e.ref,t.return=e,e.child=t}function oC(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Au(s,i)&&t.ref===e.ref)if(mn=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,Ur(t,e,r)}return Lg(t,e,n,i,r)}function lC(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(dl,On),On|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(dl,On),On|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ie(dl,On),On|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ie(dl,On),On|=i;return Yt(t,e,r,n),e.child}function aC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lg(t,e,n,i,r){var s=wn(n)?Co:Vt.current;return s=Wl(e,s),xl(e,r),n=Uy(t,e,n,i,s,r),i=Vy(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ur(t,e,r)):(He&&i&&Oy(e),e.flags|=1,Yt(t,e,n,r),e.child)}function $1(t,e,n,i,r){if(wn(n)){var s=!0;mh(e)}else s=!1;if(xl(e,r),e.stateNode===null)$d(t,e),I2(e,n,i),Ng(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ri(u):(u=wn(n)?Co:Vt.current,u=Wl(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||a!==u)&&M1(e,o,i,u),ts=!1;var h=e.memoizedState;o.state=h,bh(e,i,o,r),a=e.memoizedState,l!==i||h!==a||vn.current||ts?(typeof c=="function"&&(Tg(e,n,c,i),a=e.memoizedState),(l=ts||R1(e,n,l,i,h,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=a),o.props=i,o.state=a,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,D2(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ci(e.type,l),o.props=u,d=e.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=ri(a):(a=wn(n)?Co:Vt.current,a=Wl(e,a));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==a)&&M1(e,o,i,a),ts=!1,h=e.memoizedState,o.state=h,bh(e,i,o,r);var p=e.memoizedState;l!==d||h!==p||vn.current||ts?(typeof f=="function"&&(Tg(e,n,f,i),p=e.memoizedState),(u=ts||R1(e,n,u,i,h,p,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=a,i=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return Ig(t,e,n,i,s,r)}function Ig(t,e,n,i,r,s){aC(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&k1(e,n,!1),Ur(t,e,s);i=e.stateNode,uN.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Xl(e,t.child,null,s),e.child=Xl(e,null,l,s)):Yt(t,e,l,s),e.memoizedState=i.state,r&&k1(e,n,!0),e.child}function uC(t){var e=t.stateNode;e.pendingContext?S1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&S1(t,e.context,!1),$y(t,e.containerInfo)}function F1(t,e,n,i,r){return Gl(),Ny(r),e.flags|=256,Yt(t,e,n,i),e.child}var Bg={dehydrated:null,treeContext:null,retryLane:0};function _g(t){return{baseLanes:t,cachePool:null,transitions:null}}function cC(t,e,n){var i=e.pendingProps,r=Xe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ie(Xe,r&1),t===null)return Mg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Nf(o,i,0,null),t=bo(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=_g(n),e.memoizedState=Bg,t):Gy(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return cN(t,e,o,i,l,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,l=r.sibling;var a={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=a,e.deletions=null):(i=Ms(r,a),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=Ms(l,s):(s=bo(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?_g(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Bg,i}return s=t.child,t=s.sibling,i=Ms(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Gy(t,e){return e=Nf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gc(t,e,n,i){return i!==null&&Ny(i),Xl(e,t.child,null,n),t=Gy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cN(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Kp(Error(W(422))),Gc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Nf({mode:"visible",children:i.children},r,0,null),s=bo(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Xl(e,t.child,null,o),e.child.memoizedState=_g(o),e.memoizedState=Bg,s);if(!(e.mode&1))return Gc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(W(419)),i=Kp(s,i,void 0),Gc(t,e,o,i)}if(l=(o&t.childLanes)!==0,mn||l){if(i=Ct,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,jr(t,r),xi(i,t,r,-1))}return Qy(),i=Kp(Error(W(421))),Gc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=kN.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Ln=Es(r.nextSibling),Bn=e,He=!0,mi=null,t!==null&&(Jn[Yn++]=Ar,Jn[Yn++]=Pr,Jn[Yn++]=Eo,Ar=t.id,Pr=t.overflow,Eo=e),e=Gy(e,i.children),e.flags|=4096,e)}function z1(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Og(t.return,e,n)}function qp(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function dC(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Yt(t,e,i.children,n),i=Xe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&z1(t,n,e);else if(t.tag===19)z1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ie(Xe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&xh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),qp(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&xh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}qp(e,!0,n,null,s);break;case"together":qp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $d(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Po|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Ms(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ms(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dN(t,e,n){switch(e.tag){case 3:uC(e),Gl();break;case 5:$2(e);break;case 1:wn(e.type)&&mh(e);break;case 4:$y(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ie(vh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ie(Xe,Xe.current&1),e.flags|=128,null):n&e.child.childLanes?cC(t,e,n):(Ie(Xe,Xe.current&1),t=Ur(t,e,n),t!==null?t.sibling:null);Ie(Xe,Xe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return dC(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ie(Xe,Xe.current),i)break;return null;case 22:case 23:return e.lanes=0,lC(t,e,n)}return Ur(t,e,n)}var hC,$g,fC,pC;hC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$g=function(){};fC=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,uo(qi.current);var s=null;switch(n){case"input":r=og(t,r),i=og(t,i),s=[];break;case"select":r=Qe({},r,{value:void 0}),i=Qe({},i,{value:void 0}),s=[];break;case"textarea":r=ug(t,r),i=ug(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=fh)}dg(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var a=i[u];if(l=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wu.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&$e("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};pC=function(t,e,n,i){n!==i&&(e.flags|=4)};function Aa(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function hN(t,e,n){var i=e.pendingProps;switch(Ty(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return wn(e.type)&&ph(),$t(e),null;case 3:return i=e.stateNode,Jl(),Ue(vn),Ue(Vt),zy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Hc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mi!==null&&(Gg(mi),mi=null))),$g(t,e),$t(e),null;case 5:Fy(e);var r=uo(Tu.current);if(n=e.type,t!==null&&e.stateNode!=null)fC(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(W(166));return $t(e),null}if(t=uo(qi.current),Hc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Vi]=e,i[Mu]=s,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",i),$e("close",i);break;case"iframe":case"object":case"embed":$e("load",i);break;case"video":case"audio":for(r=0;r<Xa.length;r++)$e(Xa[r],i);break;case"source":$e("error",i);break;case"img":case"image":case"link":$e("error",i),$e("load",i);break;case"details":$e("toggle",i);break;case"input":Yw(i,s),$e("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},$e("invalid",i);break;case"textarea":qw(i,s),$e("invalid",i)}dg(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Vc(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Vc(i.textContent,l,t),r=["children",""+l]):wu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$e("scroll",i)}switch(n){case"input":Ic(i),Kw(i,s,!0);break;case"textarea":Ic(i),Qw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=fh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Vi]=e,t[Mu]=i,hC(t,e,!1,!1),e.stateNode=t;e:{switch(o=hg(n,i),n){case"dialog":$e("cancel",t),$e("close",t),r=i;break;case"iframe":case"object":case"embed":$e("load",t),r=i;break;case"video":case"audio":for(r=0;r<Xa.length;r++)$e(Xa[r],t);r=i;break;case"source":$e("error",t),r=i;break;case"img":case"image":case"link":$e("error",t),$e("load",t),r=i;break;case"details":$e("toggle",t),r=i;break;case"input":Yw(t,i),r=og(t,i),$e("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Qe({},i,{value:void 0}),$e("invalid",t);break;case"textarea":qw(t,i),r=ug(t,i),$e("invalid",t);break;default:r=i}dg(n,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Hk(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Uk(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&bu(t,a):typeof a=="number"&&bu(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wu.hasOwnProperty(s)?a!=null&&s==="onScroll"&&$e("scroll",t):a!=null&&gy(t,s,a,o))}switch(n){case"input":Ic(t),Kw(t,i,!1);break;case"textarea":Ic(t),Qw(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ds(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?yl(t,!!i.multiple,s,!1):i.defaultValue!=null&&yl(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=fh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)pC(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(W(166));if(n=uo(Tu.current),uo(qi.current),Hc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Vi]=e,(s=i.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:Vc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Vi]=e,e.stateNode=i}return $t(e),null;case 13:if(Ue(Xe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&Ln!==null&&e.mode&1&&!(e.flags&128))T2(),Gl(),e.flags|=98560,s=!1;else if(s=Hc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Vi]=e}else Gl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),s=!1}else mi!==null&&(Gg(mi),mi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?vt===0&&(vt=3):Qy())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return Jl(),$g(t,e),t===null&&Pu(e.stateNode.containerInfo),$t(e),null;case 10:return Iy(e.type._context),$t(e),null;case 17:return wn(e.type)&&ph(),$t(e),null;case 19:if(Ue(Xe),s=e.memoizedState,s===null)return $t(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Aa(s,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xh(t),o!==null){for(e.flags|=128,Aa(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Xe,Xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&lt()>Kl&&(e.flags|=128,i=!0,Aa(s,!1),e.lanes=4194304)}else{if(!i)if(t=xh(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Aa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return $t(e),null}else 2*lt()-s.renderingStartTime>Kl&&n!==1073741824&&(e.flags|=128,i=!0,Aa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=lt(),e.sibling=null,n=Xe.current,Ie(Xe,i?n&1|2:n&1),e):($t(e),null);case 22:case 23:return qy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?On&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function fN(t,e){switch(Ty(e),e.tag){case 1:return wn(e.type)&&ph(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jl(),Ue(vn),Ue(Vt),zy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fy(e),null;case 13:if(Ue(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Gl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Xe),null;case 4:return Jl(),null;case 10:return Iy(e.type._context),null;case 22:case 23:return qy(),null;case 24:return null;default:return null}}var Xc=!1,jt=!1,pN=typeof WeakSet=="function"?WeakSet:Set,Q=null;function cl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){nt(t,e,i)}else n.current=null}function Fg(t,e,n){try{n()}catch(i){nt(t,e,i)}}var j1=!1;function mN(t,e){if(Sg=ch,t=v2(),My(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(l=o+r),d!==s||i!==0&&d.nodeType!==3||(a=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(l=o),h===s&&++c===i&&(a=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(kg={focusedElem:t,selectionRange:n},ch=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:ci(e.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(b){nt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return p=j1,j1=!1,p}function lu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Fg(e,n,s)}r=r.next}while(r!==i)}}function Of(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function zg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mC(t){var e=t.alternate;e!==null&&(t.alternate=null,mC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vi],delete e[Mu],delete e[Ag],delete e[qT],delete e[QT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gC(t){return t.tag===5||t.tag===3||t.tag===4}function U1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fh));else if(i!==4&&(t=t.child,t!==null))for(jg(t,e,n),t=t.sibling;t!==null;)jg(t,e,n),t=t.sibling}function Ug(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Ug(t,e,n),t=t.sibling;t!==null;)Ug(t,e,n),t=t.sibling}var Et=null,pi=!1;function Kr(t,e,n){for(n=n.child;n!==null;)yC(t,e,n),n=n.sibling}function yC(t,e,n){if(Ki&&typeof Ki.onCommitFiberUnmount=="function")try{Ki.onCommitFiberUnmount(Sf,n)}catch{}switch(n.tag){case 5:jt||cl(n,e);case 6:var i=Et,r=pi;Et=null,Kr(t,e,n),Et=i,pi=r,Et!==null&&(pi?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(pi?(t=Et,n=n.stateNode,t.nodeType===8?Hp(t.parentNode,n):t.nodeType===1&&Hp(t,n),Cu(t)):Hp(Et,n.stateNode));break;case 4:i=Et,r=pi,Et=n.stateNode.containerInfo,pi=!0,Kr(t,e,n),Et=i,pi=r;break;case 0:case 11:case 14:case 15:if(!jt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fg(n,e,o),r=r.next}while(r!==i)}Kr(t,e,n);break;case 1:if(!jt&&(cl(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){nt(n,e,l)}Kr(t,e,n);break;case 21:Kr(t,e,n);break;case 22:n.mode&1?(jt=(i=jt)||n.memoizedState!==null,Kr(t,e,n),jt=i):Kr(t,e,n);break;default:Kr(t,e,n)}}function V1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pN),e.forEach(function(i){var r=CN.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function li(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Et=l.stateNode,pi=!1;break e;case 3:Et=l.stateNode.containerInfo,pi=!0;break e;case 4:Et=l.stateNode.containerInfo,pi=!0;break e}l=l.return}if(Et===null)throw Error(W(160));yC(s,o,r),Et=null,pi=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(u){nt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vC(e,t),e=e.sibling}function vC(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(li(e,t),Oi(t),i&4){try{lu(3,t,t.return),Of(3,t)}catch(g){nt(t,t.return,g)}try{lu(5,t,t.return)}catch(g){nt(t,t.return,g)}}break;case 1:li(e,t),Oi(t),i&512&&n!==null&&cl(n,n.return);break;case 5:if(li(e,t),Oi(t),i&512&&n!==null&&cl(n,n.return),t.flags&32){var r=t.stateNode;try{bu(r,"")}catch(g){nt(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Fk(r,s),hg(l,o);var u=hg(l,s);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?Hk(r,d):c==="dangerouslySetInnerHTML"?Uk(r,d):c==="children"?bu(r,d):gy(r,c,d,u)}switch(l){case"input":lg(r,s);break;case"textarea":zk(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?yl(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?yl(r,!!s.multiple,s.defaultValue,!0):yl(r,!!s.multiple,s.multiple?[]:"",!1))}r[Mu]=s}catch(g){nt(t,t.return,g)}}break;case 6:if(li(e,t),Oi(t),i&4){if(t.stateNode===null)throw Error(W(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){nt(t,t.return,g)}}break;case 3:if(li(e,t),Oi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Cu(e.containerInfo)}catch(g){nt(t,t.return,g)}break;case 4:li(e,t),Oi(t);break;case 13:li(e,t),Oi(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Yy=lt())),i&4&&V1(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(u=jt)||c,li(e,t),jt=u):li(e,t),Oi(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Q=t,c=t.child;c!==null;){for(d=Q=c;Q!==null;){switch(h=Q,f=h.child,h.tag){case 0:case 11:case 14:case 15:lu(4,h,h.return);break;case 1:cl(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){nt(i,n,g)}}break;case 5:cl(h,h.return);break;case 22:if(h.memoizedState!==null){W1(d);continue}}f!==null?(f.return=h,Q=f):W1(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Vk("display",o))}catch(g){nt(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){nt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:li(e,t),Oi(t),i&4&&V1(t);break;case 21:break;default:li(e,t),Oi(t)}}function Oi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gC(n)){var i=n;break e}n=n.return}throw Error(W(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(bu(r,""),i.flags&=-33);var s=U1(t);Ug(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=U1(t);jg(t,l,o);break;default:throw Error(W(161))}}catch(a){nt(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gN(t,e,n){Q=t,wC(t)}function wC(t,e,n){for(var i=(t.mode&1)!==0;Q!==null;){var r=Q,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Xc;if(!o){var l=r.alternate,a=l!==null&&l.memoizedState!==null||jt;l=Xc;var u=jt;if(Xc=o,(jt=a)&&!u)for(Q=r;Q!==null;)o=Q,a=o.child,o.tag===22&&o.memoizedState!==null?G1(r):a!==null?(a.return=o,Q=a):G1(r);for(;s!==null;)Q=s,wC(s),s=s.sibling;Q=r,Xc=l,jt=u}H1(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Q=s):H1(t)}}function H1(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Of(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!jt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ci(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&P1(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}P1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Cu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}jt||e.flags&512&&zg(e)}catch(h){nt(e,e.return,h)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function W1(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function G1(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Of(4,e)}catch(a){nt(e,n,a)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(a){nt(e,r,a)}}var s=e.return;try{zg(e)}catch(a){nt(e,s,a)}break;case 5:var o=e.return;try{zg(e)}catch(a){nt(e,o,a)}}}catch(a){nt(e,e.return,a)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var yN=Math.ceil,Ch=Wr.ReactCurrentDispatcher,Xy=Wr.ReactCurrentOwner,ti=Wr.ReactCurrentBatchConfig,ke=0,Ct=null,dt=null,Lt=0,On=0,dl=Vs(0),vt=0,Iu=null,Po=0,Tf=0,Jy=0,au=null,fn=null,Yy=0,Kl=1/0,cr=null,Eh=!1,Vg=null,Ps=null,Jc=!1,ys=null,Ah=0,uu=0,Hg=null,Fd=-1,zd=0;function tn(){return ke&6?lt():Fd!==-1?Fd:Fd=lt()}function Rs(t){return t.mode&1?ke&2&&Lt!==0?Lt&-Lt:eN.transition!==null?(zd===0&&(zd=n2()),zd):(t=Me,t!==0||(t=window.event,t=t===void 0?16:u2(t.type)),t):1}function xi(t,e,n,i){if(50<uu)throw uu=0,Hg=null,Error(W(185));lc(t,n,i),(!(ke&2)||t!==Ct)&&(t===Ct&&(!(ke&2)&&(Tf|=n),vt===4&&us(t,Lt)),bn(t,i),n===1&&ke===0&&!(e.mode&1)&&(Kl=lt()+500,Pf&&Hs()))}function bn(t,e){var n=t.callbackNode;eT(t,e);var i=uh(t,t===Ct?Lt:0);if(i===0)n!==null&&t1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&t1(n),e===1)t.tag===0?ZT(X1.bind(null,t)):R2(X1.bind(null,t)),YT(function(){!(ke&6)&&Hs()}),n=null;else{switch(i2(i)){case 1:n=xy;break;case 4:n=e2;break;case 16:n=ah;break;case 536870912:n=t2;break;default:n=ah}n=PC(n,bC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bC(t,e){if(Fd=-1,zd=0,ke&6)throw Error(W(327));var n=t.callbackNode;if(Sl()&&t.callbackNode!==n)return null;var i=uh(t,t===Ct?Lt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ph(t,i);else{e=i;var r=ke;ke|=2;var s=SC();(Ct!==t||Lt!==e)&&(cr=null,Kl=lt()+500,wo(t,e));do try{bN();break}catch(l){xC(t,l)}while(1);Ly(),Ch.current=s,ke=r,dt!==null?e=0:(Ct=null,Lt=0,e=vt)}if(e!==0){if(e===2&&(r=yg(t),r!==0&&(i=r,e=Wg(t,r))),e===1)throw n=Iu,wo(t,0),us(t,i),bn(t,lt()),n;if(e===6)us(t,i);else{if(r=t.current.alternate,!(i&30)&&!vN(r)&&(e=Ph(t,i),e===2&&(s=yg(t),s!==0&&(i=s,e=Wg(t,s))),e===1))throw n=Iu,wo(t,0),us(t,i),bn(t,lt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(W(345));case 2:to(t,fn,cr);break;case 3:if(us(t,i),(i&130023424)===i&&(e=Yy+500-lt(),10<e)){if(uh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){tn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Eg(to.bind(null,t,fn,cr),e);break}to(t,fn,cr);break;case 4:if(us(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-bi(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=lt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*yN(i/1960))-i,10<i){t.timeoutHandle=Eg(to.bind(null,t,fn,cr),i);break}to(t,fn,cr);break;case 5:to(t,fn,cr);break;default:throw Error(W(329))}}}return bn(t,lt()),t.callbackNode===n?bC.bind(null,t):null}function Wg(t,e){var n=au;return t.current.memoizedState.isDehydrated&&(wo(t,e).flags|=256),t=Ph(t,e),t!==2&&(e=fn,fn=n,e!==null&&Gg(e)),t}function Gg(t){fn===null?fn=t:fn.push.apply(fn,t)}function vN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ci(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function us(t,e){for(e&=~Jy,e&=~Tf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bi(e),i=1<<n;t[n]=-1,e&=~i}}function X1(t){if(ke&6)throw Error(W(327));Sl();var e=uh(t,0);if(!(e&1))return bn(t,lt()),null;var n=Ph(t,e);if(t.tag!==0&&n===2){var i=yg(t);i!==0&&(e=i,n=Wg(t,i))}if(n===1)throw n=Iu,wo(t,0),us(t,e),bn(t,lt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,to(t,fn,cr),bn(t,lt()),null}function Ky(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Kl=lt()+500,Pf&&Hs())}}function Ro(t){ys!==null&&ys.tag===0&&!(ke&6)&&Sl();var e=ke;ke|=1;var n=ti.transition,i=Me;try{if(ti.transition=null,Me=1,t)return t()}finally{Me=i,ti.transition=n,ke=e,!(ke&6)&&Hs()}}function qy(){On=dl.current,Ue(dl)}function wo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JT(n)),dt!==null)for(n=dt.return;n!==null;){var i=n;switch(Ty(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ph();break;case 3:Jl(),Ue(vn),Ue(Vt),zy();break;case 5:Fy(i);break;case 4:Jl();break;case 13:Ue(Xe);break;case 19:Ue(Xe);break;case 10:Iy(i.type._context);break;case 22:case 23:qy()}n=n.return}if(Ct=t,dt=t=Ms(t.current,null),Lt=On=e,vt=0,Iu=null,Jy=Tf=Po=0,fn=au=null,ao!==null){for(e=0;e<ao.length;e++)if(n=ao[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}ao=null}return t}function xC(t,e){do{var n=dt;try{if(Ly(),Bd.current=kh,Sh){for(var i=Ke.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Sh=!1}if(Ao=0,xt=mt=Ke=null,ou=!1,Nu=0,Xy.current=null,n===null||n.return===null){vt=1,Iu=e,dt=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Lt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=L1(o);if(f!==null){f.flags&=-257,I1(f,o,l,s,e),f.mode&1&&D1(s,u,e),e=f,a=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(a),e.updateQueue=g}else p.add(a);break e}else{if(!(e&1)){D1(s,u,e),Qy();break e}a=Error(W(426))}}else if(He&&l.mode&1){var v=L1(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),I1(v,o,l,s,e),Ny(Yl(a,l));break e}}s=a=Yl(a,l),vt!==4&&(vt=2),au===null?au=[s]:au.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=rC(s,a,e);A1(s,m);break e;case 1:l=a;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ps===null||!Ps.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=sC(s,l,e);A1(s,b);break e}}s=s.return}while(s!==null)}CC(n)}catch(C){e=C,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(1)}function SC(){var t=Ch.current;return Ch.current=kh,t===null?kh:t}function Qy(){(vt===0||vt===3||vt===2)&&(vt=4),Ct===null||!(Po&268435455)&&!(Tf&268435455)||us(Ct,Lt)}function Ph(t,e){var n=ke;ke|=2;var i=SC();(Ct!==t||Lt!==e)&&(cr=null,wo(t,e));do try{wN();break}catch(r){xC(t,r)}while(1);if(Ly(),ke=n,Ch.current=i,dt!==null)throw Error(W(261));return Ct=null,Lt=0,vt}function wN(){for(;dt!==null;)kC(dt)}function bN(){for(;dt!==null&&!WO();)kC(dt)}function kC(t){var e=AC(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?CC(t):dt=e,Xy.current=null}function CC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fN(n,e),n!==null){n.flags&=32767,dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,dt=null;return}}else if(n=hN(n,e,On),n!==null){dt=n;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);vt===0&&(vt=5)}function to(t,e,n){var i=Me,r=ti.transition;try{ti.transition=null,Me=1,xN(t,e,n,i)}finally{ti.transition=r,Me=i}return null}function xN(t,e,n,i){do Sl();while(ys!==null);if(ke&6)throw Error(W(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(tT(t,s),t===Ct&&(dt=Ct=null,Lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jc||(Jc=!0,PC(ah,function(){return Sl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ti.transition,ti.transition=null;var o=Me;Me=1;var l=ke;ke|=4,Xy.current=null,mN(t,n),vC(n,t),jT(kg),ch=!!Sg,kg=Sg=null,t.current=n,gN(n),GO(),ke=l,Me=o,ti.transition=s}else t.current=n;if(Jc&&(Jc=!1,ys=t,Ah=r),s=t.pendingLanes,s===0&&(Ps=null),YO(n.stateNode),bn(t,lt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Eh)throw Eh=!1,t=Vg,Vg=null,t;return Ah&1&&t.tag!==0&&Sl(),s=t.pendingLanes,s&1?t===Hg?uu++:(uu=0,Hg=t):uu=0,Hs(),null}function Sl(){if(ys!==null){var t=i2(Ah),e=ti.transition,n=Me;try{if(ti.transition=null,Me=16>t?16:t,ys===null)var i=!1;else{if(t=ys,ys=null,Ah=0,ke&6)throw Error(W(331));var r=ke;for(ke|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(Q=u;Q!==null;){var c=Q;switch(c.tag){case 0:case 11:case 15:lu(8,c,s)}var d=c.child;if(d!==null)d.return=c,Q=d;else for(;Q!==null;){c=Q;var h=c.sibling,f=c.return;if(mC(c),c===u){Q=null;break}if(h!==null){h.return=f,Q=h;break}Q=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lu(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Q=m;break e}Q=s.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Q=w;else e:for(o=y;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Of(9,l)}}catch(C){nt(l,l.return,C)}if(l===o){Q=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Q=b;break e}Q=l.return}}if(ke=r,Hs(),Ki&&typeof Ki.onPostCommitFiberRoot=="function")try{Ki.onPostCommitFiberRoot(Sf,t)}catch{}i=!0}return i}finally{Me=n,ti.transition=e}}return!1}function J1(t,e,n){e=Yl(n,e),e=rC(t,e,1),t=As(t,e,1),e=tn(),t!==null&&(lc(t,1,e),bn(t,e))}function nt(t,e,n){if(t.tag===3)J1(t,t,n);else for(;e!==null;){if(e.tag===3){J1(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ps===null||!Ps.has(i))){t=Yl(n,t),t=sC(e,t,1),e=As(e,t,1),t=tn(),e!==null&&(lc(e,1,t),bn(e,t));break}}e=e.return}}function SN(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=tn(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Lt&n)===n&&(vt===4||vt===3&&(Lt&130023424)===Lt&&500>lt()-Yy?wo(t,0):Jy|=n),bn(t,e)}function EC(t,e){e===0&&(t.mode&1?(e=$c,$c<<=1,!($c&130023424)&&($c=4194304)):e=1);var n=tn();t=jr(t,e),t!==null&&(lc(t,e,n),bn(t,n))}function kN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),EC(t,n)}function CN(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(W(314))}i!==null&&i.delete(e),EC(t,n)}var AC;AC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,dN(t,e,n);mn=!!(t.flags&131072)}else mn=!1,He&&e.flags&1048576&&M2(e,yh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;$d(t,e),t=e.pendingProps;var r=Wl(e,Vt.current);xl(e,n),r=Uy(null,e,i,t,r,n);var s=Vy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wn(i)?(s=!0,mh(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,_y(e),r.updater=Rf,e.stateNode=r,r._reactInternals=e,Ng(e,i,t,n),e=Ig(null,e,i,!0,s,n)):(e.tag=0,He&&s&&Oy(e),Yt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch($d(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=AN(i),t=ci(i,t),r){case 0:e=Lg(null,e,i,t,n);break e;case 1:e=$1(null,e,i,t,n);break e;case 11:e=B1(null,e,i,t,n);break e;case 14:e=_1(null,e,i,ci(i.type,t),n);break e}throw Error(W(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),Lg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),$1(t,e,i,r,n);case 3:e:{if(uC(e),t===null)throw Error(W(387));i=e.pendingProps,s=e.memoizedState,r=s.element,D2(t,e),bh(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Yl(Error(W(423)),e),e=F1(t,e,i,n,r);break e}else if(i!==r){r=Yl(Error(W(424)),e),e=F1(t,e,i,n,r);break e}else for(Ln=Es(e.stateNode.containerInfo.firstChild),Bn=e,He=!0,mi=null,n=_2(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gl(),i===r){e=Ur(t,e,n);break e}Yt(t,e,i,n)}e=e.child}return e;case 5:return $2(e),t===null&&Mg(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Cg(i,r)?o=null:s!==null&&Cg(i,s)&&(e.flags|=32),aC(t,e),Yt(t,e,o,n),e.child;case 6:return t===null&&Mg(e),null;case 13:return cC(t,e,n);case 4:return $y(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Xl(e,null,i,n):Yt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),B1(t,e,i,r,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ie(vh,i._currentValue),i._currentValue=o,s!==null)if(Ci(s.value,o)){if(s.children===r.children&&!vn.current){e=Ur(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===i){if(s.tag===1){a=Nr(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Og(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Og(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Yt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,xl(e,n),r=ri(r),i=i(r),e.flags|=1,Yt(t,e,i,n),e.child;case 14:return i=e.type,r=ci(i,e.pendingProps),r=ci(i.type,r),_1(t,e,i,r,n);case 15:return oC(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),$d(t,e),e.tag=1,wn(i)?(t=!0,mh(e)):t=!1,xl(e,n),I2(e,i,r),Ng(e,i,r,n),Ig(null,e,i,!0,t,n);case 19:return dC(t,e,n);case 22:return lC(t,e,n)}throw Error(W(156,e.tag))};function PC(t,e){return Zk(t,e)}function EN(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,e,n,i){return new EN(t,e,n,i)}function Zy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AN(t){if(typeof t=="function")return Zy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vy)return 11;if(t===wy)return 14}return 2}function Ms(t,e){var n=t.alternate;return n===null?(n=Qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jd(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Zy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case tl:return bo(n.children,r,s,e);case yy:o=8,r|=8;break;case ng:return t=Qn(12,n,e,r|2),t.elementType=ng,t.lanes=s,t;case ig:return t=Qn(13,n,e,r),t.elementType=ig,t.lanes=s,t;case rg:return t=Qn(19,n,e,r),t.elementType=rg,t.lanes=s,t;case Bk:return Nf(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lk:o=10;break e;case Ik:o=9;break e;case vy:o=11;break e;case wy:o=14;break e;case es:o=16,i=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Qn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function bo(t,e,n,i){return t=Qn(7,t,i,e),t.lanes=n,t}function Nf(t,e,n,i){return t=Qn(22,t,i,e),t.elementType=Bk,t.lanes=n,t.stateNode={isHidden:!1},t}function Qp(t,e,n){return t=Qn(6,t,null,e),t.lanes=n,t}function Zp(t,e,n){return e=Qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PN(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dp(0),this.expirationTimes=Dp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ev(t,e,n,i,r,s,o,l,a){return t=new PN(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Qn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_y(s),t}function RN(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:el,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function RC(t){if(!t)return Ls;t=t._reactInternals;e:{if(_o(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(wn(n))return P2(t,n,e)}return e}function MC(t,e,n,i,r,s,o,l,a){return t=ev(n,i,!0,t,r,s,o,l,a),t.context=RC(null),n=t.current,i=tn(),r=Rs(n),s=Nr(i,r),s.callback=e??null,As(n,s,r),t.current.lanes=r,lc(t,r,i),bn(t,i),t}function Df(t,e,n,i){var r=e.current,s=tn(),o=Rs(r);return n=RC(n),e.context===null?e.context=n:e.pendingContext=n,e=Nr(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=As(r,e,o),t!==null&&(xi(t,r,o,s),Id(t,r,o)),o}function Rh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Y1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tv(t,e){Y1(t,e),(t=t.alternate)&&Y1(t,e)}function MN(){return null}var OC=typeof reportError=="function"?reportError:function(t){console.error(t)};function nv(t){this._internalRoot=t}Lf.prototype.render=nv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Df(t,e,null,null)};Lf.prototype.unmount=nv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ro(function(){Df(null,t,null,null)}),e[zr]=null}};function Lf(t){this._internalRoot=t}Lf.prototype.unstable_scheduleHydration=function(t){if(t){var e=o2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<as.length&&e!==0&&e<as[n].priority;n++);as.splice(n,0,t),n===0&&a2(t)}};function iv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function If(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K1(){}function ON(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Rh(o);s.call(u)}}var o=MC(e,i,t,0,null,!1,!1,"",K1);return t._reactRootContainer=o,t[zr]=o.current,Pu(t.nodeType===8?t.parentNode:t),Ro(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var u=Rh(a);l.call(u)}}var a=ev(t,0,!1,null,null,!1,!1,"",K1);return t._reactRootContainer=a,t[zr]=a.current,Pu(t.nodeType===8?t.parentNode:t),Ro(function(){Df(e,a,n,i)}),a}function Bf(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var a=Rh(o);l.call(a)}}Df(e,o,t,r)}else o=ON(n,e,t,r,i);return Rh(o)}r2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ga(e.pendingLanes);n!==0&&(Sy(e,n|1),bn(e,lt()),!(ke&6)&&(Kl=lt()+500,Hs()))}break;case 13:Ro(function(){var i=jr(t,1);if(i!==null){var r=tn();xi(i,t,1,r)}}),tv(t,1)}};ky=function(t){if(t.tag===13){var e=jr(t,134217728);if(e!==null){var n=tn();xi(e,t,134217728,n)}tv(t,134217728)}};s2=function(t){if(t.tag===13){var e=Rs(t),n=jr(t,e);if(n!==null){var i=tn();xi(n,t,e,i)}tv(t,e)}};o2=function(){return Me};l2=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};pg=function(t,e,n){switch(e){case"input":if(lg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Af(i);if(!r)throw Error(W(90));$k(i),lg(i,r)}}}break;case"textarea":zk(t,n);break;case"select":e=n.value,e!=null&&yl(t,!!n.multiple,e,!1)}};Xk=Ky;Jk=Ro;var TN={usingClientEntryPoint:!1,Events:[uc,sl,Af,Wk,Gk,Ky]},Pa={findFiberByHostInstance:lo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},NN={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qk(t),t===null?null:t.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||MN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{Sf=Yc.inject(NN),Ki=Yc}catch{}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TN;$n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iv(e))throw Error(W(200));return RN(t,e,null,n)};$n.createRoot=function(t,e){if(!iv(t))throw Error(W(299));var n=!1,i="",r=OC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=ev(t,1,!1,null,null,n,!1,i,r),t[zr]=e.current,Pu(t.nodeType===8?t.parentNode:t),new nv(e)};$n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=qk(e),t=t===null?null:t.stateNode,t};$n.flushSync=function(t){return Ro(t)};$n.hydrate=function(t,e,n){if(!If(e))throw Error(W(200));return Bf(null,t,e,!0,n)};$n.hydrateRoot=function(t,e,n){if(!iv(t))throw Error(W(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=OC;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=MC(e,null,t,1,n??null,r,!1,s,o),t[zr]=e.current,Pu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Lf(e)};$n.render=function(t,e,n){if(!If(e))throw Error(W(200));return Bf(null,t,e,!1,n)};$n.unmountComponentAtNode=function(t){if(!If(t))throw Error(W(40));return t._reactRootContainer?(Ro(function(){Bf(null,null,t,!1,function(){t._reactRootContainer=null,t[zr]=null})}),!0):!1};$n.unstable_batchedUpdates=Ky;$n.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!If(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Bf(t,e,n,!1,i)};$n.version="18.2.0-next-9e3b772b8-20220608";function TC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TC)}catch(t){console.error(t)}}TC(),Mk.exports=$n;var dc=Mk.exports;const DN=sc(dc);var q1=dc;eg.createRoot=q1.createRoot,eg.hydrateRoot=q1.hydrateRoot;function LN(t,{insertAt:e}={}){if(!t||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}LN(`[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 6px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:-3px;margin-right:4px}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:-1px}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:auto;border:none;cursor:pointer;outline:none;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:auto}[data-sonner-toast] [data-cancel]{color:var(--color);background:var(--border-color)}[data-sonner-toast] [data-close-button]{position:absolute;left:0;top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:translate(-35%,-35%);border-radius:50%;opacity:0;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]{opacity:1}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}
`);var IN=t=>{switch(t){case"success":return $N;case"error":return FN;default:return null}},BN=Array(12).fill(0),_N=({visible:t})=>U.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},U.createElement("div",{className:"sonner-spinner"},BN.map((e,n)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),$N=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),FN=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Xg=0,zN=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...i}=t,r=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Xg++;return this.toasts.find(s=>s.id===r)?this.toasts=this.toasts.map(s=>s.id===r?(this.publish({...s,...t,id:r,title:n}),{...s,...t,id:r,title:n}):s):this.addToast({title:n,...i,id:r}),r},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.promise=(t,e)=>{let n=this.create({...e,promise:t,type:"loading",message:e.loading});return(t instanceof Promise?t:t()).then(i=>{let r=typeof e.success=="function"?e.success(i):e.success;this.create({id:n,type:"success",message:r})}).catch(i=>{let r=typeof e.error=="function"?e.error(i):e.error;this.create({id:n,type:"error",message:r})}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Xg++;this.publish({jsx:t(n),id:n,...e})},this.subscribers=[],this.toasts=[]}},ns=new zN,jN=(t,e)=>{let n=(e==null?void 0:e.id)||Xg++;return ns.addToast({title:t,...e,id:n}),n},UN=jN,_f=Object.assign(UN,{success:ns.success,error:ns.error,custom:ns.custom,message:ns.message,promise:ns.promise,dismiss:ns.dismiss}),VN=3,HN="32px",WN=4e3,GN=356,NC=14,XN=20,JN=200,YN=t=>{let{invert:e,toast:n,interacting:i,setHeights:r,visibleToasts:s,heights:o,index:l,toasts:a,expanded:u,removeToast:c,closeButton:d,style:h,className:f="",descriptionClassName:p="",duration:g,position:v,expandByDefault:m}=t,[y,w]=U.useState(!1),[b,C]=U.useState(!1),[P,R]=U.useState(!1),[I,E]=U.useState(!1),[A,M]=U.useState(0),[O,D]=U.useState(0),N=U.useRef(null),B=l===0,$=l+1<=s,z=n.type,L=n.className||"",_=n.descriptionClassName||"",j=U.useMemo(()=>o.findIndex(fe=>fe.toastId===n.id)||0,[o,n.id]),ee=U.useMemo(()=>n.duration||g||WN,[n.duration,g]),re=U.useRef(0),ge=U.useRef(0),rt=U.useRef(ee),ut=U.useRef(0),Ze=U.useRef(null),[bt,ar]=v.split("-"),kn=U.useMemo(()=>o.reduce((fe,et,Wt)=>Wt>=j?fe:fe+et.height,0),[o,j]),Yr=n.invert||e,Ho=z==="loading";ge.current=U.useMemo(()=>j*NC+kn,[j,kn]),U.useEffect(()=>{w(!0)},[]),U.useLayoutEffect(()=>{if(!y)return;let fe=N.current,et=fe.style.height;fe.style.height="auto";let Wt=fe.getBoundingClientRect().height;fe.style.height=et,D(Wt),r(ur=>ur.find(Ks=>Ks.toastId===n.id)?ur.map(Ks=>Ks.toastId===n.id?{...Ks,height:Wt}:Ks):[{toastId:n.id,height:Wt},...ur])},[y,n.title,n.description,r,n.id]);let Mi=U.useCallback(()=>{C(!0),M(ge.current),r(fe=>fe.filter(et=>et.toastId!==n.id)),setTimeout(()=>{c(n)},JN)},[n,c,r,ge]);return U.useEffect(()=>{if(n.promise&&z==="loading"||n.duration===1/0)return;let fe;return u||i?(()=>{if(ut.current<re.current){let et=new Date().getTime()-re.current;rt.current=rt.current-et}ut.current=new Date().getTime()})():(re.current=new Date().getTime(),fe=setTimeout(()=>{var et;(et=n.onAutoClose)==null||et.call(n,n),Mi()},rt.current)),()=>clearTimeout(fe)},[u,i,m,n,ee,Mi,n.promise,z]),U.useEffect(()=>{let fe=N.current;if(fe){let et=fe.getBoundingClientRect().height;return D(et),r(Wt=>[{toastId:n.id,height:et},...Wt]),()=>r(Wt=>Wt.filter(ur=>ur.toastId!==n.id))}},[r,n.id]),U.useEffect(()=>{n.delete&&Mi()},[Mi,n.delete]),U.createElement("li",{"aria-live":n.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:N,className:f+" "+L,"data-sonner-toast":"","data-styled":!n.jsx,"data-mounted":y,"data-promise":!!n.promise,"data-removed":b,"data-visible":$,"data-y-position":bt,"data-x-position":ar,"data-index":l,"data-front":B,"data-swiping":P,"data-type":z,"data-invert":Yr,"data-swipe-out":I,"data-expanded":!!(u||m&&y),style:{"--index":l,"--toasts-before":l,"--z-index":a.length-l,"--offset":`${b?A:ge.current}px`,"--initial-height":m?"auto":`${O}px`,...h,...n.style},onPointerDown:fe=>{Ho||(M(ge.current),fe.target.setPointerCapture(fe.pointerId),fe.target.tagName!=="BUTTON"&&(R(!0),Ze.current={x:fe.clientX,y:fe.clientY}))},onPointerUp:()=>{var fe,et,Wt;if(I)return;Ze.current=null;let ur=Number(((fe=N.current)==null?void 0:fe.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(ur)>=XN){M(ge.current),(et=n.onDismiss)==null||et.call(n,n),Mi(),E(!0);return}(Wt=N.current)==null||Wt.style.setProperty("--swipe-amount","0px"),R(!1)},onPointerMove:fe=>{var et;if(!Ze.current)return;let Wt=fe.clientY-Ze.current.y,ur=fe.clientX-Ze.current.x,Ks=(bt==="top"?Math.min:Math.max)(0,Wt),Uw=fe.pointerType==="touch"?10:2;Math.abs(Ks)>Uw?(et=N.current)==null||et.style.setProperty("--swipe-amount",`${Wt}px`):Math.abs(ur)>Uw&&(Ze.current=null)}},d&&!n.jsx?U.createElement("button",{"aria-label":"Close toast","data-disabled":Ho,"data-close-button":!0,onClick:Ho?void 0:()=>{var fe;Mi(),(fe=n.onDismiss)==null||fe.call(n,n)}},U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,n.jsx||U.isValidElement(n.title)?n.jsx||n.title:U.createElement(U.Fragment,null,z||n.icon||n.promise?U.createElement("div",{"data-icon":""},n.promise?U.createElement(_N,{visible:z==="loading"}):null,n.icon||IN(z)):null,U.createElement("div",{"data-content":""},U.createElement("div",{"data-title":""},n.title),n.description?U.createElement("div",{"data-description":"",className:p+_},n.description):null),n.cancel?U.createElement("button",{"data-button":!0,"data-cancel":!0,onClick:()=>{var fe;Mi(),(fe=n.cancel)!=null&&fe.onClick&&n.cancel.onClick()}},n.cancel.label):null,n.action?U.createElement("button",{"data-button":"",onClick:fe=>{var et;(et=n.action)==null||et.onClick(fe),!fe.defaultPrevented&&Mi()}},n.action.label):null))},KN=t=>{var e;let{invert:n,position:i="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:a,theme:u="light",richColors:c,duration:d,style:h,visibleToasts:f=VN,toastOptions:p}=t,[g,v]=U.useState([]),[m,y]=U.useState([]),[w,b]=U.useState(!1),[C,P]=U.useState(!1),[R,I]=U.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),[E,A]=i.split("-"),M=U.useRef(null),O=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=U.useCallback(N=>v(B=>B.filter(({id:$})=>$!==N.id)),[]);return U.useEffect(()=>ns.subscribe(N=>{if(N.dismiss){v(B=>B.map($=>$.id===N.id?{...$,delete:!0}:$));return}setTimeout(()=>{DN.flushSync(()=>{v(B=>{let $=B.findIndex(z=>z.id===N.id);return $!==-1?[...B.slice(0,$),{...B[$],...N},...B.slice($+1)]:[N,...B]})})})}),[]),U.useEffect(()=>{if(u!=="system"){I(u);return}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:N})=>{I(N?"dark":"light")})},[u]),U.useEffect(()=>{g.length<=1&&b(!1)},[g]),U.useEffect(()=>{let N=B=>{var $,z;r.every(L=>B[L]||B.code===L)&&(b(!0),($=M.current)==null||$.focus()),B.code==="Escape"&&(document.activeElement===M.current||(z=M.current)!=null&&z.contains(document.activeElement))&&b(!1)};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[r]),g.length?U.createElement("section",{"aria-label":`Notifications ${O}`,tabIndex:-1},U.createElement("ol",{tabIndex:-1,ref:M,className:l,"data-sonner-toaster":!0,"data-theme":R,"data-rich-colors":c,"data-y-position":E,"data-x-position":A,style:{"--front-toast-height":`${(e=m[0])==null?void 0:e.height}px`,"--offset":typeof a=="number"?`${a}px`:a||HN,"--width":`${GN}px`,"--gap":`${NC}px`,...h},onMouseEnter:()=>b(!0),onMouseMove:()=>b(!0),onMouseLeave:()=>{C||b(!1)},onPointerDown:()=>{P(!0)},onPointerUp:()=>P(!1)},g.map((N,B)=>U.createElement(YN,{key:N.id,index:B,toast:N,duration:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:f,closeButton:o,interacting:C,position:i,style:p==null?void 0:p.style,removeToast:D,toasts:g,heights:m,setHeights:y,expandByDefault:s,expanded:w})))):null};const qN="modulepreload",QN=function(t){return"/vonsim-next/"+t},Q1={},ZN=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=QN(s),s in Q1)return;Q1[s]=!0;const o=s.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!i)for(let c=r.length-1;c>=0;c--){const d=r[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":qN,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function eD(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let l,a,u;const c=async(h=!0)=>{await a,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){const{Workbox:h}=await ZN(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);l=new h("/vonsim-next/sw.js",{scope:"/vonsim-next/",type:"classic"}),u=async()=>{await(l==null?void 0:l.messageSkipWaiting())};{let f=!1;const p=()=>{f=!0,l==null||l.addEventListener("controlling",g=>{g.isUpdate&&window.location.reload()}),n==null||n()};l.addEventListener("installed",g=>{typeof g.isUpdate>"u"?typeof g.isExternal<"u"?g.isExternal?p():!f&&(i==null||i()):g.isExternal?window.location.reload():!f&&(i==null||i()):g.isUpdate||i==null||i()}),l.addEventListener("waiting",p),l.addEventListener("externalwaiting",p)}l.register({immediate:e}).then(f=>{s?s("/vonsim-next/sw.js",f):r==null||r(f)}).catch(f=>{o==null||o(f)})}}return a=d(),c}function tD(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[l,a]=S.useState(!1),[u,c]=S.useState(!1),[d]=S.useState(()=>eD({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){a(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[l,a],offlineReady:[u,c],updateServiceWorker:d}}var nD=function(){};function DC(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function LC(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var IC=typeof window<"u",iD=function(t,e){return typeof e=="boolean"?e:!t},rD=function(t){return S.useReducer(iD,t)};const sD=rD;var oD=IC?window:null,Z1=function(t){return!!t.addEventListener},eb=function(t){return!!t.on},lD=function(t,e,n,i){n===void 0&&(n=oD),S.useEffect(function(){if(e&&n)return Z1(n)?DC(n,t,e,i):eb(n)&&n.on(t,e,i),function(){Z1(n)?LC(n,t,e,i):eb(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])};const BC=lD;var aD=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},uD=function(t,e,n,i){e===void 0&&(e=nD),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,l=n.options,a=S.useMemo(function(){var u=aD(t),c=function(d){if(u(d))return e(d)};return c},i);BC(s,a,o,l)};const _C=uD;var cD=function(t){return"touches"in t},tb=function(t){cD(t)&&t.touches.length<2&&t.preventDefault&&t.preventDefault()},dD=function(t,e){var n=e===void 0?{}:e,i=n.isPreventDefault,r=i===void 0?!0:i,s=n.delay,o=s===void 0?300:s,l=S.useRef(),a=S.useRef(),u=S.useCallback(function(d){r&&d.target&&(DC(d.target,"touchend",tb,{passive:!1}),a.current=d.target),l.current=setTimeout(function(){return t(d)},o)},[t,o,r]),c=S.useCallback(function(){l.current&&clearTimeout(l.current),r&&a.current&&LC(a.current,"touchend",tb)},[r]);return{onMouseDown:function(d){return u(d)},onTouchStart:function(d){return u(d)},onMouseUp:c,onMouseLeave:c,onTouchEnd:c}};const hD=dD;var fD=function(t,e){return e!==void 0?e:IC?window.matchMedia(t).matches:!1},pD=function(t,e){var n=S.useState(fD(t,e)),i=n[0],r=n[1];return S.useEffect(function(){var s=!0,o=window.matchMedia(t),l=function(){s&&r(!!o.matches)};return o.addListener(l),r(o.matches),function(){s=!1,o.removeListener(l)}},[t]),i};const mD=pD;function gD(){return mD("(max-width: 1024px)")}function $C(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=$C(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function ht(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=$C(t))&&(i&&(i+=" "),i+=e);return i}function yD(){for(var t=0,e,n,i="";t<arguments.length;)(e=arguments[t++])&&(n=FC(e))&&(i&&(i+=" "),i+=n);return i}function FC(t){if(typeof t=="string")return t;for(var e,n="",i=0;i<t.length;i++)t[i]&&(e=FC(t[i]))&&(n&&(n+=" "),n+=e);return n}var rv="-";function vD(t){var e=bD(t),n=t.conflictingClassGroups,i=t.conflictingClassGroupModifiers,r=i===void 0?{}:i;function s(l){var a=l.split(rv);return a[0]===""&&a.length!==1&&a.shift(),zC(a,e)||wD(l)}function o(l,a){var u=n[l]||[];return a&&r[l]?[].concat(u,r[l]):u}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function zC(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],i=e.nextPart.get(n),r=i?zC(t.slice(1),i):void 0;if(r)return r;if(e.validators.length!==0){var s=t.join(rv);return(o=e.validators.find(function(l){var a=l.validator;return a(s)}))==null?void 0:o.classGroupId}}var nb=/^\[(.+)\]$/;function wD(t){if(nb.test(t)){var e=nb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function bD(t){var e=t.theme,n=t.prefix,i={nextPart:new Map,validators:[]},r=SD(Object.entries(t.classGroups),n);return r.forEach(function(s){var o=s[0],l=s[1];Jg(l,i,o,e)}),i}function Jg(t,e,n,i){t.forEach(function(r){if(typeof r=="string"){var s=r===""?e:ib(e,r);s.classGroupId=n;return}if(typeof r=="function"){if(xD(r)){Jg(r(i),e,n,i);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(function(o){var l=o[0],a=o[1];Jg(a,ib(e,l),n,i)})})}function ib(t,e){var n=t;return e.split(rv).forEach(function(i){n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n}function xD(t){return t.isThemeGetter}function SD(t,e){return e?t.map(function(n){var i=n[0],r=n[1],s=r.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var a=l[0],u=l[1];return[e+a,u]})):o});return[i,s]}):t}function kD(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,i=new Map;function r(s,o){n.set(s,o),e++,e>t&&(e=0,i=n,n=new Map)}return{get:function(o){var l=n.get(o);if(l!==void 0)return l;if((l=i.get(o))!==void 0)return r(o,l),l},set:function(o,l){n.has(o)?n.set(o,l):r(o,l)}}}var jC="!";function CD(t){var e=t.separator||":",n=e.length===1,i=e[0],r=e.length;return function(o){for(var l=[],a=0,u=0,c,d=0;d<o.length;d++){var h=o[d];if(a===0){if(h===i&&(n||o.slice(d,d+r)===e)){l.push(o.slice(u,d)),u=d+r;continue}if(h==="/"){c=d;continue}}h==="["?a++:h==="]"&&a--}var f=l.length===0?o:o.substring(u),p=f.startsWith(jC),g=p?f.substring(1):f,v=c&&c>u?c-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:v}}}function ED(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(i){var r=i[0]==="[";r?(e.push.apply(e,n.sort().concat([i])),n=[]):n.push(i)}),e.push.apply(e,n.sort()),e}function AD(t){return{cache:kD(t.cacheSize),splitModifiers:CD(t),...vD(t)}}var PD=/\s+/;function RD(t,e){var n=e.splitModifiers,i=e.getClassGroupId,r=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(PD).map(function(o){var l=n(o),a=l.modifiers,u=l.hasImportantModifier,c=l.baseClassName,d=l.maybePostfixModifierPosition,h=i(d?c.substring(0,d):c),f=!!d;if(!h){if(!d)return{isTailwindClass:!1,originalClassName:o};if(h=i(c),!h)return{isTailwindClass:!1,originalClassName:o};f=!1}var p=ED(a).join(":"),g=u?p+jC:p;return{isTailwindClass:!0,modifierId:g,classGroupId:h,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,a=o.classGroupId,u=o.hasPostfixModifier,c=l+a;return s.has(c)?!1:(s.add(c),r(a,u).forEach(function(d){return s.add(l+d)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function MD(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,r,s,o=l;function l(u){var c=e[0],d=e.slice(1),h=d.reduce(function(f,p){return p(f)},c());return i=AD(h),r=i.cache.get,s=i.cache.set,o=a,a(u)}function a(u){var c=r(u);if(c)return c;var d=RD(u,i);return s(u,d),d}return function(){return o(yD.apply(null,arguments))}}function _e(t){var e=function(i){return i[t]||[]};return e.isThemeGetter=!0,e}var UC=/^\[(?:([a-z-]+):)?(.+)\]$/i,OD=/^\d+\/\d+$/,TD=new Set(["px","full","screen"]),ND=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,LD=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ai(t){return co(t)||TD.has(t)||OD.test(t)||Yg(t)}function Yg(t){return $o(t,"length",zD)}function ID(t){return $o(t,"size",VC)}function BD(t){return $o(t,"position",VC)}function _D(t){return $o(t,"url",jD)}function Kc(t){return $o(t,"number",co)}function co(t){return!Number.isNaN(Number(t))}function $D(t){return t.endsWith("%")&&co(t.slice(0,-1))}function Ra(t){return rb(t)||$o(t,"number",rb)}function ye(t){return UC.test(t)}function Ma(){return!0}function qr(t){return ND.test(t)}function FD(t){return $o(t,"",UD)}function $o(t,e,n){var i=UC.exec(t);return i?i[1]?i[1]===e:n(i[2]):!1}function zD(t){return DD.test(t)}function VC(){return!1}function jD(t){return t.startsWith("url(")}function rb(t){return Number.isInteger(Number(t))}function UD(t){return LD.test(t)}function VD(){var t=_e("colors"),e=_e("spacing"),n=_e("blur"),i=_e("brightness"),r=_e("borderColor"),s=_e("borderRadius"),o=_e("borderSpacing"),l=_e("borderWidth"),a=_e("contrast"),u=_e("grayscale"),c=_e("hueRotate"),d=_e("invert"),h=_e("gap"),f=_e("gradientColorStops"),p=_e("gradientColorStopPositions"),g=_e("inset"),v=_e("margin"),m=_e("opacity"),y=_e("padding"),w=_e("saturate"),b=_e("scale"),C=_e("sepia"),P=_e("skew"),R=_e("space"),I=_e("translate"),E=function(){return["auto","contain","none"]},A=function(){return["auto","hidden","clip","visible","scroll"]},M=function(){return["auto",ye,e]},O=function(){return[ye,e]},D=function(){return["",ai]},N=function(){return["auto",co,ye]},B=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},$=function(){return["solid","dashed","dotted","double","none"]},z=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},L=function(){return["start","end","center","between","around","evenly","stretch"]},_=function(){return["","0",ye]},j=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},ee=function(){return[co,Kc]},re=function(){return[co,ye]};return{cacheSize:500,theme:{colors:[Ma],spacing:[ai],blur:["none","",qr,ye],brightness:ee(),borderColor:[t],borderRadius:["none","","full",qr,ye],borderSpacing:O(),borderWidth:D(),contrast:ee(),grayscale:_(),hueRotate:re(),invert:_(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[$D,Yg],inset:M(),margin:M(),opacity:ee(),padding:O(),saturate:ee(),scale:ee(),sepia:_(),skew:re(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[qr]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(B(),[ye])}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ra]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:_()}],shrink:[{shrink:_()}],order:[{order:["first","last","none",Ra]}],"grid-cols":[{"grid-cols":[Ma]}],"col-start-end":[{col:["auto",{span:["full",Ra]},ye]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[Ma]}],"row-start-end":[{row:["auto",{span:[Ra]},ye]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(L())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(L(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(L(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ye,e]}],"min-w":[{"min-w":["min","max","fit",ye,ai]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[qr]},qr,ye]}],h:[{h:[ye,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ye,ai]}],"max-h":[{"max-h":[ye,e,"min","max","fit"]}],"font-size":[{text:["base",qr,Yg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Kc]}],"font-family":[{font:[Ma]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",co,Kc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ye,ai]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat($(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ai]}],"underline-offset":[{"underline-offset":["auto",ye,ai]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(B(),[BD])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ID]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_D]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[].concat($(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:$()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat($())}],"outline-offset":[{"outline-offset":[ye,ai]}],"outline-w":[{outline:[ai]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[ai]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",qr,FD]}],"shadow-color":[{shadow:[Ma]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":z()}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[a]}],"drop-shadow":[{"drop-shadow":["","none",qr,ye]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[a]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Ra,ye]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ai,Kc]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var HD=MD(VD);function kl(...t){return HD(ht(t))}let WD=0;function ue(t,e){const n=`atom${++WD}`,i={toString:()=>n};return typeof t=="function"?i.read=t:(i.init=t,i.read=r=>r(i),i.write=(r,s,o)=>s(i,typeof o=="function"?o(r(i)):o)),e&&(i.write=e),i}const sb=t=>"init"in t,ob=t=>!!t.write,Mh=new WeakMap,GD=(t,e)=>{Mh.set(t,e),t.catch(()=>{}).finally(()=>Mh.delete(t))},lb=(t,e)=>{const n=Mh.get(t);n&&(Mh.delete(t),n(e))},ab=(t,e)=>{t.status="fulfilled",t.value=e},ub=(t,e)=>{t.status="rejected",t.reason=e},XD=t=>typeof(t==null?void 0:t.then)=="function",Oa=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),cb=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),Go=t=>"v"in t&&t.v instanceof Promise,JD=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,qc=t=>{if("e"in t)throw t.e;return t.v},sv=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let i,r,s;const o=E=>t.get(E),l=(E,A)=>{const M=t.get(E);if(t.set(E,A),n.has(E)||n.set(E,M),M&&Go(M)){const O="v"in A?A.v instanceof Promise?A.v:Promise.resolve(A.v):Promise.reject(A.e);lb(M.v,O)}},a=(E,A,M)=>{const O=new Map;let D=!1;M.forEach((N,B)=>{!N&&B===E&&(N=A),N&&(O.set(B,N),A.d.get(B)!==N&&(D=!0))}),(D||A.d.size!==O.size)&&(A.d=O)},u=(E,A,M)=>{const O=o(E),D={d:(O==null?void 0:O.d)||new Map,v:A};if(M&&a(E,D,M),O&&Oa(O,D)&&O.d===D.d)return O;if(O&&Go(O)&&Go(D)&&JD(O,D)){if(O.d===D.d)return O;D.v=O.v}return l(E,D),D},c=(E,A,M,O)=>{if(XD(A)){let D;const N=new Promise((B,$)=>{let z=!1;A.then(L=>{if(!z){z=!0;const _=o(E),j=u(E,N,M);ab(N,L),B(L),(_==null?void 0:_.d)!==j.d&&P(E,j,_==null?void 0:_.d)}},L=>{if(!z){z=!0;const _=o(E),j=u(E,N,M);ub(N,L),$(L),(_==null?void 0:_.d)!==j.d&&P(E,j,_==null?void 0:_.d)}}),D=L=>{z||(z=!0,L.then(_=>ab(N,_),_=>ub(N,_)),B(L))}});return N.orig=A,N.status="pending",GD(N,B=>{B&&D(B),O==null||O()}),u(E,N,M)}return u(E,A,M)},d=(E,A,M)=>{const O=o(E),D={d:(O==null?void 0:O.d)||new Map,e:A};return M&&a(E,D,M),O&&cb(O,D)&&O.d===D.d?O:(l(E,D),D)},h=E=>{const A=o(E);if(A&&(A.d.forEach((z,L)=>{L!==E&&!e.has(L)&&h(L)}),Array.from(A.d).every(([z,L])=>{const _=o(z);return z===E||_===L||_&&!Go(_)&&Oa(_,L)})))return A;const M=new Map;let O=!0;const D=z=>{if(z===E){const _=o(z);if(_)return M.set(z,_),qc(_);if(sb(z))return M.set(z,void 0),z.init;throw new Error("no atom init")}const L=h(z);return M.set(z,L),qc(L)};let N,B;const $={get signal(){return N||(N=new AbortController),N.signal},get setSelf(){return!B&&ob(E)&&(B=(...z)=>{if(!O)return w(E,...z)}),B}};try{const z=E.read(D,$);return c(E,z,M,()=>N==null?void 0:N.abort())}catch(z){return d(E,z,M)}finally{O=!1}},f=E=>qc(h(E)),p=E=>{let A=e.get(E);return A||(A=b(E)),A},g=(E,A)=>!A.l.size&&(!A.t.size||A.t.size===1&&A.t.has(E)),v=E=>{const A=e.get(E);A&&g(E,A)&&C(E)},m=E=>{const A=new Map,M=new WeakMap,O=N=>{const B=e.get(N);B==null||B.t.forEach($=>{$!==N&&(A.set($,(A.get($)||new Set).add(N)),M.set($,(M.get($)||0)+1),O($))})};O(E);const D=N=>{const B=e.get(N);B==null||B.t.forEach($=>{var z;if($!==N){let L=M.get($);if(L&&M.set($,--L),!L){let _=!!((z=A.get($))!=null&&z.size);if(_){const j=o($),ee=h($);_=!j||!Oa(j,ee)}_||A.forEach(j=>j.delete($))}D($)}})};D(E)},y=(E,...A)=>{let M=!0;const O=B=>qc(h(B)),D=(B,...$)=>{let z;if(B===E){if(!sb(B))throw new Error("atom not writable");const L=o(B),_=c(B,$[0]);(!L||!Oa(L,_))&&m(B)}else z=y(B,...$);if(!M){const L=R()}return z},N=E.write(O,D,...A);return M=!1,N},w=(E,...A)=>{const M=y(E,...A),O=R();return M},b=(E,A)=>{const M={t:new Set(A&&[A]),l:new Set};if(e.set(E,M),h(E).d.forEach((O,D)=>{const N=e.get(D);N?N.t.add(E):D!==E&&b(D,E)}),h(E),ob(E)&&E.onMount){const O=E.onMount((...D)=>w(E,...D));O&&(M.u=O)}return M},C=E=>{var A;const M=(A=e.get(E))==null?void 0:A.u;M&&M(),e.delete(E);const O=o(E);O&&(Go(O)&&lb(O.v),O.d.forEach((D,N)=>{if(N!==E){const B=e.get(N);B&&(B.t.delete(E),g(N,B)&&C(N))}}))},P=(E,A,M)=>{const O=new Set(A.d.keys());M==null||M.forEach((D,N)=>{if(O.has(N)){O.delete(N);return}const B=e.get(N);B&&(B.t.delete(E),g(N,B)&&C(N))}),O.forEach(D=>{const N=e.get(D);N?N.t.add(E):e.has(E)&&b(D,E)})},R=()=>{let E;for(;n.size;){const A=Array.from(n);n.clear(),A.forEach(([M,O])=>{const D=o(M);if(D){D.d!==(O==null?void 0:O.d)&&P(M,D,O==null?void 0:O.d);const N=e.get(M);N&&!(O&&!Go(O)&&(Oa(O,D)||cb(O,D)))&&N.l.forEach(B=>B())}})}};return{get:f,set:w,sub:(E,A)=>{const M=p(E),O=R(),D=M.l;return D.add(A),()=>{D.delete(A),v(E)}}}};let em;const YD=()=>(em||(em=sv()),em),HC=S.createContext(void 0),WC=t=>{const e=S.useContext(HC);return(t==null?void 0:t.store)||e||YD()},KD=({children:t,store:e})=>{const n=S.useRef();return!e&&!n.current&&(n.current=sv()),S.createElement(HC.Provider,{value:e||n.current},t)},qD=t=>typeof(t==null?void 0:t.then)=="function",QD=U.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Vr(t,e){const n=WC(e),[[i,r,s],o]=S.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let l=i;(r!==n||s!==t)&&(o(),l=n.get(t));const a=e==null?void 0:e.delay;return S.useEffect(()=>{const u=n.sub(t,()=>{if(typeof a=="number"){setTimeout(o,a);return}o()});return o(),u},[n,t,a]),S.useDebugValue(l),qD(l)?QD(l):l}function ZD(t,e){const n=WC(e);return S.useCallback((...r)=>n.set(t,...r),[n,t])}function Ja(t,e){return[Vr(t,e),ZD(t,e)]}function Oh(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}function $f(t,e,n,i,r){for(e=e.split?e.split("."):e,i=0;i<e.length;i++)t=t?t[e[i]]:r;return t===r?n:t}function ov(t){return function(n,i,...r){const s=$f(t,`${n}.${i}`,null);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}class St{constructor(e,n){Y(this,"start");Y(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new St(i,r)}toJSON(){return this.range}}function GC(t){const e=t.charCodeAt(0);return T.fitsUnsigned(e,8)?e:null}function lv(t){return T.fitsUnsigned(t,8)?String.fromCharCode(t):null}var Ge,tt;const xe=class xe{constructor(e,n){ie(this,Ge,void 0);ie(this,tt,void 0);F(this,Ge,e|0),F(this,tt,n)}get size(){return x(this,tt)}is8bits(){return x(this,tt)===8}is16bits(){return x(this,tt)===16}get unsigned(){return x(this,Ge)}get signed(){return x(this,Ge)<=xe.maxSignedValue(x(this,tt))?x(this,Ge):x(this,Ge)-(xe.maxValue(x(this,tt))+1)}get low(){return this.is8bits()?this:xe.fromUnsigned(x(this,Ge)&xe.maxValue(8),8)}get high(){return this.is8bits()?new xe(0,8):xe.fromUnsigned(x(this,Ge)>>8&xe.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return xe.fromUnsigned(x(this,Ge)&~xe.maxValue(8)|e.unsigned,x(this,tt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return xe.fromUnsigned(x(this,Ge)&xe.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=x(this,tt))throw new RangeError(`Index ${e} out of bounds for byte of size ${x(this,tt)}`);return(x(this,Ge)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=x(this,tt))throw new RangeError(`Index ${e} out of bounds for byte of size ${x(this,tt)}`);return n?xe.fromUnsigned(x(this,Ge)|1<<e,x(this,tt)):xe.fromUnsigned(x(this,Ge)&~(1<<e),x(this,tt))}add(e){return e=Number(e),xe.fromUnsigned(x(this,Ge)+e,x(this,tt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:x(this,Ge)===x(e,Ge)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(x(this,tt));for(let n=0;n<x(this,tt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return x(this,Ge).toString(16).padStart(x(this,tt)/4,"0").toUpperCase();case"bin":return x(this,Ge).toString(2).padStart(x(this,tt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return x(this,tt)===8?lv(x(this,Ge))??"---":this.low.toString("ascii")+this.high.toString("ascii")}}toJSON(){return x(this,Ge)}valueOf(){return x(this,Ge)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=xe.minSignedValue(n)&&e<=xe.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=xe.minValue()&&e<=xe.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=xe.minSignedValue(n)&&e<=xe.maxSignedValue(n)}static fromUnsigned(e,n){if(!xe.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new xe(e,n)}static fromSigned(e,n){if(!xe.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new xe(e+xe.maxValue(n)+1,n):new xe(e,n)}static fromNumber(e,n){return e<0?xe.fromSigned(e,n):xe.fromUnsigned(e,n)}static fromChar(e){const n=GC(e)??-1;return xe.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*xe.maxValue(e));return new xe(n,e)}static zero(e){return new xe(0,e)}};Ge=new WeakMap,tt=new WeakMap;let T=xe;var mr;const os=class os{constructor(e){ie(this,mr,void 0);F(this,mr,e)}get value(){return x(this,mr).unsigned}get byte(){return x(this,mr)}toString(e=!0){let n=x(this,mr).toString("hex");return e&&(n+="h"),n}toJSON(){return x(this,mr).toJSON()}valueOf(){return x(this,mr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=os.MIN_ADDRESS&&e<=os.MAX_ADDRESS}static from(e){if(e=Number(e),!os.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=T.fromUnsigned(e,16);return new os(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i}};mr=new WeakMap,Y(os,"MIN_ADDRESS",0),Y(os,"MAX_ADDRESS",32767);let oe=os;var gr;const ls=class ls{constructor(e){ie(this,gr,void 0);F(this,gr,e)}get value(){return x(this,gr).unsigned}get byte(){return x(this,gr)}toString(e=!0){let n=x(this,gr).toString("hex");return e&&(n+="h"),n}toJSON(){return x(this,gr).toJSON()}valueOf(){return x(this,gr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ls.MIN_ADDRESS&&e<=ls.MAX_ADDRESS}static from(e){if(e=Number(e),!ls.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=T.fromUnsigned(e,8);return new ls(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};gr=new WeakMap,Y(ls,"MIN_ADDRESS",0),Y(ls,"MAX_ADDRESS",127);let xn=ls;const db=oe.from(oe.MAX_ADDRESS).toString(),eL=xn.from(xn.MAX_ADDRESS).toString(),tL={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${oe.format(t)} is out of range (max memory address: ${db}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${oe.format(t)}, which is outside the memory range (max memory address: ${db}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${eL}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"label-should-be-writable":t=>`Label ${t} doesn't point to a writable memory address  should point to a DB or DW declaration.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},hb=oe.from(oe.MAX_ADDRESS).toString(),nL=xn.from(xn.MAX_ADDRESS).toString(),iL={"address-has-code":t=>`La direccin de memoria ${oe.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${t} est fuera de rango (direccin mxima de memoria: ${hb}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${oe.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${hb}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${nL}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"label-should-be-writable":t=>`La etiqueta ${t} no apunta a una direccin de memoria modificable  debera apuntar a una declaracin DB o DW.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${t}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},rL=ov({en:tL,es:iL});class J extends Error{constructor(n,...i){super();Y(this,"code");Y(this,"context");Y(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof St?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return rL(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof J?n:new J("unexpected-error",n)}}var ds,Bl;class sL{constructor(){Y(this,"codeMemory",new Set);Y(this,"labels",new Map);ie(this,ds,!1);ie(this,Bl,!1)}loadStatements(e){if(x(this,ds))throw new Error("Tried to load statements twice");F(this,ds,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new J("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:oe.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:oe.from(0)})}return n}computeAddresses(e){if(x(this,Bl))throw new Error("Tried to compute addresses twice");F(this,Bl,!0),this.codeMemory.clear();const n=new Set;let i=null;return Oh(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){i=s.newAddress;return}if(i===null)throw new J("missing-org").at(s);const o=s.length;for(let a=0;a<o;a++){if(!oe.inRange(i+a))throw new J("instruction-out-of-range",i+a).at(s);const u=oe.from(i+a);if(n.has(u.value))throw new J("occupied-address",u).at(s);n.add(u.value),s.isInstruction()&&this.codeMemory.add(u.value)}const l=oe.from(i);s.setStart(l),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:l}),i+=o},J.from)}labelExists(e){if(!x(this,ds))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!x(this,ds))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!x(this,ds))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!x(this,Bl))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof oe&&(e=e.value),this.codeMemory.has(e)}}ds=new WeakMap,Bl=new WeakMap;const oL=["AL","BL","CL","DL","AH","BH","CH","DH"],XC=["AX","BX","CX","DX","SP"],Th=[...oL,...XC],av=["DB","DW","EQU"],uv=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],lL=["OFFSET","ORG","BYTE","WORD","PTR","END",...Th,...uv,...av];class aL{constructor(e,n,i){Y(this,"type");Y(this,"lexeme");Y(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class uL{constructor(e){Y(this,"scanned",!1);Y(this,"tokens",[]);Y(this,"position",new St(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new St(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new J("lexer.unterminated-string").at(this.position);if(this.peek().charCodeAt(0)>255)throw new J("lexer.only-ascii").at(new St(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new J("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new J("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();lL.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new J("lexer.unexpected-character",e).at(this.position)}return this.position=new St(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new aL(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new St(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Ot{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}Y(Ot,"numberLiteral",(...e)=>new cL(...e)),Y(Ot,"label",(...e)=>new dL(...e)),Y(Ot,"unaryOperation",(...e)=>new hL(...e)),Y(Ot,"binaryOperation",(...e)=>new fL(...e));class cL extends Ot{constructor(n,i){super(i);Y(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class dL extends Ot{constructor(n,i,r){super(r);Y(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new J("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new J("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new J("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class hL extends Ot{constructor(n,i,r){super(r);Y(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class fL extends Ot{constructor(n,i,r,s){super(s);Y(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Ff{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var yr;class JC extends Ff{constructor(n,i,r){super(r);Y(this,"type","data-directive");Y(this,"label");Y(this,"values");ie(this,yr,null);this.values=n,this.label=i}get start(){if(x(this,yr)===null)throw new Error("Start not set");return x(this,yr)}setStart(n){if(x(this,yr)!==null)throw new Error("Start already set");F(this,yr,n)}toJSON(){return{...super.toJSON(),...x(this,yr)?{start:x(this,yr).toJSON()}:{},directive:this.directive,label:this.label}}}yr=new WeakMap;var vo,hs,_l;class pL extends JC{constructor(n,i,r){super(n,i,r);Y(this,"directive","EQU");ie(this,vo,"not-processed");ie(this,hs,null);ie(this,_l,null)}toJSON(){var n;return{...super.toJSON(),value:x(this,_l)??((n=x(this,hs))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(x(this,hs))throw new Error("Constant already validated");if(!this.label)throw new J("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new J("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new J("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new J("cannot-be-unassinged","EQU").at(n);F(this,hs,n.value)}evaluateExpressions(n){if(!x(this,hs))throw new Error("Constant not validated");if(x(this,vo)==="processed")return x(this,_l);if(x(this,vo)==="processing")throw new J("circular-reference").at(this.position);F(this,vo,"processed");const i=x(this,hs).evaluate(n);return F(this,vo,"processed"),F(this,_l,i),i}evaluate(n){return this.evaluateExpressions(n)}}vo=new WeakMap,hs=new WeakMap,_l=new WeakMap;const Ya=Symbol("unassigned");var an,di;class mL extends JC{constructor(n,i,r,s){super(i,r,s);Y(this,"size");ie(this,an,null);ie(this,di,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!x(this,an))throw new Error("Data directive not validated");return x(this,an).length*(this.size/8)}getValues(){if(!x(this,di))throw new Error("Data directive not evaluated");return x(this,di)}toJSON(){return{...super.toJSON(),values:(x(this,di)??x(this,an)??this.values).map(n=>n===Ya?"?":n.toJSON())}}validate(){if(x(this,an))throw new Error("Data directive already validated");F(this,an,[]);for(const n of this.values)if(n.isUnassigned())x(this,an).push(Ya);else if(n.isString()){if(this.directive!=="DB")throw new J("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=GC(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new St(n.position.start+r,n.position.start+r+1),l=Ot.numberLiteral(s,o);x(this,an).push(l)}}else x(this,an).push(n.value);if(x(this,an).length===0)throw new J("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!x(this,an))throw new Error("Data directive not validated");if(x(this,di))throw new Error("Data directive already evaluated");F(this,di,[]);const i=Oh(x(this,an),r=>{if(r===Ya)x(this,di).push(Ya);else{const s=r.evaluate(n);if(!T.fits(s,this.size))throw new J("value-out-of-range",s,this.size).at(this);const o=T.fromNumber(s,this.size);x(this,di).push(o)}},J.from);return i.length>0&&F(this,di,null),i}}an=new WeakMap,di=new WeakMap;class cv{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class gL extends cv{constructor(n,i){super(i);Y(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class yL extends cv{constructor(n){super(n);Y(this,"type","unassigned")}}class vL extends cv{constructor(n){super(n.position);Y(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function wL(t,e,n){const i=St.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new mL(t.type,e,n,i);case"EQU":return new pL(e,n,i)}}class bL extends Ff{constructor(n){super(n);Y(this,"type","end")}}function no(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var vr;class Fo extends Ff{constructor(n,i,r){super(r);Y(this,"type","instruction");Y(this,"label");Y(this,"operands");ie(this,vr,null);this.operands=n,this.label=i}get start(){if(x(this,vr)===null)throw new Error("Start not set");return x(this,vr)}setStart(n){if(x(this,vr)!==null)throw new Error("Start already set");F(this,vr,n)}toJSON(){return{...super.toJSON(),...x(this,vr)?{start:x(this,vr).toJSON()}:{},instruction:this.instruction,label:this.label}}}vr=new WeakMap;var Ft,Hn;class xL extends Fo{constructor(n,i,r,s){super(i,r,s);ie(this,Ft,null);ie(this,Hn,null);this.instruction=n}get length(){if(!x(this,Ft))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=x(this,Ft);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!x(this,Hn))throw new Error("Instruction not evaluated");return x(this,Hn)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],l={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=l[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=no(s)<<3,o[1]|=no(r)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=no(r)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=no(r)<<0,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}case"mem<-reg":{r.mode==="direct"?(o[1]=192,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=208,o[1]|=no(s)<<0;break}case"mem<-imd":{r.mode==="direct"?(o[1]=200,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...x(this,Hn)??x(this,Ft)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(x(this,Ft))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new J("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new J("size-mismatch",r.size,i.size).at(this);F(this,Ft,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new J("size-mismatch",r.size,i.size).at(this);F(this,Ft,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new J("size-mismatch",r.size,i.size).at(this);F(this,Ft,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}if(r.value.isLabel()){const s=r.isDataDirectiveLabel(n);if(s){if(s!==i.size)throw new J("size-mismatch",s,i.size).at(this);F(this,Ft,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:Ot.label(r.value.value,!0,r.value.position)}});return}}F(this,Ft,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else if(i.value.isLabel()){if(s=i.isDataDirectiveLabel(n)||"auto",s==="auto")throw new J("label-should-be-writable",i.value.value).at(i);o={mode:"direct",address:Ot.label(i.value.value,!0,i.value.position)}}else throw new J("destination-cannot-be-immediate").at(i);if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new J("size-mismatch",s,r.size).at(this);F(this,Ft,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.isDataDirectiveLabel(n))throw new J("double-memory-access").at(this);if(s==="auto")throw new J("unknown-size").at(i);F(this,Ft,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new J("double-memory-access").at(this)}}evaluateExpressions(n){if(!x(this,Ft))throw new Error("Instruction not validated");if(x(this,Hn))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=x(this,Ft),l=a=>{const u=a.evaluate(n);if(!oe.inRange(u))throw new J("address-out-of-range",u).at(a);const c=oe.from(u);if(n.addressIsReserved(c))throw new J("address-has-code",c).at(a);return c};switch(i){case"reg<-reg":{F(this,Hn,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{F(this,Hn,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:l(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const a=o.evaluate(n);if(!T.fits(a,r))throw new J("value-out-of-range",a,r).at(o);const u=T.fromNumber(a,r);F(this,Hn,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{F(this,Hn,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:l(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const a=o.evaluate(n);if(!T.fits(a,r))throw new J("value-out-of-range",a,r).at(o);const u=T.fromNumber(a,r);F(this,Hn,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:l(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}Ft=new WeakMap,Hn=new WeakMap;var _i,wr;class SL extends Fo{constructor(n,i,r,s){super(i,r,s);ie(this,_i,null);ie(this,wr,null);Y(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!x(this,wr))throw new Error("Instruction not evaluated");return x(this,wr)}toJSON(){return{...super.toJSON(),...x(this,wr)?{value:x(this,wr).toJSON()}:x(this,_i)?{initialValue:x(this,_i).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(x(this,_i))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new J("expects-immediate").at(n);F(this,_i,n.value)}evaluateExpressions(n){if(!x(this,_i))throw new Error("Instruction not validated");if(x(this,wr))throw new Error("Instruction aready evaluated");const i=x(this,_i).evaluate(n);if(!T.fitsUnsigned(i,8))throw new J("invalid-interrupt",i).at(x(this,_i));F(this,wr,T.fromUnsigned(i,8))}}_i=new WeakMap,wr=new WeakMap;var hi,br,fk;let kL=(fk=class extends Fo{constructor(n,i,r,s){super(i,r,s);ie(this,hi,null);ie(this,br,null);this.instruction=n}get length(){if(!x(this,hi))throw new Error("Instruction not validated");return x(this,hi).port==="fixed"?2:1}toBytes(){const n=[],i={IN:80,OUT:84};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(x(this,br)===null)throw new Error("Operation not set");return x(this,br)}toJSON(){return{...super.toJSON(),...x(this,br)??x(this,hi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(x(this,hi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new J("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new J("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new J("expects-dx").at(i);F(this,hi,{port:"variable",size:r});return}if(i.isNumberExpression()){F(this,hi,{port:"fixed",size:r,address:i.value});return}throw new J("expects-immediate").at(i)}evaluateExpressions(n){if(!x(this,hi))throw new Error("Instruction not validated");if(x(this,br))throw new Error("Instruction aready evaluated");const i=x(this,hi);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!xn.inRange(r))throw new J("io-address-out-of-range",r).at(this);const s=xn.from(r);F(this,br,{port:"fixed",size:i.size,address:s})}else F(this,br,{port:"variable",size:i.size})}},hi=new WeakMap,br=new WeakMap,fk);var xr,Sr,pk;let CL=(pk=class extends Fo{constructor(n,i,r,s){super(i,r,s);ie(this,xr,null);ie(this,Sr,null);Y(this,"length",3);this.instruction=n}toBytes(){const n=[],i={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(x(this,Sr)===null)throw new Error("Instruction not evaluated");return x(this,Sr)}toJSON(){return{...super.toJSON(),...x(this,Sr)?{address:x(this,Sr).toJSON()}:x(this,xr)?{jumpTo:x(this,xr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(x(this,xr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new J("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new J("label-not-found",r).at(i);if(s!=="instruction")throw new J("label-should-be-an-instruction",r).at(i);F(this,xr,r)}evaluateExpressions(n){if(!x(this,xr))throw new Error("Instruction not validated");if(x(this,Sr))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(x(this,xr));if(!oe.inRange(i))throw new J("address-out-of-range",i).at(this);F(this,Sr,oe.from(i))}},xr=new WeakMap,Sr=new WeakMap,pk);var $i,mk;let EL=(mk=class extends Fo{constructor(n,i,r,s){super(i,r,s);ie(this,$i,null);Y(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:96,POP:104}[this.instruction];return i|=no(this.register),new Uint8Array([i])}get register(){if(!x(this,$i))throw new Error("Instruction not evaluated");return x(this,$i)}toJSON(){return{...super.toJSON(),...x(this,$i)?{register:x(this,$i)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(x(this,$i))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new J("expects-word-register").at(n);F(this,$i,n.value)}evaluateExpressions(){if(!x(this,$i))throw new Error("Instruction not validated")}},$i=new WeakMap,mk);var Pn,Fi;class AL extends Fo{constructor(n,i,r,s){super(i,r,s);ie(this,Pn,null);ie(this,Fi,null);this.instruction=n}get length(){if(!x(this,Pn))throw new Error("Instruction not validated");const{mode:n}=x(this,Pn);let i=2;return n==="mem-direct"&&(i+=2),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=no(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!x(this,Fi))throw new Error("Instruction not evaluated");return x(this,Fi)}toJSON(){return{...super.toJSON(),...x(this,Fi)??x(this,Pn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(x(this,Pn))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){F(this,Pn,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new J("unknown-size").at(i);F(this,Pn,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new J("unknown-size").at(i);F(this,Pn,{mode:"mem-indirect",size:i.size});return}if(i.value.isLabel()){const r=i.isDataDirectiveLabel(n);if(r){F(this,Pn,{mode:"mem-direct",size:r,address:Ot.label(i.value.value,!0,i.value.position)});return}}throw new J("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!x(this,Pn))throw new Error("Instruction not validated");if(x(this,Fi))throw new Error("Instruction aready evaluated");const i=x(this,Pn);switch(i.mode){case"reg":{F(this,Fi,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!oe.inRange(r))throw new J("address-out-of-range",r).at(i.address);const s=oe.from(r);if(n.addressIsReserved(s))throw new J("address-has-code",s).at(i.address);F(this,Fi,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{F(this,Fi,{mode:"mem-indirect",size:i.size});return}default:return i}}}Pn=new WeakMap,Fi=new WeakMap;var $l;class PL extends Fo{constructor(n,i,r,s){super(i,r,s);ie(this,$l,!1);Y(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(x(this,$l))throw new Error("Instruction already validated");if(this.operands.length>0)throw new J("expects-no-operands").at(this);F(this,$l,!0)}evaluateExpressions(){if(!x(this,$l))throw new Error("Instruction not validated")}}$l=new WeakMap;class zf{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class RL extends zf{constructor(n){super(n.position);Y(this,"type","register");Y(this,"value");this.value=n.type}get size(){return XC.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class ML extends zf{constructor(n,i){super(i);Y(this,"type","indirect-address");Y(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class OL extends zf{constructor(n,i,r){super(r);Y(this,"type","direct-address");Y(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class TL extends zf{constructor(n){super(n.position);Y(this,"type","number-expression");this.value=n}isDataDirectiveLabel(n){if(!this.value.isLabel())return!1;const i=this.value;if(i.offset)return!1;if(!n.labelExists(i.value))throw new J("label-not-found",i.value).at(this.position);const r=n.getLabelType(i.value);return r==="DB"?8:r==="DW"?16:!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function fb(t,e,n){const i=St.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new PL(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new xL(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new AL(t.type,e,n,i);case"PUSH":case"POP":return new EL(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new CL(t.type,e,n,i);case"IN":case"OUT":return new kL(t.type,e,n,i);case"INT":return new SL(t.type,e,n,i)}}class NL extends Ff{constructor(n,i){super(i);Y(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let DL=class{constructor(e){Y(this,"tokens");Y(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new J("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new J("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new NL(i,St.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new J("end-must-be-the-last-statement").at(e);return new bL(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...av);if(e&&!n)throw new J("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),wL(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new gL(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new yL(e.position)}return new vL(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...uv);if(e&&!n){const s=this.peek();throw new J("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return fb(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),fb(n,r,i)}instructionOperand(){if(this.match(...Th)){const n=this.previous();return new RL(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new J("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Th)){this.consume("BX",new J("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new J("parser.expected-literal-after-literal","]","BX"));return new ML(e==null?void 0:e.type,St.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new J("parser.expected-literal-after-expression","]"));return new OL(i,e==null?void 0:e.type,St.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new J("parser.expected-literal-after-literal","[","PTR");return new TL(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new J("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new J("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Ot.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new J("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new J("parser.expected-label-after-offset").at(this.peek());if(!n)throw new J("parser.expected-argument").at(this.peek());return Ot.label(n.lexeme.toUpperCase(),e!==null,St.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new J("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Ot.unaryOperation(e.type==="PLUS"?"+":"-",n,St.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Ot.binaryOperation(e,"*",n,St.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Ot.binaryOperation(e,n.type==="PLUS"?"+":"-",i,St.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function YC(t){try{const n=new uL(t).scanTokens(),r=new DL(n).parse(),s=r.at(-1);if(!s)throw new J("empty-program");if(!s.isEnd())throw new J("end-must-be-the-last-statement").at(s);let o=[];const l=new sL;if(o=l.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Oh(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(l)},J.from),o.length>0)return{success:!1,errors:o};if(o=l.computeAddresses(r),o.length>0)return{success:!1,errors:o};const a=[],u=[];return o=Oh(r,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(l);else{const d=c.evaluateExpressions(l);return a.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(l),u.push(c))},J.from),o.length>0?{success:!1,errors:o}:{success:!0,data:a,instructions:u}}catch(e){return{success:!1,errors:[J.from(e)]}}}class or{constructor(e){Y(this,"computer");this.computer=e.computer}}const LL=oe.from(oe.MAX_ADDRESS).toString(),IL={"address-has-instruction":t=>`Memory address ${oe.format(t)} has an instruction, and cannot be read nor written.`,"address-out-of-range":t=>`Memory address ${oe.format(t)} is out of range (max memory address: ${LL}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-implemented":t=>`I/O memory address ${xn.format(t)} has no implementation.`,"no-instruction":t=>`Expected instruction at memory address ${oe.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},BL=oe.from(oe.MAX_ADDRESS).toString(),_L={"address-has-instruction":t=>`La direccin de memoria ${t} tiene una instruccin, y no se puede leer ni escribir.`,"address-out-of-range":t=>`La direccin de memoria ${oe.format(t)} est fuera de rango (direccin mxima de memoria: ${BL}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-implemented":t=>`La direccin de memoria E/S ${xn.format(t)} no est implementada.`,"no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${t} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},$L=ov({en:IL,es:_L});class at extends Error{constructor(n,...i){super();Y(this,"code");Y(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return $L(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof at?n:new at("unexpected-error",n)}}class Gr{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const r=e.cpu.getRegister("IP").toString("hex");throw new at("unexpected-error",`Could not read instruction byte at address ${r}h`)}yield*e.cpu.updateWordRegister("IP",r=>r.add(1)),yield*e.cpu.getMBR(n)}}var yf,KC;class FL extends Gr{constructor(){super(...arguments);ie(this,yf)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Te(this,yf,KC).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const l=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),a=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?l.signed&a.signed:this.name==="OR"?l.signed|a.signed:l.signed^a.signed;u=T.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=l.unsigned+a.unsigned+d;h>T.maxValue(r)?(c.CF=!0,u=T.fromUnsigned(h-T.maxValue(r)-1,r)):(c.CF=!1,u=T.fromUnsigned(h,r)),c.OF=l.signed>=0&&a.signed>=0&&u.signed<0||l.signed<0&&a.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=l.unsigned-a.unsigned-d;h<0?(c.CF=!0,u=T.fromUnsigned(h+T.maxValue(r)+1,r)):(c.CF=!1,u=T.fromUnsigned(h,r)),c.OF=l.signed>=0&&a.signed<0&&u.signed<0||l.signed<0&&a.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}yf=new WeakSet,KC=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};var vf,qC;class zL extends Gr{constructor(){super(...arguments);ie(this,vf)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Te(this,vf,qC).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=T.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=T.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===T.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",T.fromSigned(1,16));const o=i.unsigned+1;o>T.maxValue(this.operation.size)?(s.CF=!0,r=T.fromUnsigned(o-T.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=T.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",T.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=T.fromUnsigned(o+T.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=T.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}vf=new WeakSet,qC=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class jL extends Gr{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var wf,QC;class UL extends Gr{constructor(){super(...arguments);ie(this,wf)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Te(this,wf,QC).call(this),willUse:{ri:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",T.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new at("io-memory-not-implemented",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new at("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new at("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}wf=new WeakSet,QC=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class VL extends Gr{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class HL extends Gr{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function io(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function WL(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var bf,ZC;class GL extends Gr{constructor(){super(...arguments);ie(this,bf)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Te(this,bf,ZC).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd",id:i==="reg<-mem"||i==="reg<-imd"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",l=>l.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return r===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[l,a]=WL(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(!(yield*n.cpu.useBus("mem-write"))||a&&(yield*n.cpu.updateWordRegister("ri",u=>u.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",l=>l.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}bf=new WeakSet,ZC=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};class XL extends Gr{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class JL extends Gr{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function YL(t){switch(t.instruction){case"MOV":return new GL(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new FL(t);case"NOT":case"NEG":case"INC":case"DEC":return new zL(t);case"IN":case"OUT":return new UL(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new JL(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new VL(t);case"RET":case"IRET":return new XL(t);case"INT":return new jL(t);case"CLI":case"STI":case"NOP":case"HLT":return new HL(t)}}const KL=[0,3,6,7];function qL(t){return KL.includes(t.unsigned)}function*QL(t,e){switch(e.unsigned){case 0:return yield{type:"cpu:int.0"},!1;case 3:return yield{type:"cpu:int.3"},!0;case 6:{yield*t.cpu.copyWordRegister("BX","ri");const n=yield*t.io.console.read();if(yield*t.cpu.updateWordRegister("id",n.withHigh(T.zero(8))),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("id.l"),!(yield*t.cpu.useBus("mem-write")))return!1;break}case 7:{if(yield*t.cpu.copyWordRegister("AX","id"),!(yield*t.cpu.pushToStack())||(yield*t.cpu.copyWordRegister("BX","id"),!(yield*t.cpu.pushToStack())))return!1;yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",T.zero(8));const n=t.cpu.getRegister("AL");for(yield*t.cpu.aluExecute("SUB",n,{CF:!1,OF:!1,SF:n.signed<0,ZF:n.isZero()});!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read")))return!1;yield*t.cpu.getMBR("id.l");const i=t.cpu.getRegister("id.l");yield*t.io.console.write(i),yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",T.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",T.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===T.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","BX"),!(yield*t.cpu.popFromStack())))return!1;yield*t.cpu.copyWordRegister("id","AX");break}default:throw new Error("Invalid interrupt number")}return!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","IP"),!(yield*t.cpu.popFromStack()))?!1:(yield*t.cpu.copyWordRegister("id","FLAGS"),!0)}var Fl,pe,Rn,Gt,fs,Ko,un,Vn,gk;let ZL=(gk=class extends or{constructor(n){super(n);ie(this,fs);ie(this,un);ie(this,Fl,void 0);ie(this,pe,void 0);ie(this,Rn,void 0);ie(this,Gt,void 0);n.data==="unchanged"?(F(this,pe,x(n.previous.cpu,pe)),F(this,Rn,x(n.previous.cpu,Rn)),F(this,Gt,x(n.previous.cpu,Gt))):n.data==="randomize"?(F(this,pe,{AX:T.random(16),BX:T.random(16),CX:T.random(16),DX:T.random(16),SP:T.random(16),IP:T.random(16),IR:T.random(8),ri:T.random(16),id:T.random(16),left:T.random(16),right:T.random(16),result:T.random(16),FLAGS:T.random(16)}),F(this,Rn,T.random(16)),F(this,Gt,T.random(8))):(F(this,pe,{AX:T.zero(16),BX:T.zero(16),CX:T.zero(16),DX:T.zero(16),SP:T.zero(16),IP:T.zero(16),IR:T.zero(8),ri:T.zero(16),id:T.zero(16),left:T.zero(16),right:T.zero(16),result:T.zero(16),FLAGS:T.zero(16)}),F(this,Rn,T.zero(16)),F(this,Gt,T.zero(8))),x(this,pe).SP=T.fromUnsigned(oe.MAX_ADDRESS+1,16),x(this,pe).IP=T.fromUnsigned(8192,16),Te(this,un,Vn).call(this,"IF",!0),F(this,Fl,new Map);for(const i of n.program.instructions){const r=YL(i);x(this,Fl).set(r.start.value,r)}}*run(){for(;;){const n=x(this,Fl).get(x(this,pe).IP.unsigned);if(!n){yield{type:"cpu:error",error:new at("no-instruction",x(this,pe).IP)};return}if(!(yield*n.execute(this.computer)))return;if(this.getFlag("IF")&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const r=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",T.zero(8)),yield*this.startInterrupt(r)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;if(qL(n))return yield*QL(this.computer,n);let i=T.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),i=i.add(1),yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(x(this,pe)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:x(this,Rn).toJSON(),MBR:x(this,Gt).toJSON()}}getRegister(n){const[i,r]=io(n);return r==="low"?x(this,pe)[i].low:r==="high"?x(this,pe)[i].high:x(this,pe)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Te(this,fs,Ko).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Te(this,fs,Ko).call(this,i,r),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Te(this,fs,Ko).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Te(this,fs,Ko).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return x(this,pe).FLAGS.bit(0);case"ZF":return x(this,pe).FLAGS.bit(6);case"SF":return x(this,pe).FLAGS.bit(7);case"IF":return x(this,pe).FLAGS.bit(9);case"OF":return x(this,pe).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Te(this,un,Vn).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Te(this,un,Vn).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Te(this,un,Vn).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Te(this,un,Vn).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Te(this,un,Vn).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:x(this,pe).FLAGS}}*aluExecute(n,i,r){x(this,pe).result=i.is8bits()?x(this,pe).result.withLow(i):i,typeof r.CF=="boolean"&&Te(this,un,Vn).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Te(this,un,Vn).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Te(this,un,Vn).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Te(this,un,Vn).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Te(this,un,Vn).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:x(this,pe).result,flags:x(this,pe).FLAGS}}*setMAR(n){const i=this.getRegister(n);F(this,Rn,i),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Te(this,fs,Ko).call(this,n,x(this,Gt)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);F(this,Gt,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(x(this,Rn));return i?(F(this,Gt,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(x(this,Rn),x(this,Gt)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(x(this,Rn).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(F(this,Gt,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(x(this,Rn).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,x(this,Gt))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{const i=yield*this.computer.io.pic.handleINTR();return F(this,Gt,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return oe.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?oe.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new at("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new at("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return oe.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),oe.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new at("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new at("stack-underflow")},!1)}},Fl=new WeakMap,pe=new WeakMap,Rn=new WeakMap,Gt=new WeakMap,fs=new WeakSet,Ko=function(n,i){const[r,s]=io(n);if(s===null){if(x(this,pe)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);x(this,pe)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?x(this,pe)[r]=x(this,pe)[r].withLow(i):x(this,pe)[r]=x(this,pe)[r].withHigh(i)}},un=new WeakSet,Vn=function(n,i){switch(n){case"CF":x(this,pe).FLAGS=x(this,pe).FLAGS.withBit(0,i);return;case"ZF":x(this,pe).FLAGS=x(this,pe).FLAGS.withBit(6,i);return;case"SF":x(this,pe).FLAGS=x(this,pe).FLAGS.withBit(7,i);return;case"IF":x(this,pe).FLAGS=x(this,pe).FLAGS.withBit(9,i);return;case"OF":x(this,pe).FLAGS=x(this,pe).FLAGS.withBit(11,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},gk),e4=class extends or{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}};var Mn,zl;class t4 extends or{constructor(n){super(n);ie(this,Mn,void 0);ie(this,zl,null);n.data==="unchanged"?F(this,Mn,x(n.previous.io.console,Mn)):F(this,Mn,"")}get screen(){return x(this,Mn)}clear(){return this.write(T.fromUnsigned(12,8))}*read(){yield{type:"console:read"};const n=x(this,zl);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return F(this,zl,null),n}setLastCharRead(n){F(this,zl,n)}*write(n){switch(n.unsigned){case 8:F(this,Mn,x(this,Mn).slice(0,-1));break;case 10:F(this,Mn,x(this,Mn)+`
`);break;case 12:F(this,Mn,"");break;default:F(this,Mn,x(this,Mn)+lv(n.unsigned));break}yield{type:"console:write",char:n}}toJSON(){return x(this,Mn)}}Mn=new WeakMap,zl=new WeakMap;let n4=class extends or{*press(){yield{type:"f10:press"},yield{type:"f10:int.on"},yield*this.computer.io.pic.interrupt(0),yield{type:"f10:int.off"}}toJSON(){return null}};class jf extends or{}var Ji,kr,cn,Xt,fi,jl,Ud,Ul,Vd;let i4=(Ji=class extends jf{constructor(n){super(n);ie(this,jl);ie(this,Ul);ie(this,kr,void 0);ie(this,cn,void 0);ie(this,Xt,void 0);ie(this,fi,void 0);F(this,kr,T.fromUnsigned(255,8)),F(this,cn,T.fromUnsigned(0,8)),F(this,Xt,T.fromUnsigned(0,8)),n.data==="unchanged"?F(this,fi,x(n.previous.io.pic,fi)):n.data==="randomize"?F(this,fi,new Array(Ji.LINES).fill(T.zero(8)).map(()=>T.random(8))):F(this,fi,new Array(Ji.LINES).fill(T.zero(8)))}chipSelect(n){const r=4+Ji.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=T.zero(8);else if(n==="IMR")i=x(this,kr);else if(n==="IRR")i=x(this,cn);else if(n==="ISR")i=x(this,Xt);else{const r=Number(n.slice(3));i=x(this,fi)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")x(this,Xt).isZero()||(yield{type:"pic:intr.off"},F(this,Xt,T.zero(8)),yield{type:"pic:register.update",register:"ISR",value:x(this,Xt)},yield*Te(this,Ul,Vd).call(this));else if(n==="IMR")F(this,kr,i),yield{type:"pic:register.update",register:"IMR",value:x(this,kr)},yield*Te(this,Ul,Vd).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));x(this,fi)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=Ji.LINES)throw new RangeError(`Invalid interrupt line ${n}`);x(this,cn).bit(n)||(F(this,cn,x(this,cn).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:x(this,cn)},yield*Te(this,Ul,Vd).call(this))}isINTRActive(){return x(this,Xt).isZero()&&Te(this,jl,Ud).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!x(this,Xt).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Te(this,jl,Ud).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");F(this,Xt,x(this,Xt).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:x(this,Xt)},F(this,cn,x(this,cn).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:x(this,cn)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=x(this,fi)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:x(this,kr).toJSON(),IRR:x(this,cn).toJSON(),ISR:x(this,Xt).toJSON(),lines:x(this,fi).map(n=>n.toJSON())}}},kr=new WeakMap,cn=new WeakMap,Xt=new WeakMap,fi=new WeakMap,jl=new WeakSet,Ud=function(){for(let n=0;n<Ji.LINES;n++)if(x(this,cn).bit(n)&&!x(this,kr).bit(n))return n;return null},Ul=new WeakSet,Vd=function*(){x(this,Xt).isZero()&&Te(this,jl,Ud).call(this)!==null&&(yield{type:"pic:intr.on"})},Y(Ji,"LINES",8),Ji);var zi,ps,yk;let r4=(yk=class extends jf{constructor(n){super(n);ie(this,zi,void 0);ie(this,ps,void 0);F(this,zi,T.zero(8)),F(this,ps,T.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=x(this,zi);else if(n==="COMP")i=x(this,ps);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")F(this,zi,i);else if(n==="COMP")F(this,ps,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=x(this,zi).unsigned===T.maxValue(8)?T.zero(8):x(this,zi).add(1);F(this,zi,n),yield{type:"timer:register.update",register:"CONT",value:n},x(this,ps).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:x(this,zi).toJSON(),COMP:x(this,ps).toJSON()}}},zi=new WeakMap,ps=new WeakMap,yk);class Uf extends or{constructor(n){super(n);Y(this,"clock");Y(this,"console");Y(this,"f10");Y(this,"pic");Y(this,"timer");this.clock=new e4(n),this.console=new t4(n),this.f10=new n4(n),this.pic=new i4(n),this.timer=new r4(n)}*chipSelect(n){const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const r=this.timer.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:r}):(yield{type:"bus:io.error",error:new at("io-memory-not-implemented",n)},null)}*read(n){const{chip:i,register:r}=n;return i==="pic"?yield*this.pic.read(r):i==="timer"?yield*this.timer.read(r):(yield{type:"bus:io.error",error:new at("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return r==="pic"?(yield*this.pic.write(s,i),!0):r==="timer"?(yield*this.timer.write(s,i),!0):(yield{type:"bus:io.error",error:new at("device-not-connected",r)},!1)}toJSON(){return{clock:this.clock.toJSON(),console:this.console.toJSON(),f10:this.f10.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}}Y(Uf,"SIZE",xn.MAX_ADDRESS+1);var ji,Jt,vk;let s4=(vk=class extends jf{constructor(n){super(n);ie(this,ji,void 0);ie(this,Jt,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?F(this,ji,T.zero(8)):n.data==="randomize"?F(this,ji,T.random(8)):F(this,ji,T.zero(8)),F(this,Jt,T.zero(8))}get interrupts(){return x(this,Jt).bit(7)}get DATA(){return x(this,ji)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=x(this,ji);else if(n==="STATE")i=x(this,Jt);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")F(this,ji,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.computer.io.printer.busy),F(this,Jt,i),yield{type:"handshake:register.update",register:n,value:i},x(this,Jt).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),F(this,Jt,x(this,Jt).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:x(this,Jt)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){F(this,Jt,x(this,Jt).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:x(this,Jt)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:x(this,ji).toJSON(),STATE:x(this,Jt).toJSON()}}},ji=new WeakMap,Jt=new WeakMap,vk);var Wn,Cr,ms;const vu=class vu extends or{constructor(n){super(n);ie(this,Wn,void 0);ie(this,Cr,void 0);ie(this,ms,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(F(this,Wn,x(n.previous.io.printer,Wn)),F(this,Cr,x(n.previous.io.printer,Cr)),F(this,ms,x(n.previous.io.printer,ms))):(F(this,Wn,[]),F(this,Cr,""),F(this,ms,!1))}get busy(){return x(this,Wn).length>=vu.BUFFER_SIZE}*setStrobe(n){const i=x(this,ms);if(i===n)return;if(F(this,ms,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();x(this,Wn).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){F(this,Cr,""),yield{type:"printer:paper.replace"}}*print(){if(x(this,Wn).length===0)return;const[n,...i]=x(this,Wn);if(F(this,Wn,i),yield{type:"printer:buffer.pop",char:n},i.length===vu.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=lv(n.unsigned);F(this,Cr,x(this,Cr)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:x(this,Cr),buffer:[...x(this,Wn).map(n=>n.unsigned)]}}};Wn=new WeakMap,Cr=new WeakMap,ms=new WeakMap,Y(vu,"BUFFER_SIZE",5);let Nh=vu,o4=class extends Nh{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}};class l4 extends Uf{constructor(n){super(n);Y(this,"printer");Y(this,"handshake");this.printer=new o4(n),this.handshake=new s4(n)}*chipSelect(n){const i=this.handshake.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="handshake"?yield*this.handshake.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="handshake"?(yield*this.handshake.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),handshake:this.handshake.toJSON()}}}class eE extends jf{constructor(n){super(n);Y(this,"PA");Y(this,"PB");Y(this,"CA");Y(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=T.random(8),this.PB=T.random(8),this.CA=T.random(8),this.CB=T.random(8)):(this.PA=T.zero(8),this.PB=T.zero(8),this.CA=T.zero(8),this.CB=T.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let a4=class extends eE{readData(){const e=this.PB.unsigned&~this.CB.unsigned;return T.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.computer.io.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=T.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA},this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1))))}};class u4 extends Nh{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}}class c4 extends Uf{constructor(n){super(n);Y(this,"printer");Y(this,"pio");this.printer=new u4(n),this.pio=new a4(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),pio:this.pio.toJSON()}}}var Er;class d4 extends or{constructor(n){super(n);ie(this,Er,void 0);n.data==="unchanged"&&"leds"in n.previous.io?F(this,Er,x(n.previous.io.leds,Er)):n.data==="randomize"?F(this,Er,T.random(8)):F(this,Er,T.zero(8))}get state(){return x(this,Er)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return x(this,Er).toJSON()}}Er=new WeakMap;class h4 extends eE{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=T.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.computer.io.leds.update(T.fromUnsigned(n,8))}}}var Gn;class f4 extends or{constructor(n){super(n);ie(this,Gn,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?F(this,Gn,x(n.previous.io.switches,Gn)):n.data==="randomize"?F(this,Gn,T.random(8)):F(this,Gn,T.zero(8))}get state(){return x(this,Gn)}*toggle(n){F(this,Gn,x(this,Gn).withBit(n,!x(this,Gn).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return x(this,Gn).toJSON()}}Gn=new WeakMap;class p4 extends Uf{constructor(n){super(n);Y(this,"leds");Y(this,"switches");Y(this,"pio");this.leds=new d4(n),this.switches=new f4(n),this.pio=new h4(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),leds:this.leds.toJSON(),switches:this.switches.toJSON(),pio:this.pio.toJSON()}}}var ko,Xn,Vl;let m4=(ko=class extends or{constructor(n){super(n);ie(this,Xn,void 0);ie(this,Vl,void 0);n.data==="unchanged"?F(this,Xn,x(n.previous.memory,Xn)):n.data==="randomize"?F(this,Xn,new Uint8Array(ko.SIZE).map(()=>T.random(8).unsigned)):F(this,Xn,new Uint8Array(ko.SIZE));for(const i of n.program.data){let r=i.start.value;for(const s of i.getValues())s!==Ya&&x(this,Xn).set(s.toUint8Array(),r),r+=i.size/8}F(this,Vl,new Set);for(const i of n.program.instructions){x(this,Xn).set(i.toBytes(),i.start.value);for(let r=0;r<i.length;r++)x(this,Vl).add(i.start.value+r)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!oe.inRange(n))return yield{type:"memory:read.error",error:new at("address-out-of-range",n)},null;const i=T.fromUnsigned(x(this,Xn).at(n),8);return yield{type:"memory:read.ok",value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},oe.inRange(n)?x(this,Vl).has(n)?(yield{type:"memory:write.error",error:new at("address-has-instruction",n)},!1):(x(this,Xn).set([i.unsigned],n),yield{type:"memory:write.ok"},!0):(yield{type:"memory:write.error",error:new at("address-out-of-range",n)},!1)}toJSON(){return[...x(this,Xn)]}},Xn=new WeakMap,Vl=new WeakMap,Y(ko,"SIZE",oe.MAX_ADDRESS+1),ko);class pb{constructor(e){Y(this,"cpu");Y(this,"memory");Y(this,"io");const n={computer:this,...e};if(this.cpu=new ZL(n),this.memory=new m4(n),e.devices==="pio-switches-and-leds")this.io=new p4(n);else if(e.devices==="pio-printer")this.io=new c4(n);else if(e.devices==="handshake")this.io=new l4(n);else throw new Error("Invalid devices configuration")}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var st;class g4{constructor(){ie(this,st,new pb({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){F(this,st,new pb({...e,previous:x(this,st)}))}getComputerState(){var e;return((e=x(this,st))==null?void 0:e.toJSON())||null}startCPU(){if(!x(this,st))throw new at("no-program");return x(this,st).cpu.run()}get devices(){if(!x(this,st))throw new Error("No computer loaded!");return{clock:{tick:()=>x(this,st).io.clock.tick()},console:{readChar:e=>x(this,st).io.console.setLastCharRead(e),clear:()=>x(this,st).io.console.clear()},f10:{press:()=>x(this,st).io.f10.press()},printer:{connected:()=>"printer"in x(this,st).io,clear:()=>{if("printer"in x(this,st).io)return x(this,st).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in x(this,st).io)return x(this,st).io.printer.print();console.warn("No printer connected to the computer!")}},switches:{connected:()=>"printer"in x(this,st).io,toggle:e=>{if("switches"in x(this,st).io)return x(this,st).io.switches.toggle(e);console.warn("No switches connected to the computer!")}}}}}st=new WeakMap;class Ae{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Hi.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let i=[];return this.decompose(e,n,i,0),Hi.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new cu(this),s=new cu(e);for(let o=n,l=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new cu(this,e)}iterRange(e,n=this.length){return new tE(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new nE(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ae.empty:e.length<=32?new ot(e):Hi.from(ot.split(e,[]))}}class ot extends Ae{constructor(e,n=y4(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((n?i:l)>=e)return new v4(r,l,i,o);r=l+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new ot(mb(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),l=Hd(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new ot(l,o.length+s.length));else{let a=l.length>>1;i.push(new ot(l.slice(0,a)),new ot(l.slice(a)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof ot))return super.replace(e,n,i);let r=Hd(this.text,Hd(i.text,mb(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new ot(r,s):Hi.from(ot.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(r+=i),e<a&&n>s&&(r+=l.slice(Math.max(0,e-s),n-s)),s=a+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new ot(i,r)),i=[],r=-1);return r>-1&&n.push(new ot(i,r)),n}}class Hi extends Ae{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,a=i+o.lines-1;if((n?a:l)>=e)return o.lineInner(e,n,i,r);r=l+1,i=a+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&n>=o){let u=r&((o<=e?1:0)|(a>=n?2:0));o>=e&&a<=n&&!u?i.push(l):l.decompose(e-o,n-o,i,u)}o=a+1}}replace(e,n,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&n<=l){let a=o.replace(e-s,n-s,i),u=this.lines-o.lines+a.lines;if(a.lines<u>>5-1&&a.lines>u>>5+1){let c=this.children.slice();return c[r]=a,new Hi(c,this.length-(n-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(r+=i),e<a&&n>o&&(r+=l.sliceString(e-o,n-o,i)),o=a+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Hi))return 0;let i=0,[r,s,o,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==l)return i;let a=this.children[r],u=e.children[s];if(a!=u)return i+a.scanIdentical(u,n);i+=a.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new ot(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,l=[],a=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof Hi)for(let g of f.children)d(g);else f.lines>o&&(a>o||!a)?(h(),l.push(f)):f instanceof ot&&a&&(p=c[c.length-1])instanceof ot&&f.lines+p.lines<=32?(a+=f.lines,u+=f.length+1,c[c.length-1]=new ot(p.text.concat(f.text),p.length+1+f.length)):(a+f.lines>r&&h(),a+=f.lines,u+=f.length+1,c.push(f))}function h(){a!=0&&(l.push(c.length==1?c[0]:Hi.from(c,u)),u=-1,a=c.length=0)}for(let f of e)d(f);return h(),l.length==1?l[0]:new Hi(l,n)}}Ae.empty=new ot([""],0);function y4(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Hd(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let l=t[s],a=r+l.length;a>=n&&(a>i&&(l=l.slice(0,i-r)),r<n&&(l=l.slice(n-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function mb(t,e,n){return Hd(t,[""],e,n)}class cu{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof ot?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,l=r instanceof ot?r.text.length:r.children.length;if(o==(n>0?l:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof ot){let a=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof ot?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class tE{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new cu(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class nE{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ae.prototype[Symbol.iterator]=function(){return this.iter()},cu.prototype[Symbol.iterator]=tE.prototype[Symbol.iterator]=nE.prototype[Symbol.iterator]=function(){return this});class v4{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}let Cl="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Cl.length;t++)Cl[t]+=Cl[t-1];function w4(t){for(let e=1;e<Cl.length;e+=2)if(Cl[e]>t)return Cl[e-1]<=t;return!1}function gb(t){return t>=127462&&t<=127487}const yb=8205;function Ut(t,e,n=!0,i=!0){return(n?iE:b4)(t,e,i)}function iE(t,e,n){if(e==t.length)return e;e&&rE(t.charCodeAt(e))&&sE(t.charCodeAt(e-1))&&e--;let i=Kt(t,e);for(e+=yi(i);e<t.length;){let r=Kt(t,e);if(i==yb||r==yb||n&&w4(r))e+=yi(r),i=r;else if(gb(r)){let s=0,o=e-2;for(;o>=0&&gb(Kt(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function b4(t,e,n){for(;e>0;){let i=iE(t,e-2,n);if(i<e)return i;e--}return 0}function rE(t){return t>=56320&&t<57344}function sE(t){return t>=55296&&t<56320}function Kt(t,e){let n=t.charCodeAt(e);if(!sE(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return rE(i)?(n-55296<<10)+(i-56320)+65536:n}function dv(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function yi(t){return t<65536?1:2}const Kg=/\r\n?|\n/;var pn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(pn||(pn={}));class Qi{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){qg(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Qi(e)}composeDesc(e){return this.empty?e:e.empty?this:oE(this,e)}mapDesc(e,n=!1){return e.empty?this:Qg(this,e,n)}mapPos(e,n=-1,i=pn.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],u=r+l;if(a<0){if(u>e)return s+(e-r);s+=l}else{if(i!=pn.Simple&&u>=e&&(i==pn.TrackDel&&r<e&&u>e||i==pn.TrackBefore&&r<e||i==pn.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!l)return e==r||n<0?s:s+a;s+=a}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],l=r+s;if(o>=0&&r<=n&&l>=e)return r<e&&l>n?"cover":!0;r=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Qi(e)}static create(e){return new Qi(e)}}class gt extends Qi{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return qg(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return Qg(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],l=n[r+1];if(l>=0){n[r]=l,n[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(Ae.empty);i.push(o?e.slice(s,s+o):Ae.empty)}s+=o}return new gt(n,i)}compose(e){return this.empty?e:e.empty?this:oE(this,e,!0)}map(e,n=!1){return e.empty?this:Qg(this,e,n,!0)}iterChanges(e,n=!1){qg(this,e,n)}get desc(){return Qi.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Bu(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-l);zt(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;zt(n,c,d),d>0&&vs(i,n,s.text),s.forward(c),l+=c}let u=e[o++];for(;l<u;){if(s.done)break e;let c=Math.min(s.len,u-l);zt(n,c,-1),zt(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new gt(n,i),filtered:Qi.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,l=null;function a(c=!1){if(!c&&!r.length)return;o<n&&zt(r,n-o,-1);let d=new gt(r,s);l=l?l.compose(d.map(l)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof gt){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?Ae.of(f.split(i||Kg)):f:Ae.empty,g=p.length;if(d==h&&g==0)return;d<o&&a(),d>o&&zt(r,d-o,-1),zt(r,h-d,g),vs(s,r,p),o=h}}return u(e),a(!l),l}static empty(e){return new gt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(Ae.empty);i[r]=Ae.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new gt(n,i)}static createSet(e,n){return new gt(e,n)}}function zt(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function vs(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Ae.empty);t.push(n)}}function qg(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)r+=l,s+=l;else{let u=r,c=s,d=Ae.empty;for(;u+=l,c+=a,a&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function Qg(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Bu(t),l=new Bu(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let u=Math.min(o.len,l.len);zt(r,u,-1),o.forward(u),l.forward(u)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!n))){let u=l.len;for(zt(r,l.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&a<o.i&&o.len<=c&&(zt(r,0,o.ins),s&&vs(s,r,o.text),a=o.i),o.forward(c),u-=c}l.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(l.ins==-1){let d=Math.min(c,l.len);u+=d,c-=d,l.forward(d)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;zt(r,u,a<o.i?o.ins:0),s&&a<o.i&&vs(s,r,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?gt.createSet(r,s):Qi.create(r);throw new Error("Mismatched change set lengths")}}function oE(t,e,n=!1){let i=[],r=n?[]:null,s=new Bu(t),o=new Bu(e);for(let l=!1;;){if(s.done&&o.done)return r?gt.createSet(i,r):Qi.create(i);if(s.ins==0)zt(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)zt(i,0,o.ins,l),r&&vs(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;zt(i,a,c,l),r&&c&&vs(r,i,o.text)}else o.ins==-1?(zt(i,s.off?0:s.len,a,l),r&&vs(r,i,s.textBit(a))):(zt(i,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&vs(r,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>u),s.forward2(a),o.forward(a)}}}}class Bu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Ae.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Ae.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ho{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new ho(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return V.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return V.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return V.range(e.anchor,e.head)}static create(e,n,i){return new ho(e,n,i)}}class V{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:V.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new V([this.main],0)}addRange(e,n=!0){return V.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,V.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new V(e.ranges.map(n=>ho.fromJSON(n)),e.main)}static single(e,n=e){return new V([V.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return V.normalized(e.slice(),n);i=s.to}return new V(e,n)}static cursor(e,n=0,i,r){return ho.create(e,e,(n==0?0:n<0?4:8)|(i==null?3:Math.min(2,i))|(r??33554431)<<5)}static range(e,n,i,r){let s=(i??33554431)<<5|(r==null?3:Math.min(2,r));return n<e?ho.create(n,e,24|s):ho.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?V.range(a,l):V.range(l,a))}}return new V(e,n)}}function lE(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let hv=0;class ne{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=hv++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new ne(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:fv),!!e.static,e.enables)}of(e){return new Wd([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Wd(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Wd(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function fv(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Wd{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=hv++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?a=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(a&&h.docChanged||u&&(h.docChanged||h.selection)||Zg(d,c)){let f=i(d);if(l?!vb(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let g=Lh(h,p);if(this.dependencies.every(v=>v instanceof ne?h.facet(v)===d.facet(v):v instanceof Ht?h.field(v,!1)==d.field(v,!1):!0)||(l?vb(f=i(d),g,r):r(f=i(d),g)))return d.values[o]=g,0}else f=i(d);return d.values[o]=f,1}}}}function vb(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function Zg(t,e){let n=!1;for(let i of e)du(t,i)&1&&(n=!0);return n}function x4(t,e,n){let i=n.map(a=>t[a.id]),r=n.map(a=>a.type),s=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let u=[];for(let c=0;c<i.length;c++){let d=Lh(a,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(a){for(let u of i)du(a,u);return a.values[o]=l(a),1},update(a,u){if(!Zg(a,s))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,u){let c=Zg(a,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&fv(n,d))return a.values[o]=h,0;let f=l(a);return e.compare(f,h)?(a.values[o]=h,0):(a.values[o]=f,1)}}}const wb=ne.define({static:!0});class Ht{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Ht(hv++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(wb).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,wb.of({field:this,create:e})]}get extension(){return this}}const ro={lowest:4,low:3,default:2,high:1,highest:0};function Ta(t){return e=>new aE(e,t)}const hc={highest:Ta(ro.highest),high:Ta(ro.high),default:Ta(ro.default),low:Ta(ro.low),lowest:Ta(ro.lowest)};class aE{constructor(e,n){this.inner=e,this.prec=n}}class fc{of(e){return new e0(this,e)}reconfigure(e){return fc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class e0{constructor(e,n){this.compartment=e,this.inner=n}}class Dh{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of S4(e,n,o))h instanceof Ht?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],u=[];for(let h of r)l[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,g=c&&c[h]||[];if(f.every(v=>v.type==0))if(l[p.id]=a.length<<1|1,fv(g,f))a.push(i.facet(p));else{let v=p.combine(f.map(m=>m.value));a.push(i&&p.compare(v,i.facet(p))?i.facet(p):v)}else{for(let v of f)v.type==0?(l[v.id]=a.length<<1|1,a.push(v.value)):(l[v.id]=u.length<<1,u.push(m=>v.dynamicSlot(m)));l[p.id]=u.length<<1,u.push(v=>x4(v,p,f))}}let d=u.map(h=>h(l));return new Dh(e,o,d,l,a,s)}}function S4(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let u=i[a].indexOf(o);u>-1&&i[a].splice(u,1),o instanceof e0&&n.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let u of o)s(u,l);else if(o instanceof e0){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,l)}else if(o instanceof aE)s(o.inner,o.prec);else if(o instanceof Ht)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Wd)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,ro.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,l)}}return s(t,ro.default),i.reduce((o,l)=>o.concat(l))}function du(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Lh(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const uE=ne.define(),cE=ne.define({combine:t=>t.some(e=>e),static:!0}),dE=ne.define({combine:t=>t.length?t[0]:void 0,static:!0}),hE=ne.define(),fE=ne.define(),pE=ne.define(),mE=ne.define({combine:t=>t.length?t[0]:!1});class Xr{constructor(e,n){this.type=e,this.value=n}static define(){return new k4}}class k4{of(e){return new Xr(this,e)}}class C4{constructor(e){this.map=e}of(e){return new me(this,e)}}class me{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new me(this.type,n)}is(e){return this.type==e}static define(e={}){return new C4(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}me.reconfigure=me.define();me.appendConfig=me.define();class wt{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&lE(i,n.newLength),s.some(l=>l.type==wt.time)||(this.annotations=s.concat(wt.time.of(Date.now())))}static create(e,n,i,r,s,o){return new wt(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(wt.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}wt.time=Xr.define();wt.userEvent=Xr.define();wt.addToHistory=Xr.define();wt.remote=Xr.define();function E4(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function gE(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=gt.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:me.mapEffects(t.effects,r).concat(me.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function t0(t,e,n){let i=e.selection,r=El(e.annotations);return e.userEvent&&(r=r.concat(wt.userEvent.of(e.userEvent))),{changes:e.changes instanceof gt?e.changes:gt.of(e.changes||[],n,t.facet(dE)),selection:i&&(i instanceof V?i:V.single(i.anchor,i.head)),effects:El(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function yE(t,e,n){let i=t0(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=gE(i,t0(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=wt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return P4(n?A4(r):r)}function A4(t){let e=t.startState,n=!0;for(let r of e.facet(hE)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:E4(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=gt.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=wt.create(e,r,t.selection&&t.selection.map(s),me.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(fE);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof wt?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof wt?t=s[0]:t=yE(e,El(s),!1)}return t}function P4(t){let e=t.startState,n=e.facet(pE),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=gE(i,t0(e,s,t.changes.newLength),!0))}return i==t?t:wt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const R4=[];function El(t){return t==null?R4:Array.isArray(t)?t:[t]}var Dt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Dt||(Dt={}));const M4=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let n0;try{n0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function O4(t){if(n0)return n0.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||M4.test(n)))return!0}return!1}function T4(t){return e=>{if(!/\S/.test(e))return Dt.Space;if(O4(e))return Dt.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Dt.Word;return Dt.Other}}class we{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)du(this,l<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return du(this,i),Lh(this,i)}update(...e){return yE(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(fc.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,a)=>r.set(a,l)),n=null),r.set(o.value.compartment,o.value.extension)):o.is(me.reconfigure)?(n=null,i=o.value):o.is(me.appendConfig)&&(n=null,i=El(i).concat(o.value));let s;n?s=e.startState.values.slice():(n=Dh.resolve(i,r,this),s=new we(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new we(n,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:V.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=El(i.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),u=this.changes(a.changes),c=u.map(r);for(let h=0;h<l;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(a.range.map(d)),r=r.compose(c),o=me.mapEffects(o,c).concat(me.mapEffects(El(a.effects),d))}return{changes:r,selection:V.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof gt?e:gt.of(e,this.doc.length,this.facet(we.lineSeparator))}toText(e){return Ae.of(e.split(this.facet(we.lineSeparator)||Kg))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(du(this,n),Lh(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Ht&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return we.create({doc:e.doc,selection:V.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Dh.resolve(e.extensions||[],new Map),i=e.doc instanceof Ae?e.doc:Ae.of((e.doc||"").split(n.staticFacet(we.lineSeparator)||Kg)),r=e.selection?e.selection instanceof V?e.selection:V.single(e.selection.anchor,e.selection.head):V.single(0);return lE(r,i.length),n.staticFacet(cE)||(r=r.asSingle()),new we(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(we.tabSize)}get lineBreak(){return this.facet(we.lineSeparator)||`
`}get readOnly(){return this.facet(mE)}phrase(e,...n){for(let i of this.facet(we.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(uE))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return T4(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Ut(n,o,!1);if(s(n.slice(a,o))!=Dt.Word)break;o=a}for(;l<r;){let a=Ut(n,l);if(s(n.slice(l,a))!=Dt.Word)break;l=a}return o==l?null:V.range(o+i,l+i)}}we.allowMultipleSelections=cE;we.tabSize=ne.define({combine:t=>t.length?t[0]:4});we.lineSeparator=dE;we.readOnly=mE;we.phrases=ne.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});we.languageData=uE;we.changeFilter=hE;we.transactionFilter=fE;we.transactionExtender=pE;fc.reconfigure=me.define();function Ws(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Mo{eq(e){return this==e}range(e,n=e){return i0.create(e,n,this)}}Mo.prototype.startSide=Mo.prototype.endSide=0;Mo.prototype.point=!1;Mo.prototype.mapMode=pn.TrackDel;let i0=class vE{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new vE(e,n,i)}};function r0(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class pv{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let a=o+l>>1,u=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-n;if(a==o)return u>=0?o:l;u>=0?l=a:o=a+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,d=this.to[a]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(l=Math.max(l,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new pv(r,s,i,l):null,pos:o}}}class je{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new je(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(r0)),this.isEmpty)return n.length?je.of(n):this;let l=new wE(this,null,-1).goto(0),a=0,u=[],c=new Oo;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let d=n[a++];c.addInner(d.from,d.to,d.value)||u.push(d)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push(i0.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?je.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],u=e.touchesRange(l,l+a.length);if(u===!1)r=Math.max(r,a.maxPoint),n.push(a),i.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:d}=a.map(l,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new je(i,n,s||je.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return _u.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return _u.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=bb(o,l,i),u=new Na(o,a,s),c=new Na(l,a,s);i.iterGaps((d,h,f)=>xb(u,d,c,h,f,r)),i.empty&&i.length==0&&xb(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=bb(s,o),a=new Na(s,l,0).goto(i),u=new Na(o,l,0).goto(i);for(;;){if(a.to!=u.to||!s0(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>r)return!0;a.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new Na(e,null,s).goto(n),l=n,a=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:Math.min(c.length,a);r.point(l,u,o.point,c,d,o.pointRank),a=Math.min(o.openEnd(u),c.length)}else u>l&&(r.span(l,u,o.active,a),a=o.openEnd(u));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,n=!1){let i=new Oo;for(let r of e instanceof i0?[e]:n?N4(e):e)i.add(r.from,r.to,r.value);return i.finish()}}je.empty=new je([],[],null,-1);function N4(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(r0(e,i)>0)return t.slice().sort(r0);e=i}return t}je.empty.nextLayer=je.empty;class Oo{finishChunk(e){this.chunks.push(new pv(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Oo)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(je.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=je.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function bb(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(n?n.mapPos(l):l)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(l,l+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class wE{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class _u{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new wE(o,n,i,s));return r.length==1?r[0]:new _u(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)tm(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)tm(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),tm(this.heap,0)}}}function tm(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Na{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=_u.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Qc(this.active,e),Qc(this.activeTo,e),Qc(this.activeRank,e),this.minActive=Sb(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;Zc(this.active,n,i),Zc(this.activeTo,n,r),Zc(this.activeRank,n,s),e&&Zc(e,n,this.cursor.from),this.minActive=Sb(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Qc(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function xb(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,l=i,a=i-e;for(;;){let u=t.to+a-n.to||t.endSide-n.endSide,c=u<0?t.to+a:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&s0(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(l,d,t.point,n.point):d>l&&!s0(t.active,n.active)&&s.compareRange(l,d,t.active,n.active),c>o)break;l=c,u<=0&&t.next(),u>=0&&n.next()}}function s0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Qc(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Zc(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function Sb(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Vf(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Ut(t,r));return i}function D4(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Ut(t,r)}return i===!0?-1:t.length}const o0="",kb=typeof Symbol>"u"?"__"+o0:Symbol.for(o0),l0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Cb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Is{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&l==null)return a.push(o[0]+";");for(let f in l){let p=l[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>o.map(v=>g.replace(/&/,v))).reduce((g,v)=>g.concat(v)),p,a);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(c.length||h)&&a.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Cb[kb]||1;return Cb[kb]=e+1,o0+e.toString(36)}static mount(e,n){(e[l0]||new L4(e)).mount(Array.isArray(n)?n:[n])}}let Eb=new Map;class L4{constructor(e){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=Eb.get(n);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[l0]=r;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Eb.set(n,this)}else{this.styleTag=n.createElement("style");let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[l0]=this}mount(e){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],l=this.modules.indexOf(o);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,o),n)for(let a=0;a<o.rules.length;a++)n.insertRule(o.rules[a],i++)}else{for(;r<l;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var Bs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$u={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},I4=typeof navigator<"u"&&/Mac/.test(navigator.platform),B4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Rt=0;Rt<10;Rt++)Bs[48+Rt]=Bs[96+Rt]=String(Rt);for(var Rt=1;Rt<=24;Rt++)Bs[Rt+111]="F"+Rt;for(var Rt=65;Rt<=90;Rt++)Bs[Rt]=String.fromCharCode(Rt+32),$u[Rt]=String.fromCharCode(Rt);for(var nm in Bs)$u.hasOwnProperty(nm)||($u[nm]=Bs[nm]);function _4(t){var e=I4&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||B4&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?$u:Bs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Ih(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function a0(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function $4(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Gd(t,e){if(!e.anchorNode)return!1;try{return a0(t,e.anchorNode)}catch{return!1}}function Fu(t){return t.nodeType==3?To(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Bh(t,e,n,i){return n?Ab(t,e,n,i,-1)||Ab(t,e,n,i,1):!1}function _h(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Ab(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:_s(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=_h(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?_s(t):0}else return!1}}function _s(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function mv(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function F4(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function z4(t,e,n,i,r,s,o,l){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==a.body;if(f)h=F4(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let v=c.getBoundingClientRect();h={left:v.left,right:v.left+c.clientWidth,top:v.top,bottom:v.top+c.clientHeight}}let p=0,g=0;if(r=="nearest")e.top<h.top?(g=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+g&&(g=e.bottom-h.bottom+g+o)):e.bottom>h.bottom&&(g=e.bottom-h.bottom+o,n<0&&e.top-g<h.top&&(g=-(h.top+g-e.top+o)));else{let v=e.bottom-e.top,m=h.bottom-h.top;g=(r=="center"&&v<=m?e.top+v/2-m/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-m+o)-h.top}if(i=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),n>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,n<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||g)if(f)u.scrollBy(p,g);else{let v=0,m=0;if(g){let y=c.scrollTop;c.scrollTop+=g,m=c.scrollTop-y}if(p){let y=c.scrollLeft;c.scrollLeft+=p,v=c.scrollLeft-y}e={left:e.left-v,top:e.top-m,right:e.right-v,bottom:e.bottom-m},v&&Math.abs(v-p)<1&&(i="nearest"),m&&Math.abs(m-g)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function j4(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class U4{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?_s(n):0),i,Math.min(e.focusOffset,i?_s(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Xo=null;function bE(t){if(t.setActive)return t.setActive();if(Xo)return t.focus(Xo);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Xo==null?{get preventScroll(){return Xo={preventScroll:!0},!0}}:void 0),!Xo){Xo=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Pb;function To(t,e,n=e){let i=Pb||(Pb=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Al(t,e,n){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function V4(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function xE(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function H4(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,_s(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=_s(n))}else{if(n==t)return!0;i=_h(n),n=n.parentNode}}function SE(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class Zt{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Zt(e.parentNode,_h(e),n)}static after(e,n){return new Zt(e.parentNode,_h(e)+1,n)}}const gv=[];class Be{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let l=Be.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=Rb(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=Rb(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=_s(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Be.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,l=-1;for(let a=0,u=i,c=i;a<this.children.length;a++){let d=this.children[a],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=a,s=u),u>n&&d.dom.parentNode==this.dom){o=a,l=c;break}c=h,u=h+d.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=gv){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new kE(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}Be.prototype.breakAfter=0;function Rb(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class kE{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function CE(t,e,n,i,r,s,o,l,a){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,l,a))){if(i<u.length){let f=u[i];f&&r<f.length?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,a)?s[s.length-1]=f:(r&&f.merge(0,r,null,!1,0,a),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,l,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(u[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,l,a)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function EE(t,e,n,i,r,s){let o=t.childCursor(),{i:l,off:a}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,CE(t,u,c,l,a,i,0,r,s)}const hl="";class AE{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(we.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=hl}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let l=Be.get(r),a=Be.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Mb(r))||Mb(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=r.exec(n))&&(s=l.index,o=l[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Be.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(n,i.offset))}}function Mb(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class Ob{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let Dn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},u0=typeof document<"u"?document:{documentElement:{style:{}}};const c0=/Edge\/(\d+)/.exec(Dn.userAgent),PE=/MSIE \d/.test(Dn.userAgent),d0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Dn.userAgent),Hf=!!(PE||d0||c0),Tb=!Hf&&/gecko\/(\d+)/i.test(Dn.userAgent),im=!Hf&&/Chrome\/(\d+)/.exec(Dn.userAgent),Nb="webkitFontSmoothing"in u0.documentElement.style,RE=!Hf&&/Apple Computer/.test(Dn.vendor),Db=RE&&(/Mobile\/\w+/.test(Dn.userAgent)||Dn.maxTouchPoints>2);var te={mac:Db||/Mac/.test(Dn.platform),windows:/Win/.test(Dn.platform),linux:/Linux|X11/.test(Dn.platform),ie:Hf,ie_version:PE?u0.documentMode||6:d0?+d0[1]:c0?+c0[1]:0,gecko:Tb,gecko_version:Tb?+(/Firefox\/(\d+)/.exec(Dn.userAgent)||[0,0])[1]:0,chrome:!!im,chrome_version:im?+im[1]:0,ios:Db,android:/Android\b/.test(Dn.userAgent),webkit:Nb,safari:RE,webkit_version:Nb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:u0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const W4=256;class er extends Be{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof er)||this.length-(n-e)+i.length>W4||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new er(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Zt(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return G4(this.dom,e,n)}}class Hr extends Be{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(xE(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Hr&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(EE(this,e,n,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&n.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=s),i=a,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Hr(this.mark,n,o)}domAtPos(e){return ME(this,e)}coordsAt(e,n){return TE(this,e,n)}}function G4(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?te.chrome||te.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let l=To(t,r,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:n>=0)?0:l.length-1];return te.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),o?mv(a,o<0):a||null}class fo extends Be{constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}static create(e,n,i){return new fo(e,n,i)}split(e){let n=fo.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof fo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof fo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ae.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Ae.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Zt.before(this.dom):Zt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=o?-1:1);return mv(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ql extends Be{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ql&&e.side==this.side}split(){return new ql(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Zt.before(this.dom):Zt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ae.empty}get isHidden(){return!0}}er.prototype.children=fo.prototype.children=ql.prototype.children=gv;function ME(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Zt(n,0)}function OE(t,e,n){let i,{children:r}=t;n>0&&e instanceof Hr&&r.length&&(i=r[r.length-1])instanceof Hr&&i.mark.eq(e.mark)?OE(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function TE(t,e,n){let i=null,r=-1,s=null,o=-1;function l(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?l(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}l(t,e);let a=(n<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?r:o),n):X4(t)}function X4(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Fu(e);return n[n.length-1]||null}function h0(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Lb=Object.create(null);function yv(t,e,n){if(t==e)return!0;t||(t=Lb),e||(e=Lb);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function f0(t,e,n){let i=null;if(e)for(let r in e)n&&r in n||t.removeAttribute(i=r);if(n)for(let r in n)e&&e[r]==n[r]||t.setAttribute(i=r,n[r]);return!!i}function J4(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class zo{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}destroy(e){}}var qe=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(qe||(qe={}));class Ce extends Mo{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new pc(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new $s(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=NE(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new $s(e,i,r,n,e.widget||null,!0)}static line(e){return new mc(e)}static set(e,n=!1){return je.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ce.none=je.empty;class pc extends Ce{constructor(e){let{start:n,end:i}=NE(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof pc&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&yv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}pc.prototype.point=!1;class mc extends Ce{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof mc&&this.spec.class==e.spec.class&&yv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}mc.prototype.mapMode=pn.TrackBefore;mc.prototype.point=!0;class $s extends Ce{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?pn.TrackBefore:pn.TrackAfter:pn.TrackDel}get type(){return this.startSide<this.endSide?qe.WidgetRange:this.startSide<=0?qe.WidgetBefore:qe.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof $s&&Y4(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}$s.prototype.point=!0;function NE(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function Y4(t,e){return t==e||!!(t&&e&&t.compare(e))}function p0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class qt extends Be{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof qt))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),EE(this,e,n,i?i.children:[],s,o),!0}split(e){let n=new qt;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){yv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){OE(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=h0(n,this.attrs||{})),i&&(this.attrs=h0({class:i},this.attrs||{}))}domAtPos(e){return ME(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(xE(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(f0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Be.get(r)instanceof Hr;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Be.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!te.ios||!this.children.some(s=>s instanceof er))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof er)||/[^ -~]/.test(i.text))return null;let r=Fu(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=TE(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}get type(){return qe.Text}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof qt)return s;if(o>n)break}r=o+s.breakAfter}return null}}class xo extends Be{constructor(e,n,i){super(),this.widget=e,this.length=n,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof xo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Zt.before(this.dom):Zt.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new xo(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i}get children(){return gv}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ae.empty}domBoundsAround(){return null}become(e){return e instanceof xo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class hu{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof xo&&e.type==qe.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new qt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ed(new ql(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(ed(new er(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof $s){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(i instanceof $s)if(i.block){let{type:a}=i;a==qe.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new xo(i.widget||new Ib("div"),l,a))}else{let a=fo.create(i.widget||new Ib("span"),l,l?0:i.startSide),u=this.atCursorPos&&!a.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!a.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(ed(new ql(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(ed(a,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new hu(e,n,i,s);return o.openEnd=je.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ed(t,e){for(let n of e)t=new Hr(n,[t],t.length);return t}class Ib extends zo{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const DE=ne.define(),LE=ne.define(),IE=ne.define(),BE=ne.define(),m0=ne.define(),_E=ne.define(),$E=ne.define(),FE=ne.define({combine:t=>t.some(e=>e)}),zE=ne.define({combine:t=>t.some(e=>e)});class $h{constructor(e,n="nearest",i="nearest",r=5,s=5){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new $h(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Bb=me.define({map:(t,e)=>t.map(e)});function Si(t,e,n){let i=t.facet(BE);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Wf=ne.define({combine:t=>t.length?t[0]:!0});let K4=0;const Ka=ne.define();class Bt{constructor(e,n,i,r){this.id=e,this.create=n,this.domEventHandlers=i,this.extension=r(this)}static define(e,n){const{eventHandlers:i,provide:r,decorations:s}=n||{};return new Bt(K4++,e,i,o=>{let l=[Ka.of(o)];return s&&l.push(zu.of(a=>{let u=a.plugin(o);return u?s(u):Ce.none})),r&&l.push(r(o)),l})}static fromClass(e,n){return Bt.define(i=>new e(i),n)}}class rm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(Si(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Si(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){Si(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const jE=ne.define(),vv=ne.define(),zu=ne.define(),wv=ne.define(),UE=ne.define();function VE(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(UE)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const qa=ne.define();class ni{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new ni(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],u=o-l,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(l,d),p=Math.min(c,h);if(f<=p&&new ni(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!a)return i;new ni(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Fh{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=gt.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,l,a)=>r.push(new ni(s,o,l,a))),this.changedRanges=r}static create(e,n,i){return new Fh(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Je=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Je||(Je={}));const g0=Je.LTR,q4=Je.RTL;function HE(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Q4=HE("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Z4=HE("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),y0=Object.create(null),Ti=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);y0[e]=n,y0[n]=-e}function e5(t){return t<=247?Q4[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Z4[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const t5=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Pl{constructor(e,n,i){this.from=e,this.to=n,this.level=i}get dir(){return this.level%2?q4:g0}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=n&&l.to>=n){if(l.level==i)return o;(s<0||(r!=0?r<0?l.from<n:l.to>n:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const We=[];function n5(t,e){let n=t.length,i=e==g0?1:2,r=e==g0?2:1;if(!t||i==1&&!t5.test(t))return WE(n);for(let o=0,l=i,a=i;o<n;o++){let u=e5(t.charCodeAt(o));u==512?u=l:u==8&&a==4&&(u=16),We[o]=u==4?2:u,u&7&&(a=u),l=u}for(let o=0,l=i,a=i;o<n;o++){let u=We[o];if(u==128)o<n-1&&l==We[o+1]&&l&24?u=We[o]=l:We[o]=256;else if(u==64){let c=o+1;for(;c<n&&We[c]==64;)c++;let d=o&&l==8||c<n&&We[c]==8?a==1?1:8:256;for(let h=o;h<c;h++)We[h]=d;o=c-1}else u==8&&a==1&&(We[o]=1);l=u,u&7&&(a=u)}for(let o=0,l=0,a=0,u,c,d;o<n;o++)if(c=y0[u=t.charCodeAt(o)])if(c<0){for(let h=l-3;h>=0;h-=3)if(Ti[h+1]==-c){let f=Ti[h+2],p=f&2?i:f&4?f&1?r:i:0;p&&(We[o]=We[Ti[h]]=p),l=h;break}}else{if(Ti.length==189)break;Ti[l++]=o,Ti[l++]=u,Ti[l++]=a}else if((d=We[o])==2||d==1){let h=d==i;a=h?0:1;for(let f=l-3;f>=0;f-=3){let p=Ti[f+2];if(p&2)break;if(h)Ti[f+2]|=2;else{if(p&4)break;Ti[f+2]|=4}}}for(let o=0;o<n;o++)if(We[o]==256){let l=o+1;for(;l<n&&We[l]==256;)l++;let a=(o?We[o-1]:i)==1,u=(l<n?We[l]:i)==1,c=a==u?a?1:2:i;for(let d=o;d<l;d++)We[d]=c;o=l-1}let s=[];if(i==1)for(let o=0;o<n;){let l=o,a=We[o++]!=1;for(;o<n&&a==(We[o]!=1);)o++;if(a)for(let u=o;u>l;){let c=u,d=We[--u]!=2;for(;u>l&&d==(We[u-1]!=2);)u--;s.push(new Pl(u,c,d?2:1))}else s.push(new Pl(l,o,0))}else for(let o=0;o<n;){let l=o,a=We[o++]==2;for(;o<n&&a==(We[o]==2);)o++;s.push(new Pl(l,o,a?1:2))}return s}function WE(t){return[new Pl(0,t,0)]}let GE="";function i5(t,e,n,i,r){var s;let o=i.head-t.from,l=-1;if(o==0){if(!r||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),l=0)}else if(o==t.length){if(r)return null;let h=e[e.length-1];h.level!=n&&(o=h.side(!0,n),l=e.length-1)}l<0&&(l=Pl.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let a=e[l];o==a.side(r,n)&&(a=e[l+=r?1:-1],o=a.side(!r,n));let u=r==(a.dir==n),c=Ut(t.text,o,u);if(GE=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=a.side(r,n))return V.cursor(c+t.from,u?-1:1,a.level);let d=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return!d&&a.level!=n?V.cursor(r?t.to:t.from,r?-1:1,n):d&&d.level<a.level?V.cursor(d.side(!r,n)+t.from,r?1:-1,d.level):V.cursor(c+t.from,r?-1:1,a.level)}class _b extends Be{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new qt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ni(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:l,toA:a})=>a<this.minWidthFrom||l>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=this.view.inputState.composing<0?null:s5(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:l,to:a}=this.hasComposition;n=new ni(l,a,e.changes.mapPos(l,-1),e.changes.mapPos(a,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(te.ie||te.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),o=a5(r,s,e.changes);return n=ni.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=te.chrome||te.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof xo&&o.widget instanceof $b&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let l=o>=0?r[o]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:d}=l,h,f,p,g;if(i&&i.range.fromB<d&&i.range.toB>c){let b=hu.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),C=hu.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=b.breakAtStart,p=b.openStart,g=C.openEnd;let P=this.compositionView(i);C.breakAtStart?P.breakAfter=1:C.content.length&&P.merge(P.length,P.length,C.content[0],!1,C.openStart,0)&&(P.breakAfter=C.content[0].breakAfter,C.content.shift()),b.content.length&&P.merge(0,0,b.content[b.content.length-1],!0,0,b.openEnd)&&b.content.pop(),h=b.content.concat(P).concat(C.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:g}=hu.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:m}=s.findPos(u,1),{i:y,off:w}=s.findPos(a,-1);CE(this,y,w,v,m,h,f,p,g)}i&&this.fixCompositionDOM(i)}compositionView(e){let n=new er(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Hr(r,[n],n.length);let i=new qt;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let l=Be.get(s);l!=o&&(l&&(l.dom=null),o.setDOM(s))},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&Gd(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.domAtPos(l.anchor),u=l.empty?a:this.domAtPos(l.head);if(te.gecko&&l.empty&&!this.hasComposition&&r5(a)){let d=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(d,a.node.childNodes[a.offset]||null)),a=u=new Zt(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!Bh(a.node,a.offset,c.anchorNode,c.anchorOffset)||!Bh(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{te.android&&te.chrome&&this.dom.contains(c.focusNode)&&u5(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Ih(this.view.root);if(d)if(l.empty){if(te.gecko){let h=o5(a.node,a.offset);if(h&&h!=3){let f=JE(a.node,a.offset,h==1?1:-1);f&&(a=new Zt(f,h==1?0:f.nodeValue.length))}}d.collapse(a.node,a.offset),l.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=l.bidiLevel)}else if(d.extend){d.collapse(a.node,a.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),h.setEnd(u.node,u.offset),h.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Zt(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Zt(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Ih(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=qt.find(this,n.head);if(!o)return;let l=o.posAtStart;if(n.head==l||n.head==l+o.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}nearest(e){for(let n=e;n;){let i=Be.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof qt)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=qe.WidgetBefore&&s.type!=qe.WidgetAfter&&(!r||n==2||this.children[r-1].breakAfter||this.children[r-1].type==qe.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);i=o}}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof qt))return null;for(;r.children.length;){let{i:l,off:a}=r.childPos(i,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}i=a}if(!(r instanceof er))return null;let s=Ut(r.text,i);if(s==i)return null;let o=To(r.dom,i,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Je.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,g=p?Fu(p):[];if(g.length){let v=g[g.length-1],m=a?v.right-f.left:f.right-v.left;m>l&&(l=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Je.RTL:Je.LTR}measureTextSize(){for(let s of this.children)if(s instanceof qt){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Fu(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new kE(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let l=n.lineBlockAt(o).bottom-n.lineBlockAt(i).top;e.push(Ce.replace({widget:new $b(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Ce.set(e)}updateDeco(){let e=this.view.state.facet(zu).map((n,i)=>(this.dynamicDecorationMap[i]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=VE(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom};z4(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Je.LTR)}}function r5(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class $b extends zo{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function XE(t){let e=t.observer.selectionRange,n=e.focusNode&&JE(e.focusNode,e.focusOffset,0);if(!n)return null;let i=Be.get(n),r,s;if(i instanceof er)r=i.posAtStart,s=r+i.length;else e:for(let o=0,l=n;;){for(let u=l.previousSibling,c;u;u=u.previousSibling){if(c=Be.get(u)){r=s=c.posAtEnd+o;break e}let d=new AE([],t.state);if(d.readNode(u),d.text.indexOf(hl)>-1)return null;o+=d.text.length}if(l=l.parentNode,!l)return null;let a=Be.get(l);if(a){r=s=a.posAtStart+o;break}}return{from:r,to:s,node:n}}function s5(t,e){let n=XE(t);if(!n)return null;let{from:i,to:r,node:s}=n,o=e.mapPos(i,-1),l=e.mapPos(r,1),a=s.nodeValue;if(/[\n\r]/.test(a))return null;if(l-o!=a.length){let h=e.mapPos(i,1),f=e.mapPos(r,-1);if(f-h==a.length)o=h,l=f;else if(t.state.doc.sliceString(l-a.length,l)==a)o=l-a.length;else if(t.state.doc.sliceString(o,o+a.length)==a)l=o+a.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,l)!=a||o>u.head||l<u.head)return null;let c=[],d=new ni(i,r,o,l);for(let h=s.parentNode;;h=h.parentNode){let f=Be.get(h);if(f instanceof Hr)c.push({node:h,deco:f.mark});else{if(f instanceof qt||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:d,text:s,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new pc({inclusive:!0,attributes:J4(h),tagName:h.tagName.toLowerCase()})});else return null}}}function JE(t,e,n){if(n<=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=_s(i);else break}if(n>=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r<i.childNodes.length&&n>=0)i=i.childNodes[r],r=0;else break}return null}function o5(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class l5{constructor(){this.changes=[]}compareRange(e,n){p0(e,n,this.changes)}comparePoint(e,n){p0(e,n,this.changes)}}function a5(t,e,n){let i=new l5;return je.compare(t,e,n,i),i.changes}function u5(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function c5(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return V.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,l=s;n<0?o=Ut(r.text,s,!1):l=Ut(r.text,s);let a=i(r.text.slice(o,l));for(;o>0;){let u=Ut(r.text,o,!1);if(i(r.text.slice(u,o))!=a)break;o=u}for(;l<r.length;){let u=Ut(r.text,l);if(i(r.text.slice(l,u))!=a)break;l=u}return V.range(o+r.from,l+r.from)}function d5(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function h5(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function sm(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Fb(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function zb(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function v0(t,e,n){let i,r,s,o,l=!1,a,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let g=Fu(p);for(let v=0;v<g.length;v++){let m=g[v];r&&sm(r,m)&&(m=Fb(zb(m,r.bottom),r.top));let y=d5(e,m),w=h5(n,m);if(y==0&&w==0)return p.nodeType==3?jb(p,e,n):v0(p,e,n);if(!i||o>w||o==w&&s>y){i=p,r=m,s=y,o=w;let b=w?n<m.top?-1:1:y?e<m.left?-1:1:0;l=!b||(b>0?v<g.length-1:v>0)}y==0?n>m.bottom&&(!c||c.bottom<m.bottom)?(a=p,c=m):n<m.top&&(!d||d.top>m.top)&&(u=p,d=m):c&&sm(c,m)?c=zb(c,m.bottom):d&&sm(d,m)&&(d=Fb(d,m.top))}}if(c&&c.bottom>=n?(i=a,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return jb(i,h,n);if(l&&i.contentEditable!="false")return v0(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function jb(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=To(t,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((te.chrome||te.gecko)&&To(t,l).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:l+(f?1:0)};r=l+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function YE(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-l;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let b=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(h),a.type!=qe.Text;)for(;h=i>0?a.bottom+b:a.top-b,!(h>=0&&h<=u);){if(C)return n?null:0;C=!0,i=-i}d=l+h;let f=a.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:Ub(t,o,a,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Ub(t,o,a,c,d);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,v=g.elementFromPoint(c,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(c=Math.max(o.left+1,Math.min(o.right-1,c)),v=g.elementFromPoint(c,d),v&&!t.contentDOM.contains(v)&&(v=null));let m,y=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let b=p.caretPositionFromPoint(c,d);b&&({offsetNode:m,offset:y}=b)}else if(p.caretRangeFromPoint){let b=p.caretRangeFromPoint(c,d);b&&({startContainer:m,startOffset:y}=b,(!t.contentDOM.contains(m)||te.safari&&f5(m,y,c)||te.chrome&&p5(m,y,c))&&(m=void 0))}}if(!m||!t.docView.dom.contains(m)){let b=qt.find(t.docView,f);if(!b)return h>a.top+a.height/2?a.to:a.from;({node:m,offset:y}=v0(b.dom,c,d))}let w=t.docView.nearest(m);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let b=w.dom.getBoundingClientRect();return e.y<b.top||e.y<=b.bottom&&e.x<=(b.left+b.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(m,y)+w.posAtStart}function Ub(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((r-n.top-(t.defaultLineHeight-l)*.5)/l);s+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+D4(o,s,t.state.tabSize)}function f5(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return To(t,i-1,i).getBoundingClientRect().left>n}function p5(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():To(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function w0(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==qe.Text))return i}return n}function m5(t,e,n,i){let r=w0(t,e.head),s=!i||r.type!=qe.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(r.from),a=t.posAtCoords({x:n==(l==Je.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return V.cursor(a,n?-1:1)}return V.cursor(n?r.to:r.from,n?-1:1)}function Vb(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let l=e,a=null;;){let u=i5(r,s,o,l,n),c=GE;if(!u){if(r.number==(n?t.state.doc.lines:1))return l;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=V.cursor(n?r.from:r.to)}if(a){if(!a(c))return l}else{if(!i)return u;a=i(c)}l=u}}function g5(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Dt.Space&&(r=o),r==o}}function y5(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return V.cursor(r,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r),c=t.documentTop;if(u)o==null&&(o=u.left-a.left),l=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(r-f.from))),l=(s<0?f.top:f.bottom)+c}let d=a.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=l+(h+f)*s,g=YE(t,{x:d,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?g<r:g>r))return V.cursor(g,e.assoc,void 0,o)}}function Xd(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=i||n||(e-s<o-e?-1:1);e=a<0?s:o,i=a}});if(!i)return e}}function om(t,e,n){let i=Xd(t.state.facet(wv).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:V.cursor(i,i<n.from?1:-1)}class v5{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(i,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(r.type,e,r)?r.preventDefault():i(e,r))};for(let i in ft){let r=ft[i];e.contentDOM.addEventListener(i,s=>{Hb(e,s)&&n(r,s)},b0[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{if(i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(ft.mousedown,i),!i.defaultPrevented&&i.button==2)){let r=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=r,200)}}),e.scrollDOM.addEventListener("drop",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(ft.drop,i)}),te.chrome&&te.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,te.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var i;let r;this.customHandlers=[];for(let s of n)if(r=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{Hb(e,l)&&this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,n,i){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,i,n)||i.defaultPrevented)return!0}catch(o){Si(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,n,e)}catch(s){Si(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&qE.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),te.android&&te.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let i;return te.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((i=KE.find(r=>r.keyCode==n.keyCode))&&!n.ctrlKey||w5.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=i||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,Al(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:te.safari&&!te.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const KE=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],w5="dthko",qE=[16,17,18,20,91,92,224,225],td=6;function nd(t){return Math.max(0,t)*.7+8}function b5(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class x5{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=j4(e.contentDOM),this.atoms=e.state.facet(wv).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(we.allowMultipleSelections)&&S5(e,n),this.dragging=C5(e,n)&&tA(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&b5(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=VE(this.view);e.clientX-o.left<=s.left+td?i=-nd(s.left-e.clientX):e.clientX+o.right>=s.right-td&&(i=nd(e.clientX-s.right)),e.clientY-o.top<=s.top+td?r=-nd(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-td&&(r=nd(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=Xd(this.atoms,r.from,0);o!=r.from&&(s=V.cursor(o,-1))}else{let o=Xd(this.atoms,r.from,-1),l=Xd(this.atoms,r.to,1);(o!=r.from||l!=r.to)&&(s=V.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?V.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection)||i.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function S5(t,e){let n=t.state.facet(DE);return n.length?n[0](e):te.mac?e.metaKey:e.ctrlKey}function k5(t,e){let n=t.state.facet(LE);return n.length?n[0](e):te.mac?!e.altKey:!e.ctrlKey}function C5(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Ih(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Hb(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Be.get(n))&&i.ignoreEvent(e))return!1;return!0}const ft=Object.create(null),b0=Object.create(null),QE=te.ie&&te.ie_version<15||te.ios&&te.webkit_version<604;function E5(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),ZE(t,n.value)},50)}function ZE(t,e){let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(x0!=null&&n.selection.ranges.every(a=>a.empty)&&x0==s.toString()){let a=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:V.cursor(u.from+d.length)}})}else o?i=n.changeByRange(a=>{let u=s.line(r++);return{changes:{from:a.from,to:a.to,insert:u.text},range:V.cursor(a.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}ft.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};ft.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};ft.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};b0.touchstart=b0.touchmove={passive:!0};ft.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let i of t.state.facet(IE))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=R5(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new x5(t,e,n,i)),i&&t.observer.ignore(()=>bE(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function Wb(t,e,n,i){if(i==1)return V.cursor(e,n);if(i==2)return c5(t.state,e,n);{let r=qt.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<t.state.doc.length&&l==s.to&&l++,V.range(o,l)}}let eA=(t,e)=>t>=e.top&&t<=e.bottom,Gb=(t,e,n)=>eA(e,n)&&t>=n.left&&t<=n.right;function A5(t,e,n,i){let r=qt.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&Gb(n,i,o))return-1;let l=r.coordsAt(s,1);return l&&Gb(n,i,l)?1:o&&eA(i,o)?-1:1}function Xb(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:A5(t,n,e.clientX,e.clientY)}}const P5=te.ie&&te.ie_version<=11;let Jb=null,Yb=0,Kb=0;function tA(t){if(!P5)return t.detail;let e=Jb,n=Kb;return Jb=t,Kb=Date.now(),Yb=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Yb+1)%3:1}function R5(t,e){let n=Xb(t,e),i=tA(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,l){let a=Xb(t,s),u,c=Wb(t,a.pos,a.bias,i);if(n.pos!=a.pos&&!o){let d=Wb(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?V.range(h,f):V.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):l&&i==1&&r.ranges.length>1&&(u=M5(r,a.pos))?u:l?r.addRange(c):V.create([c])}}}function M5(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return V.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}ft.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:i}=t.inputState;i&&(i.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function qb(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=i&&s&&s.dragging&&k5(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,l={from:r,insert:n},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}ft.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let i=Array(n.length),r=0,s=()=>{++r==n.length&&qb(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(n[o])}}else qb(t,e,e.dataTransfer.getData("Text"),!0)};ft.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=QE?null:e.clipboardData;n?(ZE(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):E5(t)};function O5(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function T5(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}let x0=null;ft.copy=ft.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=T5(t.state);if(!n&&!r)return;x0=r?n:null;let s=QE?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):O5(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const nA=Xr.define();function iA(t,e){let n=[];for(let i of t.facet($E)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:nA.of(!0)}):null}function rA(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=iA(t.state,e);n?t.dispatch(n):t.update([])}},10)}ft.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),rA(t)};ft.blur=t=>{t.observer.clearSelectionRange(),rA(t)};ft.compositionstart=ft.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};ft.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,te.chrome&&te.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};ft.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ft.beforeinput=(t,e)=>{var n;let i;if(te.chrome&&te.android&&(i=KE.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const Qb=["pre-wrap","normal","pre-line","break-spaces"];class N5{constructor(e){this.lineWrapping=e,this.doc=Ae.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Qb.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let l=Qb.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class D5{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Wi{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?qe.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof $s?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Wi(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var ze=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ze||(ze={}));const Jd=.001;class nn{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>Jd&&(e.heightChanged=!0),this.height=n)}replace(e,n,i){return nn.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:d}=r[l],h=s.lineAt(a,ze.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,ze.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;l>0&&h.from<=r[l-1].toA;)a=r[l-1].fromA,c=r[l-1].fromB,l--,a<h.from&&(h=s.lineAt(a,ze.ByPosNoHeight,i,0,0));c+=h.from-a,a=h.from;let p=bv.build(i.setDoc(o),e,c,d);s=s.replace(a,u,p)}return s.updateHeight(i,0)}static empty(){return new Tn(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(s>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[n++];l&&(r+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new L5(nn.of(e.slice(0,n)),o,nn.of(e.slice(i)))}}nn.prototype.size=1;class sA extends nn{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Wi(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Tn extends sA{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Wi(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Tn||r instanceof At&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof At?r=new Tn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):nn.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class At extends nn{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:l}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),c=n.doc.lineAt(u),d=l+c.length*a,h=Math.max(i,e-d/2);return new Wi(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:c,length:d}=n.doc.line(s+u);return new Wi(c,d,i+l*u,l,0)}}lineAt(e,n,i,r,s){if(n==ze.ByHeight)return this.blockAt(e,i,r,s);if(n==ze.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new Wi(f,p-f,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=l+u.length*a,d=u.number-o,h=r+l*d+a*(u.from-s-d);return new Wi(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-l;d+=a*p+u*(e-s-p)}let f=a+u*h.length;o(new Wi(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof At?i[i.length-1]=new At(s.length+r):i.push(null,new At(r-1))}if(e>0){let s=i[0];s instanceof At?i[0]=new At(e+s.length):i.unshift(new At(e-1),null)}return nn.of(i)}decomposeLeft(e,n){n.push(new At(e-1),null)}decomposeRight(e,n){n.push(null,new At(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],l=Math.max(n,r.from),a=-1;for(r.from>n&&o.push(new At(r.from-n-1).updateHeight(e,n));l<=s&&r.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let d=r.heights[r.index++];a==-1?a=d:Math.abs(d-a)>=Jd&&(a=-2);let h=new Tn(c,d);h.outdated=!1,o.push(h),l+=c+1}l<=s&&o.push(null,new At(s-l).updateHeight(e,l));let u=nn.of(o);return(a<0||Math.abs(u.height-this.height)>=Jd||Math.abs(a-this.heightMetrics(e,n).perLine)>=Jd)&&(e.heightChanged=!0),u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class L5 extends nn{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,a=n==ze.ByHeight?e<o:e<l,u=a?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=n==ze.ByPosNoHeight?ze.ByPosNoHeight:ze.ByPos;return a?u.join(this.right.lineAt(l,c,i,o,l)):this.left.lineAt(l,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let l=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,i,r,s,o),n>=a&&this.right.forEachLine(e,n,i,l,a,o);else{let u=this.lineAt(a,ze.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,l,a,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&Zb(s,o-1),n<this.length){let l=s.length;this.decomposeRight(n,s),Zb(s,l)}return nn.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?nn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,l=n+s.length+this.break,a=null;return r&&r.from<=n+s.length&&r.more?a=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,i,r):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Zb(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof At&&(i=t[e+1])instanceof At&&t.splice(e-1,3,new At(n.length+1+i.length))}const I5=5;class bv{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Tn?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Tn(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new sA(o,r,i)):(o||s||r>=I5)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Tn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new At(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Tn)return e;let n=new Tn(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let i=(n=e.deco)===null||n===void 0?void 0:n.type;i==qe.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i!=qe.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Tn)&&!this.isCovered?this.nodes.push(new Tn(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Tn&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new bv(i,e);return je.spans(n,i,r,s,0),s.finish(i)}}function B5(t,e,n){let i=new _5;return je.compare(t,e,n,i,0),i.changes}class _5{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&p0(e,n,this.changes,5)}}function $5(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=u==t.parentNode?h.bottom:Math.min(a,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function F5(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class lm{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return Ce.replace({widget:new z5(this.size,e)}).range(this.from,this.to)}}class z5 extends zo{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ex{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=tx,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Je.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(vv).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new N5(n),this.stateDeco=e.facet(zu).filter(i=>typeof i!="function"),this.heightMap=nn.empty().applyChanges(this.stateDeco,Ae.empty,this.heightOracle.setDoc(e.doc),[new ni(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ce.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new id(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?tx:new V5(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Qa(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(zu).filter(c=>typeof c!="function");let r=e.changedRanges,s=ni.extendWithRanges(r,B5(i,this.stateDeco,e?e.changes:gt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(zE)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Je.RTL:Je.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=n.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0,d=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=SE(e.scrollDOM);let f=(this.printing?F5:$5)(n,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let m=l.width;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),a){let w=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(w)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:b,charWidth:C,textHeight:P}=e.docView.measureTextSize();o=b>0&&r.refresh(s,b,C,P,m/C,w),o&&(e.docView.minWidth=0,u|=8)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),r.heightChanged=!1;for(let b of this.viewports){let C=b.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(b);this.heightMap=(o?nn.empty().applyChanges(this.stateDeco,Ae.empty,this.heightOracle,[new ni(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new D5(b.from,C))}r.heightChanged&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new id(r.lineAt(o-i*1e3,ze.ByHeight,s,0,0).from,r.lineAt(l+(1-i)*1e3,ze.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,ze.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?h=d.top:h=d.bottom-c,a=new id(r.lineAt(h-1e3/2,ze.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,ze.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new id(this.heightMap.lineAt(i,ze.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,ze.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,ze.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,ze.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new lm(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Je.LTR&&!i)return[];let l=[],a=(u,c,d,h)=>{if(c-u<s)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let v of p)if(v>u&&v<c){a(u,v-10,d,h),a(v+10,c,d,h);return}let g=U5(e,v=>v.from>=d.from&&v.to<=d.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-c)<s&&!p.some(m=>v.from<m&&v.to>m));if(!g){if(c<d.to&&n&&i&&n.visibleRanges.some(v=>v.from<=c&&v.to>=c)){let v=n.moveToLineBoundary(V.cursor(c),!1,!0).head;v>u&&(c=v)}g=new lm(u,c,this.gapSize(d,u,c,h))}l.push(g)};for(let u of this.viewportLines){if(u.length<o)continue;let c=j5(u.from,u.to,this.stateDeco);if(c.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,v;if(d!=null){let m=sd(c,d),y=((this.visibleBottom-this.visibleTop)/2+p)/u.height;g=m-y,v=m+y}else g=(this.visibleTop-u.top-p)/u.height,v=(this.visibleBottom-u.top+p)/u.height;h=rd(c,g),f=rd(c,v)}else{let p=c.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,v,m;if(d!=null){let y=sd(c,d),w=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/p;v=y-w,m=y+w}else v=(this.pixelViewport.left-g)/p,m=(this.pixelViewport.right+g)/p;h=rd(c,v),f=rd(c,m)}h>u.from&&a(u.from,h,u,c),f<u.to&&a(f,u.to,u,c)}return l}gapSize(e,n,i,r){let s=sd(r,i)-sd(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){lm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ce.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];je.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Qa(this.heightMap.lineAt(e,ze.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Qa(this.heightMap.lineAt(this.scaler.fromDOM(e),ze.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Qa(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class id{constructor(e,n){this.from=e,this.to=n}}function j5(t,e,n){let i=[],r=t,s=0;return je.spans(n,t,e,{span(){},point(o,l){o>r&&(i.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function rd({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(i<=l)return s+i;i-=l}}function sd(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function U5(t,e){for(let n of t)if(e(n))return n}const tx={toDOM(t){return t},fromDOM(t){return t},scale:1};class V5{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let u=n.lineAt(l,ze.ByPos,e,0,0).top,c=n.lineAt(a,ze.ByPos,e,0,0).bottom;return r+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function Qa(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Wi(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Qa(r,e)):t._content)}const od=ne.define({combine:t=>t.join(" ")}),S0=ne.define({combine:t=>t.indexOf(!0)>-1}),k0=Is.newName(),oA=Is.newName(),lA=Is.newName(),aA={"&light":"."+oA,"&dark":"."+lA};function C0(t,e,n){return new Is(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const H5=C0("."+k0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},aA);class W5{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let l=s||o?[]:X5(e),a=new AE(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=J5(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!a0(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!a0(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=V.single(u,a)}}}function uA(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=r.from,u=null;(s===8||te.android&&e.text.length<l-o)&&(a=r.to,u="end");let c=G5(t.state.doc.sliceString(o,l,hl),e.text,a-o,u);c&&(te.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==hl+hl&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:Ae.of(e.text.slice(c.from,c.toB).split(hl))})}else i&&(!t.hasFocus&&t.state.facet(Wf)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(te.mac||te.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=V.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ae.of([" "])}):te.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=V.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ae.of([" "])}),n){let o=t.state;if(te.ios&&t.inputState.flushIOSKey(t)||te.android&&(n.from==r.from&&n.to==r.to&&n.insert.length==1&&n.insert.lines==2&&Al(t.contentDOM,"Enter",13)||(n.from==r.from-1&&n.to==r.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&Al(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&n.insert.length==0&&Al(t.contentDOM,"Delete",46)))return!0;let l=n.insert.toString();if(t.state.facet(_E).some(c=>c(t,n.from,n.to,l)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let a;if(n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=r.from<n.from?o.sliceDoc(r.from,n.from):"",d=r.to>n.to?o.sliceDoc(n.to,r.to):"";a=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let c=o.changes(n),d=i&&i.main.to<=c.newLength?i.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){let h=t.state.sliceDoc(n.from,n.to),f=XE(t)||t.state.doc.lineAt(r.head),p=r.to-n.to,g=r.to-r.from;a=o.changeByRange(v=>{if(v.from==r.from&&v.to==r.to)return{changes:c,range:d||v.map(c)};let m=v.to-p,y=m-h.length;if(v.to-v.from!=g||t.state.sliceDoc(y,m)!=h||f&&v.to>=f.from&&v.from<=f.to)return{range:v};let w=o.changes({from:y,to:m,insert:n.insert}),b=v.to-r.to;return{changes:w,range:d?V.range(Math.max(0,d.anchor+b),Math.max(0,d.head+b)):v.map(w)}})}else a={changes:c,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(a,{scrollIntoView:!0,userEvent:u}),!0}else if(i&&!i.main.eq(r)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function G5(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));n-=o+a-s}if(o<s&&t.length<e.length){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function X5(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Ob(n,i)),(r!=n||s!=i)&&e.push(new Ob(r,s))),e}function J5(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?V.single(n+e,i+e):null}const Y5={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},am=te.ie&&te.ie_version<=11;class K5{constructor(e){this.view=e,this.active=!1,this.selectionRange=new U4,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(te.ie&&te.ie_version<=11||te.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),am&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Wf)?i.root.activeElement!=this.dom:!Gd(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(te.ie&&te.ie_version<=11||te.android&&te.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Bh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=te.safari&&e.root.nodeType==11&&$4(this.dom.ownerDocument)==this.dom&&q5(this.view)||Ih(e.root);if(!n||this.selectionRange.eq(n))return!1;let i=Gd(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&H4(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Y5),am&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),am&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Al(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Gd(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new W5(this.view,e,n,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let i=this.view.state,r=uA(this.view,n);return this.view.state==i&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=nx(n,e.previousSibling||e.target.previousSibling,-1),r=nx(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function nx(t,e,n){for(;e;){let i=Be.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function q5(t){let e=null;function n(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return Bh(l.node,l.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}class le{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||V4(e.parent)||document,this.viewState=new ex(e.state||we.create(e)),this.plugins=this.state.facet(Ka).map(n=>new rm(n));for(let n of this.plugins)n.update(this);this.observer=new K5(this),this.inputState=new v5(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new _b(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof wt?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(nA))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=iA(s,o),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(we.phrases)!=this.state.facet(we.phrases))return this.setState(s);r=Fh.create(this,s,e),r.flags|=l;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new $h(f.empty?f:V.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Bb)&&(d=f.value)}this.viewState.update(r,d),this.bidiCache=zh.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(qa)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(od)!=r.state.facet(od)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let h of this.state.facet(m0))h(r);(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!uA(this,c)&&u.force&&Al(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new ex(e),this.plugins=e.facet(Ka).map(i=>new rm(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new _b(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Ka),i=e.state.facet(Ka);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new rm(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,{scrollTop:r}=i,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;r!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(SE(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return Si(this.state,p),ix}}),d=Fh.create(this,this.state,[]),h=!1;d.flags|=a,n?n.flags|=a:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let f=0;f<u.length;f++)if(c[f]!=ix)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){Si(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=i.scrollTop=r+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(m0))l(n)}get themeClasses(){return k0+" "+(this.state.facet(S0)?lA:oA)+" "+this.state.facet(od)}updateAttrs(){let e=rx(this,jE,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Wf)?"true":"false",class:"cm-content",style:`${te.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),rx(this,vv,n);let i=this.observer.ignore(()=>{let r=f0(this.contentDOM,this.contentAttrs,n),s=f0(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(le.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(qa),Is.mount(this.root,this.styleModules.concat(H5).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return om(this,e,Vb(this,e,n,i))}moveByGroup(e,n){return om(this,e,Vb(this,e,n,i=>g5(this,e.head,i)))}moveToLineBoundary(e,n,i=!0){return m5(this,e,n,i)}moveVertically(e,n,i){return om(this,e,y5(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),YE(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Pl.find(s,e-r.from,-1,n)];return mv(i,o.dir==Je.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(FE)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Q5)return WE(e.length);let n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n)return r.order;let i=n5(e.text,n);return this.bidiCache.push(new zh(e.from,e.to,n,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||te.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{bE(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Bb.of(new $h(typeof e=="number"?V.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return Bt.define(()=>({}),{eventHandlers:e})}static theme(e,n){let i=Is.newName(),r=[od.of(i),qa.of(C0(`.${i}`,e))];return n&&n.dark&&r.push(S0.of(!0)),r}static baseTheme(e){return hc.lowest(qa.of(C0("."+k0,e,aA)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Be.get(i)||Be.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}le.styleModule=qa;le.inputHandler=_E;le.focusChangeEffect=$E;le.perLineTextDirection=FE;le.exceptionSink=BE;le.updateListener=m0;le.editable=Wf;le.mouseSelectionStyle=IE;le.dragMovesSelection=LE;le.clickAddsSelectionRange=DE;le.decorations=zu;le.atomicRanges=wv;le.scrollMargins=UE;le.darkTheme=S0;le.contentAttributes=vv;le.editorAttributes=jE;le.lineWrapping=le.contentAttributes.of({class:"cm-lineWrapping"});le.announce=me.define();const Q5=4096,ix={};class zh{constructor(e,n,i,r){this.from=e,this.to=n,this.dir=i,this.order=r}static update(e,n){if(n.empty)return e;let i=[],r=e.length?e[e.length-1].dir:Je.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new zh(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return i}}function rx(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&h0(o,n)}return n}const Z5=te.mac?"mac":te.windows?"win":te.linux?"linux":"key";function e3(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,l;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function ld(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const t3=hc.default(le.domEventHandlers({keydown(t,e){return hA(dA(e.state),t,e,"editor")}})),cA=ne.define({enables:t3}),sx=new WeakMap;function dA(t){let e=t.facet(cA),n=sx.get(e);return n||sx.set(e,n=r3(e.reduce((i,r)=>i.concat(r),[]))),n}function n3(t,e,n){return hA(dA(t.state),e,t,n)}let cs=null;const i3=4e3;function r3(t,e=Z5){let n=Object.create(null),i=Object.create(null),r=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=l.split(/ (?!$)/).map(m=>e3(m,e));for(let m=1;m<p.length;m++){let y=p.slice(0,m).join(" ");r(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let b=cs={view:w,prefix:y,scope:o};return setTimeout(()=>{cs==b&&(cs=null)},i3),!0}]})}let g=p.join(" ");r(g,!1);let v=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});a&&v.run.push(a),u&&(v.preventDefault=!0),c&&(v.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of l){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in c)c[d].run.push(o.any)}let a=o[e]||o.key;if(a)for(let u of l)s(u,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return n}function hA(t,e,n,i){let r=_4(e),s=Kt(r,0),o=yi(s)==r.length&&r!=" ",l="",a=!1,u=!1,c=!1;cs&&cs.view==n&&cs.scope==i&&(l=cs.prefix+" ",qE.indexOf(e.keyCode)<0&&(u=!0,cs=null));let d=new Set,h=v=>{if(v){for(let m of v.run)if(!d.has(m)&&(d.add(m),m(n,e)))return v.stopPropagation&&(c=!0),!0;v.preventDefault&&(v.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,g;return f&&(h(f[l+ld(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(te.windows&&e.ctrlKey&&e.altKey)&&(p=Bs[e.keyCode])&&p!=r?(h(f[l+ld(p,e,!0)])||e.shiftKey&&(g=$u[e.keyCode])!=r&&g!=p&&h(f[l+ld(g,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(f[l+ld(r,e,!0)])&&(a=!0),!a&&h(f._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),a}class gc{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=fA(e);return[new gc(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return s3(e,n,i)}}function fA(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Je.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function ox(t,e,n){let i=V.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:qe.Text}}function s3(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Je.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=fA(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=l.right-(c?parseInt(c.paddingRight):0),f=w0(t,i),p=w0(t,r),g=f.type==qe.Text?f:null,v=p.type==qe.Text?p:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=ox(t,i,g)),v&&(t.lineWrapping||p.widgetLineBreaks)&&(v=ox(t,r,v)),g&&v&&g.from==v.from)return y(w(n.from,n.to,g));{let C=g?w(n.from,null,g):b(f,!1),P=v?w(null,n.to,v):b(p,!0),R=[];return(g||f).to<(v||p).from-(g&&v?1:0)||f.widgetLineBreaks>1&&C.bottom+t.defaultLineHeight/2<P.top?R.push(m(d,C.bottom,h,P.top)):C.bottom<P.top&&t.elementAtHeight((C.bottom+P.top)/2).type==qe.Text&&(C.bottom=P.top=(C.bottom+P.top)/2),y(C).concat(R).concat(y(P))}function m(C,P,R,I){return new gc(e,C-a.left,P-a.top-.01,R-C,I-P+.01)}function y({top:C,bottom:P,horizontal:R}){let I=[];for(let E=0;E<R.length;E+=2)I.push(m(R[E],C,R[E+1],P));return I}function w(C,P,R){let I=1e9,E=-1e9,A=[];function M(N,B,$,z,L){let _=t.coordsAtPos(N,N==R.to?-2:2),j=t.coordsAtPos($,$==R.from?2:-2);!_||!j||(I=Math.min(_.top,j.top,I),E=Math.max(_.bottom,j.bottom,E),L==Je.LTR?A.push(s&&B?d:_.left,s&&z?h:j.right):A.push(!s&&z?d:j.left,!s&&B?h:_.right))}let O=C??R.from,D=P??R.to;for(let N of t.visibleRanges)if(N.to>O&&N.from<D)for(let B=Math.max(N.from,O),$=Math.min(N.to,D);;){let z=t.state.doc.lineAt(B);for(let L of t.bidiSpans(z)){let _=L.from+z.from,j=L.to+z.from;if(_>=$)break;j>B&&M(Math.max(_,B),C==null&&_<=O,Math.min(j,$),P==null&&j>=D,L.dir)}if(B=z.to+1,B>=$)break}return A.length==0&&M(O,C==null,D,P==null,t.textDirection),{top:I,bottom:E,horizontal:A}}function b(C,P){let R=l.top+(P?C.top:C.bottom);return{top:R,bottom:R,horizontal:[]}}}function o3(t,e){return t.constructor==e.constructor&&t.eq(e)}class l3{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Yd)!=e.state.facet(Yd)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(Yd);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!o3(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Yd=ne.define();function pA(t){return[Bt.define(e=>new l3(e,t)),Yd.of(t)]}const mA=!te.ios,ju=ne.define({combine(t){return Ws(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function a3(t={}){return[ju.of(t),u3,c3,d3,zE.of(!0)]}function gA(t){return t.startState.facet(ju)!=t.state.facet(ju)}const u3=pA({above:!0,markers(t){let{state:e}=t,n=e.facet(ju),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||mA:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:V.cursor(r.head,r.head>r.anchor?-1:1);for(let a of gc.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=gA(t);return n&&lx(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){lx(e.state,t)},class:"cm-cursorLayer"});function lx(t,e){e.style.animationDuration=t.facet(ju).cursorBlinkRate+"ms"}const c3=pA({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:gc.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||gA(t)},class:"cm-selectionLayer"}),yA={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};mA&&(yA[".cm-line"].caretColor="transparent !important");const d3=hc.highest(le.theme(yA)),vA=me.define({map(t,e){return t==null?null:e.mapPos(t)}}),Za=Ht.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(vA)?i.value:n,t)}}),h3=Bt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Za);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Za)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Za),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Za)!=t&&this.view.dispatch({effects:vA.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function f3(){return[Za,h3]}function ax(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}function p3(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class m3{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(l,a,u,c)=>r(c,u,u+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,u,c)=>{let d=i(l,a,u);d&&c(u,u+l[0].length,d)};else if(i)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Oo,i=n.add.bind(n);for(let{from:r,to:s}of p3(e,this.maxLength))ax(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),r=Math.max(a,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,r);if(l>o){let a=e.state.doc.lineAt(o),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(s.from,a.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){d=l;break}}let h=[],f,p=(g,v,m)=>h.push(m.range(g,v));if(a==u)for(this.regexp.lastIndex=c-a.from;(f=this.regexp.exec(a.text))&&f.index<d-a.from;)this.addMatch(f,e,f.index+a.from,p);else ax(e.state.doc,this.regexp,c,d,(g,v)=>this.addMatch(v,e,g,p));n=n.update({filterFrom:c,filterTo:d,filter:(g,v)=>g<c||v>d,add:h})}}return n}}const E0=/x/.unicode!=null?"gu":"g",g3=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,E0),y3={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let um=null;function v3(){var t;if(um==null&&typeof document<"u"&&document.body){let e=document.body.style;um=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return um||!1}const Kd=ne.define({combine(t){let e=Ws(t,{render:null,specialChars:g3,addSpecialChars:null});return(e.replaceTabs=!v3())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,E0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,E0)),e}});function w3(t={}){return[Kd.of(t),b3()]}let ux=null;function b3(){return ux||(ux=Bt.fromClass(class{constructor(t){this.view=t,this.decorations=Ce.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Kd)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new m3({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Kt(e[0],0);if(s==9){let o=r.lineAt(i),l=n.state.tabSize,a=Vf(o.text,l,i-o.from);return Ce.replace({widget:new C3((l-a%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Ce.replace({widget:new k3(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Kd);t.startState.facet(Kd)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const x3="";function S3(t){return t>=32?x3:t==10?"":String.fromCharCode(9216+t)}class k3 extends zo{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=S3(this.code),i=e.state.phrase("Control character")+" "+(y3[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class C3 extends zo{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function E3(){return P3}const A3=Ce.line({class:"cm-activeLine"}),P3=Bt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(A3.range(r.from)),e=r.from)}return Ce.set(n)}},{decorations:t=>t.decorations}),ad="-10000px";class wA{constructor(e,n,i){this.facet=n,this.createTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){var n;let i=e.state.facet(this.facet),r=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let l=r[o],a=-1;if(l){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==l.create&&(a=u)}if(a<0)s[o]=this.createTooltipView(l);else{let u=s[o]=this.tooltipViews[a];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function R3(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const cm=ne.define({combine:t=>{var e,n,i;return{position:te.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||R3}}}),cx=new WeakMap,bA=Bt.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(cm);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new wA(t,xv,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(cm);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=ad,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let i=this.manager.tooltipViews[n];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(cm).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:i}=t,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],l=this.manager.tooltipViews[s],{dom:a}=l,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){a.style.top=ad;continue}let d=o.arrow?l.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,f=c.right-c.left,p=(e=cx.get(l))!==null&&e!==void 0?e:c.bottom-c.top,g=l.offset||O3,v=this.view.textDirection==Je.LTR,m=c.width>i.right-i.left?v?i.left:i.right-c.width:v?Math.min(u.left-(d?14:0)+g.x,i.right-f):Math.max(i.left,u.left-f+(d?14:0)-g.x),y=!!o.above;!o.strictSide&&(y?u.top-(c.bottom-c.top)-g.y<i.top:u.bottom+(c.bottom-c.top)+g.y>i.bottom)&&y==i.bottom-u.bottom>u.top-i.top&&(y=!y);let w=(y?u.top-i.top:i.bottom-u.bottom)-h;if(w<p&&l.resize!==!1){if(w<this.view.defaultLineHeight){a.style.top=ad;continue}cx.set(l,p),a.style.height=(p=w)+"px"}else a.style.height&&(a.style.height="");let b=y?u.top-p-h-g.y:u.bottom+h+g.y,C=m+f;if(l.overlap!==!0)for(let P of r)P.left<C&&P.right>m&&P.top<b+p&&P.bottom>b&&(b=y?P.top-p-2-h:P.bottom+h+2);this.position=="absolute"?(a.style.top=b-t.parent.top+"px",a.style.left=m-t.parent.left+"px"):(a.style.top=b+"px",a.style.left=m+"px"),d&&(d.style.left=`${u.left+(v?g.x:-g.x)-(m+14-7)}px`),l.overlap!==!0&&r.push({left:m,top:b,right:C,bottom:b+p}),a.classList.toggle("cm-tooltip-above",y),a.classList.toggle("cm-tooltip-below",!y),l.positioned&&l.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=ad}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),M3=le.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),O3={x:0,y:0},xv=ne.define({enables:[bA,M3]}),jh=ne.define();class Sv{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new wA(e,jh,n=>this.createHostedView(n))}static create(e){return new Sv(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const T3=xv.compute([jh],t=>{let e=t.facet(jh).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:Sv.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class N3{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let i=this.view.coordsAtPos(n);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(l=>l.from<=n&&l.to>=n),s=r&&r.dir==Je.RTL?-1:1,o=this.source(this.view,n,e.x<i.left?-s:s);if(o!=null&&o.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&this.view.dispatch({effects:this.setHover.of(a)}))},a=>Si(this.view.state,a,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!dx(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=(n=i==null?void 0:i.end)!==null&&n!==void 0?n:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!D3(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!dx(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function dx(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function D3(t,e,n,i,r,s){let o=document.createRange(),l=t.domAtPos(e),a=t.domAtPos(n);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let d=u[c];if(Math.max(d.top-r,r-d.bottom,d.left-i,i-d.right)<=s)return!0}return!1}function L3(t,e={}){let n=me.define(),i=Ht.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,pn.TrackDel);if(o==null)return null;let l=Object.assign(Object.create(null),r);l.pos=o,r.end!=null&&(l.end=s.changes.mapPos(r.end)),r=l}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(B3)&&(r=null);return r},provide:r=>jh.from(r)});return[i,Bt.define(r=>new N3(r,t,i,n,e.hoverTime||300)),T3]}function I3(t,e){let n=t.plugin(bA);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const B3=me.define(),hx=ne.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Uu(t,e){let n=t.plugin(xA),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const xA=Bt.fromClass(class{constructor(t){this.input=t.state.facet(Ql),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(hx);this.top=new ud(t,!0,e.topContainer),this.bottom=new ud(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(hx);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ud(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ud(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Ql);if(n!=this.input){let i=n.filter(a=>a),r=[],s=[],o=[],l=[];for(let a of i){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),l.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>le.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class ud{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=fx(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=fx(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function fx(t){let e=t.nextSibling;return t.remove(),e}const Ql=ne.define({enables:xA});class Fs extends Mo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Fs.prototype.elementClass="";Fs.prototype.toDOM=void 0;Fs.prototype.mapMode=pn.TrackBefore;Fs.prototype.startSide=Fs.prototype.endSide=-1;Fs.prototype.point=!0;const qd=ne.define(),Qd=ne.define(),A0=ne.define({combine:t=>t.some(e=>e)});function _3(t){let e=[$3];return t&&t.fixed===!1&&e.push(A0.of(!0)),e}const $3=Bt.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Qd).map(e=>new mx(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(A0),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(A0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=je.iter(this.view.state.facet(qd),this.view.viewport.from),i=[],r=this.gutters.map(s=>new F3(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==qe.Text&&o){P0(n,i,l.from);for(let a of r)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of r)a.widget(this.view,l)}else if(s.type==qe.Text){P0(n,i,s.from);for(let o of r)o.line(this.view,s,i)}for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Qd),n=t.state.facet(Qd),i=t.docChanged||t.heightChanged||t.viewportChanged||!je.eq(t.startState.facet(qd),t.state.facet(qd),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new mx(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>le.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Je.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function px(t){return Array.isArray(t)?t:[t]}function P0(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class F3{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=je.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=n.top-this.height;if(this.i==r.elements.length){let o=new SA(e,n.height,s,i);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,n.height,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];P0(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n);i&&this.addElement(e,n,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class mx{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,l,r)&&r.preventDefault()});this.markers=px(n.markers(e)),n.initialSpacer&&(this.spacer=new SA(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=px(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!je.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class SA{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),z3(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(a)){l=d,u=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!a)break;a.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function z3(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const j3=ne.define(),fl=ne.define({combine(t){return Ws(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(l,a,u)=>s(l,a,u)||o(l,a,u):o}return i}})}});class dm extends Fs{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function hm(t,e){return t.state.facet(fl).formatNumber(e,t.state)}const U3=Qd.compute([fl],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(j3)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new dm(hm(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(fl)!=e.state.facet(fl),initialSpacer(e){return new dm(hm(e,gx(e.state.doc.lines)))},updateSpacer(e,n){let i=hm(n.view,gx(n.view.state.doc.lines));return i==e.number?e:new dm(i)},domEventHandlers:t.facet(fl).domEventHandlers}));function V3(t={}){return[fl.of(t),_3(),U3]}function gx(t){let e=9;for(;e<t;)e=e*10+9;return e}const H3=new class extends Fs{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},W3=qd.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(H3.range(r)))}return je.of(e)});function G3(){return W3}const kA=new fc;function CA(t){window.codemirror&&window.codemirror.dispatch({effects:kA.reconfigure(we.readOnly.of(t))})}const R0=me.define(),X3=Ht.define({create(){return Ce.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(R0)&&(n=Ce.none,i.value!==null&&(n=n.update({add:[J3.range(i.value)]})));return n},provide:t=>le.decorations.from(t)}),J3=Ce.line({class:"!bg-sky-400/30"});function EA(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:R0.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:R0.of(e)})}}const Y3=oe.from(oe.MAX_ADDRESS).toString(),K3=new Intl.NumberFormat("en",{style:"decimal"}).format,q3={clean:"Clean",computer:"Computer",frequency:"Frequency",hertz:t=>`${K3(t)} Hz`,update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},cpu:{name:"CPU","general-registers":"General-purpose registers","special-registers":"Special registers",register:t=>`${t} register`,alu:"ALU",memory:{name:"Memory",cell:t=>`Cell ${oe.format(t)}`,"start-address":"Start address","start-address-must-be-integer":"Start address must be an integer.","start-address-too-big":`Start address must be less or equal to ${Y3}.`},interrups:{label:"Interrupts",enabled:"Enabled",disabled:"Disabled"}},devices:{internal:{label:"Internal devices",handshake:{name:"Handshake",data:"Data",state:"State"},pic:{name:"PIC",state:"State",connections:"Connections"},pio:{name:"PIO",data:"Data",config:"Configuration",port:t=>`Port ${t}`},timer:"Timer"},external:{label:"External devices",console:"Console",f10:{name:"F10",interrupt:"Interrupt"},leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},switches:"Switches"},ioRegister:(t,e)=>`${t} register (${xn.format(e)})`},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},runner:{action:{start:"Start",debug:"Debug","run-until-halt":"Finish",step:"Next",stop:"Abort"},state:{running:"Running",paused:"Paused","waiting-for-input":"Wating for key",stopped:"Stopped"}},menu:{label:"Menu",devices:{label:"Devices","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer w/PIO",handshake:"Printer w/Handshake"},dataRepresentation:{label:"Representation mode",hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"2's complement",ascii:"ASCII"},dataOnLoad:{label:"Data on load",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},language:"Language",documentation:"Documentation","report-issue":"Report an issue"}},Q3=oe.from(oe.MAX_ADDRESS).toString(),Z3=new Intl.NumberFormat("es",{style:"decimal"}).format,eI={clean:"Limpiar",computer:"Computadora",frequency:"Frecuencia",hertz:t=>`${Z3(t)} Hz`,update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},cpu:{name:"CPU","general-registers":"Registros de propsito general","special-registers":"Registros especiales",register:t=>`Registro ${t}`,alu:"ALU",memory:{name:"Memoria",cell:t=>`Celda ${oe.format(t)}`,"start-address":"Direccin de inicio","start-address-must-be-integer":"El valor de inicio debe ser un nmero entero.","start-address-too-big":`El valor de inicio debe ser menor o igual a ${Q3}.`},interrups:{label:"Interrupciones",enabled:"Habilitadas",disabled:"Inhabilitadas"}},devices:{internal:{label:"Dispositivos internos",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:{name:"PIC",state:"Estado",connections:"Conexiones"},pio:{name:"PIO",data:"Datos",config:"Configuracin",port:t=>`Puerto ${t}`},timer:"Timer"},external:{label:"Dispositivos externos",console:"Consola",f10:{name:"F10",interrupt:"Interrumpir"},leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},switches:"Teclas"},ioRegister:(t,e)=>`Registro ${t} (${xn.format(e)})`},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},runner:{action:{start:"Ejecutar",debug:"Depurar","run-until-halt":"Finalizar",step:"Siguiente",stop:"Abortar"},state:{running:"Ejecutando",paused:"Pausado","waiting-for-input":"Esperando tecla",stopped:"Detenido"}},menu:{label:"Men",devices:{label:"Dispositivos","pio-switches-and-leds":"Teclas y leds","pio-printer":"Impresora con PIO",handshake:"Impresora con Handshake"},dataRepresentation:{label:"Modo de representacin",hex:"Hexadecimal",bin:"Binario",uint:"Binario sin signo (BSS)",int:"Complemento a 2 (Ca2)",ascii:"ASCII"},dataOnLoad:{label:"Memoria al cargar",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},language:"Idioma",documentation:"Documentacin","report-issue":"Reportar un error"}},Gf=ov({en:q3,es:eI}),G=sv();function tI(t){return k.jsx(KD,{store:G,children:t.children})}const nI=Symbol(),iI=t=>typeof(t==null?void 0:t.then)=="function";function AA(t){let e,n;const i={getItem:(r,s)=>{var o,l;const a=c=>{if(c=c||"",e!==c){try{n=JSON.parse(c)}catch{return s}e=c}return n},u=(l=(o=t())==null?void 0:o.getItem(r))!=null?l:null;return iI(u)?u.then(a):a(u)},setItem:(r,s)=>{var o;return(o=t())==null?void 0:o.setItem(r,JSON.stringify(s))},removeItem:r=>{var s;return(s=t())==null?void 0:s.removeItem(r)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&(i.subscribe=(r,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const l=a=>{if(a.storageArea===t()&&a.key===r){let u;try{u=JSON.parse(a.newValue||"")}catch{u=o}s(u)}};return window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}}),i}const rI=AA(()=>typeof window<"u"?window.localStorage:void 0);function yc(t,e,n=rI,i){const r=i==null?void 0:i.unstable_getOnInit,s=ue(r?n.getItem(t,e):e);return s.onMount=l=>{r||l(n.getItem(t,e));let a;return n.subscribe&&(a=n.subscribe(t,l,e)),a},ue(l=>l(s),(l,a,u)=>{const c=typeof u=="function"?u(l(s)):u;return c===nI?(a(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(a(s,d),n.setItem(t,d))):(a(s,c),n.setItem(t,c))})}const vc=AA(()=>window.localStorage);function sI(){const t=["en","es"],e=navigator.language.toLowerCase();for(const n of t)if(e.startsWith(n))return n;return"en"}const kv=yc("language",sI(),vc,{unstable_getOnInit:!0}),wc=()=>G.get(kv),PA=yc("data-on-load","randomize",vc,{unstable_getOnInit:!0}),oI=()=>G.get(PA),RA=yc("devices","pio-switches-and-leds",vc,{unstable_getOnInit:!0}),lI=()=>G.get(RA),aI=yc("data-representation","bin",vc,{unstable_getOnInit:!0}),Cv=yc("speeds",{executionUnit:150,clock:30,printer:1e3},vc,{unstable_getOnInit:!0}),MA=()=>G.get(Cv),fm=ue(T.zero(16)),pm=ue(T.zero(16)),mm=ue(T.zero(16)),gm=ue(T.zero(16)),ym=ue(T.zero(16)),vm=ue(T.zero(16)),uI=ue(T.zero(8)),wm=ue(T.zero(16)),bm=ue(T.zero(16)),xm=ue(T.zero(16)),Sm=ue(T.zero(16)),km=ue(T.zero(16)),Cm=ue(T.zero(16)),OA=ue(T.zero(16)),Zl=ue(T.zero(8)),zn=t=>ue(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),jn=t=>ue(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),Fe={AX:fm,AL:zn(fm),AH:jn(fm),BX:pm,BL:zn(pm),BH:jn(pm),CX:mm,CL:zn(mm),CH:jn(mm),DX:gm,DL:zn(gm),DH:jn(gm),SP:ym,"SP.l":zn(ym),"SP.h":jn(ym),IP:vm,"IP.l":zn(vm),"IP.h":jn(vm),IR:uI,ri:wm,"ri.l":zn(wm),"ri.h":jn(wm),id:bm,"id.l":zn(bm),"id.h":jn(bm),left:xm,"left.l":zn(xm),"left.h":jn(xm),right:Sm,"right.l":zn(Sm),"right.h":jn(Sm),result:km,"result.l":zn(km),"result.h":jn(km),FLAGS:Cm,"FLAGS.l":zn(Cm),"FLAGS.h":jn(Cm),MAR:OA,MBR:Zl},so=ue({phase:"stopped"}),TA=ue("ADD");function cI(t){G.set(Fe.AX,T.fromUnsigned(t.cpu.AX,16)),G.set(Fe.BX,T.fromUnsigned(t.cpu.BX,16)),G.set(Fe.CX,T.fromUnsigned(t.cpu.CX,16)),G.set(Fe.DX,T.fromUnsigned(t.cpu.DX,16)),G.set(Fe.SP,T.fromUnsigned(t.cpu.SP,16)),G.set(Fe.IP,T.fromUnsigned(t.cpu.IP,16)),G.set(Fe.IR,T.fromUnsigned(t.cpu.IR,8)),G.set(Fe.ri,T.fromUnsigned(t.cpu.ri,16)),G.set(Fe.id,T.fromUnsigned(t.cpu.id,16)),G.set(Fe.left,T.fromUnsigned(t.cpu.left,16)),G.set(Fe.right,T.fromUnsigned(t.cpu.right,16)),G.set(Fe.result,T.fromUnsigned(t.cpu.result,16)),G.set(Fe.FLAGS,T.fromUnsigned(t.cpu.FLAGS,16)),G.set(Fe.MAR,T.fromUnsigned(t.cpu.MAR,16)),G.set(Fe.MBR,T.fromUnsigned(t.cpu.MBR,8)),G.set(so,{phase:"stopped"})}const Ev=ue(new Array(oe.MAX_ADDRESS+1).fill(T.zero(8))),M0=ue(oe.from(4096)),yx=8,dI=ue(t=>{const e=t(M0),n=e.value-e.value%yx,i=t(Ev),r=[];for(let s=0;s<yx;s++)r.push({address:oe.from(n+s),value:i[n+s]});return r});function hI(t){G.set(Ev,t.memory.map(e=>T.fromUnsigned(e,8)))}const Av=ue(T.fromUnsigned(255,8)),Pv=ue(T.fromUnsigned(0,8)),Rv=ue(T.fromUnsigned(0,8)),Uh=[ue(T.zero(8)),ue(T.zero(8)),ue(T.zero(8)),ue(T.zero(8)),ue(T.zero(8)),ue(T.zero(8)),ue(T.zero(8)),ue(T.zero(8))];function fI(t){G.set(Av,T.fromUnsigned(t.io.pic.IMR,8)),G.set(Pv,T.fromUnsigned(t.io.pic.IRR,8)),G.set(Rv,T.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Uh.length;e++)G.set(Uh[e],T.fromUnsigned(t.io.pic.lines[e],8))}var pI=Object.defineProperty,mI=(t,e)=>{for(var n in e)pI(t,n,{get:e[n],enumerable:!0})},Ei={};mI(Ei,{assign:()=>vI,colors:()=>Os,createStringInterpolator:()=>Iv,skipAnimation:()=>$A,to:()=>_A,willAdvance:()=>Bv});var Mv=xc(),he=t=>bc(t,Mv),Ov=xc();he.write=t=>bc(t,Ov);var Xf=xc();he.onStart=t=>bc(t,Xf);var Tv=xc();he.onFrame=t=>bc(t,Tv);var Nv=xc();he.onFinish=t=>bc(t,Nv);var Rl=[];he.setTimeout=(t,e)=>{const n=he.now()+e,i=()=>{const s=Rl.findIndex(o=>o.cancel==i);~s&&Rl.splice(s,1),bs-=~s?1:0},r={time:n,handler:t,cancel:i};return Rl.splice(NA(n),0,r),bs+=1,DA(),r};var NA=t=>~(~Rl.findIndex(e=>e.time>t)||~Rl.length);he.cancel=t=>{Xf.delete(t),Tv.delete(t),Nv.delete(t),Mv.delete(t),Ov.delete(t)};he.sync=t=>{O0=!0,he.batchedUpdates(t),O0=!1};he.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,he.onStart(n)}return i.handler=t,i.cancel=()=>{Xf.delete(n),e=null},i};var Dv=typeof window<"u"?window.requestAnimationFrame:()=>{};he.use=t=>Dv=t;he.now=typeof performance<"u"?()=>performance.now():Date.now;he.batchedUpdates=t=>t();he.catch=console.error;he.frameLoop="always";he.advance=()=>{he.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):IA()};var ws=-1,bs=0,O0=!1;function bc(t,e){O0?(e.delete(t),t(0)):(e.add(t),DA())}function DA(){ws<0&&(ws=0,he.frameLoop!=="demand"&&Dv(LA))}function gI(){ws=-1}function LA(){~ws&&(Dv(LA),he.batchedUpdates(IA))}function IA(){const t=ws;ws=he.now();const e=NA(ws);if(e&&(BA(Rl.splice(0,e),n=>n.handler()),bs-=e),!bs){gI();return}Xf.flush(),Mv.flush(t?Math.min(64,ws-t):16.667),Tv.flush(),Ov.flush(),Nv.flush()}function xc(){let t=new Set,e=t;return{add(n){bs+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return bs-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,bs-=e.size,BA(e,i=>i(n)&&t.add(i)),bs+=t.size,e=t)}}}function BA(t,e){t.forEach(n=>{try{e(n)}catch(i){he.catch(i)}})}function T0(){}var yI=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),H={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function dr(t,e){if(H.arr(t)){if(!H.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var de=(t,e)=>t.forEach(e);function tr(t,e,n){if(H.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var en=t=>H.und(t)?[]:H.arr(t)?t:[t];function fu(t,e){if(t.size){const n=Array.from(t);t.clear(),de(n,e)}}var eu=(t,...e)=>fu(t,n=>n(...e)),Lv=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Iv,_A,Os=null,$A=!1,Bv=T0,vI=t=>{t.to&&(_A=t.to),t.now&&(he.now=t.now),t.colors!==void 0&&(Os=t.colors),t.skipAnimation!=null&&($A=t.skipAnimation),t.createStringInterpolator&&(Iv=t.createStringInterpolator),t.requestAnimationFrame&&he.use(t.requestAnimationFrame),t.batchedUpdates&&(he.batchedUpdates=t.batchedUpdates),t.willAdvance&&(Bv=t.willAdvance),t.frameLoop&&(he.frameLoop=t.frameLoop)},pu=new Set,qn=[],Em=[],Vh=0,Jf={get idle(){return!pu.size&&!qn.length},start(t){Vh>t.priority?(pu.add(t),he.onStart(wI)):(FA(t),he(N0))},advance:N0,sort(t){if(Vh)he.onFrame(()=>Jf.sort(t));else{const e=qn.indexOf(t);~e&&(qn.splice(e,1),zA(t))}},clear(){qn=[],pu.clear()}};function wI(){pu.forEach(FA),pu.clear(),he(N0)}function FA(t){qn.includes(t)||zA(t)}function zA(t){qn.splice(bI(qn,e=>e.priority>t.priority),0,t)}function N0(t){const e=Em;for(let n=0;n<qn.length;n++){const i=qn[n];Vh=i.priority,i.idle||(Bv(i),i.advance(t),i.idle||e.push(i))}return Vh=0,Em=qn,Em.length=0,qn=e,qn.length>0}function bI(t,e){const n=t.findIndex(e);return n<0?t.length:n}var xI=(t,e,n)=>Math.min(Math.max(n,t),e),SI={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},vi="[-+]?\\d*\\.?\\d+",Hh=vi+"%";function Yf(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var kI=new RegExp("rgb"+Yf(vi,vi,vi)),CI=new RegExp("rgba"+Yf(vi,vi,vi,vi)),EI=new RegExp("hsl"+Yf(vi,Hh,Hh)),AI=new RegExp("hsla"+Yf(vi,Hh,Hh,vi)),PI=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,RI=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,MI=/^#([0-9a-fA-F]{6})$/,OI=/^#([0-9a-fA-F]{8})$/;function TI(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=MI.exec(t))?parseInt(e[1]+"ff",16)>>>0:Os&&Os[t]!==void 0?Os[t]:(e=kI.exec(t))?(Jo(e[1])<<24|Jo(e[2])<<16|Jo(e[3])<<8|255)>>>0:(e=CI.exec(t))?(Jo(e[1])<<24|Jo(e[2])<<16|Jo(e[3])<<8|bx(e[4]))>>>0:(e=PI.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=OI.exec(t))?parseInt(e[1],16)>>>0:(e=RI.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=EI.exec(t))?(vx(wx(e[1]),cd(e[2]),cd(e[3]))|255)>>>0:(e=AI.exec(t))?(vx(wx(e[1]),cd(e[2]),cd(e[3]))|bx(e[4]))>>>0:null}function Am(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function vx(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Am(r,i,t+1/3),o=Am(r,i,t),l=Am(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(l*255)<<8}function Jo(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function wx(t){return(parseFloat(t)%360+360)%360/360}function bx(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function cd(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function xx(t){let e=TI(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Vu=(t,e,n)=>{if(H.fun(t))return t;if(H.arr(t))return Vu({range:t,output:e,extrapolate:n});if(H.str(t.output[0]))return Iv(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",l=i.extrapolateRight||i.extrapolate||"extend",a=i.easing||(u=>u);return u=>{const c=DI(u,s);return NI(u,s[c],s[c+1],r[c],r[c+1],a,o,l,i.map)}};function NI(t,e,n,i,r,s,o,l,a){let u=a?a(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(l==="identity")return u;l==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function DI(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var LI=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return xI(0,1,r/t)},Wh=1.70158,dd=Wh*1.525,Sx=Wh+1,kx=2*Math.PI/3,Cx=2*Math.PI/4.5,hd=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,_v={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Sx*t*t*t-Wh*t*t,easeOutBack:t=>1+Sx*Math.pow(t-1,3)+Wh*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((dd+1)*2*t-dd)/2:(Math.pow(2*t-2,2)*((dd+1)*(t*2-2)+dd)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*kx),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*kx)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Cx))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Cx)/2+1,easeInBounce:t=>1-hd(1-t),easeOutBounce:hd,easeInOutBounce:t=>t<.5?(1-hd(1-2*t))/2:(1+hd(2*t-1))/2,steps:LI},Hu=Symbol.for("FluidValue.get"),ea=Symbol.for("FluidValue.observers"),Kn=t=>!!(t&&t[Hu]),dn=t=>t&&t[Hu]?t[Hu]():t,Ex=t=>t[ea]||null;function II(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Wu(t,e){const n=t[ea];n&&n.forEach(i=>{II(i,e)})}var jA=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");BI(this,t)}},BI=(t,e)=>UA(t,Hu,e);function pa(t,e){if(t[Hu]){let n=t[ea];n||UA(t,ea,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Gu(t,e){const n=t[ea];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[ea]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var UA=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Zd=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_I=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ax=new RegExp(`(${Zd.source})(%|[a-z]+)`,"i"),$I=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Kf=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,VA=t=>{const[e,n]=FI(t);if(!e||Lv())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Kf.test(n))return VA(n);if(n)return n}return t},FI=t=>{const e=Kf.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Pm,zI=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,HA=t=>{Pm||(Pm=Os?new RegExp(`(${Object.keys(Os).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>dn(s).replace(Kf,VA).replace(_I,xx).replace(Pm,xx)),n=e.map(s=>s.match(Zd).map(Number)),r=n[0].map((s,o)=>n.map(l=>{if(!(o in l))throw Error('The arity of each "output" value must be equal');return l[o]})).map(s=>Vu({...t,output:s}));return s=>{var a;const o=!Ax.test(e[0])&&((a=e.find(u=>Ax.test(u)))==null?void 0:a.replace(Zd,""));let l=0;return e[0].replace(Zd,()=>`${r[l++](s)}${o||""}`).replace($I,zI)}},$v="react-spring: ",WA=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${$v}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},jI=WA(console.warn);function UI(){jI(`${$v}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var VI=WA(console.warn);function HI(){VI(`${$v}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function qf(t){return H.str(t)&&(t[0]=="#"||/\d/.test(t)||!Lv()&&Kf.test(t)||t in(Os||{}))}var po=Lv()?S.useEffect:S.useLayoutEffect,WI=()=>{const t=S.useRef(!1);return po(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Fv(){const t=S.useState()[1],e=WI();return()=>{e.current&&t(Math.random())}}function GI(t,e){const[n]=S.useState(()=>({inputs:e,result:t()})),i=S.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&XI(e,s.inputs)||(s={inputs:e,result:t()}):s=n,S.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function XI(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var zv=t=>S.useEffect(t,JI),JI=[];function D0(t){const e=S.useRef();return S.useEffect(()=>{e.current=t}),e.current}var Xu=Symbol.for("Animated:node"),YI=t=>!!t&&t[Xu]===t,Bi=t=>t&&t[Xu],jv=(t,e)=>yI(t,Xu,e),Qf=t=>t&&t[Xu]&&t[Xu].getPayload(),GA=class{constructor(){jv(this,this)}getPayload(){return this.payload||[]}},Sc=class extends GA{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,H.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Sc(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return H.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,H.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Ju=class extends Sc{constructor(t){super(0),this._string=null,this._toString=Vu({output:[t,t]})}static create(t){return new Ju(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(H.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Vu({output:[this.getValue(),t]})),this._value=0,super.reset()}},Gh={dependencies:null},Zf=class extends GA{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return tr(this.source,(n,i)=>{YI(n)?e[i]=n.getValue(t):Kn(n)?e[i]=dn(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&de(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return tr(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Gh.dependencies&&Kn(t)&&Gh.dependencies.add(t);const e=Qf(t);e&&de(e,n=>this.add(n))}},XA=class extends Zf{constructor(t){super(t)}static create(t){return new XA(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(KI)),!0)}};function KI(t){return(qf(t)?Ju:Sc).create(t)}function L0(t){const e=Bi(t);return e?e.constructor:H.arr(t)?XA:qf(t)?Ju:Sc}var Px=(t,e)=>{const n=!H.fun(t)||t.prototype&&t.prototype.isReactComponent;return S.forwardRef((i,r)=>{const s=S.useRef(null),o=n&&S.useCallback(p=>{s.current=ZI(r,p)},[r]),[l,a]=QI(i,e),u=Fv(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,l.getValue(!0)):!1)===!1&&u()},d=new qI(c,a),h=S.useRef();po(()=>(h.current=d,de(a,p=>pa(p,d)),()=>{h.current&&(de(h.current.deps,p=>Gu(p,h.current)),he.cancel(h.current.update))})),S.useEffect(c,[]),zv(()=>()=>{const p=h.current;de(p.deps,g=>Gu(g,p))});const f=e.getComponentProps(l.getValue());return S.createElement(t,{...f,ref:o})})},qI=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&he.write(this.update)}};function QI(t,e){const n=new Set;return Gh.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Zf(t),Gh.dependencies=null,[t,n]}function ZI(t,e){return t&&(H.fun(t)?t(e):t.current=e),e}var Rx=Symbol.for("AnimatedComponent"),eB=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new Zf(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const l=Mx(o)||"Anonymous";return H.str(o)?o=s[o]||(s[o]=Px(o,r)):o=o[Rx]||(o[Rx]=Px(o,r)),o.displayName=`Animated(${l})`,o};return tr(t,(o,l)=>{H.arr(t)&&(l=Mx(o)),s[l]=s(o)}),{animated:s}},Mx=t=>H.str(t)?t:t&&H.str(t.displayName)?t.displayName:H.fun(t)&&t.name||null;function hn(t,...e){return H.fun(t)?t(...e):t}var mu=(t,e)=>t===!0||!!(e&&t&&(H.fun(t)?t(e):en(t).includes(e))),JA=(t,e)=>H.obj(t)?e&&t[e]:t,YA=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,tB=t=>t,ep=(t,e=tB)=>{let n=nB;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);H.und(s)||(i[r]=s)}return i},nB=["config","onProps","onStart","onChange","onPause","onResume","onRest"],iB={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function rB(t){const e={};let n=0;if(tr(t,(i,r)=>{iB[r]||(e[r]=i,n++)}),n)return e}function Uv(t){const e=rB(t);if(e){const n={to:e};return tr(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Yu(t){return t=dn(t),H.arr(t)?t.map(Yu):qf(t)?Ei.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function KA(t){for(const e in t)return!0;return!1}function I0(t){return H.fun(t)||H.arr(t)&&H.obj(t[0])}function B0(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function qA(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var sB={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},_0={...sB.default,mass:1,damping:1,easing:_v.linear,clamp:!1},oB=class{constructor(){this.velocity=0,Object.assign(this,_0)}};function lB(t,e,n){n&&(n={...n},Ox(n,e),e={...n,...e}),Ox(t,e),Object.assign(t,e);for(const o in _0)t[o]==null&&(t[o]=_0[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return H.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function Ox(t,e){if(!H.und(e.decay))t.duration=void 0;else{const n=!H.und(e.tension)||!H.und(e.friction);(n||!H.und(e.frequency)||!H.und(e.damping)||!H.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var Tx=[],aB=class{constructor(){this.changed=!1,this.values=Tx,this.toValues=null,this.fromValues=Tx,this.config=new oB,this.immediate=!1}};function QA(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,l)=>{let a,u,c=mu(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{H.und(n.pause)||(r.paused=mu(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||mu(p,e)),a=hn(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),a=u.time-he.now()}function h(){a>0&&!Ei.skipAnimation?(r.delayed=!0,u=he.setTimeout(f,a),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){l(p)}}})}var Vv=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Ml(t.get()):e.every(n=>n.noop)?ZA(t.get()):gi(t.get(),e.every(n=>n.finished)),ZA=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),gi=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Ml=t=>({value:t,cancelled:!0,finished:!1});function eP(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:l,promise:a}=n;return!s&&t===l&&!e.reset?a:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=ep(e,(v,m)=>m==="onRest"?void 0:v);let c,d;const h=new Promise((v,m)=>(c=v,d=m)),f=v=>{const m=r<=(n.cancelId||0)&&Ml(i)||r!==n.asyncId&&gi(i,!1);if(m)throw v.result=m,d(v),v},p=(v,m)=>{const y=new Nx,w=new Dx;return(async()=>{if(Ei.skipAnimation)throw Ku(n),w.result=gi(i,!1),d(w),w;f(y);const b=H.obj(v)?{...v}:{...m,to:v};b.parentId=r,tr(u,(P,R)=>{H.und(b[R])&&(b[R]=P)});const C=await i.start(b);return f(y),n.paused&&await new Promise(P=>{n.resumeQueue.add(P)}),C})()};let g;if(Ei.skipAnimation)return Ku(n),gi(i,!1);try{let v;H.arr(t)?v=(async m=>{for(const y of m)await p(y)})(t):v=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([v.then(c),h]),g=gi(i.get(),!0,!1)}catch(v){if(v instanceof Nx)g=v.result;else if(v instanceof Dx)g=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?l:void 0,n.promise=s?a:void 0)}return H.fun(o)&&he.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function Ku(t,e){fu(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Nx=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Dx=class extends Error{constructor(){super("SkipAnimationSignal")}},$0=t=>t instanceof Hv,uB=1,Hv=class extends jA{constructor(){super(...arguments),this.id=uB++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Bi(this);return t&&t.getValue()}to(...t){return Ei.to(this,t)}interpolate(...t){return UI(),Ei.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Wu(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Jf.sort(this),Wu(this,{type:"priority",parent:this,priority:t})}},No=Symbol.for("SpringPhase"),tP=1,F0=2,z0=4,Rm=t=>(t[No]&tP)>0,Qr=t=>(t[No]&F0)>0,Da=t=>(t[No]&z0)>0,Lx=(t,e)=>e?t[No]|=F0|tP:t[No]&=~F0,Ix=(t,e)=>e?t[No]|=z0:t[No]&=~z0,cB=class extends Hv{constructor(t,e){if(super(),this.animation=new aB,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!H.und(t)||!H.und(e)){const n=H.obj(t)?{...t}:{...e,from:t};H.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Qr(this)||this._state.asyncTo)||Da(this)}get goal(){return dn(this.animation.to)}get velocity(){const t=Bi(this);return t instanceof Sc?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Rm(this)}get isAnimating(){return Qr(this)}get isPaused(){return Da(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Qf(i.to);!o&&Kn(i.to)&&(r=en(dn(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Ju?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const g=i.fromValues[c],v=u.v0!=null?u.v0:u.v0=H.arr(s.velocity)?s.velocity[c]:s.velocity;let m;const y=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(H.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,b=Math.exp(-(1-w)*p);f=g+v/(1-w)*(1-b),h=Math.abs(u.lastPosition-f)<=y,m=v*b}else{m=u.lastVelocity==null?v:u.lastVelocity;const w=s.restVelocity||y/10,b=s.clamp?0:s.bounce,C=!H.und(b),P=g==d?u.v0>0:g<d;let R,I=!1;const E=1,A=Math.ceil(t/E);for(let M=0;M<A&&(R=Math.abs(m)>w,!(!R&&(h=Math.abs(d-f)<=y,h)));++M){C&&(I=f==d||f>d==P,I&&(m=-m*b,f=d));const O=-s.tension*1e-6*(f-d),D=-s.friction*.001*m,N=(O+D)/s.mass;m=m+N*E,f=f+m*E}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=g+s.easing(w)*(d-g),m=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=m,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const l=Bi(this),a=l.getValue();if(e){const u=dn(i.to);(a!==u||n)&&!s.decay?(l.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(a),this._stop()}else n&&this._onChange(a)}set(t){return he.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Qr(this)){const{to:t,config:e}=this.animation;he.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return H.und(t)?(n=this.queue||[],this.queue=[]):n=[H.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>Vv(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Ku(this._state,t&&this._lastCallId),he.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=H.obj(n)?n[e]:n,(n==null||I0(n))&&(n=void 0),i=H.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Rm(this)||(t.reverse&&([n,i]=[i,n]),i=dn(i),H.und(i)?Bi(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,ep(t,(o,l)=>/^on/.test(l)?JA(o,n):o)),_x(this,t,"onProps"),Ia(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return QA(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Da(this)||(Ix(this,!0),eu(s.pauseQueue),Ia(this,"onPause",gi(this,La(this,this.animation.to)),this))},resume:()=>{Da(this)&&(Ix(this,!1),Qr(this)&&this._resume(),eu(s.resumeQueue),Ia(this,"onResume",gi(this,La(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const l=nP(t);if(l)return this._update(l,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Ml(this));const i=!H.und(t.to),r=!H.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Ml(this));const{key:s,defaultProps:o,animation:l}=this,{to:a,from:u}=l;let{to:c=a,from:d=u}=t;r&&!i&&(!e.default||H.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!dr(d,u);h&&(l.from=d),d=dn(d);const f=!dr(c,a);f&&this._focus(c);const p=I0(e.to),{config:g}=l,{decay:v,velocity:m}=g;(i||r)&&(g.velocity=0),e.config&&!p&&lB(g,hn(e.config,s),e.config!==o.config?hn(o.config,s):void 0);let y=Bi(this);if(!y||H.und(c))return n(gi(this,!0));const w=H.und(e.reset)?r&&!e.default:!H.und(d)&&mu(e.reset,s),b=w?d:this.get(),C=Yu(c),P=H.num(C)||H.arr(C)||qf(C),R=!p&&(!P||mu(o.immediate||e.immediate,s));if(f){const M=L0(c);if(M!==y.constructor)if(R)y=this._set(C);else throw Error(`Cannot animate between ${y.constructor.name} and ${M.name}, as the "to" prop suggests`)}const I=y.constructor;let E=Kn(c),A=!1;if(!E){const M=w||!Rm(this)&&h;(f||M)&&(A=dr(Yu(b),C),E=!A),(!dr(l.immediate,R)&&!R||!dr(g.decay,v)||!dr(g.velocity,m))&&(E=!0)}if(A&&Qr(this)&&(l.changed&&!w?E=!0:E||this._stop(a)),!p&&((E||Kn(a))&&(l.values=y.getPayload(),l.toValues=Kn(c)?null:I==Ju?[1]:en(C)),l.immediate!=R&&(l.immediate=R,!R&&!w&&this._set(a)),E)){const{onRest:M}=l;de(hB,D=>_x(this,e,D));const O=gi(this,La(this,a));eu(this._pendingCalls,O),this._pendingCalls.add(n),l.changed&&he.batchedUpdates(()=>{var D;l.changed=!w,M==null||M(O,this),w?hn(o.onRest,O):(D=l.onStart)==null||D.call(l,O,this)})}w&&this._set(b),p?n(eP(e.to,e,this._state,this)):E?this._start():Qr(this)&&!f?this._pendingCalls.add(n):n(ZA(b))}_focus(t){const e=this.animation;t!==e.to&&(Ex(this)&&this._detach(),e.to=t,Ex(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Kn(e)&&(pa(e,this),$0(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Kn(t)&&Gu(t,this)}_set(t,e=!0){const n=dn(t);if(!H.und(n)){const i=Bi(this);if(!i||!dr(n,i.getValue())){const r=L0(n);!i||i.constructor!=r?jv(this,r.create(n)):i.setValue(n),i&&he.batchedUpdates(()=>{this._onChange(n,e)})}}return Bi(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Ia(this,"onStart",gi(this,La(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),hn(this.animation.onChange,t,this)),hn(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Bi(this).reset(dn(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Qr(this)||(Lx(this,!0),Da(this)||this._resume())}_resume(){Ei.skipAnimation?this.finish():Jf.start(this)}_stop(t,e){if(Qr(this)){Lx(this,!1);const n=this.animation;de(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Wu(this,{type:"idle",parent:this});const i=e?Ml(this.get()):gi(this.get(),La(this,t??n.to));eu(this._pendingCalls,i),n.changed&&(n.changed=!1,Ia(this,"onRest",i,this))}}};function La(t,e){const n=Yu(e),i=Yu(t.get());return dr(i,n)}function nP(t,e=t.loop,n=t.to){const i=hn(e);if(i){const r=i!==!0&&Uv(i),s=(r||t).reverse,o=!r||r.reset;return qu({...t,loop:e,default:!1,pause:void 0,to:!s||I0(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function qu(t){const{to:e,from:n}=t=Uv(t),i=new Set;return H.obj(e)&&Bx(e,i),H.obj(n)&&Bx(n,i),t.keys=i.size?Array.from(i):null,t}function dB(t){const e=qu(t);return H.und(e.default)&&(e.default=ep(e)),e}function Bx(t,e){tr(t,(n,i)=>n!=null&&e.add(i))}var hB=["onStart","onRest","onChange","onPause","onResume"];function _x(t,e,n){t.animation[n]=e[n]!==YA(e,n)?JA(e[n],t.key):void 0}function Ia(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var fB=["onStart","onChange","onRest"],pB=1,iP=class{constructor(t,e){this.id=pB++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];H.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(qu(t)),this}start(t){let{queue:e}=this;return t?e=en(t).map(qu):this.queue=[],this._flush?this._flush(this,e):(aP(this,e),j0(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;de(en(e),i=>n[i].stop(!!t))}else Ku(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(H.und(t))this.start({pause:!0});else{const e=this.springs;de(en(t),n=>e[n].pause())}return this}resume(t){if(H.und(t))this.start({pause:!1});else{const e=this.springs;de(en(t),n=>e[n].resume())}return this}each(t){tr(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,fu(t,([l,a])=>{a.value=this.get(),l(a,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&fu(e,([l,a])=>{a.value=o,l(a,this,this._item)}),s&&(this._started=!1,fu(n,([l,a])=>{a.value=o,l(a,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;he.onFrame(this._onFrame)}};function j0(t,e){return Promise.all(e.map(n=>rP(t,n))).then(n=>Vv(t,n))}async function rP(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:l,onResolve:a}=e,u=H.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const c=H.arr(r)||H.fun(r)?r:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):de(fB,g=>{const v=e[g];if(H.fun(v)){const m=t._events[g];e[g]=({finished:y,cancelled:w})=>{const b=m.get(v);b?(y||(b.finished=!1),w&&(b.cancelled=!0)):m.set(v,{value:null,finished:y||!1,cancelled:w||!1})},u&&(u[g]=e[g])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,eu(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),f=e.cancel===!0||YA(e,"cancel")===!0;(c||f&&d.asyncId)&&h.push(QA(++t._lastAsyncId,{props:e,state:d,actions:{pause:T0,resume:T0,start(g,v){f?(Ku(d,t._lastAsyncId),v(Ml(t))):(g.onRest=l,v(eP(c,g,d,t)))}}})),d.paused&&await new Promise(g=>{d.resumeQueue.add(g)});const p=Vv(t,await Promise.all(h));if(o&&p.finished&&!(n&&p.noop)){const g=nP(e,o,r);if(g)return aP(t,[g]),rP(t,g,!0)}return a&&he.batchedUpdates(()=>a(p,t,t.item)),p}function U0(t,e){const n={...t.springs};return e&&de(en(e),i=>{H.und(i.keys)&&(i=qu(i)),H.obj(i.to)||(i={...i,to:void 0}),lP(n,i,r=>oP(r))}),sP(t,n),n}function sP(t,e){tr(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,pa(n,t))})}function oP(t,e){const n=new cB;return n.key=t,e&&pa(n,e),n}function lP(t,e,n){e.keys&&de(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function aP(t,e){de(e,n=>{lP(t.springs,n,i=>oP(i,t))})}var kc=({children:t,...e})=>{const n=S.useContext(Xh),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=GI(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Xh;return S.createElement(s,{value:e},t)},Xh=mB(kc,{});kc.Provider=Xh.Provider;kc.Consumer=Xh.Consumer;function mB(t,e){return Object.assign(t,S.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var se=()=>{const t=[],e=function(i){HI();const r=[];return de(t,(s,o)=>{if(H.und(i))r.push(s.start());else{const l=n(i,s,o);l&&r.push(s.start(l))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return de(t,i=>i.pause(...arguments)),this},e.resume=function(){return de(t,i=>i.resume(...arguments)),this},e.set=function(i){de(t,(r,s)=>{const o=H.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return de(t,(s,o)=>{if(H.und(i))r.push(s.start());else{const l=this._getProps(i,s,o);l&&r.push(s.start(l))}}),r},e.stop=function(){return de(t,i=>i.stop(...arguments)),this},e.update=function(i){return de(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return H.fun(i)?i(s,r):i};return e._getProps=n,e};function gB(t,e,n){const i=H.fun(e)&&e;i&&!n&&(n=[]);const r=S.useMemo(()=>i||arguments.length==3?se():void 0,[]),s=S.useRef(0),o=Fv(),l=S.useMemo(()=>({ctrls:[],queue:[],flush(m,y){const w=U0(m,y);return s.current>0&&!l.queue.length&&!Object.keys(w).some(C=>!m.springs[C])?j0(m,y):new Promise(C=>{sP(m,w),l.queue.push(()=>{C(j0(m,y))}),o()})}}),[]),a=S.useRef([...l.ctrls]),u=[],c=D0(t)||0;S.useMemo(()=>{de(a.current.slice(t,c),m=>{B0(m,r),m.stop(!0)}),a.current.length=t,d(c,t)},[t]),S.useMemo(()=>{d(0,Math.min(c,t))},n);function d(m,y){for(let w=m;w<y;w++){const b=a.current[w]||(a.current[w]=new iP(null,l.flush)),C=i?i(w,b):e[w];C&&(u[w]=dB(C))}}const h=a.current.map((m,y)=>U0(m,u[y])),f=S.useContext(kc),p=D0(f),g=f!==p&&KA(f);po(()=>{s.current++,l.ctrls=a.current;const{queue:m}=l;m.length&&(l.queue=[],de(m,y=>y())),de(a.current,(y,w)=>{r==null||r.add(y),g&&y.start({default:f});const b=u[w];b&&(qA(y,b.ref),y.ref?y.queue.push(b):y.start(b))})}),zv(()=>()=>{de(l.ctrls,m=>m.stop(!0))});const v=h.map(m=>({...m}));return r?[v,r]:v}function Tt(t,e){const n=H.fun(t),[[i],r]=gB(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[i,r]:i}function yB(t,e,n){const i=H.fun(e)&&e,{reset:r,sort:s,trail:o=0,expires:l=!0,exitBeforeEnter:a=!1,onDestroyed:u,ref:c,config:d}=i?i():e,h=S.useMemo(()=>i||arguments.length==3?se():void 0,[]),f=en(t),p=[],g=S.useRef(null),v=r?null:g.current;po(()=>{g.current=p}),zv(()=>(de(p,N=>{h==null||h.add(N.ctrl),N.ctrl.ref=h}),()=>{de(g.current,N=>{N.expired&&clearTimeout(N.expirationId),B0(N.ctrl,h),N.ctrl.stop(!0)})}));const m=wB(f,i?i():e,v),y=r&&g.current||[];po(()=>de(y,({ctrl:N,item:B,key:$})=>{B0(N,h),hn(u,B,$)}));const w=[];if(v&&de(v,(N,B)=>{N.expired?(clearTimeout(N.expirationId),y.push(N)):(B=w[B]=m.indexOf(N.key),~B&&(p[B]=N))}),de(f,(N,B)=>{p[B]||(p[B]={key:m[B],item:N,phase:"mount",ctrl:new iP},p[B].ctrl.item=N)}),w.length){let N=-1;const{leave:B}=i?i():e;de(w,($,z)=>{const L=v[z];~$?(N=p.indexOf(L),p[N]={...L,item:f[$]}):B&&p.splice(++N,0,L)})}H.fun(s)&&p.sort((N,B)=>s(N.item,B.item));let b=-o;const C=Fv(),P=ep(e),R=new Map,I=S.useRef(new Map),E=S.useRef(!1);de(p,(N,B)=>{const $=N.key,z=N.phase,L=i?i():e;let _,j;const ee=hn(L.delay||0,$);if(z=="mount")_=L.enter,j="enter";else{const ut=m.indexOf($)<0;if(z!="leave")if(ut)_=L.leave,j="leave";else if(_=L.update)j="update";else return;else if(!ut)_=L.enter,j="enter";else return}if(_=hn(_,N.item,B),_=H.obj(_)?Uv(_):{to:_},!_.config){const ut=d||P.config;_.config=hn(ut,N.item,B,j)}b+=o;const re={...P,delay:ee+b,ref:c,immediate:L.immediate,reset:!1,..._};if(j=="enter"&&H.und(re.from)){const ut=i?i():e,Ze=H.und(ut.initial)||v?ut.from:ut.initial;re.from=hn(Ze,N.item,B)}const{onResolve:ge}=re;re.onResolve=ut=>{hn(ge,ut);const Ze=g.current,bt=Ze.find(ar=>ar.key===$);if(bt&&!(ut.cancelled&&bt.phase!="update")&&bt.ctrl.idle){const ar=Ze.every(kn=>kn.ctrl.idle);if(bt.phase=="leave"){const kn=hn(l,bt.item);if(kn!==!1){const Yr=kn===!0?0:kn;if(bt.expired=!0,!ar&&Yr>0){Yr<=2147483647&&(bt.expirationId=setTimeout(C,Yr));return}}}ar&&Ze.some(kn=>kn.expired)&&(I.current.delete(bt),a&&(E.current=!0),C())}};const rt=U0(N.ctrl,re);j==="leave"&&a?I.current.set(N,{phase:j,springs:rt,payload:re}):R.set(N,{phase:j,springs:rt,payload:re})});const A=S.useContext(kc),M=D0(A),O=A!==M&&KA(A);po(()=>{O&&de(p,N=>{N.ctrl.start({default:A})})},[A]),de(R,(N,B)=>{if(I.current.size){const $=p.findIndex(z=>z.key===B.key);p.splice($,1)}}),po(()=>{de(I.current.size?I.current:R,({phase:N,payload:B},$)=>{const{ctrl:z}=$;$.phase=N,h==null||h.add(z),O&&N=="enter"&&z.start({default:A}),B&&(qA(z,B.ref),(z.ref||h)&&!E.current?z.update(B):(z.start(B),E.current&&(E.current=!1)))})},r?void 0:n);const D=N=>S.createElement(S.Fragment,null,p.map((B,$)=>{const{springs:z}=R.get(B)||B.ctrl,L=N({...z},B.item,B,$);return L&&L.type?S.createElement(L.type,{...L.props,key:H.str(B.key)||H.num(B.key)?B.key:B.ctrl.id,ref:L.ref}):L}));return h?[D,h]:D}var vB=1;function wB(t,{key:e,keys:n=e},i){if(n===null){const r=new Set;return t.map(s=>{const o=i&&i.find(l=>l.item===s&&l.phase!=="leave"&&!r.has(l));return o?(r.add(o),o.key):vB++})}return H.und(n)?t:H.fun(n)?t.map(n):en(n)}var bB=class extends Hv{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Vu(...e);const n=this._get(),i=L0(n);jv(this,i.create(n))}advance(t){const e=this._get(),n=this.get();dr(e,n)||(Bi(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&$x(this._active)&&Mm(this)}_get(){const t=H.arr(this.source)?this.source.map(dn):en(dn(this.source));return this.calc(...t)}_start(){this.idle&&!$x(this._active)&&(this.idle=!1,de(Qf(this),t=>{t.done=!1}),Ei.skipAnimation?(he.batchedUpdates(()=>this.advance()),Mm(this)):Jf.start(this))}_attach(){let t=1;de(en(this.source),e=>{Kn(e)&&pa(e,this),$0(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){de(en(this.source),t=>{Kn(t)&&Gu(t,this)}),this._active.clear(),Mm(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=en(this.source).reduce((e,n)=>Math.max(e,($0(n)?n.priority:0)+1),0))}};function xB(t){return t.idle!==!1}function $x(t){return!t.size||Array.from(t).every(xB)}function Mm(t){t.idle||(t.idle=!0,de(Qf(t),e=>{e.done=!0}),Wu(t,{type:"idle",parent:t}))}Ei.assign({createStringInterpolator:HA,to:(t,e)=>new bB(t,e)});var uP=/^--/;function SB(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!uP.test(t)&&!(gu.hasOwnProperty(t)&&gu[t])?e+"px":(""+e).trim()}var Fx={};function kB(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:l,...a}=e,u=Object.values(a),c=Object.keys(a).map(d=>n||t.hasAttribute(d)?d:Fx[d]||(Fx[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in i)if(i.hasOwnProperty(d)){const h=SB(d,i[d]);uP.test(d)?t.style.setProperty(d,h):t.style[d]=h}c.forEach((d,h)=>{t.setAttribute(d,u[h])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),l!==void 0&&t.setAttribute("viewBox",l)}var gu={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CB=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),EB=["Webkit","Ms","Moz","O"];gu=Object.keys(gu).reduce((t,e)=>(EB.forEach(n=>t[CB(n,e)]=t[e]),t),gu);var AB=/^(matrix|translate|scale|rotate|skew)/,PB=/^(translate)/,RB=/^(rotate|skew)/,Om=(t,e)=>H.num(t)&&t!==0?t+e:t,eh=(t,e)=>H.arr(t)?t.every(n=>eh(n,e)):H.num(t)?t===e:parseFloat(t)===e,MB=class extends Zf{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(l=>Om(l,"px")).join(",")})`,eh(o,0)])),tr(i,(o,l)=>{if(l==="transform")r.push([o||""]),s.push(a=>[a,a===""]);else if(AB.test(l)){if(delete i[l],H.und(o))return;const a=PB.test(l)?"px":RB.test(l)?"deg":"";r.push(en(o)),s.push(l==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${Om(h,a)})`,eh(h,0)]:u=>[`${l}(${u.map(c=>Om(c,a)).join(",")})`,eh(u,l.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new OB(r,s)),super(i)}},OB=class extends jA{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return de(this.inputs,(n,i)=>{const r=dn(n[0]),[s,o]=this.transforms[i](H.arr(r)?r:n.map(dn));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&de(this.inputs,e=>de(e,n=>Kn(n)&&pa(n,this)))}observerRemoved(t){t==0&&de(this.inputs,e=>de(e,n=>Kn(n)&&Gu(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Wu(this,t)}},TB=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Ei.assign({batchedUpdates:dc.unstable_batchedUpdates,createStringInterpolator:HA,colors:SI});var NB=eB(TB,{applyAnimatedValues:kB,createAnimatedStyle:t=>new MB(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),ct=NB.animated;const it={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"}},Ee={bus:{address:se(),data:se(),rd:se(),wr:se(),iom:se(),mem:se(),pic:se(),timer:se(),intr:se(),inta:se(),int0:se(),int1:se(),int2:se()},clock:se(),cpu:{internalBus:{address:se(),data:se()},alu:{operands:se(),results:se(),cog:se(),operation:se()},decoder:{path:se(),progress:se()},AX:se(),BX:se(),CX:se(),DX:se(),SP:se(),IP:se(),IR:se(),ri:se(),id:se(),left:se(),right:se(),result:se(),FLAGS:se(),MAR:se(),MBR:se()},pic:{IMR:se(),IRR:se(),ISR:se(),INT0:se(),INT1:se(),INT2:se(),INT3:se(),INT4:se(),INT5:se(),INT6:se(),INT7:se()},timer:{CONT:se(),COMP:se()}},pl=new Set;async function ve(t,e,n){const i=$f(Ee,t);if(!i)throw new Error(`No animation ref found for key ${t}`);pl.has(t)&&await new Promise(s=>{const o=setInterval(()=>{pl.has(t)||(clearInterval(o),s())},5)}),pl.add(t);const r=await Promise.all(i.start({...e,config:{duration:MA().executionUnit*n.duration,easing:_v[n.easing]}}));return pl.delete(t),r}const DB=()=>pl.forEach(t=>$f(Ee,t).resume()),LB=()=>pl.forEach(t=>$f(Ee,t).stop());async function hr(t,e=it.mantis[400]){await ve(t,{backgroundColor:e},{duration:1,easing:"easeOutQuart"})}async function fr(t){await ve(t,{backgroundColor:it.stone[800]},{duration:1,easing:"easeOutQuart"})}async function Jh(t){await ve("bus.data",{stroke:it.mantis[400]},{duration:5,easing:"easeOutSine"}),await ve("cpu.MBR",{backgroundColor:it.mantis[400]},{duration:1,easing:"easeOutQuart"}),G.set(Zl,t),await ve("cpu.MBR",{backgroundColor:it.stone[800]},{duration:1,easing:"easeOutQuart"})}async function ta(t,e){await ve(`bus.${t}`,{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},{duration:e,easing:"easeInOutSine"})}async function na(t){await ve(`bus.${t}`,{opacity:0},{duration:1,easing:"easeInSine"})}const Wv=ue(T.zero(8)),Gv=ue(T.zero(8));function IB(t){G.set(Wv,T.fromUnsigned(t.io.timer.CONT,8)),G.set(Gv,T.fromUnsigned(t.io.timer.COMP,8))}const cP=ue(T.fromUnsigned(0,8)),dP=ue(T.fromUnsigned(1,8));function BB(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{G.set(Zl,t.value);return}case"handshake:write":case"handshake:register.update":switch(t.register){case"DATA":{G.set(cP,t.value);return}case"STATE":{G.set(dP,t.value);return}default:return t.register}case"handshake:write.ok":return;case"handshake:interrupt":return;default:return t}}const hP=ue(T.zero(8));function _B(t){switch(t.type){case"leds:update":{G.set(hP,t.state);return}default:return t}}const fP=ue(T.zero(8)),pP=ue(T.zero(8)),mP=ue(T.zero(8)),gP=ue(T.zero(8));function $B(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{G.set(Zl,t.value);return}case"pio:write":case"pio:register.update":switch(t.register){case"PA":{G.set(fP,t.value);return}case"PB":{G.set(pP,t.value);return}case"CA":{G.set(mP,t.value);return}case"CB":{G.set(gP,t.value);return}default:return t.register}case"pio:write.ok":return;default:return t}}const V0=ue([]),H0=ue("");function FB(t){switch(t.type){case"printer:buffer.add":{G.set(V0,e=>[...e,t.char]);return}case"printer:buffer.pop":{G.set(V0,e=>e.slice(1));return}case"printer:busy.off":return;case"printer:busy.on":return;case"printer:data.read":return;case"printer:paper.print":{const e=An.getComputerState().io;"printer"in e&&G.set(H0,e.printer.paper);return}case"printer:paper.replace":{G.set(H0,"");return}case"printer:strobe.off":return;case"printer:strobe.on":return;default:return t}}const yP=ue(T.zero(8));function zB(t){switch(t.type){case"switches:toggle":{G.set(yP,e=>e.withBit(t.index,!e.bit(t.index)));return}default:return t}}async function jB(t){switch(t.type){case"bus:io.selected":{await Promise.all([ve("bus.mem",{stroke:it.stone[700]},{duration:1,easing:"easeInSine"}),ta(t.chip,15)]);return}case"bus:io.error":{Do(t.error);return}case"bus:reset":{const e={stroke:it.stone[700]},n={duration:1,easing:"easeInSine"};await Promise.all([ve("bus.address",e,n),ve("bus.data",e,n),ve("bus.rd",e,n),ve("bus.wr",e,n),na("iom"),ve("bus.mem",{stroke:it.red[500]},{duration:1,easing:"easeOutSine"}),na("pic")]);return}default:return t}}async function UB(t){switch(t.type){case"clock:tick":return;default:return t.type}}function VB(t){switch(t){case"IP":return"M 551 309 H 575 V 349 H 598";case"SP":return"M 551 349 H 598";case"ri":return"M 544 388 H 575 V 349 H 598";default:throw new Error(`Invalid register ${t}`)}}function HB(){const{path:t,...e}=Tt({ref:Ee.cpu.internalBus.address,from:{strokeDashoffset:1,opacity:1,path:""}});return k.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[k.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598"].join(" ")}),k.jsx(ct.path,{d:t,className:"fill-none stroke-blue-500 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var Xv={exports:{}},Ol=typeof Reflect=="object"?Reflect:null,zx=Ol&&typeof Ol.apply=="function"?Ol.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},th;Ol&&typeof Ol.ownKeys=="function"?th=Ol.ownKeys:Object.getOwnPropertySymbols?th=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:th=function(e){return Object.getOwnPropertyNames(e)};function WB(t){console&&console.warn&&console.warn(t)}var vP=Number.isNaN||function(e){return e!==e};function Oe(){Oe.init.call(this)}Xv.exports=Oe;Xv.exports.once=YB;Oe.EventEmitter=Oe;Oe.prototype._events=void 0;Oe.prototype._eventsCount=0;Oe.prototype._maxListeners=void 0;var jx=10;function tp(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Oe,"defaultMaxListeners",{enumerable:!0,get:function(){return jx},set:function(t){if(typeof t!="number"||t<0||vP(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");jx=t}});Oe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Oe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||vP(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function wP(t){return t._maxListeners===void 0?Oe.defaultMaxListeners:t._maxListeners}Oe.prototype.getMaxListeners=function(){return wP(this)};Oe.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var a=s[e];if(a===void 0)return!1;if(typeof a=="function")zx(a,this,n);else for(var u=a.length,c=CP(a,u),i=0;i<u;++i)zx(c[i],this,n);return!0};function bP(t,e,n,i){var r,s,o;if(tp(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=wP(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,WB(l)}return t}Oe.prototype.addListener=function(e,n){return bP(this,e,n,!1)};Oe.prototype.on=Oe.prototype.addListener;Oe.prototype.prependListener=function(e,n){return bP(this,e,n,!0)};function GB(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xP(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=GB.bind(i);return r.listener=n,i.wrapFn=r,r}Oe.prototype.once=function(e,n){return tp(n),this.on(e,xP(this,e,n)),this};Oe.prototype.prependOnceListener=function(e,n){return tp(n),this.prependListener(e,xP(this,e,n)),this};Oe.prototype.removeListener=function(e,n){var i,r,s,o,l;if(tp(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){l=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():XB(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,l||n)}return this};Oe.prototype.off=Oe.prototype.removeListener;Oe.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function SP(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?JB(r):CP(r,r.length)}Oe.prototype.listeners=function(e){return SP(this,e,!0)};Oe.prototype.rawListeners=function(e){return SP(this,e,!1)};Oe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):kP.call(t,e)};Oe.prototype.listenerCount=kP;function kP(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Oe.prototype.eventNames=function(){return this._eventsCount>0?th(this._events):[]};function CP(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function XB(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function JB(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function YB(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}EP(t,e,s,{once:!0}),e!=="error"&&KB(t,r,{once:!0})})}function KB(t,e,n){typeof t.on=="function"&&EP(t,"error",e,n)}function EP(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var qB=Xv.exports;function nr(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(nr.prototype[Symbol.iterator]=function(){return this});nr.of=function(){var t=arguments,e=t.length,n=0;return new nr(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};nr.empty=function(){var t=new nr(function(){return{done:!0}});return t};nr.fromSequence=function(t){var e=0,n=t.length;return new nr(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};nr.is=function(t){return t instanceof nr?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var np=nr;const oi=sc(np);var ip={};ip.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";ip.SYMBOL_SUPPORT=typeof Symbol<"u";var QB=np,AP=ip,ZB=AP.ARRAY_BUFFER_SUPPORT,e8=AP.SYMBOL_SUPPORT;function t8(t){return typeof t=="string"||Array.isArray(t)||ZB&&ArrayBuffer.isView(t)?QB.fromSequence(t):typeof t!="object"||t===null?null:e8&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var PP=function(e){var n=t8(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},n8=PP,i8=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,l=n8(e);;){if(o===i)return r;if(s=l.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const RP=sc(i8);var r8=np,s8=PP,o8=function(){var e=arguments,n=null,i=-1;return new r8(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=s8(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Dr=sc(o8);function l8(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let yt=l8;typeof Object.assign=="function"&&(yt=Object.assign);function ii(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Nt(t){return typeof t=="object"&&t!==null}function MP(t){let e;for(e in t)return!1;return!0}function Un(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function ui(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function Ux(t){return!(!Nt(t)||t.attributes&&!Array.isArray(t.attributes))}function a8(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class Jv extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class q extends Jv{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,q.prototype.constructor)}}class X extends Jv{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,X.prototype.constructor)}}class ae extends Jv{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ae.prototype.constructor)}}function OP(t,e){this.key=t,this.attributes=e,this.clear()}OP.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function TP(t,e){this.key=t,this.attributes=e,this.clear()}TP.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function NP(t,e){this.key=t,this.attributes=e,this.clear()}NP.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function ma(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}ma.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};ma.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};ma.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};ma.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const DP=0,LP=1,u8=2,IP=3;function Jr(t,e,n,i,r,s,o){let l,a,u,c;if(i=""+i,n===DP){if(l=t._nodes.get(i),!l)throw new X(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===IP){if(r=""+r,a=t._edges.get(r),!a)throw new X(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=a.source.key,h=a.target.key;if(i===d)l=a.target;else if(i===h)l=a.source;else throw new X(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(a=t._edges.get(i),!a)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===LP?l=a.source:l=a.target,u=r,c=s}return[l,u,c]}function c8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Jr(this,e,n,i,r,s);return o.attributes[l]}}function d8(t,e,n){t.prototype[e]=function(i,r){const[s]=Jr(this,e,n,i,r);return s.attributes}}function h8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Jr(this,e,n,i,r,s);return o.attributes.hasOwnProperty(l)}}function f8(t,e,n){t.prototype[e]=function(i,r,s,o){const[l,a,u]=Jr(this,e,n,i,r,s,o);return l.attributes[a]=u,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:a}),this}}function p8(t,e,n){t.prototype[e]=function(i,r,s,o){const[l,a,u]=Jr(this,e,n,i,r,s,o);if(typeof u!="function")throw new q(`Graph.${e}: updater should be a function.`);const c=l.attributes,d=u(c[a]);return c[a]=d,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:a}),this}}function m8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Jr(this,e,n,i,r,s);return delete o.attributes[l],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:l}),this}}function g8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Jr(this,e,n,i,r,s);if(!Nt(l))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=l,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function y8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Jr(this,e,n,i,r,s);if(!Nt(l))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return yt(o.attributes,l),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:l}),this}}function v8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Jr(this,e,n,i,r,s);if(typeof l!="function")throw new q(`Graph.${e}: provided updater is not a function.`);return o.attributes=l(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const w8=[{name:t=>`get${t}Attribute`,attacher:c8},{name:t=>`get${t}Attributes`,attacher:d8},{name:t=>`has${t}Attribute`,attacher:h8},{name:t=>`set${t}Attribute`,attacher:f8},{name:t=>`update${t}Attribute`,attacher:p8},{name:t=>`remove${t}Attribute`,attacher:m8},{name:t=>`replace${t}Attributes`,attacher:g8},{name:t=>`merge${t}Attributes`,attacher:y8},{name:t=>`update${t}Attributes`,attacher:v8}];function b8(t){w8.forEach(function({name:e,attacher:n}){n(t,e("Node"),DP),n(t,e("Source"),LP),n(t,e("Target"),u8),n(t,e("Opposite"),IP)})}function x8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ae(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ae(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new ae(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function S8(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ae(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new ae(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=ii(this,s,o,n),!r)throw new X(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new ae(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function k8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ae(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ae(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new ae(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function C8(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ae(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ae(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,a=""+r;if(r=arguments[2],s=arguments[3],o=ii(this,l,a,n),!o)throw new X(`Graph.${e}: could not find an edge for the given path ("${l}" - "${a}").`)}else{if(n!=="mixed")throw new ae(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function E8(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ae(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ae(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,a=""+r;if(r=arguments[2],s=arguments[3],o=ii(this,l,a,n),!o)throw new X(`Graph.${e}: could not find an edge for the given path ("${l}" - "${a}").`)}else{if(n!=="mixed")throw new ae(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new q(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function A8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ae(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ae(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new ae(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function P8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ae(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ae(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new ae(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Nt(r))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function R8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ae(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ae(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new ae(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Nt(r))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return yt(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function M8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ae(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ae(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new ae(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new q(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const O8=[{name:t=>`get${t}Attribute`,attacher:x8},{name:t=>`get${t}Attributes`,attacher:S8},{name:t=>`has${t}Attribute`,attacher:k8},{name:t=>`set${t}Attribute`,attacher:C8},{name:t=>`update${t}Attribute`,attacher:E8},{name:t=>`remove${t}Attribute`,attacher:A8},{name:t=>`replace${t}Attributes`,attacher:P8},{name:t=>`merge${t}Attributes`,attacher:R8},{name:t=>`update${t}Attributes`,attacher:M8}];function T8(t){O8.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const N8=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function D8(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function L8(t,e,n,i){let r,s,o,l=!1;for(const a in e)if(a!==i){r=e[a];do{if(s=r.source,o=r.target,l=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&l)return r.key;r=r.next}while(r!==void 0)}}function Tm(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new oi(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const l=n[s++];if(l===e){r=void 0;continue}r=t[l]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function I8(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function B8(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function Nm(t,e){let n=t[e];return n.next!==void 0?new oi(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):oi.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function _8(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):RP(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,l,a;for(;l=s.next(),l.done!==!0;)a=l.value,a.undirected===r&&(i[o++]=a.key);return i}function BP(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,l,a=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(l=o.value,r&&l.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=l;if(a=i(c,d,h.key,f.key,h.attributes,f.attributes,l.undirected),t&&a)return c}}function $8(t,e){if(t.size===0)return oi.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new oi(function(){let o,l;for(;;){if(o=r.next(),o.done)return o;if(l=o.value,!(n&&l.undirected!==i))break}return{value:{edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected},done:!1}})}function Yv(t,e,n,i,r,s){const o=e?L8:D8;let l;if(n!=="undirected"&&(i!=="out"&&(l=o(t,r.in,s),t&&l)||i!=="in"&&(l=o(t,r.out,s,i?void 0:r.key),t&&l))||n!=="directed"&&(l=o(t,r.undirected,s),t&&l))return l}function F8(t,e,n,i){const r=[];return Yv(!1,t,e,n,i,function(s){r.push(s)}),r}function z8(t,e,n){let i=oi.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Dr(i,Tm(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Dr(i,Tm(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Dr(i,Tm(n.undirected))),i}function Kv(t,e,n,i,r,s,o){const l=n?B8:I8;let a;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(a=l(t,r.in,s,o),t&&a)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(a=l(t,r.out,s,o),t&&a))||e!=="directed"&&typeof r.undirected<"u"&&(a=l(t,r.undirected,s,o),t&&a))return a}function j8(t,e,n,i,r){const s=[];return Kv(!1,t,e,n,i,r,function(o){s.push(o)}),s}function U8(t,e,n,i){let r=oi.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Dr(r,Nm(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Dr(r,Nm(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Dr(r,Nm(n.undirected,i))),r}function V8(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return _8(this,i);if(arguments.length===1){s=""+s;const l=this._nodes.get(s);if(typeof l>"u")throw new X(`Graph.${n}: could not find the "${s}" node in the graph.`);return F8(this.multi,i==="mixed"?this.type:i,r,l)}if(arguments.length===2){s=""+s,o=""+o;const l=this._nodes.get(s);if(!l)throw new X(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new X(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return j8(i,this.multi,r,l,o)}throw new q(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function H8(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,BP(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new X(`Graph.${s}: could not find the "${u}" node in the graph.`);return Yv(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new X(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new X(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return Kv(!1,i,this.multi,r,h,c,d)}throw new q(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,g,v,m,y,w,b)=>{d[f++]=c(p,g,v,m,y,w,b)})}else d=[],u.push((h,f,p,g,v,m,y)=>{d.push(c(h,f,p,g,v,m,y))});return this[s].apply(this,u),d};const l="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,g,v,m,y)=>{c(h,f,p,g,v,m,y)&&d.push(h)}),this[s].apply(this,u),d};const a="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new q(`Graph.${a}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new q(`Graph.${a}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,g,v,m,y,w)=>{h=c(h,f,p,g,v,m,y,w)}),this[s].apply(this,u),h}}function W8(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(a,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=a,BP(!0,this,i,c);if(arguments.length===2){a=""+a,c=u;const d=this._nodes.get(a);if(typeof d>"u")throw new X(`Graph.${s}: could not find the "${a}" node in the graph.`);return Yv(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){a=""+a,u=""+u;const d=this._nodes.get(a);if(!d)throw new X(`Graph.${s}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(u))throw new X(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return Kv(!0,i,this.multi,r,d,u,c)}throw new q(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const a=Array.prototype.slice.call(arguments),u=a.pop();return a.push((d,h,f,p,g,v,m)=>u(d,h,f,p,g,v,m)),!!this[s].apply(this,a)};const l="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[l]=function(){const a=Array.prototype.slice.call(arguments),u=a.pop();return a.push((d,h,f,p,g,v,m)=>!u(d,h,f,p,g,v,m)),!this[s].apply(this,a)}}function G8(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,l){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return oi.empty();if(!arguments.length)return $8(this,i);if(arguments.length===1){o=""+o;const a=this._nodes.get(o);if(!a)throw new X(`Graph.${s}: could not find the "${o}" node in the graph.`);return z8(i,r,a)}if(arguments.length===2){o=""+o,l=""+l;const a=this._nodes.get(o);if(!a)throw new X(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(l))throw new X(`Graph.${s}:  could not find the "${l}" target node in the graph.`);return U8(i,r,a,l)}throw new q(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function X8(t){N8.forEach(e=>{V8(t,e),H8(t,e),W8(t,e),G8(t,e)})}const J8=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function rp(){this.A=null,this.B=null}rp.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};rp.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Ba(t,e,n,i,r){for(const s in i){const o=i[s],l=o.source,a=o.target,u=l===n?a:l;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function qv(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Ba(t,null,i,i.undirected,r);if(typeof n=="string")return Ba(t,null,i,i[n],r)}const s=new rp;let o;if(e!=="undirected"){if(n!=="out"){if(o=Ba(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Ba(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Ba(t,s,i,i.undirected,r),t&&o))return o}function Y8(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return qv(!1,t,e,n,function(r){i.push(r)}),i}function _a(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new oi(function(){let l=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const a=n[i[s++]],u=a.source,c=a.target;if(l=u===e?c:u,t&&t.has(l.key)){l=null;continue}}while(l===null);return{done:!1,value:{neighbor:l.key,attributes:l.attributes}}})}function K8(t,e,n){if(t!=="mixed"){if(t==="undirected")return _a(null,n,n.undirected);if(typeof e=="string")return _a(null,n,n[e])}let i=oi.empty();const r=new rp;return t!=="undirected"&&(e!=="out"&&(i=Dr(i,_a(r,n,n.in))),e!=="in"&&(i=Dr(i,_a(r,n,n.out)))),t!=="directed"&&(i=Dr(i,_a(r,n,n.undirected))),i}function q8(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new X(`Graph.${n}: could not find the "${s}" node in the graph.`);return Y8(i==="mixed"?this.type:i,r,o)}}function Q8(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new X(`Graph.${s}: could not find the "${u}" node in the graph.`);qv(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const l="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const a="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c,d){if(arguments.length<3)throw new q(`Graph.${a}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function Z8(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new X(`Graph.${o}: could not find the "${u}" node in the graph.`);return qv(!0,i==="mixed"?this.type:i,r,d,c)};const l="some"+s;t.prototype[l]=function(u,c){return!!this[o](u,c)};const a="every"+s;t.prototype[a]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function e_(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return oi.empty();o=""+o;const l=this._nodes.get(o);if(typeof l>"u")throw new X(`Graph.${s}: could not find the "${o}" node in the graph.`);return K8(i==="mixed"?this.type:i,r,l)}}function t_(t){J8.forEach(e=>{q8(t,e),Q8(t,e),Z8(t,e),e_(t,e)})}function fd(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let l,a,u,c,d,h,f;for(;l=s.next(),l.done!==!0;){let p=!1;if(a=l.value,o!=="undirected"){c=a.out;for(u in c){d=c[u];do{if(h=d.target,p=!0,f=r(a.key,h.key,a.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(o!=="directed"){c=a.undirected;for(u in c)if(!(e&&a.key>u)){d=c[u];do{if(h=d.target,h.key!==u&&(h=d.source),p=!0,f=r(a.key,h.key,a.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(n&&!p&&(f=r(a.key,null,a.attributes,null,null,null,null),t&&f))return null}}function n_(t,e){const n={key:t};return MP(e.attributes)||(n.attributes=yt({},e.attributes)),n}function i_(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return MP(n.attributes)||(i.attributes=yt({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function r_(t){if(!Nt(t))throw new q('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new q("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Nt(t.attributes)||t.attributes===null))throw new q("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function s_(t){if(!Nt(t))throw new q('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new q("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new q("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Nt(t.attributes)||t.attributes===null))throw new q("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new q("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const o_=a8(),l_=new Set(["directed","undirected","mixed"]),Vx=new Set(["domain","_events","_eventsCount","_maxListeners"]),a_=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],u_={allowSelfLoops:!0,multi:!1,type:"mixed"};function c_(t,e,n){if(n&&!Nt(n))throw new q(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new ae(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function Hx(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function _P(t,e,n,i,r,s,o,l){if(!i&&t.type==="undirected")throw new ae(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new ae(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(l&&!Nt(l))throw new q(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`);if(s=""+s,o=""+o,l=l||{},!t.allowSelfLoops&&s===o)throw new ae(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const a=t._nodes.get(s),u=t._nodes.get(o);if(!a)throw new X(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new X(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:l};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new ae(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof a.undirected[o]<"u":typeof a.out[o]<"u"))throw new ae(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new ma(i,r,a,u,l);t._edges.set(r,d);const h=s===o;return i?(a.undirectedDegree++,u.undirectedDegree++,h&&(a.undirectedLoops++,t._undirectedSelfLoopCount++)):(a.outDegree++,u.inDegree++,h&&(a.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function d_(t,e,n,i,r,s,o,l,a){if(!i&&t.type==="undirected")throw new ae(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new ae(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(l){if(a){if(typeof l!="function")throw new q(`Graph.${e}: invalid updater function. Expecting a function but got "${l}"`)}else if(!Nt(l))throw new q(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`)}s=""+s,o=""+o;let u;if(a&&(u=l,l=void 0),!t.allowSelfLoops&&s===o)throw new ae(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new ae(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(a?!u:!l)return y;if(a){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else yt(f.attributes,l),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:l});return y}l=l||{},a&&u&&(l=u(l));const p={key:null,undirected:i,source:s,target:o,attributes:l};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new ae(`Graph.${e}: the "${r}" edge already exists in the graph.`);let g=!1,v=!1;c||(c=Hx(t,s,{}),g=!0,s===o&&(d=c,v=!0)),d||(d=Hx(t,o,{}),v=!0),h=new ma(i,r,c,d,l),t._edges.set(r,h);const m=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,m&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,m&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,g,v]}function Yo(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class De extends qB.EventEmitter{constructor(e){if(super(),e=yt({},u_,e),typeof e.multi!="boolean")throw new q(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!l_.has(e.type))throw new q(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new q(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?OP:e.type==="directed"?TP:NP;Un(this,"NodeDataClass",n);const i="geid_"+o_()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Un(this,"_attributes",{}),Un(this,"_nodes",new Map),Un(this,"_edges",new Map),Un(this,"_directedSize",0),Un(this,"_undirectedSize",0),Un(this,"_directedSelfLoopCount",0),Un(this,"_undirectedSelfLoopCount",0),Un(this,"_edgeKeyGenerator",s),Un(this,"_options",e),Vx.forEach(o=>Un(this,o,this[o])),ui(this,"order",()=>this._nodes.size),ui(this,"size",()=>this._edges.size),ui(this,"directedSize",()=>this._directedSize),ui(this,"undirectedSize",()=>this._undirectedSize),ui(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ui(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ui(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ui(this,"multi",this._options.multi),ui(this,"type",this._options.type),ui(this,"allowSelfLoops",this._options.allowSelfLoops),ui(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new q(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new q(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new q(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new ae("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new X(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new ae("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new X(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new ae("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new X(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new X(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new X(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return c_(this,e,n).key}mergeNode(e,n){if(n&&!Nt(n))throw new q(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(yt(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new q(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do Yo(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do Yo(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do Yo(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=ii(this,i,r,this.type),!n)throw new X(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new X(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Yo(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new ae("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ae("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=ii(this,e,n,"directed");if(!i)throw new X(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Yo(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new ae("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ae("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=ii(this,e,n,"undirected");if(!i)throw new X(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Yo(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new q("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Nt(e))throw new q("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Nt(e))throw new q("Graph.mergeAttributes: provided attributes are not a plain object.");return yt(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new q("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new q("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!Ux(n))throw new q("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new q("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!Ux(n))throw new q("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,l;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,l=s.target,s.attributes=e(s.key,s.attributes,o.key,l.key,o.attributes,l.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new q("Graph.forEachAdjacencyEntry: expecting a callback.");fd(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new q("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");fd(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new q("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");fd(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new q("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");fd(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):RP(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new q("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new q("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new q("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new q("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new q("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new q("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new q("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new q("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new oi(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=n_(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=i_(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof De)return e.forEachNode((a,u)=>{n?this.mergeNode(a,u):this.addNode(a,u)}),e.forEachEdge((a,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(a,c,d,u):this.mergeDirectedEdgeWithKey(a,c,d,u):p?this.addUndirectedEdgeWithKey(a,c,d,u):this.addDirectedEdgeWithKey(a,c,d,u)}),this;if(!Nt(e))throw new q("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Nt(e.attributes))throw new q("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,l;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new q("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],r_(o);const{key:a,attributes:u}=o;n?this.mergeNode(a,u):this.addNode(a,u)}}if(e.edges){let a=!1;if(this.type==="undirected"&&(a=!0),s=e.edges,!Array.isArray(s))throw new q("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){l=s[i],s_(l);const{source:u,target:c,attributes:d,undirected:h=a}=l;let f;"key"in l?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,l.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new De(yt({},this._options,e));return n.replaceAttributes(yt({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=yt({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new ae(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new ae("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new ae("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,_P(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,yt({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const l=s.undirected?"--":"->";let a="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${l}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,a+=`${i[h]}. `):a+=`[${o}]: `,a+=h,n[a]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!Vx.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,Un(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(De.prototype[Symbol.for("nodejs.util.inspect.custom")]=De.prototype.inspect);a_.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?_P:d_;t.generateKey?De.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:De.prototype[n]=function(r,s,o,l){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,l,e==="update")}})});b8(De);T8(De);X8(De);t_(De);class $P extends De{constructor(e){const n=yt({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new q("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new q('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Qv extends De{constructor(e){const n=yt({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new q("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new q('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class FP extends De{constructor(e){const n=yt({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new q("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class zP extends De{constructor(e){const n=yt({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new q("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new q('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class jP extends De{constructor(e){const n=yt({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new q("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new q('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function ga(t){t.from=function(e,n){const i=yt({},e.options,n),r=new t(i);return r.import(e),r}}ga(De);ga($P);ga(Qv);ga(FP);ga(zP);ga(jP);De.Graph=De;De.DirectedGraph=$P;De.UndirectedGraph=Qv;De.MultiGraph=FP;De.MultiDirectedGraph=zP;De.MultiUndirectedGraph=jP;De.InvalidArgumentsGraphError=q;De.NotFoundGraphError=X;De.UsageGraphError=ae;var h_=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},UP=ip,f_=UP.ARRAY_BUFFER_SUPPORT,p_=UP.SYMBOL_SUPPORT,m_=function(e,n){var i,r,s,o,l;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||f_&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(p_&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;l=i.next(),l.done!==!0;)n(l.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},VP=np,g_=m_;function pt(){this.clear()}pt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};pt.prototype.enqueue=function(t){return this.items.push(t),++this.size};pt.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};pt.prototype.peek=function(){if(this.size)return this.items[this.offset]};pt.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};pt.prototype.toArray=function(){return this.items.slice(this.offset)};pt.prototype.values=function(){var t=this.items,e=this.offset;return new VP(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};pt.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new VP(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(pt.prototype[Symbol.iterator]=pt.prototype.values);pt.prototype.toString=function(){return this.toArray().join(",")};pt.prototype.toJSON=function(){return this.toArray()};pt.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:pt,enumerable:!1}),t};typeof Symbol<"u"&&(pt.prototype[Symbol.for("nodejs.util.inspect.custom")]=pt.prototype.inspect);pt.from=function(t){var e=new pt;return g_(t,function(n){e.enqueue(n)}),e};pt.of=function(){return pt.from(arguments)};var y_=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},HP=h_,v_=y_;function w_(t,e,n){if(!HP(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var l=[e],a=[n],u,c,d,h,f,p,g,v,m=!1;e:for(;l.length&&a.length;)if(l.length<=a.length){for(u=l,l=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=r(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in s||(l.push(h),s[h]=c),h in o){m=!0;break e}}else for(u=a,a=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=i(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in o||(a.push(h),o[h]=c),h in s){m=!0;break e}if(!m)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function WP(t,e,n){if(!HP(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],l,a,u;o.length!==0;){var c=[];for(l=0,a=o.length;l<a;l++)u=o[l],!i.has(u)&&(i.add(u),v_(c,e[t](u)),r[u]=s);s++,o=c}return r}WP.bind(null,"outboundNeighbors");WP.bind(null,"neighbors");var b_=w_;const Z=new Qv({allowSelfLoops:!1});Z.addNode("MBR",{position:[610,250]});Z.addNode("AX",{position:[522,45]});Z.addNode("BX",{position:[522,85]});Z.addNode("CX",{position:[522,125]});Z.addNode("DX",{position:[522,165]});Z.addNode("id",{position:[522,205]});Z.addNode("IP",{position:[451,309]});Z.addNode("SP",{position:[451,349]});Z.addNode("ri",{position:[451,388]});Z.addNode("result",{position:[370,130]});Z.addNode("FLAGS",{position:[250,225]});Z.addNode("IR",{position:[205,272]});Z.addNode("left",{position:[60,85]});Z.addNode("right",{position:[60,145]});Z.addNode("AX join",{position:[492,45]});Z.addNode("BX join",{position:[492,85]});Z.addNode("CX join",{position:[492,125]});Z.addNode("DX join",{position:[492,165]});Z.addNode("id join",{position:[492,205]});Z.addNode("data mbr join",{position:[492,250]});Z.addNode("IP join",{position:[421,309]});Z.addNode("SP join",{position:[421,349]});Z.addNode("ri join",{position:[421,388]});Z.addNode("addresses mbr join",{position:[421,250]});Z.addNode("result mbr join",{position:[370,250]});Z.addNode("FLAGS mbr join",{position:[250,250]});Z.addNode("IR mbr join",{position:[205,250]});Z.addNode("left join",{position:[30,85]});Z.addNode("right join",{position:[30,145]});Z.addNode("operands mbr join",{position:[30,250]});Z.addUndirectedEdge("AX","AX join");Z.addUndirectedEdge("BX","BX join");Z.addUndirectedEdge("CX","CX join");Z.addUndirectedEdge("DX","DX join");Z.addUndirectedEdge("id","id join");Z.addUndirectedEdge("AX join","BX join");Z.addUndirectedEdge("BX join","CX join");Z.addUndirectedEdge("CX join","DX join");Z.addUndirectedEdge("DX join","id join");Z.addUndirectedEdge("id join","data mbr join");Z.addUndirectedEdge("data mbr join","MBR");Z.addUndirectedEdge("IP","IP join");Z.addUndirectedEdge("SP","SP join");Z.addUndirectedEdge("ri","ri join");Z.addUndirectedEdge("IP join","SP join");Z.addUndirectedEdge("SP join","ri join");Z.addUndirectedEdge("IP join","addresses mbr join");Z.addUndirectedEdge("addresses mbr join","data mbr join");Z.addUndirectedEdge("result","result mbr join");Z.addUndirectedEdge("result mbr join","addresses mbr join");Z.addUndirectedEdge("FLAGS","FLAGS mbr join");Z.addUndirectedEdge("FLAGS mbr join","result mbr join");Z.addUndirectedEdge("IR","IR mbr join");Z.addUndirectedEdge("IR mbr join","FLAGS mbr join");Z.addUndirectedEdge("left","left join");Z.addUndirectedEdge("right","right join");Z.addUndirectedEdge("left join","right join");Z.addUndirectedEdge("right join","operands mbr join");Z.addUndirectedEdge("operands mbr join","IR mbr join");function x_(t,e){const n=b_(Z,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const i=Z.getNodeAttribute(n[0],"position");let r=`M ${i[0]} ${i[1]}`;for(let s=1;s<n.length;s++){const[o,l]=Z.getNodeAttribute(n[s],"position");r+=` L ${o} ${l}`}return r}function S_(){const{path:t,...e}=Tt({ref:Ee.cpu.internalBus.data,from:{strokeDashoffset:1,opacity:1,path:""}});return k.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[k.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 272 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),k.jsx(ct.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const Dm=(t,e)=>{const n=x_(t,e);return ve("cpu.internalBus.data",{from:{strokeDashoffset:1,opacity:1,path:n},to:{strokeDashoffset:0}},{duration:5,easing:"easeInOutSine"})},Lm=()=>ve("cpu.internalBus.data",{opacity:0},{duration:1,easing:"easeInSine"});async function k_(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"},n={duration:1,easing:"easeInSine"};await ve("cpu.alu.operands",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},e),G.set(TA,t.operation),await Promise.all([ve("cpu.alu.operation",{backgroundColor:it.mantis[400]},{duration:1,easing:"easeOutQuart"}),ve("cpu.alu.cog",{rot:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([ve("cpu.alu.operation",{backgroundColor:it.stone[800]},{duration:1,easing:"easeOutQuart"}),ve("cpu.alu.results",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},e)]),await Promise.all([hr("cpu.result"),hr("cpu.FLAGS")]),G.set(Fe.FLAGS,t.flags),G.set(Fe.result,t.result),await Promise.all([fr("cpu.result"),fr("cpu.FLAGS")]),await Promise.all([ve("cpu.alu.operands",{opacity:0},n),ve("cpu.alu.results",{opacity:0},n)]);return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{G.set(so,e=>e.phase==="stopped"?e:{...e,phase:"interrupt"}),await Promise.all([ve("cpu.id",{opacity:1},{duration:.5,easing:"easeInOutQuad"}),ve("cpu.ri",{opacity:1},{duration:.5,easing:"easeInOutQuad"})]);return}case"cpu:cycle.start":{EA(t.instruction.position.start),G.set(so,{phase:"fetching",metadata:t.instruction}),await Promise.all([ve("cpu.id",{opacity:t.instruction.willUse.id?1:.4},{duration:.5,easing:"easeInOutQuad"}),ve("cpu.ri",{opacity:t.instruction.willUse.ri?1:.4},{duration:.5,easing:"easeInOutQuad"})]);return}case"cpu:cycle.update":{G.set(so,e=>e.phase==="stopped"?e:{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase});return}case"cpu:decode":{await ve("cpu.decoder.path",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},{duration:3,easing:"easeInOutSine"}),await ve("cpu.decoder.progress",{from:{progress:0,opacity:1},to:{progress:1}},{duration:3,easing:"easeInOutSine"}),await Promise.all([ve("cpu.decoder.progress",{opacity:0},{duration:1,easing:"easeInSine"}),ve("cpu.decoder.path",{opacity:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:error":{G.set(so,{phase:"stopped",error:t.error}),Do(t.error);return}case"cpu:halt":case"cpu:int.0":{G.set(so,{phase:"stopped"}),Do();return}case"cpu:int.3":{D_();return}case"cpu:int.6":return;case"cpu:int.7":return;case"cpu:inta.off":{await na("inta");return}case"cpu:inta.on":{await ta("inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type==="cpu:rd.on"?"rd":"wr";await ve(`bus.${e}`,{stroke:it.red[500]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await ta("iom",15);return}case"cpu:mar.set":{const e=VB(t.register);await ve("cpu.internalBus.address",{from:{strokeDashoffset:1,opacity:1,path:e},to:{strokeDashoffset:0}},{duration:5,easing:"easeInOutSine"}),await hr("cpu.MAR",it.blue[500]),G.set(OA,G.get(Fe[t.register])),await ve("bus.address",{stroke:it.blue[500]},{duration:5,easing:"easeOutSine"}),await Promise.all([fr("cpu.MAR"),ve("cpu.internalBus.address",{opacity:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=io(t.register);await Dm("MBR",e),await hr(`cpu.${e}`),G.set(Fe[t.register],G.get(Zl)),await Promise.all([fr(`cpu.${e}`),Lm()]);return}case"cpu:mbr.set":{const[e]=io(t.register);await Dm(e,"MBR"),await hr("cpu.MBR"),G.set(Zl,G.get(Fe[t.register])),await ve("bus.data",{stroke:it.mantis[400]},{duration:5,easing:"easeOutSine"}),await Promise.all([fr("cpu.MBR"),Lm()]);return}case"cpu:register.copy":{const[e]=io(t.src),[n]=io(t.dest);e!==n&&await Dm(e,n),await hr(`cpu.${n}`),G.set(Fe[t.dest],G.get(Fe[t.src])),await Promise.all([fr(`cpu.${n}`),e!==n&&Lm()]);return}case"cpu:register.update":{const[e]=io(t.register);await hr(`cpu.${e}`),G.set(Fe[t.register],t.value),await fr(`cpu.${e}`);return}default:return t}}async function C_(t){switch(t.type){case"f10:press":return;case"f10:int.off":{await na("int0");return}case"f10:int.on":{await ta("int0",10);return}default:return t}}async function E_(t){switch(t.type){case"memory:read":{oe.inRange(t.address)&&G.set(M0,oe.from(t.address));return}case"memory:read.ok":{await Jh(t.value);return}case"memory:write":{if(oe.inRange(t.address)){const e=Number(t.address);G.set(M0,oe.from(t.address)),G.set(Ev,n=>[...n.slice(0,e),t.value,...n.slice(e+1)])}return}case"memory:write.ok":return;case"memory:read.error":case"memory:write.error":{Do(t.error);return}default:return t}}async function A_(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Jh(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await hr(`pic.${t.register}`),t.register){case"IMR":{G.set(Av,t.value);break}case"IRR":{G.set(Pv,t.value);break}case"ISR":{G.set(Rv,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));G.set(Uh[e],t.value);break}default:return t}await fr(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await na("intr");return}case"pic:intr.on":{await ta("intr",10);return}case"pic:int.send":{await Jh(t.number);return}default:return t}}async function P_(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Jh(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await hr(`timer.${t.register}`),t.register){case"CONT":{G.set(Wv,t.value);break}case"COMP":{G.set(Gv,t.value);break}default:return t.register}await fr(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await na("int1");return}case"timer:int.on":{await ta("int1",10);return}default:return t}}const R_=ue("");async function M_(t){switch(t.type){case"console:read":{G.set(Zi,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{G.sub(Zi,()=>{const n=G.get(Zi);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"console:write":{G.set(R_,An.getComputerState().io.console);return}default:return t}}const O_={bus:"#2563eb",clock:"#65a30d",console:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",switches:"#65a30d",timer:"#2563eb"};async function T_(t){const[e,n]=t.type.split(":");console.group(`%c ${e} %c ${n}`,`background: ${O_[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof T?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof oe?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof xn?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r} %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}if(console.groupEnd(),e==="bus")return await jB(t);if(e==="clock")return await UB(t);if(e==="console")return M_(t);if(e==="cpu")return await k_(t);if(e==="f10")return await C_(t);if(e==="handshake")return BB(t);if(e==="leds")return _B(t);if(e==="memory")return await E_(t);if(e==="pic")return await A_(t);if(e==="pio")return $B(t);if(e==="printer")return FB(t);if(e==="switches")return zB(t);if(e==="timer")return await P_(t);throw new Error(`Unknown event type: ${t.type}`)}function N_(t){const e=t.translate(wc());_f.error(e)}const An=new g4,Zi=ue({type:"stopped"}),Zv=()=>G.get(Zi);function Do(t){t&&N_(t),EA(null),CA(!1),G.set(Zi,{type:"stopped",error:t}),LB()}function D_(){G.set(Zi,{type:"paused"})}function L_(){_f.error(Gf(wc(),"messages.assemble-error"))}function $a(){_f.error(Gf(wc(),"messages.invalid-action"))}function I_(t){cI(t),hI(t),fI(t),IB(t),"handshake"in t.io&&(G.set(cP,T.fromUnsigned(t.io.handshake.DATA,8)),G.set(dP,T.fromUnsigned(t.io.handshake.STATE,8))),"leds"in t.io&&G.set(hP,T.fromUnsigned(t.io.leds,8)),"pio"in t.io&&(G.set(fP,T.fromUnsigned(t.io.pio.PA,8)),G.set(pP,T.fromUnsigned(t.io.pio.PB,8)),G.set(mP,T.fromUnsigned(t.io.pio.CA,8)),G.set(gP,T.fromUnsigned(t.io.pio.CB,8))),"printer"in t.io&&(G.set(V0,t.io.printer.buffer.map(e=>T.fromUnsigned(e,8))),G.set(H0,t.io.printer.paper)),"switches"in t.io&&G.set(yP,T.fromUnsigned(t.io.switches,8))}async function B_(...t){const e=t[0],n=Zv();switch(e){case"cpu.run":{if(n.type==="running")return $a();if(n.type==="stopped"){if(!window.codemirror)return;const i=window.codemirror.state.doc.toString(),r=YC(i);if(!r.success)return L_();CA(!0),An.loadProgram({program:r,data:oI(),devices:lI()}),I_(An.getComputerState()),G.set(Zi,{type:"running",until:"infinity"}),qo(An.startCPU()),__()}else G.set(Zi,{type:"running",until:"infinity",waitingForInput:!1}),DB();return}case"cpu.stop":{Do();return}case"f10.press":{if(n.type!=="running")return $a();qo(An.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!An.devices.switches.connected())return $a();const i=t[1];qo(An.devices.switches.toggle(i));return}case"console.handleKey":{if(n.type!=="running"||!n.waitingForInput)return $a();const i=t[1];let r;if(i.inputType==="insertLineBreak")r=`
`;else if(i.inputType==="insertText"||i.inputType==="insertCompositionText"){if(!i.data)return;r=i.data}else return;An.devices.console.readChar(T.fromChar(r)),G.set(Zi,{...n,waitingForInput:!1});return}case"console.clean":{qo(An.devices.console.clear());return}case"printer.clean":{if(!An.devices.printer.connected())return $a();qo(An.devices.printer.clear());return}default:return e}}async function qo(t){try{for(;Zv().type==="running";){const e=t.next();if(e.done)break;await T_(e.value)}t.return()}catch(e){const n=at.from(e);Do(n)}}async function __(){try{for(;Zv().type==="running";){const t=MA().clock;await ve("clock",{from:{angle:0},to:{angle:360}},{duration:t,easing:"linear"}),qo(An.devices.clock.tick())}}catch(t){const e=at.from(t);Do(e)}}function sp(){return[Vr(Zi),B_]}const $_=()=>Vr(kv),F_=()=>Vr(Cv);function Cc(){const t=$_();return(e,...n)=>Gf(t,e,...n)}function Wx(){const t=Cc(),[e,n]=Ja(Cv),[i,r]=sp(),s=S.useCallback(o=>{o.key==="F5"?(o.preventDefault(),o.shiftKey?r("cpu.stop"):r("cpu.run")):o.key==="F11"&&(o.preventDefault(),r("cpu.step"))},[r]);return BC("keydown",s,void 0,[r]),k.jsxs("div",{className:"flex items-center justify-center gap-4 lg:h-full lg:justify-start",children:[k.jsxs("button",{className:"flex w-min items-center gap-1 rounded-md bg-mantis-500 p-2 text-mantis-50 transition-colors hover:enabled:bg-mantis-600 hover:enabled:text-white disabled:opacity-40",disabled:i.type==="running",onClick:()=>r("cpu.run"),children:[k.jsx("span",{className:"icon-[lucide--play] block h-5 w-5"}),k.jsx("span",{className:"whitespace-nowrap font-semibold tracking-wide",children:t("runner.action.start")})]}),k.jsx("input",{type:"range",className:"rotate-180",min:5,max:300,step:5,value:e.executionUnit,onChange:o=>n({...e,executionUnit:o.currentTarget.valueAsNumber})})]})}var z_=Object.defineProperty,j_=(t,e,n)=>e in t?z_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Im=(t,e,n)=>(j_(t,typeof e!="symbol"?e+"":e,n),n);let U_=class{constructor(){Im(this,"current",this.detect()),Im(this,"handoffState","pending"),Im(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Lr=new U_,ir=(t,e)=>{Lr.isServer?S.useEffect(t,e):S.useLayoutEffect(t,e)};function ki(t){let e=S.useRef(t);return ir(()=>{e.current=t},[t]),e}function GP(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Ec(){let t=[],e={addEventListener(n,i,r,s){return n.addEventListener(i,r,s),e.add(()=>n.removeEventListener(i,r,s))},requestAnimationFrame(...n){let i=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(i))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let i=setTimeout(...n);return e.add(()=>clearTimeout(i))},microTask(...n){let i={current:!0};return GP(()=>{i.current&&n[0]()}),e.add(()=>{i.current=!1})},style(n,i,r){let s=n.style.getPropertyValue(i);return Object.assign(n.style,{[i]:r}),this.add(()=>{Object.assign(n.style,{[i]:s})})},group(n){let i=Ec();return n(i),this.add(()=>i.dispose())},add(n){return t.push(n),()=>{let i=t.indexOf(n);if(i>=0)for(let r of t.splice(i,1))r()}},dispose(){for(let n of t.splice(0))n()}};return e}function XP(){let[t]=S.useState(Ec);return S.useEffect(()=>()=>t.dispose(),[t]),t}let Re=function(t){let e=ki(t);return U.useCallback((...n)=>e.current(...n),[e])};function op(){let[t,e]=S.useState(Lr.isHandoffComplete);return t&&Lr.isHandoffComplete===!1&&e(!1),S.useEffect(()=>{t!==!0&&e(!0)},[t]),S.useEffect(()=>Lr.handoff(),[]),t}var Gx;let Tl=(Gx=U.useId)!=null?Gx:function(){let t=op(),[e,n]=U.useState(t?()=>Lr.nextId():null);return ir(()=>{e===null&&n(Lr.nextId())},[e]),e!=null?""+e:void 0};function kt(t,e,...n){if(t in e){let r=e[t];return typeof r=="function"?r(...n):r}let i=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,kt),i}function ew(t){return Lr.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let W0=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Rr=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Rr||{}),Yh=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(Yh||{}),V_=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(V_||{});function lp(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(W0)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var tw=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(tw||{});function JP(t,e=0){var n;return t===((n=ew(t))==null?void 0:n.body)?!1:kt(e,{0(){return t.matches(W0)},1(){let i=t;for(;i!==null;){if(i.matches(W0))return!0;i=i.parentElement}return!1}})}var H_=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(H_||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let W_=["textarea","input"].join(",");function G_(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,W_))!=null?n:!1}function X_(t,e=n=>n){return t.slice().sort((n,i)=>{let r=e(n),s=e(i);if(r===null||s===null)return 0;let o=r.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function mo(t,e,{sorted:n=!0,relativeTo:i=null,skipElements:r=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?X_(t):t:lp(t);r.length>0&&o.length>1&&(o=o.filter(f=>!r.includes(f))),i=i??s.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(i))-1;if(e&4)return Math.max(0,o.indexOf(i))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},c=0,d=o.length,h;do{if(c>=d||c+d<=0)return 0;let f=a+c;if(e&16)f=(f+d)%d;else{if(f<0)return 3;if(f>=d)return 1}h=o[f],h==null||h.focus(u),c+=l}while(h!==s.activeElement);return e&6&&G_(h)&&h.select(),2}function pd(t,e,n){let i=ki(e);S.useEffect(()=>{function r(s){i.current(s)}return document.addEventListener(t,r,n),()=>document.removeEventListener(t,r,n)},[t,n])}function YP(t,e,n){let i=ki(e);S.useEffect(()=>{function r(s){i.current(s)}return window.addEventListener(t,r,n),()=>window.removeEventListener(t,r,n)},[t,n])}function J_(t,e,n=!0){let i=S.useRef(!1);S.useEffect(()=>{requestAnimationFrame(()=>{i.current=n})},[n]);function r(o,l){if(!i.current||o.defaultPrevented)return;let a=l(o);if(a===null||!a.getRootNode().contains(a)||!a.isConnected)return;let u=function c(d){return typeof d=="function"?c(d()):Array.isArray(d)||d instanceof Set?d:[d]}(t);for(let c of u){if(c===null)continue;let d=c instanceof HTMLElement?c:c.current;if(d!=null&&d.contains(a)||o.composed&&o.composedPath().includes(d))return}return!JP(a,tw.Loose)&&a.tabIndex!==-1&&o.preventDefault(),e(o,a)}let s=S.useRef(null);pd("pointerdown",o=>{var l,a;i.current&&(s.current=((a=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:a[0])||o.target)},!0),pd("mousedown",o=>{var l,a;i.current&&(s.current=((a=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:a[0])||o.target)},!0),pd("click",o=>{s.current&&(r(o,()=>s.current),s.current=null)},!0),pd("touchend",o=>r(o,()=>o.target instanceof HTMLElement?o.target:null),!0),YP("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Xx(t){var e;if(t.type)return t.type;let n=(e=t.as)!=null?e:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function Y_(t,e){let[n,i]=S.useState(()=>Xx(t));return ir(()=>{i(Xx(t))},[t.type,t.as]),ir(()=>{n||e.current&&e.current instanceof HTMLButtonElement&&!e.current.hasAttribute("type")&&i("button")},[n,e]),n}let KP=Symbol();function qP(t,e=!0){return Object.assign(t,{[KP]:e})}function rr(...t){let e=S.useRef(t);S.useEffect(()=>{e.current=t},[t]);let n=Re(i=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(i):r.current=i)});return t.every(i=>i==null||(i==null?void 0:i[KP]))?void 0:n}function G0(...t){return t.filter(Boolean).join(" ")}var ia=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(ia||{}),Mr=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Mr||{});function lr({ourProps:t,theirProps:e,slot:n,defaultTag:i,features:r,visible:s=!0,name:o}){let l=QP(e,t);if(s)return md(l,n,i,o);let a=r??0;if(a&2){let{static:u=!1,...c}=l;if(u)return md(c,n,i,o)}if(a&1){let{unmount:u=!0,...c}=l;return kt(u?0:1,{0(){return null},1(){return md({...c,hidden:!0,style:{display:"none"}},n,i,o)}})}return md(l,n,i,o)}function md(t,e={},n,i){let{as:r=n,children:s,refName:o="ref",...l}=Bm(t,["unmount","static"]),a=t.ref!==void 0?{[o]:t.ref}:{},u=typeof s=="function"?s(e):s;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e));let c={};if(e){let d=!1,h=[];for(let[f,p]of Object.entries(e))typeof p=="boolean"&&(d=!0),p===!0&&h.push(f);d&&(c["data-headlessui-state"]=h.join(" "))}if(r===S.Fragment&&Object.keys(Jx(l)).length>0){if(!S.isValidElement(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`));let d=u.props,h=typeof(d==null?void 0:d.className)=="function"?(...p)=>G0(d==null?void 0:d.className(...p),l.className):G0(d==null?void 0:d.className,l.className),f=h?{className:h}:{};return S.cloneElement(u,Object.assign({},QP(u.props,Jx(Bm(l,["ref"]))),c,a,K_(u.ref,a.ref),f))}return S.createElement(r,Object.assign({},Bm(l,["ref"]),r!==S.Fragment&&a,r!==S.Fragment&&c),u)}function K_(...t){return{ref:t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}}function QP(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let i of t)for(let r in i)r.startsWith("on")&&typeof i[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(i[r])):e[r]=i[r];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(i=>[i,void 0])));for(let i in n)Object.assign(e,{[i](r,...s){let o=n[i];for(let l of o){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;l(r,...s)}}});return e}function Ri(t){var e;return Object.assign(S.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Jx(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function Bm(t,e=[]){let n=Object.assign({},t);for(let i of e)i in n&&delete n[i];return n}function ZP(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let i=(e==null?void 0:e.getAttribute("disabled"))==="";return i&&q_(n)?!1:i}function q_(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let Q_="div";var Qu=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Qu||{});function Z_(t,e){let{features:n=1,...i}=t,r={ref:e,"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return lr({ourProps:r,theirProps:i,slot:{},defaultTag:Q_,name:"Hidden"})}let Kh=Ri(Z_),nw=S.createContext(null);nw.displayName="OpenClosedContext";var Qt=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Qt||{});function ap(){return S.useContext(nw)}function eR({value:t,children:e}){return U.createElement(nw.Provider,{value:t},e)}var is=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(is||{}),Or=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Or||{});function tR(){let t=S.useRef(0);return YP("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function iw(){let t=S.useRef(!1);return ir(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function ya(...t){return S.useMemo(()=>ew(...t),[...t])}function e$(t,e,n,i){let r=ki(n);S.useEffect(()=>{t=t??window;function s(o){r.current(o)}return t.addEventListener(e,s,i),()=>t.removeEventListener(e,s,i)},[t,e,i])}function t$(t){let e=Re(t),n=S.useRef(!1);S.useEffect(()=>(n.current=!1,()=>{n.current=!0,GP(()=>{n.current&&e()})}),[e])}let n$=S.createContext(!1);function i$(){return S.useContext(n$)}function r$(t){let e=i$(),n=S.useContext(nR),i=ya(t),[r,s]=S.useState(()=>{if(!e&&n!==null||Lr.isServer)return null;let o=i==null?void 0:i.getElementById("headlessui-portal-root");if(o)return o;if(i===null)return null;let l=i.createElement("div");return l.setAttribute("id","headlessui-portal-root"),i.body.appendChild(l)});return S.useEffect(()=>{r!==null&&(i!=null&&i.body.contains(r)||i==null||i.body.appendChild(r))},[r,i]),S.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),r}let s$=S.Fragment;function o$(t,e){let n=t,i=S.useRef(null),r=rr(qP(c=>{i.current=c}),e),s=ya(i),o=r$(i),[l]=S.useState(()=>{var c;return Lr.isServer?null:(c=s==null?void 0:s.createElement("div"))!=null?c:null}),a=S.useContext(X0),u=op();return ir(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),ir(()=>{if(l&&a)return a.register(l)},[a,l]),t$(()=>{var c;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((c=o.parentElement)==null||c.removeChild(o)))}),u?!o||!l?null:dc.createPortal(lr({ourProps:{ref:r},theirProps:n,defaultTag:s$,name:"Portal"}),l):null}let l$=S.Fragment,nR=S.createContext(null);function a$(t,e){let{target:n,...i}=t,r={ref:rr(e)};return U.createElement(nR.Provider,{value:n},lr({ourProps:r,theirProps:i,defaultTag:l$,name:"Popover.Group"}))}let X0=S.createContext(null);function u$(){let t=S.useContext(X0),e=S.useRef([]),n=Re(s=>(e.current.push(s),t&&t.register(s),()=>i(s))),i=Re(s=>{let o=e.current.indexOf(s);o!==-1&&e.current.splice(o,1),t&&t.unregister(s)}),r=S.useMemo(()=>({register:n,unregister:i,portals:e}),[n,i,e]);return[e,S.useMemo(()=>function({children:s}){return U.createElement(X0.Provider,{value:r},s)},[r])]}let c$=Ri(o$),d$=Ri(a$),qh=Object.assign(c$,{Group:d$});function h$({defaultContainers:t=[],portals:e}={}){let n=S.useRef(null),i=ya(n),r=Re(()=>{var s;let o=[];for(let l of t)l!==null&&(l instanceof HTMLElement?o.push(l):"current"in l&&l.current instanceof HTMLElement&&o.push(l.current));if(e!=null&&e.current)for(let l of e.current)o.push(l);for(let l of(s=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(l.contains(n.current)||o.some(a=>l.contains(a))||o.push(l));return o});return{resolveContainers:r,contains:Re(s=>r().some(o=>o.contains(s))),mainTreeNodeRef:n,MainTreeNode:S.useMemo(()=>function(){return U.createElement(Kh,{features:Qu.Hidden,ref:n})},[n])}}var f$=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(f$||{}),p$=(t=>(t[t.TogglePopover=0]="TogglePopover",t[t.ClosePopover=1]="ClosePopover",t[t.SetButton=2]="SetButton",t[t.SetButtonId=3]="SetButtonId",t[t.SetPanel=4]="SetPanel",t[t.SetPanelId=5]="SetPanelId",t))(p$||{});let m$={0:t=>{let e={...t,popoverState:kt(t.popoverState,{0:1,1:0})};return e.popoverState===0&&(e.__demoMode=!1),e},1(t){return t.popoverState===1?t:{...t,popoverState:1}},2(t,e){return t.button===e.button?t:{...t,button:e.button}},3(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},4(t,e){return t.panel===e.panel?t:{...t,panel:e.panel}},5(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}}},rw=S.createContext(null);rw.displayName="PopoverContext";function up(t){let e=S.useContext(rw);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,up),n}return e}let sw=S.createContext(null);sw.displayName="PopoverAPIContext";function ow(t){let e=S.useContext(sw);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ow),n}return e}let lw=S.createContext(null);lw.displayName="PopoverGroupContext";function iR(){return S.useContext(lw)}let cp=S.createContext(null);cp.displayName="PopoverPanelContext";function g$(){return S.useContext(cp)}function y$(t,e){return kt(e.type,m$,t,e)}let v$="div";function w$(t,e){var n;let{__demoMode:i=!1,...r}=t,s=S.useRef(null),o=rr(e,qP($=>{s.current=$})),l=S.useRef([]),a=S.useReducer(y$,{__demoMode:i,popoverState:i?0:1,buttons:l,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:S.createRef(),afterPanelSentinel:S.createRef()}),[{popoverState:u,button:c,buttonId:d,panel:h,panelId:f,beforePanelSentinel:p,afterPanelSentinel:g},v]=a,m=ya((n=s.current)!=null?n:c),y=S.useMemo(()=>{if(!c||!h)return!1;for(let re of document.querySelectorAll("body > *"))if(Number(re==null?void 0:re.contains(c))^Number(re==null?void 0:re.contains(h)))return!0;let $=lp(),z=$.indexOf(c),L=(z+$.length-1)%$.length,_=(z+1)%$.length,j=$[L],ee=$[_];return!h.contains(j)&&!h.contains(ee)},[c,h]),w=ki(d),b=ki(f),C=S.useMemo(()=>({buttonId:w,panelId:b,close:()=>v({type:1})}),[w,b,v]),P=iR(),R=P==null?void 0:P.registerPopover,I=Re(()=>{var $;return($=P==null?void 0:P.isFocusWithinPopoverGroup())!=null?$:(m==null?void 0:m.activeElement)&&((c==null?void 0:c.contains(m.activeElement))||(h==null?void 0:h.contains(m.activeElement)))});S.useEffect(()=>R==null?void 0:R(C),[R,C]);let[E,A]=u$(),M=h$({portals:E,defaultContainers:[c,h]});e$(m==null?void 0:m.defaultView,"focus",$=>{var z,L,_,j;$.target!==window&&$.target instanceof HTMLElement&&u===0&&(I()||c&&h&&(M.contains($.target)||(L=(z=p.current)==null?void 0:z.contains)!=null&&L.call(z,$.target)||(j=(_=g.current)==null?void 0:_.contains)!=null&&j.call(_,$.target)||v({type:1})))},!0),J_(M.resolveContainers,($,z)=>{v({type:1}),JP(z,tw.Loose)||($.preventDefault(),c==null||c.focus())},u===0);let O=Re($=>{v({type:1});let z=(()=>$?$ instanceof HTMLElement?$:"current"in $&&$.current instanceof HTMLElement?$.current:c:c)();z==null||z.focus()}),D=S.useMemo(()=>({close:O,isPortalled:y}),[O,y]),N=S.useMemo(()=>({open:u===0,close:O}),[u,O]),B={ref:o};return U.createElement(cp.Provider,{value:null},U.createElement(rw.Provider,{value:a},U.createElement(sw.Provider,{value:D},U.createElement(eR,{value:kt(u,{0:Qt.Open,1:Qt.Closed})},U.createElement(A,null,lr({ourProps:B,theirProps:r,slot:N,defaultTag:v$,name:"Popover"}),U.createElement(M.MainTreeNode,null))))))}let b$="button";function x$(t,e){let n=Tl(),{id:i=`headlessui-popover-button-${n}`,...r}=t,[s,o]=up("Popover.Button"),{isPortalled:l}=ow("Popover.Button"),a=S.useRef(null),u=`headlessui-focus-sentinel-${Tl()}`,c=iR(),d=c==null?void 0:c.closeOthers,h=g$()!==null;S.useEffect(()=>{if(!h)return o({type:3,buttonId:i}),()=>{o({type:3,buttonId:null})}},[h,i,o]);let[f]=S.useState(()=>Symbol()),p=rr(a,e,h?null:M=>{if(M)s.buttons.current.push(f);else{let O=s.buttons.current.indexOf(f);O!==-1&&s.buttons.current.splice(O,1)}s.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),M&&o({type:2,button:M})}),g=rr(a,e),v=ya(a),m=Re(M=>{var O,D,N;if(h){if(s.popoverState===1)return;switch(M.key){case is.Space:case is.Enter:M.preventDefault(),(D=(O=M.target).click)==null||D.call(O),o({type:1}),(N=s.button)==null||N.focus();break}}else switch(M.key){case is.Space:case is.Enter:M.preventDefault(),M.stopPropagation(),s.popoverState===1&&(d==null||d(s.buttonId)),o({type:0});break;case is.Escape:if(s.popoverState!==0)return d==null?void 0:d(s.buttonId);if(!a.current||v!=null&&v.activeElement&&!a.current.contains(v.activeElement))return;M.preventDefault(),M.stopPropagation(),o({type:1});break}}),y=Re(M=>{h||M.key===is.Space&&M.preventDefault()}),w=Re(M=>{var O,D;ZP(M.currentTarget)||t.disabled||(h?(o({type:1}),(O=s.button)==null||O.focus()):(M.preventDefault(),M.stopPropagation(),s.popoverState===1&&(d==null||d(s.buttonId)),o({type:0}),(D=s.button)==null||D.focus()))}),b=Re(M=>{M.preventDefault(),M.stopPropagation()}),C=s.popoverState===0,P=S.useMemo(()=>({open:C}),[C]),R=Y_(t,a),I=h?{ref:g,type:R,onKeyDown:m,onClick:w}:{ref:p,id:s.buttonId,type:R,"aria-expanded":s.popoverState===0,"aria-controls":s.panel?s.panelId:void 0,onKeyDown:m,onKeyUp:y,onClick:w,onMouseDown:b},E=tR(),A=Re(()=>{let M=s.panel;if(!M)return;function O(){kt(E.current,{[Or.Forwards]:()=>mo(M,Rr.First),[Or.Backwards]:()=>mo(M,Rr.Last)})===Yh.Error&&mo(lp().filter(D=>D.dataset.headlessuiFocusGuard!=="true"),kt(E.current,{[Or.Forwards]:Rr.Next,[Or.Backwards]:Rr.Previous}),{relativeTo:s.button})}O()});return U.createElement(U.Fragment,null,lr({ourProps:I,theirProps:r,slot:P,defaultTag:b$,name:"Popover.Button"}),C&&!h&&l&&U.createElement(Kh,{id:u,features:Qu.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:A}))}let S$="div",k$=ia.RenderStrategy|ia.Static;function C$(t,e){let n=Tl(),{id:i=`headlessui-popover-overlay-${n}`,...r}=t,[{popoverState:s},o]=up("Popover.Overlay"),l=rr(e),a=ap(),u=(()=>a!==null?(a&Qt.Open)===Qt.Open:s===0)(),c=Re(h=>{if(ZP(h.currentTarget))return h.preventDefault();o({type:1})}),d=S.useMemo(()=>({open:s===0}),[s]);return lr({ourProps:{ref:l,id:i,"aria-hidden":!0,onClick:c},theirProps:r,slot:d,defaultTag:S$,features:k$,visible:u,name:"Popover.Overlay"})}let E$="div",A$=ia.RenderStrategy|ia.Static;function P$(t,e){let n=Tl(),{id:i=`headlessui-popover-panel-${n}`,focus:r=!1,...s}=t,[o,l]=up("Popover.Panel"),{close:a,isPortalled:u}=ow("Popover.Panel"),c=`headlessui-focus-sentinel-before-${Tl()}`,d=`headlessui-focus-sentinel-after-${Tl()}`,h=S.useRef(null),f=rr(h,e,R=>{l({type:4,panel:R})}),p=ya(h);ir(()=>(l({type:5,panelId:i}),()=>{l({type:5,panelId:null})}),[i,l]);let g=ap(),v=(()=>g!==null?(g&Qt.Open)===Qt.Open:o.popoverState===0)(),m=Re(R=>{var I;switch(R.key){case is.Escape:if(o.popoverState!==0||!h.current||p!=null&&p.activeElement&&!h.current.contains(p.activeElement))return;R.preventDefault(),R.stopPropagation(),l({type:1}),(I=o.button)==null||I.focus();break}});S.useEffect(()=>{var R;t.static||o.popoverState===1&&((R=t.unmount)==null||R)&&l({type:4,panel:null})},[o.popoverState,t.unmount,t.static,l]),S.useEffect(()=>{if(o.__demoMode||!r||o.popoverState!==0||!h.current)return;let R=p==null?void 0:p.activeElement;h.current.contains(R)||mo(h.current,Rr.First)},[o.__demoMode,r,h,o.popoverState]);let y=S.useMemo(()=>({open:o.popoverState===0,close:a}),[o,a]),w={ref:f,id:i,onKeyDown:m,onBlur:r&&o.popoverState===0?R=>{var I,E,A,M,O;let D=R.relatedTarget;D&&h.current&&((I=h.current)!=null&&I.contains(D)||(l({type:1}),((A=(E=o.beforePanelSentinel.current)==null?void 0:E.contains)!=null&&A.call(E,D)||(O=(M=o.afterPanelSentinel.current)==null?void 0:M.contains)!=null&&O.call(M,D))&&D.focus({preventScroll:!0})))}:void 0,tabIndex:-1},b=tR(),C=Re(()=>{let R=h.current;if(!R)return;function I(){kt(b.current,{[Or.Forwards]:()=>{var E;mo(R,Rr.First)===Yh.Error&&((E=o.afterPanelSentinel.current)==null||E.focus())},[Or.Backwards]:()=>{var E;(E=o.button)==null||E.focus({preventScroll:!0})}})}I()}),P=Re(()=>{let R=h.current;if(!R)return;function I(){kt(b.current,{[Or.Forwards]:()=>{var E;if(!o.button)return;let A=lp(),M=A.indexOf(o.button),O=A.slice(0,M+1),D=[...A.slice(M+1),...O];for(let N of D.slice())if(N.dataset.headlessuiFocusGuard==="true"||(E=o.panel)!=null&&E.contains(N)){let B=D.indexOf(N);B!==-1&&D.splice(B,1)}mo(D,Rr.First,{sorted:!1})},[Or.Backwards]:()=>{var E;mo(R,Rr.Previous)===Yh.Error&&((E=o.button)==null||E.focus())}})}I()});return U.createElement(cp.Provider,{value:i},v&&u&&U.createElement(Kh,{id:c,ref:o.beforePanelSentinel,features:Qu.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:C}),lr({ourProps:w,theirProps:s,slot:y,defaultTag:E$,features:A$,visible:v,name:"Popover.Panel"}),v&&u&&U.createElement(Kh,{id:d,ref:o.afterPanelSentinel,features:Qu.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:P}))}let R$="div";function M$(t,e){let n=S.useRef(null),i=rr(n,e),[r,s]=S.useState([]),o=Re(p=>{s(g=>{let v=g.indexOf(p);if(v!==-1){let m=g.slice();return m.splice(v,1),m}return g})}),l=Re(p=>(s(g=>[...g,p]),()=>o(p))),a=Re(()=>{var p;let g=ew(n);if(!g)return!1;let v=g.activeElement;return(p=n.current)!=null&&p.contains(v)?!0:r.some(m=>{var y,w;return((y=g.getElementById(m.buttonId.current))==null?void 0:y.contains(v))||((w=g.getElementById(m.panelId.current))==null?void 0:w.contains(v))})}),u=Re(p=>{for(let g of r)g.buttonId.current!==p&&g.close()}),c=S.useMemo(()=>({registerPopover:l,unregisterPopover:o,isFocusWithinPopoverGroup:a,closeOthers:u}),[l,o,a,u]),d=S.useMemo(()=>({}),[]),h=t,f={ref:i};return U.createElement(lw.Provider,{value:c},lr({ourProps:f,theirProps:h,slot:d,defaultTag:R$,name:"Popover.Group"}))}let O$=Ri(w$),T$=Ri(x$),N$=Ri(C$),D$=Ri(P$),L$=Ri(M$),aw=Object.assign(O$,{Button:T$,Overlay:N$,Panel:D$,Group:L$});function I$(t=0){let[e,n]=S.useState(t),i=iw(),r=S.useCallback(a=>{i.current&&n(u=>u|a)},[e,i]),s=S.useCallback(a=>!!(e&a),[e]),o=S.useCallback(a=>{i.current&&n(u=>u&~a)},[n,i]),l=S.useCallback(a=>{i.current&&n(u=>u^a)},[n]);return{flags:e,addFlag:r,hasFlag:s,removeFlag:o,toggleFlag:l}}function B$(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function _m(t,...e){t&&e.length>0&&t.classList.add(...e)}function $m(t,...e){t&&e.length>0&&t.classList.remove(...e)}function _$(t,e){let n=Ec();if(!t)return n.dispose;let{transitionDuration:i,transitionDelay:r}=getComputedStyle(t),[s,o]=[i,r].map(a=>{let[u=0]=a.split(",").filter(Boolean).map(c=>c.includes("ms")?parseFloat(c):parseFloat(c)*1e3).sort((c,d)=>d-c);return u}),l=s+o;if(l!==0){n.group(u=>{u.setTimeout(()=>{e(),u.dispose()},l),u.addEventListener(t,"transitionrun",c=>{c.target===c.currentTarget&&u.dispose()})});let a=n.addEventListener(t,"transitionend",u=>{u.target===u.currentTarget&&(e(),a())})}else e();return n.add(()=>e()),n.dispose}function $$(t,e,n,i){let r=n?"enter":"leave",s=Ec(),o=i!==void 0?B$(i):()=>{};r==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let l=kt(r,{enter:()=>e.enter,leave:()=>e.leave}),a=kt(r,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),u=kt(r,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return $m(t,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),_m(t,...l,...u),s.nextFrame(()=>{$m(t,...u),_m(t,...a),_$(t,()=>($m(t,...l),_m(t,...e.entered),o()))}),s.dispose}function F$({container:t,direction:e,classes:n,onStart:i,onStop:r}){let s=iw(),o=XP(),l=ki(e);ir(()=>{let a=Ec();o.add(a.dispose);let u=t.current;if(u&&l.current!=="idle"&&s.current)return a.dispose(),i.current(l.current),a.add($$(u,n.current,l.current==="enter",()=>{a.dispose(),r.current(l.current)})),a.dispose},[e])}function qs(t=""){return t.split(" ").filter(e=>e.trim().length>1)}let dp=S.createContext(null);dp.displayName="TransitionContext";var z$=(t=>(t.Visible="visible",t.Hidden="hidden",t))(z$||{});function j$(){let t=S.useContext(dp);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function U$(){let t=S.useContext(hp);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let hp=S.createContext(null);hp.displayName="NestingContext";function fp(t){return"children"in t?fp(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function rR(t,e){let n=ki(t),i=S.useRef([]),r=iw(),s=XP(),o=Re((f,p=Mr.Hidden)=>{let g=i.current.findIndex(({el:v})=>v===f);g!==-1&&(kt(p,{[Mr.Unmount](){i.current.splice(g,1)},[Mr.Hidden](){i.current[g].state="hidden"}}),s.microTask(()=>{var v;!fp(i)&&r.current&&((v=n.current)==null||v.call(n))}))}),l=Re(f=>{let p=i.current.find(({el:g})=>g===f);return p?p.state!=="visible"&&(p.state="visible"):i.current.push({el:f,state:"visible"}),()=>o(f,Mr.Unmount)}),a=S.useRef([]),u=S.useRef(Promise.resolve()),c=S.useRef({enter:[],leave:[],idle:[]}),d=Re((f,p,g)=>{a.current.splice(0),e&&(e.chains.current[p]=e.chains.current[p].filter(([v])=>v!==f)),e==null||e.chains.current[p].push([f,new Promise(v=>{a.current.push(v)})]),e==null||e.chains.current[p].push([f,new Promise(v=>{Promise.all(c.current[p].map(([m,y])=>y)).then(()=>v())})]),p==="enter"?u.current=u.current.then(()=>e==null?void 0:e.wait.current).then(()=>g(p)):g(p)}),h=Re((f,p,g)=>{Promise.all(c.current[p].splice(0).map(([v,m])=>m)).then(()=>{var v;(v=a.current.shift())==null||v()}).then(()=>g(p))});return S.useMemo(()=>({children:i,register:l,unregister:o,onStart:d,onStop:h,wait:u,chains:c}),[l,o,i,d,h,c,u])}function V$(){}let H$=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Yx(t){var e;let n={};for(let i of H$)n[i]=(e=t[i])!=null?e:V$;return n}function W$(t){let e=S.useRef(Yx(t));return S.useEffect(()=>{e.current=Yx(t)},[t]),e}let G$="div",sR=ia.RenderStrategy;function X$(t,e){let{beforeEnter:n,afterEnter:i,beforeLeave:r,afterLeave:s,enter:o,enterFrom:l,enterTo:a,entered:u,leave:c,leaveFrom:d,leaveTo:h,...f}=t,p=S.useRef(null),g=rr(p,e),v=f.unmount?Mr.Unmount:Mr.Hidden,{show:m,appear:y,initial:w}=j$(),[b,C]=S.useState(m?"visible":"hidden"),P=U$(),{register:R,unregister:I}=P,E=S.useRef(null);S.useEffect(()=>R(p),[R,p]),S.useEffect(()=>{if(v===Mr.Hidden&&p.current){if(m&&b!=="visible"){C("visible");return}return kt(b,{hidden:()=>I(p),visible:()=>R(p)})}},[b,p,R,I,m,v]);let A=ki({enter:qs(o),enterFrom:qs(l),enterTo:qs(a),entered:qs(u),leave:qs(c),leaveFrom:qs(d),leaveTo:qs(h)}),M=W$({beforeEnter:n,afterEnter:i,beforeLeave:r,afterLeave:s}),O=op();S.useEffect(()=>{if(O&&b==="visible"&&p.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[p,b,O]);let D=w&&!y,N=(()=>!O||D||E.current===m?"idle":m?"enter":"leave")(),B=I$(0),$=Re(ee=>kt(ee,{enter:()=>{B.addFlag(Qt.Opening),M.current.beforeEnter()},leave:()=>{B.addFlag(Qt.Closing),M.current.beforeLeave()},idle:()=>{}})),z=Re(ee=>kt(ee,{enter:()=>{B.removeFlag(Qt.Opening),M.current.afterEnter()},leave:()=>{B.removeFlag(Qt.Closing),M.current.afterLeave()},idle:()=>{}})),L=rR(()=>{C("hidden"),I(p)},P);F$({container:p,classes:A,direction:N,onStart:ki(ee=>{L.onStart(p,ee,$)}),onStop:ki(ee=>{L.onStop(p,ee,z),ee==="leave"&&!fp(L)&&(C("hidden"),I(p))})}),S.useEffect(()=>{D&&(v===Mr.Hidden?E.current=null:E.current=m)},[m,D,b]);let _=f,j={ref:g};return y&&m&&w&&(_={..._,className:G0(f.className,...A.current.enter,...A.current.enterFrom)}),U.createElement(hp.Provider,{value:L},U.createElement(eR,{value:kt(b,{visible:Qt.Open,hidden:Qt.Closed})|B.flags},lr({ourProps:j,theirProps:_,defaultTag:G$,features:sR,visible:b==="visible",name:"Transition.Child"})))}function J$(t,e){let{show:n,appear:i=!1,unmount:r,...s}=t,o=S.useRef(null),l=rr(o,e);op();let a=ap();if(n===void 0&&a!==null&&(n=(a&Qt.Open)===Qt.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,c]=S.useState(n?"visible":"hidden"),d=rR(()=>{c("hidden")}),[h,f]=S.useState(!0),p=S.useRef([n]);ir(()=>{h!==!1&&p.current[p.current.length-1]!==n&&(p.current.push(n),f(!1))},[p,n]);let g=S.useMemo(()=>({show:n,appear:i,initial:h}),[n,i,h]);S.useEffect(()=>{if(n)c("visible");else if(!fp(d))c("hidden");else{let w=o.current;if(!w)return;let b=w.getBoundingClientRect();b.x===0&&b.y===0&&b.width===0&&b.height===0&&c("hidden")}},[n,d]);let v={unmount:r},m=Re(()=>{var w;h&&f(!1),(w=t.beforeEnter)==null||w.call(t)}),y=Re(()=>{var w;h&&f(!1),(w=t.beforeLeave)==null||w.call(t)});return U.createElement(hp.Provider,{value:d},U.createElement(dp.Provider,{value:g},lr({ourProps:{...v,as:S.Fragment,children:U.createElement(oR,{ref:l,...v,...s,beforeEnter:m,beforeLeave:y})},theirProps:{},defaultTag:S.Fragment,features:sR,visible:u==="visible",name:"Transition"})))}function Y$(t,e){let n=S.useContext(dp)!==null,i=ap()!==null;return U.createElement(U.Fragment,null,!n&&i?U.createElement(J0,{ref:e,...t}):U.createElement(oR,{ref:e,...t}))}let J0=Ri(J$),oR=Ri(X$),K$=Ri(Y$),Kx=Object.assign(J0,{Child:K$,Root:J0});function Gi(t){return t.split("-")[1]}function uw(t){return t==="y"?"height":"width"}function Ir(t){return t.split("-")[0]}function Ac(t){return["top","bottom"].includes(Ir(t))?"x":"y"}function qx(t,e,n){let{reference:i,floating:r}=t;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,l=Ac(e),a=uw(l),u=i[a]/2-r[a]/2,c=l==="x";let d;switch(Ir(e)){case"top":d={x:s,y:i.y-r.height};break;case"bottom":d={x:s,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:o};break;case"left":d={x:i.x-r.width,y:o};break;default:d={x:i.x,y:i.y}}switch(Gi(e)){case"start":d[l]-=u*(n&&c?-1:1);break;case"end":d[l]+=u*(n&&c?-1:1)}return d}const q$=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=qx(u,i,a),h=i,f={},p=0;for(let g=0;g<l.length;g++){const{name:v,fn:m}=l[g],{x:y,y:w,data:b,reset:C}=await m({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=w??d,f={...f,[v]:{...f[v],...b}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):C.rects),{x:c,y:d}=qx(u,h,a)),g=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};function jo(t,e){return typeof t=="function"?t(e):t}function lR(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function Qh(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Zu(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:l,strategy:a}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=jo(e,t),p=lR(f),g=l[h?d==="floating"?"reference":"floating":d],v=Qh(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:c,strategy:a})),m=d==="floating"?{...o.floating,x:i,y:r}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),w=await(s.isElement==null?void 0:s.isElement(y))&&await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1},b=Qh(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m,offsetParent:y,strategy:a}):m);return{top:(v.top-b.top+p.top)/w.y,bottom:(b.bottom-v.bottom+p.bottom)/w.y,left:(v.left-b.left+p.left)/w.x,right:(b.right-v.right+p.right)/w.x}}const Y0=Math.min,Q$=Math.max;function K0(t,e,n){return Q$(t,Y0(e,n))}const Qx=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:l}=e,{element:a,padding:u=0}=jo(t,e)||{};if(a==null)return{};const c=lR(u),d={x:n,y:i},h=Ac(r),f=uw(h),p=await o.getDimensions(a),g=h==="y",v=g?"top":"left",m=g?"bottom":"right",y=g?"clientHeight":"clientWidth",w=s.reference[f]+s.reference[h]-d[h]-s.floating[f],b=d[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a));let P=C?C[y]:0;P&&await(o.isElement==null?void 0:o.isElement(C))||(P=l.floating[y]||s.floating[f]);const R=w/2-b/2,I=P/2-p[f]/2-1,E=Y0(c[v],I),A=Y0(c[m],I),M=E,O=P-p[f]-A,D=P/2-p[f]/2+R,N=K0(M,D,O),B=Gi(r)!=null&&D!=N&&s.reference[f]/2-(D<M?E:A)-p[f]/2<0?D<M?M-D:O-D:0;return{[h]:d[h]-B,data:{[h]:N,centerOffset:D-N+B}}}}),aR=["top","right","bottom","left"],Zx=aR.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),Z$={left:"right",right:"left",bottom:"top",top:"bottom"};function Zh(t){return t.replace(/left|right|bottom|top/g,e=>Z$[e])}function uR(t,e,n){n===void 0&&(n=!1);const i=Gi(t),r=Ac(t),s=uw(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Zh(o)),{main:o,cross:Zh(o)}}const e6={start:"end",end:"start"};function nh(t){return t.replace(/start|end/g,e=>e6[e])}const t6=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,i,r;const{rects:s,middlewareData:o,placement:l,platform:a,elements:u}=e,{crossAxis:c=!1,alignment:d,allowedPlacements:h=Zx,autoAlignment:f=!0,...p}=jo(t,e),g=d!==void 0||h===Zx?function(A,M,O){return(A?[...O.filter(D=>Gi(D)===A),...O.filter(D=>Gi(D)!==A)]:O.filter(D=>Ir(D)===D)).filter(D=>!A||Gi(D)===A||!!M&&nh(D)!==D)}(d||null,f,h):h,v=await Zu(e,p),m=((n=o.autoPlacement)==null?void 0:n.index)||0,y=g[m];if(y==null)return{};const{main:w,cross:b}=uR(y,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));if(l!==y)return{reset:{placement:g[0]}};const C=[v[Ir(y)],v[w],v[b]],P=[...((i=o.autoPlacement)==null?void 0:i.overflows)||[],{placement:y,overflows:C}],R=g[m+1];if(R)return{data:{index:m+1,overflows:P},reset:{placement:R}};const I=P.map(A=>{const M=Gi(A.placement);return[A.placement,M&&c?A.overflows.slice(0,2).reduce((O,D)=>O+D,0):A.overflows[0],A.overflows]}).sort((A,M)=>A[1]-M[1]),E=((r=I.filter(A=>A[2].slice(0,Gi(A[0])?2:3).every(M=>M<=0))[0])==null?void 0:r[0])||I[0][0];return E!==l?{data:{index:m+1,overflows:P},reset:{placement:E}}:{}}}},n6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:l,elements:a}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...g}=jo(t,e),v=Ir(i),m=Ir(o)===o,y=await(l.isRTL==null?void 0:l.isRTL(a.floating)),w=d||(m||!p?[Zh(o)]:function(M){const O=Zh(M);return[nh(M),O,nh(O)]}(o));d||f==="none"||w.push(...function(M,O,D,N){const B=Gi(M);let $=function(z,L,_){const j=["left","right"],ee=["right","left"],re=["top","bottom"],ge=["bottom","top"];switch(z){case"top":case"bottom":return _?L?ee:j:L?j:ee;case"left":case"right":return L?re:ge;default:return[]}}(Ir(M),D==="start",N);return B&&($=$.map(z=>z+"-"+B),O&&($=$.concat($.map(nh)))),$}(o,p,f,y));const b=[o,...w],C=await Zu(e,g),P=[];let R=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&P.push(C[v]),c){const{main:M,cross:O}=uR(i,s,y);P.push(C[M],C[O])}if(R=[...R,{placement:i,overflows:P}],!P.every(M=>M<=0)){var I,E;const M=(((I=r.flip)==null?void 0:I.index)||0)+1,O=b[M];if(O)return{data:{index:M,overflows:R},reset:{placement:O}};let D=(E=R.filter(N=>N.overflows[0]<=0).sort((N,B)=>N.overflows[1]-B.overflows[1])[0])==null?void 0:E.placement;if(!D)switch(h){case"bestFit":{var A;const N=(A=R.map(B=>[B.placement,B.overflows.filter($=>$>0).reduce(($,z)=>$+z,0)]).sort((B,$)=>B[1]-$[1])[0])==null?void 0:A[0];N&&(D=N);break}case"initialPlacement":D=o}if(i!==D)return{reset:{placement:D}}}return{}}}};function eS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function tS(t){return aR.some(e=>t[e]>=0)}const i6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=jo(t,e);switch(i){case"referenceHidden":{const s=eS(await Zu(e,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:tS(s)}}}case"escaped":{const s=eS(await Zu(e,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:tS(s)}}}default:return{}}}}},r6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,r=await async function(s,o){const{placement:l,platform:a,elements:u}=s,c=await(a.isRTL==null?void 0:a.isRTL(u.floating)),d=Ir(l),h=Gi(l),f=Ac(l)==="x",p=["left","top"].includes(d)?-1:1,g=c&&f?-1:1,v=jo(o,s);let{mainAxis:m,crossAxis:y,alignmentAxis:w}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...v};return h&&typeof w=="number"&&(y=h==="end"?-1*w:w),f?{x:y*g,y:m*p}:{x:m*p,y:y*g}}(e,t);return{x:n+r.x,y:i+r.y,data:r}}}};function s6(t){return t==="x"?"y":"x"}const o6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:m,y}=v;return{x:m,y}}},...a}=jo(t,e),u={x:n,y:i},c=await Zu(e,a),d=Ac(Ir(r)),h=s6(d);let f=u[d],p=u[h];if(s){const v=d==="y"?"bottom":"right";f=K0(f+c[d==="y"?"top":"left"],f,f-c[v])}if(o){const v=h==="y"?"bottom":"right";p=K0(p+c[h==="y"?"top":"left"],p,p-c[v])}const g=l.fn({...e,[d]:f,[h]:p});return{...g,data:{x:g.x-n,y:g.y-i}}}}};function In(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function sr(t){return In(t).getComputedStyle(t)}function cR(t){return t instanceof In(t).Node}function zs(t){return cR(t)?(t.nodeName||"").toLowerCase():"#document"}function Ai(t){return t instanceof HTMLElement||t instanceof In(t).HTMLElement}function nS(t){return typeof ShadowRoot<"u"&&(t instanceof In(t).ShadowRoot||t instanceof ShadowRoot)}function ec(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=sr(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function l6(t){return["table","td","th"].includes(zs(t))}function q0(t){const e=cw(),n=sr(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function cw(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function pp(t){return["html","body","#document"].includes(zs(t))}const Q0=Math.min,Nl=Math.max,ef=Math.round,gd=Math.floor,js=t=>({x:t,y:t});function dR(t){const e=sr(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Ai(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,l=ef(n)!==s||ef(i)!==o;return l&&(n=s,i=o),{width:n,height:i,$:l}}function Br(t){return t instanceof Element||t instanceof In(t).Element}function dw(t){return Br(t)?t:t.contextElement}function Dl(t){const e=dw(t);if(!Ai(e))return js(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=dR(e);let o=(s?ef(n.width):n.width)/i,l=(s?ef(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}const a6=js(0);function hR(t){const e=In(t);return cw()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:a6}function Lo(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=dw(t);let o=js(1);e&&(i?Br(i)&&(o=Dl(i)):o=Dl(t));const l=function(h,f,p){return f===void 0&&(f=!1),!(!p||f&&p!==In(h))&&f}(s,n,i)?hR(s):js(0);let a=(r.left+l.x)/o.x,u=(r.top+l.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=In(s),f=i&&Br(i)?In(i):i;let p=h.frameElement;for(;p&&i&&f!==h;){const g=Dl(p),v=p.getBoundingClientRect(),m=getComputedStyle(p),y=v.left+(p.clientLeft+parseFloat(m.paddingLeft))*g.x,w=v.top+(p.clientTop+parseFloat(m.paddingTop))*g.y;a*=g.x,u*=g.y,c*=g.x,d*=g.y,a+=y,u+=w,p=In(p).frameElement}}return Qh({width:c,height:d,x:a,y:u})}function mp(t){return Br(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function _r(t){var e;return(e=(cR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function fR(t){return Lo(_r(t)).left+mp(t).scrollLeft}function ra(t){if(zs(t)==="html")return t;const e=t.assignedSlot||t.parentNode||nS(t)&&t.host||_r(t);return nS(e)?e.host:e}function pR(t){const e=ra(t);return pp(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ai(e)&&ec(e)?e:pR(e)}function tf(t,e){var n;e===void 0&&(e=[]);const i=pR(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=In(i);return r?e.concat(s,s.visualViewport||[],ec(i)?i:[]):e.concat(i,tf(i))}function iS(t,e,n){let i;if(e==="viewport")i=function(r,s){const o=In(r),l=_r(r),a=o.visualViewport;let u=l.clientWidth,c=l.clientHeight,d=0,h=0;if(a){u=a.width,c=a.height;const f=cw();(!f||f&&s==="fixed")&&(d=a.offsetLeft,h=a.offsetTop)}return{width:u,height:c,x:d,y:h}}(t,n);else if(e==="document")i=function(r){const s=_r(r),o=mp(r),l=r.ownerDocument.body,a=Nl(s.scrollWidth,s.clientWidth,l.scrollWidth,l.clientWidth),u=Nl(s.scrollHeight,s.clientHeight,l.scrollHeight,l.clientHeight);let c=-o.scrollLeft+fR(r);const d=-o.scrollTop;return sr(l).direction==="rtl"&&(c+=Nl(s.clientWidth,l.clientWidth)-a),{width:a,height:u,x:c,y:d}}(_r(t));else if(Br(e))i=function(r,s){const o=Lo(r,!0,s==="fixed"),l=o.top+r.clientTop,a=o.left+r.clientLeft,u=Ai(r)?Dl(r):js(1);return{width:r.clientWidth*u.x,height:r.clientHeight*u.y,x:a*u.x,y:l*u.y}}(e,n);else{const r=hR(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return Qh(i)}function mR(t,e){const n=ra(t);return!(n===e||!Br(n)||pp(n))&&(sr(n).position==="fixed"||mR(n,e))}function u6(t,e,n){const i=Ai(e),r=_r(e),s=n==="fixed",o=Lo(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const a=js(0);if(i||!i&&!s)if((zs(e)!=="body"||ec(r))&&(l=mp(e)),Ai(e)){const u=Lo(e,!0,s,e);a.x=u.x+e.clientLeft,a.y=u.y+e.clientTop}else r&&(a.x=fR(r));return{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function rS(t,e){return Ai(t)&&sr(t).position!=="fixed"?e?e(t):t.offsetParent:null}function sS(t,e){const n=In(t);if(!Ai(t))return n;let i=rS(t,e);for(;i&&l6(i)&&sr(i).position==="static";)i=rS(i,e);return i&&(zs(i)==="html"||zs(i)==="body"&&sr(i).position==="static"&&!q0(i))?n:i||function(r){let s=ra(r);for(;Ai(s)&&!pp(s);){if(q0(s))return s;s=ra(s)}return null}(t)||n}const c6={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=Ai(n),s=_r(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},l=js(1);const a=js(0);if((r||!r&&i!=="fixed")&&((zs(n)!=="body"||ec(s))&&(o=mp(n)),Ai(n))){const u=Lo(n);l=Dl(n),a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-o.scrollLeft*l.x+a.x,y:e.y*l.y-o.scrollTop*l.y+a.y}},getDocumentElement:_r,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[...n==="clippingAncestors"?function(a,u){const c=u.get(a);if(c)return c;let d=tf(a).filter(g=>Br(g)&&zs(g)!=="body"),h=null;const f=sr(a).position==="fixed";let p=f?ra(a):a;for(;Br(p)&&!pp(p);){const g=sr(p),v=q0(p);v||g.position!=="fixed"||(h=null),(f?!v&&!h:!v&&g.position==="static"&&h&&["absolute","fixed"].includes(h.position)||ec(p)&&!v&&mR(a,p))?d=d.filter(m=>m!==p):h=g,p=ra(p)}return u.set(a,d),d}(e,this._c):[].concat(n),i],o=s[0],l=s.reduce((a,u)=>{const c=iS(e,u,r);return a.top=Nl(c.top,a.top),a.right=Q0(c.right,a.right),a.bottom=Q0(c.bottom,a.bottom),a.left=Nl(c.left,a.left),a},iS(e,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:sS,getElementRects:async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||sS,s=this.getDimensions;return{reference:u6(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return dR(t)},getScale:Dl,isElement:Br,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function d6(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,u=dw(t),c=r||s?[...u?tf(u):[],...tf(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&l?function(v,m){let y,w=null;const b=_r(v);function C(){clearTimeout(y),w&&w.disconnect(),w=null}return function P(R,I){R===void 0&&(R=!1),I===void 0&&(I=1),C();const{left:E,top:A,width:M,height:O}=v.getBoundingClientRect();if(R||m(),!M||!O)return;const D={rootMargin:-gd(A)+"px "+-gd(b.clientWidth-(E+M))+"px "+-gd(b.clientHeight-(A+O))+"px "+-gd(E)+"px",threshold:Nl(0,Q0(1,I))||1};let N=!0;function B($){const z=$[0].intersectionRatio;if(z!==I){if(!N)return P();z?P(!1,z):y=setTimeout(()=>{P(!1,1e-7)},100)}N=!1}try{w=new IntersectionObserver(B,{...D,root:b.ownerDocument})}catch{w=new IntersectionObserver(B,D)}w.observe(v)}(!0),C}(u,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[m]=v;m&&m.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),u&&!a&&p.observe(u),p.observe(e));let g=a?Lo(t):null;return a&&function v(){const m=Lo(t);!g||m.x===g.x&&m.y===g.y&&m.width===g.width&&m.height===g.height||n(),g=m,h=requestAnimationFrame(v)}(),n(),()=>{c.forEach(v=>{r&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,a&&cancelAnimationFrame(h)}}const h6=(t,e,n)=>{const i=new Map,r={platform:c6,...n},s={...r.platform,_c:i};return q$(t,e,{...r,platform:s})},f6=t=>{const{element:e,padding:n}=t;function i(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){return i(e)?e.current!=null?Qx({element:e.current,padding:n}).fn(r):{}:e?Qx({element:e,padding:n}).fn(r):{}}}};var ih=typeof document<"u"?S.useLayoutEffect:S.useEffect;function nf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!nf(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!nf(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function oS(t){const e=S.useRef(t);return ih(()=>{e.current=t}),e}function p6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,whileElementsMounted:s,open:o}=t,[l,a]=S.useState({x:null,y:null,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[u,c]=S.useState(i);nf(u,i)||c(i);const d=S.useRef(null),h=S.useRef(null),f=S.useRef(l),p=oS(s),g=oS(r),[v,m]=S.useState(null),[y,w]=S.useState(null),b=S.useCallback(A=>{d.current!==A&&(d.current=A,m(A))},[]),C=S.useCallback(A=>{h.current!==A&&(h.current=A,w(A))},[]),P=S.useCallback(()=>{if(!d.current||!h.current)return;const A={placement:e,strategy:n,middleware:u};g.current&&(A.platform=g.current),h6(d.current,h.current,A).then(M=>{const O={...M,isPositioned:!0};R.current&&!nf(f.current,O)&&(f.current=O,dc.flushSync(()=>{a(O)}))})},[u,e,n,g]);ih(()=>{o===!1&&f.current.isPositioned&&(f.current.isPositioned=!1,a(A=>({...A,isPositioned:!1})))},[o]);const R=S.useRef(!1);ih(()=>(R.current=!0,()=>{R.current=!1}),[]),ih(()=>{if(v&&y){if(p.current)return p.current(v,y,P);P()}},[v,y,P,p]);const I=S.useMemo(()=>({reference:d,floating:h,setReference:b,setFloating:C}),[b,C]),E=S.useMemo(()=>({reference:v,floating:y}),[v,y]);return S.useMemo(()=>({...l,update:P,refs:I,elements:E,reference:b,floating:C}),[l,P,I,E,b,C])}var m6=typeof document<"u"?S.useLayoutEffect:S.useEffect;function g6(){const t=new Map;return{emit(e,n){var i;(i=t.get(e))==null||i.forEach(r=>r(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){t.set(e,(t.get(e)||[]).filter(i=>i!==n))}}}const y6=S.createContext(null),v6=()=>S.useContext(y6);function w6(t){return(t==null?void 0:t.ownerDocument)||document}function b6(t){return w6(t).defaultView||window}function yd(t){return t?t instanceof b6(t).Element:!1}const x6=kO["useInsertionEffect".toString()],S6=x6||(t=>t());function k6(t){const e=S.useRef(()=>{});return S6(()=>{e.current=t}),S.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function C6(t){t===void 0&&(t={});const{open:e=!1,onOpenChange:n,nodeId:i}=t,r=p6(t),s=v6(),o=S.useRef(null),l=S.useRef({}),a=S.useState(()=>g6())[0],[u,c]=S.useState(null),d=S.useCallback(m=>{const y=yd(m)?{getBoundingClientRect:()=>m.getBoundingClientRect(),contextElement:m}:m;r.refs.setReference(y)},[r.refs]),h=S.useCallback(m=>{(yd(m)||m===null)&&(o.current=m,c(m)),(yd(r.refs.reference.current)||r.refs.reference.current===null||m!==null&&!yd(m))&&r.refs.setReference(m)},[r.refs]),f=S.useMemo(()=>({...r.refs,setReference:h,setPositionReference:d,domReference:o}),[r.refs,h,d]),p=S.useMemo(()=>({...r.elements,domReference:u}),[r.elements,u]),g=k6(n),v=S.useMemo(()=>({...r,refs:f,elements:p,dataRef:l,nodeId:i,events:a,open:e,onOpenChange:g}),[r,i,a,e,g,f,p]);return m6(()=>{const m=s==null?void 0:s.nodesRef.current.find(y=>y.id===i);m&&(m.context=v)}),S.useMemo(()=>({...r,context:v,refs:f,reference:h,positionReference:d}),[r,f,v,h,d])}var E6=Object.defineProperty,A6=(t,e,n)=>e in t?E6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P6=(t,e,n)=>(A6(t,typeof e!="symbol"?e+"":e,n),n),gR={exports:{}},Fa={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS;function R6(){if(lS)return Fa;lS=1;var t=U,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,a,u){var c,d={},h=null,f=null;u!==void 0&&(h=""+u),a.key!==void 0&&(h=""+a.key),a.ref!==void 0&&(f=a.ref);for(c in a)i.call(a,c)&&!s.hasOwnProperty(c)&&(d[c]=a[c]);if(l&&l.defaultProps)for(c in a=l.defaultProps,a)d[c]===void 0&&(d[c]=a[c]);return{$$typeof:e,type:l,key:h,ref:f,props:d,_owner:r.current}}return Fa.Fragment=n,Fa.jsx=o,Fa.jsxs=o,Fa}gR.exports=R6();var Pe=gR.exports;class M6{constructor(){P6(this,"current",this.detect())}set(e){this.current!==e&&(this.current=e)}reset(){this.set(this.detect())}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}const gp=new M6;function O6(t,e,n,i){S.useEffect(()=>{const r=[];(typeof i.offset=="number"||typeof i.offset=="object"||typeof i.offset=="function")&&r.push(r6(i.offset)),(i.flip===!0||typeof i.flip=="number"||typeof i.flip=="object")&&r.push(n6({padding:typeof i.flip=="number"?i.flip:void 0,...typeof i.flip=="object"?i.flip:{}})),(i.shift===!0||typeof i.shift=="number"||typeof i.shift=="object")&&r.push(o6({padding:typeof i.shift=="number"?i.shift:void 0,...typeof i.shift=="object"?i.shift:{}})),(i.autoPlacement===!0||typeof i.autoPlacement=="object")&&r.push(t6(typeof i.autoPlacement=="object"?i.autoPlacement:void 0)),(i.arrow===!0||typeof i.arrow=="number")&&r.push(f6({element:n,padding:i.arrow===!0?0:i.arrow})),r.push(...typeof i.middleware=="function"?i.middleware({referenceEl:e.reference,floatingEl:e.floating}):i.middleware||[]),(i.hide===!0||typeof i.hide=="object")&&r.push(i6(typeof i.hide=="object"?i.hide:void 0)),t(r)},[i.offset,i.shift,i.flip,i.arrow,i.autoPlacement,i.hide,i.middleware])}function T6(t,e,n){S.useEffect(()=>{if(t&&gp.isClient&&typeof ResizeObserver<"u"&&e.current&&e.current instanceof Element){const i=new ResizeObserver(([r])=>{const s=r.borderBoxSize.reduce((o,{inlineSize:l})=>o+l,0);n(s)});return i.observe(e.current),()=>{i.disconnect(),n(null)}}},[])}const N6=t=>{switch(t){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return""}};function D6(t,e){return S.useMemo(()=>typeof t.originClass=="function"?t.originClass(e):typeof t.originClass=="string"?t.originClass:t.tailwindcssOriginClass?N6(e):"",[e,t.originClass,t.tailwindcssOriginClass])}function yR(t,e,...n){if(t in e){const r=e[t];return typeof r=="function"?r(...n):r}const i=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,yR),i}function vR(t){return gp.isServer?null:t instanceof Node?t.ownerDocument:t&&Object.prototype.hasOwnProperty.call(t,"current")&&t.current instanceof Node?t.current.ownerDocument:document}const aS=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var wR=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(wR||{});function L6(t,e=0){var n;return t===((n=vR(t))==null?void 0:n.body)?!1:yR(e,{0(){return t.matches(aS)},1(){let i=t;for(;i!==null;){if(i.matches(aS))return!0;i=i.parentElement}return!1}})}const I6=(t,e)=>{gp.isServer?S.useEffect(t,e):S.useLayoutEffect(t,e)};function B6(t){const e=S.useRef(t);return I6(()=>{e.current=t},[t]),e}function Ui(t,e,n){const i=B6(e);S.useEffect(()=>{function r(s){i.current(s)}return document.addEventListener(t,r,n),()=>document.removeEventListener(t,r,n)},[t,n])}function _6(t,e,n=!0){const i=S.useRef(!1);S.useEffect(()=>{requestAnimationFrame(()=>{i.current=n})},[n]);function r(o,l){if(!i.current||o.defaultPrevented)return;const a=function c(d){return typeof d=="function"?c(d()):Array.isArray(d)||d instanceof Set?d:[d]}(t),u=l(o);if(u!==null&&u.getRootNode().contains(u)){for(const c of a){if(c===null)continue;const d=c instanceof HTMLElement?c:c.current;if(d!=null&&d.contains(u)||o.composed&&o.composedPath().includes(d))return}return!L6(u,wR.Loose)&&u.tabIndex!==-1&&o.preventDefault(),e(o,u)}}const s=S.useRef(null);Ui("mousedown",o=>{var l,a;i.current&&(s.current=((a=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:a[0])||o.target)},!0),Ui("click",o=>{s.current&&(r(o,()=>s.current),s.current=null)},!0),Ui("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}const hw=S.createContext(null);hw.displayName="ReferenceContext";const fw=S.createContext(null);fw.displayName="FloatingContext";const tc=S.createContext(null);tc.displayName="ArrowContext";function bR(t){const e=S.useContext(hw);if(e===null){const n=new Error(`<${t} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,bR),n}return e}function xR(t){const e=S.useContext(fw);if(e===null){const n=new Error(`<${t} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,xR),n}return e}function SR(t){const e=S.useContext(tc);if(e===null){const n=new Error(`<${t} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,SR),n}return e}function kR(t,e,n,i){const{referenceRef:r}=i,s=e;if(s.as===S.Fragment)return Pe.jsx(t.type,{...t.props,...n,ref:r});const o=s.as||"div";return Pe.jsx(o,{...n,ref:r,children:Pe.jsx(t.type,{...t.props})})}function pw(t,e,n,i){const{floatingRef:r,props:s,mounted:o,setShow:l,x:a,y:u,placement:c,strategy:d,referenceElWidth:h}=i,f={...s,...e},p=D6(f,c),g={show:o.current?f.show:!1,enter:`${f.enter||""} ${p}`,enterFrom:`${f.enterFrom||""}`,enterTo:`${f.enterTo||""}`,leave:`${f.leave||""} ${p}`,leaveFrom:`${f.leaveFrom||""}`,leaveTo:`${f.leaveTo||""}`,beforeEnter:()=>{l(!0)},afterLeave:()=>{l(!1)}},v={style:{...!f.dialog&&(f.transform||f.transform===void 0)?{position:d,zIndex:f.zIndex||9999,top:"0px",left:"0px",right:"auto",bottom:"auto",transform:`translate(${Math.round(a||0)}px,${Math.round(u||0)}px)`}:{position:d,zIndex:f.zIndex||9999,top:`${u||0}px`,left:`${a||0}px`},width:f.adaptiveWidth&&typeof h=="number"?`${h}px`:void 0}};function m(b){return f.portal?Pe.jsx(qh,{children:b}):b}function y(b){const C={...v,...n,ref:r};if(f.as===S.Fragment)return Pe.jsx(b.type,{...b.props,...C});const P=f.as||"div";return Pe.jsx(P,{...C,children:Pe.jsx(b.type,{...b.props})})}function w(){return gp.isServer?o.current&&f.show?Pe.jsx(t.type,{...t.props}):Pe.jsx(S.Fragment,{}):f.transitionChild?Pe.jsx(Kx.Child,{as:S.Fragment,...g,children:Pe.jsx(t.type,{...t.props})}):Pe.jsx(Kx,{as:S.Fragment,...g,children:Pe.jsx(t.type,{...t.props})})}return m(y(w()))}function CR([t,e],n){var i,r;const s=S.useRef(!1),[o,l]=S.useState(),a=S.useRef(null),u=S.useMemo(()=>({show:n.onShow||(()=>{}),hide:n.onHide||(()=>{}),update:n.onUpdate||(()=>{})}),[n.onShow,n.onHide,n.onUpdate]),{x:c,y:d,placement:h,strategy:f,update:p,refs:g,middlewareData:v}=C6({placement:n.placement||"bottom-start",strategy:n.strategy,middleware:o}),[m,y]=S.useState(null),w=S.useCallback(()=>{p(),u.update()},[p,u]);S.useEffect(w,[n.placement,n.strategy,o]),O6(l,g,a,n),S.useEffect(()=>{s.current=!0},[]),T6(n.adaptiveWidth,g.reference,y),S.useEffect(()=>{if(g.reference.current&&g.floating.current&&t){const I=n.autoUpdate!==!1?d6(g.reference.current,g.floating.current,w,typeof n.autoUpdate=="object"?n.autoUpdate:void 0):()=>{};return u.show(),()=>{I(),u.hide()}}},[t,w,g]);const b=S.useRef(!0);S.useEffect(()=>{!(g.reference.current instanceof Element)&&g.reference.current&&g.floating.current&&b.current&&(b.current=!1,w(),window.requestAnimationFrame(()=>{b.current=!0,w()}))},[g]);const C={referenceRef:g.setReference,placement:h},P={floatingRef:g.setFloating,props:n,mounted:s,setShow:e,x:c,y:d,placement:h,strategy:f,referenceElWidth:m},R={arrowRef:a,placement:h,x:(i=v.arrow)==null?void 0:i.x,y:(r=v.arrow)==null?void 0:r.y};return{referenceApi:C,floatingApi:P,arrowApi:R,x:c,y:d,placement:h,strategy:f,update:w,refs:g,middlewareData:v}}const ER=S.forwardRef((t,e)=>{const[n,i]=S.useState(t.show??!1),{referenceApi:r,floatingApi:s,arrowApi:o,placement:l}=CR([n,i],t),a={placement:l},[u,c]=typeof t.children=="function"?t.children(a):t.children;if(!S.isValidElement(u))return console.warn("<Float /> is missing a reference and floating element."),Pe.jsx(S.Fragment,{});function d(p){if(t.as===S.Fragment||!t.as)return Pe.jsx(S.Fragment,{children:p});const g=t.as;return Pe.jsx(g,{ref:e,className:t.className,children:p})}if(t.composable||t.dialog)return d(Pe.jsx(hw.Provider,{value:r,children:Pe.jsx(fw.Provider,{value:s,children:Pe.jsx(tc.Provider,{value:o,children:typeof t.children=="function"?t.children(a):t.children})})},"FloatingNode"));const h=kR(u,{as:S.Fragment},{key:"reference-node"},r),f=pw(c,{as:t.floatingAs||"div"},{},s);return d([h,Pe.jsx(tc.Provider,{value:o,children:f},"floating-node")])});ER.displayName="Float";function $6(t){if(!t.children)return Pe.jsx(S.Fragment,{});const e=S.useMemo(()=>{const{as:s,children:o,...l}=t;return l},[t]),n=bR("Float.Reference"),{placement:i}=n,r={placement:i};return kR(typeof t.children=="function"?t.children(r):t.children,{...t,as:t.as||S.Fragment},e,n)}function F6(t){if(!t.children)return Pe.jsx(S.Fragment,{});const e=S.useMemo(()=>{const{as:s,enter:o,enterFrom:l,enterTo:a,leave:u,leaveFrom:c,leaveTo:d,originClass:h,tailwindcssOriginClass:f,transitionChild:p,children:g,...v}=t;return v},[t]),n=xR("Float.Content"),{placement:i}=n,r={placement:i};return pw(typeof t.children=="function"?t.children(r):t.children,{...t,as:t.as||"div"},e,n)}function z6(t){const{arrowRef:e,placement:n,x:i,y:r}=SR("Float.Arrow"),s=S.useMemo(()=>{const{as:u,offset:c,children:d,...h}=t;return h},[t]),o={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]],l={left:typeof i=="number"?`${i}px`:void 0,top:typeof r=="number"?`${r}px`:void 0,right:void 0,bottom:void 0,[o]:`${(t.offset??4)*-1}px`,...s.style};if(t.as===S.Fragment){const u={placement:n},c=typeof t.children=="function"?t.children(u):t.children;return!c||!S.isValidElement(c)?Pe.jsx(S.Fragment,{}):Pe.jsx(c.type,{...c.props,ref:e,style:l})}const a=t.as||"div";return Pe.jsx(a,{ref:e,...s,style:l,children:t.children})}function mw({onInitial:t,children:e,...n}){const[i,r]=S.useState(n.show??!1),s=S.useMemo(()=>{const{as:h,show:f,placement:p,strategy:g,offset:v,shift:m,flip:y,arrow:w,autoPlacement:b,hide:C,autoUpdate:P,zIndex:R,enter:I,enterFrom:E,enterTo:A,leave:M,leaveFrom:O,leaveTo:D,originClass:N,tailwindcssOriginClass:B,portal:$,transform:z,middleware:L,onShow:_,onHide:j,onUpdate:ee,...re}=n;return re},[n]),{floatingApi:o,arrowApi:l,placement:a,refs:u}=CR([i,r],n);S.useEffect(()=>{r(n.show??!1)},[n.show]);function c(){i&&r(!1)}if(t({show:i,setShow:r,placement:a,refs:u}),!e)return Pe.jsx(S.Fragment,{});const d=pw(typeof e=="function"?e({placement:a,close:c}):e,{...n,as:n.as||S.Fragment,show:i},s,o);return Pe.jsx(tc.Provider,{value:l,children:d})}function j6(t){function e({setShow:n,refs:i}){Ui("contextmenu",r=>{r.preventDefault(),i.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:r.clientX,y:r.clientY,top:r.clientY,left:r.clientX,right:r.clientX,bottom:r.clientY}}}),n(!0)}),_6(i.floating,()=>{n(!1)})}return Pe.jsx(mw,{flip:!0,...t,show:!1,portal:!0,onInitial:e})}function U6({globalHideCursor:t,...e}){function n({setShow:i,refs:r}){function s(){i(!0)}function o(){i(!1)}function l(d){r.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:d.clientX,y:d.clientY,top:d.clientY,left:d.clientX,right:d.clientX,bottom:d.clientY}}})}function a(d){s(),l(d)}function u(d){s(),l(d.touches[0])}const c=vR(r.floating);c&&(S.useEffect(()=>{if((t||t===void 0)&&!c.getElementById("headlesui-float-cursor-style")){const d=c.createElement("style");return(c.head||c.getElementsByTagName("head")[0]).appendChild(d),d.id="headlesui-float-cursor-style",d.appendChild(c.createTextNode(["*, *::before, *::after {","  cursor: none !important;","}",".headlesui-float-cursor-root {","  pointer-events: none !important;","}"].join(`
`))),()=>{var h;return(h=c.getElementById("headlesui-float-cursor-style"))==null?void 0:h.remove()}}},[t]),"ontouchstart"in window||navigator.maxTouchPoints>0?(Ui("touchstart",u),Ui("touchend",o),Ui("touchmove",u)):(Ui("mouseenter",a),Ui("mouseleave",o),Ui("mousemove",a)))}return Pe.jsx(mw,{...e,portal:!0,className:"headlesui-float-cursor-root",onInitial:n})}const V6=Object.assign(ER,{Reference:$6,Content:F6,Arrow:z6,Virtual:mw,ContextMenu:j6,Cursor:U6}),Pc=S.createContext({current:null,open:()=>{},close:()=>{}});function H6(t){return k.jsx(aw,{children:({open:e})=>k.jsx(W6,{...t,popoverIsOpen:e})})}function W6({popoverIsOpen:t,children:e,...n}){const[i,r]=S.useState([]),s=i.at(-1)||null,o=a=>r([...i,a]),l=()=>r(i.slice(0,-1));return!t&&s!==null&&setTimeout(()=>r([]),50),k.jsx(Pc.Provider,{value:{current:s,open:o,close:l},children:k.jsx(V6,{...n,children:e})})}const AR=S.forwardRef(({children:t},e)=>{const n=S.useRef(null),{current:i}=S.useContext(Pc);return k.jsxs(aw.Panel,{ref:e,className:"z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-100 bg-white p-1 text-slate-700 shadow-md",children:[k.jsx("div",{ref:n}),k.jsx(qh.Group,{target:n,children:k.jsx(qh,{as:"div",className:i===null?"block":"hidden",children:t})})]})});AR.displayName="MenuContent";function PR({children:t}){const{current:e,close:n}=S.useContext(Pc);return k.jsxs("div",{className:"flex items-center px-2 py-1.5 text-sm font-semibold text-slate-900",children:[e&&k.jsx("button",{className:"-ml-0.5 mr-1 flex items-center justify-center rounded-full hover:bg-slate-100 focus:bg-slate-100",onClick:n,children:k.jsx("span",{className:"icon-[carbon--chevron-left] h-5 w-5"})}),t]})}function RR(){return k.jsx("hr",{className:"-mx-1 my-1 h-px border-none bg-slate-100"})}function gw({children:t,disabled:e=!1,leading:n,trailing:i,href:r,external:s=!1,onClick:o}){if(r&&o)throw new Error("`href` and `onClick` are mutually exclusive");const l=e?"div":r?"a":o?"button":"div";return r&&s&&!i&&(i="icon-[carbon--launch]"),S.createElement(l,{className:kl("relative flex select-none items-center rounded-sm py-1.5 px-2 text-sm font-medium outline-none hover:bg-slate-100 focus:bg-slate-100 w-full",e&&"pointer-events-none opacity-50 cursor-default"),...l==="a"?{href:r,target:s?"_blank":void 0,rel:"noreferrer"}:l==="button"?{onClick:o}:{}},k.jsxs(k.Fragment,{children:[k.jsx("span",{className:kl("mr-2 h-4 w-4",n)}),t,i&&k.jsx("span",{className:kl("ml-auto block h-4 w-4",i)})]}))}function G6({value:t,onChange:e,options:n,getOptionLabel:i,...r}){return k.jsxs(MR,{children:[k.jsx(OR,{...r}),k.jsxs(TR,{children:[k.jsx(PR,{children:r.children}),k.jsx(RR,{}),n.map((s,o)=>k.jsx(gw,{leading:s===t?"icon-[carbon--radio-button-checked]":"icon-[carbon--radio-button]",onClick:()=>e(s),children:i(s)},o))]})]})}const yw=S.createContext(null);function MR({children:t}){const e=S.useId();return k.jsx(yw.Provider,{value:e,children:t})}function OR(t){const e=S.useContext(yw),{open:n}=S.useContext(Pc);if(e===null)throw new Error("SubmenuTrigger must be rendered inside a Submenu");return k.jsx(gw,{...t,trailing:"icon-[carbon--chevron-right]",onClick:()=>n(e)})}function TR({children:t}){const e=S.useContext(yw),{current:n}=S.useContext(Pc);return k.jsx(qh,{as:"div",className:n===e?"block":"hidden",children:t})}const on=Object.assign(H6,{Button:aw.Button,Content:AR,Title:PR,Separator:RR,Item:gw,Radio:G6,Submenu:MR,SubmenuTrigger:OR,SubmenuContent:TR});function X6(){const[t,e]=Ja(RA),[n,i]=Ja(aI),[r,s]=Ja(PA),[o,l]=Ja(kv),a=Cc(),[u]=sp(),c=u.type==="stopped";return k.jsxs(on,{strategy:"fixed",placement:"bottom-end",shift:8,offset:8,children:[k.jsx(on.Button,{className:"flex h-full items-center p-3 outline-none transition hover:bg-slate-500/30 focus:bg-slate-500/30 focus:outline-none",title:a("menu.label"),children:k.jsx("span",{className:"icon-[carbon--menu] h-6 w-6"})}),k.jsxs(on.Content,{children:[k.jsx(on.Title,{children:a("menu.label")}),k.jsx(on.Separator,{}),k.jsx(on.Radio,{leading:"icon-[carbon--devices]",value:t,onChange:e,options:["pio-switches-and-leds","pio-printer","handshake"],getOptionLabel:d=>a(`menu.devices.${d}`),disabled:!c,children:a("menu.devices.label")}),k.jsx(on.Radio,{leading:"icon-[carbon--character-whole-number]",value:n,onChange:i,options:["hex","bin","uint","int","ascii"],getOptionLabel:d=>a(`menu.dataRepresentation.${d}`),children:a("menu.dataRepresentation.label")}),k.jsx(on.Radio,{leading:"icon-[carbon--data-table]",value:r,onChange:s,options:["unchanged","clean","randomize"],getOptionLabel:d=>a(`menu.dataOnLoad.${d}`),children:a("menu.dataOnLoad.label")}),k.jsx(on.Separator,{}),k.jsx(on.Radio,{leading:"icon-[carbon--translate]",value:o,onChange:l,options:["en","es"],getOptionLabel:d=>k.jsxs("span",{className:"flex items-center gap-1 [&_svg]:h-5",children:[d==="en"&&k.jsxs(k.Fragment,{children:[k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36",children:[k.jsx("path",{fill:"#00247D",d:"M0 9.059V13h5.628zM4.664 31H13v-5.837zM23 25.164V31h8.335zM0 23v3.941L5.63 23zM31.337 5H23v5.837zM36 26.942V23h-5.631zM36 13V9.059L30.371 13zM13 5H4.664L13 10.837z"}),k.jsx("path",{fill:"#CF1B2B",d:"M25.14 23l9.712 6.801c.471-.479.808-1.082.99-1.749L28.627 23H25.14zM13 23h-2.141l-9.711 6.8c.521.53 1.189.909 1.938 1.085L13 23.943V23zm10-10h2.141l9.711-6.8c-.521-.53-1.188-.909-1.937-1.085L23 12.057V13zm-12.141 0L1.148 6.2C.677 6.68.34 7.282.157 7.949L7.372 13h3.487z"}),k.jsx("path",{fill:"#EEE",d:"M36 21H21v10h2v-5.836L31.335 31H32c1.117 0 2.126-.461 2.852-1.199L25.14 23h3.487l7.215 5.052c.093-.337.158-.686.158-1.052v-.058L30.369 23H36v-2zM0 21v2h5.63L0 26.941V27c0 1.091.439 2.078 1.148 2.8l9.711-6.8H13v.943l-9.914 6.941c.294.07.598.116.914.116h.664L13 25.163V31h2V21H0zM36 9c0-1.091-.439-2.078-1.148-2.8L25.141 13H23v-.943l9.915-6.942C32.62 5.046 32.316 5 32 5h-.663L23 10.837V5h-2v10h15v-2h-5.629L36 9.059V9zM13 5v5.837L4.664 5H4c-1.118 0-2.126.461-2.852 1.2l9.711 6.8H7.372L.157 7.949C.065 8.286 0 8.634 0 9v.059L5.628 13H0v2h15V5h-2z"}),k.jsx("path",{fill:"#CF1B2B",d:"M21 15V5h-6v10H0v6h15v10h6V21h15v-6z"})]}),"English"]}),d==="es"&&k.jsxs(k.Fragment,{children:[k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36",children:[k.jsx("path",{fill:"#75AADB",d:"M36 27c0 2.209-1.791 4-4 4H4c-2.209 0-4-1.791-4-4V9c0-2.209 1.791-4 4-4h28c2.209 0 4 1.791 4 4v18z"}),k.jsx("path",{fill:"#EEE",d:"M0 13h36v10H0z"}),k.jsx("path",{fill:"#FCBF49",d:"M18 13l.488 2.548 1.426-2.167-.525 2.54 2.146-1.457-1.457 2.147 2.541-.524-2.167 1.425L23 18l-2.548.488 2.167 1.426-2.541-.525 1.457 2.146-2.146-1.457.525 2.541-1.426-2.167L18 23l-.488-2.548-1.425 2.167.524-2.541-2.147 1.457 1.457-2.146-2.54.525 2.167-1.426L13 18l2.548-.488-2.167-1.425 2.54.524-1.457-2.147 2.147 1.457-.524-2.54 1.425 2.167z"}),k.jsx("path",{fill:"#843511",d:"M18 14.33l.242 1.265.116.605.339-.514.708-1.076-.261 1.261-.125.604.51-.346 1.066-.723-.723 1.066-.346.51.603-.125 1.262-.26-1.076.708-.515.337.605.116L21.67 18l-1.265.242-.605.116.514.339 1.076.708-1.262-.261-.604-.125.346.51.723 1.065-1.065-.723-.51-.346.125.604.261 1.262-.708-1.076-.338-.515-.116.605L18 21.67l-.242-1.265-.116-.605-.339.515-.708 1.076.26-1.262.125-.603-.51.346-1.066.723.723-1.066.346-.51-.604.125-1.261.261 1.076-.708.514-.339-.605-.116L14.33 18l1.265-.242.605-.116-.515-.339-1.076-.708 1.261.26.603.125-.346-.51-.724-1.066 1.066.724.51.346-.125-.603-.26-1.261.708 1.076.339.515.116-.605L18 14.33M18 13l-.488 2.548-1.425-2.167.524 2.541-2.147-1.457 1.457 2.147-2.54-.524 2.167 1.425L13 18l2.548.488-2.167 1.426 2.54-.525-1.457 2.146 2.147-1.457-.524 2.541 1.425-2.167L18 23l.488-2.548 1.426 2.167-.525-2.541 2.146 1.457-1.457-2.146 2.541.525-2.167-1.426L23 18l-2.548-.488 2.167-1.425-2.541.524 1.457-2.147-2.146 1.457.525-2.541-1.426 2.167L18 13zm1.914.381h.005-.005zm1.621 1.083h.005-.005zm1.084 1.623h.005-.005z"}),k.jsx("circle",{fill:"#FCBF49",cx:"18",cy:"18",r:"2"}),k.jsx("path",{fill:"#843511",d:"M18 20.125c-1.172 0-2.125-.953-2.125-2.125s.953-2.125 2.125-2.125 2.125.953 2.125 2.125-.953 2.125-2.125 2.125zm0-4c-1.034 0-1.875.841-1.875 1.875s.841 1.875 1.875 1.875 1.875-.841 1.875-1.875-.841-1.875-1.875-1.875z"}),k.jsx("path",{fill:"#C16540",d:"M17.801 17.774c0 .155-.261.28-.583.28-.323 0-.584-.125-.584-.28 0-.155.261-.28.584-.28.322 0 .583.125.583.28zm1.553-.024c0-.161-.266-.292-.594-.292-.328 0-.594.13-.594.292s.266.292.594.292c.329 0 .594-.131.594-.292z"}),k.jsx("path",{fill:"#ED8662",d:"M17.463 18.874c0-.126.246-.229.548-.229.303 0 .548.102.548.229 0 .126-.246.229-.548.229-.303 0-.548-.103-.548-.229z"})]}),"Espaol"]})]}),children:a("menu.language")}),k.jsx(on.Separator,{}),k.jsx(on.Item,{href:"docs",external:!0,leading:"icon-[carbon--document]",children:a("menu.documentation")}),k.jsx(on.Item,{href:"https://github.com/vonsim/vonsim",external:!0,leading:"icon-[carbon--logo-github]",children:"GitHub"}),k.jsx(on.Item,{href:"https://github.com/vonsim/vonsim/issues/new?labels=new+version",external:!0,leading:"icon-[carbon--warning-filled]",children:a("menu.report-issue")})]})]})}function J6(){const t=Cc(),[e]=sp();return k.jsxs("div",{className:kl("mx-auto flex h-6 w-40 select-none items-center justify-center gap-1 rounded-full lg:mx-8","text-center text-sm font-semibold",e.type==="running"&&"bg-emerald-200 text-emerald-700",e.type==="paused"&&"bg-amber-200 text-amber-700",e.type==="waiting-for-input"&&"bg-amber-200 text-amber-700",e.type==="stopped"&&(e.reason==="halt"?"bg-sky-200 text-sky-700":"bg-red-200 text-red-700")),children:[k.jsx("span",{className:kl("h-4 w-4",e.type==="running"&&"icon-[carbon--settings] animate-spin",e.type==="paused"&&"icon-[carbon--pause] animate-pulse",e.type==="waiting-for-input"&&"icon-[carbon--keyboard] animate-bounce",e.type==="stopped"&&[e.reason==="halt"&&"icon-[carbon--stop-sign]",e.reason==="error"&&"icon-[carbon--error]"])}),k.jsx("span",{children:t(`runner.state.${e.type}`)})]})}function Y6(){const t=gD(),[e,n]=sD(!1),i=hD(()=>{window.navigator.vibrate(100),n()},{isPreventDefault:!0,delay:1500});return k.jsxs("header",{className:"text-sm text-white",children:[k.jsxs("div",{className:"flex items-center lg:h-full",children:[k.jsxs("div",{className:"flex select-none items-center justify-center px-4 py-2",children:[k.jsx("span",{className:kl("icon-[carbon--machine-learning] mr-2 block h-8 w-8",e&&"animate-spin"),...i}),k.jsxs("h1",{className:"text-xl font-bold",children:["Von",k.jsx("span",{className:"text-mantis-400",children:"Sim"})]})]}),k.jsx(J6,{}),!t&&k.jsxs(k.Fragment,{children:[k.jsx(Wx,{}),k.jsx("div",{className:"grow"})]}),k.jsx(X6,{})]}),t&&k.jsx(Wx,{})]})}const K6=1024;let q6=0;class Fm{constructor(e,n){this.from=e,this.to=n}}class Se{constructor(e={}){this.id=q6++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Sn.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Se.closedBy=new Se({deserialize:t=>t.split(" ")});Se.openedBy=new Se({deserialize:t=>t.split(" ")});Se.group=new Se({deserialize:t=>t.split(" ")});Se.contextHash=new Se({perNode:!0});Se.lookAhead=new Se({perNode:!0});Se.mounted=new Se({perNode:!0});const Q6=Object.create(null);class Sn{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):Q6,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Sn(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Se.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(Se.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Sn.none=new Sn("",Object.create(null),0,8);class vw{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Sn(i.name,r,i.id,i.flags):i)}return new vw(n)}}const vd=new WeakMap,uS=new WeakMap;var Mt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Mt||(Mt={}));class Ye{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(Se.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new of(this.topNode,e)}cursorAt(e,n=0,i=0){let r=vd.get(this)||this.topNode,s=new of(r);return s.moveTo(e,n),vd.set(this,s._tree),s}get topNode(){return new $r(this,0,0,null)}resolve(e,n=0){let i=sa(vd.get(this)||this.topNode,e,n,!1);return vd.set(this,i),i}resolveInner(e,n=0){let i=sa(uS.get(this)||this.topNode,e,n,!0);return uS.set(this,i),i}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,l=(o&Mt.IncludeAnonymous)>0;for(let a=this.cursor(o|Mt.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=r&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:xw(Sn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Ye(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Ye(Sn.none,n,i,r)))}static build(e){return eF(e)}}Ye.empty=new Ye(Sn.none,[],[],0);class ww{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ww(this.buffer,this.index)}}class Uo{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Sn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,l=-1;for(let a=e;a!=n&&!(NR(s,r,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let l=e,a=0;l<n;){s[a++]=r[l++],s[a++]=r[l++]-i;let u=s[a++]=r[l++]-i;s[a++]=r[l++]-e,o=Math.max(o,u)}return new Uo(s,o,this.set)}}function NR(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function DR(t,e){let n=t.childBefore(e);for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(t=n,n=i.prevSibling):n=i}return t}function sa(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof $r&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Mt.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof $r&&o.index<0&&((r=l.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class $r{constructor(e,n,i,r){this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,u=n>0?l.length:-1;e!=u;e+=n){let c=l[e],d=a[e]+o.from;if(NR(r,i,d,d+c.length)){if(c instanceof Uo){if(s&Mt.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new xs(new Z6(o,c,e,d),null,h)}else if(s&Mt.IncludeAnonymous||!c.type.isAnonymous||bw(c)){let h;if(!(s&Mt.IgnoreMounts)&&c.props&&(h=c.prop(Se.mounted))&&!h.overlay)return new $r(h.tree,d,e,o);let f=new $r(c,d,e,o);return s&Mt.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&Mt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Mt.IgnoreOverlays)&&(r=this._tree.prop(Se.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?l>=s:l>s))return new $r(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new of(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return sa(this,e,n,!1)}resolveInner(e,n=0){return sa(this,e,n,!0)}enterUnfinishedNodesBefore(e){return DR(this,e)}getChild(e,n=null,i=null){let r=rf(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return rf(this,e,n,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return sf(this,e)}}function rf(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(;!r.type.is(n);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function sf(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class Z6{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class xs{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new xs(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Mt.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new xs(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new xs(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new xs(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new of(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Ye(this.type,e,n,this.to-this.from)}resolve(e,n=0){return sa(this,e,n,!1)}resolveInner(e,n=0){return sa(this,e,n,!0)}enterUnfinishedNodesBefore(e){return DR(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,i=null){let r=rf(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return rf(this,e,n,i)}get node(){return this}matchContext(e){return sf(this,e)}}class of{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof $r)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof $r?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Mt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Mt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Mt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Mt.IncludeAnonymous||l instanceof Uo||!l.type.isAnonymous||bw(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new xs(this.buffer,n,this.stack[r]);return this.bufferNode=new xs(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return sf(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return sf(this.node,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function bw(t){return t.children.some(e=>e instanceof Uo||!e.type.isAnonymous||bw(e))}function eF(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=K6,reused:s=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(n)?new ww(n,n.length):n,a=i.types,u=0,c=0;function d(b,C,P,R,I){let{id:E,start:A,end:M,size:O}=l,D=c;for(;O<0;)if(l.next(),O==-1){let L=s[E];P.push(L),R.push(A-b);return}else if(O==-3){u=E;return}else if(O==-4){c=E;return}else throw new RangeError(`Unrecognized record size: ${O}`);let N=a[E],B,$,z=A-b;if(M-A<=r&&($=g(l.pos-C,I))){let L=new Uint16Array($.size-$.skip),_=l.pos-$.size,j=L.length;for(;l.pos>_;)j=v($.start,L,j);B=new Uo(L,M-$.start,i),z=$.start-b}else{let L=l.pos-O;l.next();let _=[],j=[],ee=E>=o?E:-1,re=0,ge=M;for(;l.pos>L;)ee>=0&&l.id==ee&&l.size>=0?(l.end<=ge-r&&(f(_,j,A,re,l.end,ge,ee,D),re=_.length,ge=l.end),l.next()):d(A,L,_,j,ee);if(ee>=0&&re>0&&re<_.length&&f(_,j,A,re,A,ge,ee,D),_.reverse(),j.reverse(),ee>-1&&re>0){let rt=h(N);B=xw(N,_,j,0,_.length,0,M-A,rt,rt)}else B=p(N,_,j,M-A,D-M)}P.push(B),R.push(z)}function h(b){return(C,P,R)=>{let I=0,E=C.length-1,A,M;if(E>=0&&(A=C[E])instanceof Ye){if(!E&&A.type==b&&A.length==R)return A;(M=A.prop(Se.lookAhead))&&(I=P[E]+A.length+M)}return p(b,C,P,R,I)}}function f(b,C,P,R,I,E,A,M){let O=[],D=[];for(;b.length>R;)O.push(b.pop()),D.push(C.pop()+P-I);b.push(p(i.types[A],O,D,E-I,M-E)),C.push(I-P)}function p(b,C,P,R,I=0,E){if(u){let A=[Se.contextHash,u];E=E?[A].concat(E):[A]}if(I>25){let A=[Se.lookAhead,I];E=E?[A].concat(E):[A]}return new Ye(b,C,P,R,E)}function g(b,C){let P=l.fork(),R=0,I=0,E=0,A=P.end-r,M={size:0,start:0,skip:0};e:for(let O=P.pos-b;P.pos>O;){let D=P.size;if(P.id==C&&D>=0){M.size=R,M.start=I,M.skip=E,E+=4,R+=4,P.next();continue}let N=P.pos-D;if(D<0||N<O||P.start<A)break;let B=P.id>=o?4:0,$=P.start;for(P.next();P.pos>N;){if(P.size<0)if(P.size==-3)B+=4;else break e;else P.id>=o&&(B+=4);P.next()}I=$,R+=D,E+=B}return(C<0||R==b)&&(M.size=R,M.start=I,M.skip=E),M.size>4?M:void 0}function v(b,C,P){let{id:R,start:I,end:E,size:A}=l;if(l.next(),A>=0&&R<o){let M=P;if(A>4){let O=l.pos-(A-4);for(;l.pos>O;)P=v(b,C,P)}C[--P]=M,C[--P]=E-b,C[--P]=I-b,C[--P]=R}else A==-3?u=R:A==-4&&(c=R);return P}let m=[],y=[];for(;l.pos>0;)d(t.start||0,t.bufferStart||0,m,y,-1);let w=(e=t.length)!==null&&e!==void 0?e:m.length?y[0]+m[0].length:0;return new Ye(a[t.topID],m.reverse(),y.reverse(),w)}const cS=new WeakMap;function rh(t,e){if(!t.isAnonymous||e instanceof Uo||e.type!=t)return 1;let n=cS.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Ye)){n=1;break}n+=rh(t,i)}cS.set(e,n)}return n}function xw(t,e,n,i,r,s,o,l,a){let u=0;for(let p=i;p<r;p++)u+=rh(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,g,v,m,y){for(let w=v;w<m;){let b=w,C=g[w],P=rh(t,p[w]);for(w++;w<m;w++){let R=rh(t,p[w]);if(P+R>=c)break;P+=R}if(w==b+1){if(P>c){let R=p[b];f(R.children,R.positions,0,R.children.length,g[b]+y);continue}d.push(p[b])}else{let R=g[w-1]+p[w-1].length-C;d.push(xw(t,p,g,b,w,C,R,null,a))}h.push(C+y-s)}}return f(e,n,i,r,0),(l||a)(d,h,o)}class So{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new So(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<n.length?n[l]:null,d=c?c.fromA:1e9;if(d-a>=i)for(;o&&o.from<d;){let h=o;if(a>=h.from||d<=h.to||u){let f=Math.max(h.from,a)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new So(f,p,h.tree,h.offset+u,l>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return r}}class LR{startParse(e,n,i){return typeof e=="string"&&(e=new tF(e)),i=i?i.length?i.map(r=>new Fm(r.from,r.to)):[new Fm(0,0)]:[new Fm(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class tF{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Se({perNode:!0});let nF=0;class Pt{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=nF++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Pt([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new lf;return n=>n.modified.indexOf(e)>-1?n:lf.get(n.base||n,n.modified.concat(e).sort((i,r)=>i.id-r.id))}}let iF=0;class lf{constructor(){this.instances=[],this.id=iF++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(l=>l.base==e&&rF(n,l.modified));if(i)return i;let r=[],s=new Pt(r,e,n);for(let l of n)l.instances.push(s);let o=sF(n);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(lf.get(l,a));return s}}function rF(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function sF(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function oF(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,l=r;for(let d=0;;){if(l=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);l=r.slice(d)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+r);let c=new af(i,o,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return IR.add(e)}const IR=new Se;class af{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}af.empty=new af([],2,null);function BR(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let a of l.set){let u=n[a.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function lF(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function aF(t,e,n,i=0,r=t.length){let s=new uF(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class uF{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=cF(e)||af.empty,d=lF(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,l),u),c.opaque)return;let h=e.tree&&e.tree.prop(Se.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+l,1),p=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),g=e.firstChild();for(let v=0,m=l;;v++){let y=v<h.overlay.length?h.overlay[v]:null,w=y?y.from+l:a,b=Math.max(n,m),C=Math.min(i,w);if(b<C&&g)for(;e.from<C&&(this.highlightRange(e,b,C,r,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>i)break;m=y.to+l,m>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+l),Math.min(i,m),"",p),this.startSpan(Math.min(i,m),u))}g&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function cF(t){let e=t.type.prop(IR);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const K=Pt.define,wd=K(),rs=K(),dS=K(rs),hS=K(rs),ss=K(),bd=K(ss),zm=K(ss),Li=K(),Qs=K(Li),Ni=K(),Di=K(),Z0=K(),za=K(Z0),xd=K(),ce={comment:wd,lineComment:K(wd),blockComment:K(wd),docComment:K(wd),name:rs,variableName:K(rs),typeName:dS,tagName:K(dS),propertyName:hS,attributeName:K(hS),className:K(rs),labelName:K(rs),namespace:K(rs),macroName:K(rs),literal:ss,string:bd,docString:K(bd),character:K(bd),attributeValue:K(bd),number:zm,integer:K(zm),float:K(zm),bool:K(ss),regexp:K(ss),escape:K(ss),color:K(ss),url:K(ss),keyword:Ni,self:K(Ni),null:K(Ni),atom:K(Ni),unit:K(Ni),modifier:K(Ni),operatorKeyword:K(Ni),controlKeyword:K(Ni),definitionKeyword:K(Ni),moduleKeyword:K(Ni),operator:Di,derefOperator:K(Di),arithmeticOperator:K(Di),logicOperator:K(Di),bitwiseOperator:K(Di),compareOperator:K(Di),updateOperator:K(Di),definitionOperator:K(Di),typeOperator:K(Di),controlOperator:K(Di),punctuation:Z0,separator:K(Z0),bracket:za,angleBracket:K(za),squareBracket:K(za),paren:K(za),brace:K(za),content:Li,heading:Qs,heading1:K(Qs),heading2:K(Qs),heading3:K(Qs),heading4:K(Qs),heading5:K(Qs),heading6:K(Qs),contentSeparator:K(Li),list:K(Li),quote:K(Li),emphasis:K(Li),strong:K(Li),link:K(Li),monospace:K(Li),strikethrough:K(Li),inserted:K(),deleted:K(),changed:K(),invalid:K(),meta:xd,documentMeta:K(xd),annotation:K(xd),processingInstruction:K(xd),definition:Pt.defineModifier(),constant:Pt.defineModifier(),function:Pt.defineModifier(),standard:Pt.defineModifier(),local:Pt.defineModifier(),special:Pt.defineModifier()};BR([{tag:ce.link,class:"tok-link"},{tag:ce.heading,class:"tok-heading"},{tag:ce.emphasis,class:"tok-emphasis"},{tag:ce.strong,class:"tok-strong"},{tag:ce.keyword,class:"tok-keyword"},{tag:ce.atom,class:"tok-atom"},{tag:ce.bool,class:"tok-bool"},{tag:ce.url,class:"tok-url"},{tag:ce.labelName,class:"tok-labelName"},{tag:ce.inserted,class:"tok-inserted"},{tag:ce.deleted,class:"tok-deleted"},{tag:ce.literal,class:"tok-literal"},{tag:ce.string,class:"tok-string"},{tag:ce.number,class:"tok-number"},{tag:[ce.regexp,ce.escape,ce.special(ce.string)],class:"tok-string2"},{tag:ce.variableName,class:"tok-variableName"},{tag:ce.local(ce.variableName),class:"tok-variableName tok-local"},{tag:ce.definition(ce.variableName),class:"tok-variableName tok-definition"},{tag:ce.special(ce.variableName),class:"tok-variableName2"},{tag:ce.definition(ce.propertyName),class:"tok-propertyName tok-definition"},{tag:ce.typeName,class:"tok-typeName"},{tag:ce.namespace,class:"tok-namespace"},{tag:ce.className,class:"tok-className"},{tag:ce.macroName,class:"tok-macroName"},{tag:ce.propertyName,class:"tok-propertyName"},{tag:ce.operator,class:"tok-operator"},{tag:ce.comment,class:"tok-comment"},{tag:ce.meta,class:"tok-meta"},{tag:ce.invalid,class:"tok-invalid"},{tag:ce.punctuation,class:"tok-punctuation"}]);var jm;const ml=new Se;function dF(t){return ne.define({combine:t?e=>e.concat(t):void 0})}const hF=new Se;class wi{constructor(e,n,i=[],r=""){this.data=e,this.name=r,we.prototype.hasOwnProperty("tree")||Object.defineProperty(we.prototype,"tree",{get(){return Pi(this)}}),this.parser=n,this.extension=[aa.of(this),we.languageData.of((s,o,l)=>{let a=fS(s,o,l),u=a.type.prop(ml);if(!u)return[];let c=s.facet(u),d=a.type.prop(hF);if(d){let h=a.resolve(o-a.from,l);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return fS(e,n,i).type.prop(ml)==this.data}findRegions(e){let n=e.facet(aa);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(ml)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(Se.mounted);if(l){if(l.tree.prop(ml)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof Ye&&r(u,s.positions[a]+o)}};return r(Pi(e),0),i}get allowsNesting(){return!0}}wi.setState=me.define();function fS(t,e,n){let i=t.facet(aa),r=Pi(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Mt.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Pi(t){let e=t.field(wi.state,!1);return e?e.tree:Ye.empty}class fF{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let ja=null;class oa{constructor(e,n,i=[],r,s,o,l,a){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new oa(e,n,[],Ye.empty,0,i,[],null)}startParse(){return this.parser.startParse(new fF(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Ye.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(So.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(So.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=ja;ja=this;try{return e()}finally{ja=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=pS(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,d,h)=>a.push({fromA:u,toA:c,fromB:d,toB:h})),i=So.applyChanges(i,a),r=Ye.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&l.push({from:c,to:d})}}}return new oa(this.parser,n,i,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=pS(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends LR{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=ja;if(a){for(let u of r)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Ye(Sn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return ja}}function pS(t,e,n){return So.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class la{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new la(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=oa.create(e.facet(aa).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new la(i)}}wi.state=Ht.define({create:la.init,update(t,e){for(let n of e.effects)if(n.is(wi.setState))return n.value;return e.startState.facet(aa)!=e.state.facet(aa)?la.init(e.state):t.apply(e)}});let _R=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(_R=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Um=typeof navigator<"u"&&(!((jm=navigator.scheduling)===null||jm===void 0)&&jm.isInputPending)?()=>navigator.scheduling.isInputPending():null,pF=Bt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(wi.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(wi.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=_R(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(wi.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Um?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&i.doc.length>r+1e3,a=s.context.work(()=>Um&&Um()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:wi.setState.of(new la(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Si(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),aa=ne.define({combine(t){return t.length?t[0]:null},enables:t=>[wi.state,pF,le.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class mF{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const $R=ne.define(),Sw=ne.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Io(t){let e=t.facet(Sw);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function uf(t,e){let n="",i=t.tabSize,r=t.facet(Sw)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function FR(t,e){t instanceof we&&(t=new kw(t));for(let i of t.state.facet($R)){let r=i(t,e);if(r!==void 0)return r}let n=Pi(t.state);return n?yF(t,n,e):null}class kw{constructor(e,n={}){this.state=e,this.options=n,this.unit=Io(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Vf(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const gF=new Se;function yF(t,e,n){return zR(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function vF(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function wF(t){let e=t.type.prop(gF);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(Se.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>kF(o,!0,1,void 0,s&&!vF(o)?r.from:void 0)}return t.parent==null?bF:null}function zR(t,e,n){for(;t;t=t.parent){let i=wF(t);if(i)return i(Cw.create(n,e,t))}return null}function bF(){return 0}class Cw extends kw{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.node=i}static create(e,n,i){return new Cw(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(xF(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?zR(e,this.pos,this.base):0}}function xF(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function SF(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?n:null;l=a.to}}function kF(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||r==t.pos+o,a=e?SF(t):null;return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}const CF=200;function EF(){return we.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+CF)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,l=-1,a=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==l)continue;l=c.from;let d=FR(o,c.from);if(d==null)continue;let h=/^\s*/.exec(c.text)[0],f=uf(o,d);h!=f&&a.push({from:c.from,to:c.from+h.length,insert:f})}return a.length?[t,{changes:a,sequential:!0}]:t})}const AF=ne.define(),PF=new Se;function RF(t,e,n){let i=Pi(t);if(i.length<n)return null;let r=i.resolveInner(n,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let l=o.type.prop(PF);if(l&&(o.to<i.length-50||i.length==t.doc.length||!MF(o))){let a=l(o,t);a&&a.from<=n&&a.from>=e&&a.to>n&&(s=a)}}return s}function MF(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function jR(t,e,n){for(let i of t.facet(AF)){let r=i(t,e,n);if(r)return r}return RF(t,e,n)}function UR(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const Ew=me.define({map:UR}),yp=me.define({map:UR});function VR(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Rc=Ht.define({create(){return Ce.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(Ew)&&!OF(t,n.value.from,n.value.to)?t=t.update({add:[mS.range(n.value.from,n.value.to)]}):n.is(yp)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>le.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(mS.range(i,r))}return Ce.set(e,!0)}});function HR(t,e,n){var i;let r=null;return(i=t.field(Rc,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function OF(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function WR(t,e){return t.field(Rc,!1)?e:e.concat(me.appendConfig.of(BF()))}const TF=t=>{for(let e of VR(t)){let n=jR(t.state,e.from,e.to);if(n)return t.dispatch({effects:WR(t.state,[Ew.of(n),GR(t,n)])}),!0}return!1},NF=t=>{if(!t.state.field(Rc,!1))return!1;let e=[];for(let n of VR(t)){let i=HR(t.state,n.from,n.to);i&&e.push(yp.of(i),GR(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function GR(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return le.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const DF=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=jR(e,r.from,r.to);s&&n.push(Ew.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:WR(t.state,n)}),!!n.length},LF=t=>{let e=t.state.field(Rc,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(yp.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},IF={placeholderDOM:null,placeholderText:""},XR=ne.define({combine(t){return Ws(t,IF)}});function BF(t){let e=[Rc,_F];return t&&e.push(XR.of(t)),e}const mS=Ce.replace({widget:new class extends zo{toDOM(t){let{state:e}=t,n=e.facet(XR),i=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),l=HR(t.state,o.from,o.to);l&&t.dispatch({effects:yp.of(l)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),_F=le.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class vp{constructor(e,n){this.specs=e;let i;function r(l){let a=Is.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof wi?l=>l.prop(ml)==o.data:o?l=>l==o:void 0,this.style=BR(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new Is(i):null,this.themeType=n.themeType}static define(e,n){return new vp(e,n||{})}}const ey=ne.define(),JR=ne.define({combine(t){return t.length?[t[0]]:null}});function Vm(t){let e=t.facet(ey);return e.length?e:t.facet(JR)}function $F(t,e){let n=[zF],i;return t instanceof vp&&(t.module&&n.push(le.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(JR.of(t)):i?n.push(ey.computeN([le.darkTheme],r=>r.facet(le.darkTheme)==(i=="dark")?[t]:[])):n.push(ey.of(t)),n}class FF{constructor(e){this.markCache=Object.create(null),this.tree=Pi(e.state),this.decorations=this.buildDeco(e,Vm(e.state))}update(e){let n=Pi(e.state),i=Vm(e.state),r=i!=Vm(e.startState);n.length<e.view.viewport.to&&!r&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,n){if(!n||!this.tree.length)return Ce.none;let i=new Oo;for(let{from:r,to:s}of e.visibleRanges)aF(this.tree,n,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Ce.mark({class:a})))},r,s);return i.finish()}}const zF=hc.high(Bt.fromClass(FF,{decorations:t=>t.decorations})),jF=1e4,UF="()[]{}",VF=new Se;function ty(t,e,n){let i=t.prop(e<0?Se.openedBy:Se.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function ny(t){let e=t.type.prop(VF);return e?e(t.node):t}function Sd(t,e,n,i={}){let r=i.maxScanDistance||jF,s=i.brackets||UF,o=Pi(t),l=o.resolveInner(e,n);for(let a=l;a;a=a.parent){let u=ty(a.type,n,s);if(u&&a.from<a.to){let c=ny(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return HF(t,e,n,a,c,u,s)}}return WF(t,e,n,o,l.type,r,s)}function HF(t,e,n,i,r,s,o){let l=i.parent,a={from:r.from,to:r.to},u=0,c=l==null?void 0:l.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=ny(c);return{start:a,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(ty(c.type,n,o))u++;else if(ty(c.type,-n,o)){if(u==0){let d=ny(c);return{start:a,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function WF(t,e,n,i,r,s,o){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let g=n>0?0:f.length-1,v=n>0?f.length:-1;g!=v;g+=n){let m=o.indexOf(f[g]);if(!(m<0||i.resolveInner(p+g,1).type!=r))if(m%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+g,to:p+g+1},matched:m>>1==a>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function gS(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class YR{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=gS(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:gS(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function GF(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||XF,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Rw}}function XF(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const yS=new WeakMap;class Aw extends wi{constructor(e){let n=dF(e.languageData),i=GF(e),r,s=new class extends LR{createParse(o,l,a){return new YF(r,o,l,a)}};super(n,s,[$R.of((o,l)=>this.getIndent(o,l))],e.name),this.topNode=QF(n),r=this,this.streamParser=i,this.stateAfter=new Se({perNode:!0}),this.tokenTable=e.tokenTable?new ZR(i.tokenTable):qF}static define(e){return new Aw(e)}getIndent(e,n){let i=Pi(e.state),r=i.resolve(n);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=yS.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let l=Pw(this,i,0,r.from,s??n),a,u;if(l?(u=l.state,a=l.pos+1):(u=this.streamParser.startState(e.unit),a=0),n-a>1e4)return null;for(;a<n;){let d=e.state.doc.lineAt(a),h=Math.min(n,d.to);if(d.length){let f=o?o(d.from):-1,p=new YR(d.text,e.state.tabSize,e.unit,f<0?void 0:f);for(;p.pos<h-d.from;)qR(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==n)break;a=d.to+1}let c=e.lineAt(n);return o&&s==null&&yS.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function Pw(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=n+e.positions[o],u=l instanceof Ye&&a<r&&Pw(t,l,a,i,r);if(u)return u}return null}function KR(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],l=e.children[s],a;if(o<i&&l instanceof Ye){if(!(a=KR(t,l,n-o,i-o,r)))break;return r?new Ye(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),o+a.length):a}}return null}function JF(t,e,n,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),l=s<=n&&o>n&&Pw(t,r.tree,0-r.offset,n,o),a;if(l&&(a=KR(t,r.tree,n+r.offset,l.pos+r.offset,!1)))return{state:l.state,tree:a}}return{state:t.streamParser.startState(i?Io(i):4),tree:Ye.empty}}class YF{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=oa.get(),o=r[0].from,{state:l,tree:a}=JF(e,i,o,s==null?void 0:s.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Io(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=oa.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,l=this.lineAfter(o);n+=l,i=o+l.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,n,i,r),s}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new YR(n,e?e.state.tabSize:4,e?Io(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=qR(s.token,o,this.state);if(l&&(r=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Ye.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:KF,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Ye(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Ye(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function qR(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const Rw=Object.create(null),nc=[Sn.none],KF=new vw(nc),vS=[],QR=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])QR[t]=eM(Rw,e);class ZR{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),QR)}resolve(e){return e?this.table[e]||(this.table[e]=eM(this.extra,e)):0}}const qF=new ZR(Rw);function Hm(t,e){vS.indexOf(t)>-1||(vS.push(t),console.warn(e))}function eM(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||ce[s];o?typeof o=="function"?n?n=o(n):Hm(s,`Modifier ${s} used at start of tag`):n?Hm(s,`Tag ${s} used as modifier`):n=o:Hm(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let i=e.replace(/ /g,"_"),r=Sn.define({id:nc.length,name:i,props:[oF({[i]:n})]});return nc.push(r),r.id}function QF(t){let e=Sn.define({id:nc.length,name:"Document",props:[ml.add(()=>t)]});return nc.push(e),e}const ZF=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=Mw(t.state,n.from);return i.line?ez(t):i.block?rz(t):!1};function Mc(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const ez=Mc(Ow,0),tz=Mc(Ow,1),nz=Mc(Ow,2),iz=Mc(tM,0),rz=Mc((t,e)=>tM(t,e,oz(e)),0);function Mw(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Ua=50;function sz(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Ua,i),o=t.sliceDoc(r,r+Ua),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,u=s.length-l;if(s.slice(u-e.length,u)==e&&o.slice(a,a+n.length)==n)return{open:{pos:i-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let c,d;r-i<=2*Ua?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+Ua),d=t.sliceDoc(r-Ua,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function oz(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function tM(t,e,n=e.selection.ranges){let i=n.map(s=>Mw(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>sz(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=i[o],{open:u,close:c}=l;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function Ow(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let l=i.length,a=1e9,u=Mw(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<a&&(a=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:l.from+u,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let u=o.from+l,c=u+a.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const iy=Xr.define(),lz=Xr.define(),az=ne.define(),nM=ne.define({combine(t){return Ws(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}});function uz(t){let e=0;return t.iterChangedRanges((n,i)=>e=i),e}const iM=Ht.define({create(){return Yi.empty},update(t,e){let n=e.state.facet(nM),i=e.annotation(iy);if(i){let a=e.docChanged?V.single(uz(e.changes)):void 0,u=gn.fromTransaction(e,a),c=i.side,d=c==0?t.undone:t.done;return u?d=cf(d,d.length,n.minDepth,u):d=oM(d,e.startState.selection),new Yi(c==0?i.rest:d,c==0?d:i.rest)}let r=e.annotation(lz);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(wt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=gn.fromTransaction(e),o=e.annotation(wt.time),l=e.annotation(wt.userEvent);return s?t=t.addChanges(s,o,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Yi(t.done.map(gn.fromJSON),t.undone.map(gn.fromJSON))}});function cz(t={}){return[iM,nM.of(t),le.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?rM:e.inputType=="historyRedo"?ry:null;return i?(e.preventDefault(),i(n)):!1}})]}function Tw(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(iM,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const rM=Tw(0,!1),ry=Tw(1,!1),dz=Tw(0,!0);class gn{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new gn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new gn(e.changes&&gt.fromJSON(e.changes),[],e.mapped&&Qi.fromJSON(e.mapped),e.startSelection&&V.fromJSON(e.startSelection),e.selectionsAfter.map(V.fromJSON))}static fromTransaction(e,n){let i=Zn;for(let r of e.startState.facet(az)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new gn(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Zn)}static selection(e){return new gn(void 0,Zn,void 0,void 0,e)}}function cf(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function hz(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,l)=>{for(let a=0;a<n.length;){let u=n[a++],c=n[a++];l>=u&&o<=c&&(i=!0)}}),i}function fz(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function sM(t,e){return t.length?e.length?t.concat(e):t:e}const Zn=[],pz=200;function oM(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-pz));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),cf(t,t.length-1,1e9,n.setSelAfter(i)))}else return[gn.selection([e])]}function mz(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Wm(t,e){if(!t.length)return t;let n=t.length,i=Zn;for(;n;){let r=gz(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[gn.selection(i)]:Zn}function gz(t,e,n){let i=sM(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Zn,n);if(!t.changes)return gn.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new gn(r,me.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const yz=/^(input\.type|delete)($|\.)/;class Yi{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Yi(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||yz.test(i))&&(!l.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,hz(l.changes,e.changes))||i=="input.type.compose")?o=cf(o,o.length-1,r.minDepth,new gn(e.changes.compose(l.changes),sM(e.effects,l.effects),l.mapped,l.startSelection,Zn)):o=cf(o,o.length,r.minDepth,e),new Yi(o,Zn,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Zn;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&fz(s[s.length-1],e)?this:new Yi(oM(this.done,e),this.undone,n,i)}addMapping(e){return new Yi(Wm(this.done,e),Wm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:iy.of({side:e,rest:mz(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?Zn:r.slice(0,r.length-1);return s.mapped&&(o=Wm(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:iy.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Yi.empty=new Yi(Zn,Zn);function Oc(t,e){return V.create(t.ranges.map(e),t.mainIndex)}function Gs(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Vo({state:t,dispatch:e},n){let i=Oc(t.selection,n);return i.eq(t.selection)?!1:(e(Gs(t,i)),!0)}function wp(t,e){return V.cursor(e?t.to:t.from)}function lM(t,e){return Vo(t,n=>n.empty?t.moveByChar(n,e):wp(n,e))}function Xs(t){return t.textDirectionAt(t.state.selection.main.head)==Je.LTR}const wS=t=>lM(t,!Xs(t)),bS=t=>lM(t,Xs(t));function aM(t,e){return Vo(t,n=>n.empty?t.moveByGroup(n,e):wp(n,e))}const vz=t=>aM(t,!Xs(t)),wz=t=>aM(t,Xs(t));function uM(t,e){return Vo(t,n=>{if(!n.empty)return wp(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const xS=t=>uM(t,!1),SS=t=>uM(t,!0);function cM(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(le.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function dM(t,e){let n=cM(t),{state:i}=t,r=Oc(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):wp(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,u=l.bottom-n.marginBottom;o&&o.top>a&&o.bottom<u&&(s=le.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(Gs(i,r),{effects:s}),!0}const Gm=t=>dM(t,!1),Xm=t=>dM(t,!0);function bp(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=V.cursor(i.from+s))}return r}const kS=t=>Vo(t,e=>bp(t,e,!0)),CS=t=>Vo(t,e=>bp(t,e,!1)),bz=t=>Vo(t,e=>V.cursor(t.lineBlockAt(e.head).from,1)),xz=t=>Vo(t,e=>V.cursor(t.lineBlockAt(e.head).to,-1));function Sz(t,e,n){let i=!1,r=Oc(t.selection,s=>{let o=Sd(t,s.head,-1)||Sd(t,s.head,1)||s.head>0&&Sd(t,s.head-1,1)||s.head<t.doc.length&&Sd(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return n?V.range(s.anchor,l):V.cursor(l)});return i?(e(Gs(t,r)),!0):!1}const kz=({state:t,dispatch:e})=>Sz(t,e,!1);function Js(t,e){let n=Oc(t.state.selection,i=>{let r=e(i);return V.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Gs(t.state,n)),!0)}function hM(t,e){return Js(t,n=>t.moveByChar(n,e))}const ES=t=>hM(t,!Xs(t)),AS=t=>hM(t,Xs(t));function fM(t,e){return Js(t,n=>t.moveByGroup(n,e))}const Cz=t=>fM(t,!Xs(t)),Ez=t=>fM(t,Xs(t));function pM(t,e){return Js(t,n=>t.moveVertically(n,e))}const PS=t=>pM(t,!1),RS=t=>pM(t,!0);function mM(t,e){return Js(t,n=>t.moveVertically(n,e,cM(t).height))}const MS=t=>mM(t,!1),OS=t=>mM(t,!0),TS=t=>Js(t,e=>bp(t,e,!0)),NS=t=>Js(t,e=>bp(t,e,!1)),Az=t=>Js(t,e=>V.cursor(t.lineBlockAt(e.head).from)),Pz=t=>Js(t,e=>V.cursor(t.lineBlockAt(e.head).to)),DS=({state:t,dispatch:e})=>(e(Gs(t,{anchor:0})),!0),LS=({state:t,dispatch:e})=>(e(Gs(t,{anchor:t.doc.length})),!0),IS=({state:t,dispatch:e})=>(e(Gs(t,{anchor:t.selection.main.anchor,head:0})),!0),BS=({state:t,dispatch:e})=>(e(Gs(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Rz=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Mz=({state:t,dispatch:e})=>{let n=Sp(t).map(({from:i,to:r})=>V.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:V.create(n),userEvent:"select"})),!0};function xp(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(o);a<o?(n="delete.backward",a=kd(t,a,!1)):a>o&&(n="delete.forward",a=kd(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=kd(t,o,!1),l=kd(t,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:V.cursor(o)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?le.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function kd(t,e,n){if(t instanceof le)for(let i of t.state.facet(le.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const gM=(t,e)=>xp(t,n=>{let{state:i}=t,r=i.doc.lineAt(n),s,o;if(!e&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,n-r.from))){if(s[s.length-1]=="	")return n-1;let l=Vf(s,i.tabSize),a=l%Io(i)||Io(i);for(let u=0;u<a&&s[s.length-1-u]==" ";u++)n--;o=n}else o=Ut(r.text,n-r.from,e,e)+r.from,o==n&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),Jm=t=>gM(t,!1),_S=t=>gM(t,!0),yM=(t,e)=>xp(t,n=>{let i=n,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==n&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let a=Ut(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),c=o(u);if(l!=null&&c!=l)break;(u!=" "||i!=n)&&(l=c),i=a}return i}),$S=t=>yM(t,!1),Oz=t=>yM(t,!0),FS=t=>xp(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),Tz=t=>xp(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),Nz=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ae.of(["",""])},range:V.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Dz=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Ut(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:Ut(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:t.doc.slice(r,l).append(t.doc.slice(o,r))},range:V.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Sp(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function vM(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Sp(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),l=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let a of s.ranges)r.push(V.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let a of s.ranges)r.push(V.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:V.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Lz=({state:t,dispatch:e})=>vM(t,e,!1),Iz=({state:t,dispatch:e})=>vM(t,e,!0);function wM(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Sp(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Bz=({state:t,dispatch:e})=>wM(t,e,!1),_z=({state:t,dispatch:e})=>wM(t,e,!0),$z=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Sp(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Oc(e.selection,r=>t.moveVertically(r,!0)).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Fz(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Pi(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(Se.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const zS=zz(!1);function zz(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),a=!t&&s==o&&Fz(e,s);t&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let u=new kw(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=FR(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let d=["",uf(e,c)];return a&&d.push(uf(e,u.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:Ae.of(d)},range:V.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function bM(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>n&&(i.empty||i.to>l.from)&&(e(l,r,i),n=l.number),o=l.to+1}let s=t.changes(r);return{changes:r,range:V.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const jS=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(bM(t,(n,i)=>{i.push({from:n.from,insert:t.facet(Sw)})}),{userEvent:"input.indent"})),!0),US=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(bM(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Vf(r,t.tabSize),o=0,l=uf(t,Math.max(0,s-Io(t)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0);function Le(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)xM(t,arguments[e]);return t}function xM(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)xM(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const VS=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class ic{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?l=>s(VS(l)):VS,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Kt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=dv(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=yi(e);let r=this.normalize(n);for(let s=0,o=i;;s++){let l=r.charCodeAt(s),a=this.match(l,o);if(a)return this.value=a,this;if(s==r.length-1)break;o==i&&s<n.length&&n.charCodeAt(s)==l&&o++}}}match(e,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:n+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(ic.prototype[Symbol.iterator]=function(){return this});const SM={from:-1,to:-1,match:/.*/.exec("")},Nw="gm"+(/x/.unicode==null?"":"u");class kM{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=SM,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new CM(e,n,i,r,s);this.re=new RegExp(n,Nw+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=df(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=df(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Ym=new WeakMap;class Ll{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=Ym.get(e);if(!r||r.from>=i||r.to<=n){let l=new Ll(n,e.sliceString(n,i));return Ym.set(e,l),l}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),Ym.set(e,new Ll(o,s)),new Ll(n,s.slice(n-o,i-o))}}class CM{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=SM,this.matchPos=df(e,r),this.re=new RegExp(n,Nw+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Ll.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=df(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ll.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(kM.prototype[Symbol.iterator]=CM.prototype[Symbol.iterator]=function(){return this});function jz(t){try{return new RegExp(t,Nw),!0}catch{return!1}}function df(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function sy(t){let e=Le("input",{class:"cm-textfield",name:"line"}),n=Le("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:hf.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},Le("label",t.state.phrase("Go to line"),": ",e)," ",Le("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,l,a,u,c]=r,d=u?+u.slice(1):0,h=a?+a:o.number;if(a&&c){let p=h/100;l&&(p=p*(l=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*p)}else a&&l&&(h=h*(l=="-"?-1:1)+o.number);let f=s.doc.line(Math.max(1,Math.min(s.doc.lines,h)));t.dispatch({effects:hf.of(!1),selection:V.cursor(f.from+Math.max(0,Math.min(d,f.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const hf=me.define(),HS=Ht.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(hf)&&(t=n.value);return t},provide:t=>Ql.from(t,e=>e?sy:null)}),Uz=t=>{let e=Uu(t,sy);if(!e){let n=[hf.of(!0)];t.state.field(HS,!1)==null&&n.push(me.appendConfig.of([HS,Vz])),t.dispatch({effects:n}),e=Uu(t,sy)}return e&&e.dom.querySelector("input").focus(),!0},Vz=le.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Hz=({state:t,dispatch:e})=>{let{selection:n}=t,i=V.create(n.ranges.map(r=>t.wordAt(r.head)||V.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Wz(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,l=new ic(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new ic(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const Gz=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Hz({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Wz(t,i);return r?(e(t.update({selection:t.selection.addRange(V.range(r.from,r.to),!1),effects:le.scrollIntoView(r.to)})),!0):!1},va=ne.define({combine(t){return Ws(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new tj(e),scrollToMatch:e=>le.scrollIntoView(e)})}});class EM{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||jz(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Kz(this):new Jz(this)}getCursor(e,n=0,i){let r=e.doc?e:we.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Zo(this,r,n,i):Qo(this,r,n,i)}}class AM{constructor(e){this.spec=e}}function Qo(t,e,n,i){return new ic(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?Xz(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Xz(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(ff(r,n-s))!=Dt.Word||e(pf(r,n-s))!=Dt.Word)&&(e(pf(r,i-s))!=Dt.Word||e(ff(r,i-s))!=Dt.Word))}class Jz extends AM{constructor(e){super(e)}nextMatch(e,n,i){let r=Qo(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=Qo(this.spec,e,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Qo(this.spec,e,s,r),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Qo(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Qo(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Zo(t,e,n,i){return new kM(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Yz(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function ff(t,e){return t.slice(Ut(t,e,!1),e)}function pf(t,e){return t.slice(e,Ut(t,e))}function Yz(t){return(e,n,i)=>!i[0].length||(t(ff(i.input,i.index))!=Dt.Word||t(pf(i.input,i.index))!=Dt.Word)&&(t(pf(i.input,i.index+i[0].length))!=Dt.Word||t(ff(i.input,i.index+i[0].length))!=Dt.Word)}class Kz extends AM{nextMatch(e,n,i){let r=Zo(this.spec,e,i,e.doc.length).next();return r.done&&(r=Zo(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Zo(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==n||l.from>s+10))return l;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n))}matchAll(e,n){let i=Zo(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Zo(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const rc=me.define(),Dw=me.define(),Ts=Ht.define({create(t){return new Km(oy(t).create(),null)},update(t,e){for(let n of e.effects)n.is(rc)?t=new Km(n.value.create(),t.panel):n.is(Dw)&&(t=new Km(t.query,n.value?Lw:null));return t},provide:t=>Ql.from(t,e=>e.panel)});class Km{constructor(e,n){this.query=e,this.panel=n}}const qz=Ce.mark({class:"cm-searchMatch"}),Qz=Ce.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Zz=Bt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Ts))}update(t){let e=t.state.field(Ts);(e!=t.startState.field(Ts)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ce.none;let{view:n}=this,i=new Oo;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:l,to:a}=s[r];for(;r<o-1&&a>s[r+1].from-2*250;)a=s[++r].to;t.highlight(n.state,l,a,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?Qz:qz)})}return i.finish()}},{decorations:t=>t.decorations});function Tc(t){return e=>{let n=e.state.field(Ts,!1);return n&&n.query.spec.valid?t(e,n):TM(e)}}const WS=Tc((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=V.single(i.from,i.to),s=t.state.facet(va);return t.dispatch({selection:r,effects:[Iw(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),OM(t),!0}),GS=Tc((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=V.single(r.from,r.to),o=t.state.facet(va);return t.dispatch({selection:s,effects:[Iw(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),OM(t),!0}),PM=Tc((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:V.create(n.map(i=>V.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),ej=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let l=new ic(t.doc,t.sliceDoc(i,r));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(V.range(l.value.from,l.value.to))}return e(t.update({selection:V.create(s,o),userEvent:"select.search.matches"})),!0},XS=Tc((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=[],l,a,u=[];if(s.from==i&&s.to==r&&(a=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(n,s.from,s.to),u.push(le.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-a.length;l=V.single(s.from-c,s.to-c),u.push(Iw(t,s)),u.push(n.facet(va).scrollToMatch(l.main,t))}return t.dispatch({changes:o,selection:l,effects:u,userEvent:"input.replace"}),!0}),RM=Tc((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:le.announce.of(i),userEvent:"input.replace.all"}),!0});function Lw(t){return t.state.facet(va).createPanel(t)}function oy(t,e){var n,i,r,s,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let u=t.facet(va);return new EM({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function MM(t){let e=Uu(t,Lw);return e&&e.dom.querySelector("[main-field]")}function OM(t){let e=MM(t);e&&e==t.root.activeElement&&e.select()}const TM=t=>{let e=t.state.field(Ts,!1);if(e&&e.panel){let n=MM(t);if(n&&n!=t.root.activeElement){let i=oy(t.state,e.query.spec);i.valid&&t.dispatch({effects:rc.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[Dw.of(!0),e?rc.of(oy(t.state,e.query.spec)):me.appendConfig.of(ij)]});return!0},NM=t=>{let e=t.state.field(Ts,!1);if(!e||!e.panel)return!1;let n=Uu(t,Lw);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Dw.of(!1)}),!0};class tj{constructor(e){this.view=e;let n=this.query=e.state.field(Ts).query.spec;this.commit=this.commit.bind(this),this.searchField=Le("input",{value:n.search,placeholder:Cn(e,"Find"),"aria-label":Cn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Le("input",{value:n.replace,placeholder:Cn(e,"Replace"),"aria-label":Cn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Le("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Le("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Le("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Le("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Le("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>WS(e),[Cn(e,"next")]),i("prev",()=>GS(e),[Cn(e,"previous")]),i("select",()=>PM(e),[Cn(e,"all")]),Le("label",null,[this.caseField,Cn(e,"match case")]),Le("label",null,[this.reField,Cn(e,"regexp")]),Le("label",null,[this.wordField,Cn(e,"by word")]),...e.state.readOnly?[]:[Le("br"),this.replaceField,i("replace",()=>XS(e),[Cn(e,"replace")]),i("replaceAll",()=>RM(e),[Cn(e,"replace all")])],Le("button",{name:"close",onclick:()=>NM(e),"aria-label":Cn(e,"close"),type:"button"},[""])])}commit(){let e=new EM({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:rc.of(e)}))}keydown(e){n3(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?GS:WS)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),XS(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(rc)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(va).top}}function Cn(t,e){return t.state.phrase(e)}const Cd=30,Ed=/[\s\.,:;?!]/;function Iw(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Cd),o=Math.min(r,n+Cd),l=t.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<Cd;a++)if(!Ed.test(l[a+1])&&Ed.test(l[a])){l=l.slice(a);break}}if(o!=r){for(let a=l.length-1;a>l.length-Cd;a--)if(!Ed.test(l[a-1])&&Ed.test(l[a])){l=l.slice(0,a);break}}return le.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const nj=le.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ij=[Ts,hc.lowest(Zz),nj];class rj{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=Pi(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(DM(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function JS(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function sj(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=JS(e)+JS(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function oj(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:sj(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class YS{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Il(t){return t.selection.main.from}function DM(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const lj=Xr.define();function aj(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(l=>l!=r&&n!=i&&t.sliceDoc(l.from+s,l.from+o)!=t.sliceDoc(n,i)?{range:l}:{changes:{from:l.from+s,to:i==r.from?l.to:l.from+o,insert:e},range:V.cursor(l.from+s+e.length)})),{userEvent:"input.complete"})}const KS=new WeakMap;function uj(t){if(!Array.isArray(t))return t;let e=KS.get(t);return e||KS.set(t,e=oj(t)),e}const LM=me.define(),Bw=me.define();class cj{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Kt(e,n),r=yi(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Kt(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=Kt(e,0),w=yi(y),b=w==e.length?0:-100;if(y!=n[0])if(y==i[0])b+=-200;else return!1;return this.ret(b,[0,w])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,u=0;if(l<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<a;){let b=Kt(e,y);(b==n[u]||b==i[u])&&(r[u++]=y),y+=yi(b)}if(u<a)return!1}let c=0,d=0,h=!1,f=0,p=-1,g=-1,v=/[a-z]/.test(e),m=!0;for(let y=0,w=Math.min(e.length,200),b=0;y<w&&d<a;){let C=Kt(e,y);l<0&&(c<a&&C==n[c]&&(s[c++]=y),f<a&&(C==n[f]||C==i[f]?(f==0&&(p=y),g=y+1,f++):f=0));let P,R=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(P=dv(C))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!y||R==1&&v||b==0&&R!=0)&&(n[d]==C||i[d]==C&&(h=!0)?o[d++]=y:o.length&&(m=!1)),b=R,y+=yi(C)}return d==a&&o[0]==0&&m?this.result(-100+(h?-200:0),o,e):f==a&&p==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):f==a?this.ret(-200+-700-e.length,[p,g]):d==a?this.result(-100+(h?-200:0)+-700+(m?0:-1100),o,e):n.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let l=o+(this.astral?yi(Kt(i,o)):1);s&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return this.ret(e-i.length,r)}}const Tr=ne.define({combine(t){return Ws(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:dj,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>qS(e(i),n(i)),optionClass:(e,n)=>i=>qS(e(i),n(i)),addToOptions:(e,n)=>e.concat(n)})}});function qS(t,e){return t?e?t+" "+e:t:e}function dj(t,e,n,i,r){let s=t.textDirection==Je.RTL,o=s,l=!1,a="top",u,c,d=e.left-r.left,h=r.right-e.right,f=i.right-i.left,p=i.bottom-i.top;if(o&&d<Math.min(f,h)?o=!1:!o&&h<Math.min(f,d)&&(o=!0),f<=(o?d:h))u=Math.max(r.top,Math.min(n.top,r.bottom-p))-e.top,c=Math.min(400,o?d:h);else{l=!0,c=Math.min(400,(s?e.right:r.right-e.left)-30);let g=r.bottom-e.bottom;g>=p||g>e.top?u=n.bottom-e.top:(a="bottom",u=e.bottom-n.top)}return{style:`${a}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(l?s?"left-narrow":"right-narrow":o?"left":"right")}}function hj(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r){let s=document.createElement("span");s.className="cm-completionLabel";let o=n.displayLabel||n.label,l=0;for(let a=0;a<r.length;){let u=r[a++],c=r[a++];u>l&&s.appendChild(document.createTextNode(o.slice(l,u)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(u,c))),d.className="cm-completionMatchedText",l=c}return l<o.length&&s.appendChild(document.createTextNode(o.slice(l))),s},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function QS(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class fj{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,l=e.state.facet(Tr);this.optionContent=hj(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=QS(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{for(let u=a.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<s.length){this.applyCompletion(e,s[+c[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Tr).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Bw.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,i,r;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=s.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=QS(n.options.length,n.selected,this.view.state.facet(Tr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>Si(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&mj(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Tr).positionInfo(this.view,n,r,i,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:u}=l;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(l);d&&(c.className=d);for(let h of this.optionContent){let f=h(l,this.view.state,a);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function pj(t,e){return n=>new fj(n,t,e)}function mj(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<n.top?t.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(t.scrollTop+=i.bottom-n.bottom)}function ZS(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function gj(t,e){let n=[],i=null,r=a=>{n.push(a);let{section:u}=a.completion;if(u){i||(i=[]);let c=typeof u=="string"?u:u.name;i.some(d=>d.name==c)||i.push(typeof u=="string"?{name:c}:u)}};for(let a of t)if(a.hasResult()){let u=a.result.getMatch;if(a.result.filter===!1)for(let c of a.result.options)r(new YS(c,a.source,u?u(c):[],1e9-n.length));else{let c=new cj(e.sliceDoc(a.from,a.to));for(let d of a.result.options)if(c.match(d.label)){let h=d.displayLabel?u?u(d,c.matched):[]:c.matched;r(new YS(d,a.source,h,c.score+(d.boost||0)))}}}if(i){let a=Object.create(null),u=0,c=(d,h)=>{var f,p;return((f=d.rank)!==null&&f!==void 0?f:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(d.name<h.name?-1:1)};for(let d of i.sort(c))u-=1e5,a[d.name]=u;for(let d of n){let{section:h}=d.completion;h&&(d.score+=a[typeof h=="string"?h:h.name])}}let s=[],o=null,l=e.facet(Tr).compareCompletions;for(let a of n.sort((u,c)=>c.score-u.score||l(u.completion,c.completion))){let u=a.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?s.push(a):ZS(a.completion)>ZS(o)&&(s[s.length-1]=a),o=a.completion}return s}class gl{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new gl(this.options,ek(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s){let o=gj(e,n);if(!o.length)return r&&e.some(a=>a.state==1)?new gl(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=n.facet(Tr).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let a=r.options[r.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==a){l=u;break}}return new gl(o,ek(i,l),{pos:e.reduce((a,u)=>u.hasResult()?Math.min(a,u.from):a,1e8),create:pj(wa,BM),above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new gl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class mf{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new mf(wj,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Tr),s=(i.override||n.languageDataAt("autocomplete",Il(n)).map(uj)).map(l=>(this.active.find(u=>u.source==l)||new Nn(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!yj(s,this.active)?o=gl.build(s,n,this.id,o,i):o&&o.disabled&&!s.some(l=>l.state==1)&&(o=null),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Nn(l.source,0):l));for(let l of e.effects)l.is(IM)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new mf(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:vj}}function yj(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const vj={"aria-autocomplete":"list"};function ek(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const wj=[];function bj(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Nn{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=bj(e),r=this;i?r=r.handleUserEvent(e,i,n):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new Nn(r.source,0));for(let s of e.effects)if(s.is(LM))r=new Nn(r.source,1,s.value?Il(e.state):-1);else if(s.is(Bw))r=new Nn(r.source,0);else if(s.is(Sj))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new Nn(this.source,1)}handleChange(e){return e.changes.touchesRange(Il(e.startState))?new Nn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Nn(this.source,this.state,e.mapPos(this.explicitPos))}}class yu extends Nn{constructor(e,n,i,r,s){super(e,2,n),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,n,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Il(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||n=="delete"&&Il(e.startState)==this.from)return new Nn(this.source,n=="input"&&i.activateOnTyping?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return xj(this.result.validFor,e.state,s,o)?new yu(this.source,a,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new rj(e.state,l,a>=0)))?new yu(this.source,a,u,u.from,(r=u.to)!==null&&r!==void 0?r:Il(e.state)):new Nn(this.source,1,a)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Nn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new yu(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function xj(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):DM(t,!0).test(r)}const Sj=me.define({map(t,e){return t.map(n=>n.map(e))}}),IM=me.define(),wa=Ht.define({create(){return mf.start()},update(t,e){return t.update(e)},provide:t=>[xv.from(t,e=>e.tooltip),le.contentAttributes.from(t,e=>e.attrs)]});function BM(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(wa).active.find(r=>r.source==e.source);return i instanceof yu?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},aj(t.state,n,i.from,i.to)),{annotations:lj.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}function Ad(t,e="option"){return n=>{let i=n.state.field(wa,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Tr).interactionDelay)return!1;let r=1,s;e=="page"&&(s=I3(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),n.dispatch({effects:IM.of(l)}),!0}}const tk=t=>{let e=t.state.field(wa,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Tr).interactionDelay?!1:BM(t,e.open.options[e.open.selected])},kj=t=>t.state.field(wa,!1)?(t.dispatch({effects:LM.of(!0)}),!0):!1,Cj=t=>{let e=t.state.field(wa,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Bw.of(null)}),!0)},_M={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},$M=new class extends Mo{};$M.startSide=1;$M.endSide=-1;const qm="()[]{}<>";function Ej(t){for(let e=0;e<qm.length;e+=2)if(qm.charCodeAt(e)==t)return qm.charAt(e+1);return dv(t<128?t:t+1)}function Aj(t,e){return t.languageDataAt("closeBrackets",e)[0]||_M}const Pj=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Aj(t,t.selection.main.head).brackets||_M.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let l=Mj(t.doc,o.head);for(let a of i)if(a==l&&Rj(t.doc,o.head)==Ej(Kt(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:V.cursor(o.head-a.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function Rj(t,e){let n=t.sliceString(e,e+2);return n.slice(0,yi(Kt(n,0)))}function Mj(t,e){let n=t.sliceString(e-2,e);return yi(Kt(n,0))==n.length?n:n.slice(1)}class Oj{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class oo{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(go).markerFilter;s&&(r=s(r));let o=Ce.set(r.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?Ce.widget({widget:new jj(l),diagnostic:l}).range(l.from):Ce.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new oo(o,n,ua(o))}}function ua(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new Oj(r,s,o.diagnostic),!1}),i}function Tj(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(i=>i.is(_w))||t.changes.touchesRange(n.from,n.to))}function FM(t,e){return t.field(yn,!1)?e:e.concat(me.appendConfig.of(VM))}function Nj(t,e){return{effects:FM(t,[_w.of(e)])}}const _w=me.define(),$w=me.define(),zM=me.define(),yn=Ht.define({create(){return new oo(Ce.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=ua(n,t.selected.diagnostic,r)||ua(n,null,r)}t=new oo(n,t.panel,i)}for(let n of e.effects)n.is(_w)?t=oo.init(n.value,t.panel,e.state):n.is($w)?t=new oo(t.diagnostics,n.value?kp.open:null,t.selected):n.is(zM)&&(t=new oo(t.diagnostics,t.panel,n.value));return t},provide:t=>[Ql.from(t,e=>e.panel),le.decorations.from(t,e=>e.diagnostics)]});function Dj(t){let e=t.field(yn,!1);return e?e.diagnostics.size:0}const Lj=Ce.mark({class:"cm-lintRange cm-lintRange-active"});function Ij(t,e,n){let{diagnostics:i}=t.state.field(yn),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(a,u,{spec:c})=>{e>=a&&e<=u&&(a==u||(e>a||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(a,s),o=Math.max(u,o))});let l=t.state.facet(go).tooltipFilter;return l&&(r=l(r)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Bj(t,r)}}}:null}function Bj(t,e){return Le("ul",{class:"cm-tooltip-lint"},e.map(n=>UM(t,n,!1)))}const _j=t=>{let e=t.state.field(yn,!1);(!e||!e.panel)&&t.dispatch({effects:FM(t.state,[$w.of(!0)])});let n=Uu(t,kp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},nk=t=>{let e=t.state.field(yn,!1);return!e||!e.panel?!1:(t.dispatch({effects:$w.of(!1)}),!0)},$j=t=>{let e=t.state.field(yn,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Fj=Bt.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(go);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(go);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(Nj(this.view.state,r))},i=>{Si(this.view.state,i)})}}update(t){let e=t.state.facet(go);(t.docChanged||e!=t.startState.facet(go)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),go=ne.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Ws(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function zj(t,e={}){return[go.of({source:t,config:e}),Fj,VM]}function jM(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function UM(t,e,n){var i;let r=n?jM(e.actions):[];return Le("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Le("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=!1,a=h=>{if(h.preventDefault(),l)return;l=!0;let f=ua(t.state.field(yn).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),Le("u",u.slice(c,c+1)),u.slice(c+1)];return Le("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Le("div",{class:"cm-diagnosticSource"},e.source))}class jj extends zo{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Le("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class ik{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=UM(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class kp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)nk(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=jM(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let a=ua(this.view.state.field(yn).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Le("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Le("div",{class:"cm-panel-lint"},this.list,Le("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>nk(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(yn).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(yn),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==a.diagnostic){u=d;break}u<0?(c=new ik(this.view,a.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new ik(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{o.top<l.top?this.list.scrollTop-=l.top-o.top:o.bottom>l.bottom&&(this.list.scrollTop+=o.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(yn),i=ua(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:zM.of(i)})}static open(e){return new kp(e)}}function Uj(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Pd(t){return Uj(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Vj=le.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Pd("#d11")},".cm-lintRange-warning":{backgroundImage:Pd("orange")},".cm-lintRange-info":{backgroundImage:Pd("#999")},".cm-lintRange-hint":{backgroundImage:Pd("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),VM=[yn,le.decorations.compute([yn],t=>{let{selected:e,panel:n}=t.field(yn);return!e||!n||e.from==e.to?Ce.none:Ce.set([Lj.range(e.from,e.to)])}),L3(Ij,{hideOn:Tj}),Vj],HM=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},Hj=HM("up"),Wj=HM("down"),Gj=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(V.range(s,s)):e=V.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},Xj=[{key:"Ctrl-Space",run:kj},{key:"Escape",run:Cj},{key:"ArrowDown",run:Ad(!0)},{key:"ArrowUp",run:Ad(!1)},{key:"PageDown",run:Ad(!0,"page")},{key:"PageUp",run:Ad(!1,"page")},{key:"Enter",run:tk},{key:"Tab",run:tk},{key:"Mod-f",run:TM,scope:"editor search-panel"},{key:"Escape",run:NM,scope:"editor search-panel"},{key:"Alt-Enter",run:PM,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:RM,scope:"editor search-panel"},{key:"Ctrl-g",run:Uz},{key:"Mod-d",run:Gz,preventDefault:!0},{key:"Shift-Mod-l",run:ej},{key:"Enter",run:zS,shift:zS},{key:"ArrowLeft",run:wS,shift:ES,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:vz,shift:Cz},{key:"ArrowRight",run:bS,shift:AS,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:wz,shift:Ez},{key:"ArrowUp",run:xS,shift:PS,preventDefault:!0},{key:"ArrowDown",run:SS,shift:RS,preventDefault:!0},{key:"Home",run:CS,shift:NS},{mac:"Cmd-ArrowLeft",run:CS,shift:NS},{key:"Mod-Home",run:DS,shift:IS},{mac:"Cmd-ArrowUp",run:DS,shift:IS},{key:"PageUp",run:Gm,shift:MS},{mac:"Ctrl-ArrowUp",run:Gm,shift:MS},{key:"PageDown",run:Xm,shift:OS},{mac:"Ctrl-ArrowDown",run:Xm,shift:OS},{key:"End",run:kS,shift:TS},{mac:"Cmd-ArrowRight",run:kS,shift:TS},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Hj,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Wj,preventDefault:!0},{key:"Shift-Alt-i",run:Gj},{key:"Mod-End",run:LS,shift:BS},{mac:"Cmd-ArrowDown",run:LS,shift:BS},{key:"Mod-a",run:Rz},{key:"Backspace",run:Pj},{key:"Backspace",run:Jm,shift:Jm},{key:"Delete",run:_S},{key:"Mod-Backspace",mac:"Alt-Backspace",run:$S},{key:"Mod-Delete",mac:"Alt-Delete",run:Oz},{mac:"Mod-Backspace",run:Tz},{mac:"Mod-Delete",run:FS},{mac:"Ctrl-b",run:wS,shift:ES,preventDefault:!0},{mac:"Ctrl-f",run:bS,shift:AS},{mac:"Ctrl-p",run:xS,shift:PS},{mac:"Ctrl-n",run:SS,shift:RS},{mac:"Ctrl-a",run:bz,shift:Az},{mac:"Ctrl-e",run:xz,shift:Pz},{mac:"Ctrl-d",run:_S},{mac:"Ctrl-h",run:Jm},{mac:"Ctrl-k",run:FS},{mac:"Ctrl-Alt-h",run:$S},{mac:"Ctrl-o",run:Nz},{mac:"Ctrl-t",run:Dz},{mac:"Ctrl-v",run:Xm},{mac:"Alt-v",run:Gm},{key:"Shift-Mod-k",run:$z},{key:"Alt-ArrowDown",run:Iz},{key:"Alt-ArrowUp",run:Lz},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:_z},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Bz},{key:"Mod-l",run:Mz,preventDefault:!0},{key:"Shift-Mod-\\",run:kz},{key:"Tab",run:jS,shift:US,preventDefault:!0},{key:"Mod-[",run:US},{key:"Mod-]",run:jS},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:TF},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:NF},{key:"Mod-k Mod-0",run:DF},{key:"Mod-k Mod-j",run:LF},{key:"Mod-k Mod-c",run:tz},{key:"Mod-k Mod-u",run:nz},{key:"Mod-/",run:ZF},{key:"Shift-Alt-a",run:iz},{key:"Mod-z",run:rM,preventDefault:!0},{key:"Mod-y",run:ry,preventDefault:!0},{key:"Mod-Shift-z",run:ry,preventDefault:!0},{key:"Mod-u",run:dz,preventDefault:!0},{key:"Mod-Shift-m",run:_j},{key:"F8",run:$j}];function Jj(t){const e=document.createElement("div");return rk(t.state,e),{dom:e,update(n){rk(n.view.state,e)}}}function rk(t,e){const n=Dj(t);e.textContent=Gf(wc(),"editor.lintSummary",n),e.className=ht("border-t border-stone-600 bg-stone-800 pr-3 text-right font-sans text-xs tracking-wider",n===0?"text-stone-400":"font-semibold text-red-400")}const WM="vonsim-program",Yj=Bt.fromClass(class{constructor(t){Y(this,"timeout",null);this.view=t}update(t){t.docChanged&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=this.view.state.doc.toString();localStorage.setItem(WM,e),this.timeout=null},500))}}),Kj=`; Bienvenido a VonSim!
; Este es un ejemplo de cdigo que calcula los primeros
; n nmeros de la sucesin de Fibonacci, y se guardan a
; partir de la posicin 1000h de la memoria.

     n EQU 10    ; Calcula los primeros 10 nmeros

       ORG 1000h
inicio DB 1

       ORG 2000h
       MOV BX, OFFSET inicio + 1
       MOV AL, 0
       MOV AH, inicio

BUCLE: CMP BX, OFFSET inicio + n
       JNS FIN
       MOV CL, AH
       ADD CL, AL
       MOV AL, AH
       MOV AH, CL
       MOV [BX], CL
       INC BX
       JMP BUCLE
  FIN: HLT
       END
`,qj=localStorage.getItem(WM)||Kj,En={comment:ce.comment,"data-directive":Pt.define(),identifier:ce.variableName,instruction:Pt.define(),label:ce.labelName,number:ce.number,operator:ce.operator,offset:Pt.define(),"ptr-size":Pt.define(),punctuation:ce.punctuation,register:Pt.define(),special:Pt.define(),string:ce.string,unassigned:Pt.define()},Qj=Aw.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":av.includes(e)?"data-directive":uv.includes(e)?"instruction":Th.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:En}),Zj=$F(vp.define([{tag:En.comment,class:"text-stone-400 italic"},{tag:En["data-directive"],class:"text-rose-400"},{tag:En.instruction,class:"text-mantis-400"},{tag:En.number,class:"text-amber-500 font-semibold"},{tag:En.operator,class:"text-rose-400"},{tag:En.offset,class:"text-rose-400 italic"},{tag:En["ptr-size"],class:"text-rose-400 italic"},{tag:En.punctuation,class:"text-stone-500"},{tag:En.register,class:"text-amber-500 italic"},{tag:En.special,class:"text-sky-300 italic"},{tag:En.string,class:"text-emerald-300"},{tag:En.unassigned,class:"text-rose-400"}])),e9=zj(t=>{const e=t.state.doc.toString(),n=YC(e);if(n.success)return[];const i=wc();return n.errors.map(r=>{var l,a;const s=((l=r.position)==null?void 0:l.start)??0,o=((a=r.position)==null?void 0:a.end)??e.length;return{message:r.translate(i),severity:"error",from:s,to:o}})},{delay:200});function t9(){return new mF(Qj,[Zj,e9])}function n9({className:t}){const[e,n]=S.useState(),i=S.useCallback(r=>{r&&n(r)},[]);return S.useEffect(()=>{if(e)return window.codemirror=new le({state:we.create({doc:qj,extensions:[we.tabSize.of(2),kA.of(we.readOnly.of(!1)),Yj,V3(),X3,G3(),w3(),cz(),a3(),f3(),we.allowMultipleSelections.of(!0),EF(),E3(),cA.of([...Xj,{key:"Escape",run:r=>(r.dispatch({selection:V.create([r.state.selection.main],0)}),!0)}]),t9(),Ql.of(Jj)]}),parent:e}),()=>{var r;return(r=window.codemirror)==null?void 0:r.destroy()}},[e]),_C(r=>r.ctrlKey&&r.key==="s",r=>{if(r.preventDefault(),!window.codemirror)return;const s=new Blob([window.codemirror.state.doc.toString()],{type:"text/plain"}),o=URL.createObjectURL(s),l=document.createElement("a");l.style.display="none",l.href=o,l.download=`vonsim-${new Date().toISOString().slice(0,16)}.txt`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}),k.jsx("div",{ref:i,className:ht("overflow-auto font-mono",t)})}var ei=function(t,e){return Number(t.toFixed(e))},i9=function(t,e){return typeof t=="number"?t:e},Ve=function(t,e,n){n&&typeof n=="function"&&n(t,e)},r9=function(t){return-Math.cos(t*Math.PI)/2+.5},s9=function(t){return t},o9=function(t){return t*t},l9=function(t){return t*(2-t)},a9=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},u9=function(t){return t*t*t},c9=function(t){return--t*t*t+1},d9=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},h9=function(t){return t*t*t*t},f9=function(t){return 1- --t*t*t*t},p9=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},m9=function(t){return t*t*t*t*t},g9=function(t){return 1+--t*t*t*t*t},y9=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},GM={easeOut:r9,linear:s9,easeInQuad:o9,easeOutQuad:l9,easeInOutQuad:a9,easeInCubic:u9,easeOutCubic:c9,easeInOutCubic:d9,easeInQuart:h9,easeOutQuart:f9,easeInOutQuart:p9,easeInQuint:m9,easeOutQuint:g9,easeInOutQuint:y9},XM=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Xi=function(t){t.mounted&&(XM(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function JM(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;Xi(t),t.animation=function(){if(!t.mounted)return XM(t.animation);var o=new Date().getTime()-r,l=o/n,a=GM[e],u=a(l);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function v9(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Ys(t,e,n,i){var r=v9(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,l=o.scale,a=o.positionX,u=o.positionY,c=e.scale-l,d=e.positionX-a,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):JM(t,i,n,function(f){var p=l+c*f,g=a+d*f,v=u+h*f;s(p,g,v)})}}function w9(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,l=s*n,a=o*n,u=i-l,c=r-a;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:l,newDiffWidth:u,newContentHeight:a,newDiffHeight:c}}var b9=function(t,e,n,i,r,s,o){var l=t>e?n*(o?1:.5):0,a=i>r?s*(o?1:.5):0,u=t-e-l,c=l,d=i-r-a,h=a;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},Fw=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=w9(n,i,e),o=s.wrapperWidth,l=s.wrapperHeight,a=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=b9(o,a,u,l,c,d,!!r);return h},ly=function(t,e,n,i){return i?t<e?ei(e,2):t>n?ei(n,2):ei(t,2):ei(t,2)},ca=function(t,e){var n=Fw(t,e);return t.bounds=n,n};function Cp(t,e,n,i,r,s,o){var l=n.minPositionX,a=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=ly(t,l-d,u+d,i),p=ly(e,a-h,c+h,i);return{x:f,y:p}}function Ep(t,e,n,i,r,s){var o=t.transformState,l=o.scale,a=o.positionX,u=o.positionY,c=i-l;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:a,y:u};var d=a-e*c,h=u-n*c,f=Cp(d,h,r,s,0,0,null);return f}function Nc(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var sk=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o=r==null?void 0:r.contains(s),l=i&&s&&o;if(!l)return!1;var a=Ap(s,n);return!a},ok=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},x9=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},S9=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var l=n[0].clientX,a=n[0].clientY;t.startCoords={x:l-r,y:a-s}}};function k9(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,l=s.limitToBounds,a=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,g=n>d||n<h,v=i>f||i<p,m=n>d?u.offsetWidth:t.setup.minPositionX||0,y=i>f?u.offsetHeight:t.setup.minPositionY||0,w=Ep(t,m,y,r,t.bounds,l||a),b=w.x,C=w.y;return{scale:r,positionX:g?b:n,positionY:v?C:i}}}function C9(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,l=t.bounds,a=t.transformState,u=a.scale,c=a.positionX,d=a.positionY;if(!(o===null||l===null||e===c&&n===d)){var h=Cp(e,n,l,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var E9=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,l=s.lockAxisY,a=r.positionX,u=r.positionY;if(!i)return{x:a,y:u};var c=e-i.x,d=n-i.y,h=o?a:c,f=l?u:d;return{x:h,y:f}},gf=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},A9=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,l=!o||s>1||!i||e;return!!l},P9=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,l=t.transformState.scale,a=o.disabled,u=!a||l>1||!s||e;return!(!u||!n||!i)};function R9(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function lk(t,e,n,i,r,s,o,l,a,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>a?a:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<l?l:c>s?s:c}}return i?e:ly(t,s,o,r)}function M9(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function O9(t,e){var n=A9(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,l=s.velocityAnimation.equalToMove,a=Date.now();if(i&&r&&o){var u=M9(o,l),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=a-r,g=c*c+d*d,v=Math.sqrt(g)/p;t.velocity={velocityX:h,velocityY:f,total:v}}t.lastMousePosition=e,t.velocityTime=a}}function T9(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=P9(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,l=e.velocityY,a=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,g=i.zoomAnimation,v=i.panning,m=v.lockAxisY,y=v.lockAxisX,w=g.animationType,b=p.sizeX,C=p.sizeY,P=p.velocityAlignmentTime,R=P,I=R9(t,a),E=Math.max(I,R),A=gf(t,b),M=gf(t,C),O=A*r.offsetWidth/100,D=M*r.offsetHeight/100,N=u+O,B=c-O,$=d+D,z=h-D,L=t.transformState,_=new Date().getTime();JM(t,w,E,function(j){var ee=t.transformState,re=ee.scale,ge=ee.positionX,rt=ee.positionY,ut=new Date().getTime()-_,Ze=ut/R,bt=GM[p.animationType],ar=1-bt(Math.min(1,Ze)),kn=1-j,Yr=ge+o*kn,Ho=rt+l*kn,Mi=lk(Yr,L.positionX,ge,y,f,c,u,B,N,ar),fe=lk(Ho,L.positionY,rt,m,f,h,d,z,$,ar);(ge!==Yr||rt!==Ho)&&t.setTransformState(re,Mi,fe)})}}function ak(t,e){var n=t.transformState.scale;Xi(t),ca(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?S9(t,e):x9(t,e)}function YM(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,l=r.sizeY,a=r.animationTime,u=r.animationType,c=s||e<i||!o&&!l;if(!c){var d=k9(t);d&&Ys(t,d,a,u)}}function uk(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,l=s.sizeY;if(i){var a=E9(t,e,n),u=a.x,c=a.y,d=gf(t,o),h=gf(t,l);O9(t,{x:u,y:c}),C9(t,u,c,d,h)}}function N9(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),l=(s==null?void 0:s.width)||0,a=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=l<u||a<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?T9(t):YM(t)}}function zw(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,l=r.limitToBounds,a=Nc(ei(e,2),s,o,0,!1),u=ca(t,a),c=Ep(t,n,i,a,u,l),d=c.x,h=c.y;return{scale:a,positionX:d,positionY:h}}function KM(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,l=s.limitToBounds,a=s.zoomAnimation,u=a.disabled,c=a.animationTime,d=a.animationType,h=u||i>=o;if((i>=1||l)&&YM(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,g=zw(t,o,f,p);g&&Ys(t,g,c,d)}}var Ns=function(){return Ns=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ns.apply(this,arguments)};function ck(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Rd={previousScale:1,scale:1,positionX:0,positionY:0},Va={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},qM=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Rd.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Rd.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:Rd.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:Rd.positionY}},dk=function(t){var e=Ns({},Va);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Va[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Va[n]),o=s==="[object Object]",l=s==="[object Array]";o?e[n]=Ns(Ns({},Va[n]),t[n]):l?e[n]=ck(ck([],Va[n],!0),t[n],!0):e[n]=t[n]}}),e},QM=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,l=s.minScale,a=s.zoomAnimation,u=s.smooth,c=a.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=Nc(ei(d,3),l,o,c,!1);return h};function ZM(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,l=o.scale,a=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-a)/l,f=(d/2-u)/l,p=QM(t,e,n),g=zw(t,p,h,f);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");Ys(t,g,i,r)}function eO(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,l=qM(t.props),a=t.transformState,u=a.scale,c=a.positionX,d=a.positionY;if(s){var h=Fw(t,l.scale),f=Cp(l.positionX,l.positionY,h,o,0,0,s),p={scale:l.scale,positionX:f.x,positionY:f.y};u===l.scale&&c===l.positionX&&d===l.positionY||(i==null||i(),Ys(t,p,e,n))}}function D9(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),l=s.x*i.scale,a=s.y*i.scale;return{x:(r.x-o.x+l)/i.scale,y:(r.y-o.y+a)/i.scale}}function L9(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,l=o.limitToBounds,a=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=D9(e,i,r,s),f=h.x,p=h.y,g=d.width/s.scale,v=d.height/s.scale,m=i.offsetWidth/g,y=i.offsetHeight/v,w=Nc(n||Math.min(m,y),a,u,0,!1),b=(c.width-g*w)/2,C=(c.height-v*w)/2,P=(c.left-f)*w+b,R=(c.top-p)*w+C,I=Fw(t,w),E=Cp(P,R,I,l,0,0,i),A=E.x,M=E.y;return{positionX:A,positionY:M,scale:w}}var I9=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),ZM(t,1,e,n,i)}},B9=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),ZM(t,-1,e,n,i)}},_9=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,l=o.positionX,a=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?l:e,positionY:Number.isNaN(n)?a:n,scale:Number.isNaN(i)?u:i};Ys(t,f,r,s)}}},$9=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),eO(t,e,n)}},F9=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var l=tO(e||r.scale,s,o);Ys(t,l,n,i)}}},z9=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),Xi(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var l=L9(t,o,n);Ys(t,l,i,r)}}},ay=function(t){return{instance:t,zoomIn:I9(t),zoomOut:B9(t),setTransform:_9(t),resetTransform:$9(t),centerView:F9(t),zoomToElement:z9(t)}},j9=function(t){return{instance:t,state:t.transformState}},Ne=function(t){var e={};return Object.assign(e,j9(t)),Object.assign(e,ay(t)),e},Qm=!1;function Zm(){try{var t={get passive(){return Qm=!0,!1}};return t}catch{return Qm=!1,Qm}}var Ap=function(t,e){var n=t.tagName.toUpperCase(),i=e.find(function(s){return s.toUpperCase()===n});if(i)return!0;var r=e.find(function(s){return t.classList.contains(s)});return!!r},uy=function(t){t&&clearTimeout(t)},U9=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},tO=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function V9(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var H9=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,l=t.isInitialized,a=t.isPanning,u=e.target,c=l&&!a&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Ap(u,o);return!d},W9=function(t){return t?t.deltaY<0?1:-1:0};function G9(t,e){var n=W9(t),i=i9(e,n);return i}function nO(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var X9=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,l=t.setup,a=l.maxScale,u=l.minScale,c=l.zoomAnimation,d=l.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(r)return p;var g=i?!1:!f,v=Nc(ei(p,3),u,a,h,g&&!d);return v},J9=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Y9=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,l=s&&!i&&o;if(!l)return!1;var a=Ap(o,r);return!a},K9=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},q9=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=ei(r[0].clientX-i.left,5),o=ei(r[0].clientY-i.top,5),l=ei(r[1].clientX-i.left,5),a=ei(r[1].clientY-i.top,5);return{x:(s+l)/2/e,y:(o+a)/2/e}},iO=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},Q9=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,l=r.zoomAnimation,a=r.disablePadding,u=l.size,c=l.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return Nc(ei(h,2),o,s,u,!c&&!a)},Z9=160,e7=100,t7=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(Xi(t),Ve(Ne(t),e,i),Ve(Ne(t),e,r))},n7=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,l=t.transformState,a=l.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,g=d.size,v=d.disabled,m=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=G9(e,null),b=p?y*Math.abs(e.deltaY):m,C=X9(t,w,b,!e.ctrlKey);if(a!==C){var P=ca(t,C),R=nO(e,s,a),I=v||g===0||c||f,E=u&&I,A=Ep(t,R.x,R.y,C,P,E),M=A.x,O=A.y;t.previousWheelEvent=e,t.setTransformState(C,M,O),Ve(Ne(t),e,i),Ve(Ne(t),e,r)}},i7=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;uy(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(KM(t,e.x,e.y),t.wheelAnimationTimer=null)},e7);var s=J9(t,e);s&&(uy(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Ve(Ne(t),e,i),Ve(Ne(t),e,r))},Z9))},r7=function(t,e){var n=iO(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,Xi(t)},s7=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.transformState.scale,s=t.setup,o=s.limitToBounds,l=s.centerZoomedOut,a=s.zoomAnimation,u=a.disabled,c=a.size;if(!(i===null||!n)){var d=q9(e,r,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var h=iO(e),f=Q9(t,h);if(f!==r){var p=ca(t,f),g=u||c===0||l,v=o&&g,m=Ep(t,d.x,d.y,f,p,v),y=m.x,w=m.y;t.pinchMidpoint=d,t.lastDistance=h,t.setTransformState(f,y,w)}}}},o7=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,KM(t,e==null?void 0:e.x,e==null?void 0:e.y)},rO=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;uy(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Ve(Ne(t),e,n)},i)},l7=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,l=s.animationType;Ve(Ne(t),e,i),eO(t,o,l,function(){return Ve(Ne(t),e,r)}),rO(t,e)};function a7(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,l=t.props,a=l.onZoomStart,u=l.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,g=c.animationType;if(!d&&!i){if(h==="reset")return l7(t,e);if(!s)return console.error("No ContentComponent found");var v=h==="zoomOut"?-1:1,m=QM(t,v,f);if(o!==m){Ve(Ne(t),e,a);var y=nO(e,s,o),w=zw(t,m,y.x,y.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");Ve(Ne(t),e,u),Ys(t,w,p,g),rO(t,e)}}}var u7=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,l=s.excluded,a=e.target,u=r==null?void 0:r.contains(a),c=n&&a&&u&&!o;if(!c)return!1;var d=Ap(a,l);return!d},c7=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){ca(n,n.transformState.scale),n.setup=dk(i)},this.initializeWindowEvents=function(){var i,r=Zm(),s=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,r),o==null||o.addEventListener("mousemove",n.onPanning,r),o==null||o.addEventListener("mouseup",n.onPanningStop,r),s==null||s.addEventListener("mouseleave",n.clearPanning,r),o==null||o.addEventListener("keyup",n.setKeyUnPressed,r),o==null||o.addEventListener("keydown",n.setKeyPressed,r)},this.cleanupWindowEvents=function(){var i,r,s=Zm(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,l=o==null?void 0:o.defaultView;l==null||l.removeEventListener("mousedown",n.onPanningStart,s),l==null||l.removeEventListener("mousemove",n.onPanning,s),l==null||l.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),l==null||l.removeEventListener("keyup",n.setKeyUnPressed,s),l==null||l.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),Xi(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=Zm();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(Ne(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(Ne(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=H9(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(t7(n,i),n7(n,i),i7(n,i))}}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=sk(n,i);if(o){var l=n.isPressingKeys(n.setup.panning.activationKeys);l&&(i.preventDefault(),i.stopPropagation(),Xi(n),ak(n,i),Ve(Ne(n),i,s))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=ok(n);if(o){var l=n.isPressingKeys(n.setup.panning.activationKeys);l&&(i.preventDefault(),i.stopPropagation(),uk(n,i.clientX,i.clientY),Ve(Ne(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(N9(n),Ve(Ne(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,l=s.onZoomStart;if(!r){var a=Y9(n,i);a&&(r7(n,i),Xi(n),Ve(Ne(n),i,o),Ve(Ne(n),i,l))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,l=s.onZoom;if(!r){var a=K9(n);a&&(i.preventDefault(),i.stopPropagation(),s7(n,i),Ve(Ne(n),i,o),Ve(Ne(n),i,l))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(o7(n),Ve(Ne(n),i,s),Ve(Ne(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=sk(n,i);if(o){var l=n.lastTouch&&+new Date-n.lastTouch<200;if(l&&i.touches.length===1)n.onDoubleClick(i);else{n.lastTouch=+new Date,Xi(n);var a=i.touches,u=a.length===1,c=a.length===2;u&&(Xi(n),ak(n,i),Ve(Ne(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=ok(n);if(!o)return;i.preventDefault(),i.stopPropagation();var l=i.touches[0];uk(n,l.clientX,l.clientY),Ve(Ne(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=u7(n,i);s&&a7(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var l=Ne(n);n.onChangeCallbacks.forEach(function(a){return a(l)}),Ve(l,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=tO(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):U9(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,l=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=l}},this.getContext=function(){return Ne(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,ca(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=Ne(n);Ve(s,void 0,n.props.onInit)},this.props=e,this.setup=dk(this.props),this.transformState=qM(this.props)}return t}(),jw=U.createContext(null),d7=function(t,e){return typeof t=="function"?t(e):t},h7=U.forwardRef(function(t,e){var n=S.useRef(new c7(t)).current,i=d7(t.children,ay(n));return S.useImperativeHandle(e,function(){return ay(n)},[n]),S.useEffect(function(){n.update(t)},[n,t]),U.createElement(jw.Provider,{value:n},i)});U.forwardRef(function(t,e){var n=S.useRef(null),i=S.useContext(jw);return S.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),U.createElement("div",Ns({},t,{ref:V9([n,e])}))});function f7(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var p7=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,hk={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};f7(p7);var m7=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,l=t.contentStyle,a=t.wrapperProps,u=a===void 0?{}:a,c=t.contentProps,d=c===void 0?{}:c,h=S.useContext(jw).init,f=S.useRef(null),p=S.useRef(null);return S.useEffect(function(){var g=f.current,v=p.current;g!==null&&v!==null&&h&&h(g,v)},[]),U.createElement("div",Ns({},u,{ref:f,className:"react-transform-wrapper ".concat(hk.wrapper," ").concat(i),style:o}),U.createElement("div",Ns({},d,{ref:p,className:"react-transform-component ".concat(hk.content," ").concat(s),style:l}),e))};function g7({className:t}){return k.jsx("div",{className:ht("absolute z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",t),children:k.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg font-bold text-white",children:"Chip select"})})}function y7({className:t}){const e=Tt({ref:Ee.bus.rd,from:{stroke:it.stone[700]}}),n=Tt({ref:Ee.bus.wr,from:{stroke:it.stone[700]}}),i=Tt({ref:Ee.bus.mem,from:{stroke:it.red[500]}}),r=["M 380 420 H 820 V 400","M 820 420 V 805","M 450 805 H 999","M 583 805 V 875"].join(" "),s=["M 380 440 H 840 V 400","M 840 440 V 815","M 450 815 H 999","M 573 815 V 875"].join(" "),o="M 750 545 H 860 V 400";return k.jsxs("svg",{viewBox:"0 0 1500 1100",className:ht("pointer-events-none absolute z-[15] h-[1100px] w-[1500px]",t),children:[k.jsx(Zr,{x:384,y:415,children:"rd"}),k.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),k.jsx(ct.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:e}),k.jsx(Zr,{x:384,y:435,children:"wr"}),k.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:s}),k.jsx(ct.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:s,style:n}),k.jsx(Zr,{x:384,y:455,children:"io/m"}),k.jsx(Zs,{springRef:Ee.bus.iom,d:"M 380 460 H 675 V 525"}),k.jsx(Zr,{x:715,y:550,children:"mem"}),k.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),k.jsx(ct.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:o,style:i}),k.jsx(Zr,{x:510,y:585,children:"pic"}),k.jsx(Zs,{springRef:Ee.bus.pic,d:"M 521 595 V 730 H 450"}),k.jsx(Zr,{x:545,y:585,children:"timer"}),k.jsx(Zs,{springRef:Ee.bus.pic,d:"M 563 595 V 875"}),k.jsx(Zr,{x:75,y:490,children:"intr"}),k.jsx(Zs,{springRef:Ee.bus.intr,d:"M 110 700 V 470"}),k.jsx(Zr,{x:125,y:490,children:"inta"}),k.jsx(Zs,{springRef:Ee.bus.inta,d:"M 160 470 V 700"}),k.jsx(Zs,{springRef:Ee.bus.int0,d:"M 145 950 V 900"}),k.jsx(Zs,{springRef:Ee.bus.int1,d:"M 500 955 H 400 V 900"})]})}function Zr({x:t,y:e,children:n}){return k.jsx("text",{className:"fill-stone-400 font-mono text-xs font-bold tracking-wider",x:t,y:e,children:n})}function Zs({d:t,springRef:e}){const n=Tt({ref:e,from:{strokeDashoffset:1,opacity:1}});return k.jsxs(k.Fragment,{children:[k.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),k.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),k.jsx(ct.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:n})]})}function v7({className:t}){const e=Tt({ref:Ee.bus.address,from:{stroke:it.stone[700]}}),n=Tt({ref:Ee.bus.data,from:{stroke:it.stone[700]}}),i=["M 699 349 H 800","M 725 349 V 770","M 450 770 H 999","M 618 770 V 875"].join(" "),r=["M 687 249 H 800","M 770 249 V 790","M 450 790 H 999","M 598 790 V 875"].join(" ");return k.jsxs("svg",{viewBox:"0 0 1500 1100",className:ht("pointer-events-none absolute z-[5] h-[1100px] w-[1500px]",t),children:[k.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:r}),k.jsx(ct.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:r,style:n}),k.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:i}),k.jsx(ct.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:i,style:e})]})}function w7({className:t}){return k.jsxs("div",{className:ht("absolute",t),children:[k.jsx(v7,{className:"inset-0"}),k.jsx(y7,{className:"inset-0"}),k.jsx(g7,{className:"left-[500px] top-[525px]"})]})}function b7({className:t}){const{angle:e}=Tt({ref:Ee.clock,from:{angle:0}});return k.jsx("div",{className:ht("absolute z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-900 p-1 [&_*]:z-20",t),children:k.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[k.jsx("circle",{cx:"12",cy:"12",r:"10"}),k.jsx(ct.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}function yo({name:t,valueAtom:e,emphasis:n=!1,className:i,springRef:r}){const s=Vr(e),o=s.low,l=s.is16bits()?s.high:null,a=Tt({ref:r,from:{backgroundColor:it.stone[800],opacity:1}});return k.jsxs(ct.div,{className:ht("flex w-min items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",n?"border-mantis-400 text-lg":"border-stone-600 text-base",i),style:a,children:[k.jsx("span",{className:"mr-2 font-bold",children:t}),l&&k.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:l.toString("hex")}),k.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:o.toString("hex")})]})}function x7(){const t=Vr(Fe.FLAGS),e=Vr(TA),n=t.bit(0),i=t.bit(6),r=t.bit(7),s=t.bit(9),o=t.bit(11),l=Tt({ref:Ee.cpu.FLAGS,from:{backgroundColor:it.stone[800],opacity:1}}),a=Tt({ref:Ee.cpu.alu.operands,from:{strokeDashoffset:1,opacity:1}}),u=Tt({ref:Ee.cpu.alu.operation,from:{backgroundColor:it.stone[800]}}),c=Tt({ref:Ee.cpu.alu.cog,from:{rot:0}}),d=Tt({ref:Ee.cpu.alu.results,from:{strokeDashoffset:1,opacity:1}});return k.jsxs(k.Fragment,{children:[k.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[k.jsx(ct.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 173 85 H 220",pathLength:1,strokeDasharray:1,style:a}),k.jsx(ct.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 182 145 H 220",pathLength:1,strokeDasharray:1,style:a}),k.jsx(ct.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:d}),k.jsx(ct.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:d}),k.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),k.jsx(ct.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:c.rot.to(h=>`rotate(${h*60}deg)`)}}),k.jsx(ct.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:u,children:e}),k.jsxs(ct.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:l,children:[k.jsx("span",{className:ht("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),k.jsx("span",{className:ht("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"ZF"}),k.jsx("span",{className:ht("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"SF"}),k.jsx("span",{className:ht("rounded p-1 font-light",s?"bg-mantis-400":"bg-stone-900"),children:"IF"}),k.jsx("span",{className:ht("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"OF"})]})]})}function S7(){const t=Vr(so),e=S.useMemo(()=>{if(!("metadata"in t)||t.metadata.operands.length===0)return"";if(t.phase==="fetching-operands"){let o=" __";for(let l=1;l<t.metadata.operands.length;l++)o+=", __";return o}else return" "+t.metadata.operands.join(", ")},[t]),{executionUnit:n}=F_(),i=yB(t.phase,{from:{transform:"translateY(-100%)"},enter:{transform:"translateY(0%)"},leave:{transform:"translateY(100%)"},config:{duration:5*n,easing:_v.easeOutElastic}}),r=Tt({ref:Ee.cpu.decoder.path,from:{strokeDashoffset:1,opacity:1}}),s=Tt({ref:Ee.cpu.decoder.progress,from:{progress:0,opacity:1}});return k.jsxs(k.Fragment,{children:[k.jsx("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:k.jsx(ct.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:r})}),k.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:k.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs font-semibold tracking-wide text-white",children:"Unidad de control"})}),k.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[k.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[k.jsx("span",{className:"text-sm leading-none",children:"Decodificador"}),k.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:k.jsx(ct.div,{className:"h-full bg-mantis-400",style:{width:s.progress.to(o=>`${o*100}%`),opacity:s.opacity}})})]}),k.jsx("div",{className:"relative mt-4 h-8 w-48 overflow-hidden rounded-lg border border-stone-600 bg-stone-900",children:i((o,l)=>k.jsx(ct.div,{className:"absolute inset-0 flex items-center",style:o,children:k.jsx("span",{className:"w-full text-center align-middle text-sm leading-none",children:l==="fetching"?"Leyendo instruccin...":l==="fetching-operands"?"Leyendo operandos...":l==="executing"?"Ejecutando...":l==="writeback"?"Escribiendo resultados...":l==="interrupt"?"Manejando interrupcin...":l==="stopped"?"Detenido":null})}))}),k.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:k.jsx("p",{className:"text-center font-mono",children:t.phase==="fetching"||t.phase==="stopped"?k.jsx("span",{className:"font-bold italic text-stone-400",children:"???"}):k.jsxs(k.Fragment,{children:[k.jsx("span",{className:"font-bold text-mantis-400",children:t.metadata.name}),k.jsx("span",{className:"text-white",children:e})]})})})]})]})}function k7({className:t}){return k.jsxs("div",{className:ht("absolute z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[k.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:"CPU"}),k.jsx(HB,{}),k.jsx(S_,{}),k.jsx(ln,{name:"left",className:"left-[60px] top-[70px]"}),k.jsx(ln,{name:"right",className:"left-[60px] top-[130px]"}),k.jsx(ln,{name:"result",className:"left-[300px] top-[100px]"}),k.jsx(x7,{}),k.jsx(ln,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),k.jsx(ln,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),k.jsx(ln,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),k.jsx(ln,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),k.jsx(ln,{name:"id",className:"left-[520px] top-[190px]"}),k.jsx(ln,{name:"MBR",className:"right-[-38px] top-[233px]"}),k.jsx(ln,{name:"IR",className:"left-[171px] top-[270px]"}),k.jsx(S7,{}),k.jsx(ln,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),k.jsx(ln,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),k.jsx(ln,{name:"ri",className:"left-[450px] top-[372px]"}),k.jsx(ln,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function ln({name:t,emphasis:e,className:n}){return k.jsx(yo,{name:t,valueAtom:Fe[t],springRef:Ee.cpu[t],emphasis:e,className:ht("absolute",n)})}const C7="_pushable_1nhoa_2",E7="_front_1nhoa_15",A7="_shadow_1nhoa_20",P7="_edge_1nhoa_52",Md={pushable:C7,front:E7,shadow:A7,edge:P7};function R7({className:t}){const e=Cc(),[n,i]=sp();return _C("F10",r=>{r.preventDefault(),i("f10.press")}),k.jsx("div",{className:ht("absolute z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:k.jsxs("button",{className:Md.pushable,disabled:n.type!=="running",onClick:()=>i("f10.press"),title:"F10",children:[k.jsx("div",{className:Md.shadow}),k.jsx("div",{className:Md.edge}),k.jsx("span",{className:Md.front,children:e("devices.external.f10.interrupt")})]})})}function M7({className:t}){const e=Vr(dI);return k.jsxs("div",{className:ht("absolute z-10 h-[400px] w-[150px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[k.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:"Memory"}),k.jsx("div",{className:"m-4 w-min overflow-hidden rounded-lg border border-stone-600",children:k.jsx("table",{className:"font-mono text-lg",children:k.jsx("tbody",{children:e.map((n,i)=>k.jsxs("tr",{className:"border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",children:[k.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:n.address.toString()}),k.jsx("td",{className:"px-2 py-1",children:n.value.toString("hex")})]},i))})})})]})}function O7({className:t}){return k.jsxs("div",{className:ht("absolute z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[k.jsxs("div",{className:"flex items-start",children:[k.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:"PIC"}),k.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[k.jsx(yo,{name:"IMR",valueAtom:Av,springRef:Ee.pic.IMR,emphasis:!0}),k.jsx(yo,{name:"IRR",valueAtom:Pv,springRef:Ee.pic.IRR,emphasis:!0}),k.jsx(yo,{name:"ISR",valueAtom:Rv,springRef:Ee.pic.ISR,emphasis:!0})]})]}),k.jsx("hr",{className:"mb-2 border-stone-600"}),k.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:Uh.map((e,n)=>k.jsx(yo,{name:`INT${n}`,valueAtom:e,springRef:Ee.pic[`INT${n}`],className:"mx-auto"},n))})]})}function T7({className:t}){return k.jsxs("div",{className:ht("absolute z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[k.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:"Timer"}),k.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[k.jsx(yo,{name:"CONT",valueAtom:Wv,springRef:Ee.timer.CONT}),k.jsx(yo,{name:"COMP",valueAtom:Gv,springRef:Ee.timer.COMP})]})]})}function N7(){return k.jsx(h7,{minScale:.5,centerOnInit:!0,children:k.jsx(m7,{wrapperClass:"!w-full !h-full",contentClass:"!p-[100px]",children:k.jsxs("div",{className:"relative h-[1100px] w-[1500px] border border-red-500",children:[k.jsx(w7,{className:"left-0 top-0"}),k.jsx(k7,{className:"left-0 top-0"}),k.jsx(M7,{className:"left-[800px] top-0"}),k.jsx(O7,{className:"left-0 top-[700px]"}),k.jsx(T7,{className:"left-[500px] top-[875px]"}),k.jsx(b7,{className:"left-[520px] top-[930px]"}),k.jsx(R7,{className:"left-[50px] top-[950px]"})]})})})}function D7(){const t=Cc(),{updateServiceWorker:e}=tD({onNeedRefresh(){_f(t("update.update-available"),{action:{label:t("update.reload"),onClick:()=>e(!0)}})}});return k.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",children:[k.jsx(Y6,{}),k.jsxs("main",{className:"grid grow grid-cols-[minmax(0,1fr),minmax(0,2fr)] grid-rows-1 gap-2 overflow-auto p-2",children:[k.jsx("section",{className:"w-full overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:k.jsx(n9,{className:"h-full w-full"})}),k.jsx("section",{className:"w-full rounded-lg border border-stone-600 bg-stone-800",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='rgb(120 113 108)' fill-opacity='0.4'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`},children:k.jsx(N7,{})})]})]})}window.codemirror=null;eg.createRoot(document.getElementById("root")).render(k.jsxs(U.StrictMode,{children:[k.jsx(KN,{richColors:!0,closeButton:!0,position:"top-center"}),k.jsx(tI,{children:k.jsx(D7,{})})]}));
