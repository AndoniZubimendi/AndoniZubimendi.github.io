var Y_=Object.defineProperty;var J_=(t,e,n)=>e in t?Y_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>(J_(t,typeof e!="symbol"?e+"":e,n),n),_m=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var k=(t,e,n)=>(_m(t,e,"read from private field"),n?n.call(t):e.get(t)),ue=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},j=(t,e,n,i)=>(_m(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var Ke=(t,e,n)=>(_m(t,e,"access private method"),n);function q_(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Jc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BE={exports:{}},Ap={},zE={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qc=Symbol.for("react.element"),Q_=Symbol.for("react.portal"),eN=Symbol.for("react.fragment"),tN=Symbol.for("react.strict_mode"),nN=Symbol.for("react.profiler"),iN=Symbol.for("react.provider"),rN=Symbol.for("react.context"),sN=Symbol.for("react.forward_ref"),oN=Symbol.for("react.suspense"),aN=Symbol.for("react.memo"),lN=Symbol.for("react.lazy"),J1=Symbol.iterator;function uN(t){return t===null||typeof t!="object"?null:(t=J1&&t[J1]||t["@@iterator"],typeof t=="function"?t:null)}var FE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jE=Object.assign,UE={};function Hl(t,e,n){this.props=t,this.context=e,this.refs=UE,this.updater=n||FE}Hl.prototype.isReactComponent={};Hl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function VE(){}VE.prototype=Hl.prototype;function Ov(t,e,n){this.props=t,this.context=e,this.refs=UE,this.updater=n||FE}var _v=Ov.prototype=new VE;_v.constructor=Ov;jE(_v,Hl.prototype);_v.isPureReactComponent=!0;var q1=Array.isArray,HE=Object.prototype.hasOwnProperty,Nv={current:null},WE={key:!0,ref:!0,__self:!0,__source:!0};function GE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)HE.call(e,i)&&!WE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:qc,type:t,key:s,ref:o,props:r,_owner:Nv.current}}function cN(t,e){return{$$typeof:qc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mv(t){return typeof t=="object"&&t!==null&&t.$$typeof===qc}function dN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Q1=/\/+/g;function Nm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dN(""+t.key):e.toString(36)}function bh(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qc:case Q_:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Nm(o,0):i,q1(r)?(n="",t!=null&&(n=t.replace(Q1,"$&/")+"/"),bh(r,e,n,"",function(u){return u})):r!=null&&(Mv(r)&&(r=cN(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Q1,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",q1(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Nm(s,a);o+=bh(s,e,n,l,r)}else if(l=uN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Nm(s,a++),o+=bh(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sd(t,e,n){if(t==null)return t;var i=[],r=0;return bh(t,i,"","",function(s){return e.call(n,s,r++)}),i}function hN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},Sh={transition:null},fN={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:Sh,ReactCurrentOwner:Nv};Ie.Children={map:Sd,forEach:function(t,e,n){Sd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sd(t,function(){e++}),e},toArray:function(t){return Sd(t,function(e){return e})||[]},only:function(t){if(!Mv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Hl;Ie.Fragment=eN;Ie.Profiler=nN;Ie.PureComponent=Ov;Ie.StrictMode=tN;Ie.Suspense=oN;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fN;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=jE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Nv.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)HE.call(e,l)&&!WE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:qc,type:t.type,key:r,ref:s,props:i,_owner:o}};Ie.createContext=function(t){return t={$$typeof:rN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iN,_context:t},t.Consumer=t};Ie.createElement=GE;Ie.createFactory=function(t){var e=GE.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:sN,render:t}};Ie.isValidElement=Mv;Ie.lazy=function(t){return{$$typeof:lN,_payload:{_status:-1,_result:t},_init:hN}};Ie.memo=function(t,e){return{$$typeof:aN,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Sh.transition;Sh.transition={};try{t()}finally{Sh.transition=e}};Ie.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ie.useCallback=function(t,e){return xn.current.useCallback(t,e)};Ie.useContext=function(t){return xn.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return xn.current.useEffect(t,e)};Ie.useId=function(){return xn.current.useId()};Ie.useImperativeHandle=function(t,e,n){return xn.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return xn.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return xn.current.useReducer(t,e,n)};Ie.useRef=function(t){return xn.current.useRef(t)};Ie.useState=function(t){return xn.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return xn.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return xn.current.useTransition()};Ie.version="18.2.0";zE.exports=Ie;var b=zE.exports;const q=Jc(b),Dv=q_({__proto__:null,default:q},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN=b,mN=Symbol.for("react.element"),gN=Symbol.for("react.fragment"),yN=Object.prototype.hasOwnProperty,vN=pN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wN={key:!0,ref:!0,__self:!0,__source:!0};function XE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)yN.call(e,i)&&!wN.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:mN,type:t,key:s,ref:o,props:r,_owner:vN.current}}Ap.Fragment=gN;Ap.jsx=XE;Ap.jsxs=XE;BE.exports=Ap;var C=BE.exports;var h0={},KE={exports:{}},ei={},ZE={exports:{}},YE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,$){var F=O.length;O.push($);e:for(;0<F;){var Y=F-1>>>1,ie=O[Y];if(0<r(ie,$))O[Y]=$,O[F]=ie,F=Y;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var $=O[0],F=O.pop();if(F!==$){O[0]=F;e:for(var Y=0,ie=O.length,ce=ie>>>1;Y<ce;){var we=2*(Y+1)-1,Se=O[we],xe=we+1,Q=O[xe];if(0>r(Se,F))xe<ie&&0>r(Q,Se)?(O[Y]=Q,O[xe]=F,Y=xe):(O[Y]=Se,O[we]=F,Y=we);else if(xe<ie&&0>r(Q,F))O[Y]=Q,O[xe]=F,Y=xe;else break e}}return $}function r(O,$){var F=O.sortIndex-$.sortIndex;return F!==0?F:O.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var $=n(u);$!==null;){if($.callback===null)i(u);else if($.startTime<=O)i(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function x(O){if(m=!1,w(O),!p)if(n(l)!==null)p=!0,z(S);else{var $=n(u);$!==null&&L(x,$.startTime-O)}}function S(O,$){p=!1,m&&(m=!1,g(E),E=-1),f=!0;var F=h;try{for(w($),d=n(l);d!==null&&(!(d.expirationTime>$)||O&&!T());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,h=d.priorityLevel;var ie=Y(d.expirationTime<=$);$=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(l)&&i(l),w($)}else i(l);d=n(l)}if(d!==null)var ce=!0;else{var we=n(u);we!==null&&L(x,we.startTime-$),ce=!1}return ce}finally{d=null,h=F,f=!1}}var A=!1,P=null,E=-1,R=5,N=-1;function T(){return!(t.unstable_now()-N<R)}function B(){if(P!==null){var O=t.unstable_now();N=O;var $=!0;try{$=P(!0,O)}finally{$?I():(A=!1,P=null)}}else A=!1}var I;if(typeof y=="function")I=function(){y(B)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,D=_.port2;_.port1.onmessage=B,I=function(){D.postMessage(null)}}else I=function(){v(B,0)};function z(O){P=O,A||(A=!0,I())}function L(O,$){E=v(function(){O(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,z(S))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var F=h;h=$;try{return O()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=h;h=O;try{return $()}finally{h=F}},t.unstable_scheduleCallback=function(O,$,F){var Y=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,O){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=F+ie,O={id:c++,callback:$,priorityLevel:O,startTime:F,expirationTime:ie,sortIndex:-1},F>Y?(O.sortIndex=F,e(u,O),n(l)===null&&O===n(u)&&(m?(g(E),E=-1):m=!0,L(x,F-Y))):(O.sortIndex=ie,e(l,O),p||f||(p=!0,z(S))),O},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(O){var $=h;return function(){var F=h;h=$;try{return O.apply(this,arguments)}finally{h=F}}}})(YE);ZE.exports=YE;var xN=ZE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE=b,Qn=xN;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qE=new Set,ec={};function oa(t,e){xl(t,e),xl(t+"Capture",e)}function xl(t,e){for(ec[t]=e,t=0;t<e.length;t++)qE.add(e[t])}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f0=Object.prototype.hasOwnProperty,bN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ex={},tx={};function SN(t){return f0.call(tx,t)?!0:f0.call(ex,t)?!1:bN.test(t)?tx[t]=!0:(ex[t]=!0,!1)}function kN(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function EN(t,e,n,i){if(e===null||typeof e>"u"||kN(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new bn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new bn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new bn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new bn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new bn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new bn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new bn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new bn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new bn(t,5,!1,t.toLowerCase(),null,!1,!1)});var $v=/[\-:]([a-z])/g;function Lv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($v,Lv);Zt[e]=new bn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($v,Lv);Zt[e]=new bn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($v,Lv);Zt[e]=new bn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new bn(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new bn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Iv(t,e,n,i){var r=Zt.hasOwnProperty(e)?Zt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(EN(e,n,r,i)&&(n=null),i||r===null?SN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ls=JE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kd=Symbol.for("react.element"),_a=Symbol.for("react.portal"),Na=Symbol.for("react.fragment"),Bv=Symbol.for("react.strict_mode"),p0=Symbol.for("react.profiler"),QE=Symbol.for("react.provider"),eC=Symbol.for("react.context"),zv=Symbol.for("react.forward_ref"),m0=Symbol.for("react.suspense"),g0=Symbol.for("react.suspense_list"),Fv=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),tC=Symbol.for("react.offscreen"),nx=Symbol.iterator;function tu(t){return t===null||typeof t!="object"?null:(t=nx&&t[nx]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,Mm;function Su(t){if(Mm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mm=e&&e[1]||""}return`
`+Mm+t}var Dm=!1;function $m(t,e){if(!t||Dm)return"";Dm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Dm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Su(t):""}function CN(t){switch(t.tag){case 5:return Su(t.type);case 16:return Su("Lazy");case 13:return Su("Suspense");case 19:return Su("SuspenseList");case 0:case 2:case 15:return t=$m(t.type,!1),t;case 11:return t=$m(t.type.render,!1),t;case 1:return t=$m(t.type,!0),t;default:return""}}function y0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Na:return"Fragment";case _a:return"Portal";case p0:return"Profiler";case Bv:return"StrictMode";case m0:return"Suspense";case g0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eC:return(t.displayName||"Context")+".Consumer";case QE:return(t._context.displayName||"Context")+".Provider";case zv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fv:return e=t.displayName||null,e!==null?e:y0(t.type)||"Memo";case ys:e=t._payload,t=t._init;try{return y0(t(e))}catch{}}return null}function AN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return y0(e);case 8:return e===Bv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ys(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PN(t){var e=nC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ed(t){t._valueTracker||(t._valueTracker=PN(t))}function iC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=nC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function nf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function v0(t,e){var n=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ix(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ys(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rC(t,e){e=e.checked,e!=null&&Iv(t,"checked",e,!1)}function w0(t,e){rC(t,e);var n=Ys(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?x0(t,e.type,n):e.hasOwnProperty("defaultValue")&&x0(t,e.type,Ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function x0(t,e,n){(e!=="number"||nf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ku=Array.isArray;function Ka(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ys(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function b0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(ku(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ys(n)}}function sC(t,e){var n=Ys(e.value),i=Ys(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function ox(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function S0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cd,aC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cd=Cd||document.createElement("div"),Cd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $u={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RN=["Webkit","ms","Moz","O"];Object.keys($u).forEach(function(t){RN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$u[e]=$u[t]})});function lC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$u.hasOwnProperty(t)&&$u[t]?(""+e).trim():e+"px"}function uC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=lC(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var TN=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k0(t,e){if(e){if(TN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function E0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C0=null;function jv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var A0=null,Za=null,Ya=null;function ax(t){if(t=td(t)){if(typeof A0!="function")throw Error(H(280));var e=t.stateNode;e&&(e=_p(e),A0(t.stateNode,t.type,e))}}function cC(t){Za?Ya?Ya.push(t):Ya=[t]:Za=t}function dC(){if(Za){var t=Za,e=Ya;if(Ya=Za=null,ax(t),e)for(t=0;t<e.length;t++)ax(e[t])}}function hC(t,e){return t(e)}function fC(){}var Lm=!1;function pC(t,e,n){if(Lm)return t(e,n);Lm=!0;try{return hC(t,e,n)}finally{Lm=!1,(Za!==null||Ya!==null)&&(fC(),dC())}}function nc(t,e){var n=t.stateNode;if(n===null)return null;var i=_p(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var P0=!1;if(qr)try{var nu={};Object.defineProperty(nu,"passive",{get:function(){P0=!0}}),window.addEventListener("test",nu,nu),window.removeEventListener("test",nu,nu)}catch{P0=!1}function ON(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Lu=!1,rf=null,sf=!1,R0=null,_N={onError:function(t){Lu=!0,rf=t}};function NN(t,e,n,i,r,s,o,a,l){Lu=!1,rf=null,ON.apply(_N,arguments)}function MN(t,e,n,i,r,s,o,a,l){if(NN.apply(this,arguments),Lu){if(Lu){var u=rf;Lu=!1,rf=null}else throw Error(H(198));sf||(sf=!0,R0=u)}}function aa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lx(t){if(aa(t)!==t)throw Error(H(188))}function DN(t){var e=t.alternate;if(!e){if(e=aa(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return lx(r),t;if(s===i)return lx(r),e;s=s.sibling}throw Error(H(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==i)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function gC(t){return t=DN(t),t!==null?yC(t):null}function yC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yC(t);if(e!==null)return e;t=t.sibling}return null}var vC=Qn.unstable_scheduleCallback,ux=Qn.unstable_cancelCallback,$N=Qn.unstable_shouldYield,LN=Qn.unstable_requestPaint,kt=Qn.unstable_now,IN=Qn.unstable_getCurrentPriorityLevel,Uv=Qn.unstable_ImmediatePriority,wC=Qn.unstable_UserBlockingPriority,of=Qn.unstable_NormalPriority,BN=Qn.unstable_LowPriority,xC=Qn.unstable_IdlePriority,Pp=null,hr=null;function zN(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(Pp,t,void 0,(t.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:UN,FN=Math.log,jN=Math.LN2;function UN(t){return t>>>=0,t===0?32:31-(FN(t)/jN|0)|0}var Ad=64,Pd=4194304;function Eu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function af(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Eu(a):(s&=o,s!==0&&(i=Eu(s)))}else o=n&~r,o!==0?i=Eu(o):s!==0&&(i=Eu(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ii(e),r=1<<n,i|=t[n],e&=~r;return i}function VN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HN(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ii(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=VN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function T0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bC(){var t=Ad;return Ad<<=1,!(Ad&4194240)&&(Ad=64),t}function Im(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ii(e),t[e]=n}function WN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ii(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Vv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ii(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ge=0;function SC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kC,Hv,EC,CC,AC,O0=!1,Rd=[],zs=null,Fs=null,js=null,ic=new Map,rc=new Map,Es=[],GN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cx(t,e){switch(t){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":ic.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(e.pointerId)}}function iu(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=td(e),e!==null&&Hv(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function XN(t,e,n,i,r){switch(e){case"focusin":return zs=iu(zs,t,e,n,i,r),!0;case"dragenter":return Fs=iu(Fs,t,e,n,i,r),!0;case"mouseover":return js=iu(js,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ic.set(s,iu(ic.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,rc.set(s,iu(rc.get(s)||null,t,e,n,i,r)),!0}return!1}function PC(t){var e=Ro(t.target);if(e!==null){var n=aa(e);if(n!==null){if(e=n.tag,e===13){if(e=mC(n),e!==null){t.blockedOn=e,AC(t.priority,function(){EC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);C0=i,n.target.dispatchEvent(i),C0=null}else return e=td(n),e!==null&&Hv(e),t.blockedOn=n,!1;e.shift()}return!0}function dx(t,e,n){kh(t)&&n.delete(e)}function KN(){O0=!1,zs!==null&&kh(zs)&&(zs=null),Fs!==null&&kh(Fs)&&(Fs=null),js!==null&&kh(js)&&(js=null),ic.forEach(dx),rc.forEach(dx)}function ru(t,e){t.blockedOn===e&&(t.blockedOn=null,O0||(O0=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,KN)))}function sc(t){function e(r){return ru(r,t)}if(0<Rd.length){ru(Rd[0],t);for(var n=1;n<Rd.length;n++){var i=Rd[n];i.blockedOn===t&&(i.blockedOn=null)}}for(zs!==null&&ru(zs,t),Fs!==null&&ru(Fs,t),js!==null&&ru(js,t),ic.forEach(e),rc.forEach(e),n=0;n<Es.length;n++)i=Es[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Es.length&&(n=Es[0],n.blockedOn===null);)PC(n),n.blockedOn===null&&Es.shift()}var Ja=ls.ReactCurrentBatchConfig,lf=!0;function ZN(t,e,n,i){var r=Ge,s=Ja.transition;Ja.transition=null;try{Ge=1,Wv(t,e,n,i)}finally{Ge=r,Ja.transition=s}}function YN(t,e,n,i){var r=Ge,s=Ja.transition;Ja.transition=null;try{Ge=4,Wv(t,e,n,i)}finally{Ge=r,Ja.transition=s}}function Wv(t,e,n,i){if(lf){var r=_0(t,e,n,i);if(r===null)Xm(t,e,i,uf,n),cx(t,i);else if(XN(r,t,e,n,i))i.stopPropagation();else if(cx(t,i),e&4&&-1<GN.indexOf(t)){for(;r!==null;){var s=td(r);if(s!==null&&kC(s),s=_0(t,e,n,i),s===null&&Xm(t,e,i,uf,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Xm(t,e,i,null,n)}}var uf=null;function _0(t,e,n,i){if(uf=null,t=jv(i),t=Ro(t),t!==null)if(e=aa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uf=t,null}function RC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IN()){case Uv:return 1;case wC:return 4;case of:case BN:return 16;case xC:return 536870912;default:return 16}default:return 16}}var Ms=null,Gv=null,Eh=null;function TC(){if(Eh)return Eh;var t,e=Gv,n=e.length,i,r="value"in Ms?Ms.value:Ms.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Eh=r.slice(t,1<i?1-i:void 0)}function Ch(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Td(){return!0}function hx(){return!1}function ti(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Td:hx,this.isPropagationStopped=hx,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Td)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Td)},persist:function(){},isPersistent:Td}),e}var Wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xv=ti(Wl),ed=gt({},Wl,{view:0,detail:0}),JN=ti(ed),Bm,zm,su,Rp=gt({},ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==su&&(su&&t.type==="mousemove"?(Bm=t.screenX-su.screenX,zm=t.screenY-su.screenY):zm=Bm=0,su=t),Bm)},movementY:function(t){return"movementY"in t?t.movementY:zm}}),fx=ti(Rp),qN=gt({},Rp,{dataTransfer:0}),QN=ti(qN),eM=gt({},ed,{relatedTarget:0}),Fm=ti(eM),tM=gt({},Wl,{animationName:0,elapsedTime:0,pseudoElement:0}),nM=ti(tM),iM=gt({},Wl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rM=ti(iM),sM=gt({},Wl,{data:0}),px=ti(sM),oM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lM[t])?!!e[t]:!1}function Kv(){return uM}var cM=gt({},ed,{key:function(t){if(t.key){var e=oM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ch(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kv,charCode:function(t){return t.type==="keypress"?Ch(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ch(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dM=ti(cM),hM=gt({},Rp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mx=ti(hM),fM=gt({},ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kv}),pM=ti(fM),mM=gt({},Wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),gM=ti(mM),yM=gt({},Rp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vM=ti(yM),wM=[9,13,27,32],Zv=qr&&"CompositionEvent"in window,Iu=null;qr&&"documentMode"in document&&(Iu=document.documentMode);var xM=qr&&"TextEvent"in window&&!Iu,OC=qr&&(!Zv||Iu&&8<Iu&&11>=Iu),gx=String.fromCharCode(32),yx=!1;function _C(t,e){switch(t){case"keyup":return wM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ma=!1;function bM(t,e){switch(t){case"compositionend":return NC(e);case"keypress":return e.which!==32?null:(yx=!0,gx);case"textInput":return t=e.data,t===gx&&yx?null:t;default:return null}}function SM(t,e){if(Ma)return t==="compositionend"||!Zv&&_C(t,e)?(t=TC(),Eh=Gv=Ms=null,Ma=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return OC&&e.locale!=="ko"?null:e.data;default:return null}}var kM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kM[t.type]:e==="textarea"}function MC(t,e,n,i){cC(i),e=cf(e,"onChange"),0<e.length&&(n=new Xv("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Bu=null,oc=null;function EM(t){HC(t,0)}function Tp(t){var e=La(t);if(iC(e))return t}function CM(t,e){if(t==="change")return e}var DC=!1;if(qr){var jm;if(qr){var Um="oninput"in document;if(!Um){var wx=document.createElement("div");wx.setAttribute("oninput","return;"),Um=typeof wx.oninput=="function"}jm=Um}else jm=!1;DC=jm&&(!document.documentMode||9<document.documentMode)}function xx(){Bu&&(Bu.detachEvent("onpropertychange",$C),oc=Bu=null)}function $C(t){if(t.propertyName==="value"&&Tp(oc)){var e=[];MC(e,oc,t,jv(t)),pC(EM,e)}}function AM(t,e,n){t==="focusin"?(xx(),Bu=e,oc=n,Bu.attachEvent("onpropertychange",$C)):t==="focusout"&&xx()}function PM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tp(oc)}function RM(t,e){if(t==="click")return Tp(e)}function TM(t,e){if(t==="input"||t==="change")return Tp(e)}function OM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ui=typeof Object.is=="function"?Object.is:OM;function ac(t,e){if(Ui(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!f0.call(e,r)||!Ui(t[r],e[r]))return!1}return!0}function bx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sx(t,e){var n=bx(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bx(n)}}function LC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function IC(){for(var t=window,e=nf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nf(t.document)}return e}function Yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _M(t){var e=IC(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&LC(n.ownerDocument.documentElement,n)){if(i!==null&&Yv(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Sx(n,s);var o=Sx(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var NM=qr&&"documentMode"in document&&11>=document.documentMode,Da=null,N0=null,zu=null,M0=!1;function kx(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;M0||Da==null||Da!==nf(i)||(i=Da,"selectionStart"in i&&Yv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),zu&&ac(zu,i)||(zu=i,i=cf(N0,"onSelect"),0<i.length&&(e=new Xv("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Da)))}function Od(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $a={animationend:Od("Animation","AnimationEnd"),animationiteration:Od("Animation","AnimationIteration"),animationstart:Od("Animation","AnimationStart"),transitionend:Od("Transition","TransitionEnd")},Vm={},BC={};qr&&(BC=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Op(t){if(Vm[t])return Vm[t];if(!$a[t])return t;var e=$a[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BC)return Vm[t]=e[n];return t}var zC=Op("animationend"),FC=Op("animationiteration"),jC=Op("animationstart"),UC=Op("transitionend"),VC=new Map,Ex="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lo(t,e){VC.set(t,e),oa(e,[t])}for(var Hm=0;Hm<Ex.length;Hm++){var Wm=Ex[Hm],MM=Wm.toLowerCase(),DM=Wm[0].toUpperCase()+Wm.slice(1);lo(MM,"on"+DM)}lo(zC,"onAnimationEnd");lo(FC,"onAnimationIteration");lo(jC,"onAnimationStart");lo("dblclick","onDoubleClick");lo("focusin","onFocus");lo("focusout","onBlur");lo(UC,"onTransitionEnd");xl("onMouseEnter",["mouseout","mouseover"]);xl("onMouseLeave",["mouseout","mouseover"]);xl("onPointerEnter",["pointerout","pointerover"]);xl("onPointerLeave",["pointerout","pointerover"]);oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oa("onBeforeInput",["compositionend","keypress","textInput","paste"]);oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$M=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cu));function Cx(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,MN(i,e,void 0,t),t.currentTarget=null}function HC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Cx(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Cx(r,a,u),s=l}}}if(sf)throw t=R0,sf=!1,R0=null,t}function et(t,e){var n=e[B0];n===void 0&&(n=e[B0]=new Set);var i=t+"__bubble";n.has(i)||(WC(e,t,2,!1),n.add(i))}function Gm(t,e,n){var i=0;e&&(i|=4),WC(n,t,i,e)}var _d="_reactListening"+Math.random().toString(36).slice(2);function lc(t){if(!t[_d]){t[_d]=!0,qE.forEach(function(n){n!=="selectionchange"&&($M.has(n)||Gm(n,!1,t),Gm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_d]||(e[_d]=!0,Gm("selectionchange",!1,e))}}function WC(t,e,n,i){switch(RC(e)){case 1:var r=ZN;break;case 4:r=YN;break;default:r=Wv}n=r.bind(null,e,n,t),r=void 0,!P0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Xm(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ro(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}pC(function(){var u=s,c=jv(n),d=[];e:{var h=VC.get(t);if(h!==void 0){var f=Xv,p=t;switch(t){case"keypress":if(Ch(n)===0)break e;case"keydown":case"keyup":f=dM;break;case"focusin":p="focus",f=Fm;break;case"focusout":p="blur",f=Fm;break;case"beforeblur":case"afterblur":f=Fm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=fx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=QN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=pM;break;case zC:case FC:case jC:f=nM;break;case UC:f=gM;break;case"scroll":f=JN;break;case"wheel":f=vM;break;case"copy":case"cut":case"paste":f=rM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=mx}var m=(e&4)!==0,v=!m&&t==="scroll",g=m?h!==null?h+"Capture":null:h;m=[];for(var y=u,w;y!==null;){w=y;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,g!==null&&(x=nc(y,g),x!=null&&m.push(uc(y,x,w)))),v)break;y=y.return}0<m.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==C0&&(p=n.relatedTarget||n.fromElement)&&(Ro(p)||p[Qr]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Ro(p):null,p!==null&&(v=aa(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(m=fx,x="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=mx,x="onPointerLeave",g="onPointerEnter",y="pointer"),v=f==null?h:La(f),w=p==null?h:La(p),h=new m(x,y+"leave",f,n,c),h.target=v,h.relatedTarget=w,x=null,Ro(c)===u&&(m=new m(g,y+"enter",p,n,c),m.target=w,m.relatedTarget=v,x=m),v=x,f&&p)t:{for(m=f,g=p,y=0,w=m;w;w=ma(w))y++;for(w=0,x=g;x;x=ma(x))w++;for(;0<y-w;)m=ma(m),y--;for(;0<w-y;)g=ma(g),w--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=ma(m),g=ma(g)}m=null}else m=null;f!==null&&Ax(d,h,f,m,!1),p!==null&&v!==null&&Ax(d,v,p,m,!0)}}e:{if(h=u?La(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=CM;else if(vx(h))if(DC)S=TM;else{S=PM;var A=AM}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=RM);if(S&&(S=S(t,u))){MC(d,S,n,c);break e}A&&A(t,h,u),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&x0(h,"number",h.value)}switch(A=u?La(u):window,t){case"focusin":(vx(A)||A.contentEditable==="true")&&(Da=A,N0=u,zu=null);break;case"focusout":zu=N0=Da=null;break;case"mousedown":M0=!0;break;case"contextmenu":case"mouseup":case"dragend":M0=!1,kx(d,n,c);break;case"selectionchange":if(NM)break;case"keydown":case"keyup":kx(d,n,c)}var P;if(Zv)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ma?_C(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(OC&&n.locale!=="ko"&&(Ma||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ma&&(P=TC()):(Ms=c,Gv="value"in Ms?Ms.value:Ms.textContent,Ma=!0)),A=cf(u,E),0<A.length&&(E=new px(E,t,null,n,c),d.push({event:E,listeners:A}),P?E.data=P:(P=NC(n),P!==null&&(E.data=P)))),(P=xM?bM(t,n):SM(t,n))&&(u=cf(u,"onBeforeInput"),0<u.length&&(c=new px("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=P))}HC(d,e)})}function uc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=nc(t,n),s!=null&&i.unshift(uc(t,s,r)),s=nc(t,e),s!=null&&i.push(uc(t,s,r))),t=t.return}return i}function ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ax(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=nc(n,s),l!=null&&o.unshift(uc(n,l,a))):r||(l=nc(n,s),l!=null&&o.push(uc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var LM=/\r\n?/g,IM=/\u0000|\uFFFD/g;function Px(t){return(typeof t=="string"?t:""+t).replace(LM,`
`).replace(IM,"")}function Nd(t,e,n){if(e=Px(e),Px(t)!==e&&n)throw Error(H(425))}function df(){}var D0=null,$0=null;function L0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var I0=typeof setTimeout=="function"?setTimeout:void 0,BM=typeof clearTimeout=="function"?clearTimeout:void 0,Rx=typeof Promise=="function"?Promise:void 0,zM=typeof queueMicrotask=="function"?queueMicrotask:typeof Rx<"u"?function(t){return Rx.resolve(null).then(t).catch(FM)}:I0;function FM(t){setTimeout(function(){throw t})}function Km(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),sc(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);sc(e)}function Us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gl=Math.random().toString(36).slice(2),sr="__reactFiber$"+Gl,cc="__reactProps$"+Gl,Qr="__reactContainer$"+Gl,B0="__reactEvents$"+Gl,jM="__reactListeners$"+Gl,UM="__reactHandles$"+Gl;function Ro(t){var e=t[sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qr]||n[sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tx(t);t!==null;){if(n=t[sr])return n;t=Tx(t)}return e}t=n,n=t.parentNode}return null}function td(t){return t=t[sr]||t[Qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function La(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function _p(t){return t[cc]||null}var z0=[],Ia=-1;function uo(t){return{current:t}}function st(t){0>Ia||(t.current=z0[Ia],z0[Ia]=null,Ia--)}function qe(t,e){Ia++,z0[Ia]=t.current,t.current=e}var Js={},sn=uo(Js),Mn=uo(!1),Ho=Js;function bl(t,e){var n=t.type.contextTypes;if(!n)return Js;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Dn(t){return t=t.childContextTypes,t!=null}function hf(){st(Mn),st(sn)}function Ox(t,e,n){if(sn.current!==Js)throw Error(H(168));qe(sn,e),qe(Mn,n)}function GC(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(H(108,AN(t)||"Unknown",r));return gt({},n,i)}function ff(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Js,Ho=sn.current,qe(sn,t),qe(Mn,Mn.current),!0}function _x(t,e,n){var i=t.stateNode;if(!i)throw Error(H(169));n?(t=GC(t,e,Ho),i.__reactInternalMemoizedMergedChildContext=t,st(Mn),st(sn),qe(sn,t)):st(Mn),qe(Mn,n)}var Tr=null,Np=!1,Zm=!1;function XC(t){Tr===null?Tr=[t]:Tr.push(t)}function VM(t){Np=!0,XC(t)}function co(){if(!Zm&&Tr!==null){Zm=!0;var t=0,e=Ge;try{var n=Tr;for(Ge=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Tr=null,Np=!1}catch(r){throw Tr!==null&&(Tr=Tr.slice(t+1)),vC(Uv,co),r}finally{Ge=e,Zm=!1}}return null}var Ba=[],za=0,pf=null,mf=0,di=[],hi=0,Wo=null,jr=1,Ur="";function xo(t,e){Ba[za++]=mf,Ba[za++]=pf,pf=t,mf=e}function KC(t,e,n){di[hi++]=jr,di[hi++]=Ur,di[hi++]=Wo,Wo=t;var i=jr;t=Ur;var r=32-Ii(i)-1;i&=~(1<<r),n+=1;var s=32-Ii(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,jr=1<<32-Ii(e)+r|n<<r|i,Ur=s+t}else jr=1<<s|n<<r|i,Ur=t}function Jv(t){t.return!==null&&(xo(t,1),KC(t,1,0))}function qv(t){for(;t===pf;)pf=Ba[--za],Ba[za]=null,mf=Ba[--za],Ba[za]=null;for(;t===Wo;)Wo=di[--hi],di[hi]=null,Ur=di[--hi],di[hi]=null,jr=di[--hi],di[hi]=null}var qn=null,Yn=null,at=!1,_i=null;function ZC(t,e){var n=mi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qn=t,Yn=Us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qn=t,Yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wo!==null?{id:jr,overflow:Ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qn=t,Yn=null,!0):!1;default:return!1}}function F0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function j0(t){if(at){var e=Yn;if(e){var n=e;if(!Nx(t,e)){if(F0(t))throw Error(H(418));e=Us(n.nextSibling);var i=qn;e&&Nx(t,e)?ZC(i,n):(t.flags=t.flags&-4097|2,at=!1,qn=t)}}else{if(F0(t))throw Error(H(418));t.flags=t.flags&-4097|2,at=!1,qn=t}}}function Mx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qn=t}function Md(t){if(t!==qn)return!1;if(!at)return Mx(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!L0(t.type,t.memoizedProps)),e&&(e=Yn)){if(F0(t))throw YC(),Error(H(418));for(;e;)ZC(t,e),e=Us(e.nextSibling)}if(Mx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yn=Us(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yn=null}}else Yn=qn?Us(t.stateNode.nextSibling):null;return!0}function YC(){for(var t=Yn;t;)t=Us(t.nextSibling)}function Sl(){Yn=qn=null,at=!1}function Qv(t){_i===null?_i=[t]:_i.push(t)}var HM=ls.ReactCurrentBatchConfig;function Ai(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var gf=uo(null),yf=null,Fa=null,ew=null;function tw(){ew=Fa=yf=null}function nw(t){var e=gf.current;st(gf),t._currentValue=e}function U0(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function qa(t,e){yf=t,ew=Fa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(On=!0),t.firstContext=null)}function bi(t){var e=t._currentValue;if(ew!==t)if(t={context:t,memoizedValue:e,next:null},Fa===null){if(yf===null)throw Error(H(308));Fa=t,yf.dependencies={lanes:0,firstContext:t}}else Fa=Fa.next=t;return e}var To=null;function iw(t){To===null?To=[t]:To.push(t)}function JC(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,iw(e)):(n.next=r.next,r.next=n),e.interleaved=n,es(t,i)}function es(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vs=!1;function rw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vs(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Fe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,es(t,n)}return r=i.interleaved,r===null?(e.next=e,iw(i)):(e.next=r.next,r.next=e),i.interleaved=e,es(t,n)}function Ah(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Vv(t,n)}}function Dx(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vf(t,e,n,i){var r=t.updateQueue;vs=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=gt({},d,h);break e;case 2:vs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Xo|=o,t.lanes=o,t.memoizedState=d}}function $x(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(H(191,r));r.call(i)}}}var QC=new JE.Component().refs;function V0(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mp={isMounted:function(t){return(t=t._reactInternals)?aa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=yn(),r=Ws(t),s=Hr(i,r);s.payload=e,n!=null&&(s.callback=n),e=Vs(t,s,r),e!==null&&(Bi(e,t,r,i),Ah(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=yn(),r=Ws(t),s=Hr(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vs(t,s,r),e!==null&&(Bi(e,t,r,i),Ah(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),i=Ws(t),r=Hr(n,i);r.tag=2,e!=null&&(r.callback=e),e=Vs(t,r,i),e!==null&&(Bi(e,t,i,n),Ah(e,t,i))}};function Lx(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ac(n,i)||!ac(r,s):!0}function e2(t,e,n){var i=!1,r=Js,s=e.contextType;return typeof s=="object"&&s!==null?s=bi(s):(r=Dn(e)?Ho:sn.current,i=e.contextTypes,s=(i=i!=null)?bl(t,r):Js),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mp,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ix(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Mp.enqueueReplaceState(e,e.state,null)}function H0(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=QC,rw(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=bi(s):(s=Dn(e)?Ho:sn.current,r.context=bl(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(V0(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Mp.enqueueReplaceState(r,r.state,null),vf(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ou(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var i=n.stateNode}if(!i)throw Error(H(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===QC&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Dd(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bx(t){var e=t._init;return e(t._payload)}function t2(t){function e(g,y){if(t){var w=g.deletions;w===null?(g.deletions=[y],g.flags|=16):w.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function i(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=Gs(g,y),g.index=0,g.sibling=null,g}function s(g,y,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<y?(g.flags|=2,y):w):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,w,x){return y===null||y.tag!==6?(y=ng(w,g.mode,x),y.return=g,y):(y=r(y,w),y.return=g,y)}function l(g,y,w,x){var S=w.type;return S===Na?c(g,y,w.props.children,x,w.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ys&&Bx(S)===y.type)?(x=r(y,w.props),x.ref=ou(g,y,w),x.return=g,x):(x=Nh(w.type,w.key,w.props,null,g.mode,x),x.ref=ou(g,y,w),x.return=g,x)}function u(g,y,w,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=ig(w,g.mode,x),y.return=g,y):(y=r(y,w.children||[]),y.return=g,y)}function c(g,y,w,x,S){return y===null||y.tag!==7?(y=zo(w,g.mode,x,S),y.return=g,y):(y=r(y,w),y.return=g,y)}function d(g,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ng(""+y,g.mode,w),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case kd:return w=Nh(y.type,y.key,y.props,null,g.mode,w),w.ref=ou(g,null,y),w.return=g,w;case _a:return y=ig(y,g.mode,w),y.return=g,y;case ys:var x=y._init;return d(g,x(y._payload),w)}if(ku(y)||tu(y))return y=zo(y,g.mode,w,null),y.return=g,y;Dd(g,y)}return null}function h(g,y,w,x){var S=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(g,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case kd:return w.key===S?l(g,y,w,x):null;case _a:return w.key===S?u(g,y,w,x):null;case ys:return S=w._init,h(g,y,S(w._payload),x)}if(ku(w)||tu(w))return S!==null?null:c(g,y,w,x,null);Dd(g,w)}return null}function f(g,y,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(w)||null,a(y,g,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case kd:return g=g.get(x.key===null?w:x.key)||null,l(y,g,x,S);case _a:return g=g.get(x.key===null?w:x.key)||null,u(y,g,x,S);case ys:var A=x._init;return f(g,y,w,A(x._payload),S)}if(ku(x)||tu(x))return g=g.get(w)||null,c(y,g,x,S,null);Dd(y,x)}return null}function p(g,y,w,x){for(var S=null,A=null,P=y,E=y=0,R=null;P!==null&&E<w.length;E++){P.index>E?(R=P,P=null):R=P.sibling;var N=h(g,P,w[E],x);if(N===null){P===null&&(P=R);break}t&&P&&N.alternate===null&&e(g,P),y=s(N,y,E),A===null?S=N:A.sibling=N,A=N,P=R}if(E===w.length)return n(g,P),at&&xo(g,E),S;if(P===null){for(;E<w.length;E++)P=d(g,w[E],x),P!==null&&(y=s(P,y,E),A===null?S=P:A.sibling=P,A=P);return at&&xo(g,E),S}for(P=i(g,P);E<w.length;E++)R=f(P,g,E,w[E],x),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?E:R.key),y=s(R,y,E),A===null?S=R:A.sibling=R,A=R);return t&&P.forEach(function(T){return e(g,T)}),at&&xo(g,E),S}function m(g,y,w,x){var S=tu(w);if(typeof S!="function")throw Error(H(150));if(w=S.call(w),w==null)throw Error(H(151));for(var A=S=null,P=y,E=y=0,R=null,N=w.next();P!==null&&!N.done;E++,N=w.next()){P.index>E?(R=P,P=null):R=P.sibling;var T=h(g,P,N.value,x);if(T===null){P===null&&(P=R);break}t&&P&&T.alternate===null&&e(g,P),y=s(T,y,E),A===null?S=T:A.sibling=T,A=T,P=R}if(N.done)return n(g,P),at&&xo(g,E),S;if(P===null){for(;!N.done;E++,N=w.next())N=d(g,N.value,x),N!==null&&(y=s(N,y,E),A===null?S=N:A.sibling=N,A=N);return at&&xo(g,E),S}for(P=i(g,P);!N.done;E++,N=w.next())N=f(P,g,E,N.value,x),N!==null&&(t&&N.alternate!==null&&P.delete(N.key===null?E:N.key),y=s(N,y,E),A===null?S=N:A.sibling=N,A=N);return t&&P.forEach(function(B){return e(g,B)}),at&&xo(g,E),S}function v(g,y,w,x){if(typeof w=="object"&&w!==null&&w.type===Na&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case kd:e:{for(var S=w.key,A=y;A!==null;){if(A.key===S){if(S=w.type,S===Na){if(A.tag===7){n(g,A.sibling),y=r(A,w.props.children),y.return=g,g=y;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ys&&Bx(S)===A.type){n(g,A.sibling),y=r(A,w.props),y.ref=ou(g,A,w),y.return=g,g=y;break e}n(g,A);break}else e(g,A);A=A.sibling}w.type===Na?(y=zo(w.props.children,g.mode,x,w.key),y.return=g,g=y):(x=Nh(w.type,w.key,w.props,null,g.mode,x),x.ref=ou(g,y,w),x.return=g,g=x)}return o(g);case _a:e:{for(A=w.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(g,y.sibling),y=r(y,w.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=ig(w,g.mode,x),y.return=g,g=y}return o(g);case ys:return A=w._init,v(g,y,A(w._payload),x)}if(ku(w))return p(g,y,w,x);if(tu(w))return m(g,y,w,x);Dd(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(g,y.sibling),y=r(y,w),y.return=g,g=y):(n(g,y),y=ng(w,g.mode,x),y.return=g,g=y),o(g)):n(g,y)}return v}var kl=t2(!0),n2=t2(!1),nd={},fr=uo(nd),dc=uo(nd),hc=uo(nd);function Oo(t){if(t===nd)throw Error(H(174));return t}function sw(t,e){switch(qe(hc,e),qe(dc,t),qe(fr,nd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:S0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=S0(e,t)}st(fr),qe(fr,e)}function El(){st(fr),st(dc),st(hc)}function i2(t){Oo(hc.current);var e=Oo(fr.current),n=S0(e,t.type);e!==n&&(qe(dc,t),qe(fr,n))}function ow(t){dc.current===t&&(st(fr),st(dc))}var dt=uo(0);function wf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ym=[];function aw(){for(var t=0;t<Ym.length;t++)Ym[t]._workInProgressVersionPrimary=null;Ym.length=0}var Ph=ls.ReactCurrentDispatcher,Jm=ls.ReactCurrentBatchConfig,Go=0,pt=null,_t=null,Lt=null,xf=!1,Fu=!1,fc=0,WM=0;function qt(){throw Error(H(321))}function lw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ui(t[n],e[n]))return!1;return!0}function uw(t,e,n,i,r,s){if(Go=s,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ph.current=t===null||t.memoizedState===null?ZM:YM,t=n(i,r),Fu){s=0;do{if(Fu=!1,fc=0,25<=s)throw Error(H(301));s+=1,Lt=_t=null,e.updateQueue=null,Ph.current=JM,t=n(i,r)}while(Fu)}if(Ph.current=bf,e=_t!==null&&_t.next!==null,Go=0,Lt=_t=pt=null,xf=!1,e)throw Error(H(300));return t}function cw(){var t=fc!==0;return fc=0,t}function qi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?pt.memoizedState=Lt=t:Lt=Lt.next=t,Lt}function Si(){if(_t===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Lt===null?pt.memoizedState:Lt.next;if(e!==null)Lt=e,_t=t;else{if(t===null)throw Error(H(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Lt===null?pt.memoizedState=Lt=t:Lt=Lt.next=t}return Lt}function pc(t,e){return typeof e=="function"?e(t):e}function qm(t){var e=Si(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var i=_t,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Go&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,pt.lanes|=c,Xo|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Ui(i,e.memoizedState)||(On=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,pt.lanes|=s,Xo|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qm(t){var e=Si(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Ui(s,e.memoizedState)||(On=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function r2(){}function s2(t,e){var n=pt,i=Si(),r=e(),s=!Ui(i.memoizedState,r);if(s&&(i.memoizedState=r,On=!0),i=i.queue,dw(l2.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Lt!==null&&Lt.memoizedState.tag&1){if(n.flags|=2048,mc(9,a2.bind(null,n,i,r,e),void 0,null),Bt===null)throw Error(H(349));Go&30||o2(n,e,r)}return r}function o2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function a2(t,e,n,i){e.value=n,e.getSnapshot=i,u2(e)&&c2(t)}function l2(t,e,n){return n(function(){u2(e)&&c2(t)})}function u2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ui(t,n)}catch{return!0}}function c2(t){var e=es(t,1);e!==null&&Bi(e,t,1,-1)}function zx(t){var e=qi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:t},e.queue=t,t=t.dispatch=KM.bind(null,pt,t),[e.memoizedState,t]}function mc(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function d2(){return Si().memoizedState}function Rh(t,e,n,i){var r=qi();pt.flags|=t,r.memoizedState=mc(1|e,n,void 0,i===void 0?null:i)}function Dp(t,e,n,i){var r=Si();i=i===void 0?null:i;var s=void 0;if(_t!==null){var o=_t.memoizedState;if(s=o.destroy,i!==null&&lw(i,o.deps)){r.memoizedState=mc(e,n,s,i);return}}pt.flags|=t,r.memoizedState=mc(1|e,n,s,i)}function Fx(t,e){return Rh(8390656,8,t,e)}function dw(t,e){return Dp(2048,8,t,e)}function h2(t,e){return Dp(4,2,t,e)}function f2(t,e){return Dp(4,4,t,e)}function p2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function m2(t,e,n){return n=n!=null?n.concat([t]):null,Dp(4,4,p2.bind(null,e,t),n)}function hw(){}function g2(t,e){var n=Si();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&lw(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function y2(t,e){var n=Si();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&lw(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function v2(t,e,n){return Go&21?(Ui(n,e)||(n=bC(),pt.lanes|=n,Xo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,On=!0),t.memoizedState=n)}function GM(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var i=Jm.transition;Jm.transition={};try{t(!1),e()}finally{Ge=n,Jm.transition=i}}function w2(){return Si().memoizedState}function XM(t,e,n){var i=Ws(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},x2(t))b2(e,n);else if(n=JC(t,e,n,i),n!==null){var r=yn();Bi(n,t,i,r),S2(n,e,i)}}function KM(t,e,n){var i=Ws(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(x2(t))b2(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Ui(a,o)){var l=e.interleaved;l===null?(r.next=r,iw(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=JC(t,e,r,i),n!==null&&(r=yn(),Bi(n,t,i,r),S2(n,e,i))}}function x2(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function b2(t,e){Fu=xf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function S2(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Vv(t,n)}}var bf={readContext:bi,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},ZM={readContext:bi,useCallback:function(t,e){return qi().memoizedState=[t,e===void 0?null:e],t},useContext:bi,useEffect:Fx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rh(4194308,4,p2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rh(4,2,t,e)},useMemo:function(t,e){var n=qi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=qi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=XM.bind(null,pt,t),[i.memoizedState,t]},useRef:function(t){var e=qi();return t={current:t},e.memoizedState=t},useState:zx,useDebugValue:hw,useDeferredValue:function(t){return qi().memoizedState=t},useTransition:function(){var t=zx(!1),e=t[0];return t=GM.bind(null,t[1]),qi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=pt,r=qi();if(at){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Bt===null)throw Error(H(349));Go&30||o2(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Fx(l2.bind(null,i,s,t),[t]),i.flags|=2048,mc(9,a2.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=qi(),e=Bt.identifierPrefix;if(at){var n=Ur,i=jr;n=(i&~(1<<32-Ii(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=fc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YM={readContext:bi,useCallback:g2,useContext:bi,useEffect:dw,useImperativeHandle:m2,useInsertionEffect:h2,useLayoutEffect:f2,useMemo:y2,useReducer:qm,useRef:d2,useState:function(){return qm(pc)},useDebugValue:hw,useDeferredValue:function(t){var e=Si();return v2(e,_t.memoizedState,t)},useTransition:function(){var t=qm(pc)[0],e=Si().memoizedState;return[t,e]},useMutableSource:r2,useSyncExternalStore:s2,useId:w2,unstable_isNewReconciler:!1},JM={readContext:bi,useCallback:g2,useContext:bi,useEffect:dw,useImperativeHandle:m2,useInsertionEffect:h2,useLayoutEffect:f2,useMemo:y2,useReducer:Qm,useRef:d2,useState:function(){return Qm(pc)},useDebugValue:hw,useDeferredValue:function(t){var e=Si();return _t===null?e.memoizedState=t:v2(e,_t.memoizedState,t)},useTransition:function(){var t=Qm(pc)[0],e=Si().memoizedState;return[t,e]},useMutableSource:r2,useSyncExternalStore:s2,useId:w2,unstable_isNewReconciler:!1};function Cl(t,e){try{var n="",i=e;do n+=CN(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function eg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function W0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qM=typeof WeakMap=="function"?WeakMap:Map;function k2(t,e,n){n=Hr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){kf||(kf=!0,ty=i),W0(t,e)},n}function E2(t,e,n){n=Hr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){W0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){W0(t,e),typeof i!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jx(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new qM;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=hD.bind(null,t,e,n),e.then(t,t))}function Ux(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vx(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hr(-1,1),e.tag=2,Vs(n,e,1))),n.lanes|=1),t)}var QM=ls.ReactCurrentOwner,On=!1;function hn(t,e,n,i){e.child=t===null?n2(e,null,n,i):kl(e,t.child,n,i)}function Hx(t,e,n,i,r){n=n.render;var s=e.ref;return qa(e,r),i=uw(t,e,n,i,s,r),n=cw(),t!==null&&!On?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ts(t,e,r)):(at&&n&&Jv(e),e.flags|=1,hn(t,e,i,r),e.child)}function Wx(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!xw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,C2(t,e,s,i,r)):(t=Nh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ac,n(o,i)&&t.ref===e.ref)return ts(t,e,r)}return e.flags|=1,t=Gs(s,i),t.ref=e.ref,t.return=e,e.child=t}function C2(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ac(s,i)&&t.ref===e.ref)if(On=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(On=!0);else return e.lanes=t.lanes,ts(t,e,r)}return G0(t,e,n,i,r)}function A2(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Ua,Wn),Wn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(Ua,Wn),Wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,qe(Ua,Wn),Wn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,qe(Ua,Wn),Wn|=i;return hn(t,e,r,n),e.child}function P2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function G0(t,e,n,i,r){var s=Dn(n)?Ho:sn.current;return s=bl(e,s),qa(e,r),n=uw(t,e,n,i,s,r),i=cw(),t!==null&&!On?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ts(t,e,r)):(at&&i&&Jv(e),e.flags|=1,hn(t,e,n,r),e.child)}function Gx(t,e,n,i,r){if(Dn(n)){var s=!0;ff(e)}else s=!1;if(qa(e,r),e.stateNode===null)Th(t,e),e2(e,n,i),H0(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=bi(u):(u=Dn(n)?Ho:sn.current,u=bl(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Ix(e,o,i,u),vs=!1;var h=e.memoizedState;o.state=h,vf(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Mn.current||vs?(typeof c=="function"&&(V0(e,n,c,i),l=e.memoizedState),(a=vs||Lx(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,qC(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ai(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=bi(l):(l=Dn(n)?Ho:sn.current,l=bl(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Ix(e,o,i,l),vs=!1,h=e.memoizedState,o.state=h,vf(e,i,o,r);var p=e.memoizedState;a!==d||h!==p||Mn.current||vs?(typeof f=="function"&&(V0(e,n,f,i),p=e.memoizedState),(u=vs||Lx(e,n,u,i,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return X0(t,e,n,i,s,r)}function X0(t,e,n,i,r,s){P2(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&_x(e,n,!1),ts(t,e,s);i=e.stateNode,QM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=kl(e,t.child,null,s),e.child=kl(e,null,a,s)):hn(t,e,a,s),e.memoizedState=i.state,r&&_x(e,n,!0),e.child}function R2(t){var e=t.stateNode;e.pendingContext?Ox(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ox(t,e.context,!1),sw(t,e.containerInfo)}function Xx(t,e,n,i,r){return Sl(),Qv(r),e.flags|=256,hn(t,e,n,i),e.child}var K0={dehydrated:null,treeContext:null,retryLane:0};function Z0(t){return{baseLanes:t,cachePool:null,transitions:null}}function T2(t,e,n){var i=e.pendingProps,r=dt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),qe(dt,r&1),t===null)return j0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ip(o,i,0,null),t=zo(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Z0(n),e.memoizedState=K0,t):fw(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return eD(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Gs(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Gs(a,s):(s=zo(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Z0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=K0,i}return s=t.child,t=s.sibling,i=Gs(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function fw(t,e){return e=Ip({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $d(t,e,n,i){return i!==null&&Qv(i),kl(e,t.child,null,n),t=fw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eD(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=eg(Error(H(422))),$d(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ip({mode:"visible",children:i.children},r,0,null),s=zo(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&kl(e,t.child,null,o),e.child.memoizedState=Z0(o),e.memoizedState=K0,s);if(!(e.mode&1))return $d(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(H(419)),i=eg(s,i,void 0),$d(t,e,o,i)}if(a=(o&t.childLanes)!==0,On||a){if(i=Bt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,es(t,r),Bi(i,t,r,-1))}return ww(),i=eg(Error(H(421))),$d(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=fD.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Yn=Us(r.nextSibling),qn=e,at=!0,_i=null,t!==null&&(di[hi++]=jr,di[hi++]=Ur,di[hi++]=Wo,jr=t.id,Ur=t.overflow,Wo=e),e=fw(e,i.children),e.flags|=4096,e)}function Kx(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),U0(t.return,e,n)}function tg(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function O2(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(hn(t,e,i.children,n),i=dt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kx(t,n,e);else if(t.tag===19)Kx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(qe(dt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&wf(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),tg(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&wf(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}tg(e,!0,n,null,s);break;case"together":tg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Th(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ts(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Gs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tD(t,e,n){switch(e.tag){case 3:R2(e),Sl();break;case 5:i2(e);break;case 1:Dn(e.type)&&ff(e);break;case 4:sw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;qe(gf,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(qe(dt,dt.current&1),e.flags|=128,null):n&e.child.childLanes?T2(t,e,n):(qe(dt,dt.current&1),t=ts(t,e,n),t!==null?t.sibling:null);qe(dt,dt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return O2(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),qe(dt,dt.current),i)break;return null;case 22:case 23:return e.lanes=0,A2(t,e,n)}return ts(t,e,n)}var _2,Y0,N2,M2;_2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Y0=function(){};N2=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Oo(fr.current);var s=null;switch(n){case"input":r=v0(t,r),i=v0(t,i),s=[];break;case"select":r=gt({},r,{value:void 0}),i=gt({},i,{value:void 0}),s=[];break;case"textarea":r=b0(t,r),i=b0(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=df)}k0(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ec.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ec.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&et("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};M2=function(t,e,n,i){n!==i&&(e.flags|=4)};function au(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function nD(t,e,n){var i=e.pendingProps;switch(qv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return Dn(e.type)&&hf(),Qt(e),null;case 3:return i=e.stateNode,El(),st(Mn),st(sn),aw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Md(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_i!==null&&(ry(_i),_i=null))),Y0(t,e),Qt(e),null;case 5:ow(e);var r=Oo(hc.current);if(n=e.type,t!==null&&e.stateNode!=null)N2(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(H(166));return Qt(e),null}if(t=Oo(fr.current),Md(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[sr]=e,i[cc]=s,t=(e.mode&1)!==0,n){case"dialog":et("cancel",i),et("close",i);break;case"iframe":case"object":case"embed":et("load",i);break;case"video":case"audio":for(r=0;r<Cu.length;r++)et(Cu[r],i);break;case"source":et("error",i);break;case"img":case"image":case"link":et("error",i),et("load",i);break;case"details":et("toggle",i);break;case"input":ix(i,s),et("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},et("invalid",i);break;case"textarea":sx(i,s),et("invalid",i)}k0(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nd(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nd(i.textContent,a,t),r=["children",""+a]):ec.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&et("scroll",i)}switch(n){case"input":Ed(i),rx(i,s,!0);break;case"textarea":Ed(i),ox(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=df)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[sr]=e,t[cc]=i,_2(t,e,!1,!1),e.stateNode=t;e:{switch(o=E0(n,i),n){case"dialog":et("cancel",t),et("close",t),r=i;break;case"iframe":case"object":case"embed":et("load",t),r=i;break;case"video":case"audio":for(r=0;r<Cu.length;r++)et(Cu[r],t);r=i;break;case"source":et("error",t),r=i;break;case"img":case"image":case"link":et("error",t),et("load",t),r=i;break;case"details":et("toggle",t),r=i;break;case"input":ix(t,i),r=v0(t,i),et("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=gt({},i,{value:void 0}),et("invalid",t);break;case"textarea":sx(t,i),r=b0(t,i),et("invalid",t);break;default:r=i}k0(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?uC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&tc(t,l):typeof l=="number"&&tc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ec.hasOwnProperty(s)?l!=null&&s==="onScroll"&&et("scroll",t):l!=null&&Iv(t,s,l,o))}switch(n){case"input":Ed(t),rx(t,i,!1);break;case"textarea":Ed(t),ox(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ys(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Ka(t,!!i.multiple,s,!1):i.defaultValue!=null&&Ka(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=df)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)M2(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(H(166));if(n=Oo(hc.current),Oo(fr.current),Md(e)){if(i=e.stateNode,n=e.memoizedProps,i[sr]=e,(s=i.nodeValue!==n)&&(t=qn,t!==null))switch(t.tag){case 3:Nd(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nd(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[sr]=e,e.stateNode=i}return Qt(e),null;case 13:if(st(dt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&Yn!==null&&e.mode&1&&!(e.flags&128))YC(),Sl(),e.flags|=98560,s=!1;else if(s=Md(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[sr]=e}else Sl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),s=!1}else _i!==null&&(ry(_i),_i=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Dt===0&&(Dt=3):ww())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return El(),Y0(t,e),t===null&&lc(e.stateNode.containerInfo),Qt(e),null;case 10:return nw(e.type._context),Qt(e),null;case 17:return Dn(e.type)&&hf(),Qt(e),null;case 19:if(st(dt),s=e.memoizedState,s===null)return Qt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)au(s,!1);else{if(Dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wf(t),o!==null){for(e.flags|=128,au(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qe(dt,dt.current&1|2),e.child}t=t.sibling}s.tail!==null&&kt()>Al&&(e.flags|=128,i=!0,au(s,!1),e.lanes=4194304)}else{if(!i)if(t=wf(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),au(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!at)return Qt(e),null}else 2*kt()-s.renderingStartTime>Al&&n!==1073741824&&(e.flags|=128,i=!0,au(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=kt(),e.sibling=null,n=dt.current,qe(dt,i?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return vw(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Wn&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function iD(t,e){switch(qv(e),e.tag){case 1:return Dn(e.type)&&hf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return El(),st(Mn),st(sn),aw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ow(e),null;case 13:if(st(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Sl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return st(dt),null;case 4:return El(),null;case 10:return nw(e.type._context),null;case 22:case 23:return vw(),null;case 24:return null;default:return null}}var Ld=!1,nn=!1,rD=typeof WeakSet=="function"?WeakSet:Set,re=null;function ja(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){vt(t,e,i)}else n.current=null}function J0(t,e,n){try{n()}catch(i){vt(t,e,i)}}var Zx=!1;function sD(t,e){if(D0=lf,t=IC(),Yv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for($0={focusedElem:t,selectionRange:n},lf=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ai(e.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(x){vt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return p=Zx,Zx=!1,p}function ju(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&J0(e,n,s)}r=r.next}while(r!==i)}}function $p(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function q0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function D2(t){var e=t.alternate;e!==null&&(t.alternate=null,D2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sr],delete e[cc],delete e[B0],delete e[jM],delete e[UM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $2(t){return t.tag===5||t.tag===3||t.tag===4}function Yx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Q0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=df));else if(i!==4&&(t=t.child,t!==null))for(Q0(t,e,n),t=t.sibling;t!==null;)Q0(t,e,n),t=t.sibling}function ey(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ey(t,e,n),t=t.sibling;t!==null;)ey(t,e,n),t=t.sibling}var zt=null,Oi=!1;function hs(t,e,n){for(n=n.child;n!==null;)L2(t,e,n),n=n.sibling}function L2(t,e,n){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(Pp,n)}catch{}switch(n.tag){case 5:nn||ja(n,e);case 6:var i=zt,r=Oi;zt=null,hs(t,e,n),zt=i,Oi=r,zt!==null&&(Oi?(t=zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zt.removeChild(n.stateNode));break;case 18:zt!==null&&(Oi?(t=zt,n=n.stateNode,t.nodeType===8?Km(t.parentNode,n):t.nodeType===1&&Km(t,n),sc(t)):Km(zt,n.stateNode));break;case 4:i=zt,r=Oi,zt=n.stateNode.containerInfo,Oi=!0,hs(t,e,n),zt=i,Oi=r;break;case 0:case 11:case 14:case 15:if(!nn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&J0(n,e,o),r=r.next}while(r!==i)}hs(t,e,n);break;case 1:if(!nn&&(ja(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){vt(n,e,a)}hs(t,e,n);break;case 21:hs(t,e,n);break;case 22:n.mode&1?(nn=(i=nn)||n.memoizedState!==null,hs(t,e,n),nn=i):hs(t,e,n);break;default:hs(t,e,n)}}function Jx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rD),e.forEach(function(i){var r=pD.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ei(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:zt=a.stateNode,Oi=!1;break e;case 3:zt=a.stateNode.containerInfo,Oi=!0;break e;case 4:zt=a.stateNode.containerInfo,Oi=!0;break e}a=a.return}if(zt===null)throw Error(H(160));L2(s,o,r),zt=null,Oi=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){vt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)I2(e,t),e=e.sibling}function I2(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ei(e,t),Xi(t),i&4){try{ju(3,t,t.return),$p(3,t)}catch(m){vt(t,t.return,m)}try{ju(5,t,t.return)}catch(m){vt(t,t.return,m)}}break;case 1:Ei(e,t),Xi(t),i&512&&n!==null&&ja(n,n.return);break;case 5:if(Ei(e,t),Xi(t),i&512&&n!==null&&ja(n,n.return),t.flags&32){var r=t.stateNode;try{tc(r,"")}catch(m){vt(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&rC(r,s),E0(a,o);var u=E0(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?uC(r,d):c==="dangerouslySetInnerHTML"?aC(r,d):c==="children"?tc(r,d):Iv(r,c,d,u)}switch(a){case"input":w0(r,s);break;case"textarea":sC(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ka(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Ka(r,!!s.multiple,s.defaultValue,!0):Ka(r,!!s.multiple,s.multiple?[]:"",!1))}r[cc]=s}catch(m){vt(t,t.return,m)}}break;case 6:if(Ei(e,t),Xi(t),i&4){if(t.stateNode===null)throw Error(H(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){vt(t,t.return,m)}}break;case 3:if(Ei(e,t),Xi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{sc(e.containerInfo)}catch(m){vt(t,t.return,m)}break;case 4:Ei(e,t),Xi(t);break;case 13:Ei(e,t),Xi(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(gw=kt())),i&4&&Jx(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(nn=(u=nn)||c,Ei(e,t),nn=u):Ei(e,t),Xi(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(re=t,c=t.child;c!==null;){for(d=re=c;re!==null;){switch(h=re,f=h.child,h.tag){case 0:case 11:case 14:case 15:ju(4,h,h.return);break;case 1:ja(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){vt(i,n,m)}}break;case 5:ja(h,h.return);break;case 22:if(h.memoizedState!==null){Qx(d);continue}}f!==null?(f.return=h,re=f):Qx(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lC("display",o))}catch(m){vt(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){vt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ei(e,t),Xi(t),i&4&&Jx(t);break;case 21:break;default:Ei(e,t),Xi(t)}}function Xi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($2(n)){var i=n;break e}n=n.return}throw Error(H(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(tc(r,""),i.flags&=-33);var s=Yx(t);ey(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Yx(t);Q0(t,a,o);break;default:throw Error(H(161))}}catch(l){vt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oD(t,e,n){re=t,B2(t)}function B2(t,e,n){for(var i=(t.mode&1)!==0;re!==null;){var r=re,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Ld;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||nn;a=Ld;var u=nn;if(Ld=o,(nn=l)&&!u)for(re=r;re!==null;)o=re,l=o.child,o.tag===22&&o.memoizedState!==null?eb(r):l!==null?(l.return=o,re=l):eb(r);for(;s!==null;)re=s,B2(s),s=s.sibling;re=r,Ld=a,nn=u}qx(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,re=s):qx(t)}}function qx(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nn||$p(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!nn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Ai(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&$x(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$x(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&sc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}nn||e.flags&512&&q0(e)}catch(h){vt(e,e.return,h)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Qx(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function eb(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$p(4,e)}catch(l){vt(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){vt(e,r,l)}}var s=e.return;try{q0(e)}catch(l){vt(e,s,l)}break;case 5:var o=e.return;try{q0(e)}catch(l){vt(e,o,l)}}}catch(l){vt(e,e.return,l)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var aD=Math.ceil,Sf=ls.ReactCurrentDispatcher,pw=ls.ReactCurrentOwner,vi=ls.ReactCurrentBatchConfig,Fe=0,Bt=null,Pt=null,Kt=0,Wn=0,Ua=uo(0),Dt=0,gc=null,Xo=0,Lp=0,mw=0,Uu=null,Rn=null,gw=0,Al=1/0,Er=null,kf=!1,ty=null,Hs=null,Id=!1,Ds=null,Ef=0,Vu=0,ny=null,Oh=-1,_h=0;function yn(){return Fe&6?kt():Oh!==-1?Oh:Oh=kt()}function Ws(t){return t.mode&1?Fe&2&&Kt!==0?Kt&-Kt:HM.transition!==null?(_h===0&&(_h=bC()),_h):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:RC(t.type)),t):1}function Bi(t,e,n,i){if(50<Vu)throw Vu=0,ny=null,Error(H(185));Qc(t,n,i),(!(Fe&2)||t!==Bt)&&(t===Bt&&(!(Fe&2)&&(Lp|=n),Dt===4&&Cs(t,Kt)),$n(t,i),n===1&&Fe===0&&!(e.mode&1)&&(Al=kt()+500,Np&&co()))}function $n(t,e){var n=t.callbackNode;HN(t,e);var i=af(t,t===Bt?Kt:0);if(i===0)n!==null&&ux(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&ux(n),e===1)t.tag===0?VM(tb.bind(null,t)):XC(tb.bind(null,t)),zM(function(){!(Fe&6)&&co()}),n=null;else{switch(SC(i)){case 1:n=Uv;break;case 4:n=wC;break;case 16:n=of;break;case 536870912:n=xC;break;default:n=of}n=G2(n,z2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function z2(t,e){if(Oh=-1,_h=0,Fe&6)throw Error(H(327));var n=t.callbackNode;if(Qa()&&t.callbackNode!==n)return null;var i=af(t,t===Bt?Kt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Cf(t,i);else{e=i;var r=Fe;Fe|=2;var s=j2();(Bt!==t||Kt!==e)&&(Er=null,Al=kt()+500,Bo(t,e));do try{cD();break}catch(a){F2(t,a)}while(1);tw(),Sf.current=s,Fe=r,Pt!==null?e=0:(Bt=null,Kt=0,e=Dt)}if(e!==0){if(e===2&&(r=T0(t),r!==0&&(i=r,e=iy(t,r))),e===1)throw n=gc,Bo(t,0),Cs(t,i),$n(t,kt()),n;if(e===6)Cs(t,i);else{if(r=t.current.alternate,!(i&30)&&!lD(r)&&(e=Cf(t,i),e===2&&(s=T0(t),s!==0&&(i=s,e=iy(t,s))),e===1))throw n=gc,Bo(t,0),Cs(t,i),$n(t,kt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(H(345));case 2:bo(t,Rn,Er);break;case 3:if(Cs(t,i),(i&130023424)===i&&(e=gw+500-kt(),10<e)){if(af(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){yn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=I0(bo.bind(null,t,Rn,Er),e);break}bo(t,Rn,Er);break;case 4:if(Cs(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ii(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*aD(i/1960))-i,10<i){t.timeoutHandle=I0(bo.bind(null,t,Rn,Er),i);break}bo(t,Rn,Er);break;case 5:bo(t,Rn,Er);break;default:throw Error(H(329))}}}return $n(t,kt()),t.callbackNode===n?z2.bind(null,t):null}function iy(t,e){var n=Uu;return t.current.memoizedState.isDehydrated&&(Bo(t,e).flags|=256),t=Cf(t,e),t!==2&&(e=Rn,Rn=n,e!==null&&ry(e)),t}function ry(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function lD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ui(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cs(t,e){for(e&=~mw,e&=~Lp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ii(e),i=1<<n;t[n]=-1,e&=~i}}function tb(t){if(Fe&6)throw Error(H(327));Qa();var e=af(t,0);if(!(e&1))return $n(t,kt()),null;var n=Cf(t,e);if(t.tag!==0&&n===2){var i=T0(t);i!==0&&(e=i,n=iy(t,i))}if(n===1)throw n=gc,Bo(t,0),Cs(t,e),$n(t,kt()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bo(t,Rn,Er),$n(t,kt()),null}function yw(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&(Al=kt()+500,Np&&co())}}function Ko(t){Ds!==null&&Ds.tag===0&&!(Fe&6)&&Qa();var e=Fe;Fe|=1;var n=vi.transition,i=Ge;try{if(vi.transition=null,Ge=1,t)return t()}finally{Ge=i,vi.transition=n,Fe=e,!(Fe&6)&&co()}}function vw(){Wn=Ua.current,st(Ua)}function Bo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BM(n)),Pt!==null)for(n=Pt.return;n!==null;){var i=n;switch(qv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&hf();break;case 3:El(),st(Mn),st(sn),aw();break;case 5:ow(i);break;case 4:El();break;case 13:st(dt);break;case 19:st(dt);break;case 10:nw(i.type._context);break;case 22:case 23:vw()}n=n.return}if(Bt=t,Pt=t=Gs(t.current,null),Kt=Wn=e,Dt=0,gc=null,mw=Lp=Xo=0,Rn=Uu=null,To!==null){for(e=0;e<To.length;e++)if(n=To[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}To=null}return t}function F2(t,e){do{var n=Pt;try{if(tw(),Ph.current=bf,xf){for(var i=pt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}xf=!1}if(Go=0,Lt=_t=pt=null,Fu=!1,fc=0,pw.current=null,n===null||n.return===null){Dt=1,gc=e,Pt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Ux(o);if(f!==null){f.flags&=-257,Vx(f,o,a,s,e),f.mode&1&&jx(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){jx(s,u,e),ww();break e}l=Error(H(426))}}else if(at&&a.mode&1){var v=Ux(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Vx(v,o,a,s,e),Qv(Cl(l,a));break e}}s=l=Cl(l,a),Dt!==4&&(Dt=2),Uu===null?Uu=[s]:Uu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=k2(s,l,e);Dx(s,g);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Hs===null||!Hs.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=E2(s,a,e);Dx(s,x);break e}}s=s.return}while(s!==null)}V2(n)}catch(S){e=S,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(1)}function j2(){var t=Sf.current;return Sf.current=bf,t===null?bf:t}function ww(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Bt===null||!(Xo&268435455)&&!(Lp&268435455)||Cs(Bt,Kt)}function Cf(t,e){var n=Fe;Fe|=2;var i=j2();(Bt!==t||Kt!==e)&&(Er=null,Bo(t,e));do try{uD();break}catch(r){F2(t,r)}while(1);if(tw(),Fe=n,Sf.current=i,Pt!==null)throw Error(H(261));return Bt=null,Kt=0,Dt}function uD(){for(;Pt!==null;)U2(Pt)}function cD(){for(;Pt!==null&&!$N();)U2(Pt)}function U2(t){var e=W2(t.alternate,t,Wn);t.memoizedProps=t.pendingProps,e===null?V2(t):Pt=e,pw.current=null}function V2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iD(n,e),n!==null){n.flags&=32767,Pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Dt=6,Pt=null;return}}else if(n=nD(n,e,Wn),n!==null){Pt=n;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);Dt===0&&(Dt=5)}function bo(t,e,n){var i=Ge,r=vi.transition;try{vi.transition=null,Ge=1,dD(t,e,n,i)}finally{vi.transition=r,Ge=i}return null}function dD(t,e,n,i){do Qa();while(Ds!==null);if(Fe&6)throw Error(H(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(WN(t,s),t===Bt&&(Pt=Bt=null,Kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Id||(Id=!0,G2(of,function(){return Qa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vi.transition,vi.transition=null;var o=Ge;Ge=1;var a=Fe;Fe|=4,pw.current=null,sD(t,n),I2(n,t),_M($0),lf=!!D0,$0=D0=null,t.current=n,oD(n),LN(),Fe=a,Ge=o,vi.transition=s}else t.current=n;if(Id&&(Id=!1,Ds=t,Ef=r),s=t.pendingLanes,s===0&&(Hs=null),zN(n.stateNode),$n(t,kt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(kf)throw kf=!1,t=ty,ty=null,t;return Ef&1&&t.tag!==0&&Qa(),s=t.pendingLanes,s&1?t===ny?Vu++:(Vu=0,ny=t):Vu=0,co(),null}function Qa(){if(Ds!==null){var t=SC(Ef),e=vi.transition,n=Ge;try{if(vi.transition=null,Ge=16>t?16:t,Ds===null)var i=!1;else{if(t=Ds,Ds=null,Ef=0,Fe&6)throw Error(H(331));var r=Fe;for(Fe|=4,re=t.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(re=u;re!==null;){var c=re;switch(c.tag){case 0:case 11:case 15:ju(8,c,s)}var d=c.child;if(d!==null)d.return=c,re=d;else for(;re!==null;){c=re;var h=c.sibling,f=c.return;if(D2(c),c===u){re=null;break}if(h!==null){h.return=f,re=h;break}re=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ju(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,re=g;break e}re=s.return}}var y=t.current;for(re=y;re!==null;){o=re;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,re=w;else e:for(o=y;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$p(9,a)}}catch(S){vt(a,a.return,S)}if(a===o){re=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,re=x;break e}re=a.return}}if(Fe=r,co(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(Pp,t)}catch{}i=!0}return i}finally{Ge=n,vi.transition=e}}return!1}function nb(t,e,n){e=Cl(n,e),e=k2(t,e,1),t=Vs(t,e,1),e=yn(),t!==null&&(Qc(t,1,e),$n(t,e))}function vt(t,e,n){if(t.tag===3)nb(t,t,n);else for(;e!==null;){if(e.tag===3){nb(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Hs===null||!Hs.has(i))){t=Cl(n,t),t=E2(e,t,1),e=Vs(e,t,1),t=yn(),e!==null&&(Qc(e,1,t),$n(e,t));break}}e=e.return}}function hD(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&(Kt&n)===n&&(Dt===4||Dt===3&&(Kt&130023424)===Kt&&500>kt()-gw?Bo(t,0):mw|=n),$n(t,e)}function H2(t,e){e===0&&(t.mode&1?(e=Pd,Pd<<=1,!(Pd&130023424)&&(Pd=4194304)):e=1);var n=yn();t=es(t,e),t!==null&&(Qc(t,e,n),$n(t,n))}function fD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),H2(t,n)}function pD(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(H(314))}i!==null&&i.delete(e),H2(t,n)}var W2;W2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mn.current)On=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return On=!1,tD(t,e,n);On=!!(t.flags&131072)}else On=!1,at&&e.flags&1048576&&KC(e,mf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Th(t,e),t=e.pendingProps;var r=bl(e,sn.current);qa(e,n),r=uw(null,e,i,t,r,n);var s=cw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(i)?(s=!0,ff(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,rw(e),r.updater=Mp,e.stateNode=r,r._reactInternals=e,H0(e,i,t,n),e=X0(null,e,i,!0,s,n)):(e.tag=0,at&&s&&Jv(e),hn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Th(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=gD(i),t=Ai(i,t),r){case 0:e=G0(null,e,i,t,n);break e;case 1:e=Gx(null,e,i,t,n);break e;case 11:e=Hx(null,e,i,t,n);break e;case 14:e=Wx(null,e,i,Ai(i.type,t),n);break e}throw Error(H(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ai(i,r),G0(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ai(i,r),Gx(t,e,i,r,n);case 3:e:{if(R2(e),t===null)throw Error(H(387));i=e.pendingProps,s=e.memoizedState,r=s.element,qC(t,e),vf(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Cl(Error(H(423)),e),e=Xx(t,e,i,n,r);break e}else if(i!==r){r=Cl(Error(H(424)),e),e=Xx(t,e,i,n,r);break e}else for(Yn=Us(e.stateNode.containerInfo.firstChild),qn=e,at=!0,_i=null,n=n2(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sl(),i===r){e=ts(t,e,n);break e}hn(t,e,i,n)}e=e.child}return e;case 5:return i2(e),t===null&&j0(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,L0(i,r)?o=null:s!==null&&L0(i,s)&&(e.flags|=32),P2(t,e),hn(t,e,o,n),e.child;case 6:return t===null&&j0(e),null;case 13:return T2(t,e,n);case 4:return sw(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=kl(e,null,i,n):hn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ai(i,r),Hx(t,e,i,r,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,qe(gf,i._currentValue),i._currentValue=o,s!==null)if(Ui(s.value,o)){if(s.children===r.children&&!Mn.current){e=ts(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Hr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),U0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),U0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,qa(e,n),r=bi(r),i=i(r),e.flags|=1,hn(t,e,i,n),e.child;case 14:return i=e.type,r=Ai(i,e.pendingProps),r=Ai(i.type,r),Wx(t,e,i,r,n);case 15:return C2(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ai(i,r),Th(t,e),e.tag=1,Dn(i)?(t=!0,ff(e)):t=!1,qa(e,n),e2(e,i,r),H0(e,i,r,n),X0(null,e,i,!0,t,n);case 19:return O2(t,e,n);case 22:return A2(t,e,n)}throw Error(H(156,e.tag))};function G2(t,e){return vC(t,e)}function mD(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(t,e,n,i){return new mD(t,e,n,i)}function xw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gD(t){if(typeof t=="function")return xw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zv)return 11;if(t===Fv)return 14}return 2}function Gs(t,e){var n=t.alternate;return n===null?(n=mi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nh(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")xw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Na:return zo(n.children,r,s,e);case Bv:o=8,r|=8;break;case p0:return t=mi(12,n,e,r|2),t.elementType=p0,t.lanes=s,t;case m0:return t=mi(13,n,e,r),t.elementType=m0,t.lanes=s,t;case g0:return t=mi(19,n,e,r),t.elementType=g0,t.lanes=s,t;case tC:return Ip(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QE:o=10;break e;case eC:o=9;break e;case zv:o=11;break e;case Fv:o=14;break e;case ys:o=16,i=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=mi(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function zo(t,e,n,i){return t=mi(7,t,i,e),t.lanes=n,t}function Ip(t,e,n,i){return t=mi(22,t,i,e),t.elementType=tC,t.lanes=n,t.stateNode={isHidden:!1},t}function ng(t,e,n){return t=mi(6,t,null,e),t.lanes=n,t}function ig(t,e,n){return e=mi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yD(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Im(0),this.expirationTimes=Im(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Im(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function bw(t,e,n,i,r,s,o,a,l){return t=new yD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rw(s),t}function vD(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_a,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function X2(t){if(!t)return Js;t=t._reactInternals;e:{if(aa(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Dn(n))return GC(t,n,e)}return e}function K2(t,e,n,i,r,s,o,a,l){return t=bw(n,i,!0,t,r,s,o,a,l),t.context=X2(null),n=t.current,i=yn(),r=Ws(n),s=Hr(i,r),s.callback=e??null,Vs(n,s,r),t.current.lanes=r,Qc(t,r,i),$n(t,i),t}function Bp(t,e,n,i){var r=e.current,s=yn(),o=Ws(r);return n=X2(n),e.context===null?e.context=n:e.pendingContext=n,e=Hr(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Vs(r,e,o),t!==null&&(Bi(t,r,o,s),Ah(t,r,o)),o}function Af(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ib(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sw(t,e){ib(t,e),(t=t.alternate)&&ib(t,e)}function wD(){return null}var Z2=typeof reportError=="function"?reportError:function(t){console.error(t)};function kw(t){this._internalRoot=t}zp.prototype.render=kw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Bp(t,e,null,null)};zp.prototype.unmount=kw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ko(function(){Bp(null,t,null,null)}),e[Qr]=null}};function zp(t){this._internalRoot=t}zp.prototype.unstable_scheduleHydration=function(t){if(t){var e=CC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Es.length&&e!==0&&e<Es[n].priority;n++);Es.splice(n,0,t),n===0&&PC(t)}};function Ew(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rb(){}function xD(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Af(o);s.call(u)}}var o=K2(e,i,t,0,null,!1,!1,"",rb);return t._reactRootContainer=o,t[Qr]=o.current,lc(t.nodeType===8?t.parentNode:t),Ko(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Af(l);a.call(u)}}var l=bw(t,0,!1,null,null,!1,!1,"",rb);return t._reactRootContainer=l,t[Qr]=l.current,lc(t.nodeType===8?t.parentNode:t),Ko(function(){Bp(e,l,n,i)}),l}function jp(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Af(o);a.call(l)}}Bp(e,o,t,r)}else o=xD(n,e,t,r,i);return Af(o)}kC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Eu(e.pendingLanes);n!==0&&(Vv(e,n|1),$n(e,kt()),!(Fe&6)&&(Al=kt()+500,co()))}break;case 13:Ko(function(){var i=es(t,1);if(i!==null){var r=yn();Bi(i,t,1,r)}}),Sw(t,1)}};Hv=function(t){if(t.tag===13){var e=es(t,134217728);if(e!==null){var n=yn();Bi(e,t,134217728,n)}Sw(t,134217728)}};EC=function(t){if(t.tag===13){var e=Ws(t),n=es(t,e);if(n!==null){var i=yn();Bi(n,t,e,i)}Sw(t,e)}};CC=function(){return Ge};AC=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};A0=function(t,e,n){switch(e){case"input":if(w0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=_p(i);if(!r)throw Error(H(90));iC(i),w0(i,r)}}}break;case"textarea":sC(t,n);break;case"select":e=n.value,e!=null&&Ka(t,!!n.multiple,e,!1)}};hC=yw;fC=Ko;var bD={usingClientEntryPoint:!1,Events:[td,La,_p,cC,dC,yw]},lu={findFiberByHostInstance:Ro,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},SD={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gC(t),t===null?null:t.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||wD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bd.isDisabled&&Bd.supportsFiber)try{Pp=Bd.inject(SD),hr=Bd}catch{}}ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bD;ei.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ew(e))throw Error(H(200));return vD(t,e,null,n)};ei.createRoot=function(t,e){if(!Ew(t))throw Error(H(299));var n=!1,i="",r=Z2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=bw(t,1,!1,null,null,n,!1,i,r),t[Qr]=e.current,lc(t.nodeType===8?t.parentNode:t),new kw(e)};ei.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=gC(e),t=t===null?null:t.stateNode,t};ei.flushSync=function(t){return Ko(t)};ei.hydrate=function(t,e,n){if(!Fp(e))throw Error(H(200));return jp(null,t,e,!0,n)};ei.hydrateRoot=function(t,e,n){if(!Ew(t))throw Error(H(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Z2;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=K2(e,null,t,1,n??null,r,!1,s,o),t[Qr]=e.current,lc(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new zp(e)};ei.render=function(t,e,n){if(!Fp(e))throw Error(H(200));return jp(null,t,e,!1,n)};ei.unmountComponentAtNode=function(t){if(!Fp(t))throw Error(H(40));return t._reactRootContainer?(Ko(function(){jp(null,null,t,!1,function(){t._reactRootContainer=null,t[Qr]=null})}),!0):!1};ei.unstable_batchedUpdates=yw;ei.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Fp(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return jp(t,e,n,!1,i)};ei.version="18.2.0-next-9e3b772b8-20220608";function Y2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y2)}catch(t){console.error(t)}}Y2(),KE.exports=ei;var la=KE.exports;const J2=Jc(la);var sb=la;h0.createRoot=sb.createRoot,h0.hydrateRoot=sb.hydrateRoot;function kD(t,{insertAt:e}={}){if(!t||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}kD(`[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 6px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:-3px;margin-right:4px}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:-1px}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:auto;border:none;cursor:pointer;outline:none;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:auto}[data-sonner-toast] [data-cancel]{color:var(--color);background:var(--border-color)}[data-sonner-toast] [data-close-button]{position:absolute;left:0;top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:translate(-35%,-35%);border-radius:50%;opacity:0;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]{opacity:1}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}
`);var ED=t=>{switch(t){case"success":return PD;case"error":return RD;default:return null}},CD=Array(12).fill(0),AD=({visible:t})=>q.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},q.createElement("div",{className:"sonner-spinner"},CD.map((e,n)=>q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),PD=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),RD=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sy=0,TD=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...i}=t,r=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:sy++;return this.toasts.find(s=>s.id===r)?this.toasts=this.toasts.map(s=>s.id===r?(this.publish({...s,...t,id:r,title:n}),{...s,...t,id:r,title:n}):s):this.addToast({title:n,...i,id:r}),r},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.promise=(t,e)=>{let n=this.create({...e,promise:t,type:"loading",message:e.loading});return(t instanceof Promise?t:t()).then(i=>{let r=typeof e.success=="function"?e.success(i):e.success;this.create({id:n,type:"success",message:r})}).catch(i=>{let r=typeof e.error=="function"?e.error(i):e.error;this.create({id:n,type:"error",message:r})}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||sy++;this.publish({jsx:t(n),id:n,...e})},this.subscribers=[],this.toasts=[]}},ws=new TD,OD=(t,e)=>{let n=(e==null?void 0:e.id)||sy++;return ws.addToast({title:t,...e,id:n}),n},_D=OD,Up=Object.assign(_D,{success:ws.success,error:ws.error,custom:ws.custom,message:ws.message,promise:ws.promise,dismiss:ws.dismiss}),ND=3,MD="32px",DD=4e3,$D=356,q2=14,LD=20,ID=200,BD=t=>{let{invert:e,toast:n,interacting:i,setHeights:r,visibleToasts:s,heights:o,index:a,toasts:l,expanded:u,removeToast:c,closeButton:d,style:h,className:f="",descriptionClassName:p="",duration:m,position:v,expandByDefault:g}=t,[y,w]=q.useState(!1),[x,S]=q.useState(!1),[A,P]=q.useState(!1),[E,R]=q.useState(!1),[N,T]=q.useState(0),[B,I]=q.useState(0),_=q.useRef(null),D=a===0,z=a+1<=s,L=n.type,O=n.className||"",$=n.descriptionClassName||"",F=q.useMemo(()=>o.findIndex(se=>se.toastId===n.id)||0,[o,n.id]),Y=q.useMemo(()=>n.duration||m||DD,[n.duration,m]),ie=q.useRef(0),ce=q.useRef(0),we=q.useRef(Y),Se=q.useRef(0),xe=q.useRef(null),[Q,ye]=v.split("-"),Ne=q.useMemo(()=>o.reduce((se,Te,xt)=>xt>=F?se:se+Te.height,0),[o,F]),Ee=n.invert||e,ke=L==="loading";ce.current=q.useMemo(()=>F*q2+Ne,[F,Ne]),q.useEffect(()=>{w(!0)},[]),q.useLayoutEffect(()=>{if(!y)return;let se=_.current,Te=se.style.height;se.style.height="auto";let xt=se.getBoundingClientRect().height;se.style.height=Te,I(xt),r(ln=>ln.find(Bn=>Bn.toastId===n.id)?ln.map(Bn=>Bn.toastId===n.id?{...Bn,height:xt}:Bn):[{toastId:n.id,height:xt},...ln])},[y,n.title,n.description,r,n.id]);let be=q.useCallback(()=>{S(!0),T(ce.current),r(se=>se.filter(Te=>Te.toastId!==n.id)),setTimeout(()=>{c(n)},ID)},[n,c,r,ce]);return q.useEffect(()=>{if(n.promise&&L==="loading"||n.duration===1/0)return;let se;return u||i?(()=>{if(Se.current<ie.current){let Te=new Date().getTime()-ie.current;we.current=we.current-Te}Se.current=new Date().getTime()})():(ie.current=new Date().getTime(),se=setTimeout(()=>{var Te;(Te=n.onAutoClose)==null||Te.call(n,n),be()},we.current)),()=>clearTimeout(se)},[u,i,g,n,Y,be,n.promise,L]),q.useEffect(()=>{let se=_.current;if(se){let Te=se.getBoundingClientRect().height;return I(Te),r(xt=>[{toastId:n.id,height:Te},...xt]),()=>r(xt=>xt.filter(ln=>ln.toastId!==n.id))}},[r,n.id]),q.useEffect(()=>{n.delete&&be()},[be,n.delete]),q.createElement("li",{"aria-live":n.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:_,className:f+" "+O,"data-sonner-toast":"","data-styled":!n.jsx,"data-mounted":y,"data-promise":!!n.promise,"data-removed":x,"data-visible":z,"data-y-position":Q,"data-x-position":ye,"data-index":a,"data-front":D,"data-swiping":A,"data-type":L,"data-invert":Ee,"data-swipe-out":E,"data-expanded":!!(u||g&&y),style:{"--index":a,"--toasts-before":a,"--z-index":l.length-a,"--offset":`${x?N:ce.current}px`,"--initial-height":g?"auto":`${B}px`,...h,...n.style},onPointerDown:se=>{ke||(T(ce.current),se.target.setPointerCapture(se.pointerId),se.target.tagName!=="BUTTON"&&(P(!0),xe.current={x:se.clientX,y:se.clientY}))},onPointerUp:()=>{var se,Te,xt;if(E)return;xe.current=null;let ln=Number(((se=_.current)==null?void 0:se.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(ln)>=LD){T(ce.current),(Te=n.onDismiss)==null||Te.call(n,n),be(),R(!0);return}(xt=_.current)==null||xt.style.setProperty("--swipe-amount","0px"),P(!1)},onPointerMove:se=>{var Te;if(!xe.current)return;let xt=se.clientY-xe.current.y,ln=se.clientX-xe.current.x,Bn=(Q==="top"?Math.min:Math.max)(0,xt),xd=se.pointerType==="touch"?10:2;Math.abs(Bn)>xd?(Te=_.current)==null||Te.style.setProperty("--swipe-amount",`${xt}px`):Math.abs(ln)>xd&&(xe.current=null)}},d&&!n.jsx?q.createElement("button",{"aria-label":"Close toast","data-disabled":ke,"data-close-button":!0,onClick:ke?void 0:()=>{var se;be(),(se=n.onDismiss)==null||se.call(n,n)}},q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,n.jsx||q.isValidElement(n.title)?n.jsx||n.title:q.createElement(q.Fragment,null,L||n.icon||n.promise?q.createElement("div",{"data-icon":""},n.promise?q.createElement(AD,{visible:L==="loading"}):null,n.icon||ED(L)):null,q.createElement("div",{"data-content":""},q.createElement("div",{"data-title":""},n.title),n.description?q.createElement("div",{"data-description":"",className:p+$},n.description):null),n.cancel?q.createElement("button",{"data-button":!0,"data-cancel":!0,onClick:()=>{var se;be(),(se=n.cancel)!=null&&se.onClick&&n.cancel.onClick()}},n.cancel.label):null,n.action?q.createElement("button",{"data-button":"",onClick:se=>{var Te;(Te=n.action)==null||Te.onClick(se),!se.defaultPrevented&&be()}},n.action.label):null))},zD=t=>{var e;let{invert:n,position:i="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,theme:u="light",richColors:c,duration:d,style:h,visibleToasts:f=ND,toastOptions:p}=t,[m,v]=q.useState([]),[g,y]=q.useState([]),[w,x]=q.useState(!1),[S,A]=q.useState(!1),[P,E]=q.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),[R,N]=i.split("-"),T=q.useRef(null),B=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=q.useCallback(_=>v(D=>D.filter(({id:z})=>z!==_.id)),[]);return q.useEffect(()=>ws.subscribe(_=>{if(_.dismiss){v(D=>D.map(z=>z.id===_.id?{...z,delete:!0}:z));return}setTimeout(()=>{J2.flushSync(()=>{v(D=>{let z=D.findIndex(L=>L.id===_.id);return z!==-1?[...D.slice(0,z),{...D[z],..._},...D.slice(z+1)]:[_,...D]})})})}),[]),q.useEffect(()=>{if(u!=="system"){E(u);return}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:_})=>{E(_?"dark":"light")})},[u]),q.useEffect(()=>{m.length<=1&&x(!1)},[m]),q.useEffect(()=>{let _=D=>{var z,L;r.every(O=>D[O]||D.code===O)&&(x(!0),(z=T.current)==null||z.focus()),D.code==="Escape"&&(document.activeElement===T.current||(L=T.current)!=null&&L.contains(document.activeElement))&&x(!1)};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),m.length?q.createElement("section",{"aria-label":`Notifications ${B}`,tabIndex:-1},q.createElement("ol",{tabIndex:-1,ref:T,className:a,"data-sonner-toaster":!0,"data-theme":P,"data-rich-colors":c,"data-y-position":R,"data-x-position":N,style:{"--front-toast-height":`${(e=g[0])==null?void 0:e.height}px`,"--offset":typeof l=="number"?`${l}px`:l||MD,"--width":`${$D}px`,"--gap":`${q2}px`,...h},onMouseEnter:()=>x(!0),onMouseMove:()=>x(!0),onMouseLeave:()=>{S||x(!1)},onPointerDown:()=>{A(!0)},onPointerUp:()=>A(!1)},m.map((_,D)=>q.createElement(BD,{key:_.id,index:D,toast:_,duration:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:f,closeButton:o,interacting:S,position:i,style:p==null?void 0:p.style,removeToast:I,toasts:m,heights:g,setHeights:y,expandByDefault:s,expanded:w})))):null};let FD=0;function de(t,e){const n=`atom${++FD}`,i={toString:()=>n};return typeof t=="function"?i.read=t:(i.init=t,i.read=r=>r(i),i.write=(r,s,o)=>s(i,typeof o=="function"?o(r(i)):o)),e&&(i.write=e),i}const ob=t=>"init"in t,ab=t=>!!t.write,Pf=new WeakMap,jD=(t,e)=>{Pf.set(t,e),t.catch(()=>{}).finally(()=>Pf.delete(t))},lb=(t,e)=>{const n=Pf.get(t);n&&(Pf.delete(t),n(e))},ub=(t,e)=>{t.status="fulfilled",t.value=e},cb=(t,e)=>{t.status="rejected",t.reason=e},UD=t=>typeof(t==null?void 0:t.then)=="function",zd=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),db=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),uu=t=>"v"in t&&t.v instanceof Promise,VD=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Fd=t=>{if("e"in t)throw t.e;return t.v},Cw=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let i,r;const s=E=>t.get(E),o=(E,R)=>{const N=t.get(E);if(t.set(E,R),n.has(E)||n.set(E,N),N&&uu(N)){const T="v"in R?R.v instanceof Promise?R.v:Promise.resolve(R.v):Promise.reject(R.e);lb(N.v,T)}},a=(E,R,N)=>{const T=new Map;let B=!1;N.forEach((I,_)=>{!I&&_===E&&(I=R),I&&(T.set(_,I),R.d.get(_)!==I&&(B=!0))}),(B||R.d.size!==T.size)&&(R.d=T)},l=(E,R,N)=>{const T=s(E),B={d:(T==null?void 0:T.d)||new Map,v:R};if(N&&a(E,B,N),T&&zd(T,B)&&T.d===B.d)return T;if(T&&uu(T)&&uu(B)&&VD(T,B)){if(T.d===B.d)return T;B.v=T.v}return o(E,B),B},u=(E,R,N,T)=>{if(UD(R)){let B;const I=new Promise((_,D)=>{let z=!1;R.then(L=>{if(!z){z=!0;const O=s(E),$=l(E,I,N);ub(I,L),_(L),(O==null?void 0:O.d)!==$.d&&S(E,$,O==null?void 0:O.d)}},L=>{if(!z){z=!0;const O=s(E),$=l(E,I,N);cb(I,L),D(L),(O==null?void 0:O.d)!==$.d&&S(E,$,O==null?void 0:O.d)}}),B=L=>{z||(z=!0,L.then(O=>ub(I,O),O=>cb(I,O)),_(L))}});return I.orig=R,I.status="pending",jD(I,_=>{_&&B(_),T==null||T()}),l(E,I,N)}return l(E,R,N)},c=(E,R,N)=>{const T=s(E),B={d:(T==null?void 0:T.d)||new Map,e:R};return N&&a(E,B,N),T&&db(T,B)&&T.d===B.d?T:(o(E,B),B)},d=(E,R)=>{const N=s(E);if(!R&&N&&(e.has(E)||Array.from(N.d).every(([L,O])=>L===E||d(L)===O)))return N;const T=new Map;let B=!0;const I=L=>{if(L===E){const $=s(L);if($)return T.set(L,$),Fd($);if(ob(L))return T.set(L,void 0),L.init;throw new Error("no atom init")}const O=d(L);return T.set(L,O),Fd(O)};let _,D;const z={get signal(){return _||(_=new AbortController),_.signal},get setSelf(){return!D&&ab(E)&&(D=(...L)=>{if(!B)return y(E,...L)}),D}};try{const L=E.read(I,z);return u(E,L,T,()=>_==null?void 0:_.abort())}catch(L){return c(E,L,T)}finally{B=!1}},h=E=>Fd(d(E)),f=E=>{let R=e.get(E);return R||(R=w(E)),R},p=(E,R)=>!R.l.size&&(!R.t.size||R.t.size===1&&R.t.has(E)),m=E=>{const R=e.get(E);R&&p(E,R)&&x(E)},v=E=>{const R=new Map,N=new WeakMap,T=I=>{const _=e.get(I);_==null||_.t.forEach(D=>{D!==I&&(R.set(D,(R.get(D)||new Set).add(I)),N.set(D,(N.get(D)||0)+1),T(D))})};T(E);const B=I=>{const _=e.get(I);_==null||_.t.forEach(D=>{var z;if(D!==I){let L=N.get(D);if(L&&N.set(D,--L),!L){let O=!!((z=R.get(D))!=null&&z.size);if(O){const $=s(D),F=d(D,!0);O=!$||!zd($,F)}O||R.forEach($=>$.delete(D))}B(D)}})};B(E)},g=(E,...R)=>{let N=!0;const T=_=>Fd(d(_)),B=(_,...D)=>{let z;if(_===E){if(!ob(_))throw new Error("atom not writable");const L=s(_),O=u(_,D[0]);(!L||!zd(L,O))&&v(_)}else z=g(_,...D);if(!N){const L=A()}return z},I=E.write(T,B,...R);return N=!1,I},y=(E,...R)=>{const N=g(E,...R),T=A();return N},w=(E,R)=>{var N;(N=s(E))==null||N.d.forEach((B,I)=>{const _=e.get(I);_?_.t.add(E):I!==E&&w(I,E)}),d(E);const T={t:new Set(R&&[R]),l:new Set};if(e.set(E,T),ab(E)&&E.onMount){const B=E.onMount((...I)=>y(E,...I));B&&(T.u=B)}return T},x=E=>{var R;const N=(R=e.get(E))==null?void 0:R.u;N&&N(),e.delete(E);const T=s(E);T&&(uu(T)&&lb(T.v),T.d.forEach((B,I)=>{if(I!==E){const _=e.get(I);_&&(_.t.delete(E),p(I,_)&&x(I))}}))},S=(E,R,N)=>{const T=new Set(R.d.keys());N==null||N.forEach((B,I)=>{if(T.has(I)){T.delete(I);return}const _=e.get(I);_&&(_.t.delete(E),p(I,_)&&x(I))}),T.forEach(B=>{const I=e.get(B);I?I.t.add(E):e.has(E)&&w(B,E)})},A=()=>{let E;for(;n.size;){const R=Array.from(n);n.clear(),R.forEach(([N,T])=>{const B=s(N);if(B){B.d!==(T==null?void 0:T.d)&&S(N,B,T==null?void 0:T.d);const I=e.get(N);I&&!(T&&!uu(T)&&(zd(T,B)||db(T,B)))&&I.l.forEach(_=>_())}})}};return{get:h,set:y,sub:(E,R)=>{const N=f(E),T=A(),B=N.l;return B.add(R),()=>{B.delete(R),m(E)}}}};let rg;const HD=()=>(rg||(rg=Cw()),rg),Q2=b.createContext(void 0),eA=t=>{const e=b.useContext(Q2);return(t==null?void 0:t.store)||e||HD()},WD=({children:t,store:e})=>{const n=b.useRef();return!e&&!n.current&&(n.current=Cw()),b.createElement(Q2.Provider,{value:e||n.current},t)},GD=t=>typeof(t==null?void 0:t.then)=="function",XD=q.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function gr(t,e){const n=eA(e),[[i,r,s],o]=b.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=i;(r!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return b.useEffect(()=>{const u=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),u},[n,t,l]),b.useDebugValue(a),GD(a)?XD(a):a}function KD(t,e){const n=eA(e);return b.useCallback((...r)=>n.set(t,...r),[n,t])}function tA(t,e){return[gr(t,e),KD(t,e)]}const{createElement:Pl,createContext:ZD,forwardRef:nA,useCallback:ms,useContext:iA,useEffect:Wr,useImperativeHandle:rA,useLayoutEffect:YD,useMemo:JD,useRef:Xn,useState:Hu}=Dv,hb=Dv["useId".toString()],Rf=YD,qD=typeof hb=="function"?hb:()=>null;let QD=0;function Aw(t=null){const e=qD(),n=Xn(t||e||null);return n.current===null&&(n.current=""+QD++),n.current}const Vp=ZD(null);Vp.displayName="PanelGroupContext";function sA({children:t=null,className:e="",collapsedSize:n=0,collapsible:i=!1,defaultSize:r=null,forwardedRef:s,id:o=null,maxSize:a=100,minSize:l=10,onCollapse:u=null,onResize:c=null,order:d=null,style:h={},tagName:f="div"}){const p=iA(Vp);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const m=Aw(o),{collapsePanel:v,expandPanel:g,getPanelStyle:y,registerPanel:w,resizePanel:x,unregisterPanel:S}=p,A=Xn({onCollapse:u,onResize:c});if(Wr(()=>{A.current.onCollapse=u,A.current.onResize=c}),l<0||l>100)throw Error(`Panel minSize must be between 0 and 100, but was ${l}`);if(a<0||a>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${a}`);if(r!==null){if(r<0||r>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${r}`);l>r&&!i&&(console.error(`Panel minSize ${l} cannot be greater than defaultSize ${r}`),r=l)}const P=y(m,r),E=Xn({size:fb(P)}),R=Xn({callbacksRef:A,collapsedSize:n,collapsible:i,defaultSize:r,id:m,idWasAutoGenerated:o==null,maxSize:a,minSize:l,order:d});return Rf(()=>{E.current.size=fb(P),R.current.callbacksRef=A,R.current.collapsedSize=n,R.current.collapsible=i,R.current.defaultSize=r,R.current.id=m,R.current.idWasAutoGenerated=o==null,R.current.maxSize=a,R.current.minSize=l,R.current.order=d}),Rf(()=>(w(m,R),()=>{S(m)}),[d,m,w,S]),rA(s,()=>({collapse:()=>v(m),expand:()=>g(m),getCollapsed(){return E.current.size===0},getSize(){return E.current.size},resize:N=>x(m,N)}),[v,g,m,x]),Pl(f,{children:t,className:e,"data-panel":"","data-panel-collapsible":i||void 0,"data-panel-id":m,"data-panel-size":parseFloat(""+P.flexGrow).toFixed(1),id:`data-panel-id-${m}`,style:{...P,...h}})}const Mh=nA((t,e)=>Pl(sA,{...t,forwardedRef:e}));sA.displayName="Panel";Mh.displayName="forwardRef(Panel)";function fb(t){const{flexGrow:e}=t;return typeof e=="string"?parseFloat(e):e}const Zo=10;function Au(t,e,n,i,r,s,o,a){const{sizes:l}=a||{},u=l||s;if(r===0)return u;const c=oi(e),d=u.concat();let h=0;{const m=r<0?i:n,v=c.findIndex(x=>x.current.id===m),g=c[v],y=u[v],w=pb(g,Math.abs(r),y,t);if(y===w)return u;w===0&&y>0&&o.set(m,y),r=r<0?y-w:w-y}let f=r<0?n:i,p=c.findIndex(m=>m.current.id===f);for(;;){const m=c[p],v=u[p],g=Math.abs(r)-Math.abs(h),y=pb(m,0-g,v,t);if(v!==y&&(y===0&&v>0&&o.set(m.current.id,v),h+=v-y,d[p]=y,h.toPrecision(Zo).localeCompare(Math.abs(r).toPrecision(Zo),void 0,{numeric:!0})>=0))break;if(r<0){if(--p<0)break}else if(++p>=c.length)break}return h===0?u:(f=r<0?i:n,p=c.findIndex(m=>m.current.id===f),d[p]=u[p]+h,d)}function ga(t,e,n){e.forEach((i,r)=>{const s=t[r];if(!s)return;const{callbacksRef:o,collapsedSize:a,collapsible:l,id:u}=s.current,c=n[u];if(c!==i){n[u]=i;const{onCollapse:d,onResize:h}=o.current;h&&h(i,c),l&&d&&((c==null||c===a)&&i!==a?d(!1):c!==a&&i===a&&d(!0))}})}function sg(t,e){if(e.length<2)return[null,null];const n=e.findIndex(o=>o.current.id===t);if(n<0)return[null,null];const i=n===e.length-1,r=i?e[n-1].current.id:t,s=i?t:e[n+1].current.id;return[r,s]}function oA(t,e,n){if(t.size===1)return"100";const r=oi(t).findIndex(o=>o.current.id===e),s=n[r];return s==null?"0":s.toPrecision(Zo)}function e$(t){const e=document.querySelector(`[data-panel-id="${t}"]`);return e||null}function Pw(t){const e=document.querySelector(`[data-panel-group-id="${t}"]`);return e||null}function Hp(t){const e=document.querySelector(`[data-panel-resize-handle-id="${t}"]`);return e||null}function t$(t){return aA().findIndex(i=>i.getAttribute("data-panel-resize-handle-id")===t)??null}function aA(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function lA(t){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Rw(t,e,n){var l,u,c,d;const i=Hp(e),r=lA(t),s=i?r.indexOf(i):-1,o=((u=(l=n[s])==null?void 0:l.current)==null?void 0:u.id)??null,a=((d=(c=n[s+1])==null?void 0:c.current)==null?void 0:d.id)??null;return[o,a]}function oi(t){return Array.from(t.values()).sort((e,n)=>{const i=e.current.order,r=n.current.order;return i==null&&r==null?0:i==null?-1:r==null?1:i-r})}function pb(t,e,n,i){var c;const r=n+e,{collapsedSize:s,collapsible:o,maxSize:a,minSize:l}=t.current;if(o){if(n>s){if(r<=l/2+s)return s}else if(!((c=i==null?void 0:i.type)==null?void 0:c.startsWith("key"))&&r<l)return s}return Math.min(a,Math.max(l,r))}function uA(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}function n$({committedValuesRef:t,groupId:e,panels:n,setSizes:i,sizes:r,panelSizeBeforeCollapse:s}){Wr(()=>{const{direction:o,panels:a}=t.current,l=Pw(e),{height:u,width:c}=l.getBoundingClientRect(),h=lA(e).map(f=>{const p=f.getAttribute("data-panel-resize-handle-id"),m=oi(a),[v,g]=Rw(e,p,m);if(v==null||g==null)return()=>{};let y=0,w=100,x=0,S=0;m.forEach(T=>{T.current.id===v?(w=T.current.maxSize,y=T.current.minSize):(x+=T.current.minSize,S+=T.current.maxSize)});const A=Math.min(w,100-x),P=Math.max(y,(m.length-1)*100-S),E=oA(a,v,r);f.setAttribute("aria-valuemax",""+Math.round(A)),f.setAttribute("aria-valuemin",""+Math.round(P)),f.setAttribute("aria-valuenow",""+Math.round(parseInt(E)));const R=T=>{if(!T.defaultPrevented)switch(T.key){case"Enter":{T.preventDefault();const B=m.findIndex(I=>I.current.id===v);if(B>=0){const I=m[B],_=r[B];if(_!=null){let D=0;_.toPrecision(Zo)<=I.current.minSize.toPrecision(Zo)?D=o==="horizontal"?c:u:D=-(o==="horizontal"?c:u);const z=Au(T,a,v,g,D,r,s.current,null);r!==z&&i(z)}}break}}};f.addEventListener("keydown",R);const N=e$(v);return N!=null&&f.setAttribute("aria-controls",N.id),()=>{f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow"),f.removeEventListener("keydown",R),N!=null&&f.removeAttribute("aria-controls")}});return()=>{h.forEach(f=>f())}},[t,e,n,s,i,r])}function i$({disabled:t,handleId:e,resizeHandler:n}){Wr(()=>{if(t||n==null)return;const i=Hp(e);if(i==null)return;const r=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),n(s);break}case"F6":{s.preventDefault();const o=aA(),a=t$(e);uA(a!==null);const l=s.shiftKey?a>0?a-1:o.length-1:a+1<o.length?a+1:0;o[l].focus();break}}};return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}},[t,e,n])}function r$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function cA(t,e,n,i=0,r=null){const s=n==="horizontal";let o=0;if(oy(t))o=s?t.clientX:t.clientY;else if(ay(t)){const c=t.touches[0];o=s?c.screenX:c.screenY}else return 0;const a=Hp(e),l=r||a.getBoundingClientRect(),u=s?l.left:l.top;return o-u-i}function s$(t,e,n,i,r,s,o){const{dragOffset:a=0,dragHandleRect:l,sizes:u}=o||{},c=u||s;if(o$(t)){const d=r==="horizontal",f=Pw(e).getBoundingClientRect(),p=d?f.width:f.height,m=t.shiftKey?10:100,v=p/m;let g=0;switch(t.key){case"ArrowDown":g=d?0:v;break;case"ArrowLeft":g=d?-v:0;break;case"ArrowRight":g=d?v:0;break;case"ArrowUp":g=d?0:-v;break;case"End":g=p;break;case"Home":g=-p;break}const[y,w]=Rw(e,n,i),x=g<0?y:w,S=i.findIndex(P=>P.current.id===x),A=i[S];if(A.current.collapsible){const P=c[S];(P===0||P.toPrecision(Zo)===A.current.minSize.toPrecision(Zo))&&(g=g<0?-A.current.minSize*p:A.current.minSize*p)}return g}else return cA(t,n,r,a,l)}function o$(t){return t.type==="keydown"}function oy(t){return t.type.startsWith("mouse")}function ay(t){return t.type.startsWith("touch")}let ly=null,_o=null;function dA(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function a$(){_o!==null&&(document.head.removeChild(_o),ly=null,_o=null)}function og(t){if(ly===t)return;ly=t;const e=dA(t);_o===null&&(_o=document.createElement("style"),document.head.appendChild(_o)),_o.innerHTML=`*{cursor: ${e}!important;}`}function l$(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function hA(t){return t.map(e=>{const{minSize:n,order:i}=e.current;return i?`${i}:${n}`:`${n}`}).sort((e,n)=>e.localeCompare(n)).join(",")}function fA(t,e){try{const n=e.getItem(`PanelGroup:sizes:${t}`);if(n){const i=JSON.parse(n);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function u$(t,e,n){const i=fA(t,n);if(i){const r=hA(e);return i[r]??null}return null}function c$(t,e,n,i){const r=hA(e),s=fA(t,i)||{};s[r]=n;try{i.setItem(`PanelGroup:sizes:${t}`,JSON.stringify(s))}catch(o){console.error(o)}}const ag={};function mb(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}const Pu={getItem:t=>(mb(Pu),Pu.getItem(t)),setItem:(t,e)=>{mb(Pu),Pu.setItem(t,e)}};function pA({autoSaveId:t,children:e=null,className:n="",direction:i,disablePointerEventsDuringResize:r=!1,forwardedRef:s,id:o=null,onLayout:a,storage:l=Pu,style:u={},tagName:c="div"}){const d=Aw(o),[h,f]=Hu(null),[p,m]=Hu(new Map),v=Xn(null);Xn({didLogDefaultSizeWarning:!1,didLogIdAndOrderWarning:!1,prevPanelIds:[]});const g=Xn({onLayout:a});Wr(()=>{g.current.onLayout=a});const y=Xn({}),[w,x]=Hu([]),S=Xn(new Map),A=Xn(0),P=Xn({direction:i,panels:p,sizes:w});rA(s,()=>({getLayout:()=>{const{sizes:L}=P.current;return L},setLayout:L=>{const O=L.reduce((ie,ce)=>ie+ce,0);uA(O===100,"Panel sizes must add up to 100%");const{panels:$}=P.current,F=y.current,Y=oi($);x(L),ga(Y,L,F)}}),[]),Rf(()=>{P.current.direction=i,P.current.panels=p,P.current.sizes=w}),n$({committedValuesRef:P,groupId:d,panels:p,setSizes:x,sizes:w,panelSizeBeforeCollapse:S}),Wr(()=>{const{onLayout:L}=g.current,{panels:O,sizes:$}=P.current;if($.length>0){L&&L($);const F=y.current,Y=oi(O);ga(Y,$,F)}},[w]),Rf(()=>{if(P.current.sizes.length===p.size)return;let O=null;if(t){const $=oi(p);O=u$(t,$,l)}if(O!=null)x(O);else{const $=oi(p);let F=0,Y=0,ie=0;if($.forEach(ce=>{ie+=ce.current.minSize,ce.current.defaultSize===null?F++:Y+=ce.current.defaultSize}),Y>100)throw new Error("Default panel sizes cannot exceed 100%");if($.length>1&&F===0&&Y!==100)throw new Error("Invalid default sizes specified for panels");if(ie>100)throw new Error("Minimum panel sizes cannot exceed 100%");x($.map(ce=>ce.current.defaultSize===null?(100-Y)/F:ce.current.defaultSize))}},[t,p,l]),Wr(()=>{if(t){if(w.length===0||w.length!==p.size)return;const L=oi(p);ag[t]||(ag[t]=l$(c$,100)),ag[t](t,L,w,l)}},[t,p,w,l]);const E=ms((L,O)=>{const{panels:$}=P.current;return $.size===0?{flexBasis:0,flexGrow:O??void 0,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:oA($,L,w),flexShrink:1,overflow:"hidden",pointerEvents:r&&h!==null?"none":void 0}},[h,r,w]),R=ms((L,O)=>{m($=>{if($.has(L))return $;const F=new Map($);return F.set(L,O),F})},[]),N=ms(L=>$=>{$.preventDefault();const{direction:F,panels:Y,sizes:ie}=P.current,ce=oi(Y),[we,Se]=Rw(d,L,ce);if(we==null||Se==null)return;let xe=s$($,d,L,ce,F,ie,v.current);if(xe===0)return;const ye=Pw(d).getBoundingClientRect(),Ne=F==="horizontal";document.dir==="rtl"&&Ne&&(xe=-xe);const Ee=Ne?ye.width:ye.height,ke=xe/Ee*100,be=Au($,Y,we,Se,ke,ie,S.current,v.current),se=!r$(ie,be);if((oy($)||ay($))&&A.current!=ke&&og(se?Ne?"horizontal":"vertical":Ne?xe<0?"horizontal-min":"horizontal-max":xe<0?"vertical-min":"vertical-max"),se){const Te=y.current;x(be),ga(ce,be,Te)}A.current=ke},[d]),T=ms(L=>{m(O=>{if(!O.has(L))return O;const $=new Map(O);return $.delete(L),$})},[]),B=ms(L=>{const{panels:O,sizes:$}=P.current,F=O.get(L);if(F==null)return;const{collapsedSize:Y,collapsible:ie}=F.current;if(!ie)return;const ce=oi(O),we=ce.indexOf(F);if(we<0)return;const Se=$[we];if(Se===Y)return;S.current.set(L,Se);const[xe,Q]=sg(L,ce);if(xe==null||Q==null)return;const Ne=we===ce.length-1?Se:Y-Se,Ee=Au(null,O,xe,Q,Ne,$,S.current,null);if($!==Ee){const ke=y.current;x(Ee),ga(ce,Ee,ke)}},[]),I=ms(L=>{const{panels:O,sizes:$}=P.current,F=O.get(L);if(F==null)return;const{collapsedSize:Y,minSize:ie}=F.current,ce=S.current.get(L)||ie;if(!ce)return;const we=oi(O),Se=we.indexOf(F);if(Se<0||$[Se]!==Y)return;const[Q,ye]=sg(L,we);if(Q==null||ye==null)return;const Ee=Se===we.length-1?Y-ce:ce,ke=Au(null,O,Q,ye,Ee,$,S.current,null);if($!==ke){const be=y.current;x(ke),ga(we,ke,be)}},[]),_=ms((L,O)=>{const{panels:$,sizes:F}=P.current,Y=$.get(L);if(Y==null)return;const{collapsedSize:ie,collapsible:ce,maxSize:we,minSize:Se}=Y.current,xe=oi($),Q=xe.indexOf(Y);if(Q<0)return;const ye=F[Q];if(ye===O)return;ce&&O===ie||(O=Math.min(we,Math.max(Se,O)));const[Ne,Ee]=sg(L,xe);if(Ne==null||Ee==null)return;const be=Q===xe.length-1?ye-O:O-ye,se=Au(null,$,Ne,Ee,be,F,S.current,null);if(F!==se){const Te=y.current;x(se),ga(xe,se,Te)}},[]),D=JD(()=>({activeHandleId:h,collapsePanel:B,direction:i,expandPanel:I,getPanelStyle:E,groupId:d,registerPanel:R,registerResizeHandle:N,resizePanel:_,startDragging:(L,O)=>{if(f(L),oy(O)||ay(O)){const $=Hp(L);v.current={dragHandleRect:$.getBoundingClientRect(),dragOffset:cA(O,L,i),sizes:P.current.sizes}}},stopDragging:()=>{a$(),f(null),v.current=null},unregisterPanel:T}),[h,B,i,I,E,d,R,N,_,T]),z={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Pl(Vp.Provider,{children:Pl(c,{children:e,className:n,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":d,style:{...z,...u}}),value:D})}const mA=nA((t,e)=>Pl(pA,{...t,forwardedRef:e}));pA.displayName="PanelGroup";mA.displayName="forwardRef(PanelGroup)";function uy({children:t=null,className:e="",disabled:n=!1,id:i=null,onDragging:r,style:s={},tagName:o="div"}){const a=Xn(null),l=Xn({onDragging:r});Wr(()=>{l.current.onDragging=r});const u=iA(Vp);if(u===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:c,direction:d,groupId:h,registerResizeHandle:f,startDragging:p,stopDragging:m}=u,v=Aw(i),g=c===v,[y,w]=Hu(!1),[x,S]=Hu(null),A=ms(()=>{a.current.blur(),m();const{onDragging:R}=l.current;R&&R(!1)},[m]);Wr(()=>{if(n)S(null);else{const E=f(v);S(()=>E)}},[n,v,f]),Wr(()=>{if(n||x==null||!g)return;const E=B=>{x(B)},R=B=>{x(B)},T=a.current.ownerDocument;return T.body.addEventListener("contextmenu",A),T.body.addEventListener("mousemove",E),T.body.addEventListener("touchmove",E),T.body.addEventListener("mouseleave",R),window.addEventListener("mouseup",A),window.addEventListener("touchend",A),()=>{T.body.removeEventListener("contextmenu",A),T.body.removeEventListener("mousemove",E),T.body.removeEventListener("touchmove",E),T.body.removeEventListener("mouseleave",R),window.removeEventListener("mouseup",A),window.removeEventListener("touchend",A)}},[d,n,g,x,A]),i$({disabled:n,handleId:v,resizeHandler:x});const P={cursor:dA(d),touchAction:"none",userSelect:"none"};return Pl(o,{children:t,className:e,"data-resize-handle-active":g?"pointer":y?"keyboard":void 0,"data-panel-group-direction":d,"data-panel-group-id":h,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":v,onBlur:()=>w(!1),onFocus:()=>w(!0),onMouseDown:E=>{p(v,E.nativeEvent);const{onDragging:R}=l.current;R&&R(!0)},onMouseUp:A,onTouchCancel:A,onTouchEnd:A,onTouchStart:E=>{p(v,E.nativeEvent);const{onDragging:R}=l.current;R&&R(!0)},ref:a,role:"separator",style:{...P,...s},tabIndex:0})}uy.displayName="PanelResizeHandle";const d$="modulepreload",h$=function(t){return"/vonsim-next/"+t},gb={},f$=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=h$(s),s in gb)return;gb[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let c=r.length-1;c>=0;c--){const d=r[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":d$,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function p$(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){const{Workbox:h}=await f$(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);a=new h("/vonsim-next/sw.js",{scope:"/vonsim-next/",type:"classic"}),u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let f=!1;const p=()=>{f=!0,a==null||a.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?p():!f&&(i==null||i()):m.isExternal?window.location.reload():!f&&(i==null||i()):m.isUpdate||i==null||i()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(f=>{s?s("/vonsim-next/sw.js",f):r==null||r(f)}).catch(f=>{o==null||o(f)})}}return l=d(),c}function m$(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=b.useState(!1),[u,c]=b.useState(!1),[d]=b.useState(()=>p$({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}function gA(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=gA(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function it(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=gA(t))&&(i&&(i+=" "),i+=e);return i}var g$=function(){};function y$(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function v$(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var w$=typeof window<"u",x$=w$?window:null,yb=function(t){return!!t.addEventListener},vb=function(t){return!!t.on},b$=function(t,e,n,i){n===void 0&&(n=x$),b.useEffect(function(){if(e&&n)return yb(n)?y$(n,t,e,i):vb(n)&&n.on(t,e,i),function(){yb(n)?v$(n,t,e,i):vb(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])};const yA=b$;var S$=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},k$=function(t,e,n,i){e===void 0&&(e=g$),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=b.useMemo(function(){var u=S$(t),c=function(d){if(u(d))return e(d)};return c},i);yA(s,l,o,a)};const vA=k$;function Tf(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}function Wp(t,e,n,i,r){for(e=e.split?e.split("."):e,i=0;i<e.length;i++)t=t?t[e[i]]:r;return t===r?n:t}const wb=["en","es"];function Tw(t){return function(n,i,...r){const s=Wp(t,`${n}.${i}`,null);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}class It{constructor(e,n){Z(this,"start");Z(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new It(i,r)}toJSON(){return this.range}}function wA(t){const e=t.charCodeAt(0);return M.fitsUnsigned(e,8)?e:null}function Ow(t){return M.fitsUnsigned(t,8)?String.fromCharCode(t):null}var ut,yt;const Be=class Be{constructor(e,n){ue(this,ut,void 0);ue(this,yt,void 0);j(this,ut,e|0),j(this,yt,n)}get size(){return k(this,yt)}is8bits(){return k(this,yt)===8}is16bits(){return k(this,yt)===16}get unsigned(){return k(this,ut)}get signed(){return k(this,ut)<=Be.maxSignedValue(k(this,yt))?k(this,ut):k(this,ut)-(Be.maxValue(k(this,yt))+1)}get low(){return this.is8bits()?this:Be.fromUnsigned(k(this,ut)&Be.maxValue(8),8)}get high(){return this.is8bits()?new Be(0,8):Be.fromUnsigned(k(this,ut)>>8&Be.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Be.fromUnsigned(k(this,ut)&~Be.maxValue(8)|e.unsigned,k(this,yt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Be.fromUnsigned(k(this,ut)&Be.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=k(this,yt))throw new RangeError(`Index ${e} out of bounds for byte of size ${k(this,yt)}`);return(k(this,ut)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=k(this,yt))throw new RangeError(`Index ${e} out of bounds for byte of size ${k(this,yt)}`);return n?Be.fromUnsigned(k(this,ut)|1<<e,k(this,yt)):Be.fromUnsigned(k(this,ut)&~(1<<e),k(this,yt))}add(e){return e=Number(e),Be.fromUnsigned(k(this,ut)+e,k(this,yt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:k(this,ut)===k(e,ut)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(k(this,yt));for(let n=0;n<k(this,yt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return k(this,ut).toString(16).padStart(k(this,yt)/4,"0").toUpperCase();case"bin":return k(this,ut).toString(2).padStart(k(this,yt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return k(this,yt)===8?Ow(k(this,ut))??"---":this.low.toString("ascii")+this.high.toString("ascii")}}toJSON(){return k(this,ut)}valueOf(){return k(this,ut)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=Be.minSignedValue(n)&&e<=Be.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=Be.minValue()&&e<=Be.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=Be.minSignedValue(n)&&e<=Be.maxSignedValue(n)}static fromUnsigned(e,n){if(!Be.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new Be(e,n)}static fromSigned(e,n){if(!Be.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new Be(e+Be.maxValue(n)+1,n):new Be(e,n)}static fromNumber(e,n){return e<0?Be.fromSigned(e,n):Be.fromUnsigned(e,n)}static fromChar(e){const n=wA(e)??-1;return Be.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*Be.maxValue(e));return new Be(n,e)}static zero(e){return new Be(0,e)}};ut=new WeakMap,yt=new WeakMap;let M=Be;var Or;const Ss=class Ss{constructor(e){ue(this,Or,void 0);j(this,Or,e)}get value(){return k(this,Or).unsigned}get byte(){return k(this,Or)}toString(e=!0){let n=k(this,Or).toString("hex");return e&&(n+="h"),n}toJSON(){return k(this,Or).toJSON()}valueOf(){return k(this,Or).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ss.MIN_ADDRESS&&e<=Ss.MAX_ADDRESS}static from(e){if(e=Number(e),!Ss.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=M.fromUnsigned(e,16);return new Ss(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i}};Or=new WeakMap,Z(Ss,"MIN_ADDRESS",0),Z(Ss,"MAX_ADDRESS",32767);let me=Ss;var _r;const ks=class ks{constructor(e){ue(this,_r,void 0);j(this,_r,e)}get value(){return k(this,_r).unsigned}get byte(){return k(this,_r)}toString(e=!0){let n=k(this,_r).toString("hex");return e&&(n+="h"),n}toJSON(){return k(this,_r).toJSON()}valueOf(){return k(this,_r).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ks.MIN_ADDRESS&&e<=ks.MAX_ADDRESS}static from(e){if(e=Number(e),!ks.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=M.fromUnsigned(e,8);return new ks(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};_r=new WeakMap,Z(ks,"MIN_ADDRESS",0),Z(ks,"MAX_ADDRESS",127);let Ln=ks;const xb=me.from(me.MAX_ADDRESS).toString(),E$=Ln.from(Ln.MAX_ADDRESS).toString(),C$={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${me.format(t)} is out of range (max memory address: ${xb}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${me.format(t)}, which is outside the memory range (max memory address: ${xb}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${E$}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"label-should-be-writable":t=>`Label ${t} doesn't point to a writable memory address — should point to a DB or DW declaration.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},bb=me.from(me.MAX_ADDRESS).toString(),A$=Ln.from(Ln.MAX_ADDRESS).toString(),P$={"address-has-code":t=>`La dirección de memoria ${me.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${t} está fuera de rango (dirección máxima de memoria: ${bb}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vacío. El programa debe tener, al menos, una instrucción END.","end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${me.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${bb}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${A$}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"label-should-be-writable":t=>`La etiqueta ${t} no apunta a una dirección de memoria modificable — debería apuntar a una declaración DB o DW.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${t}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},R$=Tw({en:C$,es:P$});class K extends Error{constructor(n,...i){super();Z(this,"code");Z(this,"context");Z(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof It?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return R$(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof K?n:new K("unexpected-error",n)}}var Rs,hl;class T${constructor(){Z(this,"codeMemory",new Set);Z(this,"labels",new Map);ue(this,Rs,!1);ue(this,hl,!1)}loadStatements(e){if(k(this,Rs))throw new Error("Tried to load statements twice");j(this,Rs,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new K("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:me.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:me.from(0)})}return n}computeAddresses(e){if(k(this,hl))throw new Error("Tried to compute addresses twice");j(this,hl,!0),this.codeMemory.clear();const n=new Set;let i=null;return Tf(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){i=s.newAddress;return}if(i===null)throw new K("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!me.inRange(i+l))throw new K("instruction-out-of-range",i+l).at(s);const u=me.from(i+l);if(n.has(u.value))throw new K("occupied-address",u).at(s);n.add(u.value),s.isInstruction()&&this.codeMemory.add(u.value)}const a=me.from(i);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),i+=o},K.from)}labelExists(e){if(!k(this,Rs))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!k(this,Rs))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!k(this,Rs))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!k(this,hl))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof me&&(e=e.value),this.codeMemory.has(e)}}Rs=new WeakMap,hl=new WeakMap;const O$=["AL","BL","CL","DL","AH","BH","CH","DH"],xA=["AX","BX","CX","DX","SP"],Of=[...O$,...xA],_w=["DB","DW","EQU"],Nw=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],_$=["OFFSET","ORG","BYTE","WORD","PTR","END",...Of,...Nw,..._w];class N${constructor(e,n,i){Z(this,"type");Z(this,"lexeme");Z(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class M${constructor(e){Z(this,"scanned",!1);Z(this,"tokens",[]);Z(this,"position",new It(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new It(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new K("lexer.unterminated-string").at(this.position);if(this.peek().charCodeAt(0)>255)throw new K("lexer.only-ascii").at(new It(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new K("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new K("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();_$.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new K("lexer.unexpected-character",e).at(this.position)}return this.position=new It(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new N$(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new It(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Ht{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}Z(Ht,"numberLiteral",(...e)=>new D$(...e)),Z(Ht,"label",(...e)=>new $$(...e)),Z(Ht,"unaryOperation",(...e)=>new L$(...e)),Z(Ht,"binaryOperation",(...e)=>new I$(...e));class D$ extends Ht{constructor(n,i){super(i);Z(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class $$ extends Ht{constructor(n,i,r){super(r);Z(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new K("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new K("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new K("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class L$ extends Ht{constructor(n,i,r){super(r);Z(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class I$ extends Ht{constructor(n,i,r,s){super(s);Z(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Gp{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Nr;class bA extends Gp{constructor(n,i,r){super(r);Z(this,"type","data-directive");Z(this,"label");Z(this,"values");ue(this,Nr,null);this.values=n,this.label=i}get start(){if(k(this,Nr)===null)throw new Error("Start not set");return k(this,Nr)}setStart(n){if(k(this,Nr)!==null)throw new Error("Start already set");j(this,Nr,n)}toJSON(){return{...super.toJSON(),...k(this,Nr)?{start:k(this,Nr).toJSON()}:{},directive:this.directive,label:this.label}}}Nr=new WeakMap;var Io,Ts,fl;class B$ extends bA{constructor(n,i,r){super(n,i,r);Z(this,"directive","EQU");ue(this,Io,"not-processed");ue(this,Ts,null);ue(this,fl,null)}toJSON(){var n;return{...super.toJSON(),value:k(this,fl)??((n=k(this,Ts))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(k(this,Ts))throw new Error("Constant already validated");if(!this.label)throw new K("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new K("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new K("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new K("cannot-be-unassinged","EQU").at(n);j(this,Ts,n.value)}evaluateExpressions(n){if(!k(this,Ts))throw new Error("Constant not validated");if(k(this,Io)==="processed")return k(this,fl);if(k(this,Io)==="processing")throw new K("circular-reference").at(this.position);j(this,Io,"processed");const i=k(this,Ts).evaluate(n);return j(this,Io,"processed"),j(this,fl,i),i}evaluate(n){return this.evaluateExpressions(n)}}Io=new WeakMap,Ts=new WeakMap,fl=new WeakMap;const Ru=Symbol("unassigned");var kn,Pi;class z$ extends bA{constructor(n,i,r,s){super(i,r,s);Z(this,"size");ue(this,kn,null);ue(this,Pi,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!k(this,kn))throw new Error("Data directive not validated");return k(this,kn).length*(this.size/8)}getValues(){if(!k(this,Pi))throw new Error("Data directive not evaluated");return k(this,Pi)}toJSON(){return{...super.toJSON(),values:(k(this,Pi)??k(this,kn)??this.values).map(n=>n===Ru?"?":n.toJSON())}}validate(){if(k(this,kn))throw new Error("Data directive already validated");j(this,kn,[]);for(const n of this.values)if(n.isUnassigned())k(this,kn).push(Ru);else if(n.isString()){if(this.directive!=="DB")throw new K("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=wA(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new It(n.position.start+r,n.position.start+r+1),a=Ht.numberLiteral(s,o);k(this,kn).push(a)}}else k(this,kn).push(n.value);if(k(this,kn).length===0)throw new K("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!k(this,kn))throw new Error("Data directive not validated");if(k(this,Pi))throw new Error("Data directive already evaluated");j(this,Pi,[]);const i=Tf(k(this,kn),r=>{if(r===Ru)k(this,Pi).push(Ru);else{const s=r.evaluate(n);if(!M.fits(s,this.size))throw new K("value-out-of-range",s,this.size).at(this);const o=M.fromNumber(s,this.size);k(this,Pi).push(o)}},K.from);return i.length>0&&j(this,Pi,null),i}}kn=new WeakMap,Pi=new WeakMap;class Mw{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class F$ extends Mw{constructor(n,i){super(i);Z(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class j$ extends Mw{constructor(n){super(n);Z(this,"type","unassigned")}}class U$ extends Mw{constructor(n){super(n.position);Z(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function V$(t,e,n){const i=It.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new z$(t.type,e,n,i);case"EQU":return new B$(e,n,i)}}class H$ extends Gp{constructor(n){super(n);Z(this,"type","end")}}function ko(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var Mr;class ua extends Gp{constructor(n,i,r){super(r);Z(this,"type","instruction");Z(this,"label");Z(this,"operands");ue(this,Mr,null);this.operands=n,this.label=i}get start(){if(k(this,Mr)===null)throw new Error("Start not set");return k(this,Mr)}setStart(n){if(k(this,Mr)!==null)throw new Error("Start already set");j(this,Mr,n)}toJSON(){return{...super.toJSON(),...k(this,Mr)?{start:k(this,Mr).toJSON()}:{},instruction:this.instruction,label:this.label}}}Mr=new WeakMap;var en,ai;class W$ extends ua{constructor(n,i,r,s){super(i,r,s);ue(this,en,null);ue(this,ai,null);this.instruction=n}get length(){if(!k(this,en))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=k(this,en);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!k(this,ai))throw new Error("Instruction not evaluated");return k(this,ai)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=ko(s)<<3,o[1]|=ko(r)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=ko(r)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=ko(r)<<0,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}case"mem<-reg":{r.mode==="direct"?(o[1]=192,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=208,o[1]|=ko(s)<<0;break}case"mem<-imd":{r.mode==="direct"?(o[1]=200,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...k(this,ai)??k(this,en)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(k(this,en))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new K("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new K("size-mismatch",r.size,i.size).at(this);j(this,en,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new K("size-mismatch",r.size,i.size).at(this);j(this,en,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new K("size-mismatch",r.size,i.size).at(this);j(this,en,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}if(r.value.isLabel()){const s=r.isDataDirectiveLabel(n);if(s){if(s!==i.size)throw new K("size-mismatch",s,i.size).at(this);j(this,en,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:Ht.label(r.value.value,!0,r.value.position)}});return}}j(this,en,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else if(i.value.isLabel()){if(s=i.isDataDirectiveLabel(n)||"auto",s==="auto")throw new K("label-should-be-writable",i.value.value).at(i);o={mode:"direct",address:Ht.label(i.value.value,!0,i.value.position)}}else throw new K("destination-cannot-be-immediate").at(i);if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new K("size-mismatch",s,r.size).at(this);j(this,en,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.isDataDirectiveLabel(n))throw new K("double-memory-access").at(this);if(s==="auto")throw new K("unknown-size").at(i);j(this,en,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new K("double-memory-access").at(this)}}evaluateExpressions(n){if(!k(this,en))throw new Error("Instruction not validated");if(k(this,ai))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=k(this,en),a=l=>{const u=l.evaluate(n);if(!me.inRange(u))throw new K("address-out-of-range",u).at(l);const c=me.from(u);if(n.addressIsReserved(c))throw new K("address-has-code",c).at(l);return c};switch(i){case"reg<-reg":{j(this,ai,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{j(this,ai,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!M.fits(l,r))throw new K("value-out-of-range",l,r).at(o);const u=M.fromNumber(l,r);j(this,ai,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{j(this,ai,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!M.fits(l,r))throw new K("value-out-of-range",l,r).at(o);const u=M.fromNumber(l,r);j(this,ai,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}en=new WeakMap,ai=new WeakMap;var er,Dr;class G$ extends ua{constructor(n,i,r,s){super(i,r,s);ue(this,er,null);ue(this,Dr,null);Z(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!k(this,Dr))throw new Error("Instruction not evaluated");return k(this,Dr)}toJSON(){return{...super.toJSON(),...k(this,Dr)?{value:k(this,Dr).toJSON()}:k(this,er)?{initialValue:k(this,er).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(k(this,er))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new K("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new K("expects-immediate").at(n);j(this,er,n.value)}evaluateExpressions(n){if(!k(this,er))throw new Error("Instruction not validated");if(k(this,Dr))throw new Error("Instruction aready evaluated");const i=k(this,er).evaluate(n);if(!M.fitsUnsigned(i,8))throw new K("invalid-interrupt",i).at(k(this,er));j(this,Dr,M.fromUnsigned(i,8))}}er=new WeakMap,Dr=new WeakMap;var Ri,$r,NE;let X$=(NE=class extends ua{constructor(n,i,r,s){super(i,r,s);ue(this,Ri,null);ue(this,$r,null);this.instruction=n}get length(){if(!k(this,Ri))throw new Error("Instruction not validated");return k(this,Ri).port==="fixed"?2:1}toBytes(){const n=[],i={IN:80,OUT:84};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(k(this,$r)===null)throw new Error("Operation not set");return k(this,$r)}toJSON(){return{...super.toJSON(),...k(this,$r)??k(this,Ri)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(k(this,Ri))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new K("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new K("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new K("expects-dx").at(i);j(this,Ri,{port:"variable",size:r});return}if(i.isNumberExpression()){j(this,Ri,{port:"fixed",size:r,address:i.value});return}throw new K("expects-immediate").at(i)}evaluateExpressions(n){if(!k(this,Ri))throw new Error("Instruction not validated");if(k(this,$r))throw new Error("Instruction aready evaluated");const i=k(this,Ri);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Ln.inRange(r))throw new K("io-address-out-of-range",r).at(this);const s=Ln.from(r);j(this,$r,{port:"fixed",size:i.size,address:s})}else j(this,$r,{port:"variable",size:i.size})}},Ri=new WeakMap,$r=new WeakMap,NE);var Lr,Ir,ME;let K$=(ME=class extends ua{constructor(n,i,r,s){super(i,r,s);ue(this,Lr,null);ue(this,Ir,null);Z(this,"length",3);this.instruction=n}toBytes(){const n=[],i={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(k(this,Ir)===null)throw new Error("Instruction not evaluated");return k(this,Ir)}toJSON(){return{...super.toJSON(),...k(this,Ir)?{address:k(this,Ir).toJSON()}:k(this,Lr)?{jumpTo:k(this,Lr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(k(this,Lr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new K("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new K("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new K("label-not-found",r).at(i);if(s!=="instruction")throw new K("label-should-be-an-instruction",r).at(i);j(this,Lr,r)}evaluateExpressions(n){if(!k(this,Lr))throw new Error("Instruction not validated");if(k(this,Ir))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(k(this,Lr));if(!me.inRange(i))throw new K("address-out-of-range",i).at(this);j(this,Ir,me.from(i))}},Lr=new WeakMap,Ir=new WeakMap,ME);var tr,DE;let Z$=(DE=class extends ua{constructor(n,i,r,s){super(i,r,s);ue(this,tr,null);Z(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:96,POP:104}[this.instruction];return i|=ko(this.register),new Uint8Array([i])}get register(){if(!k(this,tr))throw new Error("Instruction not evaluated");return k(this,tr)}toJSON(){return{...super.toJSON(),...k(this,tr)?{register:k(this,tr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(k(this,tr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new K("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new K("expects-word-register").at(n);j(this,tr,n.value)}evaluateExpressions(){if(!k(this,tr))throw new Error("Instruction not validated")}},tr=new WeakMap,DE);var Un,nr;class Y$ extends ua{constructor(n,i,r,s){super(i,r,s);ue(this,Un,null);ue(this,nr,null);this.instruction=n}get length(){if(!k(this,Un))throw new Error("Instruction not validated");const{mode:n}=k(this,Un);let i=2;return n==="mem-direct"&&(i+=2),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=ko(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!k(this,nr))throw new Error("Instruction not evaluated");return k(this,nr)}toJSON(){return{...super.toJSON(),...k(this,nr)??k(this,Un)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(k(this,Un))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new K("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){j(this,Un,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new K("unknown-size").at(i);j(this,Un,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new K("unknown-size").at(i);j(this,Un,{mode:"mem-indirect",size:i.size});return}if(i.value.isLabel()){const r=i.isDataDirectiveLabel(n);if(r){j(this,Un,{mode:"mem-direct",size:r,address:Ht.label(i.value.value,!0,i.value.position)});return}}throw new K("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!k(this,Un))throw new Error("Instruction not validated");if(k(this,nr))throw new Error("Instruction aready evaluated");const i=k(this,Un);switch(i.mode){case"reg":{j(this,nr,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!me.inRange(r))throw new K("address-out-of-range",r).at(i.address);const s=me.from(r);if(n.addressIsReserved(s))throw new K("address-has-code",s).at(i.address);j(this,nr,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{j(this,nr,{mode:"mem-indirect",size:i.size});return}default:return i}}}Un=new WeakMap,nr=new WeakMap;var pl;class J$ extends ua{constructor(n,i,r,s){super(i,r,s);ue(this,pl,!1);Z(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(k(this,pl))throw new Error("Instruction already validated");if(this.operands.length>0)throw new K("expects-no-operands").at(this);j(this,pl,!0)}evaluateExpressions(){if(!k(this,pl))throw new Error("Instruction not validated")}}pl=new WeakMap;class Xp{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class q$ extends Xp{constructor(n){super(n.position);Z(this,"type","register");Z(this,"value");this.value=n.type}get size(){return xA.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class Q$ extends Xp{constructor(n,i){super(i);Z(this,"type","indirect-address");Z(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class eL extends Xp{constructor(n,i,r){super(r);Z(this,"type","direct-address");Z(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class tL extends Xp{constructor(n){super(n.position);Z(this,"type","number-expression");this.value=n}isDataDirectiveLabel(n){if(!this.value.isLabel())return!1;const i=this.value;if(i.offset)return!1;if(!n.labelExists(i.value))throw new K("label-not-found",i.value).at(this.position);const r=n.getLabelType(i.value);return r==="DB"?8:r==="DW"?16:!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function Sb(t,e,n){const i=It.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new J$(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new W$(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new Y$(t.type,e,n,i);case"PUSH":case"POP":return new Z$(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new K$(t.type,e,n,i);case"IN":case"OUT":return new X$(t.type,e,n,i);case"INT":return new G$(t.type,e,n,i)}}class nL extends Gp{constructor(n,i){super(i);Z(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let iL=class{constructor(e){Z(this,"tokens");Z(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new K("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new K("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new nL(i,It.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new K("end-must-be-the-last-statement").at(e);return new H$(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(..._w);if(e&&!n)throw new K("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),V$(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new F$(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new j$(e.position)}return new U$(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...Nw);if(e&&!n){const s=this.peek();throw new K("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return Sb(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),Sb(n,r,i)}instructionOperand(){if(this.match(...Of)){const n=this.previous();return new q$(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new K("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Of)){this.consume("BX",new K("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new K("parser.expected-literal-after-literal","]","BX"));return new Q$(e==null?void 0:e.type,It.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new K("parser.expected-literal-after-expression","]"));return new eL(i,e==null?void 0:e.type,It.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new K("parser.expected-literal-after-literal","[","PTR");return new tL(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new K("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new K("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Ht.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new K("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new K("parser.expected-label-after-offset").at(this.peek());if(!n)throw new K("parser.expected-argument").at(this.peek());return Ht.label(n.lexeme.toUpperCase(),e!==null,It.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new K("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Ht.unaryOperation(e.type==="PLUS"?"+":"-",n,It.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Ht.binaryOperation(e,"*",n,It.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Ht.binaryOperation(e,n.type==="PLUS"?"+":"-",i,It.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function SA(t){try{const n=new M$(t).scanTokens(),r=new iL(n).parse(),s=r.at(-1);if(!s)throw new K("empty-program");if(!s.isEnd())throw new K("end-must-be-the-last-statement").at(s);let o=[];const a=new T$;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Tf(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},K.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=Tf(r,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},K.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u}}catch(e){return{success:!1,errors:[K.from(e)]}}}class kr{constructor(e){Z(this,"computer");this.computer=e.computer}}const rL=me.from(me.MAX_ADDRESS).toString(),sL={"address-has-instruction":t=>`Memory address ${me.format(t)} has an instruction, and cannot be read nor written.`,"address-out-of-range":t=>`Memory address ${me.format(t)} is out of range (max memory address: ${rL}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-implemented":t=>`I/O memory address ${Ln.format(t)} has no implementation.`,"no-instruction":t=>`Expected instruction at memory address ${me.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},oL=me.from(me.MAX_ADDRESS).toString(),aL={"address-has-instruction":t=>`La dirección de memoria ${t} tiene una instrucción, y no se puede leer ni escribir.`,"address-out-of-range":t=>`La dirección de memoria ${me.format(t)} está fuera de rango (dirección máxima de memoria: ${oL}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-implemented":t=>`La dirección de memoria E/S ${Ln.format(t)} no está implementada.`,"no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${t} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},lL=Tw({en:sL,es:aL});class Ct extends Error{constructor(n,...i){super();Z(this,"code");Z(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return lL(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Ct?n:new Ct("unexpected-error",n)}}class us{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const r=e.cpu.getRegister("IP").toString("hex");throw new Ct("unexpected-error",`Could not read instruction byte at address ${r}h`)}yield*e.cpu.updateWordRegister("IP",r=>r.add(1)),yield*e.cpu.getMBR(n)}}var Sp,kA;class uL extends us{constructor(){super(...arguments);ue(this,Sp)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ke(this,Sp,kA).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=M.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>M.maxValue(r)?(c.CF=!0,u=M.fromUnsigned(h-M.maxValue(r)-1,r)):(c.CF=!1,u=M.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=M.fromUnsigned(h+M.maxValue(r)+1,r)):(c.CF=!1,u=M.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Sp=new WeakSet,kA=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};var kp,EA;class cL extends us{constructor(){super(...arguments);ue(this,kp)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ke(this,kp,EA).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=M.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=M.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===M.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",M.fromSigned(1,16));const o=i.unsigned+1;o>M.maxValue(this.operation.size)?(s.CF=!0,r=M.fromUnsigned(o-M.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=M.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",M.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=M.fromUnsigned(o+M.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=M.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}kp=new WeakSet,EA=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class dL extends us{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Ep,CA;class hL extends us{constructor(){super(...arguments);ue(this,Ep)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ke(this,Ep,CA).call(this),willUse:{ri:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",M.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Ct("io-memory-not-implemented",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Ct("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Ct("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Ep=new WeakSet,CA=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class fL extends us{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class pL extends us{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function Eo(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function mL(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Cp,AA;class gL extends us{constructor(){super(...arguments);ue(this,Cp)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ke(this,Cp,AA).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd",id:i==="reg<-mem"||i==="reg<-imd"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return r===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[a,l]=mL(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(!(yield*n.cpu.useBus("mem-write"))||l&&(yield*n.cpu.updateWordRegister("ri",u=>u.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Cp=new WeakSet,AA=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};class yL extends us{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class vL extends us{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function wL(t){switch(t.instruction){case"MOV":return new gL(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new uL(t);case"NOT":case"NEG":case"INC":case"DEC":return new cL(t);case"IN":case"OUT":return new hL(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new vL(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new fL(t);case"RET":case"IRET":return new yL(t);case"INT":return new dL(t);case"CLI":case"STI":case"NOP":case"HLT":return new pL(t)}}const xL=[0,3,6,7];function bL(t){return xL.includes(t.unsigned)}function*SL(t,e){switch(e.unsigned){case 0:return yield{type:"cpu:int.0"},!1;case 3:return yield{type:"cpu:int.3"},!0;case 6:{yield*t.cpu.copyWordRegister("BX","ri");const n=yield*t.io.console.read();if(yield*t.cpu.updateWordRegister("id",n.withHigh(M.zero(8))),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("id.l"),!(yield*t.cpu.useBus("mem-write")))return!1;break}case 7:{if(yield*t.cpu.copyWordRegister("AX","id"),!(yield*t.cpu.pushToStack())||(yield*t.cpu.copyWordRegister("BX","id"),!(yield*t.cpu.pushToStack())))return!1;yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",M.zero(8));const n=t.cpu.getRegister("AL");for(yield*t.cpu.aluExecute("SUB",n,{CF:!1,OF:!1,SF:n.signed<0,ZF:n.isZero()});!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read")))return!1;yield*t.cpu.getMBR("id.l");const i=t.cpu.getRegister("id.l");yield*t.io.console.write(i),yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",M.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",M.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===M.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","BX"),!(yield*t.cpu.popFromStack())))return!1;yield*t.cpu.copyWordRegister("id","AX");break}default:throw new Error("Invalid interrupt number")}return!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","IP"),!(yield*t.cpu.popFromStack()))?!1:(yield*t.cpu.copyWordRegister("id","FLAGS"),!0)}var ml,Oe,Vn,un,Os,Aa,En,si,$E;let kL=($E=class extends kr{constructor(n){super(n);ue(this,Os);ue(this,En);ue(this,ml,void 0);ue(this,Oe,void 0);ue(this,Vn,void 0);ue(this,un,void 0);n.data==="unchanged"?(j(this,Oe,k(n.previous.cpu,Oe)),j(this,Vn,k(n.previous.cpu,Vn)),j(this,un,k(n.previous.cpu,un))):n.data==="randomize"?(j(this,Oe,{AX:M.random(16),BX:M.random(16),CX:M.random(16),DX:M.random(16),SP:M.random(16),IP:M.random(16),IR:M.random(8),ri:M.random(16),id:M.random(16),left:M.random(16),right:M.random(16),result:M.random(16),FLAGS:M.random(16)}),j(this,Vn,M.random(16)),j(this,un,M.random(8))):(j(this,Oe,{AX:M.zero(16),BX:M.zero(16),CX:M.zero(16),DX:M.zero(16),SP:M.zero(16),IP:M.zero(16),IR:M.zero(8),ri:M.zero(16),id:M.zero(16),left:M.zero(16),right:M.zero(16),result:M.zero(16),FLAGS:M.zero(16)}),j(this,Vn,M.zero(16)),j(this,un,M.zero(8))),k(this,Oe).SP=M.fromUnsigned(me.MAX_ADDRESS+1,16),k(this,Oe).IP=M.fromUnsigned(8192,16),Ke(this,En,si).call(this,"IF",!0),j(this,ml,new Map);for(const i of n.program.instructions){const r=wL(i);k(this,ml).set(r.start.value,r)}}*run(){for(;;){const n=k(this,ml).get(k(this,Oe).IP.unsigned);if(!n){yield{type:"cpu:error",error:new Ct("no-instruction",k(this,Oe).IP)};return}if(!(yield*n.execute(this.computer)))return;if(this.getFlag("IF")&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const r=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",M.zero(8)),yield*this.startInterrupt(r)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;if(bL(n))return yield*SL(this.computer,n);let i=M.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),i=i.add(1),yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(k(this,Oe)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:k(this,Vn).toJSON(),MBR:k(this,un).toJSON()}}getRegister(n){const[i,r]=Eo(n);return r==="low"?k(this,Oe)[i].low:r==="high"?k(this,Oe)[i].high:k(this,Oe)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Ke(this,Os,Aa).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Ke(this,Os,Aa).call(this,i,r),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ke(this,Os,Aa).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ke(this,Os,Aa).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return k(this,Oe).FLAGS.bit(0);case"ZF":return k(this,Oe).FLAGS.bit(6);case"SF":return k(this,Oe).FLAGS.bit(7);case"IF":return k(this,Oe).FLAGS.bit(9);case"OF":return k(this,Oe).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Ke(this,En,si).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Ke(this,En,si).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Ke(this,En,si).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Ke(this,En,si).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Ke(this,En,si).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:k(this,Oe).FLAGS}}*aluExecute(n,i,r){k(this,Oe).result=i.is8bits()?k(this,Oe).result.withLow(i):i,typeof r.CF=="boolean"&&Ke(this,En,si).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Ke(this,En,si).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Ke(this,En,si).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Ke(this,En,si).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Ke(this,En,si).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:k(this,Oe).result,flags:k(this,Oe).FLAGS}}*setMAR(n){const i=this.getRegister(n);j(this,Vn,i),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Ke(this,Os,Aa).call(this,n,k(this,un)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);j(this,un,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(k(this,Vn));return i?(j(this,un,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(k(this,Vn),k(this,un)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(k(this,Vn).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(j(this,un,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(k(this,Vn).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,k(this,un))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{const i=yield*this.computer.io.pic.handleINTR();return j(this,un,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return me.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?me.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new Ct("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new Ct("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return me.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),me.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new Ct("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new Ct("stack-underflow")},!1)}},ml=new WeakMap,Oe=new WeakMap,Vn=new WeakMap,un=new WeakMap,Os=new WeakSet,Aa=function(n,i){const[r,s]=Eo(n);if(s===null){if(k(this,Oe)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);k(this,Oe)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?k(this,Oe)[r]=k(this,Oe)[r].withLow(i):k(this,Oe)[r]=k(this,Oe)[r].withHigh(i)}},En=new WeakSet,si=function(n,i){switch(n){case"CF":k(this,Oe).FLAGS=k(this,Oe).FLAGS.withBit(0,i);return;case"ZF":k(this,Oe).FLAGS=k(this,Oe).FLAGS.withBit(6,i);return;case"SF":k(this,Oe).FLAGS=k(this,Oe).FLAGS.withBit(7,i);return;case"IF":k(this,Oe).FLAGS=k(this,Oe).FLAGS.withBit(9,i);return;case"OF":k(this,Oe).FLAGS=k(this,Oe).FLAGS.withBit(11,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},$E),EL=class extends kr{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}};var Hn,gl;class CL extends kr{constructor(n){super(n);ue(this,Hn,void 0);ue(this,gl,null);n.data==="unchanged"?j(this,Hn,k(n.previous.io.console,Hn)):j(this,Hn,"")}get screen(){return k(this,Hn)}clear(){return this.write(M.fromUnsigned(12,8))}*read(){yield{type:"console:read"};const n=k(this,gl);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return j(this,gl,null),n}setLastCharRead(n){j(this,gl,n)}*write(n){switch(n.unsigned){case 8:j(this,Hn,k(this,Hn).slice(0,-1));break;case 10:j(this,Hn,k(this,Hn)+`
`);break;case 12:j(this,Hn,"");break;default:j(this,Hn,k(this,Hn)+Ow(n.unsigned));break}yield{type:"console:write",char:n}}toJSON(){return k(this,Hn)}}Hn=new WeakMap,gl=new WeakMap;let AL=class extends kr{*press(){yield{type:"f10:press"},yield{type:"f10:int.on"},yield*this.computer.io.pic.interrupt(0),yield{type:"f10:int.off"}}toJSON(){return null}};class Kp extends kr{}var cr,Br,Cn,cn,Ti,yl,Dh,vl,$h;let PL=(cr=class extends Kp{constructor(n){super(n);ue(this,yl);ue(this,vl);ue(this,Br,void 0);ue(this,Cn,void 0);ue(this,cn,void 0);ue(this,Ti,void 0);j(this,Br,M.fromUnsigned(255,8)),j(this,Cn,M.fromUnsigned(0,8)),j(this,cn,M.fromUnsigned(0,8)),n.data==="unchanged"?j(this,Ti,k(n.previous.io.pic,Ti)):n.data==="randomize"?j(this,Ti,new Array(cr.LINES).fill(M.zero(8)).map(()=>M.random(8))):j(this,Ti,new Array(cr.LINES).fill(M.zero(8)))}chipSelect(n){const r=4+cr.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=M.zero(8);else if(n==="IMR")i=k(this,Br);else if(n==="IRR")i=k(this,Cn);else if(n==="ISR")i=k(this,cn);else{const r=Number(n.slice(3));i=k(this,Ti)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")k(this,cn).isZero()||(yield{type:"pic:intr.off"},j(this,cn,M.zero(8)),yield{type:"pic:register.update",register:"ISR",value:k(this,cn)},yield*Ke(this,vl,$h).call(this));else if(n==="IMR")j(this,Br,i),yield{type:"pic:register.update",register:"IMR",value:k(this,Br)},yield*Ke(this,vl,$h).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));k(this,Ti)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=cr.LINES)throw new RangeError(`Invalid interrupt line ${n}`);k(this,Cn).bit(n)||(j(this,Cn,k(this,Cn).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:k(this,Cn)},yield*Ke(this,vl,$h).call(this))}isINTRActive(){return k(this,cn).isZero()&&Ke(this,yl,Dh).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!k(this,cn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Ke(this,yl,Dh).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");j(this,cn,k(this,cn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:k(this,cn)},j(this,Cn,k(this,Cn).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:k(this,Cn)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=k(this,Ti)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:k(this,Br).toJSON(),IRR:k(this,Cn).toJSON(),ISR:k(this,cn).toJSON(),lines:k(this,Ti).map(n=>n.toJSON())}}},Br=new WeakMap,Cn=new WeakMap,cn=new WeakMap,Ti=new WeakMap,yl=new WeakSet,Dh=function(){for(let n=0;n<cr.LINES;n++)if(k(this,Cn).bit(n)&&!k(this,Br).bit(n))return n;return null},vl=new WeakSet,$h=function*(){k(this,cn).isZero()&&Ke(this,yl,Dh).call(this)!==null&&(yield{type:"pic:intr.on"})},Z(cr,"LINES",8),cr);var ir,_s,LE;let RL=(LE=class extends Kp{constructor(n){super(n);ue(this,ir,void 0);ue(this,_s,void 0);j(this,ir,M.zero(8)),j(this,_s,M.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=k(this,ir);else if(n==="COMP")i=k(this,_s);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")j(this,ir,i);else if(n==="COMP")j(this,_s,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=k(this,ir).unsigned===M.maxValue(8)?M.zero(8):k(this,ir).add(1);j(this,ir,n),yield{type:"timer:register.update",register:"CONT",value:n},k(this,_s).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:k(this,ir).toJSON(),COMP:k(this,_s).toJSON()}}},ir=new WeakMap,_s=new WeakMap,LE);class Zp extends kr{constructor(n){super(n);Z(this,"clock");Z(this,"console");Z(this,"f10");Z(this,"pic");Z(this,"timer");this.clock=new EL(n),this.console=new CL(n),this.f10=new AL(n),this.pic=new PL(n),this.timer=new RL(n)}*chipSelect(n){const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const r=this.timer.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:r}):(yield{type:"bus:io.error",error:new Ct("io-memory-not-implemented",n)},null)}*read(n){const{chip:i,register:r}=n;return i==="pic"?yield*this.pic.read(r):i==="timer"?yield*this.timer.read(r):(yield{type:"bus:io.error",error:new Ct("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return r==="pic"?(yield*this.pic.write(s,i),!0):r==="timer"?(yield*this.timer.write(s,i),!0):(yield{type:"bus:io.error",error:new Ct("device-not-connected",r)},!1)}toJSON(){return{clock:this.clock.toJSON(),console:this.console.toJSON(),f10:this.f10.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}}Z(Zp,"SIZE",Ln.MAX_ADDRESS+1);var rr,dn,IE;let TL=(IE=class extends Kp{constructor(n){super(n);ue(this,rr,void 0);ue(this,dn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?j(this,rr,M.zero(8)):n.data==="randomize"?j(this,rr,M.random(8)):j(this,rr,M.zero(8)),j(this,dn,M.zero(8))}get interrupts(){return k(this,dn).bit(7)}get DATA(){return k(this,rr)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=k(this,rr);else if(n==="STATE")i=k(this,dn);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")j(this,rr,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.computer.io.printer.busy),j(this,dn,i),yield{type:"handshake:register.update",register:n,value:i},k(this,dn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),j(this,dn,k(this,dn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:k(this,dn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){j(this,dn,k(this,dn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:k(this,dn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:k(this,rr).toJSON(),STATE:k(this,dn).toJSON()}}},rr=new WeakMap,dn=new WeakMap,IE);var li,zr,Ns;const Qu=class Qu extends kr{constructor(n){super(n);ue(this,li,void 0);ue(this,zr,void 0);ue(this,Ns,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(j(this,li,k(n.previous.io.printer,li)),j(this,zr,k(n.previous.io.printer,zr)),j(this,Ns,k(n.previous.io.printer,Ns))):(j(this,li,[]),j(this,zr,""),j(this,Ns,!1))}get busy(){return k(this,li).length>=Qu.BUFFER_SIZE}*setStrobe(n){const i=k(this,Ns);if(i===n)return;if(j(this,Ns,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();k(this,li).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){j(this,zr,""),yield{type:"printer:paper.replace"}}*print(){if(k(this,li).length===0)return;const[n,...i]=k(this,li);if(j(this,li,i),yield{type:"printer:buffer.pop",char:n},i.length===Qu.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=Ow(n.unsigned);j(this,zr,k(this,zr)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:k(this,zr),buffer:[...k(this,li).map(n=>n.unsigned)]}}};li=new WeakMap,zr=new WeakMap,Ns=new WeakMap,Z(Qu,"BUFFER_SIZE",5);let _f=Qu,OL=class extends _f{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}};class _L extends Zp{constructor(n){super(n);Z(this,"printer");Z(this,"handshake");this.printer=new OL(n),this.handshake=new TL(n)}*chipSelect(n){const i=this.handshake.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="handshake"?yield*this.handshake.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="handshake"?(yield*this.handshake.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),handshake:this.handshake.toJSON()}}}class PA extends Kp{constructor(n){super(n);Z(this,"PA");Z(this,"PB");Z(this,"CA");Z(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=M.random(8),this.PB=M.random(8),this.CA=M.random(8),this.CB=M.random(8)):(this.PA=M.zero(8),this.PB=M.zero(8),this.CA=M.zero(8),this.CB=M.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let NL=class extends PA{readData(){const e=this.PB.unsigned&~this.CB.unsigned;return M.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.computer.io.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=M.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA},this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1))))}};class ML extends _f{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}}class DL extends Zp{constructor(n){super(n);Z(this,"printer");Z(this,"pio");this.printer=new ML(n),this.pio=new NL(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),pio:this.pio.toJSON()}}}var Fr;class $L extends kr{constructor(n){super(n);ue(this,Fr,void 0);n.data==="unchanged"&&"leds"in n.previous.io?j(this,Fr,k(n.previous.io.leds,Fr)):n.data==="randomize"?j(this,Fr,M.random(8)):j(this,Fr,M.zero(8))}get state(){return k(this,Fr)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return k(this,Fr).toJSON()}}Fr=new WeakMap;class LL extends PA{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=M.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.computer.io.leds.update(M.fromUnsigned(n,8))}}}var ui;class IL extends kr{constructor(n){super(n);ue(this,ui,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?j(this,ui,k(n.previous.io.switches,ui)):n.data==="randomize"?j(this,ui,M.random(8)):j(this,ui,M.zero(8))}get state(){return k(this,ui)}*toggle(n){j(this,ui,k(this,ui).withBit(n,!k(this,ui).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return k(this,ui).toJSON()}}ui=new WeakMap;class BL extends Zp{constructor(n){super(n);Z(this,"leds");Z(this,"switches");Z(this,"pio");this.leds=new $L(n),this.switches=new IL(n),this.pio=new LL(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),leds:this.leds.toJSON(),switches:this.switches.toJSON(),pio:this.pio.toJSON()}}}var Vo,ci,wl;let zL=(Vo=class extends kr{constructor(n){super(n);ue(this,ci,void 0);ue(this,wl,void 0);n.data==="unchanged"?j(this,ci,k(n.previous.memory,ci)):n.data==="randomize"?j(this,ci,new Uint8Array(Vo.SIZE).map(()=>M.random(8).unsigned)):j(this,ci,new Uint8Array(Vo.SIZE));for(const i of n.program.data){let r=i.start.value;for(const s of i.getValues())s!==Ru&&k(this,ci).set(s.toUint8Array(),r),r+=i.size/8}j(this,wl,new Set);for(const i of n.program.instructions){k(this,ci).set(i.toBytes(),i.start.value);for(let r=0;r<i.length;r++)k(this,wl).add(i.start.value+r)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!me.inRange(n))return yield{type:"memory:read.error",error:new Ct("address-out-of-range",n)},null;const i=M.fromUnsigned(k(this,ci).at(n),8);return yield{type:"memory:read.ok",value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},me.inRange(n)?k(this,wl).has(n)?(yield{type:"memory:write.error",error:new Ct("address-has-instruction",n)},!1):(k(this,ci).set([i.unsigned],n),yield{type:"memory:write.ok"},!0):(yield{type:"memory:write.error",error:new Ct("address-out-of-range",n)},!1)}toJSON(){return[...k(this,ci)]}},ci=new WeakMap,wl=new WeakMap,Z(Vo,"SIZE",me.MAX_ADDRESS+1),Vo);class kb{constructor(e){Z(this,"cpu");Z(this,"memory");Z(this,"io");const n={computer:this,...e};if(this.cpu=new kL(n),this.memory=new zL(n),e.devices==="pio-switches-and-leds")this.io=new BL(n);else if(e.devices==="pio-printer")this.io=new DL(n);else if(e.devices==="handshake")this.io=new _L(n);else throw new Error("Invalid devices configuration")}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var bt;class FL{constructor(){ue(this,bt,new kb({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){j(this,bt,new kb({...e,previous:k(this,bt)}))}getComputerState(){var e;return((e=k(this,bt))==null?void 0:e.toJSON())||null}startCPU(){if(!k(this,bt))throw new Ct("no-program");return k(this,bt).cpu.run()}get devices(){if(!k(this,bt))throw new Error("No computer loaded!");return{clock:{tick:()=>k(this,bt).io.clock.tick()},console:{readChar:e=>k(this,bt).io.console.setLastCharRead(e),clear:()=>k(this,bt).io.console.clear()},f10:{press:()=>k(this,bt).io.f10.press()},printer:{connected:()=>"printer"in k(this,bt).io,clear:()=>{if("printer"in k(this,bt).io)return k(this,bt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in k(this,bt).io)return k(this,bt).io.printer.print();console.warn("No printer connected to the computer!")}},switches:{connected:()=>"printer"in k(this,bt).io,toggle:e=>{if("switches"in k(this,bt).io)return k(this,bt).io.switches.toggle(e);console.warn("No switches connected to the computer!")}}}}}bt=new WeakMap;class We{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),or.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let i=[];return this.decompose(e,n,i,0),or.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Wu(this),s=new Wu(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Wu(this,e)}iterRange(e,n=this.length){return new RA(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new TA(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?We.empty:e.length<=32?new St(e):or.from(St.split(e,[]))}}class St extends We{constructor(e,n=jL(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new UL(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new St(Eb(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=Lh(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new St(a,o.length+s.length));else{let l=a.length>>1;i.push(new St(a.slice(0,l)),new St(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof St))return super.replace(e,n,i);let r=Lh(this.text,Lh(i.text,Eb(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new St(r,s):or.from(St.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new St(i,r)),i=[],r=-1);return r>-1&&n.push(new St(i,r)),n}}class or extends We{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?i.push(a):a.decompose(e-o,n-o,i,u)}o=l+1}}replace(e,n,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),u=this.lines-o.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[r]=l,new or(c,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof or))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],u=e.children[s];if(l!=u)return i+l.scanIdentical(u,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new St(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof or)for(let m of f.children)d(m);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof St&&l&&(p=c[c.length-1])instanceof St&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new St(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:or.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new or(a,n)}}We.empty=new St([""],0);function jL(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Lh(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function Eb(t,e,n){return Lh(t,[""],e,n)}class Wu{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof St?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof St?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof St){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof St?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class RA{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Wu(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class TA{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(We.prototype[Symbol.iterator]=function(){return this.iter()},Wu.prototype[Symbol.iterator]=RA.prototype[Symbol.iterator]=TA.prototype[Symbol.iterator]=function(){return this});class UL{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}let el="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<el.length;t++)el[t]+=el[t-1];function VL(t){for(let e=1;e<el.length;e+=2)if(el[e]>t)return el[e-1]<=t;return!1}function Cb(t){return t>=127462&&t<=127487}const Ab=8205;function rn(t,e,n=!0,i=!0){return(n?OA:HL)(t,e,i)}function OA(t,e,n){if(e==t.length)return e;e&&_A(t.charCodeAt(e))&&NA(t.charCodeAt(e-1))&&e--;let i=fn(t,e);for(e+=Mi(i);e<t.length;){let r=fn(t,e);if(i==Ab||r==Ab||n&&VL(r))e+=Mi(r),i=r;else if(Cb(r)){let s=0,o=e-2;for(;o>=0&&Cb(fn(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function HL(t,e,n){for(;e>0;){let i=OA(t,e-2,n);if(i<e)return i;e--}return 0}function _A(t){return t>=56320&&t<57344}function NA(t){return t>=55296&&t<56320}function fn(t,e){let n=t.charCodeAt(e);if(!NA(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return _A(i)?(n-55296<<10)+(i-56320)+65536:n}function Dw(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Mi(t){return t<65536?1:2}const cy=/\r\n?|\n/;var Tn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Tn||(Tn={}));class pr{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){dy(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new pr(e)}composeDesc(e){return this.empty?e:e.empty?this:MA(this,e)}mapDesc(e,n=!1){return e.empty?this:hy(this,e,n)}mapPos(e,n=-1,i=Tn.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=r+a;if(l<0){if(u>e)return s+(e-r);s+=a}else{if(i!=Tn.Simple&&u>=e&&(i==Tn.TrackDel&&r<e&&u>e||i==Tn.TrackBefore&&r<e||i==Tn.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new pr(e)}static create(e){return new pr(e)}}class Nt extends pr{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return dy(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return hy(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(We.empty);i.push(o?e.slice(s,s+o):We.empty)}s+=o}return new Nt(n,i)}compose(e){return this.empty?e:e.empty?this:MA(this,e,!0)}map(e,n=!1){return e.empty?this:hy(this,e,n,!0)}iterChanges(e,n=!1){dy(this,e,n)}get desc(){return pr.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new yc(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);tn(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;tn(n,c,d),d>0&&$s(i,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);tn(n,c,-1),tn(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new Nt(n,i),filtered:pr.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!r.length)return;o<n&&tn(r,n-o,-1);let d=new Nt(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof Nt){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?We.of(f.split(i||cy)):f:We.empty,m=p.length;if(d==h&&m==0)return;d<o&&l(),d>o&&tn(r,d-o,-1),tn(r,h-d,m),$s(s,r,p),o=h}}return u(e),l(!a),a}static empty(e){return new Nt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(We.empty);i[r]=We.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new Nt(n,i)}static createSet(e,n){return new Nt(e,n)}}function tn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function $s(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(We.empty);t.push(n)}}function dy(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let u=r,c=s,d=We.empty;for(;u+=a,c+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function hy(t,e,n,i=!1){let r=[],s=i?[]:null,o=new yc(t),a=new yc(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);tn(r,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(tn(r,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(tn(r,0,o.ins),s&&$s(s,r,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;tn(r,u,l<o.i?o.ins:0),s&&l<o.i&&$s(s,r,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?Nt.createSet(r,s):pr.create(r);throw new Error("Mismatched change set lengths")}}function MA(t,e,n=!1){let i=[],r=n?[]:null,s=new yc(t),o=new yc(e);for(let a=!1;;){if(s.done&&o.done)return r?Nt.createSet(i,r):pr.create(i);if(s.ins==0)tn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)tn(i,0,o.ins,a),r&&$s(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;tn(i,l,c,a),r&&c&&$s(r,i,o.text)}else o.ins==-1?(tn(i,s.off?0:s.len,l,a),r&&$s(r,i,s.textBit(l))):(tn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&$s(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>u),s.forward2(l),o.forward(l)}}}}class yc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?We.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?We.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class No{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new No(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return U.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return U.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return U.range(e.anchor,e.head)}static create(e,n,i){return new No(e,n,i)}}class U{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:U.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new U([this.main],0)}addRange(e,n=!0){return U.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,U.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new U(e.ranges.map(n=>No.fromJSON(n)),e.main)}static single(e,n=e){return new U([U.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return U.normalized(e.slice(),n);i=s.to}return new U(e,n)}static cursor(e,n=0,i,r){return No.create(e,e,(n==0?0:n<0?4:8)|(i==null?3:Math.min(2,i))|(r??33554431)<<5)}static range(e,n,i,r){let s=(i??33554431)<<5|(r==null?3:Math.min(2,r));return n<e?No.create(n,e,24|s):No.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?U.range(l,a):U.range(a,l))}}return new U(e,n)}}function DA(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let $w=0;class le{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=$w++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new le(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:Lw),!!e.static,e.enables)}of(e){return new Ih([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ih(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ih(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function Lw(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Ih{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=$w++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||fy(d,c)){let f=i(d);if(a?!Pb(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let m=Mf(h,p);if(this.dependencies.every(v=>v instanceof le?h.facet(v)===d.facet(v):v instanceof an?h.field(v,!1)==d.field(v,!1):!0)||(a?Pb(f=i(d),m,r):r(f=i(d),m)))return d.values[o]=m,0}else f=i(d);return d.values[o]=f,1}}}}function Pb(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function fy(t,e){let n=!1;for(let i of e)Gu(t,i)&1&&(n=!0);return n}function WL(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<i.length;c++){let d=Mf(l,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of i)Gu(l,u);return l.values[o]=a(l),1},update(l,u){if(!fy(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=fy(l,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&Lw(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const Rb=le.define({static:!0});class an{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new an($w++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Rb).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,Rb.of({field:this,create:e})]}get extension(){return this}}const Co={lowest:4,low:3,default:2,high:1,highest:0};function cu(t){return e=>new $A(e,t)}const id={highest:cu(Co.highest),high:cu(Co.high),default:cu(Co.default),low:cu(Co.low),lowest:cu(Co.lowest)};class $A{constructor(e,n){this.inner=e,this.prec=n}}class rd{of(e){return new py(this,e)}reconfigure(e){return rd.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class py{constructor(e,n){this.compartment=e,this.inner=n}}class Nf{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of GL(e,n,o))h instanceof an?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of r)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,m=c&&c[h]||[];if(f.every(v=>v.type==0))if(a[p.id]=l.length<<1|1,Lw(m,f))l.push(i.facet(p));else{let v=p.combine(f.map(g=>g.value));l.push(i&&p.compare(v,i.facet(p))?i.facet(p):v)}else{for(let v of f)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=u.length<<1,u.push(g=>v.dynamicSlot(g)));a[p.id]=u.length<<1,u.push(v=>WL(v,p,f))}}let d=u.map(h=>h(a));return new Nf(e,o,d,a,l,s)}}function GL(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let u=i[l].indexOf(o);u>-1&&i[l].splice(u,1),o instanceof py&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof py){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof $A)s(o.inner,o.prec);else if(o instanceof an)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Ih)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Co.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Co.default),i.reduce((o,a)=>o.concat(a))}function Gu(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Mf(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const LA=le.define(),IA=le.define({combine:t=>t.some(e=>e),static:!0}),BA=le.define({combine:t=>t.length?t[0]:void 0,static:!0}),zA=le.define(),FA=le.define(),jA=le.define(),UA=le.define({combine:t=>t.length?t[0]:!1});class cs{constructor(e,n){this.type=e,this.value=n}static define(){return new XL}}class XL{of(e){return new cs(this,e)}}class KL{constructor(e){this.map=e}of(e){return new Me(this,e)}}class Me{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Me(this.type,n)}is(e){return this.type==e}static define(e={}){return new KL(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}Me.reconfigure=Me.define();Me.appendConfig=Me.define();class $t{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&DA(i,n.newLength),s.some(a=>a.type==$t.time)||(this.annotations=s.concat($t.time.of(Date.now())))}static create(e,n,i,r,s,o){return new $t(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation($t.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}$t.time=cs.define();$t.userEvent=cs.define();$t.addToHistory=cs.define();$t.remote=cs.define();function ZL(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function VA(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=Nt.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:Me.mapEffects(t.effects,r).concat(Me.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function my(t,e,n){let i=e.selection,r=tl(e.annotations);return e.userEvent&&(r=r.concat($t.userEvent.of(e.userEvent))),{changes:e.changes instanceof Nt?e.changes:Nt.of(e.changes||[],n,t.facet(BA)),selection:i&&(i instanceof U?i:U.single(i.anchor,i.head)),effects:tl(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function HA(t,e,n){let i=my(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=VA(i,my(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=$t.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return JL(n?YL(r):r)}function YL(t){let e=t.startState,n=!0;for(let r of e.facet(zA)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:ZL(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=Nt.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=$t.create(e,r,t.selection&&t.selection.map(s),Me.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(FA);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof $t?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof $t?t=s[0]:t=HA(e,tl(s),!1)}return t}function JL(t){let e=t.startState,n=e.facet(jA),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=VA(i,my(e,s,t.changes.newLength),!0))}return i==t?t:$t.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const qL=[];function tl(t){return t==null?qL:Array.isArray(t)?t:[t]}var Xt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Xt||(Xt={}));const QL=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let gy;try{gy=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function e3(t){if(gy)return gy.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||QL.test(n)))return!0}return!1}function t3(t){return e=>{if(!/\S/.test(e))return Xt.Space;if(e3(e))return Xt.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Xt.Word;return Xt.Other}}class Le{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Gu(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Gu(this,i),Mf(this,i)}update(...e){return HA(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(rd.reconfigure)?(n&&(r=new Map,n.compartments.forEach((a,l)=>r.set(l,a)),n=null),r.set(o.value.compartment,o.value.extension)):o.is(Me.reconfigure)?(n=null,i=o.value):o.is(Me.appendConfig)&&(n=null,i=tl(i).concat(o.value));let s;n?s=e.startState.values.slice():(n=Nf.resolve(i,r,this),s=new Le(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new Le(n,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:U.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=tl(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(l.range.map(d)),r=r.compose(c),o=Me.mapEffects(o,c).concat(Me.mapEffects(tl(l.effects),d))}return{changes:r,selection:U.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Nt?e:Nt.of(e,this.doc.length,this.facet(Le.lineSeparator))}toText(e){return We.of(e.split(this.facet(Le.lineSeparator)||cy))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Gu(this,n),Mf(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof an&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Le.create({doc:e.doc,selection:U.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Nf.resolve(e.extensions||[],new Map),i=e.doc instanceof We?e.doc:We.of((e.doc||"").split(n.staticFacet(Le.lineSeparator)||cy)),r=e.selection?e.selection instanceof U?e.selection:U.single(e.selection.anchor,e.selection.head):U.single(0);return DA(r,i.length),n.staticFacet(IA)||(r=r.asSingle()),new Le(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Le.tabSize)}get lineBreak(){return this.facet(Le.lineSeparator)||`
`}get readOnly(){return this.facet(UA)}phrase(e,...n){for(let i of this.facet(Le.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(LA))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return t3(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=rn(n,o,!1);if(s(n.slice(l,o))!=Xt.Word)break;o=l}for(;a<r;){let l=rn(n,a);if(s(n.slice(a,l))!=Xt.Word)break;a=l}return o==a?null:U.range(o+i,a+i)}}Le.allowMultipleSelections=IA;Le.tabSize=le.define({combine:t=>t.length?t[0]:4});Le.lineSeparator=BA;Le.readOnly=UA;Le.phrases=le.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});Le.languageData=LA;Le.changeFilter=zA;Le.transactionFilter=FA;Le.transactionExtender=jA;rd.reconfigure=Me.define();function ho(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Yo{eq(e){return this==e}range(e,n=e){return yy.create(e,n,this)}}Yo.prototype.startSide=Yo.prototype.endSide=0;Yo.prototype.point=!1;Yo.prototype.mapMode=Tn.TrackDel;let yy=class WA{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new WA(e,n,i)}};function vy(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Iw{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new Iw(r,s,i,a):null,pos:o}}}class rt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new rt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(vy)),this.isEmpty)return n.length?rt.of(n):this;let a=new GA(this,null,-1).goto(0),l=0,u=[],c=new Jo;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(yy.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?rt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new rt(i,n,s||rt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return vc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return vc.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=Tb(o,a,i),u=new du(o,l,s),c=new du(a,l,s);i.iterGaps((d,h,f)=>Ob(u,d,c,h,f,r)),i.empty&&i.length==0&&Ob(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Tb(s,o),l=new du(s,a,0).goto(i),u=new du(o,a,0).goto(i);for(;;){if(l.to!=u.to||!wy(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>r)return!0;l.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new du(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:Math.min(c.length,l);r.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(r.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new Jo;for(let r of e instanceof yy?[e]:n?n3(e):e)i.add(r.from,r.to,r.value);return i.finish()}}rt.empty=new rt([],[],null,-1);function n3(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(vy(e,i)>0)return t.slice().sort(vy);e=i}return t}rt.empty.nextLayer=rt.empty;class Jo{finishChunk(e){this.chunks.push(new Iw(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Jo)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(rt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=rt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Tb(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class GA{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class vc{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new GA(o,n,i,s));return r.length==1?r[0]:new vc(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)lg(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)lg(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),lg(this.heap,0)}}}function lg(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class du{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=vc.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){jd(this.active,e),jd(this.activeTo,e),jd(this.activeRank,e),this.minActive=_b(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;Ud(this.active,n,i),Ud(this.activeTo,n,r),Ud(this.activeRank,n,s),e&&Ud(e,n,this.cursor.from),this.minActive=_b(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&jd(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function Ob(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&wy(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!wy(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function wy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function jd(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Ud(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function _b(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Yp(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=rn(t,r));return i}function i3(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=rn(t,r)}return i===!0?-1:t.length}const xy="ͼ",Nb=typeof Symbol>"u"?"__"+xy:Symbol.for(xy),by=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Mb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class qs{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Mb[Nb]||1;return Mb[Nb]=e+1,xy+e.toString(36)}static mount(e,n){(e[by]||new r3(e)).mount(Array.isArray(n)?n:[n])}}let Db=new Map;class r3{constructor(e){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=Db.get(n);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[by]=r;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Db.set(n,this)}else{this.styleTag=n.createElement("style");let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[by]=this}mount(e){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var Qs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},wc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},s3=typeof navigator<"u"&&/Mac/.test(navigator.platform),o3=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ut=0;Ut<10;Ut++)Qs[48+Ut]=Qs[96+Ut]=String(Ut);for(var Ut=1;Ut<=24;Ut++)Qs[Ut+111]="F"+Ut;for(var Ut=65;Ut<=90;Ut++)Qs[Ut]=String.fromCharCode(Ut+32),wc[Ut]=String.fromCharCode(Ut);for(var ug in Qs)wc.hasOwnProperty(ug)||(wc[ug]=Qs[ug]);function a3(t){var e=s3&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||o3&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?wc:Qs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Df(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Sy(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function l3(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Bh(t,e){if(!e.anchorNode)return!1;try{return Sy(t,e.anchorNode)}catch{return!1}}function xc(t){return t.nodeType==3?qo(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function $f(t,e,n,i){return n?$b(t,e,n,i,-1)||$b(t,e,n,i,1):!1}function Lf(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function $b(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:eo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Lf(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?eo(t):0}else return!1}}function eo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Bw(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function u3(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function c3(t,e,n,i,r,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body;if(f)h=u3(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let v=c.getBoundingClientRect();h={left:v.left,right:v.left+c.clientWidth,top:v.top,bottom:v.top+c.clientHeight}}let p=0,m=0;if(r=="nearest")e.top<h.top?(m=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+m&&(m=e.bottom-h.bottom+m+o)):e.bottom>h.bottom&&(m=e.bottom-h.bottom+o,n<0&&e.top-m<h.top&&(m=-(h.top+m-e.top+o)));else{let v=e.bottom-e.top,g=h.bottom-h.top;m=(r=="center"&&v<=g?e.top+v/2-g/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-g+o)-h.top}if(i=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),n>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,n<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||m)if(f)u.scrollBy(p,m);else{let v=0,g=0;if(m){let y=c.scrollTop;c.scrollTop+=m,g=c.scrollTop-y}if(p){let y=c.scrollLeft;c.scrollLeft+=p,v=c.scrollLeft-y}e={left:e.left-v,top:e.top-g,right:e.right-v,bottom:e.bottom-g},v&&Math.abs(v-p)<1&&(i="nearest"),g&&Math.abs(g-m)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function d3(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class h3{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?eo(n):0),i,Math.min(e.focusOffset,i?eo(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let ya=null;function XA(t){if(t.setActive)return t.setActive();if(ya)return t.focus(ya);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(ya==null?{get preventScroll(){return ya={preventScroll:!0},!0}}:void 0),!ya){ya=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Lb;function qo(t,e,n=e){let i=Lb||(Lb=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function nl(t,e,n){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function f3(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function KA(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function p3(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,eo(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=eo(n))}else{if(n==t)return!0;i=Lf(n),n=n.parentNode}}function ZA(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class mn{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new mn(e.parentNode,Lf(e),n)}static after(e,n){return new mn(e.parentNode,Lf(e)+1,n)}}const zw=[];class Qe{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Qe.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=Ib(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=Ib(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=eo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Qe.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=zw){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new YA(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}Qe.prototype.breakAfter=0;function Ib(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class YA{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function JA(t,e,n,i,r,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,a,l))){if(i<u.length){let f=u[i];f&&r<f.length?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,l)?s[s.length-1]=f:(r&&f.merge(0,r,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function qA(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,JA(t,u,c,a,l,i,0,r,s)}const Va="￿";class QA{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Le.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Va}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Qe.get(r),l=Qe.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Bb(r))||Bb(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Qe.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(n,i.offset))}}function Bb(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class zb{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let Zn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ky=typeof document<"u"?document:{documentElement:{style:{}}};const Ey=/Edge\/(\d+)/.exec(Zn.userAgent),eP=/MSIE \d/.test(Zn.userAgent),Cy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Zn.userAgent),Jp=!!(eP||Cy||Ey),Fb=!Jp&&/gecko\/(\d+)/i.test(Zn.userAgent),cg=!Jp&&/Chrome\/(\d+)/.exec(Zn.userAgent),jb="webkitFontSmoothing"in ky.documentElement.style,tP=!Jp&&/Apple Computer/.test(Zn.vendor),Ub=tP&&(/Mobile\/\w+/.test(Zn.userAgent)||Zn.maxTouchPoints>2);var ae={mac:Ub||/Mac/.test(Zn.platform),windows:/Win/.test(Zn.platform),linux:/Linux|X11/.test(Zn.platform),ie:Jp,ie_version:eP?ky.documentMode||6:Cy?+Cy[1]:Ey?+Ey[1]:0,gecko:Fb,gecko_version:Fb?+(/Firefox\/(\d+)/.exec(Zn.userAgent)||[0,0])[1]:0,chrome:!!cg,chrome_version:cg?+cg[1]:0,ios:Ub,android:/Android\b/.test(Zn.userAgent),webkit:jb,safari:tP,webkit_version:jb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:ky.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const m3=256;class yr extends Qe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof yr)||this.length-(n-e)+i.length>m3||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new yr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new mn(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return g3(this.dom,e,n)}}class ns extends Qe{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(KA(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof ns&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(qA(this,e,n,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new ns(this.mark,n,o)}domAtPos(e){return nP(this,e)}coordsAt(e,n){return rP(this,e,n)}}function g3(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?ae.chrome||ae.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=qo(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return ae.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?Bw(l,o<0):l||null}class Mo extends Qe{constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}static create(e,n,i){return new Mo(e,n,i)}split(e){let n=Mo.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Mo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Mo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return We.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):We.empty}domAtPos(e){return(this.length?e==0:this.side>0)?mn.before(this.dom):mn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Bw(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Rl extends Qe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Rl&&e.side==this.side}split(){return new Rl(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?mn.before(this.dom):mn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return We.empty}get isHidden(){return!0}}yr.prototype.children=Mo.prototype.children=Rl.prototype.children=zw;function nP(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new mn(n,0)}function iP(t,e,n){let i,{children:r}=t;n>0&&e instanceof ns&&r.length&&(i=r[r.length-1])instanceof ns&&i.mark.eq(e.mark)?iP(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function rP(t,e,n){let i=null,r=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):y3(t)}function y3(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=xc(e);return n[n.length-1]||null}function Ay(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Vb=Object.create(null);function Fw(t,e,n){if(t==e)return!0;t||(t=Vb),e||(e=Vb);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Py(t,e,n){let i=null;if(e)for(let r in e)n&&r in n||t.removeAttribute(i=r);if(n)for(let r in n)e&&e[r]==n[r]||t.setAttribute(i=r,n[r]);return!!i}function v3(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class ca{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}destroy(e){}}var mt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(mt||(mt={}));class je extends Yo{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new sd(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new to(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=sP(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new to(e,i,r,n,e.widget||null,!0)}static line(e){return new od(e)}static set(e,n=!1){return rt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}je.none=rt.empty;class sd extends je{constructor(e){let{start:n,end:i}=sP(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof sd&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Fw(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}sd.prototype.point=!1;class od extends je{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof od&&this.spec.class==e.spec.class&&Fw(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}od.prototype.mapMode=Tn.TrackBefore;od.prototype.point=!0;class to extends je{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Tn.TrackBefore:Tn.TrackAfter:Tn.TrackDel}get type(){return this.startSide<this.endSide?mt.WidgetRange:this.startSide<=0?mt.WidgetBefore:mt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof to&&w3(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}to.prototype.point=!0;function sP(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function w3(t,e){return t==e||!!(t&&e&&t.compare(e))}function Ry(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class pn extends Qe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof pn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),qA(this,e,n,i?i.children:[],s,o),!0}split(e){let n=new pn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Fw(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){iP(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=Ay(n,this.attrs||{})),i&&(this.attrs=Ay({class:i},this.attrs||{}))}domAtPos(e){return nP(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(KA(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Py(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Qe.get(r)instanceof ns;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Qe.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!ae.ios||!this.children.some(s=>s instanceof yr))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof yr)||/[^ -~]/.test(i.text))return null;let r=xc(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=rP(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}get type(){return mt.Text}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof pn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Fo extends Qe{constructor(e,n,i){super(),this.widget=e,this.length=n,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Fo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?mn.before(this.dom):mn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Fo(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i}get children(){return zw}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):We.empty}domBoundsAround(){return null}become(e){return e instanceof Fo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Xu{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Fo&&e.type==mt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new pn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Vd(new Rl(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Vd(new yr(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof to){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof to)if(i.block){let{type:l}=i;l==mt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Fo(i.widget||new Hb("div"),a,l))}else{let l=Mo.create(i.widget||new Hb("span"),a,a?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(Vd(new Rl(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Vd(l,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Xu(e,n,i,s);return o.openEnd=rt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Vd(t,e){for(let n of e)t=new ns(n,[t],t.length);return t}class Hb extends ca{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const oP=le.define(),aP=le.define(),lP=le.define(),uP=le.define(),Ty=le.define(),cP=le.define(),dP=le.define(),hP=le.define({combine:t=>t.some(e=>e)}),fP=le.define({combine:t=>t.some(e=>e)});class If{constructor(e,n="nearest",i="nearest",r=5,s=5){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new If(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Wb=Me.define({map:(t,e)=>t.map(e)});function zi(t,e,n){let i=t.facet(uP);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const qp=le.define({combine:t=>t.length?t[0]:!0});let x3=0;const Tu=le.define();class Yt{constructor(e,n,i,r){this.id=e,this.create=n,this.domEventHandlers=i,this.extension=r(this)}static define(e,n){const{eventHandlers:i,provide:r,decorations:s}=n||{};return new Yt(x3++,e,i,o=>{let a=[Tu.of(o)];return s&&a.push(bc.of(l=>{let u=l.plugin(o);return u?s(u):je.none})),r&&a.push(r(o)),a})}static fromClass(e,n){return Yt.define(i=>new e(i),n)}}class dg{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(zi(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){zi(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){zi(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const pP=le.define(),jw=le.define(),bc=le.define(),Uw=le.define(),mP=le.define();function gP(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(mP)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Ou=le.define();class wi{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new wi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new wi(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!l)return i;new wi(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class Bf{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Nt.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new wi(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new Bf(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var ht=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(ht||(ht={}));const Oy=ht.LTR,b3=ht.RTL;function yP(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const S3=yP("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),k3=yP("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),_y=Object.create(null),Ki=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);_y[e]=n,_y[n]=-e}function E3(t){return t<=247?S3[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?k3[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const C3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class il{constructor(e,n,i){this.from=e,this.to=n,this.level=i}get dir(){return this.level%2?b3:Oy}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const lt=[];function A3(t,e){let n=t.length,i=e==Oy?1:2,r=e==Oy?2:1;if(!t||i==1&&!C3.test(t))return vP(n);for(let o=0,a=i,l=i;o<n;o++){let u=E3(t.charCodeAt(o));u==512?u=a:u==8&&l==4&&(u=16),lt[o]=u==4?2:u,u&7&&(l=u),a=u}for(let o=0,a=i,l=i;o<n;o++){let u=lt[o];if(u==128)o<n-1&&a==lt[o+1]&&a&24?u=lt[o]=a:lt[o]=256;else if(u==64){let c=o+1;for(;c<n&&lt[c]==64;)c++;let d=o&&a==8||c<n&&lt[c]==8?l==1?1:8:256;for(let h=o;h<c;h++)lt[h]=d;o=c-1}else u==8&&l==1&&(lt[o]=1);a=u,u&7&&(l=u)}for(let o=0,a=0,l=0,u,c,d;o<n;o++)if(c=_y[u=t.charCodeAt(o)])if(c<0){for(let h=a-3;h>=0;h-=3)if(Ki[h+1]==-c){let f=Ki[h+2],p=f&2?i:f&4?f&1?r:i:0;p&&(lt[o]=lt[Ki[h]]=p),a=h;break}}else{if(Ki.length==189)break;Ki[a++]=o,Ki[a++]=u,Ki[a++]=l}else if((d=lt[o])==2||d==1){let h=d==i;l=h?0:1;for(let f=a-3;f>=0;f-=3){let p=Ki[f+2];if(p&2)break;if(h)Ki[f+2]|=2;else{if(p&4)break;Ki[f+2]|=4}}}for(let o=0;o<n;o++)if(lt[o]==256){let a=o+1;for(;a<n&&lt[a]==256;)a++;let l=(o?lt[o-1]:i)==1,u=(a<n?lt[a]:i)==1,c=l==u?l?1:2:i;for(let d=o;d<a;d++)lt[d]=c;o=a-1}let s=[];if(i==1)for(let o=0;o<n;){let a=o,l=lt[o++]!=1;for(;o<n&&l==(lt[o]!=1);)o++;if(l)for(let u=o;u>a;){let c=u,d=lt[--u]!=2;for(;u>a&&d==(lt[u-1]!=2);)u--;s.push(new il(u,c,d?2:1))}else s.push(new il(a,o,0))}else for(let o=0;o<n;){let a=o,l=lt[o++]==2;for(;o<n&&l==(lt[o]==2);)o++;s.push(new il(a,o,l?1:2))}return s}function vP(t){return[new il(0,t,0)]}let wP="";function P3(t,e,n,i,r){var s;let o=i.head-t.from,a=-1;if(o==0){if(!r||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),a=0)}else if(o==t.length){if(r)return null;let h=e[e.length-1];h.level!=n&&(o=h.side(!0,n),a=e.length-1)}a<0&&(a=il.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let l=e[a];o==l.side(r,n)&&(l=e[a+=r?1:-1],o=l.side(!r,n));let u=r==(l.dir==n),c=rn(t.text,o,u);if(wP=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=l.side(r,n))return U.cursor(c+t.from,u?-1:1,l.level);let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return!d&&l.level!=n?U.cursor(r?t.to:t.from,r?-1:1,n):d&&d.level<l.level?U.cursor(d.side(!r,n)+t.from,r?1:-1,d.level):U.cursor(c+t.from,r?-1:1,l.level)}class Gb extends Qe{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new pn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new wi(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=this.view.inputState.composing<0?null:T3(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:a,to:l}=this.hasComposition;n=new wi(a,l,e.changes.mapPos(a,-1),e.changes.mapPos(l,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(ae.ie||ae.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),o=N3(r,s,e.changes);return n=wi.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=ae.chrome||ae.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Fo&&o.widget instanceof Xb&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,m;if(i&&i.range.fromB<d&&i.range.toB>c){let x=Xu.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),S=Xu.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=x.breakAtStart,p=x.openStart,m=S.openEnd;let A=this.compositionView(i);S.breakAtStart?A.breakAfter=1:S.content.length&&A.merge(A.length,A.length,S.content[0],!1,S.openStart,0)&&(A.breakAfter=S.content[0].breakAfter,S.content.shift()),x.content.length&&A.merge(0,0,x.content[x.content.length-1],!0,0,x.openEnd)&&x.content.pop(),h=x.content.concat(A).concat(S.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:m}=Xu.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:g}=s.findPos(u,1),{i:y,off:w}=s.findPos(l,-1);JA(this,y,w,v,g,h,f,p,m)}i&&this.fixCompositionDOM(i)}compositionView(e){let n=new yr(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new ns(r,[n],n.length);let i=new pn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let a=Qe.get(s);a!=o&&(a&&(a.dom=null),o.setDOM(s))},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&Bh(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.domAtPos(a.anchor),u=a.empty?l:this.domAtPos(a.head);if(ae.gecko&&a.empty&&!this.hasComposition&&R3(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new mn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!$f(l.node,l.offset,c.anchorNode,c.anchorOffset)||!$f(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{ae.android&&ae.chrome&&this.dom.contains(c.focusNode)&&M3(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Df(this.view.root);if(d)if(a.empty){if(ae.gecko){let h=O3(l.node,l.offset);if(h&&h!=3){let f=bP(l.node,l.offset,h==1?1:-1);f&&(l=new mn(f,h==1?0:f.nodeValue.length))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new mn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new mn(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Df(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=pn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}nearest(e){for(let n=e;n;){let i=Qe.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof pn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=mt.WidgetBefore&&s.type!=mt.WidgetAfter&&(!r||n==2||this.children[r-1].breakAfter||this.children[r-1].type==mt.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);i=o}}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof pn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof yr))return null;let s=rn(r.text,i);if(s==i)return null;let o=qo(r.dom,i,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==ht.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,m=p?xc(p):[];if(m.length){let v=m[m.length-1],g=l?v.right-f.left:f.right-v.left;g>a&&(a=g,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?ht.RTL:ht.LTR}measureTextSize(){for(let s of this.children)if(s instanceof pn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=xc(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new YA(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=n.lineBlockAt(o).bottom-n.lineBlockAt(i).top;e.push(je.replace({widget:new Xb(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return je.set(e)}updateDeco(){let e=this.view.state.facet(bc).map((n,i)=>(this.dynamicDecorationMap[i]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=gP(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom};c3(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==ht.LTR)}}function R3(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class Xb extends ca{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function xP(t){let e=t.observer.selectionRange,n=e.focusNode&&bP(e.focusNode,e.focusOffset,0);if(!n)return null;let i=Qe.get(n),r,s;if(i instanceof yr)r=i.posAtStart,s=r+i.length;else e:for(let o=0,a=n;;){for(let u=a.previousSibling,c;u;u=u.previousSibling){if(c=Qe.get(u)){r=s=c.posAtEnd+o;break e}let d=new QA([],t.state);if(d.readNode(u),d.text.indexOf(Va)>-1)return null;o+=d.text.length}if(a=a.parentNode,!a)return null;let l=Qe.get(a);if(l){r=s=l.posAtStart+o;break}}return{from:r,to:s,node:n}}function T3(t,e){let n=xP(t);if(!n)return null;let{from:i,to:r,node:s}=n,o=e.mapPos(i,-1),a=e.mapPos(r,1),l=s.nodeValue;if(/[\n\r]/.test(l))return null;if(a-o!=l.length){let h=e.mapPos(i,1),f=e.mapPos(r,-1);if(f-h==l.length)o=h,a=f;else if(t.state.doc.sliceString(a-l.length,a)==l)o=a-l.length;else if(t.state.doc.sliceString(o,o+l.length)==l)a=o+l.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,a)!=l||o>u.head||a<u.head)return null;let c=[],d=new wi(i,r,o,a);for(let h=s.parentNode;;h=h.parentNode){let f=Qe.get(h);if(f instanceof ns)c.push({node:h,deco:f.mark});else{if(f instanceof pn||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:d,text:s,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new sd({inclusive:!0,attributes:v3(h),tagName:h.tagName.toLowerCase()})});else return null}}}function bP(t,e,n){if(n<=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=eo(i);else break}if(n>=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r<i.childNodes.length&&n>=0)i=i.childNodes[r],r=0;else break}return null}function O3(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class _3{constructor(){this.changes=[]}compareRange(e,n){Ry(e,n,this.changes)}comparePoint(e,n){Ry(e,n,this.changes)}}function N3(t,e,n){let i=new _3;return rt.compare(t,e,n,i),i.changes}function M3(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function D3(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return U.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=rn(r.text,s,!1):a=rn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let u=rn(r.text,o,!1);if(i(r.text.slice(u,o))!=l)break;o=u}for(;a<r.length;){let u=rn(r.text,a);if(i(r.text.slice(a,u))!=l)break;a=u}return U.range(o+r.from,a+r.from)}function $3(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function L3(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function hg(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Kb(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Zb(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Ny(t,e,n){let i,r,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let m=xc(p);for(let v=0;v<m.length;v++){let g=m[v];r&&hg(r,g)&&(g=Kb(Zb(g,r.bottom),r.top));let y=$3(e,g),w=L3(n,g);if(y==0&&w==0)return p.nodeType==3?Yb(p,e,n):Ny(p,e,n);if(!i||o>w||o==w&&s>y){i=p,r=g,s=y,o=w;let x=w?n<g.top?-1:1:y?e<g.left?-1:1:0;a=!x||(x>0?v<m.length-1:v>0)}y==0?n>g.bottom&&(!c||c.bottom<g.bottom)?(l=p,c=g):n<g.top&&(!d||d.top>g.top)&&(u=p,d=g):c&&hg(c,g)?c=Zb(c,g.bottom):d&&hg(d,g)&&(d=Kb(d,g.top))}}if(c&&c.bottom>=n?(i=l,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Yb(i,h,n);if(a&&i.contentEditable!="false")return Ny(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function Yb(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=qo(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((ae.chrome||ae.gecko)&&qo(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};r=a+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function SP(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let x=t.viewState.heightOracle.textHeight/2,S=!1;l=t.elementAtHeight(h),l.type!=mt.Text;)for(;h=i>0?l.bottom+x:l.top-x,!(h>=0&&h<=u);){if(S)return n?null:0;S=!0,i=-i}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:Jb(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Jb(t,o,l,c,d);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,v=m.elementFromPoint(c,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(c=Math.max(o.left+1,Math.min(o.right-1,c)),v=m.elementFromPoint(c,d),v&&!t.contentDOM.contains(v)&&(v=null));let g,y=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let x=p.caretPositionFromPoint(c,d);x&&({offsetNode:g,offset:y}=x)}else if(p.caretRangeFromPoint){let x=p.caretRangeFromPoint(c,d);x&&({startContainer:g,startOffset:y}=x,(!t.contentDOM.contains(g)||ae.safari&&I3(g,y,c)||ae.chrome&&B3(g,y,c))&&(g=void 0))}}if(!g||!t.docView.dom.contains(g)){let x=pn.find(t.docView,f);if(!x)return h>l.top+l.height/2?l.to:l.from;({node:g,offset:y}=Ny(x.dom,c,d))}let w=t.docView.nearest(g);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let x=w.dom.getBoundingClientRect();return e.y<x.top||e.y<=x.bottom&&e.x<=(x.left+x.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(g,y)+w.posAtStart}function Jb(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+i3(o,s,t.state.tabSize)}function I3(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return qo(t,i-1,i).getBoundingClientRect().left>n}function B3(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():qo(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function My(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==mt.Text))return i}return n}function z3(t,e,n,i){let r=My(t,e.head),s=!i||r.type!=mt.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==ht.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return U.cursor(l,n?-1:1)}return U.cursor(n?r.to:r.from,n?-1:1)}function qb(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let u=P3(r,s,o,a,n),c=wP;if(!u){if(r.number==(n?t.state.doc.lines:1))return a;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=U.cursor(n?r.from:r.to)}if(l){if(!l(c))return a}else{if(!i)return u;l=i(c)}a=u}}function F3(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Xt.Space&&(r=o),r==o}}function j3(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return U.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,m=SP(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<r:m>r))return U.cursor(m,e.assoc,void 0,o)}}function zh(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function fg(t,e,n){let i=zh(t.state.facet(Uw).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:U.cursor(i,i<n.from?1:-1)}class U3{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(i,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(r.type,e,r)?r.preventDefault():i(e,r))};for(let i in Rt){let r=Rt[i];e.contentDOM.addEventListener(i,s=>{Qb(e,s)&&n(r,s)},Dy[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{if(i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(Rt.mousedown,i),!i.defaultPrevented&&i.button==2)){let r=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=r,200)}}),e.scrollDOM.addEventListener("drop",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(Rt.drop,i)}),ae.chrome&&ae.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,ae.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var i;let r;this.customHandlers=[];for(let s of n)if(r=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{Qb(e,a)&&this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,n,i){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,i,n)||i.defaultPrevented)return!0}catch(o){zi(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,n,e)}catch(s){zi(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&EP.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),ae.android&&ae.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let i;return ae.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((i=kP.find(r=>r.keyCode==n.keyCode))&&!n.ctrlKey||V3.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=i||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,nl(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ae.safari&&!ae.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const kP=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],V3="dthko",EP=[16,17,18,20,91,92,224,225],Hd=6;function Wd(t){return Math.max(0,t)*.7+8}function H3(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class W3{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=d3(e.contentDOM),this.atoms=e.state.facet(Uw).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Le.allowMultipleSelections)&&G3(e,n),this.dragging=K3(e,n)&&RP(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&H3(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=gP(this.view);e.clientX-o.left<=s.left+Hd?i=-Wd(s.left-e.clientX):e.clientX+o.right>=s.right-Hd&&(i=Wd(e.clientX-s.right)),e.clientY-o.top<=s.top+Hd?r=-Wd(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Hd&&(r=Wd(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=zh(this.atoms,r.from,0);o!=r.from&&(s=U.cursor(o,-1))}else{let o=zh(this.atoms,r.from,-1),a=zh(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=U.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?U.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection)||i.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function G3(t,e){let n=t.state.facet(oP);return n.length?n[0](e):ae.mac?e.metaKey:e.ctrlKey}function X3(t,e){let n=t.state.facet(aP);return n.length?n[0](e):ae.mac?!e.altKey:!e.ctrlKey}function K3(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Df(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Qb(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Qe.get(n))&&i.ignoreEvent(e))return!1;return!0}const Rt=Object.create(null),Dy=Object.create(null),CP=ae.ie&&ae.ie_version<15||ae.ios&&ae.webkit_version<604;function Z3(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),AP(t,n.value)},50)}function AP(t,e){let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if($y!=null&&n.selection.ranges.every(l=>l.empty)&&$y==s.toString()){let l=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:U.cursor(u.from+d.length)}})}else o?i=n.changeByRange(l=>{let u=s.line(r++);return{changes:{from:l.from,to:l.to,insert:u.text},range:U.cursor(l.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Rt.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};Rt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Rt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Dy.touchstart=Dy.touchmove={passive:!0};Rt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let i of t.state.facet(lP))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=q3(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new W3(t,e,n,i)),i&&t.observer.ignore(()=>XA(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function eS(t,e,n,i){if(i==1)return U.cursor(e,n);if(i==2)return D3(t.state,e,n);{let r=pn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,U.range(o,a)}}let PP=(t,e)=>t>=e.top&&t<=e.bottom,tS=(t,e,n)=>PP(e,n)&&t>=n.left&&t<=n.right;function Y3(t,e,n,i){let r=pn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&tS(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&tS(n,i,a)?1:o&&PP(i,o)?-1:1}function nS(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Y3(t,n,e.clientX,e.clientY)}}const J3=ae.ie&&ae.ie_version<=11;let iS=null,rS=0,sS=0;function RP(t){if(!J3)return t.detail;let e=iS,n=sS;return iS=t,sS=Date.now(),rS=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(rS+1)%3:1}function q3(t,e){let n=nS(t,e),i=RP(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=nS(t,s),u,c=eS(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=eS(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?U.range(h,f):U.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(u=Q3(r,l.pos))?u:a?r.addRange(c):U.create([c])}}}function Q3(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return U.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Rt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:i}=t.inputState;i&&(i.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function oS(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=i&&s&&s.dragging&&X3(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}Rt.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let i=Array(n.length),r=0,s=()=>{++r==n.length&&oS(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}}else oS(t,e,e.dataTransfer.getData("Text"),!0)};Rt.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=CP?null:e.clipboardData;n?(AP(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):Z3(t)};function eI(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function tI(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}let $y=null;Rt.copy=Rt.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=tI(t.state);if(!n&&!r)return;$y=r?n:null;let s=CP?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):eI(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const TP=cs.define();function OP(t,e){let n=[];for(let i of t.facet(dP)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:TP.of(!0)}):null}function _P(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=OP(t.state,e);n?t.dispatch(n):t.update([])}},10)}Rt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),_P(t)};Rt.blur=t=>{t.observer.clearSelectionRange(),_P(t)};Rt.compositionstart=Rt.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};Rt.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,ae.chrome&&ae.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};Rt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Rt.beforeinput=(t,e)=>{var n;let i;if(ae.chrome&&ae.android&&(i=kP.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const aS=["pre-wrap","normal","pre-line","break-spaces"];class nI{constructor(e){this.lineWrapping=e,this.doc=We.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return aS.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=aS.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class iI{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class ar{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?mt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof to?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ar(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var nt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(nt||(nt={}));const Fh=.001;class vn{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>Fh&&(e.heightChanged=!0),this.height=n)}replace(e,n,i){return vn.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=r[a],h=s.lineAt(l,nt.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,nt.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,nt.ByPosNoHeight,i,0,0));c+=h.from-l,l=h.from;let p=Vw.build(i.setDoc(o),e,c,d);s=s.replace(l,u,p)}return s.updateHeight(i,0)}static empty(){return new Gn(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new rI(vn.of(e.slice(0,n)),o,vn.of(e.slice(i)))}}vn.prototype.size=1;class NP extends vn{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new ar(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Gn extends NP{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new ar(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Gn||r instanceof Ft&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Ft?r=new Gn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):vn.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ft extends vn{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(i,e-d/2);return new ar(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:d}=n.doc.line(s+u);return new ar(c,d,i+a*u,a,0)}}lineAt(e,n,i,r,s){if(n==nt.ByHeight)return this.blockAt(e,i,r,s);if(n==nt.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new ar(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=r+a*d+l*(u.from-s-d);return new ar(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new ar(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Ft?i[i.length-1]=new Ft(s.length+r):i.push(null,new Ft(r-1))}if(e>0){let s=i[0];s instanceof Ft?i[0]=new Ft(e+s.length):i.unshift(new Ft(e-1),null)}return vn.of(i)}decomposeLeft(e,n){n.push(new Ft(e-1),null)}decomposeRight(e,n){n.push(null,new Ft(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Ft(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=Fh&&(l=-2);let h=new Gn(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new Ft(s-a).updateHeight(e,a));let u=vn.of(o);return(l<0||Math.abs(u.height-this.height)>=Fh||Math.abs(l-this.heightMetrics(e,n).perLine)>=Fh)&&(e.heightChanged=!0),u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class rI extends vn{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==nt.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==nt.ByPosNoHeight?nt.ByPosNoHeight:nt.ByPos;return l?u.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let u=this.lineAt(l,nt.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&lS(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),lS(s,a)}return vn.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?vn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function lS(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Ft&&(i=t[e+1])instanceof Ft&&t.splice(e-1,3,new Ft(n.length+1+i.length))}const sI=5;class Vw{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Gn?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Gn(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new NP(o,r,i)):(o||s||r>=sI)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Gn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Ft(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Gn)return e;let n=new Gn(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let i=(n=e.deco)===null||n===void 0?void 0:n.type;i==mt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i!=mt.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Gn)&&!this.isCovered?this.nodes.push(new Gn(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Gn&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new Vw(i,e);return rt.spans(n,i,r,s,0),s.finish(i)}}function oI(t,e,n){let i=new aI;return rt.compare(t,e,n,i,0),i.changes}class aI{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&Ry(e,n,this.changes,5)}}function lI(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=u==t.parentNode?h.bottom:Math.min(l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function uI(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class pg{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return je.replace({widget:new cI(this.size,e)}).range(this.from,this.to)}}class cI extends ca{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class uS{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=cS,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ht.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(jw).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new nI(n),this.stateDeco=e.facet(bc).filter(i=>typeof i!="function"),this.heightMap=vn.empty().applyChanges(this.stateDeco,We.empty,this.heightOracle.setDoc(e.doc),[new wi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=je.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Gd(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?cS:new fI(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:_u(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(bc).filter(c=>typeof c!="function");let r=e.changedRanges,s=wi.extendWithRanges(r,oI(i,this.stateDeco,e?e.changes:Nt.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(fP)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?ht.RTL:ht.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0,d=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=ZA(e.scrollDOM);let f=(this.printing?uI:lI)(n,this.paddingTop),p=f.top-this.pixelViewport.top,m=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let g=a.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let w=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(w)&&(o=!0),o||r.lineWrapping&&Math.abs(g-this.contentDOMWidth)>r.charWidth){let{lineHeight:x,charWidth:S,textHeight:A}=e.docView.measureTextSize();o=x>0&&r.refresh(s,x,S,A,g/S,w),o&&(e.docView.minWidth=0,u|=8)}p>0&&m>0?c=Math.max(p,m):p<0&&m<0&&(c=Math.min(p,m)),r.heightChanged=!1;for(let x of this.viewports){let S=x.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(x);this.heightMap=(o?vn.empty().applyChanges(this.stateDeco,We.empty,this.heightOracle,[new wi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new iI(x.from,S))}r.heightChanged&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Gd(r.lineAt(o-i*1e3,nt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,nt.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,nt.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new Gd(r.lineAt(h-1e3/2,nt.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,nt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Gd(this.heightMap.lineAt(i,nt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,nt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,nt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,nt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new pg(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=ht.LTR&&!i)return[];let a=[],l=(u,c,d,h)=>{if(c-u<s)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let v of p)if(v>u&&v<c){l(u,v-10,d,h),l(v+10,c,d,h);return}let m=hI(e,v=>v.from>=d.from&&v.to<=d.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-c)<s&&!p.some(g=>v.from<g&&v.to>g));if(!m){if(c<d.to&&n&&i&&n.visibleRanges.some(v=>v.from<=c&&v.to>=c)){let v=n.moveToLineBoundary(U.cursor(c),!1,!0).head;v>u&&(c=v)}m=new pg(u,c,this.gapSize(d,u,c,h))}a.push(m)};for(let u of this.viewportLines){if(u.length<o)continue;let c=dI(u.from,u.to,this.stateDeco);if(c.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,v;if(d!=null){let g=Kd(c,d),y=((this.visibleBottom-this.visibleTop)/2+p)/u.height;m=g-y,v=g+y}else m=(this.visibleTop-u.top-p)/u.height,v=(this.visibleBottom-u.top+p)/u.height;h=Xd(c,m),f=Xd(c,v)}else{let p=c.total*this.heightOracle.charWidth,m=r*this.heightOracle.charWidth,v,g;if(d!=null){let y=Kd(c,d),w=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/p;v=y-w,g=y+w}else v=(this.pixelViewport.left-m)/p,g=(this.pixelViewport.right+m)/p;h=Xd(c,v),f=Xd(c,g)}h>u.from&&l(u.from,h,u,c),f<u.to&&l(f,u.to,u,c)}return a}gapSize(e,n,i,r){let s=Kd(r,i)-Kd(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){pg.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=je.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];rt.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||_u(this.heightMap.lineAt(e,nt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return _u(this.heightMap.lineAt(this.scaler.fromDOM(e),nt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return _u(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Gd{constructor(e,n){this.from=e,this.to=n}}function dI(t,e,n){let i=[],r=t,s=0;return rt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Xd({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Kd(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function hI(t,e){for(let n of t)if(e(n))return n}const cS={toDOM(t){return t},fromDOM(t){return t},scale:1};class fI{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let u=n.lineAt(a,nt.ByPos,e,0,0).top,c=n.lineAt(l,nt.ByPos,e,0,0).bottom;return r+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function _u(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new ar(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>_u(r,e)):t._content)}const Zd=le.define({combine:t=>t.join(" ")}),Ly=le.define({combine:t=>t.indexOf(!0)>-1}),Iy=qs.newName(),MP=qs.newName(),DP=qs.newName(),$P={"&light":"."+MP,"&dark":"."+DP};function By(t,e,n){return new qs(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const pI=By("."+Iy,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},$P);class mI{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:yI(e),l=new QA(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=vI(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Sy(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Sy(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=U.single(u,l)}}}function LP(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,u=null;(s===8||ae.android&&e.text.length<a-o)&&(l=r.to,u="end");let c=gI(t.state.doc.sliceString(o,a,Va),e.text,l-o,u);c&&(ae.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Va+Va&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:We.of(e.text.slice(c.from,c.toB).split(Va))})}else i&&(!t.hasFocus&&t.state.facet(qp)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(ae.mac||ae.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=U.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:We.of([" "])}):ae.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=U.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:We.of([" "])}),n){let o=t.state;if(ae.ios&&t.inputState.flushIOSKey(t)||ae.android&&(n.from==r.from&&n.to==r.to&&n.insert.length==1&&n.insert.lines==2&&nl(t.contentDOM,"Enter",13)||(n.from==r.from-1&&n.to==r.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&nl(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&n.insert.length==0&&nl(t.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(t.state.facet(cP).some(c=>c(t,n.from,n.to,a)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let l;if(n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=r.from<n.from?o.sliceDoc(r.from,n.from):"",d=r.to>n.to?o.sliceDoc(n.to,r.to):"";l=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let c=o.changes(n),d=i&&i.main.to<=c.newLength?i.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){let h=t.state.sliceDoc(n.from,n.to),f=xP(t)||t.state.doc.lineAt(r.head),p=r.to-n.to,m=r.to-r.from;l=o.changeByRange(v=>{if(v.from==r.from&&v.to==r.to)return{changes:c,range:d||v.map(c)};let g=v.to-p,y=g-h.length;if(v.to-v.from!=m||t.state.sliceDoc(y,g)!=h||f&&v.to>=f.from&&v.from<=f.to)return{range:v};let w=o.changes({from:y,to:g,insert:n.insert}),x=v.to-r.to;return{changes:w,range:d?U.range(Math.max(0,d.anchor+x),Math.max(0,d.head+x)):v.map(w)}})}else l={changes:c,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(l,{scrollIntoView:!0,userEvent:u}),!0}else if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function gI(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function yI(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new zb(n,i)),(r!=n||s!=i)&&e.push(new zb(r,s))),e}function vI(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?U.single(n+e,i+e):null}const wI={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},mg=ae.ie&&ae.ie_version<=11;class xI{constructor(e){this.view=e,this.active=!1,this.selectionRange=new h3,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(ae.ie&&ae.ie_version<=11||ae.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),mg&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(qp)?i.root.activeElement!=this.dom:!Bh(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(ae.ie&&ae.ie_version<=11||ae.android&&ae.chrome)&&!i.state.selection.main.empty&&r.focusNode&&$f(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=ae.safari&&e.root.nodeType==11&&l3(this.dom.ownerDocument)==this.dom&&bI(this.view)||Df(e.root);if(!n||this.selectionRange.eq(n))return!1;let i=Bh(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&p3(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,wI),mg&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),mg&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&nl(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Bh(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new mI(this.view,e,n,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let i=this.view.state,r=LP(this.view,n);return this.view.state==i&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=dS(n,e.previousSibling||e.target.previousSibling,-1),r=dS(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function dS(t,e,n){for(;e;){let i=Qe.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function bI(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return $f(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}class fe{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||f3(e.parent)||document,this.viewState=new uS(e.state||Le.create(e)),this.plugins=this.state.facet(Tu).map(n=>new dg(n));for(let n of this.plugins)n.update(this);this.observer=new xI(this),this.inputState=new U3(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Gb(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof $t?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(TP))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=OP(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(Le.phrases)!=this.state.facet(Le.phrases))return this.setState(s);r=Bf.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new If(f.empty?f:U.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Wb)&&(d=f.value)}this.viewState.update(r,d),this.bidiCache=zf.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Ou)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Zd)!=r.state.facet(Zd)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let h of this.state.facet(Ty))h(r);(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!LP(this,c)&&u.force&&nl(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new uS(e),this.plugins=e.facet(Tu).map(i=>new dg(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Gb(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Tu),i=e.state.facet(Tu);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new dg(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,{scrollTop:r}=i,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;r!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(ZA(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return zi(this.state,p),hS}}),d=Bf.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let f=0;f<u.length;f++)if(c[f]!=hS)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){zi(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=i.scrollTop=r+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(Ty))a(n)}get themeClasses(){return Iy+" "+(this.state.facet(Ly)?DP:MP)+" "+this.state.facet(Zd)}updateAttrs(){let e=fS(this,pP,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(qp)?"true":"false",class:"cm-content",style:`${ae.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),fS(this,jw,n);let i=this.observer.ignore(()=>{let r=Py(this.contentDOM,this.contentAttrs,n),s=Py(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(fe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Ou),qs.mount(this.root,this.styleModules.concat(pI).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return fg(this,e,qb(this,e,n,i))}moveByGroup(e,n){return fg(this,e,qb(this,e,n,i=>F3(this,e.head,i)))}moveToLineBoundary(e,n,i=!0){return z3(this,e,n,i)}moveVertically(e,n,i){return fg(this,e,j3(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),SP(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[il.find(s,e-r.from,-1,n)];return Bw(i,o.dir==ht.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(hP)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>SI)return vP(e.length);let n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n)return r.order;let i=A3(e.text,n);return this.bidiCache.push(new zf(e.from,e.to,n,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ae.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{XA(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Wb.of(new If(typeof e=="number"?U.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return Yt.define(()=>({}),{eventHandlers:e})}static theme(e,n){let i=qs.newName(),r=[Zd.of(i),Ou.of(By(`.${i}`,e))];return n&&n.dark&&r.push(Ly.of(!0)),r}static baseTheme(e){return id.lowest(Ou.of(By("."+Iy,e,$P)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Qe.get(i)||Qe.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}fe.styleModule=Ou;fe.inputHandler=cP;fe.focusChangeEffect=dP;fe.perLineTextDirection=hP;fe.exceptionSink=uP;fe.updateListener=Ty;fe.editable=qp;fe.mouseSelectionStyle=lP;fe.dragMovesSelection=aP;fe.clickAddsSelectionRange=oP;fe.decorations=bc;fe.atomicRanges=Uw;fe.scrollMargins=mP;fe.darkTheme=Ly;fe.contentAttributes=jw;fe.editorAttributes=pP;fe.lineWrapping=fe.contentAttributes.of({class:"cm-lineWrapping"});fe.announce=Me.define();const SI=4096,hS={};class zf{constructor(e,n,i,r){this.from=e,this.to=n,this.dir=i,this.order=r}static update(e,n){if(n.empty)return e;let i=[],r=e.length?e[e.length-1].dir:ht.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new zf(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return i}}function fS(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&Ay(o,n)}return n}const kI=ae.mac?"mac":ae.windows?"win":ae.linux?"linux":"key";function EI(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Yd(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const CI=id.default(fe.domEventHandlers({keydown(t,e){return zP(BP(e.state),t,e,"editor")}})),IP=le.define({enables:CI}),pS=new WeakMap;function BP(t){let e=t.facet(IP),n=pS.get(e);return n||pS.set(e,n=RI(e.reduce((i,r)=>i.concat(r),[]))),n}function AI(t,e,n){return zP(BP(t.state),e,t,n)}let As=null;const PI=4e3;function RI(t,e=kI){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(g=>EI(g,e));for(let g=1;g<p.length;g++){let y=p.slice(0,g).join(" ");r(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let x=As={view:w,prefix:y,scope:o};return setTimeout(()=>{As==x&&(As=null)},PI),!0}]})}let m=p.join(" ");r(m,!1);let v=f[m]||(f[m]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&v.run.push(l),u&&(v.preventDefault=!0),c&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in c)c[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function zP(t,e,n,i){let r=a3(e),s=fn(r,0),o=Mi(s)==r.length&&r!=" ",a="",l=!1,u=!1,c=!1;As&&As.view==n&&As.scope==i&&(a=As.prefix+" ",EP.indexOf(e.keyCode)<0&&(u=!0,As=null));let d=new Set,h=v=>{if(v){for(let g of v.run)if(!d.has(g)&&(d.add(g),g(n,e)))return v.stopPropagation&&(c=!0),!0;v.preventDefault&&(v.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,m;return f&&(h(f[a+Yd(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ae.windows&&e.ctrlKey&&e.altKey)&&(p=Qs[e.keyCode])&&p!=r?(h(f[a+Yd(p,e,!0)])||e.shiftKey&&(m=wc[e.keyCode])!=r&&m!=p&&h(f[a+Yd(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+Yd(r,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class ad{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=FP(e);return[new ad(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return TI(e,n,i)}}function FP(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==ht.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function mS(t,e,n){let i=U.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:mt.Text}}function TI(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==ht.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=FP(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=My(t,i),p=My(t,r),m=f.type==mt.Text?f:null,v=p.type==mt.Text?p:null;if(m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=mS(t,i,m)),v&&(t.lineWrapping||p.widgetLineBreaks)&&(v=mS(t,r,v)),m&&v&&m.from==v.from)return y(w(n.from,n.to,m));{let S=m?w(n.from,null,m):x(f,!1),A=v?w(null,n.to,v):x(p,!0),P=[];return(m||f).to<(v||p).from-(m&&v?1:0)||f.widgetLineBreaks>1&&S.bottom+t.defaultLineHeight/2<A.top?P.push(g(d,S.bottom,h,A.top)):S.bottom<A.top&&t.elementAtHeight((S.bottom+A.top)/2).type==mt.Text&&(S.bottom=A.top=(S.bottom+A.top)/2),y(S).concat(P).concat(y(A))}function g(S,A,P,E){return new ad(e,S-l.left,A-l.top-.01,P-S,E-A+.01)}function y({top:S,bottom:A,horizontal:P}){let E=[];for(let R=0;R<P.length;R+=2)E.push(g(P[R],S,P[R+1],A));return E}function w(S,A,P){let E=1e9,R=-1e9,N=[];function T(_,D,z,L,O){let $=t.coordsAtPos(_,_==P.to?-2:2),F=t.coordsAtPos(z,z==P.from?2:-2);!$||!F||(E=Math.min($.top,F.top,E),R=Math.max($.bottom,F.bottom,R),O==ht.LTR?N.push(s&&D?d:$.left,s&&L?h:F.right):N.push(!s&&L?d:F.left,!s&&D?h:$.right))}let B=S??P.from,I=A??P.to;for(let _ of t.visibleRanges)if(_.to>B&&_.from<I)for(let D=Math.max(_.from,B),z=Math.min(_.to,I);;){let L=t.state.doc.lineAt(D);for(let O of t.bidiSpans(L)){let $=O.from+L.from,F=O.to+L.from;if($>=z)break;F>D&&T(Math.max($,D),S==null&&$<=B,Math.min(F,z),A==null&&F>=I,O.dir)}if(D=L.to+1,D>=z)break}return N.length==0&&T(B,S==null,I,A==null,t.textDirection),{top:E,bottom:R,horizontal:N}}function x(S,A){let P=a.top+(A?S.top:S.bottom);return{top:P,bottom:P,horizontal:[]}}}function OI(t,e){return t.constructor==e.constructor&&t.eq(e)}class _I{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(jh)!=e.state.facet(jh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(jh);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!OI(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const jh=le.define();function jP(t){return[Yt.define(e=>new _I(e,t)),jh.of(t)]}const UP=!ae.ios,Sc=le.define({combine(t){return ho(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function NI(t={}){return[Sc.of(t),MI,DI,$I,fP.of(!0)]}function VP(t){return t.startState.facet(Sc)!=t.state.facet(Sc)}const MI=jP({above:!0,markers(t){let{state:e}=t,n=e.facet(Sc),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||UP:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:U.cursor(r.head,r.head>r.anchor?-1:1);for(let l of ad.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=VP(t);return n&&gS(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){gS(e.state,t)},class:"cm-cursorLayer"});function gS(t,e){e.style.animationDuration=t.facet(Sc).cursorBlinkRate+"ms"}const DI=jP({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:ad.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||VP(t)},class:"cm-selectionLayer"}),HP={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};UP&&(HP[".cm-line"].caretColor="transparent !important");const $I=id.highest(fe.theme(HP)),WP=Me.define({map(t,e){return t==null?null:e.mapPos(t)}}),Nu=an.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(WP)?i.value:n,t)}}),LI=Yt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Nu);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Nu)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Nu),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Nu)!=t&&this.view.dispatch({effects:WP.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function II(){return[Nu,LI]}function yS(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function BI(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class zI{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,u,c)=>r(c,u,u+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,u,c)=>{let d=i(a,l,u);d&&c(u,u+a[0].length,d)};else if(i)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Jo,i=n.add.bind(n);for(let{from:r,to:s}of BI(e,this.maxLength))yS(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(m,v,g)=>h.push(g.range(m,v));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else yS(e.state.doc,this.regexp,c,d,(m,v)=>this.addMatch(v,e,m,p));n=n.update({filterFrom:c,filterTo:d,filter:(m,v)=>m<c||v>d,add:h})}}return n}}const zy=/x/.unicode!=null?"gu":"g",FI=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,zy),jI={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let gg=null;function UI(){var t;if(gg==null&&typeof document<"u"&&document.body){let e=document.body.style;gg=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return gg||!1}const Uh=le.define({combine(t){let e=ho(t,{render:null,specialChars:FI,addSpecialChars:null});return(e.replaceTabs=!UI())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,zy)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,zy)),e}});function VI(t={}){return[Uh.of(t),HI()]}let vS=null;function HI(){return vS||(vS=Yt.fromClass(class{constructor(t){this.view=t,this.decorations=je.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Uh)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new zI({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=fn(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Yp(o.text,a,i-o.from);return je.replace({widget:new KI((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=je.replace({widget:new XI(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Uh);t.startState.facet(Uh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const WI="•";function GI(t){return t>=32?WI:t==10?"␤":String.fromCharCode(9216+t)}class XI extends ca{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=GI(this.code),i=e.state.phrase("Control character")+" "+(jI[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class KI extends ca{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function ZI(){return JI}const YI=je.line({class:"cm-activeLine"}),JI=Yt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(YI.range(r.from)),e=r.from)}return je.set(n)}},{decorations:t=>t.decorations}),Jd="-10000px";class GP{constructor(e,n,i){this.facet=n,this.createTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){var n;let i=e.state.facet(this.facet),r=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let a=r[o],l=-1;if(a){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==a.create&&(l=u)}if(l<0)s[o]=this.createTooltipView(a);else{let u=s[o]=this.tooltipViews[l];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function qI(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const yg=le.define({combine:t=>{var e,n,i;return{position:ae.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||qI}}}),wS=new WeakMap,XP=Yt.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(yg);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new GP(t,Hw,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(yg);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Jd,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let i=this.manager.tooltipViews[n];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(yg).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:i}=t,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){l.style.top=Jd;continue}let d=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,f=c.right-c.left,p=(e=wS.get(a))!==null&&e!==void 0?e:c.bottom-c.top,m=a.offset||e5,v=this.view.textDirection==ht.LTR,g=c.width>i.right-i.left?v?i.left:i.right-c.width:v?Math.min(u.left-(d?14:0)+m.x,i.right-f):Math.max(i.left,u.left-f+(d?14:0)-m.x),y=!!o.above;!o.strictSide&&(y?u.top-(c.bottom-c.top)-m.y<i.top:u.bottom+(c.bottom-c.top)+m.y>i.bottom)&&y==i.bottom-u.bottom>u.top-i.top&&(y=!y);let w=(y?u.top-i.top:i.bottom-u.bottom)-h;if(w<p&&a.resize!==!1){if(w<this.view.defaultLineHeight){l.style.top=Jd;continue}wS.set(a,p),l.style.height=(p=w)+"px"}else l.style.height&&(l.style.height="");let x=y?u.top-p-h-m.y:u.bottom+h+m.y,S=g+f;if(a.overlap!==!0)for(let A of r)A.left<S&&A.right>g&&A.top<x+p&&A.bottom>x&&(x=y?A.top-p-2-h:A.bottom+h+2);this.position=="absolute"?(l.style.top=x-t.parent.top+"px",l.style.left=g-t.parent.left+"px"):(l.style.top=x+"px",l.style.left=g+"px"),d&&(d.style.left=`${u.left+(v?m.x:-m.x)-(g+14-7)}px`),a.overlap!==!0&&r.push({left:g,top:x,right:S,bottom:x+p}),l.classList.toggle("cm-tooltip-above",y),l.classList.toggle("cm-tooltip-below",!y),a.positioned&&a.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Jd}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),QI=fe.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),e5={x:0,y:0},Hw=le.define({enables:[XP,QI]}),Ff=le.define();class Ww{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new GP(e,Ff,n=>this.createHostedView(n))}static create(e){return new Ww(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const t5=Hw.compute([Ff],t=>{let e=t.facet(Ff).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:Ww.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class n5{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let i=this.view.coordsAtPos(n);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(a=>a.from<=n&&a.to>=n),s=r&&r.dir==ht.RTL?-1:1,o=this.source(this.view,n,e.x<i.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:n};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>zi(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!xS(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=(n=i==null?void 0:i.end)!==null&&n!==void 0?n:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!i5(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!xS(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function xS(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function i5(t,e,n,i,r,s){let o=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let d=u[c];if(Math.max(d.top-r,r-d.bottom,d.left-i,i-d.right)<=s)return!0}return!1}function r5(t,e={}){let n=Me.define(),i=an.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,Tn.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),r);a.pos=o,r.end!=null&&(a.end=s.changes.mapPos(r.end)),r=a}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(o5)&&(r=null);return r},provide:r=>Ff.from(r)});return[i,Yt.define(r=>new n5(r,t,i,n,e.hoverTime||300)),t5]}function s5(t,e){let n=t.plugin(XP);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const o5=Me.define(),bS=le.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function kc(t,e){let n=t.plugin(KP),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const KP=Yt.fromClass(class{constructor(t){this.input=t.state.facet(Tl),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(bS);this.top=new qd(t,!0,e.topContainer),this.bottom=new qd(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(bS);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new qd(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new qd(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Tl);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>fe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class qd{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=SS(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=SS(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function SS(t){let e=t.nextSibling;return t.remove(),e}const Tl=le.define({enables:KP});class no extends Yo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}no.prototype.elementClass="";no.prototype.toDOM=void 0;no.prototype.mapMode=Tn.TrackBefore;no.prototype.startSide=no.prototype.endSide=-1;no.prototype.point=!0;const Vh=le.define(),Hh=le.define(),Fy=le.define({combine:t=>t.some(e=>e)});function a5(t){let e=[l5];return t&&t.fixed===!1&&e.push(Fy.of(!0)),e}const l5=Yt.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Hh).map(e=>new ES(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Fy),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Fy)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=rt.iter(this.view.state.facet(Vh),this.view.viewport.from),i=[],r=this.gutters.map(s=>new u5(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==mt.Text&&o){jy(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==mt.Text){jy(n,i,s.from);for(let o of r)o.line(this.view,s,i)}for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Hh),n=t.state.facet(Hh),i=t.docChanged||t.heightChanged||t.viewportChanged||!rt.eq(t.startState.facet(Vh),t.state.facet(Vh),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new ES(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>fe.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==ht.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function kS(t){return Array.isArray(t)?t:[t]}function jy(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class u5{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=rt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=n.top-this.height;if(this.i==r.elements.length){let o=new ZP(e,n.height,s,i);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,n.height,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];jy(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n);i&&this.addElement(e,n,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class ES{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=kS(n.markers(e)),n.initialSpacer&&(this.spacer=new ZP(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=kS(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!rt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class ZP{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),c5(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function c5(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const d5=le.define(),Ha=le.define({combine(t){return ho(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return i}})}});class vg extends no{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function wg(t,e){return t.state.facet(Ha).formatNumber(e,t.state)}const h5=Hh.compute([Ha],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(d5)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new vg(wg(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Ha)!=e.state.facet(Ha),initialSpacer(e){return new vg(wg(e,CS(e.state.doc.lines)))},updateSpacer(e,n){let i=wg(n.view,CS(n.view.state.doc.lines));return i==e.number?e:new vg(i)},domEventHandlers:t.facet(Ha).domEventHandlers}));function f5(t={}){return[Ha.of(t),a5(),h5]}function CS(t){let e=9;for(;e<t;)e=e*10+9;return e}const p5=new class extends no{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},m5=Vh.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(p5.range(r)))}return rt.of(e)});function g5(){return m5}const YP=new rd;function JP(t){window.codemirror&&window.codemirror.dispatch({effects:YP.reconfigure(Le.readOnly.of(t))})}const Uy=Me.define(),y5=an.define({create(){return je.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(Uy)&&(n=je.none,i.value!==null&&(n=n.update({add:[v5.range(i.value)]})));return n},provide:t=>fe.decorations.from(t)}),v5=je.line({class:"!bg-sky-400/30"});function qP(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:Uy.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:Uy.of(e)})}}const w5=me.from(me.MAX_ADDRESS).toString(),x5=new Intl.NumberFormat("en",{style:"decimal"}).format,b5={clean:"Clean",computer:"Computer",frequency:"Frequency",hertz:t=>`${x5(t)} Hz`,update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},cpu:{name:"CPU","general-registers":"General-purpose registers","special-registers":"Special registers",register:t=>`${t} register`,alu:"ALU",memory:{name:"Memory",cell:t=>`Cell ${me.format(t)}`,"start-address":"Start address","start-address-must-be-integer":"Start address must be an integer.","start-address-too-big":`Start address must be less or equal to ${w5}.`},interrups:{label:"Interrupts",enabled:"Enabled",disabled:"Disabled"}},devices:{internal:{label:"Internal devices",handshake:{name:"Handshake",data:"Data",state:"State"},pic:{name:"PIC",state:"State",connections:"Connections"},pio:{name:"PIO",data:"Data",config:"Configuration",port:t=>`Port ${t}`},timer:"Timer"},external:{label:"External devices",console:"Console",f10:{name:"F10",interrupt:"Interrupt"},leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},switches:"Switches"},ioRegister:(t,e)=>`${t} register (${Ln.format(e)})`},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},runner:{action:{start:"Start",debug:"Debug","run-until-halt":"Finish",step:"Next",stop:"Abort"},state:{running:"Running",paused:"Paused","waiting-for-input":"Wating for key",stopped:"Stopped"}},settings:{title:"Settings",language:{label:"Language"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which preset of devices to use.","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer (PIO)",handshake:"Printer (Handshake)"},speeds:{label:"Speeds",executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"}},footer:{documentation:"Documentation","report-issue":"Report an issue",copyright:"III-LIDI, FI, UNLP"}},S5=me.from(me.MAX_ADDRESS).toString(),k5=new Intl.NumberFormat("es",{style:"decimal"}).format,E5={clean:"Limpiar",computer:"Computadora",frequency:"Frecuencia",hertz:t=>`${k5(t)} Hz`,update:{"update-available":"¡Hay una nueva versión disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},cpu:{name:"CPU","general-registers":"Registros de propósito general","special-registers":"Registros especiales",register:t=>`Registro ${t}`,alu:"ALU",memory:{name:"Memoria",cell:t=>`Celda ${me.format(t)}`,"start-address":"Dirección de inicio","start-address-must-be-integer":"El valor de inicio debe ser un número entero.","start-address-too-big":`El valor de inicio debe ser menor o igual a ${S5}.`},interrups:{label:"Interrupciones",enabled:"Habilitadas",disabled:"Inhabilitadas"}},devices:{internal:{label:"Dispositivos internos",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:{name:"PIC",state:"Estado",connections:"Conexiones"},pio:{name:"PIO",data:"Datos",config:"Configuración",port:t=>`Puerto ${t}`},timer:"Timer"},external:{label:"Dispositivos externos",console:"Consola",f10:{name:"F10",interrupt:"Interrumpir"},leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},switches:"Teclas"},ioRegister:(t,e)=>`Registro ${t} (${Ln.format(e)})`},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},runner:{action:{start:"Ejecutar",debug:"Depurar","run-until-halt":"Finalizar",step:"Siguiente",stop:"Abortar"},state:{running:"Ejecutando",paused:"Pausado","waiting-for-input":"Esperando tecla",stopped:"Detenido"}},settings:{title:"Configuración",language:{label:"Idioma"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué conjunto de dispositivos usar.","pio-switches-and-leds":"Teclas y luces","pio-printer":"Impresora (PIO)",handshake:"Impresora (Handshake)"},speeds:{label:"Velocidades",executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"}},footer:{documentation:"Documentación","report-issue":"Reportar un error",copyright:"III-LIDI, FI, UNLP"}},Qp=Tw({en:b5,es:E5}),G=Cw();function C5(t){return C.jsx(WD,{store:G,children:t.children})}const A5=Symbol(),P5=t=>typeof(t==null?void 0:t.then)=="function";function R5(t){let e,n;const i={getItem:(r,s)=>{var o,a;const l=c=>{if(c=c||"",e!==c){try{n=JSON.parse(c)}catch{return s}e=c}return n},u=(a=(o=t())==null?void 0:o.getItem(r))!=null?a:null;return P5(u)?u.then(l):l(u)},setItem:(r,s)=>{var o;return(o=t())==null?void 0:o.setItem(r,JSON.stringify(s))},removeItem:r=>{var s;return(s=t())==null?void 0:s.removeItem(r)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&(i.subscribe=(r,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===r){let u;try{u=JSON.parse(l.newValue||"")}catch{u=o}s(u)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),i}const T5=R5(()=>typeof window<"u"?window.localStorage:void 0);function O5(t,e,n=T5,i){const r=i==null?void 0:i.unstable_getOnInit,s=de(r?n.getItem(t,e):e);return s.onMount=a=>{r||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},de(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===A5?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}var He;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(He||(He={}));var Vy;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Vy||(Vy={}));const te=He.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ps=t=>{switch(typeof t){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(t)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(t)?te.array:t===null?te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?te.promise:typeof Map<"u"&&t instanceof Map?te.map:typeof Set<"u"&&t instanceof Set?te.set:typeof Date<"u"&&t instanceof Date?te.date:te.object;default:return te.unknown}},W=He.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_5=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Fi extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return r(this),i}toString(){return this.message}get message(){return JSON.stringify(this.issues,He.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Fi.create=t=>new Fi(t);const Ec=(t,e)=>{let n;switch(t.code){case W.invalid_type:t.received===te.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case W.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,He.jsonStringifyReplacer)}`;break;case W.unrecognized_keys:n=`Unrecognized key(s) in object: ${He.joinValues(t.keys,", ")}`;break;case W.invalid_union:n="Invalid input";break;case W.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${He.joinValues(t.options)}`;break;case W.invalid_enum_value:n=`Invalid enum value. Expected ${He.joinValues(t.options)}, received '${t.received}'`;break;case W.invalid_arguments:n="Invalid function arguments";break;case W.invalid_return_type:n="Invalid function return type";break;case W.invalid_date:n="Invalid date";break;case W.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:He.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case W.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case W.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case W.custom:n="Invalid input";break;case W.invalid_intersection_types:n="Intersection results could not be merged";break;case W.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case W.not_finite:n="Number must be finite";break;default:n=e.defaultError,He.assertNever(t)}return{message:n}};let QP=Ec;function N5(t){QP=t}function jf(){return QP}const Uf=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};let a="";const l=i.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...r,path:s,message:r.message||a}},M5=[];function ne(t,e){const n=Uf({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,jf(),Ec].filter(i=>!!i)});t.common.issues.push(n)}class on{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Pe;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n)i.push({key:await r.key,value:await r.value});return on.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Pe;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Pe=Object.freeze({status:"aborted"}),eR=t=>({status:"dirty",value:t}),wn=t=>({status:"valid",value:t}),Hy=t=>t.status==="aborted",Wy=t=>t.status==="dirty",Vf=t=>t.status==="valid",Hf=t=>typeof Promise<"u"&&t instanceof Promise;var he;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(he||(he={}));class vr{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const AS=(t,e)=>{if(Vf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Fi(t.common.issues);return this._error=n,this._error}}};function _e(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:i??a.defaultError}:{message:n??a.defaultError},description:r}}class De{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ps(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ps(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new on,ctx:{common:e.parent.common,data:e.data,parsedType:Ps(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Hf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ps(e)},s=this._parseSync({data:e,path:r.path,parent:r});return AS(r,s)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ps(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Hf(r)?r:Promise.resolve(r));return AS(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:W.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Vi({schema:this,typeName:ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Gr.create(this,this._def)}nullable(){return ta.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ji.create(this,this._def)}promise(){return _l.create(this,this._def)}or(e){return Rc.create([this,e],this._def)}and(e){return Tc.create(this,e,this._def)}transform(e){return new Vi({..._e(this._def),schema:this,typeName:ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Dc({..._e(this._def),innerType:this,defaultValue:n,typeName:ve.ZodDefault})}brand(){return new nR({typeName:ve.ZodBranded,type:this,..._e(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Kf({..._e(this._def),innerType:this,catchValue:n,typeName:ve.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ld.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const D5=/^c[^\s-]{8,}$/i,$5=/^[a-z][a-z0-9]*$/,L5=/[0-9A-HJKMNP-TV-Z]{26}/,I5=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,B5=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,z5=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,F5=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,j5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,U5=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function V5(t,e){return!!((e==="v4"||!e)&&F5.test(t)||(e==="v6"||!e)&&j5.test(t))}class Di extends De{constructor(){super(...arguments),this._regex=(e,n,i)=>this.refinement(r=>e.test(r),{validation:n,code:W.invalid_string,...he.errToObj(i)}),this.nonempty=e=>this.min(1,he.errToObj(e)),this.trim=()=>new Di({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Di({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Di({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){const s=this._getOrReturnCtx(e);return ne(s,{code:W.invalid_type,expected:te.string,received:s.parsedType}),Pe}const i=new on;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),ne(r,{code:W.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),ne(r,{code:W.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?ne(r,{code:W.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ne(r,{code:W.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")B5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"email",code:W.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")z5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"emoji",code:W.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")I5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"uuid",code:W.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")D5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"cuid",code:W.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")$5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"cuid2",code:W.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")L5.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"ulid",code:W.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ne(r,{validation:"url",code:W.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"regex",code:W.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),ne(r,{code:W.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),ne(r,{code:W.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),ne(r,{code:W.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?U5(s).test(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:W.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="ip"?V5(e.data,s.version)||(r=this._getOrReturnCtx(e,r),ne(r,{validation:"ip",code:W.invalid_string,message:s.message}),i.dirty()):He.assertNever(s);return{status:i.value,value:e.data}}_addCheck(e){return new Di({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...he.errToObj(e)})}url(e){return this._addCheck({kind:"url",...he.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...he.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...he.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...he.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...he.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...he.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...he.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...he.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...he.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...he.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...he.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...he.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...he.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...he.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...he.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Di.create=t=>{var e;return new Di({checks:[],typeName:ve.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,..._e(t)})};function H5(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class io extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){const s=this._getOrReturnCtx(e);return ne(s,{code:W.invalid_type,expected:te.number,received:s.parsedType}),Pe}let i;const r=new on;for(const s of this._def.checks)s.kind==="int"?He.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{code:W.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ne(i,{code:W.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ne(i,{code:W.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?H5(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),ne(i,{code:W.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{code:W.not_finite,message:s.message}),r.dirty()):He.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,i,r){return new io({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:he.toString(r)}]})}_addCheck(e){return new io({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:he.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:he.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:he.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:he.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&He.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}io.create=t=>new io({checks:[],typeName:ve.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,..._e(t)});class ro extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==te.bigint){const s=this._getOrReturnCtx(e);return ne(s,{code:W.invalid_type,expected:te.bigint,received:s.parsedType}),Pe}let i;const r=new on;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ne(i,{code:W.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ne(i,{code:W.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),ne(i,{code:W.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):He.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,i,r){return new ro({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:he.toString(r)}]})}_addCheck(e){return new ro({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ro.create=t=>{var e;return new ro({checks:[],typeName:ve.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,..._e(t)})};class Cc extends De{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==te.boolean){const i=this._getOrReturnCtx(e);return ne(i,{code:W.invalid_type,expected:te.boolean,received:i.parsedType}),Pe}return wn(e.data)}}Cc.create=t=>new Cc({typeName:ve.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,..._e(t)});class Qo extends De{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){const s=this._getOrReturnCtx(e);return ne(s,{code:W.invalid_type,expected:te.date,received:s.parsedType}),Pe}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ne(s,{code:W.invalid_date}),Pe}const i=new on;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),ne(r,{code:W.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),ne(r,{code:W.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):He.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qo({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:he.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:he.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Qo.create=t=>new Qo({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ve.ZodDate,..._e(t)});class Wf extends De{_parse(e){if(this._getType(e)!==te.symbol){const i=this._getOrReturnCtx(e);return ne(i,{code:W.invalid_type,expected:te.symbol,received:i.parsedType}),Pe}return wn(e.data)}}Wf.create=t=>new Wf({typeName:ve.ZodSymbol,..._e(t)});class Ac extends De{_parse(e){if(this._getType(e)!==te.undefined){const i=this._getOrReturnCtx(e);return ne(i,{code:W.invalid_type,expected:te.undefined,received:i.parsedType}),Pe}return wn(e.data)}}Ac.create=t=>new Ac({typeName:ve.ZodUndefined,..._e(t)});class Pc extends De{_parse(e){if(this._getType(e)!==te.null){const i=this._getOrReturnCtx(e);return ne(i,{code:W.invalid_type,expected:te.null,received:i.parsedType}),Pe}return wn(e.data)}}Pc.create=t=>new Pc({typeName:ve.ZodNull,..._e(t)});class Ol extends De{constructor(){super(...arguments),this._any=!0}_parse(e){return wn(e.data)}}Ol.create=t=>new Ol({typeName:ve.ZodAny,..._e(t)});class jo extends De{constructor(){super(...arguments),this._unknown=!0}_parse(e){return wn(e.data)}}jo.create=t=>new jo({typeName:ve.ZodUnknown,..._e(t)});class is extends De{_parse(e){const n=this._getOrReturnCtx(e);return ne(n,{code:W.invalid_type,expected:te.never,received:n.parsedType}),Pe}}is.create=t=>new is({typeName:ve.ZodNever,..._e(t)});class Gf extends De{_parse(e){if(this._getType(e)!==te.undefined){const i=this._getOrReturnCtx(e);return ne(i,{code:W.invalid_type,expected:te.void,received:i.parsedType}),Pe}return wn(e.data)}}Gf.create=t=>new Gf({typeName:ve.ZodVoid,..._e(t)});class ji extends De{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==te.array)return ne(n,{code:W.invalid_type,expected:te.array,received:n.parsedType}),Pe;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(ne(n,{code:o?W.too_big:W.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ne(n,{code:W.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ne(n,{code:W.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new vr(n,o,n.path,a)))).then(o=>on.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new vr(n,o,n.path,a)));return on.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new ji({...this._def,minLength:{value:e,message:he.toString(n)}})}max(e,n){return new ji({...this._def,maxLength:{value:e,message:he.toString(n)}})}length(e,n){return new ji({...this._def,exactLength:{value:e,message:he.toString(n)}})}nonempty(e){return this.min(1,e)}}ji.create=(t,e)=>new ji({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ve.ZodArray,..._e(e)});function Pa(t){if(t instanceof ct){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Gr.create(Pa(i))}return new ct({...t._def,shape:()=>e})}else return t instanceof ji?new ji({...t._def,type:Pa(t.element)}):t instanceof Gr?Gr.create(Pa(t.unwrap())):t instanceof ta?ta.create(Pa(t.unwrap())):t instanceof wr?wr.create(t.items.map(e=>Pa(e))):t}class ct extends De{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=He.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==te.object){const u=this._getOrReturnCtx(e);return ne(u,{code:W.invalid_type,expected:te.object,received:u.parsedType}),Pe}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof is&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new vr(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof is){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")a.length>0&&(ne(r,{code:W.unrecognized_keys,keys:a}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new vr(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key;u.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>on.mergeObjectSync(i,u)):on.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return he.errToObj,new ct({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&o!==void 0?o:i.defaultError;return n.code==="unrecognized_keys"?{message:(a=he.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new ct({...this._def,unknownKeys:"strip"})}passthrough(){return new ct({...this._def,unknownKeys:"passthrough"})}extend(e){return new ct({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ct({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ve.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ct({...this._def,catchall:e})}pick(e){const n={};return He.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new ct({...this._def,shape:()=>n})}omit(e){const n={};return He.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new ct({...this._def,shape:()=>n})}deepPartial(){return Pa(this)}partial(e){const n={};return He.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new ct({...this._def,shape:()=>n})}required(e){const n={};return He.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof Gr;)s=s._def.innerType;n[i]=s}}),new ct({...this._def,shape:()=>n})}keyof(){return tR(He.objectKeys(this.shape))}}ct.create=(t,e)=>new ct({shape:()=>t,unknownKeys:"strip",catchall:is.create(),typeName:ve.ZodObject,..._e(e)});ct.strictCreate=(t,e)=>new ct({shape:()=>t,unknownKeys:"strict",catchall:is.create(),typeName:ve.ZodObject,..._e(e)});ct.lazycreate=(t,e)=>new ct({shape:t,unknownKeys:"strip",catchall:is.create(),typeName:ve.ZodObject,..._e(e)});class Rc extends De{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Fi(a.ctx.common.issues));return ne(n,{code:W.invalid_union,unionErrors:o}),Pe}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Fi(l));return ne(n,{code:W.invalid_union,unionErrors:a}),Pe}}get options(){return this._def.options}}Rc.create=(t,e)=>new Rc({options:t,typeName:ve.ZodUnion,..._e(e)});const Wh=t=>t instanceof _c?Wh(t.schema):t instanceof Vi?Wh(t.innerType()):t instanceof Nc?[t.value]:t instanceof so?t.options:t instanceof Mc?Object.keys(t.enum):t instanceof Dc?Wh(t._def.innerType):t instanceof Ac?[void 0]:t instanceof Pc?[null]:null;class em extends De{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.object)return ne(n,{code:W.invalid_type,expected:te.object,received:n.parsedType}),Pe;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(ne(n,{code:W.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const o=Wh(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new em({typeName:ve.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,..._e(i)})}}function Gy(t,e){const n=Ps(t),i=Ps(e);if(t===e)return{valid:!0,data:t};if(n===te.object&&i===te.object){const r=He.objectKeys(e),s=He.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=Gy(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===te.array&&i===te.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=Gy(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===te.date&&i===te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Tc extends De{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(Hy(s)||Hy(o))return Pe;const a=Gy(s.value,o.value);return a.valid?((Wy(s)||Wy(o))&&n.dirty(),{status:n.value,value:a.data}):(ne(i,{code:W.invalid_intersection_types}),Pe)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Tc.create=(t,e,n)=>new Tc({left:t,right:e,typeName:ve.ZodIntersection,..._e(n)});class wr extends De{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.array)return ne(i,{code:W.invalid_type,expected:te.array,received:i.parsedType}),Pe;if(i.data.length<this._def.items.length)return ne(i,{code:W.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pe;!this._def.rest&&i.data.length>this._def.items.length&&(ne(i,{code:W.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new vr(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>on.mergeArray(n,o)):on.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new wr({...this._def,rest:e})}}wr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wr({items:t,typeName:ve.ZodTuple,rest:null,..._e(e)})};class Oc extends De{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.object)return ne(i,{code:W.invalid_type,expected:te.object,received:i.parsedType}),Pe;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new vr(i,a,i.path,a)),value:o._parse(new vr(i,i.data[a],i.path,a))});return i.common.async?on.mergeObjectAsync(n,r):on.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof De?new Oc({keyType:e,valueType:n,typeName:ve.ZodRecord,..._e(i)}):new Oc({keyType:Di.create(),valueType:e,typeName:ve.ZodRecord,..._e(n)})}}class Xf extends De{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.map)return ne(i,{code:W.invalid_type,expected:te.map,received:i.parsedType}),Pe;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],u)=>({key:r._parse(new vr(i,a,i.path,[u,"key"])),value:s._parse(new vr(i,l,i.path,[u,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Pe;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Pe;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}Xf.create=(t,e,n)=>new Xf({valueType:e,keyType:t,typeName:ve.ZodMap,..._e(n)});class ea extends De{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.set)return ne(i,{code:W.invalid_type,expected:te.set,received:i.parsedType}),Pe;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(ne(i,{code:W.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(ne(i,{code:W.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Pe;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...i.data.values()].map((l,u)=>s._parse(new vr(i,l,i.path,u)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new ea({...this._def,minSize:{value:e,message:he.toString(n)}})}max(e,n){return new ea({...this._def,maxSize:{value:e,message:he.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ea.create=(t,e)=>new ea({valueType:t,minSize:null,maxSize:null,typeName:ve.ZodSet,..._e(e)});class rl extends De{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.function)return ne(n,{code:W.invalid_type,expected:te.function,received:n.parsedType}),Pe;function i(a,l){return Uf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,jf(),Ec].filter(u=>!!u),issueData:{code:W.invalid_arguments,argumentsError:l}})}function r(a,l){return Uf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,jf(),Ec].filter(u=>!!u),issueData:{code:W.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof _l?wn(async(...a)=>{const l=new Fi([]),u=await this._def.args.parseAsync(a,s).catch(h=>{throw l.addIssue(i(a,h)),l}),c=await o(...u);return await this._def.returns._def.type.parseAsync(c,s).catch(h=>{throw l.addIssue(r(c,h)),l})}):wn((...a)=>{const l=this._def.args.safeParse(a,s);if(!l.success)throw new Fi([i(a,l.error)]);const u=o(...l.data),c=this._def.returns.safeParse(u,s);if(!c.success)throw new Fi([r(u,c.error)]);return c.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rl({...this._def,args:wr.create(e).rest(jo.create())})}returns(e){return new rl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new rl({args:e||wr.create([]).rest(jo.create()),returns:n||jo.create(),typeName:ve.ZodFunction,..._e(i)})}}class _c extends De{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}_c.create=(t,e)=>new _c({getter:t,typeName:ve.ZodLazy,..._e(e)});class Nc extends De{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ne(n,{received:n.data,code:W.invalid_literal,expected:this._def.value}),Pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Nc.create=(t,e)=>new Nc({value:t,typeName:ve.ZodLiteral,..._e(e)});function tR(t,e){return new so({values:t,typeName:ve.ZodEnum,..._e(e)})}class so extends De{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return ne(n,{expected:He.joinValues(i),received:n.parsedType,code:W.invalid_type}),Pe}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),i=this._def.values;return ne(n,{received:n.data,code:W.invalid_enum_value,options:i}),Pe}return wn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return so.create(e)}exclude(e){return so.create(this.options.filter(n=>!e.includes(n)))}}so.create=tR;class Mc extends De{_parse(e){const n=He.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==te.string&&i.parsedType!==te.number){const r=He.objectValues(n);return ne(i,{expected:He.joinValues(r),received:i.parsedType,code:W.invalid_type}),Pe}if(n.indexOf(e.data)===-1){const r=He.objectValues(n);return ne(i,{received:i.data,code:W.invalid_enum_value,options:r}),Pe}return wn(e.data)}get enum(){return this._def.values}}Mc.create=(t,e)=>new Mc({values:t,typeName:ve.ZodNativeEnum,..._e(e)});class _l extends De{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.promise&&n.common.async===!1)return ne(n,{code:W.invalid_type,expected:te.promise,received:n.parsedType}),Pe;const i=n.parsedType===te.promise?n.data:Promise.resolve(n.data);return wn(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}_l.create=(t,e)=>new _l({type:t,typeName:ve.ZodPromise,..._e(e)});class Vi extends De{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null;if(r.type==="preprocess"){const o=r.transform(i.data);return i.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:i.path,parent:i})):this._def.schema._parseSync({data:o,path:i.path,parent:i})}const s={addIssue:o=>{ne(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Pe:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Pe:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Vf(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Vf(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);He.assertNever(r)}}Vi.create=(t,e,n)=>new Vi({schema:t,typeName:ve.ZodEffects,effect:e,..._e(n)});Vi.createWithPreprocess=(t,e,n)=>new Vi({schema:e,effect:{type:"preprocess",transform:t},typeName:ve.ZodEffects,..._e(n)});class Gr extends De{_parse(e){return this._getType(e)===te.undefined?wn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gr.create=(t,e)=>new Gr({innerType:t,typeName:ve.ZodOptional,..._e(e)});class ta extends De{_parse(e){return this._getType(e)===te.null?wn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ta.create=(t,e)=>new ta({innerType:t,typeName:ve.ZodNullable,..._e(e)});class Dc extends De{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===te.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Dc.create=(t,e)=>new Dc({innerType:t,typeName:ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,..._e(e)});class Kf extends De{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Hf(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Fi(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Fi(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Kf.create=(t,e)=>new Kf({innerType:t,typeName:ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,..._e(e)});class Zf extends De{_parse(e){if(this._getType(e)!==te.nan){const i=this._getOrReturnCtx(e);return ne(i,{code:W.invalid_type,expected:te.nan,received:i.parsedType}),Pe}return{status:"valid",value:e.data}}}Zf.create=t=>new Zf({typeName:ve.ZodNaN,..._e(t)});const W5=Symbol("zod_brand");class nR extends De{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class ld extends De{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Pe:s.status==="dirty"?(n.dirty(),eR(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Pe:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new ld({in:e,out:n,typeName:ve.ZodPipeline})}}const iR=(t,e={},n)=>t?Ol.create().superRefine((i,r)=>{var s,o;if(!t(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;r.addIssue({code:"custom",...u,fatal:l})}}):Ol.create(),G5={object:ct.lazycreate};var ve;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(ve||(ve={}));const X5=(t,e={message:`Input not instance of ${t.name}`})=>iR(n=>n instanceof t,e),rR=Di.create,sR=io.create,K5=Zf.create,Z5=ro.create,oR=Cc.create,Y5=Qo.create,J5=Wf.create,q5=Ac.create,Q5=Pc.create,e4=Ol.create,t4=jo.create,n4=is.create,i4=Gf.create,r4=ji.create,s4=ct.create,o4=ct.strictCreate,a4=Rc.create,l4=em.create,u4=Tc.create,c4=wr.create,d4=Oc.create,h4=Xf.create,f4=ea.create,p4=rl.create,m4=_c.create,g4=Nc.create,y4=so.create,v4=Mc.create,w4=_l.create,PS=Vi.create,x4=Gr.create,b4=ta.create,S4=Vi.createWithPreprocess,k4=ld.create,E4=()=>rR().optional(),C4=()=>sR().optional(),A4=()=>oR().optional(),P4={string:t=>Di.create({...t,coerce:!0}),number:t=>io.create({...t,coerce:!0}),boolean:t=>Cc.create({...t,coerce:!0}),bigint:t=>ro.create({...t,coerce:!0}),date:t=>Qo.create({...t,coerce:!0})},R4=Pe;var yo=Object.freeze({__proto__:null,defaultErrorMap:Ec,setErrorMap:N5,getErrorMap:jf,makeIssue:Uf,EMPTY_PATH:M5,addIssueToContext:ne,ParseStatus:on,INVALID:Pe,DIRTY:eR,OK:wn,isAborted:Hy,isDirty:Wy,isValid:Vf,isAsync:Hf,get util(){return He},get objectUtil(){return Vy},ZodParsedType:te,getParsedType:Ps,ZodType:De,ZodString:Di,ZodNumber:io,ZodBigInt:ro,ZodBoolean:Cc,ZodDate:Qo,ZodSymbol:Wf,ZodUndefined:Ac,ZodNull:Pc,ZodAny:Ol,ZodUnknown:jo,ZodNever:is,ZodVoid:Gf,ZodArray:ji,ZodObject:ct,ZodUnion:Rc,ZodDiscriminatedUnion:em,ZodIntersection:Tc,ZodTuple:wr,ZodRecord:Oc,ZodMap:Xf,ZodSet:ea,ZodFunction:rl,ZodLazy:_c,ZodLiteral:Nc,ZodEnum:so,ZodNativeEnum:Mc,ZodPromise:_l,ZodEffects:Vi,ZodTransformer:Vi,ZodOptional:Gr,ZodNullable:ta,ZodDefault:Dc,ZodCatch:Kf,ZodNaN:Zf,BRAND:W5,ZodBranded:nR,ZodPipeline:ld,custom:iR,Schema:De,ZodSchema:De,late:G5,get ZodFirstPartyTypeKind(){return ve},coerce:P4,any:e4,array:r4,bigint:Z5,boolean:oR,date:Y5,discriminatedUnion:l4,effect:PS,enum:y4,function:p4,instanceof:X5,intersection:u4,lazy:m4,literal:g4,map:h4,nan:K5,nativeEnum:v4,never:n4,null:Q5,nullable:b4,number:sR,object:s4,oboolean:A4,onumber:C4,optional:x4,ostring:E4,pipeline:k4,preprocess:S4,promise:w4,record:d4,set:f4,strictObject:o4,string:rR,symbol:J5,transformer:PS,tuple:c4,undefined:q5,union:a4,unknown:t4,void:i4,NEVER:R4,ZodIssueCode:W,quotelessJson:_5,ZodError:Fi});const aR=["randomize","clean","unchanged"],lR=["pio-switches-and-leds","pio-printer","handshake"],Xy=yo.object({language:yo.enum(wb).catch(()=>{const t=navigator.language.toLowerCase();for(const e of wb)if(t.startsWith(e))return e;return"en"}),dataOnLoad:yo.enum(aR).catch("randomize"),devices:yo.enum(lR).catch("pio-switches-and-leds"),executionUnit:yo.number().int().min(5).max(500).catch(150),clockSpeed:yo.number().int().min(10).max(1e3).catch(30),printerSpeed:yo.number().int().min(10).max(1e3).catch(1e3)}),T4=Xy.parse({}),Xl=O5("vonsim-settings",T4,{getItem(t,e){try{const n=localStorage.getItem(t);return Xy.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=Xy.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{unstable_getOnInit:!0}),rs=()=>G.get(Xl),xg=de(M.zero(16)),bg=de(M.zero(16)),Sg=de(M.zero(16)),kg=de(M.zero(16)),Eg=de(M.zero(16)),Cg=de(M.zero(16)),O4=de(M.zero(8)),Ag=de(M.zero(16)),Pg=de(M.zero(16)),Rg=de(M.zero(16)),Tg=de(M.zero(16)),Og=de(M.zero(16)),_g=de(M.zero(16)),uR=de(M.zero(16)),Nl=de(M.zero(8)),ni=t=>de(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),ii=t=>de(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),tt={AX:xg,AL:ni(xg),AH:ii(xg),BX:bg,BL:ni(bg),BH:ii(bg),CX:Sg,CL:ni(Sg),CH:ii(Sg),DX:kg,DL:ni(kg),DH:ii(kg),SP:Eg,"SP.l":ni(Eg),"SP.h":ii(Eg),IP:Cg,"IP.l":ni(Cg),"IP.h":ii(Cg),IR:O4,ri:Ag,"ri.l":ni(Ag),"ri.h":ii(Ag),id:Pg,"id.l":ni(Pg),"id.h":ii(Pg),left:Rg,"left.l":ni(Rg),"left.h":ii(Rg),right:Tg,"right.l":ni(Tg),"right.h":ii(Tg),result:Og,"result.l":ni(Og),"result.h":ii(Og),FLAGS:_g,"FLAGS.l":ni(_g),"FLAGS.h":ii(_g),MAR:uR,MBR:Nl},Ao=de({phase:"stopped"}),cR=de("ADD");function _4(t){G.set(tt.AX,M.fromUnsigned(t.cpu.AX,16)),G.set(tt.BX,M.fromUnsigned(t.cpu.BX,16)),G.set(tt.CX,M.fromUnsigned(t.cpu.CX,16)),G.set(tt.DX,M.fromUnsigned(t.cpu.DX,16)),G.set(tt.SP,M.fromUnsigned(t.cpu.SP,16)),G.set(tt.IP,M.fromUnsigned(t.cpu.IP,16)),G.set(tt.IR,M.fromUnsigned(t.cpu.IR,8)),G.set(tt.ri,M.fromUnsigned(t.cpu.ri,16)),G.set(tt.id,M.fromUnsigned(t.cpu.id,16)),G.set(tt.left,M.fromUnsigned(t.cpu.left,16)),G.set(tt.right,M.fromUnsigned(t.cpu.right,16)),G.set(tt.result,M.fromUnsigned(t.cpu.result,16)),G.set(tt.FLAGS,M.fromUnsigned(t.cpu.FLAGS,16)),G.set(tt.MAR,M.fromUnsigned(t.cpu.MAR,16)),G.set(tt.MBR,M.fromUnsigned(t.cpu.MBR,8)),G.set(Ao,{phase:"stopped"})}const Gw=de(new Array(me.MAX_ADDRESS+1).fill(M.zero(8))),Ky=de(me.from(4096)),RS=8,N4=de(t=>{const e=t(Ky),n=e.value-e.value%RS,i=t(Gw),r=[];for(let s=0;s<RS;s++)r.push({address:me.from(n+s),value:i[n+s]});return r});function M4(t){G.set(Gw,t.memory.map(e=>M.fromUnsigned(e,8)))}const Xw=de(M.fromUnsigned(255,8)),Kw=de(M.fromUnsigned(0,8)),Zw=de(M.fromUnsigned(0,8)),Yf=[de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8))];function D4(t){G.set(Xw,M.fromUnsigned(t.io.pic.IMR,8)),G.set(Kw,M.fromUnsigned(t.io.pic.IRR,8)),G.set(Zw,M.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Yf.length;e++)G.set(Yf[e],M.fromUnsigned(t.io.pic.lines[e],8))}var $4=Object.defineProperty,L4=(t,e)=>{for(var n in e)$4(t,n,{get:e[n],enumerable:!0})},Hi={};L4(Hi,{assign:()=>z4,colors:()=>Xs,createStringInterpolator:()=>n1,skipAnimation:()=>yR,to:()=>gR,willAdvance:()=>i1});var Yw=cd(),Re=t=>ud(t,Yw),Jw=cd();Re.write=t=>ud(t,Jw);var tm=cd();Re.onStart=t=>ud(t,tm);var qw=cd();Re.onFrame=t=>ud(t,qw);var Qw=cd();Re.onFinish=t=>ud(t,Qw);var sl=[];Re.setTimeout=(t,e)=>{const n=Re.now()+e,i=()=>{const s=sl.findIndex(o=>o.cancel==i);~s&&sl.splice(s,1),Is-=~s?1:0},r={time:n,handler:t,cancel:i};return sl.splice(dR(n),0,r),Is+=1,hR(),r};var dR=t=>~(~sl.findIndex(e=>e.time>t)||~sl.length);Re.cancel=t=>{tm.delete(t),qw.delete(t),Qw.delete(t),Yw.delete(t),Jw.delete(t)};Re.sync=t=>{Zy=!0,Re.batchedUpdates(t),Zy=!1};Re.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Re.onStart(n)}return i.handler=t,i.cancel=()=>{tm.delete(n),e=null},i};var e1=typeof window<"u"?window.requestAnimationFrame:()=>{};Re.use=t=>e1=t;Re.now=typeof performance<"u"?()=>performance.now():Date.now;Re.batchedUpdates=t=>t();Re.catch=console.error;Re.frameLoop="always";Re.advance=()=>{Re.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):pR()};var Ls=-1,Is=0,Zy=!1;function ud(t,e){Zy?(e.delete(t),t(0)):(e.add(t),hR())}function hR(){Ls<0&&(Ls=0,Re.frameLoop!=="demand"&&e1(fR))}function I4(){Ls=-1}function fR(){~Ls&&(e1(fR),Re.batchedUpdates(pR))}function pR(){const t=Ls;Ls=Re.now();const e=dR(Ls);if(e&&(mR(sl.splice(0,e),n=>n.handler()),Is-=e),!Is){I4();return}tm.flush(),Yw.flush(t?Math.min(64,Ls-t):16.667),qw.flush(),Jw.flush(),Qw.flush()}function cd(){let t=new Set,e=t;return{add(n){Is+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Is-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Is-=e.size,mR(e,i=>i(n)&&t.add(i)),Is+=t.size,e=t)}}}function mR(t,e){t.forEach(n=>{try{e(n)}catch(i){Re.catch(i)}})}function Yy(){}var B4=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),V={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Cr(t,e){if(V.arr(t)){if(!V.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Ae=(t,e)=>t.forEach(e);function xr(t,e,n){if(V.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var gn=t=>V.und(t)?[]:V.arr(t)?t:[t];function Ku(t,e){if(t.size){const n=Array.from(t);t.clear(),Ae(n,e)}}var Mu=(t,...e)=>Ku(t,n=>n(...e)),t1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),n1,gR,Xs=null,yR=!1,i1=Yy,z4=t=>{t.to&&(gR=t.to),t.now&&(Re.now=t.now),t.colors!==void 0&&(Xs=t.colors),t.skipAnimation!=null&&(yR=t.skipAnimation),t.createStringInterpolator&&(n1=t.createStringInterpolator),t.requestAnimationFrame&&Re.use(t.requestAnimationFrame),t.batchedUpdates&&(Re.batchedUpdates=t.batchedUpdates),t.willAdvance&&(i1=t.willAdvance),t.frameLoop&&(Re.frameLoop=t.frameLoop)},Zu=new Set,pi=[],Ng=[],Jf=0,nm={get idle(){return!Zu.size&&!pi.length},start(t){Jf>t.priority?(Zu.add(t),Re.onStart(F4)):(vR(t),Re(Jy))},advance:Jy,sort(t){if(Jf)Re.onFrame(()=>nm.sort(t));else{const e=pi.indexOf(t);~e&&(pi.splice(e,1),wR(t))}},clear(){pi=[],Zu.clear()}};function F4(){Zu.forEach(vR),Zu.clear(),Re(Jy)}function vR(t){pi.includes(t)||wR(t)}function wR(t){pi.splice(j4(pi,e=>e.priority>t.priority),0,t)}function Jy(t){const e=Ng;for(let n=0;n<pi.length;n++){const i=pi[n];Jf=i.priority,i.idle||(i1(i),i.advance(t),i.idle||e.push(i))}return Jf=0,Ng=pi,Ng.length=0,pi=e,pi.length>0}function j4(t,e){const n=t.findIndex(e);return n<0?t.length:n}var U4=(t,e,n)=>Math.min(Math.max(n,t),e),V4={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},$i="[-+]?\\d*\\.?\\d+",qf=$i+"%";function im(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var H4=new RegExp("rgb"+im($i,$i,$i)),W4=new RegExp("rgba"+im($i,$i,$i,$i)),G4=new RegExp("hsl"+im($i,qf,qf)),X4=new RegExp("hsla"+im($i,qf,qf,$i)),K4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Z4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Y4=/^#([0-9a-fA-F]{6})$/,J4=/^#([0-9a-fA-F]{8})$/;function q4(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Y4.exec(t))?parseInt(e[1]+"ff",16)>>>0:Xs&&Xs[t]!==void 0?Xs[t]:(e=H4.exec(t))?(va(e[1])<<24|va(e[2])<<16|va(e[3])<<8|255)>>>0:(e=W4.exec(t))?(va(e[1])<<24|va(e[2])<<16|va(e[3])<<8|_S(e[4]))>>>0:(e=K4.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=J4.exec(t))?parseInt(e[1],16)>>>0:(e=Z4.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=G4.exec(t))?(TS(OS(e[1]),Qd(e[2]),Qd(e[3]))|255)>>>0:(e=X4.exec(t))?(TS(OS(e[1]),Qd(e[2]),Qd(e[3]))|_S(e[4]))>>>0:null}function Mg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function TS(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Mg(r,i,t+1/3),o=Mg(r,i,t),a=Mg(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function va(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function OS(t){return(parseFloat(t)%360+360)%360/360}function _S(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Qd(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function NS(t){let e=q4(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var $c=(t,e,n)=>{if(V.fun(t))return t;if(V.arr(t))return $c({range:t,output:e,extrapolate:n});if(V.str(t.output[0]))return n1(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=eB(u,s);return Q4(u,s[c],s[c+1],r[c],r[c+1],l,o,a,i.map)}};function Q4(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function eB(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var tB=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return U4(0,1,r/t)},Qf=1.70158,eh=Qf*1.525,MS=Qf+1,DS=2*Math.PI/3,$S=2*Math.PI/4.5,th=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,r1={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>MS*t*t*t-Qf*t*t,easeOutBack:t=>1+MS*Math.pow(t-1,3)+Qf*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((eh+1)*2*t-eh)/2:(Math.pow(2*t-2,2)*((eh+1)*(t*2-2)+eh)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*DS),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*DS)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*$S))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*$S)/2+1,easeInBounce:t=>1-th(1-t),easeOutBounce:th,easeInOutBounce:t=>t<.5?(1-th(1-2*t))/2:(1+th(2*t-1))/2,steps:tB},Lc=Symbol.for("FluidValue.get"),Ml=Symbol.for("FluidValue.observers"),fi=t=>!!(t&&t[Lc]),An=t=>t&&t[Lc]?t[Lc]():t,LS=t=>t[Ml]||null;function nB(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Ic(t,e){const n=t[Ml];n&&n.forEach(i=>{nB(i,e)})}var xR=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");iB(this,t)}},iB=(t,e)=>bR(t,Lc,e);function Kl(t,e){if(t[Lc]){let n=t[Ml];n||bR(t,Ml,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Bc(t,e){const n=t[Ml];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Ml]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var bR=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Gh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rB=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,IS=new RegExp(`(${Gh.source})(%|[a-z]+)`,"i"),sB=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,rm=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,SR=t=>{const[e,n]=oB(t);if(!e||t1())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&rm.test(n))return SR(n);if(n)return n}return t},oB=t=>{const e=rm.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Dg,aB=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,kR=t=>{Dg||(Dg=Xs?new RegExp(`(${Object.keys(Xs).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>An(s).replace(rm,SR).replace(rB,NS).replace(Dg,NS)),n=e.map(s=>s.match(Gh).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>$c({...t,output:s}));return s=>{var l;const o=!IS.test(e[0])&&((l=e.find(u=>IS.test(u)))==null?void 0:l.replace(Gh,""));let a=0;return e[0].replace(Gh,()=>`${r[a++](s)}${o||""}`).replace(sB,aB)}},s1="react-spring: ",ER=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${s1}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},lB=ER(console.warn);function uB(){lB(`${s1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var cB=ER(console.warn);function dB(){cB(`${s1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function sm(t){return V.str(t)&&(t[0]=="#"||/\d/.test(t)||!t1()&&rm.test(t)||t in(Xs||{}))}var Do=t1()?b.useEffect:b.useLayoutEffect,hB=()=>{const t=b.useRef(!1);return Do(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function o1(){const t=b.useState()[1],e=hB();return()=>{e.current&&t(Math.random())}}function fB(t,e){const[n]=b.useState(()=>({inputs:e,result:t()})),i=b.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&pB(e,s.inputs)||(s={inputs:e,result:t()}):s=n,b.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function pB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var a1=t=>b.useEffect(t,mB),mB=[];function qy(t){const e=b.useRef();return b.useEffect(()=>{e.current=t}),e.current}var zc=Symbol.for("Animated:node"),gB=t=>!!t&&t[zc]===t,Qi=t=>t&&t[zc],l1=(t,e)=>B4(t,zc,e),om=t=>t&&t[zc]&&t[zc].getPayload(),CR=class{constructor(){l1(this,this)}getPayload(){return this.payload||[]}},dd=class extends CR{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,V.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new dd(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return V.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,V.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Fc=class extends dd{constructor(t){super(0),this._string=null,this._toString=$c({output:[t,t]})}static create(t){return new Fc(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(V.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=$c({output:[this.getValue(),t]})),this._value=0,super.reset()}},ep={dependencies:null},am=class extends CR{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return xr(this.source,(n,i)=>{gB(n)?e[i]=n.getValue(t):fi(n)?e[i]=An(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Ae(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return xr(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){ep.dependencies&&fi(t)&&ep.dependencies.add(t);const e=om(t);e&&Ae(e,n=>this.add(n))}},AR=class extends am{constructor(t){super(t)}static create(t){return new AR(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(yB)),!0)}};function yB(t){return(sm(t)?Fc:dd).create(t)}function Qy(t){const e=Qi(t);return e?e.constructor:V.arr(t)?AR:sm(t)?Fc:dd}var BS=(t,e)=>{const n=!V.fun(t)||t.prototype&&t.prototype.isReactComponent;return b.forwardRef((i,r)=>{const s=b.useRef(null),o=n&&b.useCallback(p=>{s.current=xB(r,p)},[r]),[a,l]=wB(i,e),u=o1(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new vB(c,l),h=b.useRef();Do(()=>(h.current=d,Ae(l,p=>Kl(p,d)),()=>{h.current&&(Ae(h.current.deps,p=>Bc(p,h.current)),Re.cancel(h.current.update))})),b.useEffect(c,[]),a1(()=>()=>{const p=h.current;Ae(p.deps,m=>Bc(m,p))});const f=e.getComponentProps(a.getValue());return b.createElement(t,{...f,ref:o})})},vB=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Re.write(this.update)}};function wB(t,e){const n=new Set;return ep.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new am(t),ep.dependencies=null,[t,n]}function xB(t,e){return t&&(V.fun(t)?t(e):t.current=e),e}var zS=Symbol.for("AnimatedComponent"),bB=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new am(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=FS(o)||"Anonymous";return V.str(o)?o=s[o]||(s[o]=BS(o,r)):o=o[zS]||(o[zS]=BS(o,r)),o.displayName=`Animated(${a})`,o};return xr(t,(o,a)=>{V.arr(t)&&(a=FS(o)),s[a]=s(o)}),{animated:s}},FS=t=>V.str(t)?t:t&&V.str(t.displayName)?t.displayName:V.fun(t)&&t.name||null;function Pn(t,...e){return V.fun(t)?t(...e):t}var Yu=(t,e)=>t===!0||!!(e&&t&&(V.fun(t)?t(e):gn(t).includes(e))),PR=(t,e)=>V.obj(t)?e&&t[e]:t,RR=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,SB=t=>t,lm=(t,e=SB)=>{let n=kB;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);V.und(s)||(i[r]=s)}return i},kB=["config","onProps","onStart","onChange","onPause","onResume","onRest"],EB={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function CB(t){const e={};let n=0;if(xr(t,(i,r)=>{EB[r]||(e[r]=i,n++)}),n)return e}function u1(t){const e=CB(t);if(e){const n={to:e};return xr(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function jc(t){return t=An(t),V.arr(t)?t.map(jc):sm(t)?Hi.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function TR(t){for(const e in t)return!0;return!1}function ev(t){return V.fun(t)||V.arr(t)&&V.obj(t[0])}function tv(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function OR(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var AB={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},nv={...AB.default,mass:1,damping:1,easing:r1.linear,clamp:!1},PB=class{constructor(){this.velocity=0,Object.assign(this,nv)}};function RB(t,e,n){n&&(n={...n},jS(n,e),e={...n,...e}),jS(t,e),Object.assign(t,e);for(const o in nv)t[o]==null&&(t[o]=nv[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return V.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function jS(t,e){if(!V.und(e.decay))t.duration=void 0;else{const n=!V.und(e.tension)||!V.und(e.friction);(n||!V.und(e.frequency)||!V.und(e.damping)||!V.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var US=[],TB=class{constructor(){this.changed=!1,this.values=US,this.toValues=null,this.fromValues=US,this.config=new PB,this.immediate=!1}};function _R(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,c=Yu(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{V.und(n.pause)||(r.paused=Yu(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||Yu(p,e)),l=Pn(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),l=u.time-Re.now()}function h(){l>0&&!Hi.skipAnimation?(r.delayed=!0,u=Re.setTimeout(f,l),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var c1=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?ol(t.get()):e.every(n=>n.noop)?NR(t.get()):Ni(t.get(),e.every(n=>n.finished)),NR=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ni=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),ol=t=>({value:t,cancelled:!0,finished:!1});function MR(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=lm(e,(v,g)=>g==="onRest"?void 0:v);let c,d;const h=new Promise((v,g)=>(c=v,d=g)),f=v=>{const g=r<=(n.cancelId||0)&&ol(i)||r!==n.asyncId&&Ni(i,!1);if(g)throw v.result=g,d(v),v},p=(v,g)=>{const y=new VS,w=new HS;return(async()=>{if(Hi.skipAnimation)throw Uc(n),w.result=Ni(i,!1),d(w),w;f(y);const x=V.obj(v)?{...v}:{...g,to:v};x.parentId=r,xr(u,(A,P)=>{V.und(x[P])&&(x[P]=A)});const S=await i.start(x);return f(y),n.paused&&await new Promise(A=>{n.resumeQueue.add(A)}),S})()};let m;if(Hi.skipAnimation)return Uc(n),Ni(i,!1);try{let v;V.arr(t)?v=(async g=>{for(const y of g)await p(y)})(t):v=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([v.then(c),h]),m=Ni(i.get(),!0,!1)}catch(v){if(v instanceof VS)m=v.result;else if(v instanceof HS)m=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return V.fun(o)&&Re.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Uc(t,e){Ku(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var VS=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},HS=class extends Error{constructor(){super("SkipAnimationSignal")}},iv=t=>t instanceof d1,OB=1,d1=class extends xR{constructor(){super(...arguments),this.id=OB++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Qi(this);return t&&t.getValue()}to(...t){return Hi.to(this,t)}interpolate(...t){return uB(),Hi.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Ic(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||nm.sort(this),Ic(this,{type:"priority",parent:this,priority:t})}},na=Symbol.for("SpringPhase"),DR=1,rv=2,sv=4,$g=t=>(t[na]&DR)>0,fs=t=>(t[na]&rv)>0,hu=t=>(t[na]&sv)>0,WS=(t,e)=>e?t[na]|=rv|DR:t[na]&=~rv,GS=(t,e)=>e?t[na]|=sv:t[na]&=~sv,_B=class extends d1{constructor(t,e){if(super(),this.animation=new TB,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!V.und(t)||!V.und(e)){const n=V.obj(t)?{...t}:{...e,from:t};V.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(fs(this)||this._state.asyncTo)||hu(this)}get goal(){return An(this.animation.to)}get velocity(){const t=Qi(this);return t instanceof dd?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return $g(this)}get isAnimating(){return fs(this)}get isPaused(){return hu(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=om(i.to);!o&&fi(i.to)&&(r=gn(An(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Fc?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const m=i.fromValues[c],v=u.v0!=null?u.v0:u.v0=V.arr(s.velocity)?s.velocity[c]:s.velocity;let g;const y=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(V.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,x=Math.exp(-(1-w)*p);f=m+v/(1-w)*(1-x),h=Math.abs(u.lastPosition-f)<=y,g=v*x}else{g=u.lastVelocity==null?v:u.lastVelocity;const w=s.restVelocity||y/10,x=s.clamp?0:s.bounce,S=!V.und(x),A=m==d?u.v0>0:m<d;let P,E=!1;const R=1,N=Math.ceil(t/R);for(let T=0;T<N&&(P=Math.abs(g)>w,!(!P&&(h=Math.abs(d-f)<=y,h)));++T){S&&(E=f==d||f>d==A,E&&(g=-g*x,f=d));const B=-s.tension*1e-6*(f-d),I=-s.friction*.001*g,_=(B+I)/s.mass;g=g+_*R,f=f+g*R}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=m+s.easing(w)*(d-m),g=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=g,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=Qi(this),l=a.getValue();if(e){const u=An(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Re.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(fs(this)){const{to:t,config:e}=this.animation;Re.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return V.und(t)?(n=this.queue||[],this.queue=[]):n=[V.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>c1(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Uc(this._state,t&&this._lastCallId),Re.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=V.obj(n)?n[e]:n,(n==null||ev(n))&&(n=void 0),i=V.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return $g(this)||(t.reverse&&([n,i]=[i,n]),i=An(i),V.und(i)?Qi(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,lm(t,(o,a)=>/^on/.test(a)?PR(o,n):o)),KS(this,t,"onProps"),pu(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return _R(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{hu(this)||(GS(this,!0),Mu(s.pauseQueue),pu(this,"onPause",Ni(this,fu(this,this.animation.to)),this))},resume:()=>{hu(this)&&(GS(this,!1),fs(this)&&this._resume(),Mu(s.resumeQueue),pu(this,"onResume",Ni(this,fu(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=$R(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(ol(this));const i=!V.und(t.to),r=!V.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(ol(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;r&&!i&&(!e.default||V.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!Cr(d,u);h&&(a.from=d),d=An(d);const f=!Cr(c,l);f&&this._focus(c);const p=ev(e.to),{config:m}=a,{decay:v,velocity:g}=m;(i||r)&&(m.velocity=0),e.config&&!p&&RB(m,Pn(e.config,s),e.config!==o.config?Pn(o.config,s):void 0);let y=Qi(this);if(!y||V.und(c))return n(Ni(this,!0));const w=V.und(e.reset)?r&&!e.default:!V.und(d)&&Yu(e.reset,s),x=w?d:this.get(),S=jc(c),A=V.num(S)||V.arr(S)||sm(S),P=!p&&(!A||Yu(o.immediate||e.immediate,s));if(f){const T=Qy(c);if(T!==y.constructor)if(P)y=this._set(S);else throw Error(`Cannot animate between ${y.constructor.name} and ${T.name}, as the "to" prop suggests`)}const E=y.constructor;let R=fi(c),N=!1;if(!R){const T=w||!$g(this)&&h;(f||T)&&(N=Cr(jc(x),S),R=!N),(!Cr(a.immediate,P)&&!P||!Cr(m.decay,v)||!Cr(m.velocity,g))&&(R=!0)}if(N&&fs(this)&&(a.changed&&!w?R=!0:R||this._stop(l)),!p&&((R||fi(l))&&(a.values=y.getPayload(),a.toValues=fi(c)?null:E==Fc?[1]:gn(S)),a.immediate!=P&&(a.immediate=P,!P&&!w&&this._set(l)),R)){const{onRest:T}=a;Ae(MB,I=>KS(this,e,I));const B=Ni(this,fu(this,l));Mu(this._pendingCalls,B),this._pendingCalls.add(n),a.changed&&Re.batchedUpdates(()=>{var I;a.changed=!w,T==null||T(B,this),w?Pn(o.onRest,B):(I=a.onStart)==null||I.call(a,B,this)})}w&&this._set(x),p?n(MR(e.to,e,this._state,this)):R?this._start():fs(this)&&!f?this._pendingCalls.add(n):n(NR(x))}_focus(t){const e=this.animation;t!==e.to&&(LS(this)&&this._detach(),e.to=t,LS(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;fi(e)&&(Kl(e,this),iv(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;fi(t)&&Bc(t,this)}_set(t,e=!0){const n=An(t);if(!V.und(n)){const i=Qi(this);if(!i||!Cr(n,i.getValue())){const r=Qy(n);!i||i.constructor!=r?l1(this,r.create(n)):i.setValue(n),i&&Re.batchedUpdates(()=>{this._onChange(n,e)})}}return Qi(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,pu(this,"onStart",Ni(this,fu(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Pn(this.animation.onChange,t,this)),Pn(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Qi(this).reset(An(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),fs(this)||(WS(this,!0),hu(this)||this._resume())}_resume(){Hi.skipAnimation?this.finish():nm.start(this)}_stop(t,e){if(fs(this)){WS(this,!1);const n=this.animation;Ae(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ic(this,{type:"idle",parent:this});const i=e?ol(this.get()):Ni(this.get(),fu(this,t??n.to));Mu(this._pendingCalls,i),n.changed&&(n.changed=!1,pu(this,"onRest",i,this))}}};function fu(t,e){const n=jc(e),i=jc(t.get());return Cr(i,n)}function $R(t,e=t.loop,n=t.to){const i=Pn(e);if(i){const r=i!==!0&&u1(i),s=(r||t).reverse,o=!r||r.reset;return Vc({...t,loop:e,default:!1,pause:void 0,to:!s||ev(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Vc(t){const{to:e,from:n}=t=u1(t),i=new Set;return V.obj(e)&&XS(e,i),V.obj(n)&&XS(n,i),t.keys=i.size?Array.from(i):null,t}function NB(t){const e=Vc(t);return V.und(e.default)&&(e.default=lm(e)),e}function XS(t,e){xr(t,(n,i)=>n!=null&&e.add(i))}var MB=["onStart","onRest","onChange","onPause","onResume"];function KS(t,e,n){t.animation[n]=e[n]!==RR(e,n)?PR(e[n],t.key):void 0}function pu(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var DB=["onStart","onChange","onRest"],$B=1,LR=class{constructor(t,e){this.id=$B++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];V.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Vc(t)),this}start(t){let{queue:e}=this;return t?e=gn(t).map(Vc):this.queue=[],this._flush?this._flush(this,e):(jR(this,e),ov(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;Ae(gn(e),i=>n[i].stop(!!t))}else Uc(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(V.und(t))this.start({pause:!0});else{const e=this.springs;Ae(gn(t),n=>e[n].pause())}return this}resume(t){if(V.und(t))this.start({pause:!1});else{const e=this.springs;Ae(gn(t),n=>e[n].resume())}return this}each(t){xr(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Ku(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&Ku(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Ku(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Re.onFrame(this._onFrame)}};function ov(t,e){return Promise.all(e.map(n=>IR(t,n))).then(n=>c1(t,n))}async function IR(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,u=V.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const c=V.arr(r)||V.fun(r)?r:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):Ae(DB,m=>{const v=e[m];if(V.fun(v)){const g=t._events[m];e[m]=({finished:y,cancelled:w})=>{const x=g.get(v);x?(y||(x.finished=!1),w&&(x.cancelled=!0)):g.set(v,{value:null,finished:y||!1,cancelled:w||!1})},u&&(u[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,Mu(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),f=e.cancel===!0||RR(e,"cancel")===!0;(c||f&&d.asyncId)&&h.push(_R(++t._lastAsyncId,{props:e,state:d,actions:{pause:Yy,resume:Yy,start(m,v){f?(Uc(d,t._lastAsyncId),v(ol(t))):(m.onRest=a,v(MR(c,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const p=c1(t,await Promise.all(h));if(o&&p.finished&&!(n&&p.noop)){const m=$R(e,o,r);if(m)return jR(t,[m]),IR(t,m,!0)}return l&&Re.batchedUpdates(()=>l(p,t,t.item)),p}function av(t,e){const n={...t.springs};return e&&Ae(gn(e),i=>{V.und(i.keys)&&(i=Vc(i)),V.obj(i.to)||(i={...i,to:void 0}),FR(n,i,r=>zR(r))}),BR(t,n),n}function BR(t,e){xr(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,Kl(n,t))})}function zR(t,e){const n=new _B;return n.key=t,e&&Kl(n,e),n}function FR(t,e,n){e.keys&&Ae(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function jR(t,e){Ae(e,n=>{FR(t.springs,n,i=>zR(i,t))})}var hd=({children:t,...e})=>{const n=b.useContext(tp),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=fB(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=tp;return b.createElement(s,{value:e},t)},tp=LB(hd,{});hd.Provider=tp.Provider;hd.Consumer=tp.Consumer;function LB(t,e){return Object.assign(t,b.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var pe=()=>{const t=[],e=function(i){dB();const r=[];return Ae(t,(s,o)=>{if(V.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return Ae(t,i=>i.pause(...arguments)),this},e.resume=function(){return Ae(t,i=>i.resume(...arguments)),this},e.set=function(i){Ae(t,(r,s)=>{const o=V.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return Ae(t,(s,o)=>{if(V.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return Ae(t,i=>i.stop(...arguments)),this},e.update=function(i){return Ae(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return V.fun(i)?i(s,r):i};return e._getProps=n,e};function IB(t,e,n){const i=V.fun(e)&&e;i&&!n&&(n=[]);const r=b.useMemo(()=>i||arguments.length==3?pe():void 0,[]),s=b.useRef(0),o=o1(),a=b.useMemo(()=>({ctrls:[],queue:[],flush(g,y){const w=av(g,y);return s.current>0&&!a.queue.length&&!Object.keys(w).some(S=>!g.springs[S])?ov(g,y):new Promise(S=>{BR(g,w),a.queue.push(()=>{S(ov(g,y))}),o()})}}),[]),l=b.useRef([...a.ctrls]),u=[],c=qy(t)||0;b.useMemo(()=>{Ae(l.current.slice(t,c),g=>{tv(g,r),g.stop(!0)}),l.current.length=t,d(c,t)},[t]),b.useMemo(()=>{d(0,Math.min(c,t))},n);function d(g,y){for(let w=g;w<y;w++){const x=l.current[w]||(l.current[w]=new LR(null,a.flush)),S=i?i(w,x):e[w];S&&(u[w]=NB(S))}}const h=l.current.map((g,y)=>av(g,u[y])),f=b.useContext(hd),p=qy(f),m=f!==p&&TR(f);Do(()=>{s.current++,a.ctrls=l.current;const{queue:g}=a;g.length&&(a.queue=[],Ae(g,y=>y())),Ae(l.current,(y,w)=>{r==null||r.add(y),m&&y.start({default:f});const x=u[w];x&&(OR(y,x.ref),y.ref?y.queue.push(x):y.start(x))})}),a1(()=>()=>{Ae(a.ctrls,g=>g.stop(!0))});const v=h.map(g=>({...g}));return r?[v,r]:v}function Wt(t,e){const n=V.fun(t),[[i],r]=IB(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[i,r]:i}function BB(t,e,n){const i=V.fun(e)&&e,{reset:r,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:u,ref:c,config:d}=i?i():e,h=b.useMemo(()=>i||arguments.length==3?pe():void 0,[]),f=gn(t),p=[],m=b.useRef(null),v=r?null:m.current;Do(()=>{m.current=p}),a1(()=>(Ae(p,_=>{h==null||h.add(_.ctrl),_.ctrl.ref=h}),()=>{Ae(m.current,_=>{_.expired&&clearTimeout(_.expirationId),tv(_.ctrl,h),_.ctrl.stop(!0)})}));const g=FB(f,i?i():e,v),y=r&&m.current||[];Do(()=>Ae(y,({ctrl:_,item:D,key:z})=>{tv(_,h),Pn(u,D,z)}));const w=[];if(v&&Ae(v,(_,D)=>{_.expired?(clearTimeout(_.expirationId),y.push(_)):(D=w[D]=g.indexOf(_.key),~D&&(p[D]=_))}),Ae(f,(_,D)=>{p[D]||(p[D]={key:g[D],item:_,phase:"mount",ctrl:new LR},p[D].ctrl.item=_)}),w.length){let _=-1;const{leave:D}=i?i():e;Ae(w,(z,L)=>{const O=v[L];~z?(_=p.indexOf(O),p[_]={...O,item:f[z]}):D&&p.splice(++_,0,O)})}V.fun(s)&&p.sort((_,D)=>s(_.item,D.item));let x=-o;const S=o1(),A=lm(e),P=new Map,E=b.useRef(new Map),R=b.useRef(!1);Ae(p,(_,D)=>{const z=_.key,L=_.phase,O=i?i():e;let $,F;const Y=Pn(O.delay||0,z);if(L=="mount")$=O.enter,F="enter";else{const Se=g.indexOf(z)<0;if(L!="leave")if(Se)$=O.leave,F="leave";else if($=O.update)F="update";else return;else if(!Se)$=O.enter,F="enter";else return}if($=Pn($,_.item,D),$=V.obj($)?u1($):{to:$},!$.config){const Se=d||A.config;$.config=Pn(Se,_.item,D,F)}x+=o;const ie={...A,delay:Y+x,ref:c,immediate:O.immediate,reset:!1,...$};if(F=="enter"&&V.und(ie.from)){const Se=i?i():e,xe=V.und(Se.initial)||v?Se.from:Se.initial;ie.from=Pn(xe,_.item,D)}const{onResolve:ce}=ie;ie.onResolve=Se=>{Pn(ce,Se);const xe=m.current,Q=xe.find(ye=>ye.key===z);if(Q&&!(Se.cancelled&&Q.phase!="update")&&Q.ctrl.idle){const ye=xe.every(Ne=>Ne.ctrl.idle);if(Q.phase=="leave"){const Ne=Pn(a,Q.item);if(Ne!==!1){const Ee=Ne===!0?0:Ne;if(Q.expired=!0,!ye&&Ee>0){Ee<=2147483647&&(Q.expirationId=setTimeout(S,Ee));return}}}ye&&xe.some(Ne=>Ne.expired)&&(E.current.delete(Q),l&&(R.current=!0),S())}};const we=av(_.ctrl,ie);F==="leave"&&l?E.current.set(_,{phase:F,springs:we,payload:ie}):P.set(_,{phase:F,springs:we,payload:ie})});const N=b.useContext(hd),T=qy(N),B=N!==T&&TR(N);Do(()=>{B&&Ae(p,_=>{_.ctrl.start({default:N})})},[N]),Ae(P,(_,D)=>{if(E.current.size){const z=p.findIndex(L=>L.key===D.key);p.splice(z,1)}}),Do(()=>{Ae(E.current.size?E.current:P,({phase:_,payload:D},z)=>{const{ctrl:L}=z;z.phase=_,h==null||h.add(L),B&&_=="enter"&&L.start({default:N}),D&&(OR(L,D.ref),(L.ref||h)&&!R.current?L.update(D):(L.start(D),R.current&&(R.current=!1)))})},r?void 0:n);const I=_=>b.createElement(b.Fragment,null,p.map((D,z)=>{const{springs:L}=P.get(D)||D.ctrl,O=_({...L},D.item,D,z);return O&&O.type?b.createElement(O.type,{...O.props,key:V.str(D.key)||V.num(D.key)?D.key:D.ctrl.id,ref:O.ref}):O}));return h?[I,h]:I}var zB=1;function FB(t,{key:e,keys:n=e},i){if(n===null){const r=new Set;return t.map(s=>{const o=i&&i.find(a=>a.item===s&&a.phase!=="leave"&&!r.has(a));return o?(r.add(o),o.key):zB++})}return V.und(n)?t:V.fun(n)?t.map(n):gn(n)}var jB=class extends d1{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=$c(...e);const n=this._get(),i=Qy(n);l1(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Cr(e,n)||(Qi(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&ZS(this._active)&&Lg(this)}_get(){const t=V.arr(this.source)?this.source.map(An):gn(An(this.source));return this.calc(...t)}_start(){this.idle&&!ZS(this._active)&&(this.idle=!1,Ae(om(this),t=>{t.done=!1}),Hi.skipAnimation?(Re.batchedUpdates(()=>this.advance()),Lg(this)):nm.start(this))}_attach(){let t=1;Ae(gn(this.source),e=>{fi(e)&&Kl(e,this),iv(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Ae(gn(this.source),t=>{fi(t)&&Bc(t,this)}),this._active.clear(),Lg(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=gn(this.source).reduce((e,n)=>Math.max(e,(iv(n)?n.priority:0)+1),0))}};function UB(t){return t.idle!==!1}function ZS(t){return!t.size||Array.from(t).every(UB)}function Lg(t){t.idle||(t.idle=!0,Ae(om(t),e=>{e.done=!0}),Ic(t,{type:"idle",parent:t}))}Hi.assign({createStringInterpolator:kR,to:(t,e)=>new jB(t,e)});var UR=/^--/;function VB(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!UR.test(t)&&!(Ju.hasOwnProperty(t)&&Ju[t])?e+"px":(""+e).trim()}var YS={};function HB(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,u=Object.values(l),c=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:YS[d]||(YS[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in i)if(i.hasOwnProperty(d)){const h=VB(d,i[d]);UR.test(d)?t.style.setProperty(d,h):t.style[d]=h}c.forEach((d,h)=>{t.setAttribute(d,u[h])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var Ju={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WB=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),GB=["Webkit","Ms","Moz","O"];Ju=Object.keys(Ju).reduce((t,e)=>(GB.forEach(n=>t[WB(n,e)]=t[e]),t),Ju);var XB=/^(matrix|translate|scale|rotate|skew)/,KB=/^(translate)/,ZB=/^(rotate|skew)/,Ig=(t,e)=>V.num(t)&&t!==0?t+e:t,Xh=(t,e)=>V.arr(t)?t.every(n=>Xh(n,e)):V.num(t)?t===e:parseFloat(t)===e,YB=class extends am{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Ig(a,"px")).join(",")})`,Xh(o,0)])),xr(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(XB.test(a)){if(delete i[a],V.und(o))return;const l=KB.test(a)?"px":ZB.test(a)?"deg":"";r.push(gn(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${Ig(h,l)})`,Xh(h,0)]:u=>[`${a}(${u.map(c=>Ig(c,l)).join(",")})`,Xh(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new JB(r,s)),super(i)}},JB=class extends xR{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Ae(this.inputs,(n,i)=>{const r=An(n[0]),[s,o]=this.transforms[i](V.arr(r)?r:n.map(An));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Ae(this.inputs,e=>Ae(e,n=>fi(n)&&Kl(n,this)))}observerRemoved(t){t==0&&Ae(this.inputs,e=>Ae(e,n=>fi(n)&&Bc(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Ic(this,t)}},qB=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Hi.assign({batchedUpdates:la.unstable_batchedUpdates,createStringInterpolator:kR,colors:V4});var QB=bB(qB,{applyAnimatedValues:HB,createAnimatedStyle:t=>new YB(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),At=QB.animated;const wt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"}},Ve={bus:{address:pe(),data:pe(),rd:pe(),wr:pe(),iom:pe(),mem:pe(),pic:pe(),timer:pe(),intr:pe(),inta:pe(),int0:pe(),int1:pe(),int2:pe()},clock:pe(),cpu:{internalBus:{address:pe(),data:pe()},alu:{operands:pe(),results:pe(),cog:pe(),operation:pe()},decoder:{path:pe(),progress:pe()},AX:pe(),BX:pe(),CX:pe(),DX:pe(),SP:pe(),IP:pe(),IR:pe(),ri:pe(),id:pe(),left:pe(),right:pe(),result:pe(),FLAGS:pe(),MAR:pe(),MBR:pe()},pic:{IMR:pe(),IRR:pe(),ISR:pe(),INT0:pe(),INT1:pe(),INT2:pe(),INT3:pe(),INT4:pe(),INT5:pe(),INT6:pe(),INT7:pe()},timer:{CONT:pe(),COMP:pe()}},Wa=new Set;async function $e(t,e,n){const i=Wp(Ve,t);if(!i)throw new Error(`No animation ref found for key ${t}`);Wa.has(t)&&await new Promise(s=>{const o=setInterval(()=>{Wa.has(t)||(clearInterval(o),s())},5)}),Wa.add(t);const r=await Promise.all(i.start({...e,config:{duration:rs().executionUnit*n.duration,easing:r1[n.easing]}}));return Wa.delete(t),r}const e8=()=>Wa.forEach(t=>Wp(Ve,t).resume()),t8=()=>Wa.forEach(t=>Wp(Ve,t).stop());async function Ar(t,e=wt.mantis[400]){await $e(t,{backgroundColor:e},{duration:1,easing:"easeOutQuart"})}async function Pr(t){await $e(t,{backgroundColor:wt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function np(t){await $e("bus.data",{stroke:wt.mantis[400]},{duration:5,easing:"easeOutSine"}),await $e("cpu.MBR",{backgroundColor:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),G.set(Nl,t),await $e("cpu.MBR",{backgroundColor:wt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function Dl(t,e){await $e(`bus.${t}`,{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},{duration:e,easing:"easeInOutSine"})}async function $l(t){await $e(`bus.${t}`,{opacity:0},{duration:1,easing:"easeInSine"})}const h1=de(M.zero(8)),f1=de(M.zero(8));function n8(t){G.set(h1,M.fromUnsigned(t.io.timer.CONT,8)),G.set(f1,M.fromUnsigned(t.io.timer.COMP,8))}const VR=de(M.fromUnsigned(0,8)),HR=de(M.fromUnsigned(1,8));function i8(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{G.set(Nl,t.value);return}case"handshake:write":case"handshake:register.update":switch(t.register){case"DATA":{G.set(VR,t.value);return}case"STATE":{G.set(HR,t.value);return}default:return t.register}case"handshake:write.ok":return;case"handshake:interrupt":return;default:return t}}const WR=de(M.zero(8));function r8(t){switch(t.type){case"leds:update":{G.set(WR,t.state);return}default:return t}}const GR=de(M.zero(8)),XR=de(M.zero(8)),KR=de(M.zero(8)),ZR=de(M.zero(8));function s8(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{G.set(Nl,t.value);return}case"pio:write":case"pio:register.update":switch(t.register){case"PA":{G.set(GR,t.value);return}case"PB":{G.set(XR,t.value);return}case"CA":{G.set(KR,t.value);return}case"CB":{G.set(ZR,t.value);return}default:return t.register}case"pio:write.ok":return;default:return t}}const lv=de([]),uv=de("");function o8(t){switch(t.type){case"printer:buffer.add":{G.set(lv,e=>[...e,t.char]);return}case"printer:buffer.pop":{G.set(lv,e=>e.slice(1));return}case"printer:busy.off":return;case"printer:busy.on":return;case"printer:data.read":return;case"printer:paper.print":{const e=jn.getComputerState().io;"printer"in e&&G.set(uv,e.printer.paper);return}case"printer:paper.replace":{G.set(uv,"");return}case"printer:strobe.off":return;case"printer:strobe.on":return;default:return t}}const YR=de(M.zero(8));function a8(t){switch(t.type){case"switches:toggle":{G.set(YR,e=>e.withBit(t.index,!e.bit(t.index)));return}default:return t}}async function l8(t){switch(t.type){case"bus:io.selected":{await Promise.all([$e("bus.mem",{stroke:wt.stone[700]},{duration:1,easing:"easeInSine"}),Dl(t.chip,15)]);return}case"bus:io.error":{ia(t.error);return}case"bus:reset":{const e={stroke:wt.stone[700]},n={duration:1,easing:"easeInSine"};await Promise.all([$e("bus.address",e,n),$e("bus.data",e,n),$e("bus.rd",e,n),$e("bus.wr",e,n),$l("iom"),$e("bus.mem",{stroke:wt.red[500]},{duration:1,easing:"easeOutSine"}),$l("pic")]);return}default:return t}}async function u8(t){switch(t.type){case"clock:tick":return;default:return t.type}}function c8(t){switch(t){case"IP":return"M 551 309 H 575 V 349 H 598";case"SP":return"M 551 349 H 598";case"ri":return"M 544 388 H 575 V 349 H 598";default:throw new Error(`Invalid register ${t}`)}}function d8(){const{path:t,...e}=Wt({ref:Ve.cpu.internalBus.address,from:{strokeDashoffset:1,opacity:1,path:""}});return C.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[C.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598"].join(" ")}),C.jsx(At.path,{d:t,className:"fill-none stroke-blue-500 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var p1={exports:{}},al=typeof Reflect=="object"?Reflect:null,JS=al&&typeof al.apply=="function"?al.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},Kh;al&&typeof al.ownKeys=="function"?Kh=al.ownKeys:Object.getOwnPropertySymbols?Kh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Kh=function(e){return Object.getOwnPropertyNames(e)};function h8(t){console&&console.warn&&console.warn(t)}var JR=Number.isNaN||function(e){return e!==e};function Xe(){Xe.init.call(this)}p1.exports=Xe;p1.exports.once=g8;Xe.EventEmitter=Xe;Xe.prototype._events=void 0;Xe.prototype._eventsCount=0;Xe.prototype._maxListeners=void 0;var qS=10;function um(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Xe,"defaultMaxListeners",{enumerable:!0,get:function(){return qS},set:function(t){if(typeof t!="number"||t<0||JR(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");qS=t}});Xe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Xe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||JR(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function qR(t){return t._maxListeners===void 0?Xe.defaultMaxListeners:t._maxListeners}Xe.prototype.getMaxListeners=function(){return qR(this)};Xe.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")JS(l,this,n);else for(var u=l.length,c=iT(l,u),i=0;i<u;++i)JS(c[i],this,n);return!0};function QR(t,e,n,i){var r,s,o;if(um(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=qR(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,h8(a)}return t}Xe.prototype.addListener=function(e,n){return QR(this,e,n,!1)};Xe.prototype.on=Xe.prototype.addListener;Xe.prototype.prependListener=function(e,n){return QR(this,e,n,!0)};function f8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function eT(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=f8.bind(i);return r.listener=n,i.wrapFn=r,r}Xe.prototype.once=function(e,n){return um(n),this.on(e,eT(this,e,n)),this};Xe.prototype.prependOnceListener=function(e,n){return um(n),this.prependListener(e,eT(this,e,n)),this};Xe.prototype.removeListener=function(e,n){var i,r,s,o,a;if(um(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():p8(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Xe.prototype.off=Xe.prototype.removeListener;Xe.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function tT(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?m8(r):iT(r,r.length)}Xe.prototype.listeners=function(e){return tT(this,e,!0)};Xe.prototype.rawListeners=function(e){return tT(this,e,!1)};Xe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):nT.call(t,e)};Xe.prototype.listenerCount=nT;function nT(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Xe.prototype.eventNames=function(){return this._eventsCount>0?Kh(this._events):[]};function iT(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function p8(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function m8(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function g8(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}rT(t,e,s,{once:!0}),e!=="error"&&y8(t,r,{once:!0})})}function y8(t,e,n){typeof t.on=="function"&&rT(t,"error",e,n)}function rT(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var v8=p1.exports;function br(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(br.prototype[Symbol.iterator]=function(){return this});br.of=function(){var t=arguments,e=t.length,n=0;return new br(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};br.empty=function(){var t=new br(function(){return{done:!0}});return t};br.fromSequence=function(t){var e=0,n=t.length;return new br(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};br.is=function(t){return t instanceof br?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var cm=br;const ki=Jc(cm);var dm={};dm.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";dm.SYMBOL_SUPPORT=typeof Symbol<"u";var w8=cm,sT=dm,x8=sT.ARRAY_BUFFER_SUPPORT,b8=sT.SYMBOL_SUPPORT;function S8(t){return typeof t=="string"||Array.isArray(t)||x8&&ArrayBuffer.isView(t)?w8.fromSequence(t):typeof t!="object"||t===null?null:b8&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var oT=function(e){var n=S8(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},k8=oT,E8=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=k8(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const aT=Jc(E8);var C8=cm,A8=oT,P8=function(){var e=arguments,n=null,i=-1;return new C8(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=A8(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Xr=Jc(P8);function R8(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let Mt=R8;typeof Object.assign=="function"&&(Mt=Object.assign);function xi(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Gt(t){return typeof t=="object"&&t!==null}function lT(t){let e;for(e in t)return!1;return!0}function ri(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Ci(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function QS(t){return!(!Gt(t)||t.attributes&&!Array.isArray(t.attributes))}function T8(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class m1 extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ee extends m1{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ee.prototype.constructor)}}class X extends m1{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,X.prototype.constructor)}}class ge extends m1{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ge.prototype.constructor)}}function uT(t,e){this.key=t,this.attributes=e,this.clear()}uT.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function cT(t,e){this.key=t,this.attributes=e,this.clear()}cT.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function dT(t,e){this.key=t,this.attributes=e,this.clear()}dT.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Zl(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Zl.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Zl.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};Zl.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Zl.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const hT=0,fT=1,O8=2,pT=3;function ds(t,e,n,i,r,s,o){let a,l,u,c;if(i=""+i,n===hT){if(a=t._nodes.get(i),!a)throw new X(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===pT){if(r=""+r,l=t._edges.get(r),!l)throw new X(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new X(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(i),!l)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===fT?a=l.source:a=l.target,u=r,c=s}return[a,u,c]}function _8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ds(this,e,n,i,r,s);return o.attributes[a]}}function N8(t,e,n){t.prototype[e]=function(i,r){const[s]=ds(this,e,n,i,r);return s.attributes}}function M8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ds(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function D8(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=ds(this,e,n,i,r,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function $8(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=ds(this,e,n,i,r,s,o);if(typeof u!="function")throw new ee(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function L8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ds(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function I8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ds(this,e,n,i,r,s);if(!Gt(a))throw new ee(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function B8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ds(this,e,n,i,r,s);if(!Gt(a))throw new ee(`Graph.${e}: provided attributes are not a plain object.`);return Mt(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function z8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ds(this,e,n,i,r,s);if(typeof a!="function")throw new ee(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const F8=[{name:t=>`get${t}Attribute`,attacher:_8},{name:t=>`get${t}Attributes`,attacher:N8},{name:t=>`has${t}Attribute`,attacher:M8},{name:t=>`set${t}Attribute`,attacher:D8},{name:t=>`update${t}Attribute`,attacher:$8},{name:t=>`remove${t}Attribute`,attacher:L8},{name:t=>`replace${t}Attributes`,attacher:I8},{name:t=>`merge${t}Attributes`,attacher:B8},{name:t=>`update${t}Attributes`,attacher:z8}];function j8(t){F8.forEach(function({name:e,attacher:n}){n(t,e("Node"),hT),n(t,e("Source"),fT),n(t,e("Target"),O8),n(t,e("Opposite"),pT)})}function U8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function V8(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=xi(this,s,o,n),!r)throw new X(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function H8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function W8(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=xi(this,a,l,n),!o)throw new X(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function G8(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=xi(this,a,l,n),!o)throw new X(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new ee(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function X8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function K8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Gt(r))throw new ee(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Z8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Gt(r))throw new ee(`Graph.${e}: provided attributes are not a plain object.`);return Mt(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function Y8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xi(this,o,a,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new ee(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const J8=[{name:t=>`get${t}Attribute`,attacher:U8},{name:t=>`get${t}Attributes`,attacher:V8},{name:t=>`has${t}Attribute`,attacher:H8},{name:t=>`set${t}Attribute`,attacher:W8},{name:t=>`update${t}Attribute`,attacher:G8},{name:t=>`remove${t}Attribute`,attacher:X8},{name:t=>`replace${t}Attributes`,attacher:K8},{name:t=>`merge${t}Attributes`,attacher:Z8},{name:t=>`update${t}Attributes`,attacher:Y8}];function q8(t){J8.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Q8=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function ez(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function tz(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Bg(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new ki(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function nz(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function iz(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function zg(t,e){let n=t[e];return n.next!==void 0?new ki(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):ki.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function rz(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):aT(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function mT(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=i(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function sz(t,e){if(t.size===0)return ki.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new ki(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function g1(t,e,n,i,r,s){const o=e?tz:ez;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function oz(t,e,n,i){const r=[];return g1(!1,t,e,n,i,function(s){r.push(s)}),r}function az(t,e,n){let i=ki.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Xr(i,Bg(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Xr(i,Bg(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Xr(i,Bg(n.undirected))),i}function y1(t,e,n,i,r,s,o){const a=n?iz:nz;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function lz(t,e,n,i,r){const s=[];return y1(!1,t,e,n,i,r,function(o){s.push(o)}),s}function uz(t,e,n,i){let r=ki.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Xr(r,zg(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Xr(r,zg(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Xr(r,zg(n.undirected,i))),r}function cz(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return rz(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new X(`Graph.${n}: could not find the "${s}" node in the graph.`);return oz(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new X(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new X(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return lz(i,this.multi,r,a,o)}throw new ee(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function dz(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,mT(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new X(`Graph.${s}: could not find the "${u}" node in the graph.`);return g1(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new X(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new X(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return y1(!1,i,this.multi,r,h,c,d)}throw new ee(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,m,v,g,y,w,x)=>{d[f++]=c(p,m,v,g,y,w,x)})}else d=[],u.push((h,f,p,m,v,g,y)=>{d.push(c(h,f,p,m,v,g,y))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,m,v,g,y)=>{c(h,f,p,m,v,g,y)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new ee(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new ee(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,m,v,g,y,w)=>{h=c(h,f,p,m,v,g,y,w)}),this[s].apply(this,u),h}}function hz(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=l,mT(!0,this,i,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new X(`Graph.${s}: could not find the "${l}" node in the graph.`);return g1(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new X(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new X(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return y1(!0,i,this.multi,r,d,u,c)}throw new ee(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,m,v,g)=>u(d,h,f,p,m,v,g)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,m,v,g)=>!u(d,h,f,p,m,v,g)),!this[s].apply(this,l)}}function fz(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return ki.empty();if(!arguments.length)return sz(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new X(`Graph.${s}: could not find the "${o}" node in the graph.`);return az(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new X(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new X(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return uz(i,r,l,a)}throw new ee(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function pz(t){Q8.forEach(e=>{cz(t,e),dz(t,e),hz(t,e),fz(t,e)})}const mz=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function hm(){this.A=null,this.B=null}hm.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};hm.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function mu(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function v1(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return mu(t,null,i,i.undirected,r);if(typeof n=="string")return mu(t,null,i,i[n],r)}const s=new hm;let o;if(e!=="undirected"){if(n!=="out"){if(o=mu(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=mu(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=mu(t,s,i,i.undirected,r),t&&o))return o}function gz(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return v1(!1,t,e,n,function(r){i.push(r)}),i}function gu(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new ki(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function yz(t,e,n){if(t!=="mixed"){if(t==="undirected")return gu(null,n,n.undirected);if(typeof e=="string")return gu(null,n,n[e])}let i=ki.empty();const r=new hm;return t!=="undirected"&&(e!=="out"&&(i=Xr(i,gu(r,n,n.in))),e!=="in"&&(i=Xr(i,gu(r,n,n.out)))),t!=="directed"&&(i=Xr(i,gu(r,n,n.undirected))),i}function vz(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new X(`Graph.${n}: could not find the "${s}" node in the graph.`);return gz(i==="mixed"?this.type:i,r,o)}}function wz(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new X(`Graph.${s}: could not find the "${u}" node in the graph.`);v1(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new ee(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function xz(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new X(`Graph.${o}: could not find the "${u}" node in the graph.`);return v1(!0,i==="mixed"?this.type:i,r,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function bz(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return ki.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new X(`Graph.${s}: could not find the "${o}" node in the graph.`);return yz(i==="mixed"?this.type:i,r,a)}}function Sz(t){mz.forEach(e=>{vz(t,e),wz(t,e),xz(t,e),bz(t,e)})}function nh(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,u,c,d,h,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do{if(h=d.target,p=!0,f=r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do{if(h=d.target,h.key!==u&&(h=d.source),p=!0,f=r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(n&&!p&&(f=r(l.key,null,l.attributes,null,null,null,null),t&&f))return null}}function kz(t,e){const n={key:t};return lT(e.attributes)||(n.attributes=Mt({},e.attributes)),n}function Ez(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return lT(n.attributes)||(i.attributes=Mt({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function Cz(t){if(!Gt(t))throw new ee('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ee("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Gt(t.attributes)||t.attributes===null))throw new ee("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Az(t){if(!Gt(t))throw new ee('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ee("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ee("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Gt(t.attributes)||t.attributes===null))throw new ee("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ee("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Pz=T8(),Rz=new Set(["directed","undirected","mixed"]),ek=new Set(["domain","_events","_eventsCount","_maxListeners"]),Tz=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Oz={allowSelfLoops:!0,multi:!1,type:"mixed"};function _z(t,e,n){if(n&&!Gt(n))throw new ee(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new ge(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function tk(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function gT(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new ge(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new ge(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Gt(a))throw new ee(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new ge(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new X(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new X(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new ge(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new ge(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Zl(i,r,l,u,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function Nz(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new ge(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new ge(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ee(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Gt(a))throw new ee(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new ge(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new ge(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!u:!a)return y;if(l){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Mt(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new ge(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,v=!1;c||(c=tk(t,s,{}),m=!0,s===o&&(d=c,v=!0)),d||(d=tk(t,o,{}),v=!0),h=new Zl(i,r,c,d,a),t._edges.set(r,h);const g=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,g&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,g&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,m,v]}function wa(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Ye extends v8.EventEmitter{constructor(e){if(super(),e=Mt({},Oz,e),typeof e.multi!="boolean")throw new ee(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Rz.has(e.type))throw new ee(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ee(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?uT:e.type==="directed"?cT:dT;ri(this,"NodeDataClass",n);const i="geid_"+Pz()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};ri(this,"_attributes",{}),ri(this,"_nodes",new Map),ri(this,"_edges",new Map),ri(this,"_directedSize",0),ri(this,"_undirectedSize",0),ri(this,"_directedSelfLoopCount",0),ri(this,"_undirectedSelfLoopCount",0),ri(this,"_edgeKeyGenerator",s),ri(this,"_options",e),ek.forEach(o=>ri(this,o,this[o])),Ci(this,"order",()=>this._nodes.size),Ci(this,"size",()=>this._edges.size),Ci(this,"directedSize",()=>this._directedSize),Ci(this,"undirectedSize",()=>this._undirectedSize),Ci(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Ci(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Ci(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Ci(this,"multi",this._options.multi),Ci(this,"type",this._options.type),Ci(this,"allowSelfLoops",this._options.allowSelfLoops),Ci(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new ee(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new ee(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new ee(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new ge("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new X(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new ge("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new X(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new ge("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new X(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new X(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new X(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return _z(this,e,n).key}mergeNode(e,n){if(n&&!Gt(n))throw new ee(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(Mt(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ee(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do wa(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do wa(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do wa(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=xi(this,i,r,this.type),!n)throw new X(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new X(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return wa(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new ge("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ge("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=xi(this,e,n,"directed");if(!i)throw new X(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return wa(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new ge("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ge("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=xi(this,e,n,"undirected");if(!i)throw new X(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return wa(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ee("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Gt(e))throw new ee("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Gt(e))throw new ee("Graph.mergeAttributes: provided attributes are not a plain object.");return Mt(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ee("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ee("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!QS(n))throw new ee("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ee("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!QS(n))throw new ee("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ee("Graph.forEachAdjacencyEntry: expecting a callback.");nh(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ee("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");nh(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ee("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");nh(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ee("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");nh(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):aT(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ee("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new ee("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new ee("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new ee("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ee("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ee("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ee("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ee("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new ki(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=kz(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=Ez(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Ye)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!Gt(e))throw new ee("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Gt(e.attributes))throw new ee("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ee("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],Cz(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ee("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Az(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new Ye(Mt({},this._options,e));return n.replaceAttributes(Mt({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Mt({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new ge(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new ge("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new ge("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,gT(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Mt({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!ek.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,ri(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Ye.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ye.prototype.inspect);Tz.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?gT:Nz;t.generateKey?Ye.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Ye.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});j8(Ye);q8(Ye);pz(Ye);Sz(Ye);class yT extends Ye{constructor(e){const n=Mt({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ee("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ee('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class w1 extends Ye{constructor(e){const n=Mt({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ee("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ee('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class vT extends Ye{constructor(e){const n=Mt({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ee("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class wT extends Ye{constructor(e){const n=Mt({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ee("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ee('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class xT extends Ye{constructor(e){const n=Mt({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ee("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ee('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Yl(t){t.from=function(e,n){const i=Mt({},e.options,n),r=new t(i);return r.import(e),r}}Yl(Ye);Yl(yT);Yl(w1);Yl(vT);Yl(wT);Yl(xT);Ye.Graph=Ye;Ye.DirectedGraph=yT;Ye.UndirectedGraph=w1;Ye.MultiGraph=vT;Ye.MultiDirectedGraph=wT;Ye.MultiUndirectedGraph=xT;Ye.InvalidArgumentsGraphError=ee;Ye.NotFoundGraphError=X;Ye.UsageGraphError=ge;var Mz=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},bT=dm,Dz=bT.ARRAY_BUFFER_SUPPORT,$z=bT.SYMBOL_SUPPORT,Lz=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Dz&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if($z&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},ST=cm,Iz=Lz;function Tt(){this.clear()}Tt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Tt.prototype.enqueue=function(t){return this.items.push(t),++this.size};Tt.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};Tt.prototype.peek=function(){if(this.size)return this.items[this.offset]};Tt.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};Tt.prototype.toArray=function(){return this.items.slice(this.offset)};Tt.prototype.values=function(){var t=this.items,e=this.offset;return new ST(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};Tt.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new ST(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(Tt.prototype[Symbol.iterator]=Tt.prototype.values);Tt.prototype.toString=function(){return this.toArray().join(",")};Tt.prototype.toJSON=function(){return this.toArray()};Tt.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Tt,enumerable:!1}),t};typeof Symbol<"u"&&(Tt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Tt.prototype.inspect);Tt.from=function(t){var e=new Tt;return Iz(t,function(n){e.enqueue(n)}),e};Tt.of=function(){return Tt.from(arguments)};var Bz=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},kT=Mz,zz=Bz;function Fz(t,e,n){if(!kT(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,m,v,g=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,m=u.length;f<m;f++)for(c=u[f],d=r(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){g=!0;break e}}else for(u=l,l=[],f=0,m=u.length;f<m;f++)for(c=u[f],d=i(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){g=!0;break e}if(!g)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function ET(t,e,n){if(!kT(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!i.has(u)&&(i.add(u),zz(c,e[t](u)),r[u]=s);s++,o=c}return r}ET.bind(null,"outboundNeighbors");ET.bind(null,"neighbors");var jz=Fz;const oe=new w1({allowSelfLoops:!1});oe.addNode("MBR",{position:[610,250]});oe.addNode("AX",{position:[522,45]});oe.addNode("BX",{position:[522,85]});oe.addNode("CX",{position:[522,125]});oe.addNode("DX",{position:[522,165]});oe.addNode("id",{position:[522,205]});oe.addNode("IP",{position:[451,309]});oe.addNode("SP",{position:[451,349]});oe.addNode("ri",{position:[451,388]});oe.addNode("result",{position:[370,130]});oe.addNode("FLAGS",{position:[250,225]});oe.addNode("IR",{position:[205,272]});oe.addNode("left",{position:[60,85]});oe.addNode("right",{position:[60,145]});oe.addNode("AX join",{position:[492,45]});oe.addNode("BX join",{position:[492,85]});oe.addNode("CX join",{position:[492,125]});oe.addNode("DX join",{position:[492,165]});oe.addNode("id join",{position:[492,205]});oe.addNode("data mbr join",{position:[492,250]});oe.addNode("IP join",{position:[421,309]});oe.addNode("SP join",{position:[421,349]});oe.addNode("ri join",{position:[421,388]});oe.addNode("addresses mbr join",{position:[421,250]});oe.addNode("result mbr join",{position:[370,250]});oe.addNode("FLAGS mbr join",{position:[250,250]});oe.addNode("IR mbr join",{position:[205,250]});oe.addNode("left join",{position:[30,85]});oe.addNode("right join",{position:[30,145]});oe.addNode("operands mbr join",{position:[30,250]});oe.addUndirectedEdge("AX","AX join");oe.addUndirectedEdge("BX","BX join");oe.addUndirectedEdge("CX","CX join");oe.addUndirectedEdge("DX","DX join");oe.addUndirectedEdge("id","id join");oe.addUndirectedEdge("AX join","BX join");oe.addUndirectedEdge("BX join","CX join");oe.addUndirectedEdge("CX join","DX join");oe.addUndirectedEdge("DX join","id join");oe.addUndirectedEdge("id join","data mbr join");oe.addUndirectedEdge("data mbr join","MBR");oe.addUndirectedEdge("IP","IP join");oe.addUndirectedEdge("SP","SP join");oe.addUndirectedEdge("ri","ri join");oe.addUndirectedEdge("IP join","SP join");oe.addUndirectedEdge("SP join","ri join");oe.addUndirectedEdge("IP join","addresses mbr join");oe.addUndirectedEdge("addresses mbr join","data mbr join");oe.addUndirectedEdge("result","result mbr join");oe.addUndirectedEdge("result mbr join","addresses mbr join");oe.addUndirectedEdge("FLAGS","FLAGS mbr join");oe.addUndirectedEdge("FLAGS mbr join","result mbr join");oe.addUndirectedEdge("IR","IR mbr join");oe.addUndirectedEdge("IR mbr join","FLAGS mbr join");oe.addUndirectedEdge("left","left join");oe.addUndirectedEdge("right","right join");oe.addUndirectedEdge("left join","right join");oe.addUndirectedEdge("right join","operands mbr join");oe.addUndirectedEdge("operands mbr join","IR mbr join");function Uz(t,e){const n=jz(oe,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const i=oe.getNodeAttribute(n[0],"position");let r=`M ${i[0]} ${i[1]}`;for(let s=1;s<n.length;s++){const[o,a]=oe.getNodeAttribute(n[s],"position");r+=` L ${o} ${a}`}return r}function Vz(){const{path:t,...e}=Wt({ref:Ve.cpu.internalBus.data,from:{strokeDashoffset:1,opacity:1,path:""}});return C.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[C.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 272 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),C.jsx(At.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const Fg=(t,e)=>{const n=Uz(t,e);return $e("cpu.internalBus.data",{from:{strokeDashoffset:1,opacity:1,path:n},to:{strokeDashoffset:0}},{duration:5,easing:"easeInOutSine"})},jg=()=>$e("cpu.internalBus.data",{opacity:0},{duration:1,easing:"easeInSine"});async function Hz(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"},n={duration:1,easing:"easeInSine"};await $e("cpu.alu.operands",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},e),G.set(cR,t.operation),await Promise.all([$e("cpu.alu.operation",{backgroundColor:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),$e("cpu.alu.cog",{rot:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([$e("cpu.alu.operation",{backgroundColor:wt.stone[800]},{duration:1,easing:"easeOutQuart"}),$e("cpu.alu.results",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},e)]),await Promise.all([Ar("cpu.result"),Ar("cpu.FLAGS")]),G.set(tt.FLAGS,t.flags),G.set(tt.result,t.result),await Promise.all([Pr("cpu.result"),Pr("cpu.FLAGS")]),await Promise.all([$e("cpu.alu.operands",{opacity:0},n),$e("cpu.alu.results",{opacity:0},n)]);return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{G.set(Ao,e=>e.phase==="stopped"?e:{...e,phase:"interrupt"}),await Promise.all([$e("cpu.id",{opacity:1},{duration:.5,easing:"easeInOutQuad"}),$e("cpu.ri",{opacity:1},{duration:.5,easing:"easeInOutQuad"})]);return}case"cpu:cycle.start":{qP(t.instruction.position.start),G.set(Ao,{phase:"fetching",metadata:t.instruction}),await Promise.all([$e("cpu.id",{opacity:t.instruction.willUse.id?1:.4},{duration:.5,easing:"easeInOutQuad"}),$e("cpu.ri",{opacity:t.instruction.willUse.ri?1:.4},{duration:.5,easing:"easeInOutQuad"})]);return}case"cpu:cycle.update":{G.set(Ao,e=>e.phase==="stopped"?e:{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase});return}case"cpu:decode":{await $e("cpu.decoder.path",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},{duration:3,easing:"easeInOutSine"}),await $e("cpu.decoder.progress",{from:{progress:0,opacity:1},to:{progress:1}},{duration:3,easing:"easeInOutSine"}),await Promise.all([$e("cpu.decoder.progress",{opacity:0},{duration:1,easing:"easeInSine"}),$e("cpu.decoder.path",{opacity:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:error":{G.set(Ao,{phase:"stopped",error:t.error}),ia(t.error);return}case"cpu:halt":case"cpu:int.0":{G.set(Ao,{phase:"stopped"}),ia();return}case"cpu:int.3":{e6();return}case"cpu:int.6":return;case"cpu:int.7":return;case"cpu:inta.off":{await $l("inta");return}case"cpu:inta.on":{await Dl("inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type==="cpu:rd.on"?"rd":"wr";await $e(`bus.${e}`,{stroke:wt.red[500]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Dl("iom",15);return}case"cpu:mar.set":{const e=c8(t.register);await $e("cpu.internalBus.address",{from:{strokeDashoffset:1,opacity:1,path:e},to:{strokeDashoffset:0}},{duration:5,easing:"easeInOutSine"}),await Ar("cpu.MAR",wt.blue[500]),G.set(uR,G.get(tt[t.register])),await $e("bus.address",{stroke:wt.blue[500]},{duration:5,easing:"easeOutSine"}),await Promise.all([Pr("cpu.MAR"),$e("cpu.internalBus.address",{opacity:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=Eo(t.register);await Fg("MBR",e),await Ar(`cpu.${e}`),G.set(tt[t.register],G.get(Nl)),await Promise.all([Pr(`cpu.${e}`),jg()]);return}case"cpu:mbr.set":{const[e]=Eo(t.register);await Fg(e,"MBR"),await Ar("cpu.MBR"),G.set(Nl,G.get(tt[t.register])),await $e("bus.data",{stroke:wt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Promise.all([Pr("cpu.MBR"),jg()]);return}case"cpu:register.copy":{const[e]=Eo(t.src),[n]=Eo(t.dest);e!==n&&await Fg(e,n),await Ar(`cpu.${n}`),G.set(tt[t.dest],G.get(tt[t.src])),await Promise.all([Pr(`cpu.${n}`),e!==n&&jg()]);return}case"cpu:register.update":{const[e]=Eo(t.register);await Ar(`cpu.${e}`),G.set(tt[t.register],t.value),await Pr(`cpu.${e}`);return}default:return t}}async function Wz(t){switch(t.type){case"f10:press":return;case"f10:int.off":{await $l("int0");return}case"f10:int.on":{await Dl("int0",10);return}default:return t}}async function Gz(t){switch(t.type){case"memory:read":{me.inRange(t.address)&&G.set(Ky,me.from(t.address));return}case"memory:read.ok":{await np(t.value);return}case"memory:write":{if(me.inRange(t.address)){const e=Number(t.address);G.set(Ky,me.from(t.address)),G.set(Gw,n=>[...n.slice(0,e),t.value,...n.slice(e+1)])}return}case"memory:write.ok":return;case"memory:read.error":case"memory:write.error":{ia(t.error);return}default:return t}}async function Xz(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await np(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Ar(`pic.${t.register}`),t.register){case"IMR":{G.set(Xw,t.value);break}case"IRR":{G.set(Kw,t.value);break}case"ISR":{G.set(Zw,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));G.set(Yf[e],t.value);break}default:return t}await Pr(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await $l("intr");return}case"pic:intr.on":{await Dl("intr",10);return}case"pic:int.send":{await np(t.number);return}default:return t}}async function Kz(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await np(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Ar(`timer.${t.register}`),t.register){case"CONT":{G.set(h1,t.value);break}case"COMP":{G.set(f1,t.value);break}default:return t.register}await Pr(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await $l("int1");return}case"timer:int.on":{await Dl("int1",10);return}default:return t}}const Zz=de("");async function Yz(t){switch(t.type){case"console:read":{G.set(mr,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{G.sub(mr,()=>{const n=G.get(mr);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"console:write":{G.set(Zz,jn.getComputerState().io.console);return}default:return t}}const Jz={bus:"#2563eb",clock:"#65a30d",console:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",switches:"#65a30d",timer:"#2563eb"};async function qz(t){const[e,n]=t.type.split(":");console.group(`%c ${e} %c ${n}`,`background: ${Jz[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof M?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof me?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Ln?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r} %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}if(console.groupEnd(),e==="bus")return await l8(t);if(e==="clock")return await u8(t);if(e==="console")return Yz(t);if(e==="cpu")return await Hz(t);if(e==="f10")return await Wz(t);if(e==="handshake")return i8(t);if(e==="leds")return r8(t);if(e==="memory")return await Gz(t);if(e==="pic")return await Xz(t);if(e==="pio")return s8(t);if(e==="printer")return o8(t);if(e==="switches")return a8(t);if(e==="timer")return await Kz(t);throw new Error(`Unknown event type: ${t.type}`)}function Qz(t){const e=t.translate(rs().language);Up.error(e)}const jn=new FL,mr=de({type:"stopped"}),x1=()=>G.get(mr);function ia(t){t&&Qz(t),qP(null),JP(!1),G.set(mr,{type:"stopped",error:t}),t8()}function e6(){G.set(mr,{type:"paused"})}function t6(){Up.error(Qp(rs().language,"messages.assemble-error"))}function yu(){Up.error(Qp(rs().language,"messages.invalid-action"))}function n6(t){_4(t),M4(t),D4(t),n8(t),"handshake"in t.io&&(G.set(VR,M.fromUnsigned(t.io.handshake.DATA,8)),G.set(HR,M.fromUnsigned(t.io.handshake.STATE,8))),"leds"in t.io&&G.set(WR,M.fromUnsigned(t.io.leds,8)),"pio"in t.io&&(G.set(GR,M.fromUnsigned(t.io.pio.PA,8)),G.set(XR,M.fromUnsigned(t.io.pio.PB,8)),G.set(KR,M.fromUnsigned(t.io.pio.CA,8)),G.set(ZR,M.fromUnsigned(t.io.pio.CB,8))),"printer"in t.io&&(G.set(lv,t.io.printer.buffer.map(e=>M.fromUnsigned(e,8))),G.set(uv,t.io.printer.paper)),"switches"in t.io&&G.set(YR,M.fromUnsigned(t.io.switches,8))}async function i6(...t){const e=t[0],n=x1();switch(e){case"cpu.run":{if(n.type==="running")return yu();if(n.type==="stopped"){if(!window.codemirror)return;const i=window.codemirror.state.doc.toString(),r=SA(i);if(!r.success)return t6();JP(!0),jn.loadProgram({program:r,data:rs().dataOnLoad,devices:rs().devices}),n6(jn.getComputerState()),G.set(mr,{type:"running",until:"infinity"}),Ra(jn.startCPU()),r6()}else G.set(mr,{type:"running",until:"infinity",waitingForInput:!1}),e8();return}case"cpu.stop":{ia();return}case"f10.press":{if(n.type!=="running")return yu();Ra(jn.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!jn.devices.switches.connected())return yu();const i=t[1];Ra(jn.devices.switches.toggle(i));return}case"console.handleKey":{if(n.type!=="running"||!n.waitingForInput)return yu();const i=t[1];let r;if(i.inputType==="insertLineBreak")r=`
`;else if(i.inputType==="insertText"||i.inputType==="insertCompositionText"){if(!i.data)return;r=i.data}else return;jn.devices.console.readChar(M.fromChar(r)),G.set(mr,{...n,waitingForInput:!1});return}case"console.clean":{Ra(jn.devices.console.clear());return}case"printer.clean":{if(!jn.devices.printer.connected())return yu();Ra(jn.devices.printer.clear());return}default:return e}}async function Ra(t){try{for(;x1().type==="running";){const e=t.next();if(e.done)break;await qz(e.value)}t.return()}catch(e){const n=Ct.from(e);ia(n)}}async function r6(){try{for(;x1().type==="running";){const t=rs().clockSpeed;await $e("clock",{from:{angle:0},to:{angle:360}},{duration:t,easing:"linear"}),Ra(jn.devices.clock.tick())}}catch(t){const e=Ct.from(t);ia(e)}}function CT(){return[gr(mr),i6]}const s6=()=>tA(Xl),o6=de(t=>t(Xl).language),a6=()=>gr(o6);de(t=>t(Xl).dataOnLoad);de(t=>t(Xl).devices);const l6=de(t=>{const e=t(Xl);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}}),u6=()=>gr(l6);function fd(){const t=a6();return(e,...n)=>Qp(t,e,...n)}function c6({className:t}){const e=fd(),[n,i]=CT(),r=b.useCallback(s=>{s.key==="F5"?(s.preventDefault(),s.shiftKey?i("cpu.stop"):i("cpu.run")):s.key==="F11"&&(s.preventDefault(),i("cpu.step"))},[i]);return yA("keydown",r,void 0,[i]),C.jsx("div",{className:it("flex items-center justify-center gap-4",t),children:C.jsxs("button",{className:"flex w-min items-center gap-1 rounded-md bg-mantis-500 p-2 text-mantis-50 transition-colors hover:enabled:bg-mantis-600 hover:enabled:text-white disabled:opacity-40",disabled:n.type==="running",onClick:()=>i("cpu.run"),children:[C.jsx("span",{className:"icon-[lucide--play] block h-5 w-5"}),C.jsx("span",{className:"whitespace-nowrap font-semibold tracking-wide",children:e("runner.action.start")})]})})}function Ue(){return Ue=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ue.apply(this,arguments)}function ip(t,[e,n]){return Math.min(n,Math.max(e,t))}function Et(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function fm(t,e=[]){let n=[];function i(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,m=(h==null?void 0:h[t][l])||a,v=b.useMemo(()=>p,Object.values(p));return b.createElement(m.Provider,{value:v},f)}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=b.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const r=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,d6(r,...e)]}function d6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function h6(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function AT(...t){return e=>t.forEach(n=>h6(n,e))}function Ot(...t){return b.useCallback(AT(...t),t)}const Hc=b.forwardRef((t,e)=>{const{children:n,...i}=t,r=b.Children.toArray(n),s=r.find(p6);if(s){const o=s.props.children,a=r.map(l=>l===s?b.Children.count(o)>1?b.Children.only(null):b.isValidElement(o)?o.props.children:null:l);return b.createElement(cv,Ue({},i,{ref:e}),b.isValidElement(o)?b.cloneElement(o,void 0,a):null)}return b.createElement(cv,Ue({},i,{ref:e}),n)});Hc.displayName="Slot";const cv=b.forwardRef((t,e)=>{const{children:n,...i}=t;return b.isValidElement(n)?b.cloneElement(n,{...m6(i,n.props),ref:e?AT(e,n.ref):n.ref}):b.Children.count(n)>1?b.Children.only(null):null});cv.displayName="SlotClone";const f6=({children:t})=>b.createElement(b.Fragment,null,t);function p6(t){return b.isValidElement(t)&&t.type===f6}function m6(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function PT(t){const e=t+"CollectionProvider",[n,i]=fm(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:m}=f,v=q.useRef(null),g=q.useRef(new Map).current;return q.createElement(r,{scope:p,itemMap:g,collectionRef:v},m)},a=t+"CollectionSlot",l=q.forwardRef((f,p)=>{const{scope:m,children:v}=f,g=s(a,m),y=Ot(p,g.collectionRef);return q.createElement(Hc,{ref:y},v)}),u=t+"CollectionItemSlot",c="data-radix-collection-item",d=q.forwardRef((f,p)=>{const{scope:m,children:v,...g}=f,y=q.useRef(null),w=Ot(p,y),x=s(u,m);return q.useEffect(()=>(x.itemMap.set(y,{ref:y,...g}),()=>void x.itemMap.delete(y))),q.createElement(Hc,{[c]:"",ref:w},v)});function h(f){const p=s(t+"CollectionConsumer",f);return q.useCallback(()=>{const v=p.collectionRef.current;if(!v)return[];const g=Array.from(v.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((x,S)=>g.indexOf(x.ref.current)-g.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,i]}const g6=b.createContext(void 0);function RT(t){const e=b.useContext(g6);return t||e||"ltr"}const y6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Jt=y6.reduce((t,e)=>{const n=b.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?Hc:e;return b.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),b.createElement(a,Ue({},o,{ref:r}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function v6(t,e){t&&la.flushSync(()=>t.dispatchEvent(e))}function ss(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...n)},[])}function w6(t,e=globalThis==null?void 0:globalThis.document){const n=ss(t);b.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[n,e])}const dv="dismissableLayer.update",x6="dismissableLayer.pointerDownOutside",b6="dismissableLayer.focusOutside";let nk;const S6=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),k6=b.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=t,c=b.useContext(S6),[d,h]=b.useState(null),f=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=b.useState({}),m=Ot(e,E=>h(E)),v=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(g),w=d?v.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,A=E6(E=>{const R=E.target,N=[...c.branches].some(T=>T.contains(R));!S||N||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},f),P=C6(E=>{const R=E.target;[...c.branches].some(T=>T.contains(R))||(o==null||o(E),a==null||a(E),E.defaultPrevented||l==null||l())},f);return w6(E=>{w===c.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},f),b.useEffect(()=>{if(d)return i&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(nk=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),ik(),()=>{i&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=nk)}},[d,f,i,c]),b.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),ik())},[d,c]),b.useEffect(()=>{const E=()=>p({});return document.addEventListener(dv,E),()=>document.removeEventListener(dv,E)},[]),b.createElement(Jt.div,Ue({},u,{ref:m,style:{pointerEvents:x?S?"auto":"none":void 0,...t.style},onFocusCapture:Et(t.onFocusCapture,P.onFocusCapture),onBlurCapture:Et(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Et(t.onPointerDownCapture,A.onPointerDownCapture)}))});function E6(t,e=globalThis==null?void 0:globalThis.document){const n=ss(t),i=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let c=function(){TT(x6,n,u,{discrete:!0})};var l=c;const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function C6(t,e=globalThis==null?void 0:globalThis.document){const n=ss(t),i=b.useRef(!1);return b.useEffect(()=>{const r=s=>{s.target&&!i.current&&TT(b6,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function ik(){const t=new CustomEvent(dv);document.dispatchEvent(t)}function TT(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?v6(r,s):r.dispatchEvent(s)}let Ug=0;function A6(){b.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:rk()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:rk()),Ug++,()=>{Ug===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(i=>i.remove()),Ug--}},[])}function rk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const Vg="focusScope.autoFocusOnMount",Hg="focusScope.autoFocusOnUnmount",sk={bubbles:!1,cancelable:!0},P6=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),u=ss(r),c=ss(s),d=b.useRef(null),h=Ot(e,m=>l(m)),f=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(i){let y=function(A){if(f.paused||!a)return;const P=A.target;a.contains(P)?d.current=P:gs(d.current,{select:!0})},w=function(A){if(f.paused||!a)return;const P=A.relatedTarget;P!==null&&(a.contains(P)||gs(d.current,{select:!0}))},x=function(A){const P=document.activeElement;for(const E of A)E.removedNodes.length>0&&(a!=null&&a.contains(P)||gs(a))};var m=y,v=w,g=x;document.addEventListener("focusin",y),document.addEventListener("focusout",w);const S=new MutationObserver(x);return a&&S.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),S.disconnect()}}},[i,a,f.paused]),b.useEffect(()=>{if(a){ak.add(f);const m=document.activeElement;if(!a.contains(m)){const g=new CustomEvent(Vg,sk);a.addEventListener(Vg,u),a.dispatchEvent(g),g.defaultPrevented||(R6(M6(OT(a)),{select:!0}),document.activeElement===m&&gs(a))}return()=>{a.removeEventListener(Vg,u),setTimeout(()=>{const g=new CustomEvent(Hg,sk);a.addEventListener(Hg,c),a.dispatchEvent(g),g.defaultPrevented||gs(m??document.body,{select:!0}),a.removeEventListener(Hg,c),ak.remove(f)},0)}}},[a,u,c,f]);const p=b.useCallback(m=>{if(!n&&!i||f.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,g=document.activeElement;if(v&&g){const y=m.currentTarget,[w,x]=T6(y);w&&x?!m.shiftKey&&g===x?(m.preventDefault(),n&&gs(w,{select:!0})):m.shiftKey&&g===w&&(m.preventDefault(),n&&gs(x,{select:!0})):g===y&&m.preventDefault()}},[n,i,f.paused]);return b.createElement(Jt.div,Ue({tabIndex:-1},o,{ref:h,onKeyDown:p}))});function R6(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(gs(i,{select:e}),document.activeElement!==n)return}function T6(t){const e=OT(t),n=ok(e,t),i=ok(e.reverse(),t);return[n,i]}function OT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ok(t,e){for(const n of t)if(!O6(n,{upTo:e}))return n}function O6(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function _6(t){return t instanceof HTMLInputElement&&"select"in t}function gs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&_6(t)&&e&&t.select()}}const ak=N6();function N6(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=lk(t,e),t.unshift(e)},remove(e){var n;t=lk(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function lk(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function M6(t){return t.filter(e=>e.tagName!=="A")}const os=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},D6=Dv["useId".toString()]||(()=>{});let $6=0;function _T(t){const[e,n]=b.useState(D6());return os(()=>{t||n(i=>i??String($6++))},[t]),t||(e?`radix-${e}`:"")}function Jl(t){return t.split("-")[1]}function b1(t){return t==="y"?"height":"width"}function Kr(t){return t.split("-")[0]}function da(t){return["top","bottom"].includes(Kr(t))?"x":"y"}function uk(t,e,n){let{reference:i,floating:r}=t;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,a=da(e),l=b1(a),u=i[l]/2-r[l]/2,c=a==="x";let d;switch(Kr(e)){case"top":d={x:s,y:i.y-r.height};break;case"bottom":d={x:s,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:o};break;case"left":d={x:i.x-r.width,y:o};break;default:d={x:i.x,y:i.y}}switch(Jl(e)){case"start":d[a]-=u*(n&&c?-1:1);break;case"end":d[a]+=u*(n&&c?-1:1)}return d}const L6=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=uk(u,i,l),h=i,f={},p=0;for(let m=0;m<a.length;m++){const{name:v,fn:g}=a[m],{x:y,y:w,data:x,reset:S}=await g({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=w??d,f={...f,[v]:{...f[v],...x}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):S.rects),{x:c,y:d}=uk(u,h,l)),m=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};function as(t,e){return typeof t=="function"?t(e):t}function NT(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function rp(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Wc(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=as(e,t),p=NT(f),m=a[h?d==="floating"?"reference":"floating":d],v=rp(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),g=d==="floating"?{...o.floating,x:i,y:r}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(y))&&await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1},x=rp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:y,strategy:l}):g);return{top:(v.top-x.top+p.top)/w.y,bottom:(x.bottom-v.bottom+p.bottom)/w.y,left:(v.left-x.left+p.left)/w.x,right:(x.right-v.right+p.right)/w.x}}const Gc=Math.min,So=Math.max;function hv(t,e,n){return So(t,Gc(e,n))}const ck=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a}=e,{element:l,padding:u=0}=as(t,e)||{};if(l==null)return{};const c=NT(u),d={x:n,y:i},h=da(r),f=b1(h),p=await o.getDimensions(l),m=h==="y",v=m?"top":"left",g=m?"bottom":"right",y=m?"clientHeight":"clientWidth",w=s.reference[f]+s.reference[h]-d[h]-s.floating[f],x=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let A=S?S[y]:0;A&&await(o.isElement==null?void 0:o.isElement(S))||(A=a.floating[y]||s.floating[f]);const P=w/2-x/2,E=A/2-p[f]/2-1,R=Gc(c[v],E),N=Gc(c[g],E),T=R,B=A-p[f]-N,I=A/2-p[f]/2+P,_=hv(T,I,B),D=Jl(r)!=null&&I!=_&&s.reference[f]/2-(I<T?R:N)-p[f]/2<0?I<T?T-I:B-I:0;return{[h]:d[h]-D,data:{[h]:_,centerOffset:I-_+D}}}}),MT=["top","right","bottom","left"];MT.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const I6={left:"right",right:"left",bottom:"top",top:"bottom"};function sp(t){return t.replace(/left|right|bottom|top/g,e=>I6[e])}function B6(t,e,n){n===void 0&&(n=!1);const i=Jl(t),r=da(t),s=b1(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=sp(o)),{main:o,cross:sp(o)}}const z6={start:"end",end:"start"};function Wg(t){return t.replace(/start|end/g,e=>z6[e])}const F6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...m}=as(t,e),v=Kr(i),g=Kr(o)===o,y=await(a.isRTL==null?void 0:a.isRTL(l.floating)),w=d||(g||!p?[sp(o)]:function(T){const B=sp(T);return[Wg(T),B,Wg(B)]}(o));d||f==="none"||w.push(...function(T,B,I,_){const D=Jl(T);let z=function(L,O,$){const F=["left","right"],Y=["right","left"],ie=["top","bottom"],ce=["bottom","top"];switch(L){case"top":case"bottom":return $?O?Y:F:O?F:Y;case"left":case"right":return O?ie:ce;default:return[]}}(Kr(T),I==="start",_);return D&&(z=z.map(L=>L+"-"+D),B&&(z=z.concat(z.map(Wg)))),z}(o,p,f,y));const x=[o,...w],S=await Wc(e,m),A=[];let P=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&A.push(S[v]),c){const{main:T,cross:B}=B6(i,s,y);A.push(S[T],S[B])}if(P=[...P,{placement:i,overflows:A}],!A.every(T=>T<=0)){var E,R;const T=(((E=r.flip)==null?void 0:E.index)||0)+1,B=x[T];if(B)return{data:{index:T,overflows:P},reset:{placement:B}};let I=(R=P.filter(_=>_.overflows[0]<=0).sort((_,D)=>_.overflows[1]-D.overflows[1])[0])==null?void 0:R.placement;if(!I)switch(h){case"bestFit":{var N;const _=(N=P.map(D=>[D.placement,D.overflows.filter(z=>z>0).reduce((z,L)=>z+L,0)]).sort((D,z)=>D[1]-z[1])[0])==null?void 0:N[0];_&&(I=_);break}case"initialPlacement":I=o}if(i!==I)return{reset:{placement:I}}}return{}}}};function dk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function hk(t){return MT.some(e=>t[e]>=0)}const j6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=as(t,e);switch(i){case"referenceHidden":{const s=dk(await Wc(e,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:hk(s)}}}case"escaped":{const s=dk(await Wc(e,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:hk(s)}}}default:return{}}}}},U6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,r=await async function(s,o){const{placement:a,platform:l,elements:u}=s,c=await(l.isRTL==null?void 0:l.isRTL(u.floating)),d=Kr(a),h=Jl(a),f=da(a)==="x",p=["left","top"].includes(d)?-1:1,m=c&&f?-1:1,v=as(o,s);let{mainAxis:g,crossAxis:y,alignmentAxis:w}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...v};return h&&typeof w=="number"&&(y=h==="end"?-1*w:w),f?{x:y*m,y:g*p}:{x:g*p,y:y*m}}(e,t);return{x:n+r.x,y:i+r.y,data:r}}}};function DT(t){return t==="x"?"y":"x"}const V6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...l}=as(t,e),u={x:n,y:i},c=await Wc(e,l),d=da(Kr(r)),h=DT(d);let f=u[d],p=u[h];if(s){const v=d==="y"?"bottom":"right";f=hv(f+c[d==="y"?"top":"left"],f,f-c[v])}if(o){const v=h==="y"?"bottom":"right";p=hv(p+c[h==="y"?"top":"left"],p,p-c[v])}const m=a.fn({...e,[d]:f,[h]:p});return{...m,data:{x:m.x-n,y:m.y-i}}}}},H6=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=as(t,e),c={x:n,y:i},d=da(r),h=DT(d);let f=c[d],p=c[h];const m=as(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=d==="y"?"height":"width",x=s.reference[d]-s.floating[w]+v.mainAxis,S=s.reference[d]+s.reference[w]-v.mainAxis;f<x?f=x:f>S&&(f=S)}if(u){var g,y;const w=d==="y"?"width":"height",x=["top","left"].includes(Kr(r)),S=s.reference[h]-s.floating[w]+(x&&((g=o.offset)==null?void 0:g[h])||0)+(x?0:v.crossAxis),A=s.reference[h]+s.reference[w]+(x?0:((y=o.offset)==null?void 0:y[h])||0)-(x?v.crossAxis:0);p<S?p=S:p>A&&(p=A)}return{[d]:f,[h]:p}}}},W6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:i,platform:r,elements:s}=e,{apply:o=()=>{},...a}=as(t,e),l=await Wc(e,a),u=Kr(n),c=Jl(n),d=da(n)==="x",{width:h,height:f}=i.floating;let p,m;u==="top"||u==="bottom"?(p=u,m=c===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(m=u,p=c==="end"?"top":"bottom");const v=f-l[p],g=h-l[m],y=!e.middlewareData.shift;let w=v,x=g;if(d){const A=h-l.left-l.right;x=c||y?Gc(g,A):A}else{const A=f-l.top-l.bottom;w=c||y?Gc(v,A):A}if(y&&!c){const A=So(l.left,0),P=So(l.right,0),E=So(l.top,0),R=So(l.bottom,0);d?x=h-2*(A!==0||P!==0?A+P:So(l.left,l.right)):w=f-2*(E!==0||R!==0?E+R:So(l.top,l.bottom))}await o({...e,availableWidth:x,availableHeight:w});const S=await r.getDimensions(s.floating);return h!==S.width||f!==S.height?{reset:{rects:!0}}:{}}}};function Jn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Sr(t){return Jn(t).getComputedStyle(t)}function $T(t){return t instanceof Jn(t).Node}function oo(t){return $T(t)?(t.nodeName||"").toLowerCase():"#document"}function Wi(t){return t instanceof HTMLElement||t instanceof Jn(t).HTMLElement}function fk(t){return typeof ShadowRoot<"u"&&(t instanceof Jn(t).ShadowRoot||t instanceof ShadowRoot)}function Xc(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Sr(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function G6(t){return["table","td","th"].includes(oo(t))}function fv(t){const e=S1(),n=Sr(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function S1(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function pm(t){return["html","body","#document"].includes(oo(t))}const pv=Math.min,ll=Math.max,op=Math.round,ih=Math.floor,ao=t=>({x:t,y:t});function LT(t){const e=Sr(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Wi(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=op(n)!==s||op(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function Zr(t){return t instanceof Element||t instanceof Jn(t).Element}function k1(t){return Zr(t)?t:t.contextElement}function ul(t){const e=k1(t);if(!Wi(e))return ao(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=LT(e);let o=(s?op(n.width):n.width)/i,a=(s?op(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const X6=ao(0);function IT(t){const e=Jn(t);return S1()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:X6}function ra(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=k1(t);let o=ao(1);e&&(i?Zr(i)&&(o=ul(i)):o=ul(t));const a=function(h,f,p){return f===void 0&&(f=!1),!(!p||f&&p!==Jn(h))&&f}(s,n,i)?IT(s):ao(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=Jn(s),f=i&&Zr(i)?Jn(i):i;let p=h.frameElement;for(;p&&i&&f!==h;){const m=ul(p),v=p.getBoundingClientRect(),g=getComputedStyle(p),y=v.left+(p.clientLeft+parseFloat(g.paddingLeft))*m.x,w=v.top+(p.clientTop+parseFloat(g.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,d*=m.y,l+=y,u+=w,p=Jn(p).frameElement}}return rp({width:c,height:d,x:l,y:u})}function mm(t){return Zr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Yr(t){var e;return(e=($T(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BT(t){return ra(Yr(t)).left+mm(t).scrollLeft}function Ll(t){if(oo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||fk(t)&&t.host||Yr(t);return fk(e)?e.host:e}function zT(t){const e=Ll(t);return pm(e)?t.ownerDocument?t.ownerDocument.body:t.body:Wi(e)&&Xc(e)?e:zT(e)}function ap(t,e){var n;e===void 0&&(e=[]);const i=zT(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=Jn(i);return r?e.concat(s,s.visualViewport||[],Xc(i)?i:[]):e.concat(i,ap(i))}function pk(t,e,n){let i;if(e==="viewport")i=function(r,s){const o=Jn(r),a=Yr(r),l=o.visualViewport;let u=a.clientWidth,c=a.clientHeight,d=0,h=0;if(l){u=l.width,c=l.height;const f=S1();(!f||f&&s==="fixed")&&(d=l.offsetLeft,h=l.offsetTop)}return{width:u,height:c,x:d,y:h}}(t,n);else if(e==="document")i=function(r){const s=Yr(r),o=mm(r),a=r.ownerDocument.body,l=ll(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),u=ll(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let c=-o.scrollLeft+BT(r);const d=-o.scrollTop;return Sr(a).direction==="rtl"&&(c+=ll(s.clientWidth,a.clientWidth)-l),{width:l,height:u,x:c,y:d}}(Yr(t));else if(Zr(e))i=function(r,s){const o=ra(r,!0,s==="fixed"),a=o.top+r.clientTop,l=o.left+r.clientLeft,u=Wi(r)?ul(r):ao(1);return{width:r.clientWidth*u.x,height:r.clientHeight*u.y,x:l*u.x,y:a*u.y}}(e,n);else{const r=IT(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return rp(i)}function FT(t,e){const n=Ll(t);return!(n===e||!Zr(n)||pm(n))&&(Sr(n).position==="fixed"||FT(n,e))}function K6(t,e,n){const i=Wi(e),r=Yr(e),s=n==="fixed",o=ra(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ao(0);if(i||!i&&!s)if((oo(e)!=="body"||Xc(r))&&(a=mm(e)),Wi(e)){const u=ra(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else r&&(l.x=BT(r));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function mk(t,e){return Wi(t)&&Sr(t).position!=="fixed"?e?e(t):t.offsetParent:null}function gk(t,e){const n=Jn(t);if(!Wi(t))return n;let i=mk(t,e);for(;i&&G6(i)&&Sr(i).position==="static";)i=mk(i,e);return i&&(oo(i)==="html"||oo(i)==="body"&&Sr(i).position==="static"&&!fv(i))?n:i||function(r){let s=Ll(r);for(;Wi(s)&&!pm(s);){if(fv(s))return s;s=Ll(s)}return null}(t)||n}const Z6={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=Wi(n),s=Yr(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=ao(1);const l=ao(0);if((r||!r&&i!=="fixed")&&((oo(n)!=="body"||Xc(s))&&(o=mm(n)),Wi(n))){const u=ra(n);a=ul(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},getDocumentElement:Yr,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[...n==="clippingAncestors"?function(l,u){const c=u.get(l);if(c)return c;let d=ap(l).filter(m=>Zr(m)&&oo(m)!=="body"),h=null;const f=Sr(l).position==="fixed";let p=f?Ll(l):l;for(;Zr(p)&&!pm(p);){const m=Sr(p),v=fv(p);v||m.position!=="fixed"||(h=null),(f?!v&&!h:!v&&m.position==="static"&&h&&["absolute","fixed"].includes(h.position)||Xc(p)&&!v&&FT(l,p))?d=d.filter(g=>g!==p):h=m,p=Ll(p)}return u.set(l,d),d}(e,this._c):[].concat(n),i],o=s[0],a=s.reduce((l,u)=>{const c=pk(e,u,r);return l.top=ll(c.top,l.top),l.right=pv(c.right,l.right),l.bottom=pv(c.bottom,l.bottom),l.left=ll(c.left,l.left),l},pk(e,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:gk,getElementRects:async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||gk,s=this.getDimensions;return{reference:K6(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return LT(t)},getScale:ul,isElement:Zr,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function Y6(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=k1(t),c=r||s?[...u?ap(u):[],...ap(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&a?function(v,g){let y,w=null;const x=Yr(v);function S(){clearTimeout(y),w&&w.disconnect(),w=null}return function A(P,E){P===void 0&&(P=!1),E===void 0&&(E=1),S();const{left:R,top:N,width:T,height:B}=v.getBoundingClientRect();if(P||g(),!T||!B)return;const I={rootMargin:-ih(N)+"px "+-ih(x.clientWidth-(R+T))+"px "+-ih(x.clientHeight-(N+B))+"px "+-ih(R)+"px",threshold:ll(0,pv(1,E))||1};let _=!0;function D(z){const L=z[0].intersectionRatio;if(L!==E){if(!_)return A();L?A(!1,L):y=setTimeout(()=>{A(!1,1e-7)},100)}_=!1}try{w=new IntersectionObserver(D,{...I,root:x.ownerDocument})}catch{w=new IntersectionObserver(D,I)}w.observe(v)}(!0),S}(u,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[g]=v;g&&g.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let m=l?ra(t):null;return l&&function v(){const g=ra(t);!m||g.x===m.x&&g.y===m.y&&g.width===m.width&&g.height===m.height||n(),m=g,h=requestAnimationFrame(v)}(),n(),()=>{c.forEach(v=>{r&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const J6=(t,e,n)=>{const i=new Map,r={platform:Z6,...n},s={...r.platform,_c:i};return L6(t,e,{...r,platform:s})},q6=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?ck({element:i.current,padding:r}).fn(n):{}:i?ck({element:i,padding:r}).fn(n):{}}}};var Zh=typeof document<"u"?b.useLayoutEffect:b.useEffect;function lp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!lp(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!lp(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function jT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function yk(t,e){const n=jT(t);return Math.round(e*n)/n}function vk(t){const e=b.useRef(t);return Zh(()=>{e.current=t}),e}function Q6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=b.useState(i);lp(h,i)||f(i);const[p,m]=b.useState(null),[v,g]=b.useState(null),y=b.useCallback(z=>{z!=A.current&&(A.current=z,m(z))},[m]),w=b.useCallback(z=>{z!==P.current&&(P.current=z,g(z))},[g]),x=s||p,S=o||v,A=b.useRef(null),P=b.useRef(null),E=b.useRef(c),R=vk(l),N=vk(r),T=b.useCallback(()=>{if(!A.current||!P.current)return;const z={placement:e,strategy:n,middleware:h};N.current&&(z.platform=N.current),J6(A.current,P.current,z).then(L=>{const O={...L,isPositioned:!0};B.current&&!lp(E.current,O)&&(E.current=O,la.flushSync(()=>{d(O)}))})},[h,e,n,N]);Zh(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[u]);const B=b.useRef(!1);Zh(()=>(B.current=!0,()=>{B.current=!1}),[]),Zh(()=>{if(x&&(A.current=x),S&&(P.current=S),x&&S){if(R.current)return R.current(x,S,T);T()}},[x,S,T,R]);const I=b.useMemo(()=>({reference:A,floating:P,setReference:y,setFloating:w}),[y,w]),_=b.useMemo(()=>({reference:x,floating:S}),[x,S]),D=b.useMemo(()=>{const z={position:n,left:0,top:0};if(!_.floating)return z;const L=yk(_.floating,c.x),O=yk(_.floating,c.y);return a?{...z,transform:"translate("+L+"px, "+O+"px)",...jT(_.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:O}},[n,a,_.floating,c.x,c.y]);return b.useMemo(()=>({...c,update:T,refs:I,elements:_,floatingStyles:D}),[c,T,I,_,D])}function UT(t){const[e,n]=b.useState(void 0);return os(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}const VT="Popper",[HT,WT]=fm(VT),[e9,GT]=HT(VT),t9=t=>{const{__scopePopper:e,children:n}=t,[i,r]=b.useState(null);return b.createElement(e9,{scope:e,anchor:i,onAnchorChange:r},n)},n9="PopperAnchor",i9=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=GT(n9,n),o=b.useRef(null),a=Ot(e,o);return b.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:b.createElement(Jt.div,Ue({},r,{ref:a}))}),XT="PopperContent",[r9,JH]=HT(XT),s9=b.forwardRef((t,e)=>{var n,i,r,s,o,a,l,u;const{__scopePopper:c,side:d="bottom",sideOffset:h=0,align:f="center",alignOffset:p=0,arrowPadding:m=0,collisionBoundary:v=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:w=!1,avoidCollisions:x=!0,onPlaced:S,...A}=t,P=GT(XT,c),[E,R]=b.useState(null),N=Ot(e,Te=>R(Te)),[T,B]=b.useState(null),I=UT(T),_=(n=I==null?void 0:I.width)!==null&&n!==void 0?n:0,D=(i=I==null?void 0:I.height)!==null&&i!==void 0?i:0,z=d+(f!=="center"?"-"+f:""),L=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},O=Array.isArray(v)?v:[v],$=O.length>0,F={padding:L,boundary:O.filter(o9),altBoundary:$},{refs:Y,floatingStyles:ie,placement:ce,isPositioned:we,middlewareData:Se}=Q6({strategy:"fixed",placement:z,whileElementsMounted:Y6,elements:{reference:P.anchor},middleware:[U6({mainAxis:h+D,alignmentAxis:p}),x&&V6({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?H6():void 0,...F}),x&&F6({...F}),W6({...F,apply:({elements:Te,rects:xt,availableWidth:ln,availableHeight:Bn})=>{const{width:xd,height:Z_}=xt.reference,bd=Te.floating.style;bd.setProperty("--radix-popper-available-width",`${ln}px`),bd.setProperty("--radix-popper-available-height",`${Bn}px`),bd.setProperty("--radix-popper-anchor-width",`${xd}px`),bd.setProperty("--radix-popper-anchor-height",`${Z_}px`)}}),T&&q6({element:T,padding:m}),a9({arrowWidth:_,arrowHeight:D}),w&&j6({strategy:"referenceHidden"})]}),[xe,Q]=KT(ce),ye=ss(S);os(()=>{we&&(ye==null||ye())},[we,ye]);const Ne=(r=Se.arrow)===null||r===void 0?void 0:r.x,Ee=(s=Se.arrow)===null||s===void 0?void 0:s.y,ke=((o=Se.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[be,se]=b.useState();return os(()=>{E&&se(window.getComputedStyle(E).zIndex)},[E]),b.createElement("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:we?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:be,"--radix-popper-transform-origin":[(a=Se.transformOrigin)===null||a===void 0?void 0:a.x,(l=Se.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},b.createElement(r9,{scope:c,placedSide:xe,onArrowChange:B,arrowX:Ne,arrowY:Ee,shouldHideArrow:ke},b.createElement(Jt.div,Ue({"data-side":xe,"data-align":Q},A,{ref:N,style:{...A.style,animation:we?void 0:"none",opacity:(u=Se.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function o9(t){return t!==null}const a9=t=>({name:"transformOrigin",options:t,fn(e){var n,i,r,s,o;const{placement:a,rects:l,middlewareData:u}=e,d=((n=u.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=d?0:t.arrowWidth,f=d?0:t.arrowHeight,[p,m]=KT(a),v={start:"0%",center:"50%",end:"100%"}[m],g=((i=(r=u.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+h/2,y=((s=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+f/2;let w="",x="";return p==="bottom"?(w=d?v:`${g}px`,x=`${-f}px`):p==="top"?(w=d?v:`${g}px`,x=`${l.floating.height+f}px`):p==="right"?(w=`${-f}px`,x=d?v:`${y}px`):p==="left"&&(w=`${l.floating.width+f}px`,x=d?v:`${y}px`),{data:{x:w,y:x}}}});function KT(t){const[e,n="center"]=t.split("-");return[e,n]}const l9=t9,u9=i9,c9=s9,d9=b.forwardRef((t,e)=>{var n;const{container:i=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...r}=t;return i?J2.createPortal(b.createElement(Jt.div,Ue({},r,{ref:e})),i):null});function mv({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=h9({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:i,a=ss(n),l=b.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else r(u)},[s,t,r,a]);return[o,l]}function h9({defaultProp:t,onChange:e}){const n=b.useState(t),[i]=n,r=b.useRef(i),s=ss(e);return b.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}function ZT(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const f9=b.forwardRef((t,e)=>b.createElement(Jt.span,Ue({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var p9=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},xa=new WeakMap,rh=new WeakMap,sh={},Gg=0,YT=function(t){return t&&(t.host||YT(t.parentNode))},m9=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=YT(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},g9=function(t,e,n,i){var r=m9(e,Array.isArray(t)?t:[t]);sh[n]||(sh[n]=new WeakMap);var s=sh[n],o=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else{var f=h.getAttribute(i),p=f!==null&&f!=="false",m=(xa.get(h)||0)+1,v=(s.get(h)||0)+1;xa.set(h,m),s.set(h,v),o.push(h),m===1&&p&&rh.set(h,!0),v===1&&h.setAttribute(n,"true"),p||h.setAttribute(i,"true")}})};return c(e),a.clear(),Gg++,function(){o.forEach(function(d){var h=xa.get(d)-1,f=s.get(d)-1;xa.set(d,h),s.set(d,f),h||(rh.has(d)||d.removeAttribute(i),rh.delete(d)),f||d.removeAttribute(n)}),Gg--,Gg||(xa=new WeakMap,xa=new WeakMap,rh=new WeakMap,sh={})}},y9=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=e||p9(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),g9(i,r,n,"aria-hidden")):function(){return null}},lr=function(){return lr=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},lr.apply(this,arguments)};function JT(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function v9(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Yh="right-scroll-bar-position",Jh="width-before-scroll-bar",w9="with-scroll-bars-hidden",x9="--removed-body-scroll-bar-size";function b9(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function S9(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}function k9(t,e){return S9(e||null,function(n){return t.forEach(function(i){return b9(i,n)})})}function E9(t){return t}function C9(t,e){e===void 0&&(e=E9);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return r}function A9(t){t===void 0&&(t={});var e=C9(null);return e.options=lr({async:!0,ssr:!1},t),e}var qT=function(t){var e=t.sideCar,n=JT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return b.createElement(i,lr({},n))};qT.isSideCarExport=!0;function P9(t,e){return t.useMedium(e),qT}var QT=A9(),Xg=function(){},gm=b.forwardRef(function(t,e){var n=b.useRef(null),i=b.useState({onScrollCapture:Xg,onWheelCapture:Xg,onTouchMoveCapture:Xg}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,m=t.allowPinchZoom,v=t.as,g=v===void 0?"div":v,y=JT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,x=k9([n,e]),S=lr(lr({},y),r);return b.createElement(b.Fragment,null,c&&b.createElement(w,{sideCar:QT,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n}),o?b.cloneElement(b.Children.only(a),lr(lr({},S),{ref:x})):b.createElement(g,lr({},S,{className:l,ref:x}),a))});gm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gm.classNames={fullWidth:Jh,zeroRight:Yh};var wk,R9=function(){if(wk)return wk;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function T9(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=R9();return e&&t.setAttribute("nonce",e),t}function O9(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function _9(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var N9=function(){var t=0,e=null;return{add:function(n){t==0&&(e=T9())&&(O9(e,n),_9(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},M9=function(){var t=N9();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},eO=function(){var t=M9(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},D9={left:0,top:0,right:0,gap:0},Kg=function(t){return parseInt(t||"",10)||0},$9=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Kg(n),Kg(i),Kg(r)]},L9=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return D9;var e=$9(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},I9=eO(),B9=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(w9,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yh,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(Jh,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(Yh," .").concat(Yh,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Jh," .").concat(Jh,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body {
    `).concat(x9,": ").concat(a,`px;
  }
`)},z9=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i,s=b.useMemo(function(){return L9(r)},[r]);return b.createElement(I9,{styles:B9(s,!e,r,n?"":"!important")})},gv=!1;if(typeof window<"u")try{var oh=Object.defineProperty({},"passive",{get:function(){return gv=!0,!0}});window.addEventListener("test",oh,oh),window.removeEventListener("test",oh,oh)}catch{gv=!1}var ba=gv?{passive:!1}:!1,F9=function(t){return t.tagName==="TEXTAREA"},tO=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!F9(t)&&n[e]==="visible")},j9=function(t){return tO(t,"overflowY")},U9=function(t){return tO(t,"overflowX")},xk=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=nO(t,n);if(i){var r=iO(t,n),s=r[1],o=r[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},V9=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},H9=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},nO=function(t,e){return t==="v"?j9(e):U9(e)},iO=function(t,e){return t==="v"?V9(e):H9(e)},W9=function(t,e){return t==="h"&&e==="rtl"?-1:1},G9=function(t,e,n,i,r){var s=W9(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=iO(t,a),p=f[0],m=f[1],v=f[2],g=m-v-s*p;(p||g)&&nO(t,a)&&(d+=g,h+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(r&&d===0||!r&&o>d)||!c&&(r&&h===0||!r&&-o>h))&&(u=!0),u},ah=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},bk=function(t){return[t.deltaX,t.deltaY]},Sk=function(t){return t&&"current"in t?t.current:t},X9=function(t,e){return t[0]===e[0]&&t[1]===e[1]},K9=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Z9=0,Sa=[];function Y9(t){var e=b.useRef([]),n=b.useRef([0,0]),i=b.useRef(),r=b.useState(Z9++)[0],s=b.useState(function(){return eO()})[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=v9([t.lockRef.current],(t.shards||[]).map(Sk),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(m,v){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var g=ah(m),y=n.current,w="deltaX"in m?m.deltaX:y[0]-g[0],x="deltaY"in m?m.deltaY:y[1]-g[1],S,A=m.target,P=Math.abs(w)>Math.abs(x)?"h":"v";if("touches"in m&&P==="h"&&A.type==="range")return!1;var E=xk(P,A);if(!E)return!0;if(E?S=P:(S=P==="v"?"h":"v",E=xk(P,A)),!E)return!1;if(!i.current&&"changedTouches"in m&&(w||x)&&(i.current=S),!S)return!0;var R=i.current||S;return G9(R,v,m,R==="h"?w:x,!0)},[]),l=b.useCallback(function(m){var v=m;if(!(!Sa.length||Sa[Sa.length-1]!==s)){var g="deltaY"in v?bk(v):ah(v),y=e.current.filter(function(S){return S.name===v.type&&S.target===v.target&&X9(S.delta,g)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(Sk).filter(Boolean).filter(function(S){return S.contains(v.target)}),x=w.length>0?a(v,w[0]):!o.current.noIsolation;x&&v.cancelable&&v.preventDefault()}}},[]),u=b.useCallback(function(m,v,g,y){var w={name:m,delta:v,target:g,should:y};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(x){return x!==w})},1)},[]),c=b.useCallback(function(m){n.current=ah(m),i.current=void 0},[]),d=b.useCallback(function(m){u(m.type,bk(m),m.target,a(m,t.lockRef.current))},[]),h=b.useCallback(function(m){u(m.type,ah(m),m.target,a(m,t.lockRef.current))},[]);b.useEffect(function(){return Sa.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,ba),document.addEventListener("touchmove",l,ba),document.addEventListener("touchstart",c,ba),function(){Sa=Sa.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,ba),document.removeEventListener("touchmove",l,ba),document.removeEventListener("touchstart",c,ba)}},[]);var f=t.removeScrollBar,p=t.inert;return b.createElement(b.Fragment,null,p?b.createElement(s,{styles:K9(r)}):null,f?b.createElement(z9,{gapMode:"margin"}):null)}const J9=P9(QT,Y9);var rO=b.forwardRef(function(t,e){return b.createElement(gm,lr({},t,{ref:e,sideCar:J9}))});rO.classNames=gm.classNames;const q9=rO,Q9=[" ","Enter","ArrowUp","ArrowDown"],eF=[" ","Enter"],ym="Select",[vm,E1,tF]=PT(ym),[ql,qH]=fm(ym,[tF,WT]),C1=WT(),[nF,ha]=ql(ym),[iF,rF]=ql(ym),sF=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f}=t,p=C1(e),[m,v]=b.useState(null),[g,y]=b.useState(null),[w,x]=b.useState(!1),S=RT(u),[A=!1,P]=mv({prop:i,defaultProp:r,onChange:s}),[E,R]=mv({prop:o,defaultProp:a,onChange:l}),N=b.useRef(null),T=m?!!m.closest("form"):!0,[B,I]=b.useState(new Set),_=Array.from(B).map(D=>D.props.value).join(";");return b.createElement(l9,p,b.createElement(nF,{required:f,scope:e,trigger:m,onTriggerChange:v,valueNode:g,onValueNodeChange:y,valueNodeHasChildren:w,onValueNodeHasChildrenChange:x,contentId:_T(),value:E,onValueChange:R,open:A,onOpenChange:P,dir:S,triggerPointerDownPosRef:N,disabled:h},b.createElement(vm.Provider,{scope:e},b.createElement(iF,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(D=>{I(z=>new Set(z).add(D))},[]),onNativeOptionRemove:b.useCallback(D=>{I(z=>{const L=new Set(z);return L.delete(D),L})},[])},n)),T?b.createElement(oO,{key:_,"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:E,onChange:D=>R(D.target.value),disabled:h},E===void 0?b.createElement("option",{value:""}):null,Array.from(B)):null))},oF="SelectTrigger",aF=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=C1(n),o=ha(oF,n),a=o.disabled||i,l=Ot(e,o.onTriggerChange),u=E1(n),[c,d,h]=aO(p=>{const m=u().filter(y=>!y.disabled),v=m.find(y=>y.value===o.value),g=lO(m,p,v);g!==void 0&&o.onValueChange(g.value)}),f=()=>{a||(o.onOpenChange(!0),h())};return b.createElement(u9,Ue({asChild:!0},s),b.createElement(Jt.button,Ue({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},r,{ref:l,onClick:Et(r.onClick,p=>{p.currentTarget.focus()}),onPointerDown:Et(r.onPointerDown,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(f(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:Et(r.onKeyDown,p=>{const m=c.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(m&&p.key===" ")&&Q9.includes(p.key)&&(f(),p.preventDefault())})})))}),lF="SelectValue",uF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o,...a}=t,l=ha(lF,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=Ot(e,l.onValueNodeChange);return os(()=>{u(c)},[u,c]),b.createElement(Jt.span,Ue({},a,{ref:d,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:s)}),cF=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return b.createElement(Jt.span,Ue({"aria-hidden":!0},r,{ref:e}),i||"▼")}),dF=t=>b.createElement(d9,Ue({asChild:!0},t)),Il="SelectContent",hF=b.forwardRef((t,e)=>{const n=ha(Il,t.__scopeSelect),[i,r]=b.useState();if(os(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?la.createPortal(b.createElement(sO,{scope:t.__scopeSelect},b.createElement(vm.Slot,{scope:t.__scopeSelect},b.createElement("div",null,t.children))),s):null}return b.createElement(fF,Ue({},t,{ref:e}))}),Rr=10,[sO,wm]=ql(Il),fF=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:v,...g}=t,y=ha(Il,n),[w,x]=b.useState(null),[S,A]=b.useState(null),P=Ot(e,Q=>x(Q)),[E,R]=b.useState(null),[N,T]=b.useState(null),B=E1(n),[I,_]=b.useState(!1),D=b.useRef(!1);b.useEffect(()=>{if(w)return y9(w)},[w]),A6();const z=b.useCallback(Q=>{const[ye,...Ne]=B().map(be=>be.ref.current),[Ee]=Ne.slice(-1),ke=document.activeElement;for(const be of Q)if(be===ke||(be==null||be.scrollIntoView({block:"nearest"}),be===ye&&S&&(S.scrollTop=0),be===Ee&&S&&(S.scrollTop=S.scrollHeight),be==null||be.focus(),document.activeElement!==ke))return},[B,S]),L=b.useCallback(()=>z([E,w]),[z,E,w]);b.useEffect(()=>{I&&L()},[I,L]);const{onOpenChange:O,triggerPointerDownPosRef:$}=y;b.useEffect(()=>{if(w){let Q={x:0,y:0};const ye=Ee=>{var ke,be,se,Te;Q={x:Math.abs(Math.round(Ee.pageX)-((ke=(be=$.current)===null||be===void 0?void 0:be.x)!==null&&ke!==void 0?ke:0)),y:Math.abs(Math.round(Ee.pageY)-((se=(Te=$.current)===null||Te===void 0?void 0:Te.y)!==null&&se!==void 0?se:0))}},Ne=Ee=>{Q.x<=10&&Q.y<=10?Ee.preventDefault():w.contains(Ee.target)||O(!1),document.removeEventListener("pointermove",ye),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[w,O,$]),b.useEffect(()=>{const Q=()=>O(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[O]);const[F,Y]=aO(Q=>{const ye=B().filter(ke=>!ke.disabled),Ne=ye.find(ke=>ke.ref.current===document.activeElement),Ee=lO(ye,Q,Ne);Ee&&setTimeout(()=>Ee.ref.current.focus())}),ie=b.useCallback((Q,ye,Ne)=>{const Ee=!D.current&&!Ne;(y.value!==void 0&&y.value===ye||Ee)&&(R(Q),Ee&&(D.current=!0))},[y.value]),ce=b.useCallback(()=>w==null?void 0:w.focus(),[w]),we=b.useCallback((Q,ye,Ne)=>{const Ee=!D.current&&!Ne;(y.value!==void 0&&y.value===ye||Ee)&&T(Q)},[y.value]),Se=i==="popper"?kk:pF,xe=Se===kk?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:v}:{};return b.createElement(sO,{scope:n,content:w,viewport:S,onViewportChange:A,itemRefCallback:ie,selectedItem:E,onItemLeave:ce,itemTextRefCallback:we,focusSelectedItem:L,selectedItemText:N,position:i,isPositioned:I,searchRef:F},b.createElement(q9,{as:Hc,allowPinchZoom:!0},b.createElement(P6,{asChild:!0,trapped:y.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:Et(r,Q=>{var ye;(ye=y.trigger)===null||ye===void 0||ye.focus({preventScroll:!0}),Q.preventDefault()})},b.createElement(k6,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},b.createElement(Se,Ue({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Q=>Q.preventDefault()},g,xe,{onPlaced:()=>_(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:Et(g.onKeyDown,Q=>{const ye=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!ye&&Q.key.length===1&&Y(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let Ee=B().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(Ee=Ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const ke=Q.target,be=Ee.indexOf(ke);Ee=Ee.slice(be+1)}setTimeout(()=>z(Ee)),Q.preventDefault()}})}))))))}),pF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=ha(Il,n),o=wm(Il,n),[a,l]=b.useState(null),[u,c]=b.useState(null),d=Ot(e,P=>c(P)),h=E1(n),f=b.useRef(!1),p=b.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:g,focusSelectedItem:y}=o,w=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&m&&v&&g){const P=s.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),R=s.valueNode.getBoundingClientRect(),N=g.getBoundingClientRect();if(s.dir!=="rtl"){const ke=N.left-E.left,be=R.left-ke,se=P.left-be,Te=P.width+se,xt=Math.max(Te,E.width),ln=window.innerWidth-Rr,Bn=ip(be,[Rr,ln-xt]);a.style.minWidth=Te+"px",a.style.left=Bn+"px"}else{const ke=E.right-N.right,be=window.innerWidth-R.right-ke,se=window.innerWidth-P.right-be,Te=P.width+se,xt=Math.max(Te,E.width),ln=window.innerWidth-Rr,Bn=ip(be,[Rr,ln-xt]);a.style.minWidth=Te+"px",a.style.right=Bn+"px"}const T=h(),B=window.innerHeight-Rr*2,I=m.scrollHeight,_=window.getComputedStyle(u),D=parseInt(_.borderTopWidth,10),z=parseInt(_.paddingTop,10),L=parseInt(_.borderBottomWidth,10),O=parseInt(_.paddingBottom,10),$=D+z+I+O+L,F=Math.min(v.offsetHeight*5,$),Y=window.getComputedStyle(m),ie=parseInt(Y.paddingTop,10),ce=parseInt(Y.paddingBottom,10),we=P.top+P.height/2-Rr,Se=B-we,xe=v.offsetHeight/2,Q=v.offsetTop+xe,ye=D+z+Q,Ne=$-ye;if(ye<=we){const ke=v===T[T.length-1].ref.current;a.style.bottom="0px";const be=u.clientHeight-m.offsetTop-m.offsetHeight,se=Math.max(Se,xe+(ke?ce:0)+be+L),Te=ye+se;a.style.height=Te+"px"}else{const ke=v===T[0].ref.current;a.style.top="0px";const se=Math.max(we,D+m.offsetTop+(ke?ie:0)+xe)+Ne;a.style.height=se+"px",m.scrollTop=ye-we+m.offsetTop}a.style.margin=`${Rr}px 0`,a.style.minHeight=F+"px",a.style.maxHeight=B+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,m,v,g,s.dir,i]);os(()=>w(),[w]);const[x,S]=b.useState();os(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const A=b.useCallback(P=>{P&&p.current===!0&&(w(),y==null||y(),p.current=!1)},[w,y]);return b.createElement(mF,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:A},b.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x}},b.createElement(Jt.div,Ue({},r,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}}))))}),kk=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Rr,...s}=t,o=C1(n);return b.createElement(c9,Ue({},o,s,{ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[mF,gF]=ql(Il,{}),Ek="SelectViewport",yF=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=wm(Ek,n),s=gF(Ek,n),o=Ot(e,r.onViewportChange),a=b.useRef(0);return b.createElement(b.Fragment,null,b.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),b.createElement(vm.Slot,{scope:n},b.createElement(Jt.div,Ue({"data-radix-select-viewport":"",role:"presentation"},i,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...i.style},onScroll:Et(i.onScroll,l=>{const u=l.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&c){const h=Math.abs(a.current-u.scrollTop);if(h>0){const f=window.innerHeight-Rr*2,p=parseFloat(c.style.minHeight),m=parseFloat(c.style.height),v=Math.max(p,m);if(v<f){const g=v+h,y=Math.min(f,g),w=g-y;c.style.height=y+"px",c.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,c.style.justifyContent="flex-end")}}}a.current=u.scrollTop})}))))}),vF="SelectGroup";ql(vF);const yv="SelectItem",[wF,xF]=ql(yv),bF=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=ha(yv,n),l=wm(yv,n),u=a.value===i,[c,d]=b.useState(s??""),[h,f]=b.useState(!1),p=Ot(e,g=>{var y;return(y=l.itemRefCallback)===null||y===void 0?void 0:y.call(l,g,i,r)}),m=_T(),v=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};return b.createElement(wF,{scope:n,value:i,disabled:r,textId:m,isSelected:u,onItemTextChange:b.useCallback(g=>{d(y=>{var w;return y||((w=g==null?void 0:g.textContent)!==null&&w!==void 0?w:"").trim()})},[])},b.createElement(vm.ItemSlot,{scope:n,value:i,disabled:r,textValue:c},b.createElement(Jt.div,Ue({role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1},o,{ref:p,onFocus:Et(o.onFocus,()=>f(!0)),onBlur:Et(o.onBlur,()=>f(!1)),onPointerUp:Et(o.onPointerUp,v),onPointerMove:Et(o.onPointerMove,g=>{if(r){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}else g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Et(o.onPointerLeave,g=>{if(g.currentTarget===document.activeElement){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}}),onKeyDown:Et(o.onKeyDown,g=>{var y;((y=l.searchRef)===null||y===void 0?void 0:y.current)!==""&&g.key===" "||(eF.includes(g.key)&&v(),g.key===" "&&g.preventDefault())})}))))}),lh="SelectItemText",SF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=ha(lh,n),a=wm(lh,n),l=xF(lh,n),u=rF(lh,n),[c,d]=b.useState(null),h=Ot(e,g=>d(g),l.onItemTextChange,g=>{var y;return(y=a.itemTextRefCallback)===null||y===void 0?void 0:y.call(a,g,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=b.useMemo(()=>b.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},f),[l.disabled,l.value,f]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=u;return os(()=>(m(p),()=>v(p)),[m,v,p]),b.createElement(b.Fragment,null,b.createElement(Jt.span,Ue({id:l.textId},s,{ref:h})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?la.createPortal(s.children,o.valueNode):null)}),oO=b.forwardRef((t,e)=>{const{value:n,...i}=t,r=b.useRef(null),s=Ot(e,r),o=ZT(n);return b.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),b.createElement(f9,{asChild:!0},b.createElement("select",Ue({},i,{ref:s,defaultValue:n})))});oO.displayName="BubbleSelect";function aO(t){const e=ss(t),n=b.useRef(""),i=b.useRef(0),r=b.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(i.current),u!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function lO(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=kF(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function kF(t,e){return t.map((n,i)=>t[(e+i)%t.length])}const EF=sF,uO=aF,CF=uF,AF=cF,PF=dF,cO=hF,RF=yF,dO=bF,TF=SF,Zg=EF,Yg=CF,qh=b.forwardRef(({className:t,children:e,...n},i)=>C.jsxs(uO,{ref:i,className:it("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,C.jsx(AF,{asChild:!0,children:C.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));qh.displayName=uO.displayName;const Qh=b.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>C.jsx(PF,{children:C.jsx(cO,{ref:r,className:it("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:C.jsx(RF,{className:"p-1",children:e})})}));Qh.displayName=cO.displayName;const Du=b.forwardRef(({className:t,children:e,...n},i)=>C.jsx(dO,{ref:i,className:it("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:C.jsx(TF,{children:e})}));Du.displayName=dO.displayName;const hO=["PageUp","PageDown"],fO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pO={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},pd="Slider",[vv,OF,_F]=PT(pd),[mO,QH]=fm(pd,[_F]),[NF,xm]=mO(pd),MF=b.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[i],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,...p}=t,[m,v]=b.useState(null),g=Ot(e,_=>v(_)),y=b.useRef(new Set),w=b.useRef(0),x=o==="horizontal",S=m?!!m.closest("form"):!0,A=x?DF:$F,[P=[],E]=mv({prop:c,defaultProp:u,onChange:_=>{var D;(D=[...y.current][w.current])===null||D===void 0||D.focus(),d(_)}}),R=b.useRef(P);function N(_){const D=HF(P,_);I(_,D)}function T(_){I(_,w.current)}function B(){const _=R.current[w.current];P[w.current]!==_&&h(P)}function I(_,D,{commit:z}={commit:!1}){const L=KF(s),O=ZF(Math.round((_-i)/s)*s+i,L),$=ip(O,[i,r]);E((F=[])=>{const Y=UF(F,$,D);if(XF(Y,l*s)){w.current=Y.indexOf($);const ie=String(Y)!==String(F);return ie&&z&&h(Y),ie?Y:F}else return F})}return b.createElement(NF,{scope:t.__scopeSlider,disabled:a,min:i,max:r,valueIndexToChangeRef:w,thumbs:y.current,values:P,orientation:o},b.createElement(vv.Provider,{scope:t.__scopeSlider},b.createElement(vv.Slot,{scope:t.__scopeSlider},b.createElement(A,Ue({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:g,onPointerDown:Et(p.onPointerDown,()=>{a||(R.current=P)}),min:i,max:r,inverted:f,onSlideStart:a?void 0:N,onSlideMove:a?void 0:T,onSlideEnd:a?void 0:B,onHomeKeyDown:()=>!a&&I(i,0,{commit:!0}),onEndKeyDown:()=>!a&&I(r,P.length-1,{commit:!0}),onStepKeyDown:({event:_,direction:D})=>{if(!a){const O=hO.includes(_.key)||_.shiftKey&&fO.includes(_.key)?10:1,$=w.current,F=P[$],Y=s*O*D;I(F+Y,$,{commit:!0})}}})))),S&&P.map((_,D)=>b.createElement(jF,{key:D,name:n?n+(P.length>1?"[]":""):void 0,value:_})))}),[gO,yO]=mO(pd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),DF=b.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=b.useState(null),f=Ot(e,w=>h(w)),p=b.useRef(),m=RT(r),v=m==="ltr",g=v&&!s||!v&&s;function y(w){const x=p.current||d.getBoundingClientRect(),S=[0,x.width],P=A1(S,g?[n,i]:[i,n]);return p.current=x,P(w-x.left)}return b.createElement(gO,{scope:t.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width"},b.createElement(vO,Ue({dir:m,"data-orientation":"horizontal"},c,{ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const x=y(w.clientX);o==null||o(x)},onSlideMove:w=>{const x=y(w.clientX);a==null||a(x)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:w=>{const S=pO[g?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:S?-1:1})}})))}),$F=b.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=b.useRef(null),d=Ot(e,c),h=b.useRef(),f=!r;function p(m){const v=h.current||c.current.getBoundingClientRect(),g=[0,v.height],w=A1(g,f?[i,n]:[n,i]);return h.current=v,w(m-v.top)}return b.createElement(gO,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1},b.createElement(vO,Ue({"data-orientation":"vertical"},u,{ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=p(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=p(m.clientY);o==null||o(v)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:m=>{const g=pO[f?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:g?-1:1})}})))}),vO=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=xm(pd,n);return b.createElement(Jt.span,Ue({},u,{ref:e,onKeyDown:Et(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):hO.concat(fO).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Et(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():i(d)}),onPointerMove:Et(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:Et(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})}))}),LF="SliderTrack",IF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=xm(LF,n);return b.createElement(Jt.span,Ue({"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation},i,{ref:e}))}),Ck="SliderRange",BF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=xm(Ck,n),s=yO(Ck,n),o=b.useRef(null),a=Ot(e,o),l=r.values.length,u=r.values.map(h=>wO(h,r.min,r.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return b.createElement(Jt.span,Ue({"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0},i,{ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}}))}),Ak="SliderThumb",zF=b.forwardRef((t,e)=>{const n=OF(t.__scopeSlider),[i,r]=b.useState(null),s=Ot(e,a=>r(a)),o=b.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return b.createElement(FF,Ue({},t,{ref:s,index:o}))}),FF=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,...r}=t,s=xm(Ak,n),o=yO(Ak,n),[a,l]=b.useState(null),u=Ot(e,v=>l(v)),c=UT(a),d=s.values[i],h=d===void 0?0:wO(d,s.min,s.max),f=VF(i,s.values.length),p=c==null?void 0:c[o.size],m=p?WF(p,h,o.direction):0;return b.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),b.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${h}% + ${m}px)`}},b.createElement(vv.ItemSlot,{scope:t.__scopeSlider},b.createElement(Jt.span,Ue({role:"slider","aria-label":t["aria-label"]||f,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},r,{ref:u,style:d===void 0?{display:"none"}:t.style,onFocus:Et(t.onFocus,()=>{s.valueIndexToChangeRef.current=i})}))))}),jF=t=>{const{value:e,...n}=t,i=b.useRef(null),r=ZT(e);return b.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[r,e]),b.createElement("input",Ue({style:{display:"none"}},n,{ref:i,defaultValue:e}))};function UF(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function wO(t,e,n){const s=100/(n-e)*(t-e);return ip(s,[0,100])}function VF(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function HF(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function WF(t,e,n){const i=t/2,s=A1([0,50],[0,i]);return(i-s(e)*n)*n}function GF(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function XF(t,e){if(e>0){const n=GF(t);return Math.min(...n)>=e}return!0}function A1(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function KF(t){return(String(t).split(".")[1]||"").length}function ZF(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const xO=MF,YF=IF,JF=BF,qF=zF,ef=b.forwardRef(({className:t,...e},n)=>C.jsxs(xO,{ref:n,className:it("relative flex touch-none select-none items-center",t),...e,children:[C.jsx(YF,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:C.jsx(JF,{className:"absolute h-full bg-mantis-400"})}),C.jsx(qF,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ef.displayName=xO.displayName;const bO=de(!1);function QF({className:t}){const e=fd(),[n,i]=s6();return C.jsxs("div",{className:t,children:[C.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[C.jsx("span",{className:"icon-[lucide--settings] h-6 w-6"})," ",e("settings.title")]}),C.jsxs(ka,{children:[C.jsx(Ea,{children:C.jsxs(Ca,{children:[C.jsx("span",{className:"icon-[lucide--languages] h-6 w-6"}),e("settings.language.label")]})}),C.jsxs(Zg,{value:n.language,onValueChange:r=>i(s=>({...s,language:r})),children:[C.jsx(qh,{className:"w-32",children:C.jsx(Yg,{})}),C.jsxs(Qh,{children:[C.jsx(Du,{value:"en",children:C.jsxs("span",{className:"inline-flex items-center gap-2",children:[C.jsx("span",{className:"icon-[circle-flags--uk] h-4 w-4"})," English"]})}),C.jsx(Du,{value:"es",children:C.jsxs("span",{className:"inline-flex items-center gap-2",children:[C.jsx("span",{className:"icon-[circle-flags--ar] h-4 w-4"})," Español"]})})]})]})]}),C.jsx("hr",{className:"border-stone-600"}),C.jsxs(ka,{children:[C.jsxs(Ea,{children:[C.jsxs(Ca,{children:[C.jsx("span",{className:"icon-[lucide--memory-stick] h-6 w-6"}),e("settings.dataOnLoad.label")]}),C.jsx(Pk,{children:e("settings.dataOnLoad.description")})]}),C.jsxs(Zg,{value:n.dataOnLoad,onValueChange:r=>i(s=>({...s,dataOnLoad:r})),children:[C.jsx(qh,{className:"w-32 min-w-[theme(width.32)]",children:C.jsx(Yg,{})}),C.jsx(Qh,{children:aR.map(r=>C.jsx(Du,{value:r,children:e(`settings.dataOnLoad.${r}`)},r))})]})]}),C.jsxs(ka,{children:[C.jsxs(Ea,{children:[C.jsxs(Ca,{children:[C.jsx("span",{className:"icon-[lucide--monitor-smartphone] h-6 w-6"}),e("settings.devices.label")]}),C.jsx(Pk,{children:e("settings.devices.description")})]}),C.jsxs(Zg,{value:n.devices,onValueChange:r=>i(s=>({...s,devices:r})),children:[C.jsx(qh,{className:"w-48 min-w-[theme(width.48)]",children:C.jsx(Yg,{})}),C.jsx(Qh,{children:lR.map(r=>C.jsx(Du,{value:r,children:e(`settings.devices.${r}`)},r))})]})]}),C.jsx("hr",{className:"border-stone-600"}),C.jsxs(ka,{children:[C.jsx(Ea,{children:C.jsxs(Ca,{children:[C.jsx("span",{className:"icon-[lucide--gauge] h-6 w-6"}),e("settings.speeds.executionUnit")]})}),C.jsx(ef,{className:"w-44",value:[500-n.executionUnit],onValueChange:r=>i(s=>({...s,executionUnit:500-r[0]})),min:0,max:495,step:1})]}),C.jsxs(ka,{children:[C.jsx(Ea,{children:C.jsxs(Ca,{children:[C.jsx("span",{className:"icon-[lucide--clock] h-6 w-6"}),e("settings.speeds.clockSpeed")]})}),C.jsx(ef,{className:"w-44",value:[1e3-n.clockSpeed],onValueChange:r=>i(s=>({...s,clockSpeed:1e3-r[0]})),min:0,max:990,step:10})]}),C.jsxs(ka,{children:[C.jsx(Ea,{children:C.jsxs(Ca,{children:[C.jsx("span",{className:"icon-[lucide--printer] h-6 w-6"}),e("settings.speeds.printerSpeed")]})}),C.jsx(ef,{className:"w-44",value:[1e3-n.printerSpeed],onValueChange:r=>i(s=>({...s,printerSpeed:1e3-r[0]})),min:0,max:990,step:10})]})]})}function ka({children:t}){return C.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ea({children:t}){return C.jsx("div",{className:"grow",children:t})}function Ca({children:t}){return C.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Pk({children:t}){return C.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function ej(){const t=fd(),[e,n]=tA(bO);return C.jsxs("header",{className:"relative p-2 text-sm text-white",children:[C.jsx(c6,{className:" absolute inset-0"}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex select-none items-center justify-center",children:[C.jsx("img",{src:"/favicon.svg",className:"mr-2 h-10 w-10"}),C.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",C.jsx("span",{className:"text-mantis-400",children:"Sim"})]})]}),C.jsx("button",{className:it("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:C.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}const tj=1024;let nj=0;class Jg{constructor(e,n){this.from=e,this.to=n}}class ze{constructor(e={}){this.id=nj++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=In.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}ze.closedBy=new ze({deserialize:t=>t.split(" ")});ze.openedBy=new ze({deserialize:t=>t.split(" ")});ze.group=new ze({deserialize:t=>t.split(" ")});ze.contextHash=new ze({perNode:!0});ze.lookAhead=new ze({perNode:!0});ze.mounted=new ze({perNode:!0});const ij=Object.create(null);class In{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):ij,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new In(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ze.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(ze.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}In.none=new In("",Object.create(null),0,8);class P1{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new In(i.name,r,i.id,i.flags):i)}return new P1(n)}}const uh=new WeakMap,Rk=new WeakMap;var Vt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Vt||(Vt={}));class ft{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(ze.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new dp(this.topNode,e)}cursorAt(e,n=0,i=0){let r=uh.get(this)||this.topNode,s=new dp(r);return s.moveTo(e,n),uh.set(this,s._tree),s}get topNode(){return new Jr(this,0,0,null)}resolve(e,n=0){let i=Bl(uh.get(this)||this.topNode,e,n,!1);return uh.set(this,i),i}resolveInner(e,n=0){let i=Bl(Rk.get(this)||this.topNode,e,n,!0);return Rk.set(this,i),i}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Vt.IncludeAnonymous)>0;for(let l=this.cursor(o|Vt.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:O1(In.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new ft(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new ft(In.none,n,i,r)))}static build(e){return sj(e)}}ft.empty=new ft(In.none,[],[],0);class R1{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new R1(this.buffer,this.index)}}class fa{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return In.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(SO(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let u=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,u)}return new fa(s,o,this.set)}}function SO(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function kO(t,e){let n=t.childBefore(e);for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(t=n,n=i.prevSibling):n=i}return t}function Bl(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Jr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Vt.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Jr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Jr{constructor(e,n,i,r){this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(SO(r,i,d,d+c.length)){if(c instanceof fa){if(s&Vt.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new Bs(new rj(o,c,e,d),null,h)}else if(s&Vt.IncludeAnonymous||!c.type.isAnonymous||T1(c)){let h;if(!(s&Vt.IgnoreMounts)&&c.props&&(h=c.prop(ze.mounted))&&!h.overlay)return new Jr(h.tree,d,e,o);let f=new Jr(c,d,e,o);return s&Vt.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&Vt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Vt.IgnoreOverlays)&&(r=this._tree.prop(ze.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Jr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new dp(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return Bl(this,e,n,!1)}resolveInner(e,n=0){return Bl(this,e,n,!0)}enterUnfinishedNodesBefore(e){return kO(this,e)}getChild(e,n=null,i=null){let r=up(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return up(this,e,n,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return cp(this,e)}}function up(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(;!r.type.is(n);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function cp(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class rj{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class Bs{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new Bs(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Vt.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Bs(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Bs(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Bs(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new dp(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new ft(this.type,e,n,this.to-this.from)}resolve(e,n=0){return Bl(this,e,n,!1)}resolveInner(e,n=0){return Bl(this,e,n,!0)}enterUnfinishedNodesBefore(e){return kO(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,i=null){let r=up(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return up(this,e,n,i)}get node(){return this}matchContext(e){return cp(this,e)}}class dp{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Jr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Jr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Vt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Vt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Vt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Vt.IncludeAnonymous||a instanceof fa||!a.type.isAnonymous||T1(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new Bs(this.buffer,n,this.stack[r]);return this.bufferNode=new Bs(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return cp(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return cp(this.node,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function T1(t){return t.children.some(e=>e instanceof fa||!e.type.isAnonymous||T1(e))}function sj(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=tj,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new R1(n,n.length):n,l=i.types,u=0,c=0;function d(x,S,A,P,E){let{id:R,start:N,end:T,size:B}=a,I=c;for(;B<0;)if(a.next(),B==-1){let O=s[R];A.push(O),P.push(N-x);return}else if(B==-3){u=R;return}else if(B==-4){c=R;return}else throw new RangeError(`Unrecognized record size: ${B}`);let _=l[R],D,z,L=N-x;if(T-N<=r&&(z=m(a.pos-S,E))){let O=new Uint16Array(z.size-z.skip),$=a.pos-z.size,F=O.length;for(;a.pos>$;)F=v(z.start,O,F);D=new fa(O,T-z.start,i),L=z.start-x}else{let O=a.pos-B;a.next();let $=[],F=[],Y=R>=o?R:-1,ie=0,ce=T;for(;a.pos>O;)Y>=0&&a.id==Y&&a.size>=0?(a.end<=ce-r&&(f($,F,N,ie,a.end,ce,Y,I),ie=$.length,ce=a.end),a.next()):d(N,O,$,F,Y);if(Y>=0&&ie>0&&ie<$.length&&f($,F,N,ie,N,ce,Y,I),$.reverse(),F.reverse(),Y>-1&&ie>0){let we=h(_);D=O1(_,$,F,0,$.length,0,T-N,we,we)}else D=p(_,$,F,T-N,I-T)}A.push(D),P.push(L)}function h(x){return(S,A,P)=>{let E=0,R=S.length-1,N,T;if(R>=0&&(N=S[R])instanceof ft){if(!R&&N.type==x&&N.length==P)return N;(T=N.prop(ze.lookAhead))&&(E=A[R]+N.length+T)}return p(x,S,A,P,E)}}function f(x,S,A,P,E,R,N,T){let B=[],I=[];for(;x.length>P;)B.push(x.pop()),I.push(S.pop()+A-E);x.push(p(i.types[N],B,I,R-E,T-R)),S.push(E-A)}function p(x,S,A,P,E=0,R){if(u){let N=[ze.contextHash,u];R=R?[N].concat(R):[N]}if(E>25){let N=[ze.lookAhead,E];R=R?[N].concat(R):[N]}return new ft(x,S,A,P,R)}function m(x,S){let A=a.fork(),P=0,E=0,R=0,N=A.end-r,T={size:0,start:0,skip:0};e:for(let B=A.pos-x;A.pos>B;){let I=A.size;if(A.id==S&&I>=0){T.size=P,T.start=E,T.skip=R,R+=4,P+=4,A.next();continue}let _=A.pos-I;if(I<0||_<B||A.start<N)break;let D=A.id>=o?4:0,z=A.start;for(A.next();A.pos>_;){if(A.size<0)if(A.size==-3)D+=4;else break e;else A.id>=o&&(D+=4);A.next()}E=z,P+=I,R+=D}return(S<0||P==x)&&(T.size=P,T.start=E,T.skip=R),T.size>4?T:void 0}function v(x,S,A){let{id:P,start:E,end:R,size:N}=a;if(a.next(),N>=0&&P<o){let T=A;if(N>4){let B=a.pos-(N-4);for(;a.pos>B;)A=v(x,S,A)}S[--A]=T,S[--A]=R-x,S[--A]=E-x,S[--A]=P}else N==-3?u=P:N==-4&&(c=P);return A}let g=[],y=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,g,y,-1);let w=(e=t.length)!==null&&e!==void 0?e:g.length?y[0]+g[0].length:0;return new ft(l[t.topID],g.reverse(),y.reverse(),w)}const Tk=new WeakMap;function tf(t,e){if(!t.isAnonymous||e instanceof fa||e.type!=t)return 1;let n=Tk.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof ft)){n=1;break}n+=tf(t,i)}Tk.set(e,n)}return n}function O1(t,e,n,i,r,s,o,a,l){let u=0;for(let p=i;p<r;p++)u+=tf(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,m,v,g,y){for(let w=v;w<g;){let x=w,S=m[w],A=tf(t,p[w]);for(w++;w<g;w++){let P=tf(t,p[w]);if(A+P>=c)break;A+=P}if(w==x+1){if(A>c){let P=p[x];f(P.children,P.positions,0,P.children.length,m[x]+y);continue}d.push(p[x])}else{let P=m[w-1]+p[w-1].length-S;d.push(O1(t,p,m,x,w,S,P,null,l))}h.push(S+y-s)}}return f(e,n,i,r,0),(a||l)(d,h,o)}class Uo{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new Uo(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new Uo(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return r}}class EO{startParse(e,n,i){return typeof e=="string"&&(e=new oj(e)),i=i?i.length?i.map(r=>new Jg(r.from,r.to)):[new Jg(0,0)]:[new Jg(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class oj{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new ze({perNode:!0});let aj=0;class jt{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=aj++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new jt([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new hp;return n=>n.modified.indexOf(e)>-1?n:hp.get(n.base||n,n.modified.concat(e).sort((i,r)=>i.id-r.id))}}let lj=0;class hp{constructor(){this.instances=[],this.id=lj++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&uj(n,a.modified));if(i)return i;let r=[],s=new jt(r,e,n);for(let a of n)a.instances.push(s);let o=cj(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(hp.get(a,l));return s}}function uj(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function cj(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function dj(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+r);let c=new fp(i,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return CO.add(e)}const CO=new ze;class fp{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}fp.empty=new fp([],2,null);function AO(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function hj(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function fj(t,e,n,i=0,r=t.length){let s=new pj(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class pj{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=mj(e)||fp.empty,d=hj(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(ze.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),m=e.firstChild();for(let v=0,g=a;;v++){let y=v<h.overlay.length?h.overlay[v]:null,w=y?y.from+a:l,x=Math.max(n,g),S=Math.min(i,w);if(x<S&&m)for(;e.from<S&&(this.highlightRange(e,x,S,r,s),this.startSpan(Math.min(S,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>i)break;g=y.to+a,g>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+a),Math.min(i,g),"",p),this.startSpan(Math.min(i,g),u))}m&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function mj(t){let e=t.type.prop(CO);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const J=jt.define,ch=J(),xs=J(),Ok=J(xs),_k=J(xs),bs=J(),dh=J(bs),qg=J(bs),Ji=J(),vo=J(Ji),Zi=J(),Yi=J(),wv=J(),vu=J(wv),hh=J(),Ce={comment:ch,lineComment:J(ch),blockComment:J(ch),docComment:J(ch),name:xs,variableName:J(xs),typeName:Ok,tagName:J(Ok),propertyName:_k,attributeName:J(_k),className:J(xs),labelName:J(xs),namespace:J(xs),macroName:J(xs),literal:bs,string:dh,docString:J(dh),character:J(dh),attributeValue:J(dh),number:qg,integer:J(qg),float:J(qg),bool:J(bs),regexp:J(bs),escape:J(bs),color:J(bs),url:J(bs),keyword:Zi,self:J(Zi),null:J(Zi),atom:J(Zi),unit:J(Zi),modifier:J(Zi),operatorKeyword:J(Zi),controlKeyword:J(Zi),definitionKeyword:J(Zi),moduleKeyword:J(Zi),operator:Yi,derefOperator:J(Yi),arithmeticOperator:J(Yi),logicOperator:J(Yi),bitwiseOperator:J(Yi),compareOperator:J(Yi),updateOperator:J(Yi),definitionOperator:J(Yi),typeOperator:J(Yi),controlOperator:J(Yi),punctuation:wv,separator:J(wv),bracket:vu,angleBracket:J(vu),squareBracket:J(vu),paren:J(vu),brace:J(vu),content:Ji,heading:vo,heading1:J(vo),heading2:J(vo),heading3:J(vo),heading4:J(vo),heading5:J(vo),heading6:J(vo),contentSeparator:J(Ji),list:J(Ji),quote:J(Ji),emphasis:J(Ji),strong:J(Ji),link:J(Ji),monospace:J(Ji),strikethrough:J(Ji),inserted:J(),deleted:J(),changed:J(),invalid:J(),meta:hh,documentMeta:J(hh),annotation:J(hh),processingInstruction:J(hh),definition:jt.defineModifier(),constant:jt.defineModifier(),function:jt.defineModifier(),standard:jt.defineModifier(),local:jt.defineModifier(),special:jt.defineModifier()};AO([{tag:Ce.link,class:"tok-link"},{tag:Ce.heading,class:"tok-heading"},{tag:Ce.emphasis,class:"tok-emphasis"},{tag:Ce.strong,class:"tok-strong"},{tag:Ce.keyword,class:"tok-keyword"},{tag:Ce.atom,class:"tok-atom"},{tag:Ce.bool,class:"tok-bool"},{tag:Ce.url,class:"tok-url"},{tag:Ce.labelName,class:"tok-labelName"},{tag:Ce.inserted,class:"tok-inserted"},{tag:Ce.deleted,class:"tok-deleted"},{tag:Ce.literal,class:"tok-literal"},{tag:Ce.string,class:"tok-string"},{tag:Ce.number,class:"tok-number"},{tag:[Ce.regexp,Ce.escape,Ce.special(Ce.string)],class:"tok-string2"},{tag:Ce.variableName,class:"tok-variableName"},{tag:Ce.local(Ce.variableName),class:"tok-variableName tok-local"},{tag:Ce.definition(Ce.variableName),class:"tok-variableName tok-definition"},{tag:Ce.special(Ce.variableName),class:"tok-variableName2"},{tag:Ce.definition(Ce.propertyName),class:"tok-propertyName tok-definition"},{tag:Ce.typeName,class:"tok-typeName"},{tag:Ce.namespace,class:"tok-namespace"},{tag:Ce.className,class:"tok-className"},{tag:Ce.macroName,class:"tok-macroName"},{tag:Ce.propertyName,class:"tok-propertyName"},{tag:Ce.operator,class:"tok-operator"},{tag:Ce.comment,class:"tok-comment"},{tag:Ce.meta,class:"tok-meta"},{tag:Ce.invalid,class:"tok-invalid"},{tag:Ce.punctuation,class:"tok-punctuation"}]);var Qg;const Ga=new ze;function gj(t){return le.define({combine:t?e=>e.concat(t):void 0})}const yj=new ze;class Li{constructor(e,n,i=[],r=""){this.data=e,this.name=r,Le.prototype.hasOwnProperty("tree")||Object.defineProperty(Le.prototype,"tree",{get(){return Gi(this)}}),this.parser=n,this.extension=[jl.of(this),Le.languageData.of((s,o,a)=>{let l=Nk(s,o,a),u=l.type.prop(Ga);if(!u)return[];let c=s.facet(u),d=l.type.prop(yj);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return Nk(e,n,i).type.prop(Ga)==this.data}findRegions(e){let n=e.facet(jl);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Ga)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(ze.mounted);if(a){if(a.tree.prop(Ga)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof ft&&r(u,s.positions[l]+o)}};return r(Gi(e),0),i}get allowsNesting(){return!0}}Li.setState=Me.define();function Nk(t,e,n){let i=t.facet(jl),r=Gi(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Vt.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Gi(t){let e=t.field(Li.state,!1);return e?e.tree:ft.empty}class vj{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let wu=null;class zl{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new zl(e,n,[],ft.empty,0,i,[],null)}startParse(){return this.parser.startParse(new vj(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=ft.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Uo.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Uo.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=wu;wu=this;try{return e()}finally{wu=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Mk(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),i=Uo.applyChanges(i,l),r=ft.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new zl(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=Mk(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends EO{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=wu;if(l){for(let u of r)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new ft(In.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return wu}}function Mk(t,e,n){return Uo.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Fl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Fl(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=zl.create(e.facet(jl).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Fl(i)}}Li.state=an.define({create:Fl.init,update(t,e){for(let n of e.effects)if(n.is(Li.setState))return n.value;return e.startState.facet(jl)!=e.state.facet(jl)?Fl.init(e.state):t.apply(e)}});let PO=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(PO=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const e0=typeof navigator<"u"&&(!((Qg=navigator.scheduling)===null||Qg===void 0)&&Qg.isInputPending)?()=>navigator.scheduling.isInputPending():null,wj=Yt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Li.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Li.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=PO(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Li.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!e0?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>e0&&e0()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Li.setState.of(new Fl(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>zi(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),jl=le.define({combine(t){return t.length?t[0]:null},enables:t=>[Li.state,wj,fe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class xj{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const RO=le.define(),_1=le.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function sa(t){let e=t.facet(_1);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function pp(t,e){let n="",i=t.tabSize,r=t.facet(_1)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function TO(t,e){t instanceof Le&&(t=new N1(t));for(let i of t.state.facet(RO)){let r=i(t,e);if(r!==void 0)return r}let n=Gi(t.state);return n?Sj(t,n,e):null}class N1{constructor(e,n={}){this.state=e,this.options=n,this.unit=sa(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Yp(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const bj=new ze;function Sj(t,e,n){return OO(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function kj(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Ej(t){let e=t.type.prop(bj);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(ze.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Rj(o,!0,1,void 0,s&&!kj(o)?r.from:void 0)}return t.parent==null?Cj:null}function OO(t,e,n){for(;t;t=t.parent){let i=Ej(t);if(i)return i(M1.create(n,e,t))}return null}function Cj(){return 0}class M1 extends N1{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.node=i}static create(e,n,i){return new M1(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Aj(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?OO(e,this.pos,this.base):0}}function Aj(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Pj(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function Rj(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=e?Pj(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Tj=200;function Oj(){return Le.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+Tj)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let d=TO(o,c.from);if(d==null)continue;let h=/^\s*/.exec(c.text)[0],f=pp(o,d);h!=f&&l.push({from:c.from,to:c.from+h.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const _j=le.define(),Nj=new ze;function Mj(t,e,n){let i=Gi(t);if(i.length<n)return null;let r=i.resolveInner(n,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(Nj);if(a&&(o.to<i.length-50||i.length==t.doc.length||!Dj(o))){let l=a(o,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(s=l)}}return s}function Dj(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function _O(t,e,n){for(let i of t.facet(_j)){let r=i(t,e,n);if(r)return r}return Mj(t,e,n)}function NO(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const D1=Me.define({map:NO}),bm=Me.define({map:NO});function MO(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const md=an.define({create(){return je.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(D1)&&!$j(t,n.value.from,n.value.to)?t=t.update({add:[Dk.range(n.value.from,n.value.to)]}):n.is(bm)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>fe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(Dk.range(i,r))}return je.set(e,!0)}});function DO(t,e,n){var i;let r=null;return(i=t.field(md,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function $j(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function $O(t,e){return t.field(md,!1)?e:e.concat(Me.appendConfig.of(jj()))}const Lj=t=>{for(let e of MO(t)){let n=_O(t.state,e.from,e.to);if(n)return t.dispatch({effects:$O(t.state,[D1.of(n),LO(t,n)])}),!0}return!1},Ij=t=>{if(!t.state.field(md,!1))return!1;let e=[];for(let n of MO(t)){let i=DO(t.state,n.from,n.to);i&&e.push(bm.of(i),LO(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function LO(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return fe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const Bj=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=_O(e,r.from,r.to);s&&n.push(D1.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:$O(t.state,n)}),!!n.length},zj=t=>{let e=t.state.field(md,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(bm.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},Fj={placeholderDOM:null,placeholderText:"…"},IO=le.define({combine(t){return ho(t,Fj)}});function jj(t){let e=[md,Uj];return t&&e.push(IO.of(t)),e}const Dk=je.replace({widget:new class extends ca{toDOM(t){let{state:e}=t,n=e.facet(IO),i=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),a=DO(t.state,o.from,o.to);a&&t.dispatch({effects:bm.of(a)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),Uj=fe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Sm{constructor(e,n){this.specs=e;let i;function r(a){let l=qs.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof Li?a=>a.prop(Ga)==o.data:o?a=>a==o:void 0,this.style=AO(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new qs(i):null,this.themeType=n.themeType}static define(e,n){return new Sm(e,n||{})}}const xv=le.define(),BO=le.define({combine(t){return t.length?[t[0]]:null}});function t0(t){let e=t.facet(xv);return e.length?e:t.facet(BO)}function Vj(t,e){let n=[Wj],i;return t instanceof Sm&&(t.module&&n.push(fe.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(BO.of(t)):i?n.push(xv.computeN([fe.darkTheme],r=>r.facet(fe.darkTheme)==(i=="dark")?[t]:[])):n.push(xv.of(t)),n}class Hj{constructor(e){this.markCache=Object.create(null),this.tree=Gi(e.state),this.decorations=this.buildDeco(e,t0(e.state))}update(e){let n=Gi(e.state),i=t0(e.state),r=i!=t0(e.startState);n.length<e.view.viewport.to&&!r&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,n){if(!n||!this.tree.length)return je.none;let i=new Jo;for(let{from:r,to:s}of e.visibleRanges)fj(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=je.mark({class:l})))},r,s);return i.finish()}}const Wj=id.high(Yt.fromClass(Hj,{decorations:t=>t.decorations})),Gj=1e4,Xj="()[]{}",Kj=new ze;function bv(t,e,n){let i=t.prop(e<0?ze.openedBy:ze.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Sv(t){let e=t.type.prop(Kj);return e?e(t.node):t}function fh(t,e,n,i={}){let r=i.maxScanDistance||Gj,s=i.brackets||Xj,o=Gi(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=bv(l.type,n,s);if(u&&l.from<l.to){let c=Sv(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return Zj(t,e,n,l,c,u,s)}}return Yj(t,e,n,o,a.type,r,s)}function Zj(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=Sv(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(bv(c.type,n,o))u++;else if(bv(c.type,-n,o)){if(u==0){let d=Sv(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function Yj(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let m=n>0?0:f.length-1,v=n>0?f.length:-1;m!=v;m+=n){let g=o.indexOf(f[m]);if(!(g<0||i.resolveInner(p+m,1).type!=r))if(g%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+m,to:p+m+1},matched:g>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function $k(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class zO{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=$k(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:$k(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function Jj(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||qj,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||I1}}function qj(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const Lk=new WeakMap;class $1 extends Li{constructor(e){let n=gj(e.languageData),i=Jj(e),r,s=new class extends EO{createParse(o,a,l){return new e7(r,o,a,l)}};super(n,s,[RO.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=i7(n),r=this,this.streamParser=i,this.stateAfter=new ze({perNode:!0}),this.tokenTable=e.tokenTable?new VO(i.tokenTable):n7}static define(e){return new $1(e)}getIndent(e,n){let i=Gi(e.state),r=i.resolve(n);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=Lk.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=L1(this,i,0,r.from,s??n),l,u;if(a?(u=a.state,l=a.pos+1):(u=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),h=Math.min(n,d.to);if(d.length){let f=o?o(d.from):-1,p=new zO(d.text,e.state.tabSize,e.unit,f<0?void 0:f);for(;p.pos<h-d.from;)jO(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==n)break;l=d.to+1}let c=e.lineAt(n);return o&&s==null&&Lk.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function L1(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof ft&&l<r&&L1(t,a,l,i,r);if(u)return u}return null}function FO(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof ft){if(!(l=FO(t,a,n-o,i-o,r)))break;return r?new ft(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Qj(t,e,n,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),a=s<=n&&o>n&&L1(t,r.tree,0-r.offset,n,o),l;if(a&&(l=FO(t,r.tree,n+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(i?sa(i):4),tree:ft.empty}}class e7{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=zl.get(),o=r[0].from,{state:a,tree:l}=Qj(e,i,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(sa(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=zl.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,n,i,r),s}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new zO(n,e?e.state.tabSize:4,e?sa(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=jO(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=ft.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:t7,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new ft(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new ft(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function jO(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const I1=Object.create(null),Kc=[In.none],t7=new P1(Kc),Ik=[],UO=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])UO[t]=HO(I1,e);class VO{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),UO)}resolve(e){return e?this.table[e]||(this.table[e]=HO(this.extra,e)):0}}const n7=new VO(I1);function n0(t,e){Ik.indexOf(t)>-1||(Ik.push(t),console.warn(e))}function HO(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||Ce[s];o?typeof o=="function"?n?n=o(n):n0(s,`Modifier ${s} used at start of tag`):n?n0(s,`Tag ${s} used as modifier`):n=o:n0(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let i=e.replace(/ /g,"_"),r=In.define({id:Kc.length,name:i,props:[dj({[i]:n})]});return Kc.push(r),r.id}function i7(t){let e=In.define({id:Kc.length,name:"Document",props:[Ga.add(()=>t)]});return Kc.push(e),e}const r7=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=B1(t.state,n.from);return i.line?s7(t):i.block?u7(t):!1};function gd(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const s7=gd(z1,0),o7=gd(z1,1),a7=gd(z1,2),l7=gd(WO,0),u7=gd((t,e)=>WO(t,e,d7(e)),0);function B1(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const xu=50;function c7(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-xu,i),o=t.sliceDoc(r,r+xu),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,d;r-i<=2*xu?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+xu),d=t.sliceDoc(r-xu,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function d7(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function WO(t,e,n=e.selection.ranges){let i=n.map(s=>B1(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>c7(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function z1(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,u=B1(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const kv=cs.define(),h7=cs.define(),f7=le.define(),GO=le.define({combine(t){return ho(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}});function p7(t){let e=0;return t.iterChangedRanges((n,i)=>e=i),e}const XO=an.define({create(){return dr.empty},update(t,e){let n=e.state.facet(GO),i=e.annotation(kv);if(i){let l=e.docChanged?U.single(p7(e.changes)):void 0,u=_n.fromTransaction(e,l),c=i.side,d=c==0?t.undone:t.done;return u?d=mp(d,d.length,n.minDepth,u):d=YO(d,e.startState.selection),new dr(c==0?i.rest:d,c==0?d:i.rest)}let r=e.annotation(h7);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation($t.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=_n.fromTransaction(e),o=e.annotation($t.time),a=e.annotation($t.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new dr(t.done.map(_n.fromJSON),t.undone.map(_n.fromJSON))}});function m7(t={}){return[XO,GO.of(t),fe.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?KO:e.inputType=="historyRedo"?Ev:null;return i?(e.preventDefault(),i(n)):!1}})]}function F1(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(XO,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const KO=F1(0,!1),Ev=F1(1,!1),g7=F1(0,!0);class _n{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new _n(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new _n(e.changes&&Nt.fromJSON(e.changes),[],e.mapped&&pr.fromJSON(e.mapped),e.startSelection&&U.fromJSON(e.startSelection),e.selectionsAfter.map(U.fromJSON))}static fromTransaction(e,n){let i=gi;for(let r of e.startState.facet(f7)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new _n(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,gi)}static selection(e){return new _n(void 0,gi,void 0,void 0,e)}}function mp(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function y7(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(i=!0)}}),i}function v7(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function ZO(t,e){return t.length?e.length?t.concat(e):t:e}const gi=[],w7=200;function YO(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-w7));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),mp(t,t.length-1,1e9,n.setSelAfter(i)))}else return[_n.selection([e])]}function x7(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function i0(t,e){if(!t.length)return t;let n=t.length,i=gi;for(;n;){let r=b7(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[_n.selection(i)]:gi}function b7(t,e,n){let i=ZO(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):gi,n);if(!t.changes)return _n.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new _n(r,Me.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const S7=/^(input\.type|delete)($|\.)/;class dr{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new dr(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||S7.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,y7(a.changes,e.changes))||i=="input.type.compose")?o=mp(o,o.length-1,r.minDepth,new _n(e.changes.compose(a.changes),ZO(e.effects,a.effects),a.mapped,a.startSelection,gi)):o=mp(o,o.length,r.minDepth,e),new dr(o,gi,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:gi;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&v7(s[s.length-1],e)?this:new dr(YO(this.done,e),this.undone,n,i)}addMapping(e){return new dr(i0(this.done,e),i0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:kv.of({side:e,rest:x7(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?gi:r.slice(0,r.length-1);return s.mapped&&(o=i0(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:kv.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}dr.empty=new dr(gi,gi);function yd(t,e){return U.create(t.ranges.map(e),t.mainIndex)}function fo(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function pa({state:t,dispatch:e},n){let i=yd(t.selection,n);return i.eq(t.selection)?!1:(e(fo(t,i)),!0)}function km(t,e){return U.cursor(e?t.to:t.from)}function JO(t,e){return pa(t,n=>n.empty?t.moveByChar(n,e):km(n,e))}function po(t){return t.textDirectionAt(t.state.selection.main.head)==ht.LTR}const Bk=t=>JO(t,!po(t)),zk=t=>JO(t,po(t));function qO(t,e){return pa(t,n=>n.empty?t.moveByGroup(n,e):km(n,e))}const k7=t=>qO(t,!po(t)),E7=t=>qO(t,po(t));function QO(t,e){return pa(t,n=>{if(!n.empty)return km(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const Fk=t=>QO(t,!1),jk=t=>QO(t,!0);function e_(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(fe.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function t_(t,e){let n=e_(t),{state:i}=t,r=yd(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):km(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=fe.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(fo(i,r),{effects:s}),!0}const r0=t=>t_(t,!1),s0=t=>t_(t,!0);function Em(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=U.cursor(i.from+s))}return r}const Uk=t=>pa(t,e=>Em(t,e,!0)),Vk=t=>pa(t,e=>Em(t,e,!1)),C7=t=>pa(t,e=>U.cursor(t.lineBlockAt(e.head).from,1)),A7=t=>pa(t,e=>U.cursor(t.lineBlockAt(e.head).to,-1));function P7(t,e,n){let i=!1,r=yd(t.selection,s=>{let o=fh(t,s.head,-1)||fh(t,s.head,1)||s.head>0&&fh(t,s.head-1,1)||s.head<t.doc.length&&fh(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?U.range(s.anchor,a):U.cursor(a)});return i?(e(fo(t,r)),!0):!1}const R7=({state:t,dispatch:e})=>P7(t,e,!1);function mo(t,e){let n=yd(t.state.selection,i=>{let r=e(i);return U.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(fo(t.state,n)),!0)}function n_(t,e){return mo(t,n=>t.moveByChar(n,e))}const Hk=t=>n_(t,!po(t)),Wk=t=>n_(t,po(t));function i_(t,e){return mo(t,n=>t.moveByGroup(n,e))}const T7=t=>i_(t,!po(t)),O7=t=>i_(t,po(t));function r_(t,e){return mo(t,n=>t.moveVertically(n,e))}const Gk=t=>r_(t,!1),Xk=t=>r_(t,!0);function s_(t,e){return mo(t,n=>t.moveVertically(n,e,e_(t).height))}const Kk=t=>s_(t,!1),Zk=t=>s_(t,!0),Yk=t=>mo(t,e=>Em(t,e,!0)),Jk=t=>mo(t,e=>Em(t,e,!1)),_7=t=>mo(t,e=>U.cursor(t.lineBlockAt(e.head).from)),N7=t=>mo(t,e=>U.cursor(t.lineBlockAt(e.head).to)),qk=({state:t,dispatch:e})=>(e(fo(t,{anchor:0})),!0),Qk=({state:t,dispatch:e})=>(e(fo(t,{anchor:t.doc.length})),!0),eE=({state:t,dispatch:e})=>(e(fo(t,{anchor:t.selection.main.anchor,head:0})),!0),tE=({state:t,dispatch:e})=>(e(fo(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),M7=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),D7=({state:t,dispatch:e})=>{let n=Am(t).map(({from:i,to:r})=>U.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:U.create(n),userEvent:"select"})),!0};function Cm(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(n="delete.backward",l=ph(t,l,!1)):l>o&&(n="delete.forward",l=ph(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=ph(t,o,!1),a=ph(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:U.cursor(o)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?fe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function ph(t,e,n){if(t instanceof fe)for(let i of t.state.facet(fe.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const o_=(t,e)=>Cm(t,n=>{let{state:i}=t,r=i.doc.lineAt(n),s,o;if(!e&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,n-r.from))){if(s[s.length-1]=="	")return n-1;let a=Yp(s,i.tabSize),l=a%sa(i)||sa(i);for(let u=0;u<l&&s[s.length-1-u]==" ";u++)n--;o=n}else o=rn(r.text,n-r.from,e,e)+r.from,o==n&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),o0=t=>o_(t,!1),nE=t=>o_(t,!0),a_=(t,e)=>Cm(t,n=>{let i=n,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=rn(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||i!=n)&&(a=c),i=l}return i}),iE=t=>a_(t,!1),$7=t=>a_(t,!0),rE=t=>Cm(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),L7=t=>Cm(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),I7=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:We.of(["",""])},range:U.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},B7=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:rn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:rn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:U.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Am(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function l_(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Am(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(U.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(U.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:U.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const z7=({state:t,dispatch:e})=>l_(t,e,!1),F7=({state:t,dispatch:e})=>l_(t,e,!0);function u_(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Am(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const j7=({state:t,dispatch:e})=>u_(t,e,!1),U7=({state:t,dispatch:e})=>u_(t,e,!0),V7=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Am(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=yd(e.selection,r=>t.moveVertically(r,!0)).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function H7(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Gi(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ze.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const sE=W7(!1);function W7(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&H7(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new N1(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=TO(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",pp(e,c)];return l&&d.push(pp(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:We.of(d)},range:U.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function c_(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:U.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const oE=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(c_(t,(n,i)=>{i.push({from:n.from,insert:t.facet(_1)})}),{userEvent:"input.indent"})),!0),aE=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(c_(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Yp(r,t.tabSize),o=0,a=pp(t,Math.max(0,s-sa(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function Je(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)d_(t,arguments[e]);return t}function d_(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)d_(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const lE=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Zc{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(lE(a)):lE,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return fn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Dw(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Mi(e);let r=this.normalize(n);for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:n+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(Zc.prototype[Symbol.iterator]=function(){return this});const h_={from:-1,to:-1,match:/.*/.exec("")},j1="gm"+(/x/.unicode==null?"":"u");class f_{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=h_,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new p_(e,n,i,r,s);this.re=new RegExp(n,j1+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=gp(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=gp(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const a0=new WeakMap;class cl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=a0.get(e);if(!r||r.from>=i||r.to<=n){let a=new cl(n,e.sliceString(n,i));return a0.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),a0.set(e,new cl(o,s)),new cl(n,s.slice(n-o,i-o))}}class p_{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=h_,this.matchPos=gp(e,r),this.re=new RegExp(n,j1+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=cl.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=gp(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=cl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(f_.prototype[Symbol.iterator]=p_.prototype[Symbol.iterator]=function(){return this});function G7(t){try{return new RegExp(t,j1),!0}catch{return!1}}function gp(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function Cv(t){let e=Je("input",{class:"cm-textfield",name:"line"}),n=Je("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:yp.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},Je("label",t.state.phrase("Go to line"),": ",e)," ",Je("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,a,l,u,c]=r,d=u?+u.slice(1):0,h=l?+l:o.number;if(l&&c){let m=h/100;a&&(m=m*(a=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*m)}else l&&a&&(h=h*(a=="-"?-1:1)+o.number);let f=s.doc.line(Math.max(1,Math.min(s.doc.lines,h))),p=U.cursor(f.from+Math.max(0,Math.min(d,f.length)));t.dispatch({effects:[yp.of(!1),fe.scrollIntoView(p.from,{y:"center"})],selection:p}),t.focus()}return{dom:n}}const yp=Me.define(),uE=an.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(yp)&&(t=n.value);return t},provide:t=>Tl.from(t,e=>e?Cv:null)}),X7=t=>{let e=kc(t,Cv);if(!e){let n=[yp.of(!0)];t.state.field(uE,!1)==null&&n.push(Me.appendConfig.of([uE,K7])),t.dispatch({effects:n}),e=kc(t,Cv)}return e&&e.dom.querySelector("input").focus(),!0},K7=fe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Z7=({state:t,dispatch:e})=>{let{selection:n}=t,i=U.create(n.ranges.map(r=>t.wordAt(r.head)||U.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Y7(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Zc(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Zc(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const J7=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Z7({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Y7(t,i);return r?(e(t.update({selection:t.selection.addRange(U.range(r.from,r.to),!1),effects:fe.scrollIntoView(r.to)})),!0):!1},Ql=le.define({combine(t){return ho(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new oU(e),scrollToMatch:e=>fe.scrollIntoView(e)})}});class m_{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||G7(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new tU(this):new Q7(this)}getCursor(e,n=0,i){let r=e.doc?e:Le.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Oa(this,r,n,i):Ta(this,r,n,i)}}class g_{constructor(e){this.spec=e}}function Ta(t,e,n,i){return new Zc(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?q7(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function q7(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(vp(r,n-s))!=Xt.Word||e(wp(r,n-s))!=Xt.Word)&&(e(wp(r,i-s))!=Xt.Word||e(vp(r,i-s))!=Xt.Word))}class Q7 extends g_{constructor(e){super(e)}nextMatch(e,n,i){let r=Ta(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=Ta(this.spec,e,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Ta(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Ta(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Ta(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Oa(t,e,n,i){return new f_(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?eU(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function vp(t,e){return t.slice(rn(t,e,!1),e)}function wp(t,e){return t.slice(e,rn(t,e))}function eU(t){return(e,n,i)=>!i[0].length||(t(vp(i.input,i.index))!=Xt.Word||t(wp(i.input,i.index))!=Xt.Word)&&(t(wp(i.input,i.index+i[0].length))!=Xt.Word||t(vp(i.input,i.index+i[0].length))!=Xt.Word)}class tU extends g_{nextMatch(e,n,i){let r=Oa(this.spec,e,i,e.doc.length).next();return r.done&&(r=Oa(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Oa(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n))}matchAll(e,n){let i=Oa(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Oa(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Yc=Me.define(),U1=Me.define(),Ks=an.define({create(t){return new l0(Av(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Yc)?t=new l0(n.value.create(),t.panel):n.is(U1)&&(t=new l0(t.query,n.value?V1:null));return t},provide:t=>Tl.from(t,e=>e.panel)});class l0{constructor(e,n){this.query=e,this.panel=n}}const nU=je.mark({class:"cm-searchMatch"}),iU=je.mark({class:"cm-searchMatch cm-searchMatch-selected"}),rU=Yt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Ks))}update(t){let e=t.state.field(Ks);(e!=t.startState.field(Ks)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return je.none;let{view:n}=this,i=new Jo;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?iU:nU)})}return i.finish()}},{decorations:t=>t.decorations});function vd(t){return e=>{let n=e.state.field(Ks,!1);return n&&n.query.spec.valid?t(e,n):b_(e)}}const cE=vd((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=U.single(i.from,i.to),s=t.state.facet(Ql);return t.dispatch({selection:r,effects:[H1(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),x_(t),!0}),dE=vd((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=U.single(r.from,r.to),o=t.state.facet(Ql);return t.dispatch({selection:s,effects:[H1(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),x_(t),!0}),y_=vd((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:U.create(n.map(i=>U.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),sU=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Zc(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(U.range(a.value.from,a.value.to))}return e(t.update({selection:U.create(s,o),userEvent:"select.search.matches"})),!0},hE=vd((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=[],a,l,u=[];if(s.from==i&&s.to==r&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),u.push(fe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=U.single(s.from-c,s.to-c),u.push(H1(t,s)),u.push(n.facet(Ql).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:u,userEvent:"input.replace"}),!0}),v_=vd((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:fe.announce.of(i),userEvent:"input.replace.all"}),!0});function V1(t){return t.state.facet(Ql).createPanel(t)}function Av(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(Ql);return new m_({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function w_(t){let e=kc(t,V1);return e&&e.dom.querySelector("[main-field]")}function x_(t){let e=w_(t);e&&e==t.root.activeElement&&e.select()}const b_=t=>{let e=t.state.field(Ks,!1);if(e&&e.panel){let n=w_(t);if(n&&n!=t.root.activeElement){let i=Av(t.state,e.query.spec);i.valid&&t.dispatch({effects:Yc.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[U1.of(!0),e?Yc.of(Av(t.state,e.query.spec)):Me.appendConfig.of(lU)]});return!0},S_=t=>{let e=t.state.field(Ks,!1);if(!e||!e.panel)return!1;let n=kc(t,V1);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:U1.of(!1)}),!0};class oU{constructor(e){this.view=e;let n=this.query=e.state.field(Ks).query.spec;this.commit=this.commit.bind(this),this.searchField=Je("input",{value:n.search,placeholder:zn(e,"Find"),"aria-label":zn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Je("input",{value:n.replace,placeholder:zn(e,"Replace"),"aria-label":zn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Je("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Je("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Je("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Je("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Je("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>cE(e),[zn(e,"next")]),i("prev",()=>dE(e),[zn(e,"previous")]),i("select",()=>y_(e),[zn(e,"all")]),Je("label",null,[this.caseField,zn(e,"match case")]),Je("label",null,[this.reField,zn(e,"regexp")]),Je("label",null,[this.wordField,zn(e,"by word")]),...e.state.readOnly?[]:[Je("br"),this.replaceField,i("replace",()=>hE(e),[zn(e,"replace")]),i("replaceAll",()=>v_(e),[zn(e,"replace all")])],Je("button",{name:"close",onclick:()=>S_(e),"aria-label":zn(e,"close"),type:"button"},["×"])])}commit(){let e=new m_({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Yc.of(e)}))}keydown(e){AI(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?dE:cE)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),hE(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Yc)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ql).top}}function zn(t,e){return t.state.phrase(e)}const mh=30,gh=/[\s\.,:;?!]/;function H1(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-mh),o=Math.min(r,n+mh),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<mh;l++)if(!gh.test(a[l+1])&&gh.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-mh;l--)if(!gh.test(a[l-1])&&gh.test(a[l])){a=a.slice(0,l);break}}return fe.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const aU=fe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),lU=[Ks,id.lowest(rU),aU];class uU{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=Gi(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(k_(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function fE(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function cU(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=fE(e)+fE(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function dU(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:cU(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class pE{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function dl(t){return t.selection.main.from}function k_(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const hU=cs.define();function fU(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i)?{range:a}:{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:e},range:U.cursor(a.from+s+e.length)})),{userEvent:"input.complete"})}const mE=new WeakMap;function pU(t){if(!Array.isArray(t))return t;let e=mE.get(t);return e||mE.set(t,e=dU(t)),e}const E_=Me.define(),W1=Me.define();class mU{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=fn(e,n),r=Mi(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(fn(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=fn(e,0),w=Mi(y),x=w==e.length?0:-100;if(y!=n[0])if(y==i[0])x+=-200;else return!1;return this.ret(x,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<l;){let x=fn(e,y);(x==n[u]||x==i[u])&&(r[u++]=y),y+=Mi(x)}if(u<l)return!1}let c=0,d=0,h=!1,f=0,p=-1,m=-1,v=/[a-z]/.test(e),g=!0;for(let y=0,w=Math.min(e.length,200),x=0;y<w&&d<l;){let S=fn(e,y);a<0&&(c<l&&S==n[c]&&(s[c++]=y),f<l&&(S==n[f]||S==i[f]?(f==0&&(p=y),m=y+1,f++):f=0));let A,P=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(A=Dw(S))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!y||P==1&&v||x==0&&P!=0)&&(n[d]==S||i[d]==S&&(h=!0)?o[d++]=y:o.length&&(g=!1)),x=P,y+=Mi(S)}return d==l&&o[0]==0&&g?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-200+-700-e.length,[p,m]):d==l?this.result(-100+(h?-200:0)+-700+(g?0:-1100),o,e):n.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Mi(fn(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}const Vr=le.define({combine(t){return ho(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:gU,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>gE(e(i),n(i)),optionClass:(e,n)=>i=>gE(e(i),n(i)),addToOptions:(e,n)=>e.concat(n)})}});function gE(t,e){return t?e?t+" "+e:t:e}function gU(t,e,n,i,r){let s=t.textDirection==ht.RTL,o=s,a=!1,l="top",u,c,d=e.left-r.left,h=r.right-e.right,f=i.right-i.left,p=i.bottom-i.top;if(o&&d<Math.min(f,h)?o=!1:!o&&h<Math.min(f,d)&&(o=!0),f<=(o?d:h))u=Math.max(r.top,Math.min(n.top,r.bottom-p))-e.top,c=Math.min(400,o?d:h);else{a=!0,c=Math.min(400,(s?e.right:r.right-e.left)-30);let m=r.bottom-e.bottom;m>=p||m>e.top?u=n.bottom-e.top:(l="bottom",u=e.bottom-n.top)}return{style:`${l}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":o?"left":"right")}}function yU(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r){let s=document.createElement("span");s.className="cm-completionLabel";let o=n.displayLabel||n.label,a=0;for(let l=0;l<r.length;){let u=r[l++],c=r[l++];u>a&&s.appendChild(document.createTextNode(o.slice(a,u)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(u,c))),d.className="cm-completionMatchedText",a=c}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function yE(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class vU{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(Vr);this.optionContent=yU(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=yE(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let u=l.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<s.length){this.applyCompletion(e,s[+c[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Vr).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:W1.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,i,r;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=s.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=yE(n.options.length,n.selected,this.view.state.facet(Vr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>zi(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&xU(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Vr).positionInfo(this.view,n,r,i,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,l);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function wU(t,e){return n=>new vU(n,t,e)}function xU(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<n.top?t.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(t.scrollTop+=i.bottom-n.bottom)}function vE(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function bU(t,e){let n=[],i=null,r=l=>{n.push(l);let{section:u}=l.completion;if(u){i||(i=[]);let c=typeof u=="string"?u:u.name;i.some(d=>d.name==c)||i.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult()){let u=l.result.getMatch;if(l.result.filter===!1)for(let c of l.result.options)r(new pE(c,l.source,u?u(c):[],1e9-n.length));else{let c=new mU(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(c.match(d.label)){let h=d.displayLabel?u?u(d,c.matched):[]:c.matched;r(new pE(d,l.source,h,c.score+(d.boost||0)))}}}if(i){let l=Object.create(null),u=0,c=(d,h)=>{var f,p;return((f=d.rank)!==null&&f!==void 0?f:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(d.name<h.name?-1:1)};for(let d of i.sort(c))u-=1e5,l[d.name]=u;for(let d of n){let{section:h}=d.completion;h&&(d.score+=l[typeof h=="string"?h:h.name])}}let s=[],o=null,a=e.facet(Vr).compareCompletions;for(let l of n.sort((u,c)=>c.score-u.score||a(u.completion,c.completion))){let u=l.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?s.push(l):vE(l.completion)>vE(o)&&(s[s.length-1]=l),o=l.completion}return s}class Xa{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Xa(this.options,wE(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s){let o=bU(e,n);if(!o.length)return r&&e.some(l=>l.state==1)?new Xa(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let a=n.facet(Vr).selectOnOpen?0:-1;if(r&&r.selected!=a&&r.selected!=-1){let l=r.options[r.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){a=u;break}}return new Xa(o,wE(i,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:wU(eu,A_),above:s.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new Xa(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class xp{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new xp(EU,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Vr),s=(i.override||n.languageDataAt("autocomplete",dl(n)).map(pU)).map(a=>(this.active.find(u=>u.source==a)||new Kn(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!SU(s,this.active)?o=Xa.build(s,n,this.id,o,i):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Kn(a.source,0):a));for(let a of e.effects)a.is(C_)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new xp(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:kU}}function SU(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const kU={"aria-autocomplete":"list"};function wE(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const EU=[];function CU(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Kn{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=CU(e),r=this;i?r=r.handleUserEvent(e,i,n):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new Kn(r.source,0));for(let s of e.effects)if(s.is(E_))r=new Kn(r.source,1,s.value?dl(e.state):-1);else if(s.is(W1))r=new Kn(r.source,0);else if(s.is(PU))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new Kn(this.source,1)}handleChange(e){return e.changes.touchesRange(dl(e.startState))?new Kn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Kn(this.source,this.state,e.mapPos(this.explicitPos))}}class qu extends Kn{constructor(e,n,i,r,s){super(e,2,n),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,n,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=dl(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&dl(e.startState)==this.from)return new Kn(this.source,n=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return AU(this.result.validFor,e.state,s,o)?new qu(this.source,l,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new uU(e.state,a,l>=0)))?new qu(this.source,l,u,u.from,(r=u.to)!==null&&r!==void 0?r:dl(e.state)):new Kn(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Kn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new qu(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function AU(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):k_(t,!0).test(r)}const PU=Me.define({map(t,e){return t.map(n=>n.map(e))}}),C_=Me.define(),eu=an.define({create(){return xp.start()},update(t,e){return t.update(e)},provide:t=>[Hw.from(t,e=>e.tooltip),fe.contentAttributes.from(t,e=>e.attrs)]});function A_(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(eu).active.find(r=>r.source==e.source);return i instanceof qu?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},fU(t.state,n,i.from,i.to)),{annotations:hU.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}function yh(t,e="option"){return n=>{let i=n.state.field(eu,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Vr).interactionDelay)return!1;let r=1,s;e=="page"&&(s=s5(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:C_.of(a)}),!0}}const xE=t=>{let e=t.state.field(eu,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Vr).interactionDelay?!1:A_(t,e.open.options[e.open.selected])},RU=t=>t.state.field(eu,!1)?(t.dispatch({effects:E_.of(!0)}),!0):!1,TU=t=>{let e=t.state.field(eu,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:W1.of(null)}),!0)},P_={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},R_=new class extends Yo{};R_.startSide=1;R_.endSide=-1;const u0="()[]{}<>";function OU(t){for(let e=0;e<u0.length;e+=2)if(u0.charCodeAt(e)==t)return u0.charAt(e+1);return Dw(t<128?t:t+1)}function _U(t,e){return t.languageDataAt("closeBrackets",e)[0]||P_}const NU=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=_U(t,t.selection.main.head).brackets||P_.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=DU(t.doc,o.head);for(let l of i)if(l==a&&MU(t.doc,o.head)==OU(fn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:U.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function MU(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Mi(fn(n,0)))}function DU(t,e){let n=t.sliceString(e-2,e);return Mi(fn(n,0))==n.length?n:n.slice(1)}class $U{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Po{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet($o).markerFilter;s&&(r=s(r));let o=je.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?je.widget({widget:new GU(a),diagnostic:a}).range(a.from):je.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new Po(o,n,Ul(o))}}function Ul(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new $U(r,s,o.diagnostic),!1}),i}function LU(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(i=>i.is(G1))||t.changes.touchesRange(n.from,n.to))}function T_(t,e){return t.field(Nn,!1)?e:e.concat(Me.appendConfig.of(M_))}function IU(t,e){return{effects:T_(t,[G1.of(e)])}}const G1=Me.define(),X1=Me.define(),O_=Me.define(),Nn=an.define({create(){return new Po(je.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=Ul(n,t.selected.diagnostic,r)||Ul(n,null,r)}t=new Po(n,t.panel,i)}for(let n of e.effects)n.is(G1)?t=Po.init(n.value,t.panel,e.state):n.is(X1)?t=new Po(t.diagnostics,n.value?Pm.open:null,t.selected):n.is(O_)&&(t=new Po(t.diagnostics,t.panel,n.value));return t},provide:t=>[Tl.from(t,e=>e.panel),fe.decorations.from(t,e=>e.diagnostics)]});function BU(t){let e=t.field(Nn,!1);return e?e.diagnostics.size:0}const zU=je.mark({class:"cm-lintRange cm-lintRange-active"});function FU(t,e,n){let{diagnostics:i}=t.state.field(Nn),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet($o).tooltipFilter;return a&&(r=a(r)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:jU(t,r)}}}:null}function jU(t,e){return Je("ul",{class:"cm-tooltip-lint"},e.map(n=>N_(t,n,!1)))}const UU=t=>{let e=t.state.field(Nn,!1);(!e||!e.panel)&&t.dispatch({effects:T_(t.state,[X1.of(!0)])});let n=kc(t,Pm.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},bE=t=>{let e=t.state.field(Nn,!1);return!e||!e.panel?!1:(t.dispatch({effects:X1.of(!1)}),!0)},VU=t=>{let e=t.state.field(Nn,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},HU=Yt.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet($o);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet($o);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(IU(this.view.state,r))},i=>{zi(this.view.state,i)})}}update(t){let e=t.state.facet($o);(t.docChanged||e!=t.startState.facet($o)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),$o=le.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},ho(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function WU(t,e={}){return[$o.of({source:t,config:e}),HU,M_]}function __(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function N_(t,e,n){var i;let r=n?__(e.actions):[];return Je("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Je("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=Ul(t.state.field(Nn).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),Je("u",u.slice(c,c+1)),u.slice(c+1)];return Je("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Je("div",{class:"cm-diagnosticSource"},e.source))}class GU extends ca{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Je("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class SE{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=N_(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Pm{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)bE(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=__(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=Ul(this.view.state.field(Nn).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Je("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Je("div",{class:"cm-panel-lint"},this.list,Je("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>bE(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Nn).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Nn),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new SE(this.view,l.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new SE(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Nn),i=Ul(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:O_.of(i)})}static open(e){return new Pm(e)}}function XU(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function vh(t){return XU(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const KU=fe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:vh("#d11")},".cm-lintRange-warning":{backgroundImage:vh("orange")},".cm-lintRange-info":{backgroundImage:vh("#999")},".cm-lintRange-hint":{backgroundImage:vh("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),M_=[Nn,fe.decorations.compute([Nn],t=>{let{selected:e,panel:n}=t.field(Nn);return!e||!n||e.from==e.to?je.none:je.set([zU.range(e.from,e.to)])}),r5(FU,{hideOn:LU}),KU],D_=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},ZU=D_("up"),YU=D_("down"),JU=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(U.range(s,s)):e=U.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},qU=[{key:"Ctrl-Space",run:RU},{key:"Escape",run:TU},{key:"ArrowDown",run:yh(!0)},{key:"ArrowUp",run:yh(!1)},{key:"PageDown",run:yh(!0,"page")},{key:"PageUp",run:yh(!1,"page")},{key:"Enter",run:xE},{key:"Tab",run:xE},{key:"Mod-f",run:b_,scope:"editor search-panel"},{key:"Escape",run:S_,scope:"editor search-panel"},{key:"Alt-Enter",run:y_,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:v_,scope:"editor search-panel"},{key:"Ctrl-g",run:X7},{key:"Mod-d",run:J7,preventDefault:!0},{key:"Shift-Mod-l",run:sU},{key:"Enter",run:sE,shift:sE},{key:"ArrowLeft",run:Bk,shift:Hk,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:k7,shift:T7},{key:"ArrowRight",run:zk,shift:Wk,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:E7,shift:O7},{key:"ArrowUp",run:Fk,shift:Gk,preventDefault:!0},{key:"ArrowDown",run:jk,shift:Xk,preventDefault:!0},{key:"Home",run:Vk,shift:Jk},{mac:"Cmd-ArrowLeft",run:Vk,shift:Jk},{key:"Mod-Home",run:qk,shift:eE},{mac:"Cmd-ArrowUp",run:qk,shift:eE},{key:"PageUp",run:r0,shift:Kk},{mac:"Ctrl-ArrowUp",run:r0,shift:Kk},{key:"PageDown",run:s0,shift:Zk},{mac:"Ctrl-ArrowDown",run:s0,shift:Zk},{key:"End",run:Uk,shift:Yk},{mac:"Cmd-ArrowRight",run:Uk,shift:Yk},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:ZU,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:YU,preventDefault:!0},{key:"Shift-Alt-i",run:JU},{key:"Mod-End",run:Qk,shift:tE},{mac:"Cmd-ArrowDown",run:Qk,shift:tE},{key:"Mod-a",run:M7},{key:"Backspace",run:NU},{key:"Backspace",run:o0,shift:o0},{key:"Delete",run:nE},{key:"Mod-Backspace",mac:"Alt-Backspace",run:iE},{key:"Mod-Delete",mac:"Alt-Delete",run:$7},{mac:"Mod-Backspace",run:L7},{mac:"Mod-Delete",run:rE},{mac:"Ctrl-b",run:Bk,shift:Hk,preventDefault:!0},{mac:"Ctrl-f",run:zk,shift:Wk},{mac:"Ctrl-p",run:Fk,shift:Gk},{mac:"Ctrl-n",run:jk,shift:Xk},{mac:"Ctrl-a",run:C7,shift:_7},{mac:"Ctrl-e",run:A7,shift:N7},{mac:"Ctrl-d",run:nE},{mac:"Ctrl-h",run:o0},{mac:"Ctrl-k",run:rE},{mac:"Ctrl-Alt-h",run:iE},{mac:"Ctrl-o",run:I7},{mac:"Ctrl-t",run:B7},{mac:"Ctrl-v",run:s0},{mac:"Alt-v",run:r0},{key:"Shift-Mod-k",run:V7},{key:"Alt-ArrowDown",run:F7},{key:"Alt-ArrowUp",run:z7},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:U7},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:j7},{key:"Mod-l",run:D7,preventDefault:!0},{key:"Shift-Mod-\\",run:R7},{key:"Tab",run:oE,shift:aE,preventDefault:!0},{key:"Mod-[",run:aE},{key:"Mod-]",run:oE},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Lj},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Ij},{key:"Mod-k Mod-0",run:Bj},{key:"Mod-k Mod-j",run:zj},{key:"Mod-k Mod-c",run:o7},{key:"Mod-k Mod-u",run:a7},{key:"Mod-/",run:r7},{key:"Shift-Alt-a",run:l7},{key:"Mod-z",run:KO,preventDefault:!0},{key:"Mod-y",run:Ev,preventDefault:!0},{key:"Mod-Shift-z",run:Ev,preventDefault:!0},{key:"Mod-u",run:g7,preventDefault:!0},{key:"Mod-Shift-m",run:UU},{key:"F8",run:VU}];function QU(t){const e=document.createElement("div");return kE(t.state,e),{dom:e,update(n){kE(n.view.state,e)}}}function kE(t,e){const n=BU(t);e.textContent=Qp(rs().language,"editor.lintSummary",n),e.className=it("border-t border-stone-600 bg-stone-800 pr-3 text-right font-sans text-xs tracking-wider",n===0?"text-stone-400":"font-semibold text-red-400")}const $_="vonsim-program",eV=Yt.fromClass(class{constructor(t){Z(this,"timeout",null);this.view=t}update(t){t.docChanged&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=this.view.state.doc.toString();localStorage.setItem($_,e),this.timeout=null},500))}}),tV=`; ¡Bienvenido a VonSim!
; Este es un ejemplo de código que calcula los primeros
; n números de la sucesión de Fibonacci, y se guardan a
; partir de la posición 1000h de la memoria.

     n EQU 10    ; Calcula los primeros 10 números

       ORG 1000h
inicio DB 1

       ORG 2000h
       MOV BX, OFFSET inicio + 1
       MOV AL, 0
       MOV AH, inicio

BUCLE: CMP BX, OFFSET inicio + n
       JNS FIN
       MOV CL, AH
       ADD CL, AL
       MOV AL, AH
       MOV AH, CL
       MOV [BX], CL
       INC BX
       JMP BUCLE
  FIN: HLT
       END
`,nV=localStorage.getItem($_)||tV,Fn={comment:Ce.comment,"data-directive":jt.define(),identifier:Ce.variableName,instruction:jt.define(),label:Ce.labelName,number:Ce.number,operator:Ce.operator,offset:jt.define(),"ptr-size":jt.define(),punctuation:Ce.punctuation,register:jt.define(),special:jt.define(),string:Ce.string,unassigned:jt.define()},iV=$1.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":_w.includes(e)?"data-directive":Nw.includes(e)?"instruction":Of.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Fn}),rV=Vj(Sm.define([{tag:Fn.comment,class:"text-stone-400 italic"},{tag:Fn["data-directive"],class:"text-rose-400"},{tag:Fn.instruction,class:"text-mantis-400"},{tag:Fn.number,class:"text-amber-500 font-semibold"},{tag:Fn.operator,class:"text-rose-400"},{tag:Fn.offset,class:"text-rose-400 italic"},{tag:Fn["ptr-size"],class:"text-rose-400 italic"},{tag:Fn.punctuation,class:"text-stone-500"},{tag:Fn.register,class:"text-amber-500 italic"},{tag:Fn.special,class:"text-sky-300 italic"},{tag:Fn.string,class:"text-emerald-300"},{tag:Fn.unassigned,class:"text-rose-400"}])),sV=WU(t=>{const e=t.state.doc.toString(),n=SA(e);if(n.success)return[];const i=rs().language;return n.errors.map(r=>{var a,l;const s=((a=r.position)==null?void 0:a.start)??0,o=((l=r.position)==null?void 0:l.end)??e.length;return{message:r.translate(i),severity:"error",from:s,to:o}})},{delay:200});function oV(){return new xj(iV,[rV,sV])}function aV({className:t}){const[e,n]=b.useState(),i=b.useCallback(r=>{r&&n(r)},[]);return b.useEffect(()=>{if(e)return window.codemirror=new fe({state:Le.create({doc:nV,extensions:[Le.tabSize.of(2),YP.of(Le.readOnly.of(!1)),eV,f5(),y5,g5(),VI(),m7(),NI(),II(),Le.allowMultipleSelections.of(!0),Oj(),ZI(),IP.of([...qU,{key:"Escape",run:r=>(r.dispatch({selection:U.create([r.state.selection.main],0)}),!0)}]),oV(),Tl.of(QU)]}),parent:e}),()=>{var r;return(r=window.codemirror)==null?void 0:r.destroy()}},[e]),vA(r=>r.ctrlKey&&r.key==="s",r=>{if(r.preventDefault(),!window.codemirror)return;const s=new Blob([window.codemirror.state.doc.toString()],{type:"text/plain"}),o=URL.createObjectURL(s),a=document.createElement("a");a.style.display="none",a.href=o,a.download=`vonsim-${new Date().toISOString().slice(0,16)}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}),C.jsx("div",{ref:i,className:it("overflow-auto font-mono",t)})}var yi=function(t,e){return Number(t.toFixed(e))},lV=function(t,e){return typeof t=="number"?t:e},ot=function(t,e,n){n&&typeof n=="function"&&n(t,e)},uV=function(t){return-Math.cos(t*Math.PI)/2+.5},cV=function(t){return t},dV=function(t){return t*t},hV=function(t){return t*(2-t)},fV=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},pV=function(t){return t*t*t},mV=function(t){return--t*t*t+1},gV=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},yV=function(t){return t*t*t*t},vV=function(t){return 1- --t*t*t*t},wV=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},xV=function(t){return t*t*t*t*t},bV=function(t){return 1+--t*t*t*t*t},SV=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},L_={easeOut:uV,linear:cV,easeInQuad:dV,easeOutQuad:hV,easeInOutQuad:fV,easeInCubic:pV,easeOutCubic:mV,easeInOutCubic:gV,easeInQuart:yV,easeOutQuart:vV,easeInOutQuart:wV,easeInQuint:xV,easeOutQuint:bV,easeInOutQuint:SV},I_=function(t){typeof t=="number"&&cancelAnimationFrame(t)},ur=function(t){t.mounted&&(I_(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function B_(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;ur(t),t.animation=function(){if(!t.mounted)return I_(t.animation);var o=new Date().getTime()-r,a=o/n,l=L_[e],u=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function kV(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function go(t,e,n,i){var r=kV(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):B_(t,i,n,function(f){var p=a+c*f,m=l+d*f,v=u+h*f;s(p,m,v)})}}function EV(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=i-a,c=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var CV=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,u=t-e-a,c=a,d=i-r-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},K1=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=EV(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=CV(o,l,u,a,c,d,!!r);return h},Pv=function(t,e,n,i){return i?t<e?yi(e,2):t>n?yi(n,2):yi(t,2):yi(t,2)},Vl=function(t,e){var n=K1(t,e);return t.bounds=n,n};function Rm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=Pv(t,a-d,u+d,i),p=Pv(e,l-h,c+h,i);return{x:f,y:p}}function Tm(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=Rm(d,h,r,s,0,0,null);return f}function wd(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var EE=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o=r==null?void 0:r.contains(s),a=i&&s&&o;if(!a)return!1;var l=Om(s,n);return!l},CE=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},AV=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},PV=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function RV(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,m=n>d||n<h,v=i>f||i<p,g=n>d?u.offsetWidth:t.setup.minPositionX||0,y=i>f?u.offsetHeight:t.setup.minPositionY||0,w=Tm(t,g,y,r,t.bounds,a||l),x=w.x,S=w.y;return{scale:r,positionX:m?x:n,positionY:v?S:i}}}function TV(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=Rm(e,n,a,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var OV=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,u=r.positionY;if(!i)return{x:l,y:u};var c=e-i.x,d=n-i.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},bp=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},_V=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},NV=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!i)};function MV(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function AE(t,e,n,i,r,s,o,a,l,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return i?e:Pv(t,s,o,r)}function DV(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function $V(t,e){var n=_V(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var u=DV(o,a),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=l-r,m=c*c+d*d,v=Math.sqrt(m)/p;t.velocity={velocityX:h,velocityY:f,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function LV(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=NV(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,m=i.zoomAnimation,v=i.panning,g=v.lockAxisY,y=v.lockAxisX,w=m.animationType,x=p.sizeX,S=p.sizeY,A=p.velocityAlignmentTime,P=A,E=MV(t,l),R=Math.max(E,P),N=bp(t,x),T=bp(t,S),B=N*r.offsetWidth/100,I=T*r.offsetHeight/100,_=u+B,D=c-B,z=d+I,L=h-I,O=t.transformState,$=new Date().getTime();B_(t,w,R,function(F){var Y=t.transformState,ie=Y.scale,ce=Y.positionX,we=Y.positionY,Se=new Date().getTime()-$,xe=Se/P,Q=L_[p.animationType],ye=1-Q(Math.min(1,xe)),Ne=1-F,Ee=ce+o*Ne,ke=we+a*Ne,be=AE(Ee,O.positionX,ce,y,f,c,u,D,_,ye),se=AE(ke,O.positionY,we,g,f,h,d,L,z,ye);(ce!==Ee||we!==ke)&&t.setTransformState(ie,be,se)})}}function PE(t,e){var n=t.transformState.scale;ur(t),Vl(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?PV(t,e):AV(t,e)}function z_(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,a=r.sizeY,l=r.animationTime,u=r.animationType,c=s||e<i||!o&&!a;if(!c){var d=RV(t);d&&go(t,d,l,u)}}function RE(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=OV(t,e,n),u=l.x,c=l.y,d=bp(t,o),h=bp(t,a);$V(t,{x:u,y:c}),TV(t,u,c,d,h)}}function IV(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?LV(t):z_(t)}}function Z1(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=wd(yi(e,2),s,o,0,!1),u=Vl(t,l),c=Tm(t,n,i,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function F_(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||i>=o;if((i>=1||a)&&z_(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,m=Z1(t,o,f,p);m&&go(t,m,c,d)}}var Zs=function(){return Zs=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zs.apply(this,arguments)};function TE(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var wh={previousScale:1,scale:1,positionX:0,positionY:0},bu={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},j_=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:wh.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:wh.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:wh.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:wh.positionY}},OE=function(t){var e=Zs({},bu);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof bu[n]<"u";if(r&&i){var s=Object.prototype.toString.call(bu[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=Zs(Zs({},bu[n]),t[n]):a?e[n]=TE(TE([],bu[n],!0),t[n],!0):e[n]=t[n]}}),e},U_=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=wd(yi(d,3),a,o,c,!1);return h};function V_(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=U_(t,e,n),m=Z1(t,p,h,f);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");go(t,m,i,r)}function H_(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=j_(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=K1(t,a.scale),f=Rm(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(i==null||i(),go(t,p,e,n))}}function BV(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function zV(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=BV(e,i,r,s),f=h.x,p=h.y,m=d.width/s.scale,v=d.height/s.scale,g=i.offsetWidth/m,y=i.offsetHeight/v,w=wd(n||Math.min(g,y),l,u,0,!1),x=(c.width-m*w)/2,S=(c.height-v*w)/2,A=(c.left-f)*w+x,P=(c.top-p)*w+S,E=K1(t,w),R=Rm(A,P,E,a,0,0,i),N=R.x,T=R.y;return{positionX:N,positionY:T,scale:w}}var FV=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),V_(t,1,e,n,i)}},jV=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),V_(t,-1,e,n,i)}},UV=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?u:i};go(t,f,r,s)}}},VV=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),H_(t,e,n)}},HV=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=W_(e||r.scale,s,o);go(t,a,n,i)}}},WV=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),ur(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=zV(t,o,n);go(t,a,i,r)}}},Rv=function(t){return{instance:t,zoomIn:FV(t),zoomOut:jV(t),setTransform:UV(t),resetTransform:VV(t),centerView:HV(t),zoomToElement:WV(t)}},GV=function(t){return{instance:t,state:t.transformState}},Ze=function(t){var e={};return Object.assign(e,GV(t)),Object.assign(e,Rv(t)),e},c0=!1;function d0(){try{var t={get passive(){return c0=!0,!1}};return t}catch{return c0=!1,c0}}var Om=function(t,e){var n=t.tagName.toUpperCase(),i=e.find(function(s){return s.toUpperCase()===n});if(i)return!0;var r=e.find(function(s){return t.classList.contains(s)});return!!r},Tv=function(t){t&&clearTimeout(t)},XV=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},W_=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function KV(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ZV=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Om(u,o);return!d},YV=function(t){return t?t.deltaY<0?1:-1:0};function JV(t,e){var n=YV(t),i=lV(e,n);return i}function G_(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var qV=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(r)return p;var m=i?!1:!f,v=wd(yi(p,3),u,l,h,m&&!d);return v},QV=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},eH=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Om(o,r);return!l},tH=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},nH=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=yi(r[0].clientX-i.left,5),o=yi(r[0].clientY-i.top,5),a=yi(r[1].clientX-i.left,5),l=yi(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},X_=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},iH=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,u=a.size,c=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return wd(yi(h,2),o,s,u,!c&&!l)},rH=160,sH=100,oH=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(ur(t),ot(Ze(t),e,i),ot(Ze(t),e,r))},aH=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,m=d.size,v=d.disabled,g=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=JV(e,null),x=p?y*Math.abs(e.deltaY):g,S=qV(t,w,x,!e.ctrlKey);if(l!==S){var A=Vl(t,S),P=G_(e,s,l),E=v||m===0||c||f,R=u&&E,N=Tm(t,P.x,P.y,S,A,R),T=N.x,B=N.y;t.previousWheelEvent=e,t.setTransformState(S,T,B),ot(Ze(t),e,i),ot(Ze(t),e,r)}},lH=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;Tv(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(F_(t,e.x,e.y),t.wheelAnimationTimer=null)},sH);var s=QV(t,e);s&&(Tv(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,ot(Ze(t),e,i),ot(Ze(t),e,r))},rH))},uH=function(t,e){var n=X_(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,ur(t)},cH=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,u=l.disabled,c=l.size;if(!(i===null||!n)){var d=nH(e,r,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var h=X_(e),f=iH(t,h);if(f!==r){var p=Vl(t,f),m=u||c===0||a,v=o&&m,g=Tm(t,d.x,d.y,f,p,v),y=g.x,w=g.y;t.pinchMidpoint=d,t.lastDistance=h,t.setTransformState(f,y,w)}}}},dH=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,F_(t,e==null?void 0:e.x,e==null?void 0:e.y)},K_=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;Tv(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,ot(Ze(t),e,n)},i)},hH=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;ot(Ze(t),e,i),H_(t,o,a,function(){return ot(Ze(t),e,r)}),K_(t,e)};function fH(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,m=c.animationType;if(!d&&!i){if(h==="reset")return hH(t,e);if(!s)return console.error("No ContentComponent found");var v=h==="zoomOut"?-1:1,g=U_(t,v,f);if(o!==g){ot(Ze(t),e,l);var y=G_(e,s,o),w=Z1(t,g,y.x,y.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");ot(Ze(t),e,u),go(t,w,p,m),K_(t,e)}}}var pH=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=r==null?void 0:r.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=Om(l,a);return!d},mH=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){Vl(n,n.transformState.scale),n.setup=OE(i)},this.initializeWindowEvents=function(){var i,r=d0(),s=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,r),o==null||o.addEventListener("mousemove",n.onPanning,r),o==null||o.addEventListener("mouseup",n.onPanningStop,r),s==null||s.addEventListener("mouseleave",n.clearPanning,r),o==null||o.addEventListener("keyup",n.setKeyUnPressed,r),o==null||o.addEventListener("keydown",n.setKeyPressed,r)},this.cleanupWindowEvents=function(){var i,r,s=d0(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),ur(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=d0();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(Ze(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(Ze(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=ZV(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(oH(n,i),aH(n,i),lH(n,i))}}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=EE(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),ur(n),PE(n,i),ot(Ze(n),i,s))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=CE(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),RE(n,i.clientX,i.clientY),ot(Ze(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(IV(n),ot(Ze(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=eH(n,i);l&&(uH(n,i),ur(n),ot(Ze(n),i,o),ot(Ze(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=tH(n);l&&(i.preventDefault(),i.stopPropagation(),cH(n,i),ot(Ze(n),i,o),ot(Ze(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(dH(n),ot(Ze(n),i,s),ot(Ze(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=EE(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&i.touches.length===1)n.onDoubleClick(i);else{n.lastTouch=+new Date,ur(n);var l=i.touches,u=l.length===1,c=l.length===2;u&&(ur(n),PE(n,i),ot(Ze(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=CE(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];RE(n,a.clientX,a.clientY),ot(Ze(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=pH(n,i);s&&fH(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=Ze(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),ot(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=W_(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):XV(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return Ze(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Vl(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=Ze(n);ot(s,void 0,n.props.onInit)},this.props=e,this.setup=OE(this.props),this.transformState=j_(this.props)}return t}(),Y1=q.createContext(null),gH=function(t,e){return typeof t=="function"?t(e):t},yH=q.forwardRef(function(t,e){var n=b.useRef(new mH(t)).current,i=gH(t.children,Rv(n));return b.useImperativeHandle(e,function(){return Rv(n)},[n]),b.useEffect(function(){n.update(t)},[n,t]),q.createElement(Y1.Provider,{value:n},i)});q.forwardRef(function(t,e){var n=b.useRef(null),i=b.useContext(Y1);return b.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),q.createElement("div",Zs({},t,{ref:KV([n,e])}))});function vH(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var wH=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,_E={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};vH(wH);var xH=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=b.useContext(Y1).init,f=b.useRef(null),p=b.useRef(null);return b.useEffect(function(){var m=f.current,v=p.current;m!==null&&v!==null&&h&&h(m,v)},[]),q.createElement("div",Zs({},u,{ref:f,className:"react-transform-wrapper ".concat(_E.wrapper," ").concat(i),style:o}),q.createElement("div",Zs({},d,{ref:p,className:"react-transform-component ".concat(_E.content," ").concat(s),style:a}),e))};function bH({className:t}){return C.jsx("div",{className:it("absolute z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",t),children:C.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg font-bold text-white",children:"Chip select"})})}function SH({className:t}){const e=Wt({ref:Ve.bus.rd,from:{stroke:wt.stone[700]}}),n=Wt({ref:Ve.bus.wr,from:{stroke:wt.stone[700]}}),i=Wt({ref:Ve.bus.mem,from:{stroke:wt.red[500]}}),r=["M 380 420 H 820 V 400","M 820 420 V 805","M 450 805 H 999","M 583 805 V 875"].join(" "),s=["M 380 440 H 840 V 400","M 840 440 V 815","M 450 815 H 999","M 573 815 V 875"].join(" "),o="M 750 545 H 860 V 400";return C.jsxs("svg",{viewBox:"0 0 1500 1100",className:it("pointer-events-none absolute z-[15] h-[1100px] w-[1500px]",t),children:[C.jsx(ps,{x:384,y:415,children:"rd"}),C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),C.jsx(At.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:e}),C.jsx(ps,{x:384,y:435,children:"wr"}),C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:s}),C.jsx(At.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:s,style:n}),C.jsx(ps,{x:384,y:455,children:"io/m"}),C.jsx(wo,{springRef:Ve.bus.iom,d:"M 380 460 H 675 V 525"}),C.jsx(ps,{x:715,y:550,children:"mem"}),C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),C.jsx(At.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:o,style:i}),C.jsx(ps,{x:510,y:585,children:"pic"}),C.jsx(wo,{springRef:Ve.bus.pic,d:"M 521 595 V 730 H 450"}),C.jsx(ps,{x:545,y:585,children:"timer"}),C.jsx(wo,{springRef:Ve.bus.pic,d:"M 563 595 V 875"}),C.jsx(ps,{x:75,y:490,children:"intr"}),C.jsx(wo,{springRef:Ve.bus.intr,d:"M 110 700 V 470"}),C.jsx(ps,{x:125,y:490,children:"inta"}),C.jsx(wo,{springRef:Ve.bus.inta,d:"M 160 470 V 700"}),C.jsx(wo,{springRef:Ve.bus.int0,d:"M 145 950 V 900"}),C.jsx(wo,{springRef:Ve.bus.int1,d:"M 500 955 H 400 V 900"})]})}function ps({x:t,y:e,children:n}){return C.jsx("text",{className:"fill-stone-400 font-mono text-xs font-bold tracking-wider",x:t,y:e,children:n})}function wo({d:t,springRef:e}){const n=Wt({ref:e,from:{strokeDashoffset:1,opacity:1}});return C.jsxs(C.Fragment,{children:[C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),C.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),C.jsx(At.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:n})]})}function kH({className:t}){const e=Wt({ref:Ve.bus.address,from:{stroke:wt.stone[700]}}),n=Wt({ref:Ve.bus.data,from:{stroke:wt.stone[700]}}),i=["M 699 349 H 800","M 725 349 V 770","M 450 770 H 999","M 618 770 V 875"].join(" "),r=["M 687 249 H 800","M 770 249 V 790","M 450 790 H 999","M 598 790 V 875"].join(" ");return C.jsxs("svg",{viewBox:"0 0 1500 1100",className:it("pointer-events-none absolute z-[5] h-[1100px] w-[1500px]",t),children:[C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:r}),C.jsx(At.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:r,style:n}),C.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:i}),C.jsx(At.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:i,style:e})]})}function EH({className:t}){return C.jsxs("div",{className:it("absolute",t),children:[C.jsx(kH,{className:"inset-0"}),C.jsx(SH,{className:"inset-0"}),C.jsx(bH,{className:"left-[500px] top-[525px]"})]})}function CH({className:t}){const{angle:e}=Wt({ref:Ve.clock,from:{angle:0}});return C.jsx("div",{className:it("absolute z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",t),children:C.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[C.jsx("circle",{cx:"12",cy:"12",r:"10"}),C.jsx(At.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}function Lo({name:t,valueAtom:e,emphasis:n=!1,className:i,springRef:r}){const s=gr(e),o=s.low,a=s.is16bits()?s.high:null,l=Wt({ref:r,from:{backgroundColor:wt.stone[800],opacity:1}});return C.jsxs(At.div,{className:it("flex w-min items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",n?"border-mantis-400 text-lg":"border-stone-600 text-base",i),style:l,children:[C.jsx("span",{className:"mr-2 font-bold",children:t}),a&&C.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:a.toString("hex")}),C.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:o.toString("hex")})]})}function AH(){const t=gr(tt.FLAGS),e=gr(cR),n=t.bit(0),i=t.bit(6),r=t.bit(7),s=t.bit(9),o=t.bit(11),a=Wt({ref:Ve.cpu.FLAGS,from:{backgroundColor:wt.stone[800],opacity:1}}),l=Wt({ref:Ve.cpu.alu.operands,from:{strokeDashoffset:1,opacity:1}}),u=Wt({ref:Ve.cpu.alu.operation,from:{backgroundColor:wt.stone[800]}}),c=Wt({ref:Ve.cpu.alu.cog,from:{rot:0}}),d=Wt({ref:Ve.cpu.alu.results,from:{strokeDashoffset:1,opacity:1}});return C.jsxs(C.Fragment,{children:[C.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[C.jsx(At.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 173 85 H 220",pathLength:1,strokeDasharray:1,style:l}),C.jsx(At.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 182 145 H 220",pathLength:1,strokeDasharray:1,style:l}),C.jsx(At.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:d}),C.jsx(At.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:d}),C.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),C.jsx(At.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:c.rot.to(h=>`rotate(${h*60}deg)`)}}),C.jsx(At.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:u,children:e}),C.jsxs(At.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:a,children:[C.jsx("span",{className:it("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),C.jsx("span",{className:it("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"ZF"}),C.jsx("span",{className:it("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"SF"}),C.jsx("span",{className:it("rounded p-1 font-light",s?"bg-mantis-400":"bg-stone-900"),children:"IF"}),C.jsx("span",{className:it("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"OF"})]})]})}function PH(){const t=gr(Ao),e=b.useMemo(()=>{if(!("metadata"in t)||t.metadata.operands.length===0)return"";if(t.phase==="fetching-operands"){let o=" __";for(let a=1;a<t.metadata.operands.length;a++)o+=", __";return o}else return" "+t.metadata.operands.join(", ")},[t]),{executionUnit:n}=u6(),i=BB(t.phase,{from:{transform:"translateY(-100%)"},enter:{transform:"translateY(0%)"},leave:{transform:"translateY(100%)"},config:{duration:5*n,easing:r1.easeOutElastic}}),r=Wt({ref:Ve.cpu.decoder.path,from:{strokeDashoffset:1,opacity:1}}),s=Wt({ref:Ve.cpu.decoder.progress,from:{progress:0,opacity:1}});return C.jsxs(C.Fragment,{children:[C.jsx("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:C.jsx(At.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:r})}),C.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:C.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs font-semibold tracking-wide text-white",children:"Unidad de control"})}),C.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[C.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[C.jsx("span",{className:"text-sm leading-none",children:"Decodificador"}),C.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:C.jsx(At.div,{className:"h-full bg-mantis-400",style:{width:s.progress.to(o=>`${o*100}%`),opacity:s.opacity}})})]}),C.jsx("div",{className:"relative mt-4 h-8 w-48 overflow-hidden rounded-lg border border-stone-600 bg-stone-900",children:i((o,a)=>C.jsx(At.div,{className:"absolute inset-0 flex items-center",style:o,children:C.jsx("span",{className:"w-full text-center align-middle text-sm leading-none",children:a==="fetching"?"Leyendo instrucción...":a==="fetching-operands"?"Leyendo operandos...":a==="executing"?"Ejecutando...":a==="writeback"?"Escribiendo resultados...":a==="interrupt"?"Manejando interrupción...":a==="stopped"?"Detenido":null})}))}),C.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:C.jsx("p",{className:"text-center font-mono",children:t.phase==="fetching"||t.phase==="stopped"?C.jsx("span",{className:"font-bold italic text-stone-400",children:"???"}):C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"font-bold text-mantis-400",children:t.metadata.name}),C.jsx("span",{className:"text-white",children:e})]})})})]})]})}function RH({className:t}){return C.jsxs("div",{className:it("absolute z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[C.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:"CPU"}),C.jsx(d8,{}),C.jsx(Vz,{}),C.jsx(Sn,{name:"left",className:"left-[60px] top-[70px]"}),C.jsx(Sn,{name:"right",className:"left-[60px] top-[130px]"}),C.jsx(Sn,{name:"result",className:"left-[300px] top-[100px]"}),C.jsx(AH,{}),C.jsx(Sn,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),C.jsx(Sn,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),C.jsx(Sn,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),C.jsx(Sn,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),C.jsx(Sn,{name:"id",className:"left-[520px] top-[190px]"}),C.jsx(Sn,{name:"MBR",className:"right-[-38px] top-[233px]"}),C.jsx(Sn,{name:"IR",className:"left-[171px] top-[270px]"}),C.jsx(PH,{}),C.jsx(Sn,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),C.jsx(Sn,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),C.jsx(Sn,{name:"ri",className:"left-[450px] top-[372px]"}),C.jsx(Sn,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function Sn({name:t,emphasis:e,className:n}){return C.jsx(Lo,{name:t,valueAtom:tt[t],springRef:Ve.cpu[t],emphasis:e,className:it("absolute",n)})}const TH="_pushable_1nhoa_2",OH="_front_1nhoa_15",_H="_shadow_1nhoa_20",NH="_edge_1nhoa_52",xh={pushable:TH,front:OH,shadow:_H,edge:NH};function MH({className:t}){const e=fd(),[n,i]=CT();return vA("F10",r=>{r.preventDefault(),i("f10.press")}),C.jsx("div",{className:it("absolute z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:C.jsxs("button",{className:xh.pushable,disabled:n.type!=="running",onClick:()=>i("f10.press"),title:"F10",children:[C.jsx("div",{className:xh.shadow}),C.jsx("div",{className:xh.edge}),C.jsx("span",{className:xh.front,children:e("devices.external.f10.interrupt")})]})})}function DH({className:t}){const e=gr(N4);return C.jsxs("div",{className:it("absolute z-10 h-[400px] w-[150px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[C.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:"Memory"}),C.jsx("div",{className:"m-4 w-min overflow-hidden rounded-lg border border-stone-600",children:C.jsx("table",{className:"font-mono text-lg",children:C.jsx("tbody",{children:e.map((n,i)=>C.jsxs("tr",{className:"border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",children:[C.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:n.address.toString()}),C.jsx("td",{className:"px-2 py-1",children:n.value.toString("hex")})]},i))})})})]})}function $H({className:t}){return C.jsxs("div",{className:it("absolute z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[C.jsxs("div",{className:"flex items-start",children:[C.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:"PIC"}),C.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[C.jsx(Lo,{name:"IMR",valueAtom:Xw,springRef:Ve.pic.IMR,emphasis:!0}),C.jsx(Lo,{name:"IRR",valueAtom:Kw,springRef:Ve.pic.IRR,emphasis:!0}),C.jsx(Lo,{name:"ISR",valueAtom:Zw,springRef:Ve.pic.ISR,emphasis:!0})]})]}),C.jsx("hr",{className:"mb-2 border-stone-600"}),C.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:Yf.map((e,n)=>C.jsx(Lo,{name:`INT${n}`,valueAtom:e,springRef:Ve.pic[`INT${n}`],className:"mx-auto"},n))})]})}function LH({className:t}){return C.jsxs("div",{className:it("absolute z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[C.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:"Timer"}),C.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[C.jsx(Lo,{name:"CONT",valueAtom:h1,springRef:Ve.timer.CONT}),C.jsx(Lo,{name:"COMP",valueAtom:f1,springRef:Ve.timer.COMP})]})]})}function IH(){return C.jsx(yH,{minScale:.5,initialPositionX:0,initialPositionY:0,children:C.jsx(xH,{wrapperClass:"!w-full !h-full",contentClass:"!p-[100px]",children:C.jsxs("div",{className:"relative h-[1100px] w-[1500px] border border-red-500",children:[C.jsx(EH,{className:"left-0 top-0"}),C.jsx(RH,{className:"left-0 top-0"}),C.jsx(DH,{className:"left-[800px] top-0"}),C.jsx($H,{className:"left-0 top-[700px]"}),C.jsx(LH,{className:"left-[500px] top-[875px]"}),C.jsx(CH,{className:"left-[520px] top-[930px]"}),C.jsx(MH,{className:"left-[50px] top-[950px]"})]})})})}function BH(){const t=fd(),e=gr(bO),{updateServiceWorker:n}=m$({onNeedRefresh(){Up(t("update.update-available"),{action:{label:t("update.reload"),onClick:()=>n(!0)}})}});return C.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",children:[C.jsx(ej,{}),C.jsxs(mA,{autoSaveId:"layout",tagName:"main",direction:"horizontal",className:"overflow-auto px-2",children:[C.jsx(Mh,{id:"panel-editor",order:1,minSize:20,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:C.jsx(aV,{className:"h-full w-full"})}),C.jsx(uy,{className:"w-2"}),C.jsx(Mh,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='rgb(120 113 108)' fill-opacity='0.4'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`},children:C.jsx(IH,{})}),e&&C.jsxs(C.Fragment,{children:[C.jsx(uy,{className:"w-2"}),C.jsx(Mh,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:C.jsx(QF,{className:"h-full w-full"})})]})]}),C.jsxs("footer",{className:"py-1 text-center text-xs font-semibold tracking-wider text-stone-500",children:[C.jsx("a",{href:"/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),C.jsx("span",{className:"px-2",children:"·"}),C.jsx("a",{href:"https://github.com/vonsim/vonsim",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),C.jsx("span",{className:"px-2",children:"·"}),C.jsx("a",{href:"https://github.com/vonsim/vonsim/issues/new?labels=new+version",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.report-issue")}),C.jsx("span",{className:"px-2",children:"·"}),C.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:["© Copyright 2017-",new Date().getFullYear()," — ",t("footer.copyright")]})]})]})}window.codemirror=null;h0.createRoot(document.getElementById("root")).render(C.jsxs(q.StrictMode,{children:[C.jsx(zD,{richColors:!0,closeButton:!0,position:"top-center"}),C.jsx(C5,{children:C.jsx(BH,{})})]}));
