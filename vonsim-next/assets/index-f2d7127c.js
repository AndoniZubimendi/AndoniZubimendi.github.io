var QN=Object.defineProperty;var eM=(t,e,n)=>e in t?QN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oe=(t,e,n)=>(eM(t,typeof e!="symbol"?e+"":e,n),n),$m=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var E=(t,e,n)=>($m(t,e,"read from private field"),n?n.call(t):e.get(t)),xe=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},q=(t,e,n,i)=>($m(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var qe=(t,e,n)=>($m(t,e,"access private method"),n);function tM(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var nM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jE={exports:{}},Np={},FE={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sd=Symbol.for("react.element"),iM=Symbol.for("react.portal"),rM=Symbol.for("react.fragment"),sM=Symbol.for("react.strict_mode"),oM=Symbol.for("react.profiler"),aM=Symbol.for("react.provider"),lM=Symbol.for("react.context"),uM=Symbol.for("react.forward_ref"),cM=Symbol.for("react.suspense"),dM=Symbol.for("react.memo"),hM=Symbol.for("react.lazy"),Y1=Symbol.iterator;function fM(t){return t===null||typeof t!="object"?null:(t=Y1&&t[Y1]||t["@@iterator"],typeof t=="function"?t:null)}var UE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VE=Object.assign,HE={};function nu(t,e,n){this.props=t,this.context=e,this.refs=HE,this.updater=n||UE}nu.prototype.isReactComponent={};nu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function WE(){}WE.prototype=nu.prototype;function Mv(t,e,n){this.props=t,this.context=e,this.refs=HE,this.updater=n||UE}var Dv=Mv.prototype=new WE;Dv.constructor=Mv;VE(Dv,nu.prototype);Dv.isPureReactComponent=!0;var q1=Array.isArray,GE=Object.prototype.hasOwnProperty,_v={current:null},KE={key:!0,ref:!0,__self:!0,__source:!0};function XE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)GE.call(e,i)&&!KE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:sd,type:t,key:s,ref:o,props:r,_owner:_v.current}}function pM(t,e){return{$$typeof:sd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lv(t){return typeof t=="object"&&t!==null&&t.$$typeof===sd}function mM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Q1=/\/+/g;function Im(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mM(""+t.key):e.toString(36)}function Ch(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sd:case iM:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Im(o,0):i,q1(r)?(n="",t!=null&&(n=t.replace(Q1,"$&/")+"/"),Ch(r,e,n,"",function(u){return u})):r!=null&&(Lv(r)&&(r=pM(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Q1,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",q1(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Im(s,a);o+=Ch(s,e,n,l,r)}else if(l=fM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Im(s,a++),o+=Ch(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cd(t,e,n){if(t==null)return t;var i=[],r=0;return Ch(t,i,"","",function(s){return e.call(n,s,r++)}),i}function gM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var An={current:null},Ah={transition:null},yM={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:Ah,ReactCurrentOwner:_v};je.Children={map:Cd,forEach:function(t,e,n){Cd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cd(t,function(){e++}),e},toArray:function(t){return Cd(t,function(e){return e})||[]},only:function(t){if(!Lv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};je.Component=nu;je.Fragment=rM;je.Profiler=oM;je.PureComponent=Mv;je.StrictMode=sM;je.Suspense=cM;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yM;je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=VE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=_v.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)GE.call(e,l)&&!KE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:sd,type:t.type,key:r,ref:s,props:i,_owner:o}};je.createContext=function(t){return t={$$typeof:lM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aM,_context:t},t.Consumer=t};je.createElement=XE;je.createFactory=function(t){var e=XE.bind(null,t);return e.type=t,e};je.createRef=function(){return{current:null}};je.forwardRef=function(t){return{$$typeof:uM,render:t}};je.isValidElement=Lv;je.lazy=function(t){return{$$typeof:hM,_payload:{_status:-1,_result:t},_init:gM}};je.memo=function(t,e){return{$$typeof:dM,type:t,compare:e===void 0?null:e}};je.startTransition=function(t){var e=Ah.transition;Ah.transition={};try{t()}finally{Ah.transition=e}};je.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};je.useCallback=function(t,e){return An.current.useCallback(t,e)};je.useContext=function(t){return An.current.useContext(t)};je.useDebugValue=function(){};je.useDeferredValue=function(t){return An.current.useDeferredValue(t)};je.useEffect=function(t,e){return An.current.useEffect(t,e)};je.useId=function(){return An.current.useId()};je.useImperativeHandle=function(t,e,n){return An.current.useImperativeHandle(t,e,n)};je.useInsertionEffect=function(t,e){return An.current.useInsertionEffect(t,e)};je.useLayoutEffect=function(t,e){return An.current.useLayoutEffect(t,e)};je.useMemo=function(t,e){return An.current.useMemo(t,e)};je.useReducer=function(t,e,n){return An.current.useReducer(t,e,n)};je.useRef=function(t){return An.current.useRef(t)};je.useState=function(t){return An.current.useState(t)};je.useSyncExternalStore=function(t,e,n){return An.current.useSyncExternalStore(t,e,n)};je.useTransition=function(){return An.current.useTransition()};je.version="18.2.0";FE.exports=je;var S=FE.exports;const ue=tu(S),$v=tM({__proto__:null,default:ue},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vM=S,wM=Symbol.for("react.element"),bM=Symbol.for("react.fragment"),xM=Object.prototype.hasOwnProperty,SM=vM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kM={key:!0,ref:!0,__self:!0,__source:!0};function ZE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)xM.call(e,i)&&!kM.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:wM,type:t,key:s,ref:o,props:r,_owner:SM.current}}Np.Fragment=bM;Np.jsx=ZE;Np.jsxs=ZE;jE.exports=Np;var P=jE.exports;var vy={},JE={exports:{}},ai={},YE={exports:{}},qE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,I){var Y=$.length;$.push(I);e:for(;0<Y;){var ae=Y-1>>>1,ve=$[ae];if(0<r(ve,I))$[ae]=I,$[Y]=ve,Y=ae;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var I=$[0],Y=$.pop();if(Y!==I){$[0]=Y;e:for(var ae=0,ve=$.length,Se=ve>>>1;ae<Se;){var U=2*(ae+1)-1,B=$[U],W=U+1,b=$[W];if(0>r(B,Y))W<ve&&0>r(b,B)?($[ae]=b,$[W]=Y,ae=W):($[ae]=B,$[U]=Y,ae=U);else if(W<ve&&0>r(b,Y))$[ae]=b,$[W]=Y,ae=W;else break e}}return I}function r($,I){var Y=$.sortIndex-I.sortIndex;return Y!==0?Y:$.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var I=n(u);I!==null;){if(I.callback===null)i(u);else if(I.startTime<=$)i(u),I.sortIndex=I.expirationTime,e(l,I);else break;I=n(u)}}function x($){if(g=!1,v($),!p)if(n(l)!==null)p=!0,J(k);else{var I=n(u);I!==null&&G(x,I.startTime-$)}}function k($,I){p=!1,g&&(g=!1,m(A),A=-1),f=!0;var Y=h;try{for(v(I),d=n(l);d!==null&&(!(d.expirationTime>I)||$&&!M());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,h=d.priorityLevel;var ve=ae(d.expirationTime<=I);I=t.unstable_now(),typeof ve=="function"?d.callback=ve:d===n(l)&&i(l),v(I)}else i(l);d=n(l)}if(d!==null)var Se=!0;else{var U=n(u);U!==null&&G(x,U.startTime-I),Se=!1}return Se}finally{d=null,h=Y,f=!1}}var O=!1,T=null,A=-1,N=5,_=-1;function M(){return!(t.unstable_now()-_<N)}function H(){if(T!==null){var $=t.unstable_now();_=$;var I=!0;try{I=T(!0,$)}finally{I?F():(O=!1,T=null)}}else O=!1}var F;if(typeof y=="function")F=function(){y(H)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,X=j.port2;j.port1.onmessage=H,F=function(){X.postMessage(null)}}else F=function(){w(H,0)};function J($){T=$,O||(O=!0,F())}function G($,I){A=w(function(){$(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,J(k))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var Y=h;h=I;try{return $()}finally{h=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,I){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=h;h=$;try{return I()}finally{h=Y}},t.unstable_scheduleCallback=function($,I,Y){var ae=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ae+Y:ae):Y=ae,$){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Y+ve,$={id:c++,callback:I,priorityLevel:$,startTime:Y,expirationTime:ve,sortIndex:-1},Y>ae?($.sortIndex=Y,e(u,$),n(l)===null&&$===n(u)&&(g?(m(A),A=-1):g=!0,G(x,Y-ae))):($.sortIndex=ve,e(l,$),p||f||(p=!0,J(k))),$},t.unstable_shouldYield=M,t.unstable_wrapCallback=function($){var I=h;return function(){var Y=h;h=I;try{return $.apply(this,arguments)}finally{h=Y}}}})(qE);YE.exports=qE;var EM=YE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE=S,oi=EM;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eC=new Set,cc={};function va(t,e){Nl(t,e),Nl(t+"Capture",e)}function Nl(t,e){for(cc[t]=e,t=0;t<e.length;t++)eC.add(e[t])}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wy=Object.prototype.hasOwnProperty,CM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eb={},tb={};function AM(t){return wy.call(tb,t)?!0:wy.call(eb,t)?!1:CM.test(t)?tb[t]=!0:(eb[t]=!0,!1)}function PM(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OM(t,e,n,i){if(e===null||typeof e>"u"||PM(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rn[t]=new Pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rn[e]=new Pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rn[t]=new Pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rn[t]=new Pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rn[t]=new Pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rn[t]=new Pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rn[t]=new Pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rn[t]=new Pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rn[t]=new Pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Iv=/[\-:]([a-z])/g;function Bv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Iv,Bv);rn[e]=new Pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Iv,Bv);rn[e]=new Pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Iv,Bv);rn[e]=new Pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!1,!1)});rn.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function zv(t,e,n,i){var r=rn.hasOwnProperty(e)?rn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OM(e,n,r,i)&&(n=null),i||r===null?AM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ms=QE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ad=Symbol.for("react.element"),Va=Symbol.for("react.portal"),Ha=Symbol.for("react.fragment"),jv=Symbol.for("react.strict_mode"),by=Symbol.for("react.profiler"),tC=Symbol.for("react.provider"),nC=Symbol.for("react.context"),Fv=Symbol.for("react.forward_ref"),xy=Symbol.for("react.suspense"),Sy=Symbol.for("react.suspense_list"),Uv=Symbol.for("react.memo"),As=Symbol.for("react.lazy"),iC=Symbol.for("react.offscreen"),nb=Symbol.iterator;function hu(t){return t===null||typeof t!="object"?null:(t=nb&&t[nb]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,Bm;function Du(t){if(Bm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bm=e&&e[1]||""}return`
`+Bm+t}var zm=!1;function jm(t,e){if(!t||zm)return"";zm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{zm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Du(t):""}function TM(t){switch(t.tag){case 5:return Du(t.type);case 16:return Du("Lazy");case 13:return Du("Suspense");case 19:return Du("SuspenseList");case 0:case 2:case 15:return t=jm(t.type,!1),t;case 11:return t=jm(t.type.render,!1),t;case 1:return t=jm(t.type,!0),t;default:return""}}function ky(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ha:return"Fragment";case Va:return"Portal";case by:return"Profiler";case jv:return"StrictMode";case xy:return"Suspense";case Sy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nC:return(t.displayName||"Context")+".Consumer";case tC:return(t._context.displayName||"Context")+".Provider";case Fv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uv:return e=t.displayName||null,e!==null?e:ky(t.type)||"Memo";case As:e=t._payload,t=t._init;try{return ky(t(e))}catch{}}return null}function RM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ky(e);case 8:return e===jv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ao(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NM(t){var e=rC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pd(t){t._valueTracker||(t._valueTracker=NM(t))}function sC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=rC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function af(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ey(t,e){var n=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ib(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ao(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oC(t,e){e=e.checked,e!=null&&zv(t,"checked",e,!1)}function Cy(t,e){oC(t,e);var n=ao(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ay(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ay(t,e.type,ao(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ay(t,e,n){(e!=="number"||af(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _u=Array.isArray;function ol(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ao(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Py(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(_u(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ao(n)}}function aC(t,e){var n=ao(e.value),i=ao(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function ob(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Od,uC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Od=Od||document.createElement("div"),Od.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Od.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MM=["Webkit","ms","Moz","O"];Object.keys(Wu).forEach(function(t){MM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wu[e]=Wu[t]})});function cC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wu.hasOwnProperty(t)&&Wu[t]?(""+e).trim():e+"px"}function dC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=cC(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var DM=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ty(t,e){if(e){if(DM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function Ry(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ny=null;function Vv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var My=null,al=null,ll=null;function ab(t){if(t=ld(t)){if(typeof My!="function")throw Error(te(280));var e=t.stateNode;e&&(e=$p(e),My(t.stateNode,t.type,e))}}function hC(t){al?ll?ll.push(t):ll=[t]:al=t}function fC(){if(al){var t=al,e=ll;if(ll=al=null,ab(t),e)for(t=0;t<e.length;t++)ab(e[t])}}function pC(t,e){return t(e)}function mC(){}var Fm=!1;function gC(t,e,n){if(Fm)return t(e,n);Fm=!0;try{return pC(t,e,n)}finally{Fm=!1,(al!==null||ll!==null)&&(mC(),fC())}}function hc(t,e){var n=t.stateNode;if(n===null)return null;var i=$p(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var Dy=!1;if(ss)try{var fu={};Object.defineProperty(fu,"passive",{get:function(){Dy=!0}}),window.addEventListener("test",fu,fu),window.removeEventListener("test",fu,fu)}catch{Dy=!1}function _M(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Gu=!1,lf=null,uf=!1,_y=null,LM={onError:function(t){Gu=!0,lf=t}};function $M(t,e,n,i,r,s,o,a,l){Gu=!1,lf=null,_M.apply(LM,arguments)}function IM(t,e,n,i,r,s,o,a,l){if($M.apply(this,arguments),Gu){if(Gu){var u=lf;Gu=!1,lf=null}else throw Error(te(198));uf||(uf=!0,_y=u)}}function wa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lb(t){if(wa(t)!==t)throw Error(te(188))}function BM(t){var e=t.alternate;if(!e){if(e=wa(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return lb(r),t;if(s===i)return lb(r),e;s=s.sibling}throw Error(te(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==i)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function vC(t){return t=BM(t),t!==null?wC(t):null}function wC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wC(t);if(e!==null)return e;t=t.sibling}return null}var bC=oi.unstable_scheduleCallback,ub=oi.unstable_cancelCallback,zM=oi.unstable_shouldYield,jM=oi.unstable_requestPaint,Rt=oi.unstable_now,FM=oi.unstable_getCurrentPriorityLevel,Hv=oi.unstable_ImmediatePriority,xC=oi.unstable_UserBlockingPriority,cf=oi.unstable_NormalPriority,UM=oi.unstable_LowPriority,SC=oi.unstable_IdlePriority,Mp=null,Sr=null;function VM(t){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(Mp,t,void 0,(t.current.flags&128)===128)}catch{}}var Hi=Math.clz32?Math.clz32:GM,HM=Math.log,WM=Math.LN2;function GM(t){return t>>>=0,t===0?32:31-(HM(t)/WM|0)|0}var Td=64,Rd=4194304;function Lu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function df(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Lu(a):(s&=o,s!==0&&(i=Lu(s)))}else o=n&~r,o!==0?i=Lu(o):s!==0&&(i=Lu(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Hi(e),r=1<<n,i|=t[n],e&=~r;return i}function KM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XM(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Hi(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=KM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ly(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kC(){var t=Td;return Td<<=1,!(Td&4194240)&&(Td=64),t}function Um(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function od(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hi(e),t[e]=n}function ZM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Hi(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Wv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Hi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Xe=0;function EC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var CC,Gv,AC,PC,OC,$y=!1,Nd=[],Js=null,Ys=null,qs=null,fc=new Map,pc=new Map,Ds=[],JM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cb(t,e){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":fc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(e.pointerId)}}function pu(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ld(e),e!==null&&Gv(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function YM(t,e,n,i,r){switch(e){case"focusin":return Js=pu(Js,t,e,n,i,r),!0;case"dragenter":return Ys=pu(Ys,t,e,n,i,r),!0;case"mouseover":return qs=pu(qs,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return fc.set(s,pu(fc.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,pc.set(s,pu(pc.get(s)||null,t,e,n,i,r)),!0}return!1}function TC(t){var e=Fo(t.target);if(e!==null){var n=wa(e);if(n!==null){if(e=n.tag,e===13){if(e=yC(n),e!==null){t.blockedOn=e,OC(t.priority,function(){AC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ph(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Iy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ny=i,n.target.dispatchEvent(i),Ny=null}else return e=ld(n),e!==null&&Gv(e),t.blockedOn=n,!1;e.shift()}return!0}function db(t,e,n){Ph(t)&&n.delete(e)}function qM(){$y=!1,Js!==null&&Ph(Js)&&(Js=null),Ys!==null&&Ph(Ys)&&(Ys=null),qs!==null&&Ph(qs)&&(qs=null),fc.forEach(db),pc.forEach(db)}function mu(t,e){t.blockedOn===e&&(t.blockedOn=null,$y||($y=!0,oi.unstable_scheduleCallback(oi.unstable_NormalPriority,qM)))}function mc(t){function e(r){return mu(r,t)}if(0<Nd.length){mu(Nd[0],t);for(var n=1;n<Nd.length;n++){var i=Nd[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Js!==null&&mu(Js,t),Ys!==null&&mu(Ys,t),qs!==null&&mu(qs,t),fc.forEach(e),pc.forEach(e),n=0;n<Ds.length;n++)i=Ds[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)TC(n),n.blockedOn===null&&Ds.shift()}var ul=ms.ReactCurrentBatchConfig,hf=!0;function QM(t,e,n,i){var r=Xe,s=ul.transition;ul.transition=null;try{Xe=1,Kv(t,e,n,i)}finally{Xe=r,ul.transition=s}}function eD(t,e,n,i){var r=Xe,s=ul.transition;ul.transition=null;try{Xe=4,Kv(t,e,n,i)}finally{Xe=r,ul.transition=s}}function Kv(t,e,n,i){if(hf){var r=Iy(t,e,n,i);if(r===null)qm(t,e,i,ff,n),cb(t,i);else if(YM(r,t,e,n,i))i.stopPropagation();else if(cb(t,i),e&4&&-1<JM.indexOf(t)){for(;r!==null;){var s=ld(r);if(s!==null&&CC(s),s=Iy(t,e,n,i),s===null&&qm(t,e,i,ff,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else qm(t,e,i,null,n)}}var ff=null;function Iy(t,e,n,i){if(ff=null,t=Vv(i),t=Fo(t),t!==null)if(e=wa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ff=t,null}function RC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FM()){case Hv:return 1;case xC:return 4;case cf:case UM:return 16;case SC:return 536870912;default:return 16}default:return 16}}var Vs=null,Xv=null,Oh=null;function NC(){if(Oh)return Oh;var t,e=Xv,n=e.length,i,r="value"in Vs?Vs.value:Vs.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Oh=r.slice(t,1<i?1-i:void 0)}function Th(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Md(){return!0}function hb(){return!1}function li(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Md:hb,this.isPropagationStopped=hb,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Md)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Md)},persist:function(){},isPersistent:Md}),e}var iu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zv=li(iu),ad=St({},iu,{view:0,detail:0}),tD=li(ad),Vm,Hm,gu,Dp=St({},ad,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gu&&(gu&&t.type==="mousemove"?(Vm=t.screenX-gu.screenX,Hm=t.screenY-gu.screenY):Hm=Vm=0,gu=t),Vm)},movementY:function(t){return"movementY"in t?t.movementY:Hm}}),fb=li(Dp),nD=St({},Dp,{dataTransfer:0}),iD=li(nD),rD=St({},ad,{relatedTarget:0}),Wm=li(rD),sD=St({},iu,{animationName:0,elapsedTime:0,pseudoElement:0}),oD=li(sD),aD=St({},iu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lD=li(aD),uD=St({},iu,{data:0}),pb=li(uD),cD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hD[t])?!!e[t]:!1}function Jv(){return fD}var pD=St({},ad,{key:function(t){if(t.key){var e=cD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Th(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jv,charCode:function(t){return t.type==="keypress"?Th(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Th(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mD=li(pD),gD=St({},Dp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mb=li(gD),yD=St({},ad,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jv}),vD=li(yD),wD=St({},iu,{propertyName:0,elapsedTime:0,pseudoElement:0}),bD=li(wD),xD=St({},Dp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SD=li(xD),kD=[9,13,27,32],Yv=ss&&"CompositionEvent"in window,Ku=null;ss&&"documentMode"in document&&(Ku=document.documentMode);var ED=ss&&"TextEvent"in window&&!Ku,MC=ss&&(!Yv||Ku&&8<Ku&&11>=Ku),gb=String.fromCharCode(32),yb=!1;function DC(t,e){switch(t){case"keyup":return kD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _C(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wa=!1;function CD(t,e){switch(t){case"compositionend":return _C(e);case"keypress":return e.which!==32?null:(yb=!0,gb);case"textInput":return t=e.data,t===gb&&yb?null:t;default:return null}}function AD(t,e){if(Wa)return t==="compositionend"||!Yv&&DC(t,e)?(t=NC(),Oh=Xv=Vs=null,Wa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MC&&e.locale!=="ko"?null:e.data;default:return null}}var PD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PD[t.type]:e==="textarea"}function LC(t,e,n,i){hC(i),e=pf(e,"onChange"),0<e.length&&(n=new Zv("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Xu=null,gc=null;function OD(t){GC(t,0)}function _p(t){var e=Xa(t);if(sC(e))return t}function TD(t,e){if(t==="change")return e}var $C=!1;if(ss){var Gm;if(ss){var Km="oninput"in document;if(!Km){var wb=document.createElement("div");wb.setAttribute("oninput","return;"),Km=typeof wb.oninput=="function"}Gm=Km}else Gm=!1;$C=Gm&&(!document.documentMode||9<document.documentMode)}function bb(){Xu&&(Xu.detachEvent("onpropertychange",IC),gc=Xu=null)}function IC(t){if(t.propertyName==="value"&&_p(gc)){var e=[];LC(e,gc,t,Vv(t)),gC(OD,e)}}function RD(t,e,n){t==="focusin"?(bb(),Xu=e,gc=n,Xu.attachEvent("onpropertychange",IC)):t==="focusout"&&bb()}function ND(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _p(gc)}function MD(t,e){if(t==="click")return _p(e)}function DD(t,e){if(t==="input"||t==="change")return _p(e)}function _D(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zi=typeof Object.is=="function"?Object.is:_D;function yc(t,e){if(Zi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!wy.call(e,r)||!Zi(t[r],e[r]))return!1}return!0}function xb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sb(t,e){var n=xb(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xb(n)}}function BC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zC(){for(var t=window,e=af();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=af(t.document)}return e}function qv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LD(t){var e=zC(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BC(n.ownerDocument.documentElement,n)){if(i!==null&&qv(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Sb(n,s);var o=Sb(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $D=ss&&"documentMode"in document&&11>=document.documentMode,Ga=null,By=null,Zu=null,zy=!1;function kb(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zy||Ga==null||Ga!==af(i)||(i=Ga,"selectionStart"in i&&qv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Zu&&yc(Zu,i)||(Zu=i,i=pf(By,"onSelect"),0<i.length&&(e=new Zv("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ga)))}function Dd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ka={animationend:Dd("Animation","AnimationEnd"),animationiteration:Dd("Animation","AnimationIteration"),animationstart:Dd("Animation","AnimationStart"),transitionend:Dd("Transition","TransitionEnd")},Xm={},jC={};ss&&(jC=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function Lp(t){if(Xm[t])return Xm[t];if(!Ka[t])return t;var e=Ka[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jC)return Xm[t]=e[n];return t}var FC=Lp("animationend"),UC=Lp("animationiteration"),VC=Lp("animationstart"),HC=Lp("transitionend"),WC=new Map,Eb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(t,e){WC.set(t,e),va(e,[t])}for(var Zm=0;Zm<Eb.length;Zm++){var Jm=Eb[Zm],ID=Jm.toLowerCase(),BD=Jm[0].toUpperCase()+Jm.slice(1);xo(ID,"on"+BD)}xo(FC,"onAnimationEnd");xo(UC,"onAnimationIteration");xo(VC,"onAnimationStart");xo("dblclick","onDoubleClick");xo("focusin","onFocus");xo("focusout","onBlur");xo(HC,"onTransitionEnd");Nl("onMouseEnter",["mouseout","mouseover"]);Nl("onMouseLeave",["mouseout","mouseover"]);Nl("onPointerEnter",["pointerout","pointerover"]);Nl("onPointerLeave",["pointerout","pointerover"]);va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));va("onBeforeInput",["compositionend","keypress","textInput","paste"]);va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zD=new Set("cancel close invalid load scroll toggle".split(" ").concat($u));function Cb(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,IM(i,e,void 0,t),t.currentTarget=null}function GC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Cb(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Cb(r,a,u),s=l}}}if(uf)throw t=_y,uf=!1,_y=null,t}function st(t,e){var n=e[Hy];n===void 0&&(n=e[Hy]=new Set);var i=t+"__bubble";n.has(i)||(KC(e,t,2,!1),n.add(i))}function Ym(t,e,n){var i=0;e&&(i|=4),KC(n,t,i,e)}var _d="_reactListening"+Math.random().toString(36).slice(2);function vc(t){if(!t[_d]){t[_d]=!0,eC.forEach(function(n){n!=="selectionchange"&&(zD.has(n)||Ym(n,!1,t),Ym(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_d]||(e[_d]=!0,Ym("selectionchange",!1,e))}}function KC(t,e,n,i){switch(RC(e)){case 1:var r=QM;break;case 4:r=eD;break;default:r=Kv}n=r.bind(null,e,n,t),r=void 0,!Dy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qm(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Fo(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}gC(function(){var u=s,c=Vv(n),d=[];e:{var h=WC.get(t);if(h!==void 0){var f=Zv,p=t;switch(t){case"keypress":if(Th(n)===0)break e;case"keydown":case"keyup":f=mD;break;case"focusin":p="focus",f=Wm;break;case"focusout":p="blur",f=Wm;break;case"beforeblur":case"afterblur":f=Wm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=fb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=iD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=vD;break;case FC:case UC:case VC:f=oD;break;case HC:f=bD;break;case"scroll":f=tD;break;case"wheel":f=SD;break;case"copy":case"cut":case"paste":f=lD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=mb}var g=(e&4)!==0,w=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var y=u,v;y!==null;){v=y;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,m!==null&&(x=hc(y,m),x!=null&&g.push(wc(y,x,v)))),w)break;y=y.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Ny&&(p=n.relatedTarget||n.fromElement)&&(Fo(p)||p[os]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Fo(p):null,p!==null&&(w=wa(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=fb,x="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=mb,x="onPointerLeave",m="onPointerEnter",y="pointer"),w=f==null?h:Xa(f),v=p==null?h:Xa(p),h=new g(x,y+"leave",f,n,c),h.target=w,h.relatedTarget=v,x=null,Fo(c)===u&&(g=new g(m,y+"enter",p,n,c),g.target=v,g.relatedTarget=w,x=g),w=x,f&&p)t:{for(g=f,m=p,y=0,v=g;v;v=Pa(v))y++;for(v=0,x=m;x;x=Pa(x))v++;for(;0<y-v;)g=Pa(g),y--;for(;0<v-y;)m=Pa(m),v--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Pa(g),m=Pa(m)}g=null}else g=null;f!==null&&Ab(d,h,f,g,!1),p!==null&&w!==null&&Ab(d,w,p,g,!0)}}e:{if(h=u?Xa(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=TD;else if(vb(h))if($C)k=DD;else{k=ND;var O=RD}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=MD);if(k&&(k=k(t,u))){LC(d,k,n,c);break e}O&&O(t,h,u),t==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&Ay(h,"number",h.value)}switch(O=u?Xa(u):window,t){case"focusin":(vb(O)||O.contentEditable==="true")&&(Ga=O,By=u,Zu=null);break;case"focusout":Zu=By=Ga=null;break;case"mousedown":zy=!0;break;case"contextmenu":case"mouseup":case"dragend":zy=!1,kb(d,n,c);break;case"selectionchange":if($D)break;case"keydown":case"keyup":kb(d,n,c)}var T;if(Yv)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Wa?DC(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(MC&&n.locale!=="ko"&&(Wa||A!=="onCompositionStart"?A==="onCompositionEnd"&&Wa&&(T=NC()):(Vs=c,Xv="value"in Vs?Vs.value:Vs.textContent,Wa=!0)),O=pf(u,A),0<O.length&&(A=new pb(A,t,null,n,c),d.push({event:A,listeners:O}),T?A.data=T:(T=_C(n),T!==null&&(A.data=T)))),(T=ED?CD(t,n):AD(t,n))&&(u=pf(u,"onBeforeInput"),0<u.length&&(c=new pb("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=T))}GC(d,e)})}function wc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=hc(t,n),s!=null&&i.unshift(wc(t,s,r)),s=hc(t,e),s!=null&&i.push(wc(t,s,r))),t=t.return}return i}function Pa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ab(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=hc(n,s),l!=null&&o.unshift(wc(n,l,a))):r||(l=hc(n,s),l!=null&&o.push(wc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jD=/\r\n?/g,FD=/\u0000|\uFFFD/g;function Pb(t){return(typeof t=="string"?t:""+t).replace(jD,`
`).replace(FD,"")}function Ld(t,e,n){if(e=Pb(e),Pb(t)!==e&&n)throw Error(te(425))}function mf(){}var jy=null,Fy=null;function Uy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vy=typeof setTimeout=="function"?setTimeout:void 0,UD=typeof clearTimeout=="function"?clearTimeout:void 0,Ob=typeof Promise=="function"?Promise:void 0,VD=typeof queueMicrotask=="function"?queueMicrotask:typeof Ob<"u"?function(t){return Ob.resolve(null).then(t).catch(HD)}:Vy;function HD(t){setTimeout(function(){throw t})}function Qm(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),mc(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);mc(e)}function Qs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ru=Math.random().toString(36).slice(2),mr="__reactFiber$"+ru,bc="__reactProps$"+ru,os="__reactContainer$"+ru,Hy="__reactEvents$"+ru,WD="__reactListeners$"+ru,GD="__reactHandles$"+ru;function Fo(t){var e=t[mr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[os]||n[mr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tb(t);t!==null;){if(n=t[mr])return n;t=Tb(t)}return e}t=n,n=t.parentNode}return null}function ld(t){return t=t[mr]||t[os],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function $p(t){return t[bc]||null}var Wy=[],Za=-1;function So(t){return{current:t}}function ut(t){0>Za||(t.current=Wy[Za],Wy[Za]=null,Za--)}function it(t,e){Za++,Wy[Za]=t.current,t.current=e}var lo={},fn=So(lo),jn=So(!1),na=lo;function Ml(t,e){var n=t.type.contextTypes;if(!n)return lo;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Fn(t){return t=t.childContextTypes,t!=null}function gf(){ut(jn),ut(fn)}function Rb(t,e,n){if(fn.current!==lo)throw Error(te(168));it(fn,e),it(jn,n)}function XC(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(te(108,RM(t)||"Unknown",r));return St({},n,i)}function yf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lo,na=fn.current,it(fn,t),it(jn,jn.current),!0}function Nb(t,e,n){var i=t.stateNode;if(!i)throw Error(te(169));n?(t=XC(t,e,na),i.__reactInternalMemoizedMergedChildContext=t,ut(jn),ut(fn),it(fn,t)):ut(jn),it(jn,n)}var $r=null,Ip=!1,eg=!1;function ZC(t){$r===null?$r=[t]:$r.push(t)}function KD(t){Ip=!0,ZC(t)}function ko(){if(!eg&&$r!==null){eg=!0;var t=0,e=Xe;try{var n=$r;for(Xe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}$r=null,Ip=!1}catch(r){throw $r!==null&&($r=$r.slice(t+1)),bC(Hv,ko),r}finally{Xe=e,eg=!1}}return null}var Ja=[],Ya=0,vf=null,wf=0,yi=[],vi=0,ia=null,Xr=1,Zr="";function Do(t,e){Ja[Ya++]=wf,Ja[Ya++]=vf,vf=t,wf=e}function JC(t,e,n){yi[vi++]=Xr,yi[vi++]=Zr,yi[vi++]=ia,ia=t;var i=Xr;t=Zr;var r=32-Hi(i)-1;i&=~(1<<r),n+=1;var s=32-Hi(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Xr=1<<32-Hi(e)+r|n<<r|i,Zr=s+t}else Xr=1<<s|n<<r|i,Zr=t}function Qv(t){t.return!==null&&(Do(t,1),JC(t,1,0))}function ew(t){for(;t===vf;)vf=Ja[--Ya],Ja[Ya]=null,wf=Ja[--Ya],Ja[Ya]=null;for(;t===ia;)ia=yi[--vi],yi[vi]=null,Zr=yi[--vi],yi[vi]=null,Xr=yi[--vi],yi[vi]=null}var si=null,ii=null,dt=!1,Bi=null;function YC(t,e){var n=xi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,si=t,ii=Qs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,si=t,ii=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ia!==null?{id:Xr,overflow:Zr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,si=t,ii=null,!0):!1;default:return!1}}function Gy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ky(t){if(dt){var e=ii;if(e){var n=e;if(!Mb(t,e)){if(Gy(t))throw Error(te(418));e=Qs(n.nextSibling);var i=si;e&&Mb(t,e)?YC(i,n):(t.flags=t.flags&-4097|2,dt=!1,si=t)}}else{if(Gy(t))throw Error(te(418));t.flags=t.flags&-4097|2,dt=!1,si=t}}}function Db(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;si=t}function $d(t){if(t!==si)return!1;if(!dt)return Db(t),dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Uy(t.type,t.memoizedProps)),e&&(e=ii)){if(Gy(t))throw qC(),Error(te(418));for(;e;)YC(t,e),e=Qs(e.nextSibling)}if(Db(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ii=Qs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ii=null}}else ii=si?Qs(t.stateNode.nextSibling):null;return!0}function qC(){for(var t=ii;t;)t=Qs(t.nextSibling)}function Dl(){ii=si=null,dt=!1}function tw(t){Bi===null?Bi=[t]:Bi.push(t)}var XD=ms.ReactCurrentBatchConfig;function Di(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var bf=So(null),xf=null,qa=null,nw=null;function iw(){nw=qa=xf=null}function rw(t){var e=bf.current;ut(bf),t._currentValue=e}function Xy(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function cl(t,e){xf=t,nw=qa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(In=!0),t.firstContext=null)}function Pi(t){var e=t._currentValue;if(nw!==t)if(t={context:t,memoizedValue:e,next:null},qa===null){if(xf===null)throw Error(te(308));qa=t,xf.dependencies={lanes:0,firstContext:t}}else qa=qa.next=t;return e}var Uo=null;function sw(t){Uo===null?Uo=[t]:Uo.push(t)}function QC(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,sw(e)):(n.next=r.next,r.next=n),e.interleaved=n,as(t,i)}function as(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ps=!1;function ow(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function eo(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ve&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,as(t,n)}return r=i.interleaved,r===null?(e.next=e,sw(i)):(e.next=r.next,r.next=e),i.interleaved=e,as(t,n)}function Rh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Wv(t,n)}}function _b(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sf(t,e,n,i){var r=t.updateQueue;Ps=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=St({},d,h);break e;case 2:Ps=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);sa|=o,t.lanes=o,t.memoizedState=d}}function Lb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(te(191,r));r.call(i)}}}var tA=new QE.Component().refs;function Zy(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:St({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bp={isMounted:function(t){return(t=t._reactInternals)?wa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=kn(),r=no(t),s=Yr(i,r);s.payload=e,n!=null&&(s.callback=n),e=eo(t,s,r),e!==null&&(Wi(e,t,r,i),Rh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=kn(),r=no(t),s=Yr(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=eo(t,s,r),e!==null&&(Wi(e,t,r,i),Rh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kn(),i=no(t),r=Yr(n,i);r.tag=2,e!=null&&(r.callback=e),e=eo(t,r,i),e!==null&&(Wi(e,t,i,n),Rh(e,t,i))}};function $b(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!yc(n,i)||!yc(r,s):!0}function nA(t,e,n){var i=!1,r=lo,s=e.contextType;return typeof s=="object"&&s!==null?s=Pi(s):(r=Fn(e)?na:fn.current,i=e.contextTypes,s=(i=i!=null)?Ml(t,r):lo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bp,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ib(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Bp.enqueueReplaceState(e,e.state,null)}function Jy(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=tA,ow(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Pi(s):(s=Fn(e)?na:fn.current,r.context=Ml(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zy(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Bp.enqueueReplaceState(r,r.state,null),Sf(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function yu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var i=n.stateNode}if(!i)throw Error(te(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===tA&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function Id(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bb(t){var e=t._init;return e(t._payload)}function iA(t){function e(m,y){if(t){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function r(m,y){return m=io(m,y),m.index=0,m.sibling=null,m}function s(m,y,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,v,x){return y===null||y.tag!==6?(y=ag(v,m.mode,x),y.return=m,y):(y=r(y,v),y.return=m,y)}function l(m,y,v,x){var k=v.type;return k===Ha?c(m,y,v.props.children,x,v.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===As&&Bb(k)===y.type)?(x=r(y,v.props),x.ref=yu(m,y,v),x.return=m,x):(x=$h(v.type,v.key,v.props,null,m.mode,x),x.ref=yu(m,y,v),x.return=m,x)}function u(m,y,v,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=lg(v,m.mode,x),y.return=m,y):(y=r(y,v.children||[]),y.return=m,y)}function c(m,y,v,x,k){return y===null||y.tag!==7?(y=Yo(v,m.mode,x,k),y.return=m,y):(y=r(y,v),y.return=m,y)}function d(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ag(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ad:return v=$h(y.type,y.key,y.props,null,m.mode,v),v.ref=yu(m,null,y),v.return=m,v;case Va:return y=lg(y,m.mode,v),y.return=m,y;case As:var x=y._init;return d(m,x(y._payload),v)}if(_u(y)||hu(y))return y=Yo(y,m.mode,v,null),y.return=m,y;Id(m,y)}return null}function h(m,y,v,x){var k=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:a(m,y,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ad:return v.key===k?l(m,y,v,x):null;case Va:return v.key===k?u(m,y,v,x):null;case As:return k=v._init,h(m,y,k(v._payload),x)}if(_u(v)||hu(v))return k!==null?null:c(m,y,v,x,null);Id(m,v)}return null}function f(m,y,v,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(v)||null,a(y,m,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ad:return m=m.get(x.key===null?v:x.key)||null,l(y,m,x,k);case Va:return m=m.get(x.key===null?v:x.key)||null,u(y,m,x,k);case As:var O=x._init;return f(m,y,v,O(x._payload),k)}if(_u(x)||hu(x))return m=m.get(v)||null,c(y,m,x,k,null);Id(y,x)}return null}function p(m,y,v,x){for(var k=null,O=null,T=y,A=y=0,N=null;T!==null&&A<v.length;A++){T.index>A?(N=T,T=null):N=T.sibling;var _=h(m,T,v[A],x);if(_===null){T===null&&(T=N);break}t&&T&&_.alternate===null&&e(m,T),y=s(_,y,A),O===null?k=_:O.sibling=_,O=_,T=N}if(A===v.length)return n(m,T),dt&&Do(m,A),k;if(T===null){for(;A<v.length;A++)T=d(m,v[A],x),T!==null&&(y=s(T,y,A),O===null?k=T:O.sibling=T,O=T);return dt&&Do(m,A),k}for(T=i(m,T);A<v.length;A++)N=f(T,m,A,v[A],x),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?A:N.key),y=s(N,y,A),O===null?k=N:O.sibling=N,O=N);return t&&T.forEach(function(M){return e(m,M)}),dt&&Do(m,A),k}function g(m,y,v,x){var k=hu(v);if(typeof k!="function")throw Error(te(150));if(v=k.call(v),v==null)throw Error(te(151));for(var O=k=null,T=y,A=y=0,N=null,_=v.next();T!==null&&!_.done;A++,_=v.next()){T.index>A?(N=T,T=null):N=T.sibling;var M=h(m,T,_.value,x);if(M===null){T===null&&(T=N);break}t&&T&&M.alternate===null&&e(m,T),y=s(M,y,A),O===null?k=M:O.sibling=M,O=M,T=N}if(_.done)return n(m,T),dt&&Do(m,A),k;if(T===null){for(;!_.done;A++,_=v.next())_=d(m,_.value,x),_!==null&&(y=s(_,y,A),O===null?k=_:O.sibling=_,O=_);return dt&&Do(m,A),k}for(T=i(m,T);!_.done;A++,_=v.next())_=f(T,m,A,_.value,x),_!==null&&(t&&_.alternate!==null&&T.delete(_.key===null?A:_.key),y=s(_,y,A),O===null?k=_:O.sibling=_,O=_);return t&&T.forEach(function(H){return e(m,H)}),dt&&Do(m,A),k}function w(m,y,v,x){if(typeof v=="object"&&v!==null&&v.type===Ha&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ad:e:{for(var k=v.key,O=y;O!==null;){if(O.key===k){if(k=v.type,k===Ha){if(O.tag===7){n(m,O.sibling),y=r(O,v.props.children),y.return=m,m=y;break e}}else if(O.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===As&&Bb(k)===O.type){n(m,O.sibling),y=r(O,v.props),y.ref=yu(m,O,v),y.return=m,m=y;break e}n(m,O);break}else e(m,O);O=O.sibling}v.type===Ha?(y=Yo(v.props.children,m.mode,x,v.key),y.return=m,m=y):(x=$h(v.type,v.key,v.props,null,m.mode,x),x.ref=yu(m,y,v),x.return=m,m=x)}return o(m);case Va:e:{for(O=v.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(m,y.sibling),y=r(y,v.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=lg(v,m.mode,x),y.return=m,m=y}return o(m);case As:return O=v._init,w(m,y,O(v._payload),x)}if(_u(v))return p(m,y,v,x);if(hu(v))return g(m,y,v,x);Id(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(m,y.sibling),y=r(y,v),y.return=m,m=y):(n(m,y),y=ag(v,m.mode,x),y.return=m,m=y),o(m)):n(m,y)}return w}var _l=iA(!0),rA=iA(!1),ud={},kr=So(ud),xc=So(ud),Sc=So(ud);function Vo(t){if(t===ud)throw Error(te(174));return t}function aw(t,e){switch(it(Sc,e),it(xc,t),it(kr,ud),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Oy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Oy(e,t)}ut(kr),it(kr,e)}function Ll(){ut(kr),ut(xc),ut(Sc)}function sA(t){Vo(Sc.current);var e=Vo(kr.current),n=Oy(e,t.type);e!==n&&(it(xc,t),it(kr,n))}function lw(t){xc.current===t&&(ut(kr),ut(xc))}var gt=So(0);function kf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tg=[];function uw(){for(var t=0;t<tg.length;t++)tg[t]._workInProgressVersionPrimary=null;tg.length=0}var Nh=ms.ReactCurrentDispatcher,ng=ms.ReactCurrentBatchConfig,ra=0,bt=null,It=null,Vt=null,Ef=!1,Ju=!1,kc=0,ZD=0;function an(){throw Error(te(321))}function cw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zi(t[n],e[n]))return!1;return!0}function dw(t,e,n,i,r,s){if(ra=s,bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nh.current=t===null||t.memoizedState===null?QD:e_,t=n(i,r),Ju){s=0;do{if(Ju=!1,kc=0,25<=s)throw Error(te(301));s+=1,Vt=It=null,e.updateQueue=null,Nh.current=t_,t=n(i,r)}while(Ju)}if(Nh.current=Cf,e=It!==null&&It.next!==null,ra=0,Vt=It=bt=null,Ef=!1,e)throw Error(te(300));return t}function hw(){var t=kc!==0;return kc=0,t}function or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?bt.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function Oi(){if(It===null){var t=bt.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var e=Vt===null?bt.memoizedState:Vt.next;if(e!==null)Vt=e,It=t;else{if(t===null)throw Error(te(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Vt===null?bt.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function Ec(t,e){return typeof e=="function"?e(t):e}function ig(t){var e=Oi(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var i=It,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((ra&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,bt.lanes|=c,sa|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Zi(i,e.memoizedState)||(In=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,bt.lanes|=s,sa|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rg(t){var e=Oi(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Zi(s,e.memoizedState)||(In=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function oA(){}function aA(t,e){var n=bt,i=Oi(),r=e(),s=!Zi(i.memoizedState,r);if(s&&(i.memoizedState=r,In=!0),i=i.queue,fw(cA.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Vt!==null&&Vt.memoizedState.tag&1){if(n.flags|=2048,Cc(9,uA.bind(null,n,i,r,e),void 0,null),Wt===null)throw Error(te(349));ra&30||lA(n,e,r)}return r}function lA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uA(t,e,n,i){e.value=n,e.getSnapshot=i,dA(e)&&hA(t)}function cA(t,e,n){return n(function(){dA(e)&&hA(t)})}function dA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zi(t,n)}catch{return!0}}function hA(t){var e=as(t,1);e!==null&&Wi(e,t,1,-1)}function zb(t){var e=or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ec,lastRenderedState:t},e.queue=t,t=t.dispatch=qD.bind(null,bt,t),[e.memoizedState,t]}function Cc(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function fA(){return Oi().memoizedState}function Mh(t,e,n,i){var r=or();bt.flags|=t,r.memoizedState=Cc(1|e,n,void 0,i===void 0?null:i)}function zp(t,e,n,i){var r=Oi();i=i===void 0?null:i;var s=void 0;if(It!==null){var o=It.memoizedState;if(s=o.destroy,i!==null&&cw(i,o.deps)){r.memoizedState=Cc(e,n,s,i);return}}bt.flags|=t,r.memoizedState=Cc(1|e,n,s,i)}function jb(t,e){return Mh(8390656,8,t,e)}function fw(t,e){return zp(2048,8,t,e)}function pA(t,e){return zp(4,2,t,e)}function mA(t,e){return zp(4,4,t,e)}function gA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yA(t,e,n){return n=n!=null?n.concat([t]):null,zp(4,4,gA.bind(null,e,t),n)}function pw(){}function vA(t,e){var n=Oi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cw(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function wA(t,e){var n=Oi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cw(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function bA(t,e,n){return ra&21?(Zi(n,e)||(n=kC(),bt.lanes|=n,sa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,In=!0),t.memoizedState=n)}function JD(t,e){var n=Xe;Xe=n!==0&&4>n?n:4,t(!0);var i=ng.transition;ng.transition={};try{t(!1),e()}finally{Xe=n,ng.transition=i}}function xA(){return Oi().memoizedState}function YD(t,e,n){var i=no(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},SA(t))kA(e,n);else if(n=QC(t,e,n,i),n!==null){var r=kn();Wi(n,t,i,r),EA(n,e,i)}}function qD(t,e,n){var i=no(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(SA(t))kA(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Zi(a,o)){var l=e.interleaved;l===null?(r.next=r,sw(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=QC(t,e,r,i),n!==null&&(r=kn(),Wi(n,t,i,r),EA(n,e,i))}}function SA(t){var e=t.alternate;return t===bt||e!==null&&e===bt}function kA(t,e){Ju=Ef=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function EA(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Wv(t,n)}}var Cf={readContext:Pi,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},QD={readContext:Pi,useCallback:function(t,e){return or().memoizedState=[t,e===void 0?null:e],t},useContext:Pi,useEffect:jb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mh(4194308,4,gA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mh(4,2,t,e)},useMemo:function(t,e){var n=or();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=or();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=YD.bind(null,bt,t),[i.memoizedState,t]},useRef:function(t){var e=or();return t={current:t},e.memoizedState=t},useState:zb,useDebugValue:pw,useDeferredValue:function(t){return or().memoizedState=t},useTransition:function(){var t=zb(!1),e=t[0];return t=JD.bind(null,t[1]),or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=bt,r=or();if(dt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),Wt===null)throw Error(te(349));ra&30||lA(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,jb(cA.bind(null,i,s,t),[t]),i.flags|=2048,Cc(9,uA.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=or(),e=Wt.identifierPrefix;if(dt){var n=Zr,i=Xr;n=(i&~(1<<32-Hi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=kc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},e_={readContext:Pi,useCallback:vA,useContext:Pi,useEffect:fw,useImperativeHandle:yA,useInsertionEffect:pA,useLayoutEffect:mA,useMemo:wA,useReducer:ig,useRef:fA,useState:function(){return ig(Ec)},useDebugValue:pw,useDeferredValue:function(t){var e=Oi();return bA(e,It.memoizedState,t)},useTransition:function(){var t=ig(Ec)[0],e=Oi().memoizedState;return[t,e]},useMutableSource:oA,useSyncExternalStore:aA,useId:xA,unstable_isNewReconciler:!1},t_={readContext:Pi,useCallback:vA,useContext:Pi,useEffect:fw,useImperativeHandle:yA,useInsertionEffect:pA,useLayoutEffect:mA,useMemo:wA,useReducer:rg,useRef:fA,useState:function(){return rg(Ec)},useDebugValue:pw,useDeferredValue:function(t){var e=Oi();return It===null?e.memoizedState=t:bA(e,It.memoizedState,t)},useTransition:function(){var t=rg(Ec)[0],e=Oi().memoizedState;return[t,e]},useMutableSource:oA,useSyncExternalStore:aA,useId:xA,unstable_isNewReconciler:!1};function $l(t,e){try{var n="",i=e;do n+=TM(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function sg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var n_=typeof WeakMap=="function"?WeakMap:Map;function CA(t,e,n){n=Yr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Pf||(Pf=!0,a0=i),Yy(t,e)},n}function AA(t,e,n){n=Yr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Yy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yy(t,e),typeof i!="function"&&(to===null?to=new Set([this]):to.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fb(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new n_;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=g_.bind(null,t,e,n),e.then(t,t))}function Ub(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vb(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yr(-1,1),e.tag=2,eo(n,e,1))),n.lanes|=1),t)}var i_=ms.ReactCurrentOwner,In=!1;function wn(t,e,n,i){e.child=t===null?rA(e,null,n,i):_l(e,t.child,n,i)}function Hb(t,e,n,i,r){n=n.render;var s=e.ref;return cl(e,r),i=dw(t,e,n,i,s,r),n=hw(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ls(t,e,r)):(dt&&n&&Qv(e),e.flags|=1,wn(t,e,i,r),e.child)}function Wb(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Sw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,PA(t,e,s,i,r)):(t=$h(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:yc,n(o,i)&&t.ref===e.ref)return ls(t,e,r)}return e.flags|=1,t=io(s,i),t.ref=e.ref,t.return=e,e.child=t}function PA(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(yc(s,i)&&t.ref===e.ref)if(In=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(In=!0);else return e.lanes=t.lanes,ls(t,e,r)}return qy(t,e,n,i,r)}function OA(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(el,qn),qn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,it(el,qn),qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,it(el,qn),qn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,it(el,qn),qn|=i;return wn(t,e,r,n),e.child}function TA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qy(t,e,n,i,r){var s=Fn(n)?na:fn.current;return s=Ml(e,s),cl(e,r),n=dw(t,e,n,i,s,r),i=hw(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ls(t,e,r)):(dt&&i&&Qv(e),e.flags|=1,wn(t,e,n,r),e.child)}function Gb(t,e,n,i,r){if(Fn(n)){var s=!0;yf(e)}else s=!1;if(cl(e,r),e.stateNode===null)Dh(t,e),nA(e,n,i),Jy(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Pi(u):(u=Fn(n)?na:fn.current,u=Ml(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Ib(e,o,i,u),Ps=!1;var h=e.memoizedState;o.state=h,Sf(e,i,o,r),l=e.memoizedState,a!==i||h!==l||jn.current||Ps?(typeof c=="function"&&(Zy(e,n,c,i),l=e.memoizedState),(a=Ps||$b(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,eA(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Di(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Pi(l):(l=Fn(n)?na:fn.current,l=Ml(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Ib(e,o,i,l),Ps=!1,h=e.memoizedState,o.state=h,Sf(e,i,o,r);var p=e.memoizedState;a!==d||h!==p||jn.current||Ps?(typeof f=="function"&&(Zy(e,n,f,i),p=e.memoizedState),(u=Ps||$b(e,n,u,i,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return Qy(t,e,n,i,s,r)}function Qy(t,e,n,i,r,s){TA(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Nb(e,n,!1),ls(t,e,s);i=e.stateNode,i_.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=_l(e,t.child,null,s),e.child=_l(e,null,a,s)):wn(t,e,a,s),e.memoizedState=i.state,r&&Nb(e,n,!0),e.child}function RA(t){var e=t.stateNode;e.pendingContext?Rb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rb(t,e.context,!1),aw(t,e.containerInfo)}function Kb(t,e,n,i,r){return Dl(),tw(r),e.flags|=256,wn(t,e,n,i),e.child}var e0={dehydrated:null,treeContext:null,retryLane:0};function t0(t){return{baseLanes:t,cachePool:null,transitions:null}}function NA(t,e,n){var i=e.pendingProps,r=gt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),it(gt,r&1),t===null)return Ky(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Up(o,i,0,null),t=Yo(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=t0(n),e.memoizedState=e0,t):mw(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return r_(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=io(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=io(a,s):(s=Yo(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?t0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=e0,i}return s=t.child,t=s.sibling,i=io(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function mw(t,e){return e=Up({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bd(t,e,n,i){return i!==null&&tw(i),_l(e,t.child,null,n),t=mw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function r_(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=sg(Error(te(422))),Bd(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Up({mode:"visible",children:i.children},r,0,null),s=Yo(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&_l(e,t.child,null,o),e.child.memoizedState=t0(o),e.memoizedState=e0,s);if(!(e.mode&1))return Bd(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(te(419)),i=sg(s,i,void 0),Bd(t,e,o,i)}if(a=(o&t.childLanes)!==0,In||a){if(i=Wt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,as(t,r),Wi(i,t,r,-1))}return xw(),i=sg(Error(te(421))),Bd(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=y_.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ii=Qs(r.nextSibling),si=e,dt=!0,Bi=null,t!==null&&(yi[vi++]=Xr,yi[vi++]=Zr,yi[vi++]=ia,Xr=t.id,Zr=t.overflow,ia=e),e=mw(e,i.children),e.flags|=4096,e)}function Xb(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Xy(t.return,e,n)}function og(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function MA(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(wn(t,e,i.children,n),i=gt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xb(t,n,e);else if(t.tag===19)Xb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(it(gt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&kf(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),og(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&kf(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}og(e,!0,n,null,s);break;case"together":og(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ls(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),sa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=io(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=io(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function s_(t,e,n){switch(e.tag){case 3:RA(e),Dl();break;case 5:sA(e);break;case 1:Fn(e.type)&&yf(e);break;case 4:aw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;it(bf,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(it(gt,gt.current&1),e.flags|=128,null):n&e.child.childLanes?NA(t,e,n):(it(gt,gt.current&1),t=ls(t,e,n),t!==null?t.sibling:null);it(gt,gt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return MA(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),it(gt,gt.current),i)break;return null;case 22:case 23:return e.lanes=0,OA(t,e,n)}return ls(t,e,n)}var DA,n0,_A,LA;DA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};n0=function(){};_A=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Vo(kr.current);var s=null;switch(n){case"input":r=Ey(t,r),i=Ey(t,i),s=[];break;case"select":r=St({},r,{value:void 0}),i=St({},i,{value:void 0}),s=[];break;case"textarea":r=Py(t,r),i=Py(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=mf)}Ty(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&st("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};LA=function(t,e,n,i){n!==i&&(e.flags|=4)};function vu(t,e){if(!dt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function o_(t,e,n){var i=e.pendingProps;switch(ew(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Fn(e.type)&&gf(),ln(e),null;case 3:return i=e.stateNode,Ll(),ut(jn),ut(fn),uw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&($d(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bi!==null&&(c0(Bi),Bi=null))),n0(t,e),ln(e),null;case 5:lw(e);var r=Vo(Sc.current);if(n=e.type,t!==null&&e.stateNode!=null)_A(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(te(166));return ln(e),null}if(t=Vo(kr.current),$d(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[mr]=e,i[bc]=s,t=(e.mode&1)!==0,n){case"dialog":st("cancel",i),st("close",i);break;case"iframe":case"object":case"embed":st("load",i);break;case"video":case"audio":for(r=0;r<$u.length;r++)st($u[r],i);break;case"source":st("error",i);break;case"img":case"image":case"link":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"input":ib(i,s),st("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},st("invalid",i);break;case"textarea":sb(i,s),st("invalid",i)}Ty(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ld(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ld(i.textContent,a,t),r=["children",""+a]):cc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&st("scroll",i)}switch(n){case"input":Pd(i),rb(i,s,!0);break;case"textarea":Pd(i),ob(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=mf)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[mr]=e,t[bc]=i,DA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ry(n,i),n){case"dialog":st("cancel",t),st("close",t),r=i;break;case"iframe":case"object":case"embed":st("load",t),r=i;break;case"video":case"audio":for(r=0;r<$u.length;r++)st($u[r],t);r=i;break;case"source":st("error",t),r=i;break;case"img":case"image":case"link":st("error",t),st("load",t),r=i;break;case"details":st("toggle",t),r=i;break;case"input":ib(t,i),r=Ey(t,i),st("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=St({},i,{value:void 0}),st("invalid",t);break;case"textarea":sb(t,i),r=Py(t,i),st("invalid",t);break;default:r=i}Ty(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&dc(t,l):typeof l=="number"&&dc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(cc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&st("scroll",t):l!=null&&zv(t,s,l,o))}switch(n){case"input":Pd(t),rb(t,i,!1);break;case"textarea":Pd(t),ob(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ao(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?ol(t,!!i.multiple,s,!1):i.defaultValue!=null&&ol(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=mf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)LA(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(te(166));if(n=Vo(Sc.current),Vo(kr.current),$d(e)){if(i=e.stateNode,n=e.memoizedProps,i[mr]=e,(s=i.nodeValue!==n)&&(t=si,t!==null))switch(t.tag){case 3:Ld(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ld(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[mr]=e,e.stateNode=i}return ln(e),null;case 13:if(ut(gt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dt&&ii!==null&&e.mode&1&&!(e.flags&128))qC(),Dl(),e.flags|=98560,s=!1;else if(s=$d(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(te(317));s[mr]=e}else Dl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),s=!1}else Bi!==null&&(c0(Bi),Bi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||gt.current&1?Ft===0&&(Ft=3):xw())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return Ll(),n0(t,e),t===null&&vc(e.stateNode.containerInfo),ln(e),null;case 10:return rw(e.type._context),ln(e),null;case 17:return Fn(e.type)&&gf(),ln(e),null;case 19:if(ut(gt),s=e.memoizedState,s===null)return ln(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)vu(s,!1);else{if(Ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kf(t),o!==null){for(e.flags|=128,vu(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return it(gt,gt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Rt()>Il&&(e.flags|=128,i=!0,vu(s,!1),e.lanes=4194304)}else{if(!i)if(t=kf(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!dt)return ln(e),null}else 2*Rt()-s.renderingStartTime>Il&&n!==1073741824&&(e.flags|=128,i=!0,vu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Rt(),e.sibling=null,n=gt.current,it(gt,i?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return bw(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?qn&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function a_(t,e){switch(ew(e),e.tag){case 1:return Fn(e.type)&&gf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ll(),ut(jn),ut(fn),uw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lw(e),null;case 13:if(ut(gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Dl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ut(gt),null;case 4:return Ll(),null;case 10:return rw(e.type._context),null;case 22:case 23:return bw(),null;case 24:return null;default:return null}}var zd=!1,dn=!1,l_=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Qa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){At(t,e,i)}else n.current=null}function i0(t,e,n){try{n()}catch(i){At(t,e,i)}}var Zb=!1;function u_(t,e){if(jy=hf,t=zC(),qv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fy={focusedElem:t,selectionRange:n},hf=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Di(e.type,g),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(x){At(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return p=Zb,Zb=!1,p}function Yu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&i0(e,n,s)}r=r.next}while(r!==i)}}function jp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function r0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $A(t){var e=t.alternate;e!==null&&(t.alternate=null,$A(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mr],delete e[bc],delete e[Hy],delete e[WD],delete e[GD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function IA(t){return t.tag===5||t.tag===3||t.tag===4}function Jb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||IA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function s0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mf));else if(i!==4&&(t=t.child,t!==null))for(s0(t,e,n),t=t.sibling;t!==null;)s0(t,e,n),t=t.sibling}function o0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(o0(t,e,n),t=t.sibling;t!==null;)o0(t,e,n),t=t.sibling}var Kt=null,Ii=!1;function xs(t,e,n){for(n=n.child;n!==null;)BA(t,e,n),n=n.sibling}function BA(t,e,n){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(Mp,n)}catch{}switch(n.tag){case 5:dn||Qa(n,e);case 6:var i=Kt,r=Ii;Kt=null,xs(t,e,n),Kt=i,Ii=r,Kt!==null&&(Ii?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(Ii?(t=Kt,n=n.stateNode,t.nodeType===8?Qm(t.parentNode,n):t.nodeType===1&&Qm(t,n),mc(t)):Qm(Kt,n.stateNode));break;case 4:i=Kt,r=Ii,Kt=n.stateNode.containerInfo,Ii=!0,xs(t,e,n),Kt=i,Ii=r;break;case 0:case 11:case 14:case 15:if(!dn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&i0(n,e,o),r=r.next}while(r!==i)}xs(t,e,n);break;case 1:if(!dn&&(Qa(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){At(n,e,a)}xs(t,e,n);break;case 21:xs(t,e,n);break;case 22:n.mode&1?(dn=(i=dn)||n.memoizedState!==null,xs(t,e,n),dn=i):xs(t,e,n);break;default:xs(t,e,n)}}function Yb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new l_),e.forEach(function(i){var r=v_.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ri(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,Ii=!1;break e;case 3:Kt=a.stateNode.containerInfo,Ii=!0;break e;case 4:Kt=a.stateNode.containerInfo,Ii=!0;break e}a=a.return}if(Kt===null)throw Error(te(160));BA(s,o,r),Kt=null,Ii=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){At(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zA(e,t),e=e.sibling}function zA(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ri(e,t),tr(t),i&4){try{Yu(3,t,t.return),jp(3,t)}catch(g){At(t,t.return,g)}try{Yu(5,t,t.return)}catch(g){At(t,t.return,g)}}break;case 1:Ri(e,t),tr(t),i&512&&n!==null&&Qa(n,n.return);break;case 5:if(Ri(e,t),tr(t),i&512&&n!==null&&Qa(n,n.return),t.flags&32){var r=t.stateNode;try{dc(r,"")}catch(g){At(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&oC(r,s),Ry(a,o);var u=Ry(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?dC(r,d):c==="dangerouslySetInnerHTML"?uC(r,d):c==="children"?dc(r,d):zv(r,c,d,u)}switch(a){case"input":Cy(r,s);break;case"textarea":aC(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ol(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?ol(r,!!s.multiple,s.defaultValue,!0):ol(r,!!s.multiple,s.multiple?[]:"",!1))}r[bc]=s}catch(g){At(t,t.return,g)}}break;case 6:if(Ri(e,t),tr(t),i&4){if(t.stateNode===null)throw Error(te(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){At(t,t.return,g)}}break;case 3:if(Ri(e,t),tr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{mc(e.containerInfo)}catch(g){At(t,t.return,g)}break;case 4:Ri(e,t),tr(t);break;case 13:Ri(e,t),tr(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(vw=Rt())),i&4&&Yb(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(dn=(u=dn)||c,Ri(e,t),dn=u):Ri(e,t),tr(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ge=t,c=t.child;c!==null;){for(d=ge=c;ge!==null;){switch(h=ge,f=h.child,h.tag){case 0:case 11:case 14:case 15:Yu(4,h,h.return);break;case 1:Qa(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){At(i,n,g)}}break;case 5:Qa(h,h.return);break;case 22:if(h.memoizedState!==null){Qb(d);continue}}f!==null?(f.return=h,ge=f):Qb(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=cC("display",o))}catch(g){At(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){At(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ri(e,t),tr(t),i&4&&Yb(t);break;case 21:break;default:Ri(e,t),tr(t)}}function tr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(IA(n)){var i=n;break e}n=n.return}throw Error(te(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(dc(r,""),i.flags&=-33);var s=Jb(t);o0(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Jb(t);s0(t,a,o);break;default:throw Error(te(161))}}catch(l){At(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function c_(t,e,n){ge=t,jA(t)}function jA(t,e,n){for(var i=(t.mode&1)!==0;ge!==null;){var r=ge,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||zd;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||dn;a=zd;var u=dn;if(zd=o,(dn=l)&&!u)for(ge=r;ge!==null;)o=ge,l=o.child,o.tag===22&&o.memoizedState!==null?ex(r):l!==null?(l.return=o,ge=l):ex(r);for(;s!==null;)ge=s,jA(s),s=s.sibling;ge=r,zd=a,dn=u}qb(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ge=s):qb(t)}}function qb(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||jp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!dn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Di(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Lb(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&mc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}dn||e.flags&512&&r0(e)}catch(h){At(e,e.return,h)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function Qb(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function ex(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jp(4,e)}catch(l){At(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){At(e,r,l)}}var s=e.return;try{r0(e)}catch(l){At(e,s,l)}break;case 5:var o=e.return;try{r0(e)}catch(l){At(e,o,l)}}}catch(l){At(e,e.return,l)}if(e===t){ge=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ge=a;break}ge=e.return}}var d_=Math.ceil,Af=ms.ReactCurrentDispatcher,gw=ms.ReactCurrentOwner,Ei=ms.ReactCurrentBatchConfig,Ve=0,Wt=null,Dt=null,nn=0,qn=0,el=So(0),Ft=0,Ac=null,sa=0,Fp=0,yw=0,qu=null,Ln=null,vw=0,Il=1/0,Dr=null,Pf=!1,a0=null,to=null,jd=!1,Hs=null,Of=0,Qu=0,l0=null,_h=-1,Lh=0;function kn(){return Ve&6?Rt():_h!==-1?_h:_h=Rt()}function no(t){return t.mode&1?Ve&2&&nn!==0?nn&-nn:XD.transition!==null?(Lh===0&&(Lh=kC()),Lh):(t=Xe,t!==0||(t=window.event,t=t===void 0?16:RC(t.type)),t):1}function Wi(t,e,n,i){if(50<Qu)throw Qu=0,l0=null,Error(te(185));od(t,n,i),(!(Ve&2)||t!==Wt)&&(t===Wt&&(!(Ve&2)&&(Fp|=n),Ft===4&&_s(t,nn)),Un(t,i),n===1&&Ve===0&&!(e.mode&1)&&(Il=Rt()+500,Ip&&ko()))}function Un(t,e){var n=t.callbackNode;XM(t,e);var i=df(t,t===Wt?nn:0);if(i===0)n!==null&&ub(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&ub(n),e===1)t.tag===0?KD(tx.bind(null,t)):ZC(tx.bind(null,t)),VD(function(){!(Ve&6)&&ko()}),n=null;else{switch(EC(i)){case 1:n=Hv;break;case 4:n=xC;break;case 16:n=cf;break;case 536870912:n=SC;break;default:n=cf}n=XA(n,FA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FA(t,e){if(_h=-1,Lh=0,Ve&6)throw Error(te(327));var n=t.callbackNode;if(dl()&&t.callbackNode!==n)return null;var i=df(t,t===Wt?nn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Tf(t,i);else{e=i;var r=Ve;Ve|=2;var s=VA();(Wt!==t||nn!==e)&&(Dr=null,Il=Rt()+500,Jo(t,e));do try{p_();break}catch(a){UA(t,a)}while(1);iw(),Af.current=s,Ve=r,Dt!==null?e=0:(Wt=null,nn=0,e=Ft)}if(e!==0){if(e===2&&(r=Ly(t),r!==0&&(i=r,e=u0(t,r))),e===1)throw n=Ac,Jo(t,0),_s(t,i),Un(t,Rt()),n;if(e===6)_s(t,i);else{if(r=t.current.alternate,!(i&30)&&!h_(r)&&(e=Tf(t,i),e===2&&(s=Ly(t),s!==0&&(i=s,e=u0(t,s))),e===1))throw n=Ac,Jo(t,0),_s(t,i),Un(t,Rt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(te(345));case 2:_o(t,Ln,Dr);break;case 3:if(_s(t,i),(i&130023424)===i&&(e=vw+500-Rt(),10<e)){if(df(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){kn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Vy(_o.bind(null,t,Ln,Dr),e);break}_o(t,Ln,Dr);break;case 4:if(_s(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Hi(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Rt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*d_(i/1960))-i,10<i){t.timeoutHandle=Vy(_o.bind(null,t,Ln,Dr),i);break}_o(t,Ln,Dr);break;case 5:_o(t,Ln,Dr);break;default:throw Error(te(329))}}}return Un(t,Rt()),t.callbackNode===n?FA.bind(null,t):null}function u0(t,e){var n=qu;return t.current.memoizedState.isDehydrated&&(Jo(t,e).flags|=256),t=Tf(t,e),t!==2&&(e=Ln,Ln=n,e!==null&&c0(e)),t}function c0(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function h_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Zi(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _s(t,e){for(e&=~yw,e&=~Fp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hi(e),i=1<<n;t[n]=-1,e&=~i}}function tx(t){if(Ve&6)throw Error(te(327));dl();var e=df(t,0);if(!(e&1))return Un(t,Rt()),null;var n=Tf(t,e);if(t.tag!==0&&n===2){var i=Ly(t);i!==0&&(e=i,n=u0(t,i))}if(n===1)throw n=Ac,Jo(t,0),_s(t,e),Un(t,Rt()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_o(t,Ln,Dr),Un(t,Rt()),null}function ww(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(Il=Rt()+500,Ip&&ko())}}function oa(t){Hs!==null&&Hs.tag===0&&!(Ve&6)&&dl();var e=Ve;Ve|=1;var n=Ei.transition,i=Xe;try{if(Ei.transition=null,Xe=1,t)return t()}finally{Xe=i,Ei.transition=n,Ve=e,!(Ve&6)&&ko()}}function bw(){qn=el.current,ut(el)}function Jo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UD(n)),Dt!==null)for(n=Dt.return;n!==null;){var i=n;switch(ew(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&gf();break;case 3:Ll(),ut(jn),ut(fn),uw();break;case 5:lw(i);break;case 4:Ll();break;case 13:ut(gt);break;case 19:ut(gt);break;case 10:rw(i.type._context);break;case 22:case 23:bw()}n=n.return}if(Wt=t,Dt=t=io(t.current,null),nn=qn=e,Ft=0,Ac=null,yw=Fp=sa=0,Ln=qu=null,Uo!==null){for(e=0;e<Uo.length;e++)if(n=Uo[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Uo=null}return t}function UA(t,e){do{var n=Dt;try{if(iw(),Nh.current=Cf,Ef){for(var i=bt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ef=!1}if(ra=0,Vt=It=bt=null,Ju=!1,kc=0,gw.current=null,n===null||n.return===null){Ft=1,Ac=e,Dt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Ub(o);if(f!==null){f.flags&=-257,Vb(f,o,a,s,e),f.mode&1&&Fb(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){Fb(s,u,e),xw();break e}l=Error(te(426))}}else if(dt&&a.mode&1){var w=Ub(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Vb(w,o,a,s,e),tw($l(l,a));break e}}s=l=$l(l,a),Ft!==4&&(Ft=2),qu===null?qu=[s]:qu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=CA(s,l,e);_b(s,m);break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(to===null||!to.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=AA(s,a,e);_b(s,x);break e}}s=s.return}while(s!==null)}WA(n)}catch(k){e=k,Dt===n&&n!==null&&(Dt=n=n.return);continue}break}while(1)}function VA(){var t=Af.current;return Af.current=Cf,t===null?Cf:t}function xw(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Wt===null||!(sa&268435455)&&!(Fp&268435455)||_s(Wt,nn)}function Tf(t,e){var n=Ve;Ve|=2;var i=VA();(Wt!==t||nn!==e)&&(Dr=null,Jo(t,e));do try{f_();break}catch(r){UA(t,r)}while(1);if(iw(),Ve=n,Af.current=i,Dt!==null)throw Error(te(261));return Wt=null,nn=0,Ft}function f_(){for(;Dt!==null;)HA(Dt)}function p_(){for(;Dt!==null&&!zM();)HA(Dt)}function HA(t){var e=KA(t.alternate,t,qn);t.memoizedProps=t.pendingProps,e===null?WA(t):Dt=e,gw.current=null}function WA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=a_(n,e),n!==null){n.flags&=32767,Dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ft=6,Dt=null;return}}else if(n=o_(n,e,qn),n!==null){Dt=n;return}if(e=e.sibling,e!==null){Dt=e;return}Dt=e=t}while(e!==null);Ft===0&&(Ft=5)}function _o(t,e,n){var i=Xe,r=Ei.transition;try{Ei.transition=null,Xe=1,m_(t,e,n,i)}finally{Ei.transition=r,Xe=i}return null}function m_(t,e,n,i){do dl();while(Hs!==null);if(Ve&6)throw Error(te(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ZM(t,s),t===Wt&&(Dt=Wt=null,nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jd||(jd=!0,XA(cf,function(){return dl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ei.transition,Ei.transition=null;var o=Xe;Xe=1;var a=Ve;Ve|=4,gw.current=null,u_(t,n),zA(n,t),LD(Fy),hf=!!jy,Fy=jy=null,t.current=n,c_(n),jM(),Ve=a,Xe=o,Ei.transition=s}else t.current=n;if(jd&&(jd=!1,Hs=t,Of=r),s=t.pendingLanes,s===0&&(to=null),VM(n.stateNode),Un(t,Rt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Pf)throw Pf=!1,t=a0,a0=null,t;return Of&1&&t.tag!==0&&dl(),s=t.pendingLanes,s&1?t===l0?Qu++:(Qu=0,l0=t):Qu=0,ko(),null}function dl(){if(Hs!==null){var t=EC(Of),e=Ei.transition,n=Xe;try{if(Ei.transition=null,Xe=16>t?16:t,Hs===null)var i=!1;else{if(t=Hs,Hs=null,Of=0,Ve&6)throw Error(te(331));var r=Ve;for(Ve|=4,ge=t.current;ge!==null;){var s=ge,o=s.child;if(ge.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ge=u;ge!==null;){var c=ge;switch(c.tag){case 0:case 11:case 15:Yu(8,c,s)}var d=c.child;if(d!==null)d.return=c,ge=d;else for(;ge!==null;){c=ge;var h=c.sibling,f=c.return;if($A(c),c===u){ge=null;break}if(h!==null){h.return=f,ge=h;break}ge=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}ge=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ge=o;else e:for(;ge!==null;){if(s=ge,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yu(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,ge=m;break e}ge=s.return}}var y=t.current;for(ge=y;ge!==null;){o=ge;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ge=v;else e:for(o=y;ge!==null;){if(a=ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jp(9,a)}}catch(k){At(a,a.return,k)}if(a===o){ge=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ge=x;break e}ge=a.return}}if(Ve=r,ko(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(Mp,t)}catch{}i=!0}return i}finally{Xe=n,Ei.transition=e}}return!1}function nx(t,e,n){e=$l(n,e),e=CA(t,e,1),t=eo(t,e,1),e=kn(),t!==null&&(od(t,1,e),Un(t,e))}function At(t,e,n){if(t.tag===3)nx(t,t,n);else for(;e!==null;){if(e.tag===3){nx(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(to===null||!to.has(i))){t=$l(n,t),t=AA(e,t,1),e=eo(e,t,1),t=kn(),e!==null&&(od(e,1,t),Un(e,t));break}}e=e.return}}function g_(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=kn(),t.pingedLanes|=t.suspendedLanes&n,Wt===t&&(nn&n)===n&&(Ft===4||Ft===3&&(nn&130023424)===nn&&500>Rt()-vw?Jo(t,0):yw|=n),Un(t,e)}function GA(t,e){e===0&&(t.mode&1?(e=Rd,Rd<<=1,!(Rd&130023424)&&(Rd=4194304)):e=1);var n=kn();t=as(t,e),t!==null&&(od(t,e,n),Un(t,n))}function y_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GA(t,n)}function v_(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(te(314))}i!==null&&i.delete(e),GA(t,n)}var KA;KA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jn.current)In=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return In=!1,s_(t,e,n);In=!!(t.flags&131072)}else In=!1,dt&&e.flags&1048576&&JC(e,wf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Dh(t,e),t=e.pendingProps;var r=Ml(e,fn.current);cl(e,n),r=dw(null,e,i,t,r,n);var s=hw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fn(i)?(s=!0,yf(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ow(e),r.updater=Bp,e.stateNode=r,r._reactInternals=e,Jy(e,i,t,n),e=Qy(null,e,i,!0,s,n)):(e.tag=0,dt&&s&&Qv(e),wn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Dh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=b_(i),t=Di(i,t),r){case 0:e=qy(null,e,i,t,n);break e;case 1:e=Gb(null,e,i,t,n);break e;case 11:e=Hb(null,e,i,t,n);break e;case 14:e=Wb(null,e,i,Di(i.type,t),n);break e}throw Error(te(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Di(i,r),qy(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Di(i,r),Gb(t,e,i,r,n);case 3:e:{if(RA(e),t===null)throw Error(te(387));i=e.pendingProps,s=e.memoizedState,r=s.element,eA(t,e),Sf(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=$l(Error(te(423)),e),e=Kb(t,e,i,n,r);break e}else if(i!==r){r=$l(Error(te(424)),e),e=Kb(t,e,i,n,r);break e}else for(ii=Qs(e.stateNode.containerInfo.firstChild),si=e,dt=!0,Bi=null,n=rA(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dl(),i===r){e=ls(t,e,n);break e}wn(t,e,i,n)}e=e.child}return e;case 5:return sA(e),t===null&&Ky(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Uy(i,r)?o=null:s!==null&&Uy(i,s)&&(e.flags|=32),TA(t,e),wn(t,e,o,n),e.child;case 6:return t===null&&Ky(e),null;case 13:return NA(t,e,n);case 4:return aw(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=_l(e,null,i,n):wn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Di(i,r),Hb(t,e,i,r,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,it(bf,i._currentValue),i._currentValue=o,s!==null)if(Zi(s.value,o)){if(s.children===r.children&&!jn.current){e=ls(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Yr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Xy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(te(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,cl(e,n),r=Pi(r),i=i(r),e.flags|=1,wn(t,e,i,n),e.child;case 14:return i=e.type,r=Di(i,e.pendingProps),r=Di(i.type,r),Wb(t,e,i,r,n);case 15:return PA(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Di(i,r),Dh(t,e),e.tag=1,Fn(i)?(t=!0,yf(e)):t=!1,cl(e,n),nA(e,i,r),Jy(e,i,r,n),Qy(null,e,i,!0,t,n);case 19:return MA(t,e,n);case 22:return OA(t,e,n)}throw Error(te(156,e.tag))};function XA(t,e){return bC(t,e)}function w_(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(t,e,n,i){return new w_(t,e,n,i)}function Sw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function b_(t){if(typeof t=="function")return Sw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fv)return 11;if(t===Uv)return 14}return 2}function io(t,e){var n=t.alternate;return n===null?(n=xi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $h(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Sw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ha:return Yo(n.children,r,s,e);case jv:o=8,r|=8;break;case by:return t=xi(12,n,e,r|2),t.elementType=by,t.lanes=s,t;case xy:return t=xi(13,n,e,r),t.elementType=xy,t.lanes=s,t;case Sy:return t=xi(19,n,e,r),t.elementType=Sy,t.lanes=s,t;case iC:return Up(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tC:o=10;break e;case nC:o=9;break e;case Fv:o=11;break e;case Uv:o=14;break e;case As:o=16,i=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=xi(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Yo(t,e,n,i){return t=xi(7,t,i,e),t.lanes=n,t}function Up(t,e,n,i){return t=xi(22,t,i,e),t.elementType=iC,t.lanes=n,t.stateNode={isHidden:!1},t}function ag(t,e,n){return t=xi(6,t,null,e),t.lanes=n,t}function lg(t,e,n){return e=xi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function x_(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Um(0),this.expirationTimes=Um(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Um(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function kw(t,e,n,i,r,s,o,a,l){return t=new x_(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ow(s),t}function S_(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Va,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function ZA(t){if(!t)return lo;t=t._reactInternals;e:{if(wa(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(Fn(n))return XC(t,n,e)}return e}function JA(t,e,n,i,r,s,o,a,l){return t=kw(n,i,!0,t,r,s,o,a,l),t.context=ZA(null),n=t.current,i=kn(),r=no(n),s=Yr(i,r),s.callback=e??null,eo(n,s,r),t.current.lanes=r,od(t,r,i),Un(t,i),t}function Vp(t,e,n,i){var r=e.current,s=kn(),o=no(r);return n=ZA(n),e.context===null?e.context=n:e.pendingContext=n,e=Yr(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=eo(r,e,o),t!==null&&(Wi(t,r,o,s),Rh(t,r,o)),o}function Rf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ix(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ew(t,e){ix(t,e),(t=t.alternate)&&ix(t,e)}function k_(){return null}var YA=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cw(t){this._internalRoot=t}Hp.prototype.render=Cw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));Vp(t,e,null,null)};Hp.prototype.unmount=Cw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oa(function(){Vp(null,t,null,null)}),e[os]=null}};function Hp(t){this._internalRoot=t}Hp.prototype.unstable_scheduleHydration=function(t){if(t){var e=PC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ds.length&&e!==0&&e<Ds[n].priority;n++);Ds.splice(n,0,t),n===0&&TC(t)}};function Aw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rx(){}function E_(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Rf(o);s.call(u)}}var o=JA(e,i,t,0,null,!1,!1,"",rx);return t._reactRootContainer=o,t[os]=o.current,vc(t.nodeType===8?t.parentNode:t),oa(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Rf(l);a.call(u)}}var l=kw(t,0,!1,null,null,!1,!1,"",rx);return t._reactRootContainer=l,t[os]=l.current,vc(t.nodeType===8?t.parentNode:t),oa(function(){Vp(e,l,n,i)}),l}function Gp(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Rf(o);a.call(l)}}Vp(e,o,t,r)}else o=E_(n,e,t,r,i);return Rf(o)}CC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lu(e.pendingLanes);n!==0&&(Wv(e,n|1),Un(e,Rt()),!(Ve&6)&&(Il=Rt()+500,ko()))}break;case 13:oa(function(){var i=as(t,1);if(i!==null){var r=kn();Wi(i,t,1,r)}}),Ew(t,1)}};Gv=function(t){if(t.tag===13){var e=as(t,134217728);if(e!==null){var n=kn();Wi(e,t,134217728,n)}Ew(t,134217728)}};AC=function(t){if(t.tag===13){var e=no(t),n=as(t,e);if(n!==null){var i=kn();Wi(n,t,e,i)}Ew(t,e)}};PC=function(){return Xe};OC=function(t,e){var n=Xe;try{return Xe=t,e()}finally{Xe=n}};My=function(t,e,n){switch(e){case"input":if(Cy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=$p(i);if(!r)throw Error(te(90));sC(i),Cy(i,r)}}}break;case"textarea":aC(t,n);break;case"select":e=n.value,e!=null&&ol(t,!!n.multiple,e,!1)}};pC=ww;mC=oa;var C_={usingClientEntryPoint:!1,Events:[ld,Xa,$p,hC,fC,ww]},wu={findFiberByHostInstance:Fo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},A_={bundleType:wu.bundleType,version:wu.version,rendererPackageName:wu.rendererPackageName,rendererConfig:wu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vC(t),t===null?null:t.stateNode},findFiberByHostInstance:wu.findFiberByHostInstance||k_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fd.isDisabled&&Fd.supportsFiber)try{Mp=Fd.inject(A_),Sr=Fd}catch{}}ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C_;ai.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Aw(e))throw Error(te(200));return S_(t,e,null,n)};ai.createRoot=function(t,e){if(!Aw(t))throw Error(te(299));var n=!1,i="",r=YA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=kw(t,1,!1,null,null,n,!1,i,r),t[os]=e.current,vc(t.nodeType===8?t.parentNode:t),new Cw(e)};ai.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=vC(e),t=t===null?null:t.stateNode,t};ai.flushSync=function(t){return oa(t)};ai.hydrate=function(t,e,n){if(!Wp(e))throw Error(te(200));return Gp(null,t,e,!0,n)};ai.hydrateRoot=function(t,e,n){if(!Aw(t))throw Error(te(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=YA;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JA(e,null,t,1,n??null,r,!1,s,o),t[os]=e.current,vc(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Hp(e)};ai.render=function(t,e,n){if(!Wp(e))throw Error(te(200));return Gp(null,t,e,!1,n)};ai.unmountComponentAtNode=function(t){if(!Wp(t))throw Error(te(40));return t._reactRootContainer?(oa(function(){Gp(null,null,t,!1,function(){t._reactRootContainer=null,t[os]=null})}),!0):!1};ai.unstable_batchedUpdates=ww;ai.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Wp(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return Gp(t,e,n,!1,i)};ai.version="18.2.0-next-9e3b772b8-20220608";function qA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qA)}catch(t){console.error(t)}}qA(),JE.exports=ai;var ba=JE.exports;const QA=tu(ba);var sx=ba;vy.createRoot=sx.createRoot,vy.hydrateRoot=sx.hydrateRoot;function P_(t,{insertAt:e}={}){if(!t||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}P_(`[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 6px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:-3px;margin-right:4px}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:-1px}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:auto;border:none;cursor:pointer;outline:none;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:auto}[data-sonner-toast] [data-cancel]{color:var(--color);background:var(--border-color)}[data-sonner-toast] [data-close-button]{position:absolute;left:0;top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:translate(-35%,-35%);border-radius:50%;opacity:0;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]{opacity:1}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}
`);var O_=t=>{switch(t){case"success":return N_;case"error":return M_;default:return null}},T_=Array(12).fill(0),R_=({visible:t})=>ue.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},ue.createElement("div",{className:"sonner-spinner"},T_.map((e,n)=>ue.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),N_=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),M_=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),d0=0,D_=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...i}=t,r=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:d0++;return this.toasts.find(s=>s.id===r)?this.toasts=this.toasts.map(s=>s.id===r?(this.publish({...s,...t,id:r,title:n}),{...s,...t,id:r,title:n}):s):this.addToast({title:n,...i,id:r}),r},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.promise=(t,e)=>{let n=this.create({...e,promise:t,type:"loading",message:e.loading});return(t instanceof Promise?t:t()).then(i=>{let r=typeof e.success=="function"?e.success(i):e.success;this.create({id:n,type:"success",message:r})}).catch(i=>{let r=typeof e.error=="function"?e.error(i):e.error;this.create({id:n,type:"error",message:r})}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||d0++;this.publish({jsx:t(n),id:n,...e})},this.subscribers=[],this.toasts=[]}},Os=new D_,__=(t,e)=>{let n=(e==null?void 0:e.id)||d0++;return Os.addToast({title:t,...e,id:n}),n},L_=__,Kp=Object.assign(L_,{success:Os.success,error:Os.error,custom:Os.custom,message:Os.message,promise:Os.promise,dismiss:Os.dismiss}),$_=3,I_="32px",B_=4e3,z_=356,e2=14,j_=20,F_=200,U_=t=>{let{invert:e,toast:n,interacting:i,setHeights:r,visibleToasts:s,heights:o,index:a,toasts:l,expanded:u,removeToast:c,closeButton:d,style:h,className:f="",descriptionClassName:p="",duration:g,position:w,expandByDefault:m}=t,[y,v]=ue.useState(!1),[x,k]=ue.useState(!1),[O,T]=ue.useState(!1),[A,N]=ue.useState(!1),[_,M]=ue.useState(0),[H,F]=ue.useState(0),j=ue.useRef(null),X=a===0,J=a+1<=s,G=n.type,$=n.className||"",I=n.descriptionClassName||"",Y=ue.useMemo(()=>o.findIndex(V=>V.toastId===n.id)||0,[o,n.id]),ae=ue.useMemo(()=>n.duration||g||B_,[n.duration,g]),ve=ue.useRef(0),Se=ue.useRef(0),U=ue.useRef(ae),B=ue.useRef(0),W=ue.useRef(null),[b,C]=w.split("-"),D=ue.useMemo(()=>o.reduce((V,Z,Q)=>Q>=Y?V:V+Z.height,0),[o,Y]),R=n.invert||e,z=G==="loading";Se.current=ue.useMemo(()=>Y*e2+D,[Y,D]),ue.useEffect(()=>{v(!0)},[]),ue.useLayoutEffect(()=>{if(!y)return;let V=j.current,Z=V.style.height;V.style.height="auto";let Q=V.getBoundingClientRect().height;V.style.height=Z,F(Q),r(Te=>Te.find(de=>de.toastId===n.id)?Te.map(de=>de.toastId===n.id?{...de,height:Q}:de):[{toastId:n.id,height:Q},...Te])},[y,n.title,n.description,r,n.id]);let K=ue.useCallback(()=>{k(!0),M(Se.current),r(V=>V.filter(Z=>Z.toastId!==n.id)),setTimeout(()=>{c(n)},F_)},[n,c,r,Se]);return ue.useEffect(()=>{if(n.promise&&G==="loading"||n.duration===1/0)return;let V;return u||i?(()=>{if(B.current<ve.current){let Z=new Date().getTime()-ve.current;U.current=U.current-Z}B.current=new Date().getTime()})():(ve.current=new Date().getTime(),V=setTimeout(()=>{var Z;(Z=n.onAutoClose)==null||Z.call(n,n),K()},U.current)),()=>clearTimeout(V)},[u,i,m,n,ae,K,n.promise,G]),ue.useEffect(()=>{let V=j.current;if(V){let Z=V.getBoundingClientRect().height;return F(Z),r(Q=>[{toastId:n.id,height:Z},...Q]),()=>r(Q=>Q.filter(Te=>Te.toastId!==n.id))}},[r,n.id]),ue.useEffect(()=>{n.delete&&K()},[K,n.delete]),ue.createElement("li",{"aria-live":n.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:j,className:f+" "+$,"data-sonner-toast":"","data-styled":!n.jsx,"data-mounted":y,"data-promise":!!n.promise,"data-removed":x,"data-visible":J,"data-y-position":b,"data-x-position":C,"data-index":a,"data-front":X,"data-swiping":O,"data-type":G,"data-invert":R,"data-swipe-out":A,"data-expanded":!!(u||m&&y),style:{"--index":a,"--toasts-before":a,"--z-index":l.length-a,"--offset":`${x?_:Se.current}px`,"--initial-height":m?"auto":`${H}px`,...h,...n.style},onPointerDown:V=>{z||(M(Se.current),V.target.setPointerCapture(V.pointerId),V.target.tagName!=="BUTTON"&&(T(!0),W.current={x:V.clientX,y:V.clientY}))},onPointerUp:()=>{var V,Z,Q;if(A)return;W.current=null;let Te=Number(((V=j.current)==null?void 0:V.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(Te)>=j_){M(Se.current),(Z=n.onDismiss)==null||Z.call(n,n),K(),N(!0);return}(Q=j.current)==null||Q.style.setProperty("--swipe-amount","0px"),T(!1)},onPointerMove:V=>{var Z;if(!W.current)return;let Q=V.clientY-W.current.y,Te=V.clientX-W.current.x,de=(b==="top"?Math.min:Math.max)(0,Q),Re=V.pointerType==="touch"?10:2;Math.abs(de)>Re?(Z=j.current)==null||Z.style.setProperty("--swipe-amount",`${Q}px`):Math.abs(Te)>Re&&(W.current=null)}},d&&!n.jsx?ue.createElement("button",{"aria-label":"Close toast","data-disabled":z,"data-close-button":!0,onClick:z?void 0:()=>{var V;K(),(V=n.onDismiss)==null||V.call(n,n)}},ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ue.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ue.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,n.jsx||ue.isValidElement(n.title)?n.jsx||n.title:ue.createElement(ue.Fragment,null,G||n.icon||n.promise?ue.createElement("div",{"data-icon":""},n.promise?ue.createElement(R_,{visible:G==="loading"}):null,n.icon||O_(G)):null,ue.createElement("div",{"data-content":""},ue.createElement("div",{"data-title":""},n.title),n.description?ue.createElement("div",{"data-description":"",className:p+I},n.description):null),n.cancel?ue.createElement("button",{"data-button":!0,"data-cancel":!0,onClick:()=>{var V;K(),(V=n.cancel)!=null&&V.onClick&&n.cancel.onClick()}},n.cancel.label):null,n.action?ue.createElement("button",{"data-button":"",onClick:V=>{var Z;(Z=n.action)==null||Z.onClick(V),!V.defaultPrevented&&K()}},n.action.label):null))},V_=t=>{var e;let{invert:n,position:i="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,theme:u="light",richColors:c,duration:d,style:h,visibleToasts:f=$_,toastOptions:p}=t,[g,w]=ue.useState([]),[m,y]=ue.useState([]),[v,x]=ue.useState(!1),[k,O]=ue.useState(!1),[T,A]=ue.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),[N,_]=i.split("-"),M=ue.useRef(null),H=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=ue.useCallback(j=>w(X=>X.filter(({id:J})=>J!==j.id)),[]);return ue.useEffect(()=>Os.subscribe(j=>{if(j.dismiss){w(X=>X.map(J=>J.id===j.id?{...J,delete:!0}:J));return}setTimeout(()=>{QA.flushSync(()=>{w(X=>{let J=X.findIndex(G=>G.id===j.id);return J!==-1?[...X.slice(0,J),{...X[J],...j},...X.slice(J+1)]:[j,...X]})})})}),[]),ue.useEffect(()=>{if(u!=="system"){A(u);return}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:j})=>{A(j?"dark":"light")})},[u]),ue.useEffect(()=>{g.length<=1&&x(!1)},[g]),ue.useEffect(()=>{let j=X=>{var J,G;r.every($=>X[$]||X.code===$)&&(x(!0),(J=M.current)==null||J.focus()),X.code==="Escape"&&(document.activeElement===M.current||(G=M.current)!=null&&G.contains(document.activeElement))&&x(!1)};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[r]),g.length?ue.createElement("section",{"aria-label":`Notifications ${H}`,tabIndex:-1},ue.createElement("ol",{tabIndex:-1,ref:M,className:a,"data-sonner-toaster":!0,"data-theme":T,"data-rich-colors":c,"data-y-position":N,"data-x-position":_,style:{"--front-toast-height":`${(e=m[0])==null?void 0:e.height}px`,"--offset":typeof l=="number"?`${l}px`:l||I_,"--width":`${z_}px`,"--gap":`${e2}px`,...h},onMouseEnter:()=>x(!0),onMouseMove:()=>x(!0),onMouseLeave:()=>{k||x(!1)},onPointerDown:()=>{O(!0)},onPointerUp:()=>O(!1)},g.map((j,X)=>ue.createElement(U_,{key:j.id,index:X,toast:j,duration:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:f,closeButton:o,interacting:k,position:i,style:p==null?void 0:p.style,removeToast:F,toasts:g,heights:m,setHeights:y,expandByDefault:s,expanded:v})))):null};let H_=0;function ke(t,e){const n=`atom${++H_}`,i={toString:()=>n};return typeof t=="function"?i.read=t:(i.init=t,i.read=r=>r(i),i.write=(r,s,o)=>s(i,typeof o=="function"?o(r(i)):o)),e&&(i.write=e),i}const ox=t=>"init"in t,ax=t=>!!t.write,Nf=new WeakMap,W_=(t,e)=>{Nf.set(t,e),t.catch(()=>{}).finally(()=>Nf.delete(t))},lx=(t,e)=>{const n=Nf.get(t);n&&(Nf.delete(t),n(e))},ux=(t,e)=>{t.status="fulfilled",t.value=e},cx=(t,e)=>{t.status="rejected",t.reason=e},G_=t=>typeof(t==null?void 0:t.then)=="function",Ud=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),dx=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),bu=t=>"v"in t&&t.v instanceof Promise,K_=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Vd=t=>{if("e"in t)throw t.e;return t.v},Pw=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let i,r;const s=A=>t.get(A),o=(A,N)=>{const _=t.get(A);if(t.set(A,N),n.has(A)||n.set(A,_),_&&bu(_)){const M="v"in N?N.v instanceof Promise?N.v:Promise.resolve(N.v):Promise.reject(N.e);lx(_.v,M)}},a=(A,N,_)=>{const M=new Map;let H=!1;_.forEach((F,j)=>{!F&&j===A&&(F=N),F&&(M.set(j,F),N.d.get(j)!==F&&(H=!0))}),(H||N.d.size!==M.size)&&(N.d=M)},l=(A,N,_)=>{const M=s(A),H={d:(M==null?void 0:M.d)||new Map,v:N};if(_&&a(A,H,_),M&&Ud(M,H)&&M.d===H.d)return M;if(M&&bu(M)&&bu(H)&&K_(M,H)){if(M.d===H.d)return M;H.v=M.v}return o(A,H),H},u=(A,N,_,M)=>{if(G_(N)){let H;const F=new Promise((j,X)=>{let J=!1;N.then(G=>{if(!J){J=!0;const $=s(A),I=l(A,F,_);ux(F,G),j(G),($==null?void 0:$.d)!==I.d&&k(A,I,$==null?void 0:$.d)}},G=>{if(!J){J=!0;const $=s(A),I=l(A,F,_);cx(F,G),X(G),($==null?void 0:$.d)!==I.d&&k(A,I,$==null?void 0:$.d)}}),H=G=>{J||(J=!0,G.then($=>ux(F,$),$=>cx(F,$)),j(G))}});return F.orig=N,F.status="pending",W_(F,j=>{j&&H(j),M==null||M()}),l(A,F,_)}return l(A,N,_)},c=(A,N,_)=>{const M=s(A),H={d:(M==null?void 0:M.d)||new Map,e:N};return _&&a(A,H,_),M&&dx(M,H)&&M.d===H.d?M:(o(A,H),H)},d=(A,N)=>{const _=s(A);if(!N&&_&&(e.has(A)||Array.from(_.d).every(([G,$])=>G===A||d(G)===$)))return _;const M=new Map;let H=!0;const F=G=>{if(G===A){const I=s(G);if(I)return M.set(G,I),Vd(I);if(ox(G))return M.set(G,void 0),G.init;throw new Error("no atom init")}const $=d(G);return M.set(G,$),Vd($)};let j,X;const J={get signal(){return j||(j=new AbortController),j.signal},get setSelf(){return!X&&ax(A)&&(X=(...G)=>{if(!H)return y(A,...G)}),X}};try{const G=A.read(F,J);return u(A,G,M,()=>j==null?void 0:j.abort())}catch(G){return c(A,G,M)}finally{H=!1}},h=A=>Vd(d(A)),f=A=>{let N=e.get(A);return N||(N=v(A)),N},p=(A,N)=>!N.l.size&&(!N.t.size||N.t.size===1&&N.t.has(A)),g=A=>{const N=e.get(A);N&&p(A,N)&&x(A)},w=A=>{const N=new Map,_=new WeakMap,M=F=>{const j=e.get(F);j==null||j.t.forEach(X=>{X!==F&&(N.set(X,(N.get(X)||new Set).add(F)),_.set(X,(_.get(X)||0)+1),M(X))})};M(A);const H=F=>{const j=e.get(F);j==null||j.t.forEach(X=>{var J;if(X!==F){let G=_.get(X);if(G&&_.set(X,--G),!G){let $=!!((J=N.get(X))!=null&&J.size);if($){const I=s(X),Y=d(X,!0);$=!I||!Ud(I,Y)}$||N.forEach(I=>I.delete(X))}H(X)}})};H(A)},m=(A,...N)=>{let _=!0;const M=j=>Vd(d(j)),H=(j,...X)=>{let J;if(j===A){if(!ox(j))throw new Error("atom not writable");const G=s(j),$=u(j,X[0]);(!G||!Ud(G,$))&&w(j)}else J=m(j,...X);if(!_){const G=O()}return J},F=A.write(M,H,...N);return _=!1,F},y=(A,...N)=>{const _=m(A,...N),M=O();return _},v=(A,N)=>{var _;(_=s(A))==null||_.d.forEach((H,F)=>{const j=e.get(F);j?j.t.add(A):F!==A&&v(F,A)}),d(A);const M={t:new Set(N&&[N]),l:new Set};if(e.set(A,M),ax(A)&&A.onMount){const H=A.onMount((...F)=>y(A,...F));H&&(M.u=H)}return M},x=A=>{var N;const _=(N=e.get(A))==null?void 0:N.u;_&&_(),e.delete(A);const M=s(A);M&&(bu(M)&&lx(M.v),M.d.forEach((H,F)=>{if(F!==A){const j=e.get(F);j&&(j.t.delete(A),p(F,j)&&x(F))}}))},k=(A,N,_)=>{const M=new Set(N.d.keys());_==null||_.forEach((H,F)=>{if(M.has(F)){M.delete(F);return}const j=e.get(F);j&&(j.t.delete(A),p(F,j)&&x(F))}),M.forEach(H=>{const F=e.get(H);F?F.t.add(A):e.has(A)&&v(H,A)})},O=()=>{let A;for(;n.size;){const N=Array.from(n);n.clear(),N.forEach(([_,M])=>{const H=s(_);if(H){H.d!==(M==null?void 0:M.d)&&k(_,H,M==null?void 0:M.d);const F=e.get(_);F&&!(M&&!bu(M)&&(Ud(M,H)||dx(M,H)))&&F.l.forEach(j=>j())}})}};return{get:h,set:y,sub:(A,N)=>{const _=f(A),M=O(),H=_.l;return H.add(N),()=>{H.delete(N),g(A)}}}};let ug;const X_=()=>(ug||(ug=Pw()),ug),t2=S.createContext(void 0),n2=t=>{const e=S.useContext(t2);return(t==null?void 0:t.store)||e||X_()},Z_=({children:t,store:e})=>{const n=S.useRef();return!e&&!n.current&&(n.current=Pw()),S.createElement(t2.Provider,{value:e||n.current},t)},J_=t=>typeof(t==null?void 0:t.then)=="function",Y_=ue.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Ar(t,e){const n=n2(e),[[i,r,s],o]=S.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=i;(r!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return S.useEffect(()=>{const u=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),u},[n,t,l]),S.useDebugValue(a),J_(a)?Y_(a):a}function q_(t,e){const n=n2(e);return S.useCallback((...r)=>n.set(t,...r),[n,t])}function i2(t,e){return[Ar(t,e),q_(t,e)]}const{createElement:Bl,createContext:Q_,forwardRef:r2,useCallback:Es,useContext:s2,useEffect:qr,useImperativeHandle:o2,useLayoutEffect:eL,useMemo:tL,useRef:ei,useState:ec}=$v,hx=$v["useId".toString()],Mf=eL,nL=typeof hx=="function"?hx:()=>null;let iL=0;function Ow(t=null){const e=nL(),n=ei(t||e||null);return n.current===null&&(n.current=""+iL++),n.current}const Xp=Q_(null);Xp.displayName="PanelGroupContext";function a2({children:t=null,className:e="",collapsedSize:n=0,collapsible:i=!1,defaultSize:r=null,forwardedRef:s,id:o=null,maxSize:a=100,minSize:l=10,onCollapse:u=null,onResize:c=null,order:d=null,style:h={},tagName:f="div"}){const p=s2(Xp);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const g=Ow(o),{collapsePanel:w,expandPanel:m,getPanelStyle:y,registerPanel:v,resizePanel:x,unregisterPanel:k}=p,O=ei({onCollapse:u,onResize:c});if(qr(()=>{O.current.onCollapse=u,O.current.onResize=c}),l<0||l>100)throw Error(`Panel minSize must be between 0 and 100, but was ${l}`);if(a<0||a>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${a}`);if(r!==null){if(r<0||r>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${r}`);l>r&&!i&&(console.error(`Panel minSize ${l} cannot be greater than defaultSize ${r}`),r=l)}const T=y(g,r),A=ei({size:fx(T)}),N=ei({callbacksRef:O,collapsedSize:n,collapsible:i,defaultSize:r,id:g,idWasAutoGenerated:o==null,maxSize:a,minSize:l,order:d});return Mf(()=>{A.current.size=fx(T),N.current.callbacksRef=O,N.current.collapsedSize=n,N.current.collapsible=i,N.current.defaultSize=r,N.current.id=g,N.current.idWasAutoGenerated=o==null,N.current.maxSize=a,N.current.minSize=l,N.current.order=d}),Mf(()=>(v(g,N),()=>{k(g)}),[d,g,v,k]),o2(s,()=>({collapse:()=>w(g),expand:()=>m(g),getCollapsed(){return A.current.size===0},getSize(){return A.current.size},resize:_=>x(g,_)}),[w,m,g,x]),Bl(f,{children:t,className:e,"data-panel":"","data-panel-collapsible":i||void 0,"data-panel-id":g,"data-panel-size":parseFloat(""+T.flexGrow).toFixed(1),id:`data-panel-id-${g}`,style:{...T,...h}})}const Ih=r2((t,e)=>Bl(a2,{...t,forwardedRef:e}));a2.displayName="Panel";Ih.displayName="forwardRef(Panel)";function fx(t){const{flexGrow:e}=t;return typeof e=="string"?parseFloat(e):e}const aa=10;function Iu(t,e,n,i,r,s,o,a){const{sizes:l}=a||{},u=l||s;if(r===0)return u;const c=fi(e),d=u.concat();let h=0;{const g=r<0?i:n,w=c.findIndex(x=>x.current.id===g),m=c[w],y=u[w],v=px(m,Math.abs(r),y,t);if(y===v)return u;v===0&&y>0&&o.set(g,y),r=r<0?y-v:v-y}let f=r<0?n:i,p=c.findIndex(g=>g.current.id===f);for(;;){const g=c[p],w=u[p],m=Math.abs(r)-Math.abs(h),y=px(g,0-m,w,t);if(w!==y&&(y===0&&w>0&&o.set(g.current.id,w),h+=w-y,d[p]=y,h.toPrecision(aa).localeCompare(Math.abs(r).toPrecision(aa),void 0,{numeric:!0})>=0))break;if(r<0){if(--p<0)break}else if(++p>=c.length)break}return h===0?u:(f=r<0?i:n,p=c.findIndex(g=>g.current.id===f),d[p]=u[p]+h,d)}function Oa(t,e,n){e.forEach((i,r)=>{const s=t[r];if(!s)return;const{callbacksRef:o,collapsedSize:a,collapsible:l,id:u}=s.current,c=n[u];if(c!==i){n[u]=i;const{onCollapse:d,onResize:h}=o.current;h&&h(i,c),l&&d&&((c==null||c===a)&&i!==a?d(!1):c!==a&&i===a&&d(!0))}})}function cg(t,e){if(e.length<2)return[null,null];const n=e.findIndex(o=>o.current.id===t);if(n<0)return[null,null];const i=n===e.length-1,r=i?e[n-1].current.id:t,s=i?t:e[n+1].current.id;return[r,s]}function l2(t,e,n){if(t.size===1)return"100";const r=fi(t).findIndex(o=>o.current.id===e),s=n[r];return s==null?"0":s.toPrecision(aa)}function rL(t){const e=document.querySelector(`[data-panel-id="${t}"]`);return e||null}function Tw(t){const e=document.querySelector(`[data-panel-group-id="${t}"]`);return e||null}function Zp(t){const e=document.querySelector(`[data-panel-resize-handle-id="${t}"]`);return e||null}function sL(t){return u2().findIndex(i=>i.getAttribute("data-panel-resize-handle-id")===t)??null}function u2(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function c2(t){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Rw(t,e,n){var l,u,c,d;const i=Zp(e),r=c2(t),s=i?r.indexOf(i):-1,o=((u=(l=n[s])==null?void 0:l.current)==null?void 0:u.id)??null,a=((d=(c=n[s+1])==null?void 0:c.current)==null?void 0:d.id)??null;return[o,a]}function fi(t){return Array.from(t.values()).sort((e,n)=>{const i=e.current.order,r=n.current.order;return i==null&&r==null?0:i==null?-1:r==null?1:i-r})}function px(t,e,n,i){var c;const r=n+e,{collapsedSize:s,collapsible:o,maxSize:a,minSize:l}=t.current;if(o){if(n>s){if(r<=l/2+s)return s}else if(!((c=i==null?void 0:i.type)==null?void 0:c.startsWith("key"))&&r<l)return s}return Math.min(a,Math.max(l,r))}function d2(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}function oL({committedValuesRef:t,groupId:e,panels:n,setSizes:i,sizes:r,panelSizeBeforeCollapse:s}){qr(()=>{const{direction:o,panels:a}=t.current,l=Tw(e),{height:u,width:c}=l.getBoundingClientRect(),h=c2(e).map(f=>{const p=f.getAttribute("data-panel-resize-handle-id"),g=fi(a),[w,m]=Rw(e,p,g);if(w==null||m==null)return()=>{};let y=0,v=100,x=0,k=0;g.forEach(M=>{M.current.id===w?(v=M.current.maxSize,y=M.current.minSize):(x+=M.current.minSize,k+=M.current.maxSize)});const O=Math.min(v,100-x),T=Math.max(y,(g.length-1)*100-k),A=l2(a,w,r);f.setAttribute("aria-valuemax",""+Math.round(O)),f.setAttribute("aria-valuemin",""+Math.round(T)),f.setAttribute("aria-valuenow",""+Math.round(parseInt(A)));const N=M=>{if(!M.defaultPrevented)switch(M.key){case"Enter":{M.preventDefault();const H=g.findIndex(F=>F.current.id===w);if(H>=0){const F=g[H],j=r[H];if(j!=null){let X=0;j.toPrecision(aa)<=F.current.minSize.toPrecision(aa)?X=o==="horizontal"?c:u:X=-(o==="horizontal"?c:u);const J=Iu(M,a,w,m,X,r,s.current,null);r!==J&&i(J)}}break}}};f.addEventListener("keydown",N);const _=rL(w);return _!=null&&f.setAttribute("aria-controls",_.id),()=>{f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow"),f.removeEventListener("keydown",N),_!=null&&f.removeAttribute("aria-controls")}});return()=>{h.forEach(f=>f())}},[t,e,n,s,i,r])}function aL({disabled:t,handleId:e,resizeHandler:n}){qr(()=>{if(t||n==null)return;const i=Zp(e);if(i==null)return;const r=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),n(s);break}case"F6":{s.preventDefault();const o=u2(),a=sL(e);d2(a!==null);const l=s.shiftKey?a>0?a-1:o.length-1:a+1<o.length?a+1:0;o[l].focus();break}}};return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}},[t,e,n])}function lL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function h2(t,e,n,i=0,r=null){const s=n==="horizontal";let o=0;if(h0(t))o=s?t.clientX:t.clientY;else if(f0(t)){const c=t.touches[0];o=s?c.screenX:c.screenY}else return 0;const a=Zp(e),l=r||a.getBoundingClientRect(),u=s?l.left:l.top;return o-u-i}function uL(t,e,n,i,r,s,o){const{dragOffset:a=0,dragHandleRect:l,sizes:u}=o||{},c=u||s;if(cL(t)){const d=r==="horizontal",f=Tw(e).getBoundingClientRect(),p=d?f.width:f.height,g=t.shiftKey?10:100,w=p/g;let m=0;switch(t.key){case"ArrowDown":m=d?0:w;break;case"ArrowLeft":m=d?-w:0;break;case"ArrowRight":m=d?w:0;break;case"ArrowUp":m=d?0:-w;break;case"End":m=p;break;case"Home":m=-p;break}const[y,v]=Rw(e,n,i),x=m<0?y:v,k=i.findIndex(T=>T.current.id===x),O=i[k];if(O.current.collapsible){const T=c[k];(T===0||T.toPrecision(aa)===O.current.minSize.toPrecision(aa))&&(m=m<0?-O.current.minSize*p:O.current.minSize*p)}return m}else return h2(t,n,r,a,l)}function cL(t){return t.type==="keydown"}function h0(t){return t.type.startsWith("mouse")}function f0(t){return t.type.startsWith("touch")}let p0=null,Ho=null;function f2(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function dL(){Ho!==null&&(document.head.removeChild(Ho),p0=null,Ho=null)}function dg(t){if(p0===t)return;p0=t;const e=f2(t);Ho===null&&(Ho=document.createElement("style"),document.head.appendChild(Ho)),Ho.innerHTML=`*{cursor: ${e}!important;}`}function hL(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function p2(t){return t.map(e=>{const{minSize:n,order:i}=e.current;return i?`${i}:${n}`:`${n}`}).sort((e,n)=>e.localeCompare(n)).join(",")}function m2(t,e){try{const n=e.getItem(`PanelGroup:sizes:${t}`);if(n){const i=JSON.parse(n);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function fL(t,e,n){const i=m2(t,n);if(i){const r=p2(e);return i[r]??null}return null}function pL(t,e,n,i){const r=p2(e),s=m2(t,i)||{};s[r]=n;try{i.setItem(`PanelGroup:sizes:${t}`,JSON.stringify(s))}catch(o){console.error(o)}}const hg={};function mx(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}const Bu={getItem:t=>(mx(Bu),Bu.getItem(t)),setItem:(t,e)=>{mx(Bu),Bu.setItem(t,e)}};function g2({autoSaveId:t,children:e=null,className:n="",direction:i,disablePointerEventsDuringResize:r=!1,forwardedRef:s,id:o=null,onLayout:a,storage:l=Bu,style:u={},tagName:c="div"}){const d=Ow(o),[h,f]=ec(null),[p,g]=ec(new Map),w=ei(null);ei({didLogDefaultSizeWarning:!1,didLogIdAndOrderWarning:!1,prevPanelIds:[]});const m=ei({onLayout:a});qr(()=>{m.current.onLayout=a});const y=ei({}),[v,x]=ec([]),k=ei(new Map),O=ei(0),T=ei({direction:i,panels:p,sizes:v});o2(s,()=>({getLayout:()=>{const{sizes:G}=T.current;return G},setLayout:G=>{const $=G.reduce((ve,Se)=>ve+Se,0);d2($===100,"Panel sizes must add up to 100%");const{panels:I}=T.current,Y=y.current,ae=fi(I);x(G),Oa(ae,G,Y)}}),[]),Mf(()=>{T.current.direction=i,T.current.panels=p,T.current.sizes=v}),oL({committedValuesRef:T,groupId:d,panels:p,setSizes:x,sizes:v,panelSizeBeforeCollapse:k}),qr(()=>{const{onLayout:G}=m.current,{panels:$,sizes:I}=T.current;if(I.length>0){G&&G(I);const Y=y.current,ae=fi($);Oa(ae,I,Y)}},[v]),Mf(()=>{if(T.current.sizes.length===p.size)return;let $=null;if(t){const I=fi(p);$=fL(t,I,l)}if($!=null)x($);else{const I=fi(p);let Y=0,ae=0,ve=0;if(I.forEach(Se=>{ve+=Se.current.minSize,Se.current.defaultSize===null?Y++:ae+=Se.current.defaultSize}),ae>100)throw new Error("Default panel sizes cannot exceed 100%");if(I.length>1&&Y===0&&ae!==100)throw new Error("Invalid default sizes specified for panels");if(ve>100)throw new Error("Minimum panel sizes cannot exceed 100%");x(I.map(Se=>Se.current.defaultSize===null?(100-ae)/Y:Se.current.defaultSize))}},[t,p,l]),qr(()=>{if(t){if(v.length===0||v.length!==p.size)return;const G=fi(p);hg[t]||(hg[t]=hL(pL,100)),hg[t](t,G,v,l)}},[t,p,v,l]);const A=Es((G,$)=>{const{panels:I}=T.current;return I.size===0?{flexBasis:0,flexGrow:$??void 0,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:l2(I,G,v),flexShrink:1,overflow:"hidden",pointerEvents:r&&h!==null?"none":void 0}},[h,r,v]),N=Es((G,$)=>{g(I=>{if(I.has(G))return I;const Y=new Map(I);return Y.set(G,$),Y})},[]),_=Es(G=>I=>{I.preventDefault();const{direction:Y,panels:ae,sizes:ve}=T.current,Se=fi(ae),[U,B]=Rw(d,G,Se);if(U==null||B==null)return;let W=uL(I,d,G,Se,Y,ve,w.current);if(W===0)return;const C=Tw(d).getBoundingClientRect(),D=Y==="horizontal";document.dir==="rtl"&&D&&(W=-W);const R=D?C.width:C.height,z=W/R*100,K=Iu(I,ae,U,B,z,ve,k.current,w.current),V=!lL(ve,K);if((h0(I)||f0(I))&&O.current!=z&&dg(V?D?"horizontal":"vertical":D?W<0?"horizontal-min":"horizontal-max":W<0?"vertical-min":"vertical-max"),V){const Z=y.current;x(K),Oa(Se,K,Z)}O.current=z},[d]),M=Es(G=>{g($=>{if(!$.has(G))return $;const I=new Map($);return I.delete(G),I})},[]),H=Es(G=>{const{panels:$,sizes:I}=T.current,Y=$.get(G);if(Y==null)return;const{collapsedSize:ae,collapsible:ve}=Y.current;if(!ve)return;const Se=fi($),U=Se.indexOf(Y);if(U<0)return;const B=I[U];if(B===ae)return;k.current.set(G,B);const[W,b]=cg(G,Se);if(W==null||b==null)return;const D=U===Se.length-1?B:ae-B,R=Iu(null,$,W,b,D,I,k.current,null);if(I!==R){const z=y.current;x(R),Oa(Se,R,z)}},[]),F=Es(G=>{const{panels:$,sizes:I}=T.current,Y=$.get(G);if(Y==null)return;const{collapsedSize:ae,minSize:ve}=Y.current,Se=k.current.get(G)||ve;if(!Se)return;const U=fi($),B=U.indexOf(Y);if(B<0||I[B]!==ae)return;const[b,C]=cg(G,U);if(b==null||C==null)return;const R=B===U.length-1?ae-Se:Se,z=Iu(null,$,b,C,R,I,k.current,null);if(I!==z){const K=y.current;x(z),Oa(U,z,K)}},[]),j=Es((G,$)=>{const{panels:I,sizes:Y}=T.current,ae=I.get(G);if(ae==null)return;const{collapsedSize:ve,collapsible:Se,maxSize:U,minSize:B}=ae.current,W=fi(I),b=W.indexOf(ae);if(b<0)return;const C=Y[b];if(C===$)return;Se&&$===ve||($=Math.min(U,Math.max(B,$)));const[D,R]=cg(G,W);if(D==null||R==null)return;const K=b===W.length-1?C-$:$-C,V=Iu(null,I,D,R,K,Y,k.current,null);if(Y!==V){const Z=y.current;x(V),Oa(W,V,Z)}},[]),X=tL(()=>({activeHandleId:h,collapsePanel:H,direction:i,expandPanel:F,getPanelStyle:A,groupId:d,registerPanel:N,registerResizeHandle:_,resizePanel:j,startDragging:(G,$)=>{if(f(G),h0($)||f0($)){const I=Zp(G);w.current={dragHandleRect:I.getBoundingClientRect(),dragOffset:h2($,G,i),sizes:T.current.sizes}}},stopDragging:()=>{dL(),f(null),w.current=null},unregisterPanel:M}),[h,H,i,F,A,d,N,_,j,M]),J={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Bl(Xp.Provider,{children:Bl(c,{children:e,className:n,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":d,style:{...J,...u}}),value:X})}const y2=r2((t,e)=>Bl(g2,{...t,forwardedRef:e}));g2.displayName="PanelGroup";y2.displayName="forwardRef(PanelGroup)";function m0({children:t=null,className:e="",disabled:n=!1,id:i=null,onDragging:r,style:s={},tagName:o="div"}){const a=ei(null),l=ei({onDragging:r});qr(()=>{l.current.onDragging=r});const u=s2(Xp);if(u===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:c,direction:d,groupId:h,registerResizeHandle:f,startDragging:p,stopDragging:g}=u,w=Ow(i),m=c===w,[y,v]=ec(!1),[x,k]=ec(null),O=Es(()=>{a.current.blur(),g();const{onDragging:N}=l.current;N&&N(!1)},[g]);qr(()=>{if(n)k(null);else{const A=f(w);k(()=>A)}},[n,w,f]),qr(()=>{if(n||x==null||!m)return;const A=H=>{x(H)},N=H=>{x(H)},M=a.current.ownerDocument;return M.body.addEventListener("contextmenu",O),M.body.addEventListener("mousemove",A),M.body.addEventListener("touchmove",A),M.body.addEventListener("mouseleave",N),window.addEventListener("mouseup",O),window.addEventListener("touchend",O),()=>{M.body.removeEventListener("contextmenu",O),M.body.removeEventListener("mousemove",A),M.body.removeEventListener("touchmove",A),M.body.removeEventListener("mouseleave",N),window.removeEventListener("mouseup",O),window.removeEventListener("touchend",O)}},[d,n,m,x,O]),aL({disabled:n,handleId:w,resizeHandler:x});const T={cursor:f2(d),touchAction:"none",userSelect:"none"};return Bl(o,{children:t,className:e,"data-resize-handle-active":m?"pointer":y?"keyboard":void 0,"data-panel-group-direction":d,"data-panel-group-id":h,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w,onBlur:()=>v(!1),onFocus:()=>v(!0),onMouseDown:A=>{p(w,A.nativeEvent);const{onDragging:N}=l.current;N&&N(!0)},onMouseUp:O,onTouchCancel:O,onTouchEnd:O,onTouchStart:A=>{p(w,A.nativeEvent);const{onDragging:N}=l.current;N&&N(!0)},ref:a,role:"separator",style:{...T,...s},tabIndex:0})}m0.displayName="PanelResizeHandle";const mL="modulepreload",gL=function(t){return"/vonsim-next/"+t},gx={},yL=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=gL(s),s in gx)return;gx[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let c=r.length-1;c>=0;c--){const d=r[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":mL,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function vL(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){const{Workbox:h}=await yL(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);a=new h("/vonsim-next/sw.js",{scope:"/vonsim-next/",type:"classic"}),u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let f=!1;const p=()=>{f=!0,a==null||a.addEventListener("controlling",g=>{g.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",g=>{typeof g.isUpdate>"u"?typeof g.isExternal<"u"?g.isExternal?p():!f&&(i==null||i()):g.isExternal?window.location.reload():!f&&(i==null||i()):g.isUpdate||i==null||i()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(f=>{s?s("/vonsim-next/sw.js",f):r==null||r(f)}).catch(f=>{o==null||o(f)})}}return l=d(),c}function wL(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=S.useState(!1),[u,c]=S.useState(!1),[d]=S.useState(()=>vL({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}function v2(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=v2(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function Je(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=v2(t))&&(i&&(i+=" "),i+=e);return i}var bL=function(){};function xL(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function SL(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var kL=typeof window<"u",EL=kL?window:null,yx=function(t){return!!t.addEventListener},vx=function(t){return!!t.on},CL=function(t,e,n,i){n===void 0&&(n=EL),S.useEffect(function(){if(e&&n)return yx(n)?xL(n,t,e,i):vx(n)&&n.on(t,e,i),function(){yx(n)?SL(n,t,e,i):vx(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])};const w2=CL;var AL=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},PL=function(t,e,n,i){e===void 0&&(e=bL),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=S.useMemo(function(){var u=AL(t),c=function(d){if(u(d))return e(d)};return c},i);w2(s,l,o,a)};const b2=PL;function Df(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}function x2(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const S2=["en","es"];function Nw(t){return function(n,i,...r){const s=x2(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}class Ht{constructor(e,n){oe(this,"start");oe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new Ht(i,r)}toJSON(){return this.range}}function k2(t){const e=t.charCodeAt(0);return L.fitsUnsigned(e,8)?e:null}function Mw(t){return L.fitsUnsigned(t,8)?String.fromCharCode(t):null}var pt,Et;const Fe=class Fe{constructor(e,n){xe(this,pt,void 0);xe(this,Et,void 0);q(this,pt,e|0),q(this,Et,n)}get size(){return E(this,Et)}is8bits(){return E(this,Et)===8}is16bits(){return E(this,Et)===16}get unsigned(){return E(this,pt)}get signed(){return E(this,pt)<=Fe.maxSignedValue(E(this,Et))?E(this,pt):E(this,pt)-(Fe.maxValue(E(this,Et))+1)}get low(){return this.is8bits()?this:Fe.fromUnsigned(E(this,pt)&Fe.maxValue(8),8)}get high(){return this.is8bits()?new Fe(0,8):Fe.fromUnsigned(E(this,pt)>>8&Fe.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Fe.fromUnsigned(E(this,pt)&~Fe.maxValue(8)|e.unsigned,E(this,Et))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Fe.fromUnsigned(E(this,pt)&Fe.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=E(this,Et))throw new RangeError(`Index ${e} out of bounds for byte of size ${E(this,Et)}`);return(E(this,pt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=E(this,Et))throw new RangeError(`Index ${e} out of bounds for byte of size ${E(this,Et)}`);return n?Fe.fromUnsigned(E(this,pt)|1<<e,E(this,Et)):Fe.fromUnsigned(E(this,pt)&~(1<<e),E(this,Et))}add(e){return e=Number(e),Fe.fromUnsigned(E(this,pt)+e,E(this,Et))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:E(this,pt)===E(e,pt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(E(this,Et));for(let n=0;n<E(this,Et);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return E(this,pt).toString(16).padStart(E(this,Et)/4,"0").toUpperCase();case"bin":return E(this,pt).toString(2).padStart(E(this,Et),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return E(this,Et)===8?Mw(E(this,pt))??"---":this.low.toString("ascii")+this.high.toString("ascii")}}toJSON(){return E(this,pt)}valueOf(){return E(this,pt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=Fe.minSignedValue(n)&&e<=Fe.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=Fe.minValue()&&e<=Fe.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=Fe.minSignedValue(n)&&e<=Fe.maxSignedValue(n)}static fromUnsigned(e,n){if(!Fe.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new Fe(e,n)}static fromSigned(e,n){if(!Fe.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new Fe(e+Fe.maxValue(n)+1,n):new Fe(e,n)}static fromNumber(e,n){return e<0?Fe.fromSigned(e,n):Fe.fromUnsigned(e,n)}static fromChar(e){const n=k2(e)??-1;return Fe.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*Fe.maxValue(e));return new Fe(n,e)}static zero(e){return new Fe(0,e)}};pt=new WeakMap,Et=new WeakMap;let L=Fe;var Ir;const Ns=class Ns{constructor(e){xe(this,Ir,void 0);q(this,Ir,e)}get value(){return E(this,Ir).unsigned}get byte(){return E(this,Ir)}toString(e=!0){let n=E(this,Ir).toString("hex");return e&&(n+="h"),n}toJSON(){return E(this,Ir).toJSON()}valueOf(){return E(this,Ir).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ns.MIN_ADDRESS&&e<=Ns.MAX_ADDRESS}static from(e){if(e=Number(e),!Ns.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=L.fromUnsigned(e,16);return new Ns(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i}};Ir=new WeakMap,oe(Ns,"MIN_ADDRESS",0),oe(Ns,"MAX_ADDRESS",32767);let Ae=Ns;var Br;const Ms=class Ms{constructor(e){xe(this,Br,void 0);q(this,Br,e)}get value(){return E(this,Br).unsigned}get byte(){return E(this,Br)}toString(e=!0){let n=E(this,Br).toString("hex");return e&&(n+="h"),n}toJSON(){return E(this,Br).toJSON()}valueOf(){return E(this,Br).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ms.MIN_ADDRESS&&e<=Ms.MAX_ADDRESS}static from(e){if(e=Number(e),!Ms.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=L.fromUnsigned(e,8);return new Ms(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Br=new WeakMap,oe(Ms,"MIN_ADDRESS",0),oe(Ms,"MAX_ADDRESS",127);let Vn=Ms;const wx=Ae.from(Ae.MAX_ADDRESS).toString(),OL=Vn.from(Vn.MAX_ADDRESS).toString(),TL={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Ae.format(t)} is out of range (max memory address: ${wx}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${Ae.format(t)}, which is outside the memory range (max memory address: ${wx}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${OL}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"label-should-be-writable":t=>`Label ${t} doesn't point to a writable memory address — should point to a DB or DW declaration.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},bx=Ae.from(Ae.MAX_ADDRESS).toString(),RL=Vn.from(Vn.MAX_ADDRESS).toString(),NL={"address-has-code":t=>`La dirección de memoria ${Ae.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${t} está fuera de rango (dirección máxima de memoria: ${bx}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vacío. El programa debe tener, al menos, una instrucción END.","end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${Ae.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${bx}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${RL}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"label-should-be-writable":t=>`La etiqueta ${t} no apunta a una dirección de memoria modificable — debería apuntar a una declaración DB o DW.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${t}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},ML=Nw({en:TL,es:NL});class se extends Error{constructor(n,...i){super();oe(this,"code");oe(this,"context");oe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof Ht?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return ML(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof se?n:new se("unexpected-error",n)}}var Bs,kl;class DL{constructor(){oe(this,"codeMemory",new Set);oe(this,"labels",new Map);xe(this,Bs,!1);xe(this,kl,!1)}loadStatements(e){if(E(this,Bs))throw new Error("Tried to load statements twice");q(this,Bs,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new se("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Ae.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Ae.from(0)})}return n}computeAddresses(e){if(E(this,kl))throw new Error("Tried to compute addresses twice");q(this,kl,!0),this.codeMemory.clear();const n=new Set;let i=null;return Df(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){i=s.newAddress;return}if(i===null)throw new se("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!Ae.inRange(i+l))throw new se("instruction-out-of-range",i+l).at(s);const u=Ae.from(i+l);if(n.has(u.value))throw new se("occupied-address",u).at(s);n.add(u.value),s.isInstruction()&&this.codeMemory.add(u.value)}const a=Ae.from(i);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),i+=o},se.from)}labelExists(e){if(!E(this,Bs))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!E(this,Bs))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!E(this,Bs))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!E(this,kl))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Ae&&(e=e.value),this.codeMemory.has(e)}}Bs=new WeakMap,kl=new WeakMap;const _L=["AL","BL","CL","DL","AH","BH","CH","DH"],E2=["AX","BX","CX","DX","SP"],_f=[..._L,...E2],Dw=["DB","DW","EQU"],_w=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],LL=["OFFSET","ORG","BYTE","WORD","PTR","END",..._f,..._w,...Dw];class $L{constructor(e,n,i){oe(this,"type");oe(this,"lexeme");oe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class IL{constructor(e){oe(this,"scanned",!1);oe(this,"tokens",[]);oe(this,"position",new Ht(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new Ht(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-string").at(this.position);if(this.peek().charCodeAt(0)>255)throw new se("lexer.only-ascii").at(new Ht(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new se("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new se("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();LL.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new se("lexer.unexpected-character",e).at(this.position)}return this.position=new Ht(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new $L(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new Ht(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class qt{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}oe(qt,"numberLiteral",(...e)=>new BL(...e)),oe(qt,"label",(...e)=>new zL(...e)),oe(qt,"unaryOperation",(...e)=>new jL(...e)),oe(qt,"binaryOperation",(...e)=>new FL(...e));class BL extends qt{constructor(n,i){super(i);oe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class zL extends qt{constructor(n,i,r){super(r);oe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new se("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new se("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new se("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class jL extends qt{constructor(n,i,r){super(r);oe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class FL extends qt{constructor(n,i,r,s){super(s);oe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Jp{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var zr;class C2 extends Jp{constructor(n,i,r){super(r);oe(this,"type","data-directive");oe(this,"label");oe(this,"values");xe(this,zr,null);this.values=n,this.label=i}get start(){if(E(this,zr)===null)throw new Error("Start not set");return E(this,zr)}setStart(n){if(E(this,zr)!==null)throw new Error("Start already set");q(this,zr,n)}toJSON(){return{...super.toJSON(),...E(this,zr)?{start:E(this,zr).toJSON()}:{},directive:this.directive,label:this.label}}}zr=new WeakMap;var Zo,zs,El;class UL extends C2{constructor(n,i,r){super(n,i,r);oe(this,"directive","EQU");xe(this,Zo,"not-processed");xe(this,zs,null);xe(this,El,null)}toJSON(){var n;return{...super.toJSON(),value:E(this,El)??((n=E(this,zs))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(E(this,zs))throw new Error("Constant already validated");if(!this.label)throw new se("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new se("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new se("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new se("cannot-be-unassinged","EQU").at(n);q(this,zs,n.value)}evaluateExpressions(n){if(!E(this,zs))throw new Error("Constant not validated");if(E(this,Zo)==="processed")return E(this,El);if(E(this,Zo)==="processing")throw new se("circular-reference").at(this.position);q(this,Zo,"processed");const i=E(this,zs).evaluate(n);return q(this,Zo,"processed"),q(this,El,i),i}evaluate(n){return this.evaluateExpressions(n)}}Zo=new WeakMap,zs=new WeakMap,El=new WeakMap;const zu=Symbol("unassigned");var Nn,_i;class VL extends C2{constructor(n,i,r,s){super(i,r,s);oe(this,"size");xe(this,Nn,null);xe(this,_i,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!E(this,Nn))throw new Error("Data directive not validated");return E(this,Nn).length*(this.size/8)}getValues(){if(!E(this,_i))throw new Error("Data directive not evaluated");return E(this,_i)}toJSON(){return{...super.toJSON(),values:(E(this,_i)??E(this,Nn)??this.values).map(n=>n===zu?"?":n.toJSON())}}validate(){if(E(this,Nn))throw new Error("Data directive already validated");q(this,Nn,[]);for(const n of this.values)if(n.isUnassigned())E(this,Nn).push(zu);else if(n.isString()){if(this.directive!=="DB")throw new se("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=k2(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new Ht(n.position.start+r,n.position.start+r+1),a=qt.numberLiteral(s,o);E(this,Nn).push(a)}}else E(this,Nn).push(n.value);if(E(this,Nn).length===0)throw new se("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!E(this,Nn))throw new Error("Data directive not validated");if(E(this,_i))throw new Error("Data directive already evaluated");q(this,_i,[]);const i=Df(E(this,Nn),r=>{if(r===zu)E(this,_i).push(zu);else{const s=r.evaluate(n);if(!L.fits(s,this.size))throw new se("value-out-of-range",s,this.size).at(this);const o=L.fromNumber(s,this.size);E(this,_i).push(o)}},se.from);return i.length>0&&q(this,_i,null),i}}Nn=new WeakMap,_i=new WeakMap;class Lw{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class HL extends Lw{constructor(n,i){super(i);oe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class WL extends Lw{constructor(n){super(n);oe(this,"type","unassigned")}}class GL extends Lw{constructor(n){super(n.position);oe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function KL(t,e,n){const i=Ht.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new VL(t.type,e,n,i);case"EQU":return new UL(e,n,i)}}class XL extends Jp{constructor(n){super(n);oe(this,"type","end")}}function $o(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var jr;class xa extends Jp{constructor(n,i,r){super(r);oe(this,"type","instruction");oe(this,"label");oe(this,"operands");xe(this,jr,null);this.operands=n,this.label=i}get start(){if(E(this,jr)===null)throw new Error("Start not set");return E(this,jr)}setStart(n){if(E(this,jr)!==null)throw new Error("Start already set");q(this,jr,n)}toJSON(){return{...super.toJSON(),...E(this,jr)?{start:E(this,jr).toJSON()}:{},instruction:this.instruction,label:this.label}}}jr=new WeakMap;var un,pi;class ZL extends xa{constructor(n,i,r,s){super(i,r,s);xe(this,un,null);xe(this,pi,null);this.instruction=n}get length(){if(!E(this,un))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=E(this,un);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!E(this,pi))throw new Error("Instruction not evaluated");return E(this,pi)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=$o(s)<<3,o[1]|=$o(r)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=$o(r)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=$o(r)<<0,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}case"mem<-reg":{r.mode==="direct"?(o[1]=192,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=208,o[1]|=$o(s)<<0;break}case"mem<-imd":{r.mode==="direct"?(o[1]=200,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...E(this,pi)??E(this,un)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,un))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new se("size-mismatch",r.size,i.size).at(this);q(this,un,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);q(this,un,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);q(this,un,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}if(r.value.isLabel()){const s=r.isDataDirectiveLabel(n);if(s){if(s!==i.size)throw new se("size-mismatch",s,i.size).at(this);q(this,un,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:qt.label(r.value.value,!0,r.value.position)}});return}}q(this,un,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else if(i.value.isLabel()){if(s=i.isDataDirectiveLabel(n)||"auto",s==="auto")throw new se("label-should-be-writable",i.value.value).at(i);o={mode:"direct",address:qt.label(i.value.value,!0,i.value.position)}}else throw new se("destination-cannot-be-immediate").at(i);if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new se("size-mismatch",s,r.size).at(this);q(this,un,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.isDataDirectiveLabel(n))throw new se("double-memory-access").at(this);if(s==="auto")throw new se("unknown-size").at(i);q(this,un,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new se("double-memory-access").at(this)}}evaluateExpressions(n){if(!E(this,un))throw new Error("Instruction not validated");if(E(this,pi))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=E(this,un),a=l=>{const u=l.evaluate(n);if(!Ae.inRange(u))throw new se("address-out-of-range",u).at(l);const c=Ae.from(u);if(n.addressIsReserved(c))throw new se("address-has-code",c).at(l);return c};switch(i){case"reg<-reg":{q(this,pi,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{q(this,pi,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!L.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const u=L.fromNumber(l,r);q(this,pi,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{q(this,pi,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!L.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const u=L.fromNumber(l,r);q(this,pi,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}un=new WeakMap,pi=new WeakMap;var cr,Fr;class JL extends xa{constructor(n,i,r,s){super(i,r,s);xe(this,cr,null);xe(this,Fr,null);oe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!E(this,Fr))throw new Error("Instruction not evaluated");return E(this,Fr)}toJSON(){return{...super.toJSON(),...E(this,Fr)?{value:E(this,Fr).toJSON()}:E(this,cr)?{initialValue:E(this,cr).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,cr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new se("expects-immediate").at(n);q(this,cr,n.value)}evaluateExpressions(n){if(!E(this,cr))throw new Error("Instruction not validated");if(E(this,Fr))throw new Error("Instruction aready evaluated");const i=E(this,cr).evaluate(n);if(!L.fitsUnsigned(i,8))throw new se("invalid-interrupt",i).at(E(this,cr));q(this,Fr,L.fromUnsigned(i,8))}}cr=new WeakMap,Fr=new WeakMap;var Li,Ur,DE;let YL=(DE=class extends xa{constructor(n,i,r,s){super(i,r,s);xe(this,Li,null);xe(this,Ur,null);this.instruction=n}get length(){if(!E(this,Li))throw new Error("Instruction not validated");return E(this,Li).port==="fixed"?2:1}toBytes(){const n=[],i={IN:80,OUT:84};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(E(this,Ur)===null)throw new Error("Operation not set");return E(this,Ur)}toJSON(){return{...super.toJSON(),...E(this,Ur)??E(this,Li)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,Li))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new se("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new se("expects-dx").at(i);q(this,Li,{port:"variable",size:r});return}if(i.isNumberExpression()){q(this,Li,{port:"fixed",size:r,address:i.value});return}throw new se("expects-immediate").at(i)}evaluateExpressions(n){if(!E(this,Li))throw new Error("Instruction not validated");if(E(this,Ur))throw new Error("Instruction aready evaluated");const i=E(this,Li);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Vn.inRange(r))throw new se("io-address-out-of-range",r).at(this);const s=Vn.from(r);q(this,Ur,{port:"fixed",size:i.size,address:s})}else q(this,Ur,{port:"variable",size:i.size})}},Li=new WeakMap,Ur=new WeakMap,DE);var Vr,Hr,_E;let qL=(_E=class extends xa{constructor(n,i,r,s){super(i,r,s);xe(this,Vr,null);xe(this,Hr,null);oe(this,"length",3);this.instruction=n}toBytes(){const n=[],i={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(E(this,Hr)===null)throw new Error("Instruction not evaluated");return E(this,Hr)}toJSON(){return{...super.toJSON(),...E(this,Hr)?{address:E(this,Hr).toJSON()}:E(this,Vr)?{jumpTo:E(this,Vr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,Vr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new se("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new se("label-not-found",r).at(i);if(s!=="instruction")throw new se("label-should-be-an-instruction",r).at(i);q(this,Vr,r)}evaluateExpressions(n){if(!E(this,Vr))throw new Error("Instruction not validated");if(E(this,Hr))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(E(this,Vr));if(!Ae.inRange(i))throw new se("address-out-of-range",i).at(this);q(this,Hr,Ae.from(i))}},Vr=new WeakMap,Hr=new WeakMap,_E);var dr,LE;let QL=(LE=class extends xa{constructor(n,i,r,s){super(i,r,s);xe(this,dr,null);oe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:96,POP:104}[this.instruction];return i|=$o(this.register),new Uint8Array([i])}get register(){if(!E(this,dr))throw new Error("Instruction not evaluated");return E(this,dr)}toJSON(){return{...super.toJSON(),...E(this,dr)?{register:E(this,dr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,dr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new se("expects-word-register").at(n);q(this,dr,n.value)}evaluateExpressions(){if(!E(this,dr))throw new Error("Instruction not validated")}},dr=new WeakMap,LE);var Xn,hr;class e$ extends xa{constructor(n,i,r,s){super(i,r,s);xe(this,Xn,null);xe(this,hr,null);this.instruction=n}get length(){if(!E(this,Xn))throw new Error("Instruction not validated");const{mode:n}=E(this,Xn);let i=2;return n==="mem-direct"&&(i+=2),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=$o(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!E(this,hr))throw new Error("Instruction not evaluated");return E(this,hr)}toJSON(){return{...super.toJSON(),...E(this,hr)??E(this,Xn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,Xn))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){q(this,Xn,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);q(this,Xn,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);q(this,Xn,{mode:"mem-indirect",size:i.size});return}if(i.value.isLabel()){const r=i.isDataDirectiveLabel(n);if(r){q(this,Xn,{mode:"mem-direct",size:r,address:qt.label(i.value.value,!0,i.value.position)});return}}throw new se("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!E(this,Xn))throw new Error("Instruction not validated");if(E(this,hr))throw new Error("Instruction aready evaluated");const i=E(this,Xn);switch(i.mode){case"reg":{q(this,hr,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Ae.inRange(r))throw new se("address-out-of-range",r).at(i.address);const s=Ae.from(r);if(n.addressIsReserved(s))throw new se("address-has-code",s).at(i.address);q(this,hr,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{q(this,hr,{mode:"mem-indirect",size:i.size});return}default:return i}}}Xn=new WeakMap,hr=new WeakMap;var Cl;class t$ extends xa{constructor(n,i,r,s){super(i,r,s);xe(this,Cl,!1);oe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(E(this,Cl))throw new Error("Instruction already validated");if(this.operands.length>0)throw new se("expects-no-operands").at(this);q(this,Cl,!0)}evaluateExpressions(){if(!E(this,Cl))throw new Error("Instruction not validated")}}Cl=new WeakMap;class Yp{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class n$ extends Yp{constructor(n){super(n.position);oe(this,"type","register");oe(this,"value");this.value=n.type}get size(){return E2.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class i$ extends Yp{constructor(n,i){super(i);oe(this,"type","indirect-address");oe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class r$ extends Yp{constructor(n,i,r){super(r);oe(this,"type","direct-address");oe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class s$ extends Yp{constructor(n){super(n.position);oe(this,"type","number-expression");this.value=n}isDataDirectiveLabel(n){if(!this.value.isLabel())return!1;const i=this.value;if(i.offset)return!1;if(!n.labelExists(i.value))throw new se("label-not-found",i.value).at(this.position);const r=n.getLabelType(i.value);return r==="DB"?8:r==="DW"?16:!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function xx(t,e,n){const i=Ht.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new t$(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new ZL(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new e$(t.type,e,n,i);case"PUSH":case"POP":return new QL(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new qL(t.type,e,n,i);case"IN":case"OUT":return new YL(t.type,e,n,i);case"INT":return new JL(t.type,e,n,i)}}class o$ extends Jp{constructor(n,i){super(i);oe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let a$=class{constructor(e){oe(this,"tokens");oe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new se("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new se("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new o$(i,Ht.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new se("end-must-be-the-last-statement").at(e);return new XL(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...Dw);if(e&&!n)throw new se("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),KL(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new HL(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new WL(e.position)}return new GL(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(..._w);if(e&&!n){const s=this.peek();throw new se("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return xx(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),xx(n,r,i)}instructionOperand(){if(this.match(..._f)){const n=this.previous();return new n$(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new se("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(..._f)){this.consume("BX",new se("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-literal","]","BX"));return new i$(e==null?void 0:e.type,Ht.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-expression","]"));return new r$(i,e==null?void 0:e.type,Ht.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new se("parser.expected-literal-after-literal","[","PTR");return new s$(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new se("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new se("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return qt.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new se("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new se("parser.expected-label-after-offset").at(this.peek());if(!n)throw new se("parser.expected-argument").at(this.peek());return qt.label(n.lexeme.toUpperCase(),e!==null,Ht.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new se("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return qt.unaryOperation(e.type==="PLUS"?"+":"-",n,Ht.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=qt.binaryOperation(e,"*",n,Ht.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=qt.binaryOperation(e,n.type==="PLUS"?"+":"-",i,Ht.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function A2(t){try{const n=new IL(t).scanTokens(),r=new a$(n).parse(),s=r.at(-1);if(!s)throw new se("empty-program");if(!s.isEnd())throw new se("end-must-be-the-last-statement").at(s);let o=[];const a=new DL;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Df(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},se.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=Df(r,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},se.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u}}catch(e){return{success:!1,errors:[se.from(e)]}}}class Mr{constructor(e){oe(this,"computer");this.computer=e.computer}}const l$=Ae.from(Ae.MAX_ADDRESS).toString(),u$={"address-has-instruction":t=>`Memory address ${Ae.format(t)} has an instruction, and cannot be read nor written.`,"address-out-of-range":t=>`Memory address ${Ae.format(t)} is out of range (max memory address: ${l$}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-implemented":t=>`I/O memory address ${Vn.format(t)} has no implementation.`,"no-instruction":t=>`Expected instruction at memory address ${Ae.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},c$=Ae.from(Ae.MAX_ADDRESS).toString(),d$={"address-has-instruction":t=>`La dirección de memoria ${t} tiene una instrucción, y no se puede leer ni escribir.`,"address-out-of-range":t=>`La dirección de memoria ${Ae.format(t)} está fuera de rango (dirección máxima de memoria: ${c$}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-implemented":t=>`La dirección de memoria E/S ${Vn.format(t)} no está implementada.`,"no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${t} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},h$=Nw({en:u$,es:d$});class Mt extends Error{constructor(n,...i){super();oe(this,"code");oe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return h$(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Mt?n:new Mt("unexpected-error",n)}}class gs{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const r=e.cpu.getRegister("IP").toString("hex");throw new Mt("unexpected-error",`Could not read instruction byte at address ${r}h`)}yield*e.cpu.updateWordRegister("IP",r=>r.add(1)),yield*e.cpu.getMBR(n)}}var Pp,P2;class f$ extends gs{constructor(){super(...arguments);xe(this,Pp)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:qe(this,Pp,P2).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=L.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>L.maxValue(r)?(c.CF=!0,u=L.fromUnsigned(h-L.maxValue(r)-1,r)):(c.CF=!1,u=L.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=L.fromUnsigned(h+L.maxValue(r)+1,r)):(c.CF=!1,u=L.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Pp=new WeakSet,P2=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};var Op,O2;class p$ extends gs{constructor(){super(...arguments);xe(this,Op)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:qe(this,Op,O2).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=L.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=L.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===L.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",L.fromSigned(1,16));const o=i.unsigned+1;o>L.maxValue(this.operation.size)?(s.CF=!0,r=L.fromUnsigned(o-L.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=L.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",L.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=L.fromUnsigned(o+L.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=L.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Op=new WeakSet,O2=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class m$ extends gs{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Tp,T2;class g$ extends gs{constructor(){super(...arguments);xe(this,Tp)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:qe(this,Tp,T2).call(this),willUse:{ri:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",L.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Mt("io-memory-not-implemented",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Mt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Mt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Tp=new WeakSet,T2=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class y$ extends gs{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class v$ extends gs{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function Io(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function w$(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Rp,R2;class b$ extends gs{constructor(){super(...arguments);xe(this,Rp)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:qe(this,Rp,R2).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd",id:i==="reg<-mem"||i==="reg<-imd"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return r===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[a,l]=w$(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(!(yield*n.cpu.useBus("mem-write"))||l&&(yield*n.cpu.updateWordRegister("ri",u=>u.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Rp=new WeakSet,R2=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};class x$ extends gs{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class S$ extends gs{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function k$(t){switch(t.instruction){case"MOV":return new b$(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new f$(t);case"NOT":case"NEG":case"INC":case"DEC":return new p$(t);case"IN":case"OUT":return new g$(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new S$(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new y$(t);case"RET":case"IRET":return new x$(t);case"INT":return new m$(t);case"CLI":case"STI":case"NOP":case"HLT":return new v$(t)}}const tl={0:32768,3:32771,6:32774,7:32775};function E$(t){return Object.values(tl).includes(t.unsigned)}function*C$(t,e){switch(e.unsigned){case tl[0]:return yield{type:"cpu:int.0"},!1;case tl[3]:return yield{type:"cpu:int.3"},!0;case tl[6]:{yield*t.cpu.copyWordRegister("BX","ri");const n=yield*t.io.console.read();if(yield*t.cpu.updateWordRegister("id",n.withHigh(L.zero(8))),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("id.l"),!(yield*t.cpu.useBus("mem-write")))return!1;break}case tl[7]:{if(yield*t.cpu.copyWordRegister("AX","id"),!(yield*t.cpu.pushToStack())||(yield*t.cpu.copyWordRegister("BX","id"),!(yield*t.cpu.pushToStack())))return!1;yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",L.zero(8));const n=t.cpu.getRegister("AL");for(yield*t.cpu.aluExecute("SUB",n,{CF:!1,OF:!1,SF:n.signed<0,ZF:n.isZero()});!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read")))return!1;yield*t.cpu.getMBR("id.l");const i=t.cpu.getRegister("id.l");yield*t.io.console.write(i),yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",L.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",L.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===L.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","BX"),!(yield*t.cpu.popFromStack())))return!1;yield*t.cpu.copyWordRegister("id","AX");break}default:throw new Error("Invalid interrupt number")}return!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","IP"),!(yield*t.cpu.popFromStack()))?!1:(yield*t.cpu.copyWordRegister("id","FLAGS"),!0)}var Al,De,Zn,gn,js,Ba,Mn,hi,$E;let A$=($E=class extends Mr{constructor(n){super(n);xe(this,js);xe(this,Mn);xe(this,Al,void 0);xe(this,De,void 0);xe(this,Zn,void 0);xe(this,gn,void 0);n.data==="unchanged"?(q(this,De,E(n.previous.cpu,De)),q(this,Zn,E(n.previous.cpu,Zn)),q(this,gn,E(n.previous.cpu,gn))):n.data==="randomize"?(q(this,De,{AX:L.random(16),BX:L.random(16),CX:L.random(16),DX:L.random(16),SP:L.random(16),IP:L.random(16),IR:L.random(8),ri:L.random(16),id:L.random(16),left:L.random(16),right:L.random(16),result:L.random(16),FLAGS:L.random(16)}),q(this,Zn,L.random(16)),q(this,gn,L.random(8))):(q(this,De,{AX:L.zero(16),BX:L.zero(16),CX:L.zero(16),DX:L.zero(16),SP:L.zero(16),IP:L.zero(16),IR:L.zero(8),ri:L.zero(16),id:L.zero(16),left:L.zero(16),right:L.zero(16),result:L.zero(16),FLAGS:L.zero(16)}),q(this,Zn,L.zero(16)),q(this,gn,L.zero(8))),E(this,De).SP=L.fromUnsigned(Ae.MAX_ADDRESS+1,16),E(this,De).IP=L.fromUnsigned(8192,16),qe(this,Mn,hi).call(this,"IF",!0),q(this,Al,new Map);for(const i of n.program.instructions){const r=k$(i);E(this,Al).set(r.start.value,r)}}*run(){for(;;){const n=E(this,De).IP;if(E$(n)){if(!(yield*C$(this.computer,n)))return}else{const i=E(this,Al).get(n.unsigned);if(!i){yield{type:"cpu:error",error:new Mt("no-instruction",E(this,De).IP)};return}if(!(yield*i.execute(this.computer)))return}if(this.getFlag("IF")&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const i=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",L.zero(8)),yield*this.startInterrupt(i)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;let i=L.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),i=i.add(1),yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(E(this,De)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:E(this,Zn).toJSON(),MBR:E(this,gn).toJSON()}}getRegister(n){const[i,r]=Io(n);return r==="low"?E(this,De)[i].low:r==="high"?E(this,De)[i].high:E(this,De)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);qe(this,js,Ba).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);qe(this,js,Ba).call(this,i,r),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,qe(this,js,Ba).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,qe(this,js,Ba).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return E(this,De).FLAGS.bit(0);case"ZF":return E(this,De).FLAGS.bit(6);case"SF":return E(this,De).FLAGS.bit(7);case"IF":return E(this,De).FLAGS.bit(9);case"OF":return E(this,De).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&qe(this,Mn,hi).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&qe(this,Mn,hi).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&qe(this,Mn,hi).call(this,"SF",n.SF),typeof n.IF=="boolean"&&qe(this,Mn,hi).call(this,"IF",n.IF),typeof n.OF=="boolean"&&qe(this,Mn,hi).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:E(this,De).FLAGS}}*aluExecute(n,i,r){E(this,De).result=i.is8bits()?E(this,De).result.withLow(i):i,typeof r.CF=="boolean"&&qe(this,Mn,hi).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&qe(this,Mn,hi).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&qe(this,Mn,hi).call(this,"SF",r.SF),typeof r.IF=="boolean"&&qe(this,Mn,hi).call(this,"IF",r.IF),typeof r.OF=="boolean"&&qe(this,Mn,hi).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:E(this,De).result,flags:E(this,De).FLAGS}}*setMAR(n){const i=this.getRegister(n);q(this,Zn,i),yield{type:"cpu:mar.set",register:n}}*getMBR(n){qe(this,js,Ba).call(this,n,E(this,gn)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);q(this,gn,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(E(this,Zn));return i?(q(this,gn,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(E(this,Zn),E(this,gn)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(E(this,Zn).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(q(this,gn,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(E(this,Zn).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,E(this,gn))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{const i=yield*this.computer.io.pic.handleINTR();return q(this,gn,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return Ae.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?Ae.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new Mt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new Mt("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return Ae.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),Ae.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new Mt("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new Mt("stack-underflow")},!1)}},Al=new WeakMap,De=new WeakMap,Zn=new WeakMap,gn=new WeakMap,js=new WeakSet,Ba=function(n,i){const[r,s]=Io(n);if(s===null){if(E(this,De)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);E(this,De)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?E(this,De)[r]=E(this,De)[r].withLow(i):E(this,De)[r]=E(this,De)[r].withHigh(i)}},Mn=new WeakSet,hi=function(n,i){switch(n){case"CF":E(this,De).FLAGS=E(this,De).FLAGS.withBit(0,i);return;case"ZF":E(this,De).FLAGS=E(this,De).FLAGS.withBit(6,i);return;case"SF":E(this,De).FLAGS=E(this,De).FLAGS.withBit(7,i);return;case"IF":E(this,De).FLAGS=E(this,De).FLAGS.withBit(9,i);return;case"OF":E(this,De).FLAGS=E(this,De).FLAGS.withBit(11,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},$E),P$=class extends Mr{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}};var Jn,Pl,IE;let O$=(IE=class extends Mr{constructor(n){super(n);xe(this,Jn,void 0);xe(this,Pl,null);n.data==="unchanged"?q(this,Jn,E(n.previous.io.console,Jn)):q(this,Jn,"")}get screen(){return E(this,Jn)}clear(){return this.write(L.fromUnsigned(12,8))}*read(){yield{type:"console:read"};const n=E(this,Pl);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return q(this,Pl,null),n}setLastCharRead(n){q(this,Pl,n)}*write(n){switch(n.unsigned){case 8:q(this,Jn,E(this,Jn).slice(0,-1));break;case 10:q(this,Jn,E(this,Jn)+`
`);break;case 12:q(this,Jn,"");break;default:q(this,Jn,E(this,Jn)+Mw(n.unsigned));break}yield{type:"console:write",char:n}}toJSON(){return E(this,Jn)}},Jn=new WeakMap,Pl=new WeakMap,IE),T$=class extends Mr{*press(){yield{type:"f10:press"},yield{type:"f10:int.on"},yield*this.computer.io.pic.interrupt(0),yield{type:"f10:int.off"}}toJSON(){return null}};class qp extends Mr{}var br,Wr,Dn,yn,$i,Ol,Bh,Tl,zh;let R$=(br=class extends qp{constructor(n){super(n);xe(this,Ol);xe(this,Tl);xe(this,Wr,void 0);xe(this,Dn,void 0);xe(this,yn,void 0);xe(this,$i,void 0);q(this,Wr,L.fromUnsigned(255,8)),q(this,Dn,L.fromUnsigned(0,8)),q(this,yn,L.fromUnsigned(0,8)),n.data==="unchanged"?q(this,$i,E(n.previous.io.pic,$i)):n.data==="randomize"?q(this,$i,new Array(br.LINES).fill(L.zero(8)).map(()=>L.random(8))):q(this,$i,new Array(br.LINES).fill(L.zero(8)))}chipSelect(n){const r=4+br.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=L.zero(8);else if(n==="IMR")i=E(this,Wr);else if(n==="IRR")i=E(this,Dn);else if(n==="ISR")i=E(this,yn);else{const r=Number(n.slice(3));i=E(this,$i)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")E(this,yn).isZero()||(yield{type:"pic:intr.off"},q(this,yn,L.zero(8)),yield{type:"pic:register.update",register:"ISR",value:E(this,yn)},yield*qe(this,Tl,zh).call(this));else if(n==="IMR")q(this,Wr,i),yield{type:"pic:register.update",register:"IMR",value:E(this,Wr)},yield*qe(this,Tl,zh).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));E(this,$i)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=br.LINES)throw new RangeError(`Invalid interrupt line ${n}`);E(this,Dn).bit(n)||(q(this,Dn,E(this,Dn).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:E(this,Dn)},yield*qe(this,Tl,zh).call(this))}isINTRActive(){return E(this,yn).isZero()&&qe(this,Ol,Bh).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!E(this,yn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=qe(this,Ol,Bh).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");q(this,yn,E(this,yn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:E(this,yn)},q(this,Dn,E(this,Dn).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:E(this,Dn)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=E(this,$i)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:E(this,Wr).toJSON(),IRR:E(this,Dn).toJSON(),ISR:E(this,yn).toJSON(),lines:E(this,$i).map(n=>n.toJSON())}}},Wr=new WeakMap,Dn=new WeakMap,yn=new WeakMap,$i=new WeakMap,Ol=new WeakSet,Bh=function(){for(let n=0;n<br.LINES;n++)if(E(this,Dn).bit(n)&&!E(this,Wr).bit(n))return n;return null},Tl=new WeakSet,zh=function*(){E(this,yn).isZero()&&qe(this,Ol,Bh).call(this)!==null&&(yield{type:"pic:intr.on"})},oe(br,"LINES",8),br);var fr,Fs,BE;let N$=(BE=class extends qp{constructor(n){super(n);xe(this,fr,void 0);xe(this,Fs,void 0);q(this,fr,L.zero(8)),q(this,Fs,L.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=E(this,fr);else if(n==="COMP")i=E(this,Fs);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")q(this,fr,i);else if(n==="COMP")q(this,Fs,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=E(this,fr).unsigned===L.maxValue(8)?L.zero(8):E(this,fr).add(1);q(this,fr,n),yield{type:"timer:register.update",register:"CONT",value:n},E(this,Fs).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:E(this,fr).toJSON(),COMP:E(this,Fs).toJSON()}}},fr=new WeakMap,Fs=new WeakMap,BE);class Qp extends Mr{constructor(n){super(n);oe(this,"clock");oe(this,"console");oe(this,"f10");oe(this,"pic");oe(this,"timer");this.clock=new P$(n),this.console=new O$(n),this.f10=new T$(n),this.pic=new R$(n),this.timer=new N$(n)}*chipSelect(n){const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const r=this.timer.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:r}):(yield{type:"bus:io.error",error:new Mt("io-memory-not-implemented",n)},null)}*read(n){const{chip:i,register:r}=n;return i==="pic"?yield*this.pic.read(r):i==="timer"?yield*this.timer.read(r):(yield{type:"bus:io.error",error:new Mt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return r==="pic"?(yield*this.pic.write(s,i),!0):r==="timer"?(yield*this.timer.write(s,i),!0):(yield{type:"bus:io.error",error:new Mt("device-not-connected",r)},!1)}toJSON(){return{clock:this.clock.toJSON(),console:this.console.toJSON(),f10:this.f10.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}}oe(Qp,"SIZE",Vn.MAX_ADDRESS+1);var pr,vn,zE;let M$=(zE=class extends qp{constructor(n){super(n);xe(this,pr,void 0);xe(this,vn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?q(this,pr,L.zero(8)):n.data==="randomize"?q(this,pr,L.random(8)):q(this,pr,L.zero(8)),q(this,vn,L.zero(8))}get interrupts(){return E(this,vn).bit(7)}get DATA(){return E(this,pr)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=E(this,pr);else if(n==="STATE")i=E(this,vn);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")q(this,pr,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.computer.io.printer.busy),q(this,vn,i),yield{type:"handshake:register.update",register:n,value:i},E(this,vn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),q(this,vn,E(this,vn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:E(this,vn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){q(this,vn,E(this,vn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:E(this,vn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:E(this,pr).toJSON(),STATE:E(this,vn).toJSON()}}},pr=new WeakMap,vn=new WeakMap,zE);var mi,Gr,Us;const uc=class uc extends Mr{constructor(n){super(n);xe(this,mi,void 0);xe(this,Gr,void 0);xe(this,Us,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(q(this,mi,E(n.previous.io.printer,mi)),q(this,Gr,E(n.previous.io.printer,Gr)),q(this,Us,E(n.previous.io.printer,Us))):(q(this,mi,[]),q(this,Gr,""),q(this,Us,!1))}get busy(){return E(this,mi).length>=uc.BUFFER_SIZE}*setStrobe(n){const i=E(this,Us);if(i===n)return;if(q(this,Us,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();E(this,mi).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){q(this,Gr,""),yield{type:"printer:paper.replace"}}*print(){if(E(this,mi).length===0)return;const[n,...i]=E(this,mi);if(q(this,mi,i),yield{type:"printer:buffer.pop",char:n},i.length===uc.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=Mw(n.unsigned);q(this,Gr,E(this,Gr)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:E(this,Gr),buffer:[...E(this,mi).map(n=>n.unsigned)]}}};mi=new WeakMap,Gr=new WeakMap,Us=new WeakMap,oe(uc,"BUFFER_SIZE",5);let Lf=uc,D$=class extends Lf{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}};class _$ extends Qp{constructor(n){super(n);oe(this,"printer");oe(this,"handshake");this.printer=new D$(n),this.handshake=new M$(n)}*chipSelect(n){const i=this.handshake.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="handshake"?yield*this.handshake.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="handshake"?(yield*this.handshake.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),handshake:this.handshake.toJSON()}}}class N2 extends qp{constructor(n){super(n);oe(this,"PA");oe(this,"PB");oe(this,"CA");oe(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=L.random(8),this.PB=L.random(8),this.CA=L.random(8),this.CB=L.random(8)):(this.PA=L.zero(8),this.PB=L.zero(8),this.CA=L.zero(8),this.CB=L.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let L$=class extends N2{readData(){const e=this.PB.unsigned&~this.CB.unsigned;return L.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.computer.io.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=L.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA},this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1))))}};class $$ extends Lf{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}}class I$ extends Qp{constructor(n){super(n);oe(this,"printer");oe(this,"pio");this.printer=new $$(n),this.pio=new L$(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),pio:this.pio.toJSON()}}}var Kr;class B$ extends Mr{constructor(n){super(n);xe(this,Kr,void 0);n.data==="unchanged"&&"leds"in n.previous.io?q(this,Kr,E(n.previous.io.leds,Kr)):n.data==="randomize"?q(this,Kr,L.random(8)):q(this,Kr,L.zero(8))}get state(){return E(this,Kr)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return E(this,Kr).toJSON()}}Kr=new WeakMap;class z$ extends N2{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=L.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.computer.io.leds.update(L.fromUnsigned(n,8))}}}var gi;class j$ extends Mr{constructor(n){super(n);xe(this,gi,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?q(this,gi,E(n.previous.io.switches,gi)):n.data==="randomize"?q(this,gi,L.random(8)):q(this,gi,L.zero(8))}get state(){return E(this,gi)}*toggle(n){q(this,gi,E(this,gi).withBit(n,!E(this,gi).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return E(this,gi).toJSON()}}gi=new WeakMap;class F$ extends Qp{constructor(n){super(n);oe(this,"leds");oe(this,"switches");oe(this,"pio");this.leds=new B$(n),this.switches=new j$(n),this.pio=new z$(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),leds:this.leds.toJSON(),switches:this.switches.toJSON(),pio:this.pio.toJSON()}}}var ta,Yn,Rl;let U$=(ta=class extends Mr{constructor(n){super(n);xe(this,Yn,void 0);xe(this,Rl,void 0);n.data==="unchanged"?q(this,Yn,E(n.previous.memory,Yn)):n.data==="randomize"?q(this,Yn,new Uint8Array(ta.SIZE).map(()=>L.random(8).unsigned)):q(this,Yn,new Uint8Array(ta.SIZE));for(const[i,r]of Object.entries(tl)){const s=L.fromUnsigned(r,16);E(this,Yn).set(s.toUint8Array(),Number(i)*4)}for(const i of n.program.data){let r=i.start.value;for(const s of i.getValues())s!==zu&&E(this,Yn).set(s.toUint8Array(),r),r+=i.size/8}q(this,Rl,new Set);for(const i of n.program.instructions){E(this,Yn).set(i.toBytes(),i.start.value);for(let r=0;r<i.length;r++)E(this,Rl).add(i.start.value+r)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Ae.inRange(n))return yield{type:"memory:read.error",error:new Mt("address-out-of-range",n)},null;const i=L.fromUnsigned(E(this,Yn).at(n),8);return yield{type:"memory:read.ok",value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Ae.inRange(n)?E(this,Rl).has(n)?(yield{type:"memory:write.error",error:new Mt("address-has-instruction",n)},!1):(E(this,Yn).set([i.unsigned],n),yield{type:"memory:write.ok"},!0):(yield{type:"memory:write.error",error:new Mt("address-out-of-range",n)},!1)}toJSON(){return[...E(this,Yn)]}},Yn=new WeakMap,Rl=new WeakMap,oe(ta,"SIZE",Ae.MAX_ADDRESS+1),ta);class Sx{constructor(e){oe(this,"cpu");oe(this,"memory");oe(this,"io");const n={computer:this,...e};switch(this.cpu=new A$(n),this.memory=new U$(n),e.devices){case"pio-switches-and-leds":{this.io=new F$(n);break}case"pio-printer":{this.io=new I$(n);break}case"handshake":{this.io=new _$(n);break}default:throw new Error("Invalid devices configuration")}}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var Ot;class V${constructor(){xe(this,Ot,new Sx({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){q(this,Ot,new Sx({...e,previous:E(this,Ot)}))}getComputerState(){var e;return((e=E(this,Ot))==null?void 0:e.toJSON())||null}startCPU(){if(!E(this,Ot))throw new Mt("no-program");return E(this,Ot).cpu.run()}get devices(){if(!E(this,Ot))throw new Error("No computer loaded!");return{clock:{tick:()=>E(this,Ot).io.clock.tick()},console:{readChar:e=>E(this,Ot).io.console.setLastCharRead(e),clear:()=>E(this,Ot).io.console.clear()},f10:{press:()=>E(this,Ot).io.f10.press()},printer:{connected:()=>"printer"in E(this,Ot).io,clear:()=>{if("printer"in E(this,Ot).io)return E(this,Ot).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in E(this,Ot).io)return E(this,Ot).io.printer.print();console.warn("No printer connected to the computer!")}},switches:{connected:()=>"printer"in E(this,Ot).io,toggle:e=>{if("switches"in E(this,Ot).io)return E(this,Ot).io.switches.toggle(e);console.warn("No switches connected to the computer!")}}}}}Ot=new WeakMap;const ne=Pw();function H$(t){return P.jsx(Z_,{store:ne,children:t.children})}const $w=ke("");function W$(t){ne.set($w,t.io.console)}class Ke{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),gr.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let i=[];return this.decompose(e,n,i,0),gr.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new tc(this),s=new tc(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new tc(this,e)}iterRange(e,n=this.length){return new M2(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new D2(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ke.empty:e.length<=32?new Tt(e):gr.from(Tt.split(e,[]))}}class Tt extends Ke{constructor(e,n=G$(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new K$(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new Tt(kx(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=jh(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Tt(a,o.length+s.length));else{let l=a.length>>1;i.push(new Tt(a.slice(0,l)),new Tt(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof Tt))return super.replace(e,n,i);let r=jh(this.text,jh(i.text,kx(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new Tt(r,s):gr.from(Tt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new Tt(i,r)),i=[],r=-1);return r>-1&&n.push(new Tt(i,r)),n}}class gr extends Ke{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?i.push(a):a.decompose(e-o,n-o,i,u)}o=l+1}}replace(e,n,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),u=this.lines-o.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[r]=l,new gr(c,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof gr))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],u=e.children[s];if(l!=u)return i+l.scanIdentical(u,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new Tt(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof gr)for(let g of f.children)d(g);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Tt&&l&&(p=c[c.length-1])instanceof Tt&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Tt(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:gr.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new gr(a,n)}}Ke.empty=new Tt([""],0);function G$(t){let e=-1;for(let n of t)e+=n.length+1;return e}function jh(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function kx(t,e,n){return jh(t,[""],e,n)}class tc{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Tt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Tt?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Tt){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Tt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class M2{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new tc(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class D2{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ke.prototype[Symbol.iterator]=function(){return this.iter()},tc.prototype[Symbol.iterator]=M2.prototype[Symbol.iterator]=D2.prototype[Symbol.iterator]=function(){return this});class K${constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}let hl="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<hl.length;t++)hl[t]+=hl[t-1];function X$(t){for(let e=1;e<hl.length;e+=2)if(hl[e]>t)return hl[e-1]<=t;return!1}function Ex(t){return t>=127462&&t<=127487}const Cx=8205;function hn(t,e,n=!0,i=!0){return(n?_2:Z$)(t,e,i)}function _2(t,e,n){if(e==t.length)return e;e&&L2(t.charCodeAt(e))&&$2(t.charCodeAt(e-1))&&e--;let i=bn(t,e);for(e+=ji(i);e<t.length;){let r=bn(t,e);if(i==Cx||r==Cx||n&&X$(r))e+=ji(r),i=r;else if(Ex(r)){let s=0,o=e-2;for(;o>=0&&Ex(bn(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function Z$(t,e,n){for(;e>0;){let i=_2(t,e-2,n);if(i<e)return i;e--}return 0}function L2(t){return t>=56320&&t<57344}function $2(t){return t>=55296&&t<56320}function bn(t,e){let n=t.charCodeAt(e);if(!$2(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return L2(i)?(n-55296<<10)+(i-56320)+65536:n}function Iw(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ji(t){return t<65536?1:2}const g0=/\r\n?|\n/;var $n=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}($n||($n={}));class Er{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){y0(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Er(e)}composeDesc(e){return this.empty?e:e.empty?this:I2(this,e)}mapDesc(e,n=!1){return e.empty?this:v0(this,e,n)}mapPos(e,n=-1,i=$n.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=r+a;if(l<0){if(u>e)return s+(e-r);s+=a}else{if(i!=$n.Simple&&u>=e&&(i==$n.TrackDel&&r<e&&u>e||i==$n.TrackBefore&&r<e||i==$n.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Er(e)}static create(e){return new Er(e)}}class Bt extends Er{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return y0(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return v0(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(Ke.empty);i.push(o?e.slice(s,s+o):Ke.empty)}s+=o}return new Bt(n,i)}compose(e){return this.empty?e:e.empty?this:I2(this,e,!0)}map(e,n=!1){return e.empty?this:v0(this,e,n,!0)}iterChanges(e,n=!1){y0(this,e,n)}get desc(){return Er.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Pc(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);cn(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;cn(n,c,d),d>0&&Ws(i,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);cn(n,c,-1),cn(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new Bt(n,i),filtered:Er.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!r.length)return;o<n&&cn(r,n-o,-1);let d=new Bt(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof Bt){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?Ke.of(f.split(i||g0)):f:Ke.empty,g=p.length;if(d==h&&g==0)return;d<o&&l(),d>o&&cn(r,d-o,-1),cn(r,h-d,g),Ws(s,r,p),o=h}}return u(e),l(!a),a}static empty(e){return new Bt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(Ke.empty);i[r]=Ke.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new Bt(n,i)}static createSet(e,n){return new Bt(e,n)}}function cn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Ws(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Ke.empty);t.push(n)}}function y0(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let u=r,c=s,d=Ke.empty;for(;u+=a,c+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function v0(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Pc(t),a=new Pc(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);cn(r,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(cn(r,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(cn(r,0,o.ins),s&&Ws(s,r,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;cn(r,u,l<o.i?o.ins:0),s&&l<o.i&&Ws(s,r,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?Bt.createSet(r,s):Er.create(r);throw new Error("Mismatched change set lengths")}}function I2(t,e,n=!1){let i=[],r=n?[]:null,s=new Pc(t),o=new Pc(e);for(let a=!1;;){if(s.done&&o.done)return r?Bt.createSet(i,r):Er.create(i);if(s.ins==0)cn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)cn(i,0,o.ins,a),r&&Ws(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;cn(i,l,c,a),r&&c&&Ws(r,i,o.text)}else o.ins==-1?(cn(i,s.off?0:s.len,l,a),r&&Ws(r,i,s.textBit(l))):(cn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Ws(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>u),s.forward2(l),o.forward(l)}}}}class Pc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Ke.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Ke.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Wo{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Wo(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ee.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ee.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ee.range(e.anchor,e.head)}static create(e,n,i){return new Wo(e,n,i)}}class ee{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ee.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ee([this.main],0)}addRange(e,n=!0){return ee.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,ee.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ee(e.ranges.map(n=>Wo.fromJSON(n)),e.main)}static single(e,n=e){return new ee([ee.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return ee.normalized(e.slice(),n);i=s.to}return new ee(e,n)}static cursor(e,n=0,i,r){return Wo.create(e,e,(n==0?0:n<0?4:8)|(i==null?3:Math.min(2,i))|(r??33554431)<<5)}static range(e,n,i,r){let s=(i??33554431)<<5|(r==null?3:Math.min(2,r));return n<e?Wo.create(n,e,24|s):Wo.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?ee.range(l,a):ee.range(a,l))}}return new ee(e,n)}}function B2(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Bw=0;class be{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=Bw++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new be(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:zw),!!e.static,e.enables)}of(e){return new Fh([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Fh(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Fh(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function zw(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Fh{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=Bw++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||w0(d,c)){let f=i(d);if(a?!Ax(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let g=If(h,p);if(this.dependencies.every(w=>w instanceof be?h.facet(w)===d.facet(w):w instanceof mn?h.field(w,!1)==d.field(w,!1):!0)||(a?Ax(f=i(d),g,r):r(f=i(d),g)))return d.values[o]=g,0}else f=i(d);return d.values[o]=f,1}}}}function Ax(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function w0(t,e){let n=!1;for(let i of e)nc(t,i)&1&&(n=!0);return n}function J$(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<i.length;c++){let d=If(l,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of i)nc(l,u);return l.values[o]=a(l),1},update(l,u){if(!w0(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=w0(l,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&zw(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const Px=be.define({static:!0});class mn{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new mn(Bw++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Px).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,Px.of({field:this,create:e})]}get extension(){return this}}const Bo={lowest:4,low:3,default:2,high:1,highest:0};function xu(t){return e=>new z2(e,t)}const cd={highest:xu(Bo.highest),high:xu(Bo.high),default:xu(Bo.default),low:xu(Bo.low),lowest:xu(Bo.lowest)};class z2{constructor(e,n){this.inner=e,this.prec=n}}class dd{of(e){return new b0(this,e)}reconfigure(e){return dd.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class b0{constructor(e,n){this.compartment=e,this.inner=n}}class $f{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of Y$(e,n,o))h instanceof mn?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of r)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,g=c&&c[h]||[];if(f.every(w=>w.type==0))if(a[p.id]=l.length<<1|1,zw(g,f))l.push(i.facet(p));else{let w=p.combine(f.map(m=>m.value));l.push(i&&p.compare(w,i.facet(p))?i.facet(p):w)}else{for(let w of f)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=u.length<<1,u.push(m=>w.dynamicSlot(m)));a[p.id]=u.length<<1,u.push(w=>J$(w,p,f))}}let d=u.map(h=>h(a));return new $f(e,o,d,a,l,s)}}function Y$(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let u=i[l].indexOf(o);u>-1&&i[l].splice(u,1),o instanceof b0&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof b0){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof z2)s(o.inner,o.prec);else if(o instanceof mn)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Fh)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Bo.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Bo.default),i.reduce((o,a)=>o.concat(a))}function nc(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function If(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const j2=be.define(),F2=be.define({combine:t=>t.some(e=>e),static:!0}),U2=be.define({combine:t=>t.length?t[0]:void 0,static:!0}),V2=be.define(),H2=be.define(),W2=be.define(),G2=be.define({combine:t=>t.length?t[0]:!1});class ys{constructor(e,n){this.type=e,this.value=n}static define(){return new q$}}class q${of(e){return new ys(this,e)}}class Q${constructor(e){this.map=e}of(e){return new $e(this,e)}}class $e{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new $e(this.type,n)}is(e){return this.type==e}static define(e={}){return new Q$(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}$e.reconfigure=$e.define();$e.appendConfig=$e.define();class Ut{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&B2(i,n.newLength),s.some(a=>a.type==Ut.time)||(this.annotations=s.concat(Ut.time.of(Date.now())))}static create(e,n,i,r,s,o){return new Ut(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ut.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ut.time=ys.define();Ut.userEvent=ys.define();Ut.addToHistory=ys.define();Ut.remote=ys.define();function eI(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function K2(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=Bt.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:$e.mapEffects(t.effects,r).concat($e.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function x0(t,e,n){let i=e.selection,r=fl(e.annotations);return e.userEvent&&(r=r.concat(Ut.userEvent.of(e.userEvent))),{changes:e.changes instanceof Bt?e.changes:Bt.of(e.changes||[],n,t.facet(U2)),selection:i&&(i instanceof ee?i:ee.single(i.anchor,i.head)),effects:fl(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function X2(t,e,n){let i=x0(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=K2(i,x0(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=Ut.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return nI(n?tI(r):r)}function tI(t){let e=t.startState,n=!0;for(let r of e.facet(V2)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:eI(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=Bt.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Ut.create(e,r,t.selection&&t.selection.map(s),$e.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(H2);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof Ut?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ut?t=s[0]:t=X2(e,fl(s),!1)}return t}function nI(t){let e=t.startState,n=e.facet(W2),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=K2(i,x0(e,s,t.changes.newLength),!0))}return i==t?t:Ut.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const iI=[];function fl(t){return t==null?iI:Array.isArray(t)?t:[t]}var tn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(tn||(tn={}));const rI=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let S0;try{S0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function sI(t){if(S0)return S0.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||rI.test(n)))return!0}return!1}function oI(t){return e=>{if(!/\S/.test(e))return tn.Space;if(sI(e))return tn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return tn.Word;return tn.Other}}class ze{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)nc(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return nc(this,i),If(this,i)}update(...e){return X2(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(dd.reconfigure)?(n&&(r=new Map,n.compartments.forEach((a,l)=>r.set(l,a)),n=null),r.set(o.value.compartment,o.value.extension)):o.is($e.reconfigure)?(n=null,i=o.value):o.is($e.appendConfig)&&(n=null,i=fl(i).concat(o.value));let s;n?s=e.startState.values.slice():(n=$f.resolve(i,r,this),s=new ze(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new ze(n,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ee.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=fl(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(l.range.map(d)),r=r.compose(c),o=$e.mapEffects(o,c).concat($e.mapEffects(fl(l.effects),d))}return{changes:r,selection:ee.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Bt?e:Bt.of(e,this.doc.length,this.facet(ze.lineSeparator))}toText(e){return Ke.of(e.split(this.facet(ze.lineSeparator)||g0))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(nc(this,n),If(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof mn&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ze.create({doc:e.doc,selection:ee.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=$f.resolve(e.extensions||[],new Map),i=e.doc instanceof Ke?e.doc:Ke.of((e.doc||"").split(n.staticFacet(ze.lineSeparator)||g0)),r=e.selection?e.selection instanceof ee?e.selection:ee.single(e.selection.anchor,e.selection.head):ee.single(0);return B2(r,i.length),n.staticFacet(F2)||(r=r.asSingle()),new ze(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ze.tabSize)}get lineBreak(){return this.facet(ze.lineSeparator)||`
`}get readOnly(){return this.facet(G2)}phrase(e,...n){for(let i of this.facet(ze.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(j2))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return oI(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=hn(n,o,!1);if(s(n.slice(l,o))!=tn.Word)break;o=l}for(;a<r;){let l=hn(n,a);if(s(n.slice(a,l))!=tn.Word)break;a=l}return o==a?null:ee.range(o+i,a+i)}}ze.allowMultipleSelections=F2;ze.tabSize=be.define({combine:t=>t.length?t[0]:4});ze.lineSeparator=U2;ze.readOnly=G2;ze.phrases=be.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});ze.languageData=j2;ze.changeFilter=V2;ze.transactionFilter=H2;ze.transactionExtender=W2;dd.reconfigure=$e.define();function Eo(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class la{eq(e){return this==e}range(e,n=e){return k0.create(e,n,this)}}la.prototype.startSide=la.prototype.endSide=0;la.prototype.point=!1;la.prototype.mapMode=$n.TrackDel;let k0=class Z2{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new Z2(e,n,i)}};function E0(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class jw{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new jw(r,s,i,a):null,pos:o}}}class lt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new lt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(E0)),this.isEmpty)return n.length?lt.of(n):this;let a=new J2(this,null,-1).goto(0),l=0,u=[],c=new ua;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(k0.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?lt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new lt(i,n,s||lt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Oc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Oc.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=Ox(o,a,i),u=new Su(o,l,s),c=new Su(a,l,s);i.iterGaps((d,h,f)=>Tx(u,d,c,h,f,r)),i.empty&&i.length==0&&Tx(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Ox(s,o),l=new Su(s,a,0).goto(i),u=new Su(o,a,0).goto(i);for(;;){if(l.to!=u.to||!C0(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>r)return!0;l.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new Su(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:Math.min(c.length,l);r.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(r.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new ua;for(let r of e instanceof k0?[e]:n?aI(e):e)i.add(r.from,r.to,r.value);return i.finish()}}lt.empty=new lt([],[],null,-1);function aI(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(E0(e,i)>0)return t.slice().sort(E0);e=i}return t}lt.empty.nextLayer=lt.empty;class ua{finishChunk(e){this.chunks.push(new jw(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new ua)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(lt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=lt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Ox(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class J2{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Oc{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new J2(o,n,i,s));return r.length==1?r[0]:new Oc(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)fg(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)fg(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),fg(this.heap,0)}}}function fg(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Su{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Oc.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Hd(this.active,e),Hd(this.activeTo,e),Hd(this.activeRank,e),this.minActive=Rx(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;Wd(this.active,n,i),Wd(this.activeTo,n,r),Wd(this.activeRank,n,s),e&&Wd(e,n,this.cursor.from),this.minActive=Rx(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Hd(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function Tx(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&C0(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!C0(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function C0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Hd(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Wd(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function Rx(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function em(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=hn(t,r));return i}function lI(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=hn(t,r)}return i===!0?-1:t.length}const A0="ͼ",Nx=typeof Symbol>"u"?"__"+A0:Symbol.for(A0),P0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Mx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class uo{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>o.map(w=>g.replace(/&/,w))).reduce((g,w)=>g.concat(w)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Mx[Nx]||1;return Mx[Nx]=e+1,A0+e.toString(36)}static mount(e,n){(e[P0]||new uI(e)).mount(Array.isArray(n)?n:[n])}}let Dx=new Map;class uI{constructor(e){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=Dx.get(n);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[P0]=r;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Dx.set(n,this)}else{this.styleTag=n.createElement("style");let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[P0]=this}mount(e){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var co={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Tc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},cI=typeof navigator<"u"&&/Mac/.test(navigator.platform),dI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Jt=0;Jt<10;Jt++)co[48+Jt]=co[96+Jt]=String(Jt);for(var Jt=1;Jt<=24;Jt++)co[Jt+111]="F"+Jt;for(var Jt=65;Jt<=90;Jt++)co[Jt]=String.fromCharCode(Jt+32),Tc[Jt]=String.fromCharCode(Jt);for(var pg in co)Tc.hasOwnProperty(pg)||(Tc[pg]=co[pg]);function hI(t){var e=cI&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||dI&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Tc:co)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Bf(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function O0(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function fI(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Uh(t,e){if(!e.anchorNode)return!1;try{return O0(t,e.anchorNode)}catch{return!1}}function Rc(t){return t.nodeType==3?ca(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function zf(t,e,n,i){return n?_x(t,e,n,i,-1)||_x(t,e,n,i,1):!1}function jf(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function _x(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:ho(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=jf(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?ho(t):0}else return!1}}function ho(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Fw(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function pI(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function mI(t,e,n,i,r,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body;if(f)h=pI(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let w=c.getBoundingClientRect();h={left:w.left,right:w.left+c.clientWidth,top:w.top,bottom:w.top+c.clientHeight}}let p=0,g=0;if(r=="nearest")e.top<h.top?(g=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+g&&(g=e.bottom-h.bottom+g+o)):e.bottom>h.bottom&&(g=e.bottom-h.bottom+o,n<0&&e.top-g<h.top&&(g=-(h.top+g-e.top+o)));else{let w=e.bottom-e.top,m=h.bottom-h.top;g=(r=="center"&&w<=m?e.top+w/2-m/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-m+o)-h.top}if(i=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),n>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,n<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||g)if(f)u.scrollBy(p,g);else{let w=0,m=0;if(g){let y=c.scrollTop;c.scrollTop+=g,m=c.scrollTop-y}if(p){let y=c.scrollLeft;c.scrollLeft+=p,w=c.scrollLeft-y}e={left:e.left-w,top:e.top-m,right:e.right-w,bottom:e.bottom-m},w&&Math.abs(w-p)<1&&(i="nearest"),m&&Math.abs(m-g)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function gI(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class yI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?ho(n):0),i,Math.min(e.focusOffset,i?ho(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Ta=null;function Y2(t){if(t.setActive)return t.setActive();if(Ta)return t.focus(Ta);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Ta==null?{get preventScroll(){return Ta={preventScroll:!0},!0}}:void 0),!Ta){Ta=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Lx;function ca(t,e,n=e){let i=Lx||(Lx=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function pl(t,e,n){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function vI(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function q2(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function wI(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,ho(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=ho(n))}else{if(n==t)return!0;i=jf(n),n=n.parentNode}}function Q2(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class Sn{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Sn(e.parentNode,jf(e),n)}static after(e,n){return new Sn(e.parentNode,jf(e)+1,n)}}const Uw=[];class rt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=rt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=$x(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=$x(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=ho(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!rt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=Uw){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new eP(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}rt.prototype.breakAfter=0;function $x(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class eP{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function tP(t,e,n,i,r,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,a,l))){if(i<u.length){let f=u[i];f&&r<f.length?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,l)?s[s.length-1]=f:(r&&f.merge(0,r,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function nP(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,tP(t,u,c,a,l,i,0,r,s)}const nl="￿";class iP{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ze.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=nl}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=rt.get(r),l=rt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Ix(r))||Ix(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=rt.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(n,i.offset))}}function Ix(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class Bx{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let ni=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},T0=typeof document<"u"?document:{documentElement:{style:{}}};const R0=/Edge\/(\d+)/.exec(ni.userAgent),rP=/MSIE \d/.test(ni.userAgent),N0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ni.userAgent),tm=!!(rP||N0||R0),zx=!tm&&/gecko\/(\d+)/i.test(ni.userAgent),mg=!tm&&/Chrome\/(\d+)/.exec(ni.userAgent),jx="webkitFontSmoothing"in T0.documentElement.style,sP=!tm&&/Apple Computer/.test(ni.vendor),Fx=sP&&(/Mobile\/\w+/.test(ni.userAgent)||ni.maxTouchPoints>2);var we={mac:Fx||/Mac/.test(ni.platform),windows:/Win/.test(ni.platform),linux:/Linux|X11/.test(ni.platform),ie:tm,ie_version:rP?T0.documentMode||6:N0?+N0[1]:R0?+R0[1]:0,gecko:zx,gecko_version:zx?+(/Firefox\/(\d+)/.exec(ni.userAgent)||[0,0])[1]:0,chrome:!!mg,chrome_version:mg?+mg[1]:0,ios:Fx,android:/Android\b/.test(ni.userAgent),webkit:jx,safari:sP,webkit_version:jx?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:T0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const bI=256;class Pr extends rt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Pr)||this.length-(n-e)+i.length>bI||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Pr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Sn(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return xI(this.dom,e,n)}}class us extends rt{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(q2(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof us&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(nP(this,e,n,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new us(this.mark,n,o)}domAtPos(e){return oP(this,e)}coordsAt(e,n){return lP(this,e,n)}}function xI(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?we.chrome||we.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=ca(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return we.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?Fw(l,o<0):l||null}class Go extends rt{constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}static create(e,n,i){return new Go(e,n,i)}split(e){let n=Go.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Go)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Go&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ke.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Ke.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Sn.before(this.dom):Sn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Fw(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class zl extends rt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof zl&&e.side==this.side}split(){return new zl(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Sn.before(this.dom):Sn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ke.empty}get isHidden(){return!0}}Pr.prototype.children=Go.prototype.children=zl.prototype.children=Uw;function oP(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Sn(n,0)}function aP(t,e,n){let i,{children:r}=t;n>0&&e instanceof us&&r.length&&(i=r[r.length-1])instanceof us&&i.mark.eq(e.mark)?aP(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function lP(t,e,n){let i=null,r=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):SI(t)}function SI(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Rc(e);return n[n.length-1]||null}function M0(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Ux=Object.create(null);function Vw(t,e,n){if(t==e)return!0;t||(t=Ux),e||(e=Ux);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function D0(t,e,n){let i=null;if(e)for(let r in e)n&&r in n||t.removeAttribute(i=r);if(n)for(let r in n)e&&e[r]==n[r]||t.setAttribute(i=r,n[r]);return!!i}function kI(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Sa{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}destroy(e){}}var xt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(xt||(xt={}));class He extends la{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new hd(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new fo(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=uP(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new fo(e,i,r,n,e.widget||null,!0)}static line(e){return new fd(e)}static set(e,n=!1){return lt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}He.none=lt.empty;class hd extends He{constructor(e){let{start:n,end:i}=uP(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof hd&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Vw(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}hd.prototype.point=!1;class fd extends He{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof fd&&this.spec.class==e.spec.class&&Vw(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}fd.prototype.mapMode=$n.TrackBefore;fd.prototype.point=!0;class fo extends He{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?$n.TrackBefore:$n.TrackAfter:$n.TrackDel}get type(){return this.startSide<this.endSide?xt.WidgetRange:this.startSide<=0?xt.WidgetBefore:xt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof fo&&EI(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}fo.prototype.point=!0;function uP(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function EI(t,e){return t==e||!!(t&&e&&t.compare(e))}function _0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class xn extends rt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof xn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),nP(this,e,n,i?i.children:[],s,o),!0}split(e){let n=new xn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Vw(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){aP(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=M0(n,this.attrs||{})),i&&(this.attrs=M0({class:i},this.attrs||{}))}domAtPos(e){return oP(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(q2(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(D0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&rt.get(r)instanceof us;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=rt.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!we.ios||!this.children.some(s=>s instanceof Pr))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Pr)||/[^ -~]/.test(i.text))return null;let r=Rc(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=lP(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}get type(){return xt.Text}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof xn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class qo extends rt{constructor(e,n,i){super(),this.widget=e,this.length=n,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof qo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Sn.before(this.dom):Sn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new qo(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i}get children(){return Uw}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ke.empty}domBoundsAround(){return null}become(e){return e instanceof qo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ic{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof qo&&e.type==xt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new xn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Gd(new zl(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Gd(new Pr(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof fo){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof fo)if(i.block){let{type:l}=i;l==xt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new qo(i.widget||new Vx("div"),a,l))}else{let l=Go.create(i.widget||new Vx("span"),a,a?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(Gd(new zl(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Gd(l,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new ic(e,n,i,s);return o.openEnd=lt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Gd(t,e){for(let n of e)t=new us(n,[t],t.length);return t}class Vx extends Sa{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const cP=be.define(),dP=be.define(),hP=be.define(),fP=be.define(),L0=be.define(),pP=be.define(),mP=be.define(),gP=be.define({combine:t=>t.some(e=>e)}),yP=be.define({combine:t=>t.some(e=>e)});class Ff{constructor(e,n="nearest",i="nearest",r=5,s=5){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new Ff(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Hx=$e.define({map:(t,e)=>t.map(e)});function Gi(t,e,n){let i=t.facet(fP);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const nm=be.define({combine:t=>t.length?t[0]:!0});let CI=0;const ju=be.define();class sn{constructor(e,n,i,r){this.id=e,this.create=n,this.domEventHandlers=i,this.extension=r(this)}static define(e,n){const{eventHandlers:i,provide:r,decorations:s}=n||{};return new sn(CI++,e,i,o=>{let a=[ju.of(o)];return s&&a.push(Nc.of(l=>{let u=l.plugin(o);return u?s(u):He.none})),r&&a.push(r(o)),a})}static fromClass(e,n){return sn.define(i=>new e(i),n)}}class gg{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(Gi(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Gi(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){Gi(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const vP=be.define(),Hw=be.define(),Nc=be.define(),Ww=be.define(),wP=be.define();function bP(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(wP)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Fu=be.define();class Ci{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Ci(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new Ci(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!l)return i;new Ci(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class Uf{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Bt.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Ci(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new Uf(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var vt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(vt||(vt={}));const $0=vt.LTR,AI=vt.RTL;function xP(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const PI=xP("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),OI=xP("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),I0=Object.create(null),nr=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);I0[e]=n,I0[n]=-e}function TI(t){return t<=247?PI[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?OI[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const RI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ml{constructor(e,n,i){this.from=e,this.to=n,this.level=i}get dir(){return this.level%2?AI:$0}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const ft=[];function NI(t,e){let n=t.length,i=e==$0?1:2,r=e==$0?2:1;if(!t||i==1&&!RI.test(t))return SP(n);for(let o=0,a=i,l=i;o<n;o++){let u=TI(t.charCodeAt(o));u==512?u=a:u==8&&l==4&&(u=16),ft[o]=u==4?2:u,u&7&&(l=u),a=u}for(let o=0,a=i,l=i;o<n;o++){let u=ft[o];if(u==128)o<n-1&&a==ft[o+1]&&a&24?u=ft[o]=a:ft[o]=256;else if(u==64){let c=o+1;for(;c<n&&ft[c]==64;)c++;let d=o&&a==8||c<n&&ft[c]==8?l==1?1:8:256;for(let h=o;h<c;h++)ft[h]=d;o=c-1}else u==8&&l==1&&(ft[o]=1);a=u,u&7&&(l=u)}for(let o=0,a=0,l=0,u,c,d;o<n;o++)if(c=I0[u=t.charCodeAt(o)])if(c<0){for(let h=a-3;h>=0;h-=3)if(nr[h+1]==-c){let f=nr[h+2],p=f&2?i:f&4?f&1?r:i:0;p&&(ft[o]=ft[nr[h]]=p),a=h;break}}else{if(nr.length==189)break;nr[a++]=o,nr[a++]=u,nr[a++]=l}else if((d=ft[o])==2||d==1){let h=d==i;l=h?0:1;for(let f=a-3;f>=0;f-=3){let p=nr[f+2];if(p&2)break;if(h)nr[f+2]|=2;else{if(p&4)break;nr[f+2]|=4}}}for(let o=0;o<n;o++)if(ft[o]==256){let a=o+1;for(;a<n&&ft[a]==256;)a++;let l=(o?ft[o-1]:i)==1,u=(a<n?ft[a]:i)==1,c=l==u?l?1:2:i;for(let d=o;d<a;d++)ft[d]=c;o=a-1}let s=[];if(i==1)for(let o=0;o<n;){let a=o,l=ft[o++]!=1;for(;o<n&&l==(ft[o]!=1);)o++;if(l)for(let u=o;u>a;){let c=u,d=ft[--u]!=2;for(;u>a&&d==(ft[u-1]!=2);)u--;s.push(new ml(u,c,d?2:1))}else s.push(new ml(a,o,0))}else for(let o=0;o<n;){let a=o,l=ft[o++]==2;for(;o<n&&l==(ft[o]==2);)o++;s.push(new ml(a,o,l?1:2))}return s}function SP(t){return[new ml(0,t,0)]}let kP="";function MI(t,e,n,i,r){var s;let o=i.head-t.from,a=-1;if(o==0){if(!r||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),a=0)}else if(o==t.length){if(r)return null;let h=e[e.length-1];h.level!=n&&(o=h.side(!0,n),a=e.length-1)}a<0&&(a=ml.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let l=e[a];o==l.side(r,n)&&(l=e[a+=r?1:-1],o=l.side(!r,n));let u=r==(l.dir==n),c=hn(t.text,o,u);if(kP=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=l.side(r,n))return ee.cursor(c+t.from,u?-1:1,l.level);let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return!d&&l.level!=n?ee.cursor(r?t.to:t.from,r?-1:1,n):d&&d.level<l.level?ee.cursor(d.side(!r,n)+t.from,r?1:-1,d.level):ee.cursor(c+t.from,r?-1:1,l.level)}class Wx extends rt{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new xn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ci(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=this.view.inputState.composing<0?null:_I(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:a,to:l}=this.hasComposition;n=new Ci(a,l,e.changes.mapPos(a,-1),e.changes.mapPos(l,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(we.ie||we.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),o=II(r,s,e.changes);return n=Ci.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=we.chrome||we.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof qo&&o.widget instanceof Gx&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,g;if(i&&i.range.fromB<d&&i.range.toB>c){let x=ic.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=ic.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=x.breakAtStart,p=x.openStart,g=k.openEnd;let O=this.compositionView(i);k.breakAtStart?O.breakAfter=1:k.content.length&&O.merge(O.length,O.length,k.content[0],!1,k.openStart,0)&&(O.breakAfter=k.content[0].breakAfter,k.content.shift()),x.content.length&&O.merge(0,0,x.content[x.content.length-1],!0,0,x.openEnd)&&x.content.pop(),h=x.content.concat(O).concat(k.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:g}=ic.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:w,off:m}=s.findPos(u,1),{i:y,off:v}=s.findPos(l,-1);tP(this,y,v,w,m,h,f,p,g)}i&&this.fixCompositionDOM(i)}compositionView(e){let n=new Pr(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new us(r,[n],n.length);let i=new xn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let a=rt.get(s);a!=o&&(a&&(a.dom=null),o.setDOM(s))},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&Uh(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.domAtPos(a.anchor),u=a.empty?l:this.domAtPos(a.head);if(we.gecko&&a.empty&&!this.hasComposition&&DI(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new Sn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!zf(l.node,l.offset,c.anchorNode,c.anchorOffset)||!zf(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{we.android&&we.chrome&&this.dom.contains(c.focusNode)&&BI(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Bf(this.view.root);if(d)if(a.empty){if(we.gecko){let h=LI(l.node,l.offset);if(h&&h!=3){let f=CP(l.node,l.offset,h==1?1:-1);f&&(l=new Sn(f,h==1?0:f.nodeValue.length))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Sn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Sn(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Bf(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=xn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}nearest(e){for(let n=e;n;){let i=rt.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof xn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=xt.WidgetBefore&&s.type!=xt.WidgetAfter&&(!r||n==2||this.children[r-1].breakAfter||this.children[r-1].type==xt.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);i=o}}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof xn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof Pr))return null;let s=hn(r.text,i);if(s==i)return null;let o=ca(r.dom,i,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==vt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,g=p?Rc(p):[];if(g.length){let w=g[g.length-1],m=l?w.right-f.left:f.right-w.left;m>a&&(a=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?vt.RTL:vt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof xn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Rc(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new eP(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=n.lineBlockAt(o).bottom-n.lineBlockAt(i).top;e.push(He.replace({widget:new Gx(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return He.set(e)}updateDeco(){let e=this.view.state.facet(Nc).map((n,i)=>(this.dynamicDecorationMap[i]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=bP(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom};mI(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==vt.LTR)}}function DI(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class Gx extends Sa{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function EP(t){let e=t.observer.selectionRange,n=e.focusNode&&CP(e.focusNode,e.focusOffset,0);if(!n)return null;let i=rt.get(n),r,s;if(i instanceof Pr)r=i.posAtStart,s=r+i.length;else e:for(let o=0,a=n;;){for(let u=a.previousSibling,c;u;u=u.previousSibling){if(c=rt.get(u)){r=s=c.posAtEnd+o;break e}let d=new iP([],t.state);if(d.readNode(u),d.text.indexOf(nl)>-1)return null;o+=d.text.length}if(a=a.parentNode,!a)return null;let l=rt.get(a);if(l){r=s=l.posAtStart+o;break}}return{from:r,to:s,node:n}}function _I(t,e){let n=EP(t);if(!n)return null;let{from:i,to:r,node:s}=n,o=e.mapPos(i,-1),a=e.mapPos(r,1),l=s.nodeValue;if(/[\n\r]/.test(l))return null;if(a-o!=l.length){let h=e.mapPos(i,1),f=e.mapPos(r,-1);if(f-h==l.length)o=h,a=f;else if(t.state.doc.sliceString(a-l.length,a)==l)o=a-l.length;else if(t.state.doc.sliceString(o,o+l.length)==l)a=o+l.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,a)!=l||o>u.head||a<u.head)return null;let c=[],d=new Ci(i,r,o,a);for(let h=s.parentNode;;h=h.parentNode){let f=rt.get(h);if(f instanceof us)c.push({node:h,deco:f.mark});else{if(f instanceof xn||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:d,text:s,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new hd({inclusive:!0,attributes:kI(h),tagName:h.tagName.toLowerCase()})});else return null}}}function CP(t,e,n){if(n<=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=ho(i);else break}if(n>=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r<i.childNodes.length&&n>=0)i=i.childNodes[r],r=0;else break}return null}function LI(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class $I{constructor(){this.changes=[]}compareRange(e,n){_0(e,n,this.changes)}comparePoint(e,n){_0(e,n,this.changes)}}function II(t,e,n){let i=new $I;return lt.compare(t,e,n,i),i.changes}function BI(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function zI(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return ee.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=hn(r.text,s,!1):a=hn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let u=hn(r.text,o,!1);if(i(r.text.slice(u,o))!=l)break;o=u}for(;a<r.length;){let u=hn(r.text,a);if(i(r.text.slice(a,u))!=l)break;a=u}return ee.range(o+r.from,a+r.from)}function jI(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function FI(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function yg(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Kx(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Xx(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function B0(t,e,n){let i,r,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let g=Rc(p);for(let w=0;w<g.length;w++){let m=g[w];r&&yg(r,m)&&(m=Kx(Xx(m,r.bottom),r.top));let y=jI(e,m),v=FI(n,m);if(y==0&&v==0)return p.nodeType==3?Zx(p,e,n):B0(p,e,n);if(!i||o>v||o==v&&s>y){i=p,r=m,s=y,o=v;let x=v?n<m.top?-1:1:y?e<m.left?-1:1:0;a=!x||(x>0?w<g.length-1:w>0)}y==0?n>m.bottom&&(!c||c.bottom<m.bottom)?(l=p,c=m):n<m.top&&(!d||d.top>m.top)&&(u=p,d=m):c&&yg(c,m)?c=Xx(c,m.bottom):d&&yg(d,m)&&(d=Kx(d,m.top))}}if(c&&c.bottom>=n?(i=l,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Zx(i,h,n);if(a&&i.contentEditable!="false")return B0(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function Zx(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=ca(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((we.chrome||we.gecko)&&ca(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};r=a+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function AP(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let x=t.viewState.heightOracle.textHeight/2,k=!1;l=t.elementAtHeight(h),l.type!=xt.Text;)for(;h=i>0?l.bottom+x:l.top-x,!(h>=0&&h<=u);){if(k)return n?null:0;k=!0,i=-i}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:Jx(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Jx(t,o,l,c,d);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,w=g.elementFromPoint(c,d);w&&!t.contentDOM.contains(w)&&(w=null),w||(c=Math.max(o.left+1,Math.min(o.right-1,c)),w=g.elementFromPoint(c,d),w&&!t.contentDOM.contains(w)&&(w=null));let m,y=-1;if(w&&((r=t.docView.nearest(w))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let x=p.caretPositionFromPoint(c,d);x&&({offsetNode:m,offset:y}=x)}else if(p.caretRangeFromPoint){let x=p.caretRangeFromPoint(c,d);x&&({startContainer:m,startOffset:y}=x,(!t.contentDOM.contains(m)||we.safari&&UI(m,y,c)||we.chrome&&VI(m,y,c))&&(m=void 0))}}if(!m||!t.docView.dom.contains(m)){let x=xn.find(t.docView,f);if(!x)return h>l.top+l.height/2?l.to:l.from;({node:m,offset:y}=B0(x.dom,c,d))}let v=t.docView.nearest(m);if(!v)return null;if(v.isWidget&&((s=v.dom)===null||s===void 0?void 0:s.nodeType)==1){let x=v.dom.getBoundingClientRect();return e.y<x.top||e.y<=x.bottom&&e.x<=(x.left+x.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(m,y)+v.posAtStart}function Jx(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+lI(o,s,t.state.tabSize)}function UI(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return ca(t,i-1,i).getBoundingClientRect().left>n}function VI(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():ca(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function z0(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==xt.Text))return i}return n}function HI(t,e,n,i){let r=z0(t,e.head),s=!i||r.type!=xt.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==vt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ee.cursor(l,n?-1:1)}return ee.cursor(n?r.to:r.from,n?-1:1)}function Yx(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let u=MI(r,s,o,a,n),c=kP;if(!u){if(r.number==(n?t.state.doc.lines:1))return a;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=ee.cursor(n?r.from:r.to)}if(l){if(!l(c))return a}else{if(!i)return u;l=i(c)}a=u}}function WI(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==tn.Space&&(r=o),r==o}}function GI(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return ee.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,g=AP(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?g<r:g>r))return ee.cursor(g,e.assoc,void 0,o)}}function Vh(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function vg(t,e,n){let i=Vh(t.state.facet(Ww).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:ee.cursor(i,i<n.from?1:-1)}class KI{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(i,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(r.type,e,r)?r.preventDefault():i(e,r))};for(let i in _t){let r=_t[i];e.contentDOM.addEventListener(i,s=>{qx(e,s)&&n(r,s)},j0[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{if(i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(_t.mousedown,i),!i.defaultPrevented&&i.button==2)){let r=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=r,200)}}),e.scrollDOM.addEventListener("drop",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(_t.drop,i)}),we.chrome&&we.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,we.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var i;let r;this.customHandlers=[];for(let s of n)if(r=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{qx(e,a)&&this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,n,i){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,i,n)||i.defaultPrevented)return!0}catch(o){Gi(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,n,e)}catch(s){Gi(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&OP.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),we.android&&we.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let i;return we.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((i=PP.find(r=>r.keyCode==n.keyCode))&&!n.ctrlKey||XI.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=i||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,pl(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:we.safari&&!we.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PP=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],XI="dthko",OP=[16,17,18,20,91,92,224,225],Kd=6;function Xd(t){return Math.max(0,t)*.7+8}function ZI(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class JI{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=gI(e.contentDOM),this.atoms=e.state.facet(Ww).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ze.allowMultipleSelections)&&YI(e,n),this.dragging=QI(e,n)&&MP(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&ZI(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=bP(this.view);e.clientX-o.left<=s.left+Kd?i=-Xd(s.left-e.clientX):e.clientX+o.right>=s.right-Kd&&(i=Xd(e.clientX-s.right)),e.clientY-o.top<=s.top+Kd?r=-Xd(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Kd&&(r=Xd(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=Vh(this.atoms,r.from,0);o!=r.from&&(s=ee.cursor(o,-1))}else{let o=Vh(this.atoms,r.from,-1),a=Vh(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=ee.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?ee.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection)||i.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function YI(t,e){let n=t.state.facet(cP);return n.length?n[0](e):we.mac?e.metaKey:e.ctrlKey}function qI(t,e){let n=t.state.facet(dP);return n.length?n[0](e):we.mac?!e.altKey:!e.ctrlKey}function QI(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Bf(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function qx(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=rt.get(n))&&i.ignoreEvent(e))return!1;return!0}const _t=Object.create(null),j0=Object.create(null),TP=we.ie&&we.ie_version<15||we.ios&&we.webkit_version<604;function e3(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),RP(t,n.value)},50)}function RP(t,e){let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(F0!=null&&n.selection.ranges.every(l=>l.empty)&&F0==s.toString()){let l=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:ee.cursor(u.from+d.length)}})}else o?i=n.changeByRange(l=>{let u=s.line(r++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ee.cursor(l.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}_t.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};_t.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};_t.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};j0.touchstart=j0.touchmove={passive:!0};_t.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let i of t.state.facet(hP))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=i3(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new JI(t,e,n,i)),i&&t.observer.ignore(()=>Y2(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function Qx(t,e,n,i){if(i==1)return ee.cursor(e,n);if(i==2)return zI(t.state,e,n);{let r=xn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,ee.range(o,a)}}let NP=(t,e)=>t>=e.top&&t<=e.bottom,eS=(t,e,n)=>NP(e,n)&&t>=n.left&&t<=n.right;function t3(t,e,n,i){let r=xn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&eS(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&eS(n,i,a)?1:o&&NP(i,o)?-1:1}function tS(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:t3(t,n,e.clientX,e.clientY)}}const n3=we.ie&&we.ie_version<=11;let nS=null,iS=0,rS=0;function MP(t){if(!n3)return t.detail;let e=nS,n=rS;return nS=t,rS=Date.now(),iS=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(iS+1)%3:1}function i3(t,e){let n=tS(t,e),i=MP(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=tS(t,s),u,c=Qx(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=Qx(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?ee.range(h,f):ee.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(u=r3(r,l.pos))?u:a?r.addRange(c):ee.create([c])}}}function r3(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ee.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}_t.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:i}=t.inputState;i&&(i.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function sS(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=i&&s&&s.dragging&&qI(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}_t.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let i=Array(n.length),r=0,s=()=>{++r==n.length&&sS(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}}else sS(t,e,e.dataTransfer.getData("Text"),!0)};_t.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=TP?null:e.clipboardData;n?(RP(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):e3(t)};function s3(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function o3(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}let F0=null;_t.copy=_t.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=o3(t.state);if(!n&&!r)return;F0=r?n:null;let s=TP?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):s3(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const DP=ys.define();function _P(t,e){let n=[];for(let i of t.facet(mP)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:DP.of(!0)}):null}function LP(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=_P(t.state,e);n?t.dispatch(n):t.update([])}},10)}_t.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),LP(t)};_t.blur=t=>{t.observer.clearSelectionRange(),LP(t)};_t.compositionstart=_t.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};_t.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,we.chrome&&we.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};_t.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};_t.beforeinput=(t,e)=>{var n;let i;if(we.chrome&&we.android&&(i=PP.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const oS=["pre-wrap","normal","pre-line","break-spaces"];class a3{constructor(e){this.lineWrapping=e,this.doc=Ke.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return oS.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=oS.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class l3{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class yr{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?xt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof fo?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new yr(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var at=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(at||(at={}));const Hh=.001;class En{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>Hh&&(e.heightChanged=!0),this.height=n)}replace(e,n,i){return En.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=r[a],h=s.lineAt(l,at.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,at.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,at.ByPosNoHeight,i,0,0));c+=h.from-l,l=h.from;let p=Gw.build(i.setDoc(o),e,c,d);s=s.replace(l,u,p)}return s.updateHeight(i,0)}static empty(){return new Qn(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new u3(En.of(e.slice(0,n)),o,En.of(e.slice(i)))}}En.prototype.size=1;class $P extends En{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new yr(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Qn extends $P{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new yr(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Qn||r instanceof Xt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Xt?r=new Qn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):En.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Xt extends En{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(i,e-d/2);return new yr(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:d}=n.doc.line(s+u);return new yr(c,d,i+a*u,a,0)}}lineAt(e,n,i,r,s){if(n==at.ByHeight)return this.blockAt(e,i,r,s);if(n==at.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new yr(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=r+a*d+l*(u.from-s-d);return new yr(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new yr(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Xt?i[i.length-1]=new Xt(s.length+r):i.push(null,new Xt(r-1))}if(e>0){let s=i[0];s instanceof Xt?i[0]=new Xt(e+s.length):i.unshift(new Xt(e-1),null)}return En.of(i)}decomposeLeft(e,n){n.push(new Xt(e-1),null)}decomposeRight(e,n){n.push(null,new Xt(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Xt(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=Hh&&(l=-2);let h=new Qn(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new Xt(s-a).updateHeight(e,a));let u=En.of(o);return(l<0||Math.abs(u.height-this.height)>=Hh||Math.abs(l-this.heightMetrics(e,n).perLine)>=Hh)&&(e.heightChanged=!0),u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class u3 extends En{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==at.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==at.ByPosNoHeight?at.ByPosNoHeight:at.ByPos;return l?u.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let u=this.lineAt(l,at.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&aS(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),aS(s,a)}return En.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?En.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function aS(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Xt&&(i=t[e+1])instanceof Xt&&t.splice(e-1,3,new Xt(n.length+1+i.length))}const c3=5;class Gw{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Qn?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Qn(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new $P(o,r,i)):(o||s||r>=c3)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Qn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Xt(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Qn)return e;let n=new Qn(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let i=(n=e.deco)===null||n===void 0?void 0:n.type;i==xt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i!=xt.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Qn)&&!this.isCovered?this.nodes.push(new Qn(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Qn&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new Gw(i,e);return lt.spans(n,i,r,s,0),s.finish(i)}}function d3(t,e,n){let i=new h3;return lt.compare(t,e,n,i,0),i.changes}class h3{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&_0(e,n,this.changes,5)}}function f3(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=u==t.parentNode?h.bottom:Math.min(l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function p3(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class wg{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return He.replace({widget:new m3(this.size,e)}).range(this.from,this.to)}}class m3 extends Sa{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class lS{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=uS,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=vt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Hw).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new a3(n),this.stateDeco=e.facet(Nc).filter(i=>typeof i!="function"),this.heightMap=En.empty().applyChanges(this.stateDeco,Ke.empty,this.heightOracle.setDoc(e.doc),[new Ci(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=He.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Zd(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?uS:new v3(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Uu(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Nc).filter(c=>typeof c!="function");let r=e.changedRanges,s=Ci.extendWithRanges(r,d3(i,this.stateDeco,e?e.changes:Bt.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(yP)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?vt.RTL:vt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0,d=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=Q2(e.scrollDOM);let f=(this.printing?p3:f3)(n,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let m=a.width;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let v=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(v)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:x,charWidth:k,textHeight:O}=e.docView.measureTextSize();o=x>0&&r.refresh(s,x,k,O,m/k,v),o&&(e.docView.minWidth=0,u|=8)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),r.heightChanged=!1;for(let x of this.viewports){let k=x.from==this.viewport.from?v:e.docView.measureVisibleLineHeights(x);this.heightMap=(o?En.empty().applyChanges(this.stateDeco,Ke.empty,this.heightOracle,[new Ci(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new l3(x.from,k))}r.heightChanged&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Zd(r.lineAt(o-i*1e3,at.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,at.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,at.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new Zd(r.lineAt(h-1e3/2,at.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,at.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Zd(this.heightMap.lineAt(i,at.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,at.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,at.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,at.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new wg(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=vt.LTR&&!i)return[];let a=[],l=(u,c,d,h)=>{if(c-u<s)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let w of p)if(w>u&&w<c){l(u,w-10,d,h),l(w+10,c,d,h);return}let g=y3(e,w=>w.from>=d.from&&w.to<=d.to&&Math.abs(w.from-u)<s&&Math.abs(w.to-c)<s&&!p.some(m=>w.from<m&&w.to>m));if(!g){if(c<d.to&&n&&i&&n.visibleRanges.some(w=>w.from<=c&&w.to>=c)){let w=n.moveToLineBoundary(ee.cursor(c),!1,!0).head;w>u&&(c=w)}g=new wg(u,c,this.gapSize(d,u,c,h))}a.push(g)};for(let u of this.viewportLines){if(u.length<o)continue;let c=g3(u.from,u.to,this.stateDeco);if(c.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,w;if(d!=null){let m=Yd(c,d),y=((this.visibleBottom-this.visibleTop)/2+p)/u.height;g=m-y,w=m+y}else g=(this.visibleTop-u.top-p)/u.height,w=(this.visibleBottom-u.top+p)/u.height;h=Jd(c,g),f=Jd(c,w)}else{let p=c.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,w,m;if(d!=null){let y=Yd(c,d),v=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/p;w=y-v,m=y+v}else w=(this.pixelViewport.left-g)/p,m=(this.pixelViewport.right+g)/p;h=Jd(c,w),f=Jd(c,m)}h>u.from&&l(u.from,h,u,c),f<u.to&&l(f,u.to,u,c)}return a}gapSize(e,n,i,r){let s=Yd(r,i)-Yd(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){wg.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=He.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];lt.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Uu(this.heightMap.lineAt(e,at.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Uu(this.heightMap.lineAt(this.scaler.fromDOM(e),at.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Uu(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Zd{constructor(e,n){this.from=e,this.to=n}}function g3(t,e,n){let i=[],r=t,s=0;return lt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Jd({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Yd(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function y3(t,e){for(let n of t)if(e(n))return n}const uS={toDOM(t){return t},fromDOM(t){return t},scale:1};class v3{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let u=n.lineAt(a,at.ByPos,e,0,0).top,c=n.lineAt(l,at.ByPos,e,0,0).bottom;return r+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function Uu(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new yr(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Uu(r,e)):t._content)}const qd=be.define({combine:t=>t.join(" ")}),U0=be.define({combine:t=>t.indexOf(!0)>-1}),V0=uo.newName(),IP=uo.newName(),BP=uo.newName(),zP={"&light":"."+IP,"&dark":"."+BP};function H0(t,e,n){return new uo(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const w3=H0("."+V0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},zP);class b3{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:S3(e),l=new iP(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=k3(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!O0(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!O0(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=ee.single(u,l)}}}function jP(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,u=null;(s===8||we.android&&e.text.length<a-o)&&(l=r.to,u="end");let c=x3(t.state.doc.sliceString(o,a,nl),e.text,l-o,u);c&&(we.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==nl+nl&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:Ke.of(e.text.slice(c.from,c.toB).split(nl))})}else i&&(!t.hasFocus&&t.state.facet(nm)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(we.mac||we.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=ee.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ke.of([" "])}):we.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ee.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ke.of([" "])}),n){let o=t.state;if(we.ios&&t.inputState.flushIOSKey(t)||we.android&&(n.from==r.from&&n.to==r.to&&n.insert.length==1&&n.insert.lines==2&&pl(t.contentDOM,"Enter",13)||(n.from==r.from-1&&n.to==r.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&pl(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&n.insert.length==0&&pl(t.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(t.state.facet(pP).some(c=>c(t,n.from,n.to,a)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let l;if(n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=r.from<n.from?o.sliceDoc(r.from,n.from):"",d=r.to>n.to?o.sliceDoc(n.to,r.to):"";l=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let c=o.changes(n),d=i&&i.main.to<=c.newLength?i.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){let h=t.state.sliceDoc(n.from,n.to),f=EP(t)||t.state.doc.lineAt(r.head),p=r.to-n.to,g=r.to-r.from;l=o.changeByRange(w=>{if(w.from==r.from&&w.to==r.to)return{changes:c,range:d||w.map(c)};let m=w.to-p,y=m-h.length;if(w.to-w.from!=g||t.state.sliceDoc(y,m)!=h||f&&w.to>=f.from&&w.from<=f.to)return{range:w};let v=o.changes({from:y,to:m,insert:n.insert}),x=w.to-r.to;return{changes:v,range:d?ee.range(Math.max(0,d.anchor+x),Math.max(0,d.head+x)):w.map(v)}})}else l={changes:c,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(l,{scrollIntoView:!0,userEvent:u}),!0}else if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function x3(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function S3(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Bx(n,i)),(r!=n||s!=i)&&e.push(new Bx(r,s))),e}function k3(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?ee.single(n+e,i+e):null}const E3={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},bg=we.ie&&we.ie_version<=11;class C3{constructor(e){this.view=e,this.active=!1,this.selectionRange=new yI,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(we.ie&&we.ie_version<=11||we.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),bg&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(nm)?i.root.activeElement!=this.dom:!Uh(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(we.ie&&we.ie_version<=11||we.android&&we.chrome)&&!i.state.selection.main.empty&&r.focusNode&&zf(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=we.safari&&e.root.nodeType==11&&fI(this.dom.ownerDocument)==this.dom&&A3(this.view)||Bf(e.root);if(!n||this.selectionRange.eq(n))return!1;let i=Uh(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&wI(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,E3),bg&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),bg&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&pl(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Uh(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new b3(this.view,e,n,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let i=this.view.state,r=jP(this.view,n);return this.view.state==i&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=cS(n,e.previousSibling||e.target.previousSibling,-1),r=cS(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function cS(t,e,n){for(;e;){let i=rt.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function A3(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return zf(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}class Ce{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||vI(e.parent)||document,this.viewState=new lS(e.state||ze.create(e)),this.plugins=this.state.facet(ju).map(n=>new gg(n));for(let n of this.plugins)n.update(this);this.observer=new C3(this),this.inputState=new KI(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Wx(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof Ut?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(DP))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=_P(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(ze.phrases)!=this.state.facet(ze.phrases))return this.setState(s);r=Uf.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Ff(f.empty?f:ee.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Hx)&&(d=f.value)}this.viewState.update(r,d),this.bidiCache=Vf.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Fu)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(qd)!=r.state.facet(qd)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let h of this.state.facet(L0))h(r);(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!jP(this,c)&&u.force&&pl(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new lS(e),this.plugins=e.facet(ju).map(i=>new gg(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Wx(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(ju),i=e.state.facet(ju);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new gg(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,{scrollTop:r}=i,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;r!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Q2(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return Gi(this.state,p),dS}}),d=Uf.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let f=0;f<u.length;f++)if(c[f]!=dS)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){Gi(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=i.scrollTop=r+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(L0))a(n)}get themeClasses(){return V0+" "+(this.state.facet(U0)?BP:IP)+" "+this.state.facet(qd)}updateAttrs(){let e=hS(this,vP,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(nm)?"true":"false",class:"cm-content",style:`${we.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),hS(this,Hw,n);let i=this.observer.ignore(()=>{let r=D0(this.contentDOM,this.contentAttrs,n),s=D0(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Ce.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Fu),uo.mount(this.root,this.styleModules.concat(w3).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return vg(this,e,Yx(this,e,n,i))}moveByGroup(e,n){return vg(this,e,Yx(this,e,n,i=>WI(this,e.head,i)))}moveToLineBoundary(e,n,i=!0){return HI(this,e,n,i)}moveVertically(e,n,i){return vg(this,e,GI(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),AP(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[ml.find(s,e-r.from,-1,n)];return Fw(i,o.dir==vt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(gP)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>P3)return SP(e.length);let n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n)return r.order;let i=NI(e.text,n);return this.bidiCache.push(new Vf(e.from,e.to,n,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||we.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Y2(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Hx.of(new Ff(typeof e=="number"?ee.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return sn.define(()=>({}),{eventHandlers:e})}static theme(e,n){let i=uo.newName(),r=[qd.of(i),Fu.of(H0(`.${i}`,e))];return n&&n.dark&&r.push(U0.of(!0)),r}static baseTheme(e){return cd.lowest(Fu.of(H0("."+V0,e,zP)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&rt.get(i)||rt.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Ce.styleModule=Fu;Ce.inputHandler=pP;Ce.focusChangeEffect=mP;Ce.perLineTextDirection=gP;Ce.exceptionSink=fP;Ce.updateListener=L0;Ce.editable=nm;Ce.mouseSelectionStyle=hP;Ce.dragMovesSelection=dP;Ce.clickAddsSelectionRange=cP;Ce.decorations=Nc;Ce.atomicRanges=Ww;Ce.scrollMargins=wP;Ce.darkTheme=U0;Ce.contentAttributes=Hw;Ce.editorAttributes=vP;Ce.lineWrapping=Ce.contentAttributes.of({class:"cm-lineWrapping"});Ce.announce=$e.define();const P3=4096,dS={};class Vf{constructor(e,n,i,r){this.from=e,this.to=n,this.dir=i,this.order=r}static update(e,n){if(n.empty)return e;let i=[],r=e.length?e[e.length-1].dir:vt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Vf(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return i}}function hS(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&M0(o,n)}return n}const O3=we.mac?"mac":we.windows?"win":we.linux?"linux":"key";function T3(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Qd(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const R3=cd.default(Ce.domEventHandlers({keydown(t,e){return VP(UP(e.state),t,e,"editor")}})),FP=be.define({enables:R3}),fS=new WeakMap;function UP(t){let e=t.facet(FP),n=fS.get(e);return n||fS.set(e,n=D3(e.reduce((i,r)=>i.concat(r),[]))),n}function N3(t,e,n){return VP(UP(t.state),e,t,n)}let Ls=null;const M3=4e3;function D3(t,e=O3){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(m=>T3(m,e));for(let m=1;m<p.length;m++){let y=p.slice(0,m).join(" ");r(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[v=>{let x=Ls={view:v,prefix:y,scope:o};return setTimeout(()=>{Ls==x&&(Ls=null)},M3),!0}]})}let g=p.join(" ");r(g,!1);let w=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&w.run.push(l),u&&(w.preventDefault=!0),c&&(w.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in c)c[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function VP(t,e,n,i){let r=hI(e),s=bn(r,0),o=ji(s)==r.length&&r!=" ",a="",l=!1,u=!1,c=!1;Ls&&Ls.view==n&&Ls.scope==i&&(a=Ls.prefix+" ",OP.indexOf(e.keyCode)<0&&(u=!0,Ls=null));let d=new Set,h=w=>{if(w){for(let m of w.run)if(!d.has(m)&&(d.add(m),m(n,e)))return w.stopPropagation&&(c=!0),!0;w.preventDefault&&(w.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,g;return f&&(h(f[a+Qd(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(we.windows&&e.ctrlKey&&e.altKey)&&(p=co[e.keyCode])&&p!=r?(h(f[a+Qd(p,e,!0)])||e.shiftKey&&(g=Tc[e.keyCode])!=r&&g!=p&&h(f[a+Qd(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+Qd(r,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class pd{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=HP(e);return[new pd(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return _3(e,n,i)}}function HP(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==vt.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function pS(t,e,n){let i=ee.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:xt.Text}}function _3(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==vt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=HP(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=z0(t,i),p=z0(t,r),g=f.type==xt.Text?f:null,w=p.type==xt.Text?p:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=pS(t,i,g)),w&&(t.lineWrapping||p.widgetLineBreaks)&&(w=pS(t,r,w)),g&&w&&g.from==w.from)return y(v(n.from,n.to,g));{let k=g?v(n.from,null,g):x(f,!1),O=w?v(null,n.to,w):x(p,!0),T=[];return(g||f).to<(w||p).from-(g&&w?1:0)||f.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<O.top?T.push(m(d,k.bottom,h,O.top)):k.bottom<O.top&&t.elementAtHeight((k.bottom+O.top)/2).type==xt.Text&&(k.bottom=O.top=(k.bottom+O.top)/2),y(k).concat(T).concat(y(O))}function m(k,O,T,A){return new pd(e,k-l.left,O-l.top-.01,T-k,A-O+.01)}function y({top:k,bottom:O,horizontal:T}){let A=[];for(let N=0;N<T.length;N+=2)A.push(m(T[N],k,T[N+1],O));return A}function v(k,O,T){let A=1e9,N=-1e9,_=[];function M(j,X,J,G,$){let I=t.coordsAtPos(j,j==T.to?-2:2),Y=t.coordsAtPos(J,J==T.from?2:-2);!I||!Y||(A=Math.min(I.top,Y.top,A),N=Math.max(I.bottom,Y.bottom,N),$==vt.LTR?_.push(s&&X?d:I.left,s&&G?h:Y.right):_.push(!s&&G?d:Y.left,!s&&X?h:I.right))}let H=k??T.from,F=O??T.to;for(let j of t.visibleRanges)if(j.to>H&&j.from<F)for(let X=Math.max(j.from,H),J=Math.min(j.to,F);;){let G=t.state.doc.lineAt(X);for(let $ of t.bidiSpans(G)){let I=$.from+G.from,Y=$.to+G.from;if(I>=J)break;Y>X&&M(Math.max(I,X),k==null&&I<=H,Math.min(Y,J),O==null&&Y>=F,$.dir)}if(X=G.to+1,X>=J)break}return _.length==0&&M(H,k==null,F,O==null,t.textDirection),{top:A,bottom:N,horizontal:_}}function x(k,O){let T=a.top+(O?k.top:k.bottom);return{top:T,bottom:T,horizontal:[]}}}function L3(t,e){return t.constructor==e.constructor&&t.eq(e)}class $3{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Wh)!=e.state.facet(Wh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(Wh);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!L3(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Wh=be.define();function WP(t){return[sn.define(e=>new $3(e,t)),Wh.of(t)]}const GP=!we.ios,Mc=be.define({combine(t){return Eo(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function I3(t={}){return[Mc.of(t),B3,z3,j3,yP.of(!0)]}function KP(t){return t.startState.facet(Mc)!=t.state.facet(Mc)}const B3=WP({above:!0,markers(t){let{state:e}=t,n=e.facet(Mc),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||GP:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:ee.cursor(r.head,r.head>r.anchor?-1:1);for(let l of pd.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=KP(t);return n&&mS(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){mS(e.state,t)},class:"cm-cursorLayer"});function mS(t,e){e.style.animationDuration=t.facet(Mc).cursorBlinkRate+"ms"}const z3=WP({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:pd.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||KP(t)},class:"cm-selectionLayer"}),XP={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};GP&&(XP[".cm-line"].caretColor="transparent !important");const j3=cd.highest(Ce.theme(XP)),ZP=$e.define({map(t,e){return t==null?null:e.mapPos(t)}}),Vu=mn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(ZP)?i.value:n,t)}}),F3=sn.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Vu);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Vu)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Vu),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Vu)!=t&&this.view.dispatch({effects:ZP.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function U3(){return[Vu,F3]}function gS(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function V3(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class H3{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,u,c)=>r(c,u,u+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,u,c)=>{let d=i(a,l,u);d&&c(u,u+a[0].length,d)};else if(i)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new ua,i=n.add.bind(n);for(let{from:r,to:s}of V3(e,this.maxLength))gS(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(g,w,m)=>h.push(m.range(g,w));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else gS(e.state.doc,this.regexp,c,d,(g,w)=>this.addMatch(w,e,g,p));n=n.update({filterFrom:c,filterTo:d,filter:(g,w)=>g<c||w>d,add:h})}}return n}}const W0=/x/.unicode!=null?"gu":"g",W3=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,W0),G3={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let xg=null;function K3(){var t;if(xg==null&&typeof document<"u"&&document.body){let e=document.body.style;xg=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return xg||!1}const Gh=be.define({combine(t){let e=Eo(t,{render:null,specialChars:W3,addSpecialChars:null});return(e.replaceTabs=!K3())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,W0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,W0)),e}});function X3(t={}){return[Gh.of(t),Z3()]}let yS=null;function Z3(){return yS||(yS=sn.fromClass(class{constructor(t){this.view=t,this.decorations=He.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Gh)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new H3({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=bn(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=em(o.text,a,i-o.from);return He.replace({widget:new Q3((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=He.replace({widget:new q3(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Gh);t.startState.facet(Gh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const J3="•";function Y3(t){return t>=32?J3:t==10?"␤":String.fromCharCode(9216+t)}class q3 extends Sa{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Y3(this.code),i=e.state.phrase("Control character")+" "+(G3[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Q3 extends Sa{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function e5(){return n5}const t5=He.line({class:"cm-activeLine"}),n5=sn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(t5.range(r.from)),e=r.from)}return He.set(n)}},{decorations:t=>t.decorations}),eh="-10000px";class JP{constructor(e,n,i){this.facet=n,this.createTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){var n;let i=e.state.facet(this.facet),r=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let a=r[o],l=-1;if(a){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==a.create&&(l=u)}if(l<0)s[o]=this.createTooltipView(a);else{let u=s[o]=this.tooltipViews[l];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function i5(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Sg=be.define({combine:t=>{var e,n,i;return{position:we.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||i5}}}),vS=new WeakMap,YP=sn.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Sg);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new JP(t,Kw,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Sg);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=eh,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let i=this.manager.tooltipViews[n];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Sg).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:i}=t,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){l.style.top=eh;continue}let d=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,f=c.right-c.left,p=(e=vS.get(a))!==null&&e!==void 0?e:c.bottom-c.top,g=a.offset||s5,w=this.view.textDirection==vt.LTR,m=c.width>i.right-i.left?w?i.left:i.right-c.width:w?Math.min(u.left-(d?14:0)+g.x,i.right-f):Math.max(i.left,u.left-f+(d?14:0)-g.x),y=!!o.above;!o.strictSide&&(y?u.top-(c.bottom-c.top)-g.y<i.top:u.bottom+(c.bottom-c.top)+g.y>i.bottom)&&y==i.bottom-u.bottom>u.top-i.top&&(y=!y);let v=(y?u.top-i.top:i.bottom-u.bottom)-h;if(v<p&&a.resize!==!1){if(v<this.view.defaultLineHeight){l.style.top=eh;continue}vS.set(a,p),l.style.height=(p=v)+"px"}else l.style.height&&(l.style.height="");let x=y?u.top-p-h-g.y:u.bottom+h+g.y,k=m+f;if(a.overlap!==!0)for(let O of r)O.left<k&&O.right>m&&O.top<x+p&&O.bottom>x&&(x=y?O.top-p-2-h:O.bottom+h+2);this.position=="absolute"?(l.style.top=x-t.parent.top+"px",l.style.left=m-t.parent.left+"px"):(l.style.top=x+"px",l.style.left=m+"px"),d&&(d.style.left=`${u.left+(w?g.x:-g.x)-(m+14-7)}px`),a.overlap!==!0&&r.push({left:m,top:x,right:k,bottom:x+p}),l.classList.toggle("cm-tooltip-above",y),l.classList.toggle("cm-tooltip-below",!y),a.positioned&&a.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=eh}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),r5=Ce.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),s5={x:0,y:0},Kw=be.define({enables:[YP,r5]}),Hf=be.define();class Xw{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new JP(e,Hf,n=>this.createHostedView(n))}static create(e){return new Xw(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const o5=Kw.compute([Hf],t=>{let e=t.facet(Hf).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:Xw.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class a5{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let i=this.view.coordsAtPos(n);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(a=>a.from<=n&&a.to>=n),s=r&&r.dir==vt.RTL?-1:1,o=this.source(this.view,n,e.x<i.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:n};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Gi(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!wS(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=(n=i==null?void 0:i.end)!==null&&n!==void 0?n:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!l5(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!wS(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function wS(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function l5(t,e,n,i,r,s){let o=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let d=u[c];if(Math.max(d.top-r,r-d.bottom,d.left-i,i-d.right)<=s)return!0}return!1}function u5(t,e={}){let n=$e.define(),i=mn.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,$n.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),r);a.pos=o,r.end!=null&&(a.end=s.changes.mapPos(r.end)),r=a}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(d5)&&(r=null);return r},provide:r=>Hf.from(r)});return[i,sn.define(r=>new a5(r,t,i,n,e.hoverTime||300)),o5]}function c5(t,e){let n=t.plugin(YP);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const d5=$e.define(),bS=be.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Dc(t,e){let n=t.plugin(qP),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const qP=sn.fromClass(class{constructor(t){this.input=t.state.facet(jl),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(bS);this.top=new th(t,!0,e.topContainer),this.bottom=new th(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(bS);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new th(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new th(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(jl);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Ce.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class th{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=xS(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=xS(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function xS(t){let e=t.nextSibling;return t.remove(),e}const jl=be.define({enables:qP});class po extends la{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}po.prototype.elementClass="";po.prototype.toDOM=void 0;po.prototype.mapMode=$n.TrackBefore;po.prototype.startSide=po.prototype.endSide=-1;po.prototype.point=!0;const Kh=be.define(),Xh=be.define(),G0=be.define({combine:t=>t.some(e=>e)});function h5(t){let e=[f5];return t&&t.fixed===!1&&e.push(G0.of(!0)),e}const f5=sn.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Xh).map(e=>new kS(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(G0),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(G0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=lt.iter(this.view.state.facet(Kh),this.view.viewport.from),i=[],r=this.gutters.map(s=>new p5(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==xt.Text&&o){K0(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==xt.Text){K0(n,i,s.from);for(let o of r)o.line(this.view,s,i)}for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Xh),n=t.state.facet(Xh),i=t.docChanged||t.heightChanged||t.viewportChanged||!lt.eq(t.startState.facet(Kh),t.state.facet(Kh),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new kS(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Ce.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==vt.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function SS(t){return Array.isArray(t)?t:[t]}function K0(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class p5{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=lt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=n.top-this.height;if(this.i==r.elements.length){let o=new QP(e,n.height,s,i);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,n.height,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];K0(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n);i&&this.addElement(e,n,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class kS{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=SS(n.markers(e)),n.initialSpacer&&(this.spacer=new QP(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=SS(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!lt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class QP{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),m5(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function m5(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const g5=be.define(),il=be.define({combine(t){return Eo(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return i}})}});class kg extends po{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Eg(t,e){return t.state.facet(il).formatNumber(e,t.state)}const y5=Xh.compute([il],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(g5)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new kg(Eg(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(il)!=e.state.facet(il),initialSpacer(e){return new kg(Eg(e,ES(e.state.doc.lines)))},updateSpacer(e,n){let i=Eg(n.view,ES(n.view.state.doc.lines));return i==e.number?e:new kg(i)},domEventHandlers:t.facet(il).domEventHandlers}));function v5(t={}){return[il.of(t),h5(),y5]}function ES(t){let e=9;for(;e<t;)e=e*10+9;return e}const w5=new class extends po{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},b5=Kh.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(w5.range(r)))}return lt.of(e)});function x5(){return b5}const eO=new dd;function tO(t){window.codemirror&&window.codemirror.dispatch({effects:eO.reconfigure(ze.readOnly.of(t))})}const X0=$e.define(),S5=mn.define({create(){return He.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(X0)&&(n=He.none,i.value!==null&&(n=n.update({add:[k5.range(i.value)]})));return n},provide:t=>Ce.decorations.from(t)}),k5=He.line({class:"!bg-mantis-400/10"});function nO(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:X0.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:X0.of(e)})}}const E5=Ae.from(Ae.MAX_ADDRESS).toString(),C5={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Vn.format(e)})`},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`},control:{action:{start:"Start",stop:"Stop"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input..."}},memory:{name:"Memory",cell:t=>`Cell ${Ae.format(t)}`,"start-address":"Start address","start-address-must-be-integer":"Start address must be an integer.","start-address-too-big":`Start address must be less or equal to ${E5}.`},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},console:"Console",f10:{name:"F10",interrupt:"Interrupt"},leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",language:{label:"Language"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which preset of devices to use.","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer (PIO)",handshake:"Printer (Handshake)"},speeds:{label:"Speeds",executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"}},footer:{documentation:"Documentation","report-issue":"Report an issue",copyright:"III-LIDI, FI, UNLP"}},A5=Ae.from(Ae.MAX_ADDRESS).toString(),P5={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Vn.format(e)})`},update:{"update-available":"¡Hay una nueva versión disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},control:{action:{start:"Ejecutar",stop:"Detener"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",status:{fetching:"Leyendo instrucción...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla..."}},memory:{name:"Memoria",cell:t=>`Celda ${Ae.format(t)}`,"start-address":"Dirección de inicio","start-address-must-be-integer":"El valor de inicio debe ser un número entero.","start-address-too-big":`El valor de inicio debe ser menor o igual a ${A5}.`},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},console:"Consola",f10:{name:"F10",interrupt:"Interrumpir"},leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},switches:"Teclas",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",language:{label:"Idioma"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué conjunto de dispositivos usar.","pio-switches-and-leds":"Teclas y luces","pio-printer":"Impresora (PIO)",handshake:"Impresora (Handshake)"},speeds:{label:"Velocidades",executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"}},footer:{documentation:"Documentación","report-issue":"Reportar un error",copyright:"III-LIDI, FI, UNLP"}},im=Nw({en:C5,es:P5}),O5=Symbol(),T5=t=>typeof(t==null?void 0:t.then)=="function";function R5(t){let e,n;const i={getItem:(r,s)=>{var o,a;const l=c=>{if(c=c||"",e!==c){try{n=JSON.parse(c)}catch{return s}e=c}return n},u=(a=(o=t())==null?void 0:o.getItem(r))!=null?a:null;return T5(u)?u.then(l):l(u)},setItem:(r,s)=>{var o;return(o=t())==null?void 0:o.setItem(r,JSON.stringify(s))},removeItem:r=>{var s;return(s=t())==null?void 0:s.removeItem(r)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&(i.subscribe=(r,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===r){let u;try{u=JSON.parse(l.newValue||"")}catch{u=o}s(u)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),i}const N5=R5(()=>typeof window<"u"?window.localStorage:void 0);function M5(t,e,n=N5,i){const r=i==null?void 0:i.unstable_getOnInit,s=ke(r?n.getItem(t,e):e);return s.onMount=a=>{r||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},ke(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===O5?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}var Ge;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Ge||(Ge={}));var Z0;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Z0||(Z0={}));const fe=Ge.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$s=t=>{switch(typeof t){case"undefined":return fe.undefined;case"string":return fe.string;case"number":return isNaN(t)?fe.nan:fe.number;case"boolean":return fe.boolean;case"function":return fe.function;case"bigint":return fe.bigint;case"symbol":return fe.symbol;case"object":return Array.isArray(t)?fe.array:t===null?fe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?fe.promise:typeof Map<"u"&&t instanceof Map?fe.map:typeof Set<"u"&&t instanceof Set?fe.set:typeof Date<"u"&&t instanceof Date?fe.date:fe.object;default:return fe.unknown}},ie=Ge.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),D5=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ki extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return r(this),i}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ge.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Ki.create=t=>new Ki(t);const _c=(t,e)=>{let n;switch(t.code){case ie.invalid_type:t.received===fe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ie.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ge.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ge.joinValues(t.keys,", ")}`;break;case ie.invalid_union:n="Invalid input";break;case ie.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ge.joinValues(t.options)}`;break;case ie.invalid_enum_value:n=`Invalid enum value. Expected ${Ge.joinValues(t.options)}, received '${t.received}'`;break;case ie.invalid_arguments:n="Invalid function arguments";break;case ie.invalid_return_type:n="Invalid function return type";break;case ie.invalid_date:n="Invalid date";break;case ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ge.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ie.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ie.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ie.custom:n="Invalid input";break;case ie.invalid_intersection_types:n="Intersection results could not be merged";break;case ie.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ie.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ge.assertNever(t)}return{message:n}};let iO=_c;function _5(t){iO=t}function Wf(){return iO}const Gf=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};let a="";const l=i.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...r,path:s,message:r.message||a}},L5=[];function pe(t,e){const n=Gf({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Wf(),_c].filter(i=>!!i)});t.common.issues.push(n)}class pn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Me;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n)i.push({key:await r.key,value:await r.value});return pn.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Me;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Me=Object.freeze({status:"aborted"}),rO=t=>({status:"dirty",value:t}),Cn=t=>({status:"valid",value:t}),J0=t=>t.status==="aborted",Y0=t=>t.status==="dirty",Kf=t=>t.status==="valid",Xf=t=>typeof Promise<"u"&&t instanceof Promise;var Ee;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ee||(Ee={}));class Or{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const CS=(t,e)=>{if(Kf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ki(t.common.issues);return this._error=n,this._error}}};function Le(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:i??a.defaultError}:{message:n??a.defaultError},description:r}}class Ie{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return $s(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:$s(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pn,ctx:{common:e.parent.common,data:e.data,parsedType:$s(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Xf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$s(e)},s=this._parseSync({data:e,path:r.path,parent:r});return CS(r,s)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$s(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Xf(r)?r:Promise.resolve(r));return CS(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ie.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Ji({schema:this,typeName:Oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Qr.create(this,this._def)}nullable(){return fa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Xi.create(this,this._def)}promise(){return Ul.create(this,this._def)}or(e){return Bc.create([this,e],this._def)}and(e){return zc.create(this,e,this._def)}transform(e){return new Ji({...Le(this._def),schema:this,typeName:Oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Hc({...Le(this._def),innerType:this,defaultValue:n,typeName:Oe.ZodDefault})}brand(){return new oO({typeName:Oe.ZodBranded,type:this,...Le(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new qf({...Le(this._def),innerType:this,catchValue:n,typeName:Oe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return md.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $5=/^c[^\s-]{8,}$/i,I5=/^[a-z][a-z0-9]*$/,B5=/[0-9A-HJKMNP-TV-Z]{26}/,z5=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,j5=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,F5=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,U5=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,V5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,H5=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function W5(t,e){return!!((e==="v4"||!e)&&U5.test(t)||(e==="v6"||!e)&&V5.test(t))}class Fi extends Ie{constructor(){super(...arguments),this._regex=(e,n,i)=>this.refinement(r=>e.test(r),{validation:n,code:ie.invalid_string,...Ee.errToObj(i)}),this.nonempty=e=>this.min(1,Ee.errToObj(e)),this.trim=()=>new Fi({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Fi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Fi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==fe.string){const s=this._getOrReturnCtx(e);return pe(s,{code:ie.invalid_type,expected:fe.string,received:s.parsedType}),Me}const i=new pn;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),pe(r,{code:ie.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),pe(r,{code:ie.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?pe(r,{code:ie.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&pe(r,{code:ie.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")j5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"email",code:ie.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")F5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"emoji",code:ie.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")z5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"uuid",code:ie.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")$5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"cuid",code:ie.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")I5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"cuid2",code:ie.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")B5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"ulid",code:ie.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),pe(r,{validation:"url",code:ie.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"regex",code:ie.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),pe(r,{code:ie.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),pe(r,{code:ie.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),pe(r,{code:ie.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?H5(s).test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{code:ie.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="ip"?W5(e.data,s.version)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"ip",code:ie.invalid_string,message:s.message}),i.dirty()):Ge.assertNever(s);return{status:i.value,value:e.data}}_addCheck(e){return new Fi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ee.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ee.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ee.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ee.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ee.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ee.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ee.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ee.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ee.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Fi.create=t=>{var e;return new Fi({checks:[],typeName:Oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Le(t)})};function G5(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class mo extends Ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==fe.number){const s=this._getOrReturnCtx(e);return pe(s,{code:ie.invalid_type,expected:fe.number,received:s.parsedType}),Me}let i;const r=new pn;for(const s of this._def.checks)s.kind==="int"?Ge.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:ie.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ie.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ie.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?G5(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ie.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:ie.not_finite,message:s.message}),r.dirty()):Ge.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ee.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ee.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ee.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ee.toString(n))}setLimit(e,n,i,r){return new mo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ee.toString(r)}]})}_addCheck(e){return new mo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ge.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}mo.create=t=>new mo({checks:[],typeName:Oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Le(t)});class go extends Ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==fe.bigint){const s=this._getOrReturnCtx(e);return pe(s,{code:ie.invalid_type,expected:fe.bigint,received:s.parsedType}),Me}let i;const r=new pn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ie.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ie.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ie.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Ge.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ee.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ee.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ee.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ee.toString(n))}setLimit(e,n,i,r){return new go({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ee.toString(r)}]})}_addCheck(e){return new go({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}go.create=t=>{var e;return new go({checks:[],typeName:Oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Le(t)})};class Lc extends Ie{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==fe.boolean){const i=this._getOrReturnCtx(e);return pe(i,{code:ie.invalid_type,expected:fe.boolean,received:i.parsedType}),Me}return Cn(e.data)}}Lc.create=t=>new Lc({typeName:Oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Le(t)});class da extends Ie{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==fe.date){const s=this._getOrReturnCtx(e);return pe(s,{code:ie.invalid_type,expected:fe.date,received:s.parsedType}),Me}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return pe(s,{code:ie.invalid_date}),Me}const i=new pn;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),pe(r,{code:ie.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),pe(r,{code:ie.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Ge.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new da({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ee.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ee.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}da.create=t=>new da({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Oe.ZodDate,...Le(t)});class Zf extends Ie{_parse(e){if(this._getType(e)!==fe.symbol){const i=this._getOrReturnCtx(e);return pe(i,{code:ie.invalid_type,expected:fe.symbol,received:i.parsedType}),Me}return Cn(e.data)}}Zf.create=t=>new Zf({typeName:Oe.ZodSymbol,...Le(t)});class $c extends Ie{_parse(e){if(this._getType(e)!==fe.undefined){const i=this._getOrReturnCtx(e);return pe(i,{code:ie.invalid_type,expected:fe.undefined,received:i.parsedType}),Me}return Cn(e.data)}}$c.create=t=>new $c({typeName:Oe.ZodUndefined,...Le(t)});class Ic extends Ie{_parse(e){if(this._getType(e)!==fe.null){const i=this._getOrReturnCtx(e);return pe(i,{code:ie.invalid_type,expected:fe.null,received:i.parsedType}),Me}return Cn(e.data)}}Ic.create=t=>new Ic({typeName:Oe.ZodNull,...Le(t)});class Fl extends Ie{constructor(){super(...arguments),this._any=!0}_parse(e){return Cn(e.data)}}Fl.create=t=>new Fl({typeName:Oe.ZodAny,...Le(t)});class Qo extends Ie{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Cn(e.data)}}Qo.create=t=>new Qo({typeName:Oe.ZodUnknown,...Le(t)});class cs extends Ie{_parse(e){const n=this._getOrReturnCtx(e);return pe(n,{code:ie.invalid_type,expected:fe.never,received:n.parsedType}),Me}}cs.create=t=>new cs({typeName:Oe.ZodNever,...Le(t)});class Jf extends Ie{_parse(e){if(this._getType(e)!==fe.undefined){const i=this._getOrReturnCtx(e);return pe(i,{code:ie.invalid_type,expected:fe.void,received:i.parsedType}),Me}return Cn(e.data)}}Jf.create=t=>new Jf({typeName:Oe.ZodVoid,...Le(t)});class Xi extends Ie{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==fe.array)return pe(n,{code:ie.invalid_type,expected:fe.array,received:n.parsedType}),Me;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(pe(n,{code:o?ie.too_big:ie.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(pe(n,{code:ie.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(pe(n,{code:ie.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new Or(n,o,n.path,a)))).then(o=>pn.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new Or(n,o,n.path,a)));return pn.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new Xi({...this._def,minLength:{value:e,message:Ee.toString(n)}})}max(e,n){return new Xi({...this._def,maxLength:{value:e,message:Ee.toString(n)}})}length(e,n){return new Xi({...this._def,exactLength:{value:e,message:Ee.toString(n)}})}nonempty(e){return this.min(1,e)}}Xi.create=(t,e)=>new Xi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Oe.ZodArray,...Le(e)});function za(t){if(t instanceof mt){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Qr.create(za(i))}return new mt({...t._def,shape:()=>e})}else return t instanceof Xi?new Xi({...t._def,type:za(t.element)}):t instanceof Qr?Qr.create(za(t.unwrap())):t instanceof fa?fa.create(za(t.unwrap())):t instanceof Tr?Tr.create(t.items.map(e=>za(e))):t}class mt extends Ie{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ge.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==fe.object){const u=this._getOrReturnCtx(e);return pe(u,{code:ie.invalid_type,expected:fe.object,received:u.parsedType}),Me}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof cs&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Or(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof cs){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")a.length>0&&(pe(r,{code:ie.unrecognized_keys,keys:a}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Or(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key;u.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>pn.mergeObjectSync(i,u)):pn.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Ee.errToObj,new mt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&o!==void 0?o:i.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ee.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new mt({...this._def,unknownKeys:"strip"})}passthrough(){return new mt({...this._def,unknownKeys:"passthrough"})}extend(e){return new mt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new mt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Oe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new mt({...this._def,catchall:e})}pick(e){const n={};return Ge.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new mt({...this._def,shape:()=>n})}omit(e){const n={};return Ge.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new mt({...this._def,shape:()=>n})}deepPartial(){return za(this)}partial(e){const n={};return Ge.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new mt({...this._def,shape:()=>n})}required(e){const n={};return Ge.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof Qr;)s=s._def.innerType;n[i]=s}}),new mt({...this._def,shape:()=>n})}keyof(){return sO(Ge.objectKeys(this.shape))}}mt.create=(t,e)=>new mt({shape:()=>t,unknownKeys:"strip",catchall:cs.create(),typeName:Oe.ZodObject,...Le(e)});mt.strictCreate=(t,e)=>new mt({shape:()=>t,unknownKeys:"strict",catchall:cs.create(),typeName:Oe.ZodObject,...Le(e)});mt.lazycreate=(t,e)=>new mt({shape:t,unknownKeys:"strip",catchall:cs.create(),typeName:Oe.ZodObject,...Le(e)});class Bc extends Ie{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Ki(a.ctx.common.issues));return pe(n,{code:ie.invalid_union,unionErrors:o}),Me}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Ki(l));return pe(n,{code:ie.invalid_union,unionErrors:a}),Me}}get options(){return this._def.options}}Bc.create=(t,e)=>new Bc({options:t,typeName:Oe.ZodUnion,...Le(e)});const Zh=t=>t instanceof Fc?Zh(t.schema):t instanceof Ji?Zh(t.innerType()):t instanceof Uc?[t.value]:t instanceof yo?t.options:t instanceof Vc?Object.keys(t.enum):t instanceof Hc?Zh(t._def.innerType):t instanceof $c?[void 0]:t instanceof Ic?[null]:null;class rm extends Ie{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==fe.object)return pe(n,{code:ie.invalid_type,expected:fe.object,received:n.parsedType}),Me;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(pe(n,{code:ie.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const o=Zh(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new rm({typeName:Oe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,...Le(i)})}}function q0(t,e){const n=$s(t),i=$s(e);if(t===e)return{valid:!0,data:t};if(n===fe.object&&i===fe.object){const r=Ge.objectKeys(e),s=Ge.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=q0(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===fe.array&&i===fe.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=q0(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===fe.date&&i===fe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class zc extends Ie{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(J0(s)||J0(o))return Me;const a=q0(s.value,o.value);return a.valid?((Y0(s)||Y0(o))&&n.dirty(),{status:n.value,value:a.data}):(pe(i,{code:ie.invalid_intersection_types}),Me)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}zc.create=(t,e,n)=>new zc({left:t,right:e,typeName:Oe.ZodIntersection,...Le(n)});class Tr extends Ie{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==fe.array)return pe(i,{code:ie.invalid_type,expected:fe.array,received:i.parsedType}),Me;if(i.data.length<this._def.items.length)return pe(i,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Me;!this._def.rest&&i.data.length>this._def.items.length&&(pe(i,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Or(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>pn.mergeArray(n,o)):pn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Tr({...this._def,rest:e})}}Tr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Tr({items:t,typeName:Oe.ZodTuple,rest:null,...Le(e)})};class jc extends Ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==fe.object)return pe(i,{code:ie.invalid_type,expected:fe.object,received:i.parsedType}),Me;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new Or(i,a,i.path,a)),value:o._parse(new Or(i,i.data[a],i.path,a))});return i.common.async?pn.mergeObjectAsync(n,r):pn.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof Ie?new jc({keyType:e,valueType:n,typeName:Oe.ZodRecord,...Le(i)}):new jc({keyType:Fi.create(),valueType:e,typeName:Oe.ZodRecord,...Le(n)})}}class Yf extends Ie{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==fe.map)return pe(i,{code:ie.invalid_type,expected:fe.map,received:i.parsedType}),Me;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],u)=>({key:r._parse(new Or(i,a,i.path,[u,"key"])),value:s._parse(new Or(i,l,i.path,[u,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Me;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Me;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}Yf.create=(t,e,n)=>new Yf({valueType:e,keyType:t,typeName:Oe.ZodMap,...Le(n)});class ha extends Ie{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==fe.set)return pe(i,{code:ie.invalid_type,expected:fe.set,received:i.parsedType}),Me;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(pe(i,{code:ie.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(pe(i,{code:ie.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Me;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...i.data.values()].map((l,u)=>s._parse(new Or(i,l,i.path,u)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new ha({...this._def,minSize:{value:e,message:Ee.toString(n)}})}max(e,n){return new ha({...this._def,maxSize:{value:e,message:Ee.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ha.create=(t,e)=>new ha({valueType:t,minSize:null,maxSize:null,typeName:Oe.ZodSet,...Le(e)});class gl extends Ie{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==fe.function)return pe(n,{code:ie.invalid_type,expected:fe.function,received:n.parsedType}),Me;function i(a,l){return Gf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Wf(),_c].filter(u=>!!u),issueData:{code:ie.invalid_arguments,argumentsError:l}})}function r(a,l){return Gf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Wf(),_c].filter(u=>!!u),issueData:{code:ie.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof Ul?Cn(async(...a)=>{const l=new Ki([]),u=await this._def.args.parseAsync(a,s).catch(h=>{throw l.addIssue(i(a,h)),l}),c=await o(...u);return await this._def.returns._def.type.parseAsync(c,s).catch(h=>{throw l.addIssue(r(c,h)),l})}):Cn((...a)=>{const l=this._def.args.safeParse(a,s);if(!l.success)throw new Ki([i(a,l.error)]);const u=o(...l.data),c=this._def.returns.safeParse(u,s);if(!c.success)throw new Ki([r(u,c.error)]);return c.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new gl({...this._def,args:Tr.create(e).rest(Qo.create())})}returns(e){return new gl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new gl({args:e||Tr.create([]).rest(Qo.create()),returns:n||Qo.create(),typeName:Oe.ZodFunction,...Le(i)})}}class Fc extends Ie{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Fc.create=(t,e)=>new Fc({getter:t,typeName:Oe.ZodLazy,...Le(e)});class Uc extends Ie{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return pe(n,{received:n.data,code:ie.invalid_literal,expected:this._def.value}),Me}return{status:"valid",value:e.data}}get value(){return this._def.value}}Uc.create=(t,e)=>new Uc({value:t,typeName:Oe.ZodLiteral,...Le(e)});function sO(t,e){return new yo({values:t,typeName:Oe.ZodEnum,...Le(e)})}class yo extends Ie{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return pe(n,{expected:Ge.joinValues(i),received:n.parsedType,code:ie.invalid_type}),Me}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),i=this._def.values;return pe(n,{received:n.data,code:ie.invalid_enum_value,options:i}),Me}return Cn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return yo.create(e)}exclude(e){return yo.create(this.options.filter(n=>!e.includes(n)))}}yo.create=sO;class Vc extends Ie{_parse(e){const n=Ge.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==fe.string&&i.parsedType!==fe.number){const r=Ge.objectValues(n);return pe(i,{expected:Ge.joinValues(r),received:i.parsedType,code:ie.invalid_type}),Me}if(n.indexOf(e.data)===-1){const r=Ge.objectValues(n);return pe(i,{received:i.data,code:ie.invalid_enum_value,options:r}),Me}return Cn(e.data)}get enum(){return this._def.values}}Vc.create=(t,e)=>new Vc({values:t,typeName:Oe.ZodNativeEnum,...Le(e)});class Ul extends Ie{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==fe.promise&&n.common.async===!1)return pe(n,{code:ie.invalid_type,expected:fe.promise,received:n.parsedType}),Me;const i=n.parsedType===fe.promise?n.data:Promise.resolve(n.data);return Cn(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ul.create=(t,e)=>new Ul({type:t,typeName:Oe.ZodPromise,...Le(e)});class Ji extends Ie{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null;if(r.type==="preprocess"){const o=r.transform(i.data);return i.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:i.path,parent:i})):this._def.schema._parseSync({data:o,path:i.path,parent:i})}const s={addIssue:o=>{pe(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Me:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Me:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Kf(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Kf(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Ge.assertNever(r)}}Ji.create=(t,e,n)=>new Ji({schema:t,typeName:Oe.ZodEffects,effect:e,...Le(n)});Ji.createWithPreprocess=(t,e,n)=>new Ji({schema:e,effect:{type:"preprocess",transform:t},typeName:Oe.ZodEffects,...Le(n)});class Qr extends Ie{_parse(e){return this._getType(e)===fe.undefined?Cn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qr.create=(t,e)=>new Qr({innerType:t,typeName:Oe.ZodOptional,...Le(e)});class fa extends Ie{_parse(e){return this._getType(e)===fe.null?Cn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fa.create=(t,e)=>new fa({innerType:t,typeName:Oe.ZodNullable,...Le(e)});class Hc extends Ie{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===fe.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Hc.create=(t,e)=>new Hc({innerType:t,typeName:Oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Le(e)});class qf extends Ie{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Xf(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ki(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Ki(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}qf.create=(t,e)=>new qf({innerType:t,typeName:Oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Le(e)});class Qf extends Ie{_parse(e){if(this._getType(e)!==fe.nan){const i=this._getOrReturnCtx(e);return pe(i,{code:ie.invalid_type,expected:fe.nan,received:i.parsedType}),Me}return{status:"valid",value:e.data}}}Qf.create=t=>new Qf({typeName:Oe.ZodNaN,...Le(t)});const K5=Symbol("zod_brand");class oO extends Ie{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class md extends Ie{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Me:s.status==="dirty"?(n.dirty(),rO(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Me:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new md({in:e,out:n,typeName:Oe.ZodPipeline})}}const aO=(t,e={},n)=>t?Fl.create().superRefine((i,r)=>{var s,o;if(!t(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;r.addIssue({code:"custom",...u,fatal:l})}}):Fl.create(),X5={object:mt.lazycreate};var Oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(Oe||(Oe={}));const Z5=(t,e={message:`Input not instance of ${t.name}`})=>aO(n=>n instanceof t,e),lO=Fi.create,uO=mo.create,J5=Qf.create,Y5=go.create,cO=Lc.create,q5=da.create,Q5=Zf.create,eB=$c.create,tB=Ic.create,nB=Fl.create,iB=Qo.create,rB=cs.create,sB=Jf.create,oB=Xi.create,aB=mt.create,lB=mt.strictCreate,uB=Bc.create,cB=rm.create,dB=zc.create,hB=Tr.create,fB=jc.create,pB=Yf.create,mB=ha.create,gB=gl.create,yB=Fc.create,vB=Uc.create,wB=yo.create,bB=Vc.create,xB=Ul.create,AS=Ji.create,SB=Qr.create,kB=fa.create,EB=Ji.createWithPreprocess,CB=md.create,AB=()=>lO().optional(),PB=()=>uO().optional(),OB=()=>cO().optional(),TB={string:t=>Fi.create({...t,coerce:!0}),number:t=>mo.create({...t,coerce:!0}),boolean:t=>Lc.create({...t,coerce:!0}),bigint:t=>go.create({...t,coerce:!0}),date:t=>da.create({...t,coerce:!0})},RB=Me;var Ro=Object.freeze({__proto__:null,defaultErrorMap:_c,setErrorMap:_5,getErrorMap:Wf,makeIssue:Gf,EMPTY_PATH:L5,addIssueToContext:pe,ParseStatus:pn,INVALID:Me,DIRTY:rO,OK:Cn,isAborted:J0,isDirty:Y0,isValid:Kf,isAsync:Xf,get util(){return Ge},get objectUtil(){return Z0},ZodParsedType:fe,getParsedType:$s,ZodType:Ie,ZodString:Fi,ZodNumber:mo,ZodBigInt:go,ZodBoolean:Lc,ZodDate:da,ZodSymbol:Zf,ZodUndefined:$c,ZodNull:Ic,ZodAny:Fl,ZodUnknown:Qo,ZodNever:cs,ZodVoid:Jf,ZodArray:Xi,ZodObject:mt,ZodUnion:Bc,ZodDiscriminatedUnion:rm,ZodIntersection:zc,ZodTuple:Tr,ZodRecord:jc,ZodMap:Yf,ZodSet:ha,ZodFunction:gl,ZodLazy:Fc,ZodLiteral:Uc,ZodEnum:yo,ZodNativeEnum:Vc,ZodPromise:Ul,ZodEffects:Ji,ZodTransformer:Ji,ZodOptional:Qr,ZodNullable:fa,ZodDefault:Hc,ZodCatch:qf,ZodNaN:Qf,BRAND:K5,ZodBranded:oO,ZodPipeline:md,custom:aO,Schema:Ie,ZodSchema:Ie,late:X5,get ZodFirstPartyTypeKind(){return Oe},coerce:TB,any:nB,array:oB,bigint:Y5,boolean:cO,date:q5,discriminatedUnion:cB,effect:AS,enum:wB,function:gB,instanceof:Z5,intersection:dB,lazy:yB,literal:vB,map:pB,nan:J5,nativeEnum:bB,never:rB,null:tB,nullable:kB,number:uO,object:aB,oboolean:OB,onumber:PB,optional:SB,ostring:AB,pipeline:CB,preprocess:EB,promise:xB,record:fB,set:mB,strictObject:lB,string:lO,symbol:Q5,transformer:AS,tuple:hB,undefined:eB,union:uB,unknown:iB,void:sB,NEVER:RB,ZodIssueCode:ie,quotelessJson:D5,ZodError:Ki});const dO=["randomize","clean","unchanged"],hO=["pio-switches-and-leds","pio-printer","handshake"],Q0=Ro.object({language:Ro.enum(S2).catch(MB),dataOnLoad:Ro.enum(dO).catch("randomize"),devices:Ro.enum(hO).catch("pio-switches-and-leds"),executionUnit:Ro.number().int().min(1).max(500).catch(150),clockSpeed:Ro.number().int().min(10).max(1e3).catch(30),printerSpeed:Ro.number().int().min(10).max(1e3).catch(1e3)}),NB=Q0.parse({}),su=M5("vonsim-settings",NB,{getItem(t,e){try{const n=localStorage.getItem(t);return Q0.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=Q0.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{unstable_getOnInit:!0}),ds=()=>ne.get(su);function MB(){const t=navigator.language.toLowerCase();for(const e of S2)if(t.startsWith(e))return e;return"en"}const Cg=ke(L.zero(16)),Ag=ke(L.zero(16)),Pg=ke(L.zero(16)),Og=ke(L.zero(16)),Tg=ke(L.zero(16)),Rg=ke(L.zero(16)),DB=ke(L.zero(8)),Ng=ke(L.zero(16)),Mg=ke(L.zero(16)),Dg=ke(L.zero(16)),_g=ke(L.zero(16)),Lg=ke(L.zero(16)),$g=ke(L.zero(16)),fO=ke(L.zero(16)),Vl=ke(L.zero(8)),ui=t=>ke(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),ci=t=>ke(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),ot={AX:Cg,AL:ui(Cg),AH:ci(Cg),BX:Ag,BL:ui(Ag),BH:ci(Ag),CX:Pg,CL:ui(Pg),CH:ci(Pg),DX:Og,DL:ui(Og),DH:ci(Og),SP:Tg,"SP.l":ui(Tg),"SP.h":ci(Tg),IP:Rg,"IP.l":ui(Rg),"IP.h":ci(Rg),IR:DB,ri:Ng,"ri.l":ui(Ng),"ri.h":ci(Ng),id:Mg,"id.l":ui(Mg),"id.h":ci(Mg),left:Dg,"left.l":ui(Dg),"left.h":ci(Dg),right:_g,"right.l":ui(_g),"right.h":ci(_g),result:Lg,"result.l":ui(Lg),"result.h":ci(Lg),FLAGS:$g,"FLAGS.l":ui($g),"FLAGS.h":ci($g),MAR:fO,MBR:Vl},Is=ke({phase:"stopped"}),pO=ke("ADD");function _B(t){ne.set(ot.AX,L.fromUnsigned(t.cpu.AX,16)),ne.set(ot.BX,L.fromUnsigned(t.cpu.BX,16)),ne.set(ot.CX,L.fromUnsigned(t.cpu.CX,16)),ne.set(ot.DX,L.fromUnsigned(t.cpu.DX,16)),ne.set(ot.SP,L.fromUnsigned(t.cpu.SP,16)),ne.set(ot.IP,L.fromUnsigned(t.cpu.IP,16)),ne.set(ot.IR,L.fromUnsigned(t.cpu.IR,8)),ne.set(ot.ri,L.fromUnsigned(t.cpu.ri,16)),ne.set(ot.id,L.fromUnsigned(t.cpu.id,16)),ne.set(ot.left,L.fromUnsigned(t.cpu.left,16)),ne.set(ot.right,L.fromUnsigned(t.cpu.right,16)),ne.set(ot.result,L.fromUnsigned(t.cpu.result,16)),ne.set(ot.FLAGS,L.fromUnsigned(t.cpu.FLAGS,16)),ne.set(ot.MAR,L.fromUnsigned(t.cpu.MAR,16)),ne.set(ot.MBR,L.fromUnsigned(t.cpu.MBR,8)),ne.set(Is,{phase:"stopped"})}var LB=Object.defineProperty,$B=(t,e)=>{for(var n in e)LB(t,n,{get:e[n],enumerable:!0})},Yi={};$B(Yi,{assign:()=>jB,colors:()=>ro,createStringInterpolator:()=>t1,skipAnimation:()=>SO,to:()=>xO,willAdvance:()=>n1});var Zw=yd(),_e=t=>gd(t,Zw),Jw=yd();_e.write=t=>gd(t,Jw);var sm=yd();_e.onStart=t=>gd(t,sm);var Yw=yd();_e.onFrame=t=>gd(t,Yw);var qw=yd();_e.onFinish=t=>gd(t,qw);var yl=[];_e.setTimeout=(t,e)=>{const n=_e.now()+e,i=()=>{const s=yl.findIndex(o=>o.cancel==i);~s&&yl.splice(s,1),Ks-=~s?1:0},r={time:n,handler:t,cancel:i};return yl.splice(mO(n),0,r),Ks+=1,gO(),r};var mO=t=>~(~yl.findIndex(e=>e.time>t)||~yl.length);_e.cancel=t=>{sm.delete(t),Yw.delete(t),qw.delete(t),Zw.delete(t),Jw.delete(t)};_e.sync=t=>{ev=!0,_e.batchedUpdates(t),ev=!1};_e.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,_e.onStart(n)}return i.handler=t,i.cancel=()=>{sm.delete(n),e=null},i};var Qw=typeof window<"u"?window.requestAnimationFrame:()=>{};_e.use=t=>Qw=t;_e.now=typeof performance<"u"?()=>performance.now():Date.now;_e.batchedUpdates=t=>t();_e.catch=console.error;_e.frameLoop="always";_e.advance=()=>{_e.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):vO()};var Gs=-1,Ks=0,ev=!1;function gd(t,e){ev?(e.delete(t),t(0)):(e.add(t),gO())}function gO(){Gs<0&&(Gs=0,_e.frameLoop!=="demand"&&Qw(yO))}function IB(){Gs=-1}function yO(){~Gs&&(Qw(yO),_e.batchedUpdates(vO))}function vO(){const t=Gs;Gs=_e.now();const e=mO(Gs);if(e&&(wO(yl.splice(0,e),n=>n.handler()),Ks-=e),!Ks){IB();return}sm.flush(),Zw.flush(t?Math.min(64,Gs-t):16.667),Yw.flush(),Jw.flush(),qw.flush()}function yd(){let t=new Set,e=t;return{add(n){Ks+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ks-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ks-=e.size,wO(e,i=>i(n)&&t.add(i)),Ks+=t.size,e=t)}}}function wO(t,e){t.forEach(n=>{try{e(n)}catch(i){_e.catch(i)}})}function BB(){}var zB=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),he={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function _r(t,e){if(he.arr(t)){if(!he.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Qt=(t,e)=>t.forEach(e);function vo(t,e,n){if(he.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Xs=t=>he.und(t)?[]:he.arr(t)?t:[t];function bO(t,e){if(t.size){const n=Array.from(t);t.clear(),Qt(n,e)}}var nh=(t,...e)=>bO(t,n=>n(...e)),e1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),t1,xO,ro=null,SO=!1,n1=BB,jB=t=>{t.to&&(xO=t.to),t.now&&(_e.now=t.now),t.colors!==void 0&&(ro=t.colors),t.skipAnimation!=null&&(SO=t.skipAnimation),t.createStringInterpolator&&(t1=t.createStringInterpolator),t.requestAnimationFrame&&_e.use(t.requestAnimationFrame),t.batchedUpdates&&(_e.batchedUpdates=t.batchedUpdates),t.willAdvance&&(n1=t.willAdvance),t.frameLoop&&(_e.frameLoop=t.frameLoop)},rc=new Set,bi=[],Ig=[],ep=0,om={get idle(){return!rc.size&&!bi.length},start(t){ep>t.priority?(rc.add(t),_e.onStart(FB)):(kO(t),_e(tv))},advance:tv,sort(t){if(ep)_e.onFrame(()=>om.sort(t));else{const e=bi.indexOf(t);~e&&(bi.splice(e,1),EO(t))}},clear(){bi=[],rc.clear()}};function FB(){rc.forEach(kO),rc.clear(),_e(tv)}function kO(t){bi.includes(t)||EO(t)}function EO(t){bi.splice(UB(bi,e=>e.priority>t.priority),0,t)}function tv(t){const e=Ig;for(let n=0;n<bi.length;n++){const i=bi[n];ep=i.priority,i.idle||(n1(i),i.advance(t),i.idle||e.push(i))}return ep=0,Ig=bi,Ig.length=0,bi=e,bi.length>0}function UB(t,e){const n=t.findIndex(e);return n<0?t.length:n}var VB=(t,e,n)=>Math.min(Math.max(n,t),e),HB={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ui="[-+]?\\d*\\.?\\d+",tp=Ui+"%";function am(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var WB=new RegExp("rgb"+am(Ui,Ui,Ui)),GB=new RegExp("rgba"+am(Ui,Ui,Ui,Ui)),KB=new RegExp("hsl"+am(Ui,tp,tp)),XB=new RegExp("hsla"+am(Ui,tp,tp,Ui)),ZB=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,JB=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,YB=/^#([0-9a-fA-F]{6})$/,qB=/^#([0-9a-fA-F]{8})$/;function QB(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=YB.exec(t))?parseInt(e[1]+"ff",16)>>>0:ro&&ro[t]!==void 0?ro[t]:(e=WB.exec(t))?(Ra(e[1])<<24|Ra(e[2])<<16|Ra(e[3])<<8|255)>>>0:(e=GB.exec(t))?(Ra(e[1])<<24|Ra(e[2])<<16|Ra(e[3])<<8|TS(e[4]))>>>0:(e=ZB.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=qB.exec(t))?parseInt(e[1],16)>>>0:(e=JB.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=KB.exec(t))?(PS(OS(e[1]),ih(e[2]),ih(e[3]))|255)>>>0:(e=XB.exec(t))?(PS(OS(e[1]),ih(e[2]),ih(e[3]))|TS(e[4]))>>>0:null}function Bg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function PS(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Bg(r,i,t+1/3),o=Bg(r,i,t),a=Bg(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Ra(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function OS(t){return(parseFloat(t)%360+360)%360/360}function TS(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ih(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function RS(t){let e=QB(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Wc=(t,e,n)=>{if(he.fun(t))return t;if(he.arr(t))return Wc({range:t,output:e,extrapolate:n});if(he.str(t.output[0]))return t1(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=t4(u,s);return e4(u,s[c],s[c+1],r[c],r[c+1],l,o,a,i.map)}};function e4(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function t4(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var n4=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return VB(0,1,r/t)},np=1.70158,rh=np*1.525,NS=np+1,MS=2*Math.PI/3,DS=2*Math.PI/4.5,sh=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,CO={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>NS*t*t*t-np*t*t,easeOutBack:t=>1+NS*Math.pow(t-1,3)+np*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((rh+1)*2*t-rh)/2:(Math.pow(2*t-2,2)*((rh+1)*(t*2-2)+rh)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*MS),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*MS)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*DS))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*DS)/2+1,easeInBounce:t=>1-sh(1-t),easeOutBounce:sh,easeInOutBounce:t=>t<.5?(1-sh(1-2*t))/2:(1+sh(2*t-1))/2,steps:n4},Gc=Symbol.for("FluidValue.get"),Hl=Symbol.for("FluidValue.observers"),wi=t=>!!(t&&t[Gc]),_n=t=>t&&t[Gc]?t[Gc]():t,_S=t=>t[Hl]||null;function i4(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Kc(t,e){const n=t[Hl];n&&n.forEach(i=>{i4(i,e)})}var AO=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");r4(this,t)}},r4=(t,e)=>PO(t,Gc,e);function lm(t,e){if(t[Gc]){let n=t[Hl];n||PO(t,Hl,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Xc(t,e){const n=t[Hl];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Hl]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var PO=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Jh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s4=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,LS=new RegExp(`(${Jh.source})(%|[a-z]+)`,"i"),o4=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,um=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,OO=t=>{const[e,n]=a4(t);if(!e||e1())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&um.test(n))return OO(n);if(n)return n}return t},a4=t=>{const e=um.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},zg,l4=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,TO=t=>{zg||(zg=ro?new RegExp(`(${Object.keys(ro).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>_n(s).replace(um,OO).replace(s4,RS).replace(zg,RS)),n=e.map(s=>s.match(Jh).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Wc({...t,output:s}));return s=>{var l;const o=!LS.test(e[0])&&((l=e.find(u=>LS.test(u)))==null?void 0:l.replace(Jh,""));let a=0;return e[0].replace(Jh,()=>`${r[a++](s)}${o||""}`).replace(o4,l4)}},RO="react-spring: ",NO=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${RO}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},u4=NO(console.warn);function c4(){u4(`${RO}The "interpolate" function is deprecated in v9 (use "to" instead)`)}NO(console.warn);function cm(t){return he.str(t)&&(t[0]=="#"||/\d/.test(t)||!e1()&&um.test(t)||t in(ro||{}))}var MO=e1()?S.useEffect:S.useLayoutEffect,d4=()=>{const t=S.useRef(!1);return MO(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function h4(){const t=S.useState()[1],e=d4();return()=>{e.current&&t(Math.random())}}function f4(t,e){const[n]=S.useState(()=>({inputs:e,result:t()})),i=S.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&p4(e,s.inputs)||(s={inputs:e,result:t()}):s=n,S.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function p4(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var m4=t=>S.useEffect(t,g4),g4=[],Zc=Symbol.for("Animated:node"),y4=t=>!!t&&t[Zc]===t,ar=t=>t&&t[Zc],i1=(t,e)=>zB(t,Zc,e),dm=t=>t&&t[Zc]&&t[Zc].getPayload(),DO=class{constructor(){i1(this,this)}getPayload(){return this.payload||[]}},vd=class extends DO{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,he.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new vd(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return he.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,he.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Jc=class extends vd{constructor(t){super(0),this._string=null,this._toString=Wc({output:[t,t]})}static create(t){return new Jc(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(he.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Wc({output:[this.getValue(),t]})),this._value=0,super.reset()}},ip={dependencies:null},hm=class extends DO{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return vo(this.source,(n,i)=>{y4(n)?e[i]=n.getValue(t):wi(n)?e[i]=_n(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Qt(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return vo(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){ip.dependencies&&wi(t)&&ip.dependencies.add(t);const e=dm(t);e&&Qt(e,n=>this.add(n))}},_O=class extends hm{constructor(t){super(t)}static create(t){return new _O(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(v4)),!0)}};function v4(t){return(cm(t)?Jc:vd).create(t)}function nv(t){const e=ar(t);return e?e.constructor:he.arr(t)?_O:cm(t)?Jc:vd}var $S=(t,e)=>{const n=!he.fun(t)||t.prototype&&t.prototype.isReactComponent;return S.forwardRef((i,r)=>{const s=S.useRef(null),o=n&&S.useCallback(p=>{s.current=x4(r,p)},[r]),[a,l]=b4(i,e),u=h4(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new w4(c,l),h=S.useRef();MO(()=>(h.current=d,Qt(l,p=>lm(p,d)),()=>{h.current&&(Qt(h.current.deps,p=>Xc(p,h.current)),_e.cancel(h.current.update))})),S.useEffect(c,[]),m4(()=>()=>{const p=h.current;Qt(p.deps,g=>Xc(g,p))});const f=e.getComponentProps(a.getValue());return S.createElement(t,{...f,ref:o})})},w4=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&_e.write(this.update)}};function b4(t,e){const n=new Set;return ip.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new hm(t),ip.dependencies=null,[t,n]}function x4(t,e){return t&&(he.fun(t)?t(e):t.current=e),e}var IS=Symbol.for("AnimatedComponent"),S4=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new hm(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=BS(o)||"Anonymous";return he.str(o)?o=s[o]||(s[o]=$S(o,r)):o=o[IS]||(o[IS]=$S(o,r)),o.displayName=`Animated(${a})`,o};return vo(t,(o,a)=>{he.arr(t)&&(a=BS(o)),s[a]=s(o)}),{animated:s}},BS=t=>he.str(t)?t:t&&he.str(t.displayName)?t.displayName:he.fun(t)&&t.name||null;function zo(t,...e){return he.fun(t)?t(...e):t}var sc=(t,e)=>t===!0||!!(e&&t&&(he.fun(t)?t(e):Xs(t).includes(e))),LO=(t,e)=>he.obj(t)?e&&t[e]:t,k4=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,E4=t=>t,$O=(t,e=E4)=>{let n=C4;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);he.und(s)||(i[r]=s)}return i},C4=["config","onProps","onStart","onChange","onPause","onResume","onRest"],A4={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function P4(t){const e={};let n=0;if(vo(t,(i,r)=>{A4[r]||(e[r]=i,n++)}),n)return e}function IO(t){const e=P4(t);if(e){const n={to:e};return vo(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Yc(t){return t=_n(t),he.arr(t)?t.map(Yc):cm(t)?Yi.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function iv(t){return he.fun(t)||he.arr(t)&&he.obj(t[0])}var O4={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},rv={...O4.default,mass:1,damping:1,easing:CO.linear,clamp:!1},T4=class{constructor(){this.velocity=0,Object.assign(this,rv)}};function R4(t,e,n){n&&(n={...n},zS(n,e),e={...n,...e}),zS(t,e),Object.assign(t,e);for(const o in rv)t[o]==null&&(t[o]=rv[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return he.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function zS(t,e){if(!he.und(e.decay))t.duration=void 0;else{const n=!he.und(e.tension)||!he.und(e.friction);(n||!he.und(e.frequency)||!he.und(e.damping)||!he.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var jS=[],N4=class{constructor(){this.changed=!1,this.values=jS,this.toValues=null,this.fromValues=jS,this.config=new T4,this.immediate=!1}};function M4(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,c=sc(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{he.und(n.pause)||(r.paused=sc(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||sc(p,e)),l=zo(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),l=u.time-_e.now()}function h(){l>0&&!Yi.skipAnimation?(r.delayed=!0,u=_e.setTimeout(f,l),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var D4=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?oc(t.get()):e.every(n=>n.noop)?BO(t.get()):zi(t.get(),e.every(n=>n.finished)),BO=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),zi=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),oc=t=>({value:t,cancelled:!0,finished:!1});function _4(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=$O(e,(w,m)=>m==="onRest"?void 0:w);let c,d;const h=new Promise((w,m)=>(c=w,d=m)),f=w=>{const m=r<=(n.cancelId||0)&&oc(i)||r!==n.asyncId&&zi(i,!1);if(m)throw w.result=m,d(w),w},p=(w,m)=>{const y=new FS,v=new US;return(async()=>{if(Yi.skipAnimation)throw sv(n),v.result=zi(i,!1),d(v),v;f(y);const x=he.obj(w)?{...w}:{...m,to:w};x.parentId=r,vo(u,(O,T)=>{he.und(x[T])&&(x[T]=O)});const k=await i.start(x);return f(y),n.paused&&await new Promise(O=>{n.resumeQueue.add(O)}),k})()};let g;if(Yi.skipAnimation)return sv(n),zi(i,!1);try{let w;he.arr(t)?w=(async m=>{for(const y of m)await p(y)})(t):w=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([w.then(c),h]),g=zi(i.get(),!0,!1)}catch(w){if(w instanceof FS)g=w.result;else if(w instanceof US)g=w.result;else throw w}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return he.fun(o)&&_e.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function sv(t,e){bO(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var FS=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},US=class extends Error{constructor(){super("SkipAnimationSignal")}},ov=t=>t instanceof r1,L4=1,r1=class extends AO{constructor(){super(...arguments),this.id=L4++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=ar(this);return t&&t.getValue()}to(...t){return Yi.to(this,t)}interpolate(...t){return c4(),Yi.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Kc(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||om.sort(this),Kc(this,{type:"priority",parent:this,priority:t})}},pa=Symbol.for("SpringPhase"),zO=1,av=2,lv=4,jg=t=>(t[pa]&zO)>0,Ss=t=>(t[pa]&av)>0,ku=t=>(t[pa]&lv)>0,VS=(t,e)=>e?t[pa]|=av|zO:t[pa]&=~av,HS=(t,e)=>e?t[pa]|=lv:t[pa]&=~lv,Ct=class extends r1{constructor(t,e){if(super(),this.animation=new N4,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!he.und(t)||!he.und(e)){const n=he.obj(t)?{...t}:{...e,from:t};he.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ss(this)||this._state.asyncTo)||ku(this)}get goal(){return _n(this.animation.to)}get velocity(){const t=ar(this);return t instanceof vd?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return jg(this)}get isAnimating(){return Ss(this)}get isPaused(){return ku(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=dm(i.to);!o&&wi(i.to)&&(r=Xs(_n(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Jc?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const g=i.fromValues[c],w=u.v0!=null?u.v0:u.v0=he.arr(s.velocity)?s.velocity[c]:s.velocity;let m;const y=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(he.und(s.duration))if(s.decay){const v=s.decay===!0?.998:s.decay,x=Math.exp(-(1-v)*p);f=g+w/(1-v)*(1-x),h=Math.abs(u.lastPosition-f)<=y,m=w*x}else{m=u.lastVelocity==null?w:u.lastVelocity;const v=s.restVelocity||y/10,x=s.clamp?0:s.bounce,k=!he.und(x),O=g==d?u.v0>0:g<d;let T,A=!1;const N=1,_=Math.ceil(t/N);for(let M=0;M<_&&(T=Math.abs(m)>v,!(!T&&(h=Math.abs(d-f)<=y,h)));++M){k&&(A=f==d||f>d==O,A&&(m=-m*x,f=d));const H=-s.tension*1e-6*(f-d),F=-s.friction*.001*m,j=(H+F)/s.mass;m=m+j*N,f=f+m*N}}else{let v=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),v=(s.progress||0)+p/this._memoizedDuration,v=v>1?1:v<0?0:v,u.durationProgress=v),f=g+s.easing(v)*(d-g),m=(f-u.lastPosition)/t,h=v==1}u.lastVelocity=m,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=ar(this),l=a.getValue();if(e){const u=_n(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return _e.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ss(this)){const{to:t,config:e}=this.animation;_e.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return he.und(t)?(n=this.queue||[],this.queue=[]):n=[he.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>D4(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),sv(this._state,t&&this._lastCallId),_e.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=he.obj(n)?n[e]:n,(n==null||iv(n))&&(n=void 0),i=he.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return jg(this)||(t.reverse&&([n,i]=[i,n]),i=_n(i),he.und(i)?ar(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,$O(t,(o,a)=>/^on/.test(a)?LO(o,n):o)),GS(this,t,"onProps"),Cu(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return M4(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{ku(this)||(HS(this,!0),nh(s.pauseQueue),Cu(this,"onPause",zi(this,Eu(this,this.animation.to)),this))},resume:()=>{ku(this)&&(HS(this,!1),Ss(this)&&this._resume(),nh(s.resumeQueue),Cu(this,"onResume",zi(this,Eu(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=$4(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(oc(this));const i=!he.und(t.to),r=!he.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(oc(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;r&&!i&&(!e.default||he.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!_r(d,u);h&&(a.from=d),d=_n(d);const f=!_r(c,l);f&&this._focus(c);const p=iv(e.to),{config:g}=a,{decay:w,velocity:m}=g;(i||r)&&(g.velocity=0),e.config&&!p&&R4(g,zo(e.config,s),e.config!==o.config?zo(o.config,s):void 0);let y=ar(this);if(!y||he.und(c))return n(zi(this,!0));const v=he.und(e.reset)?r&&!e.default:!he.und(d)&&sc(e.reset,s),x=v?d:this.get(),k=Yc(c),O=he.num(k)||he.arr(k)||cm(k),T=!p&&(!O||sc(o.immediate||e.immediate,s));if(f){const M=nv(c);if(M!==y.constructor)if(T)y=this._set(k);else throw Error(`Cannot animate between ${y.constructor.name} and ${M.name}, as the "to" prop suggests`)}const A=y.constructor;let N=wi(c),_=!1;if(!N){const M=v||!jg(this)&&h;(f||M)&&(_=_r(Yc(x),k),N=!_),(!_r(a.immediate,T)&&!T||!_r(g.decay,w)||!_r(g.velocity,m))&&(N=!0)}if(_&&Ss(this)&&(a.changed&&!v?N=!0:N||this._stop(l)),!p&&((N||wi(l))&&(a.values=y.getPayload(),a.toValues=wi(c)?null:A==Jc?[1]:Xs(k)),a.immediate!=T&&(a.immediate=T,!T&&!v&&this._set(l)),N)){const{onRest:M}=a;Qt(B4,F=>GS(this,e,F));const H=zi(this,Eu(this,l));nh(this._pendingCalls,H),this._pendingCalls.add(n),a.changed&&_e.batchedUpdates(()=>{var F;a.changed=!v,M==null||M(H,this),v?zo(o.onRest,H):(F=a.onStart)==null||F.call(a,H,this)})}v&&this._set(x),p?n(_4(e.to,e,this._state,this)):N?this._start():Ss(this)&&!f?this._pendingCalls.add(n):n(BO(x))}_focus(t){const e=this.animation;t!==e.to&&(_S(this)&&this._detach(),e.to=t,_S(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;wi(e)&&(lm(e,this),ov(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;wi(t)&&Xc(t,this)}_set(t,e=!0){const n=_n(t);if(!he.und(n)){const i=ar(this);if(!i||!_r(n,i.getValue())){const r=nv(n);!i||i.constructor!=r?i1(this,r.create(n)):i.setValue(n),i&&_e.batchedUpdates(()=>{this._onChange(n,e)})}}return ar(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Cu(this,"onStart",zi(this,Eu(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),zo(this.animation.onChange,t,this)),zo(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;ar(this).reset(_n(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Ss(this)||(VS(this,!0),ku(this)||this._resume())}_resume(){Yi.skipAnimation?this.finish():om.start(this)}_stop(t,e){if(Ss(this)){VS(this,!1);const n=this.animation;Qt(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Kc(this,{type:"idle",parent:this});const i=e?oc(this.get()):zi(this.get(),Eu(this,t??n.to));nh(this._pendingCalls,i),n.changed&&(n.changed=!1,Cu(this,"onRest",i,this))}}};function Eu(t,e){const n=Yc(e),i=Yc(t.get());return _r(i,n)}function $4(t,e=t.loop,n=t.to){const i=zo(e);if(i){const r=i!==!0&&IO(i),s=(r||t).reverse,o=!r||r.reset;return I4({...t,loop:e,default:!1,pause:void 0,to:!s||iv(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function I4(t){const{to:e,from:n}=t=IO(t),i=new Set;return he.obj(e)&&WS(e,i),he.obj(n)&&WS(n,i),t.keys=i.size?Array.from(i):null,t}function WS(t,e){vo(t,(n,i)=>n!=null&&e.add(i))}var B4=["onStart","onRest","onChange","onPause","onResume"];function GS(t,e,n){t.animation[n]=e[n]!==k4(e,n)?LO(e[n],t.key):void 0}function Cu(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var s1=({children:t,...e})=>{const n=S.useContext(rp),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=f4(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=rp;return S.createElement(s,{value:e},t)},rp=z4(s1,{});s1.Provider=rp.Provider;s1.Consumer=rp.Consumer;function z4(t,e){return Object.assign(t,S.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var j4=class extends r1{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Wc(...e);const n=this._get(),i=nv(n);i1(this,i.create(n))}advance(t){const e=this._get(),n=this.get();_r(e,n)||(ar(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&KS(this._active)&&Fg(this)}_get(){const t=he.arr(this.source)?this.source.map(_n):Xs(_n(this.source));return this.calc(...t)}_start(){this.idle&&!KS(this._active)&&(this.idle=!1,Qt(dm(this),t=>{t.done=!1}),Yi.skipAnimation?(_e.batchedUpdates(()=>this.advance()),Fg(this)):om.start(this))}_attach(){let t=1;Qt(Xs(this.source),e=>{wi(e)&&lm(e,this),ov(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Qt(Xs(this.source),t=>{wi(t)&&Xc(t,this)}),this._active.clear(),Fg(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Xs(this.source).reduce((e,n)=>Math.max(e,(ov(n)?n.priority:0)+1),0))}};function F4(t){return t.idle!==!1}function KS(t){return!t.size||Array.from(t).every(F4)}function Fg(t){t.idle||(t.idle=!0,Qt(dm(t),e=>{e.done=!0}),Kc(t,{type:"idle",parent:t}))}Yi.assign({createStringInterpolator:TO,to:(t,e)=>new j4(t,e)});var jO=/^--/;function U4(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!jO.test(t)&&!(ac.hasOwnProperty(t)&&ac[t])?e+"px":(""+e).trim()}var XS={};function V4(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,u=Object.values(l),c=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:XS[d]||(XS[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in i)if(i.hasOwnProperty(d)){const h=U4(d,i[d]);jO.test(d)?t.style.setProperty(d,h):t.style[d]=h}c.forEach((d,h)=>{t.setAttribute(d,u[h])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var ac={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H4=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),W4=["Webkit","Ms","Moz","O"];ac=Object.keys(ac).reduce((t,e)=>(W4.forEach(n=>t[H4(n,e)]=t[e]),t),ac);var G4=/^(matrix|translate|scale|rotate|skew)/,K4=/^(translate)/,X4=/^(rotate|skew)/,Ug=(t,e)=>he.num(t)&&t!==0?t+e:t,Yh=(t,e)=>he.arr(t)?t.every(n=>Yh(n,e)):he.num(t)?t===e:parseFloat(t)===e,Z4=class extends hm{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Ug(a,"px")).join(",")})`,Yh(o,0)])),vo(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(G4.test(a)){if(delete i[a],he.und(o))return;const l=K4.test(a)?"px":X4.test(a)?"deg":"";r.push(Xs(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${Ug(h,l)})`,Yh(h,0)]:u=>[`${a}(${u.map(c=>Ug(c,l)).join(",")})`,Yh(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new J4(r,s)),super(i)}},J4=class extends AO{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Qt(this.inputs,(n,i)=>{const r=_n(n[0]),[s,o]=this.transforms[i](he.arr(r)?r:n.map(_n));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Qt(this.inputs,e=>Qt(e,n=>wi(n)&&lm(n,this)))}observerRemoved(t){t==0&&Qt(this.inputs,e=>Qt(e,n=>wi(n)&&Xc(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Kc(this,t)}},Y4=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Yi.assign({batchedUpdates:ba.unstable_batchedUpdates,createStringInterpolator:TO,colors:HB});var q4=S4(Y4,{applyAnimatedValues:V4,createAnimatedStyle:t=>new Z4(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),zt=q4.animated;const Pt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"}},Ze=(t=Pt.stone[800])=>({backgroundColor:new Ct(t),opacity:new Ct(1)}),Ni=()=>({strokeDashoffset:new Ct(1),opacity:new Ct(1)}),o1={bus:{address:{stroke:new Ct(Pt.stone[700])},data:{stroke:new Ct(Pt.stone[700])},rd:{stroke:new Ct(Pt.stone[700])},wr:{stroke:new Ct(Pt.stone[700])},iom:Ni(),mem:{stroke:new Ct(Pt.red[500])},pic:Ni(),timer:Ni(),intr:Ni(),inta:Ni(),int0:Ni(),int1:Ni(),int2:Ni()},clock:{angle:new Ct(0)},cpu:{internalBus:{address:{strokeDashoffset:new Ct(1),opacity:new Ct(1),path:new Ct("")},data:{strokeDashoffset:new Ct(1),opacity:new Ct(1),path:new Ct("")}},alu:{operands:Ni(),results:Ni(),cog:{rot:new Ct(0)},operation:{backgroundColor:new Ct(Pt.stone[800])}},decoder:{path:Ni(),progress:{progress:new Ct(0),opacity:new Ct(1)}},AX:Ze(),BX:Ze(),CX:Ze(),DX:Ze(),SP:Ze(),IP:Ze(),IR:Ze(),ri:Ze(),id:Ze(),left:Ze(),right:Ze(),result:Ze(),FLAGS:Ze(),MAR:Ze(),MBR:Ze()},pic:{IMR:Ze(),IRR:Ze(),ISR:Ze(),INT0:Ze(),INT1:Ze(),INT2:Ze(),INT3:Ze(),INT4:Ze(),INT5:Ze(),INT6:Ze(),INT7:Ze()},timer:{CONT:Ze(),COMP:Ze()}};function yt(t){return x2(o1,t)}function FO(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof Ct?e[n]=i.get():e[n]=FO(i)}return e}const Q4=FO(o1);function UO(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof Ct?i.set(e[n]):UO(t[n],e[n])}}const e8=()=>UO(o1,Q4),sp=new Set;async function Qe(t,e){Array.isArray(t)||(t=[t]);const n={duration:ds().executionUnit*e.duration,easing:CO[e.easing]};return await Promise.all(t.map(async({key:i,from:r,to:s})=>{if(s===void 0&&r===void 0)return null;const o=yt(i);if(s===void 0)return o.set(r);{sp.add(i);const a=await yt(i).start({from:r,to:s,config:n});return sp.delete(i),a}}))}const t8=()=>sp.forEach(t=>yt(t).resume());function n8(){sp.clear(),e8()}async function lr(t,e=Pt.mantis[400]){return await Qe({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function ur(t){return await Qe({key:`${t}.backgroundColor`,to:Pt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function op(t){await Qe({key:"bus.data.stroke",to:Pt.mantis[400]},{duration:5,easing:"easeOutSine"}),await lr("cpu.MBR"),ne.set(Vl,t),await ur("cpu.MBR")}async function Wl(t,e){return await Qe([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function Gl(t){return await Qe({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function i8(t){switch(t.type){case"bus:io.selected":{await Promise.all([Qe({key:"bus.mem.stroke",to:Pt.stone[700]},{duration:1,easing:"easeInSine"}),Wl(`bus.${t.chip}`,15)]);return}case"bus:io.error":{ma(t.error);return}case"bus:reset":{await Promise.all([Qe([{key:"bus.address.stroke",to:Pt.stone[700]},{key:"bus.data.stroke",to:Pt.stone[700]},{key:"bus.rd.stroke",to:Pt.stone[700]},{key:"bus.wr.stroke",to:Pt.stone[700]}],{duration:1,easing:"easeInSine"}),Qe({key:"bus.mem.stroke",to:Pt.red[500]},{duration:1,easing:"easeOutSine"}),Gl("bus.iom"),Gl("bus.pic")]);return}default:return t}}async function r8(t){switch(t.type){case"clock:tick":return;default:return t.type}}async function s8(t){switch(t.type){case"console:read":{ne.set(Cr,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{ne.sub(Cr,()=>{const n=ne.get(Cr);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"console:write":{ne.set($w,Kn.getComputerState().io.console);return}default:return t}}function o8(t){switch(t){case"IP":return"M 551 309 H 575 V 349 H 598";case"SP":return"M 551 349 H 598";case"ri":return"M 544 388 H 575 V 349 H 598";default:throw new Error(`Invalid register ${t}`)}}function a8(){const{path:t,...e}=yt("cpu.internalBus.address");return P.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[P.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598"].join(" ")}),P.jsx(zt.path,{d:t,className:"fill-none stroke-blue-500 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var a1={exports:{}},vl=typeof Reflect=="object"?Reflect:null,ZS=vl&&typeof vl.apply=="function"?vl.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},qh;vl&&typeof vl.ownKeys=="function"?qh=vl.ownKeys:Object.getOwnPropertySymbols?qh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:qh=function(e){return Object.getOwnPropertyNames(e)};function l8(t){console&&console.warn&&console.warn(t)}var VO=Number.isNaN||function(e){return e!==e};function Ye(){Ye.init.call(this)}a1.exports=Ye;a1.exports.once=h8;Ye.EventEmitter=Ye;Ye.prototype._events=void 0;Ye.prototype._eventsCount=0;Ye.prototype._maxListeners=void 0;var JS=10;function fm(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ye,"defaultMaxListeners",{enumerable:!0,get:function(){return JS},set:function(t){if(typeof t!="number"||t<0||VO(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");JS=t}});Ye.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ye.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||VO(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function HO(t){return t._maxListeners===void 0?Ye.defaultMaxListeners:t._maxListeners}Ye.prototype.getMaxListeners=function(){return HO(this)};Ye.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")ZS(l,this,n);else for(var u=l.length,c=ZO(l,u),i=0;i<u;++i)ZS(c[i],this,n);return!0};function WO(t,e,n,i){var r,s,o;if(fm(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=HO(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,l8(a)}return t}Ye.prototype.addListener=function(e,n){return WO(this,e,n,!1)};Ye.prototype.on=Ye.prototype.addListener;Ye.prototype.prependListener=function(e,n){return WO(this,e,n,!0)};function u8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function GO(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=u8.bind(i);return r.listener=n,i.wrapFn=r,r}Ye.prototype.once=function(e,n){return fm(n),this.on(e,GO(this,e,n)),this};Ye.prototype.prependOnceListener=function(e,n){return fm(n),this.prependListener(e,GO(this,e,n)),this};Ye.prototype.removeListener=function(e,n){var i,r,s,o,a;if(fm(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():c8(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Ye.prototype.off=Ye.prototype.removeListener;Ye.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function KO(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?d8(r):ZO(r,r.length)}Ye.prototype.listeners=function(e){return KO(this,e,!0)};Ye.prototype.rawListeners=function(e){return KO(this,e,!1)};Ye.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):XO.call(t,e)};Ye.prototype.listenerCount=XO;function XO(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ye.prototype.eventNames=function(){return this._eventsCount>0?qh(this._events):[]};function ZO(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function c8(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function d8(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function h8(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}JO(t,e,s,{once:!0}),e!=="error"&&f8(t,r,{once:!0})})}function f8(t,e,n){typeof t.on=="function"&&JO(t,"error",e,n)}function JO(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var p8=a1.exports;function Rr(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Rr.prototype[Symbol.iterator]=function(){return this});Rr.of=function(){var t=arguments,e=t.length,n=0;return new Rr(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Rr.empty=function(){var t=new Rr(function(){return{done:!0}});return t};Rr.fromSequence=function(t){var e=0,n=t.length;return new Rr(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Rr.is=function(t){return t instanceof Rr?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var pm=Rr;const Ti=tu(pm);var mm={};mm.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";mm.SYMBOL_SUPPORT=typeof Symbol<"u";var m8=pm,YO=mm,g8=YO.ARRAY_BUFFER_SUPPORT,y8=YO.SYMBOL_SUPPORT;function v8(t){return typeof t=="string"||Array.isArray(t)||g8&&ArrayBuffer.isView(t)?m8.fromSequence(t):typeof t!="object"||t===null?null:y8&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var qO=function(e){var n=v8(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},w8=qO,b8=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=w8(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const QO=tu(b8);var x8=pm,S8=qO,k8=function(){var e=arguments,n=null,i=-1;return new x8(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=S8(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const es=tu(k8);function E8(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let jt=E8;typeof Object.assign=="function"&&(jt=Object.assign);function Ai(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function en(t){return typeof t=="object"&&t!==null}function eT(t){let e;for(e in t)return!1;return!0}function di(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Mi(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function YS(t){return!(!en(t)||t.attributes&&!Array.isArray(t.attributes))}function C8(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class l1 extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ce extends l1{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ce.prototype.constructor)}}class re extends l1{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,re.prototype.constructor)}}class Pe extends l1{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Pe.prototype.constructor)}}function tT(t,e){this.key=t,this.attributes=e,this.clear()}tT.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function nT(t,e){this.key=t,this.attributes=e,this.clear()}nT.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function iT(t,e){this.key=t,this.attributes=e,this.clear()}iT.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function ou(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}ou.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};ou.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};ou.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};ou.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const rT=0,sT=1,A8=2,oT=3;function vs(t,e,n,i,r,s,o){let a,l,u,c;if(i=""+i,n===rT){if(a=t._nodes.get(i),!a)throw new re(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===oT){if(r=""+r,l=t._edges.get(r),!l)throw new re(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new re(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(i),!l)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===sT?a=l.source:a=l.target,u=r,c=s}return[a,u,c]}function P8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=vs(this,e,n,i,r,s);return o.attributes[a]}}function O8(t,e,n){t.prototype[e]=function(i,r){const[s]=vs(this,e,n,i,r);return s.attributes}}function T8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=vs(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function R8(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=vs(this,e,n,i,r,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function N8(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=vs(this,e,n,i,r,s,o);if(typeof u!="function")throw new ce(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function M8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=vs(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function D8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=vs(this,e,n,i,r,s);if(!en(a))throw new ce(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function _8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=vs(this,e,n,i,r,s);if(!en(a))throw new ce(`Graph.${e}: provided attributes are not a plain object.`);return jt(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function L8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=vs(this,e,n,i,r,s);if(typeof a!="function")throw new ce(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const $8=[{name:t=>`get${t}Attribute`,attacher:P8},{name:t=>`get${t}Attributes`,attacher:O8},{name:t=>`has${t}Attribute`,attacher:T8},{name:t=>`set${t}Attribute`,attacher:R8},{name:t=>`update${t}Attribute`,attacher:N8},{name:t=>`remove${t}Attribute`,attacher:M8},{name:t=>`replace${t}Attributes`,attacher:D8},{name:t=>`merge${t}Attributes`,attacher:_8},{name:t=>`update${t}Attributes`,attacher:L8}];function I8(t){$8.forEach(function({name:e,attacher:n}){n(t,e("Node"),rT),n(t,e("Source"),sT),n(t,e("Target"),A8),n(t,e("Opposite"),oT)})}function B8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ai(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function z8(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=Ai(this,s,o,n),!r)throw new re(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function j8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ai(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function F8(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Ai(this,a,l,n),!o)throw new re(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function U8(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Ai(this,a,l,n),!o)throw new re(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new ce(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function V8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ai(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function H8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ai(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!en(r))throw new ce(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function W8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ai(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!en(r))throw new ce(`Graph.${e}: provided attributes are not a plain object.`);return jt(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function G8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ai(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new ce(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const K8=[{name:t=>`get${t}Attribute`,attacher:B8},{name:t=>`get${t}Attributes`,attacher:z8},{name:t=>`has${t}Attribute`,attacher:j8},{name:t=>`set${t}Attribute`,attacher:F8},{name:t=>`update${t}Attribute`,attacher:U8},{name:t=>`remove${t}Attribute`,attacher:V8},{name:t=>`replace${t}Attributes`,attacher:H8},{name:t=>`merge${t}Attributes`,attacher:W8},{name:t=>`update${t}Attributes`,attacher:G8}];function X8(t){K8.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Z8=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function J8(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function Y8(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Vg(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Ti(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function q8(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function Q8(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function Hg(t,e){let n=t[e];return n.next!==void 0?new Ti(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Ti.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function e6(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):QO(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function aT(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=i(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function t6(t,e){if(t.size===0)return Ti.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Ti(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function u1(t,e,n,i,r,s){const o=e?Y8:J8;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function n6(t,e,n,i){const r=[];return u1(!1,t,e,n,i,function(s){r.push(s)}),r}function i6(t,e,n){let i=Ti.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=es(i,Vg(n.in))),e!=="in"&&typeof n.out<"u"&&(i=es(i,Vg(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=es(i,Vg(n.undirected))),i}function c1(t,e,n,i,r,s,o){const a=n?Q8:q8;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function r6(t,e,n,i,r){const s=[];return c1(!1,t,e,n,i,r,function(o){s.push(o)}),s}function s6(t,e,n,i){let r=Ti.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=es(r,Hg(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=es(r,Hg(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=es(r,Hg(n.undirected,i))),r}function o6(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return e6(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new re(`Graph.${n}: could not find the "${s}" node in the graph.`);return n6(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new re(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new re(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return r6(i,this.multi,r,a,o)}throw new ce(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function a6(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,aT(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new re(`Graph.${s}: could not find the "${u}" node in the graph.`);return u1(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new re(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new re(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return c1(!1,i,this.multi,r,h,c,d)}throw new ce(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,g,w,m,y,v,x)=>{d[f++]=c(p,g,w,m,y,v,x)})}else d=[],u.push((h,f,p,g,w,m,y)=>{d.push(c(h,f,p,g,w,m,y))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,g,w,m,y)=>{c(h,f,p,g,w,m,y)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new ce(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new ce(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,g,w,m,y,v)=>{h=c(h,f,p,g,w,m,y,v)}),this[s].apply(this,u),h}}function l6(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=l,aT(!0,this,i,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new re(`Graph.${s}: could not find the "${l}" node in the graph.`);return u1(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new re(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new re(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return c1(!0,i,this.multi,r,d,u,c)}throw new ce(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,g,w,m)=>u(d,h,f,p,g,w,m)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,g,w,m)=>!u(d,h,f,p,g,w,m)),!this[s].apply(this,l)}}function u6(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Ti.empty();if(!arguments.length)return t6(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new re(`Graph.${s}: could not find the "${o}" node in the graph.`);return i6(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new re(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new re(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return s6(i,r,l,a)}throw new ce(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function c6(t){Z8.forEach(e=>{o6(t,e),a6(t,e),l6(t,e),u6(t,e)})}const d6=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function gm(){this.A=null,this.B=null}gm.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};gm.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Au(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function d1(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Au(t,null,i,i.undirected,r);if(typeof n=="string")return Au(t,null,i,i[n],r)}const s=new gm;let o;if(e!=="undirected"){if(n!=="out"){if(o=Au(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Au(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Au(t,s,i,i.undirected,r),t&&o))return o}function h6(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return d1(!1,t,e,n,function(r){i.push(r)}),i}function Pu(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Ti(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function f6(t,e,n){if(t!=="mixed"){if(t==="undirected")return Pu(null,n,n.undirected);if(typeof e=="string")return Pu(null,n,n[e])}let i=Ti.empty();const r=new gm;return t!=="undirected"&&(e!=="out"&&(i=es(i,Pu(r,n,n.in))),e!=="in"&&(i=es(i,Pu(r,n,n.out)))),t!=="directed"&&(i=es(i,Pu(r,n,n.undirected))),i}function p6(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new re(`Graph.${n}: could not find the "${s}" node in the graph.`);return h6(i==="mixed"?this.type:i,r,o)}}function m6(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new re(`Graph.${s}: could not find the "${u}" node in the graph.`);d1(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new ce(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function g6(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new re(`Graph.${o}: could not find the "${u}" node in the graph.`);return d1(!0,i==="mixed"?this.type:i,r,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function y6(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Ti.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new re(`Graph.${s}: could not find the "${o}" node in the graph.`);return f6(i==="mixed"?this.type:i,r,a)}}function v6(t){d6.forEach(e=>{p6(t,e),m6(t,e),g6(t,e),y6(t,e)})}function oh(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,u,c,d,h,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do{if(h=d.target,p=!0,f=r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do{if(h=d.target,h.key!==u&&(h=d.source),p=!0,f=r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(n&&!p&&(f=r(l.key,null,l.attributes,null,null,null,null),t&&f))return null}}function w6(t,e){const n={key:t};return eT(e.attributes)||(n.attributes=jt({},e.attributes)),n}function b6(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return eT(n.attributes)||(i.attributes=jt({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function x6(t){if(!en(t))throw new ce('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ce("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!en(t.attributes)||t.attributes===null))throw new ce("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function S6(t){if(!en(t))throw new ce('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ce("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ce("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!en(t.attributes)||t.attributes===null))throw new ce("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ce("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const k6=C8(),E6=new Set(["directed","undirected","mixed"]),qS=new Set(["domain","_events","_eventsCount","_maxListeners"]),C6=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],A6={allowSelfLoops:!0,multi:!1,type:"mixed"};function P6(t,e,n){if(n&&!en(n))throw new ce(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Pe(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function QS(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function lT(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new Pe(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Pe(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!en(a))throw new ce(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Pe(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new re(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new re(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Pe(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Pe(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new ou(i,r,l,u,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function O6(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new Pe(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Pe(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ce(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!en(a))throw new ce(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Pe(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new Pe(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!u:!a)return y;if(l){const v=f.attributes;f.attributes=u(v),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else jt(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Pe(`Graph.${e}: the "${r}" edge already exists in the graph.`);let g=!1,w=!1;c||(c=QS(t,s,{}),g=!0,s===o&&(d=c,w=!0)),d||(d=QS(t,o,{}),w=!0),h=new ou(i,r,c,d,a),t._edges.set(r,h);const m=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,m&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,m&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,g,w]}function Na(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class tt extends p8.EventEmitter{constructor(e){if(super(),e=jt({},A6,e),typeof e.multi!="boolean")throw new ce(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!E6.has(e.type))throw new ce(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ce(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?tT:e.type==="directed"?nT:iT;di(this,"NodeDataClass",n);const i="geid_"+k6()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};di(this,"_attributes",{}),di(this,"_nodes",new Map),di(this,"_edges",new Map),di(this,"_directedSize",0),di(this,"_undirectedSize",0),di(this,"_directedSelfLoopCount",0),di(this,"_undirectedSelfLoopCount",0),di(this,"_edgeKeyGenerator",s),di(this,"_options",e),qS.forEach(o=>di(this,o,this[o])),Mi(this,"order",()=>this._nodes.size),Mi(this,"size",()=>this._edges.size),Mi(this,"directedSize",()=>this._directedSize),Mi(this,"undirectedSize",()=>this._undirectedSize),Mi(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Mi(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Mi(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Mi(this,"multi",this._options.multi),Mi(this,"type",this._options.type),Mi(this,"allowSelfLoops",this._options.allowSelfLoops),Mi(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new ce(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new ce(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new ce(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Pe("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new re(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new re(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Pe("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new re(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new re(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new Pe("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new re(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new re(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new re(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new re(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return P6(this,e,n).key}mergeNode(e,n){if(n&&!en(n))throw new ce(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(jt(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ce(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do Na(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do Na(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do Na(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Ai(this,i,r,this.type),!n)throw new re(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new re(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Na(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Pe("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Pe("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Ai(this,e,n,"directed");if(!i)throw new re(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Na(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Pe("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Pe("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Ai(this,e,n,"undirected");if(!i)throw new re(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Na(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ce("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!en(e))throw new ce("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!en(e))throw new ce("Graph.mergeAttributes: provided attributes are not a plain object.");return jt(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ce("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ce("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!YS(n))throw new ce("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ce("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!YS(n))throw new ce("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ce("Graph.forEachAdjacencyEntry: expecting a callback.");oh(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ce("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");oh(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ce("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");oh(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ce("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");oh(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):QO(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ce("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new ce("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new ce("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new ce("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ce("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ce("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ce("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ce("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Ti(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=w6(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=b6(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof tt)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!en(e))throw new ce("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!en(e.attributes))throw new ce("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ce("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],x6(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ce("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],S6(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new tt(jt({},this._options,e));return n.replaceAttributes(jt({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=jt({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Pe(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Pe("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Pe("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,lT(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,jt({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!qS.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,di(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(tt.prototype[Symbol.for("nodejs.util.inspect.custom")]=tt.prototype.inspect);C6.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?lT:O6;t.generateKey?tt.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:tt.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});I8(tt);X8(tt);c6(tt);v6(tt);class uT extends tt{constructor(e){const n=jt({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ce("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ce('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class h1 extends tt{constructor(e){const n=jt({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ce("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ce('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class cT extends tt{constructor(e){const n=jt({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ce("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class dT extends tt{constructor(e){const n=jt({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ce("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ce('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class hT extends tt{constructor(e){const n=jt({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ce("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ce('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function au(t){t.from=function(e,n){const i=jt({},e.options,n),r=new t(i);return r.import(e),r}}au(tt);au(uT);au(h1);au(cT);au(dT);au(hT);tt.Graph=tt;tt.DirectedGraph=uT;tt.UndirectedGraph=h1;tt.MultiGraph=cT;tt.MultiDirectedGraph=dT;tt.MultiUndirectedGraph=hT;tt.InvalidArgumentsGraphError=ce;tt.NotFoundGraphError=re;tt.UsageGraphError=Pe;var T6=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},fT=mm,R6=fT.ARRAY_BUFFER_SUPPORT,N6=fT.SYMBOL_SUPPORT,M6=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||R6&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(N6&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},pT=pm,D6=M6;function Lt(){this.clear()}Lt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Lt.prototype.enqueue=function(t){return this.items.push(t),++this.size};Lt.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};Lt.prototype.peek=function(){if(this.size)return this.items[this.offset]};Lt.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};Lt.prototype.toArray=function(){return this.items.slice(this.offset)};Lt.prototype.values=function(){var t=this.items,e=this.offset;return new pT(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};Lt.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new pT(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(Lt.prototype[Symbol.iterator]=Lt.prototype.values);Lt.prototype.toString=function(){return this.toArray().join(",")};Lt.prototype.toJSON=function(){return this.toArray()};Lt.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Lt,enumerable:!1}),t};typeof Symbol<"u"&&(Lt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Lt.prototype.inspect);Lt.from=function(t){var e=new Lt;return D6(t,function(n){e.enqueue(n)}),e};Lt.of=function(){return Lt.from(arguments)};var _6=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},mT=T6,L6=_6;function $6(t,e,n){if(!mT(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,g,w,m=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=r(c),p=0,w=d.length;p<w;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){m=!0;break e}}else for(u=l,l=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=i(c),p=0,w=d.length;p<w;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){m=!0;break e}if(!m)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function gT(t,e,n){if(!mT(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!i.has(u)&&(i.add(u),L6(c,e[t](u)),r[u]=s);s++,o=c}return r}gT.bind(null,"outboundNeighbors");gT.bind(null,"neighbors");var I6=$6;const ye=new h1({allowSelfLoops:!1});ye.addNode("MBR",{position:[610,250]});ye.addNode("AX",{position:[522,45]});ye.addNode("BX",{position:[522,85]});ye.addNode("CX",{position:[522,125]});ye.addNode("DX",{position:[522,165]});ye.addNode("id",{position:[522,205]});ye.addNode("IP",{position:[451,309]});ye.addNode("SP",{position:[451,349]});ye.addNode("ri",{position:[451,388]});ye.addNode("result",{position:[370,130]});ye.addNode("FLAGS",{position:[250,225]});ye.addNode("IR",{position:[205,272]});ye.addNode("left",{position:[60,85]});ye.addNode("right",{position:[60,145]});ye.addNode("AX join",{position:[492,45]});ye.addNode("BX join",{position:[492,85]});ye.addNode("CX join",{position:[492,125]});ye.addNode("DX join",{position:[492,165]});ye.addNode("id join",{position:[492,205]});ye.addNode("data mbr join",{position:[492,250]});ye.addNode("IP join",{position:[421,309]});ye.addNode("SP join",{position:[421,349]});ye.addNode("ri join",{position:[421,388]});ye.addNode("addresses mbr join",{position:[421,250]});ye.addNode("result mbr join",{position:[370,250]});ye.addNode("FLAGS mbr join",{position:[250,250]});ye.addNode("IR mbr join",{position:[205,250]});ye.addNode("left join",{position:[30,85]});ye.addNode("right join",{position:[30,145]});ye.addNode("operands mbr join",{position:[30,250]});ye.addUndirectedEdge("AX","AX join");ye.addUndirectedEdge("BX","BX join");ye.addUndirectedEdge("CX","CX join");ye.addUndirectedEdge("DX","DX join");ye.addUndirectedEdge("id","id join");ye.addUndirectedEdge("AX join","BX join");ye.addUndirectedEdge("BX join","CX join");ye.addUndirectedEdge("CX join","DX join");ye.addUndirectedEdge("DX join","id join");ye.addUndirectedEdge("id join","data mbr join");ye.addUndirectedEdge("data mbr join","MBR");ye.addUndirectedEdge("IP","IP join");ye.addUndirectedEdge("SP","SP join");ye.addUndirectedEdge("ri","ri join");ye.addUndirectedEdge("IP join","SP join");ye.addUndirectedEdge("SP join","ri join");ye.addUndirectedEdge("IP join","addresses mbr join");ye.addUndirectedEdge("addresses mbr join","data mbr join");ye.addUndirectedEdge("result","result mbr join");ye.addUndirectedEdge("result mbr join","addresses mbr join");ye.addUndirectedEdge("FLAGS","FLAGS mbr join");ye.addUndirectedEdge("FLAGS mbr join","result mbr join");ye.addUndirectedEdge("IR","IR mbr join");ye.addUndirectedEdge("IR mbr join","FLAGS mbr join");ye.addUndirectedEdge("left","left join");ye.addUndirectedEdge("right","right join");ye.addUndirectedEdge("left join","right join");ye.addUndirectedEdge("right join","operands mbr join");ye.addUndirectedEdge("operands mbr join","IR mbr join");function B6(t,e){const n=I6(ye,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const i=ye.getNodeAttribute(n[0],"position");let r=`M ${i[0]} ${i[1]}`;for(let s=1;s<n.length;s++){const[o,a]=ye.getNodeAttribute(n[s],"position");r+=` L ${o} ${a}`}return r}function z6(){const{path:t,...e}=yt("cpu.internalBus.data");return P.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[P.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 272 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),P.jsx(zt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const Wg=(t,e)=>{const n=B6(t,e);return Qe([{key:"cpu.internalBus.data.path",from:n},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},Gg=()=>Qe({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});async function j6(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await Qe([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),ne.set(pO,t.operation),await Promise.all([Qe({key:"cpu.alu.operation.backgroundColor",to:Pt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Qe({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Qe({key:"cpu.alu.operation.backgroundColor",to:Pt.stone[800]},{duration:1,easing:"easeOutQuart"}),Qe([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([lr("cpu.result"),lr("cpu.FLAGS")]),ne.set(ot.FLAGS,t.flags),ne.set(ot.result,t.result),await Promise.all([ur("cpu.result"),ur("cpu.FLAGS")]),await Qe([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{ne.set(Is,e=>e.phase==="stopped"?e:{...e,phase:"interrupt"}),await Qe([{key:"cpu.id.opacity",to:1},{key:"cpu.ri.opacity",to:1}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{nO(t.instruction.position.start),ne.set(Is,{phase:"fetching",metadata:t.instruction}),await Qe([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:.4},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:.4}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{ne.set(Is,e=>e.phase==="stopped"?e:{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase});return}case"cpu:decode":{await Qe([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Qe([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Qe([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{ne.set(Is,{phase:"stopped",error:t.error}),ma(t.error);return}case"cpu:halt":case"cpu:int.0":{ne.set(Is,{phase:"stopped"}),ma();return}case"cpu:int.3":{iz();return}case"cpu:int.6":return;case"cpu:int.7":return;case"cpu:inta.off":{await Gl("bus.inta");return}case"cpu:inta.on":{await Wl("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await Qe({key:`bus.${e}.stroke`,to:Pt.red[500]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Wl("bus.iom",15);return}case"cpu:mar.set":{await Qe([{key:"cpu.internalBus.address.path",from:o8(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await lr("cpu.MAR",Pt.blue[500]),ne.set(fO,ne.get(ot[t.register])),await Qe({key:"bus.address.stroke",to:Pt.blue[500]},{duration:5,easing:"easeOutSine"}),await Promise.all([ur("cpu.MAR"),Qe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=Io(t.register);await Wg("MBR",e),await lr(`cpu.${e}`),ne.set(ot[t.register],ne.get(Vl)),await Promise.all([ur(`cpu.${e}`),Gg()]);return}case"cpu:mbr.set":{const[e]=Io(t.register);await Wg(e,"MBR"),await lr("cpu.MBR"),ne.set(Vl,ne.get(ot[t.register])),await Qe({key:"bus.data.stroke",to:Pt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Promise.all([ur("cpu.MBR"),Gg()]);return}case"cpu:register.copy":{const[e]=Io(t.src),[n]=Io(t.dest);e!==n&&await Wg(e,n),await lr(`cpu.${n}`),ne.set(ot[t.dest],ne.get(ot[t.src])),await Promise.all([ur(`cpu.${n}`),e!==n&&Gg()]);return}case"cpu:register.update":{const[e]=Io(t.register);await lr(`cpu.${e}`),ne.set(ot[t.register],t.value),await ur(`cpu.${e}`);return}default:return t}}async function F6(t){switch(t.type){case"f10:press":return;case"f10:int.off":{await Gl("bus.int0");return}case"f10:int.on":{await Wl("bus.int0",10);return}default:return t}}const f1=ke(new Array(Ae.MAX_ADDRESS+1).fill(L.zero(8))),uv=ke(Ae.from(4096)),ek=8,U6=ke(t=>{const e=t(uv),n=e.value-e.value%ek,i=t(f1),r=[];for(let s=0;s<ek;s++)r.push({address:Ae.from(n+s),value:i[n+s]});return r});function V6(t){ne.set(f1,t.memory.map(e=>L.fromUnsigned(e,8)))}async function H6(t){switch(t.type){case"memory:read":{Ae.inRange(t.address)&&ne.set(uv,Ae.from(t.address));return}case"memory:read.ok":{await op(t.value);return}case"memory:write":{if(Ae.inRange(t.address)){const e=Number(t.address);ne.set(uv,Ae.from(t.address)),ne.set(f1,n=>[...n.slice(0,e),t.value,...n.slice(e+1)])}return}case"memory:write.ok":return;case"memory:read.error":case"memory:write.error":{ma(t.error);return}default:return t}}const p1=ke(L.fromUnsigned(255,8)),m1=ke(L.fromUnsigned(0,8)),g1=ke(L.fromUnsigned(0,8)),ap=[ke(L.zero(8)),ke(L.zero(8)),ke(L.zero(8)),ke(L.zero(8)),ke(L.zero(8)),ke(L.zero(8)),ke(L.zero(8)),ke(L.zero(8))];function W6(t){ne.set(p1,L.fromUnsigned(t.io.pic.IMR,8)),ne.set(m1,L.fromUnsigned(t.io.pic.IRR,8)),ne.set(g1,L.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<ap.length;e++)ne.set(ap[e],L.fromUnsigned(t.io.pic.lines[e],8))}async function G6(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await op(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await lr(`pic.${t.register}`),t.register){case"IMR":{ne.set(p1,t.value);break}case"IRR":{ne.set(m1,t.value);break}case"ISR":{ne.set(g1,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));ne.set(ap[e],t.value);break}default:return t}await ur(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await Gl("bus.intr");return}case"pic:intr.on":{await Wl("bus.intr",10);return}case"pic:int.send":{await op(t.number);return}default:return t}}const y1=ke(L.zero(8)),v1=ke(L.zero(8));function K6(t){ne.set(y1,L.fromUnsigned(t.io.timer.CONT,8)),ne.set(v1,L.fromUnsigned(t.io.timer.COMP,8))}async function X6(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await op(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await lr(`timer.${t.register}`),t.register){case"CONT":{ne.set(y1,t.value);break}case"COMP":{ne.set(v1,t.value);break}default:return t.register}await ur(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await Gl("bus.int1");return}case"timer:int.on":{await Wl("bus.int1",10);return}default:return t}}const yT=ke(L.fromUnsigned(0,8)),vT=ke(L.fromUnsigned(1,8));function Z6(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{ne.set(Vl,t.value);return}case"handshake:write":case"handshake:register.update":switch(t.register){case"DATA":{ne.set(yT,t.value);return}case"STATE":{ne.set(vT,t.value);return}default:return t.register}case"handshake:write.ok":return;case"handshake:interrupt":return;default:return t}}const wT=ke(L.zero(8));function J6(t){switch(t.type){case"leds:update":{ne.set(wT,t.state);return}default:return t}}const bT=ke(L.zero(8)),xT=ke(L.zero(8)),ST=ke(L.zero(8)),kT=ke(L.zero(8));function Y6(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{ne.set(Vl,t.value);return}case"pio:write":case"pio:register.update":switch(t.register){case"PA":{ne.set(bT,t.value);return}case"PB":{ne.set(xT,t.value);return}case"CA":{ne.set(ST,t.value);return}case"CB":{ne.set(kT,t.value);return}default:return t.register}case"pio:write.ok":return;default:return t}}const cv=ke([]),dv=ke("");function q6(t){switch(t.type){case"printer:buffer.add":{ne.set(cv,e=>[...e,t.char]);return}case"printer:buffer.pop":{ne.set(cv,e=>e.slice(1));return}case"printer:busy.off":return;case"printer:busy.on":return;case"printer:data.read":return;case"printer:paper.print":{const e=Kn.getComputerState().io;"printer"in e&&ne.set(dv,e.printer.paper);return}case"printer:paper.replace":{ne.set(dv,"");return}case"printer:strobe.off":return;case"printer:strobe.on":return;default:return t}}const ET=ke(L.zero(8));function Q6(t){switch(t.type){case"switches:toggle":{ne.set(ET,e=>e.withBit(t.index,!e.bit(t.index)));return}default:return t}}const ez={bus:"#2563eb",clock:"#65a30d",console:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",switches:"#65a30d",timer:"#2563eb"};async function tz(t){const[e,n]=t.type.split(":");console.group(`%c ${e} %c ${n}`,`background: ${ez[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof L?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Ae?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Vn?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r} %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}switch(console.groupEnd(),e){case"bus":return await i8(t);case"clock":return await r8(t);case"console":return await s8(t);case"cpu":return await j6(t);case"f10":return await F6(t);case"handshake":return await Z6(t);case"leds":return await J6(t);case"memory":return await H6(t);case"pic":return await G6(t);case"pio":return await Y6(t);case"printer":return await q6(t);case"switches":return await Q6(t);case"timer":return await X6(t);default:throw new Error(`Unknown event type: ${t.type}`)}}const Kn=new V$,Cr=ke({type:"stopped"}),w1=()=>ne.get(Cr);function nz(t){const e=t.translate(ds().language);Kp.error(e)}function ma(t){t&&nz(t),nO(null),tO(!1),ne.set(Cr,{type:"stopped",error:t}),ne.set(Is,{phase:"stopped",error:t}),n8()}function iz(){ne.set(Cr,{type:"paused"})}function rz(){Kp.error(im(ds().language,"messages.assemble-error"))}function Ou(){Kp.error(im(ds().language,"messages.invalid-action"))}function sz(t){_B(t),V6(t),W6(t),K6(t),W$(t),"handshake"in t.io&&(ne.set(yT,L.fromUnsigned(t.io.handshake.DATA,8)),ne.set(vT,L.fromUnsigned(t.io.handshake.STATE,8))),"leds"in t.io&&ne.set(wT,L.fromUnsigned(t.io.leds,8)),"pio"in t.io&&(ne.set(bT,L.fromUnsigned(t.io.pio.PA,8)),ne.set(xT,L.fromUnsigned(t.io.pio.PB,8)),ne.set(ST,L.fromUnsigned(t.io.pio.CA,8)),ne.set(kT,L.fromUnsigned(t.io.pio.CB,8))),"printer"in t.io&&(ne.set(cv,t.io.printer.buffer.map(e=>L.fromUnsigned(e,8))),ne.set(dv,t.io.printer.paper)),"switches"in t.io&&ne.set(ET,L.fromUnsigned(t.io.switches,8))}async function oz(...t){const e=t[0],n=w1();switch(e){case"cpu.run":{if(n.type==="running")return Ou();if(n.type==="stopped"){if(!window.codemirror)return;const i=window.codemirror.state.doc.toString(),r=A2(i);if(!r.success)return rz();tO(!0),Kn.loadProgram({program:r,data:ds().dataOnLoad,devices:ds().devices}),sz(Kn.getComputerState()),ne.set(Cr,{type:"running",until:"infinity"}),ja(Kn.startCPU()),az()}else ne.set(Cr,{type:"running",until:"infinity",waitingForInput:!1}),t8();return}case"cpu.stop":{ma();return}case"f10.press":{if(n.type!=="running")return Ou();ja(Kn.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!Kn.devices.switches.connected())return Ou();const i=t[1];ja(Kn.devices.switches.toggle(i));return}case"console.sendChar":{if(n.type!=="running"||!n.waitingForInput)return Ou();Kn.devices.console.readChar(L.fromChar(t[1])),ne.set(Cr,{...n,waitingForInput:!1});return}case"console.clean":{ja(Kn.devices.console.clear());return}case"printer.clean":{if(!Kn.devices.printer.connected())return Ou();ja(Kn.devices.printer.clear());return}default:return e}}async function ja(t){try{for(;w1().type==="running";){const e=t.next();if(e.done)break;await tz(e.value)}t.return()}catch(e){const n=Mt.from(e);ma(n)}}async function az(){try{for(;w1().type==="running";){const t=ds().clockSpeed;await Qe({key:"clock.angle",from:0,to:360},{duration:t,easing:"linear"}),ja(Kn.devices.clock.tick())}}catch(t){const e=Mt.from(t);ma(e)}}function ym(){return[Ar(Cr),oz]}const lz=()=>i2(su),uz=ke(t=>t(su).language),CT=()=>Ar(uz);ke(t=>t(su).dataOnLoad);ke(t=>t(su).devices);ke(t=>{const e=t(su);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});function On(){const t=CT();return(e,...n)=>im(t,e,...n)}function cz({className:t}){const e=On(),[n,i]=ym(),r=S.useCallback(s=>{s.key==="F5"?(s.preventDefault(),s.shiftKey?i("cpu.stop"):i("cpu.run")):s.key==="F11"&&(s.preventDefault(),i("cpu.step"))},[i]);return w2("keydown",r,void 0,[i]),P.jsx("div",{className:Je("flex items-center justify-center gap-4",t),children:n.type==="stopped"?P.jsxs("button",{className:"flex w-min items-center gap-1 rounded-md bg-mantis-500 p-2 text-mantis-50 transition-colors hover:enabled:bg-mantis-600 hover:enabled:text-white disabled:opacity-40",onClick:()=>i("cpu.run"),children:[P.jsx("span",{className:"icon-[lucide--play] block h-5 w-5"}),P.jsx("span",{className:"whitespace-nowrap font-semibold tracking-wide",children:e("control.action.start")})]}):P.jsxs("button",{className:"flex w-min items-center gap-1 rounded-md bg-mantis-500 p-2 text-mantis-50 transition-colors hover:enabled:bg-mantis-600 hover:enabled:text-white disabled:opacity-40",onClick:()=>i("cpu.stop"),children:[P.jsx("span",{className:"icon-[lucide--stop-circle] block h-5 w-5"}),P.jsx("span",{className:"whitespace-nowrap font-semibold tracking-wide",children:e("control.action.stop")})]})})}function We(){return We=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},We.apply(this,arguments)}function lp(t,[e,n]){return Math.min(n,Math.max(e,t))}function Nt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function vm(t,e=[]){let n=[];function i(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,g=(h==null?void 0:h[t][l])||a,w=S.useMemo(()=>p,Object.values(p));return S.createElement(g.Provider,{value:w},f)}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=S.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const r=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,dz(r,...e)]}function dz(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function hz(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function AT(...t){return e=>t.forEach(n=>hz(n,e))}function $t(...t){return S.useCallback(AT(...t),t)}const qc=S.forwardRef((t,e)=>{const{children:n,...i}=t,r=S.Children.toArray(n),s=r.find(pz);if(s){const o=s.props.children,a=r.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return S.createElement(hv,We({},i,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,a):null)}return S.createElement(hv,We({},i,{ref:e}),n)});qc.displayName="Slot";const hv=S.forwardRef((t,e)=>{const{children:n,...i}=t;return S.isValidElement(n)?S.cloneElement(n,{...mz(i,n.props),ref:e?AT(e,n.ref):n.ref}):S.Children.count(n)>1?S.Children.only(null):null});hv.displayName="SlotClone";const fz=({children:t})=>S.createElement(S.Fragment,null,t);function pz(t){return S.isValidElement(t)&&t.type===fz}function mz(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function PT(t){const e=t+"CollectionProvider",[n,i]=vm(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:g}=f,w=ue.useRef(null),m=ue.useRef(new Map).current;return ue.createElement(r,{scope:p,itemMap:m,collectionRef:w},g)},a=t+"CollectionSlot",l=ue.forwardRef((f,p)=>{const{scope:g,children:w}=f,m=s(a,g),y=$t(p,m.collectionRef);return ue.createElement(qc,{ref:y},w)}),u=t+"CollectionItemSlot",c="data-radix-collection-item",d=ue.forwardRef((f,p)=>{const{scope:g,children:w,...m}=f,y=ue.useRef(null),v=$t(p,y),x=s(u,g);return ue.useEffect(()=>(x.itemMap.set(y,{ref:y,...m}),()=>void x.itemMap.delete(y))),ue.createElement(qc,{[c]:"",ref:v},w)});function h(f){const p=s(t+"CollectionConsumer",f);return ue.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const m=Array.from(w.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((x,k)=>m.indexOf(x.ref.current)-m.indexOf(k.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,i]}const gz=S.createContext(void 0);function OT(t){const e=S.useContext(gz);return t||e||"ltr"}const yz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],on=yz.reduce((t,e)=>{const n=S.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?qc:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(a,We({},o,{ref:r}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function vz(t,e){t&&ba.flushSync(()=>t.dispatchEvent(e))}function hs(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...n)},[])}function wz(t,e=globalThis==null?void 0:globalThis.document){const n=hs(t);S.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[n,e])}const fv="dismissableLayer.update",bz="dismissableLayer.pointerDownOutside",xz="dismissableLayer.focusOutside";let tk;const Sz=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kz=S.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=t,c=S.useContext(Sz),[d,h]=S.useState(null),f=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=S.useState({}),g=$t(e,A=>h(A)),w=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=w.indexOf(m),v=d?w.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,k=v>=y,O=Ez(A=>{const N=A.target,_=[...c.branches].some(M=>M.contains(N));!k||_||(s==null||s(A),a==null||a(A),A.defaultPrevented||l==null||l())},f),T=Cz(A=>{const N=A.target;[...c.branches].some(M=>M.contains(N))||(o==null||o(A),a==null||a(A),A.defaultPrevented||l==null||l())},f);return wz(A=>{v===c.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},f),S.useEffect(()=>{if(d)return i&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(tk=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),nk(),()=>{i&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=tk)}},[d,f,i,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),nk())},[d,c]),S.useEffect(()=>{const A=()=>p({});return document.addEventListener(fv,A),()=>document.removeEventListener(fv,A)},[]),S.createElement(on.div,We({},u,{ref:g,style:{pointerEvents:x?k?"auto":"none":void 0,...t.style},onFocusCapture:Nt(t.onFocusCapture,T.onFocusCapture),onBlurCapture:Nt(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Nt(t.onPointerDownCapture,O.onPointerDownCapture)}))});function Ez(t,e=globalThis==null?void 0:globalThis.document){const n=hs(t),i=S.useRef(!1),r=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let c=function(){TT(bz,n,u,{discrete:!0})};var l=c;const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function Cz(t,e=globalThis==null?void 0:globalThis.document){const n=hs(t),i=S.useRef(!1);return S.useEffect(()=>{const r=s=>{s.target&&!i.current&&TT(xz,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function nk(){const t=new CustomEvent(fv);document.dispatchEvent(t)}function TT(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?vz(r,s):r.dispatchEvent(s)}let Kg=0;function Az(){S.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:ik()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:ik()),Kg++,()=>{Kg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(i=>i.remove()),Kg--}},[])}function ik(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const Xg="focusScope.autoFocusOnMount",Zg="focusScope.autoFocusOnUnmount",rk={bubbles:!1,cancelable:!0},Pz=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=S.useState(null),u=hs(r),c=hs(s),d=S.useRef(null),h=$t(e,g=>l(g)),f=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(i){let y=function(O){if(f.paused||!a)return;const T=O.target;a.contains(T)?d.current=T:Cs(d.current,{select:!0})},v=function(O){if(f.paused||!a)return;const T=O.relatedTarget;T!==null&&(a.contains(T)||Cs(d.current,{select:!0}))},x=function(O){const T=document.activeElement;for(const A of O)A.removedNodes.length>0&&(a!=null&&a.contains(T)||Cs(a))};var g=y,w=v,m=x;document.addEventListener("focusin",y),document.addEventListener("focusout",v);const k=new MutationObserver(x);return a&&k.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),k.disconnect()}}},[i,a,f.paused]),S.useEffect(()=>{if(a){ok.add(f);const g=document.activeElement;if(!a.contains(g)){const m=new CustomEvent(Xg,rk);a.addEventListener(Xg,u),a.dispatchEvent(m),m.defaultPrevented||(Oz(Dz(RT(a)),{select:!0}),document.activeElement===g&&Cs(a))}return()=>{a.removeEventListener(Xg,u),setTimeout(()=>{const m=new CustomEvent(Zg,rk);a.addEventListener(Zg,c),a.dispatchEvent(m),m.defaultPrevented||Cs(g??document.body,{select:!0}),a.removeEventListener(Zg,c),ok.remove(f)},0)}}},[a,u,c,f]);const p=S.useCallback(g=>{if(!n&&!i||f.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,m=document.activeElement;if(w&&m){const y=g.currentTarget,[v,x]=Tz(y);v&&x?!g.shiftKey&&m===x?(g.preventDefault(),n&&Cs(v,{select:!0})):g.shiftKey&&m===v&&(g.preventDefault(),n&&Cs(x,{select:!0})):m===y&&g.preventDefault()}},[n,i,f.paused]);return S.createElement(on.div,We({tabIndex:-1},o,{ref:h,onKeyDown:p}))});function Oz(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Cs(i,{select:e}),document.activeElement!==n)return}function Tz(t){const e=RT(t),n=sk(e,t),i=sk(e.reverse(),t);return[n,i]}function RT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function sk(t,e){for(const n of t)if(!Rz(n,{upTo:e}))return n}function Rz(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Nz(t){return t instanceof HTMLInputElement&&"select"in t}function Cs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Nz(t)&&e&&t.select()}}const ok=Mz();function Mz(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=ak(t,e),t.unshift(e)},remove(e){var n;t=ak(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function ak(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function Dz(t){return t.filter(e=>e.tagName!=="A")}const fs=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},_z=$v["useId".toString()]||(()=>{});let Lz=0;function NT(t){const[e,n]=S.useState(_z());return fs(()=>{t||n(i=>i??String(Lz++))},[t]),t||(e?`radix-${e}`:"")}function lu(t){return t.split("-")[1]}function b1(t){return t==="y"?"height":"width"}function ts(t){return t.split("-")[0]}function ka(t){return["top","bottom"].includes(ts(t))?"x":"y"}function lk(t,e,n){let{reference:i,floating:r}=t;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,a=ka(e),l=b1(a),u=i[l]/2-r[l]/2,c=a==="x";let d;switch(ts(e)){case"top":d={x:s,y:i.y-r.height};break;case"bottom":d={x:s,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:o};break;case"left":d={x:i.x-r.width,y:o};break;default:d={x:i.x,y:i.y}}switch(lu(e)){case"start":d[a]-=u*(n&&c?-1:1);break;case"end":d[a]+=u*(n&&c?-1:1)}return d}const $z=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=lk(u,i,l),h=i,f={},p=0;for(let g=0;g<a.length;g++){const{name:w,fn:m}=a[g],{x:y,y:v,data:x,reset:k}=await m({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=v??d,f={...f,[w]:{...f[w],...x}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):k.rects),{x:c,y:d}=lk(u,h,l)),g=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};function ps(t,e){return typeof t=="function"?t(e):t}function MT(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function up(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Qc(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=ps(e,t),p=MT(f),g=a[h?d==="floating"?"reference":"floating":d],w=up(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),m=d==="floating"?{...o.floating,x:i,y:r}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),v=await(s.isElement==null?void 0:s.isElement(y))&&await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1},x=up(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m,offsetParent:y,strategy:l}):m);return{top:(w.top-x.top+p.top)/v.y,bottom:(x.bottom-w.bottom+p.bottom)/v.y,left:(w.left-x.left+p.left)/v.x,right:(x.right-w.right+p.right)/v.x}}const ed=Math.min,Lo=Math.max;function pv(t,e,n){return Lo(t,ed(e,n))}const uk=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a}=e,{element:l,padding:u=0}=ps(t,e)||{};if(l==null)return{};const c=MT(u),d={x:n,y:i},h=ka(r),f=b1(h),p=await o.getDimensions(l),g=h==="y",w=g?"top":"left",m=g?"bottom":"right",y=g?"clientHeight":"clientWidth",v=s.reference[f]+s.reference[h]-d[h]-s.floating[f],x=d[h]-s.reference[h],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let O=k?k[y]:0;O&&await(o.isElement==null?void 0:o.isElement(k))||(O=a.floating[y]||s.floating[f]);const T=v/2-x/2,A=O/2-p[f]/2-1,N=ed(c[w],A),_=ed(c[m],A),M=N,H=O-p[f]-_,F=O/2-p[f]/2+T,j=pv(M,F,H),X=lu(r)!=null&&F!=j&&s.reference[f]/2-(F<M?N:_)-p[f]/2<0?F<M?M-F:H-F:0;return{[h]:d[h]-X,data:{[h]:j,centerOffset:F-j+X}}}}),DT=["top","right","bottom","left"];DT.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Iz={left:"right",right:"left",bottom:"top",top:"bottom"};function cp(t){return t.replace(/left|right|bottom|top/g,e=>Iz[e])}function Bz(t,e,n){n===void 0&&(n=!1);const i=lu(t),r=ka(t),s=b1(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=cp(o)),{main:o,cross:cp(o)}}const zz={start:"end",end:"start"};function Jg(t){return t.replace(/start|end/g,e=>zz[e])}const jz=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...g}=ps(t,e),w=ts(i),m=ts(o)===o,y=await(a.isRTL==null?void 0:a.isRTL(l.floating)),v=d||(m||!p?[cp(o)]:function(M){const H=cp(M);return[Jg(M),H,Jg(H)]}(o));d||f==="none"||v.push(...function(M,H,F,j){const X=lu(M);let J=function(G,$,I){const Y=["left","right"],ae=["right","left"],ve=["top","bottom"],Se=["bottom","top"];switch(G){case"top":case"bottom":return I?$?ae:Y:$?Y:ae;case"left":case"right":return $?ve:Se;default:return[]}}(ts(M),F==="start",j);return X&&(J=J.map(G=>G+"-"+X),H&&(J=J.concat(J.map(Jg)))),J}(o,p,f,y));const x=[o,...v],k=await Qc(e,g),O=[];let T=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&O.push(k[w]),c){const{main:M,cross:H}=Bz(i,s,y);O.push(k[M],k[H])}if(T=[...T,{placement:i,overflows:O}],!O.every(M=>M<=0)){var A,N;const M=(((A=r.flip)==null?void 0:A.index)||0)+1,H=x[M];if(H)return{data:{index:M,overflows:T},reset:{placement:H}};let F=(N=T.filter(j=>j.overflows[0]<=0).sort((j,X)=>j.overflows[1]-X.overflows[1])[0])==null?void 0:N.placement;if(!F)switch(h){case"bestFit":{var _;const j=(_=T.map(X=>[X.placement,X.overflows.filter(J=>J>0).reduce((J,G)=>J+G,0)]).sort((X,J)=>X[1]-J[1])[0])==null?void 0:_[0];j&&(F=j);break}case"initialPlacement":F=o}if(i!==F)return{reset:{placement:F}}}return{}}}};function ck(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function dk(t){return DT.some(e=>t[e]>=0)}const Fz=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=ps(t,e);switch(i){case"referenceHidden":{const s=ck(await Qc(e,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:dk(s)}}}case"escaped":{const s=ck(await Qc(e,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:dk(s)}}}default:return{}}}}},Uz=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,r=await async function(s,o){const{placement:a,platform:l,elements:u}=s,c=await(l.isRTL==null?void 0:l.isRTL(u.floating)),d=ts(a),h=lu(a),f=ka(a)==="x",p=["left","top"].includes(d)?-1:1,g=c&&f?-1:1,w=ps(o,s);let{mainAxis:m,crossAxis:y,alignmentAxis:v}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...w};return h&&typeof v=="number"&&(y=h==="end"?-1*v:v),f?{x:y*g,y:m*p}:{x:m*p,y:y*g}}(e,t);return{x:n+r.x,y:i+r.y,data:r}}}};function _T(t){return t==="x"?"y":"x"}const Vz=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:m,y}=w;return{x:m,y}}},...l}=ps(t,e),u={x:n,y:i},c=await Qc(e,l),d=ka(ts(r)),h=_T(d);let f=u[d],p=u[h];if(s){const w=d==="y"?"bottom":"right";f=pv(f+c[d==="y"?"top":"left"],f,f-c[w])}if(o){const w=h==="y"?"bottom":"right";p=pv(p+c[h==="y"?"top":"left"],p,p-c[w])}const g=a.fn({...e,[d]:f,[h]:p});return{...g,data:{x:g.x-n,y:g.y-i}}}}},Hz=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=ps(t,e),c={x:n,y:i},d=ka(r),h=_T(d);let f=c[d],p=c[h];const g=ps(a,e),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const v=d==="y"?"height":"width",x=s.reference[d]-s.floating[v]+w.mainAxis,k=s.reference[d]+s.reference[v]-w.mainAxis;f<x?f=x:f>k&&(f=k)}if(u){var m,y;const v=d==="y"?"width":"height",x=["top","left"].includes(ts(r)),k=s.reference[h]-s.floating[v]+(x&&((m=o.offset)==null?void 0:m[h])||0)+(x?0:w.crossAxis),O=s.reference[h]+s.reference[v]+(x?0:((y=o.offset)==null?void 0:y[h])||0)-(x?w.crossAxis:0);p<k?p=k:p>O&&(p=O)}return{[d]:f,[h]:p}}}},Wz=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:i,platform:r,elements:s}=e,{apply:o=()=>{},...a}=ps(t,e),l=await Qc(e,a),u=ts(n),c=lu(n),d=ka(n)==="x",{width:h,height:f}=i.floating;let p,g;u==="top"||u==="bottom"?(p=u,g=c===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(g=u,p=c==="end"?"top":"bottom");const w=f-l[p],m=h-l[g],y=!e.middlewareData.shift;let v=w,x=m;if(d){const O=h-l.left-l.right;x=c||y?ed(m,O):O}else{const O=f-l.top-l.bottom;v=c||y?ed(w,O):O}if(y&&!c){const O=Lo(l.left,0),T=Lo(l.right,0),A=Lo(l.top,0),N=Lo(l.bottom,0);d?x=h-2*(O!==0||T!==0?O+T:Lo(l.left,l.right)):v=f-2*(A!==0||N!==0?A+N:Lo(l.top,l.bottom))}await o({...e,availableWidth:x,availableHeight:v});const k=await r.getDimensions(s.floating);return h!==k.width||f!==k.height?{reset:{rects:!0}}:{}}}};function ri(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Nr(t){return ri(t).getComputedStyle(t)}function LT(t){return t instanceof ri(t).Node}function wo(t){return LT(t)?(t.nodeName||"").toLowerCase():"#document"}function qi(t){return t instanceof HTMLElement||t instanceof ri(t).HTMLElement}function hk(t){return typeof ShadowRoot<"u"&&(t instanceof ri(t).ShadowRoot||t instanceof ShadowRoot)}function td(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Nr(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function Gz(t){return["table","td","th"].includes(wo(t))}function mv(t){const e=x1(),n=Nr(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function x1(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function wm(t){return["html","body","#document"].includes(wo(t))}const gv=Math.min,wl=Math.max,dp=Math.round,ah=Math.floor,bo=t=>({x:t,y:t});function $T(t){const e=Nr(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=qi(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=dp(n)!==s||dp(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function ns(t){return t instanceof Element||t instanceof ri(t).Element}function S1(t){return ns(t)?t:t.contextElement}function bl(t){const e=S1(t);if(!qi(e))return bo(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=$T(e);let o=(s?dp(n.width):n.width)/i,a=(s?dp(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const Kz=bo(0);function IT(t){const e=ri(t);return x1()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Kz}function ga(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=S1(t);let o=bo(1);e&&(i?ns(i)&&(o=bl(i)):o=bl(t));const a=function(h,f,p){return f===void 0&&(f=!1),!(!p||f&&p!==ri(h))&&f}(s,n,i)?IT(s):bo(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=ri(s),f=i&&ns(i)?ri(i):i;let p=h.frameElement;for(;p&&i&&f!==h;){const g=bl(p),w=p.getBoundingClientRect(),m=getComputedStyle(p),y=w.left+(p.clientLeft+parseFloat(m.paddingLeft))*g.x,v=w.top+(p.clientTop+parseFloat(m.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=y,u+=v,p=ri(p).frameElement}}return up({width:c,height:d,x:l,y:u})}function bm(t){return ns(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function is(t){var e;return(e=(LT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BT(t){return ga(is(t)).left+bm(t).scrollLeft}function Kl(t){if(wo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||hk(t)&&t.host||is(t);return hk(e)?e.host:e}function zT(t){const e=Kl(t);return wm(e)?t.ownerDocument?t.ownerDocument.body:t.body:qi(e)&&td(e)?e:zT(e)}function hp(t,e){var n;e===void 0&&(e=[]);const i=zT(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=ri(i);return r?e.concat(s,s.visualViewport||[],td(i)?i:[]):e.concat(i,hp(i))}function fk(t,e,n){let i;if(e==="viewport")i=function(r,s){const o=ri(r),a=is(r),l=o.visualViewport;let u=a.clientWidth,c=a.clientHeight,d=0,h=0;if(l){u=l.width,c=l.height;const f=x1();(!f||f&&s==="fixed")&&(d=l.offsetLeft,h=l.offsetTop)}return{width:u,height:c,x:d,y:h}}(t,n);else if(e==="document")i=function(r){const s=is(r),o=bm(r),a=r.ownerDocument.body,l=wl(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),u=wl(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let c=-o.scrollLeft+BT(r);const d=-o.scrollTop;return Nr(a).direction==="rtl"&&(c+=wl(s.clientWidth,a.clientWidth)-l),{width:l,height:u,x:c,y:d}}(is(t));else if(ns(e))i=function(r,s){const o=ga(r,!0,s==="fixed"),a=o.top+r.clientTop,l=o.left+r.clientLeft,u=qi(r)?bl(r):bo(1);return{width:r.clientWidth*u.x,height:r.clientHeight*u.y,x:l*u.x,y:a*u.y}}(e,n);else{const r=IT(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return up(i)}function jT(t,e){const n=Kl(t);return!(n===e||!ns(n)||wm(n))&&(Nr(n).position==="fixed"||jT(n,e))}function Xz(t,e,n){const i=qi(e),r=is(e),s=n==="fixed",o=ga(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=bo(0);if(i||!i&&!s)if((wo(e)!=="body"||td(r))&&(a=bm(e)),qi(e)){const u=ga(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else r&&(l.x=BT(r));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function pk(t,e){return qi(t)&&Nr(t).position!=="fixed"?e?e(t):t.offsetParent:null}function mk(t,e){const n=ri(t);if(!qi(t))return n;let i=pk(t,e);for(;i&&Gz(i)&&Nr(i).position==="static";)i=pk(i,e);return i&&(wo(i)==="html"||wo(i)==="body"&&Nr(i).position==="static"&&!mv(i))?n:i||function(r){let s=Kl(r);for(;qi(s)&&!wm(s);){if(mv(s))return s;s=Kl(s)}return null}(t)||n}const Zz={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=qi(n),s=is(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=bo(1);const l=bo(0);if((r||!r&&i!=="fixed")&&((wo(n)!=="body"||td(s))&&(o=bm(n)),qi(n))){const u=ga(n);a=bl(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},getDocumentElement:is,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[...n==="clippingAncestors"?function(l,u){const c=u.get(l);if(c)return c;let d=hp(l).filter(g=>ns(g)&&wo(g)!=="body"),h=null;const f=Nr(l).position==="fixed";let p=f?Kl(l):l;for(;ns(p)&&!wm(p);){const g=Nr(p),w=mv(p);w||g.position!=="fixed"||(h=null),(f?!w&&!h:!w&&g.position==="static"&&h&&["absolute","fixed"].includes(h.position)||td(p)&&!w&&jT(l,p))?d=d.filter(m=>m!==p):h=g,p=Kl(p)}return u.set(l,d),d}(e,this._c):[].concat(n),i],o=s[0],a=s.reduce((l,u)=>{const c=fk(e,u,r);return l.top=wl(c.top,l.top),l.right=gv(c.right,l.right),l.bottom=gv(c.bottom,l.bottom),l.left=wl(c.left,l.left),l},fk(e,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:mk,getElementRects:async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||mk,s=this.getDimensions;return{reference:Xz(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return $T(t)},getScale:bl,isElement:ns,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function Jz(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=S1(t),c=r||s?[...u?hp(u):[],...hp(e)]:[];c.forEach(w=>{r&&w.addEventListener("scroll",n,{passive:!0}),s&&w.addEventListener("resize",n)});const d=u&&a?function(w,m){let y,v=null;const x=is(w);function k(){clearTimeout(y),v&&v.disconnect(),v=null}return function O(T,A){T===void 0&&(T=!1),A===void 0&&(A=1),k();const{left:N,top:_,width:M,height:H}=w.getBoundingClientRect();if(T||m(),!M||!H)return;const F={rootMargin:-ah(_)+"px "+-ah(x.clientWidth-(N+M))+"px "+-ah(x.clientHeight-(_+H))+"px "+-ah(N)+"px",threshold:wl(0,gv(1,A))||1};let j=!0;function X(J){const G=J[0].intersectionRatio;if(G!==A){if(!j)return O();G?O(!1,G):y=setTimeout(()=>{O(!1,1e-7)},100)}j=!1}try{v=new IntersectionObserver(X,{...F,root:x.ownerDocument})}catch{v=new IntersectionObserver(X,F)}v.observe(w)}(!0),k}(u,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(w=>{let[m]=w;m&&m.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let g=l?ga(t):null;return l&&function w(){const m=ga(t);!g||m.x===g.x&&m.y===g.y&&m.width===g.width&&m.height===g.height||n(),g=m,h=requestAnimationFrame(w)}(),n(),()=>{c.forEach(w=>{r&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const Yz=(t,e,n)=>{const i=new Map,r={platform:Zz,...n},s={...r.platform,_c:i};return $z(t,e,{...r,platform:s})},qz=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?uk({element:i.current,padding:r}).fn(n):{}:i?uk({element:i,padding:r}).fn(n):{}}}};var Qh=typeof document<"u"?S.useLayoutEffect:S.useEffect;function fp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!fp(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!fp(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function FT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function gk(t,e){const n=FT(t);return Math.round(e*n)/n}function yk(t){const e=S.useRef(t);return Qh(()=>{e.current=t}),e}function Qz(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=S.useState(i);fp(h,i)||f(i);const[p,g]=S.useState(null),[w,m]=S.useState(null),y=S.useCallback(J=>{J!=O.current&&(O.current=J,g(J))},[g]),v=S.useCallback(J=>{J!==T.current&&(T.current=J,m(J))},[m]),x=s||p,k=o||w,O=S.useRef(null),T=S.useRef(null),A=S.useRef(c),N=yk(l),_=yk(r),M=S.useCallback(()=>{if(!O.current||!T.current)return;const J={placement:e,strategy:n,middleware:h};_.current&&(J.platform=_.current),Yz(O.current,T.current,J).then(G=>{const $={...G,isPositioned:!0};H.current&&!fp(A.current,$)&&(A.current=$,ba.flushSync(()=>{d($)}))})},[h,e,n,_]);Qh(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d(J=>({...J,isPositioned:!1})))},[u]);const H=S.useRef(!1);Qh(()=>(H.current=!0,()=>{H.current=!1}),[]),Qh(()=>{if(x&&(O.current=x),k&&(T.current=k),x&&k){if(N.current)return N.current(x,k,M);M()}},[x,k,M,N]);const F=S.useMemo(()=>({reference:O,floating:T,setReference:y,setFloating:v}),[y,v]),j=S.useMemo(()=>({reference:x,floating:k}),[x,k]),X=S.useMemo(()=>{const J={position:n,left:0,top:0};if(!j.floating)return J;const G=gk(j.floating,c.x),$=gk(j.floating,c.y);return a?{...J,transform:"translate("+G+"px, "+$+"px)",...FT(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:$}},[n,a,j.floating,c.x,c.y]);return S.useMemo(()=>({...c,update:M,refs:F,elements:j,floatingStyles:X}),[c,M,F,j,X])}function UT(t){const[e,n]=S.useState(void 0);return fs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}const VT="Popper",[HT,WT]=vm(VT),[ej,GT]=HT(VT),tj=t=>{const{__scopePopper:e,children:n}=t,[i,r]=S.useState(null);return S.createElement(ej,{scope:e,anchor:i,onAnchorChange:r},n)},nj="PopperAnchor",ij=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=GT(nj,n),o=S.useRef(null),a=$t(e,o);return S.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:S.createElement(on.div,We({},r,{ref:a}))}),KT="PopperContent",[rj,lW]=HT(KT),sj=S.forwardRef((t,e)=>{var n,i,r,s,o,a,l,u;const{__scopePopper:c,side:d="bottom",sideOffset:h=0,align:f="center",alignOffset:p=0,arrowPadding:g=0,collisionBoundary:w=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:v=!1,avoidCollisions:x=!0,onPlaced:k,...O}=t,T=GT(KT,c),[A,N]=S.useState(null),_=$t(e,Z=>N(Z)),[M,H]=S.useState(null),F=UT(M),j=(n=F==null?void 0:F.width)!==null&&n!==void 0?n:0,X=(i=F==null?void 0:F.height)!==null&&i!==void 0?i:0,J=d+(f!=="center"?"-"+f:""),G=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},$=Array.isArray(w)?w:[w],I=$.length>0,Y={padding:G,boundary:$.filter(oj),altBoundary:I},{refs:ae,floatingStyles:ve,placement:Se,isPositioned:U,middlewareData:B}=Qz({strategy:"fixed",placement:J,whileElementsMounted:Jz,elements:{reference:T.anchor},middleware:[Uz({mainAxis:h+X,alignmentAxis:p}),x&&Vz({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?Hz():void 0,...Y}),x&&jz({...Y}),Wz({...Y,apply:({elements:Z,rects:Q,availableWidth:Te,availableHeight:de})=>{const{width:Re,height:Be}=Q.reference,me=Z.floating.style;me.setProperty("--radix-popper-available-width",`${Te}px`),me.setProperty("--radix-popper-available-height",`${de}px`),me.setProperty("--radix-popper-anchor-width",`${Re}px`),me.setProperty("--radix-popper-anchor-height",`${Be}px`)}}),M&&qz({element:M,padding:g}),aj({arrowWidth:j,arrowHeight:X}),v&&Fz({strategy:"referenceHidden"})]}),[W,b]=XT(Se),C=hs(k);fs(()=>{U&&(C==null||C())},[U,C]);const D=(r=B.arrow)===null||r===void 0?void 0:r.x,R=(s=B.arrow)===null||s===void 0?void 0:s.y,z=((o=B.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[K,V]=S.useState();return fs(()=>{A&&V(window.getComputedStyle(A).zIndex)},[A]),S.createElement("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...ve,transform:U?ve.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(a=B.transformOrigin)===null||a===void 0?void 0:a.x,(l=B.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},S.createElement(rj,{scope:c,placedSide:W,onArrowChange:H,arrowX:D,arrowY:R,shouldHideArrow:z},S.createElement(on.div,We({"data-side":W,"data-align":b},O,{ref:_,style:{...O.style,animation:U?void 0:"none",opacity:(u=B.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function oj(t){return t!==null}const aj=t=>({name:"transformOrigin",options:t,fn(e){var n,i,r,s,o;const{placement:a,rects:l,middlewareData:u}=e,d=((n=u.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=d?0:t.arrowWidth,f=d?0:t.arrowHeight,[p,g]=XT(a),w={start:"0%",center:"50%",end:"100%"}[g],m=((i=(r=u.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+h/2,y=((s=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+f/2;let v="",x="";return p==="bottom"?(v=d?w:`${m}px`,x=`${-f}px`):p==="top"?(v=d?w:`${m}px`,x=`${l.floating.height+f}px`):p==="right"?(v=`${-f}px`,x=d?w:`${y}px`):p==="left"&&(v=`${l.floating.width+f}px`,x=d?w:`${y}px`),{data:{x:v,y:x}}}});function XT(t){const[e,n="center"]=t.split("-");return[e,n]}const lj=tj,uj=ij,cj=sj,dj=S.forwardRef((t,e)=>{var n;const{container:i=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...r}=t;return i?QA.createPortal(S.createElement(on.div,We({},r,{ref:e})),i):null});function yv({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=hj({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:i,a=hs(n),l=S.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else r(u)},[s,t,r,a]);return[o,l]}function hj({defaultProp:t,onChange:e}){const n=S.useState(t),[i]=n,r=S.useRef(i),s=hs(e);return S.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}function ZT(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const fj=S.forwardRef((t,e)=>S.createElement(on.span,We({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var pj=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ma=new WeakMap,lh=new WeakMap,uh={},Yg=0,JT=function(t){return t&&(t.host||JT(t.parentNode))},mj=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=JT(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},gj=function(t,e,n,i){var r=mj(e,Array.isArray(t)?t:[t]);uh[n]||(uh[n]=new WeakMap);var s=uh[n],o=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else{var f=h.getAttribute(i),p=f!==null&&f!=="false",g=(Ma.get(h)||0)+1,w=(s.get(h)||0)+1;Ma.set(h,g),s.set(h,w),o.push(h),g===1&&p&&lh.set(h,!0),w===1&&h.setAttribute(n,"true"),p||h.setAttribute(i,"true")}})};return c(e),a.clear(),Yg++,function(){o.forEach(function(d){var h=Ma.get(d)-1,f=s.get(d)-1;Ma.set(d,h),s.set(d,f),h||(lh.has(d)||d.removeAttribute(i),lh.delete(d)),f||d.removeAttribute(n)}),Yg--,Yg||(Ma=new WeakMap,Ma=new WeakMap,lh=new WeakMap,uh={})}},yj=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=e||pj(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),gj(i,r,n,"aria-hidden")):function(){return null}},vr=function(){return vr=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vr.apply(this,arguments)};function YT(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function vj(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var ef="right-scroll-bar-position",tf="width-before-scroll-bar",wj="with-scroll-bars-hidden",bj="--removed-body-scroll-bar-size";function xj(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Sj(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}function kj(t,e){return Sj(e||null,function(n){return t.forEach(function(i){return xj(i,n)})})}function Ej(t){return t}function Cj(t,e){e===void 0&&(e=Ej);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return r}function Aj(t){t===void 0&&(t={});var e=Cj(null);return e.options=vr({async:!0,ssr:!1},t),e}var qT=function(t){var e=t.sideCar,n=YT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return S.createElement(i,vr({},n))};qT.isSideCarExport=!0;function Pj(t,e){return t.useMedium(e),qT}var QT=Aj(),qg=function(){},xm=S.forwardRef(function(t,e){var n=S.useRef(null),i=S.useState({onScrollCapture:qg,onWheelCapture:qg,onTouchMoveCapture:qg}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,g=t.allowPinchZoom,w=t.as,m=w===void 0?"div":w,y=YT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),v=h,x=kj([n,e]),k=vr(vr({},y),r);return S.createElement(S.Fragment,null,c&&S.createElement(v,{sideCar:QT,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n}),o?S.cloneElement(S.Children.only(a),vr(vr({},k),{ref:x})):S.createElement(m,vr({},k,{className:l,ref:x}),a))});xm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xm.classNames={fullWidth:tf,zeroRight:ef};var vk,Oj=function(){if(vk)return vk;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Tj(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Oj();return e&&t.setAttribute("nonce",e),t}function Rj(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Nj(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Mj=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Tj())&&(Rj(e,n),Nj(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Dj=function(){var t=Mj();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},eR=function(){var t=Dj(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},_j={left:0,top:0,right:0,gap:0},Qg=function(t){return parseInt(t||"",10)||0},Lj=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Qg(n),Qg(i),Qg(r)]},$j=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return _j;var e=Lj(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},Ij=eR(),Bj=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(wj,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ef,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(tf,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(ef," .").concat(ef,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(tf," .").concat(tf,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body {
    `).concat(bj,": ").concat(a,`px;
  }
`)},zj=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i,s=S.useMemo(function(){return $j(r)},[r]);return S.createElement(Ij,{styles:Bj(s,!e,r,n?"":"!important")})},vv=!1;if(typeof window<"u")try{var ch=Object.defineProperty({},"passive",{get:function(){return vv=!0,!0}});window.addEventListener("test",ch,ch),window.removeEventListener("test",ch,ch)}catch{vv=!1}var Da=vv?{passive:!1}:!1,jj=function(t){return t.tagName==="TEXTAREA"},tR=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!jj(t)&&n[e]==="visible")},Fj=function(t){return tR(t,"overflowY")},Uj=function(t){return tR(t,"overflowX")},wk=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=nR(t,n);if(i){var r=iR(t,n),s=r[1],o=r[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Vj=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},Hj=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},nR=function(t,e){return t==="v"?Fj(e):Uj(e)},iR=function(t,e){return t==="v"?Vj(e):Hj(e)},Wj=function(t,e){return t==="h"&&e==="rtl"?-1:1},Gj=function(t,e,n,i,r){var s=Wj(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=iR(t,a),p=f[0],g=f[1],w=f[2],m=g-w-s*p;(p||m)&&nR(t,a)&&(d+=m,h+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(r&&d===0||!r&&o>d)||!c&&(r&&h===0||!r&&-o>h))&&(u=!0),u},dh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},bk=function(t){return[t.deltaX,t.deltaY]},xk=function(t){return t&&"current"in t?t.current:t},Kj=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Xj=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Zj=0,_a=[];function Jj(t){var e=S.useRef([]),n=S.useRef([0,0]),i=S.useRef(),r=S.useState(Zj++)[0],s=S.useState(function(){return eR()})[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var g=vj([t.lockRef.current],(t.shards||[]).map(xk),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(g,w){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var m=dh(g),y=n.current,v="deltaX"in g?g.deltaX:y[0]-m[0],x="deltaY"in g?g.deltaY:y[1]-m[1],k,O=g.target,T=Math.abs(v)>Math.abs(x)?"h":"v";if("touches"in g&&T==="h"&&O.type==="range")return!1;var A=wk(T,O);if(!A)return!0;if(A?k=T:(k=T==="v"?"h":"v",A=wk(T,O)),!A)return!1;if(!i.current&&"changedTouches"in g&&(v||x)&&(i.current=k),!k)return!0;var N=i.current||k;return Gj(N,w,g,N==="h"?v:x,!0)},[]),l=S.useCallback(function(g){var w=g;if(!(!_a.length||_a[_a.length-1]!==s)){var m="deltaY"in w?bk(w):dh(w),y=e.current.filter(function(k){return k.name===w.type&&k.target===w.target&&Kj(k.delta,m)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var v=(o.current.shards||[]).map(xk).filter(Boolean).filter(function(k){return k.contains(w.target)}),x=v.length>0?a(w,v[0]):!o.current.noIsolation;x&&w.cancelable&&w.preventDefault()}}},[]),u=S.useCallback(function(g,w,m,y){var v={name:g,delta:w,target:m,should:y};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(x){return x!==v})},1)},[]),c=S.useCallback(function(g){n.current=dh(g),i.current=void 0},[]),d=S.useCallback(function(g){u(g.type,bk(g),g.target,a(g,t.lockRef.current))},[]),h=S.useCallback(function(g){u(g.type,dh(g),g.target,a(g,t.lockRef.current))},[]);S.useEffect(function(){return _a.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Da),document.addEventListener("touchmove",l,Da),document.addEventListener("touchstart",c,Da),function(){_a=_a.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Da),document.removeEventListener("touchmove",l,Da),document.removeEventListener("touchstart",c,Da)}},[]);var f=t.removeScrollBar,p=t.inert;return S.createElement(S.Fragment,null,p?S.createElement(s,{styles:Xj(r)}):null,f?S.createElement(zj,{gapMode:"margin"}):null)}const Yj=Pj(QT,Jj);var rR=S.forwardRef(function(t,e){return S.createElement(xm,vr({},t,{ref:e,sideCar:Yj}))});rR.classNames=xm.classNames;const qj=rR,Qj=[" ","Enter","ArrowUp","ArrowDown"],e9=[" ","Enter"],Sm="Select",[km,k1,t9]=PT(Sm),[uu,uW]=vm(Sm,[t9,WT]),E1=WT(),[n9,Ea]=uu(Sm),[i9,r9]=uu(Sm),s9=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f}=t,p=E1(e),[g,w]=S.useState(null),[m,y]=S.useState(null),[v,x]=S.useState(!1),k=OT(u),[O=!1,T]=yv({prop:i,defaultProp:r,onChange:s}),[A,N]=yv({prop:o,defaultProp:a,onChange:l}),_=S.useRef(null),M=g?!!g.closest("form"):!0,[H,F]=S.useState(new Set),j=Array.from(H).map(X=>X.props.value).join(";");return S.createElement(lj,p,S.createElement(n9,{required:f,scope:e,trigger:g,onTriggerChange:w,valueNode:m,onValueNodeChange:y,valueNodeHasChildren:v,onValueNodeHasChildrenChange:x,contentId:NT(),value:A,onValueChange:N,open:O,onOpenChange:T,dir:k,triggerPointerDownPosRef:_,disabled:h},S.createElement(km.Provider,{scope:e},S.createElement(i9,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(X=>{F(J=>new Set(J).add(X))},[]),onNativeOptionRemove:S.useCallback(X=>{F(J=>{const G=new Set(J);return G.delete(X),G})},[])},n)),M?S.createElement(oR,{key:j,"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:A,onChange:X=>N(X.target.value),disabled:h},A===void 0?S.createElement("option",{value:""}):null,Array.from(H)):null))},o9="SelectTrigger",a9=S.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=E1(n),o=Ea(o9,n),a=o.disabled||i,l=$t(e,o.onTriggerChange),u=k1(n),[c,d,h]=aR(p=>{const g=u().filter(y=>!y.disabled),w=g.find(y=>y.value===o.value),m=lR(g,p,w);m!==void 0&&o.onValueChange(m.value)}),f=()=>{a||(o.onOpenChange(!0),h())};return S.createElement(uj,We({asChild:!0},s),S.createElement(on.button,We({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},r,{ref:l,onClick:Nt(r.onClick,p=>{p.currentTarget.focus()}),onPointerDown:Nt(r.onPointerDown,p=>{const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(f(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:Nt(r.onKeyDown,p=>{const g=c.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(g&&p.key===" ")&&Qj.includes(p.key)&&(f(),p.preventDefault())})})))}),l9="SelectValue",u9=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o,...a}=t,l=Ea(l9,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=$t(e,l.onValueNodeChange);return fs(()=>{u(c)},[u,c]),S.createElement(on.span,We({},a,{ref:d,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:s)}),c9=S.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return S.createElement(on.span,We({"aria-hidden":!0},r,{ref:e}),i||"▼")}),d9=t=>S.createElement(dj,We({asChild:!0},t)),Xl="SelectContent",h9=S.forwardRef((t,e)=>{const n=Ea(Xl,t.__scopeSelect),[i,r]=S.useState();if(fs(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?ba.createPortal(S.createElement(sR,{scope:t.__scopeSelect},S.createElement(km.Slot,{scope:t.__scopeSelect},S.createElement("div",null,t.children))),s):null}return S.createElement(f9,We({},t,{ref:e}))}),Lr=10,[sR,Em]=uu(Xl),f9=S.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:w,...m}=t,y=Ea(Xl,n),[v,x]=S.useState(null),[k,O]=S.useState(null),T=$t(e,b=>x(b)),[A,N]=S.useState(null),[_,M]=S.useState(null),H=k1(n),[F,j]=S.useState(!1),X=S.useRef(!1);S.useEffect(()=>{if(v)return yj(v)},[v]),Az();const J=S.useCallback(b=>{const[C,...D]=H().map(K=>K.ref.current),[R]=D.slice(-1),z=document.activeElement;for(const K of b)if(K===z||(K==null||K.scrollIntoView({block:"nearest"}),K===C&&k&&(k.scrollTop=0),K===R&&k&&(k.scrollTop=k.scrollHeight),K==null||K.focus(),document.activeElement!==z))return},[H,k]),G=S.useCallback(()=>J([A,v]),[J,A,v]);S.useEffect(()=>{F&&G()},[F,G]);const{onOpenChange:$,triggerPointerDownPosRef:I}=y;S.useEffect(()=>{if(v){let b={x:0,y:0};const C=R=>{var z,K,V,Z;b={x:Math.abs(Math.round(R.pageX)-((z=(K=I.current)===null||K===void 0?void 0:K.x)!==null&&z!==void 0?z:0)),y:Math.abs(Math.round(R.pageY)-((V=(Z=I.current)===null||Z===void 0?void 0:Z.y)!==null&&V!==void 0?V:0))}},D=R=>{b.x<=10&&b.y<=10?R.preventDefault():v.contains(R.target)||$(!1),document.removeEventListener("pointermove",C),I.current=null};return I.current!==null&&(document.addEventListener("pointermove",C),document.addEventListener("pointerup",D,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",C),document.removeEventListener("pointerup",D,{capture:!0})}}},[v,$,I]),S.useEffect(()=>{const b=()=>$(!1);return window.addEventListener("blur",b),window.addEventListener("resize",b),()=>{window.removeEventListener("blur",b),window.removeEventListener("resize",b)}},[$]);const[Y,ae]=aR(b=>{const C=H().filter(z=>!z.disabled),D=C.find(z=>z.ref.current===document.activeElement),R=lR(C,b,D);R&&setTimeout(()=>R.ref.current.focus())}),ve=S.useCallback((b,C,D)=>{const R=!X.current&&!D;(y.value!==void 0&&y.value===C||R)&&(N(b),R&&(X.current=!0))},[y.value]),Se=S.useCallback(()=>v==null?void 0:v.focus(),[v]),U=S.useCallback((b,C,D)=>{const R=!X.current&&!D;(y.value!==void 0&&y.value===C||R)&&M(b)},[y.value]),B=i==="popper"?Sk:p9,W=B===Sk?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:w}:{};return S.createElement(sR,{scope:n,content:v,viewport:k,onViewportChange:O,itemRefCallback:ve,selectedItem:A,onItemLeave:Se,itemTextRefCallback:U,focusSelectedItem:G,selectedItemText:_,position:i,isPositioned:F,searchRef:Y},S.createElement(qj,{as:qc,allowPinchZoom:!0},S.createElement(Pz,{asChild:!0,trapped:y.open,onMountAutoFocus:b=>{b.preventDefault()},onUnmountAutoFocus:Nt(r,b=>{var C;(C=y.trigger)===null||C===void 0||C.focus({preventScroll:!0}),b.preventDefault()})},S.createElement(kz,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:b=>b.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},S.createElement(B,We({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:b=>b.preventDefault()},m,W,{onPlaced:()=>j(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:Nt(m.onKeyDown,b=>{const C=b.ctrlKey||b.altKey||b.metaKey;if(b.key==="Tab"&&b.preventDefault(),!C&&b.key.length===1&&ae(b.key),["ArrowUp","ArrowDown","Home","End"].includes(b.key)){let R=H().filter(z=>!z.disabled).map(z=>z.ref.current);if(["ArrowUp","End"].includes(b.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes(b.key)){const z=b.target,K=R.indexOf(z);R=R.slice(K+1)}setTimeout(()=>J(R)),b.preventDefault()}})}))))))}),p9=S.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Ea(Xl,n),o=Em(Xl,n),[a,l]=S.useState(null),[u,c]=S.useState(null),d=$t(e,T=>c(T)),h=k1(n),f=S.useRef(!1),p=S.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:m,focusSelectedItem:y}=o,v=S.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&g&&w&&m){const T=s.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),_=m.getBoundingClientRect();if(s.dir!=="rtl"){const z=_.left-A.left,K=N.left-z,V=T.left-K,Z=T.width+V,Q=Math.max(Z,A.width),Te=window.innerWidth-Lr,de=lp(K,[Lr,Te-Q]);a.style.minWidth=Z+"px",a.style.left=de+"px"}else{const z=A.right-_.right,K=window.innerWidth-N.right-z,V=window.innerWidth-T.right-K,Z=T.width+V,Q=Math.max(Z,A.width),Te=window.innerWidth-Lr,de=lp(K,[Lr,Te-Q]);a.style.minWidth=Z+"px",a.style.right=de+"px"}const M=h(),H=window.innerHeight-Lr*2,F=g.scrollHeight,j=window.getComputedStyle(u),X=parseInt(j.borderTopWidth,10),J=parseInt(j.paddingTop,10),G=parseInt(j.borderBottomWidth,10),$=parseInt(j.paddingBottom,10),I=X+J+F+$+G,Y=Math.min(w.offsetHeight*5,I),ae=window.getComputedStyle(g),ve=parseInt(ae.paddingTop,10),Se=parseInt(ae.paddingBottom,10),U=T.top+T.height/2-Lr,B=H-U,W=w.offsetHeight/2,b=w.offsetTop+W,C=X+J+b,D=I-C;if(C<=U){const z=w===M[M.length-1].ref.current;a.style.bottom="0px";const K=u.clientHeight-g.offsetTop-g.offsetHeight,V=Math.max(B,W+(z?Se:0)+K+G),Z=C+V;a.style.height=Z+"px"}else{const z=w===M[0].ref.current;a.style.top="0px";const V=Math.max(U,X+g.offsetTop+(z?ve:0)+W)+D;a.style.height=V+"px",g.scrollTop=C-U+g.offsetTop}a.style.margin=`${Lr}px 0`,a.style.minHeight=Y+"px",a.style.maxHeight=H+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,g,w,m,s.dir,i]);fs(()=>v(),[v]);const[x,k]=S.useState();fs(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const O=S.useCallback(T=>{T&&p.current===!0&&(v(),y==null||y(),p.current=!1)},[v,y]);return S.createElement(m9,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:O},S.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x}},S.createElement(on.div,We({},r,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}}))))}),Sk=S.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Lr,...s}=t,o=E1(n);return S.createElement(cj,We({},o,s,{ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[m9,g9]=uu(Xl,{}),kk="SelectViewport",y9=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Em(kk,n),s=g9(kk,n),o=$t(e,r.onViewportChange),a=S.useRef(0);return S.createElement(S.Fragment,null,S.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),S.createElement(km.Slot,{scope:n},S.createElement(on.div,We({"data-radix-select-viewport":"",role:"presentation"},i,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...i.style},onScroll:Nt(i.onScroll,l=>{const u=l.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&c){const h=Math.abs(a.current-u.scrollTop);if(h>0){const f=window.innerHeight-Lr*2,p=parseFloat(c.style.minHeight),g=parseFloat(c.style.height),w=Math.max(p,g);if(w<f){const m=w+h,y=Math.min(f,m),v=m-y;c.style.height=y+"px",c.style.bottom==="0px"&&(u.scrollTop=v>0?v:0,c.style.justifyContent="flex-end")}}}a.current=u.scrollTop})}))))}),v9="SelectGroup";uu(v9);const wv="SelectItem",[w9,b9]=uu(wv),x9=S.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Ea(wv,n),l=Em(wv,n),u=a.value===i,[c,d]=S.useState(s??""),[h,f]=S.useState(!1),p=$t(e,m=>{var y;return(y=l.itemRefCallback)===null||y===void 0?void 0:y.call(l,m,i,r)}),g=NT(),w=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};return S.createElement(w9,{scope:n,value:i,disabled:r,textId:g,isSelected:u,onItemTextChange:S.useCallback(m=>{d(y=>{var v;return y||((v=m==null?void 0:m.textContent)!==null&&v!==void 0?v:"").trim()})},[])},S.createElement(km.ItemSlot,{scope:n,value:i,disabled:r,textValue:c},S.createElement(on.div,We({role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1},o,{ref:p,onFocus:Nt(o.onFocus,()=>f(!0)),onBlur:Nt(o.onBlur,()=>f(!1)),onPointerUp:Nt(o.onPointerUp,w),onPointerMove:Nt(o.onPointerMove,m=>{if(r){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}else m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Nt(o.onPointerLeave,m=>{if(m.currentTarget===document.activeElement){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}}),onKeyDown:Nt(o.onKeyDown,m=>{var y;((y=l.searchRef)===null||y===void 0?void 0:y.current)!==""&&m.key===" "||(e9.includes(m.key)&&w(),m.key===" "&&m.preventDefault())})}))))}),hh="SelectItemText",S9=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Ea(hh,n),a=Em(hh,n),l=b9(hh,n),u=r9(hh,n),[c,d]=S.useState(null),h=$t(e,m=>d(m),l.onItemTextChange,m=>{var y;return(y=a.itemTextRefCallback)===null||y===void 0?void 0:y.call(a,m,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=S.useMemo(()=>S.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},f),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return fs(()=>(g(p),()=>w(p)),[g,w,p]),S.createElement(S.Fragment,null,S.createElement(on.span,We({id:l.textId},s,{ref:h})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ba.createPortal(s.children,o.valueNode):null)}),oR=S.forwardRef((t,e)=>{const{value:n,...i}=t,r=S.useRef(null),s=$t(e,r),o=ZT(n);return S.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),S.createElement(fj,{asChild:!0},S.createElement("select",We({},i,{ref:s,defaultValue:n})))});oR.displayName="BubbleSelect";function aR(t){const e=hs(t),n=S.useRef(""),i=S.useRef(0),r=S.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(i.current),u!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=S.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function lR(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=k9(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function k9(t,e){return t.map((n,i)=>t[(e+i)%t.length])}const E9=s9,uR=a9,C9=u9,A9=c9,P9=d9,cR=h9,O9=y9,dR=x9,T9=S9,ey=E9,ty=C9,nf=S.forwardRef(({className:t,children:e,...n},i)=>P.jsxs(uR,{ref:i,className:Je("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,P.jsx(A9,{asChild:!0,children:P.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));nf.displayName=uR.displayName;const rf=S.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>P.jsx(P9,{children:P.jsx(cR,{ref:r,className:Je("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:P.jsx(O9,{className:"p-1",children:e})})}));rf.displayName=cR.displayName;const Hu=S.forwardRef(({className:t,children:e,...n},i)=>P.jsx(dR,{ref:i,className:Je("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:P.jsx(T9,{children:e})}));Hu.displayName=dR.displayName;const hR=["PageUp","PageDown"],fR=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pR={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},wd="Slider",[bv,R9,N9]=PT(wd),[mR,cW]=vm(wd,[N9]),[M9,Cm]=mR(wd),D9=S.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[i],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,...p}=t,[g,w]=S.useState(null),m=$t(e,j=>w(j)),y=S.useRef(new Set),v=S.useRef(0),x=o==="horizontal",k=g?!!g.closest("form"):!0,O=x?_9:L9,[T=[],A]=yv({prop:c,defaultProp:u,onChange:j=>{var X;(X=[...y.current][v.current])===null||X===void 0||X.focus(),d(j)}}),N=S.useRef(T);function _(j){const X=H9(T,j);F(j,X)}function M(j){F(j,v.current)}function H(){const j=N.current[v.current];T[v.current]!==j&&h(T)}function F(j,X,{commit:J}={commit:!1}){const G=X9(s),$=Z9(Math.round((j-i)/s)*s+i,G),I=lp($,[i,r]);A((Y=[])=>{const ae=U9(Y,I,X);if(K9(ae,l*s)){v.current=ae.indexOf(I);const ve=String(ae)!==String(Y);return ve&&J&&h(ae),ve?ae:Y}else return Y})}return S.createElement(M9,{scope:t.__scopeSlider,disabled:a,min:i,max:r,valueIndexToChangeRef:v,thumbs:y.current,values:T,orientation:o},S.createElement(bv.Provider,{scope:t.__scopeSlider},S.createElement(bv.Slot,{scope:t.__scopeSlider},S.createElement(O,We({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:m,onPointerDown:Nt(p.onPointerDown,()=>{a||(N.current=T)}),min:i,max:r,inverted:f,onSlideStart:a?void 0:_,onSlideMove:a?void 0:M,onSlideEnd:a?void 0:H,onHomeKeyDown:()=>!a&&F(i,0,{commit:!0}),onEndKeyDown:()=>!a&&F(r,T.length-1,{commit:!0}),onStepKeyDown:({event:j,direction:X})=>{if(!a){const $=hR.includes(j.key)||j.shiftKey&&fR.includes(j.key)?10:1,I=v.current,Y=T[I],ae=s*$*X;F(Y+ae,I,{commit:!0})}}})))),k&&T.map((j,X)=>S.createElement(F9,{key:X,name:n?n+(T.length>1?"[]":""):void 0,value:j})))}),[gR,yR]=mR(wd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),_9=S.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=S.useState(null),f=$t(e,v=>h(v)),p=S.useRef(),g=OT(r),w=g==="ltr",m=w&&!s||!w&&s;function y(v){const x=p.current||d.getBoundingClientRect(),k=[0,x.width],T=C1(k,m?[n,i]:[i,n]);return p.current=x,T(v-x.left)}return S.createElement(gR,{scope:t.__scopeSlider,startEdge:m?"left":"right",endEdge:m?"right":"left",direction:m?1:-1,size:"width"},S.createElement(vR,We({dir:g,"data-orientation":"horizontal"},c,{ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const x=y(v.clientX);o==null||o(x)},onSlideMove:v=>{const x=y(v.clientX);a==null||a(x)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:v=>{const k=pR[m?"from-left":"from-right"].includes(v.key);u==null||u({event:v,direction:k?-1:1})}})))}),L9=S.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=S.useRef(null),d=$t(e,c),h=S.useRef(),f=!r;function p(g){const w=h.current||c.current.getBoundingClientRect(),m=[0,w.height],v=C1(m,f?[i,n]:[n,i]);return h.current=w,v(g-w.top)}return S.createElement(gR,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1},S.createElement(vR,We({"data-orientation":"vertical"},u,{ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const w=p(g.clientY);s==null||s(w)},onSlideMove:g=>{const w=p(g.clientY);o==null||o(w)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:g=>{const m=pR[f?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:m?-1:1})}})))}),vR=S.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=Cm(wd,n);return S.createElement(on.span,We({},u,{ref:e,onKeyDown:Nt(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):hR.concat(fR).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Nt(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():i(d)}),onPointerMove:Nt(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:Nt(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})}))}),$9="SliderTrack",I9=S.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Cm($9,n);return S.createElement(on.span,We({"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation},i,{ref:e}))}),Ek="SliderRange",B9=S.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Cm(Ek,n),s=yR(Ek,n),o=S.useRef(null),a=$t(e,o),l=r.values.length,u=r.values.map(h=>wR(h,r.min,r.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return S.createElement(on.span,We({"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0},i,{ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}}))}),Ck="SliderThumb",z9=S.forwardRef((t,e)=>{const n=R9(t.__scopeSlider),[i,r]=S.useState(null),s=$t(e,a=>r(a)),o=S.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return S.createElement(j9,We({},t,{ref:s,index:o}))}),j9=S.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,...r}=t,s=Cm(Ck,n),o=yR(Ck,n),[a,l]=S.useState(null),u=$t(e,w=>l(w)),c=UT(a),d=s.values[i],h=d===void 0?0:wR(d,s.min,s.max),f=V9(i,s.values.length),p=c==null?void 0:c[o.size],g=p?W9(p,h,o.direction):0;return S.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),S.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${h}% + ${g}px)`}},S.createElement(bv.ItemSlot,{scope:t.__scopeSlider},S.createElement(on.span,We({role:"slider","aria-label":t["aria-label"]||f,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},r,{ref:u,style:d===void 0?{display:"none"}:t.style,onFocus:Nt(t.onFocus,()=>{s.valueIndexToChangeRef.current=i})}))))}),F9=t=>{const{value:e,...n}=t,i=S.useRef(null),r=ZT(e);return S.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[r,e]),S.createElement("input",We({style:{display:"none"}},n,{ref:i,defaultValue:e}))};function U9(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function wR(t,e,n){const s=100/(n-e)*(t-e);return lp(s,[0,100])}function V9(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function H9(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function W9(t,e,n){const i=t/2,s=C1([0,50],[0,i]);return(i-s(e)*n)*n}function G9(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function K9(t,e){if(e>0){const n=G9(t);return Math.min(...n)>=e}return!0}function C1(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function X9(t){return(String(t).split(".")[1]||"").length}function Z9(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const bR=D9,J9=I9,Y9=B9,q9=z9,sf=S.forwardRef(({className:t,...e},n)=>P.jsxs(bR,{ref:n,className:Je("relative flex touch-none select-none items-center",t),...e,children:[P.jsx(J9,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:P.jsx(Y9,{className:"absolute h-full bg-mantis-400"})}),P.jsx(q9,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));sf.displayName=bR.displayName;const xR=ke(!1);function Q9({className:t}){const e=On(),[n,i]=lz();return P.jsxs("div",{className:t,children:[P.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[P.jsx("span",{className:"icon-[lucide--settings] h-6 w-6"})," ",e("settings.title")]}),P.jsxs(La,{children:[P.jsx($a,{children:P.jsxs(Ia,{children:[P.jsx("span",{className:"icon-[lucide--languages] h-6 w-6"}),e("settings.language.label")]})}),P.jsxs(ey,{value:n.language,onValueChange:r=>i(s=>({...s,language:r})),children:[P.jsx(nf,{className:"w-32",children:P.jsx(ty,{})}),P.jsxs(rf,{children:[P.jsx(Hu,{value:"en",children:P.jsxs("span",{className:"inline-flex items-center gap-2",children:[P.jsx("span",{className:"icon-[circle-flags--uk] h-4 w-4"})," English"]})}),P.jsx(Hu,{value:"es",children:P.jsxs("span",{className:"inline-flex items-center gap-2",children:[P.jsx("span",{className:"icon-[circle-flags--ar] h-4 w-4"})," Español"]})})]})]})]}),P.jsx("hr",{className:"border-stone-600"}),P.jsxs(La,{children:[P.jsxs($a,{children:[P.jsxs(Ia,{children:[P.jsx("span",{className:"icon-[lucide--memory-stick] h-6 w-6"}),e("settings.dataOnLoad.label")]}),P.jsx(Ak,{children:e("settings.dataOnLoad.description")})]}),P.jsxs(ey,{value:n.dataOnLoad,onValueChange:r=>i(s=>({...s,dataOnLoad:r})),children:[P.jsx(nf,{className:"w-32 min-w-[theme(width.32)]",children:P.jsx(ty,{})}),P.jsx(rf,{children:dO.map(r=>P.jsx(Hu,{value:r,children:e(`settings.dataOnLoad.${r}`)},r))})]})]}),P.jsxs(La,{children:[P.jsxs($a,{children:[P.jsxs(Ia,{children:[P.jsx("span",{className:"icon-[lucide--monitor-smartphone] h-6 w-6"}),e("settings.devices.label")]}),P.jsx(Ak,{children:e("settings.devices.description")})]}),P.jsxs(ey,{value:n.devices,onValueChange:r=>i(s=>({...s,devices:r})),children:[P.jsx(nf,{className:"w-48 min-w-[theme(width.48)]",children:P.jsx(ty,{})}),P.jsx(rf,{children:hO.map(r=>P.jsx(Hu,{value:r,children:e(`settings.devices.${r}`)},r))})]})]}),P.jsx("hr",{className:"border-stone-600"}),P.jsxs(La,{children:[P.jsx($a,{children:P.jsxs(Ia,{children:[P.jsx("span",{className:"icon-[lucide--gauge] h-6 w-6"}),e("settings.speeds.executionUnit")]})}),P.jsx(sf,{className:"w-44",...ny({value:n.executionUnit,onValueChange:r=>i(s=>({...s,executionUnit:r})),min:500,max:1})})]}),P.jsxs(La,{children:[P.jsx($a,{children:P.jsxs(Ia,{children:[P.jsx("span",{className:"icon-[lucide--clock] h-6 w-6"}),e("settings.speeds.clockSpeed")]})}),P.jsx(sf,{className:"w-44",...ny({value:n.clockSpeed,onValueChange:r=>i(s=>({...s,clockSpeed:r})),min:1e3,max:10})})]}),P.jsxs(La,{children:[P.jsx($a,{children:P.jsxs(Ia,{children:[P.jsx("span",{className:"icon-[lucide--printer] h-6 w-6"}),e("settings.speeds.printerSpeed")]})}),P.jsx(sf,{className:"w-44",...ny({value:n.printerSpeed,onValueChange:r=>i(s=>({...s,printerSpeed:r})),min:1e3,max:10})})]})]})}function La({children:t}){return P.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function $a({children:t}){return P.jsx("div",{className:"grow",children:t})}function Ia({children:t}){return P.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Ak({children:t}){return P.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function ny({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}function eF(){const t=On(),[e,n]=i2(xR);return P.jsxs("header",{className:"relative p-2 text-sm text-white",children:[P.jsx(cz,{className:" absolute inset-0"}),P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsxs("div",{className:"flex select-none items-center justify-center",children:[P.jsx("img",{src:"/favicon.svg",className:"mr-2 h-10 w-10"}),P.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",P.jsx("span",{className:"text-mantis-400",children:"Sim"})]})]}),P.jsx("button",{className:Je("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:P.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}var Si=function(t,e){return Number(t.toFixed(e))},tF=function(t,e){return typeof t=="number"?t:e},ct=function(t,e,n){n&&typeof n=="function"&&n(t,e)},nF=function(t){return-Math.cos(t*Math.PI)/2+.5},iF=function(t){return t},rF=function(t){return t*t},sF=function(t){return t*(2-t)},oF=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},aF=function(t){return t*t*t},lF=function(t){return--t*t*t+1},uF=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},cF=function(t){return t*t*t*t},dF=function(t){return 1- --t*t*t*t},hF=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},fF=function(t){return t*t*t*t*t},pF=function(t){return 1+--t*t*t*t*t},mF=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},SR={easeOut:nF,linear:iF,easeInQuad:rF,easeOutQuad:sF,easeInOutQuad:oF,easeInCubic:aF,easeOutCubic:lF,easeInOutCubic:uF,easeInQuart:cF,easeOutQuart:dF,easeInOutQuart:hF,easeInQuint:fF,easeOutQuint:pF,easeInOutQuint:mF},kR=function(t){typeof t=="number"&&cancelAnimationFrame(t)},wr=function(t){t.mounted&&(kR(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function ER(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;wr(t),t.animation=function(){if(!t.mounted)return kR(t.animation);var o=new Date().getTime()-r,a=o/n,l=SR[e],u=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function gF(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Co(t,e,n,i){var r=gF(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):ER(t,i,n,function(f){var p=a+c*f,g=l+d*f,w=u+h*f;s(p,g,w)})}}function yF(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=i-a,c=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var vF=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,u=t-e-a,c=a,d=i-r-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},A1=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=yF(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=vF(o,l,u,a,c,d,!!r);return h},xv=function(t,e,n,i){return i?t<e?Si(e,2):t>n?Si(n,2):Si(t,2):Si(t,2)},Zl=function(t,e){var n=A1(t,e);return t.bounds=n,n};function Am(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=xv(t,a-d,u+d,i),p=xv(e,l-h,c+h,i);return{x:f,y:p}}function Pm(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=Am(d,h,r,s,0,0,null);return f}function bd(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var Pk=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o=r==null?void 0:r.contains(s),a=i&&s&&o;if(!a)return!1;var l=Om(s,n);return!l},Ok=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},wF=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},bF=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function xF(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,g=n>d||n<h,w=i>f||i<p,m=n>d?u.offsetWidth:t.setup.minPositionX||0,y=i>f?u.offsetHeight:t.setup.minPositionY||0,v=Pm(t,m,y,r,t.bounds,a||l),x=v.x,k=v.y;return{scale:r,positionX:g?x:n,positionY:w?k:i}}}function SF(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=Am(e,n,a,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var kF=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,u=r.positionY;if(!i)return{x:l,y:u};var c=e-i.x,d=n-i.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},pp=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},EF=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},CF=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!i)};function AF(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function Tk(t,e,n,i,r,s,o,a,l,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return i?e:xv(t,s,o,r)}function PF(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function OF(t,e){var n=EF(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var u=PF(o,a),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=l-r,g=c*c+d*d,w=Math.sqrt(g)/p;t.velocity={velocityX:h,velocityY:f,total:w}}t.lastMousePosition=e,t.velocityTime=l}}function TF(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=CF(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,g=i.zoomAnimation,w=i.panning,m=w.lockAxisY,y=w.lockAxisX,v=g.animationType,x=p.sizeX,k=p.sizeY,O=p.velocityAlignmentTime,T=O,A=AF(t,l),N=Math.max(A,T),_=pp(t,x),M=pp(t,k),H=_*r.offsetWidth/100,F=M*r.offsetHeight/100,j=u+H,X=c-H,J=d+F,G=h-F,$=t.transformState,I=new Date().getTime();ER(t,v,N,function(Y){var ae=t.transformState,ve=ae.scale,Se=ae.positionX,U=ae.positionY,B=new Date().getTime()-I,W=B/T,b=SR[p.animationType],C=1-b(Math.min(1,W)),D=1-Y,R=Se+o*D,z=U+a*D,K=Tk(R,$.positionX,Se,y,f,c,u,X,j,C),V=Tk(z,$.positionY,U,m,f,h,d,G,J,C);(Se!==R||U!==z)&&t.setTransformState(ve,K,V)})}}function Rk(t,e){var n=t.transformState.scale;wr(t),Zl(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?bF(t,e):wF(t,e)}function CR(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,a=r.sizeY,l=r.animationTime,u=r.animationType,c=s||e<i||!o&&!a;if(!c){var d=xF(t);d&&Co(t,d,l,u)}}function Nk(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=kF(t,e,n),u=l.x,c=l.y,d=pp(t,o),h=pp(t,a);OF(t,{x:u,y:c}),SF(t,u,c,d,h)}}function RF(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?TF(t):CR(t)}}function P1(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=bd(Si(e,2),s,o,0,!1),u=Zl(t,l),c=Pm(t,n,i,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function AR(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||i>=o;if((i>=1||a)&&CR(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,g=P1(t,o,f,p);g&&Co(t,g,c,d)}}var so=function(){return so=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},so.apply(this,arguments)};function Mk(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var fh={previousScale:1,scale:1,positionX:0,positionY:0},Tu={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},PR=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:fh.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:fh.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:fh.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:fh.positionY}},Dk=function(t){var e=so({},Tu);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Tu[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Tu[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=so(so({},Tu[n]),t[n]):a?e[n]=Mk(Mk([],Tu[n],!0),t[n],!0):e[n]=t[n]}}),e},OR=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=bd(Si(d,3),a,o,c,!1);return h};function TR(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=OR(t,e,n),g=P1(t,p,h,f);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");Co(t,g,i,r)}function RR(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=PR(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=A1(t,a.scale),f=Am(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(i==null||i(),Co(t,p,e,n))}}function NF(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function MF(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=NF(e,i,r,s),f=h.x,p=h.y,g=d.width/s.scale,w=d.height/s.scale,m=i.offsetWidth/g,y=i.offsetHeight/w,v=bd(n||Math.min(m,y),l,u,0,!1),x=(c.width-g*v)/2,k=(c.height-w*v)/2,O=(c.left-f)*v+x,T=(c.top-p)*v+k,A=A1(t,v),N=Am(O,T,A,a,0,0,i),_=N.x,M=N.y;return{positionX:_,positionY:M,scale:v}}var DF=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),TR(t,1,e,n,i)}},_F=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),TR(t,-1,e,n,i)}},LF=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?u:i};Co(t,f,r,s)}}},$F=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),RR(t,e,n)}},IF=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=NR(e||r.scale,s,o);Co(t,a,n,i)}}},BF=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),wr(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=MF(t,o,n);Co(t,a,i,r)}}},Sv=function(t){return{instance:t,zoomIn:DF(t),zoomOut:_F(t),setTransform:LF(t),resetTransform:$F(t),centerView:IF(t),zoomToElement:BF(t)}},zF=function(t){return{instance:t,state:t.transformState}},et=function(t){var e={};return Object.assign(e,zF(t)),Object.assign(e,Sv(t)),e},iy=!1;function ry(){try{var t={get passive(){return iy=!0,!1}};return t}catch{return iy=!1,iy}}var Om=function(t,e){var n=t.tagName.toUpperCase(),i=e.find(function(s){return s.toUpperCase()===n});if(i)return!0;var r=e.find(function(s){return t.classList.contains(s)});return!!r},kv=function(t){t&&clearTimeout(t)},jF=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},NR=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function FF(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var UF=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Om(u,o);return!d},VF=function(t){return t?t.deltaY<0?1:-1:0};function HF(t,e){var n=VF(t),i=tF(e,n);return i}function MR(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var WF=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(r)return p;var g=i?!1:!f,w=bd(Si(p,3),u,l,h,g&&!d);return w},GF=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},KF=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Om(o,r);return!l},XF=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},ZF=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Si(r[0].clientX-i.left,5),o=Si(r[0].clientY-i.top,5),a=Si(r[1].clientX-i.left,5),l=Si(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},DR=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},JF=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,u=a.size,c=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return bd(Si(h,2),o,s,u,!c&&!l)},YF=160,qF=100,QF=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(wr(t),ct(et(t),e,i),ct(et(t),e,r))},e7=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,g=d.size,w=d.disabled,m=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var v=HF(e,null),x=p?y*Math.abs(e.deltaY):m,k=WF(t,v,x,!e.ctrlKey);if(l!==k){var O=Zl(t,k),T=MR(e,s,l),A=w||g===0||c||f,N=u&&A,_=Pm(t,T.x,T.y,k,O,N),M=_.x,H=_.y;t.previousWheelEvent=e,t.setTransformState(k,M,H),ct(et(t),e,i),ct(et(t),e,r)}},t7=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;kv(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(AR(t,e.x,e.y),t.wheelAnimationTimer=null)},qF);var s=GF(t,e);s&&(kv(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,ct(et(t),e,i),ct(et(t),e,r))},YF))},n7=function(t,e){var n=DR(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,wr(t)},i7=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,u=l.disabled,c=l.size;if(!(i===null||!n)){var d=ZF(e,r,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var h=DR(e),f=JF(t,h);if(f!==r){var p=Zl(t,f),g=u||c===0||a,w=o&&g,m=Pm(t,d.x,d.y,f,p,w),y=m.x,v=m.y;t.pinchMidpoint=d,t.lastDistance=h,t.setTransformState(f,y,v)}}}},r7=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,AR(t,e==null?void 0:e.x,e==null?void 0:e.y)},_R=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;kv(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,ct(et(t),e,n)},i)},s7=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;ct(et(t),e,i),RR(t,o,a,function(){return ct(et(t),e,r)}),_R(t,e)};function o7(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,g=c.animationType;if(!d&&!i){if(h==="reset")return s7(t,e);if(!s)return console.error("No ContentComponent found");var w=h==="zoomOut"?-1:1,m=OR(t,w,f);if(o!==m){ct(et(t),e,l);var y=MR(e,s,o),v=P1(t,m,y.x,y.y);if(!v)return console.error("Error during zoom event. New transformation state was not calculated.");ct(et(t),e,u),Co(t,v,p,g),_R(t,e)}}}var a7=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=r==null?void 0:r.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=Om(l,a);return!d},l7=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){Zl(n,n.transformState.scale),n.setup=Dk(i)},this.initializeWindowEvents=function(){var i,r=ry(),s=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,r),o==null||o.addEventListener("mousemove",n.onPanning,r),o==null||o.addEventListener("mouseup",n.onPanningStop,r),s==null||s.addEventListener("mouseleave",n.clearPanning,r),o==null||o.addEventListener("keyup",n.setKeyUnPressed,r),o==null||o.addEventListener("keydown",n.setKeyPressed,r)},this.cleanupWindowEvents=function(){var i,r,s=ry(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),wr(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=ry();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(et(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(et(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=UF(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(QF(n,i),e7(n,i),t7(n,i))}}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=Pk(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),wr(n),Rk(n,i),ct(et(n),i,s))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=Ok(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),Nk(n,i.clientX,i.clientY),ct(et(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(RF(n),ct(et(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=KF(n,i);l&&(n7(n,i),wr(n),ct(et(n),i,o),ct(et(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=XF(n);l&&(i.preventDefault(),i.stopPropagation(),i7(n,i),ct(et(n),i,o),ct(et(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(r7(n),ct(et(n),i,s),ct(et(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=Pk(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&i.touches.length===1)n.onDoubleClick(i);else{n.lastTouch=+new Date,wr(n);var l=i.touches,u=l.length===1,c=l.length===2;u&&(wr(n),Rk(n,i),ct(et(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=Ok(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];Nk(n,a.clientX,a.clientY),ct(et(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=a7(n,i);s&&o7(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=et(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),ct(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=NR(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):jF(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return et(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Zl(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=et(n);ct(s,void 0,n.props.onInit)},this.props=e,this.setup=Dk(this.props),this.transformState=PR(this.props)}return t}(),O1=ue.createContext(null),u7=function(t,e){return typeof t=="function"?t(e):t},c7=ue.forwardRef(function(t,e){var n=S.useRef(new l7(t)).current,i=u7(t.children,Sv(n));return S.useImperativeHandle(e,function(){return Sv(n)},[n]),S.useEffect(function(){n.update(t)},[n,t]),ue.createElement(O1.Provider,{value:n},i)});ue.forwardRef(function(t,e){var n=S.useRef(null),i=S.useContext(O1);return S.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),ue.createElement("div",so({},t,{ref:FF([n,e])}))});function d7(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var h7=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,_k={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};d7(h7);var f7=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=S.useContext(O1).init,f=S.useRef(null),p=S.useRef(null);return S.useEffect(function(){var g=f.current,w=p.current;g!==null&&w!==null&&h&&h(g,w)},[]),ue.createElement("div",so({},u,{ref:f,className:"react-transform-wrapper ".concat(_k.wrapper," ").concat(i),style:o}),ue.createElement("div",so({},d,{ref:p,className:"react-transform-component ".concat(_k.content," ").concat(s),style:a}),e))};function p7({wrapperRef:t}){const e=On();return P.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[P.jsxs("button",{className:"m-0.5 h-8 w-8 rounded-t-lg text-white hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},children:[P.jsx("span",{className:"sr-only",children:e("control.zoom.in")}),P.jsx("span",{className:"icon-[lucide--zoom-in] h-4 w-4"})]}),P.jsx("hr",{className:"border-stone-600"}),P.jsxs("button",{className:"m-0.5 h-8 w-8 rounded-b-lg text-white hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},children:[P.jsx("span",{className:"sr-only",children:e("control.zoom.out")}),P.jsx("span",{className:"icon-[lucide--zoom-out] h-4 w-4"})]})]})}function m7({className:t}){const e=On();return P.jsx("div",{className:Je("absolute z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",t),children:P.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg font-bold text-white",children:e("computer.chip-select.name")})})}function g7({className:t}){const e=On(),n=["M 380 420 H 820 V 400","M 820 420 V 805","M 450 805 H 999","M 583 805 V 875"].join(" "),i=["M 380 440 H 840 V 400","M 840 440 V 815","M 450 815 H 999","M 573 815 V 875"].join(" "),r="M 750 545 H 860 V 400";return P.jsxs("svg",{viewBox:"0 0 1700 1100",className:Je("pointer-events-none absolute z-[15] h-[1100px] w-[1700px]",t),children:[P.jsx(ks,{x:384,y:415,children:"rd"}),P.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),P.jsx(zt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:yt("bus.rd")}),P.jsx(ks,{x:384,y:435,children:"wr"}),P.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),P.jsx(zt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:yt("bus.wr")}),P.jsx(ks,{x:384,y:455,children:"io/m"}),P.jsx(No,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),P.jsx(ks,{x:715,y:550,children:e("computer.chip-select.mem")}),P.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),P.jsx(zt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:yt("bus.mem")}),P.jsx(ks,{x:510,y:585,children:e("computer.chip-select.pic")}),P.jsx(No,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),P.jsx(ks,{x:545,y:585,children:e("computer.chip-select.timer")}),P.jsx(No,{springs:"bus.timer",d:"M 563 595 V 875"}),P.jsx(ks,{x:75,y:490,children:"intr"}),P.jsx(No,{springs:"bus.intr",d:"M 110 700 V 470"}),P.jsx(ks,{x:125,y:490,children:"inta"}),P.jsx(No,{springs:"bus.inta",d:"M 160 470 V 700"}),P.jsx(No,{springs:"bus.int0",d:"M 145 950 V 900"}),P.jsx(No,{springs:"bus.int1",d:"M 500 955 H 400 V 900"})]})}function ks({x:t,y:e,children:n}){return P.jsx("text",{className:"fill-stone-400 font-mono text-xs font-bold tracking-wider",x:t,y:e,children:n})}function No({d:t,springs:e}){return P.jsxs(P.Fragment,{children:[P.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),P.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),P.jsx(zt.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:yt(e)})]})}function y7({className:t}){const e=["M 699 349 H 800","M 725 349 V 770","M 450 770 H 999","M 618 770 V 875"].join(" "),n=["M 687 249 H 800","M 770 249 V 790","M 450 790 H 999","M 598 790 V 875"].join(" ");return P.jsxs("svg",{viewBox:"0 0 1700 1100",className:Je("pointer-events-none absolute z-[5] h-[1100px] w-[1700px]",t),children:[P.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),P.jsx(zt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:yt("bus.data")}),P.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),P.jsx(zt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:yt("bus.address")})]})}function v7({className:t}){return P.jsxs("div",{className:Je("absolute",t),children:[P.jsx(y7,{className:"inset-0"}),P.jsx(g7,{className:"inset-0"}),P.jsx(m7,{className:"left-[500px] top-[525px]"})]})}function w7({className:t}){const e=yt("clock.angle");return P.jsx("div",{className:Je("absolute z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",t),children:P.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[P.jsx("circle",{cx:"12",cy:"12",r:"10"}),P.jsx(zt.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}var LR={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.6.51 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(S)})(nM,function(n){return function(){var i={689:function(a){a.exports=function(){var l={d:function(U,B){for(var W in B)l.o(B,W)&&!l.o(U,W)&&Object.defineProperty(U,W,{enumerable:!0,get:B[W]})},o:function(U,B){return Object.prototype.hasOwnProperty.call(U,B)},r:function(U){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})}},u={};function c(U){return function(B){if(Array.isArray(B))return h(B)}(U)||function(B){if(typeof Symbol<"u"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}(U)||d(U)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(U,B){if(U){if(typeof U=="string")return h(U,B);var W=Object.prototype.toString.call(U).slice(8,-1);return W==="Object"&&U.constructor&&(W=U.constructor.name),W==="Map"||W==="Set"?Array.from(U):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?h(U,B):void 0}}function h(U,B){(B==null||B>U.length)&&(B=U.length);for(var W=0,b=new Array(B);W<B;W++)b[W]=U[W];return b}function f(U){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},f(U)}function p(U,B){for(var W=0;W<B.length;W++){var b=B[W];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(U,w(b.key),b)}}function g(U,B,W){return(B=w(B))in U?Object.defineProperty(U,B,{value:W,enumerable:!0,configurable:!0,writable:!0}):U[B]=W,U}function w(U){var B=function(W,b){if(f(W)!=="object"||W===null)return W;var C=W[Symbol.toPrimitive];if(C!==void 0){var D=C.call(W,b||"default");if(f(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(W)}(U,"string");return f(B)==="symbol"?B:String(B)}l.r(u),l.d(u,{SimpleKeyboard:function(){return ve},default:function(){return Se}});var m=function(){function U(C){var D=C.getOptions,R=C.getCaretPosition,z=C.getCaretPositionEnd,K=C.dispatch;(function(V,Z){if(!(V instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,U),g(this,"getOptions",void 0),g(this,"getCaretPosition",void 0),g(this,"getCaretPositionEnd",void 0),g(this,"dispatch",void 0),g(this,"maxLengthReached",void 0),g(this,"isStandardButton",function(V){return V&&!(V[0]==="{"&&V[V.length-1]==="}")}),this.getOptions=D,this.getCaretPosition=R,this.getCaretPositionEnd=z,this.dispatch=K,U.bindMethods(U,this)}var B,W,b;return B=U,W=[{key:"getButtonType",value:function(C){return C.includes("{")&&C.includes("}")&&C!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(C){var D=this.getButtonType(C),R=C.replace("{","").replace("}",""),z="";return D!=="standardBtn"&&(z=" hg-button-".concat(R)),"hg-".concat(D).concat(z)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(C,D){return(D=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),D):D||this.getDefaultDiplay())[C]||C}},{key:"getUpdatedInput",value:function(C,D,R){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,K=arguments.length>4&&arguments[4]!==void 0&&arguments[4],V=this.getOptions(),Z=[R,z,K],Q=D;return(C==="{bksp}"||C==="{backspace}")&&Q.length>0?Q=this.removeAt.apply(this,[Q].concat(Z)):(C==="{delete}"||C==="{forwarddelete}")&&Q.length>0?Q=this.removeForwardsAt.apply(this,[Q].concat(Z)):C==="{space}"?Q=this.addStringAt.apply(this,[Q," "].concat(Z)):C!=="{tab}"||typeof V.tabCharOnTab=="boolean"&&V.tabCharOnTab===!1?C!=="{enter}"&&C!=="{numpadenter}"||!V.newLineOnEnter?C.includes("numpad")&&Number.isInteger(Number(C[C.length-2]))?Q=this.addStringAt.apply(this,[Q,C[C.length-2]].concat(Z)):C==="{numpaddivide}"?Q=this.addStringAt.apply(this,[Q,"/"].concat(Z)):C==="{numpadmultiply}"?Q=this.addStringAt.apply(this,[Q,"*"].concat(Z)):C==="{numpadsubtract}"?Q=this.addStringAt.apply(this,[Q,"-"].concat(Z)):C==="{numpadadd}"?Q=this.addStringAt.apply(this,[Q,"+"].concat(Z)):C==="{numpaddecimal}"?Q=this.addStringAt.apply(this,[Q,"."].concat(Z)):C==="{"||C==="}"?Q=this.addStringAt.apply(this,[Q,C].concat(Z)):C.includes("{")||C.includes("}")||(Q=this.addStringAt.apply(this,[Q,C].concat(Z))):Q=this.addStringAt.apply(this,[Q,`
`].concat(Z)):Q=this.addStringAt.apply(this,[Q,"	"].concat(Z)),V.debug&&console.log("Input will be: "+Q),Q}},{key:"updateCaretPos",value:function(C){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],R=this.updateCaretPosAction(C,D);this.dispatch(function(z){z.setCaretPosition(R)})}},{key:"updateCaretPosAction",value:function(C){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],R=this.getOptions(),z=this.getCaretPosition();return z!=null&&(D?z>0&&(z-=C):z+=C),R.debug&&console.log("Caret at:",z),z}},{key:"addStringAt",value:function(C,D){var R,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C.length,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C.length,V=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return z||z===0?(R=[C.slice(0,z),D,C.slice(K)].join(""),this.isMaxLengthReached()||V&&this.updateCaretPos(D.length)):R=C+D,R}},{key:"removeAt",value:function(C){var D,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C.length,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(R===0&&z===0)return C;if(R===z){var V=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;R&&R>=0?C.substring(R-2,R).match(V)?(D=C.substr(0,R-2)+C.substr(R),K&&this.updateCaretPos(2,!0)):(D=C.substr(0,R-1)+C.substr(R),K&&this.updateCaretPos(1,!0)):C.slice(-2).match(V)?(D=C.slice(0,-2),K&&this.updateCaretPos(2,!0)):(D=C.slice(0,-1),K&&this.updateCaretPos(1,!0))}else D=C.slice(0,R)+C.slice(z),K&&this.dispatch(function(Z){Z.setCaretPosition(R)});return D}},{key:"removeForwardsAt",value:function(C){var D,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C.length,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return C!=null&&C.length&&R!==null?(R===z?D=C.substring(R,R+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?C.substr(0,R)+C.substr(R+2):C.substr(0,R)+C.substr(R+1):(D=C.slice(0,R)+C.slice(z),K&&this.dispatch(function(V){V.setCaretPosition(R)})),D):C}},{key:"handleMaxLength",value:function(C,D){var R=this.getOptions(),z=R.maxLength,K=C[R.inputName||"default"],V=D.length-1>=z;if(D.length<=K.length)return!1;if(Number.isInteger(z))return R.debug&&console.log("maxLength (num) reached:",V),V?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(f(z)==="object"){var Z=D.length-1>=z[R.inputName||"default"];return R.debug&&console.log("maxLength (obj) reached:",Z),Z?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(C){return C?C.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(D,R){return R.length?D+R[0].toUpperCase()+R.slice(1):D}):""}},{key:"chunkArray",value:function(C,D){return c(Array(Math.ceil(C.length/D))).map(function(R,z){return C.slice(D*z,D+D*z)})}},{key:"escapeRegex",value:function(C){return C.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(C,D){var R=C,z=D.indexOf("‫");return z<C&&z!=-1&&R--,D.indexOf("‬")<C&&z!=-1&&R--,R<0?0:R}}],b=[{key:"bindMethods",value:function(C,D){var R,z=function(V,Z){var Q=typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(!Q){if(Array.isArray(V)||(Q=d(V))||Z&&V&&typeof V.length=="number"){Q&&(V=Q);var Te=0,de=function(){};return{s:de,n:function(){return Te>=V.length?{done:!0}:{done:!1,value:V[Te++]}},e:function(ht){throw ht},f:de}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re,Be=!0,me=!1;return{s:function(){Q=Q.call(V)},n:function(){var ht=Q.next();return Be=ht.done,ht},e:function(ht){me=!0,Re=ht},f:function(){try{Be||Q.return==null||Q.return()}finally{if(me)throw Re}}}}(Object.getOwnPropertyNames(C.prototype));try{for(z.s();!(R=z.n()).done;){var K=R.value;K==="constructor"||K==="bindMethods"||(D[K]=D[K].bind(D))}}catch(V){z.e(V)}finally{z.f()}}}],W&&p(B.prototype,W),b&&p(B,b),Object.defineProperty(B,"prototype",{writable:!1}),U}();g(m,"noop",function(){});var y=m;function v(U){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},v(U)}function x(U,B){for(var W=0;W<B.length;W++){var b=B[W];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(U,O(b.key),b)}}function k(U,B,W){return(B=O(B))in U?Object.defineProperty(U,B,{value:W,enumerable:!0,configurable:!0,writable:!0}):U[B]=W,U}function O(U){var B=function(W,b){if(v(W)!=="object"||W===null)return W;var C=W[Symbol.toPrimitive];if(C!==void 0){var D=C.call(W,b||"default");if(v(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(W)}(U,"string");return v(B)==="symbol"?B:String(B)}var T=function(){function U(b){var C=this,D=b.dispatch,R=b.getOptions;(function(z,K){if(!(z instanceof K))throw new TypeError("Cannot call a class as a function")})(this,U),k(this,"getOptions",void 0),k(this,"dispatch",void 0),k(this,"isMofifierKey",function(z){return z.altKey||z.ctrlKey||z.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(z.code||z.key||C.keyCodeToKey(z==null?void 0:z.keyCode))}),this.dispatch=D,this.getOptions=R,y.bindMethods(U,this)}var B,W;return B=U,(W=[{key:"handleHighlightKeyDown",value:function(b){var C=this.getOptions();C.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(b)&&(b.preventDefault(),b.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(b);this.dispatch(function(R){var z,K,V=R.getButtonElement(D),Z=R.getButtonElement("{".concat(D,"}"));if(V)z=V,K=D;else{if(!Z)return;z=Z,K="{".concat(D,"}")}var Q,Te=function(Re){Re.style.background=C.physicalKeyboardHighlightBgColor||"#dadce4",Re.style.color=C.physicalKeyboardHighlightTextColor||"black"};if(z)if(Array.isArray(z)){if(z.forEach(function(Re){return Te(Re)}),C.physicalKeyboardHighlightPress)if(C.physicalKeyboardHighlightPressUsePointerEvents)(Q=z[0])===null||Q===void 0||Q.onpointerdown();else if(C.physicalKeyboardHighlightPressUseClick){var de;(de=z[0])===null||de===void 0||de.click()}else R.handleButtonClicked(K,b)}else Te(z),C.physicalKeyboardHighlightPress&&(C.physicalKeyboardHighlightPressUsePointerEvents?z.onpointerdown():C.physicalKeyboardHighlightPressUseClick?z.click():R.handleButtonClicked(K,b))})}},{key:"handleHighlightKeyUp",value:function(b){var C=this.getOptions();C.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(b)&&(b.preventDefault(),b.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(b);this.dispatch(function(R){var z,K=R.getButtonElement(D)||R.getButtonElement("{".concat(D,"}")),V=function(Z){Z.removeAttribute&&Z.removeAttribute("style")};K&&(Array.isArray(K)?(K.forEach(function(Z){return V(Z)}),C.physicalKeyboardHighlightPressUsePointerEvents&&((z=K[0])===null||z===void 0||z.onpointerup())):(V(K),C.physicalKeyboardHighlightPressUsePointerEvents&&K.onpointerup()))})}},{key:"getSimpleKeyboardLayoutKey",value:function(b){var C,D="",R=b.code||b.key||this.keyCodeToKey(b==null?void 0:b.keyCode);return(D=R!=null&&R.includes("Numpad")||R!=null&&R.includes("Shift")||R!=null&&R.includes("Space")||R!=null&&R.includes("Backspace")||R!=null&&R.includes("Control")||R!=null&&R.includes("Alt")||R!=null&&R.includes("Meta")?b.code||"":b.key||this.keyCodeToKey(b==null?void 0:b.keyCode)||"").length>1?(C=D)===null||C===void 0?void 0:C.toLowerCase():D}},{key:"keyCodeToKey",value:function(b){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[b]||""}}])&&x(B.prototype,W),Object.defineProperty(B,"prototype",{writable:!1}),U}();function A(U){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},A(U)}function N(U,B){for(var W=0;W<B.length;W++){var b=B[W];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(U,M(b.key),b)}}function _(U,B,W){return(B=M(B))in U?Object.defineProperty(U,B,{value:W,enumerable:!0,configurable:!0,writable:!0}):U[B]=W,U}function M(U){var B=function(W,b){if(A(W)!=="object"||W===null)return W;var C=W[Symbol.toPrimitive];if(C!==void 0){var D=C.call(W,b||"default");if(A(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(W)}(U,"string");return A(B)==="symbol"?B:String(B)}var H=function(){function U(b){var C=b.utilities,D=b.options;(function(R,z){if(!(R instanceof z))throw new TypeError("Cannot call a class as a function")})(this,U),_(this,"utilities",void 0),_(this,"options",void 0),_(this,"candidateBoxElement",void 0),_(this,"pageIndex",0),_(this,"pageSize",void 0),this.utilities=C,this.options=D,y.bindMethods(U,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var B,W;return B=U,W=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(b){var C=this,D=b.candidateValue,R=b.targetElement,z=b.onSelect;if(D&&D.length){var K=this.utilities.chunkArray(D.split(" "),this.pageSize);this.renderPage({candidateListPages:K,targetElement:R,pageIndex:this.pageIndex,nbPages:K.length,onItemSelected:function(V,Z){z(V,Z),C.destroy()}})}}},{key:"renderPage",value:function(b){var C,D=this,R=b.candidateListPages,z=b.targetElement,K=b.pageIndex,V=b.nbPages,Z=b.onItemSelected;(C=this.candidateBoxElement)===null||C===void 0||C.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Q=document.createElement("ul");Q.className="hg-candidate-box-list",R[K].forEach(function(Tn){var To,er=document.createElement("li"),ws=function(){var bs=new(D.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(bs,"target",{value:er}),bs};er.className="hg-candidate-box-list-item",er.innerHTML=((To=D.options.display)===null||To===void 0?void 0:To[Tn])||Tn,D.options.useTouchEvents?er.ontouchstart=function(bs){return Z(Tn,bs||ws())}:er.onclick=function(){var bs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ws();return Z(Tn,bs)},Q.appendChild(er)});var Te=K>0,de=document.createElement("div");de.classList.add("hg-candidate-box-prev"),Te&&de.classList.add("hg-candidate-box-btn-active");var Re=function(){Te&&D.renderPage({candidateListPages:R,targetElement:z,pageIndex:K-1,nbPages:V,onItemSelected:Z})};this.options.useTouchEvents?de.ontouchstart=Re:de.onclick=Re,this.candidateBoxElement.appendChild(de),this.candidateBoxElement.appendChild(Q);var Be=K<V-1,me=document.createElement("div");me.classList.add("hg-candidate-box-next"),Be&&me.classList.add("hg-candidate-box-btn-active");var ht=function(){Be&&D.renderPage({candidateListPages:R,targetElement:z,pageIndex:K+1,nbPages:V,onItemSelected:Z})};this.options.useTouchEvents?me.ontouchstart=ht:me.onclick=ht,this.candidateBoxElement.appendChild(me),z.prepend(this.candidateBoxElement)}}],W&&N(B.prototype,W),Object.defineProperty(B,"prototype",{writable:!1}),U}(),F=H;function j(U){return function(B){if(Array.isArray(B))return X(B)}(U)||function(B){if(typeof Symbol<"u"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}(U)||function(B,W){if(B){if(typeof B=="string")return X(B,W);var b=Object.prototype.toString.call(B).slice(8,-1);return b==="Object"&&B.constructor&&(b=B.constructor.name),b==="Map"||b==="Set"?Array.from(B):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?X(B,W):void 0}}(U)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(U,B){(B==null||B>U.length)&&(B=U.length);for(var W=0,b=new Array(B);W<B;W++)b[W]=U[W];return b}function J(U){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},J(U)}function G(U,B){var W=Object.keys(U);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(U);B&&(b=b.filter(function(C){return Object.getOwnPropertyDescriptor(U,C).enumerable})),W.push.apply(W,b)}return W}function $(U,B){for(var W=0;W<B.length;W++){var b=B[W];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(U,Y(b.key),b)}}function I(U,B,W){return(B=Y(B))in U?Object.defineProperty(U,B,{value:W,enumerable:!0,configurable:!0,writable:!0}):U[B]=W,U}function Y(U){var B=function(W,b){if(J(W)!=="object"||W===null)return W;var C=W[Symbol.toPrimitive];if(C!==void 0){var D=C.call(W,b||"default");if(J(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(W)}(U,"string");return J(B)==="symbol"?B:String(B)}var ae=function(){function U(b,C){var D=this;if(function(de,Re){if(!(de instanceof Re))throw new TypeError("Cannot call a class as a function")}(this,U),I(this,"input",void 0),I(this,"options",void 0),I(this,"utilities",void 0),I(this,"caretPosition",void 0),I(this,"caretPositionEnd",void 0),I(this,"keyboardDOM",void 0),I(this,"keyboardPluginClasses",void 0),I(this,"keyboardDOMClass",void 0),I(this,"buttonElements",void 0),I(this,"currentInstanceName",void 0),I(this,"allKeyboardInstances",void 0),I(this,"keyboardInstanceNames",void 0),I(this,"isFirstKeyboardInstance",void 0),I(this,"physicalKeyboard",void 0),I(this,"modules",void 0),I(this,"activeButtonClass",void 0),I(this,"holdInteractionTimeout",void 0),I(this,"holdTimeout",void 0),I(this,"isMouseHold",void 0),I(this,"initialized",void 0),I(this,"candidateBox",void 0),I(this,"keyboardRowsDOM",void 0),I(this,"defaultName","default"),I(this,"activeInputElement",null),I(this,"handleParams",function(de,Re){var Be,me,ht;if(typeof de=="string")Be=de.split(".").join(""),me=document.querySelector(".".concat(Be)),ht=Re;else if(de instanceof HTMLDivElement){if(!de.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");Be=de.className.split(" ")[0],me=de,ht=Re}else Be="simple-keyboard",me=document.querySelector(".".concat(Be)),ht=de;return{keyboardDOMClass:Be,keyboardDOM:me,options:ht}}),I(this,"getOptions",function(){return D.options}),I(this,"getCaretPosition",function(){return D.caretPosition}),I(this,"getCaretPositionEnd",function(){return D.caretPositionEnd}),I(this,"registerModule",function(de,Re){D.modules[de]||(D.modules[de]={}),Re(D.modules[de])}),I(this,"getKeyboardClassString",function(){for(var de=arguments.length,Re=new Array(de),Be=0;Be<de;Be++)Re[Be]=arguments[Be];return[D.keyboardDOMClass].concat(Re).filter(function(me){return!!me}).join(" ")}),typeof window<"u"){var R=this.handleParams(b,C),z=R.keyboardDOMClass,K=R.keyboardDOM,V=R.options,Z=V===void 0?{}:V;this.utilities=new y({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=K,this.options=function(de){for(var Re=1;Re<arguments.length;Re++){var Be=arguments[Re]!=null?arguments[Re]:{};Re%2?G(Object(Be),!0).forEach(function(me){I(de,me,Be[me])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Be)):G(Object(Be)).forEach(function(me){Object.defineProperty(de,me,Object.getOwnPropertyDescriptor(Be,me))})}return de}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Z),this.keyboardPluginClasses="",y.bindMethods(U,this);var Q=this.options.inputName,Te=Q===void 0?this.defaultName:Q;if(this.input={},this.input[Te]="",this.keyboardDOMClass=z,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new T({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new F({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(z,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var B,W;return B=U,W=[{key:"setCaretPosition",value:function(b){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b;this.caretPosition=b,this.caretPositionEnd=C}},{key:"getInputCandidates",value:function(b){var C=this,D=this.options,R=D.layoutCandidates,z=D.layoutCandidatesCaseSensitiveMatch;if(!R||J(R)!=="object")return{};var K=Object.keys(R).filter(function(Q){var Te=b.substring(0,C.getCaretPositionEnd()||0)||b,de=new RegExp("".concat(C.utilities.escapeRegex(Q),"$"),z?"g":"gi");return!!j(Te.matchAll(de)).length});if(K.length>1){var V=K.sort(function(Q,Te){return Te.length-Q.length})[0];return{candidateKey:V,candidateValue:R[V]}}if(K.length){var Z=K[0];return{candidateKey:Z,candidateValue:R[Z]}}return{}}},{key:"showCandidatesBox",value:function(b,C,D){var R=this;this.candidateBox&&this.candidateBox.show({candidateValue:C,targetElement:D,onSelect:function(z,K){var V=R.options,Z=V.layoutCandidatesCaseSensitiveMatch,Q=V.disableCandidateNormalization,Te=V.enableLayoutCandidatesKeyPress,de=z;Q||(de=z.normalize("NFD"));var Re=R.getInput(R.options.inputName,!0),Be=R.getCaretPositionEnd()||0,me=Re.substring(0,Be||0)||Re,ht=new RegExp("".concat(R.utilities.escapeRegex(b),"$"),Z?"g":"gi"),Tn=me.replace(ht,de),To=Re.replace(me,Tn),er=Tn.length-me.length,ws=(Be||Re.length)+er;ws<0&&(ws=0),R.setInput(To,R.options.inputName,!0),R.setCaretPosition(ws),Te&&typeof R.options.onKeyPress=="function"&&R.options.onKeyPress(z,K),typeof R.options.onChange=="function"&&R.options.onChange(R.getInput(R.options.inputName,!0),K),typeof R.options.onChangeAll=="function"&&R.options.onChangeAll(R.getAllInputs(),K)}})}},{key:"handleButtonClicked",value:function(b,C){var D=this.options,R=D.inputName,z=R===void 0?this.defaultName:R,K=D.debug;if(b!=="{//}"){this.input[z]||(this.input[z]="");var V=this.utilities.getUpdatedInput(b,this.input[z],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(b)&&this.activeInputElement&&this.input[z]&&this.input[z]===V&&this.caretPosition===0&&this.caretPositionEnd===V.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(b,C);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(b,C),this.input[z]!==V&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(V))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,V))return;var Z=this.utilities.getUpdatedInput(b,this.input[z],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(Z,this.options.inputName,!0),K&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),C==null?void 0:C.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),C),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),C),C!=null&&C.target&&this.options.enableLayoutCandidates){var Q,Te=this.getInputCandidates(V),de=Te.candidateKey,Re=Te.candidateValue;de&&Re?this.showCandidatesBox(de,Re,this.keyboardDOM):(Q=this.candidateBox)===null||Q===void 0||Q.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),K&&console.log("Key pressed:",b)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(b){this.options.syncInstanceInputs?this.dispatch(function(C){C.isMouseHold=b}):this.isMouseHold=b}},{key:"handleButtonMouseDown",value:function(b,C){var D=this;C&&(this.options.preventMouseDownDefault&&C.preventDefault(),this.options.stopMouseDownPropagation&&C.stopPropagation(),C.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(D.getMouseHold()&&(!b.includes("{")&&!b.includes("}")||b==="{delete}"||b==="{backspace}"||b==="{bksp}"||b==="{space}"||b==="{tab}")||b==="{arrowright}"||b==="{arrowleft}"||b==="{arrowup}"||b==="{arrowdown}")&&(D.options.debug&&console.log("Button held:",b),D.handleButtonHold(b)),clearTimeout(D.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(b,C){var D=this;C&&(this.options.preventMouseUpDefault&&C.preventDefault&&C.preventDefault(),this.options.stopMouseUpPropagation&&C.stopPropagation&&C.stopPropagation(),!(C.target===this.keyboardDOM||C.target&&this.keyboardDOM.contains(C.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(C.target===this.candidateBox.candidateBoxElement||C.target&&this.candidateBox.candidateBoxElement.contains(C.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(R){R.classList.remove(D.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),b&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(b,C)}},{key:"handleKeyboardContainerMouseDown",value:function(b){this.options.preventMouseDownDefault&&b.preventDefault()}},{key:"handleButtonHold",value:function(b){var C=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){C.getMouseHold()?(C.handleButtonClicked(b),C.handleButtonHold(b)):clearTimeout(C.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var b=this;this.dispatch(function(C){C.replaceInput(b.input),C.setCaretPosition(b.caretPosition,b.caretPositionEnd)})}},{key:"clearInput",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[b]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,C=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!C&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[b].replace("‫","").replace("‬","")+"‬":this.input[b]}},{key:"getAllInputs",value:function(){var b=this,C={};return Object.keys(this.input).forEach(function(D){C[D]=b.getInput(D,!0)}),C}},{key:"setInput",value:function(b){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,D=arguments.length>2?arguments[2]:void 0;this.input[C]=b,!D&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(b){this.input=b}},{key:"setOptions",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=this.changedOptions(b);this.options=Object.assign(this.options,b),C.length&&(this.options.debug&&console.log("changedOptions",C),this.onSetOptions(C),this.render())}},{key:"changedOptions",value:function(b){var C=this;return Object.keys(b).filter(function(D){return JSON.stringify(b[D])!==JSON.stringify(C.options[D])})}},{key:"onSetOptions",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];b.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(b.includes("layoutCandidatesPageSize")||b.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new F({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(b){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(C){b(window.SimpleKeyboardInstances[C],C)})}},{key:"addButtonTheme",value:function(b,C){var D=this;C&&b&&(b.split(" ").forEach(function(R){C.split(" ").forEach(function(z){D.options.buttonTheme||(D.options.buttonTheme=[]);var K=!1;D.options.buttonTheme.map(function(V){if(V!=null&&V.class.split(" ").includes(z)){K=!0;var Z=V.buttons.split(" ");Z.includes(R)||(K=!0,Z.push(R),V.buttons=Z.join(" "))}return V}),K||D.options.buttonTheme.push({class:z,buttons:b})})}),this.render())}},{key:"removeButtonTheme",value:function(b,C){var D=this;if(!b&&!C)return this.options.buttonTheme=[],void this.render();b&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(b.split(" ").forEach(function(R){var z;(z=D.options)===null||z===void 0||(z=z.buttonTheme)===null||z===void 0||z.map(function(K,V){if(K&&C&&C.includes(K.class)||!C){var Z,Q,Te=(Z=K)===null||Z===void 0?void 0:Z.buttons.split(" ").filter(function(de){return de!==R});K&&Te!=null&&Te.length?K.buttons=Te.join(" "):((Q=D.options.buttonTheme)===null||Q===void 0||Q.splice(V,1),K=null)}return K})}),this.render())}},{key:"getButtonElement",value:function(b){var C,D=this.buttonElements[b];return D&&(C=D.length>1?D:D[0]),C}},{key:"inputPatternIsValid",value:function(b){var C,D=this.options.inputPattern;if((C=D instanceof RegExp?D:D[this.options.inputName||this.defaultName])&&b){var R=C.test(b);return this.options.debug&&console.log('inputPattern ("'.concat(C,'"): ').concat(R?"passed":"did not pass!")),R}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var b=this.options.physicalKeyboardHighlightPreventDefault,C=b!==void 0&&b;document.addEventListener("keyup",this.handleKeyUp,C),document.addEventListener("keydown",this.handleKeyDown,C),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(b){this.caretEventHandler(b),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(b)}},{key:"handleKeyDown",value:function(b){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(b)}},{key:"handleMouseUp",value:function(b){this.caretEventHandler(b)}},{key:"handleTouchEnd",value:function(b){this.caretEventHandler(b)}},{key:"handleSelect",value:function(b){this.caretEventHandler(b)}},{key:"handleSelectionChange",value:function(b){navigator.userAgent.includes("Firefox")||this.caretEventHandler(b)}},{key:"caretEventHandler",value:function(b){var C,D=this;b.target.tagName&&(C=b.target.tagName.toLowerCase()),this.dispatch(function(R){var z=b.target===R.keyboardDOM||b.target&&R.keyboardDOM.contains(b.target);if(D.options.syncInstanceInputs&&Array.isArray(b.path)&&(z=b.path.some(function(Z){var Q;return Z==null||(Q=Z.hasAttribute)===null||Q===void 0?void 0:Q.call(Z,"data-skInstance")})),(C==="textarea"||C==="input"&&["text","search","url","tel","password"].includes(b.target.type))&&!R.options.disableCaretPositioning){var K=b.target.selectionStart,V=b.target.selectionEnd;R.options.rtl&&(K=R.utilities.getRtlOffset(K,R.getInput()),V=R.utilities.getRtlOffset(V,R.getInput())),R.setCaretPosition(K,V),D.activeInputElement=b.target,R.options.debug&&console.log("Caret at: ",R.getCaretPosition(),R.getCaretPositionEnd(),b&&b.target.tagName.toLowerCase(),"(".concat(R.keyboardDOMClass,")"),b==null?void 0:b.type)}else!R.options.disableCaretPositioning&&z||(b==null?void 0:b.type)==="selectionchange"||(R.setCaretPosition(null),D.activeInputElement=null,R.options.debug&&console.log('Caret position reset due to "'.concat(b==null?void 0:b.type,'" event'),b))})}},{key:"recurseButtons",value:function(b){var C=this;b&&Object.keys(this.buttonElements).forEach(function(D){return C.buttonElements[D].forEach(b)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var b=this.options.physicalKeyboardHighlightPreventDefault,C=b!==void 0&&b;document.removeEventListener("keyup",this.handleKeyUp,C),document.removeEventListener("keydown",this.handleKeyDown,C),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(D){D&&(D.onpointerdown=null,D.onpointerup=null,D.onpointercancel=null,D.ontouchstart=null,D.ontouchend=null,D.ontouchcancel=null,D.onclick=null,D.onmousedown=null,D.onmouseup=null,D.remove(),D=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(b){var C=this.options.buttonTheme,D=[];return Array.isArray(C)&&C.forEach(function(R){if(R&&R.class&&typeof R.class=="string"&&R.buttons&&typeof R.buttons=="string"){var z=R.class.split(" ");R.buttons.split(" ").includes(b)&&(D=[].concat(j(D),j(z)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',R)}),D}},{key:"setDOMButtonAttributes",value:function(b,C){var D=this.options.buttonAttributes;Array.isArray(D)&&D.forEach(function(R){R.attribute&&typeof R.attribute=="string"&&R.value&&typeof R.value=="string"&&R.buttons&&typeof R.buttons=="string"?R.buttons.split(" ").includes(b)&&C(R.attribute,R.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',R)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(b){if(b.target.classList.contains("hg-button"))return b.preventDefault(),b.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var b=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(C){var D=new C(b);D.init&&D.init(b)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(b,C){return!!this.modules[b]&&this.modules[b][C]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(b,C,D,R){var z=this,K=Array.from(b.children),V=0;return K.length&&D.forEach(function(Z,Q){var Te=R[Q];if(!(Te&&Te>Z))return!1;var de=Z-V,Re=Te-V,Be=document.createElement("div");Be.className+="hg-button-container";var me="".concat(z.options.layoutName,"-r").concat(C,"c").concat(Q);Be.setAttribute("data-skUID",me);var ht=K.splice(de,Re-de+1);V=Re-de,ht.forEach(function(Tn){return Be.appendChild(Tn)}),K.splice(de,0,Be),b.innerHTML="",K.forEach(function(Tn){return b.appendChild(Tn)}),z.options.debug&&console.log("rowDOMContainer",ht,de,Re,V+1)}),b}},{key:"render",value:function(){var b=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var C="hg-layout-".concat(this.options.layoutName),D=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},R=this.options.useTouchEvents||!1,z=R?"hg-touch-events":"",K=this.options.useMouseEvents||!1,V=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,C,this.keyboardPluginClasses,z),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",D[this.options.layoutName||this.defaultName].forEach(function(Z,Q){var Te=Z.split(" ");b.options.excludeFromLayout&&b.options.excludeFromLayout[b.options.layoutName||b.defaultName]&&(Te=Te.filter(function(me){return b.options.excludeFromLayout&&!b.options.excludeFromLayout[b.options.layoutName||b.defaultName].includes(me)}));var de=document.createElement("div");de.className+="hg-row";var Re=[],Be=[];Te.forEach(function(me,ht){var Tn,To=!V&&typeof me=="string"&&me.length>1&&me.indexOf("[")===0,er=!V&&typeof me=="string"&&me.length>1&&me.indexOf("]")===me.length-1;To&&(Re.push(ht),me=me.replace(/\[/g,"")),er&&(Be.push(ht),me=me.replace(/\]/g,""));var ws=b.utilities.getButtonClass(me),bs=b.utilities.getButtonDisplayName(me,b.options.display,b.options.mergeDisplay),JN=b.options.useButtonTag?"button":"div",Gt=document.createElement(JN);Gt.className+="hg-button ".concat(ws),(Tn=Gt.classList).add.apply(Tn,j(b.getButtonThemeClasses(me))),b.setDOMButtonAttributes(me,function(kt,qN){Gt.setAttribute(kt,qN)}),b.activeButtonClass="hg-activeButton",!b.utilities.pointerEventsSupported()||R||K?R?(Gt.ontouchstart=function(kt){b.handleButtonClicked(me,kt),b.handleButtonMouseDown(me,kt)},Gt.ontouchend=function(kt){b.handleButtonMouseUp(me,kt)},Gt.ontouchcancel=function(kt){b.handleButtonMouseUp(me,kt)}):(Gt.onclick=function(kt){b.setMouseHold(!1),typeof b.options.onKeyReleased!="function"&&b.handleButtonClicked(me,kt)},Gt.onmousedown=function(kt){typeof b.options.onKeyReleased!="function"||b.isMouseHold||b.handleButtonClicked(me,kt),b.handleButtonMouseDown(me,kt)},Gt.onmouseup=function(kt){b.handleButtonMouseUp(me,kt)}):(Gt.onpointerdown=function(kt){b.handleButtonClicked(me,kt),b.handleButtonMouseDown(me,kt)},Gt.onpointerup=function(kt){b.handleButtonMouseUp(me,kt)},Gt.onpointercancel=function(kt){b.handleButtonMouseUp(me,kt)}),Gt.setAttribute("data-skBtn",me);var YN="".concat(b.options.layoutName,"-r").concat(Q,"b").concat(ht);Gt.setAttribute("data-skBtnUID",YN);var J1=document.createElement("span");J1.innerHTML=bs,Gt.appendChild(J1),b.buttonElements[me]||(b.buttonElements[me]=[]),b.buttonElements[me].push(Gt),de.appendChild(Gt)}),de=b.parseRowDOMContainers(de,Q,Re,Be),b.keyboardRowsDOM.appendChild(de)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||R||K?R?(document.ontouchend=function(Z){return b.handleButtonMouseUp(void 0,Z)},document.ontouchcancel=function(Z){return b.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.ontouchstart=function(Z){return b.handleKeyboardContainerMouseDown(Z)}):R||(document.onmouseup=function(Z){return b.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onmousedown=function(Z){return b.handleKeyboardContainerMouseDown(Z)}):(document.onpointerup=function(Z){return b.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onpointerdown=function(Z){return b.handleKeyboardContainerMouseDown(Z)}),this.onInit())}}],W&&$(B.prototype,W),Object.defineProperty(B,"prototype",{writable:!1}),U}(),ve=ae,Se=ve;return u}()},787:function(a){a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var u=r[a]={exports:{}};return i[a].call(u.exports,u,u.exports,s),u.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return g},default:function(){return w}});var a=s(787);function l(m){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(m)}function u(m,y){var v=Object.keys(m);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(m);y&&(x=x.filter(function(k){return Object.getOwnPropertyDescriptor(m,k).enumerable})),v.push.apply(v,x)}return v}function c(m){for(var y=1;y<arguments.length;y++){var v=arguments[y]!=null?arguments[y]:{};y%2?u(Object(v),!0).forEach(function(x){d(m,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(v)):u(Object(v)).forEach(function(x){Object.defineProperty(m,x,Object.getOwnPropertyDescriptor(v,x))})}return m}function d(m,y,v){return(y=function(x){var k=function(O,T){if(l(O)!=="object"||O===null)return O;var A=O[Symbol.toPrimitive];if(A!==void 0){var N=A.call(O,T||"default");if(l(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(O)}(x,"string");return l(k)==="symbol"?k:String(k)}(y))in m?Object.defineProperty(m,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[y]=v,m}var h=function(m){return c(c({},m),{},{keyboardRef:null})},f=s(689),p=s.n(f),g=function(m){var y=m.baseClass||"react-simple-keyboard",v=a.useRef(null),x=a.useRef(null),k=a.useRef(null),O=a.useRef(m);return a.useEffect(function(){var T=function(H){return c(c({},H),{},{theme:"simple-keyboard ".concat(H.theme||"hg-theme-default")})}(m);if(!v.current){v.current=!0,T.debug&&console.log("ReactSimpleKeyboard: Init");var A=x.current,N=".".concat(y);k.current=new(p())(A||N,T),T.keyboardRef&&T.keyboardRef(k.current)}var _=function(H,F){var j=h(F),X=h(H);return Object.keys(j).filter(function(J){return j[J]!==X[J]})}(O.current,T);if(_.length){var M=k.current;O.current=T,M==null||M.setOptions(T),T.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",_)}},[v,y,O,m]),a.createElement("div",{className:y,ref:x})},w=g}(),o}()})})(LR);var b7=LR.exports;const x7=tu(b7),S7={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},k7={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},Lk="Á É Í Ó Ú á é í ó ú ́",$k="Ü ü ̈";function E7(){const t=CT(),[e,n]=ym(),[i,r]=S.useState("none"),[s,o]=S.useState(!1),[a,l]=S.useState(!1),u=S.useMemo(()=>[t,t==="es"&&(s&&"accent"||a&&"diaeresis"),i!=="none"&&"shift"].filter(Boolean).join("-"),[t,i,s,a]),c=S.useCallback(d=>{e.type==="running"&&e.waitingForInput&&n("console.sendChar",d)},[e,n]);return P.jsx(x7,{theme:Je("hg-theme-vonsim",`hg-shift-${i}`,s&&"hg-accentDeadKey",a&&"hg-diaeresisDeadKey"),layoutName:u,layout:S7,display:k7[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:Lk},{class:"hg-diaeresisDeadKeyButton",buttons:$k}],disableButtonHold:!0,onKeyPress:d=>{if(d==="{shiftleft}"||d==="{shiftright}"){r(h=>h==="none"?"once":"none");return}if(d==="{lock}"){r(h=>h==="none"?"lock":"none");return}if(t==="es"){if(s){Lk.includes(d)&&(o(!1),i==="once"&&r("none"),c(d));return}else if(d==="́"){o(!0);return}if(a){$k.includes(d)&&(l(!1),i==="once"&&r("none"),c(d));return}else if(d==="̈"){l(!0);return}}i==="once"&&r("none"),c(d==="{bksp}"?"\b":d==="{enter}"?`
`:d==="{tab}"?"	":d==="{space}"?" ":d)}})}const C7="_monitor_njudb_2",A7={monitor:C7};function P7(){const t=Ar($w);return P.jsx("pre",{className:A7.monitor,children:t})}function O7({className:t}){const e=On();return P.jsxs("div",{className:Je("absolute z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[P.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl font-bold text-white",children:e("computer.console")}),P.jsx(P7,{}),P.jsx("hr",{className:"border-stone-600"}),P.jsx(E7,{})]})}function Ko({name:t,valueAtom:e,springs:n,emphasis:i=!1,title:r,className:s}){const o=Ar(e),a=o.low,l=o.is16bits()?o.high:null;return P.jsxs(zt.div,{title:r,className:Je("flex w-min items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",i?"border-mantis-400 text-lg":"border-stone-600 text-base",s),style:yt(n),children:[P.jsx("span",{className:"mr-2 font-bold",children:t}),l&&P.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:l.toString("hex")}),P.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:a.toString("hex")})]})}function T7(){const t=Ar(ot.FLAGS),e=Ar(pO),n=t.bit(0),i=t.bit(6),r=t.bit(7),s=t.bit(9),o=t.bit(11);return P.jsxs(P.Fragment,{children:[P.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[P.jsx(zt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 173 85 H 220",pathLength:1,strokeDasharray:1,style:yt("cpu.alu.operands")}),P.jsx(zt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 182 145 H 220",pathLength:1,strokeDasharray:1,style:yt("cpu.alu.operands")}),P.jsx(zt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:yt("cpu.alu.results")}),P.jsx(zt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:yt("cpu.alu.results")}),P.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),P.jsx(zt.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:yt("cpu.alu.cog").rot.to(a=>`rotate(${a*60}deg)`)}}),P.jsx(zt.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:yt("cpu.alu.operation"),children:e}),P.jsxs(zt.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:yt("cpu.FLAGS"),children:[P.jsx("span",{className:Je("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),P.jsx("span",{className:Je("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"ZF"}),P.jsx("span",{className:Je("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"SF"}),P.jsx("span",{className:Je("rounded p-1 font-light",s?"bg-mantis-400":"bg-stone-900"),children:"IF"}),P.jsx("span",{className:Je("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"OF"})]})]})}function R7(){const t=On(),[e]=ym(),n=Ar(Is),i=S.useMemo(()=>{if(!("metadata"in n)||n.metadata.operands.length===0)return"";if(n.phase==="fetching-operands"){let s=" __";for(let o=1;o<n.metadata.operands.length;o++)s+=", __";return s}else return" "+n.metadata.operands.join(", ")},[n]),r=S.useMemo(()=>e.type==="running"&&e.waitingForInput?"waiting-for-input":e.type==="stopped"?e.error?"stopped-error":"stopped":n.phase==="stopped"&&n.error?"stopped-error":n.phase,[e,n]);return P.jsxs(P.Fragment,{children:[P.jsx("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:P.jsx(zt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:yt("cpu.decoder.path")})}),P.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:P.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs font-semibold tracking-wide text-white",children:t("computer.cpu.control-unit")})}),P.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[P.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[P.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),P.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:P.jsx(zt.div,{className:"h-full bg-mantis-400",style:{width:yt("cpu.decoder.progress.progress").to(s=>`${s*100}%`),opacity:yt("cpu.decoder.progress.opacity")}})})]}),P.jsx("span",{className:Je("mt-4 w-48 rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",r==="stopped-error"?"bg-red-500":r==="waiting-for-input"?"bg-amber-600":"bg-stone-900"),children:t(`computer.cpu.status.${r}`)}),P.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:P.jsx("p",{className:"text-center font-mono",children:n.phase==="fetching"||n.phase==="stopped"?P.jsx("span",{className:"font-bold italic text-stone-400",children:"???"}):P.jsxs(P.Fragment,{children:[P.jsx("span",{className:"font-bold text-mantis-400",children:n.metadata.name}),P.jsx("span",{className:"text-white",children:i})]})})})]})]})}function N7({className:t}){const e=On();return P.jsxs("div",{className:Je("absolute z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[P.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:e("computer.cpu.name")}),P.jsx(a8,{}),P.jsx(z6,{}),P.jsx(Rn,{name:"left",className:"left-[60px] top-[70px]"}),P.jsx(Rn,{name:"right",className:"left-[60px] top-[130px]"}),P.jsx(Rn,{name:"result",className:"left-[300px] top-[100px]"}),P.jsx(T7,{}),P.jsx(Rn,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),P.jsx(Rn,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),P.jsx(Rn,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),P.jsx(Rn,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),P.jsx(Rn,{name:"id",className:"left-[520px] top-[190px]"}),P.jsx(Rn,{name:"MBR",className:"right-[-38px] top-[233px]"}),P.jsx(Rn,{name:"IR",className:"left-[171px] top-[270px]"}),P.jsx(R7,{}),P.jsx(Rn,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),P.jsx(Rn,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),P.jsx(Rn,{name:"ri",className:"left-[450px] top-[372px]"}),P.jsx(Rn,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function Rn({name:t,emphasis:e,className:n}){const i=On();return P.jsx(Ko,{name:t,valueAtom:ot[t],springs:`cpu.${t}`,emphasis:e,title:i("computer.cpu.register",t),className:Je("absolute",n)})}const M7="_pushable_1nhoa_2",D7="_front_1nhoa_15",_7="_shadow_1nhoa_20",L7="_edge_1nhoa_52",ph={pushable:M7,front:D7,shadow:_7,edge:L7};function $7({className:t}){const e=On(),[n,i]=ym();return b2("F10",r=>{r.preventDefault(),i("f10.press")}),P.jsx("div",{className:Je("absolute z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:P.jsxs("button",{className:ph.pushable,disabled:n.type!=="running",onClick:()=>i("f10.press"),title:e("computer.f10.name"),children:[P.jsx("div",{className:ph.shadow}),P.jsx("div",{className:ph.edge}),P.jsx("span",{className:ph.front,children:e("computer.f10.interrupt")})]})})}function I7({className:t}){const e=On(),n=Ar(U6);return P.jsxs("div",{className:Je("absolute z-10 h-[400px] w-[150px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[P.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:e("computer.memory.name")}),P.jsx("div",{className:"m-4 w-min overflow-hidden rounded-lg border border-stone-600",children:P.jsx("table",{className:"font-mono text-lg",children:P.jsx("tbody",{children:n.map((i,r)=>P.jsxs("tr",{title:e("computer.memory.cell",i.address),className:"border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",children:[P.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:i.address.toString()}),P.jsx("td",{className:"px-2 py-1",children:i.value.toString("hex")})]},r))})})})]})}function B7({className:t}){const e=On();return P.jsxs("div",{className:Je("absolute z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[P.jsxs("div",{className:"flex items-start",children:[P.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:e("computer.pic")}),P.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[P.jsx(Ko,{name:"IMR",title:e("generics.io-register","IMR",33),valueAtom:p1,springs:"pic.IMR",emphasis:!0}),P.jsx(Ko,{name:"IRR",title:e("generics.io-register","IRR",34),valueAtom:m1,springs:"pic.IRR",emphasis:!0}),P.jsx(Ko,{name:"ISR",title:e("generics.io-register","ISR",35),valueAtom:g1,springs:"pic.ISR",emphasis:!0})]})]}),P.jsx("hr",{className:"mb-2 border-stone-600"}),P.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:ap.map((n,i)=>P.jsx(Ko,{name:`INT${i}`,title:e("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]})}function z7({className:t}){const e=On();return P.jsxs("div",{className:Je("absolute z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[P.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:e("computer.timer")}),P.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[P.jsx(Ko,{name:"CONT",title:e("generics.io-register","CONT",16),valueAtom:y1,springs:"timer.CONT"}),P.jsx(Ko,{name:"COMP",title:e("generics.io-register","COMP",17),valueAtom:v1,springs:"timer.COMP"})]})]})}function j7(){const t=S.useRef(null);return P.jsx("div",{className:"relative h-full w-full",children:P.jsxs(c7,{minScale:.5,initialPositionX:0,initialPositionY:0,ref:t,children:[P.jsx(f7,{wrapperClass:"!w-full !h-full",contentClass:"!p-[100px]",children:P.jsxs("div",{className:"relative h-[1100px] w-[1700px] border border-red-500",children:[P.jsx(v7,{className:"left-0 top-0"}),P.jsx(N7,{className:"left-0 top-0"}),P.jsx(I7,{className:"left-[800px] top-0"}),P.jsx(B7,{className:"left-0 top-[700px]"}),P.jsx(z7,{className:"left-[500px] top-[875px]"}),P.jsx(w7,{className:"left-[520px] top-[930px]"}),P.jsx(O7,{className:"left-[1200px] top-0"}),P.jsx($7,{className:"left-[50px] top-[950px]"})]})}),P.jsx(p7,{wrapperRef:t})]})})}const F7=1024;let U7=0;class sy{constructor(e,n){this.from=e,this.to=n}}class Ue{constructor(e={}){this.id=U7++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Hn.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Ue.closedBy=new Ue({deserialize:t=>t.split(" ")});Ue.openedBy=new Ue({deserialize:t=>t.split(" ")});Ue.group=new Ue({deserialize:t=>t.split(" ")});Ue.contextHash=new Ue({perNode:!0});Ue.lookAhead=new Ue({perNode:!0});Ue.mounted=new Ue({perNode:!0});const V7=Object.create(null);class Hn{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):V7,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Hn(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Ue.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(Ue.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Hn.none=new Hn("",Object.create(null),0,8);class T1{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Hn(i.name,r,i.id,i.flags):i)}return new T1(n)}}const mh=new WeakMap,Ik=new WeakMap;var Yt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Yt||(Yt={}));class wt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(Ue.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new yp(this.topNode,e)}cursorAt(e,n=0,i=0){let r=mh.get(this)||this.topNode,s=new yp(r);return s.moveTo(e,n),mh.set(this,s._tree),s}get topNode(){return new rs(this,0,0,null)}resolve(e,n=0){let i=Jl(mh.get(this)||this.topNode,e,n,!1);return mh.set(this,i),i}resolveInner(e,n=0){let i=Jl(Ik.get(this)||this.topNode,e,n,!0);return Ik.set(this,i),i}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Yt.IncludeAnonymous)>0;for(let l=this.cursor(o|Yt.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:M1(Hn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new wt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new wt(Hn.none,n,i,r)))}static build(e){return W7(e)}}wt.empty=new wt(Hn.none,[],[],0);class R1{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new R1(this.buffer,this.index)}}class Ca{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Hn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!($R(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let u=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,u)}return new Ca(s,o,this.set)}}function $R(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function IR(t,e){let n=t.childBefore(e);for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(t=n,n=i.prevSibling):n=i}return t}function Jl(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof rs&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Yt.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof rs&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class rs{constructor(e,n,i,r){this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if($R(r,i,d,d+c.length)){if(c instanceof Ca){if(s&Yt.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new Zs(new H7(o,c,e,d),null,h)}else if(s&Yt.IncludeAnonymous||!c.type.isAnonymous||N1(c)){let h;if(!(s&Yt.IgnoreMounts)&&c.props&&(h=c.prop(Ue.mounted))&&!h.overlay)return new rs(h.tree,d,e,o);let f=new rs(c,d,e,o);return s&Yt.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&Yt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Yt.IgnoreOverlays)&&(r=this._tree.prop(Ue.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new rs(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new yp(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return Jl(this,e,n,!1)}resolveInner(e,n=0){return Jl(this,e,n,!0)}enterUnfinishedNodesBefore(e){return IR(this,e)}getChild(e,n=null,i=null){let r=mp(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return mp(this,e,n,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return gp(this,e)}}function mp(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(;!r.type.is(n);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function gp(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class H7{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class Zs{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new Zs(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Yt.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Zs(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Zs(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Zs(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new yp(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new wt(this.type,e,n,this.to-this.from)}resolve(e,n=0){return Jl(this,e,n,!1)}resolveInner(e,n=0){return Jl(this,e,n,!0)}enterUnfinishedNodesBefore(e){return IR(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,i=null){let r=mp(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return mp(this,e,n,i)}get node(){return this}matchContext(e){return gp(this,e)}}class yp{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof rs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof rs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Yt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Yt.IncludeAnonymous||a instanceof Ca||!a.type.isAnonymous||N1(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new Zs(this.buffer,n,this.stack[r]);return this.bufferNode=new Zs(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return gp(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return gp(this.node,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function N1(t){return t.children.some(e=>e instanceof Ca||!e.type.isAnonymous||N1(e))}function W7(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=F7,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new R1(n,n.length):n,l=i.types,u=0,c=0;function d(x,k,O,T,A){let{id:N,start:_,end:M,size:H}=a,F=c;for(;H<0;)if(a.next(),H==-1){let $=s[N];O.push($),T.push(_-x);return}else if(H==-3){u=N;return}else if(H==-4){c=N;return}else throw new RangeError(`Unrecognized record size: ${H}`);let j=l[N],X,J,G=_-x;if(M-_<=r&&(J=g(a.pos-k,A))){let $=new Uint16Array(J.size-J.skip),I=a.pos-J.size,Y=$.length;for(;a.pos>I;)Y=w(J.start,$,Y);X=new Ca($,M-J.start,i),G=J.start-x}else{let $=a.pos-H;a.next();let I=[],Y=[],ae=N>=o?N:-1,ve=0,Se=M;for(;a.pos>$;)ae>=0&&a.id==ae&&a.size>=0?(a.end<=Se-r&&(f(I,Y,_,ve,a.end,Se,ae,F),ve=I.length,Se=a.end),a.next()):d(_,$,I,Y,ae);if(ae>=0&&ve>0&&ve<I.length&&f(I,Y,_,ve,_,Se,ae,F),I.reverse(),Y.reverse(),ae>-1&&ve>0){let U=h(j);X=M1(j,I,Y,0,I.length,0,M-_,U,U)}else X=p(j,I,Y,M-_,F-M)}O.push(X),T.push(G)}function h(x){return(k,O,T)=>{let A=0,N=k.length-1,_,M;if(N>=0&&(_=k[N])instanceof wt){if(!N&&_.type==x&&_.length==T)return _;(M=_.prop(Ue.lookAhead))&&(A=O[N]+_.length+M)}return p(x,k,O,T,A)}}function f(x,k,O,T,A,N,_,M){let H=[],F=[];for(;x.length>T;)H.push(x.pop()),F.push(k.pop()+O-A);x.push(p(i.types[_],H,F,N-A,M-N)),k.push(A-O)}function p(x,k,O,T,A=0,N){if(u){let _=[Ue.contextHash,u];N=N?[_].concat(N):[_]}if(A>25){let _=[Ue.lookAhead,A];N=N?[_].concat(N):[_]}return new wt(x,k,O,T,N)}function g(x,k){let O=a.fork(),T=0,A=0,N=0,_=O.end-r,M={size:0,start:0,skip:0};e:for(let H=O.pos-x;O.pos>H;){let F=O.size;if(O.id==k&&F>=0){M.size=T,M.start=A,M.skip=N,N+=4,T+=4,O.next();continue}let j=O.pos-F;if(F<0||j<H||O.start<_)break;let X=O.id>=o?4:0,J=O.start;for(O.next();O.pos>j;){if(O.size<0)if(O.size==-3)X+=4;else break e;else O.id>=o&&(X+=4);O.next()}A=J,T+=F,N+=X}return(k<0||T==x)&&(M.size=T,M.start=A,M.skip=N),M.size>4?M:void 0}function w(x,k,O){let{id:T,start:A,end:N,size:_}=a;if(a.next(),_>=0&&T<o){let M=O;if(_>4){let H=a.pos-(_-4);for(;a.pos>H;)O=w(x,k,O)}k[--O]=M,k[--O]=N-x,k[--O]=A-x,k[--O]=T}else _==-3?u=T:_==-4&&(c=T);return O}let m=[],y=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,m,y,-1);let v=(e=t.length)!==null&&e!==void 0?e:m.length?y[0]+m[0].length:0;return new wt(l[t.topID],m.reverse(),y.reverse(),v)}const Bk=new WeakMap;function of(t,e){if(!t.isAnonymous||e instanceof Ca||e.type!=t)return 1;let n=Bk.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof wt)){n=1;break}n+=of(t,i)}Bk.set(e,n)}return n}function M1(t,e,n,i,r,s,o,a,l){let u=0;for(let p=i;p<r;p++)u+=of(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,g,w,m,y){for(let v=w;v<m;){let x=v,k=g[v],O=of(t,p[v]);for(v++;v<m;v++){let T=of(t,p[v]);if(O+T>=c)break;O+=T}if(v==x+1){if(O>c){let T=p[x];f(T.children,T.positions,0,T.children.length,g[x]+y);continue}d.push(p[x])}else{let T=g[v-1]+p[v-1].length-k;d.push(M1(t,p,g,x,v,k,T,null,l))}h.push(k+y-s)}}return f(e,n,i,r,0),(a||l)(d,h,o)}class ea{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new ea(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new ea(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return r}}class BR{startParse(e,n,i){return typeof e=="string"&&(e=new G7(e)),i=i?i.length?i.map(r=>new sy(r.from,r.to)):[new sy(0,0)]:[new sy(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class G7{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Ue({perNode:!0});let K7=0;class Zt{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=K7++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Zt([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new vp;return n=>n.modified.indexOf(e)>-1?n:vp.get(n.base||n,n.modified.concat(e).sort((i,r)=>i.id-r.id))}}let X7=0;class vp{constructor(){this.instances=[],this.id=X7++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&Z7(n,a.modified));if(i)return i;let r=[],s=new Zt(r,e,n);for(let a of n)a.instances.push(s);let o=J7(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(vp.get(a,l));return s}}function Z7(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function J7(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Y7(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+r);let c=new wp(i,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return zR.add(e)}const zR=new Ue;class wp{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}wp.empty=new wp([],2,null);function jR(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function q7(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function Q7(t,e,n,i=0,r=t.length){let s=new eU(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class eU{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=tU(e)||wp.empty,d=q7(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(Ue.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(w=>!w.scope||w.scope(h.tree.type)),g=e.firstChild();for(let w=0,m=a;;w++){let y=w<h.overlay.length?h.overlay[w]:null,v=y?y.from+a:l,x=Math.max(n,m),k=Math.min(i,v);if(x<k&&g)for(;e.from<k&&(this.highlightRange(e,x,k,r,s),this.startSpan(Math.min(k,e.to),u),!(e.to>=v||!e.nextSibling())););if(!y||v>i)break;m=y.to+a,m>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+a),Math.min(i,m),"",p),this.startSpan(Math.min(i,m),u))}g&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function tU(t){let e=t.type.prop(zR);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const le=Zt.define,gh=le(),Ts=le(),zk=le(Ts),jk=le(Ts),Rs=le(),yh=le(Rs),oy=le(Rs),sr=le(),Mo=le(sr),ir=le(),rr=le(),Ev=le(),Ru=le(Ev),vh=le(),Ne={comment:gh,lineComment:le(gh),blockComment:le(gh),docComment:le(gh),name:Ts,variableName:le(Ts),typeName:zk,tagName:le(zk),propertyName:jk,attributeName:le(jk),className:le(Ts),labelName:le(Ts),namespace:le(Ts),macroName:le(Ts),literal:Rs,string:yh,docString:le(yh),character:le(yh),attributeValue:le(yh),number:oy,integer:le(oy),float:le(oy),bool:le(Rs),regexp:le(Rs),escape:le(Rs),color:le(Rs),url:le(Rs),keyword:ir,self:le(ir),null:le(ir),atom:le(ir),unit:le(ir),modifier:le(ir),operatorKeyword:le(ir),controlKeyword:le(ir),definitionKeyword:le(ir),moduleKeyword:le(ir),operator:rr,derefOperator:le(rr),arithmeticOperator:le(rr),logicOperator:le(rr),bitwiseOperator:le(rr),compareOperator:le(rr),updateOperator:le(rr),definitionOperator:le(rr),typeOperator:le(rr),controlOperator:le(rr),punctuation:Ev,separator:le(Ev),bracket:Ru,angleBracket:le(Ru),squareBracket:le(Ru),paren:le(Ru),brace:le(Ru),content:sr,heading:Mo,heading1:le(Mo),heading2:le(Mo),heading3:le(Mo),heading4:le(Mo),heading5:le(Mo),heading6:le(Mo),contentSeparator:le(sr),list:le(sr),quote:le(sr),emphasis:le(sr),strong:le(sr),link:le(sr),monospace:le(sr),strikethrough:le(sr),inserted:le(),deleted:le(),changed:le(),invalid:le(),meta:vh,documentMeta:le(vh),annotation:le(vh),processingInstruction:le(vh),definition:Zt.defineModifier(),constant:Zt.defineModifier(),function:Zt.defineModifier(),standard:Zt.defineModifier(),local:Zt.defineModifier(),special:Zt.defineModifier()};jR([{tag:Ne.link,class:"tok-link"},{tag:Ne.heading,class:"tok-heading"},{tag:Ne.emphasis,class:"tok-emphasis"},{tag:Ne.strong,class:"tok-strong"},{tag:Ne.keyword,class:"tok-keyword"},{tag:Ne.atom,class:"tok-atom"},{tag:Ne.bool,class:"tok-bool"},{tag:Ne.url,class:"tok-url"},{tag:Ne.labelName,class:"tok-labelName"},{tag:Ne.inserted,class:"tok-inserted"},{tag:Ne.deleted,class:"tok-deleted"},{tag:Ne.literal,class:"tok-literal"},{tag:Ne.string,class:"tok-string"},{tag:Ne.number,class:"tok-number"},{tag:[Ne.regexp,Ne.escape,Ne.special(Ne.string)],class:"tok-string2"},{tag:Ne.variableName,class:"tok-variableName"},{tag:Ne.local(Ne.variableName),class:"tok-variableName tok-local"},{tag:Ne.definition(Ne.variableName),class:"tok-variableName tok-definition"},{tag:Ne.special(Ne.variableName),class:"tok-variableName2"},{tag:Ne.definition(Ne.propertyName),class:"tok-propertyName tok-definition"},{tag:Ne.typeName,class:"tok-typeName"},{tag:Ne.namespace,class:"tok-namespace"},{tag:Ne.className,class:"tok-className"},{tag:Ne.macroName,class:"tok-macroName"},{tag:Ne.propertyName,class:"tok-propertyName"},{tag:Ne.operator,class:"tok-operator"},{tag:Ne.comment,class:"tok-comment"},{tag:Ne.meta,class:"tok-meta"},{tag:Ne.invalid,class:"tok-invalid"},{tag:Ne.punctuation,class:"tok-punctuation"}]);var ay;const rl=new Ue;function nU(t){return be.define({combine:t?e=>e.concat(t):void 0})}const iU=new Ue;class Vi{constructor(e,n,i=[],r=""){this.data=e,this.name=r,ze.prototype.hasOwnProperty("tree")||Object.defineProperty(ze.prototype,"tree",{get(){return Qi(this)}}),this.parser=n,this.extension=[Ql.of(this),ze.languageData.of((s,o,a)=>{let l=Fk(s,o,a),u=l.type.prop(rl);if(!u)return[];let c=s.facet(u),d=l.type.prop(iU);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return Fk(e,n,i).type.prop(rl)==this.data}findRegions(e){let n=e.facet(Ql);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(rl)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(Ue.mounted);if(a){if(a.tree.prop(rl)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof wt&&r(u,s.positions[l]+o)}};return r(Qi(e),0),i}get allowsNesting(){return!0}}Vi.setState=$e.define();function Fk(t,e,n){let i=t.facet(Ql),r=Qi(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Yt.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Qi(t){let e=t.field(Vi.state,!1);return e?e.tree:wt.empty}class rU{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Nu=null;class Yl{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Yl(e,n,[],wt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new rU(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=wt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(ea.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ea.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Nu;Nu=this;try{return e()}finally{Nu=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Uk(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),i=ea.applyChanges(i,l),r=wt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new Yl(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=Uk(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends BR{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Nu;if(l){for(let u of r)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new wt(Hn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Nu}}function Uk(t,e,n){return ea.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class ql{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new ql(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Yl.create(e.facet(Ql).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new ql(i)}}Vi.state=mn.define({create:ql.init,update(t,e){for(let n of e.effects)if(n.is(Vi.setState))return n.value;return e.startState.facet(Ql)!=e.state.facet(Ql)?ql.init(e.state):t.apply(e)}});let FR=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(FR=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const ly=typeof navigator<"u"&&(!((ay=navigator.scheduling)===null||ay===void 0)&&ay.isInputPending)?()=>navigator.scheduling.isInputPending():null,sU=sn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Vi.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Vi.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=FR(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Vi.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!ly?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>ly&&ly()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Vi.setState.of(new ql(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Gi(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ql=be.define({combine(t){return t.length?t[0]:null},enables:t=>[Vi.state,sU,Ce.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class oU{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const UR=be.define(),D1=be.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function ya(t){let e=t.facet(D1);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function bp(t,e){let n="",i=t.tabSize,r=t.facet(D1)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function VR(t,e){t instanceof ze&&(t=new _1(t));for(let i of t.state.facet(UR)){let r=i(t,e);if(r!==void 0)return r}let n=Qi(t.state);return n?lU(t,n,e):null}class _1{constructor(e,n={}){this.state=e,this.options=n,this.unit=ya(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return em(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const aU=new Ue;function lU(t,e,n){return HR(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function uU(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function cU(t){let e=t.type.prop(aU);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(Ue.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>pU(o,!0,1,void 0,s&&!uU(o)?r.from:void 0)}return t.parent==null?dU:null}function HR(t,e,n){for(;t;t=t.parent){let i=cU(t);if(i)return i(L1.create(n,e,t))}return null}function dU(){return 0}class L1 extends _1{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.node=i}static create(e,n,i){return new L1(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(hU(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?HR(e,this.pos,this.base):0}}function hU(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function fU(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function pU(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=e?fU(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const mU=200;function gU(){return ze.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+mU)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let d=VR(o,c.from);if(d==null)continue;let h=/^\s*/.exec(c.text)[0],f=bp(o,d);h!=f&&l.push({from:c.from,to:c.from+h.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const yU=be.define(),vU=new Ue;function wU(t,e,n){let i=Qi(t);if(i.length<n)return null;let r=i.resolveInner(n,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(vU);if(a&&(o.to<i.length-50||i.length==t.doc.length||!bU(o))){let l=a(o,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(s=l)}}return s}function bU(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function WR(t,e,n){for(let i of t.facet(yU)){let r=i(t,e,n);if(r)return r}return wU(t,e,n)}function GR(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const $1=$e.define({map:GR}),Tm=$e.define({map:GR});function KR(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const xd=mn.define({create(){return He.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is($1)&&!xU(t,n.value.from,n.value.to)?t=t.update({add:[Vk.range(n.value.from,n.value.to)]}):n.is(Tm)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>Ce.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(Vk.range(i,r))}return He.set(e,!0)}});function XR(t,e,n){var i;let r=null;return(i=t.field(xd,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function xU(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function ZR(t,e){return t.field(xd,!1)?e:e.concat($e.appendConfig.of(PU()))}const SU=t=>{for(let e of KR(t)){let n=WR(t.state,e.from,e.to);if(n)return t.dispatch({effects:ZR(t.state,[$1.of(n),JR(t,n)])}),!0}return!1},kU=t=>{if(!t.state.field(xd,!1))return!1;let e=[];for(let n of KR(t)){let i=XR(t.state,n.from,n.to);i&&e.push(Tm.of(i),JR(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function JR(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Ce.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const EU=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=WR(e,r.from,r.to);s&&n.push($1.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:ZR(t.state,n)}),!!n.length},CU=t=>{let e=t.state.field(xd,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(Tm.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},AU={placeholderDOM:null,placeholderText:"…"},YR=be.define({combine(t){return Eo(t,AU)}});function PU(t){let e=[xd,OU];return t&&e.push(YR.of(t)),e}const Vk=He.replace({widget:new class extends Sa{toDOM(t){let{state:e}=t,n=e.facet(YR),i=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),a=XR(t.state,o.from,o.to);a&&t.dispatch({effects:Tm.of(a)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),OU=Ce.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Rm{constructor(e,n){this.specs=e;let i;function r(a){let l=uo.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof Vi?a=>a.prop(rl)==o.data:o?a=>a==o:void 0,this.style=jR(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new uo(i):null,this.themeType=n.themeType}static define(e,n){return new Rm(e,n||{})}}const Cv=be.define(),qR=be.define({combine(t){return t.length?[t[0]]:null}});function uy(t){let e=t.facet(Cv);return e.length?e:t.facet(qR)}function TU(t,e){let n=[NU],i;return t instanceof Rm&&(t.module&&n.push(Ce.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(qR.of(t)):i?n.push(Cv.computeN([Ce.darkTheme],r=>r.facet(Ce.darkTheme)==(i=="dark")?[t]:[])):n.push(Cv.of(t)),n}class RU{constructor(e){this.markCache=Object.create(null),this.tree=Qi(e.state),this.decorations=this.buildDeco(e,uy(e.state))}update(e){let n=Qi(e.state),i=uy(e.state),r=i!=uy(e.startState);n.length<e.view.viewport.to&&!r&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,n){if(!n||!this.tree.length)return He.none;let i=new ua;for(let{from:r,to:s}of e.visibleRanges)Q7(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=He.mark({class:l})))},r,s);return i.finish()}}const NU=cd.high(sn.fromClass(RU,{decorations:t=>t.decorations})),MU=1e4,DU="()[]{}",_U=new Ue;function Av(t,e,n){let i=t.prop(e<0?Ue.openedBy:Ue.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Pv(t){let e=t.type.prop(_U);return e?e(t.node):t}function wh(t,e,n,i={}){let r=i.maxScanDistance||MU,s=i.brackets||DU,o=Qi(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=Av(l.type,n,s);if(u&&l.from<l.to){let c=Pv(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return LU(t,e,n,l,c,u,s)}}return $U(t,e,n,o,a.type,r,s)}function LU(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=Pv(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Av(c.type,n,o))u++;else if(Av(c.type,-n,o)){if(u==0){let d=Pv(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function $U(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let g=n>0?0:f.length-1,w=n>0?f.length:-1;g!=w;g+=n){let m=o.indexOf(f[g]);if(!(m<0||i.resolveInner(p+g,1).type!=r))if(m%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+g,to:p+g+1},matched:m>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function Hk(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class QR{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Hk(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Hk(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function IU(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||BU,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||z1}}function BU(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const Wk=new WeakMap;class I1 extends Vi{constructor(e){let n=nU(e.languageData),i=IU(e),r,s=new class extends BR{createParse(o,a,l){return new jU(r,o,a,l)}};super(n,s,[UR.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=VU(n),r=this,this.streamParser=i,this.stateAfter=new Ue({perNode:!0}),this.tokenTable=e.tokenTable?new iN(i.tokenTable):UU}static define(e){return new I1(e)}getIndent(e,n){let i=Qi(e.state),r=i.resolve(n);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=Wk.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=B1(this,i,0,r.from,s??n),l,u;if(a?(u=a.state,l=a.pos+1):(u=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),h=Math.min(n,d.to);if(d.length){let f=o?o(d.from):-1,p=new QR(d.text,e.state.tabSize,e.unit,f<0?void 0:f);for(;p.pos<h-d.from;)tN(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==n)break;l=d.to+1}let c=e.lineAt(n);return o&&s==null&&Wk.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function B1(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof wt&&l<r&&B1(t,a,l,i,r);if(u)return u}return null}function eN(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof wt){if(!(l=eN(t,a,n-o,i-o,r)))break;return r?new wt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function zU(t,e,n,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),a=s<=n&&o>n&&B1(t,r.tree,0-r.offset,n,o),l;if(a&&(l=eN(t,r.tree,n+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(i?ya(i):4),tree:wt.empty}}class jU{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Yl.get(),o=r[0].from,{state:a,tree:l}=zU(e,i,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(ya(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Yl.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,n,i,r),s}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new QR(n,e?e.state.tabSize:4,e?ya(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=tN(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=wt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:FU,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new wt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new wt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function tN(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const z1=Object.create(null),nd=[Hn.none],FU=new T1(nd),Gk=[],nN=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])nN[t]=rN(z1,e);class iN{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),nN)}resolve(e){return e?this.table[e]||(this.table[e]=rN(this.extra,e)):0}}const UU=new iN(z1);function cy(t,e){Gk.indexOf(t)>-1||(Gk.push(t),console.warn(e))}function rN(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||Ne[s];o?typeof o=="function"?n?n=o(n):cy(s,`Modifier ${s} used at start of tag`):n?cy(s,`Tag ${s} used as modifier`):n=o:cy(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let i=e.replace(/ /g,"_"),r=Hn.define({id:nd.length,name:i,props:[Y7({[i]:n})]});return nd.push(r),r.id}function VU(t){let e=Hn.define({id:nd.length,name:"Document",props:[rl.add(()=>t)]});return nd.push(e),e}const HU=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=j1(t.state,n.from);return i.line?WU(t):i.block?ZU(t):!1};function Sd(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const WU=Sd(F1,0),GU=Sd(F1,1),KU=Sd(F1,2),XU=Sd(sN,0),ZU=Sd((t,e)=>sN(t,e,YU(e)),0);function j1(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Mu=50;function JU(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Mu,i),o=t.sliceDoc(r,r+Mu),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,d;r-i<=2*Mu?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+Mu),d=t.sliceDoc(r-Mu,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function YU(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function sN(t,e,n=e.selection.ranges){let i=n.map(s=>j1(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>JU(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function F1(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,u=j1(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const Ov=ys.define(),qU=ys.define(),QU=be.define(),oN=be.define({combine(t){return Eo(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}});function eV(t){let e=0;return t.iterChangedRanges((n,i)=>e=i),e}const aN=mn.define({create(){return xr.empty},update(t,e){let n=e.state.facet(oN),i=e.annotation(Ov);if(i){let l=e.docChanged?ee.single(eV(e.changes)):void 0,u=Bn.fromTransaction(e,l),c=i.side,d=c==0?t.undone:t.done;return u?d=xp(d,d.length,n.minDepth,u):d=cN(d,e.startState.selection),new xr(c==0?i.rest:d,c==0?d:i.rest)}let r=e.annotation(qU);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Ut.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Bn.fromTransaction(e),o=e.annotation(Ut.time),a=e.annotation(Ut.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new xr(t.done.map(Bn.fromJSON),t.undone.map(Bn.fromJSON))}});function tV(t={}){return[aN,oN.of(t),Ce.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?lN:e.inputType=="historyRedo"?Tv:null;return i?(e.preventDefault(),i(n)):!1}})]}function U1(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(aN,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const lN=U1(0,!1),Tv=U1(1,!1),nV=U1(0,!0);class Bn{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Bn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Bn(e.changes&&Bt.fromJSON(e.changes),[],e.mapped&&Er.fromJSON(e.mapped),e.startSelection&&ee.fromJSON(e.startSelection),e.selectionsAfter.map(ee.fromJSON))}static fromTransaction(e,n){let i=ki;for(let r of e.startState.facet(QU)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Bn(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,ki)}static selection(e){return new Bn(void 0,ki,void 0,void 0,e)}}function xp(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function iV(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(i=!0)}}),i}function rV(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function uN(t,e){return t.length?e.length?t.concat(e):t:e}const ki=[],sV=200;function cN(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-sV));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),xp(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Bn.selection([e])]}function oV(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function dy(t,e){if(!t.length)return t;let n=t.length,i=ki;for(;n;){let r=aV(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Bn.selection(i)]:ki}function aV(t,e,n){let i=uN(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):ki,n);if(!t.changes)return Bn.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Bn(r,$e.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const lV=/^(input\.type|delete)($|\.)/;class xr{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new xr(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||lV.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,iV(a.changes,e.changes))||i=="input.type.compose")?o=xp(o,o.length-1,r.minDepth,new Bn(e.changes.compose(a.changes),uN(e.effects,a.effects),a.mapped,a.startSelection,ki)):o=xp(o,o.length,r.minDepth,e),new xr(o,ki,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:ki;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&rV(s[s.length-1],e)?this:new xr(cN(this.done,e),this.undone,n,i)}addMapping(e){return new xr(dy(this.done,e),dy(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Ov.of({side:e,rest:oV(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?ki:r.slice(0,r.length-1);return s.mapped&&(o=dy(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Ov.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}xr.empty=new xr(ki,ki);function kd(t,e){return ee.create(t.ranges.map(e),t.mainIndex)}function Ao(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Aa({state:t,dispatch:e},n){let i=kd(t.selection,n);return i.eq(t.selection)?!1:(e(Ao(t,i)),!0)}function Nm(t,e){return ee.cursor(e?t.to:t.from)}function dN(t,e){return Aa(t,n=>n.empty?t.moveByChar(n,e):Nm(n,e))}function Po(t){return t.textDirectionAt(t.state.selection.main.head)==vt.LTR}const Kk=t=>dN(t,!Po(t)),Xk=t=>dN(t,Po(t));function hN(t,e){return Aa(t,n=>n.empty?t.moveByGroup(n,e):Nm(n,e))}const uV=t=>hN(t,!Po(t)),cV=t=>hN(t,Po(t));function fN(t,e){return Aa(t,n=>{if(!n.empty)return Nm(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const Zk=t=>fN(t,!1),Jk=t=>fN(t,!0);function pN(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Ce.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function mN(t,e){let n=pN(t),{state:i}=t,r=kd(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Nm(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Ce.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Ao(i,r),{effects:s}),!0}const hy=t=>mN(t,!1),fy=t=>mN(t,!0);function Mm(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=ee.cursor(i.from+s))}return r}const Yk=t=>Aa(t,e=>Mm(t,e,!0)),qk=t=>Aa(t,e=>Mm(t,e,!1)),dV=t=>Aa(t,e=>ee.cursor(t.lineBlockAt(e.head).from,1)),hV=t=>Aa(t,e=>ee.cursor(t.lineBlockAt(e.head).to,-1));function fV(t,e,n){let i=!1,r=kd(t.selection,s=>{let o=wh(t,s.head,-1)||wh(t,s.head,1)||s.head>0&&wh(t,s.head-1,1)||s.head<t.doc.length&&wh(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?ee.range(s.anchor,a):ee.cursor(a)});return i?(e(Ao(t,r)),!0):!1}const pV=({state:t,dispatch:e})=>fV(t,e,!1);function Oo(t,e){let n=kd(t.state.selection,i=>{let r=e(i);return ee.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Ao(t.state,n)),!0)}function gN(t,e){return Oo(t,n=>t.moveByChar(n,e))}const Qk=t=>gN(t,!Po(t)),eE=t=>gN(t,Po(t));function yN(t,e){return Oo(t,n=>t.moveByGroup(n,e))}const mV=t=>yN(t,!Po(t)),gV=t=>yN(t,Po(t));function vN(t,e){return Oo(t,n=>t.moveVertically(n,e))}const tE=t=>vN(t,!1),nE=t=>vN(t,!0);function wN(t,e){return Oo(t,n=>t.moveVertically(n,e,pN(t).height))}const iE=t=>wN(t,!1),rE=t=>wN(t,!0),sE=t=>Oo(t,e=>Mm(t,e,!0)),oE=t=>Oo(t,e=>Mm(t,e,!1)),yV=t=>Oo(t,e=>ee.cursor(t.lineBlockAt(e.head).from)),vV=t=>Oo(t,e=>ee.cursor(t.lineBlockAt(e.head).to)),aE=({state:t,dispatch:e})=>(e(Ao(t,{anchor:0})),!0),lE=({state:t,dispatch:e})=>(e(Ao(t,{anchor:t.doc.length})),!0),uE=({state:t,dispatch:e})=>(e(Ao(t,{anchor:t.selection.main.anchor,head:0})),!0),cE=({state:t,dispatch:e})=>(e(Ao(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),wV=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),bV=({state:t,dispatch:e})=>{let n=_m(t).map(({from:i,to:r})=>ee.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:ee.create(n),userEvent:"select"})),!0};function Dm(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(n="delete.backward",l=bh(t,l,!1)):l>o&&(n="delete.forward",l=bh(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=bh(t,o,!1),a=bh(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ee.cursor(o)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Ce.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function bh(t,e,n){if(t instanceof Ce)for(let i of t.state.facet(Ce.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const bN=(t,e)=>Dm(t,n=>{let{state:i}=t,r=i.doc.lineAt(n),s,o;if(!e&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,n-r.from))){if(s[s.length-1]=="	")return n-1;let a=em(s,i.tabSize),l=a%ya(i)||ya(i);for(let u=0;u<l&&s[s.length-1-u]==" ";u++)n--;o=n}else o=hn(r.text,n-r.from,e,e)+r.from,o==n&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),py=t=>bN(t,!1),dE=t=>bN(t,!0),xN=(t,e)=>Dm(t,n=>{let i=n,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=hn(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||i!=n)&&(a=c),i=l}return i}),hE=t=>xN(t,!1),xV=t=>xN(t,!0),fE=t=>Dm(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),SV=t=>Dm(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),kV=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ke.of(["",""])},range:ee.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},EV=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:hn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:hn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:ee.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function _m(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function SN(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of _m(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(ee.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(ee.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ee.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const CV=({state:t,dispatch:e})=>SN(t,e,!1),AV=({state:t,dispatch:e})=>SN(t,e,!0);function kN(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of _m(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const PV=({state:t,dispatch:e})=>kN(t,e,!1),OV=({state:t,dispatch:e})=>kN(t,e,!0),TV=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(_m(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=kd(e.selection,r=>t.moveVertically(r,!0)).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function RV(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Qi(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(Ue.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const pE=NV(!1);function NV(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&RV(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new _1(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=VR(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",bp(e,c)];return l&&d.push(bp(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ke.of(d)},range:ee.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function EN(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:ee.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const mE=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(EN(t,(n,i)=>{i.push({from:n.from,insert:t.facet(D1)})}),{userEvent:"input.indent"})),!0),gE=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(EN(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=em(r,t.tabSize),o=0,a=bp(t,Math.max(0,s-ya(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function nt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)CN(t,arguments[e]);return t}function CN(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)CN(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const yE=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class id{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(yE(a)):yE,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return bn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Iw(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ji(e);let r=this.normalize(n);for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:n+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(id.prototype[Symbol.iterator]=function(){return this});const AN={from:-1,to:-1,match:/.*/.exec("")},V1="gm"+(/x/.unicode==null?"":"u");class PN{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=AN,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new ON(e,n,i,r,s);this.re=new RegExp(n,V1+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Sp(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Sp(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const my=new WeakMap;class xl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=my.get(e);if(!r||r.from>=i||r.to<=n){let a=new xl(n,e.sliceString(n,i));return my.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),my.set(e,new xl(o,s)),new xl(n,s.slice(n-o,i-o))}}class ON{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=AN,this.matchPos=Sp(e,r),this.re=new RegExp(n,V1+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=xl.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Sp(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=xl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(PN.prototype[Symbol.iterator]=ON.prototype[Symbol.iterator]=function(){return this});function MV(t){try{return new RegExp(t,V1),!0}catch{return!1}}function Sp(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function Rv(t){let e=nt("input",{class:"cm-textfield",name:"line"}),n=nt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:kp.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},nt("label",t.state.phrase("Go to line"),": ",e)," ",nt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,a,l,u,c]=r,d=u?+u.slice(1):0,h=l?+l:o.number;if(l&&c){let g=h/100;a&&(g=g*(a=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*g)}else l&&a&&(h=h*(a=="-"?-1:1)+o.number);let f=s.doc.line(Math.max(1,Math.min(s.doc.lines,h))),p=ee.cursor(f.from+Math.max(0,Math.min(d,f.length)));t.dispatch({effects:[kp.of(!1),Ce.scrollIntoView(p.from,{y:"center"})],selection:p}),t.focus()}return{dom:n}}const kp=$e.define(),vE=mn.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(kp)&&(t=n.value);return t},provide:t=>jl.from(t,e=>e?Rv:null)}),DV=t=>{let e=Dc(t,Rv);if(!e){let n=[kp.of(!0)];t.state.field(vE,!1)==null&&n.push($e.appendConfig.of([vE,_V])),t.dispatch({effects:n}),e=Dc(t,Rv)}return e&&e.dom.querySelector("input").focus(),!0},_V=Ce.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),LV=({state:t,dispatch:e})=>{let{selection:n}=t,i=ee.create(n.ranges.map(r=>t.wordAt(r.head)||ee.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function $V(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new id(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new id(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const IV=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return LV({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=$V(t,i);return r?(e(t.update({selection:t.selection.addRange(ee.range(r.from,r.to),!1),effects:Ce.scrollIntoView(r.to)})),!0):!1},cu=be.define({combine(t){return Eo(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new GV(e),scrollToMatch:e=>Ce.scrollIntoView(e)})}});class TN{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||MV(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new FV(this):new zV(this)}getCursor(e,n=0,i){let r=e.doc?e:ze.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Ua(this,r,n,i):Fa(this,r,n,i)}}class RN{constructor(e){this.spec=e}}function Fa(t,e,n,i){return new id(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?BV(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function BV(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Ep(r,n-s))!=tn.Word||e(Cp(r,n-s))!=tn.Word)&&(e(Cp(r,i-s))!=tn.Word||e(Ep(r,i-s))!=tn.Word))}class zV extends RN{constructor(e){super(e)}nextMatch(e,n,i){let r=Fa(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=Fa(this.spec,e,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Fa(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Fa(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Fa(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Ua(t,e,n,i){return new PN(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?jV(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Ep(t,e){return t.slice(hn(t,e,!1),e)}function Cp(t,e){return t.slice(e,hn(t,e))}function jV(t){return(e,n,i)=>!i[0].length||(t(Ep(i.input,i.index))!=tn.Word||t(Cp(i.input,i.index))!=tn.Word)&&(t(Cp(i.input,i.index+i[0].length))!=tn.Word||t(Ep(i.input,i.index+i[0].length))!=tn.Word)}class FV extends RN{nextMatch(e,n,i){let r=Ua(this.spec,e,i,e.doc.length).next();return r.done&&(r=Ua(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Ua(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n))}matchAll(e,n){let i=Ua(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Ua(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const rd=$e.define(),H1=$e.define(),oo=mn.define({create(t){return new gy(Nv(t).create(),null)},update(t,e){for(let n of e.effects)n.is(rd)?t=new gy(n.value.create(),t.panel):n.is(H1)&&(t=new gy(t.query,n.value?W1:null));return t},provide:t=>jl.from(t,e=>e.panel)});class gy{constructor(e,n){this.query=e,this.panel=n}}const UV=He.mark({class:"cm-searchMatch"}),VV=He.mark({class:"cm-searchMatch cm-searchMatch-selected"}),HV=sn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(oo))}update(t){let e=t.state.field(oo);(e!=t.startState.field(oo)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return He.none;let{view:n}=this,i=new ua;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?VV:UV)})}return i.finish()}},{decorations:t=>t.decorations});function Ed(t){return e=>{let n=e.state.field(oo,!1);return n&&n.query.spec.valid?t(e,n):LN(e)}}const wE=Ed((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=ee.single(i.from,i.to),s=t.state.facet(cu);return t.dispatch({selection:r,effects:[G1(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),_N(t),!0}),bE=Ed((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=ee.single(r.from,r.to),o=t.state.facet(cu);return t.dispatch({selection:s,effects:[G1(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),_N(t),!0}),NN=Ed((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ee.create(n.map(i=>ee.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),WV=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new id(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(ee.range(a.value.from,a.value.to))}return e(t.update({selection:ee.create(s,o),userEvent:"select.search.matches"})),!0},xE=Ed((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=[],a,l,u=[];if(s.from==i&&s.to==r&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),u.push(Ce.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=ee.single(s.from-c,s.to-c),u.push(G1(t,s)),u.push(n.facet(cu).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:u,userEvent:"input.replace"}),!0}),MN=Ed((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Ce.announce.of(i),userEvent:"input.replace.all"}),!0});function W1(t){return t.state.facet(cu).createPanel(t)}function Nv(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(cu);return new TN({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function DN(t){let e=Dc(t,W1);return e&&e.dom.querySelector("[main-field]")}function _N(t){let e=DN(t);e&&e==t.root.activeElement&&e.select()}const LN=t=>{let e=t.state.field(oo,!1);if(e&&e.panel){let n=DN(t);if(n&&n!=t.root.activeElement){let i=Nv(t.state,e.query.spec);i.valid&&t.dispatch({effects:rd.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[H1.of(!0),e?rd.of(Nv(t.state,e.query.spec)):$e.appendConfig.of(XV)]});return!0},$N=t=>{let e=t.state.field(oo,!1);if(!e||!e.panel)return!1;let n=Dc(t,W1);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:H1.of(!1)}),!0};class GV{constructor(e){this.view=e;let n=this.query=e.state.field(oo).query.spec;this.commit=this.commit.bind(this),this.searchField=nt("input",{value:n.search,placeholder:Wn(e,"Find"),"aria-label":Wn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=nt("input",{value:n.replace,placeholder:Wn(e,"Replace"),"aria-label":Wn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=nt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=nt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=nt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return nt("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=nt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>wE(e),[Wn(e,"next")]),i("prev",()=>bE(e),[Wn(e,"previous")]),i("select",()=>NN(e),[Wn(e,"all")]),nt("label",null,[this.caseField,Wn(e,"match case")]),nt("label",null,[this.reField,Wn(e,"regexp")]),nt("label",null,[this.wordField,Wn(e,"by word")]),...e.state.readOnly?[]:[nt("br"),this.replaceField,i("replace",()=>xE(e),[Wn(e,"replace")]),i("replaceAll",()=>MN(e),[Wn(e,"replace all")])],nt("button",{name:"close",onclick:()=>$N(e),"aria-label":Wn(e,"close"),type:"button"},["×"])])}commit(){let e=new TN({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:rd.of(e)}))}keydown(e){N3(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?bE:wE)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),xE(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(rd)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(cu).top}}function Wn(t,e){return t.state.phrase(e)}const xh=30,Sh=/[\s\.,:;?!]/;function G1(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-xh),o=Math.min(r,n+xh),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<xh;l++)if(!Sh.test(a[l+1])&&Sh.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-xh;l--)if(!Sh.test(a[l-1])&&Sh.test(a[l])){a=a.slice(0,l);break}}return Ce.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const KV=Ce.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),XV=[oo,cd.lowest(HV),KV];class ZV{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=Qi(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(IN(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function SE(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function JV(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=SE(e)+SE(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function YV(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:JV(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class kE{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Sl(t){return t.selection.main.from}function IN(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const qV=ys.define();function QV(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i)?{range:a}:{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:e},range:ee.cursor(a.from+s+e.length)})),{userEvent:"input.complete"})}const EE=new WeakMap;function eH(t){if(!Array.isArray(t))return t;let e=EE.get(t);return e||EE.set(t,e=YV(t)),e}const BN=$e.define(),K1=$e.define();class tH{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=bn(e,n),r=ji(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(bn(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=bn(e,0),v=ji(y),x=v==e.length?0:-100;if(y!=n[0])if(y==i[0])x+=-200;else return!1;return this.ret(x,[0,v])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let y=0,v=Math.min(e.length,200);y<v&&u<l;){let x=bn(e,y);(x==n[u]||x==i[u])&&(r[u++]=y),y+=ji(x)}if(u<l)return!1}let c=0,d=0,h=!1,f=0,p=-1,g=-1,w=/[a-z]/.test(e),m=!0;for(let y=0,v=Math.min(e.length,200),x=0;y<v&&d<l;){let k=bn(e,y);a<0&&(c<l&&k==n[c]&&(s[c++]=y),f<l&&(k==n[f]||k==i[f]?(f==0&&(p=y),g=y+1,f++):f=0));let O,T=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(O=Iw(k))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!y||T==1&&w||x==0&&T!=0)&&(n[d]==k||i[d]==k&&(h=!0)?o[d++]=y:o.length&&(m=!1)),x=T,y+=ji(k)}return d==l&&o[0]==0&&m?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-200+-700-e.length,[p,g]):d==l?this.result(-100+(h?-200:0)+-700+(m?0:-1100),o,e):n.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?ji(bn(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}const Jr=be.define({combine(t){return Eo(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:nH,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>CE(e(i),n(i)),optionClass:(e,n)=>i=>CE(e(i),n(i)),addToOptions:(e,n)=>e.concat(n)})}});function CE(t,e){return t?e?t+" "+e:t:e}function nH(t,e,n,i,r){let s=t.textDirection==vt.RTL,o=s,a=!1,l="top",u,c,d=e.left-r.left,h=r.right-e.right,f=i.right-i.left,p=i.bottom-i.top;if(o&&d<Math.min(f,h)?o=!1:!o&&h<Math.min(f,d)&&(o=!0),f<=(o?d:h))u=Math.max(r.top,Math.min(n.top,r.bottom-p))-e.top,c=Math.min(400,o?d:h);else{a=!0,c=Math.min(400,(s?e.right:r.right-e.left)-30);let g=r.bottom-e.bottom;g>=p||g>e.top?u=n.bottom-e.top:(l="bottom",u=e.bottom-n.top)}return{style:`${l}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":o?"left":"right")}}function iH(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r){let s=document.createElement("span");s.className="cm-completionLabel";let o=n.displayLabel||n.label,a=0;for(let l=0;l<r.length;){let u=r[l++],c=r[l++];u>a&&s.appendChild(document.createTextNode(o.slice(a,u)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(u,c))),d.className="cm-completionMatchedText",a=c}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function AE(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class rH{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(Jr);this.optionContent=iH(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=AE(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let u=l.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<s.length){this.applyCompletion(e,s[+c[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Jr).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:K1.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,i,r;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=s.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=AE(n.options.length,n.selected,this.view.state.facet(Jr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>Gi(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&oH(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Jr).positionInfo(this.view,n,r,i,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,l);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function sH(t,e){return n=>new rH(n,t,e)}function oH(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<n.top?t.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(t.scrollTop+=i.bottom-n.bottom)}function PE(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function aH(t,e){let n=[],i=null,r=l=>{n.push(l);let{section:u}=l.completion;if(u){i||(i=[]);let c=typeof u=="string"?u:u.name;i.some(d=>d.name==c)||i.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult()){let u=l.result.getMatch;if(l.result.filter===!1)for(let c of l.result.options)r(new kE(c,l.source,u?u(c):[],1e9-n.length));else{let c=new tH(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(c.match(d.label)){let h=d.displayLabel?u?u(d,c.matched):[]:c.matched;r(new kE(d,l.source,h,c.score+(d.boost||0)))}}}if(i){let l=Object.create(null),u=0,c=(d,h)=>{var f,p;return((f=d.rank)!==null&&f!==void 0?f:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(d.name<h.name?-1:1)};for(let d of i.sort(c))u-=1e5,l[d.name]=u;for(let d of n){let{section:h}=d.completion;h&&(d.score+=l[typeof h=="string"?h:h.name])}}let s=[],o=null,a=e.facet(Jr).compareCompletions;for(let l of n.sort((u,c)=>c.score-u.score||a(u.completion,c.completion))){let u=l.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?s.push(l):PE(l.completion)>PE(o)&&(s[s.length-1]=l),o=l.completion}return s}class sl{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new sl(this.options,OE(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s){let o=aH(e,n);if(!o.length)return r&&e.some(l=>l.state==1)?new sl(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let a=n.facet(Jr).selectOnOpen?0:-1;if(r&&r.selected!=a&&r.selected!=-1){let l=r.options[r.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){a=u;break}}return new sl(o,OE(i,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:sH(du,jN),above:s.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new sl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Ap{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Ap(cH,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Jr),s=(i.override||n.languageDataAt("autocomplete",Sl(n)).map(eH)).map(a=>(this.active.find(u=>u.source==a)||new ti(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!lH(s,this.active)?o=sl.build(s,n,this.id,o,i):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new ti(a.source,0):a));for(let a of e.effects)a.is(zN)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Ap(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:uH}}function lH(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const uH={"aria-autocomplete":"list"};function OE(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const cH=[];function dH(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class ti{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=dH(e),r=this;i?r=r.handleUserEvent(e,i,n):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new ti(r.source,0));for(let s of e.effects)if(s.is(BN))r=new ti(r.source,1,s.value?Sl(e.state):-1);else if(s.is(K1))r=new ti(r.source,0);else if(s.is(fH))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new ti(this.source,1)}handleChange(e){return e.changes.touchesRange(Sl(e.startState))?new ti(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ti(this.source,this.state,e.mapPos(this.explicitPos))}}class lc extends ti{constructor(e,n,i,r,s){super(e,2,n),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,n,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Sl(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&Sl(e.startState)==this.from)return new ti(this.source,n=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return hH(this.result.validFor,e.state,s,o)?new lc(this.source,l,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new ZV(e.state,a,l>=0)))?new lc(this.source,l,u,u.from,(r=u.to)!==null&&r!==void 0?r:Sl(e.state)):new ti(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ti(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new lc(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function hH(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):IN(t,!0).test(r)}const fH=$e.define({map(t,e){return t.map(n=>n.map(e))}}),zN=$e.define(),du=mn.define({create(){return Ap.start()},update(t,e){return t.update(e)},provide:t=>[Kw.from(t,e=>e.tooltip),Ce.contentAttributes.from(t,e=>e.attrs)]});function jN(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(du).active.find(r=>r.source==e.source);return i instanceof lc?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},QV(t.state,n,i.from,i.to)),{annotations:qV.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}function kh(t,e="option"){return n=>{let i=n.state.field(du,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Jr).interactionDelay)return!1;let r=1,s;e=="page"&&(s=c5(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:zN.of(a)}),!0}}const TE=t=>{let e=t.state.field(du,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Jr).interactionDelay?!1:jN(t,e.open.options[e.open.selected])},pH=t=>t.state.field(du,!1)?(t.dispatch({effects:BN.of(!0)}),!0):!1,mH=t=>{let e=t.state.field(du,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:K1.of(null)}),!0)},FN={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},UN=new class extends la{};UN.startSide=1;UN.endSide=-1;const yy="()[]{}<>";function gH(t){for(let e=0;e<yy.length;e+=2)if(yy.charCodeAt(e)==t)return yy.charAt(e+1);return Iw(t<128?t:t+1)}function yH(t,e){return t.languageDataAt("closeBrackets",e)[0]||FN}const vH=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=yH(t,t.selection.main.head).brackets||FN.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=bH(t.doc,o.head);for(let l of i)if(l==a&&wH(t.doc,o.head)==gH(bn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ee.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function wH(t,e){let n=t.sliceString(e,e+2);return n.slice(0,ji(bn(n,0)))}function bH(t,e){let n=t.sliceString(e-2,e);return ji(bn(n,0))==n.length?n:n.slice(1)}class xH{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class jo{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(Xo).markerFilter;s&&(r=s(r));let o=He.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?He.widget({widget:new MH(a),diagnostic:a}).range(a.from):He.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new jo(o,n,eu(o))}}function eu(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new xH(r,s,o.diagnostic),!1}),i}function SH(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(i=>i.is(X1))||t.changes.touchesRange(n.from,n.to))}function VN(t,e){return t.field(zn,!1)?e:e.concat($e.appendConfig.of(KN))}function kH(t,e){return{effects:VN(t,[X1.of(e)])}}const X1=$e.define(),Z1=$e.define(),HN=$e.define(),zn=mn.define({create(){return new jo(He.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=eu(n,t.selected.diagnostic,r)||eu(n,null,r)}t=new jo(n,t.panel,i)}for(let n of e.effects)n.is(X1)?t=jo.init(n.value,t.panel,e.state):n.is(Z1)?t=new jo(t.diagnostics,n.value?Lm.open:null,t.selected):n.is(HN)&&(t=new jo(t.diagnostics,t.panel,n.value));return t},provide:t=>[jl.from(t,e=>e.panel),Ce.decorations.from(t,e=>e.diagnostics)]});function EH(t){let e=t.field(zn,!1);return e?e.diagnostics.size:0}const CH=He.mark({class:"cm-lintRange cm-lintRange-active"});function AH(t,e,n){let{diagnostics:i}=t.state.field(zn),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(Xo).tooltipFilter;return a&&(r=a(r)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:PH(t,r)}}}:null}function PH(t,e){return nt("ul",{class:"cm-tooltip-lint"},e.map(n=>GN(t,n,!1)))}const OH=t=>{let e=t.state.field(zn,!1);(!e||!e.panel)&&t.dispatch({effects:VN(t.state,[Z1.of(!0)])});let n=Dc(t,Lm.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},RE=t=>{let e=t.state.field(zn,!1);return!e||!e.panel?!1:(t.dispatch({effects:Z1.of(!1)}),!0)},TH=t=>{let e=t.state.field(zn,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},RH=sn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Xo);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Xo);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(kH(this.view.state,r))},i=>{Gi(this.view.state,i)})}}update(t){let e=t.state.facet(Xo);(t.docChanged||e!=t.startState.facet(Xo)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Xo=be.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Eo(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function NH(t,e={}){return[Xo.of({source:t,config:e}),RH,KN]}function WN(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function GN(t,e,n){var i;let r=n?WN(e.actions):[];return nt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},nt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=eu(t.state.field(zn).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),nt("u",u.slice(c,c+1)),u.slice(c+1)];return nt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&nt("div",{class:"cm-diagnosticSource"},e.source))}class MH extends Sa{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return nt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class NE{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=GN(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Lm{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)RE(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=WN(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=eu(this.view.state.field(zn).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=nt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=nt("div",{class:"cm-panel-lint"},this.list,nt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>RE(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(zn).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(zn),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new NE(this.view,l.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new NE(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(zn),i=eu(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:HN.of(i)})}static open(e){return new Lm(e)}}function DH(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Eh(t){return DH(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const _H=Ce.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Eh("#d11")},".cm-lintRange-warning":{backgroundImage:Eh("orange")},".cm-lintRange-info":{backgroundImage:Eh("#999")},".cm-lintRange-hint":{backgroundImage:Eh("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),KN=[zn,Ce.decorations.compute([zn],t=>{let{selected:e,panel:n}=t.field(zn);return!e||!n||e.from==e.to?He.none:He.set([CH.range(e.from,e.to)])}),u5(AH,{hideOn:SH}),_H],XN=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},LH=XN("up"),$H=XN("down"),IH=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(ee.range(s,s)):e=ee.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},BH=[{key:"Ctrl-Space",run:pH},{key:"Escape",run:mH},{key:"ArrowDown",run:kh(!0)},{key:"ArrowUp",run:kh(!1)},{key:"PageDown",run:kh(!0,"page")},{key:"PageUp",run:kh(!1,"page")},{key:"Enter",run:TE},{key:"Tab",run:TE},{key:"Mod-f",run:LN,scope:"editor search-panel"},{key:"Escape",run:$N,scope:"editor search-panel"},{key:"Alt-Enter",run:NN,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:MN,scope:"editor search-panel"},{key:"Ctrl-g",run:DV},{key:"Mod-d",run:IV,preventDefault:!0},{key:"Shift-Mod-l",run:WV},{key:"Enter",run:pE,shift:pE},{key:"ArrowLeft",run:Kk,shift:Qk,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:uV,shift:mV},{key:"ArrowRight",run:Xk,shift:eE,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cV,shift:gV},{key:"ArrowUp",run:Zk,shift:tE,preventDefault:!0},{key:"ArrowDown",run:Jk,shift:nE,preventDefault:!0},{key:"Home",run:qk,shift:oE},{mac:"Cmd-ArrowLeft",run:qk,shift:oE},{key:"Mod-Home",run:aE,shift:uE},{mac:"Cmd-ArrowUp",run:aE,shift:uE},{key:"PageUp",run:hy,shift:iE},{mac:"Ctrl-ArrowUp",run:hy,shift:iE},{key:"PageDown",run:fy,shift:rE},{mac:"Ctrl-ArrowDown",run:fy,shift:rE},{key:"End",run:Yk,shift:sE},{mac:"Cmd-ArrowRight",run:Yk,shift:sE},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:LH,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:$H,preventDefault:!0},{key:"Shift-Alt-i",run:IH},{key:"Mod-End",run:lE,shift:cE},{mac:"Cmd-ArrowDown",run:lE,shift:cE},{key:"Mod-a",run:wV},{key:"Backspace",run:vH},{key:"Backspace",run:py,shift:py},{key:"Delete",run:dE},{key:"Mod-Backspace",mac:"Alt-Backspace",run:hE},{key:"Mod-Delete",mac:"Alt-Delete",run:xV},{mac:"Mod-Backspace",run:SV},{mac:"Mod-Delete",run:fE},{mac:"Ctrl-b",run:Kk,shift:Qk,preventDefault:!0},{mac:"Ctrl-f",run:Xk,shift:eE},{mac:"Ctrl-p",run:Zk,shift:tE},{mac:"Ctrl-n",run:Jk,shift:nE},{mac:"Ctrl-a",run:dV,shift:yV},{mac:"Ctrl-e",run:hV,shift:vV},{mac:"Ctrl-d",run:dE},{mac:"Ctrl-h",run:py},{mac:"Ctrl-k",run:fE},{mac:"Ctrl-Alt-h",run:hE},{mac:"Ctrl-o",run:kV},{mac:"Ctrl-t",run:EV},{mac:"Ctrl-v",run:fy},{mac:"Alt-v",run:hy},{key:"Shift-Mod-k",run:TV},{key:"Alt-ArrowDown",run:AV},{key:"Alt-ArrowUp",run:CV},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:OV},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:PV},{key:"Mod-l",run:bV,preventDefault:!0},{key:"Shift-Mod-\\",run:pV},{key:"Tab",run:mE,shift:gE,preventDefault:!0},{key:"Mod-[",run:gE},{key:"Mod-]",run:mE},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:SU},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:kU},{key:"Mod-k Mod-0",run:EU},{key:"Mod-k Mod-j",run:CU},{key:"Mod-k Mod-c",run:GU},{key:"Mod-k Mod-u",run:KU},{key:"Mod-/",run:HU},{key:"Shift-Alt-a",run:XU},{key:"Mod-z",run:lN,preventDefault:!0},{key:"Mod-y",run:Tv,preventDefault:!0},{key:"Mod-Shift-z",run:Tv,preventDefault:!0},{key:"Mod-u",run:nV,preventDefault:!0},{key:"Mod-Shift-m",run:OH},{key:"F8",run:TH}];function zH(t){const e=document.createElement("div");return ME(t.state,e),{dom:e,update(n){ME(n.view.state,e)}}}function ME(t,e){const n=EH(t);e.textContent=im(ds().language,"editor.lintSummary",n),e.className=Je("border-t border-stone-600 bg-stone-800 pr-3 text-right font-sans text-xs tracking-wider",n===0?"text-stone-400":"font-semibold text-red-400")}const ZN="vonsim-program",jH=sn.fromClass(class{constructor(t){oe(this,"timeout",null);this.view=t}update(t){t.docChanged&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=this.view.state.doc.toString();localStorage.setItem(ZN,e),this.timeout=null},500))}}),FH=`; ¡Bienvenido a VonSim!
; Este es un ejemplo de código que calcula los primeros
; n números de la sucesión de Fibonacci, y se guardan a
; partir de la posición 1000h de la memoria.

     n EQU 10    ; Calcula los primeros 10 números

       ORG 1000h
inicio DB 1

       ORG 2000h
       MOV BX, OFFSET inicio + 1
       MOV AL, 0
       MOV AH, inicio

BUCLE: CMP BX, OFFSET inicio + n
       JNS FIN
       MOV CL, AH
       ADD CL, AL
       MOV AL, AH
       MOV AH, CL
       MOV [BX], CL
       INC BX
       JMP BUCLE
  FIN: HLT
       END
`,UH=localStorage.getItem(ZN)||FH,Gn={comment:Ne.comment,"data-directive":Zt.define(),identifier:Ne.variableName,instruction:Zt.define(),label:Ne.labelName,number:Ne.number,operator:Ne.operator,offset:Zt.define(),"ptr-size":Zt.define(),punctuation:Ne.punctuation,register:Zt.define(),special:Zt.define(),string:Ne.string,unassigned:Zt.define()},VH=I1.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":Dw.includes(e)?"data-directive":_w.includes(e)?"instruction":_f.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Gn}),HH=TU(Rm.define([{tag:Gn.comment,class:"text-stone-500 italic"},{tag:Gn["data-directive"],class:"text-rose-400/80"},{tag:Gn.instruction,class:"text-mantis-400"},{tag:Gn.number,class:"text-cyan-300/60"},{tag:Gn.operator,class:"text-rose-300"},{tag:Gn.offset,class:"text-rose-400/80 italic"},{tag:Gn["ptr-size"],class:"text-rose-400/80 italic"},{tag:Gn.punctuation,class:"text-stone-600"},{tag:Gn.register,class:"text-emerald-400/80"},{tag:Gn.special,class:"text-yellow-300/80"},{tag:Gn.string,class:"text-orange-300"},{tag:Gn.unassigned,class:"text-rose-400/80"}])),WH=NH(t=>{const e=t.state.doc.toString(),n=A2(e);if(n.success)return[];const i=ds().language;return n.errors.map(r=>{var a,l;const s=((a=r.position)==null?void 0:a.start)??0,o=((l=r.position)==null?void 0:l.end)??e.length;return{message:r.translate(i),severity:"error",from:s,to:o}})},{delay:200});function GH(){return new oU(VH,[HH,WH])}function KH({className:t}){const[e,n]=S.useState(),i=S.useCallback(r=>{r&&n(r)},[]);return S.useEffect(()=>{if(e)return window.codemirror=new Ce({state:ze.create({doc:UH,extensions:[ze.tabSize.of(2),eO.of(ze.readOnly.of(!1)),jH,v5(),S5,x5(),X3(),tV(),I3(),U3(),ze.allowMultipleSelections.of(!0),gU(),e5(),FP.of([...BH,{key:"Escape",run:r=>(r.dispatch({selection:ee.create([r.state.selection.main],0)}),!0)}]),GH(),jl.of(zH)]}),parent:e}),()=>{var r;return(r=window.codemirror)==null?void 0:r.destroy()}},[e]),b2(r=>r.ctrlKey&&r.key==="s",r=>{if(r.preventDefault(),!window.codemirror)return;const s=new Blob([window.codemirror.state.doc.toString()],{type:"text/plain"}),o=URL.createObjectURL(s),a=document.createElement("a");a.style.display="none",a.href=o,a.download=`vonsim-${new Date().toISOString().slice(0,16)}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}),P.jsx("div",{ref:i,className:Je("overflow-auto font-mono",t)})}function XH(){const t=On(),e=Ar(xR),{updateServiceWorker:n}=wL({onNeedRefresh(){Kp(t("update.update-available"),{action:{label:t("update.reload"),onClick:()=>n(!0)}})}});return P.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",children:[P.jsx(eF,{}),P.jsxs(y2,{autoSaveId:"layout",tagName:"main",direction:"horizontal",className:"overflow-auto px-2",children:[P.jsx(Ih,{id:"panel-editor",order:1,minSize:20,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:P.jsx(KH,{className:"h-full w-full"})}),P.jsx(m0,{className:"w-2"}),P.jsx(Ih,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:P.jsx(j7,{})}),e&&P.jsxs(P.Fragment,{children:[P.jsx(m0,{className:"w-2"}),P.jsx(Ih,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:P.jsx(Q9,{className:"h-full w-full"})})]})]}),P.jsxs("footer",{className:"py-1 text-center text-xs font-semibold tracking-wider text-stone-500",children:[P.jsx("a",{href:"/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),P.jsx("span",{className:"px-2",children:"·"}),P.jsx("a",{href:"https://github.com/vonsim/vonsim",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),P.jsx("span",{className:"px-2",children:"·"}),P.jsx("a",{href:"https://github.com/vonsim/vonsim/issues/new?labels=new+version",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.report-issue")}),P.jsx("span",{className:"px-2",children:"·"}),P.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:["© Copyright 2017-",new Date().getFullYear()," — ",t("footer.copyright")]})]})]})}window.codemirror=null;vy.createRoot(document.getElementById("root")).render(P.jsxs(ue.StrictMode,{children:[P.jsx(V_,{richColors:!0,closeButton:!0,position:"top-center"}),P.jsx(H$,{children:P.jsx(XH,{})})]}));
