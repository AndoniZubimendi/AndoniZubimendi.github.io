var ZM=Object.defineProperty;var eO=(t,e,n)=>e in t?ZM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(eO(t,typeof e!="symbol"?e+"":e,n),n),pp=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var S=(t,e,n)=>(pp(t,e,"read from private field"),n?n.call(t):e.get(t)),ie=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},_=(t,e,n,i)=>(pp(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var Re=(t,e,n)=>(pp(t,e,"access private method"),n);function tO(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Xu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rk={exports:{}},of={},sk={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ju=Symbol.for("react.element"),nO=Symbol.for("react.portal"),iO=Symbol.for("react.fragment"),rO=Symbol.for("react.strict_mode"),sO=Symbol.for("react.profiler"),oO=Symbol.for("react.provider"),lO=Symbol.for("react.context"),aO=Symbol.for("react.forward_ref"),uO=Symbol.for("react.suspense"),cO=Symbol.for("react.memo"),dO=Symbol.for("react.lazy"),Aw=Symbol.iterator;function hO(t){return t===null||typeof t!="object"?null:(t=Aw&&t[Aw]||t["@@iterator"],typeof t=="function"?t:null)}var ok={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lk=Object.assign,ak={};function Xl(t,e,n){this.props=t,this.context=e,this.refs=ak,this.updater=n||ok}Xl.prototype.isReactComponent={};Xl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uk(){}uk.prototype=Xl.prototype;function Y0(t,e,n){this.props=t,this.context=e,this.refs=ak,this.updater=n||ok}var K0=Y0.prototype=new uk;K0.constructor=Y0;lk(K0,Xl.prototype);K0.isPureReactComponent=!0;var Pw=Array.isArray,ck=Object.prototype.hasOwnProperty,q0={current:null},dk={key:!0,ref:!0,__self:!0,__source:!0};function hk(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ck.call(e,i)&&!dk.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Ju,type:t,key:s,ref:o,props:r,_owner:q0.current}}function fO(t,e){return{$$typeof:Ju,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Q0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ju}function pO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rw=/\/+/g;function mp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pO(""+t.key):e.toString(36)}function md(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ju:case nO:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+mp(o,0):i,Pw(r)?(n="",t!=null&&(n=t.replace(Rw,"$&/")+"/"),md(r,e,n,"",function(u){return u})):r!=null&&(Q0(r)&&(r=fO(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Rw,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Pw(t))for(var l=0;l<t.length;l++){s=t[l];var a=i+mp(s,l);o+=md(s,e,n,a,r)}else if(a=hO(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=i+mp(s,l++),o+=md(s,e,n,a,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wc(t,e,n){if(t==null)return t;var i=[],r=0;return md(t,i,"","",function(s){return e.call(n,s,r++)}),i}function mO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},gd={transition:null},gO={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:gd,ReactCurrentOwner:q0};ye.Children={map:wc,forEach:function(t,e,n){wc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wc(t,function(){e++}),e},toArray:function(t){return wc(t,function(e){return e})||[]},only:function(t){if(!Q0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Xl;ye.Fragment=iO;ye.Profiler=sO;ye.PureComponent=Y0;ye.StrictMode=rO;ye.Suspense=uO;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gO;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=lk({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=q0.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)ck.call(e,a)&&!dk.hasOwnProperty(a)&&(i[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:Ju,type:t.type,key:r,ref:s,props:i,_owner:o}};ye.createContext=function(t){return t={$$typeof:lO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oO,_context:t},t.Consumer=t};ye.createElement=hk;ye.createFactory=function(t){var e=hk.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:aO,render:t}};ye.isValidElement=Q0;ye.lazy=function(t){return{$$typeof:dO,_payload:{_status:-1,_result:t},_init:mO}};ye.memo=function(t,e){return{$$typeof:cO,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=gd.transition;gd.transition={};try{t()}finally{gd.transition=e}};ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ye.useCallback=function(t,e){return Yt.current.useCallback(t,e)};ye.useContext=function(t){return Yt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Yt.current.useEffect(t,e)};ye.useId=function(){return Yt.current.useId()};ye.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Yt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};ye.useRef=function(t){return Yt.current.useRef(t)};ye.useState=function(t){return Yt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return Yt.current.useTransition()};ye.version="18.2.0";sk.exports=ye;var x=sk.exports;const z=Xu(x),yO=tO({__proto__:null,default:z},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vO=x,wO=Symbol.for("react.element"),bO=Symbol.for("react.fragment"),SO=Object.prototype.hasOwnProperty,xO=vO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kO={key:!0,ref:!0,__self:!0,__source:!0};function fk(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)SO.call(e,i)&&!kO.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:wO,type:t,key:s,ref:o,props:r,_owner:xO.current}}of.Fragment=bO;of.jsx=fk;of.jsxs=fk;rk.exports=of;var D=rk.exports;var jm={},pk={exports:{}},Mn={},mk={exports:{}},gk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,I){var V=B.length;B.push(I);e:for(;0<V;){var te=V-1>>>1,le=B[te];if(0<r(le,I))B[te]=I,B[V]=le,V=te;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var I=B[0],V=B.pop();if(V!==I){B[0]=V;e:for(var te=0,le=B.length,pe=le>>>1;te<pe;){var dt=2*(te+1)-1,$r=B[dt],Rt=dt+1,Ki=B[Rt];if(0>r($r,V))Rt<le&&0>r(Ki,$r)?(B[te]=Ki,B[Rt]=V,te=Rt):(B[te]=$r,B[dt]=V,te=dt);else if(Rt<le&&0>r(Ki,V))B[te]=Ki,B[Rt]=V,te=Rt;else break e}}return I}function r(B,I){var V=B.sortIndex-I.sortIndex;return V!==0?V:B.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var I=n(u);I!==null;){if(I.callback===null)i(u);else if(I.startTime<=B)i(u),I.sortIndex=I.expirationTime,e(a,I);else break;I=n(u)}}function b(B){if(g=!1,w(B),!p)if(n(a)!==null)p=!0,$(k);else{var I=n(u);I!==null&&W(b,I.startTime-B)}}function k(B,I){p=!1,g&&(g=!1,m(N),N=-1),f=!0;var V=h;try{for(w(I),d=n(a);d!==null&&(!(d.expirationTime>I)||B&&!P());){var te=d.callback;if(typeof te=="function"){d.callback=null,h=d.priorityLevel;var le=te(d.expirationTime<=I);I=t.unstable_now(),typeof le=="function"?d.callback=le:d===n(a)&&i(a),w(I)}else i(a);d=n(a)}if(d!==null)var pe=!0;else{var dt=n(u);dt!==null&&W(b,dt.startTime-I),pe=!1}return pe}finally{d=null,h=V,f=!1}}var A=!1,R=null,N=-1,E=5,C=-1;function P(){return!(t.unstable_now()-C<E)}function M(){if(R!==null){var B=t.unstable_now();C=B;var I=!0;try{I=R(!0,B)}finally{I?T():(A=!1,R=null)}}else A=!1}var T;if(typeof y=="function")T=function(){y(M)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,F=L.port2;L.port1.onmessage=M,T=function(){F.postMessage(null)}}else T=function(){v(M,0)};function $(B){R=B,A||(A=!0,T())}function W(B,I){N=v(function(){B(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,$(k))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(B){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var V=h;h=I;try{return B()}finally{h=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,I){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var V=h;h=B;try{return I()}finally{h=V}},t.unstable_scheduleCallback=function(B,I,V){var te=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,B){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=V+le,B={id:c++,callback:I,priorityLevel:B,startTime:V,expirationTime:le,sortIndex:-1},V>te?(B.sortIndex=V,e(u,B),n(a)===null&&B===n(u)&&(g?(m(N),N=-1):g=!0,W(b,V-te))):(B.sortIndex=le,e(a,B),p||f||(p=!0,$(k))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var I=h;return function(){var V=h;h=I;try{return B.apply(this,arguments)}finally{h=V}}}})(gk);mk.exports=gk;var EO=mk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yk=x,Rn=EO;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vk=new Set,su={};function xo(t,e){Rl(t,e),Rl(t+"Capture",e)}function Rl(t,e){for(su[t]=e,t=0;t<e.length;t++)vk.add(e[t])}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Um=Object.prototype.hasOwnProperty,CO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mw={},Ow={};function AO(t){return Um.call(Ow,t)?!0:Um.call(Mw,t)?!1:CO.test(t)?Ow[t]=!0:(Mw[t]=!0,!1)}function PO(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RO(t,e,n,i){if(e===null||typeof e>"u"||PO(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Z0=/[\-:]([a-z])/g;function ey(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Z0,ey);At[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Z0,ey);At[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Z0,ey);At[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ty(t,e,n,i){var r=At.hasOwnProperty(e)?At[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RO(e,n,r,i)&&(n=null),i||r===null?AO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Lr=yk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bc=Symbol.for("react.element"),zo=Symbol.for("react.portal"),jo=Symbol.for("react.fragment"),ny=Symbol.for("react.strict_mode"),Vm=Symbol.for("react.profiler"),wk=Symbol.for("react.provider"),bk=Symbol.for("react.context"),iy=Symbol.for("react.forward_ref"),Hm=Symbol.for("react.suspense"),Wm=Symbol.for("react.suspense_list"),ry=Symbol.for("react.memo"),Ur=Symbol.for("react.lazy"),Sk=Symbol.for("react.offscreen"),Tw=Symbol.iterator;function ra(t){return t===null||typeof t!="object"?null:(t=Tw&&t[Tw]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,gp;function Ra(t){if(gp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gp=e&&e[1]||""}return`
`+gp+t}var yp=!1;function vp(t,e){if(!t||yp)return"";yp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var a=`
`+r[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{yp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ra(t):""}function MO(t){switch(t.tag){case 5:return Ra(t.type);case 16:return Ra("Lazy");case 13:return Ra("Suspense");case 19:return Ra("SuspenseList");case 0:case 2:case 15:return t=vp(t.type,!1),t;case 11:return t=vp(t.type.render,!1),t;case 1:return t=vp(t.type,!0),t;default:return""}}function Gm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jo:return"Fragment";case zo:return"Portal";case Vm:return"Profiler";case ny:return"StrictMode";case Hm:return"Suspense";case Wm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bk:return(t.displayName||"Context")+".Consumer";case wk:return(t._context.displayName||"Context")+".Provider";case iy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ry:return e=t.displayName||null,e!==null?e:Gm(t.type)||"Memo";case Ur:e=t._payload,t=t._init;try{return Gm(t(e))}catch{}}return null}function OO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gm(e);case 8:return e===ny?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TO(t){var e=xk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sc(t){t._valueTracker||(t._valueTracker=TO(t))}function kk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=xk(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Hd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xm(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Dw(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ek(t,e){e=e.checked,e!=null&&ty(t,"checked",e,!1)}function Jm(t,e){Ek(t,e);var n=xs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ym(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ym(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ym(t,e,n){(e!=="number"||Hd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ma=Array.isArray;function nl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Km(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Ma(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function Ck(t,e){var n=xs(e.value),i=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Bw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ak(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ak(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xc,Pk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xc=xc||document.createElement("div"),xc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ou(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DO=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(t){DO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fa[e]=Fa[t]})});function Rk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fa.hasOwnProperty(t)&&Fa[t]?(""+e).trim():e+"px"}function Mk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Rk(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var NO=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qm(t,e){if(e){if(NO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Zm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eg=null;function sy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tg=null,il=null,rl=null;function Iw(t){if(t=qu(t)){if(typeof tg!="function")throw Error(U(280));var e=t.stateNode;e&&(e=df(e),tg(t.stateNode,t.type,e))}}function Ok(t){il?rl?rl.push(t):rl=[t]:il=t}function Tk(){if(il){var t=il,e=rl;if(rl=il=null,Iw(t),e)for(t=0;t<e.length;t++)Iw(e[t])}}function Dk(t,e){return t(e)}function Nk(){}var wp=!1;function Lk(t,e,n){if(wp)return t(e,n);wp=!0;try{return Dk(t,e,n)}finally{wp=!1,(il!==null||rl!==null)&&(Nk(),Tk())}}function lu(t,e){var n=t.stateNode;if(n===null)return null;var i=df(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var ng=!1;if(Pr)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){ng=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{ng=!1}function LO(t,e,n,i,r,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var za=!1,Wd=null,Gd=!1,ig=null,BO={onError:function(t){za=!0,Wd=t}};function IO(t,e,n,i,r,s,o,l,a){za=!1,Wd=null,LO.apply(BO,arguments)}function _O(t,e,n,i,r,s,o,l,a){if(IO.apply(this,arguments),za){if(za){var u=Wd;za=!1,Wd=null}else throw Error(U(198));Gd||(Gd=!0,ig=u)}}function ko(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _w(t){if(ko(t)!==t)throw Error(U(188))}function $O(t){var e=t.alternate;if(!e){if(e=ko(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return _w(r),t;if(s===i)return _w(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Ik(t){return t=$O(t),t!==null?_k(t):null}function _k(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_k(t);if(e!==null)return e;t=t.sibling}return null}var $k=Rn.unstable_scheduleCallback,$w=Rn.unstable_cancelCallback,FO=Rn.unstable_shouldYield,zO=Rn.unstable_requestPaint,tt=Rn.unstable_now,jO=Rn.unstable_getCurrentPriorityLevel,oy=Rn.unstable_ImmediatePriority,Fk=Rn.unstable_UserBlockingPriority,Xd=Rn.unstable_NormalPriority,UO=Rn.unstable_LowPriority,zk=Rn.unstable_IdlePriority,lf=null,zi=null;function VO(t){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(lf,t,void 0,(t.current.flags&128)===128)}catch{}}var di=Math.clz32?Math.clz32:GO,HO=Math.log,WO=Math.LN2;function GO(t){return t>>>=0,t===0?32:31-(HO(t)/WO|0)|0}var kc=64,Ec=4194304;function Oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jd(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?i=Oa(l):(s&=o,s!==0&&(i=Oa(s)))}else o=n&~r,o!==0?i=Oa(o):s!==0&&(i=Oa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-di(e),r=1<<n,i|=t[n],e&=~r;return i}function XO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JO(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-di(s),l=1<<o,a=r[o];a===-1?(!(l&n)||l&i)&&(r[o]=XO(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function rg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jk(){var t=kc;return kc<<=1,!(kc&4194240)&&(kc=64),t}function bp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-di(e),t[e]=n}function YO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-di(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function ly(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-di(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ae=0;function Uk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vk,ay,Hk,Wk,Gk,sg=!1,Cc=[],ds=null,hs=null,fs=null,au=new Map,uu=new Map,qr=[],KO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fw(t,e){switch(t){case"focusin":case"focusout":ds=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":au.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(e.pointerId)}}function oa(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=qu(e),e!==null&&ay(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function qO(t,e,n,i,r){switch(e){case"focusin":return ds=oa(ds,t,e,n,i,r),!0;case"dragenter":return hs=oa(hs,t,e,n,i,r),!0;case"mouseover":return fs=oa(fs,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return au.set(s,oa(au.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,uu.set(s,oa(uu.get(s)||null,t,e,n,i,r)),!0}return!1}function Xk(t){var e=Ks(t.target);if(e!==null){var n=ko(e);if(n!==null){if(e=n.tag,e===13){if(e=Bk(n),e!==null){t.blockedOn=e,Gk(t.priority,function(){Hk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=og(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);eg=i,n.target.dispatchEvent(i),eg=null}else return e=qu(n),e!==null&&ay(e),t.blockedOn=n,!1;e.shift()}return!0}function zw(t,e,n){yd(t)&&n.delete(e)}function QO(){sg=!1,ds!==null&&yd(ds)&&(ds=null),hs!==null&&yd(hs)&&(hs=null),fs!==null&&yd(fs)&&(fs=null),au.forEach(zw),uu.forEach(zw)}function la(t,e){t.blockedOn===e&&(t.blockedOn=null,sg||(sg=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,QO)))}function cu(t){function e(r){return la(r,t)}if(0<Cc.length){la(Cc[0],t);for(var n=1;n<Cc.length;n++){var i=Cc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ds!==null&&la(ds,t),hs!==null&&la(hs,t),fs!==null&&la(fs,t),au.forEach(e),uu.forEach(e),n=0;n<qr.length;n++)i=qr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)Xk(n),n.blockedOn===null&&qr.shift()}var sl=Lr.ReactCurrentBatchConfig,Yd=!0;function ZO(t,e,n,i){var r=Ae,s=sl.transition;sl.transition=null;try{Ae=1,uy(t,e,n,i)}finally{Ae=r,sl.transition=s}}function eT(t,e,n,i){var r=Ae,s=sl.transition;sl.transition=null;try{Ae=4,uy(t,e,n,i)}finally{Ae=r,sl.transition=s}}function uy(t,e,n,i){if(Yd){var r=og(t,e,n,i);if(r===null)Op(t,e,i,Kd,n),Fw(t,i);else if(qO(r,t,e,n,i))i.stopPropagation();else if(Fw(t,i),e&4&&-1<KO.indexOf(t)){for(;r!==null;){var s=qu(r);if(s!==null&&Vk(s),s=og(t,e,n,i),s===null&&Op(t,e,i,Kd,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Op(t,e,i,null,n)}}var Kd=null;function og(t,e,n,i){if(Kd=null,t=sy(i),t=Ks(t),t!==null)if(e=ko(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kd=t,null}function Jk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jO()){case oy:return 1;case Fk:return 4;case Xd:case UO:return 16;case zk:return 536870912;default:return 16}default:return 16}}var ss=null,cy=null,vd=null;function Yk(){if(vd)return vd;var t,e=cy,n=e.length,i,r="value"in ss?ss.value:ss.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return vd=r.slice(t,1<i?1-i:void 0)}function wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ac(){return!0}function jw(){return!1}function On(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ac:jw,this.isPropagationStopped=jw,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),e}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dy=On(Jl),Ku=Ye({},Jl,{view:0,detail:0}),tT=On(Ku),Sp,xp,aa,af=Ye({},Ku,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==aa&&(aa&&t.type==="mousemove"?(Sp=t.screenX-aa.screenX,xp=t.screenY-aa.screenY):xp=Sp=0,aa=t),Sp)},movementY:function(t){return"movementY"in t?t.movementY:xp}}),Uw=On(af),nT=Ye({},af,{dataTransfer:0}),iT=On(nT),rT=Ye({},Ku,{relatedTarget:0}),kp=On(rT),sT=Ye({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),oT=On(sT),lT=Ye({},Jl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aT=On(lT),uT=Ye({},Jl,{data:0}),Vw=On(uT),cT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hT[t])?!!e[t]:!1}function hy(){return fT}var pT=Ye({},Ku,{key:function(t){if(t.key){var e=cT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hy,charCode:function(t){return t.type==="keypress"?wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mT=On(pT),gT=Ye({},af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hw=On(gT),yT=Ye({},Ku,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hy}),vT=On(yT),wT=Ye({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),bT=On(wT),ST=Ye({},af,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xT=On(ST),kT=[9,13,27,32],fy=Pr&&"CompositionEvent"in window,ja=null;Pr&&"documentMode"in document&&(ja=document.documentMode);var ET=Pr&&"TextEvent"in window&&!ja,Kk=Pr&&(!fy||ja&&8<ja&&11>=ja),Ww=String.fromCharCode(32),Gw=!1;function qk(t,e){switch(t){case"keyup":return kT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uo=!1;function CT(t,e){switch(t){case"compositionend":return Qk(e);case"keypress":return e.which!==32?null:(Gw=!0,Ww);case"textInput":return t=e.data,t===Ww&&Gw?null:t;default:return null}}function AT(t,e){if(Uo)return t==="compositionend"||!fy&&qk(t,e)?(t=Yk(),vd=cy=ss=null,Uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kk&&e.locale!=="ko"?null:e.data;default:return null}}var PT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PT[t.type]:e==="textarea"}function Zk(t,e,n,i){Ok(i),e=qd(e,"onChange"),0<e.length&&(n=new dy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ua=null,du=null;function RT(t){c2(t,0)}function uf(t){var e=Wo(t);if(kk(e))return t}function MT(t,e){if(t==="change")return e}var e2=!1;if(Pr){var Ep;if(Pr){var Cp="oninput"in document;if(!Cp){var Jw=document.createElement("div");Jw.setAttribute("oninput","return;"),Cp=typeof Jw.oninput=="function"}Ep=Cp}else Ep=!1;e2=Ep&&(!document.documentMode||9<document.documentMode)}function Yw(){Ua&&(Ua.detachEvent("onpropertychange",t2),du=Ua=null)}function t2(t){if(t.propertyName==="value"&&uf(du)){var e=[];Zk(e,du,t,sy(t)),Lk(RT,e)}}function OT(t,e,n){t==="focusin"?(Yw(),Ua=e,du=n,Ua.attachEvent("onpropertychange",t2)):t==="focusout"&&Yw()}function TT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uf(du)}function DT(t,e){if(t==="click")return uf(e)}function NT(t,e){if(t==="input"||t==="change")return uf(e)}function LT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mi=typeof Object.is=="function"?Object.is:LT;function hu(t,e){if(mi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Um.call(e,r)||!mi(t[r],e[r]))return!1}return!0}function Kw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qw(t,e){var n=Kw(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kw(n)}}function n2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?n2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i2(){for(var t=window,e=Hd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hd(t.document)}return e}function py(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BT(t){var e=i2(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&n2(n.ownerDocument.documentElement,n)){if(i!==null&&py(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=qw(n,s);var o=qw(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IT=Pr&&"documentMode"in document&&11>=document.documentMode,Vo=null,lg=null,Va=null,ag=!1;function Qw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ag||Vo==null||Vo!==Hd(i)||(i=Vo,"selectionStart"in i&&py(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Va&&hu(Va,i)||(Va=i,i=qd(lg,"onSelect"),0<i.length&&(e=new dy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Vo)))}function Pc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ho={animationend:Pc("Animation","AnimationEnd"),animationiteration:Pc("Animation","AnimationIteration"),animationstart:Pc("Animation","AnimationStart"),transitionend:Pc("Transition","TransitionEnd")},Ap={},r2={};Pr&&(r2=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function cf(t){if(Ap[t])return Ap[t];if(!Ho[t])return t;var e=Ho[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in r2)return Ap[t]=e[n];return t}var s2=cf("animationend"),o2=cf("animationiteration"),l2=cf("animationstart"),a2=cf("transitionend"),u2=new Map,Zw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(t,e){u2.set(t,e),xo(e,[t])}for(var Pp=0;Pp<Zw.length;Pp++){var Rp=Zw[Pp],_T=Rp.toLowerCase(),$T=Rp[0].toUpperCase()+Rp.slice(1);Ds(_T,"on"+$T)}Ds(s2,"onAnimationEnd");Ds(o2,"onAnimationIteration");Ds(l2,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(a2,"onTransitionEnd");Rl("onMouseEnter",["mouseout","mouseover"]);Rl("onMouseLeave",["mouseout","mouseover"]);Rl("onPointerEnter",["pointerout","pointerover"]);Rl("onPointerLeave",["pointerout","pointerover"]);xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function e1(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,_O(i,e,void 0,t),t.currentTarget=null}function c2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&r.isPropagationStopped())break e;e1(r,l,u),s=a}else for(o=0;o<i.length;o++){if(l=i[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&r.isPropagationStopped())break e;e1(r,l,u),s=a}}}if(Gd)throw t=ig,Gd=!1,ig=null,t}function Be(t,e){var n=e[fg];n===void 0&&(n=e[fg]=new Set);var i=t+"__bubble";n.has(i)||(d2(e,t,2,!1),n.add(i))}function Mp(t,e,n){var i=0;e&&(i|=4),d2(n,t,i,e)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function fu(t){if(!t[Rc]){t[Rc]=!0,vk.forEach(function(n){n!=="selectionchange"&&(FT.has(n)||Mp(n,!1,t),Mp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rc]||(e[Rc]=!0,Mp("selectionchange",!1,e))}}function d2(t,e,n,i){switch(Jk(e)){case 1:var r=ZO;break;case 4:r=eT;break;default:r=uy}n=r.bind(null,e,n,t),r=void 0,!ng||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Op(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Ks(l),o===null)return;if(a=o.tag,a===5||a===6){i=s=o;continue e}l=l.parentNode}}i=i.return}Lk(function(){var u=s,c=sy(n),d=[];e:{var h=u2.get(t);if(h!==void 0){var f=dy,p=t;switch(t){case"keypress":if(wd(n)===0)break e;case"keydown":case"keyup":f=mT;break;case"focusin":p="focus",f=kp;break;case"focusout":p="blur",f=kp;break;case"beforeblur":case"afterblur":f=kp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Uw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=iT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=vT;break;case s2:case o2:case l2:f=oT;break;case a2:f=bT;break;case"scroll":f=tT;break;case"wheel":f=xT;break;case"copy":case"cut":case"paste":f=aT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Hw}var g=(e&4)!==0,v=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var y=u,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=lu(y,m),b!=null&&g.push(pu(y,b,w)))),v)break;y=y.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==eg&&(p=n.relatedTarget||n.fromElement)&&(Ks(p)||p[Rr]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Ks(p):null,p!==null&&(v=ko(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=Uw,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=Hw,b="onPointerLeave",m="onPointerEnter",y="pointer"),v=f==null?h:Wo(f),w=p==null?h:Wo(p),h=new g(b,y+"leave",f,n,c),h.target=v,h.relatedTarget=w,b=null,Ks(c)===u&&(g=new g(m,y+"enter",p,n,c),g.target=w,g.relatedTarget=v,b=g),v=b,f&&p)t:{for(g=f,m=p,y=0,w=g;w;w=To(w))y++;for(w=0,b=m;b;b=To(b))w++;for(;0<y-w;)g=To(g),y--;for(;0<w-y;)m=To(m),w--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=To(g),m=To(m)}g=null}else g=null;f!==null&&t1(d,h,f,g,!1),p!==null&&v!==null&&t1(d,v,p,g,!0)}}e:{if(h=u?Wo(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=MT;else if(Xw(h))if(e2)k=NT;else{k=TT;var A=OT}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=DT);if(k&&(k=k(t,u))){Zk(d,k,n,c);break e}A&&A(t,h,u),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&Ym(h,"number",h.value)}switch(A=u?Wo(u):window,t){case"focusin":(Xw(A)||A.contentEditable==="true")&&(Vo=A,lg=u,Va=null);break;case"focusout":Va=lg=Vo=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,Qw(d,n,c);break;case"selectionchange":if(IT)break;case"keydown":case"keyup":Qw(d,n,c)}var R;if(fy)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Uo?qk(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Kk&&n.locale!=="ko"&&(Uo||N!=="onCompositionStart"?N==="onCompositionEnd"&&Uo&&(R=Yk()):(ss=c,cy="value"in ss?ss.value:ss.textContent,Uo=!0)),A=qd(u,N),0<A.length&&(N=new Vw(N,t,null,n,c),d.push({event:N,listeners:A}),R?N.data=R:(R=Qk(n),R!==null&&(N.data=R)))),(R=ET?CT(t,n):AT(t,n))&&(u=qd(u,"onBeforeInput"),0<u.length&&(c=new Vw("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=R))}c2(d,e)})}function pu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=lu(t,n),s!=null&&i.unshift(pu(t,s,r)),s=lu(t,e),s!=null&&i.push(pu(t,s,r))),t=t.return}return i}function To(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function t1(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===i)break;l.tag===5&&u!==null&&(l=u,r?(a=lu(n,s),a!=null&&o.unshift(pu(n,a,l))):r||(a=lu(n,s),a!=null&&o.push(pu(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var zT=/\r\n?/g,jT=/\u0000|\uFFFD/g;function n1(t){return(typeof t=="string"?t:""+t).replace(zT,`
`).replace(jT,"")}function Mc(t,e,n){if(e=n1(e),n1(t)!==e&&n)throw Error(U(425))}function Qd(){}var ug=null,cg=null;function dg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hg=typeof setTimeout=="function"?setTimeout:void 0,UT=typeof clearTimeout=="function"?clearTimeout:void 0,i1=typeof Promise=="function"?Promise:void 0,VT=typeof queueMicrotask=="function"?queueMicrotask:typeof i1<"u"?function(t){return i1.resolve(null).then(t).catch(HT)}:hg;function HT(t){setTimeout(function(){throw t})}function Tp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),cu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);cu(e)}function ps(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function r1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yl=Math.random().toString(36).slice(2),Li="__reactFiber$"+Yl,mu="__reactProps$"+Yl,Rr="__reactContainer$"+Yl,fg="__reactEvents$"+Yl,WT="__reactListeners$"+Yl,GT="__reactHandles$"+Yl;function Ks(t){var e=t[Li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rr]||n[Li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=r1(t);t!==null;){if(n=t[Li])return n;t=r1(t)}return e}t=n,n=t.parentNode}return null}function qu(t){return t=t[Li]||t[Rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function df(t){return t[mu]||null}var pg=[],Go=-1;function Ns(t){return{current:t}}function Fe(t){0>Go||(t.current=pg[Go],pg[Go]=null,Go--)}function De(t,e){Go++,pg[Go]=t.current,t.current=e}var ks={},It=Ns(ks),cn=Ns(!1),ho=ks;function Ml(t,e){var n=t.type.contextTypes;if(!n)return ks;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function dn(t){return t=t.childContextTypes,t!=null}function Zd(){Fe(cn),Fe(It)}function s1(t,e,n){if(It.current!==ks)throw Error(U(168));De(It,e),De(cn,n)}function h2(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,OO(t)||"Unknown",r));return Ye({},n,i)}function eh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ks,ho=It.current,De(It,t),De(cn,cn.current),!0}function o1(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=h2(t,e,ho),i.__reactInternalMemoizedMergedChildContext=t,Fe(cn),Fe(It),De(It,t)):Fe(cn),De(cn,n)}var er=null,hf=!1,Dp=!1;function f2(t){er===null?er=[t]:er.push(t)}function XT(t){hf=!0,f2(t)}function Ls(){if(!Dp&&er!==null){Dp=!0;var t=0,e=Ae;try{var n=er;for(Ae=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}er=null,hf=!1}catch(r){throw er!==null&&(er=er.slice(t+1)),$k(oy,Ls),r}finally{Ae=e,Dp=!1}}return null}var Xo=[],Jo=0,th=null,nh=0,Fn=[],zn=0,fo=null,pr=1,mr="";function Vs(t,e){Xo[Jo++]=nh,Xo[Jo++]=th,th=t,nh=e}function p2(t,e,n){Fn[zn++]=pr,Fn[zn++]=mr,Fn[zn++]=fo,fo=t;var i=pr;t=mr;var r=32-di(i)-1;i&=~(1<<r),n+=1;var s=32-di(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,pr=1<<32-di(e)+r|n<<r|i,mr=s+t}else pr=1<<s|n<<r|i,mr=t}function my(t){t.return!==null&&(Vs(t,1),p2(t,1,0))}function gy(t){for(;t===th;)th=Xo[--Jo],Xo[Jo]=null,nh=Xo[--Jo],Xo[Jo]=null;for(;t===fo;)fo=Fn[--zn],Fn[zn]=null,mr=Fn[--zn],Fn[zn]=null,pr=Fn[--zn],Fn[zn]=null}var Pn=null,En=null,je=!1,oi=null;function m2(t,e){var n=Vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function l1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pn=t,En=ps(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fo!==null?{id:pr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pn=t,En=null,!0):!1;default:return!1}}function mg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gg(t){if(je){var e=En;if(e){var n=e;if(!l1(t,e)){if(mg(t))throw Error(U(418));e=ps(n.nextSibling);var i=Pn;e&&l1(t,e)?m2(i,n):(t.flags=t.flags&-4097|2,je=!1,Pn=t)}}else{if(mg(t))throw Error(U(418));t.flags=t.flags&-4097|2,je=!1,Pn=t}}}function a1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pn=t}function Oc(t){if(t!==Pn)return!1;if(!je)return a1(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dg(t.type,t.memoizedProps)),e&&(e=En)){if(mg(t))throw g2(),Error(U(418));for(;e;)m2(t,e),e=ps(e.nextSibling)}if(a1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=ps(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=Pn?ps(t.stateNode.nextSibling):null;return!0}function g2(){for(var t=En;t;)t=ps(t.nextSibling)}function Ol(){En=Pn=null,je=!1}function yy(t){oi===null?oi=[t]:oi.push(t)}var JT=Lr.ReactCurrentBatchConfig;function ti(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ih=Ns(null),rh=null,Yo=null,vy=null;function wy(){vy=Yo=rh=null}function by(t){var e=ih.current;Fe(ih),t._currentValue=e}function yg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ol(t,e){rh=t,vy=Yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Yn(t){var e=t._currentValue;if(vy!==t)if(t={context:t,memoizedValue:e,next:null},Yo===null){if(rh===null)throw Error(U(308));Yo=t,rh.dependencies={lanes:0,firstContext:t}}else Yo=Yo.next=t;return e}var qs=null;function Sy(t){qs===null?qs=[t]:qs.push(t)}function y2(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Sy(e)):(n.next=r.next,r.next=n),e.interleaved=n,Mr(t,i)}function Mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vr=!1;function xy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ms(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Se&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Mr(t,n)}return r=i.interleaved,r===null?(e.next=e,Sy(i)):(e.next=r.next,r.next=e),i.interleaved=e,Mr(t,n)}function bd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ly(t,n)}}function u1(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sh(t,e,n,i){var r=t.updateQueue;Vr=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var d=r.baseState;o=0,c=u=a=null,l=s;do{var h=l.lane,f=l.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,g=l;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ye({},d,h);break e;case 2:Vr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=f,a=d):c=c.next=f,o|=h;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(c===null&&(a=d),r.baseState=a,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);mo|=o,t.lanes=o,t.memoizedState=d}}function c1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var w2=new yk.Component().refs;function vg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ff={isMounted:function(t){return(t=t._reactInternals)?ko(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Xt(),r=ys(t),s=br(i,r);s.payload=e,n!=null&&(s.callback=n),e=ms(t,s,r),e!==null&&(hi(e,t,r,i),bd(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Xt(),r=ys(t),s=br(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ms(t,s,r),e!==null&&(hi(e,t,r,i),bd(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),i=ys(t),r=br(n,i);r.tag=2,e!=null&&(r.callback=e),e=ms(t,r,i),e!==null&&(hi(e,t,i,n),bd(e,t,i))}};function d1(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!hu(n,i)||!hu(r,s):!0}function b2(t,e,n){var i=!1,r=ks,s=e.contextType;return typeof s=="object"&&s!==null?s=Yn(s):(r=dn(e)?ho:It.current,i=e.contextTypes,s=(i=i!=null)?Ml(t,r):ks),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ff,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function h1(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ff.enqueueReplaceState(e,e.state,null)}function wg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=w2,xy(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Yn(s):(s=dn(e)?ho:It.current,r.context=Ml(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vg(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ff.enqueueReplaceState(r,r.state,null),sh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ua(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;l===w2&&(l=r.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Tc(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function f1(t){var e=t._init;return e(t._payload)}function S2(t){function e(m,y){if(t){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function r(m,y){return m=vs(m,y),m.index=0,m.sibling=null,m}function s(m,y,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,y,w,b){return y===null||y.tag!==6?(y=Fp(w,m.mode,b),y.return=m,y):(y=r(y,w),y.return=m,y)}function a(m,y,w,b){var k=w.type;return k===jo?c(m,y,w.props.children,b,w.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ur&&f1(k)===y.type)?(b=r(y,w.props),b.ref=ua(m,y,w),b.return=m,b):(b=Ad(w.type,w.key,w.props,null,m.mode,b),b.ref=ua(m,y,w),b.return=m,b)}function u(m,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=zp(w,m.mode,b),y.return=m,y):(y=r(y,w.children||[]),y.return=m,y)}function c(m,y,w,b,k){return y===null||y.tag!==7?(y=oo(w,m.mode,b,k),y.return=m,y):(y=r(y,w),y.return=m,y)}function d(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Fp(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bc:return w=Ad(y.type,y.key,y.props,null,m.mode,w),w.ref=ua(m,null,y),w.return=m,w;case zo:return y=zp(y,m.mode,w),y.return=m,y;case Ur:var b=y._init;return d(m,b(y._payload),w)}if(Ma(y)||ra(y))return y=oo(y,m.mode,w,null),y.return=m,y;Tc(m,y)}return null}function h(m,y,w,b){var k=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:l(m,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bc:return w.key===k?a(m,y,w,b):null;case zo:return w.key===k?u(m,y,w,b):null;case Ur:return k=w._init,h(m,y,k(w._payload),b)}if(Ma(w)||ra(w))return k!==null?null:c(m,y,w,b,null);Tc(m,w)}return null}function f(m,y,w,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,l(y,m,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bc:return m=m.get(b.key===null?w:b.key)||null,a(y,m,b,k);case zo:return m=m.get(b.key===null?w:b.key)||null,u(y,m,b,k);case Ur:var A=b._init;return f(m,y,w,A(b._payload),k)}if(Ma(b)||ra(b))return m=m.get(w)||null,c(y,m,b,k,null);Tc(y,b)}return null}function p(m,y,w,b){for(var k=null,A=null,R=y,N=y=0,E=null;R!==null&&N<w.length;N++){R.index>N?(E=R,R=null):E=R.sibling;var C=h(m,R,w[N],b);if(C===null){R===null&&(R=E);break}t&&R&&C.alternate===null&&e(m,R),y=s(C,y,N),A===null?k=C:A.sibling=C,A=C,R=E}if(N===w.length)return n(m,R),je&&Vs(m,N),k;if(R===null){for(;N<w.length;N++)R=d(m,w[N],b),R!==null&&(y=s(R,y,N),A===null?k=R:A.sibling=R,A=R);return je&&Vs(m,N),k}for(R=i(m,R);N<w.length;N++)E=f(R,m,N,w[N],b),E!==null&&(t&&E.alternate!==null&&R.delete(E.key===null?N:E.key),y=s(E,y,N),A===null?k=E:A.sibling=E,A=E);return t&&R.forEach(function(P){return e(m,P)}),je&&Vs(m,N),k}function g(m,y,w,b){var k=ra(w);if(typeof k!="function")throw Error(U(150));if(w=k.call(w),w==null)throw Error(U(151));for(var A=k=null,R=y,N=y=0,E=null,C=w.next();R!==null&&!C.done;N++,C=w.next()){R.index>N?(E=R,R=null):E=R.sibling;var P=h(m,R,C.value,b);if(P===null){R===null&&(R=E);break}t&&R&&P.alternate===null&&e(m,R),y=s(P,y,N),A===null?k=P:A.sibling=P,A=P,R=E}if(C.done)return n(m,R),je&&Vs(m,N),k;if(R===null){for(;!C.done;N++,C=w.next())C=d(m,C.value,b),C!==null&&(y=s(C,y,N),A===null?k=C:A.sibling=C,A=C);return je&&Vs(m,N),k}for(R=i(m,R);!C.done;N++,C=w.next())C=f(R,m,N,C.value,b),C!==null&&(t&&C.alternate!==null&&R.delete(C.key===null?N:C.key),y=s(C,y,N),A===null?k=C:A.sibling=C,A=C);return t&&R.forEach(function(M){return e(m,M)}),je&&Vs(m,N),k}function v(m,y,w,b){if(typeof w=="object"&&w!==null&&w.type===jo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case bc:e:{for(var k=w.key,A=y;A!==null;){if(A.key===k){if(k=w.type,k===jo){if(A.tag===7){n(m,A.sibling),y=r(A,w.props.children),y.return=m,m=y;break e}}else if(A.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ur&&f1(k)===A.type){n(m,A.sibling),y=r(A,w.props),y.ref=ua(m,A,w),y.return=m,m=y;break e}n(m,A);break}else e(m,A);A=A.sibling}w.type===jo?(y=oo(w.props.children,m.mode,b,w.key),y.return=m,m=y):(b=Ad(w.type,w.key,w.props,null,m.mode,b),b.ref=ua(m,y,w),b.return=m,m=b)}return o(m);case zo:e:{for(A=w.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(m,y.sibling),y=r(y,w.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=zp(w,m.mode,b),y.return=m,m=y}return o(m);case Ur:return A=w._init,v(m,y,A(w._payload),b)}if(Ma(w))return p(m,y,w,b);if(ra(w))return g(m,y,w,b);Tc(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(m,y.sibling),y=r(y,w),y.return=m,m=y):(n(m,y),y=Fp(w,m.mode,b),y.return=m,m=y),o(m)):n(m,y)}return v}var Tl=S2(!0),x2=S2(!1),Qu={},ji=Ns(Qu),gu=Ns(Qu),yu=Ns(Qu);function Qs(t){if(t===Qu)throw Error(U(174));return t}function ky(t,e){switch(De(yu,e),De(gu,t),De(ji,Qu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qm(e,t)}Fe(ji),De(ji,e)}function Dl(){Fe(ji),Fe(gu),Fe(yu)}function k2(t){Qs(yu.current);var e=Qs(ji.current),n=qm(e,t.type);e!==n&&(De(gu,t),De(ji,n))}function Ey(t){gu.current===t&&(Fe(ji),Fe(gu))}var He=Ns(0);function oh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Np=[];function Cy(){for(var t=0;t<Np.length;t++)Np[t]._workInProgressVersionPrimary=null;Np.length=0}var Sd=Lr.ReactCurrentDispatcher,Lp=Lr.ReactCurrentBatchConfig,po=0,Xe=null,ot=null,ht=null,lh=!1,Ha=!1,vu=0,YT=0;function Mt(){throw Error(U(321))}function Ay(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mi(t[n],e[n]))return!1;return!0}function Py(t,e,n,i,r,s){if(po=s,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sd.current=t===null||t.memoizedState===null?ZT:eD,t=n(i,r),Ha){s=0;do{if(Ha=!1,vu=0,25<=s)throw Error(U(301));s+=1,ht=ot=null,e.updateQueue=null,Sd.current=tD,t=n(i,r)}while(Ha)}if(Sd.current=ah,e=ot!==null&&ot.next!==null,po=0,ht=ot=Xe=null,lh=!1,e)throw Error(U(300));return t}function Ry(){var t=vu!==0;return vu=0,t}function Ai(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Xe.memoizedState=ht=t:ht=ht.next=t,ht}function Kn(){if(ot===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ht===null?Xe.memoizedState:ht.next;if(e!==null)ht=e,ot=t;else{if(t===null)throw Error(U(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?Xe.memoizedState=ht=t:ht=ht.next=t}return ht}function wu(t,e){return typeof e=="function"?e(t):e}function Bp(t){var e=Kn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=ot,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((po&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=i):a=a.next=d,Xe.lanes|=c,mo|=c}u=u.next}while(u!==null&&u!==s);a===null?o=i:a.next=l,mi(i,e.memoizedState)||(ln=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=a,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Xe.lanes|=s,mo|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ip(t){var e=Kn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);mi(s,e.memoizedState)||(ln=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function E2(){}function C2(t,e){var n=Xe,i=Kn(),r=e(),s=!mi(i.memoizedState,r);if(s&&(i.memoizedState=r,ln=!0),i=i.queue,My(R2.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,bu(9,P2.bind(null,n,i,r,e),void 0,null),gt===null)throw Error(U(349));po&30||A2(n,e,r)}return r}function A2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function P2(t,e,n,i){e.value=n,e.getSnapshot=i,M2(e)&&O2(t)}function R2(t,e,n){return n(function(){M2(e)&&O2(t)})}function M2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mi(t,n)}catch{return!0}}function O2(t){var e=Mr(t,1);e!==null&&hi(e,t,1,-1)}function p1(t){var e=Ai();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wu,lastRenderedState:t},e.queue=t,t=t.dispatch=QT.bind(null,Xe,t),[e.memoizedState,t]}function bu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function T2(){return Kn().memoizedState}function xd(t,e,n,i){var r=Ai();Xe.flags|=t,r.memoizedState=bu(1|e,n,void 0,i===void 0?null:i)}function pf(t,e,n,i){var r=Kn();i=i===void 0?null:i;var s=void 0;if(ot!==null){var o=ot.memoizedState;if(s=o.destroy,i!==null&&Ay(i,o.deps)){r.memoizedState=bu(e,n,s,i);return}}Xe.flags|=t,r.memoizedState=bu(1|e,n,s,i)}function m1(t,e){return xd(8390656,8,t,e)}function My(t,e){return pf(2048,8,t,e)}function D2(t,e){return pf(4,2,t,e)}function N2(t,e){return pf(4,4,t,e)}function L2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function B2(t,e,n){return n=n!=null?n.concat([t]):null,pf(4,4,L2.bind(null,e,t),n)}function Oy(){}function I2(t,e){var n=Kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ay(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function _2(t,e){var n=Kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ay(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function $2(t,e,n){return po&21?(mi(n,e)||(n=jk(),Xe.lanes|=n,mo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function KT(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var i=Lp.transition;Lp.transition={};try{t(!1),e()}finally{Ae=n,Lp.transition=i}}function F2(){return Kn().memoizedState}function qT(t,e,n){var i=ys(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},z2(t))j2(e,n);else if(n=y2(t,e,n,i),n!==null){var r=Xt();hi(n,t,i,r),U2(n,e,i)}}function QT(t,e,n){var i=ys(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(z2(t))j2(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(r.hasEagerState=!0,r.eagerState=l,mi(l,o)){var a=e.interleaved;a===null?(r.next=r,Sy(e)):(r.next=a.next,a.next=r),e.interleaved=r;return}}catch{}finally{}n=y2(t,e,r,i),n!==null&&(r=Xt(),hi(n,t,i,r),U2(n,e,i))}}function z2(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function j2(t,e){Ha=lh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function U2(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ly(t,n)}}var ah={readContext:Yn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},ZT={readContext:Yn,useCallback:function(t,e){return Ai().memoizedState=[t,e===void 0?null:e],t},useContext:Yn,useEffect:m1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xd(4194308,4,L2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xd(4194308,4,t,e)},useInsertionEffect:function(t,e){return xd(4,2,t,e)},useMemo:function(t,e){var n=Ai();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ai();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=qT.bind(null,Xe,t),[i.memoizedState,t]},useRef:function(t){var e=Ai();return t={current:t},e.memoizedState=t},useState:p1,useDebugValue:Oy,useDeferredValue:function(t){return Ai().memoizedState=t},useTransition:function(){var t=p1(!1),e=t[0];return t=KT.bind(null,t[1]),Ai().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Xe,r=Ai();if(je){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),gt===null)throw Error(U(349));po&30||A2(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,m1(R2.bind(null,i,s,t),[t]),i.flags|=2048,bu(9,P2.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ai(),e=gt.identifierPrefix;if(je){var n=mr,i=pr;n=(i&~(1<<32-di(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=vu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eD={readContext:Yn,useCallback:I2,useContext:Yn,useEffect:My,useImperativeHandle:B2,useInsertionEffect:D2,useLayoutEffect:N2,useMemo:_2,useReducer:Bp,useRef:T2,useState:function(){return Bp(wu)},useDebugValue:Oy,useDeferredValue:function(t){var e=Kn();return $2(e,ot.memoizedState,t)},useTransition:function(){var t=Bp(wu)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:E2,useSyncExternalStore:C2,useId:F2,unstable_isNewReconciler:!1},tD={readContext:Yn,useCallback:I2,useContext:Yn,useEffect:My,useImperativeHandle:B2,useInsertionEffect:D2,useLayoutEffect:N2,useMemo:_2,useReducer:Ip,useRef:T2,useState:function(){return Ip(wu)},useDebugValue:Oy,useDeferredValue:function(t){var e=Kn();return ot===null?e.memoizedState=t:$2(e,ot.memoizedState,t)},useTransition:function(){var t=Ip(wu)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:E2,useSyncExternalStore:C2,useId:F2,unstable_isNewReconciler:!1};function Nl(t,e){try{var n="",i=e;do n+=MO(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function _p(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nD=typeof WeakMap=="function"?WeakMap:Map;function V2(t,e,n){n=br(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ch||(ch=!0,Og=i),bg(t,e)},n}function H2(t,e,n){n=br(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){bg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bg(t,e),typeof i!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function g1(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new nD;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=gD.bind(null,t,e,n),e.then(t,t))}function y1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v1(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=br(-1,1),e.tag=2,ms(n,e,1))),n.lanes|=1),t)}var iD=Lr.ReactCurrentOwner,ln=!1;function Ut(t,e,n,i){e.child=t===null?x2(e,null,n,i):Tl(e,t.child,n,i)}function w1(t,e,n,i,r){n=n.render;var s=e.ref;return ol(e,r),i=Py(t,e,n,i,s,r),n=Ry(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Or(t,e,r)):(je&&n&&my(e),e.flags|=1,Ut(t,e,i,r),e.child)}function b1(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!$y(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,W2(t,e,s,i,r)):(t=Ad(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:hu,n(o,i)&&t.ref===e.ref)return Or(t,e,r)}return e.flags|=1,t=vs(s,i),t.ref=e.ref,t.return=e,e.child=t}function W2(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(hu(s,i)&&t.ref===e.ref)if(ln=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,Or(t,e,r)}return Sg(t,e,n,i,r)}function G2(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(qo,bn),bn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(qo,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,De(qo,bn),bn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,De(qo,bn),bn|=i;return Ut(t,e,r,n),e.child}function X2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sg(t,e,n,i,r){var s=dn(n)?ho:It.current;return s=Ml(e,s),ol(e,r),n=Py(t,e,n,i,s,r),i=Ry(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Or(t,e,r)):(je&&i&&my(e),e.flags|=1,Ut(t,e,n,r),e.child)}function S1(t,e,n,i,r){if(dn(n)){var s=!0;eh(e)}else s=!1;if(ol(e,r),e.stateNode===null)kd(t,e),b2(e,n,i),wg(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Yn(u):(u=dn(n)?ho:It.current,u=Ml(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||a!==u)&&h1(e,o,i,u),Vr=!1;var h=e.memoizedState;o.state=h,sh(e,i,o,r),a=e.memoizedState,l!==i||h!==a||cn.current||Vr?(typeof c=="function"&&(vg(e,n,c,i),a=e.memoizedState),(l=Vr||d1(e,n,l,i,h,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=a),o.props=i,o.state=a,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,v2(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ti(e.type,l),o.props=u,d=e.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Yn(a):(a=dn(n)?ho:It.current,a=Ml(e,a));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==a)&&h1(e,o,i,a),Vr=!1,h=e.memoizedState,o.state=h,sh(e,i,o,r);var p=e.memoizedState;l!==d||h!==p||cn.current||Vr?(typeof f=="function"&&(vg(e,n,f,i),p=e.memoizedState),(u=Vr||d1(e,n,u,i,h,p,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=a,i=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return xg(t,e,n,i,s,r)}function xg(t,e,n,i,r,s){X2(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&o1(e,n,!1),Or(t,e,s);i=e.stateNode,iD.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Tl(e,t.child,null,s),e.child=Tl(e,null,l,s)):Ut(t,e,l,s),e.memoizedState=i.state,r&&o1(e,n,!0),e.child}function J2(t){var e=t.stateNode;e.pendingContext?s1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&s1(t,e.context,!1),ky(t,e.containerInfo)}function x1(t,e,n,i,r){return Ol(),yy(r),e.flags|=256,Ut(t,e,n,i),e.child}var kg={dehydrated:null,treeContext:null,retryLane:0};function Eg(t){return{baseLanes:t,cachePool:null,transitions:null}}function Y2(t,e,n){var i=e.pendingProps,r=He.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),De(He,r&1),t===null)return gg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yf(o,i,0,null),t=oo(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Eg(n),e.memoizedState=kg,t):Ty(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return rD(t,e,o,i,l,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,l=r.sibling;var a={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=a,e.deletions=null):(i=vs(r,a),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=vs(l,s):(s=oo(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Eg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=kg,i}return s=t.child,t=s.sibling,i=vs(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ty(t,e){return e=yf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dc(t,e,n,i){return i!==null&&yy(i),Tl(e,t.child,null,n),t=Ty(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rD(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=_p(Error(U(422))),Dc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=yf({mode:"visible",children:i.children},r,0,null),s=oo(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Tl(e,t.child,null,o),e.child.memoizedState=Eg(o),e.memoizedState=kg,s);if(!(e.mode&1))return Dc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(U(419)),i=_p(s,i,void 0),Dc(t,e,o,i)}if(l=(o&t.childLanes)!==0,ln||l){if(i=gt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Mr(t,r),hi(i,t,r,-1))}return _y(),i=_p(Error(U(421))),Dc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=yD.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,En=ps(r.nextSibling),Pn=e,je=!0,oi=null,t!==null&&(Fn[zn++]=pr,Fn[zn++]=mr,Fn[zn++]=fo,pr=t.id,mr=t.overflow,fo=e),e=Ty(e,i.children),e.flags|=4096,e)}function k1(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),yg(t.return,e,n)}function $p(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function K2(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ut(t,e,i.children,n),i=He.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k1(t,n,e);else if(t.tag===19)k1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(De(He,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&oh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),$p(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&oh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}$p(e,!0,n,null,s);break;case"together":$p(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=vs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sD(t,e,n){switch(e.tag){case 3:J2(e),Ol();break;case 5:k2(e);break;case 1:dn(e.type)&&eh(e);break;case 4:ky(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;De(ih,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(De(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?Y2(t,e,n):(De(He,He.current&1),t=Or(t,e,n),t!==null?t.sibling:null);De(He,He.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return K2(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),De(He,He.current),i)break;return null;case 22:case 23:return e.lanes=0,G2(t,e,n)}return Or(t,e,n)}var q2,Cg,Q2,Z2;q2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cg=function(){};Q2=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Qs(ji.current);var s=null;switch(n){case"input":r=Xm(t,r),i=Xm(t,i),s=[];break;case"select":r=Ye({},r,{value:void 0}),i=Ye({},i,{value:void 0}),s=[];break;case"textarea":r=Km(t,r),i=Km(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Qd)}Qm(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(su.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var a=i[u];if(l=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(su.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Be("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Z2=function(t,e,n,i){n!==i&&(e.flags|=4)};function ca(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function oD(t,e,n){var i=e.pendingProps;switch(gy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return dn(e.type)&&Zd(),Ot(e),null;case 3:return i=e.stateNode,Dl(),Fe(cn),Fe(It),Cy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Oc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,oi!==null&&(Ng(oi),oi=null))),Cg(t,e),Ot(e),null;case 5:Ey(e);var r=Qs(yu.current);if(n=e.type,t!==null&&e.stateNode!=null)Q2(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return Ot(e),null}if(t=Qs(ji.current),Oc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Li]=e,i[mu]=s,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",i),Be("close",i);break;case"iframe":case"object":case"embed":Be("load",i);break;case"video":case"audio":for(r=0;r<Ta.length;r++)Be(Ta[r],i);break;case"source":Be("error",i);break;case"img":case"image":case"link":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"input":Dw(i,s),Be("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Be("invalid",i);break;case"textarea":Lw(i,s),Be("invalid",i)}Qm(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Mc(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Mc(i.textContent,l,t),r=["children",""+l]):su.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Be("scroll",i)}switch(n){case"input":Sc(i),Nw(i,s,!0);break;case"textarea":Sc(i),Bw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Qd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ak(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Li]=e,t[mu]=i,q2(t,e,!1,!1),e.stateNode=t;e:{switch(o=Zm(n,i),n){case"dialog":Be("cancel",t),Be("close",t),r=i;break;case"iframe":case"object":case"embed":Be("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ta.length;r++)Be(Ta[r],t);r=i;break;case"source":Be("error",t),r=i;break;case"img":case"image":case"link":Be("error",t),Be("load",t),r=i;break;case"details":Be("toggle",t),r=i;break;case"input":Dw(t,i),r=Xm(t,i),Be("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ye({},i,{value:void 0}),Be("invalid",t);break;case"textarea":Lw(t,i),r=Km(t,i),Be("invalid",t);break;default:r=i}Qm(n,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Mk(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Pk(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ou(t,a):typeof a=="number"&&ou(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(su.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Be("scroll",t):a!=null&&ty(t,s,a,o))}switch(n){case"input":Sc(t),Nw(t,i,!1);break;case"textarea":Sc(t),Bw(t);break;case"option":i.value!=null&&t.setAttribute("value",""+xs(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?nl(t,!!i.multiple,s,!1):i.defaultValue!=null&&nl(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Qd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)Z2(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=Qs(yu.current),Qs(ji.current),Oc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Li]=e,(s=i.nodeValue!==n)&&(t=Pn,t!==null))switch(t.tag){case 3:Mc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Li]=e,e.stateNode=i}return Ot(e),null;case 13:if(Fe(He),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&En!==null&&e.mode&1&&!(e.flags&128))g2(),Ol(),e.flags|=98560,s=!1;else if(s=Oc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Li]=e}else Ol(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),s=!1}else oi!==null&&(Ng(oi),oi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?ut===0&&(ut=3):_y())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return Dl(),Cg(t,e),t===null&&fu(e.stateNode.containerInfo),Ot(e),null;case 10:return by(e.type._context),Ot(e),null;case 17:return dn(e.type)&&Zd(),Ot(e),null;case 19:if(Fe(He),s=e.memoizedState,s===null)return Ot(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ca(s,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=oh(t),o!==null){for(e.flags|=128,ca(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(He,He.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>Ll&&(e.flags|=128,i=!0,ca(s,!1),e.lanes=4194304)}else{if(!i)if(t=oh(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ca(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return Ot(e),null}else 2*tt()-s.renderingStartTime>Ll&&n!==1073741824&&(e.flags|=128,i=!0,ca(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=He.current,De(He,i?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return Iy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?bn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function lD(t,e){switch(gy(e),e.tag){case 1:return dn(e.type)&&Zd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dl(),Fe(cn),Fe(It),Cy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ey(e),null;case 13:if(Fe(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ol()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(He),null;case 4:return Dl(),null;case 10:return by(e.type._context),null;case 22:case 23:return Iy(),null;case 24:return null;default:return null}}var Nc=!1,Lt=!1,aD=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ko(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Qe(t,e,i)}else n.current=null}function Ag(t,e,n){try{n()}catch(i){Qe(t,e,i)}}var E1=!1;function uD(t,e){if(ug=Yd,t=i2(),py(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(l=o+r),d!==s||i!==0&&d.nodeType!==3||(a=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(l=o),h===s&&++c===i&&(a=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(cg={focusedElem:t,selectionRange:n},Yd=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:ti(e.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){Qe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return p=E1,E1=!1,p}function Wa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Ag(e,n,s)}r=r.next}while(r!==i)}}function mf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Pg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eE(t){var e=t.alternate;e!==null&&(t.alternate=null,eE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Li],delete e[mu],delete e[fg],delete e[WT],delete e[GT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tE(t){return t.tag===5||t.tag===3||t.tag===4}function C1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qd));else if(i!==4&&(t=t.child,t!==null))for(Rg(t,e,n),t=t.sibling;t!==null;)Rg(t,e,n),t=t.sibling}function Mg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Mg(t,e,n),t=t.sibling;t!==null;)Mg(t,e,n),t=t.sibling}var yt=null,si=!1;function Fr(t,e,n){for(n=n.child;n!==null;)nE(t,e,n),n=n.sibling}function nE(t,e,n){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(lf,n)}catch{}switch(n.tag){case 5:Lt||Ko(n,e);case 6:var i=yt,r=si;yt=null,Fr(t,e,n),yt=i,si=r,yt!==null&&(si?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(si?(t=yt,n=n.stateNode,t.nodeType===8?Tp(t.parentNode,n):t.nodeType===1&&Tp(t,n),cu(t)):Tp(yt,n.stateNode));break;case 4:i=yt,r=si,yt=n.stateNode.containerInfo,si=!0,Fr(t,e,n),yt=i,si=r;break;case 0:case 11:case 14:case 15:if(!Lt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ag(n,e,o),r=r.next}while(r!==i)}Fr(t,e,n);break;case 1:if(!Lt&&(Ko(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){Qe(n,e,l)}Fr(t,e,n);break;case 21:Fr(t,e,n);break;case 22:n.mode&1?(Lt=(i=Lt)||n.memoizedState!==null,Fr(t,e,n),Lt=i):Fr(t,e,n);break;default:Fr(t,e,n)}}function A1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aD),e.forEach(function(i){var r=vD.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Qn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:yt=l.stateNode,si=!1;break e;case 3:yt=l.stateNode.containerInfo,si=!0;break e;case 4:yt=l.stateNode.containerInfo,si=!0;break e}l=l.return}if(yt===null)throw Error(U(160));nE(s,o,r),yt=null,si=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(u){Qe(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iE(e,t),e=e.sibling}function iE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),Si(t),i&4){try{Wa(3,t,t.return),mf(3,t)}catch(g){Qe(t,t.return,g)}try{Wa(5,t,t.return)}catch(g){Qe(t,t.return,g)}}break;case 1:Qn(e,t),Si(t),i&512&&n!==null&&Ko(n,n.return);break;case 5:if(Qn(e,t),Si(t),i&512&&n!==null&&Ko(n,n.return),t.flags&32){var r=t.stateNode;try{ou(r,"")}catch(g){Qe(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ek(r,s),Zm(l,o);var u=Zm(l,s);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?Mk(r,d):c==="dangerouslySetInnerHTML"?Pk(r,d):c==="children"?ou(r,d):ty(r,c,d,u)}switch(l){case"input":Jm(r,s);break;case"textarea":Ck(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?nl(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?nl(r,!!s.multiple,s.defaultValue,!0):nl(r,!!s.multiple,s.multiple?[]:"",!1))}r[mu]=s}catch(g){Qe(t,t.return,g)}}break;case 6:if(Qn(e,t),Si(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){Qe(t,t.return,g)}}break;case 3:if(Qn(e,t),Si(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{cu(e.containerInfo)}catch(g){Qe(t,t.return,g)}break;case 4:Qn(e,t),Si(t);break;case 13:Qn(e,t),Si(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ly=tt())),i&4&&A1(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(u=Lt)||c,Qn(e,t),Lt=u):Qn(e,t),Si(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Q=t,c=t.child;c!==null;){for(d=Q=c;Q!==null;){switch(h=Q,f=h.child,h.tag){case 0:case 11:case 14:case 15:Wa(4,h,h.return);break;case 1:Ko(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Qe(i,n,g)}}break;case 5:Ko(h,h.return);break;case 22:if(h.memoizedState!==null){R1(d);continue}}f!==null?(f.return=h,Q=f):R1(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Rk("display",o))}catch(g){Qe(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Qe(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qn(e,t),Si(t),i&4&&A1(t);break;case 21:break;default:Qn(e,t),Si(t)}}function Si(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tE(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ou(r,""),i.flags&=-33);var s=C1(t);Mg(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=C1(t);Rg(t,l,o);break;default:throw Error(U(161))}}catch(a){Qe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cD(t,e,n){Q=t,rE(t)}function rE(t,e,n){for(var i=(t.mode&1)!==0;Q!==null;){var r=Q,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Nc;if(!o){var l=r.alternate,a=l!==null&&l.memoizedState!==null||Lt;l=Nc;var u=Lt;if(Nc=o,(Lt=a)&&!u)for(Q=r;Q!==null;)o=Q,a=o.child,o.tag===22&&o.memoizedState!==null?M1(r):a!==null?(a.return=o,Q=a):M1(r);for(;s!==null;)Q=s,rE(s),s=s.sibling;Q=r,Nc=l,Lt=u}P1(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Q=s):P1(t)}}function P1(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||mf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Lt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ti(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&c1(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}c1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&cu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Lt||e.flags&512&&Pg(e)}catch(h){Qe(e,e.return,h)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function R1(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function M1(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mf(4,e)}catch(a){Qe(e,n,a)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(a){Qe(e,r,a)}}var s=e.return;try{Pg(e)}catch(a){Qe(e,s,a)}break;case 5:var o=e.return;try{Pg(e)}catch(a){Qe(e,o,a)}}}catch(a){Qe(e,e.return,a)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var dD=Math.ceil,uh=Lr.ReactCurrentDispatcher,Dy=Lr.ReactCurrentOwner,Gn=Lr.ReactCurrentBatchConfig,Se=0,gt=null,it=null,Ct=0,bn=0,qo=Ns(0),ut=0,Su=null,mo=0,gf=0,Ny=0,Ga=null,rn=null,Ly=0,Ll=1/0,Qi=null,ch=!1,Og=null,gs=null,Lc=!1,os=null,dh=0,Xa=0,Tg=null,Ed=-1,Cd=0;function Xt(){return Se&6?tt():Ed!==-1?Ed:Ed=tt()}function ys(t){return t.mode&1?Se&2&&Ct!==0?Ct&-Ct:JT.transition!==null?(Cd===0&&(Cd=jk()),Cd):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:Jk(t.type)),t):1}function hi(t,e,n,i){if(50<Xa)throw Xa=0,Tg=null,Error(U(185));Yu(t,n,i),(!(Se&2)||t!==gt)&&(t===gt&&(!(Se&2)&&(gf|=n),ut===4&&Qr(t,Ct)),hn(t,i),n===1&&Se===0&&!(e.mode&1)&&(Ll=tt()+500,hf&&Ls()))}function hn(t,e){var n=t.callbackNode;JO(t,e);var i=Jd(t,t===gt?Ct:0);if(i===0)n!==null&&$w(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&$w(n),e===1)t.tag===0?XT(O1.bind(null,t)):f2(O1.bind(null,t)),VT(function(){!(Se&6)&&Ls()}),n=null;else{switch(Uk(i)){case 1:n=oy;break;case 4:n=Fk;break;case 16:n=Xd;break;case 536870912:n=zk;break;default:n=Xd}n=hE(n,sE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sE(t,e){if(Ed=-1,Cd=0,Se&6)throw Error(U(327));var n=t.callbackNode;if(ll()&&t.callbackNode!==n)return null;var i=Jd(t,t===gt?Ct:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=hh(t,i);else{e=i;var r=Se;Se|=2;var s=lE();(gt!==t||Ct!==e)&&(Qi=null,Ll=tt()+500,so(t,e));do try{pD();break}catch(l){oE(t,l)}while(1);wy(),uh.current=s,Se=r,it!==null?e=0:(gt=null,Ct=0,e=ut)}if(e!==0){if(e===2&&(r=rg(t),r!==0&&(i=r,e=Dg(t,r))),e===1)throw n=Su,so(t,0),Qr(t,i),hn(t,tt()),n;if(e===6)Qr(t,i);else{if(r=t.current.alternate,!(i&30)&&!hD(r)&&(e=hh(t,i),e===2&&(s=rg(t),s!==0&&(i=s,e=Dg(t,s))),e===1))throw n=Su,so(t,0),Qr(t,i),hn(t,tt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:Hs(t,rn,Qi);break;case 3:if(Qr(t,i),(i&130023424)===i&&(e=Ly+500-tt(),10<e)){if(Jd(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Xt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=hg(Hs.bind(null,t,rn,Qi),e);break}Hs(t,rn,Qi);break;case 4:if(Qr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-di(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=tt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*dD(i/1960))-i,10<i){t.timeoutHandle=hg(Hs.bind(null,t,rn,Qi),i);break}Hs(t,rn,Qi);break;case 5:Hs(t,rn,Qi);break;default:throw Error(U(329))}}}return hn(t,tt()),t.callbackNode===n?sE.bind(null,t):null}function Dg(t,e){var n=Ga;return t.current.memoizedState.isDehydrated&&(so(t,e).flags|=256),t=hh(t,e),t!==2&&(e=rn,rn=n,e!==null&&Ng(e)),t}function Ng(t){rn===null?rn=t:rn.push.apply(rn,t)}function hD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!mi(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~Ny,e&=~gf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-di(e),i=1<<n;t[n]=-1,e&=~i}}function O1(t){if(Se&6)throw Error(U(327));ll();var e=Jd(t,0);if(!(e&1))return hn(t,tt()),null;var n=hh(t,e);if(t.tag!==0&&n===2){var i=rg(t);i!==0&&(e=i,n=Dg(t,i))}if(n===1)throw n=Su,so(t,0),Qr(t,e),hn(t,tt()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hs(t,rn,Qi),hn(t,tt()),null}function By(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(Ll=tt()+500,hf&&Ls())}}function go(t){os!==null&&os.tag===0&&!(Se&6)&&ll();var e=Se;Se|=1;var n=Gn.transition,i=Ae;try{if(Gn.transition=null,Ae=1,t)return t()}finally{Ae=i,Gn.transition=n,Se=e,!(Se&6)&&Ls()}}function Iy(){bn=qo.current,Fe(qo)}function so(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UT(n)),it!==null)for(n=it.return;n!==null;){var i=n;switch(gy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Zd();break;case 3:Dl(),Fe(cn),Fe(It),Cy();break;case 5:Ey(i);break;case 4:Dl();break;case 13:Fe(He);break;case 19:Fe(He);break;case 10:by(i.type._context);break;case 22:case 23:Iy()}n=n.return}if(gt=t,it=t=vs(t.current,null),Ct=bn=e,ut=0,Su=null,Ny=gf=mo=0,rn=Ga=null,qs!==null){for(e=0;e<qs.length;e++)if(n=qs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}qs=null}return t}function oE(t,e){do{var n=it;try{if(wy(),Sd.current=ah,lh){for(var i=Xe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}lh=!1}if(po=0,ht=ot=Xe=null,Ha=!1,vu=0,Dy.current=null,n===null||n.return===null){ut=1,Su=e,it=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Ct,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=y1(o);if(f!==null){f.flags&=-257,v1(f,o,l,s,e),f.mode&1&&g1(s,u,e),e=f,a=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(a),e.updateQueue=g}else p.add(a);break e}else{if(!(e&1)){g1(s,u,e),_y();break e}a=Error(U(426))}}else if(je&&l.mode&1){var v=y1(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),v1(v,o,l,s,e),yy(Nl(a,l));break e}}s=a=Nl(a,l),ut!==4&&(ut=2),Ga===null?Ga=[s]:Ga.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=V2(s,a,e);u1(s,m);break e;case 1:l=a;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(gs===null||!gs.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=H2(s,l,e);u1(s,b);break e}}s=s.return}while(s!==null)}uE(n)}catch(k){e=k,it===n&&n!==null&&(it=n=n.return);continue}break}while(1)}function lE(){var t=uh.current;return uh.current=ah,t===null?ah:t}function _y(){(ut===0||ut===3||ut===2)&&(ut=4),gt===null||!(mo&268435455)&&!(gf&268435455)||Qr(gt,Ct)}function hh(t,e){var n=Se;Se|=2;var i=lE();(gt!==t||Ct!==e)&&(Qi=null,so(t,e));do try{fD();break}catch(r){oE(t,r)}while(1);if(wy(),Se=n,uh.current=i,it!==null)throw Error(U(261));return gt=null,Ct=0,ut}function fD(){for(;it!==null;)aE(it)}function pD(){for(;it!==null&&!FO();)aE(it)}function aE(t){var e=dE(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?uE(t):it=e,Dy.current=null}function uE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lD(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,it=null;return}}else if(n=oD(n,e,bn),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ut===0&&(ut=5)}function Hs(t,e,n){var i=Ae,r=Gn.transition;try{Gn.transition=null,Ae=1,mD(t,e,n,i)}finally{Gn.transition=r,Ae=i}return null}function mD(t,e,n,i){do ll();while(os!==null);if(Se&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(YO(t,s),t===gt&&(it=gt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lc||(Lc=!0,hE(Xd,function(){return ll(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gn.transition,Gn.transition=null;var o=Ae;Ae=1;var l=Se;Se|=4,Dy.current=null,uD(t,n),iE(n,t),BT(cg),Yd=!!ug,cg=ug=null,t.current=n,cD(n),zO(),Se=l,Ae=o,Gn.transition=s}else t.current=n;if(Lc&&(Lc=!1,os=t,dh=r),s=t.pendingLanes,s===0&&(gs=null),VO(n.stateNode),hn(t,tt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ch)throw ch=!1,t=Og,Og=null,t;return dh&1&&t.tag!==0&&ll(),s=t.pendingLanes,s&1?t===Tg?Xa++:(Xa=0,Tg=t):Xa=0,Ls(),null}function ll(){if(os!==null){var t=Uk(dh),e=Gn.transition,n=Ae;try{if(Gn.transition=null,Ae=16>t?16:t,os===null)var i=!1;else{if(t=os,os=null,dh=0,Se&6)throw Error(U(331));var r=Se;for(Se|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(Q=u;Q!==null;){var c=Q;switch(c.tag){case 0:case 11:case 15:Wa(8,c,s)}var d=c.child;if(d!==null)d.return=c,Q=d;else for(;Q!==null;){c=Q;var h=c.sibling,f=c.return;if(eE(c),c===u){Q=null;break}if(h!==null){h.return=f,Q=h;break}Q=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wa(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Q=m;break e}Q=s.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Q=w;else e:for(o=y;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mf(9,l)}}catch(k){Qe(l,l.return,k)}if(l===o){Q=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Q=b;break e}Q=l.return}}if(Se=r,Ls(),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(lf,t)}catch{}i=!0}return i}finally{Ae=n,Gn.transition=e}}return!1}function T1(t,e,n){e=Nl(n,e),e=V2(t,e,1),t=ms(t,e,1),e=Xt(),t!==null&&(Yu(t,1,e),hn(t,e))}function Qe(t,e,n){if(t.tag===3)T1(t,t,n);else for(;e!==null;){if(e.tag===3){T1(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(gs===null||!gs.has(i))){t=Nl(n,t),t=H2(e,t,1),e=ms(e,t,1),t=Xt(),e!==null&&(Yu(e,1,t),hn(e,t));break}}e=e.return}}function gD(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(Ct&n)===n&&(ut===4||ut===3&&(Ct&130023424)===Ct&&500>tt()-Ly?so(t,0):Ny|=n),hn(t,e)}function cE(t,e){e===0&&(t.mode&1?(e=Ec,Ec<<=1,!(Ec&130023424)&&(Ec=4194304)):e=1);var n=Xt();t=Mr(t,e),t!==null&&(Yu(t,e,n),hn(t,n))}function yD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cE(t,n)}function vD(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),cE(t,n)}var dE;dE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,sD(t,e,n);ln=!!(t.flags&131072)}else ln=!1,je&&e.flags&1048576&&p2(e,nh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;kd(t,e),t=e.pendingProps;var r=Ml(e,It.current);ol(e,n),r=Py(null,e,i,t,r,n);var s=Ry();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(i)?(s=!0,eh(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,xy(e),r.updater=ff,e.stateNode=r,r._reactInternals=e,wg(e,i,t,n),e=xg(null,e,i,!0,s,n)):(e.tag=0,je&&s&&my(e),Ut(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(kd(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=bD(i),t=ti(i,t),r){case 0:e=Sg(null,e,i,t,n);break e;case 1:e=S1(null,e,i,t,n);break e;case 11:e=w1(null,e,i,t,n);break e;case 14:e=b1(null,e,i,ti(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ti(i,r),Sg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ti(i,r),S1(t,e,i,r,n);case 3:e:{if(J2(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,v2(t,e),sh(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Nl(Error(U(423)),e),e=x1(t,e,i,n,r);break e}else if(i!==r){r=Nl(Error(U(424)),e),e=x1(t,e,i,n,r);break e}else for(En=ps(e.stateNode.containerInfo.firstChild),Pn=e,je=!0,oi=null,n=x2(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ol(),i===r){e=Or(t,e,n);break e}Ut(t,e,i,n)}e=e.child}return e;case 5:return k2(e),t===null&&gg(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,dg(i,r)?o=null:s!==null&&dg(i,s)&&(e.flags|=32),X2(t,e),Ut(t,e,o,n),e.child;case 6:return t===null&&gg(e),null;case 13:return Y2(t,e,n);case 4:return ky(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Tl(e,null,i,n):Ut(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ti(i,r),w1(t,e,i,r,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,De(ih,i._currentValue),i._currentValue=o,s!==null)if(mi(s.value,o)){if(s.children===r.children&&!cn.current){e=Or(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===i){if(s.tag===1){a=br(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),yg(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),yg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ut(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ol(e,n),r=Yn(r),i=i(r),e.flags|=1,Ut(t,e,i,n),e.child;case 14:return i=e.type,r=ti(i,e.pendingProps),r=ti(i.type,r),b1(t,e,i,r,n);case 15:return W2(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ti(i,r),kd(t,e),e.tag=1,dn(i)?(t=!0,eh(e)):t=!1,ol(e,n),b2(e,i,r),wg(e,i,r,n),xg(null,e,i,!0,t,n);case 19:return K2(t,e,n);case 22:return G2(t,e,n)}throw Error(U(156,e.tag))};function hE(t,e){return $k(t,e)}function wD(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(t,e,n,i){return new wD(t,e,n,i)}function $y(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bD(t){if(typeof t=="function")return $y(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iy)return 11;if(t===ry)return 14}return 2}function vs(t,e){var n=t.alternate;return n===null?(n=Vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ad(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")$y(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jo:return oo(n.children,r,s,e);case ny:o=8,r|=8;break;case Vm:return t=Vn(12,n,e,r|2),t.elementType=Vm,t.lanes=s,t;case Hm:return t=Vn(13,n,e,r),t.elementType=Hm,t.lanes=s,t;case Wm:return t=Vn(19,n,e,r),t.elementType=Wm,t.lanes=s,t;case Sk:return yf(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wk:o=10;break e;case bk:o=9;break e;case iy:o=11;break e;case ry:o=14;break e;case Ur:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Vn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function oo(t,e,n,i){return t=Vn(7,t,i,e),t.lanes=n,t}function yf(t,e,n,i){return t=Vn(22,t,i,e),t.elementType=Sk,t.lanes=n,t.stateNode={isHidden:!1},t}function Fp(t,e,n){return t=Vn(6,t,null,e),t.lanes=n,t}function zp(t,e,n){return e=Vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function SD(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bp(0),this.expirationTimes=bp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fy(t,e,n,i,r,s,o,l,a){return t=new SD(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Vn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xy(s),t}function xD(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function fE(t){if(!t)return ks;t=t._reactInternals;e:{if(ko(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(dn(n))return h2(t,n,e)}return e}function pE(t,e,n,i,r,s,o,l,a){return t=Fy(n,i,!0,t,r,s,o,l,a),t.context=fE(null),n=t.current,i=Xt(),r=ys(n),s=br(i,r),s.callback=e??null,ms(n,s,r),t.current.lanes=r,Yu(t,r,i),hn(t,i),t}function vf(t,e,n,i){var r=e.current,s=Xt(),o=ys(r);return n=fE(n),e.context===null?e.context=n:e.pendingContext=n,e=br(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ms(r,e,o),t!==null&&(hi(t,r,o,s),bd(t,r,o)),o}function fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zy(t,e){D1(t,e),(t=t.alternate)&&D1(t,e)}function kD(){return null}var mE=typeof reportError=="function"?reportError:function(t){console.error(t)};function jy(t){this._internalRoot=t}wf.prototype.render=jy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));vf(t,e,null,null)};wf.prototype.unmount=jy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;go(function(){vf(null,t,null,null)}),e[Rr]=null}};function wf(t){this._internalRoot=t}wf.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&Xk(t)}};function Uy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function N1(){}function ED(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=fh(o);s.call(u)}}var o=pE(e,i,t,0,null,!1,!1,"",N1);return t._reactRootContainer=o,t[Rr]=o.current,fu(t.nodeType===8?t.parentNode:t),go(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var u=fh(a);l.call(u)}}var a=Fy(t,0,!1,null,null,!1,!1,"",N1);return t._reactRootContainer=a,t[Rr]=a.current,fu(t.nodeType===8?t.parentNode:t),go(function(){vf(e,a,n,i)}),a}function Sf(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var a=fh(o);l.call(a)}}vf(e,o,t,r)}else o=ED(n,e,t,r,i);return fh(o)}Vk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Oa(e.pendingLanes);n!==0&&(ly(e,n|1),hn(e,tt()),!(Se&6)&&(Ll=tt()+500,Ls()))}break;case 13:go(function(){var i=Mr(t,1);if(i!==null){var r=Xt();hi(i,t,1,r)}}),zy(t,1)}};ay=function(t){if(t.tag===13){var e=Mr(t,134217728);if(e!==null){var n=Xt();hi(e,t,134217728,n)}zy(t,134217728)}};Hk=function(t){if(t.tag===13){var e=ys(t),n=Mr(t,e);if(n!==null){var i=Xt();hi(n,t,e,i)}zy(t,e)}};Wk=function(){return Ae};Gk=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};tg=function(t,e,n){switch(e){case"input":if(Jm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=df(i);if(!r)throw Error(U(90));kk(i),Jm(i,r)}}}break;case"textarea":Ck(t,n);break;case"select":e=n.value,e!=null&&nl(t,!!n.multiple,e,!1)}};Dk=By;Nk=go;var CD={usingClientEntryPoint:!1,Events:[qu,Wo,df,Ok,Tk,By]},da={findFiberByHostInstance:Ks,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},AD={bundleType:da.bundleType,version:da.version,rendererPackageName:da.rendererPackageName,rendererConfig:da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ik(t),t===null?null:t.stateNode},findFiberByHostInstance:da.findFiberByHostInstance||kD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{lf=Bc.inject(AD),zi=Bc}catch{}}Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CD;Mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uy(e))throw Error(U(200));return xD(t,e,null,n)};Mn.createRoot=function(t,e){if(!Uy(t))throw Error(U(299));var n=!1,i="",r=mE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Fy(t,1,!1,null,null,n,!1,i,r),t[Rr]=e.current,fu(t.nodeType===8?t.parentNode:t),new jy(e)};Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Ik(e),t=t===null?null:t.stateNode,t};Mn.flushSync=function(t){return go(t)};Mn.hydrate=function(t,e,n){if(!bf(e))throw Error(U(200));return Sf(null,t,e,!0,n)};Mn.hydrateRoot=function(t,e,n){if(!Uy(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=mE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pE(e,null,t,1,n??null,r,!1,s,o),t[Rr]=e.current,fu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new wf(e)};Mn.render=function(t,e,n){if(!bf(e))throw Error(U(200));return Sf(null,t,e,!1,n)};Mn.unmountComponentAtNode=function(t){if(!bf(t))throw Error(U(40));return t._reactRootContainer?(go(function(){Sf(null,null,t,!1,function(){t._reactRootContainer=null,t[Rr]=null})}),!0):!1};Mn.unstable_batchedUpdates=By;Mn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!bf(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Sf(t,e,n,!1,i)};Mn.version="18.2.0-next-9e3b772b8-20220608";function gE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gE)}catch(t){console.error(t)}}gE(),pk.exports=Mn;var Zu=pk.exports;const PD=Xu(Zu);var L1=Zu;jm.createRoot=L1.createRoot,jm.hydrateRoot=L1.hydrateRoot;function RD(t,{insertAt:e}={}){if(!t||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}RD(`[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 6px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:-3px;margin-right:4px}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:-1px}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:auto;border:none;cursor:pointer;outline:none;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:auto}[data-sonner-toast] [data-cancel]{color:var(--color);background:var(--border-color)}[data-sonner-toast] [data-close-button]{position:absolute;left:0;top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:translate(-35%,-35%);border-radius:50%;opacity:0;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]{opacity:1}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}
`);var MD=t=>{switch(t){case"success":return DD;case"error":return ND;default:return null}},OD=Array(12).fill(0),TD=({visible:t})=>z.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},z.createElement("div",{className:"sonner-spinner"},OD.map((e,n)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),DD=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ND=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Lg=0,LD=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...i}=t,r=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Lg++;return this.toasts.find(s=>s.id===r)?this.toasts=this.toasts.map(s=>s.id===r?(this.publish({...s,...t,id:r,title:n}),{...s,...t,id:r,title:n}):s):this.addToast({title:n,...i,id:r}),r},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.promise=(t,e)=>{let n=this.create({...e,promise:t,type:"loading",message:e.loading});return(t instanceof Promise?t:t()).then(i=>{let r=typeof e.success=="function"?e.success(i):e.success;this.create({id:n,type:"success",message:r})}).catch(i=>{let r=typeof e.error=="function"?e.error(i):e.error;this.create({id:n,type:"error",message:r})}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Lg++;this.publish({jsx:t(n),id:n,...e})},this.subscribers=[],this.toasts=[]}},Hr=new LD,BD=(t,e)=>{let n=(e==null?void 0:e.id)||Lg++;return Hr.addToast({title:t,...e,id:n}),n},ID=BD,Vy=Object.assign(ID,{success:Hr.success,error:Hr.error,custom:Hr.custom,message:Hr.message,promise:Hr.promise,dismiss:Hr.dismiss}),_D=3,$D="32px",FD=4e3,zD=356,yE=14,jD=20,UD=200,VD=t=>{let{invert:e,toast:n,interacting:i,setHeights:r,visibleToasts:s,heights:o,index:l,toasts:a,expanded:u,removeToast:c,closeButton:d,style:h,className:f="",descriptionClassName:p="",duration:g,position:v,expandByDefault:m}=t,[y,w]=z.useState(!1),[b,k]=z.useState(!1),[A,R]=z.useState(!1),[N,E]=z.useState(!1),[C,P]=z.useState(0),[M,T]=z.useState(0),L=z.useRef(null),F=l===0,$=l+1<=s,W=n.type,B=n.className||"",I=n.descriptionClassName||"",V=z.useMemo(()=>o.findIndex(ce=>ce.toastId===n.id)||0,[o,n.id]),te=z.useMemo(()=>n.duration||g||FD,[n.duration,g]),le=z.useRef(0),pe=z.useRef(0),dt=z.useRef(te),$r=z.useRef(0),Rt=z.useRef(null),[Ki,yc]=v.split("-"),ia=z.useMemo(()=>o.reduce((ce,Ke,$t)=>$t>=V?ce:ce+Ke.height,0),[o,V]),vc=n.invert||e,Oo=W==="loading";pe.current=z.useMemo(()=>V*yE+ia,[V,ia]),z.useEffect(()=>{w(!0)},[]),z.useLayoutEffect(()=>{if(!y)return;let ce=L.current,Ke=ce.style.height;ce.style.height="auto";let $t=ce.getBoundingClientRect().height;ce.style.height=Ke,T($t),r(qi=>qi.find(zs=>zs.toastId===n.id)?qi.map(zs=>zs.toastId===n.id?{...zs,height:$t}:zs):[{toastId:n.id,height:$t},...qi])},[y,n.title,n.description,r,n.id]);let bi=z.useCallback(()=>{k(!0),P(pe.current),r(ce=>ce.filter(Ke=>Ke.toastId!==n.id)),setTimeout(()=>{c(n)},UD)},[n,c,r,pe]);return z.useEffect(()=>{if(n.promise&&W==="loading"||n.duration===1/0)return;let ce;return u||i?(()=>{if($r.current<le.current){let Ke=new Date().getTime()-le.current;dt.current=dt.current-Ke}$r.current=new Date().getTime()})():(le.current=new Date().getTime(),ce=setTimeout(()=>{var Ke;(Ke=n.onAutoClose)==null||Ke.call(n,n),bi()},dt.current)),()=>clearTimeout(ce)},[u,i,m,n,te,bi,n.promise,W]),z.useEffect(()=>{let ce=L.current;if(ce){let Ke=ce.getBoundingClientRect().height;return T(Ke),r($t=>[{toastId:n.id,height:Ke},...$t]),()=>r($t=>$t.filter(qi=>qi.toastId!==n.id))}},[r,n.id]),z.useEffect(()=>{n.delete&&bi()},[bi,n.delete]),z.createElement("li",{"aria-live":n.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:L,className:f+" "+B,"data-sonner-toast":"","data-styled":!n.jsx,"data-mounted":y,"data-promise":!!n.promise,"data-removed":b,"data-visible":$,"data-y-position":Ki,"data-x-position":yc,"data-index":l,"data-front":F,"data-swiping":A,"data-type":W,"data-invert":vc,"data-swipe-out":N,"data-expanded":!!(u||m&&y),style:{"--index":l,"--toasts-before":l,"--z-index":a.length-l,"--offset":`${b?C:pe.current}px`,"--initial-height":m?"auto":`${M}px`,...h,...n.style},onPointerDown:ce=>{Oo||(P(pe.current),ce.target.setPointerCapture(ce.pointerId),ce.target.tagName!=="BUTTON"&&(R(!0),Rt.current={x:ce.clientX,y:ce.clientY}))},onPointerUp:()=>{var ce,Ke,$t;if(N)return;Rt.current=null;let qi=Number(((ce=L.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(qi)>=jD){P(pe.current),(Ke=n.onDismiss)==null||Ke.call(n,n),bi(),E(!0);return}($t=L.current)==null||$t.style.setProperty("--swipe-amount","0px"),R(!1)},onPointerMove:ce=>{var Ke;if(!Rt.current)return;let $t=ce.clientY-Rt.current.y,qi=ce.clientX-Rt.current.x,zs=(Ki==="top"?Math.min:Math.max)(0,$t),Cw=ce.pointerType==="touch"?10:2;Math.abs(zs)>Cw?(Ke=L.current)==null||Ke.style.setProperty("--swipe-amount",`${$t}px`):Math.abs(qi)>Cw&&(Rt.current=null)}},d&&!n.jsx?z.createElement("button",{"aria-label":"Close toast","data-disabled":Oo,"data-close-button":!0,onClick:Oo?void 0:()=>{var ce;bi(),(ce=n.onDismiss)==null||ce.call(n,n)}},z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,n.jsx||z.isValidElement(n.title)?n.jsx||n.title:z.createElement(z.Fragment,null,W||n.icon||n.promise?z.createElement("div",{"data-icon":""},n.promise?z.createElement(TD,{visible:W==="loading"}):null,n.icon||MD(W)):null,z.createElement("div",{"data-content":""},z.createElement("div",{"data-title":""},n.title),n.description?z.createElement("div",{"data-description":"",className:p+I},n.description):null),n.cancel?z.createElement("button",{"data-button":!0,"data-cancel":!0,onClick:()=>{var ce;bi(),(ce=n.cancel)!=null&&ce.onClick&&n.cancel.onClick()}},n.cancel.label):null,n.action?z.createElement("button",{"data-button":"",onClick:ce=>{var Ke;(Ke=n.action)==null||Ke.onClick(ce),!ce.defaultPrevented&&bi()}},n.action.label):null))},HD=t=>{var e;let{invert:n,position:i="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:a,theme:u="light",richColors:c,duration:d,style:h,visibleToasts:f=_D,toastOptions:p}=t,[g,v]=z.useState([]),[m,y]=z.useState([]),[w,b]=z.useState(!1),[k,A]=z.useState(!1),[R,N]=z.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),[E,C]=i.split("-"),P=z.useRef(null),M=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=z.useCallback(L=>v(F=>F.filter(({id:$})=>$!==L.id)),[]);return z.useEffect(()=>Hr.subscribe(L=>{if(L.dismiss){v(F=>F.map($=>$.id===L.id?{...$,delete:!0}:$));return}setTimeout(()=>{PD.flushSync(()=>{v(F=>{let $=F.findIndex(W=>W.id===L.id);return $!==-1?[...F.slice(0,$),{...F[$],...L},...F.slice($+1)]:[L,...F]})})})}),[]),z.useEffect(()=>{if(u!=="system"){N(u);return}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:L})=>{N(L?"dark":"light")})},[u]),z.useEffect(()=>{g.length<=1&&b(!1)},[g]),z.useEffect(()=>{let L=F=>{var $,W;r.every(B=>F[B]||F.code===B)&&(b(!0),($=P.current)==null||$.focus()),F.code==="Escape"&&(document.activeElement===P.current||(W=P.current)!=null&&W.contains(document.activeElement))&&b(!1)};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[r]),g.length?z.createElement("section",{"aria-label":`Notifications ${M}`,tabIndex:-1},z.createElement("ol",{tabIndex:-1,ref:P,className:l,"data-sonner-toaster":!0,"data-theme":R,"data-rich-colors":c,"data-y-position":E,"data-x-position":C,style:{"--front-toast-height":`${(e=m[0])==null?void 0:e.height}px`,"--offset":typeof a=="number"?`${a}px`:a||$D,"--width":`${zD}px`,"--gap":`${yE}px`,...h},onMouseEnter:()=>b(!0),onMouseMove:()=>b(!0),onMouseLeave:()=>{k||b(!1)},onPointerDown:()=>{A(!0)},onPointerUp:()=>A(!1)},g.map((L,F)=>z.createElement(VD,{key:L.id,index:F,toast:L,duration:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:f,closeButton:o,interacting:k,position:i,style:p==null?void 0:p.style,removeToast:T,toasts:g,heights:m,setHeights:y,expandByDefault:s,expanded:w})))):null};const WD="modulepreload",GD=function(t){return"/"+t},B1={},XD=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=GD(s),s in B1)return;B1[s]=!0;const o=s.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!i)for(let c=r.length-1;c>=0;c--){const d=r[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":WD,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function JD(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let l,a,u;const c=async(h=!0)=>{await a,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){const{Workbox:h}=await XD(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);l=new h("/sw.js",{scope:"/",type:"classic"}),u=async()=>{await(l==null?void 0:l.messageSkipWaiting())};{let f=!1;const p=()=>{f=!0,l==null||l.addEventListener("controlling",g=>{g.isUpdate&&window.location.reload()}),n==null||n()};l.addEventListener("installed",g=>{typeof g.isUpdate>"u"?typeof g.isExternal<"u"?g.isExternal?p():!f&&(i==null||i()):g.isExternal?window.location.reload():!f&&(i==null||i()):g.isUpdate||i==null||i()}),l.addEventListener("waiting",p),l.addEventListener("externalwaiting",p)}l.register({immediate:e}).then(f=>{s?s("/sw.js",f):r==null||r(f)}).catch(f=>{o==null||o(f)})}}return a=d(),c}function YD(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[l,a]=x.useState(!1),[u,c]=x.useState(!1),[d]=x.useState(()=>JD({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){a(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[l,a],offlineReady:[u,c],updateServiceWorker:d}}var KD=function(){};function vE(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function wE(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var bE=typeof window<"u",qD=function(t,e){return typeof e=="boolean"?e:!t},QD=function(t){return x.useReducer(qD,t)};const ZD=QD;var eN=bE?window:null,I1=function(t){return!!t.addEventListener},_1=function(t){return!!t.on},tN=function(t,e,n,i){n===void 0&&(n=eN),x.useEffect(function(){if(e&&n)return I1(n)?vE(n,t,e,i):_1(n)&&n.on(t,e,i),function(){I1(n)?wE(n,t,e,i):_1(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])};const SE=tN;var nN=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},iN=function(t,e,n,i){e===void 0&&(e=KD),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,l=n.options,a=x.useMemo(function(){var u=nN(t),c=function(d){if(u(d))return e(d)};return c},i);SE(s,a,o,l)};const rN=iN;var sN=function(t){return"touches"in t},$1=function(t){sN(t)&&t.touches.length<2&&t.preventDefault&&t.preventDefault()},oN=function(t,e){var n=e===void 0?{}:e,i=n.isPreventDefault,r=i===void 0?!0:i,s=n.delay,o=s===void 0?300:s,l=x.useRef(),a=x.useRef(),u=x.useCallback(function(d){r&&d.target&&(vE(d.target,"touchend",$1,{passive:!1}),a.current=d.target),l.current=setTimeout(function(){return t(d)},o)},[t,o,r]),c=x.useCallback(function(){l.current&&clearTimeout(l.current),r&&a.current&&wE(a.current,"touchend",$1)},[r]);return{onMouseDown:function(d){return u(d)},onTouchStart:function(d){return u(d)},onMouseUp:c,onMouseLeave:c,onTouchEnd:c}};const lN=oN;var aN=function(t,e){return e!==void 0?e:bE?window.matchMedia(t).matches:!1},uN=function(t,e){var n=x.useState(aN(t,e)),i=n[0],r=n[1];return x.useEffect(function(){var s=!0,o=window.matchMedia(t),l=function(){s&&r(!!o.matches)};return o.addListener(l),r(o.matches),function(){s=!1,o.removeListener(l)}},[t]),i};const cN=uN;function dN(){return cN("(max-width: 1024px)")}function xE(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=xE(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function hr(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=xE(t))&&(i&&(i+=" "),i+=e);return i}function hN(){for(var t=0,e,n,i="";t<arguments.length;)(e=arguments[t++])&&(n=kE(e))&&(i&&(i+=" "),i+=n);return i}function kE(t){if(typeof t=="string")return t;for(var e,n="",i=0;i<t.length;i++)t[i]&&(e=kE(t[i]))&&(n&&(n+=" "),n+=e);return n}var Hy="-";function fN(t){var e=mN(t),n=t.conflictingClassGroups,i=t.conflictingClassGroupModifiers,r=i===void 0?{}:i;function s(l){var a=l.split(Hy);return a[0]===""&&a.length!==1&&a.shift(),EE(a,e)||pN(l)}function o(l,a){var u=n[l]||[];return a&&r[l]?[].concat(u,r[l]):u}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function EE(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],i=e.nextPart.get(n),r=i?EE(t.slice(1),i):void 0;if(r)return r;if(e.validators.length!==0){var s=t.join(Hy);return(o=e.validators.find(function(l){var a=l.validator;return a(s)}))==null?void 0:o.classGroupId}}var F1=/^\[(.+)\]$/;function pN(t){if(F1.test(t)){var e=F1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function mN(t){var e=t.theme,n=t.prefix,i={nextPart:new Map,validators:[]},r=yN(Object.entries(t.classGroups),n);return r.forEach(function(s){var o=s[0],l=s[1];Bg(l,i,o,e)}),i}function Bg(t,e,n,i){t.forEach(function(r){if(typeof r=="string"){var s=r===""?e:z1(e,r);s.classGroupId=n;return}if(typeof r=="function"){if(gN(r)){Bg(r(i),e,n,i);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(function(o){var l=o[0],a=o[1];Bg(a,z1(e,l),n,i)})})}function z1(t,e){var n=t;return e.split(Hy).forEach(function(i){n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n}function gN(t){return t.isThemeGetter}function yN(t,e){return e?t.map(function(n){var i=n[0],r=n[1],s=r.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var a=l[0],u=l[1];return[e+a,u]})):o});return[i,s]}):t}function vN(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,i=new Map;function r(s,o){n.set(s,o),e++,e>t&&(e=0,i=n,n=new Map)}return{get:function(o){var l=n.get(o);if(l!==void 0)return l;if((l=i.get(o))!==void 0)return r(o,l),l},set:function(o,l){n.has(o)?n.set(o,l):r(o,l)}}}var CE="!";function wN(t){var e=t.separator||":",n=e.length===1,i=e[0],r=e.length;return function(o){for(var l=[],a=0,u=0,c,d=0;d<o.length;d++){var h=o[d];if(a===0){if(h===i&&(n||o.slice(d,d+r)===e)){l.push(o.slice(u,d)),u=d+r;continue}if(h==="/"){c=d;continue}}h==="["?a++:h==="]"&&a--}var f=l.length===0?o:o.substring(u),p=f.startsWith(CE),g=p?f.substring(1):f,v=c&&c>u?c-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:v}}}function bN(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(i){var r=i[0]==="[";r?(e.push.apply(e,n.sort().concat([i])),n=[]):n.push(i)}),e.push.apply(e,n.sort()),e}function SN(t){return{cache:vN(t.cacheSize),splitModifiers:wN(t),...fN(t)}}var xN=/\s+/;function kN(t,e){var n=e.splitModifiers,i=e.getClassGroupId,r=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(xN).map(function(o){var l=n(o),a=l.modifiers,u=l.hasImportantModifier,c=l.baseClassName,d=l.maybePostfixModifierPosition,h=i(d?c.substring(0,d):c),f=!!d;if(!h){if(!d)return{isTailwindClass:!1,originalClassName:o};if(h=i(c),!h)return{isTailwindClass:!1,originalClassName:o};f=!1}var p=bN(a).join(":"),g=u?p+CE:p;return{isTailwindClass:!0,modifierId:g,classGroupId:h,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,a=o.classGroupId,u=o.hasPostfixModifier,c=l+a;return s.has(c)?!1:(s.add(c),r(a,u).forEach(function(d){return s.add(l+d)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function EN(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,r,s,o=l;function l(u){var c=e[0],d=e.slice(1),h=d.reduce(function(f,p){return p(f)},c());return i=SN(h),r=i.cache.get,s=i.cache.set,o=a,a(u)}function a(u){var c=r(u);if(c)return c;var d=kN(u,i);return s(u,d),d}return function(){return o(hN.apply(null,arguments))}}function Le(t){var e=function(i){return i[t]||[]};return e.isThemeGetter=!0,e}var AE=/^\[(?:([a-z-]+):)?(.+)\]$/i,CN=/^\d+\/\d+$/,AN=new Set(["px","full","screen"]),PN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,RN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,MN=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Zn(t){return Zs(t)||AN.has(t)||CN.test(t)||Ig(t)}function Ig(t){return Eo(t,"length",BN)}function ON(t){return Eo(t,"size",PE)}function TN(t){return Eo(t,"position",PE)}function DN(t){return Eo(t,"url",IN)}function Ic(t){return Eo(t,"number",Zs)}function Zs(t){return!Number.isNaN(Number(t))}function NN(t){return t.endsWith("%")&&Zs(t.slice(0,-1))}function ha(t){return j1(t)||Eo(t,"number",j1)}function me(t){return AE.test(t)}function fa(){return!0}function zr(t){return PN.test(t)}function LN(t){return Eo(t,"",_N)}function Eo(t,e,n){var i=AE.exec(t);return i?i[1]?i[1]===e:n(i[2]):!1}function BN(t){return RN.test(t)}function PE(){return!1}function IN(t){return t.startsWith("url(")}function j1(t){return Number.isInteger(Number(t))}function _N(t){return MN.test(t)}function $N(){var t=Le("colors"),e=Le("spacing"),n=Le("blur"),i=Le("brightness"),r=Le("borderColor"),s=Le("borderRadius"),o=Le("borderSpacing"),l=Le("borderWidth"),a=Le("contrast"),u=Le("grayscale"),c=Le("hueRotate"),d=Le("invert"),h=Le("gap"),f=Le("gradientColorStops"),p=Le("gradientColorStopPositions"),g=Le("inset"),v=Le("margin"),m=Le("opacity"),y=Le("padding"),w=Le("saturate"),b=Le("scale"),k=Le("sepia"),A=Le("skew"),R=Le("space"),N=Le("translate"),E=function(){return["auto","contain","none"]},C=function(){return["auto","hidden","clip","visible","scroll"]},P=function(){return["auto",me,e]},M=function(){return[me,e]},T=function(){return["",Zn]},L=function(){return["auto",Zs,me]},F=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},$=function(){return["solid","dashed","dotted","double","none"]},W=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},B=function(){return["start","end","center","between","around","evenly","stretch"]},I=function(){return["","0",me]},V=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},te=function(){return[Zs,Ic]},le=function(){return[Zs,me]};return{cacheSize:500,theme:{colors:[fa],spacing:[Zn],blur:["none","",zr,me],brightness:te(),borderColor:[t],borderRadius:["none","","full",zr,me],borderSpacing:M(),borderWidth:T(),contrast:te(),grayscale:I(),hueRotate:le(),invert:I(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[NN,Ig],inset:P(),margin:P(),opacity:te(),padding:M(),saturate:te(),scale:te(),sepia:I(),skew:le(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",me]}],container:["container"],columns:[{columns:[zr]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(F(),[me])}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ha]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",me]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",ha]}],"grid-cols":[{"grid-cols":[fa]}],"col-start-end":[{col:["auto",{span:["full",ha]},me]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[fa]}],"row-start-end":[{row:["auto",{span:[ha]},me]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",me]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(B())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(B(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(B(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",me,e]}],"min-w":[{"min-w":["min","max","fit",me,Zn]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[zr]},zr,me]}],h:[{h:[me,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",me,Zn]}],"max-h":[{"max-h":[me,e,"min","max","fit"]}],"font-size":[{text:["base",zr,Ig]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ic]}],"font-family":[{font:[fa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",me]}],"line-clamp":[{"line-clamp":["none",Zs,Ic]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",me,Zn]}],"list-image":[{"list-image":["none",me]}],"list-style-type":[{list:["none","disc","decimal",me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat($(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Zn]}],"underline-offset":[{"underline-offset":["auto",me,Zn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(F(),[TN])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ON]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},DN]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[].concat($(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:$()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat($())}],"outline-offset":[{"outline-offset":[me,Zn]}],"outline-w":[{outline:[Zn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[Zn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",zr,LN]}],"shadow-color":[{shadow:[fa]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":W()}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[a]}],"drop-shadow":[{"drop-shadow":["","none",zr,me]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[a]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",me]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",me]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[ha,me]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",me]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Zn,Ic]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var FN=EN($N);function lo(...t){return FN(hr(t))}let zN=0;function he(t,e){const n=`atom${++zN}`,i={toString:()=>n};return typeof t=="function"?i.read=t:(i.init=t,i.read=r=>r(i),i.write=(r,s,o)=>s(i,typeof o=="function"?o(r(i)):o)),e&&(i.write=e),i}const U1=t=>"init"in t,V1=t=>!!t.write,ph=new WeakMap,jN=(t,e)=>{ph.set(t,e),t.catch(()=>{}).finally(()=>ph.delete(t))},H1=(t,e)=>{const n=ph.get(t);n&&(ph.delete(t),n(e))},W1=(t,e)=>{t.status="fulfilled",t.value=e},G1=(t,e)=>{t.status="rejected",t.reason=e},UN=t=>typeof(t==null?void 0:t.then)=="function",pa=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),X1=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),Do=t=>"v"in t&&t.v instanceof Promise,VN=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,_c=t=>{if("e"in t)throw t.e;return t.v},Wy=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let i,r,s;const o=E=>t.get(E),l=(E,C)=>{const P=t.get(E);if(t.set(E,C),n.has(E)||n.set(E,P),P&&Do(P)){const M="v"in C?C.v instanceof Promise?C.v:Promise.resolve(C.v):Promise.reject(C.e);H1(P.v,M)}},a=(E,C,P)=>{const M=new Map;let T=!1;P.forEach((L,F)=>{!L&&F===E&&(L=C),L&&(M.set(F,L),C.d.get(F)!==L&&(T=!0))}),(T||C.d.size!==M.size)&&(C.d=M)},u=(E,C,P)=>{const M=o(E),T={d:(M==null?void 0:M.d)||new Map,v:C};if(P&&a(E,T,P),M&&pa(M,T)&&M.d===T.d)return M;if(M&&Do(M)&&Do(T)&&VN(M,T)){if(M.d===T.d)return M;T.v=M.v}return l(E,T),T},c=(E,C,P,M)=>{if(UN(C)){let T;const L=new Promise((F,$)=>{let W=!1;C.then(B=>{if(!W){W=!0;const I=o(E),V=u(E,L,P);W1(L,B),F(B),(I==null?void 0:I.d)!==V.d&&A(E,V,I==null?void 0:I.d)}},B=>{if(!W){W=!0;const I=o(E),V=u(E,L,P);G1(L,B),$(B),(I==null?void 0:I.d)!==V.d&&A(E,V,I==null?void 0:I.d)}}),T=B=>{W||(W=!0,B.then(I=>W1(L,I),I=>G1(L,I)),F(B))}});return L.orig=C,L.status="pending",jN(L,F=>{F&&T(F),M==null||M()}),u(E,L,P)}return u(E,C,P)},d=(E,C,P)=>{const M=o(E),T={d:(M==null?void 0:M.d)||new Map,e:C};return P&&a(E,T,P),M&&X1(M,T)&&M.d===T.d?M:(l(E,T),T)},h=E=>{const C=o(E);if(C&&(C.d.forEach((W,B)=>{B!==E&&!e.has(B)&&h(B)}),Array.from(C.d).every(([W,B])=>{const I=o(W);return W===E||I===B||I&&!Do(I)&&pa(I,B)})))return C;const P=new Map;let M=!0;const T=W=>{if(W===E){const I=o(W);if(I)return P.set(W,I),_c(I);if(U1(W))return P.set(W,void 0),W.init;throw new Error("no atom init")}const B=h(W);return P.set(W,B),_c(B)};let L,F;const $={get signal(){return L||(L=new AbortController),L.signal},get setSelf(){return!F&&V1(E)&&(F=(...W)=>{if(!M)return w(E,...W)}),F}};try{const W=E.read(T,$);return c(E,W,P,()=>L==null?void 0:L.abort())}catch(W){return d(E,W,P)}finally{M=!1}},f=E=>_c(h(E)),p=E=>{let C=e.get(E);return C||(C=b(E)),C},g=(E,C)=>!C.l.size&&(!C.t.size||C.t.size===1&&C.t.has(E)),v=E=>{const C=e.get(E);C&&g(E,C)&&k(E)},m=E=>{const C=new Map,P=new WeakMap,M=L=>{const F=e.get(L);F==null||F.t.forEach($=>{$!==L&&(C.set($,(C.get($)||new Set).add(L)),P.set($,(P.get($)||0)+1),M($))})};M(E);const T=L=>{const F=e.get(L);F==null||F.t.forEach($=>{var W;if($!==L){let B=P.get($);if(B&&P.set($,--B),!B){let I=!!((W=C.get($))!=null&&W.size);if(I){const V=o($),te=h($);I=!V||!pa(V,te)}I||C.forEach(V=>V.delete($))}T($)}})};T(E)},y=(E,...C)=>{let P=!0;const M=F=>_c(h(F)),T=(F,...$)=>{let W;if(F===E){if(!U1(F))throw new Error("atom not writable");const B=o(F),I=c(F,$[0]);(!B||!pa(B,I))&&m(F)}else W=y(F,...$);if(!P){const B=R()}return W},L=E.write(M,T,...C);return P=!1,L},w=(E,...C)=>{const P=y(E,...C),M=R();return P},b=(E,C)=>{const P={t:new Set(C&&[C]),l:new Set};if(e.set(E,P),h(E).d.forEach((M,T)=>{const L=e.get(T);L?L.t.add(E):T!==E&&b(T,E)}),h(E),V1(E)&&E.onMount){const M=E.onMount((...T)=>w(E,...T));M&&(P.u=M)}return P},k=E=>{var C;const P=(C=e.get(E))==null?void 0:C.u;P&&P(),e.delete(E);const M=o(E);M&&(Do(M)&&H1(M.v),M.d.forEach((T,L)=>{if(L!==E){const F=e.get(L);F&&(F.t.delete(E),g(L,F)&&k(L))}}))},A=(E,C,P)=>{const M=new Set(C.d.keys());P==null||P.forEach((T,L)=>{if(M.has(L)){M.delete(L);return}const F=e.get(L);F&&(F.t.delete(E),g(L,F)&&k(L))}),M.forEach(T=>{const L=e.get(T);L?L.t.add(E):e.has(E)&&b(T,E)})},R=()=>{let E;for(;n.size;){const C=Array.from(n);n.clear(),C.forEach(([P,M])=>{const T=o(P);if(T){T.d!==(M==null?void 0:M.d)&&A(P,T,M==null?void 0:M.d);const L=e.get(P);L&&!(M&&!Do(M)&&(pa(M,T)||X1(M,T)))&&L.l.forEach(F=>F())}})}};return{get:f,set:w,sub:(E,C)=>{const P=p(E),M=R(),T=P.l;return T.add(C),()=>{T.delete(C),v(E)}}}};let jp;const HN=()=>(jp||(jp=Wy()),jp),RE=x.createContext(void 0),ME=t=>{const e=x.useContext(RE);return(t==null?void 0:t.store)||e||HN()},WN=({children:t,store:e})=>{const n=x.useRef();return!e&&!n.current&&(n.current=Wy()),x.createElement(RE.Provider,{value:e||n.current},t)},GN=t=>typeof(t==null?void 0:t.then)=="function",XN=z.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Kl(t,e){const n=ME(e),[[i,r,s],o]=x.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let l=i;(r!==n||s!==t)&&(o(),l=n.get(t));const a=e==null?void 0:e.delay;return x.useEffect(()=>{const u=n.sub(t,()=>{if(typeof a=="number"){setTimeout(o,a);return}o()});return o(),u},[n,t,a]),x.useDebugValue(l),GN(l)?XN(l):l}function JN(t,e){const n=ME(e);return x.useCallback((...r)=>n.set(t,...r),[n,t])}function $c(t,e){return[Kl(t,e),JN(t,e)]}function mh(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{e(t[r],r,t)}catch(s){i.push(n(s,r,t))}return i}function YN(t,e,n,i,r){for(e=e.split?e.split("."):e,i=0;i<e.length;i++)t=t?t[e[i]]:r;return t===r?n:t}function Gy(t){return function(n,i,...r){const s=YN(t,`${n}.${i}`,null);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}class ft{constructor(e,n){Y(this,"start");Y(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new ft(i,r)}toJSON(){return this.range}}function OE(t){const e=t.charCodeAt(0);return O.fitsUnsigned(e,8)?e:null}function Xy(t){return O.fitsUnsigned(t,8)?String.fromCharCode(t):null}var Ve,qe;const we=class we{constructor(e,n){ie(this,Ve,void 0);ie(this,qe,void 0);_(this,Ve,e|0),_(this,qe,n)}get size(){return S(this,qe)}is8bits(){return S(this,qe)===8}is16bits(){return S(this,qe)===16}get unsigned(){return S(this,Ve)}get signed(){return S(this,Ve)<=we.maxSignedValue(S(this,qe))?S(this,Ve):S(this,Ve)-(we.maxValue(S(this,qe))+1)}get low(){return this.is8bits()?this:we.fromUnsigned(S(this,Ve)&we.maxValue(8),8)}get high(){return this.is8bits()?new we(0,8):we.fromUnsigned(S(this,Ve)>>8&we.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return we.fromUnsigned(S(this,Ve)&~we.maxValue(8)|e.unsigned,S(this,qe))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return we.fromUnsigned(S(this,Ve)&we.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=S(this,qe))throw new RangeError(`Index ${e} out of bounds for byte of size ${S(this,qe)}`);return(S(this,Ve)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=S(this,qe))throw new RangeError(`Index ${e} out of bounds for byte of size ${S(this,qe)}`);return n?we.fromUnsigned(S(this,Ve)|1<<e,S(this,qe)):we.fromUnsigned(S(this,Ve)&~(1<<e),S(this,qe))}add(e){return e=Number(e),we.fromUnsigned(S(this,Ve)+e,S(this,qe))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:S(this,Ve)===S(e,Ve)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(S(this,qe));for(let n=0;n<S(this,qe);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return S(this,Ve).toString(16).padStart(S(this,qe)/4,"0").toUpperCase();case"bin":return S(this,Ve).toString(2).padStart(S(this,qe),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return S(this,qe)===8?Xy(S(this,Ve))??"---":this.low.toString("ascii")+this.high.toString("ascii")}}toJSON(){return S(this,Ve)}valueOf(){return S(this,Ve)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=we.minSignedValue(n)&&e<=we.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=we.minValue()&&e<=we.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=we.minSignedValue(n)&&e<=we.maxSignedValue(n)}static fromUnsigned(e,n){if(!we.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new we(e,n)}static fromSigned(e,n){if(!we.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new we(e+we.maxValue(n)+1,n):new we(e,n)}static fromNumber(e,n){return e<0?we.fromSigned(e,n):we.fromUnsigned(e,n)}static fromChar(e){const n=OE(e)??-1;return we.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*we.maxValue(e));return new we(n,e)}static zero(e){return new we(0,e)}};Ve=new WeakMap,qe=new WeakMap;let O=we;var tr;const Jr=class Jr{constructor(e){ie(this,tr,void 0);_(this,tr,e)}get value(){return S(this,tr).unsigned}get byte(){return S(this,tr)}toString(e=!0){let n=S(this,tr).toString("hex");return e&&(n+="h"),n}toJSON(){return S(this,tr).toJSON()}valueOf(){return S(this,tr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Jr.MIN_ADDRESS&&e<=Jr.MAX_ADDRESS}static from(e){if(e=Number(e),!Jr.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=O.fromUnsigned(e,16);return new Jr(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i}};tr=new WeakMap,Y(Jr,"MIN_ADDRESS",0),Y(Jr,"MAX_ADDRESS",32767);let oe=Jr;var nr;const Yr=class Yr{constructor(e){ie(this,nr,void 0);_(this,nr,e)}get value(){return S(this,nr).unsigned}get byte(){return S(this,nr)}toString(e=!0){let n=S(this,nr).toString("hex");return e&&(n+="h"),n}toJSON(){return S(this,nr).toJSON()}valueOf(){return S(this,nr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Yr.MIN_ADDRESS&&e<=Yr.MAX_ADDRESS}static from(e){if(e=Number(e),!Yr.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=O.fromUnsigned(e,8);return new Yr(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};nr=new WeakMap,Y(Yr,"MIN_ADDRESS",0),Y(Yr,"MAX_ADDRESS",127);let fn=Yr;const J1=oe.from(oe.MAX_ADDRESS).toString(),KN=fn.from(fn.MAX_ADDRESS).toString(),qN={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${oe.format(t)} is out of range (max memory address: ${J1}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${oe.format(t)}, which is outside the memory range (max memory address: ${J1}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${KN}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"label-should-be-writable":t=>`Label ${t} doesn't point to a writable memory address  should point to a DB or DW declaration.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},Y1=oe.from(oe.MAX_ADDRESS).toString(),QN=fn.from(fn.MAX_ADDRESS).toString(),ZN={"address-has-code":t=>`La direccin de memoria ${oe.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${t} est fuera de rango (direccin mxima de memoria: ${Y1}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${oe.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${Y1}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${QN}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"label-should-be-writable":t=>`La etiqueta ${t} no apunta a una direccin de memoria modificable  debera apuntar a una declaracin DB o DW.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${t}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},eL=Gy({en:qN,es:ZN});class J extends Error{constructor(n,...i){super();Y(this,"code");Y(this,"context");Y(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof ft?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return eL(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof J?n:new J("unexpected-error",n)}}var es,bl;class tL{constructor(){Y(this,"codeMemory",new Set);Y(this,"labels",new Map);ie(this,es,!1);ie(this,bl,!1)}loadStatements(e){if(S(this,es))throw new Error("Tried to load statements twice");_(this,es,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new J("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:oe.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:oe.from(0)})}return n}computeAddresses(e){if(S(this,bl))throw new Error("Tried to compute addresses twice");_(this,bl,!0),this.codeMemory.clear();const n=new Set;let i=null;return mh(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){i=s.newAddress;return}if(i===null)throw new J("missing-org").at(s);const o=s.length;for(let a=0;a<o;a++){if(!oe.inRange(i+a))throw new J("instruction-out-of-range",i+a).at(s);const u=oe.from(i+a);if(n.has(u.value))throw new J("occupied-address",u).at(s);n.add(u.value),s.isInstruction()&&this.codeMemory.add(u.value)}const l=oe.from(i);s.setStart(l),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:l}),i+=o},J.from)}labelExists(e){if(!S(this,es))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!S(this,es))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!S(this,es))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!S(this,bl))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof oe&&(e=e.value),this.codeMemory.has(e)}}es=new WeakMap,bl=new WeakMap;const nL=["AL","BL","CL","DL","AH","BH","CH","DH"],TE=["AX","BX","CX","DX","SP"],gh=[...nL,...TE],Jy=["DB","DW","EQU"],Yy=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],iL=["OFFSET","ORG","BYTE","WORD","PTR","END",...gh,...Yy,...Jy];class rL{constructor(e,n,i){Y(this,"type");Y(this,"lexeme");Y(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class sL{constructor(e){Y(this,"scanned",!1);Y(this,"tokens",[]);Y(this,"position",new ft(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new ft(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new J("lexer.unterminated-string").at(this.position);if(this.peek().charCodeAt(0)>255)throw new J("lexer.only-ascii").at(new ft(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new J("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new J("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();iL.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new J("lexer.unexpected-character",e).at(this.position)}return this.position=new ft(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new rL(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new ft(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class xt{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}Y(xt,"numberLiteral",(...e)=>new oL(...e)),Y(xt,"label",(...e)=>new lL(...e)),Y(xt,"unaryOperation",(...e)=>new aL(...e)),Y(xt,"binaryOperation",(...e)=>new uL(...e));class oL extends xt{constructor(n,i){super(i);Y(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class lL extends xt{constructor(n,i,r){super(r);Y(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new J("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new J("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new J("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class aL extends xt{constructor(n,i,r){super(r);Y(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class uL extends xt{constructor(n,i,r,s){super(s);Y(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class xf{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var ir;class DE extends xf{constructor(n,i,r){super(r);Y(this,"type","data-directive");Y(this,"label");Y(this,"values");ie(this,ir,null);this.values=n,this.label=i}get start(){if(S(this,ir)===null)throw new Error("Start not set");return S(this,ir)}setStart(n){if(S(this,ir)!==null)throw new Error("Start already set");_(this,ir,n)}toJSON(){return{...super.toJSON(),...S(this,ir)?{start:S(this,ir).toJSON()}:{},directive:this.directive,label:this.label}}}ir=new WeakMap;var ro,ts,Sl;class cL extends DE{constructor(n,i,r){super(n,i,r);Y(this,"directive","EQU");ie(this,ro,"not-processed");ie(this,ts,null);ie(this,Sl,null)}toJSON(){var n;return{...super.toJSON(),value:S(this,Sl)??((n=S(this,ts))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(S(this,ts))throw new Error("Constant already validated");if(!this.label)throw new J("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new J("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new J("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new J("cannot-be-unassinged","EQU").at(n);_(this,ts,n.value)}evaluateExpressions(n){if(!S(this,ts))throw new Error("Constant not validated");if(S(this,ro)==="processed")return S(this,Sl);if(S(this,ro)==="processing")throw new J("circular-reference").at(this.position);_(this,ro,"processed");const i=S(this,ts).evaluate(n);return _(this,ro,"processed"),_(this,Sl,i),i}evaluate(n){return this.evaluateExpressions(n)}}ro=new WeakMap,ts=new WeakMap,Sl=new WeakMap;const Da=Symbol("unassigned");var Zt,ni;class dL extends DE{constructor(n,i,r,s){super(i,r,s);Y(this,"size");ie(this,Zt,null);ie(this,ni,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!S(this,Zt))throw new Error("Data directive not validated");return S(this,Zt).length*(this.size/8)}getValues(){if(!S(this,ni))throw new Error("Data directive not evaluated");return S(this,ni)}toJSON(){return{...super.toJSON(),values:(S(this,ni)??S(this,Zt)??this.values).map(n=>n===Da?"?":n.toJSON())}}validate(){if(S(this,Zt))throw new Error("Data directive already validated");_(this,Zt,[]);for(const n of this.values)if(n.isUnassigned())S(this,Zt).push(Da);else if(n.isString()){if(this.directive!=="DB")throw new J("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=OE(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new ft(n.position.start+r,n.position.start+r+1),l=xt.numberLiteral(s,o);S(this,Zt).push(l)}}else S(this,Zt).push(n.value);if(S(this,Zt).length===0)throw new J("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!S(this,Zt))throw new Error("Data directive not validated");if(S(this,ni))throw new Error("Data directive already evaluated");_(this,ni,[]);const i=mh(S(this,Zt),r=>{if(r===Da)S(this,ni).push(Da);else{const s=r.evaluate(n);if(!O.fits(s,this.size))throw new J("value-out-of-range",s,this.size).at(this);const o=O.fromNumber(s,this.size);S(this,ni).push(o)}},J.from);return i.length>0&&_(this,ni,null),i}}Zt=new WeakMap,ni=new WeakMap;class Ky{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class hL extends Ky{constructor(n,i){super(i);Y(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class fL extends Ky{constructor(n){super(n);Y(this,"type","unassigned")}}class pL extends Ky{constructor(n){super(n.position);Y(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function mL(t,e,n){const i=ft.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new dL(t.type,e,n,i);case"EQU":return new cL(e,n,i)}}class gL extends xf{constructor(n){super(n);Y(this,"type","end")}}function Ws(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var rr;class Co extends xf{constructor(n,i,r){super(r);Y(this,"type","instruction");Y(this,"label");Y(this,"operands");ie(this,rr,null);this.operands=n,this.label=i}get start(){if(S(this,rr)===null)throw new Error("Start not set");return S(this,rr)}setStart(n){if(S(this,rr)!==null)throw new Error("Start already set");_(this,rr,n)}toJSON(){return{...super.toJSON(),...S(this,rr)?{start:S(this,rr).toJSON()}:{},instruction:this.instruction,label:this.label}}}rr=new WeakMap;var Dt,Bn;class yL extends Co{constructor(n,i,r,s){super(i,r,s);ie(this,Dt,null);ie(this,Bn,null);this.instruction=n}get length(){if(!S(this,Dt))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=S(this,Dt);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!S(this,Bn))throw new Error("Instruction not evaluated");return S(this,Bn)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],l={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=l[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=Ws(s)<<3,o[1]|=Ws(r)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=Ws(r)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=Ws(r)<<0,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}case"mem<-reg":{r.mode==="direct"?(o[1]=192,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=208,o[1]|=Ws(s)<<0;break}case"mem<-imd":{r.mode==="direct"?(o[1]=200,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...S(this,Bn)??S(this,Dt)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(S(this,Dt))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new J("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new J("size-mismatch",r.size,i.size).at(this);_(this,Dt,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new J("size-mismatch",r.size,i.size).at(this);_(this,Dt,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new J("size-mismatch",r.size,i.size).at(this);_(this,Dt,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}if(r.value.isLabel()){const s=r.isDataDirectiveLabel(n);if(s){if(s!==i.size)throw new J("size-mismatch",s,i.size).at(this);_(this,Dt,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:xt.label(r.value.value,!0,r.value.position)}});return}}_(this,Dt,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else if(i.value.isLabel()){if(s=i.isDataDirectiveLabel(n)||"auto",s==="auto")throw new J("label-should-be-writable",i.value.value).at(i);o={mode:"direct",address:xt.label(i.value.value,!0,i.value.position)}}else throw new J("destination-cannot-be-immediate").at(i);if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new J("size-mismatch",s,r.size).at(this);_(this,Dt,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.isDataDirectiveLabel(n))throw new J("double-memory-access").at(this);if(s==="auto")throw new J("unknown-size").at(i);_(this,Dt,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new J("double-memory-access").at(this)}}evaluateExpressions(n){if(!S(this,Dt))throw new Error("Instruction not validated");if(S(this,Bn))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=S(this,Dt),l=a=>{const u=a.evaluate(n);if(!oe.inRange(u))throw new J("address-out-of-range",u).at(a);const c=oe.from(u);if(n.addressIsReserved(c))throw new J("address-has-code",c).at(a);return c};switch(i){case"reg<-reg":{_(this,Bn,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{_(this,Bn,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:l(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const a=o.evaluate(n);if(!O.fits(a,r))throw new J("value-out-of-range",a,r).at(o);const u=O.fromNumber(a,r);_(this,Bn,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{_(this,Bn,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:l(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const a=o.evaluate(n);if(!O.fits(a,r))throw new J("value-out-of-range",a,r).at(o);const u=O.fromNumber(a,r);_(this,Bn,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:l(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}Dt=new WeakMap,Bn=new WeakMap;var Ri,sr;class vL extends Co{constructor(n,i,r,s){super(i,r,s);ie(this,Ri,null);ie(this,sr,null);Y(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!S(this,sr))throw new Error("Instruction not evaluated");return S(this,sr)}toJSON(){return{...super.toJSON(),...S(this,sr)?{value:S(this,sr).toJSON()}:S(this,Ri)?{initialValue:S(this,Ri).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(S(this,Ri))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new J("expects-immediate").at(n);_(this,Ri,n.value)}evaluateExpressions(n){if(!S(this,Ri))throw new Error("Instruction not validated");if(S(this,sr))throw new Error("Instruction aready evaluated");const i=S(this,Ri).evaluate(n);if(!O.fitsUnsigned(i,8))throw new J("invalid-interrupt",i).at(S(this,Ri));_(this,sr,O.fromUnsigned(i,8))}}Ri=new WeakMap,sr=new WeakMap;var ii,or,Zx;let wL=(Zx=class extends Co{constructor(n,i,r,s){super(i,r,s);ie(this,ii,null);ie(this,or,null);this.instruction=n}get length(){if(!S(this,ii))throw new Error("Instruction not validated");return S(this,ii).port==="fixed"?2:1}toBytes(){const n=[],i={IN:80,OUT:84};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(S(this,or)===null)throw new Error("Operation not set");return S(this,or)}toJSON(){return{...super.toJSON(),...S(this,or)??S(this,ii)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(S(this,ii))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new J("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new J("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new J("expects-dx").at(i);_(this,ii,{port:"variable",size:r});return}if(i.isNumberExpression()){_(this,ii,{port:"fixed",size:r,address:i.value});return}throw new J("expects-immediate").at(i)}evaluateExpressions(n){if(!S(this,ii))throw new Error("Instruction not validated");if(S(this,or))throw new Error("Instruction aready evaluated");const i=S(this,ii);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!fn.inRange(r))throw new J("io-address-out-of-range",r).at(this);const s=fn.from(r);_(this,or,{port:"fixed",size:i.size,address:s})}else _(this,or,{port:"variable",size:i.size})}},ii=new WeakMap,or=new WeakMap,Zx);var lr,ar,ek;let bL=(ek=class extends Co{constructor(n,i,r,s){super(i,r,s);ie(this,lr,null);ie(this,ar,null);Y(this,"length",3);this.instruction=n}toBytes(){const n=[],i={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(S(this,ar)===null)throw new Error("Instruction not evaluated");return S(this,ar)}toJSON(){return{...super.toJSON(),...S(this,ar)?{address:S(this,ar).toJSON()}:S(this,lr)?{jumpTo:S(this,lr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(S(this,lr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new J("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new J("label-not-found",r).at(i);if(s!=="instruction")throw new J("label-should-be-an-instruction",r).at(i);_(this,lr,r)}evaluateExpressions(n){if(!S(this,lr))throw new Error("Instruction not validated");if(S(this,ar))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(S(this,lr));if(!oe.inRange(i))throw new J("address-out-of-range",i).at(this);_(this,ar,oe.from(i))}},lr=new WeakMap,ar=new WeakMap,ek);var Mi,tk;let SL=(tk=class extends Co{constructor(n,i,r,s){super(i,r,s);ie(this,Mi,null);Y(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:96,POP:104}[this.instruction];return i|=Ws(this.register),new Uint8Array([i])}get register(){if(!S(this,Mi))throw new Error("Instruction not evaluated");return S(this,Mi)}toJSON(){return{...super.toJSON(),...S(this,Mi)?{register:S(this,Mi)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(S(this,Mi))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new J("expects-word-register").at(n);_(this,Mi,n.value)}evaluateExpressions(){if(!S(this,Mi))throw new Error("Instruction not validated")}},Mi=new WeakMap,tk);var yn,Oi;class xL extends Co{constructor(n,i,r,s){super(i,r,s);ie(this,yn,null);ie(this,Oi,null);this.instruction=n}get length(){if(!S(this,yn))throw new Error("Instruction not validated");const{mode:n}=S(this,yn);let i=2;return n==="mem-direct"&&(i+=2),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=Ws(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!S(this,Oi))throw new Error("Instruction not evaluated");return S(this,Oi)}toJSON(){return{...super.toJSON(),...S(this,Oi)??S(this,yn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(S(this,yn))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){_(this,yn,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new J("unknown-size").at(i);_(this,yn,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new J("unknown-size").at(i);_(this,yn,{mode:"mem-indirect",size:i.size});return}if(i.value.isLabel()){const r=i.isDataDirectiveLabel(n);if(r){_(this,yn,{mode:"mem-direct",size:r,address:xt.label(i.value.value,!0,i.value.position)});return}}throw new J("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!S(this,yn))throw new Error("Instruction not validated");if(S(this,Oi))throw new Error("Instruction aready evaluated");const i=S(this,yn);switch(i.mode){case"reg":{_(this,Oi,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!oe.inRange(r))throw new J("address-out-of-range",r).at(i.address);const s=oe.from(r);if(n.addressIsReserved(s))throw new J("address-has-code",s).at(i.address);_(this,Oi,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{_(this,Oi,{mode:"mem-indirect",size:i.size});return}default:return i}}}yn=new WeakMap,Oi=new WeakMap;var xl;class kL extends Co{constructor(n,i,r,s){super(i,r,s);ie(this,xl,!1);Y(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(S(this,xl))throw new Error("Instruction already validated");if(this.operands.length>0)throw new J("expects-no-operands").at(this);_(this,xl,!0)}evaluateExpressions(){if(!S(this,xl))throw new Error("Instruction not validated")}}xl=new WeakMap;class kf{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class EL extends kf{constructor(n){super(n.position);Y(this,"type","register");Y(this,"value");this.value=n.type}get size(){return TE.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class CL extends kf{constructor(n,i){super(i);Y(this,"type","indirect-address");Y(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class AL extends kf{constructor(n,i,r){super(r);Y(this,"type","direct-address");Y(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class PL extends kf{constructor(n){super(n.position);Y(this,"type","number-expression");this.value=n}isDataDirectiveLabel(n){if(!this.value.isLabel())return!1;const i=this.value;if(i.offset)return!1;if(!n.labelExists(i.value))throw new J("label-not-found",i.value).at(this.position);const r=n.getLabelType(i.value);return r==="DB"?8:r==="DW"?16:!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function K1(t,e,n){const i=ft.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new kL(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new yL(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new xL(t.type,e,n,i);case"PUSH":case"POP":return new SL(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new bL(t.type,e,n,i);case"IN":case"OUT":return new wL(t.type,e,n,i);case"INT":return new vL(t.type,e,n,i)}}class RL extends xf{constructor(n,i){super(i);Y(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let ML=class{constructor(e){Y(this,"tokens");Y(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new J("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new J("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new RL(i,ft.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new J("end-must-be-the-last-statement").at(e);return new gL(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...Jy);if(e&&!n)throw new J("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),mL(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new hL(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new fL(e.position)}return new pL(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...Yy);if(e&&!n){const s=this.peek();throw new J("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return K1(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),K1(n,r,i)}instructionOperand(){if(this.match(...gh)){const n=this.previous();return new EL(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new J("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...gh)){this.consume("BX",new J("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new J("parser.expected-literal-after-literal","]","BX"));return new CL(e==null?void 0:e.type,ft.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new J("parser.expected-literal-after-expression","]"));return new AL(i,e==null?void 0:e.type,ft.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new J("parser.expected-literal-after-literal","[","PTR");return new PL(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new J("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new J("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return xt.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new J("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new J("parser.expected-label-after-offset").at(this.peek());if(!n)throw new J("parser.expected-argument").at(this.peek());return xt.label(n.lexeme.toUpperCase(),e!==null,ft.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new J("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return xt.unaryOperation(e.type==="PLUS"?"+":"-",n,ft.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=xt.binaryOperation(e,"*",n,ft.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=xt.binaryOperation(e,n.type==="PLUS"?"+":"-",i,ft.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function qy(t){try{const n=new sL(t).scanTokens(),r=new ML(n).parse(),s=r.at(-1);if(!s)throw new J("empty-program");if(!s.isEnd())throw new J("end-must-be-the-last-statement").at(s);let o=[];const l=new tL;if(o=l.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=mh(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(l)},J.from),o.length>0)return{success:!1,errors:o};if(o=l.computeAddresses(r),o.length>0)return{success:!1,errors:o};const a=[],u=[];return o=mh(r,c=>{c.isDataDirective()?(c.evaluateExpressions(l),c.directive!=="EQU"&&a.push(c)):c.isInstruction()&&(c.evaluateExpressions(l),u.push(c))},J.from),o.length>0?{success:!1,errors:o}:{success:!0,data:a,instructions:u}}catch(e){return{success:!1,errors:[J.from(e)]}}}class Ji{constructor(e){Y(this,"computer");this.computer=e.computer}}const OL=oe.from(oe.MAX_ADDRESS).toString(),TL={"address-has-instruction":t=>`Memory address ${oe.format(t)} has an instruction, and cannot be read nor written.`,"address-out-of-range":t=>`Memory address ${oe.format(t)} is out of range (max memory address: ${OL}).`,"io-memory-not-implemented":t=>`I/O memory address ${fn.format(t)} has no implementation.`,"no-instruction":t=>`Expected instruction at memory address ${oe.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},DL=oe.from(oe.MAX_ADDRESS).toString(),NL={"address-has-instruction":t=>`La direccin de memoria ${t} tiene una instruccin, y no se puede leer ni escribir.`,"address-out-of-range":t=>`La direccin de memoria ${oe.format(t)} est fuera de rango (direccin mxima de memoria: ${DL}).`,"io-memory-not-implemented":t=>`La direccin de memoria E/S ${fn.format(t)} no est implementada.`,"no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${t} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},LL=Gy({en:TL,es:NL});class pt extends Error{constructor(n,...i){super();Y(this,"code");Y(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return LL(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof pt?n:new pt("unexpected-error",n)}}class Br{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const r=e.cpu.getRegister("IP").toString("hex");throw new pt("unexpected-error",`Could not read instruction byte at address ${r}h`)}yield*e.cpu.updateWordRegister("IP",r=>r.add(1)),yield*e.cpu.getMBR(n)}}var tf,NE;class BL extends Br{constructor(){super(...arguments);ie(this,tf)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Re(this,tf,NE).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd",execute:!0,writeback:this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const l=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),a=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?l.signed&a.signed:this.name==="OR"?l.signed|a.signed:l.signed^a.signed;u=O.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=l.unsigned+a.unsigned+d;h>O.maxValue(r)?(c.CF=!0,u=O.fromUnsigned(h-O.maxValue(r)-1,r)):(c.CF=!1,u=O.fromUnsigned(h,r)),c.OF=l.signed>=0&&a.signed>=0&&u.signed<0||l.signed<0&&a.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=l.unsigned-a.unsigned-d;h<0?(c.CF=!0,u=O.fromUnsigned(h+O.maxValue(r)+1,r)):(c.CF=!1,u=O.fromUnsigned(h,r)),c.OF=l.signed>=0&&a.signed<0&&u.signed<0||l.signed<0&&a.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}tf=new WeakSet,NE=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};var nf,LE;class IL extends Br{constructor(){super(...arguments);ie(this,nf)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Re(this,nf,LE).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect",execute:!0,writeback:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=O.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=O.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===O.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",O.fromSigned(1,16));const o=i.unsigned+1;o>O.maxValue(this.operation.size)?(s.CF=!0,r=O.fromUnsigned(o-O.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=O.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",O.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=O.fromUnsigned(o+O.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=O.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}nf=new WeakSet,LE=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class _L extends Br{get number(){return this.statement.value}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0,execute:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};const n=this.number.unsigned;switch(n){case 0:return yield{type:"cpu:int.0"},!1;case 3:return yield{type:"cpu:int.3"},!0;case 6:case 7:{if(yield*e.cpu.copyWordRegister("FLAGS","id"),!(yield*e.cpu.pushToStack())||(yield*e.cpu.updateFLAGS({IF:!1}),yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;if(yield{type:`cpu:int.${n}`},n===6){yield*e.cpu.copyWordRegister("BX","ri");const i=yield*e.io.console.read();if(yield*e.cpu.updateWordRegister("id",i.withHigh(O.zero(8))),yield*e.cpu.setMAR("ri"),yield*e.cpu.setMBR("id.l"),!(yield*e.cpu.useBus("mem-write")))return!1}else{if(yield*e.cpu.copyWordRegister("AX","id"),!(yield*e.cpu.pushToStack())||(yield*e.cpu.copyWordRegister("BX","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyByteRegister("AL","left.l"),yield*e.cpu.updateByteRegister("right.l",O.zero(8));const i=e.cpu.getRegister("AL");for(yield*e.cpu.aluExecute("SUB",i,{CF:!1,OF:!1,SF:i.signed<0,ZF:i.isZero()});!e.cpu.getRegister("AL").isZero();){if(yield*e.cpu.copyWordRegister("BX","ri"),yield*e.cpu.setMAR("ri"),!(yield*e.cpu.useBus("mem-read")))return!1;yield*e.cpu.getMBR("id.l");const r=e.cpu.getRegister("id.l");yield*e.io.console.write(r),yield*e.cpu.copyWordRegister("BX","left"),yield*e.cpu.updateWordRegister("right",O.fromUnsigned(1,16));const s=e.cpu.getRegister("BX").add(1);yield*e.cpu.aluExecute("ADD",s,{CF:!1,OF:s.signed<0,SF:s.signed<0,ZF:!1}),yield*e.cpu.copyWordRegister("result","BX"),yield*e.cpu.copyByteRegister("AL","left.l"),yield*e.cpu.updateByteRegister("right.l",O.fromUnsigned(1,8));const o=e.cpu.getRegister("AL").add(-1);yield*e.cpu.aluExecute("SUB",o,{CF:!1,OF:o.signed===O.maxSignedValue(8),SF:o.signed<0,ZF:o.isZero()}),yield*e.cpu.copyByteRegister("result.l","AL")}if(!(yield*e.cpu.popFromStack())||(yield*e.cpu.copyWordRegister("id","BX"),!(yield*e.cpu.popFromStack())))return!1;yield*e.cpu.copyWordRegister("id","AX")}return!(yield*e.cpu.popFromStack())||(yield*e.cpu.copyWordRegister("id","IP"),!(yield*e.cpu.popFromStack()))?!1:(yield*e.cpu.copyWordRegister("id","FLAGS"),!0)}default:return yield*e.cpu.startInterrupt(this.number),!0}}}var rf,BE;class $L extends Br{constructor(){super(...arguments);ie(this,rf)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Re(this,rf,BE).call(this),willUse:{ri:!0,writeback:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",O.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new pt("io-memory-not-implemented",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new pt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new pt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}rf=new WeakSet,BE=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class FL extends Br{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0,execute:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class zL extends Br{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{execute:this.name==="CLI"||this.name==="STI"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:halt"},!1;return!0}}function Gs(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function jL(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var sf,IE;class UL extends Br{constructor(){super(...arguments);ie(this,sf)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Re(this,sf,IE).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd",id:i==="reg<-mem"||i==="reg<-imd"||i==="mem<-imd",writeback:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",l=>l.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return r===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[l,a]=jL(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(!(yield*n.cpu.useBus("mem-write"))||a&&(yield*n.cpu.updateWordRegister("ri",u=>u.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",l=>l.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}sf=new WeakSet,IE=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};class VL extends Br{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0,writeback:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded"},!(yield*e.cpu.popFromStack()))return!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class HL extends Br{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0,writeback:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield{type:"cpu:cycle.update",phase:"writeback"},yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield{type:"cpu:cycle.update",phase:"writeback"},yield*e.cpu.copyWordRegister("id",n),!0):!1}}function WL(t){switch(t.instruction){case"MOV":return new UL(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new BL(t);case"NOT":case"NEG":case"INC":case"DEC":return new IL(t);case"IN":case"OUT":return new $L(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new HL(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new FL(t);case"RET":case"IRET":return new VL(t);case"INT":return new _L(t);case"CLI":case"STI":case"NOP":case"HLT":return new zL(t)}}var kl,de,vn,Ft,ns,Io,en,Ln,nk;let GL=(nk=class extends Ji{constructor(n){super(n);ie(this,ns);ie(this,en);ie(this,kl,void 0);ie(this,de,void 0);ie(this,vn,void 0);ie(this,Ft,void 0);n.data==="unchanged"?(_(this,de,S(n.previous.cpu,de)),_(this,vn,S(n.previous.cpu,vn)),_(this,Ft,S(n.previous.cpu,Ft))):n.data==="randomize"?(_(this,de,{AX:O.random(16),BX:O.random(16),CX:O.random(16),DX:O.random(16),SP:O.random(16),IP:O.random(16),IR:O.random(8),ri:O.random(16),id:O.random(16),left:O.random(16),right:O.random(16),result:O.random(16),FLAGS:O.random(16)}),_(this,vn,O.random(16)),_(this,Ft,O.random(8))):(_(this,de,{AX:O.zero(16),BX:O.zero(16),CX:O.zero(16),DX:O.zero(16),SP:O.zero(16),IP:O.zero(16),IR:O.zero(8),ri:O.zero(16),id:O.zero(16),left:O.zero(16),right:O.zero(16),result:O.zero(16),FLAGS:O.zero(16)}),_(this,vn,O.zero(16)),_(this,Ft,O.zero(8))),S(this,de).SP=O.fromUnsigned(oe.MAX_ADDRESS+1,16),S(this,de).IP=O.fromUnsigned(8192,16),Re(this,en,Ln).call(this,"IF",!0),_(this,kl,new Map);for(const i of n.program.instructions){const r=WL(i);S(this,kl).set(r.start.value,r)}}*run(){for(;;){const n=S(this,kl).get(S(this,de).IP.unsigned);if(!n){yield{type:"cpu:error",error:new pt("no-instruction",S(this,de).IP)};return}if(!(yield*n.execute(this.computer)))return;if(this.getFlag("IF")&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const r=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",O.zero(8)),yield*this.startInterrupt(r)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;let i=O.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),i=i.add(1),yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(S(this,de)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:S(this,vn).toJSON(),MBR:S(this,Ft).toJSON()}}getRegister(n){const[i,r]=Gs(n);return r==="low"?S(this,de)[i].low:r==="high"?S(this,de)[i].high:S(this,de)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Re(this,ns,Io).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Re(this,ns,Io).call(this,i,r),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Re(this,ns,Io).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Re(this,ns,Io).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return S(this,de).FLAGS.bit(0);case"ZF":return S(this,de).FLAGS.bit(6);case"SF":return S(this,de).FLAGS.bit(7);case"IF":return S(this,de).FLAGS.bit(9);case"OF":return S(this,de).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Re(this,en,Ln).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Re(this,en,Ln).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Re(this,en,Ln).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Re(this,en,Ln).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Re(this,en,Ln).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:S(this,de).FLAGS}}*aluExecute(n,i,r){S(this,de).result=i.is8bits()?S(this,de).result.withLow(i):i,typeof r.CF=="boolean"&&Re(this,en,Ln).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Re(this,en,Ln).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Re(this,en,Ln).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Re(this,en,Ln).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Re(this,en,Ln).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:S(this,de).result,flags:S(this,de).FLAGS}}*setMAR(n){const i=this.getRegister(n);_(this,vn,i),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Re(this,ns,Io).call(this,n,S(this,Ft)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);_(this,Ft,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{const i=yield*this.computer.memory.read(S(this,vn));return i?(_(this,Ft,i),!0):!1}case"mem-write":return yield*this.computer.memory.write(S(this,vn),S(this,Ft));case"io-read":{const i=yield*this.computer.io.read(S(this,vn).low);return i?(_(this,Ft,i),!0):!1}case"io-write":return yield*this.computer.io.write(S(this,vn).low,S(this,Ft));case"intr-read":{const i=yield*this.computer.io.pic.handleINTR();return _(this,Ft,i),!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return oe.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?oe.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new pt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new pt("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return oe.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),oe.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new pt("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new pt("stack-underflow")},!1)}},kl=new WeakMap,de=new WeakMap,vn=new WeakMap,Ft=new WeakMap,ns=new WeakSet,Io=function(n,i){const[r,s]=Gs(n);if(s===null){if(S(this,de)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);S(this,de)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?S(this,de)[r]=S(this,de)[r].withLow(i):S(this,de)[r]=S(this,de)[r].withHigh(i)}},en=new WeakSet,Ln=function(n,i){switch(n){case"CF":S(this,de).FLAGS=S(this,de).FLAGS.withBit(0,i);return;case"ZF":S(this,de).FLAGS=S(this,de).FLAGS.withBit(6,i);return;case"SF":S(this,de).FLAGS=S(this,de).FLAGS.withBit(7,i);return;case"IF":S(this,de).FLAGS=S(this,de).FLAGS.withBit(9,i);return;case"OF":S(this,de).FLAGS=S(this,de).FLAGS.withBit(11,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},nk);class XL extends Ji{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}}var wn;class JL extends Ji{constructor(n){super(n);ie(this,wn,void 0);n.data==="unchanged"?_(this,wn,S(n.previous.io.console,wn)):_(this,wn,"")}get screen(){return S(this,wn)}clear(){return this.write(O.fromUnsigned(12,8))}*read(){const n=yield{type:"console:read"};if(!(n instanceof O)||!n.is8bits())throw new Error("INT 6 was not given a valid 8-bit character!");return n}*write(n){switch(n.unsigned){case 8:_(this,wn,S(this,wn).slice(0,-1));break;case 10:_(this,wn,S(this,wn)+`
`);break;case 12:_(this,wn,"");break;default:_(this,wn,S(this,wn)+Xy(n.unsigned));break}yield{type:"console:write",char:n}}toJSON(){return S(this,wn)}}wn=new WeakMap;class YL extends Ji{*press(){yield{type:"f10:press"},yield*this.computer.io.pic.interrupt(0)}toJSON(){return null}}class Ef extends Ji{}var ur,tn,zt,ri,El,Pd,Cl,Rd;const Kr=class Kr extends Ef{constructor(n){super(n);ie(this,El);ie(this,Cl);ie(this,ur,void 0);ie(this,tn,void 0);ie(this,zt,void 0);ie(this,ri,void 0);_(this,ur,O.fromUnsigned(255,8)),_(this,tn,O.fromUnsigned(0,8)),_(this,zt,O.fromUnsigned(0,8)),n.data==="unchanged"?_(this,ri,S(n.previous.io.pic,ri)):n.data==="randomize"?_(this,ri,new Array(Kr.LINES).fill(O.zero(8)).map(()=>O.random(8))):_(this,ri,new Array(Kr.LINES).fill(O.zero(8)))}chipSelect(n){const r=4+Kr.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=O.zero(8);else if(n==="IMR")i=S(this,ur);else if(n==="IRR")i=S(this,tn);else if(n==="ISR")i=S(this,zt);else{const r=Number(n.slice(3));i=S(this,ri)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")S(this,zt).isZero()||(yield{type:"pic:intr.off"},_(this,zt,O.zero(8)),yield{type:"pic:register.update",register:"ISR",value:S(this,zt)},yield*Re(this,Cl,Rd).call(this));else if(n==="IMR")_(this,ur,i),yield{type:"pic:register.update",register:"IMR",value:S(this,ur)},yield*Re(this,Cl,Rd).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));S(this,ri)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=Kr.LINES)throw new RangeError(`Invalid interrupt line ${n}`);S(this,tn).bit(n)||(_(this,tn,S(this,tn).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:S(this,tn)},yield*Re(this,Cl,Rd).call(this))}isINTRActive(){return!S(this,zt).isZero()||Re(this,El,Pd).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!S(this,zt).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Re(this,El,Pd).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");_(this,tn,S(this,tn).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:S(this,tn)},_(this,zt,S(this,zt).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:S(this,zt)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=S(this,ri)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},i}toJSON(){return{IMR:S(this,ur).toJSON(),IRR:S(this,tn).toJSON(),ISR:S(this,zt).toJSON(),lines:S(this,ri).map(n=>n.toJSON())}}};ur=new WeakMap,tn=new WeakMap,zt=new WeakMap,ri=new WeakMap,El=new WeakSet,Pd=function(){for(let n=0;n<Kr.LINES;n++)if(S(this,tn).bit(n)&&!S(this,ur).bit(n))return n;return null},Cl=new WeakSet,Rd=function*(){S(this,zt).isZero()&&Re(this,El,Pd).call(this)!==null&&(yield{type:"pic:intr.on"})},Y(Kr,"LINES",8);let _g=Kr;var Ti,is;class KL extends Ef{constructor(n){super(n);ie(this,Ti,void 0);ie(this,is,void 0);_(this,Ti,O.zero(8)),_(this,is,O.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=S(this,Ti);else if(n==="COMP")i=S(this,is);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")_(this,Ti,i);else if(n==="COMP")_(this,is,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=S(this,Ti).unsigned===O.maxValue(8)?O.zero(8):S(this,Ti).add(1);_(this,Ti,n),yield{type:"timer:register.update",register:"CONT",value:n},S(this,is).equals(n)&&(yield{type:"timer:interrupt"},yield*this.computer.io.pic.interrupt(1))}toJSON(){return{CONT:S(this,Ti).toJSON(),COMP:S(this,is).toJSON()}}}Ti=new WeakMap,is=new WeakMap;class Cf extends Ji{constructor(n){super(n);Y(this,"clock");Y(this,"console");Y(this,"f10");Y(this,"pic");Y(this,"timer");this.clock=new XL(n),this.console=new JL(n),this.f10=new YL(n),this.pic=new _g(n),this.timer=new KL(n)}*read(n){const i=this.pic.chipSelect(n);if(i)return yield{type:"cs:selected",chip:"pic"},yield*this.pic.read(i);const r=this.timer.chipSelect(n);return r?(yield{type:"cs:selected",chip:"timer"},yield*this.timer.read(r)):(yield{type:"cs:error",error:new pt("io-memory-not-implemented",n)},null)}*write(n,i){const r=this.pic.chipSelect(n);if(r)return yield{type:"cs:selected",chip:"pic"},yield*this.pic.write(r,i),!0;const s=this.timer.chipSelect(n);return s?(yield{type:"cs:selected",chip:"timer"},yield*this.timer.write(s,i),!0):(yield{type:"cs:error",error:new pt("io-memory-not-implemented",n)},!1)}toJSON(){return{clock:this.clock.toJSON(),console:this.console.toJSON(),f10:this.f10.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}}Y(Cf,"SIZE",fn.MAX_ADDRESS+1);var Di,jt,ik;let qL=(ik=class extends Ef{constructor(n){super(n);ie(this,Di,void 0);ie(this,jt,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?_(this,Di,O.zero(8)):n.data==="randomize"?_(this,Di,O.random(8)):_(this,Di,O.zero(8)),_(this,jt,O.zero(8))}get interrupts(){return S(this,jt).bit(7)}get DATA(){return S(this,Di)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=S(this,Di);else if(n==="STATE")i=S(this,jt);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")_(this,Di,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.computer.io.printer.busy),_(this,jt,i),yield{type:"handshake:register.update",register:n,value:i},S(this,jt).bit(1)&&(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),_(this,jt,S(this,jt).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:S(this,jt)}),this.interrupts&&!this.computer.io.printer.busy&&(yield*this.computer.io.pic.interrupt(2));else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){_(this,jt,S(this,jt).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:S(this,jt)},this.interrupts&&!n&&(yield*this.computer.io.pic.interrupt(2))}toJSON(){return{DATA:S(this,Di).toJSON(),STATE:S(this,jt).toJSON()}}},Di=new WeakMap,jt=new WeakMap,ik);var In,cr,rs;const iu=class iu extends Ji{constructor(n){super(n);ie(this,In,void 0);ie(this,cr,void 0);ie(this,rs,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(_(this,In,S(n.previous.io.printer,In)),_(this,cr,S(n.previous.io.printer,cr)),_(this,rs,S(n.previous.io.printer,rs))):(_(this,In,[]),_(this,cr,""),_(this,rs,!1))}get busy(){return S(this,In).length>=iu.BUFFER_SIZE}*setStrobe(n){const i=S(this,rs);if(i===n)return;if(_(this,rs,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();S(this,In).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){_(this,cr,""),yield{type:"printer:paper.replace"}}*print(){if(S(this,In).length===0)return;const[n,...i]=S(this,In);if(_(this,In,i),yield{type:"printer:buffer.pop",char:n},i.length===iu.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=Xy(n.unsigned);_(this,cr,S(this,cr)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:S(this,cr),buffer:[...S(this,In).map(n=>n.unsigned)]}}};In=new WeakMap,cr=new WeakMap,rs=new WeakMap,Y(iu,"BUFFER_SIZE",5);let yh=iu,QL=class extends yh{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}};class ZL extends Cf{constructor(n){super(n);Y(this,"printer");Y(this,"handshake");this.printer=new QL(n),this.handshake=new qL(n)}*read(n){const i=this.handshake.chipSelect(n);return i?(yield{type:"cs:selected",chip:"handshake"},yield*this.handshake.read(i)):yield*super.read(n)}*write(n,i){const r=this.handshake.chipSelect(n);return r?(yield{type:"cs:selected",chip:"handshake"},yield*this.handshake.write(r,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),handshake:this.handshake.toJSON()}}}class _E extends Ef{constructor(n){super(n);Y(this,"PA");Y(this,"PB");Y(this,"CA");Y(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=O.random(8),this.PB=O.random(8),this.CA=O.random(8),this.CB=O.random(8)):(this.PA=O.zero(8),this.PB=O.zero(8),this.CA=O.zero(8),this.CB=O.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let e3=class extends _E{readData(){const e=this.PB.unsigned&~this.CB.unsigned;return O.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.computer.io.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=O.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA},this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1))))}};class t3 extends yh{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}}class n3 extends Cf{constructor(n){super(n);Y(this,"printer");Y(this,"pio");this.printer=new t3(n),this.pio=new e3(n)}*read(n){const i=this.pio.chipSelect(n);return i?(yield{type:"cs:selected",chip:"pio"},yield*this.pio.read(i)):yield*super.read(n)}*write(n,i){const r=this.pio.chipSelect(n);return r?(yield{type:"cs:selected",chip:"pio"},yield*this.pio.write(r,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),pio:this.pio.toJSON()}}}var dr;class i3 extends Ji{constructor(n){super(n);ie(this,dr,void 0);n.data==="unchanged"&&"leds"in n.previous.io?_(this,dr,S(n.previous.io.leds,dr)):n.data==="randomize"?_(this,dr,O.random(8)):_(this,dr,O.zero(8))}get state(){return S(this,dr)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return S(this,dr).toJSON()}}dr=new WeakMap;class r3 extends _E{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=O.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.computer.io.leds.update(O.fromUnsigned(n,8))}}}var _n;class s3 extends Ji{constructor(n){super(n);ie(this,_n,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?_(this,_n,S(n.previous.io.switches,_n)):n.data==="randomize"?_(this,_n,O.random(8)):_(this,_n,O.zero(8))}get state(){return S(this,_n)}*toggle(n){_(this,_n,S(this,_n).withBit(n,!S(this,_n).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return S(this,_n).toJSON()}}_n=new WeakMap;class o3 extends Cf{constructor(n){super(n);Y(this,"leds");Y(this,"switches");Y(this,"pio");this.leds=new i3(n),this.switches=new s3(n),this.pio=new r3(n)}*read(n){const i=this.pio.chipSelect(n);return i?(yield{type:"cs:selected",chip:"pio"},yield*this.pio.read(i)):yield*super.read(n)}*write(n,i){const r=this.pio.chipSelect(n);return r?(yield{type:"cs:selected",chip:"pio"},yield*this.pio.write(r,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),leds:this.leds.toJSON(),switches:this.switches.toJSON(),pio:this.pio.toJSON()}}}var $n,Al;const ru=class ru extends Ji{constructor(n){super(n);ie(this,$n,void 0);ie(this,Al,void 0);n.data==="unchanged"?_(this,$n,S(n.previous.memory,$n)):n.data==="randomize"?_(this,$n,new Uint8Array(ru.SIZE).map(()=>O.random(8).unsigned)):_(this,$n,new Uint8Array(ru.SIZE));for(const i of n.program.data){let r=i.start.value;for(const s of i.getValues())s!==Da&&S(this,$n).set(s.toUint8Array(),r),r+=i.size/8}_(this,Al,new Set);for(const i of n.program.instructions){S(this,$n).set(i.toBytes(),i.start.value);for(let r=0;r<i.length;r++)S(this,Al).add(i.start.value+r)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!oe.inRange(n))return yield{type:"memory:read.error",error:new pt("address-out-of-range",n)},null;const i=O.fromUnsigned(S(this,$n).at(n),8);return yield{type:"memory:read.ok",value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},oe.inRange(n)?S(this,Al).has(n)?(yield{type:"memory:write.error",error:new pt("address-has-instruction",n)},!1):(S(this,$n).set([i.unsigned],n),yield{type:"memory:write.ok"},!0):(yield{type:"memory:write.error",error:new pt("address-out-of-range",n)},!1)}toJSON(){return[...S(this,$n)]}};$n=new WeakMap,Al=new WeakMap,Y(ru,"SIZE",oe.MAX_ADDRESS+1);let $g=ru;class q1{constructor(e){Y(this,"cpu");Y(this,"memory");Y(this,"io");const n={computer:this,...e};if(this.cpu=new GL(n),this.memory=new $g(n),e.devices==="pio-switches-and-leds")this.io=new o3(n);else if(e.devices==="pio-printer")this.io=new n3(n);else if(e.devices==="handshake")this.io=new ZL(n);else throw new Error("Invalid devices configuration")}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var Ze,Pl;class l3{constructor(){ie(this,Ze,new q1({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}));ie(this,Pl,S(this,Ze).cpu.run())}loadProgram(e){var n;_(this,Ze,new q1({...e,previous:S(this,Ze)})),(n=S(this,Pl))==null||n.return(),_(this,Pl,S(this,Ze).cpu.run())}getComputerState(){var e;return((e=S(this,Ze))==null?void 0:e.toJSON())||null}advanceCPU(e){if(!S(this,Ze))throw new pt("no-program");const{value:n,done:i}=S(this,Pl).next(e);if(i)throw new Error("Called advanceCPU on a finished CPU!");return n}get devices(){if(!S(this,Ze))throw new Error("No computer loaded!");return{clock:{tick:()=>S(this,Ze).io.clock.tick()},console:{clear:()=>S(this,Ze).io.console.clear()},f10:{press:()=>S(this,Ze).io.f10.press()},printer:{connected:()=>"printer"in S(this,Ze).io,clear:()=>{if("printer"in S(this,Ze).io)return S(this,Ze).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in S(this,Ze).io)return S(this,Ze).io.printer.print();console.warn("No printer connected to the computer!")}},switches:{connected:()=>"printer"in S(this,Ze).io,toggle:e=>{if("switches"in S(this,Ze).io)return S(this,Ze).io.switches.toggle(e);console.warn("No switches connected to the computer!")}}}}}Ze=new WeakMap,Pl=new WeakMap;class ke{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Bi.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let i=[];return this.decompose(e,n,i,0),Bi.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Ja(this),s=new Ja(e);for(let o=n,l=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new Ja(this,e)}iterRange(e,n=this.length){return new $E(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new FE(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ke.empty:e.length<=32?new et(e):Bi.from(et.split(e,[]))}}class et extends ke{constructor(e,n=a3(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((n?i:l)>=e)return new u3(r,l,i,o);r=l+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new et(Q1(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),l=Md(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new et(l,o.length+s.length));else{let a=l.length>>1;i.push(new et(l.slice(0,a)),new et(l.slice(a)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof et))return super.replace(e,n,i);let r=Md(this.text,Md(i.text,Q1(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new et(r,s):Bi.from(et.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(r+=i),e<a&&n>s&&(r+=l.slice(Math.max(0,e-s),n-s)),s=a+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new et(i,r)),i=[],r=-1);return r>-1&&n.push(new et(i,r)),n}}class Bi extends ke{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,a=i+o.lines-1;if((n?a:l)>=e)return o.lineInner(e,n,i,r);r=l+1,i=a+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&n>=o){let u=r&((o<=e?1:0)|(a>=n?2:0));o>=e&&a<=n&&!u?i.push(l):l.decompose(e-o,n-o,i,u)}o=a+1}}replace(e,n,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&n<=l){let a=o.replace(e-s,n-s,i),u=this.lines-o.lines+a.lines;if(a.lines<u>>5-1&&a.lines>u>>5+1){let c=this.children.slice();return c[r]=a,new Bi(c,this.length-(n-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(r+=i),e<a&&n>o&&(r+=l.sliceString(e-o,n-o,i)),o=a+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Bi))return 0;let i=0,[r,s,o,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==l)return i;let a=this.children[r],u=e.children[s];if(a!=u)return i+a.scanIdentical(u,n);i+=a.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new et(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,l=[],a=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof Bi)for(let g of f.children)d(g);else f.lines>o&&(a>o||!a)?(h(),l.push(f)):f instanceof et&&a&&(p=c[c.length-1])instanceof et&&f.lines+p.lines<=32?(a+=f.lines,u+=f.length+1,c[c.length-1]=new et(p.text.concat(f.text),p.length+1+f.length)):(a+f.lines>r&&h(),a+=f.lines,u+=f.length+1,c.push(f))}function h(){a!=0&&(l.push(c.length==1?c[0]:Bi.from(c,u)),u=-1,a=c.length=0)}for(let f of e)d(f);return h(),l.length==1?l[0]:new Bi(l,n)}}ke.empty=new et([""],0);function a3(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Md(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let l=t[s],a=r+l.length;a>=n&&(a>i&&(l=l.slice(0,i-r)),r<n&&(l=l.slice(n-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function Q1(t,e,n){return Md(t,[""],e,n)}class Ja{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof et?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,l=r instanceof et?r.text.length:r.children.length;if(o==(n>0?l:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof et){let a=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof et?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class $E{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Ja(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class FE{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ke.prototype[Symbol.iterator]=function(){return this.iter()},Ja.prototype[Symbol.iterator]=$E.prototype[Symbol.iterator]=FE.prototype[Symbol.iterator]=function(){return this});class u3{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}let al="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<al.length;t++)al[t]+=al[t-1];function c3(t){for(let e=1;e<al.length;e+=2)if(al[e]>t)return al[e-1]<=t;return!1}function Z1(t){return t>=127462&&t<=127487}const eb=8205;function Wt(t,e,n=!0,i=!0){return(n?zE:d3)(t,e,i)}function zE(t,e,n){if(e==t.length)return e;e&&jE(t.charCodeAt(e))&&UE(t.charCodeAt(e-1))&&e--;let i=Vt(t,e);for(e+=ai(i);e<t.length;){let r=Vt(t,e);if(i==eb||r==eb||n&&c3(r))e+=ai(r),i=r;else if(Z1(r)){let s=0,o=e-2;for(;o>=0&&Z1(Vt(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function d3(t,e,n){for(;e>0;){let i=zE(t,e-2,n);if(i<e)return i;e--}return 0}function jE(t){return t>=56320&&t<57344}function UE(t){return t>=55296&&t<56320}function Vt(t,e){let n=t.charCodeAt(e);if(!UE(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return jE(i)?(n-55296<<10)+(i-56320)+65536:n}function Qy(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ai(t){return t<65536?1:2}const Fg=/\r\n?|\n/;var sn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(sn||(sn={}));class Ui{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){zg(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Ui(e)}composeDesc(e){return this.empty?e:e.empty?this:VE(this,e)}mapDesc(e,n=!1){return e.empty?this:jg(this,e,n)}mapPos(e,n=-1,i=sn.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],u=r+l;if(a<0){if(u>e)return s+(e-r);s+=l}else{if(i!=sn.Simple&&u>=e&&(i==sn.TrackDel&&r<e&&u>e||i==sn.TrackBefore&&r<e||i==sn.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!l)return e==r||n<0?s:s+a;s+=a}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],l=r+s;if(o>=0&&r<=n&&l>=e)return r<e&&l>n?"cover":!0;r=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ui(e)}static create(e){return new Ui(e)}}class lt extends Ui{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return zg(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return jg(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],l=n[r+1];if(l>=0){n[r]=l,n[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(ke.empty);i.push(o?e.slice(s,s+o):ke.empty)}s+=o}return new lt(n,i)}compose(e){return this.empty?e:e.empty?this:VE(this,e,!0)}map(e,n=!1){return e.empty?this:jg(this,e,n,!0)}iterChanges(e,n=!1){zg(this,e,n)}get desc(){return Ui.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new xu(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-l);Nt(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Nt(n,c,d),d>0&&ls(i,n,s.text),s.forward(c),l+=c}let u=e[o++];for(;l<u;){if(s.done)break e;let c=Math.min(s.len,u-l);Nt(n,c,-1),Nt(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new lt(n,i),filtered:Ui.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,l=null;function a(c=!1){if(!c&&!r.length)return;o<n&&Nt(r,n-o,-1);let d=new lt(r,s);l=l?l.compose(d.map(l)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof lt){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?ke.of(f.split(i||Fg)):f:ke.empty,g=p.length;if(d==h&&g==0)return;d<o&&a(),d>o&&Nt(r,d-o,-1),Nt(r,h-d,g),ls(s,r,p),o=h}}return u(e),a(!l),l}static empty(e){return new lt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(ke.empty);i[r]=ke.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new lt(n,i)}static createSet(e,n){return new lt(e,n)}}function Nt(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function ls(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(ke.empty);t.push(n)}}function zg(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)r+=l,s+=l;else{let u=r,c=s,d=ke.empty;for(;u+=l,c+=a,a&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function jg(t,e,n,i=!1){let r=[],s=i?[]:null,o=new xu(t),l=new xu(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let u=Math.min(o.len,l.len);Nt(r,u,-1),o.forward(u),l.forward(u)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!n))){let u=l.len;for(Nt(r,l.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&a<o.i&&o.len<=c&&(Nt(r,0,o.ins),s&&ls(s,r,o.text),a=o.i),o.forward(c),u-=c}l.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(l.ins==-1){let d=Math.min(c,l.len);u+=d,c-=d,l.forward(d)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;Nt(r,u,a<o.i?o.ins:0),s&&a<o.i&&ls(s,r,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?lt.createSet(r,s):Ui.create(r);throw new Error("Mismatched change set lengths")}}function VE(t,e,n=!1){let i=[],r=n?[]:null,s=new xu(t),o=new xu(e);for(let l=!1;;){if(s.done&&o.done)return r?lt.createSet(i,r):Ui.create(i);if(s.ins==0)Nt(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)Nt(i,0,o.ins,l),r&&ls(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Nt(i,a,c,l),r&&c&&ls(r,i,o.text)}else o.ins==-1?(Nt(i,s.off?0:s.len,a,l),r&&ls(r,i,s.textBit(a))):(Nt(i,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&ls(r,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>u),s.forward2(a),o.forward(a)}}}}class xu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ke.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?ke.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class eo{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new eo(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return j.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return j.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return j.range(e.anchor,e.head)}static create(e,n,i){return new eo(e,n,i)}}class j{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:j.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new j([this.main],0)}addRange(e,n=!0){return j.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,j.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new j(e.ranges.map(n=>eo.fromJSON(n)),e.main)}static single(e,n=e){return new j([j.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return j.normalized(e.slice(),n);i=s.to}return new j(e,n)}static cursor(e,n=0,i,r){return eo.create(e,e,(n==0?0:n<0?4:8)|(i==null?3:Math.min(2,i))|(r??33554431)<<5)}static range(e,n,i,r){let s=(i??33554431)<<5|(r==null?3:Math.min(2,r));return n<e?eo.create(n,e,24|s):eo.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?j.range(a,l):j.range(l,a))}}return new j(e,n)}}function HE(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Zy=0;class ne{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=Zy++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new ne(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:ev),!!e.static,e.enables)}of(e){return new Od([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Od(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Od(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function ev(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Od{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=Zy++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?a=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(a&&h.docChanged||u&&(h.docChanged||h.selection)||Ug(d,c)){let f=i(d);if(l?!tb(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let g=wh(h,p);if(this.dependencies.every(v=>v instanceof ne?h.facet(v)===d.facet(v):v instanceof _t?h.field(v,!1)==d.field(v,!1):!0)||(l?tb(f=i(d),g,r):r(f=i(d),g)))return d.values[o]=g,0}else f=i(d);return d.values[o]=f,1}}}}function tb(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function Ug(t,e){let n=!1;for(let i of e)Ya(t,i)&1&&(n=!0);return n}function h3(t,e,n){let i=n.map(a=>t[a.id]),r=n.map(a=>a.type),s=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let u=[];for(let c=0;c<i.length;c++){let d=wh(a,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(a){for(let u of i)Ya(a,u);return a.values[o]=l(a),1},update(a,u){if(!Ug(a,s))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,u){let c=Ug(a,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&ev(n,d))return a.values[o]=h,0;let f=l(a);return e.compare(f,h)?(a.values[o]=h,0):(a.values[o]=f,1)}}}const nb=ne.define({static:!0});class _t{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new _t(Zy++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(nb).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,nb.of({field:this,create:e})]}get extension(){return this}}const Xs={lowest:4,low:3,default:2,high:1,highest:0};function ma(t){return e=>new WE(e,t)}const ec={highest:ma(Xs.highest),high:ma(Xs.high),default:ma(Xs.default),low:ma(Xs.low),lowest:ma(Xs.lowest)};class WE{constructor(e,n){this.inner=e,this.prec=n}}class tc{of(e){return new Vg(this,e)}reconfigure(e){return tc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Vg{constructor(e,n){this.compartment=e,this.inner=n}}class vh{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of f3(e,n,o))h instanceof _t?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],u=[];for(let h of r)l[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,g=c&&c[h]||[];if(f.every(v=>v.type==0))if(l[p.id]=a.length<<1|1,ev(g,f))a.push(i.facet(p));else{let v=p.combine(f.map(m=>m.value));a.push(i&&p.compare(v,i.facet(p))?i.facet(p):v)}else{for(let v of f)v.type==0?(l[v.id]=a.length<<1|1,a.push(v.value)):(l[v.id]=u.length<<1,u.push(m=>v.dynamicSlot(m)));l[p.id]=u.length<<1,u.push(v=>h3(v,p,f))}}let d=u.map(h=>h(l));return new vh(e,o,d,l,a,s)}}function f3(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let u=i[a].indexOf(o);u>-1&&i[a].splice(u,1),o instanceof Vg&&n.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let u of o)s(u,l);else if(o instanceof Vg){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,l)}else if(o instanceof WE)s(o.inner,o.prec);else if(o instanceof _t)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Od)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,Xs.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,l)}}return s(t,Xs.default),i.reduce((o,l)=>o.concat(l))}function Ya(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function wh(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const GE=ne.define(),XE=ne.define({combine:t=>t.some(e=>e),static:!0}),JE=ne.define({combine:t=>t.length?t[0]:void 0,static:!0}),YE=ne.define(),KE=ne.define(),qE=ne.define(),QE=ne.define({combine:t=>t.length?t[0]:!1});class Ir{constructor(e,n){this.type=e,this.value=n}static define(){return new p3}}class p3{of(e){return new Ir(this,e)}}class m3{constructor(e){this.map=e}of(e){return new fe(this,e)}}class fe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new fe(this.type,n)}is(e){return this.type==e}static define(e={}){return new m3(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}fe.reconfigure=fe.define();fe.appendConfig=fe.define();class ct{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&HE(i,n.newLength),s.some(l=>l.type==ct.time)||(this.annotations=s.concat(ct.time.of(Date.now())))}static create(e,n,i,r,s,o){return new ct(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(ct.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}ct.time=Ir.define();ct.userEvent=Ir.define();ct.addToHistory=Ir.define();ct.remote=Ir.define();function g3(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function ZE(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=lt.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:fe.mapEffects(t.effects,r).concat(fe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Hg(t,e,n){let i=e.selection,r=ul(e.annotations);return e.userEvent&&(r=r.concat(ct.userEvent.of(e.userEvent))),{changes:e.changes instanceof lt?e.changes:lt.of(e.changes||[],n,t.facet(JE)),selection:i&&(i instanceof j?i:j.single(i.anchor,i.head)),effects:ul(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function eC(t,e,n){let i=Hg(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=ZE(i,Hg(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=ct.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return v3(n?y3(r):r)}function y3(t){let e=t.startState,n=!0;for(let r of e.facet(YE)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:g3(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=lt.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=ct.create(e,r,t.selection&&t.selection.map(s),fe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(KE);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof ct?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof ct?t=s[0]:t=eC(e,ul(s),!1)}return t}function v3(t){let e=t.startState,n=e.facet(qE),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=ZE(i,Hg(e,s,t.changes.newLength),!0))}return i==t?t:ct.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const w3=[];function ul(t){return t==null?w3:Array.isArray(t)?t:[t]}var Et=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Et||(Et={}));const b3=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Wg;try{Wg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function S3(t){if(Wg)return Wg.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||b3.test(n)))return!0}return!1}function x3(t){return e=>{if(!/\S/.test(e))return Et.Space;if(S3(e))return Et.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Et.Word;return Et.Other}}class ge{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Ya(this,l<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Ya(this,i),wh(this,i)}update(...e){return eC(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(tc.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,a)=>r.set(a,l)),n=null),r.set(o.value.compartment,o.value.extension)):o.is(fe.reconfigure)?(n=null,i=o.value):o.is(fe.appendConfig)&&(n=null,i=ul(i).concat(o.value));let s;n?s=e.startState.values.slice():(n=vh.resolve(i,r,this),s=new ge(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new ge(n,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:j.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=ul(i.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),u=this.changes(a.changes),c=u.map(r);for(let h=0;h<l;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(a.range.map(d)),r=r.compose(c),o=fe.mapEffects(o,c).concat(fe.mapEffects(ul(a.effects),d))}return{changes:r,selection:j.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof lt?e:lt.of(e,this.doc.length,this.facet(ge.lineSeparator))}toText(e){return ke.of(e.split(this.facet(ge.lineSeparator)||Fg))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Ya(this,n),wh(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof _t&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return ge.create({doc:e.doc,selection:j.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=vh.resolve(e.extensions||[],new Map),i=e.doc instanceof ke?e.doc:ke.of((e.doc||"").split(n.staticFacet(ge.lineSeparator)||Fg)),r=e.selection?e.selection instanceof j?e.selection:j.single(e.selection.anchor,e.selection.head):j.single(0);return HE(r,i.length),n.staticFacet(XE)||(r=r.asSingle()),new ge(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ge.tabSize)}get lineBreak(){return this.facet(ge.lineSeparator)||`
`}get readOnly(){return this.facet(QE)}phrase(e,...n){for(let i of this.facet(ge.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(GE))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return x3(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Wt(n,o,!1);if(s(n.slice(a,o))!=Et.Word)break;o=a}for(;l<r;){let a=Wt(n,l);if(s(n.slice(l,a))!=Et.Word)break;l=a}return o==l?null:j.range(o+i,l+i)}}ge.allowMultipleSelections=XE;ge.tabSize=ne.define({combine:t=>t.length?t[0]:4});ge.lineSeparator=JE;ge.readOnly=QE;ge.phrases=ne.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});ge.languageData=GE;ge.changeFilter=YE;ge.transactionFilter=KE;ge.transactionExtender=qE;tc.reconfigure=fe.define();function Bs(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class yo{eq(e){return this==e}range(e,n=e){return Gg.create(e,n,this)}}yo.prototype.startSide=yo.prototype.endSide=0;yo.prototype.point=!1;yo.prototype.mapMode=sn.TrackDel;let Gg=class tC{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new tC(e,n,i)}};function Xg(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class tv{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let a=o+l>>1,u=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-n;if(a==o)return u>=0?o:l;u>=0?l=a:o=a+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,d=this.to[a]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(l=Math.max(l,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new tv(r,s,i,l):null,pos:o}}}class $e{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new $e(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(Xg)),this.isEmpty)return n.length?$e.of(n):this;let l=new nC(this,null,-1).goto(0),a=0,u=[],c=new vo;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let d=n[a++];c.addInner(d.from,d.to,d.value)||u.push(d)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push(Gg.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?$e.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],u=e.touchesRange(l,l+a.length);if(u===!1)r=Math.max(r,a.maxPoint),n.push(a),i.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:d}=a.map(l,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new $e(i,n,s||$e.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return ku.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return ku.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=ib(o,l,i),u=new ga(o,a,s),c=new ga(l,a,s);i.iterGaps((d,h,f)=>rb(u,d,c,h,f,r)),i.empty&&i.length==0&&rb(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=ib(s,o),a=new ga(s,l,0).goto(i),u=new ga(o,l,0).goto(i);for(;;){if(a.to!=u.to||!Jg(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>r)return!0;a.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new ga(e,null,s).goto(n),l=n,a=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:Math.min(c.length,a);r.point(l,u,o.point,c,d,o.pointRank),a=Math.min(o.openEnd(u),c.length)}else u>l&&(r.span(l,u,o.active,a),a=o.openEnd(u));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,n=!1){let i=new vo;for(let r of e instanceof Gg?[e]:n?k3(e):e)i.add(r.from,r.to,r.value);return i.finish()}}$e.empty=new $e([],[],null,-1);function k3(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(Xg(e,i)>0)return t.slice().sort(Xg);e=i}return t}$e.empty.nextLayer=$e.empty;class vo{finishChunk(e){this.chunks.push(new tv(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new vo)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner($e.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=$e.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function ib(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(n?n.mapPos(l):l)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(l,l+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class nC{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ku{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new nC(o,n,i,s));return r.length==1?r[0]:new ku(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)Up(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)Up(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Up(this.heap,0)}}}function Up(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class ga{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ku.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Fc(this.active,e),Fc(this.activeTo,e),Fc(this.activeRank,e),this.minActive=sb(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;zc(this.active,n,i),zc(this.activeTo,n,r),zc(this.activeRank,n,s),e&&zc(e,n,this.cursor.from),this.minActive=sb(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Fc(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function rb(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,l=i,a=i-e;for(;;){let u=t.to+a-n.to||t.endSide-n.endSide,c=u<0?t.to+a:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Jg(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(l,d,t.point,n.point):d>l&&!Jg(t.active,n.active)&&s.compareRange(l,d,t.active,n.active),c>o)break;l=c,u<=0&&t.next(),u>=0&&n.next()}}function Jg(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Fc(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function zc(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function sb(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Af(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Wt(t,r));return i}function E3(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Wt(t,r)}return i===!0?-1:t.length}const Yg="",ob=typeof Symbol>"u"?"__"+Yg:Symbol.for(Yg),Kg=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Es{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&l==null)return a.push(o[0]+";");for(let f in l){let p=l[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>o.map(v=>g.replace(/&/,v))).reduce((g,v)=>g.concat(v)),p,a);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(c.length||h)&&a.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=lb[ob]||1;return lb[ob]=e+1,Yg+e.toString(36)}static mount(e,n){(e[Kg]||new C3(e)).mount(Array.isArray(n)?n:[n])}}let ab=new Map;class C3{constructor(e){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=ab.get(n);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[Kg]=r;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],ab.set(n,this)}else{this.styleTag=n.createElement("style");let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[Kg]=this}mount(e){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],l=this.modules.indexOf(o);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,o),n)for(let a=0;a<o.rules.length;a++)n.insertRule(o.rules[a],i++)}else{for(;r<l;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var Cs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Eu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},A3=typeof navigator<"u"&&/Mac/.test(navigator.platform),P3=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var bt=0;bt<10;bt++)Cs[48+bt]=Cs[96+bt]=String(bt);for(var bt=1;bt<=24;bt++)Cs[bt+111]="F"+bt;for(var bt=65;bt<=90;bt++)Cs[bt]=String.fromCharCode(bt+32),Eu[bt]=String.fromCharCode(bt);for(var Vp in Cs)Eu.hasOwnProperty(Vp)||(Eu[Vp]=Cs[Vp]);function R3(t){var e=A3&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||P3&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Eu:Cs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function bh(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function qg(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function M3(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Td(t,e){if(!e.anchorNode)return!1;try{return qg(t,e.anchorNode)}catch{return!1}}function Cu(t){return t.nodeType==3?Bl(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Sh(t,e,n,i){return n?ub(t,e,n,i,-1)||ub(t,e,n,i,1):!1}function xh(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function ub(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:As(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=xh(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?As(t):0}else return!1}}function As(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function nv(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function O3(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function T3(t,e,n,i,r,s,o,l){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==a.body;if(f)h=O3(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let v=c.getBoundingClientRect();h={left:v.left,right:v.left+c.clientWidth,top:v.top,bottom:v.top+c.clientHeight}}let p=0,g=0;if(r=="nearest")e.top<h.top?(g=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+g&&(g=e.bottom-h.bottom+g+o)):e.bottom>h.bottom&&(g=e.bottom-h.bottom+o,n<0&&e.top-g<h.top&&(g=-(h.top+g-e.top+o)));else{let v=e.bottom-e.top,m=h.bottom-h.top;g=(r=="center"&&v<=m?e.top+v/2-m/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-m+o)-h.top}if(i=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),n>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,n<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||g)if(f)u.scrollBy(p,g);else{let v=0,m=0;if(g){let y=c.scrollTop;c.scrollTop+=g,m=c.scrollTop-y}if(p){let y=c.scrollLeft;c.scrollLeft+=p,v=c.scrollLeft-y}e={left:e.left-v,top:e.top-m,right:e.right-v,bottom:e.bottom-m},v&&Math.abs(v-p)<1&&(i="nearest"),m&&Math.abs(m-g)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function D3(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class N3{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?As(n):0),i,Math.min(e.focusOffset,i?As(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let No=null;function iC(t){if(t.setActive)return t.setActive();if(No)return t.focus(No);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(No==null?{get preventScroll(){return No={preventScroll:!0},!0}}:void 0),!No){No=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let cb;function Bl(t,e,n=e){let i=cb||(cb=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function cl(t,e,n){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function L3(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function rC(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function B3(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,As(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=As(n))}else{if(n==t)return!0;i=xh(n),n=n.parentNode}}function sC(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class Gt{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Gt(e.parentNode,xh(e),n)}static after(e,n){return new Gt(e.parentNode,xh(e)+1,n)}}const iv=[];class Ne{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let l=Ne.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=db(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=db(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=As(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ne.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,l=-1;for(let a=0,u=i,c=i;a<this.children.length;a++){let d=this.children[a],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=a,s=u),u>n&&d.dom.parentNode==this.dom){o=a,l=c;break}c=h,u=h+d.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=iv){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new oC(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}Ne.prototype.breakAfter=0;function db(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class oC{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function lC(t,e,n,i,r,s,o,l,a){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,l,a))){if(i<u.length){let f=u[i];f&&r<f.length?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,a)?s[s.length-1]=f:(r&&f.merge(0,r,null,!1,0,a),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,l,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(u[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,l,a)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function aC(t,e,n,i,r,s){let o=t.childCursor(),{i:l,off:a}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,lC(t,u,c,l,a,i,0,r,s)}const Qo="";class uC{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ge.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Qo}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let l=Ne.get(r),a=Ne.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:hb(r))||hb(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=r.exec(n))&&(s=l.index,o=l[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ne.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(n,i.offset))}}function hb(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class fb{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let kn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Qg=typeof document<"u"?document:{documentElement:{style:{}}};const Zg=/Edge\/(\d+)/.exec(kn.userAgent),cC=/MSIE \d/.test(kn.userAgent),e0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(kn.userAgent),Pf=!!(cC||e0||Zg),pb=!Pf&&/gecko\/(\d+)/i.test(kn.userAgent),Hp=!Pf&&/Chrome\/(\d+)/.exec(kn.userAgent),mb="webkitFontSmoothing"in Qg.documentElement.style,dC=!Pf&&/Apple Computer/.test(kn.vendor),gb=dC&&(/Mobile\/\w+/.test(kn.userAgent)||kn.maxTouchPoints>2);var ee={mac:gb||/Mac/.test(kn.platform),windows:/Win/.test(kn.platform),linux:/Linux|X11/.test(kn.platform),ie:Pf,ie_version:cC?Qg.documentMode||6:e0?+e0[1]:Zg?+Zg[1]:0,gecko:pb,gecko_version:pb?+(/Firefox\/(\d+)/.exec(kn.userAgent)||[0,0])[1]:0,chrome:!!Hp,chrome_version:Hp?+Hp[1]:0,ios:gb,android:/Android\b/.test(kn.userAgent),webkit:mb,safari:dC,webkit_version:mb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Qg.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const I3=256;class Tr extends Ne{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Tr)||this.length-(n-e)+i.length>I3||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Tr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Gt(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return _3(this.dom,e,n)}}class Dr extends Ne{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(rC(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Dr&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(aC(this,e,n,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&n.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=s),i=a,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Dr(this.mark,n,o)}domAtPos(e){return hC(this,e)}coordsAt(e,n){return pC(this,e,n)}}function _3(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?ee.chrome||ee.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let l=Bl(t,r,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:n>=0)?0:l.length-1];return ee.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),o?nv(a,o<0):a||null}class to extends Ne{constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}static create(e,n,i){return new to(e,n,i)}split(e){let n=to.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof to)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof to&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ke.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ke.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Gt.before(this.dom):Gt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=o?-1:1);return nv(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Il extends Ne{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Il&&e.side==this.side}split(){return new Il(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Gt.before(this.dom):Gt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ke.empty}get isHidden(){return!0}}Tr.prototype.children=to.prototype.children=Il.prototype.children=iv;function hC(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Gt(n,0)}function fC(t,e,n){let i,{children:r}=t;n>0&&e instanceof Dr&&r.length&&(i=r[r.length-1])instanceof Dr&&i.mark.eq(e.mark)?fC(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function pC(t,e,n){let i=null,r=-1,s=null,o=-1;function l(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?l(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}l(t,e);let a=(n<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?r:o),n):$3(t)}function $3(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Cu(e);return n[n.length-1]||null}function t0(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const yb=Object.create(null);function rv(t,e,n){if(t==e)return!0;t||(t=yb),e||(e=yb);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function n0(t,e,n){let i=null;if(e)for(let r in e)n&&r in n||t.removeAttribute(i=r);if(n)for(let r in n)e&&e[r]==n[r]||t.setAttribute(i=r,n[r]);return!!i}function F3(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Ao{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}destroy(e){}}var Je=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Je||(Je={}));class xe extends yo{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new nc(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Ps(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=mC(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new Ps(e,i,r,n,e.widget||null,!0)}static line(e){return new ic(e)}static set(e,n=!1){return $e.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}xe.none=$e.empty;class nc extends xe{constructor(e){let{start:n,end:i}=mC(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof nc&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&rv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}nc.prototype.point=!1;class ic extends xe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ic&&this.spec.class==e.spec.class&&rv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}ic.prototype.mapMode=sn.TrackBefore;ic.prototype.point=!0;class Ps extends xe{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?sn.TrackBefore:sn.TrackAfter:sn.TrackDel}get type(){return this.startSide<this.endSide?Je.WidgetRange:this.startSide<=0?Je.WidgetBefore:Je.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ps&&z3(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Ps.prototype.point=!0;function mC(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function z3(t,e){return t==e||!!(t&&e&&t.compare(e))}function i0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class on extends Ne{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof on))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),aC(this,e,n,i?i.children:[],s,o),!0}split(e){let n=new on;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){rv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){fC(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=t0(n,this.attrs||{})),i&&(this.attrs=t0({class:i},this.attrs||{}))}domAtPos(e){return hC(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(rC(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(n0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Ne.get(r)instanceof Dr;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ne.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!ee.ios||!this.children.some(s=>s instanceof Tr))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Tr)||/[^ -~]/.test(i.text))return null;let r=Cu(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=pC(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}get type(){return Je.Text}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof on)return s;if(o>n)break}r=o+s.breakAfter}return null}}class ao extends Ne{constructor(e,n,i){super(),this.widget=e,this.length=n,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof ao)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Gt.before(this.dom):Gt.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new ao(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i}get children(){return iv}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ke.empty}domBoundsAround(){return null}become(e){return e instanceof ao&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ka{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof ao&&e.type==Je.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new on),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(jc(new Il(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(jc(new Tr(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Ps){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(i instanceof Ps)if(i.block){let{type:a}=i;a==Je.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ao(i.widget||new vb("div"),l,a))}else{let a=to.create(i.widget||new vb("span"),l,l?0:i.startSide),u=this.atCursorPos&&!a.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!a.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(jc(new Il(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(jc(a,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Ka(e,n,i,s);return o.openEnd=$e.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function jc(t,e){for(let n of e)t=new Dr(n,[t],t.length);return t}class vb extends Ao{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const gC=ne.define(),yC=ne.define(),vC=ne.define(),wC=ne.define(),r0=ne.define(),bC=ne.define(),SC=ne.define(),xC=ne.define({combine:t=>t.some(e=>e)}),kC=ne.define({combine:t=>t.some(e=>e)});class kh{constructor(e,n="nearest",i="nearest",r=5,s=5){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new kh(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const wb=fe.define({map:(t,e)=>t.map(e)});function fi(t,e,n){let i=t.facet(wC);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Rf=ne.define({combine:t=>t.length?t[0]:!0});let j3=0;const Na=ne.define();class Pt{constructor(e,n,i,r){this.id=e,this.create=n,this.domEventHandlers=i,this.extension=r(this)}static define(e,n){const{eventHandlers:i,provide:r,decorations:s}=n||{};return new Pt(j3++,e,i,o=>{let l=[Na.of(o)];return s&&l.push(Au.of(a=>{let u=a.plugin(o);return u?s(u):xe.none})),r&&l.push(r(o)),l})}static fromClass(e,n){return Pt.define(i=>new e(i),n)}}class Wp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(fi(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){fi(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){fi(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const EC=ne.define(),sv=ne.define(),Au=ne.define(),ov=ne.define(),CC=ne.define();function AC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(CC)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const La=ne.define();class Xn{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Xn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],u=o-l,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(l,d),p=Math.min(c,h);if(f<=p&&new Xn(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!a)return i;new Xn(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Eh{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=lt.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,l,a)=>r.push(new Xn(s,o,l,a))),this.changedRanges=r}static create(e,n,i){return new Eh(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var We=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(We||(We={}));const s0=We.LTR,U3=We.RTL;function PC(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const V3=PC("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),H3=PC("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),o0=Object.create(null),xi=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);o0[e]=n,o0[n]=-e}function W3(t){return t<=247?V3[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?H3[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const G3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class dl{constructor(e,n,i){this.from=e,this.to=n,this.level=i}get dir(){return this.level%2?U3:s0}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=n&&l.to>=n){if(l.level==i)return o;(s<0||(r!=0?r<0?l.from<n:l.to>n:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const Ue=[];function X3(t,e){let n=t.length,i=e==s0?1:2,r=e==s0?2:1;if(!t||i==1&&!G3.test(t))return RC(n);for(let o=0,l=i,a=i;o<n;o++){let u=W3(t.charCodeAt(o));u==512?u=l:u==8&&a==4&&(u=16),Ue[o]=u==4?2:u,u&7&&(a=u),l=u}for(let o=0,l=i,a=i;o<n;o++){let u=Ue[o];if(u==128)o<n-1&&l==Ue[o+1]&&l&24?u=Ue[o]=l:Ue[o]=256;else if(u==64){let c=o+1;for(;c<n&&Ue[c]==64;)c++;let d=o&&l==8||c<n&&Ue[c]==8?a==1?1:8:256;for(let h=o;h<c;h++)Ue[h]=d;o=c-1}else u==8&&a==1&&(Ue[o]=1);l=u,u&7&&(a=u)}for(let o=0,l=0,a=0,u,c,d;o<n;o++)if(c=o0[u=t.charCodeAt(o)])if(c<0){for(let h=l-3;h>=0;h-=3)if(xi[h+1]==-c){let f=xi[h+2],p=f&2?i:f&4?f&1?r:i:0;p&&(Ue[o]=Ue[xi[h]]=p),l=h;break}}else{if(xi.length==189)break;xi[l++]=o,xi[l++]=u,xi[l++]=a}else if((d=Ue[o])==2||d==1){let h=d==i;a=h?0:1;for(let f=l-3;f>=0;f-=3){let p=xi[f+2];if(p&2)break;if(h)xi[f+2]|=2;else{if(p&4)break;xi[f+2]|=4}}}for(let o=0;o<n;o++)if(Ue[o]==256){let l=o+1;for(;l<n&&Ue[l]==256;)l++;let a=(o?Ue[o-1]:i)==1,u=(l<n?Ue[l]:i)==1,c=a==u?a?1:2:i;for(let d=o;d<l;d++)Ue[d]=c;o=l-1}let s=[];if(i==1)for(let o=0;o<n;){let l=o,a=Ue[o++]!=1;for(;o<n&&a==(Ue[o]!=1);)o++;if(a)for(let u=o;u>l;){let c=u,d=Ue[--u]!=2;for(;u>l&&d==(Ue[u-1]!=2);)u--;s.push(new dl(u,c,d?2:1))}else s.push(new dl(l,o,0))}else for(let o=0;o<n;){let l=o,a=Ue[o++]==2;for(;o<n&&a==(Ue[o]==2);)o++;s.push(new dl(l,o,a?1:2))}return s}function RC(t){return[new dl(0,t,0)]}let MC="";function J3(t,e,n,i,r){var s;let o=i.head-t.from,l=-1;if(o==0){if(!r||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),l=0)}else if(o==t.length){if(r)return null;let h=e[e.length-1];h.level!=n&&(o=h.side(!0,n),l=e.length-1)}l<0&&(l=dl.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let a=e[l];o==a.side(r,n)&&(a=e[l+=r?1:-1],o=a.side(!r,n));let u=r==(a.dir==n),c=Wt(t.text,o,u);if(MC=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=a.side(r,n))return j.cursor(c+t.from,u?-1:1,a.level);let d=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return!d&&a.level!=n?j.cursor(r?t.to:t.from,r?-1:1,n):d&&d.level<a.level?j.cursor(d.side(!r,n)+t.from,r?1:-1,d.level):j.cursor(c+t.from,r?-1:1,a.level)}class bb extends Ne{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new on],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Xn(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:l,toA:a})=>a<this.minWidthFrom||l>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=this.view.inputState.composing<0?null:K3(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:l,to:a}=this.hasComposition;n=new Xn(l,a,e.changes.mapPos(l,-1),e.changes.mapPos(a,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(ee.ie||ee.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),o=Z3(r,s,e.changes);return n=Xn.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=ee.chrome||ee.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ao&&o.widget instanceof Sb&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let l=o>=0?r[o]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:d}=l,h,f,p,g;if(i&&i.range.fromB<d&&i.range.toB>c){let b=Ka.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=Ka.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=b.breakAtStart,p=b.openStart,g=k.openEnd;let A=this.compositionView(i);k.breakAtStart?A.breakAfter=1:k.content.length&&A.merge(A.length,A.length,k.content[0],!1,k.openStart,0)&&(A.breakAfter=k.content[0].breakAfter,k.content.shift()),b.content.length&&A.merge(0,0,b.content[b.content.length-1],!0,0,b.openEnd)&&b.content.pop(),h=b.content.concat(A).concat(k.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:g}=Ka.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:m}=s.findPos(u,1),{i:y,off:w}=s.findPos(a,-1);lC(this,y,w,v,m,h,f,p,g)}i&&this.fixCompositionDOM(i)}compositionView(e){let n=new Tr(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Dr(r,[n],n.length);let i=new on;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let l=Ne.get(s);l!=o&&(l&&(l.dom=null),o.setDOM(s))},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&Td(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.domAtPos(l.anchor),u=l.empty?a:this.domAtPos(l.head);if(ee.gecko&&l.empty&&!this.hasComposition&&Y3(a)){let d=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(d,a.node.childNodes[a.offset]||null)),a=u=new Gt(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!Sh(a.node,a.offset,c.anchorNode,c.anchorOffset)||!Sh(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{ee.android&&ee.chrome&&this.dom.contains(c.focusNode)&&e4(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=bh(this.view.root);if(d)if(l.empty){if(ee.gecko){let h=q3(a.node,a.offset);if(h&&h!=3){let f=TC(a.node,a.offset,h==1?1:-1);f&&(a=new Gt(f,h==1?0:f.nodeValue.length))}}d.collapse(a.node,a.offset),l.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=l.bidiLevel)}else if(d.extend){d.collapse(a.node,a.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),h.setEnd(u.node,u.offset),h.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Gt(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Gt(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=bh(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=on.find(this,n.head);if(!o)return;let l=o.posAtStart;if(n.head==l||n.head==l+o.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}nearest(e){for(let n=e;n;){let i=Ne.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof on)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Je.WidgetBefore&&s.type!=Je.WidgetAfter&&(!r||n==2||this.children[r-1].breakAfter||this.children[r-1].type==Je.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);i=o}}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==We.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,g=p?Cu(p):[];if(g.length){let v=g[g.length-1],m=a?v.right-f.left:f.right-v.left;m>l&&(l=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?We.RTL:We.LTR}measureTextSize(){for(let s of this.children)if(s instanceof on){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Cu(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new oC(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let l=n.lineBlockAt(o).bottom-n.lineBlockAt(i).top;e.push(xe.replace({widget:new Sb(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return xe.set(e)}updateDeco(){let e=this.view.state.facet(Au).map((n,i)=>(this.dynamicDecorationMap[i]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=AC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom};T3(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==We.LTR)}}function Y3(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class Sb extends Ao{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function OC(t){let e=t.observer.selectionRange,n=e.focusNode&&TC(e.focusNode,e.focusOffset,0);if(!n)return null;let i=Ne.get(n),r,s;if(i instanceof Tr)r=i.posAtStart,s=r+i.length;else e:for(let o=0,l=n;;){for(let u=l.previousSibling,c;u;u=u.previousSibling){if(c=Ne.get(u)){r=s=c.posAtEnd+o;break e}let d=new uC([],t.state);if(d.readNode(u),d.text.indexOf(Qo)>-1)return null;o+=d.text.length}if(l=l.parentNode,!l)return null;let a=Ne.get(l);if(a){r=s=a.posAtStart+o;break}}return{from:r,to:s,node:n}}function K3(t,e){let n=OC(t);if(!n)return null;let{from:i,to:r,node:s}=n,o=e.mapPos(i,-1),l=e.mapPos(r,1),a=s.nodeValue;if(/[\n\r]/.test(a))return null;if(l-o!=a.length){let h=e.mapPos(i,1),f=e.mapPos(r,-1);if(f-h==a.length)o=h,l=f;else if(t.state.doc.sliceString(l-a.length,l)==a)o=l-a.length;else if(t.state.doc.sliceString(o,o+a.length)==a)l=o+a.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,l)!=a||o>u.head||l<u.head)return null;let c=[],d=new Xn(i,r,o,l);for(let h=s.parentNode;;h=h.parentNode){let f=Ne.get(h);if(f instanceof Dr)c.push({node:h,deco:f.mark});else{if(f instanceof on||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:d,text:s,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new nc({inclusive:!0,attributes:F3(h),tagName:h.tagName.toLowerCase()})});else return null}}}function TC(t,e,n){if(n<=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=As(i);else break}if(n>=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r<i.childNodes.length&&n>=0)i=i.childNodes[r],r=0;else break}return null}function q3(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class Q3{constructor(){this.changes=[]}compareRange(e,n){i0(e,n,this.changes)}comparePoint(e,n){i0(e,n,this.changes)}}function Z3(t,e,n){let i=new Q3;return $e.compare(t,e,n,i),i.changes}function e4(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function t4(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return j.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,l=s;n<0?o=Wt(r.text,s,!1):l=Wt(r.text,s);let a=i(r.text.slice(o,l));for(;o>0;){let u=Wt(r.text,o,!1);if(i(r.text.slice(u,o))!=a)break;o=u}for(;l<r.length;){let u=Wt(r.text,l);if(i(r.text.slice(l,u))!=a)break;l=u}return j.range(o+r.from,l+r.from)}function n4(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function i4(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Gp(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function xb(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function kb(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function l0(t,e,n){let i,r,s,o,l=!1,a,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let g=Cu(p);for(let v=0;v<g.length;v++){let m=g[v];r&&Gp(r,m)&&(m=xb(kb(m,r.bottom),r.top));let y=n4(e,m),w=i4(n,m);if(y==0&&w==0)return p.nodeType==3?Eb(p,e,n):l0(p,e,n);if(!i||o>w||o==w&&s>y){i=p,r=m,s=y,o=w;let b=w?n<m.top?-1:1:y?e<m.left?-1:1:0;l=!b||(b>0?v<g.length-1:v>0)}y==0?n>m.bottom&&(!c||c.bottom<m.bottom)?(a=p,c=m):n<m.top&&(!d||d.top>m.top)&&(u=p,d=m):c&&Gp(c,m)?c=kb(c,m.bottom):d&&Gp(d,m)&&(d=xb(d,m.top))}}if(c&&c.bottom>=n?(i=a,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Eb(i,h,n);if(l&&i.contentEditable!="false")return l0(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function Eb(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Bl(t,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((ee.chrome||ee.gecko)&&Bl(t,l).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:l+(f?1:0)};r=l+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function DC(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-l;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let b=t.viewState.heightOracle.textHeight/2,k=!1;a=t.elementAtHeight(h),a.type!=Je.Text;)for(;h=i>0?a.bottom+b:a.top-b,!(h>=0&&h<=u);){if(k)return n?null:0;k=!0,i=-i}d=l+h;let f=a.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:Cb(t,o,a,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Cb(t,o,a,c,d);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,v=g.elementFromPoint(c,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(c=Math.max(o.left+1,Math.min(o.right-1,c)),v=g.elementFromPoint(c,d),v&&!t.contentDOM.contains(v)&&(v=null));let m,y=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let b=p.caretPositionFromPoint(c,d);b&&({offsetNode:m,offset:y}=b)}else if(p.caretRangeFromPoint){let b=p.caretRangeFromPoint(c,d);b&&({startContainer:m,startOffset:y}=b,(!t.contentDOM.contains(m)||ee.safari&&r4(m,y,c)||ee.chrome&&s4(m,y,c))&&(m=void 0))}}if(!m||!t.docView.dom.contains(m)){let b=on.find(t.docView,f);if(!b)return h>a.top+a.height/2?a.to:a.from;({node:m,offset:y}=l0(b.dom,c,d))}let w=t.docView.nearest(m);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let b=w.dom.getBoundingClientRect();return e.y<b.top||e.y<=b.bottom&&e.x<=(b.left+b.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(m,y)+w.posAtStart}function Cb(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((r-n.top-(t.defaultLineHeight-l)*.5)/l);s+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+E3(o,s,t.state.tabSize)}function r4(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Bl(t,i-1,i).getBoundingClientRect().left>n}function s4(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Bl(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function a0(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==Je.Text))return i}return n}function o4(t,e,n,i){let r=a0(t,e.head),s=!i||r.type!=Je.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(r.from),a=t.posAtCoords({x:n==(l==We.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return j.cursor(a,n?-1:1)}return j.cursor(n?r.to:r.from,n?-1:1)}function Ab(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let l=e,a=null;;){let u=J3(r,s,o,l,n),c=MC;if(!u){if(r.number==(n?t.state.doc.lines:1))return l;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=j.cursor(n?r.from:r.to)}if(a){if(!a(c))return l}else{if(!i)return u;a=i(c)}l=u}}function l4(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Et.Space&&(r=o),r==o}}function a4(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return j.cursor(r,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r),c=t.documentTop;if(u)o==null&&(o=u.left-a.left),l=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(r-f.from))),l=(s<0?f.top:f.bottom)+c}let d=a.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=l+(h+f)*s,g=DC(t,{x:d,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?g<r:g>r))return j.cursor(g,e.assoc,void 0,o)}}function Dd(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=i||n||(e-s<o-e?-1:1);e=a<0?s:o,i=a}});if(!i)return e}}function Xp(t,e,n){let i=Dd(t.state.facet(ov).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:j.cursor(i,i<n.from?1:-1)}class u4{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(i,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(r.type,e,r)?r.preventDefault():i(e,r))};for(let i in rt){let r=rt[i];e.contentDOM.addEventListener(i,s=>{Pb(e,s)&&n(r,s)},u0[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{if(i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(rt.mousedown,i),!i.defaultPrevented&&i.button==2)){let r=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=r,200)}}),e.scrollDOM.addEventListener("drop",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(rt.drop,i)}),ee.chrome&&ee.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,ee.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var i;let r;this.customHandlers=[];for(let s of n)if(r=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{Pb(e,l)&&this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,n,i){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,i,n)||i.defaultPrevented)return!0}catch(o){fi(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,n,e)}catch(s){fi(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&LC.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),ee.android&&ee.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let i;return ee.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((i=NC.find(r=>r.keyCode==n.keyCode))&&!n.ctrlKey||c4.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=i||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,cl(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ee.safari&&!ee.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const NC=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],c4="dthko",LC=[16,17,18,20,91,92,224,225],Uc=6;function Vc(t){return Math.max(0,t)*.7+8}function d4(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class h4{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=D3(e.contentDOM),this.atoms=e.state.facet(ov).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ge.allowMultipleSelections)&&f4(e,n),this.dragging=m4(e,n)&&$C(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&d4(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=AC(this.view);e.clientX-o.left<=s.left+Uc?i=-Vc(s.left-e.clientX):e.clientX+o.right>=s.right-Uc&&(i=Vc(e.clientX-s.right)),e.clientY-o.top<=s.top+Uc?r=-Vc(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Uc&&(r=Vc(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=Dd(this.atoms,r.from,0);o!=r.from&&(s=j.cursor(o,-1))}else{let o=Dd(this.atoms,r.from,-1),l=Dd(this.atoms,r.to,1);(o!=r.from||l!=r.to)&&(s=j.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?j.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection)||i.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function f4(t,e){let n=t.state.facet(gC);return n.length?n[0](e):ee.mac?e.metaKey:e.ctrlKey}function p4(t,e){let n=t.state.facet(yC);return n.length?n[0](e):ee.mac?!e.altKey:!e.ctrlKey}function m4(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=bh(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Pb(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Ne.get(n))&&i.ignoreEvent(e))return!1;return!0}const rt=Object.create(null),u0=Object.create(null),BC=ee.ie&&ee.ie_version<15||ee.ios&&ee.webkit_version<604;function g4(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),IC(t,n.value)},50)}function IC(t,e){let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(c0!=null&&n.selection.ranges.every(a=>a.empty)&&c0==s.toString()){let a=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:j.cursor(u.from+d.length)}})}else o?i=n.changeByRange(a=>{let u=s.line(r++);return{changes:{from:a.from,to:a.to,insert:u.text},range:j.cursor(a.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}rt.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};rt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};rt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};u0.touchstart=u0.touchmove={passive:!0};rt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let i of t.state.facet(vC))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=w4(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new h4(t,e,n,i)),i&&t.observer.ignore(()=>iC(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function Rb(t,e,n,i){if(i==1)return j.cursor(e,n);if(i==2)return t4(t.state,e,n);{let r=on.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<t.state.doc.length&&l==s.to&&l++,j.range(o,l)}}let _C=(t,e)=>t>=e.top&&t<=e.bottom,Mb=(t,e,n)=>_C(e,n)&&t>=n.left&&t<=n.right;function y4(t,e,n,i){let r=on.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&Mb(n,i,o))return-1;let l=r.coordsAt(s,1);return l&&Mb(n,i,l)?1:o&&_C(i,o)?-1:1}function Ob(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:y4(t,n,e.clientX,e.clientY)}}const v4=ee.ie&&ee.ie_version<=11;let Tb=null,Db=0,Nb=0;function $C(t){if(!v4)return t.detail;let e=Tb,n=Nb;return Tb=t,Nb=Date.now(),Db=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Db+1)%3:1}function w4(t,e){let n=Ob(t,e),i=$C(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,l){let a=Ob(t,s),u,c=Rb(t,a.pos,a.bias,i);if(n.pos!=a.pos&&!o){let d=Rb(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?j.range(h,f):j.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):l&&i==1&&r.ranges.length>1&&(u=b4(r,a.pos))?u:l?r.addRange(c):j.create([c])}}}function b4(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return j.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}rt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:i}=t.inputState;i&&(i.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function Lb(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=i&&s&&s.dragging&&p4(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,l={from:r,insert:n},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}rt.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let i=Array(n.length),r=0,s=()=>{++r==n.length&&Lb(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(n[o])}}else Lb(t,e,e.dataTransfer.getData("Text"),!0)};rt.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=BC?null:e.clipboardData;n?(IC(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):g4(t)};function S4(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function x4(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}let c0=null;rt.copy=rt.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=x4(t.state);if(!n&&!r)return;c0=r?n:null;let s=BC?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):S4(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const FC=Ir.define();function zC(t,e){let n=[];for(let i of t.facet(SC)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:FC.of(!0)}):null}function jC(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=zC(t.state,e);n?t.dispatch(n):t.update([])}},10)}rt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),jC(t)};rt.blur=t=>{t.observer.clearSelectionRange(),jC(t)};rt.compositionstart=rt.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};rt.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,ee.chrome&&ee.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};rt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};rt.beforeinput=(t,e)=>{var n;let i;if(ee.chrome&&ee.android&&(i=NC.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const Bb=["pre-wrap","normal","pre-line","break-spaces"];class k4{constructor(e){this.lineWrapping=e,this.doc=ke.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Bb.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let l=Bb.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class E4{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Ii{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Je.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ps?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ii(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var _e=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(_e||(_e={}));const Nd=.001;class Jt{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>Nd&&(e.heightChanged=!0),this.height=n)}replace(e,n,i){return Jt.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:d}=r[l],h=s.lineAt(a,_e.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,_e.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;l>0&&h.from<=r[l-1].toA;)a=r[l-1].fromA,c=r[l-1].fromB,l--,a<h.from&&(h=s.lineAt(a,_e.ByPosNoHeight,i,0,0));c+=h.from-a,a=h.from;let p=lv.build(i.setDoc(o),e,c,d);s=s.replace(a,u,p)}return s.updateHeight(i,0)}static empty(){return new Sn(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(s>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[n++];l&&(r+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new C4(Jt.of(e.slice(0,n)),o,Jt.of(e.slice(i)))}}Jt.prototype.size=1;class UC extends Jt{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Ii(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Sn extends UC{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Ii(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Sn||r instanceof vt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof vt?r=new Sn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Jt.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class vt extends Jt{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:l}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),c=n.doc.lineAt(u),d=l+c.length*a,h=Math.max(i,e-d/2);return new Ii(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:c,length:d}=n.doc.line(s+u);return new Ii(c,d,i+l*u,l,0)}}lineAt(e,n,i,r,s){if(n==_e.ByHeight)return this.blockAt(e,i,r,s);if(n==_e.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new Ii(f,p-f,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=l+u.length*a,d=u.number-o,h=r+l*d+a*(u.from-s-d);return new Ii(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-l;d+=a*p+u*(e-s-p)}let f=a+u*h.length;o(new Ii(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof vt?i[i.length-1]=new vt(s.length+r):i.push(null,new vt(r-1))}if(e>0){let s=i[0];s instanceof vt?i[0]=new vt(e+s.length):i.unshift(new vt(e-1),null)}return Jt.of(i)}decomposeLeft(e,n){n.push(new vt(e-1),null)}decomposeRight(e,n){n.push(null,new vt(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],l=Math.max(n,r.from),a=-1;for(r.from>n&&o.push(new vt(r.from-n-1).updateHeight(e,n));l<=s&&r.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let d=r.heights[r.index++];a==-1?a=d:Math.abs(d-a)>=Nd&&(a=-2);let h=new Sn(c,d);h.outdated=!1,o.push(h),l+=c+1}l<=s&&o.push(null,new vt(s-l).updateHeight(e,l));let u=Jt.of(o);return(a<0||Math.abs(u.height-this.height)>=Nd||Math.abs(a-this.heightMetrics(e,n).perLine)>=Nd)&&(e.heightChanged=!0),u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class C4 extends Jt{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,a=n==_e.ByHeight?e<o:e<l,u=a?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=n==_e.ByPosNoHeight?_e.ByPosNoHeight:_e.ByPos;return a?u.join(this.right.lineAt(l,c,i,o,l)):this.left.lineAt(l,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let l=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,i,r,s,o),n>=a&&this.right.forEachLine(e,n,i,l,a,o);else{let u=this.lineAt(a,_e.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,l,a,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&Ib(s,o-1),n<this.length){let l=s.length;this.decomposeRight(n,s),Ib(s,l)}return Jt.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Jt.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,l=n+s.length+this.break,a=null;return r&&r.from<=n+s.length&&r.more?a=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,i,r):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Ib(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof vt&&(i=t[e+1])instanceof vt&&t.splice(e-1,3,new vt(n.length+1+i.length))}const A4=5;class lv{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Sn?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Sn(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new UC(o,r,i)):(o||s||r>=A4)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Sn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new vt(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Sn)return e;let n=new Sn(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let i=(n=e.deco)===null||n===void 0?void 0:n.type;i==Je.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i!=Je.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Sn)&&!this.isCovered?this.nodes.push(new Sn(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Sn&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new lv(i,e);return $e.spans(n,i,r,s,0),s.finish(i)}}function P4(t,e,n){let i=new R4;return $e.compare(t,e,n,i,0),i.changes}class R4{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&i0(e,n,this.changes,5)}}function M4(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=u==t.parentNode?h.bottom:Math.min(a,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function O4(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Jp{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return xe.replace({widget:new T4(this.size,e)}).range(this.from,this.to)}}class T4 extends Ao{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class _b{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=$b,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=We.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(sv).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new k4(n),this.stateDeco=e.facet(Au).filter(i=>typeof i!="function"),this.heightMap=Jt.empty().applyChanges(this.stateDeco,ke.empty,this.heightOracle.setDoc(e.doc),[new Xn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=xe.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Hc(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?$b:new L4(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Ba(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Au).filter(c=>typeof c!="function");let r=e.changedRanges,s=Xn.extendWithRanges(r,P4(i,this.stateDeco,e?e.changes:lt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(kC)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?We.RTL:We.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=n.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0,d=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=sC(e.scrollDOM);let f=(this.printing?O4:M4)(n,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let m=l.width;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),a){let w=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(w)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:b,charWidth:k,textHeight:A}=e.docView.measureTextSize();o=b>0&&r.refresh(s,b,k,A,m/k,w),o&&(e.docView.minWidth=0,u|=8)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),r.heightChanged=!1;for(let b of this.viewports){let k=b.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(b);this.heightMap=(o?Jt.empty().applyChanges(this.stateDeco,ke.empty,this.heightOracle,[new Xn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new E4(b.from,k))}r.heightChanged&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Hc(r.lineAt(o-i*1e3,_e.ByHeight,s,0,0).from,r.lineAt(l+(1-i)*1e3,_e.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,_e.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?h=d.top:h=d.bottom-c,a=new Hc(r.lineAt(h-1e3/2,_e.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,_e.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Hc(this.heightMap.lineAt(i,_e.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,_e.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,_e.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,_e.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Jp(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=We.LTR&&!i)return[];let l=[],a=(u,c,d,h)=>{if(c-u<s)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let v of p)if(v>u&&v<c){a(u,v-10,d,h),a(v+10,c,d,h);return}let g=N4(e,v=>v.from>=d.from&&v.to<=d.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-c)<s&&!p.some(m=>v.from<m&&v.to>m));if(!g){if(c<d.to&&n&&i&&n.visibleRanges.some(v=>v.from<=c&&v.to>=c)){let v=n.moveToLineBoundary(j.cursor(c),!1,!0).head;v>u&&(c=v)}g=new Jp(u,c,this.gapSize(d,u,c,h))}l.push(g)};for(let u of this.viewportLines){if(u.length<o)continue;let c=D4(u.from,u.to,this.stateDeco);if(c.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,v;if(d!=null){let m=Gc(c,d),y=((this.visibleBottom-this.visibleTop)/2+p)/u.height;g=m-y,v=m+y}else g=(this.visibleTop-u.top-p)/u.height,v=(this.visibleBottom-u.top+p)/u.height;h=Wc(c,g),f=Wc(c,v)}else{let p=c.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,v,m;if(d!=null){let y=Gc(c,d),w=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/p;v=y-w,m=y+w}else v=(this.pixelViewport.left-g)/p,m=(this.pixelViewport.right+g)/p;h=Wc(c,v),f=Wc(c,m)}h>u.from&&a(u.from,h,u,c),f<u.to&&a(f,u.to,u,c)}return l}gapSize(e,n,i,r){let s=Gc(r,i)-Gc(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Jp.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=xe.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];$e.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Ba(this.heightMap.lineAt(e,_e.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Ba(this.heightMap.lineAt(this.scaler.fromDOM(e),_e.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Ba(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Hc{constructor(e,n){this.from=e,this.to=n}}function D4(t,e,n){let i=[],r=t,s=0;return $e.spans(n,t,e,{span(){},point(o,l){o>r&&(i.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Wc({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(i<=l)return s+i;i-=l}}function Gc(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function N4(t,e){for(let n of t)if(e(n))return n}const $b={toDOM(t){return t},fromDOM(t){return t},scale:1};class L4{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let u=n.lineAt(l,_e.ByPos,e,0,0).top,c=n.lineAt(a,_e.ByPos,e,0,0).bottom;return r+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function Ba(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Ii(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Ba(r,e)):t._content)}const Xc=ne.define({combine:t=>t.join(" ")}),d0=ne.define({combine:t=>t.indexOf(!0)>-1}),h0=Es.newName(),VC=Es.newName(),HC=Es.newName(),WC={"&light":"."+VC,"&dark":"."+HC};function f0(t,e,n){return new Es(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const B4=f0("."+h0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},WC);class I4{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let l=s||o?[]:$4(e),a=new uC(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=F4(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!qg(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!qg(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=j.single(u,a)}}}function GC(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=r.from,u=null;(s===8||ee.android&&e.text.length<l-o)&&(a=r.to,u="end");let c=_4(t.state.doc.sliceString(o,l,Qo),e.text,a-o,u);c&&(ee.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Qo+Qo&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:ke.of(e.text.slice(c.from,c.toB).split(Qo))})}else i&&(!t.hasFocus&&t.state.facet(Rf)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(ee.mac||ee.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=j.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ke.of([" "])}):ee.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=j.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ke.of([" "])}),n){let o=t.state;if(ee.ios&&t.inputState.flushIOSKey(t)||ee.android&&(n.from==r.from&&n.to==r.to&&n.insert.length==1&&n.insert.lines==2&&cl(t.contentDOM,"Enter",13)||(n.from==r.from-1&&n.to==r.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&cl(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&n.insert.length==0&&cl(t.contentDOM,"Delete",46)))return!0;let l=n.insert.toString();if(t.state.facet(bC).some(c=>c(t,n.from,n.to,l)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let a;if(n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=r.from<n.from?o.sliceDoc(r.from,n.from):"",d=r.to>n.to?o.sliceDoc(n.to,r.to):"";a=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let c=o.changes(n),d=i&&i.main.to<=c.newLength?i.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){let h=t.state.sliceDoc(n.from,n.to),f=OC(t)||t.state.doc.lineAt(r.head),p=r.to-n.to,g=r.to-r.from;a=o.changeByRange(v=>{if(v.from==r.from&&v.to==r.to)return{changes:c,range:d||v.map(c)};let m=v.to-p,y=m-h.length;if(v.to-v.from!=g||t.state.sliceDoc(y,m)!=h||f&&v.to>=f.from&&v.from<=f.to)return{range:v};let w=o.changes({from:y,to:m,insert:n.insert}),b=v.to-r.to;return{changes:w,range:d?j.range(Math.max(0,d.anchor+b),Math.max(0,d.head+b)):v.map(w)}})}else a={changes:c,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(a,{scrollIntoView:!0,userEvent:u}),!0}else if(i&&!i.main.eq(r)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function _4(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));n-=o+a-s}if(o<s&&t.length<e.length){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function $4(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new fb(n,i)),(r!=n||s!=i)&&e.push(new fb(r,s))),e}function F4(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?j.single(n+e,i+e):null}const z4={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Yp=ee.ie&&ee.ie_version<=11;class j4{constructor(e){this.view=e,this.active=!1,this.selectionRange=new N3,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(ee.ie&&ee.ie_version<=11||ee.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Yp&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Rf)?i.root.activeElement!=this.dom:!Td(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(ee.ie&&ee.ie_version<=11||ee.android&&ee.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Sh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=ee.safari&&e.root.nodeType==11&&M3(this.dom.ownerDocument)==this.dom&&U4(this.view)||bh(e.root);if(!n||this.selectionRange.eq(n))return!1;let i=Td(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&B3(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,z4),Yp&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Yp&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&cl(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Td(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new I4(this.view,e,n,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let i=this.view.state,r=GC(this.view,n);return this.view.state==i&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=Fb(n,e.previousSibling||e.target.previousSibling,-1),r=Fb(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Fb(t,e,n){for(;e;){let i=Ne.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function U4(t){let e=null;function n(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return Sh(l.node,l.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}class re{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||L3(e.parent)||document,this.viewState=new _b(e.state||ge.create(e)),this.plugins=this.state.facet(Na).map(n=>new Wp(n));for(let n of this.plugins)n.update(this);this.observer=new j4(this),this.inputState=new u4(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new bb(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof ct?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(FC))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=zC(s,o),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(ge.phrases)!=this.state.facet(ge.phrases))return this.setState(s);r=Eh.create(this,s,e),r.flags|=l;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new kh(f.empty?f:j.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(wb)&&(d=f.value)}this.viewState.update(r,d),this.bidiCache=Ch.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(La)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Xc)!=r.state.facet(Xc)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let h of this.state.facet(r0))h(r);(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!GC(this,c)&&u.force&&cl(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new _b(e),this.plugins=e.facet(Na).map(i=>new Wp(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new bb(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Na),i=e.state.facet(Na);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new Wp(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,{scrollTop:r}=i,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;r!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(sC(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return fi(this.state,p),zb}}),d=Eh.create(this,this.state,[]),h=!1;d.flags|=a,n?n.flags|=a:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let f=0;f<u.length;f++)if(c[f]!=zb)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){fi(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=i.scrollTop=r+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(r0))l(n)}get themeClasses(){return h0+" "+(this.state.facet(d0)?HC:VC)+" "+this.state.facet(Xc)}updateAttrs(){let e=jb(this,EC,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Rf)?"true":"false",class:"cm-content",style:`${ee.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),jb(this,sv,n);let i=this.observer.ignore(()=>{let r=n0(this.contentDOM,this.contentAttrs,n),s=n0(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(re.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(La),Es.mount(this.root,this.styleModules.concat(B4).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Xp(this,e,Ab(this,e,n,i))}moveByGroup(e,n){return Xp(this,e,Ab(this,e,n,i=>l4(this,e.head,i)))}moveToLineBoundary(e,n,i=!0){return o4(this,e,n,i)}moveVertically(e,n,i){return Xp(this,e,a4(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),DC(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[dl.find(s,e-r.from,-1,n)];return nv(i,o.dir==We.LTR==n>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(xC)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>V4)return RC(e.length);let n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n)return r.order;let i=X3(e.text,n);return this.bidiCache.push(new Ch(e.from,e.to,n,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ee.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{iC(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return wb.of(new kh(typeof e=="number"?j.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return Pt.define(()=>({}),{eventHandlers:e})}static theme(e,n){let i=Es.newName(),r=[Xc.of(i),La.of(f0(`.${i}`,e))];return n&&n.dark&&r.push(d0.of(!0)),r}static baseTheme(e){return ec.lowest(La.of(f0("."+h0,e,WC)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Ne.get(i)||Ne.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}re.styleModule=La;re.inputHandler=bC;re.focusChangeEffect=SC;re.perLineTextDirection=xC;re.exceptionSink=wC;re.updateListener=r0;re.editable=Rf;re.mouseSelectionStyle=vC;re.dragMovesSelection=yC;re.clickAddsSelectionRange=gC;re.decorations=Au;re.atomicRanges=ov;re.scrollMargins=CC;re.darkTheme=d0;re.contentAttributes=sv;re.editorAttributes=EC;re.lineWrapping=re.contentAttributes.of({class:"cm-lineWrapping"});re.announce=fe.define();const V4=4096,zb={};class Ch{constructor(e,n,i,r){this.from=e,this.to=n,this.dir=i,this.order=r}static update(e,n){if(n.empty)return e;let i=[],r=e.length?e[e.length-1].dir:We.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Ch(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return i}}function jb(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&t0(o,n)}return n}const H4=ee.mac?"mac":ee.windows?"win":ee.linux?"linux":"key";function W4(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,l;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Jc(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const G4=ec.default(re.domEventHandlers({keydown(t,e){return YC(JC(e.state),t,e,"editor")}})),XC=ne.define({enables:G4}),Ub=new WeakMap;function JC(t){let e=t.facet(XC),n=Ub.get(e);return n||Ub.set(e,n=Y4(e.reduce((i,r)=>i.concat(r),[]))),n}function X4(t,e,n){return YC(JC(t.state),e,t,n)}let Zr=null;const J4=4e3;function Y4(t,e=H4){let n=Object.create(null),i=Object.create(null),r=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=l.split(/ (?!$)/).map(m=>W4(m,e));for(let m=1;m<p.length;m++){let y=p.slice(0,m).join(" ");r(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let b=Zr={view:w,prefix:y,scope:o};return setTimeout(()=>{Zr==b&&(Zr=null)},J4),!0}]})}let g=p.join(" ");r(g,!1);let v=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});a&&v.run.push(a),u&&(v.preventDefault=!0),c&&(v.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of l){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in c)c[d].run.push(o.any)}let a=o[e]||o.key;if(a)for(let u of l)s(u,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return n}function YC(t,e,n,i){let r=R3(e),s=Vt(r,0),o=ai(s)==r.length&&r!=" ",l="",a=!1,u=!1,c=!1;Zr&&Zr.view==n&&Zr.scope==i&&(l=Zr.prefix+" ",LC.indexOf(e.keyCode)<0&&(u=!0,Zr=null));let d=new Set,h=v=>{if(v){for(let m of v.run)if(!d.has(m)&&(d.add(m),m(n,e)))return v.stopPropagation&&(c=!0),!0;v.preventDefault&&(v.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,g;return f&&(h(f[l+Jc(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ee.windows&&e.ctrlKey&&e.altKey)&&(p=Cs[e.keyCode])&&p!=r?(h(f[l+Jc(p,e,!0)])||e.shiftKey&&(g=Eu[e.keyCode])!=r&&g!=p&&h(f[l+Jc(g,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(f[l+Jc(r,e,!0)])&&(a=!0),!a&&h(f._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),a}class rc{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=KC(e);return[new rc(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return K4(e,n,i)}}function KC(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==We.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function Vb(t,e,n){let i=j.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:Je.Text}}function K4(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==We.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=KC(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=l.right-(c?parseInt(c.paddingRight):0),f=a0(t,i),p=a0(t,r),g=f.type==Je.Text?f:null,v=p.type==Je.Text?p:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=Vb(t,i,g)),v&&(t.lineWrapping||p.widgetLineBreaks)&&(v=Vb(t,r,v)),g&&v&&g.from==v.from)return y(w(n.from,n.to,g));{let k=g?w(n.from,null,g):b(f,!1),A=v?w(null,n.to,v):b(p,!0),R=[];return(g||f).to<(v||p).from-(g&&v?1:0)||f.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<A.top?R.push(m(d,k.bottom,h,A.top)):k.bottom<A.top&&t.elementAtHeight((k.bottom+A.top)/2).type==Je.Text&&(k.bottom=A.top=(k.bottom+A.top)/2),y(k).concat(R).concat(y(A))}function m(k,A,R,N){return new rc(e,k-a.left,A-a.top-.01,R-k,N-A+.01)}function y({top:k,bottom:A,horizontal:R}){let N=[];for(let E=0;E<R.length;E+=2)N.push(m(R[E],k,R[E+1],A));return N}function w(k,A,R){let N=1e9,E=-1e9,C=[];function P(L,F,$,W,B){let I=t.coordsAtPos(L,L==R.to?-2:2),V=t.coordsAtPos($,$==R.from?2:-2);!I||!V||(N=Math.min(I.top,V.top,N),E=Math.max(I.bottom,V.bottom,E),B==We.LTR?C.push(s&&F?d:I.left,s&&W?h:V.right):C.push(!s&&W?d:V.left,!s&&F?h:I.right))}let M=k??R.from,T=A??R.to;for(let L of t.visibleRanges)if(L.to>M&&L.from<T)for(let F=Math.max(L.from,M),$=Math.min(L.to,T);;){let W=t.state.doc.lineAt(F);for(let B of t.bidiSpans(W)){let I=B.from+W.from,V=B.to+W.from;if(I>=$)break;V>F&&P(Math.max(I,F),k==null&&I<=M,Math.min(V,$),A==null&&V>=T,B.dir)}if(F=W.to+1,F>=$)break}return C.length==0&&P(M,k==null,T,A==null,t.textDirection),{top:N,bottom:E,horizontal:C}}function b(k,A){let R=l.top+(A?k.top:k.bottom);return{top:R,bottom:R,horizontal:[]}}}function q4(t,e){return t.constructor==e.constructor&&t.eq(e)}class Q4{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Ld)!=e.state.facet(Ld)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(Ld);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!q4(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ld=ne.define();function qC(t){return[Pt.define(e=>new Q4(e,t)),Ld.of(t)]}const QC=!ee.ios,Pu=ne.define({combine(t){return Bs(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Z4(t={}){return[Pu.of(t),e5,t5,n5,kC.of(!0)]}function ZC(t){return t.startState.facet(Pu)!=t.state.facet(Pu)}const e5=qC({above:!0,markers(t){let{state:e}=t,n=e.facet(Pu),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||QC:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:j.cursor(r.head,r.head>r.anchor?-1:1);for(let a of rc.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=ZC(t);return n&&Hb(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){Hb(e.state,t)},class:"cm-cursorLayer"});function Hb(t,e){e.style.animationDuration=t.facet(Pu).cursorBlinkRate+"ms"}const t5=qC({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:rc.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||ZC(t)},class:"cm-selectionLayer"}),eA={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};QC&&(eA[".cm-line"].caretColor="transparent !important");const n5=ec.highest(re.theme(eA)),tA=fe.define({map(t,e){return t==null?null:e.mapPos(t)}}),Ia=_t.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(tA)?i.value:n,t)}}),i5=Pt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Ia);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Ia)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Ia),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Ia)!=t&&this.view.dispatch({effects:tA.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function r5(){return[Ia,i5]}function Wb(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}function s5(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class o5{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(l,a,u,c)=>r(c,u,u+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,u,c)=>{let d=i(l,a,u);d&&c(u,u+l[0].length,d)};else if(i)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new vo,i=n.add.bind(n);for(let{from:r,to:s}of s5(e,this.maxLength))Wb(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),r=Math.max(a,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,r);if(l>o){let a=e.state.doc.lineAt(o),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(s.from,a.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){d=l;break}}let h=[],f,p=(g,v,m)=>h.push(m.range(g,v));if(a==u)for(this.regexp.lastIndex=c-a.from;(f=this.regexp.exec(a.text))&&f.index<d-a.from;)this.addMatch(f,e,f.index+a.from,p);else Wb(e.state.doc,this.regexp,c,d,(g,v)=>this.addMatch(v,e,g,p));n=n.update({filterFrom:c,filterTo:d,filter:(g,v)=>g<c||v>d,add:h})}}return n}}const p0=/x/.unicode!=null?"gu":"g",l5=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,p0),a5={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Kp=null;function u5(){var t;if(Kp==null&&typeof document<"u"&&document.body){let e=document.body.style;Kp=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Kp||!1}const Bd=ne.define({combine(t){let e=Bs(t,{render:null,specialChars:l5,addSpecialChars:null});return(e.replaceTabs=!u5())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,p0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,p0)),e}});function c5(t={}){return[Bd.of(t),d5()]}let Gb=null;function d5(){return Gb||(Gb=Pt.fromClass(class{constructor(t){this.view=t,this.decorations=xe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Bd)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new o5({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Vt(e[0],0);if(s==9){let o=r.lineAt(i),l=n.state.tabSize,a=Af(o.text,l,i-o.from);return xe.replace({widget:new m5((l-a%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=xe.replace({widget:new p5(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Bd);t.startState.facet(Bd)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const h5="";function f5(t){return t>=32?h5:t==10?"":String.fromCharCode(9216+t)}class p5 extends Ao{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=f5(this.code),i=e.state.phrase("Control character")+" "+(a5[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class m5 extends Ao{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function g5(){return v5}const y5=xe.line({class:"cm-activeLine"}),v5=Pt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(y5.range(r.from)),e=r.from)}return xe.set(n)}},{decorations:t=>t.decorations}),Yc="-10000px";class nA{constructor(e,n,i){this.facet=n,this.createTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){var n;let i=e.state.facet(this.facet),r=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let l=r[o],a=-1;if(l){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==l.create&&(a=u)}if(a<0)s[o]=this.createTooltipView(l);else{let u=s[o]=this.tooltipViews[a];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function w5(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const qp=ne.define({combine:t=>{var e,n,i;return{position:ee.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||w5}}}),Xb=new WeakMap,iA=Pt.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(qp);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new nA(t,av,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(qp);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Yc,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let i=this.manager.tooltipViews[n];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(qp).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:i}=t,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],l=this.manager.tooltipViews[s],{dom:a}=l,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){a.style.top=Yc;continue}let d=o.arrow?l.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,f=c.right-c.left,p=(e=Xb.get(l))!==null&&e!==void 0?e:c.bottom-c.top,g=l.offset||S5,v=this.view.textDirection==We.LTR,m=c.width>i.right-i.left?v?i.left:i.right-c.width:v?Math.min(u.left-(d?14:0)+g.x,i.right-f):Math.max(i.left,u.left-f+(d?14:0)-g.x),y=!!o.above;!o.strictSide&&(y?u.top-(c.bottom-c.top)-g.y<i.top:u.bottom+(c.bottom-c.top)+g.y>i.bottom)&&y==i.bottom-u.bottom>u.top-i.top&&(y=!y);let w=(y?u.top-i.top:i.bottom-u.bottom)-h;if(w<p&&l.resize!==!1){if(w<this.view.defaultLineHeight){a.style.top=Yc;continue}Xb.set(l,p),a.style.height=(p=w)+"px"}else a.style.height&&(a.style.height="");let b=y?u.top-p-h-g.y:u.bottom+h+g.y,k=m+f;if(l.overlap!==!0)for(let A of r)A.left<k&&A.right>m&&A.top<b+p&&A.bottom>b&&(b=y?A.top-p-2-h:A.bottom+h+2);this.position=="absolute"?(a.style.top=b-t.parent.top+"px",a.style.left=m-t.parent.left+"px"):(a.style.top=b+"px",a.style.left=m+"px"),d&&(d.style.left=`${u.left+(v?g.x:-g.x)-(m+14-7)}px`),l.overlap!==!0&&r.push({left:m,top:b,right:k,bottom:b+p}),a.classList.toggle("cm-tooltip-above",y),a.classList.toggle("cm-tooltip-below",!y),l.positioned&&l.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Yc}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),b5=re.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),S5={x:0,y:0},av=ne.define({enables:[iA,b5]}),Ah=ne.define();class uv{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new nA(e,Ah,n=>this.createHostedView(n))}static create(e){return new uv(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const x5=av.compute([Ah],t=>{let e=t.facet(Ah).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:uv.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class k5{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let i=this.view.coordsAtPos(n);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(l=>l.from<=n&&l.to>=n),s=r&&r.dir==We.RTL?-1:1,o=this.source(this.view,n,e.x<i.left?-s:s);if(o!=null&&o.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&this.view.dispatch({effects:this.setHover.of(a)}))},a=>fi(this.view.state,a,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!Jb(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=(n=i==null?void 0:i.end)!==null&&n!==void 0?n:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!E5(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Jb(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Jb(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function E5(t,e,n,i,r,s){let o=document.createRange(),l=t.domAtPos(e),a=t.domAtPos(n);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let d=u[c];if(Math.max(d.top-r,r-d.bottom,d.left-i,i-d.right)<=s)return!0}return!1}function C5(t,e={}){let n=fe.define(),i=_t.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,sn.TrackDel);if(o==null)return null;let l=Object.assign(Object.create(null),r);l.pos=o,r.end!=null&&(l.end=s.changes.mapPos(r.end)),r=l}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(P5)&&(r=null);return r},provide:r=>Ah.from(r)});return[i,Pt.define(r=>new k5(r,t,i,n,e.hoverTime||300)),x5]}function A5(t,e){let n=t.plugin(iA);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const P5=fe.define(),Yb=ne.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Ru(t,e){let n=t.plugin(rA),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const rA=Pt.fromClass(class{constructor(t){this.input=t.state.facet(_l),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(Yb);this.top=new Kc(t,!0,e.topContainer),this.bottom=new Kc(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(Yb);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Kc(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Kc(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(_l);if(n!=this.input){let i=n.filter(a=>a),r=[],s=[],o=[],l=[];for(let a of i){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),l.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>re.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Kc{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Kb(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Kb(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Kb(t){let e=t.nextSibling;return t.remove(),e}const _l=ne.define({enables:rA});class Rs extends yo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Rs.prototype.elementClass="";Rs.prototype.toDOM=void 0;Rs.prototype.mapMode=sn.TrackBefore;Rs.prototype.startSide=Rs.prototype.endSide=-1;Rs.prototype.point=!0;const Id=ne.define(),_d=ne.define(),m0=ne.define({combine:t=>t.some(e=>e)});function R5(t){let e=[M5];return t&&t.fixed===!1&&e.push(m0.of(!0)),e}const M5=Pt.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(_d).map(e=>new Qb(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(m0),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(m0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=$e.iter(this.view.state.facet(Id),this.view.viewport.from),i=[],r=this.gutters.map(s=>new O5(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==Je.Text&&o){g0(n,i,l.from);for(let a of r)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of r)a.widget(this.view,l)}else if(s.type==Je.Text){g0(n,i,s.from);for(let o of r)o.line(this.view,s,i)}for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(_d),n=t.state.facet(_d),i=t.docChanged||t.heightChanged||t.viewportChanged||!$e.eq(t.startState.facet(Id),t.state.facet(Id),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new Qb(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>re.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==We.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function qb(t){return Array.isArray(t)?t:[t]}function g0(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class O5{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=$e.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=n.top-this.height;if(this.i==r.elements.length){let o=new sA(e,n.height,s,i);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,n.height,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];g0(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n);i&&this.addElement(e,n,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Qb{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,l,r)&&r.preventDefault()});this.markers=qb(n.markers(e)),n.initialSpacer&&(this.spacer=new sA(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=qb(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!$e.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class sA{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),T5(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(a)){l=d,u=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!a)break;a.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function T5(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const D5=ne.define(),Zo=ne.define({combine(t){return Bs(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(l,a,u)=>s(l,a,u)||o(l,a,u):o}return i}})}});class Qp extends Rs{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Zp(t,e){return t.state.facet(Zo).formatNumber(e,t.state)}const N5=_d.compute([Zo],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(D5)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Qp(Zp(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Zo)!=e.state.facet(Zo),initialSpacer(e){return new Qp(Zp(e,Zb(e.state.doc.lines)))},updateSpacer(e,n){let i=Zp(n.view,Zb(n.view.state.doc.lines));return i==e.number?e:new Qp(i)},domEventHandlers:t.facet(Zo).domEventHandlers}));function L5(t={}){return[Zo.of(t),R5(),N5]}function Zb(t){let e=9;for(;e<t;)e=e*10+9;return e}const B5=new class extends Rs{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},I5=Id.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(B5.range(r)))}return $e.of(e)});function _5(){return I5}const oA=new tc;function cv(t){window.codemirror&&window.codemirror.dispatch({effects:oA.reconfigure(ge.readOnly.of(t))})}const y0=fe.define(),$5=_t.define({create(){return xe.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(y0)&&(n=xe.none,i.value!==null&&(n=n.update({add:[F5.range(i.value)]})));return n},provide:t=>re.decorations.from(t)}),F5=xe.line({class:"!bg-sky-400/30"});function Mf(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:y0.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:y0.of(e)})}}const z5=oe.from(oe.MAX_ADDRESS).toString(),j5=new Intl.NumberFormat("en",{style:"decimal"}).format,U5={clean:"Clean",computer:"Computer",frequency:"Frequency",hertz:t=>`${j5(t)} Hz`,update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again."},cpu:{name:"CPU","general-registers":"General-purpose registers","special-registers":"Special registers",register:t=>`${t} register`,alu:"ALU",memory:{name:"Memory",cell:t=>`Cell ${oe.format(t)}`,"start-address":"Start address","start-address-must-be-integer":"Start address must be an integer.","start-address-too-big":`Start address must be less or equal to ${z5}.`},interrups:{label:"Interrupts",enabled:"Enabled",disabled:"Disabled"}},devices:{internal:{label:"Internal devices",handshake:{name:"Handshake",data:"Data",state:"State"},pic:{name:"PIC",state:"State",connections:"Connections"},pio:{name:"PIO",data:"Data",config:"Configuration",port:t=>`Port ${t}`},timer:"Timer"},external:{label:"External devices",console:"Console",f10:{name:"F10",interrupt:"Interrupt"},leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},switches:"Switches"},ioRegister:(t,e)=>`${t} register (${fn.format(e)})`},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},runner:{action:{start:"Start",debug:"Debug","run-until-halt":"Finish",step:"Next",stop:"Abort"},state:{running:"Running",paused:"Paused","waiting-for-input":"Wating for key",stopped:"Stopped"}},menu:{label:"Menu",devices:{label:"Devices","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer w/PIO",handshake:"Printer w/Handshake"},dataRepresentation:{label:"Representation mode",hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"2's complement",ascii:"ASCII"},dataOnLoad:{label:"Data on load",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},language:"Language",documentation:"Documentation","report-issue":"Report an issue"}},V5=oe.from(oe.MAX_ADDRESS).toString(),H5=new Intl.NumberFormat("es",{style:"decimal"}).format,W5={clean:"Limpiar",computer:"Computadora",frequency:"Frecuencia",hertz:t=>`${H5(t)} Hz`,update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar."},cpu:{name:"CPU","general-registers":"Registros de propsito general","special-registers":"Registros especiales",register:t=>`Registro ${t}`,alu:"ALU",memory:{name:"Memoria",cell:t=>`Celda ${oe.format(t)}`,"start-address":"Direccin de inicio","start-address-must-be-integer":"El valor de inicio debe ser un nmero entero.","start-address-too-big":`El valor de inicio debe ser menor o igual a ${V5}.`},interrups:{label:"Interrupciones",enabled:"Habilitadas",disabled:"Inhabilitadas"}},devices:{internal:{label:"Dispositivos internos",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:{name:"PIC",state:"Estado",connections:"Conexiones"},pio:{name:"PIO",data:"Datos",config:"Configuracin",port:t=>`Puerto ${t}`},timer:"Timer"},external:{label:"Dispositivos externos",console:"Consola",f10:{name:"F10",interrupt:"Interrumpir"},leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},switches:"Teclas"},ioRegister:(t,e)=>`Registro ${t} (${fn.format(e)})`},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},runner:{action:{start:"Ejecutar",debug:"Depurar","run-until-halt":"Finalizar",step:"Siguiente",stop:"Abortar"},state:{running:"Ejecutando",paused:"Pausado","waiting-for-input":"Esperando tecla",stopped:"Detenido"}},menu:{label:"Men",devices:{label:"Dispositivos","pio-switches-and-leds":"Teclas y leds","pio-printer":"Impresora con PIO",handshake:"Impresora con Handshake"},dataRepresentation:{label:"Modo de representacin",hex:"Hexadecimal",bin:"Binario",uint:"Binario sin signo (BSS)",int:"Complemento a 2 (Ca2)",ascii:"ASCII"},dataOnLoad:{label:"Memoria al cargar",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},language:"Idioma",documentation:"Documentacin","report-issue":"Reportar un error"}},dv=Gy({en:U5,es:W5}),H=Wy();function G5(t){return D.jsx(WN,{store:H,children:t.children})}const X5=Symbol(),J5=t=>typeof(t==null?void 0:t.then)=="function";function Y5(t){let e,n;const i={getItem:(r,s)=>{var o,l;const a=c=>{if(c=c||"",e!==c){try{n=JSON.parse(c)}catch{return s}e=c}return n},u=(l=(o=t())==null?void 0:o.getItem(r))!=null?l:null;return J5(u)?u.then(a):a(u)},setItem:(r,s)=>{var o;return(o=t())==null?void 0:o.setItem(r,JSON.stringify(s))},removeItem:r=>{var s;return(s=t())==null?void 0:s.removeItem(r)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&(i.subscribe=(r,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const l=a=>{if(a.storageArea===t()&&a.key===r){let u;try{u=JSON.parse(a.newValue||"")}catch{u=o}s(u)}};return window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}}),i}const K5=Y5(()=>typeof window<"u"?window.localStorage:void 0);function sc(t,e,n=K5,i){const r=i==null?void 0:i.unstable_getOnInit,s=he(r?n.getItem(t,e):e);return s.onMount=l=>{r||l(n.getItem(t,e));let a;return n.subscribe&&(a=n.subscribe(t,l,e)),a},he(l=>l(s),(l,a,u)=>{const c=typeof u=="function"?u(l(s)):u;return c===X5?(a(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(a(s,d),n.setItem(t,d))):(a(s,c),n.setItem(t,c))})}function q5(){const t=["en","es"],e=navigator.language.toLowerCase();for(const n of t)if(e.startsWith(n))return n;return"en"}const hv=sc("language",q5()),Of=()=>H.get(hv),lA=sc("data-on-load","randomize"),aA=()=>H.get(lA),uA=sc("devices","pio-switches-and-leds"),cA=()=>H.get(uA),Q5=sc("data-representation","bin"),Z5=sc("speeds",{cpu:1,printer:.125}),Mu=()=>H.get(Z5);var eB=Object.defineProperty,tB=(t,e)=>{for(var n in e)eB(t,n,{get:e[n],enumerable:!0})},gi={};tB(gi,{assign:()=>rB,colors:()=>ws,createStringInterpolator:()=>wv,skipAnimation:()=>yA,to:()=>gA,willAdvance:()=>bv});var fv=lc(),ue=t=>oc(t,fv),pv=lc();ue.write=t=>oc(t,pv);var Tf=lc();ue.onStart=t=>oc(t,Tf);var mv=lc();ue.onFrame=t=>oc(t,mv);var gv=lc();ue.onFinish=t=>oc(t,gv);var hl=[];ue.setTimeout=(t,e)=>{const n=ue.now()+e,i=()=>{const s=hl.findIndex(o=>o.cancel==i);~s&&hl.splice(s,1),us-=~s?1:0},r={time:n,handler:t,cancel:i};return hl.splice(dA(n),0,r),us+=1,hA(),r};var dA=t=>~(~hl.findIndex(e=>e.time>t)||~hl.length);ue.cancel=t=>{Tf.delete(t),mv.delete(t),gv.delete(t),fv.delete(t),pv.delete(t)};ue.sync=t=>{v0=!0,ue.batchedUpdates(t),v0=!1};ue.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,ue.onStart(n)}return i.handler=t,i.cancel=()=>{Tf.delete(n),e=null},i};var yv=typeof window<"u"?window.requestAnimationFrame:()=>{};ue.use=t=>yv=t;ue.now=typeof performance<"u"?()=>performance.now():Date.now;ue.batchedUpdates=t=>t();ue.catch=console.error;ue.frameLoop="always";ue.advance=()=>{ue.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):pA()};var as=-1,us=0,v0=!1;function oc(t,e){v0?(e.delete(t),t(0)):(e.add(t),hA())}function hA(){as<0&&(as=0,ue.frameLoop!=="demand"&&yv(fA))}function nB(){as=-1}function fA(){~as&&(yv(fA),ue.batchedUpdates(pA))}function pA(){const t=as;as=ue.now();const e=dA(as);if(e&&(mA(hl.splice(0,e),n=>n.handler()),us-=e),!us){nB();return}Tf.flush(),fv.flush(t?Math.min(64,as-t):16.667),mv.flush(),pv.flush(),gv.flush()}function lc(){let t=new Set,e=t;return{add(n){us+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return us-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,us-=e.size,mA(e,i=>i(n)&&t.add(i)),us+=t.size,e=t)}}}function mA(t,e){t.forEach(n=>{try{e(n)}catch(i){ue.catch(i)}})}function w0(){}var iB=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),G={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Zi(t,e){if(G.arr(t)){if(!G.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var ve=(t,e)=>t.forEach(e);function Vi(t,e,n){if(G.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Cn=t=>G.und(t)?[]:G.arr(t)?t:[t];function qa(t,e){if(t.size){const n=Array.from(t);t.clear(),ve(n,e)}}var _a=(t,...e)=>qa(t,n=>n(...e)),vv=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),wv,gA,ws=null,yA=!1,bv=w0,rB=t=>{t.to&&(gA=t.to),t.now&&(ue.now=t.now),t.colors!==void 0&&(ws=t.colors),t.skipAnimation!=null&&(yA=t.skipAnimation),t.createStringInterpolator&&(wv=t.createStringInterpolator),t.requestAnimationFrame&&ue.use(t.requestAnimationFrame),t.batchedUpdates&&(ue.batchedUpdates=t.batchedUpdates),t.willAdvance&&(bv=t.willAdvance),t.frameLoop&&(ue.frameLoop=t.frameLoop)},Qa=new Set,Un=[],em=[],Ph=0,Df={get idle(){return!Qa.size&&!Un.length},start(t){Ph>t.priority?(Qa.add(t),ue.onStart(sB)):(vA(t),ue(b0))},advance:b0,sort(t){if(Ph)ue.onFrame(()=>Df.sort(t));else{const e=Un.indexOf(t);~e&&(Un.splice(e,1),wA(t))}},clear(){Un=[],Qa.clear()}};function sB(){Qa.forEach(vA),Qa.clear(),ue(b0)}function vA(t){Un.includes(t)||wA(t)}function wA(t){Un.splice(oB(Un,e=>e.priority>t.priority),0,t)}function b0(t){const e=em;for(let n=0;n<Un.length;n++){const i=Un[n];Ph=i.priority,i.idle||(bv(i),i.advance(t),i.idle||e.push(i))}return Ph=0,em=Un,em.length=0,Un=e,Un.length>0}function oB(t,e){const n=t.findIndex(e);return n<0?t.length:n}var lB=(t,e,n)=>Math.min(Math.max(n,t),e),aB={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ui="[-+]?\\d*\\.?\\d+",Rh=ui+"%";function Nf(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var uB=new RegExp("rgb"+Nf(ui,ui,ui)),cB=new RegExp("rgba"+Nf(ui,ui,ui,ui)),dB=new RegExp("hsl"+Nf(ui,Rh,Rh)),hB=new RegExp("hsla"+Nf(ui,Rh,Rh,ui)),fB=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,pB=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mB=/^#([0-9a-fA-F]{6})$/,gB=/^#([0-9a-fA-F]{8})$/;function yB(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=mB.exec(t))?parseInt(e[1]+"ff",16)>>>0:ws&&ws[t]!==void 0?ws[t]:(e=uB.exec(t))?(Lo(e[1])<<24|Lo(e[2])<<16|Lo(e[3])<<8|255)>>>0:(e=cB.exec(t))?(Lo(e[1])<<24|Lo(e[2])<<16|Lo(e[3])<<8|nS(e[4]))>>>0:(e=fB.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=gB.exec(t))?parseInt(e[1],16)>>>0:(e=pB.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=dB.exec(t))?(eS(tS(e[1]),qc(e[2]),qc(e[3]))|255)>>>0:(e=hB.exec(t))?(eS(tS(e[1]),qc(e[2]),qc(e[3]))|nS(e[4]))>>>0:null}function tm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function eS(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=tm(r,i,t+1/3),o=tm(r,i,t),l=tm(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(l*255)<<8}function Lo(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function tS(t){return(parseFloat(t)%360+360)%360/360}function nS(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function qc(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function iS(t){let e=yB(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Ou=(t,e,n)=>{if(G.fun(t))return t;if(G.arr(t))return Ou({range:t,output:e,extrapolate:n});if(G.str(t.output[0]))return wv(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",l=i.extrapolateRight||i.extrapolate||"extend",a=i.easing||(u=>u);return u=>{const c=wB(u,s);return vB(u,s[c],s[c+1],r[c],r[c+1],a,o,l,i.map)}};function vB(t,e,n,i,r,s,o,l,a){let u=a?a(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(l==="identity")return u;l==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function wB(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var bB=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return lB(0,1,r/t)},Mh=1.70158,Qc=Mh*1.525,rS=Mh+1,sS=2*Math.PI/3,oS=2*Math.PI/4.5,Zc=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,Lf={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>rS*t*t*t-Mh*t*t,easeOutBack:t=>1+rS*Math.pow(t-1,3)+Mh*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Qc+1)*2*t-Qc)/2:(Math.pow(2*t-2,2)*((Qc+1)*(t*2-2)+Qc)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*sS),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*sS)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*oS))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*oS)/2+1,easeInBounce:t=>1-Zc(1-t),easeOutBounce:Zc,easeInOutBounce:t=>t<.5?(1-Zc(1-2*t))/2:(1+Zc(2*t-1))/2,steps:bB},Tu=Symbol.for("FluidValue.get"),$l=Symbol.for("FluidValue.observers"),jn=t=>!!(t&&t[Tu]),nn=t=>t&&t[Tu]?t[Tu]():t,lS=t=>t[$l]||null;function SB(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Du(t,e){const n=t[$l];n&&n.forEach(i=>{SB(i,e)})}var bA=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");xB(this,t)}},xB=(t,e)=>SA(t,Tu,e);function ql(t,e){if(t[Tu]){let n=t[$l];n||SA(t,$l,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Nu(t,e){const n=t[$l];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[$l]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var SA=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),$d=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,kB=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,aS=new RegExp(`(${$d.source})(%|[a-z]+)`,"i"),EB=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Bf=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,xA=t=>{const[e,n]=CB(t);if(!e||vv())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Bf.test(n))return xA(n);if(n)return n}return t},CB=t=>{const e=Bf.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},nm,AB=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,kA=t=>{nm||(nm=ws?new RegExp(`(${Object.keys(ws).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>nn(s).replace(Bf,xA).replace(kB,iS).replace(nm,iS)),n=e.map(s=>s.match($d).map(Number)),r=n[0].map((s,o)=>n.map(l=>{if(!(o in l))throw Error('The arity of each "output" value must be equal');return l[o]})).map(s=>Ou({...t,output:s}));return s=>{var a;const o=!aS.test(e[0])&&((a=e.find(u=>aS.test(u)))==null?void 0:a.replace($d,""));let l=0;return e[0].replace($d,()=>`${r[l++](s)}${o||""}`).replace(EB,AB)}},Sv="react-spring: ",EA=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${Sv}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},PB=EA(console.warn);function RB(){PB(`${Sv}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var MB=EA(console.warn);function OB(){MB(`${Sv}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function If(t){return G.str(t)&&(t[0]=="#"||/\d/.test(t)||!vv()&&Bf.test(t)||t in(ws||{}))}var xv=vv()?x.useEffect:x.useLayoutEffect,TB=()=>{const t=x.useRef(!1);return xv(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function CA(){const t=x.useState()[1],e=TB();return()=>{e.current&&t(Math.random())}}function DB(t,e){const[n]=x.useState(()=>({inputs:e,result:t()})),i=x.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&NB(e,s.inputs)||(s={inputs:e,result:t()}):s=n,x.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function NB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var AA=t=>x.useEffect(t,LB),LB=[];function uS(t){const e=x.useRef();return x.useEffect(()=>{e.current=t}),e.current}var Lu=Symbol.for("Animated:node"),BB=t=>!!t&&t[Lu]===t,Pi=t=>t&&t[Lu],kv=(t,e)=>iB(t,Lu,e),_f=t=>t&&t[Lu]&&t[Lu].getPayload(),PA=class{constructor(){kv(this,this)}getPayload(){return this.payload||[]}},ac=class extends PA{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,G.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new ac(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return G.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,G.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Bu=class extends ac{constructor(t){super(0),this._string=null,this._toString=Ou({output:[t,t]})}static create(t){return new Bu(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(G.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Ou({output:[this.getValue(),t]})),this._value=0,super.reset()}},Oh={dependencies:null},$f=class extends PA{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Vi(this.source,(n,i)=>{BB(n)?e[i]=n.getValue(t):jn(n)?e[i]=nn(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&ve(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Vi(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Oh.dependencies&&jn(t)&&Oh.dependencies.add(t);const e=_f(t);e&&ve(e,n=>this.add(n))}},RA=class extends $f{constructor(t){super(t)}static create(t){return new RA(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(IB)),!0)}};function IB(t){return(If(t)?Bu:ac).create(t)}function S0(t){const e=Pi(t);return e?e.constructor:G.arr(t)?RA:If(t)?Bu:ac}var cS=(t,e)=>{const n=!G.fun(t)||t.prototype&&t.prototype.isReactComponent;return x.forwardRef((i,r)=>{const s=x.useRef(null),o=n&&x.useCallback(p=>{s.current=FB(r,p)},[r]),[l,a]=$B(i,e),u=CA(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,l.getValue(!0)):!1)===!1&&u()},d=new _B(c,a),h=x.useRef();xv(()=>(h.current=d,ve(a,p=>ql(p,d)),()=>{h.current&&(ve(h.current.deps,p=>Nu(p,h.current)),ue.cancel(h.current.update))})),x.useEffect(c,[]),AA(()=>()=>{const p=h.current;ve(p.deps,g=>Nu(g,p))});const f=e.getComponentProps(l.getValue());return x.createElement(t,{...f,ref:o})})},_B=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&ue.write(this.update)}};function $B(t,e){const n=new Set;return Oh.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new $f(t),Oh.dependencies=null,[t,n]}function FB(t,e){return t&&(G.fun(t)?t(e):t.current=e),e}var dS=Symbol.for("AnimatedComponent"),zB=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new $f(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const l=hS(o)||"Anonymous";return G.str(o)?o=s[o]||(s[o]=cS(o,r)):o=o[dS]||(o[dS]=cS(o,r)),o.displayName=`Animated(${l})`,o};return Vi(t,(o,l)=>{G.arr(t)&&(l=hS(o)),s[l]=s(o)}),{animated:s}},hS=t=>G.str(t)?t:t&&G.str(t.displayName)?t.displayName:G.fun(t)&&t.name||null;function Js(t,...e){return G.fun(t)?t(...e):t}var Za=(t,e)=>t===!0||!!(e&&t&&(G.fun(t)?t(e):Cn(t).includes(e))),MA=(t,e)=>G.obj(t)?e&&t[e]:t,OA=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,jB=t=>t,Ev=(t,e=jB)=>{let n=UB;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);G.und(s)||(i[r]=s)}return i},UB=["config","onProps","onStart","onChange","onPause","onResume","onRest"],VB={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function HB(t){const e={};let n=0;if(Vi(t,(i,r)=>{VB[r]||(e[r]=i,n++)}),n)return e}function TA(t){const e=HB(t);if(e){const n={to:e};return Vi(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Iu(t){return t=nn(t),G.arr(t)?t.map(Iu):If(t)?gi.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function WB(t){for(const e in t)return!0;return!1}function x0(t){return G.fun(t)||G.arr(t)&&G.obj(t[0])}function GB(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function XB(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var JB={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},k0={...JB.default,mass:1,damping:1,easing:Lf.linear,clamp:!1},YB=class{constructor(){this.velocity=0,Object.assign(this,k0)}};function KB(t,e,n){n&&(n={...n},fS(n,e),e={...n,...e}),fS(t,e),Object.assign(t,e);for(const o in k0)t[o]==null&&(t[o]=k0[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return G.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function fS(t,e){if(!G.und(e.decay))t.duration=void 0;else{const n=!G.und(e.tension)||!G.und(e.friction);(n||!G.und(e.frequency)||!G.und(e.damping)||!G.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var pS=[],qB=class{constructor(){this.changed=!1,this.values=pS,this.toValues=null,this.fromValues=pS,this.config=new YB,this.immediate=!1}};function DA(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,l)=>{let a,u,c=Za(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{G.und(n.pause)||(r.paused=Za(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||Za(p,e)),a=Js(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),a=u.time-ue.now()}function h(){a>0&&!gi.skipAnimation?(r.delayed=!0,u=ue.setTimeout(f,a),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){l(p)}}})}var Cv=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?fl(t.get()):e.every(n=>n.noop)?NA(t.get()):li(t.get(),e.every(n=>n.finished)),NA=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),li=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),fl=t=>({value:t,cancelled:!0,finished:!1});function LA(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:l,promise:a}=n;return!s&&t===l&&!e.reset?a:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=Ev(e,(v,m)=>m==="onRest"?void 0:v);let c,d;const h=new Promise((v,m)=>(c=v,d=m)),f=v=>{const m=r<=(n.cancelId||0)&&fl(i)||r!==n.asyncId&&li(i,!1);if(m)throw v.result=m,d(v),v},p=(v,m)=>{const y=new mS,w=new gS;return(async()=>{if(gi.skipAnimation)throw _u(n),w.result=li(i,!1),d(w),w;f(y);const b=G.obj(v)?{...v}:{...m,to:v};b.parentId=r,Vi(u,(A,R)=>{G.und(b[R])&&(b[R]=A)});const k=await i.start(b);return f(y),n.paused&&await new Promise(A=>{n.resumeQueue.add(A)}),k})()};let g;if(gi.skipAnimation)return _u(n),li(i,!1);try{let v;G.arr(t)?v=(async m=>{for(const y of m)await p(y)})(t):v=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([v.then(c),h]),g=li(i.get(),!0,!1)}catch(v){if(v instanceof mS)g=v.result;else if(v instanceof gS)g=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?l:void 0,n.promise=s?a:void 0)}return G.fun(o)&&ue.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function _u(t,e){qa(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var mS=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},gS=class extends Error{constructor(){super("SkipAnimationSignal")}},E0=t=>t instanceof Av,QB=1,Av=class extends bA{constructor(){super(...arguments),this.id=QB++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Pi(this);return t&&t.getValue()}to(...t){return gi.to(this,t)}interpolate(...t){return RB(),gi.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Du(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Df.sort(this),Du(this,{type:"priority",parent:this,priority:t})}},wo=Symbol.for("SpringPhase"),BA=1,C0=2,A0=4,im=t=>(t[wo]&BA)>0,jr=t=>(t[wo]&C0)>0,ya=t=>(t[wo]&A0)>0,yS=(t,e)=>e?t[wo]|=C0|BA:t[wo]&=~C0,vS=(t,e)=>e?t[wo]|=A0:t[wo]&=~A0,ZB=class extends Av{constructor(t,e){if(super(),this.animation=new qB,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!G.und(t)||!G.und(e)){const n=G.obj(t)?{...t}:{...e,from:t};G.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(jr(this)||this._state.asyncTo)||ya(this)}get goal(){return nn(this.animation.to)}get velocity(){const t=Pi(this);return t instanceof ac?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return im(this)}get isAnimating(){return jr(this)}get isPaused(){return ya(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=_f(i.to);!o&&jn(i.to)&&(r=Cn(nn(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Bu?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const g=i.fromValues[c],v=u.v0!=null?u.v0:u.v0=G.arr(s.velocity)?s.velocity[c]:s.velocity;let m;const y=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(G.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,b=Math.exp(-(1-w)*p);f=g+v/(1-w)*(1-b),h=Math.abs(u.lastPosition-f)<=y,m=v*b}else{m=u.lastVelocity==null?v:u.lastVelocity;const w=s.restVelocity||y/10,b=s.clamp?0:s.bounce,k=!G.und(b),A=g==d?u.v0>0:g<d;let R,N=!1;const E=1,C=Math.ceil(t/E);for(let P=0;P<C&&(R=Math.abs(m)>w,!(!R&&(h=Math.abs(d-f)<=y,h)));++P){k&&(N=f==d||f>d==A,N&&(m=-m*b,f=d));const M=-s.tension*1e-6*(f-d),T=-s.friction*.001*m,L=(M+T)/s.mass;m=m+L*E,f=f+m*E}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=g+s.easing(w)*(d-g),m=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=m,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const l=Pi(this),a=l.getValue();if(e){const u=nn(i.to);(a!==u||n)&&!s.decay?(l.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(a),this._stop()}else n&&this._onChange(a)}set(t){return ue.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(jr(this)){const{to:t,config:e}=this.animation;ue.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return G.und(t)?(n=this.queue||[],this.queue=[]):n=[G.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>Cv(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),_u(this._state,t&&this._lastCallId),ue.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=G.obj(n)?n[e]:n,(n==null||x0(n))&&(n=void 0),i=G.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return im(this)||(t.reverse&&([n,i]=[i,n]),i=nn(i),G.und(i)?Pi(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,Ev(t,(o,l)=>/^on/.test(l)?MA(o,n):o)),bS(this,t,"onProps"),wa(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return DA(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{ya(this)||(vS(this,!0),_a(s.pauseQueue),wa(this,"onPause",li(this,va(this,this.animation.to)),this))},resume:()=>{ya(this)&&(vS(this,!1),jr(this)&&this._resume(),_a(s.resumeQueue),wa(this,"onResume",li(this,va(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const l=IA(t);if(l)return this._update(l,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(fl(this));const i=!G.und(t.to),r=!G.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(fl(this));const{key:s,defaultProps:o,animation:l}=this,{to:a,from:u}=l;let{to:c=a,from:d=u}=t;r&&!i&&(!e.default||G.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!Zi(d,u);h&&(l.from=d),d=nn(d);const f=!Zi(c,a);f&&this._focus(c);const p=x0(e.to),{config:g}=l,{decay:v,velocity:m}=g;(i||r)&&(g.velocity=0),e.config&&!p&&KB(g,Js(e.config,s),e.config!==o.config?Js(o.config,s):void 0);let y=Pi(this);if(!y||G.und(c))return n(li(this,!0));const w=G.und(e.reset)?r&&!e.default:!G.und(d)&&Za(e.reset,s),b=w?d:this.get(),k=Iu(c),A=G.num(k)||G.arr(k)||If(k),R=!p&&(!A||Za(o.immediate||e.immediate,s));if(f){const P=S0(c);if(P!==y.constructor)if(R)y=this._set(k);else throw Error(`Cannot animate between ${y.constructor.name} and ${P.name}, as the "to" prop suggests`)}const N=y.constructor;let E=jn(c),C=!1;if(!E){const P=w||!im(this)&&h;(f||P)&&(C=Zi(Iu(b),k),E=!C),(!Zi(l.immediate,R)&&!R||!Zi(g.decay,v)||!Zi(g.velocity,m))&&(E=!0)}if(C&&jr(this)&&(l.changed&&!w?E=!0:E||this._stop(a)),!p&&((E||jn(a))&&(l.values=y.getPayload(),l.toValues=jn(c)?null:N==Bu?[1]:Cn(k)),l.immediate!=R&&(l.immediate=R,!R&&!w&&this._set(a)),E)){const{onRest:P}=l;ve(tI,T=>bS(this,e,T));const M=li(this,va(this,a));_a(this._pendingCalls,M),this._pendingCalls.add(n),l.changed&&ue.batchedUpdates(()=>{var T;l.changed=!w,P==null||P(M,this),w?Js(o.onRest,M):(T=l.onStart)==null||T.call(l,M,this)})}w&&this._set(b),p?n(LA(e.to,e,this._state,this)):E?this._start():jr(this)&&!f?this._pendingCalls.add(n):n(NA(b))}_focus(t){const e=this.animation;t!==e.to&&(lS(this)&&this._detach(),e.to=t,lS(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;jn(e)&&(ql(e,this),E0(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;jn(t)&&Nu(t,this)}_set(t,e=!0){const n=nn(t);if(!G.und(n)){const i=Pi(this);if(!i||!Zi(n,i.getValue())){const r=S0(n);!i||i.constructor!=r?kv(this,r.create(n)):i.setValue(n),i&&ue.batchedUpdates(()=>{this._onChange(n,e)})}}return Pi(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,wa(this,"onStart",li(this,va(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Js(this.animation.onChange,t,this)),Js(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Pi(this).reset(nn(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),jr(this)||(yS(this,!0),ya(this)||this._resume())}_resume(){gi.skipAnimation?this.finish():Df.start(this)}_stop(t,e){if(jr(this)){yS(this,!1);const n=this.animation;ve(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Du(this,{type:"idle",parent:this});const i=e?fl(this.get()):li(this.get(),va(this,t??n.to));_a(this._pendingCalls,i),n.changed&&(n.changed=!1,wa(this,"onRest",i,this))}}};function va(t,e){const n=Iu(e),i=Iu(t.get());return Zi(i,n)}function IA(t,e=t.loop,n=t.to){const i=Js(e);if(i){const r=i!==!0&&TA(i),s=(r||t).reverse,o=!r||r.reset;return $u({...t,loop:e,default:!1,pause:void 0,to:!s||x0(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function $u(t){const{to:e,from:n}=t=TA(t),i=new Set;return G.obj(e)&&wS(e,i),G.obj(n)&&wS(n,i),t.keys=i.size?Array.from(i):null,t}function eI(t){const e=$u(t);return G.und(e.default)&&(e.default=Ev(e)),e}function wS(t,e){Vi(t,(n,i)=>n!=null&&e.add(i))}var tI=["onStart","onRest","onChange","onPause","onResume"];function bS(t,e,n){t.animation[n]=e[n]!==OA(e,n)?MA(e[n],t.key):void 0}function wa(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var nI=["onStart","onChange","onRest"],iI=1,rI=class{constructor(t,e){this.id=iI++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];G.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push($u(t)),this}start(t){let{queue:e}=this;return t?e=Cn(t).map($u):this.queue=[],this._flush?this._flush(this,e):(jA(this,e),P0(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;ve(Cn(e),i=>n[i].stop(!!t))}else _u(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(G.und(t))this.start({pause:!0});else{const e=this.springs;ve(Cn(t),n=>e[n].pause())}return this}resume(t){if(G.und(t))this.start({pause:!1});else{const e=this.springs;ve(Cn(t),n=>e[n].resume())}return this}each(t){Vi(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,qa(t,([l,a])=>{a.value=this.get(),l(a,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&qa(e,([l,a])=>{a.value=o,l(a,this,this._item)}),s&&(this._started=!1,qa(n,([l,a])=>{a.value=o,l(a,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;ue.onFrame(this._onFrame)}};function P0(t,e){return Promise.all(e.map(n=>_A(t,n))).then(n=>Cv(t,n))}async function _A(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:l,onResolve:a}=e,u=G.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const c=G.arr(r)||G.fun(r)?r:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):ve(nI,g=>{const v=e[g];if(G.fun(v)){const m=t._events[g];e[g]=({finished:y,cancelled:w})=>{const b=m.get(v);b?(y||(b.finished=!1),w&&(b.cancelled=!0)):m.set(v,{value:null,finished:y||!1,cancelled:w||!1})},u&&(u[g]=e[g])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,_a(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),f=e.cancel===!0||OA(e,"cancel")===!0;(c||f&&d.asyncId)&&h.push(DA(++t._lastAsyncId,{props:e,state:d,actions:{pause:w0,resume:w0,start(g,v){f?(_u(d,t._lastAsyncId),v(fl(t))):(g.onRest=l,v(LA(c,g,d,t)))}}})),d.paused&&await new Promise(g=>{d.resumeQueue.add(g)});const p=Cv(t,await Promise.all(h));if(o&&p.finished&&!(n&&p.noop)){const g=IA(e,o,r);if(g)return jA(t,[g]),_A(t,g,!0)}return a&&ue.batchedUpdates(()=>a(p,t,t.item)),p}function SS(t,e){const n={...t.springs};return e&&ve(Cn(e),i=>{G.und(i.keys)&&(i=$u(i)),G.obj(i.to)||(i={...i,to:void 0}),zA(n,i,r=>FA(r))}),$A(t,n),n}function $A(t,e){Vi(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,ql(n,t))})}function FA(t,e){const n=new ZB;return n.key=t,e&&ql(n,e),n}function zA(t,e,n){e.keys&&ve(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function jA(t,e){ve(e,n=>{zA(t.springs,n,i=>FA(i,t))})}var Ff=({children:t,...e})=>{const n=x.useContext(Th),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=DB(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Th;return x.createElement(s,{value:e},t)},Th=sI(Ff,{});Ff.Provider=Th.Provider;Ff.Consumer=Th.Consumer;function sI(t,e){return Object.assign(t,x.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var UA=()=>{const t=[],e=function(i){OB();const r=[];return ve(t,(s,o)=>{if(G.und(i))r.push(s.start());else{const l=n(i,s,o);l&&r.push(s.start(l))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return ve(t,i=>i.pause(...arguments)),this},e.resume=function(){return ve(t,i=>i.resume(...arguments)),this},e.set=function(i){ve(t,(r,s)=>{const o=G.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return ve(t,(s,o)=>{if(G.und(i))r.push(s.start());else{const l=this._getProps(i,s,o);l&&r.push(s.start(l))}}),r},e.stop=function(){return ve(t,i=>i.stop(...arguments)),this},e.update=function(i){return ve(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return G.fun(i)?i(s,r):i};return e._getProps=n,e};function oI(t,e,n){const i=G.fun(e)&&e;i&&!n&&(n=[]);const r=x.useMemo(()=>i||arguments.length==3?UA():void 0,[]),s=x.useRef(0),o=CA(),l=x.useMemo(()=>({ctrls:[],queue:[],flush(m,y){const w=SS(m,y);return s.current>0&&!l.queue.length&&!Object.keys(w).some(k=>!m.springs[k])?P0(m,y):new Promise(k=>{$A(m,w),l.queue.push(()=>{k(P0(m,y))}),o()})}}),[]),a=x.useRef([...l.ctrls]),u=[],c=uS(t)||0;x.useMemo(()=>{ve(a.current.slice(t,c),m=>{GB(m,r),m.stop(!0)}),a.current.length=t,d(c,t)},[t]),x.useMemo(()=>{d(0,Math.min(c,t))},n);function d(m,y){for(let w=m;w<y;w++){const b=a.current[w]||(a.current[w]=new rI(null,l.flush)),k=i?i(w,b):e[w];k&&(u[w]=eI(k))}}const h=a.current.map((m,y)=>SS(m,u[y])),f=x.useContext(Ff),p=uS(f),g=f!==p&&WB(f);xv(()=>{s.current++,l.ctrls=a.current;const{queue:m}=l;m.length&&(l.queue=[],ve(m,y=>y())),ve(a.current,(y,w)=>{r==null||r.add(y),g&&y.start({default:f});const b=u[w];b&&(XB(y,b.ref),y.ref?y.queue.push(b):y.start(b))})}),AA(()=>()=>{ve(l.ctrls,m=>m.stop(!0))});const v=h.map(m=>({...m}));return r?[v,r]:v}function Pv(t,e){const n=G.fun(t),[[i],r]=oI(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[i,r]:i}var lI=()=>UA(),Tt=()=>x.useState(lI)[0],aI=class extends Av{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Ou(...e);const n=this._get(),i=S0(n);kv(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Zi(e,n)||(Pi(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&xS(this._active)&&rm(this)}_get(){const t=G.arr(this.source)?this.source.map(nn):Cn(nn(this.source));return this.calc(...t)}_start(){this.idle&&!xS(this._active)&&(this.idle=!1,ve(_f(this),t=>{t.done=!1}),gi.skipAnimation?(ue.batchedUpdates(()=>this.advance()),rm(this)):Df.start(this))}_attach(){let t=1;ve(Cn(this.source),e=>{jn(e)&&ql(e,this),E0(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){ve(Cn(this.source),t=>{jn(t)&&Nu(t,this)}),this._active.clear(),rm(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Cn(this.source).reduce((e,n)=>Math.max(e,(E0(n)?n.priority:0)+1),0))}};function uI(t){return t.idle!==!1}function xS(t){return!t.size||Array.from(t).every(uI)}function rm(t){t.idle||(t.idle=!0,ve(_f(t),e=>{e.done=!0}),Du(t,{type:"idle",parent:t}))}gi.assign({createStringInterpolator:kA,to:(t,e)=>new aI(t,e)});var VA=/^--/;function cI(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!VA.test(t)&&!(eu.hasOwnProperty(t)&&eu[t])?e+"px":(""+e).trim()}var kS={};function dI(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:l,...a}=e,u=Object.values(a),c=Object.keys(a).map(d=>n||t.hasAttribute(d)?d:kS[d]||(kS[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in i)if(i.hasOwnProperty(d)){const h=cI(d,i[d]);VA.test(d)?t.style.setProperty(d,h):t.style[d]=h}c.forEach((d,h)=>{t.setAttribute(d,u[h])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),l!==void 0&&t.setAttribute("viewBox",l)}var eu={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hI=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),fI=["Webkit","Ms","Moz","O"];eu=Object.keys(eu).reduce((t,e)=>(fI.forEach(n=>t[hI(n,e)]=t[e]),t),eu);var pI=/^(matrix|translate|scale|rotate|skew)/,mI=/^(translate)/,gI=/^(rotate|skew)/,sm=(t,e)=>G.num(t)&&t!==0?t+e:t,Fd=(t,e)=>G.arr(t)?t.every(n=>Fd(n,e)):G.num(t)?t===e:parseFloat(t)===e,yI=class extends $f{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(l=>sm(l,"px")).join(",")})`,Fd(o,0)])),Vi(i,(o,l)=>{if(l==="transform")r.push([o||""]),s.push(a=>[a,a===""]);else if(pI.test(l)){if(delete i[l],G.und(o))return;const a=mI.test(l)?"px":gI.test(l)?"deg":"";r.push(Cn(o)),s.push(l==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${sm(h,a)})`,Fd(h,0)]:u=>[`${l}(${u.map(c=>sm(c,a)).join(",")})`,Fd(u,l.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new vI(r,s)),super(i)}},vI=class extends bA{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return ve(this.inputs,(n,i)=>{const r=nn(n[0]),[s,o]=this.transforms[i](G.arr(r)?r:n.map(nn));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&ve(this.inputs,e=>ve(e,n=>jn(n)&&ql(n,this)))}observerRemoved(t){t==0&&ve(this.inputs,e=>ve(e,n=>jn(n)&&Nu(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Du(this,t)}},wI=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];gi.assign({batchedUpdates:Zu.unstable_batchedUpdates,createStringInterpolator:kA,colors:aB});var bI=zB(wI,{applyAnimatedValues:dI,createAnimatedStyle:t=>new yI(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Rv=bI.animated;const HA=x.createContext({}),zf=()=>x.useContext(HA);function SI({children:t}){const e={cpu:{highlightPath:Tt(),AX:Tt(),BX:Tt(),CX:Tt(),DX:Tt(),SP:Tt(),IP:Tt(),IR:Tt(),ri:Tt(),id:Tt(),left:Tt(),right:Tt(),result:Tt(),FLAGS:Tt(),MAR:Tt(),MBR:Tt()}};return D.jsx(HA.Provider,{value:e,children:t})}const om=he(O.zero(16)),lm=he(O.zero(16)),am=he(O.zero(16)),um=he(O.zero(16)),cm=he(O.zero(16)),dm=he(O.zero(16)),xI=he(O.zero(8)),hm=he(O.zero(16)),fm=he(O.zero(16)),pm=he(O.zero(16)),mm=he(O.zero(16)),gm=he(O.zero(16)),ym=he(O.zero(16)),WA=he(O.zero(16)),Nr=he(O.zero(8)),Tn=t=>he(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),Dn=t=>he(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),Ie={AX:om,AL:Tn(om),AH:Dn(om),BX:lm,BL:Tn(lm),BH:Dn(lm),CX:am,CL:Tn(am),CH:Dn(am),DX:um,DL:Tn(um),DH:Dn(um),SP:cm,"SP.l":Tn(cm),"SP.h":Dn(cm),IP:dm,"IP.l":Tn(dm),"IP.h":Dn(dm),IR:xI,ri:hm,"ri.l":Tn(hm),"ri.h":Dn(hm),id:fm,"id.l":Tn(fm),"id.h":Dn(fm),left:pm,"left.l":Tn(pm),"left.h":Dn(pm),right:mm,"right.l":Tn(mm),"right.h":Dn(mm),result:gm,"result.l":Tn(gm),"result.h":Dn(gm),FLAGS:ym,"FLAGS.l":Tn(ym),"FLAGS.h":Dn(ym),MAR:WA,MBR:Nr},_o=he({phase:"stopped"}),kI=he("ADD");function EI(t){H.set(Ie.AX,O.fromUnsigned(t.cpu.AX,16)),H.set(Ie.BX,O.fromUnsigned(t.cpu.BX,16)),H.set(Ie.CX,O.fromUnsigned(t.cpu.CX,16)),H.set(Ie.DX,O.fromUnsigned(t.cpu.DX,16)),H.set(Ie.SP,O.fromUnsigned(t.cpu.SP,16)),H.set(Ie.IP,O.fromUnsigned(t.cpu.IP,16)),H.set(Ie.IR,O.fromUnsigned(t.cpu.IR,8)),H.set(Ie.ri,O.fromUnsigned(t.cpu.ri,16)),H.set(Ie.id,O.fromUnsigned(t.cpu.id,16)),H.set(Ie.left,O.fromUnsigned(t.cpu.left,16)),H.set(Ie.right,O.fromUnsigned(t.cpu.right,16)),H.set(Ie.result,O.fromUnsigned(t.cpu.result,16)),H.set(Ie.FLAGS,O.fromUnsigned(t.cpu.FLAGS,16)),H.set(Ie.MAR,O.fromUnsigned(t.cpu.MAR,16)),H.set(Ie.MBR,O.fromUnsigned(t.cpu.MBR,8)),H.set(_o,{phase:"stopped"})}const GA=he(O.fromUnsigned(0,8)),XA=he(O.fromUnsigned(1,8));function CI(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{H.set(Nr,t.value);return}case"handshake:write":case"handshake:register.update":switch(t.register){case"DATA":{H.set(GA,t.value);return}case"STATE":{H.set(XA,t.value);return}default:return t.register}case"handshake:write.ok":return;case"handshake:interrupt":return;default:return t}}const JA=he(O.zero(8));function AI(t){switch(t.type){case"leds:update":{H.set(JA,t.state);return}default:return t}}const YA=he(new Array(oe.MAX_ADDRESS+1).fill(O.zero(8)));function PI(t){switch(t.type){case"memory:read":return;case"memory:read.ok":{H.set(Nr,t.value);return}case"memory:write":{if(oe.inRange(t.address)){const e=Number(t.address);H.set(YA,n=>[...n.slice(0,e),t.value,...n.slice(e+1)])}return}case"memory:write.ok":return;case"memory:read.error":case"memory:write.error":{Fu(t.error);return}default:return t}}const KA=he(O.fromUnsigned(255,8)),qA=he(O.fromUnsigned(0,8)),QA=he(O.fromUnsigned(0,8)),ZA=he(new Array(8).fill(O.zero(8)));function RI(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{H.set(Nr,t.value);return}case"pic:write":case"pic:register.update":switch(t.register){case"EOI":return;case"IMR":{H.set(KA,t.value);return}case"IRR":{H.set(qA,t.value);return}case"ISR":{H.set(QA,t.value);return}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));H.set(ZA,n=>[...n.slice(0,e),t.value,...n.slice(e+1)]);return}default:return t.register}case"pic:write.ok":return;case"pic:intr.off":return;case"pic:intr.on":return;case"pic:int.send":{H.set(Nr,t.number);return}default:return t}}const eP=he(O.zero(8)),tP=he(O.zero(8)),nP=he(O.zero(8)),iP=he(O.zero(8));function MI(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{H.set(Nr,t.value);return}case"pio:write":case"pio:register.update":switch(t.register){case"PA":{H.set(eP,t.value);return}case"PB":{H.set(tP,t.value);return}case"CA":{H.set(nP,t.value);return}case"CB":{H.set(iP,t.value);return}default:return t.register}case"pio:write.ok":return;default:return t}}const R0=he([]),M0=he("");function OI(t){switch(t.type){case"printer:buffer.add":{H.set(R0,e=>[...e,t.char]);return}case"printer:buffer.pop":{H.set(R0,e=>e.slice(1));return}case"printer:busy.off":return;case"printer:busy.on":return;case"printer:data.read":return;case"printer:paper.print":{const e=nt.getComputerState().io;"printer"in e&&H.set(M0,e.printer.paper);return}case"printer:paper.replace":{H.set(M0,"");return}case"printer:strobe.off":return;case"printer:strobe.on":return;default:return t}}const rP=he(O.zero(8));function TI(t){switch(t.type){case"switches:toggle":{H.set(rP,e=>e.withBit(t.index,!e.bit(t.index)));return}default:return t}}const sP=he(O.zero(8)),oP=he(O.zero(8));function DI(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{H.set(Nr,t.value);return}case"timer:write":case"timer:register.update":switch(t.register){case"CONT":{H.set(sP,t.value);return}case"COMP":{H.set(oP,t.value);return}default:return t.register}case"timer:write.ok":return;case"timer:interrupt":return;default:return t}}var Mv={exports:{}},pl=typeof Reflect=="object"?Reflect:null,ES=pl&&typeof pl.apply=="function"?pl.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},zd;pl&&typeof pl.ownKeys=="function"?zd=pl.ownKeys:Object.getOwnPropertySymbols?zd=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:zd=function(e){return Object.getOwnPropertyNames(e)};function NI(t){console&&console.warn&&console.warn(t)}var lP=Number.isNaN||function(e){return e!==e};function Pe(){Pe.init.call(this)}Mv.exports=Pe;Mv.exports.once=_I;Pe.EventEmitter=Pe;Pe.prototype._events=void 0;Pe.prototype._eventsCount=0;Pe.prototype._maxListeners=void 0;var CS=10;function jf(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Pe,"defaultMaxListeners",{enumerable:!0,get:function(){return CS},set:function(t){if(typeof t!="number"||t<0||lP(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");CS=t}});Pe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Pe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||lP(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function aP(t){return t._maxListeners===void 0?Pe.defaultMaxListeners:t._maxListeners}Pe.prototype.getMaxListeners=function(){return aP(this)};Pe.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var a=s[e];if(a===void 0)return!1;if(typeof a=="function")ES(a,this,n);else for(var u=a.length,c=fP(a,u),i=0;i<u;++i)ES(c[i],this,n);return!0};function uP(t,e,n,i){var r,s,o;if(jf(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=aP(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,NI(l)}return t}Pe.prototype.addListener=function(e,n){return uP(this,e,n,!1)};Pe.prototype.on=Pe.prototype.addListener;Pe.prototype.prependListener=function(e,n){return uP(this,e,n,!0)};function LI(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function cP(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=LI.bind(i);return r.listener=n,i.wrapFn=r,r}Pe.prototype.once=function(e,n){return jf(n),this.on(e,cP(this,e,n)),this};Pe.prototype.prependOnceListener=function(e,n){return jf(n),this.prependListener(e,cP(this,e,n)),this};Pe.prototype.removeListener=function(e,n){var i,r,s,o,l;if(jf(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){l=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():BI(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,l||n)}return this};Pe.prototype.off=Pe.prototype.removeListener;Pe.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function dP(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?II(r):fP(r,r.length)}Pe.prototype.listeners=function(e){return dP(this,e,!0)};Pe.prototype.rawListeners=function(e){return dP(this,e,!1)};Pe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):hP.call(t,e)};Pe.prototype.listenerCount=hP;function hP(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Pe.prototype.eventNames=function(){return this._eventsCount>0?zd(this._events):[]};function fP(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function BI(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function II(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function _I(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}pP(t,e,s,{once:!0}),e!=="error"&&$I(t,r,{once:!0})})}function $I(t,e,n){typeof t.on=="function"&&pP(t,"error",e,n)}function pP(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var FI=Mv.exports;function Hi(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Hi.prototype[Symbol.iterator]=function(){return this});Hi.of=function(){var t=arguments,e=t.length,n=0;return new Hi(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Hi.empty=function(){var t=new Hi(function(){return{done:!0}});return t};Hi.fromSequence=function(t){var e=0,n=t.length;return new Hi(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Hi.is=function(t){return t instanceof Hi?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Uf=Hi;const qn=Xu(Uf);var Vf={};Vf.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Vf.SYMBOL_SUPPORT=typeof Symbol<"u";var zI=Uf,mP=Vf,jI=mP.ARRAY_BUFFER_SUPPORT,UI=mP.SYMBOL_SUPPORT;function VI(t){return typeof t=="string"||Array.isArray(t)||jI&&ArrayBuffer.isView(t)?zI.fromSequence(t):typeof t!="object"||t===null?null:UI&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var gP=function(e){var n=VI(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},HI=gP,WI=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,l=HI(e);;){if(o===i)return r;if(s=l.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const yP=Xu(WI);var GI=Uf,XI=gP,JI=function(){var e=arguments,n=null,i=-1;return new GI(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=XI(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Sr=Xu(JI);function YI(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let at=YI;typeof Object.assign=="function"&&(at=Object.assign);function Jn(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function kt(t){return typeof t=="object"&&t!==null}function vP(t){let e;for(e in t)return!1;return!0}function Nn(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function ei(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function AS(t){return!(!kt(t)||t.attributes&&!Array.isArray(t.attributes))}function KI(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class Ov extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class q extends Ov{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,q.prototype.constructor)}}class X extends Ov{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,X.prototype.constructor)}}class se extends Ov{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,se.prototype.constructor)}}function wP(t,e){this.key=t,this.attributes=e,this.clear()}wP.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function bP(t,e){this.key=t,this.attributes=e,this.clear()}bP.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function SP(t,e){this.key=t,this.attributes=e,this.clear()}SP.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Ql(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Ql.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Ql.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};Ql.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Ql.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const xP=0,kP=1,qI=2,EP=3;function _r(t,e,n,i,r,s,o){let l,a,u,c;if(i=""+i,n===xP){if(l=t._nodes.get(i),!l)throw new X(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===EP){if(r=""+r,a=t._edges.get(r),!a)throw new X(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=a.source.key,h=a.target.key;if(i===d)l=a.target;else if(i===h)l=a.source;else throw new X(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(a=t._edges.get(i),!a)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===kP?l=a.source:l=a.target,u=r,c=s}return[l,u,c]}function QI(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=_r(this,e,n,i,r,s);return o.attributes[l]}}function ZI(t,e,n){t.prototype[e]=function(i,r){const[s]=_r(this,e,n,i,r);return s.attributes}}function e8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=_r(this,e,n,i,r,s);return o.attributes.hasOwnProperty(l)}}function t8(t,e,n){t.prototype[e]=function(i,r,s,o){const[l,a,u]=_r(this,e,n,i,r,s,o);return l.attributes[a]=u,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:a}),this}}function n8(t,e,n){t.prototype[e]=function(i,r,s,o){const[l,a,u]=_r(this,e,n,i,r,s,o);if(typeof u!="function")throw new q(`Graph.${e}: updater should be a function.`);const c=l.attributes,d=u(c[a]);return c[a]=d,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:a}),this}}function i8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=_r(this,e,n,i,r,s);return delete o.attributes[l],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:l}),this}}function r8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=_r(this,e,n,i,r,s);if(!kt(l))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=l,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function s8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=_r(this,e,n,i,r,s);if(!kt(l))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return at(o.attributes,l),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:l}),this}}function o8(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=_r(this,e,n,i,r,s);if(typeof l!="function")throw new q(`Graph.${e}: provided updater is not a function.`);return o.attributes=l(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const l8=[{name:t=>`get${t}Attribute`,attacher:QI},{name:t=>`get${t}Attributes`,attacher:ZI},{name:t=>`has${t}Attribute`,attacher:e8},{name:t=>`set${t}Attribute`,attacher:t8},{name:t=>`update${t}Attribute`,attacher:n8},{name:t=>`remove${t}Attribute`,attacher:i8},{name:t=>`replace${t}Attributes`,attacher:r8},{name:t=>`merge${t}Attributes`,attacher:s8},{name:t=>`update${t}Attributes`,attacher:o8}];function a8(t){l8.forEach(function({name:e,attacher:n}){n(t,e("Node"),xP),n(t,e("Source"),kP),n(t,e("Target"),qI),n(t,e("Opposite"),EP)})}function u8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=Jn(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function c8(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=Jn(this,s,o,n),!r)throw new X(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function d8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=Jn(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function h8(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,a=""+r;if(r=arguments[2],s=arguments[3],o=Jn(this,l,a,n),!o)throw new X(`Graph.${e}: could not find an edge for the given path ("${l}" - "${a}").`)}else{if(n!=="mixed")throw new se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function f8(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,a=""+r;if(r=arguments[2],s=arguments[3],o=Jn(this,l,a,n),!o)throw new X(`Graph.${e}: could not find an edge for the given path ("${l}" - "${a}").`)}else{if(n!=="mixed")throw new se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new q(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function p8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=Jn(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function m8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=Jn(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!kt(r))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function g8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=Jn(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!kt(r))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return at(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function y8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new se(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new se(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=Jn(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new se(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new q(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const v8=[{name:t=>`get${t}Attribute`,attacher:u8},{name:t=>`get${t}Attributes`,attacher:c8},{name:t=>`has${t}Attribute`,attacher:d8},{name:t=>`set${t}Attribute`,attacher:h8},{name:t=>`update${t}Attribute`,attacher:f8},{name:t=>`remove${t}Attribute`,attacher:p8},{name:t=>`replace${t}Attributes`,attacher:m8},{name:t=>`merge${t}Attributes`,attacher:g8},{name:t=>`update${t}Attributes`,attacher:y8}];function w8(t){v8.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const b8=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function S8(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function x8(t,e,n,i){let r,s,o,l=!1;for(const a in e)if(a!==i){r=e[a];do{if(s=r.source,o=r.target,l=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&l)return r.key;r=r.next}while(r!==void 0)}}function vm(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new qn(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const l=n[s++];if(l===e){r=void 0;continue}r=t[l]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function k8(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function E8(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function wm(t,e){let n=t[e];return n.next!==void 0?new qn(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):qn.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function C8(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):yP(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,l,a;for(;l=s.next(),l.done!==!0;)a=l.value,a.undirected===r&&(i[o++]=a.key);return i}function CP(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,l,a=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(l=o.value,r&&l.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=l;if(a=i(c,d,h.key,f.key,h.attributes,f.attributes,l.undirected),t&&a)return c}}function A8(t,e){if(t.size===0)return qn.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new qn(function(){let o,l;for(;;){if(o=r.next(),o.done)return o;if(l=o.value,!(n&&l.undirected!==i))break}return{value:{edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected},done:!1}})}function Tv(t,e,n,i,r,s){const o=e?x8:S8;let l;if(n!=="undirected"&&(i!=="out"&&(l=o(t,r.in,s),t&&l)||i!=="in"&&(l=o(t,r.out,s,i?void 0:r.key),t&&l))||n!=="directed"&&(l=o(t,r.undirected,s),t&&l))return l}function P8(t,e,n,i){const r=[];return Tv(!1,t,e,n,i,function(s){r.push(s)}),r}function R8(t,e,n){let i=qn.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Sr(i,vm(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Sr(i,vm(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Sr(i,vm(n.undirected))),i}function Dv(t,e,n,i,r,s,o){const l=n?E8:k8;let a;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(a=l(t,r.in,s,o),t&&a)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(a=l(t,r.out,s,o),t&&a))||e!=="directed"&&typeof r.undirected<"u"&&(a=l(t,r.undirected,s,o),t&&a))return a}function M8(t,e,n,i,r){const s=[];return Dv(!1,t,e,n,i,r,function(o){s.push(o)}),s}function O8(t,e,n,i){let r=qn.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Sr(r,wm(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Sr(r,wm(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Sr(r,wm(n.undirected,i))),r}function T8(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return C8(this,i);if(arguments.length===1){s=""+s;const l=this._nodes.get(s);if(typeof l>"u")throw new X(`Graph.${n}: could not find the "${s}" node in the graph.`);return P8(this.multi,i==="mixed"?this.type:i,r,l)}if(arguments.length===2){s=""+s,o=""+o;const l=this._nodes.get(s);if(!l)throw new X(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new X(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return M8(i,this.multi,r,l,o)}throw new q(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function D8(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,CP(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new X(`Graph.${s}: could not find the "${u}" node in the graph.`);return Tv(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new X(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new X(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return Dv(!1,i,this.multi,r,h,c,d)}throw new q(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,g,v,m,y,w,b)=>{d[f++]=c(p,g,v,m,y,w,b)})}else d=[],u.push((h,f,p,g,v,m,y)=>{d.push(c(h,f,p,g,v,m,y))});return this[s].apply(this,u),d};const l="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,g,v,m,y)=>{c(h,f,p,g,v,m,y)&&d.push(h)}),this[s].apply(this,u),d};const a="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new q(`Graph.${a}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new q(`Graph.${a}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,g,v,m,y,w)=>{h=c(h,f,p,g,v,m,y,w)}),this[s].apply(this,u),h}}function N8(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(a,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=a,CP(!0,this,i,c);if(arguments.length===2){a=""+a,c=u;const d=this._nodes.get(a);if(typeof d>"u")throw new X(`Graph.${s}: could not find the "${a}" node in the graph.`);return Tv(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){a=""+a,u=""+u;const d=this._nodes.get(a);if(!d)throw new X(`Graph.${s}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(u))throw new X(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return Dv(!0,i,this.multi,r,d,u,c)}throw new q(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const a=Array.prototype.slice.call(arguments),u=a.pop();return a.push((d,h,f,p,g,v,m)=>u(d,h,f,p,g,v,m)),!!this[s].apply(this,a)};const l="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[l]=function(){const a=Array.prototype.slice.call(arguments),u=a.pop();return a.push((d,h,f,p,g,v,m)=>!u(d,h,f,p,g,v,m)),!this[s].apply(this,a)}}function L8(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,l){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return qn.empty();if(!arguments.length)return A8(this,i);if(arguments.length===1){o=""+o;const a=this._nodes.get(o);if(!a)throw new X(`Graph.${s}: could not find the "${o}" node in the graph.`);return R8(i,r,a)}if(arguments.length===2){o=""+o,l=""+l;const a=this._nodes.get(o);if(!a)throw new X(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(l))throw new X(`Graph.${s}:  could not find the "${l}" target node in the graph.`);return O8(i,r,a,l)}throw new q(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function B8(t){b8.forEach(e=>{T8(t,e),D8(t,e),N8(t,e),L8(t,e)})}const I8=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Hf(){this.A=null,this.B=null}Hf.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Hf.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function ba(t,e,n,i,r){for(const s in i){const o=i[s],l=o.source,a=o.target,u=l===n?a:l;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function Nv(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return ba(t,null,i,i.undirected,r);if(typeof n=="string")return ba(t,null,i,i[n],r)}const s=new Hf;let o;if(e!=="undirected"){if(n!=="out"){if(o=ba(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=ba(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=ba(t,s,i,i.undirected,r),t&&o))return o}function _8(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return Nv(!1,t,e,n,function(r){i.push(r)}),i}function Sa(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new qn(function(){let l=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const a=n[i[s++]],u=a.source,c=a.target;if(l=u===e?c:u,t&&t.has(l.key)){l=null;continue}}while(l===null);return{done:!1,value:{neighbor:l.key,attributes:l.attributes}}})}function $8(t,e,n){if(t!=="mixed"){if(t==="undirected")return Sa(null,n,n.undirected);if(typeof e=="string")return Sa(null,n,n[e])}let i=qn.empty();const r=new Hf;return t!=="undirected"&&(e!=="out"&&(i=Sr(i,Sa(r,n,n.in))),e!=="in"&&(i=Sr(i,Sa(r,n,n.out)))),t!=="directed"&&(i=Sr(i,Sa(r,n,n.undirected))),i}function F8(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new X(`Graph.${n}: could not find the "${s}" node in the graph.`);return _8(i==="mixed"?this.type:i,r,o)}}function z8(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new X(`Graph.${s}: could not find the "${u}" node in the graph.`);Nv(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const l="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const a="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c,d){if(arguments.length<3)throw new q(`Graph.${a}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function j8(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new X(`Graph.${o}: could not find the "${u}" node in the graph.`);return Nv(!0,i==="mixed"?this.type:i,r,d,c)};const l="some"+s;t.prototype[l]=function(u,c){return!!this[o](u,c)};const a="every"+s;t.prototype[a]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function U8(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return qn.empty();o=""+o;const l=this._nodes.get(o);if(typeof l>"u")throw new X(`Graph.${s}: could not find the "${o}" node in the graph.`);return $8(i==="mixed"?this.type:i,r,l)}}function V8(t){I8.forEach(e=>{F8(t,e),z8(t,e),j8(t,e),U8(t,e)})}function ed(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let l,a,u,c,d,h,f;for(;l=s.next(),l.done!==!0;){let p=!1;if(a=l.value,o!=="undirected"){c=a.out;for(u in c){d=c[u];do{if(h=d.target,p=!0,f=r(a.key,h.key,a.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(o!=="directed"){c=a.undirected;for(u in c)if(!(e&&a.key>u)){d=c[u];do{if(h=d.target,h.key!==u&&(h=d.source),p=!0,f=r(a.key,h.key,a.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(n&&!p&&(f=r(a.key,null,a.attributes,null,null,null,null),t&&f))return null}}function H8(t,e){const n={key:t};return vP(e.attributes)||(n.attributes=at({},e.attributes)),n}function W8(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return vP(n.attributes)||(i.attributes=at({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function G8(t){if(!kt(t))throw new q('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new q("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!kt(t.attributes)||t.attributes===null))throw new q("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function X8(t){if(!kt(t))throw new q('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new q("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new q("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!kt(t.attributes)||t.attributes===null))throw new q("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new q("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const J8=KI(),Y8=new Set(["directed","undirected","mixed"]),PS=new Set(["domain","_events","_eventsCount","_maxListeners"]),K8=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],q8={allowSelfLoops:!0,multi:!1,type:"mixed"};function Q8(t,e,n){if(n&&!kt(n))throw new q(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new se(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function RS(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function AP(t,e,n,i,r,s,o,l){if(!i&&t.type==="undirected")throw new se(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new se(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(l&&!kt(l))throw new q(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`);if(s=""+s,o=""+o,l=l||{},!t.allowSelfLoops&&s===o)throw new se(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const a=t._nodes.get(s),u=t._nodes.get(o);if(!a)throw new X(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new X(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:l};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new se(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof a.undirected[o]<"u":typeof a.out[o]<"u"))throw new se(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Ql(i,r,a,u,l);t._edges.set(r,d);const h=s===o;return i?(a.undirectedDegree++,u.undirectedDegree++,h&&(a.undirectedLoops++,t._undirectedSelfLoopCount++)):(a.outDegree++,u.inDegree++,h&&(a.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function Z8(t,e,n,i,r,s,o,l,a){if(!i&&t.type==="undirected")throw new se(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new se(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(l){if(a){if(typeof l!="function")throw new q(`Graph.${e}: invalid updater function. Expecting a function but got "${l}"`)}else if(!kt(l))throw new q(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`)}s=""+s,o=""+o;let u;if(a&&(u=l,l=void 0),!t.allowSelfLoops&&s===o)throw new se(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new se(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(a?!u:!l)return y;if(a){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else at(f.attributes,l),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:l});return y}l=l||{},a&&u&&(l=u(l));const p={key:null,undirected:i,source:s,target:o,attributes:l};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new se(`Graph.${e}: the "${r}" edge already exists in the graph.`);let g=!1,v=!1;c||(c=RS(t,s,{}),g=!0,s===o&&(d=c,v=!0)),d||(d=RS(t,o,{}),v=!0),h=new Ql(i,r,c,d,l),t._edges.set(r,h);const m=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,m&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,m&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,g,v]}function Bo(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Oe extends FI.EventEmitter{constructor(e){if(super(),e=at({},q8,e),typeof e.multi!="boolean")throw new q(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Y8.has(e.type))throw new q(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new q(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?wP:e.type==="directed"?bP:SP;Nn(this,"NodeDataClass",n);const i="geid_"+J8()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Nn(this,"_attributes",{}),Nn(this,"_nodes",new Map),Nn(this,"_edges",new Map),Nn(this,"_directedSize",0),Nn(this,"_undirectedSize",0),Nn(this,"_directedSelfLoopCount",0),Nn(this,"_undirectedSelfLoopCount",0),Nn(this,"_edgeKeyGenerator",s),Nn(this,"_options",e),PS.forEach(o=>Nn(this,o,this[o])),ei(this,"order",()=>this._nodes.size),ei(this,"size",()=>this._edges.size),ei(this,"directedSize",()=>this._directedSize),ei(this,"undirectedSize",()=>this._undirectedSize),ei(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ei(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ei(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ei(this,"multi",this._options.multi),ei(this,"type",this._options.type),ei(this,"allowSelfLoops",this._options.allowSelfLoops),ei(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new q(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new q(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new q(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new se("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new X(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new se("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new X(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new se("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new X(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new X(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new X(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Q8(this,e,n).key}mergeNode(e,n){if(n&&!kt(n))throw new q(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(at(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new q(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do Bo(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do Bo(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do Bo(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Jn(this,i,r,this.type),!n)throw new X(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new X(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Bo(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new se("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new se("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Jn(this,e,n,"directed");if(!i)throw new X(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Bo(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new se("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new se("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Jn(this,e,n,"undirected");if(!i)throw new X(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Bo(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new q("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!kt(e))throw new q("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!kt(e))throw new q("Graph.mergeAttributes: provided attributes are not a plain object.");return at(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new q("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new q("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!AS(n))throw new q("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new q("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!AS(n))throw new q("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,l;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,l=s.target,s.attributes=e(s.key,s.attributes,o.key,l.key,o.attributes,l.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new q("Graph.forEachAdjacencyEntry: expecting a callback.");ed(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new q("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");ed(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new q("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");ed(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new q("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");ed(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):yP(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new q("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new q("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new q("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new q("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new q("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new q("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new q("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new q("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new qn(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=H8(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=W8(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Oe)return e.forEachNode((a,u)=>{n?this.mergeNode(a,u):this.addNode(a,u)}),e.forEachEdge((a,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(a,c,d,u):this.mergeDirectedEdgeWithKey(a,c,d,u):p?this.addUndirectedEdgeWithKey(a,c,d,u):this.addDirectedEdgeWithKey(a,c,d,u)}),this;if(!kt(e))throw new q("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!kt(e.attributes))throw new q("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,l;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new q("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],G8(o);const{key:a,attributes:u}=o;n?this.mergeNode(a,u):this.addNode(a,u)}}if(e.edges){let a=!1;if(this.type==="undirected"&&(a=!0),s=e.edges,!Array.isArray(s))throw new q("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){l=s[i],X8(l);const{source:u,target:c,attributes:d,undirected:h=a}=l;let f;"key"in l?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,l.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new Oe(at({},this._options,e));return n.replaceAttributes(at({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=at({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new se(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new se("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new se("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,AP(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,at({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const l=s.undirected?"--":"->";let a="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${l}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,a+=`${i[h]}. `):a+=`[${o}]: `,a+=h,n[a]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!PS.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,Nn(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Oe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Oe.prototype.inspect);K8.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?AP:Z8;t.generateKey?Oe.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Oe.prototype[n]=function(r,s,o,l){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,l,e==="update")}})});a8(Oe);w8(Oe);B8(Oe);V8(Oe);class PP extends Oe{constructor(e){const n=at({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new q("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new q('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Wf extends Oe{constructor(e){const n=at({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new q("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new q('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class RP extends Oe{constructor(e){const n=at({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new q("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class MP extends Oe{constructor(e){const n=at({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new q("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new q('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class OP extends Oe{constructor(e){const n=at({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new q("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new q('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Zl(t){t.from=function(e,n){const i=at({},e.options,n),r=new t(i);return r.import(e),r}}Zl(Oe);Zl(PP);Zl(Wf);Zl(RP);Zl(MP);Zl(OP);Oe.Graph=Oe;Oe.DirectedGraph=PP;Oe.UndirectedGraph=Wf;Oe.MultiGraph=RP;Oe.MultiDirectedGraph=MP;Oe.MultiUndirectedGraph=OP;Oe.InvalidArgumentsGraphError=q;Oe.NotFoundGraphError=X;Oe.UsageGraphError=se;var e_=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},TP=Vf,t_=TP.ARRAY_BUFFER_SUPPORT,n_=TP.SYMBOL_SUPPORT,i_=function(e,n){var i,r,s,o,l;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||t_&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(n_&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;l=i.next(),l.done!==!0;)n(l.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},DP=Uf,r_=i_;function st(){this.clear()}st.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};st.prototype.enqueue=function(t){return this.items.push(t),++this.size};st.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};st.prototype.peek=function(){if(this.size)return this.items[this.offset]};st.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};st.prototype.toArray=function(){return this.items.slice(this.offset)};st.prototype.values=function(){var t=this.items,e=this.offset;return new DP(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};st.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new DP(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(st.prototype[Symbol.iterator]=st.prototype.values);st.prototype.toString=function(){return this.toArray().join(",")};st.prototype.toJSON=function(){return this.toArray()};st.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:st,enumerable:!1}),t};typeof Symbol<"u"&&(st.prototype[Symbol.for("nodejs.util.inspect.custom")]=st.prototype.inspect);st.from=function(t){var e=new st;return r_(t,function(n){e.enqueue(n)}),e};st.of=function(){return st.from(arguments)};var s_=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},NP=e_,o_=s_;function l_(t,e,n){if(!NP(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var l=[e],a=[n],u,c,d,h,f,p,g,v,m=!1;e:for(;l.length&&a.length;)if(l.length<=a.length){for(u=l,l=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=r(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in s||(l.push(h),s[h]=c),h in o){m=!0;break e}}else for(u=a,a=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=i(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in o||(a.push(h),o[h]=c),h in s){m=!0;break e}if(!m)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function LP(t,e,n){if(!NP(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],l,a,u;o.length!==0;){var c=[];for(l=0,a=o.length;l<a;l++)u=o[l],!i.has(u)&&(i.add(u),o_(c,e[t](u)),r[u]=s);s++,o=c}return r}LP.bind(null,"outboundNeighbors");LP.bind(null,"neighbors");var BP=l_;const Lv=he(""),Z=new Wf({allowSelfLoops:!1});Z.addNode("MBR",{position:[610,250]});Z.addNode("AX",{position:[522,45]});Z.addNode("BX",{position:[522,85]});Z.addNode("CX",{position:[522,125]});Z.addNode("DX",{position:[522,165]});Z.addNode("id",{position:[522,205]});Z.addNode("IP",{position:[451,309]});Z.addNode("SP",{position:[451,349]});Z.addNode("ri",{position:[451,388]});Z.addNode("result",{position:[370,130]});Z.addNode("FLAGS",{position:[250,225]});Z.addNode("IR",{position:[205,272]});Z.addNode("left",{position:[60,85]});Z.addNode("right",{position:[60,145]});Z.addNode("AX join",{position:[492,45]});Z.addNode("BX join",{position:[492,85]});Z.addNode("CX join",{position:[492,125]});Z.addNode("DX join",{position:[492,165]});Z.addNode("id join",{position:[492,205]});Z.addNode("data mbr join",{position:[492,250]});Z.addNode("IP join",{position:[421,309]});Z.addNode("SP join",{position:[421,349]});Z.addNode("ri join",{position:[421,388]});Z.addNode("addresses mbr join",{position:[421,250]});Z.addNode("result mbr join",{position:[370,250]});Z.addNode("FLAGS mbr join",{position:[250,250]});Z.addNode("IR mbr join",{position:[205,250]});Z.addNode("left join",{position:[30,85]});Z.addNode("right join",{position:[30,145]});Z.addNode("operands mbr join",{position:[30,250]});Z.addUndirectedEdge("AX","AX join");Z.addUndirectedEdge("BX","BX join");Z.addUndirectedEdge("CX","CX join");Z.addUndirectedEdge("DX","DX join");Z.addUndirectedEdge("id","id join");Z.addUndirectedEdge("AX join","BX join");Z.addUndirectedEdge("BX join","CX join");Z.addUndirectedEdge("CX join","DX join");Z.addUndirectedEdge("DX join","id join");Z.addUndirectedEdge("id join","data mbr join");Z.addUndirectedEdge("data mbr join","MBR");Z.addUndirectedEdge("IP","IP join");Z.addUndirectedEdge("SP","SP join");Z.addUndirectedEdge("ri","ri join");Z.addUndirectedEdge("IP join","SP join");Z.addUndirectedEdge("SP join","ri join");Z.addUndirectedEdge("IP join","addresses mbr join");Z.addUndirectedEdge("addresses mbr join","data mbr join");Z.addUndirectedEdge("result","result mbr join");Z.addUndirectedEdge("result mbr join","addresses mbr join");Z.addUndirectedEdge("FLAGS","FLAGS mbr join");Z.addUndirectedEdge("FLAGS mbr join","result mbr join");Z.addUndirectedEdge("IR","IR mbr join");Z.addUndirectedEdge("IR mbr join","FLAGS mbr join");Z.addUndirectedEdge("left","left join");Z.addUndirectedEdge("right","right join");Z.addUndirectedEdge("left join","right join");Z.addUndirectedEdge("right join","operands mbr join");Z.addUndirectedEdge("operands mbr join","IR mbr join");function bm(t,e){const n=BP(Z,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const i=Z.getNodeAttribute(n[0],"position");let r=`M ${i[0]} ${i[1]}`;for(let s=1;s<n.length;s++){const[o,l]=Z.getNodeAttribute(n[s],"position");r+=` L ${o} ${l}`}H.set(Lv,r)}const Bt=new Wf({allowSelfLoops:!1});Bt.addNode("MAR",{position:[598,349]});Bt.addNode("IP",{position:[551,309]});Bt.addNode("SP",{position:[551,349]});Bt.addNode("ri",{position:[544,388]});Bt.addNode("IP join",{position:[575,309]});Bt.addNode("SP join",{position:[575,349]});Bt.addNode("ri join",{position:[575,388]});Bt.addUndirectedEdge("IP","IP join");Bt.addUndirectedEdge("SP","SP join");Bt.addUndirectedEdge("ri","ri join");Bt.addUndirectedEdge("IP join","SP join");Bt.addUndirectedEdge("ri join","SP join");Bt.addUndirectedEdge("SP join","MAR");function a_(t){const e=BP(Bt,t,"MAR");if(!e)throw new Error(`Invalid register ${t}`);const n=Bt.getNodeAttribute(e[0],"position");let i=`M ${n[0]} ${n[1]}`;for(let r=1;r<e.length;r++){const[s,o]=Bt.getNodeAttribute(e[r],"position");i+=` L ${s} ${o}`}H.set(Lv,i)}async function u_(t,e){switch(t.type){case"cpu:alu.execute":{H.set(kI,t.operation),H.set(Ie.FLAGS,t.flags),H.set(Ie.result,t.result);return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{H.set(_o,n=>n.phase==="stopped"?n:{...n,phase:"interrupt"});return}case"cpu:cycle.start":{Mf(t.instruction.position.start),H.set(_o,{phase:"fetching",metadata:t.instruction});return}case"cpu:cycle.update":{H.set(_o,n=>n.phase==="stopped"?n:{...n,phase:t.phase==="decoded"?"decoding":t.phase==="execute"?"executing":"writeback"});return}case"cpu:decode":return;case"cpu:error":{H.set(_o,{phase:"stopped",error:t.error}),Fu(t.error);return}case"cpu:halt":case"cpu:int.0":{H.set(_o,{phase:"stopped"}),Fu();return}case"cpu:int.3":{IP();return}case"cpu:int.6":return;case"cpu:int.7":return;case"cpu:inta.off":return;case"cpu:inta.on":return;case"cpu:mar.set":{a_(t.register),await Promise.all(e.cpu.highlightPath.start()),await Promise.all(e.cpu.MAR.start()),H.set(WA,H.get(Ie[t.register])),await Promise.all(e.cpu.MAR.start({reverse:!0})),await Promise.all(e.cpu.highlightPath.start({reverse:!0,config:{duration:0}}));return}case"cpu:mbr.get":{const[n]=Gs(t.register);bm("MBR",n),await Promise.all(e.cpu.highlightPath.start()),await Promise.all(e.cpu[n].start()),H.set(Ie[t.register],H.get(Nr)),await Promise.all(e.cpu[n].start({reverse:!0})),await Promise.all(e.cpu.highlightPath.start({reverse:!0,config:{duration:0}}));return}case"cpu:mbr.set":{const[n]=Gs(t.register);bm(n,"MBR"),await Promise.all(e.cpu.highlightPath.start()),await Promise.all(e.cpu.MBR.start()),H.set(Nr,H.get(Ie[t.register])),await Promise.all(e.cpu.MBR.start({reverse:!0})),await Promise.all(e.cpu.highlightPath.start({reverse:!0,config:{duration:0}}));return}case"cpu:register.copy":{const[n]=Gs(t.src),[i]=Gs(t.dest);n!==i&&(bm(n,i),await Promise.all(e.cpu.highlightPath.start())),await Promise.all(e.cpu[i].start()),H.set(Ie[t.dest],H.get(Ie[t.src])),await Promise.all(e.cpu[i].start({reverse:!0})),n!==i&&await Promise.all(e.cpu.highlightPath.start({reverse:!0,config:{duration:0}}));return}case"cpu:register.update":{const[n]=Gs(t.register);await Promise.all(e.cpu[n].start()),H.set(Ie[t.register],t.value),await Promise.all(e.cpu[n].start({reverse:!0}));return}default:return t}}function c_(t){switch(t.type){case"cs:selected":return;case"cs:error":{Fu(t.error);return}default:return t}}function d_(t){switch(t.type){case"clock:tick":return;default:return t}}const h_=he("");function f_(t){switch(t.type){case"console:read":{H.set(Ms,e=>e.type==="running"||e.type==="paused"?{type:"waiting-for-input",previousState:e.type}:e);return}case"console:write":{H.set(h_,nt.getComputerState().io.console);return}default:return t}}function p_(t){switch(t.type){case"f10:press":return;default:return t}}const m_={clock:"#65a30d",console:"#65a30d",cpu:"#dc2626",cs:"#2563eb",f10:"#65a30d",handshake:"#2563eb",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",switches:"#65a30d",timer:"#2563eb"};async function fr(t,e){const[n,i]=t.type.split(":");console.group(`%c ${n} %c ${i}`,`background: ${m_[n]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const r in t)if(r!=="type"&&Object.prototype.hasOwnProperty.call(t,r)){const s=t[r];s instanceof O?console.log(`${r}: %c${s.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):s instanceof oe?console.log(`${r}: %c${s.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):s instanceof fn?console.log(`${r}: %c${s.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof s=="number"?console.log(`${r}: %c${s} %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof s=="string"?console.log(`${r}: %c"${s}" %c(string)`,"color: #f97316;","color: #737373;"):typeof s=="boolean"?console.log(`${r}: %c${s}`,"color: #06b6d4;"):s===null?console.log(`${r}: %cnull`,"color: #b91c1c;"):console.log(`${r}:`,s)}if(console.groupEnd(),n==="clock")return d_(t);if(n==="console")return f_(t);if(n==="cpu")return await u_(t,e);if(n==="cs")return c_(t);if(n==="f10")return p_(t);if(n==="handshake")return CI(t);if(n==="leds")return AI(t);if(n==="memory")return PI(t);if(n==="pic")return RI(t);if(n==="pio")return MI(t);if(n==="printer")return OI(t);if(n==="switches")return TI(t);if(n==="timer")return DI(t);throw new Error(`Unknown event type: ${t.type}`)}function g_(t){const e=t.translate(Of());Vy.error(e)}const nt=new l3,Ms=he({type:"stopped",reason:"halt"}),uo=()=>H.get(Ms);function Fu(t){t&&g_(t),Mf(null),cv(!1),H.set(Ms,{type:"stopped",reason:t?"error":"halt"})}function IP(){H.set(Ms,{type:"paused"})}function tu(){Vy.error(dv(Of(),"messages.assemble-error"))}function _P(t){EI(t),H.set(YA,t.memory.map(e=>O.fromUnsigned(e,8))),H.set(KA,O.fromUnsigned(t.io.pic.IMR,8)),H.set(qA,O.fromUnsigned(t.io.pic.IRR,8)),H.set(QA,O.fromUnsigned(t.io.pic.ISR,8)),H.set(ZA,t.io.pic.lines.map(e=>O.fromUnsigned(e,8))),H.set(sP,O.fromUnsigned(t.io.timer.CONT,8)),H.set(oP,O.fromUnsigned(t.io.timer.COMP,8)),"handshake"in t.io&&(H.set(GA,O.fromUnsigned(t.io.handshake.DATA,8)),H.set(XA,O.fromUnsigned(t.io.handshake.STATE,8))),"leds"in t.io&&H.set(JA,O.fromUnsigned(t.io.leds,8)),"pio"in t.io&&(H.set(eP,O.fromUnsigned(t.io.pio.PA,8)),H.set(tP,O.fromUnsigned(t.io.pio.PB,8)),H.set(nP,O.fromUnsigned(t.io.pio.CA,8)),H.set(iP,O.fromUnsigned(t.io.pio.CB,8))),"printer"in t.io&&(H.set(R0,t.io.printer.buffer.map(e=>O.fromUnsigned(e,8))),H.set(M0,t.io.printer.paper)),"switches"in t.io&&H.set(rP,O.fromUnsigned(t.io.switches,8))}async function $P(...t){const e=t[0],n=uo();switch(e){case"run":case"step":{if(n.type!=="stopped"&&n.type!=="paused"){tu();break}if(n.type==="stopped"){if(!window.codemirror)break;const i=window.codemirror.state.doc.toString(),r=qy(i);if(!r.success){tu();break}cv(!0),nt.loadProgram({program:r,data:aA(),devices:cA()}),FP(),_P(nt.getComputerState());const s=r.instructions.find(o=>o.start.value===8192);s&&Mf(s.position.start),e==="step"&&IP()}if(e==="step"){const i=Math.round(1e3/Mu().cpu);Sm(i)}else{H.set(Ms,{type:"running"});const i=8;Sm(i);const r=setInterval(()=>{if(uo().type!=="running"){clearInterval(r);return}Sm(i)},i)}break}case"stop":{n.type!=="stopped"?Fu():tu();break}case"f10.press":{const i=nt.devices.f10.press();let r=i.next();for(;!r.done;)fr(r.value),r=i.next();break}case"switch.toggle":{if(nt.devices.switches.connected())throw new Error("Invalid device call");const i=nt.devices.switches.toggle(t[1]);let r=i.next();for(;!r.done;)fr(r.value),r=i.next();break}case"console.handleKey":{const i=t[1];if(n.type!=="waiting-for-input")break;let r;if(i.inputType==="insertLineBreak")r=`
`;else if(i.inputType==="insertText"||i.inputType==="insertCompositionText"){if(!i.data)break;r=i.data}else break;const s=n.previousState;H.set(Ms,{type:"paused"}),fr(nt.advanceCPU(O.fromChar(r))),$P(s==="running"?"run":"step");break}case"console.clean":{const i=nt.devices.console.clear();let r=i.next();for(;!r.done;)fr(r.value),r=i.next();break}case"printer.clean":{if(nt.devices.printer.connected()){const i=nt.devices.printer.clear();let r=i.next();for(;!r.done;)fr(r.value),r=i.next()}break}}}let $a=0,Dh=0,Nh=0,Bv=0;function FP(){$a=0,Dh=1e3/Mu().cpu,Nh=1e3,Bv=1e3/Mu().printer}function MS(){return nt.devices.printer.connected()?[["cpu",Dh],["clock",Nh],["printer",Bv]]:[["cpu",Dh],["clock",Nh]]}function Sm(t){let e=MS().sort((n,i)=>n[1]-i[1])[0];for(;e[1]<=$a+t;){if(e[0]==="cpu"){let n=nt.advanceCPU();for(;n.type!=="cpu:cycle.end";){if(fr(n),uo().type!=="running"&&uo().type!=="paused")return;n=nt.advanceCPU()}Dh+=1e3/Mu().cpu}else if(e[0]==="clock"){const n=nt.devices.clock.tick();let i=n.next();for(;!i.done;)fr(i.value),i=n.next();Nh+=1e3}else if(e[0]==="printer"){const n=nt.devices.printer.print();let i=n.next();for(;!i.done;)fr(i.value),i=n.next();Bv+=1e3/Mu().printer}else return e[0];t-=e[1]-$a,$a=e[1],e=MS().sort((n,i)=>n[1]-i[1])[0]}$a+=t}function y_(){const t=zf();return async()=>{const e=uo();if(e.type!=="stopped"&&e.type!=="paused"){tu();return}if(e.type==="stopped"){if(!window.codemirror)return;const i=window.codemirror.state.doc.toString(),r=qy(i);if(!r.success){tu();return}cv(!0),nt.loadProgram({program:r,data:aA(),devices:cA()}),FP(),_P(nt.getComputerState());const s=r.instructions.find(o=>o.start.value===8192);s&&Mf(s.position.start)}H.set(Ms,{type:"running"});let n=nt.advanceCPU();for(;;){if(await fr(n,t),uo().type!=="running"&&uo().type!=="paused")return;n=nt.advanceCPU()}}}function Iv(){return[Kl(Ms),$P]}const v_=()=>Kl(hv);function Gf(){const t=v_();return(e,...n)=>dv(t,e,...n)}function OS(){const t=Gf(),e=y_(),[n,i]=Iv(),r=x.useCallback(s=>{s.key==="F5"?(s.preventDefault(),s.shiftKey?i("stop"):i("run")):s.key==="F11"&&(s.preventDefault(),i("step"))},[i]);return SE("keydown",r,void 0,[i]),D.jsxs("div",{className:"flex h-12 items-center justify-center gap-4 lg:h-full lg:justify-start",children:[n.type==="stopped"?D.jsxs(D.Fragment,{children:[D.jsx(xa,{onClick:()=>i("run"),title:"F5",icon:"icon-[carbon--play]",children:t("runner.action.start")}),D.jsx(xa,{onClick:()=>i("step"),title:"F11",icon:"icon-[carbon--debug]",children:t("runner.action.debug")})]}):D.jsxs(D.Fragment,{children:[D.jsx(xa,{onClick:()=>i("run"),title:"F5",icon:"icon-[carbon--skip-forward]",disabled:n.type!=="paused",children:t("runner.action.run-until-halt")}),D.jsx(xa,{onClick:()=>i("step"),title:"F11",icon:"icon-[carbon--play]",disabled:n.type!=="paused",children:t("runner.action.step")}),D.jsx(xa,{onClick:()=>i("stop"),title:"Shift+F5",icon:"icon-[carbon--stop-sign]",children:t("runner.action.stop")})]}),D.jsx("button",{onClick:e,children:"test"})]})}function xa({icon:t,children:e,...n}){return D.jsxs("button",{...n,className:`
        flex h-full items-center justify-center border-b border-lime-500 p-2 transition hover:bg-slate-500/30
        disabled:border-slate-500 disabled:text-slate-500 disabled:hover:bg-transparent
      `,children:[D.jsx("span",{className:lo("mr-1 block h-5 w-5",t)})," ",e]})}var w_=Object.defineProperty,b_=(t,e,n)=>e in t?w_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xm=(t,e,n)=>(b_(t,typeof e!="symbol"?e+"":e,n),n);let S_=class{constructor(){xm(this,"current",this.detect()),xm(this,"handoffState","pending"),xm(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},xr=new S_,Wi=(t,e)=>{xr.isServer?x.useEffect(t,e):x.useLayoutEffect(t,e)};function pi(t){let e=x.useRef(t);return Wi(()=>{e.current=t},[t]),e}function zP(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function uc(){let t=[],e={addEventListener(n,i,r,s){return n.addEventListener(i,r,s),e.add(()=>n.removeEventListener(i,r,s))},requestAnimationFrame(...n){let i=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(i))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let i=setTimeout(...n);return e.add(()=>clearTimeout(i))},microTask(...n){let i={current:!0};return zP(()=>{i.current&&n[0]()}),e.add(()=>{i.current=!1})},style(n,i,r){let s=n.style.getPropertyValue(i);return Object.assign(n.style,{[i]:r}),this.add(()=>{Object.assign(n.style,{[i]:s})})},group(n){let i=uc();return n(i),this.add(()=>i.dispose())},add(n){return t.push(n),()=>{let i=t.indexOf(n);if(i>=0)for(let r of t.splice(i,1))r()}},dispose(){for(let n of t.splice(0))n()}};return e}function jP(){let[t]=x.useState(uc);return x.useEffect(()=>()=>t.dispose(),[t]),t}let Ce=function(t){let e=pi(t);return z.useCallback((...n)=>e.current(...n),[e])};function Xf(){let[t,e]=x.useState(xr.isHandoffComplete);return t&&xr.isHandoffComplete===!1&&e(!1),x.useEffect(()=>{t!==!0&&e(!0)},[t]),x.useEffect(()=>xr.handoff(),[]),t}var TS;let ml=(TS=z.useId)!=null?TS:function(){let t=Xf(),[e,n]=z.useState(t?()=>xr.nextId():null);return Wi(()=>{e===null&&n(xr.nextId())},[e]),e!=null?""+e:void 0};function mt(t,e,...n){if(t in e){let r=e[t];return typeof r=="function"?r(...n):r}let i=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,mt),i}function _v(t){return xr.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let O0=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var gr=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(gr||{}),Lh=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(Lh||{}),x_=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(x_||{});function Jf(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(O0)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var $v=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))($v||{});function UP(t,e=0){var n;return t===((n=_v(t))==null?void 0:n.body)?!1:mt(e,{0(){return t.matches(O0)},1(){let i=t;for(;i!==null;){if(i.matches(O0))return!0;i=i.parentElement}return!1}})}var k_=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(k_||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let E_=["textarea","input"].join(",");function C_(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,E_))!=null?n:!1}function A_(t,e=n=>n){return t.slice().sort((n,i)=>{let r=e(n),s=e(i);if(r===null||s===null)return 0;let o=r.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function no(t,e,{sorted:n=!0,relativeTo:i=null,skipElements:r=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?A_(t):t:Jf(t);r.length>0&&o.length>1&&(o=o.filter(f=>!r.includes(f))),i=i??s.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(i))-1;if(e&4)return Math.max(0,o.indexOf(i))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},c=0,d=o.length,h;do{if(c>=d||c+d<=0)return 0;let f=a+c;if(e&16)f=(f+d)%d;else{if(f<0)return 3;if(f>=d)return 1}h=o[f],h==null||h.focus(u),c+=l}while(h!==s.activeElement);return e&6&&C_(h)&&h.select(),2}function DS(t,e,n){let i=pi(e);x.useEffect(()=>{function r(s){i.current(s)}return document.addEventListener(t,r,n),()=>document.removeEventListener(t,r,n)},[t,n])}function VP(t,e,n){let i=pi(e);x.useEffect(()=>{function r(s){i.current(s)}return window.addEventListener(t,r,n),()=>window.removeEventListener(t,r,n)},[t,n])}function P_(t,e,n=!0){let i=x.useRef(!1);x.useEffect(()=>{requestAnimationFrame(()=>{i.current=n})},[n]);function r(o,l){if(!i.current||o.defaultPrevented)return;let a=l(o);if(a===null||!a.getRootNode().contains(a))return;let u=function c(d){return typeof d=="function"?c(d()):Array.isArray(d)||d instanceof Set?d:[d]}(t);for(let c of u){if(c===null)continue;let d=c instanceof HTMLElement?c:c.current;if(d!=null&&d.contains(a)||o.composed&&o.composedPath().includes(d))return}return!UP(a,$v.Loose)&&a.tabIndex!==-1&&o.preventDefault(),e(o,a)}let s=x.useRef(null);DS("mousedown",o=>{var l,a;i.current&&(s.current=((a=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:a[0])||o.target)},!0),DS("click",o=>{s.current&&(r(o,()=>s.current),s.current=null)},!0),VP("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function NS(t){var e;if(t.type)return t.type;let n=(e=t.as)!=null?e:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function R_(t,e){let[n,i]=x.useState(()=>NS(t));return Wi(()=>{i(NS(t))},[t.type,t.as]),Wi(()=>{n||e.current&&e.current instanceof HTMLButtonElement&&!e.current.hasAttribute("type")&&i("button")},[n,e]),n}let HP=Symbol();function WP(t,e=!0){return Object.assign(t,{[HP]:e})}function Gi(...t){let e=x.useRef(t);x.useEffect(()=>{e.current=t},[t]);let n=Ce(i=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(i):r.current=i)});return t.every(i=>i==null||(i==null?void 0:i[HP]))?void 0:n}function T0(...t){return t.filter(Boolean).join(" ")}var Fl=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Fl||{}),yr=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(yr||{});function Yi({ourProps:t,theirProps:e,slot:n,defaultTag:i,features:r,visible:s=!0,name:o}){let l=GP(e,t);if(s)return td(l,n,i,o);let a=r??0;if(a&2){let{static:u=!1,...c}=l;if(u)return td(c,n,i,o)}if(a&1){let{unmount:u=!0,...c}=l;return mt(u?0:1,{0(){return null},1(){return td({...c,hidden:!0,style:{display:"none"}},n,i,o)}})}return td(l,n,i,o)}function td(t,e={},n,i){let{as:r=n,children:s,refName:o="ref",...l}=km(t,["unmount","static"]),a=t.ref!==void 0?{[o]:t.ref}:{},u=typeof s=="function"?s(e):s;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e));let c={};if(e){let d=!1,h=[];for(let[f,p]of Object.entries(e))typeof p=="boolean"&&(d=!0),p===!0&&h.push(f);d&&(c["data-headlessui-state"]=h.join(" "))}if(r===x.Fragment&&Object.keys(LS(l)).length>0){if(!x.isValidElement(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`));let d=u.props,h=typeof(d==null?void 0:d.className)=="function"?(...p)=>T0(d==null?void 0:d.className(...p),l.className):T0(d==null?void 0:d.className,l.className),f=h?{className:h}:{};return x.cloneElement(u,Object.assign({},GP(u.props,LS(km(l,["ref"]))),c,a,M_(u.ref,a.ref),f))}return x.createElement(r,Object.assign({},km(l,["ref"]),r!==x.Fragment&&a,r!==x.Fragment&&c),u)}function M_(...t){return{ref:t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}}function GP(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let i of t)for(let r in i)r.startsWith("on")&&typeof i[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(i[r])):e[r]=i[r];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(i=>[i,void 0])));for(let i in n)Object.assign(e,{[i](r,...s){let o=n[i];for(let l of o){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;l(r,...s)}}});return e}function wi(t){var e;return Object.assign(x.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function LS(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function km(t,e=[]){let n=Object.assign({},t);for(let i of e)i in n&&delete n[i];return n}function XP(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let i=(e==null?void 0:e.getAttribute("disabled"))==="";return i&&O_(n)?!1:i}function O_(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let T_="div";var zu=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(zu||{});function D_(t,e){let{features:n=1,...i}=t,r={ref:e,"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return Yi({ourProps:r,theirProps:i,slot:{},defaultTag:T_,name:"Hidden"})}let Bh=wi(D_),Fv=x.createContext(null);Fv.displayName="OpenClosedContext";var Ht=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Ht||{});function Yf(){return x.useContext(Fv)}function JP({value:t,children:e}){return z.createElement(Fv.Provider,{value:t},e)}var Wr=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Wr||{}),vr=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(vr||{});function YP(){let t=x.useRef(0);return VP("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function zv(){let t=x.useRef(!1);return Wi(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function ea(...t){return x.useMemo(()=>_v(...t),[...t])}function N_(t,e,n,i){let r=pi(n);x.useEffect(()=>{t=t??window;function s(o){r.current(o)}return t.addEventListener(e,s,i),()=>t.removeEventListener(e,s,i)},[t,e,i])}function L_(t){let e=Ce(t),n=x.useRef(!1);x.useEffect(()=>(n.current=!1,()=>{n.current=!0,zP(()=>{n.current&&e()})}),[e])}let B_=x.createContext(!1);function I_(){return x.useContext(B_)}function __(t){let e=I_(),n=x.useContext(KP),i=ea(t),[r,s]=x.useState(()=>{if(!e&&n!==null||xr.isServer)return null;let o=i==null?void 0:i.getElementById("headlessui-portal-root");if(o)return o;if(i===null)return null;let l=i.createElement("div");return l.setAttribute("id","headlessui-portal-root"),i.body.appendChild(l)});return x.useEffect(()=>{r!==null&&(i!=null&&i.body.contains(r)||i==null||i.body.appendChild(r))},[r,i]),x.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),r}let $_=x.Fragment;function F_(t,e){let n=t,i=x.useRef(null),r=Gi(WP(c=>{i.current=c}),e),s=ea(i),o=__(i),[l]=x.useState(()=>{var c;return xr.isServer?null:(c=s==null?void 0:s.createElement("div"))!=null?c:null}),a=x.useContext(D0),u=Xf();return Wi(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),Wi(()=>{if(l&&a)return a.register(l)},[a,l]),L_(()=>{var c;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((c=o.parentElement)==null||c.removeChild(o)))}),u?!o||!l?null:Zu.createPortal(Yi({ourProps:{ref:r},theirProps:n,defaultTag:$_,name:"Portal"}),l):null}let z_=x.Fragment,KP=x.createContext(null);function j_(t,e){let{target:n,...i}=t,r={ref:Gi(e)};return z.createElement(KP.Provider,{value:n},Yi({ourProps:r,theirProps:i,defaultTag:z_,name:"Popover.Group"}))}let D0=x.createContext(null);function U_(){let t=x.useContext(D0),e=x.useRef([]),n=Ce(s=>(e.current.push(s),t&&t.register(s),()=>i(s))),i=Ce(s=>{let o=e.current.indexOf(s);o!==-1&&e.current.splice(o,1),t&&t.unregister(s)}),r=x.useMemo(()=>({register:n,unregister:i,portals:e}),[n,i,e]);return[e,x.useMemo(()=>function({children:s}){return z.createElement(D0.Provider,{value:r},s)},[r])]}let V_=wi(F_),H_=wi(j_),Ih=Object.assign(V_,{Group:H_});function W_({defaultContainers:t=[],portals:e}={}){let n=x.useRef(null),i=ea(n),r=Ce(()=>{var s;let o=[];for(let l of t)l!==null&&(l instanceof HTMLElement?o.push(l):"current"in l&&l.current instanceof HTMLElement&&o.push(l.current));if(e!=null&&e.current)for(let l of e.current)o.push(l);for(let l of(s=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(l.contains(n.current)||o.some(a=>l.contains(a))||o.push(l));return o});return{resolveContainers:r,contains:Ce(s=>r().some(o=>o.contains(s))),mainTreeNodeRef:n,MainTreeNode:x.useMemo(()=>function(){return z.createElement(Bh,{features:zu.Hidden,ref:n})},[n])}}var G_=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(G_||{}),X_=(t=>(t[t.TogglePopover=0]="TogglePopover",t[t.ClosePopover=1]="ClosePopover",t[t.SetButton=2]="SetButton",t[t.SetButtonId=3]="SetButtonId",t[t.SetPanel=4]="SetPanel",t[t.SetPanelId=5]="SetPanelId",t))(X_||{});let J_={0:t=>{let e={...t,popoverState:mt(t.popoverState,{0:1,1:0})};return e.popoverState===0&&(e.__demoMode=!1),e},1(t){return t.popoverState===1?t:{...t,popoverState:1}},2(t,e){return t.button===e.button?t:{...t,button:e.button}},3(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},4(t,e){return t.panel===e.panel?t:{...t,panel:e.panel}},5(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}}},jv=x.createContext(null);jv.displayName="PopoverContext";function Kf(t){let e=x.useContext(jv);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Kf),n}return e}let Uv=x.createContext(null);Uv.displayName="PopoverAPIContext";function Vv(t){let e=x.useContext(Uv);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Vv),n}return e}let Hv=x.createContext(null);Hv.displayName="PopoverGroupContext";function qP(){return x.useContext(Hv)}let qf=x.createContext(null);qf.displayName="PopoverPanelContext";function Y_(){return x.useContext(qf)}function K_(t,e){return mt(e.type,J_,t,e)}let q_="div";function Q_(t,e){var n;let{__demoMode:i=!1,...r}=t,s=x.useRef(null),o=Gi(e,WP($=>{s.current=$})),l=x.useRef([]),a=x.useReducer(K_,{__demoMode:i,popoverState:i?0:1,buttons:l,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:x.createRef(),afterPanelSentinel:x.createRef()}),[{popoverState:u,button:c,buttonId:d,panel:h,panelId:f,beforePanelSentinel:p,afterPanelSentinel:g},v]=a,m=ea((n=s.current)!=null?n:c),y=x.useMemo(()=>{if(!c||!h)return!1;for(let le of document.querySelectorAll("body > *"))if(Number(le==null?void 0:le.contains(c))^Number(le==null?void 0:le.contains(h)))return!0;let $=Jf(),W=$.indexOf(c),B=(W+$.length-1)%$.length,I=(W+1)%$.length,V=$[B],te=$[I];return!h.contains(V)&&!h.contains(te)},[c,h]),w=pi(d),b=pi(f),k=x.useMemo(()=>({buttonId:w,panelId:b,close:()=>v({type:1})}),[w,b,v]),A=qP(),R=A==null?void 0:A.registerPopover,N=Ce(()=>{var $;return($=A==null?void 0:A.isFocusWithinPopoverGroup())!=null?$:(m==null?void 0:m.activeElement)&&((c==null?void 0:c.contains(m.activeElement))||(h==null?void 0:h.contains(m.activeElement)))});x.useEffect(()=>R==null?void 0:R(k),[R,k]);let[E,C]=U_(),P=W_({portals:E,defaultContainers:[c,h]});N_(m==null?void 0:m.defaultView,"focus",$=>{var W,B,I,V;$.target!==window&&$.target instanceof HTMLElement&&u===0&&(N()||c&&h&&(P.contains($.target)||(B=(W=p.current)==null?void 0:W.contains)!=null&&B.call(W,$.target)||(V=(I=g.current)==null?void 0:I.contains)!=null&&V.call(I,$.target)||v({type:1})))},!0),P_(P.resolveContainers,($,W)=>{v({type:1}),UP(W,$v.Loose)||($.preventDefault(),c==null||c.focus())},u===0);let M=Ce($=>{v({type:1});let W=(()=>$?$ instanceof HTMLElement?$:"current"in $&&$.current instanceof HTMLElement?$.current:c:c)();W==null||W.focus()}),T=x.useMemo(()=>({close:M,isPortalled:y}),[M,y]),L=x.useMemo(()=>({open:u===0,close:M}),[u,M]),F={ref:o};return z.createElement(qf.Provider,{value:null},z.createElement(jv.Provider,{value:a},z.createElement(Uv.Provider,{value:T},z.createElement(JP,{value:mt(u,{0:Ht.Open,1:Ht.Closed})},z.createElement(C,null,Yi({ourProps:F,theirProps:r,slot:L,defaultTag:q_,name:"Popover"}),z.createElement(P.MainTreeNode,null))))))}let Z_="button";function e$(t,e){let n=ml(),{id:i=`headlessui-popover-button-${n}`,...r}=t,[s,o]=Kf("Popover.Button"),{isPortalled:l}=Vv("Popover.Button"),a=x.useRef(null),u=`headlessui-focus-sentinel-${ml()}`,c=qP(),d=c==null?void 0:c.closeOthers,h=Y_()!==null;x.useEffect(()=>{if(!h)return o({type:3,buttonId:i}),()=>{o({type:3,buttonId:null})}},[h,i,o]);let[f]=x.useState(()=>Symbol()),p=Gi(a,e,h?null:P=>{if(P)s.buttons.current.push(f);else{let M=s.buttons.current.indexOf(f);M!==-1&&s.buttons.current.splice(M,1)}s.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),P&&o({type:2,button:P})}),g=Gi(a,e),v=ea(a),m=Ce(P=>{var M,T,L;if(h){if(s.popoverState===1)return;switch(P.key){case Wr.Space:case Wr.Enter:P.preventDefault(),(T=(M=P.target).click)==null||T.call(M),o({type:1}),(L=s.button)==null||L.focus();break}}else switch(P.key){case Wr.Space:case Wr.Enter:P.preventDefault(),P.stopPropagation(),s.popoverState===1&&(d==null||d(s.buttonId)),o({type:0});break;case Wr.Escape:if(s.popoverState!==0)return d==null?void 0:d(s.buttonId);if(!a.current||v!=null&&v.activeElement&&!a.current.contains(v.activeElement))return;P.preventDefault(),P.stopPropagation(),o({type:1});break}}),y=Ce(P=>{h||P.key===Wr.Space&&P.preventDefault()}),w=Ce(P=>{var M,T;XP(P.currentTarget)||t.disabled||(h?(o({type:1}),(M=s.button)==null||M.focus()):(P.preventDefault(),P.stopPropagation(),s.popoverState===1&&(d==null||d(s.buttonId)),o({type:0}),(T=s.button)==null||T.focus()))}),b=Ce(P=>{P.preventDefault(),P.stopPropagation()}),k=s.popoverState===0,A=x.useMemo(()=>({open:k}),[k]),R=R_(t,a),N=h?{ref:g,type:R,onKeyDown:m,onClick:w}:{ref:p,id:s.buttonId,type:R,"aria-expanded":t.disabled?void 0:s.popoverState===0,"aria-controls":s.panel?s.panelId:void 0,onKeyDown:m,onKeyUp:y,onClick:w,onMouseDown:b},E=YP(),C=Ce(()=>{let P=s.panel;if(!P)return;function M(){mt(E.current,{[vr.Forwards]:()=>no(P,gr.First),[vr.Backwards]:()=>no(P,gr.Last)})===Lh.Error&&no(Jf().filter(T=>T.dataset.headlessuiFocusGuard!=="true"),mt(E.current,{[vr.Forwards]:gr.Next,[vr.Backwards]:gr.Previous}),{relativeTo:s.button})}M()});return z.createElement(z.Fragment,null,Yi({ourProps:N,theirProps:r,slot:A,defaultTag:Z_,name:"Popover.Button"}),k&&!h&&l&&z.createElement(Bh,{id:u,features:zu.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:C}))}let t$="div",n$=Fl.RenderStrategy|Fl.Static;function i$(t,e){let n=ml(),{id:i=`headlessui-popover-overlay-${n}`,...r}=t,[{popoverState:s},o]=Kf("Popover.Overlay"),l=Gi(e),a=Yf(),u=(()=>a!==null?(a&Ht.Open)===Ht.Open:s===0)(),c=Ce(h=>{if(XP(h.currentTarget))return h.preventDefault();o({type:1})}),d=x.useMemo(()=>({open:s===0}),[s]);return Yi({ourProps:{ref:l,id:i,"aria-hidden":!0,onClick:c},theirProps:r,slot:d,defaultTag:t$,features:n$,visible:u,name:"Popover.Overlay"})}let r$="div",s$=Fl.RenderStrategy|Fl.Static;function o$(t,e){let n=ml(),{id:i=`headlessui-popover-panel-${n}`,focus:r=!1,...s}=t,[o,l]=Kf("Popover.Panel"),{close:a,isPortalled:u}=Vv("Popover.Panel"),c=`headlessui-focus-sentinel-before-${ml()}`,d=`headlessui-focus-sentinel-after-${ml()}`,h=x.useRef(null),f=Gi(h,e,R=>{l({type:4,panel:R})}),p=ea(h);Wi(()=>(l({type:5,panelId:i}),()=>{l({type:5,panelId:null})}),[i,l]);let g=Yf(),v=(()=>g!==null?(g&Ht.Open)===Ht.Open:o.popoverState===0)(),m=Ce(R=>{var N;switch(R.key){case Wr.Escape:if(o.popoverState!==0||!h.current||p!=null&&p.activeElement&&!h.current.contains(p.activeElement))return;R.preventDefault(),R.stopPropagation(),l({type:1}),(N=o.button)==null||N.focus();break}});x.useEffect(()=>{var R;t.static||o.popoverState===1&&((R=t.unmount)==null||R)&&l({type:4,panel:null})},[o.popoverState,t.unmount,t.static,l]),x.useEffect(()=>{if(o.__demoMode||!r||o.popoverState!==0||!h.current)return;let R=p==null?void 0:p.activeElement;h.current.contains(R)||no(h.current,gr.First)},[o.__demoMode,r,h,o.popoverState]);let y=x.useMemo(()=>({open:o.popoverState===0,close:a}),[o,a]),w={ref:f,id:i,onKeyDown:m,onBlur:r&&o.popoverState===0?R=>{var N,E,C,P,M;let T=R.relatedTarget;T&&h.current&&((N=h.current)!=null&&N.contains(T)||(l({type:1}),((C=(E=o.beforePanelSentinel.current)==null?void 0:E.contains)!=null&&C.call(E,T)||(M=(P=o.afterPanelSentinel.current)==null?void 0:P.contains)!=null&&M.call(P,T))&&T.focus({preventScroll:!0})))}:void 0,tabIndex:-1},b=YP(),k=Ce(()=>{let R=h.current;if(!R)return;function N(){mt(b.current,{[vr.Forwards]:()=>{var E;no(R,gr.First)===Lh.Error&&((E=o.afterPanelSentinel.current)==null||E.focus())},[vr.Backwards]:()=>{var E;(E=o.button)==null||E.focus({preventScroll:!0})}})}N()}),A=Ce(()=>{let R=h.current;if(!R)return;function N(){mt(b.current,{[vr.Forwards]:()=>{var E;if(!o.button)return;let C=Jf(),P=C.indexOf(o.button),M=C.slice(0,P+1),T=[...C.slice(P+1),...M];for(let L of T.slice())if(L.dataset.headlessuiFocusGuard==="true"||(E=o.panel)!=null&&E.contains(L)){let F=T.indexOf(L);F!==-1&&T.splice(F,1)}no(T,gr.First,{sorted:!1})},[vr.Backwards]:()=>{var E;no(R,gr.Previous)===Lh.Error&&((E=o.button)==null||E.focus())}})}N()});return z.createElement(qf.Provider,{value:i},v&&u&&z.createElement(Bh,{id:c,ref:o.beforePanelSentinel,features:zu.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:k}),Yi({ourProps:w,theirProps:s,slot:y,defaultTag:r$,features:s$,visible:v,name:"Popover.Panel"}),v&&u&&z.createElement(Bh,{id:d,ref:o.afterPanelSentinel,features:zu.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:A}))}let l$="div";function a$(t,e){let n=x.useRef(null),i=Gi(n,e),[r,s]=x.useState([]),o=Ce(p=>{s(g=>{let v=g.indexOf(p);if(v!==-1){let m=g.slice();return m.splice(v,1),m}return g})}),l=Ce(p=>(s(g=>[...g,p]),()=>o(p))),a=Ce(()=>{var p;let g=_v(n);if(!g)return!1;let v=g.activeElement;return(p=n.current)!=null&&p.contains(v)?!0:r.some(m=>{var y,w;return((y=g.getElementById(m.buttonId.current))==null?void 0:y.contains(v))||((w=g.getElementById(m.panelId.current))==null?void 0:w.contains(v))})}),u=Ce(p=>{for(let g of r)g.buttonId.current!==p&&g.close()}),c=x.useMemo(()=>({registerPopover:l,unregisterPopover:o,isFocusWithinPopoverGroup:a,closeOthers:u}),[l,o,a,u]),d=x.useMemo(()=>({}),[]),h=t,f={ref:i};return z.createElement(Hv.Provider,{value:c},Yi({ourProps:f,theirProps:h,slot:d,defaultTag:l$,name:"Popover.Group"}))}let u$=wi(Q_),c$=wi(e$),d$=wi(i$),h$=wi(o$),f$=wi(a$),Wv=Object.assign(u$,{Button:c$,Overlay:d$,Panel:h$,Group:f$});function p$(t=0){let[e,n]=x.useState(t),i=zv(),r=x.useCallback(a=>{i.current&&n(u=>u|a)},[e,i]),s=x.useCallback(a=>!!(e&a),[e]),o=x.useCallback(a=>{i.current&&n(u=>u&~a)},[n,i]),l=x.useCallback(a=>{i.current&&n(u=>u^a)},[n]);return{flags:e,addFlag:r,hasFlag:s,removeFlag:o,toggleFlag:l}}function m$(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function Em(t,...e){t&&e.length>0&&t.classList.add(...e)}function Cm(t,...e){t&&e.length>0&&t.classList.remove(...e)}function g$(t,e){let n=uc();if(!t)return n.dispose;let{transitionDuration:i,transitionDelay:r}=getComputedStyle(t),[s,o]=[i,r].map(a=>{let[u=0]=a.split(",").filter(Boolean).map(c=>c.includes("ms")?parseFloat(c):parseFloat(c)*1e3).sort((c,d)=>d-c);return u}),l=s+o;if(l!==0){n.group(u=>{u.setTimeout(()=>{e(),u.dispose()},l),u.addEventListener(t,"transitionrun",c=>{c.target===c.currentTarget&&u.dispose()})});let a=n.addEventListener(t,"transitionend",u=>{u.target===u.currentTarget&&(e(),a())})}else e();return n.add(()=>e()),n.dispose}function y$(t,e,n,i){let r=n?"enter":"leave",s=uc(),o=i!==void 0?m$(i):()=>{};r==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let l=mt(r,{enter:()=>e.enter,leave:()=>e.leave}),a=mt(r,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),u=mt(r,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return Cm(t,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),Em(t,...l,...u),s.nextFrame(()=>{Cm(t,...u),Em(t,...a),g$(t,()=>(Cm(t,...l),Em(t,...e.entered),o()))}),s.dispose}function v$({container:t,direction:e,classes:n,onStart:i,onStop:r}){let s=zv(),o=jP(),l=pi(e);Wi(()=>{let a=uc();o.add(a.dispose);let u=t.current;if(u&&l.current!=="idle"&&s.current)return a.dispose(),i.current(l.current),a.add(y$(u,n.current,l.current==="enter",()=>{a.dispose(),r.current(l.current)})),a.dispose},[e])}function js(t=""){return t.split(" ").filter(e=>e.trim().length>1)}let Qf=x.createContext(null);Qf.displayName="TransitionContext";var w$=(t=>(t.Visible="visible",t.Hidden="hidden",t))(w$||{});function b$(){let t=x.useContext(Qf);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function S$(){let t=x.useContext(Zf);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Zf=x.createContext(null);Zf.displayName="NestingContext";function ep(t){return"children"in t?ep(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function QP(t,e){let n=pi(t),i=x.useRef([]),r=zv(),s=jP(),o=Ce((f,p=yr.Hidden)=>{let g=i.current.findIndex(({el:v})=>v===f);g!==-1&&(mt(p,{[yr.Unmount](){i.current.splice(g,1)},[yr.Hidden](){i.current[g].state="hidden"}}),s.microTask(()=>{var v;!ep(i)&&r.current&&((v=n.current)==null||v.call(n))}))}),l=Ce(f=>{let p=i.current.find(({el:g})=>g===f);return p?p.state!=="visible"&&(p.state="visible"):i.current.push({el:f,state:"visible"}),()=>o(f,yr.Unmount)}),a=x.useRef([]),u=x.useRef(Promise.resolve()),c=x.useRef({enter:[],leave:[],idle:[]}),d=Ce((f,p,g)=>{a.current.splice(0),e&&(e.chains.current[p]=e.chains.current[p].filter(([v])=>v!==f)),e==null||e.chains.current[p].push([f,new Promise(v=>{a.current.push(v)})]),e==null||e.chains.current[p].push([f,new Promise(v=>{Promise.all(c.current[p].map(([m,y])=>y)).then(()=>v())})]),p==="enter"?u.current=u.current.then(()=>e==null?void 0:e.wait.current).then(()=>g(p)):g(p)}),h=Ce((f,p,g)=>{Promise.all(c.current[p].splice(0).map(([v,m])=>m)).then(()=>{var v;(v=a.current.shift())==null||v()}).then(()=>g(p))});return x.useMemo(()=>({children:i,register:l,unregister:o,onStart:d,onStop:h,wait:u,chains:c}),[l,o,i,d,h,c,u])}function x$(){}let k$=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function BS(t){var e;let n={};for(let i of k$)n[i]=(e=t[i])!=null?e:x$;return n}function E$(t){let e=x.useRef(BS(t));return x.useEffect(()=>{e.current=BS(t)},[t]),e}let C$="div",ZP=Fl.RenderStrategy;function A$(t,e){let{beforeEnter:n,afterEnter:i,beforeLeave:r,afterLeave:s,enter:o,enterFrom:l,enterTo:a,entered:u,leave:c,leaveFrom:d,leaveTo:h,...f}=t,p=x.useRef(null),g=Gi(p,e),v=f.unmount?yr.Unmount:yr.Hidden,{show:m,appear:y,initial:w}=b$(),[b,k]=x.useState(m?"visible":"hidden"),A=S$(),{register:R,unregister:N}=A,E=x.useRef(null);x.useEffect(()=>R(p),[R,p]),x.useEffect(()=>{if(v===yr.Hidden&&p.current){if(m&&b!=="visible"){k("visible");return}return mt(b,{hidden:()=>N(p),visible:()=>R(p)})}},[b,p,R,N,m,v]);let C=pi({enter:js(o),enterFrom:js(l),enterTo:js(a),entered:js(u),leave:js(c),leaveFrom:js(d),leaveTo:js(h)}),P=E$({beforeEnter:n,afterEnter:i,beforeLeave:r,afterLeave:s}),M=Xf();x.useEffect(()=>{if(M&&b==="visible"&&p.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[p,b,M]);let T=w&&!y,L=(()=>!M||T||E.current===m?"idle":m?"enter":"leave")(),F=p$(0),$=Ce(te=>mt(te,{enter:()=>{F.addFlag(Ht.Opening),P.current.beforeEnter()},leave:()=>{F.addFlag(Ht.Closing),P.current.beforeLeave()},idle:()=>{}})),W=Ce(te=>mt(te,{enter:()=>{F.removeFlag(Ht.Opening),P.current.afterEnter()},leave:()=>{F.removeFlag(Ht.Closing),P.current.afterLeave()},idle:()=>{}})),B=QP(()=>{k("hidden"),N(p)},A);v$({container:p,classes:C,direction:L,onStart:pi(te=>{B.onStart(p,te,$)}),onStop:pi(te=>{B.onStop(p,te,W),te==="leave"&&!ep(B)&&(k("hidden"),N(p))})}),x.useEffect(()=>{T&&(v===yr.Hidden?E.current=null:E.current=m)},[m,T,b]);let I=f,V={ref:g};return y&&m&&w&&(I={...I,className:T0(f.className,...C.current.enter,...C.current.enterFrom)}),z.createElement(Zf.Provider,{value:B},z.createElement(JP,{value:mt(b,{visible:Ht.Open,hidden:Ht.Closed})|F.flags},Yi({ourProps:V,theirProps:I,defaultTag:C$,features:ZP,visible:b==="visible",name:"Transition.Child"})))}function P$(t,e){let{show:n,appear:i=!1,unmount:r,...s}=t,o=x.useRef(null),l=Gi(o,e);Xf();let a=Yf();if(n===void 0&&a!==null&&(n=(a&Ht.Open)===Ht.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,c]=x.useState(n?"visible":"hidden"),d=QP(()=>{c("hidden")}),[h,f]=x.useState(!0),p=x.useRef([n]);Wi(()=>{h!==!1&&p.current[p.current.length-1]!==n&&(p.current.push(n),f(!1))},[p,n]);let g=x.useMemo(()=>({show:n,appear:i,initial:h}),[n,i,h]);x.useEffect(()=>{if(n)c("visible");else if(!ep(d))c("hidden");else{let w=o.current;if(!w)return;let b=w.getBoundingClientRect();b.x===0&&b.y===0&&b.width===0&&b.height===0&&c("hidden")}},[n,d]);let v={unmount:r},m=Ce(()=>{var w;h&&f(!1),(w=t.beforeEnter)==null||w.call(t)}),y=Ce(()=>{var w;h&&f(!1),(w=t.beforeLeave)==null||w.call(t)});return z.createElement(Zf.Provider,{value:d},z.createElement(Qf.Provider,{value:g},Yi({ourProps:{...v,as:x.Fragment,children:z.createElement(eR,{ref:l,...v,...s,beforeEnter:m,beforeLeave:y})},theirProps:{},defaultTag:x.Fragment,features:ZP,visible:u==="visible",name:"Transition"})))}function R$(t,e){let n=x.useContext(Qf)!==null,i=Yf()!==null;return z.createElement(z.Fragment,null,!n&&i?z.createElement(N0,{ref:e,...t}):z.createElement(eR,{ref:e,...t}))}let N0=wi(P$),eR=wi(A$),M$=wi(R$),IS=Object.assign(N0,{Child:M$,Root:N0});function _i(t){return t.split("-")[1]}function Gv(t){return t==="y"?"height":"width"}function kr(t){return t.split("-")[0]}function cc(t){return["top","bottom"].includes(kr(t))?"x":"y"}function _S(t,e,n){let{reference:i,floating:r}=t;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,l=cc(e),a=Gv(l),u=i[a]/2-r[a]/2,c=l==="x";let d;switch(kr(e)){case"top":d={x:s,y:i.y-r.height};break;case"bottom":d={x:s,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:o};break;case"left":d={x:i.x-r.width,y:o};break;default:d={x:i.x,y:i.y}}switch(_i(e)){case"start":d[l]-=u*(n&&c?-1:1);break;case"end":d[l]+=u*(n&&c?-1:1)}return d}const O$=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=_S(u,i,a),h=i,f={},p=0;for(let g=0;g<l.length;g++){const{name:v,fn:m}=l[g],{x:y,y:w,data:b,reset:k}=await m({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=w??d,f={...f,[v]:{...f[v],...b}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):k.rects),{x:c,y:d}=_S(u,h,a)),g=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};function Po(t,e){return typeof t=="function"?t(e):t}function tR(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function _h(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function ju(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:l,strategy:a}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Po(e,t),p=tR(f),g=l[h?d==="floating"?"reference":"floating":d],v=_h(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:c,strategy:a})),m=d==="floating"?{...o.floating,x:i,y:r}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),w=await(s.isElement==null?void 0:s.isElement(y))&&await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1},b=_h(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m,offsetParent:y,strategy:a}):m);return{top:(v.top-b.top+p.top)/w.y,bottom:(b.bottom-v.bottom+p.bottom)/w.y,left:(v.left-b.left+p.left)/w.x,right:(b.right-v.right+p.right)/w.x}}const L0=Math.min,T$=Math.max;function B0(t,e,n){return T$(t,L0(e,n))}const $S=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:l}=e,{element:a,padding:u=0}=Po(t,e)||{};if(a==null)return{};const c=tR(u),d={x:n,y:i},h=cc(r),f=Gv(h),p=await o.getDimensions(a),g=h==="y",v=g?"top":"left",m=g?"bottom":"right",y=g?"clientHeight":"clientWidth",w=s.reference[f]+s.reference[h]-d[h]-s.floating[f],b=d[h]-s.reference[h],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a));let A=k?k[y]:0;A&&await(o.isElement==null?void 0:o.isElement(k))||(A=l.floating[y]||s.floating[f]);const R=w/2-b/2,N=A/2-p[f]/2-1,E=L0(c[v],N),C=L0(c[m],N),P=E,M=A-p[f]-C,T=A/2-p[f]/2+R,L=B0(P,T,M),F=_i(r)!=null&&T!=L&&s.reference[f]/2-(T<P?E:C)-p[f]/2<0?T<P?P-T:M-T:0;return{[h]:d[h]-F,data:{[h]:L,centerOffset:T-L+F}}}}),nR=["top","right","bottom","left"],FS=nR.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),D$={left:"right",right:"left",bottom:"top",top:"bottom"};function $h(t){return t.replace(/left|right|bottom|top/g,e=>D$[e])}function iR(t,e,n){n===void 0&&(n=!1);const i=_i(t),r=cc(t),s=Gv(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=$h(o)),{main:o,cross:$h(o)}}const N$={start:"end",end:"start"};function jd(t){return t.replace(/start|end/g,e=>N$[e])}const L$=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,i,r;const{rects:s,middlewareData:o,placement:l,platform:a,elements:u}=e,{crossAxis:c=!1,alignment:d,allowedPlacements:h=FS,autoAlignment:f=!0,...p}=Po(t,e),g=d!==void 0||h===FS?function(C,P,M){return(C?[...M.filter(T=>_i(T)===C),...M.filter(T=>_i(T)!==C)]:M.filter(T=>kr(T)===T)).filter(T=>!C||_i(T)===C||!!P&&jd(T)!==T)}(d||null,f,h):h,v=await ju(e,p),m=((n=o.autoPlacement)==null?void 0:n.index)||0,y=g[m];if(y==null)return{};const{main:w,cross:b}=iR(y,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));if(l!==y)return{reset:{placement:g[0]}};const k=[v[kr(y)],v[w],v[b]],A=[...((i=o.autoPlacement)==null?void 0:i.overflows)||[],{placement:y,overflows:k}],R=g[m+1];if(R)return{data:{index:m+1,overflows:A},reset:{placement:R}};const N=A.map(C=>{const P=_i(C.placement);return[C.placement,P&&c?C.overflows.slice(0,2).reduce((M,T)=>M+T,0):C.overflows[0],C.overflows]}).sort((C,P)=>C[1]-P[1]),E=((r=N.filter(C=>C[2].slice(0,_i(C[0])?2:3).every(P=>P<=0))[0])==null?void 0:r[0])||N[0][0];return E!==l?{data:{index:m+1,overflows:A},reset:{placement:E}}:{}}}},B$=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:l,elements:a}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...g}=Po(t,e),v=kr(i),m=kr(o)===o,y=await(l.isRTL==null?void 0:l.isRTL(a.floating)),w=d||(m||!p?[$h(o)]:function(P){const M=$h(P);return[jd(P),M,jd(M)]}(o));d||f==="none"||w.push(...function(P,M,T,L){const F=_i(P);let $=function(W,B,I){const V=["left","right"],te=["right","left"],le=["top","bottom"],pe=["bottom","top"];switch(W){case"top":case"bottom":return I?B?te:V:B?V:te;case"left":case"right":return B?le:pe;default:return[]}}(kr(P),T==="start",L);return F&&($=$.map(W=>W+"-"+F),M&&($=$.concat($.map(jd)))),$}(o,p,f,y));const b=[o,...w],k=await ju(e,g),A=[];let R=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&A.push(k[v]),c){const{main:P,cross:M}=iR(i,s,y);A.push(k[P],k[M])}if(R=[...R,{placement:i,overflows:A}],!A.every(P=>P<=0)){var N,E;const P=(((N=r.flip)==null?void 0:N.index)||0)+1,M=b[P];if(M)return{data:{index:P,overflows:R},reset:{placement:M}};let T=(E=R.filter(L=>L.overflows[0]<=0).sort((L,F)=>L.overflows[1]-F.overflows[1])[0])==null?void 0:E.placement;if(!T)switch(h){case"bestFit":{var C;const L=(C=R.map(F=>[F.placement,F.overflows.filter($=>$>0).reduce(($,W)=>$+W,0)]).sort((F,$)=>F[1]-$[1])[0])==null?void 0:C[0];L&&(T=L);break}case"initialPlacement":T=o}if(i!==T)return{reset:{placement:T}}}return{}}}};function zS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function jS(t){return nR.some(e=>t[e]>=0)}const I$=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=Po(t,e);switch(i){case"referenceHidden":{const s=zS(await ju(e,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:jS(s)}}}case"escaped":{const s=zS(await ju(e,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:jS(s)}}}default:return{}}}}},_$=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,r=await async function(s,o){const{placement:l,platform:a,elements:u}=s,c=await(a.isRTL==null?void 0:a.isRTL(u.floating)),d=kr(l),h=_i(l),f=cc(l)==="x",p=["left","top"].includes(d)?-1:1,g=c&&f?-1:1,v=Po(o,s);let{mainAxis:m,crossAxis:y,alignmentAxis:w}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...v};return h&&typeof w=="number"&&(y=h==="end"?-1*w:w),f?{x:y*g,y:m*p}:{x:m*p,y:y*g}}(e,t);return{x:n+r.x,y:i+r.y,data:r}}}};function $$(t){return t==="x"?"y":"x"}const F$=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:m,y}=v;return{x:m,y}}},...a}=Po(t,e),u={x:n,y:i},c=await ju(e,a),d=cc(kr(r)),h=$$(d);let f=u[d],p=u[h];if(s){const v=d==="y"?"bottom":"right";f=B0(f+c[d==="y"?"top":"left"],f,f-c[v])}if(o){const v=h==="y"?"bottom":"right";p=B0(p+c[h==="y"?"top":"left"],p,p-c[v])}const g=l.fn({...e,[d]:f,[h]:p});return{...g,data:{x:g.x-n,y:g.y-i}}}}};function An(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Xi(t){return An(t).getComputedStyle(t)}function rR(t){return t instanceof An(t).Node}function Os(t){return rR(t)?(t.nodeName||"").toLowerCase():"#document"}function yi(t){return t instanceof HTMLElement||t instanceof An(t).HTMLElement}function US(t){return typeof ShadowRoot<"u"&&(t instanceof An(t).ShadowRoot||t instanceof ShadowRoot)}function Uu(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Xi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function z$(t){return["table","td","th"].includes(Os(t))}function I0(t){const e=Xv(),n=Xi(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Xv(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function tp(t){return["html","body","#document"].includes(Os(t))}const _0=Math.min,gl=Math.max,Fh=Math.round,nd=Math.floor,Ts=t=>({x:t,y:t});function sR(t){const e=Xi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=yi(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,l=Fh(n)!==s||Fh(i)!==o;return l&&(n=s,i=o),{width:n,height:i,$:l}}function Er(t){return t instanceof Element||t instanceof An(t).Element}function Jv(t){return Er(t)?t:t.contextElement}function yl(t){const e=Jv(t);if(!yi(e))return Ts(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=sR(e);let o=(s?Fh(n.width):n.width)/i,l=(s?Fh(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}const j$=Ts(0);function oR(t){const e=An(t);return Xv()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:j$}function bo(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=Jv(t);let o=Ts(1);e&&(i?Er(i)&&(o=yl(i)):o=yl(t));const l=function(h,f,p){return f===void 0&&(f=!1),!(!p||f&&p!==An(h))&&f}(s,n,i)?oR(s):Ts(0);let a=(r.left+l.x)/o.x,u=(r.top+l.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=An(s),f=i&&Er(i)?An(i):i;let p=h.frameElement;for(;p&&i&&f!==h;){const g=yl(p),v=p.getBoundingClientRect(),m=getComputedStyle(p),y=v.left+(p.clientLeft+parseFloat(m.paddingLeft))*g.x,w=v.top+(p.clientTop+parseFloat(m.paddingTop))*g.y;a*=g.x,u*=g.y,c*=g.x,d*=g.y,a+=y,u+=w,p=An(p).frameElement}}return _h({width:c,height:d,x:a,y:u})}function np(t){return Er(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Cr(t){var e;return(e=(rR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lR(t){return bo(Cr(t)).left+np(t).scrollLeft}function zl(t){if(Os(t)==="html")return t;const e=t.assignedSlot||t.parentNode||US(t)&&t.host||Cr(t);return US(e)?e.host:e}function aR(t){const e=zl(t);return tp(e)?t.ownerDocument?t.ownerDocument.body:t.body:yi(e)&&Uu(e)?e:aR(e)}function zh(t,e){var n;e===void 0&&(e=[]);const i=aR(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=An(i);return r?e.concat(s,s.visualViewport||[],Uu(i)?i:[]):e.concat(i,zh(i))}function VS(t,e,n){let i;if(e==="viewport")i=function(r,s){const o=An(r),l=Cr(r),a=o.visualViewport;let u=l.clientWidth,c=l.clientHeight,d=0,h=0;if(a){u=a.width,c=a.height;const f=Xv();(!f||f&&s==="fixed")&&(d=a.offsetLeft,h=a.offsetTop)}return{width:u,height:c,x:d,y:h}}(t,n);else if(e==="document")i=function(r){const s=Cr(r),o=np(r),l=r.ownerDocument.body,a=gl(s.scrollWidth,s.clientWidth,l.scrollWidth,l.clientWidth),u=gl(s.scrollHeight,s.clientHeight,l.scrollHeight,l.clientHeight);let c=-o.scrollLeft+lR(r);const d=-o.scrollTop;return Xi(l).direction==="rtl"&&(c+=gl(s.clientWidth,l.clientWidth)-a),{width:a,height:u,x:c,y:d}}(Cr(t));else if(Er(e))i=function(r,s){const o=bo(r,!0,s==="fixed"),l=o.top+r.clientTop,a=o.left+r.clientLeft,u=yi(r)?yl(r):Ts(1);return{width:r.clientWidth*u.x,height:r.clientHeight*u.y,x:a*u.x,y:l*u.y}}(e,n);else{const r=oR(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return _h(i)}function uR(t,e){const n=zl(t);return!(n===e||!Er(n)||tp(n))&&(Xi(n).position==="fixed"||uR(n,e))}function U$(t,e,n){const i=yi(e),r=Cr(e),s=n==="fixed",o=bo(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const a=Ts(0);if(i||!i&&!s)if((Os(e)!=="body"||Uu(r))&&(l=np(e)),yi(e)){const u=bo(e,!0,s,e);a.x=u.x+e.clientLeft,a.y=u.y+e.clientTop}else r&&(a.x=lR(r));return{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function HS(t,e){return yi(t)&&Xi(t).position!=="fixed"?e?e(t):t.offsetParent:null}function WS(t,e){const n=An(t);if(!yi(t))return n;let i=HS(t,e);for(;i&&z$(i)&&Xi(i).position==="static";)i=HS(i,e);return i&&(Os(i)==="html"||Os(i)==="body"&&Xi(i).position==="static"&&!I0(i))?n:i||function(r){let s=zl(r);for(;yi(s)&&!tp(s);){if(I0(s))return s;s=zl(s)}return null}(t)||n}const V$={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=yi(n),s=Cr(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},l=Ts(1);const a=Ts(0);if((r||!r&&i!=="fixed")&&((Os(n)!=="body"||Uu(s))&&(o=np(n)),yi(n))){const u=bo(n);l=yl(n),a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-o.scrollLeft*l.x+a.x,y:e.y*l.y-o.scrollTop*l.y+a.y}},getDocumentElement:Cr,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[...n==="clippingAncestors"?function(a,u){const c=u.get(a);if(c)return c;let d=zh(a).filter(g=>Er(g)&&Os(g)!=="body"),h=null;const f=Xi(a).position==="fixed";let p=f?zl(a):a;for(;Er(p)&&!tp(p);){const g=Xi(p),v=I0(p);v||g.position!=="fixed"||(h=null),(f?!v&&!h:!v&&g.position==="static"&&h&&["absolute","fixed"].includes(h.position)||Uu(p)&&!v&&uR(a,p))?d=d.filter(m=>m!==p):h=g,p=zl(p)}return u.set(a,d),d}(e,this._c):[].concat(n),i],o=s[0],l=s.reduce((a,u)=>{const c=VS(e,u,r);return a.top=gl(c.top,a.top),a.right=_0(c.right,a.right),a.bottom=_0(c.bottom,a.bottom),a.left=gl(c.left,a.left),a},VS(e,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:WS,getElementRects:async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||WS,s=this.getDimensions;return{reference:U$(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return sR(t)},getScale:yl,isElement:Er,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function H$(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,u=Jv(t),c=r||s?[...u?zh(u):[],...zh(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&l?function(v,m){let y,w=null;const b=Cr(v);function k(){clearTimeout(y),w&&w.disconnect(),w=null}return function A(R,N){R===void 0&&(R=!1),N===void 0&&(N=1),k();const{left:E,top:C,width:P,height:M}=v.getBoundingClientRect();if(R||m(),!P||!M)return;const T={rootMargin:-nd(C)+"px "+-nd(b.clientWidth-(E+P))+"px "+-nd(b.clientHeight-(C+M))+"px "+-nd(E)+"px",threshold:gl(0,_0(1,N))||1};let L=!0;function F($){const W=$[0].intersectionRatio;if(W!==N){if(!L)return A();W?A(!1,W):y=setTimeout(()=>{A(!1,1e-7)},100)}L=!1}try{w=new IntersectionObserver(F,{...T,root:b.ownerDocument})}catch{w=new IntersectionObserver(F,T)}w.observe(v)}(!0),k}(u,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[m]=v;m&&m.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),u&&!a&&p.observe(u),p.observe(e));let g=a?bo(t):null;return a&&function v(){const m=bo(t);!g||m.x===g.x&&m.y===g.y&&m.width===g.width&&m.height===g.height||n(),g=m,h=requestAnimationFrame(v)}(),n(),()=>{c.forEach(v=>{r&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,a&&cancelAnimationFrame(h)}}const W$=(t,e,n)=>{const i=new Map,r={platform:V$,...n},s={...r.platform,_c:i};return O$(t,e,{...r,platform:s})},G$=t=>{const{element:e,padding:n}=t;function i(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){return i(e)?e.current!=null?$S({element:e.current,padding:n}).fn(r):{}:e?$S({element:e,padding:n}).fn(r):{}}}};var Ud=typeof document<"u"?x.useLayoutEffect:x.useEffect;function jh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!jh(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!jh(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function GS(t){const e=x.useRef(t);return Ud(()=>{e.current=t}),e}function X$(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,whileElementsMounted:s,open:o}=t,[l,a]=x.useState({x:null,y:null,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[u,c]=x.useState(i);jh(u,i)||c(i);const d=x.useRef(null),h=x.useRef(null),f=x.useRef(l),p=GS(s),g=GS(r),[v,m]=x.useState(null),[y,w]=x.useState(null),b=x.useCallback(C=>{d.current!==C&&(d.current=C,m(C))},[]),k=x.useCallback(C=>{h.current!==C&&(h.current=C,w(C))},[]),A=x.useCallback(()=>{if(!d.current||!h.current)return;const C={placement:e,strategy:n,middleware:u};g.current&&(C.platform=g.current),W$(d.current,h.current,C).then(P=>{const M={...P,isPositioned:!0};R.current&&!jh(f.current,M)&&(f.current=M,Zu.flushSync(()=>{a(M)}))})},[u,e,n,g]);Ud(()=>{o===!1&&f.current.isPositioned&&(f.current.isPositioned=!1,a(C=>({...C,isPositioned:!1})))},[o]);const R=x.useRef(!1);Ud(()=>(R.current=!0,()=>{R.current=!1}),[]),Ud(()=>{if(v&&y){if(p.current)return p.current(v,y,A);A()}},[v,y,A,p]);const N=x.useMemo(()=>({reference:d,floating:h,setReference:b,setFloating:k}),[b,k]),E=x.useMemo(()=>({reference:v,floating:y}),[v,y]);return x.useMemo(()=>({...l,update:A,refs:N,elements:E,reference:b,floating:k}),[l,A,N,E,b,k])}var J$=typeof document<"u"?x.useLayoutEffect:x.useEffect;function Y$(){const t=new Map;return{emit(e,n){var i;(i=t.get(e))==null||i.forEach(r=>r(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){t.set(e,(t.get(e)||[]).filter(i=>i!==n))}}}const K$=x.createContext(null),q$=()=>x.useContext(K$);function Q$(t){return(t==null?void 0:t.ownerDocument)||document}function Z$(t){return Q$(t).defaultView||window}function id(t){return t?t instanceof Z$(t).Element:!1}const eF=yO["useInsertionEffect".toString()],tF=eF||(t=>t());function nF(t){const e=x.useRef(()=>{});return tF(()=>{e.current=t}),x.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function iF(t){t===void 0&&(t={});const{open:e=!1,onOpenChange:n,nodeId:i}=t,r=X$(t),s=q$(),o=x.useRef(null),l=x.useRef({}),a=x.useState(()=>Y$())[0],[u,c]=x.useState(null),d=x.useCallback(m=>{const y=id(m)?{getBoundingClientRect:()=>m.getBoundingClientRect(),contextElement:m}:m;r.refs.setReference(y)},[r.refs]),h=x.useCallback(m=>{(id(m)||m===null)&&(o.current=m,c(m)),(id(r.refs.reference.current)||r.refs.reference.current===null||m!==null&&!id(m))&&r.refs.setReference(m)},[r.refs]),f=x.useMemo(()=>({...r.refs,setReference:h,setPositionReference:d,domReference:o}),[r.refs,h,d]),p=x.useMemo(()=>({...r.elements,domReference:u}),[r.elements,u]),g=nF(n),v=x.useMemo(()=>({...r,refs:f,elements:p,dataRef:l,nodeId:i,events:a,open:e,onOpenChange:g}),[r,i,a,e,g,f,p]);return J$(()=>{const m=s==null?void 0:s.nodesRef.current.find(y=>y.id===i);m&&(m.context=v)}),x.useMemo(()=>({...r,context:v,refs:f,reference:h,positionReference:d}),[r,f,v,h,d])}var rF=Object.defineProperty,sF=(t,e,n)=>e in t?rF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oF=(t,e,n)=>(sF(t,typeof e!="symbol"?e+"":e,n),n),cR={exports:{}},ka={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS;function lF(){if(XS)return ka;XS=1;var t=z,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,a,u){var c,d={},h=null,f=null;u!==void 0&&(h=""+u),a.key!==void 0&&(h=""+a.key),a.ref!==void 0&&(f=a.ref);for(c in a)i.call(a,c)&&!s.hasOwnProperty(c)&&(d[c]=a[c]);if(l&&l.defaultProps)for(c in a=l.defaultProps,a)d[c]===void 0&&(d[c]=a[c]);return{$$typeof:e,type:l,key:h,ref:f,props:d,_owner:r.current}}return ka.Fragment=n,ka.jsx=o,ka.jsxs=o,ka}cR.exports=lF();var Ee=cR.exports;class aF{constructor(){oF(this,"current",this.detect())}set(e){this.current!==e&&(this.current=e)}reset(){this.set(this.detect())}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}const ip=new aF;function uF(t,e,n,i){x.useEffect(()=>{const r=[];(typeof i.offset=="number"||typeof i.offset=="object"||typeof i.offset=="function")&&r.push(_$(i.offset)),(i.flip===!0||typeof i.flip=="number"||typeof i.flip=="object")&&r.push(B$({padding:typeof i.flip=="number"?i.flip:void 0,...typeof i.flip=="object"?i.flip:{}})),(i.shift===!0||typeof i.shift=="number"||typeof i.shift=="object")&&r.push(F$({padding:typeof i.shift=="number"?i.shift:void 0,...typeof i.shift=="object"?i.shift:{}})),(i.autoPlacement===!0||typeof i.autoPlacement=="object")&&r.push(L$(typeof i.autoPlacement=="object"?i.autoPlacement:void 0)),(i.arrow===!0||typeof i.arrow=="number")&&r.push(G$({element:n,padding:i.arrow===!0?0:i.arrow})),r.push(...typeof i.middleware=="function"?i.middleware({referenceEl:e.reference,floatingEl:e.floating}):i.middleware||[]),(i.hide===!0||typeof i.hide=="object")&&r.push(I$(typeof i.hide=="object"?i.hide:void 0)),t(r)},[i.offset,i.shift,i.flip,i.arrow,i.autoPlacement,i.hide,i.middleware])}function cF(t,e,n){x.useEffect(()=>{if(t&&ip.isClient&&typeof ResizeObserver<"u"&&e.current&&e.current instanceof Element){const i=new ResizeObserver(([r])=>{const s=r.borderBoxSize.reduce((o,{inlineSize:l})=>o+l,0);n(s)});return i.observe(e.current),()=>{i.disconnect(),n(null)}}},[])}const dF=t=>{switch(t){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return""}};function hF(t,e){return x.useMemo(()=>typeof t.originClass=="function"?t.originClass(e):typeof t.originClass=="string"?t.originClass:t.tailwindcssOriginClass?dF(e):"",[e,t.originClass,t.tailwindcssOriginClass])}function dR(t,e,...n){if(t in e){const r=e[t];return typeof r=="function"?r(...n):r}const i=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,dR),i}function hR(t){return ip.isServer?null:t instanceof Node?t.ownerDocument:t&&Object.prototype.hasOwnProperty.call(t,"current")&&t.current instanceof Node?t.current.ownerDocument:document}const JS=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var fR=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(fR||{});function fF(t,e=0){var n;return t===((n=hR(t))==null?void 0:n.body)?!1:dR(e,{0(){return t.matches(JS)},1(){let i=t;for(;i!==null;){if(i.matches(JS))return!0;i=i.parentElement}return!1}})}const pF=(t,e)=>{ip.isServer?x.useEffect(t,e):x.useLayoutEffect(t,e)};function mF(t){const e=x.useRef(t);return pF(()=>{e.current=t},[t]),e}function Ni(t,e,n){const i=mF(e);x.useEffect(()=>{function r(s){i.current(s)}return document.addEventListener(t,r,n),()=>document.removeEventListener(t,r,n)},[t,n])}function gF(t,e,n=!0){const i=x.useRef(!1);x.useEffect(()=>{requestAnimationFrame(()=>{i.current=n})},[n]);function r(o,l){if(!i.current||o.defaultPrevented)return;const a=function c(d){return typeof d=="function"?c(d()):Array.isArray(d)||d instanceof Set?d:[d]}(t),u=l(o);if(u!==null&&u.getRootNode().contains(u)){for(const c of a){if(c===null)continue;const d=c instanceof HTMLElement?c:c.current;if(d!=null&&d.contains(u)||o.composed&&o.composedPath().includes(d))return}return!fF(u,fR.Loose)&&u.tabIndex!==-1&&o.preventDefault(),e(o,u)}}const s=x.useRef(null);Ni("mousedown",o=>{var l,a;i.current&&(s.current=((a=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:a[0])||o.target)},!0),Ni("click",o=>{s.current&&(r(o,()=>s.current),s.current=null)},!0),Ni("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}const Yv=x.createContext(null);Yv.displayName="ReferenceContext";const Kv=x.createContext(null);Kv.displayName="FloatingContext";const Vu=x.createContext(null);Vu.displayName="ArrowContext";function pR(t){const e=x.useContext(Yv);if(e===null){const n=new Error(`<${t} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,pR),n}return e}function mR(t){const e=x.useContext(Kv);if(e===null){const n=new Error(`<${t} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,mR),n}return e}function gR(t){const e=x.useContext(Vu);if(e===null){const n=new Error(`<${t} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,gR),n}return e}function yR(t,e,n,i){const{referenceRef:r}=i,s=e;if(s.as===x.Fragment)return Ee.jsx(t.type,{...t.props,...n,ref:r});const o=s.as||"div";return Ee.jsx(o,{...n,ref:r,children:Ee.jsx(t.type,{...t.props})})}function qv(t,e,n,i){const{floatingRef:r,props:s,mounted:o,setShow:l,x:a,y:u,placement:c,strategy:d,referenceElWidth:h}=i,f={...s,...e},p=hF(f,c),g={show:o.current?f.show:!1,enter:`${f.enter||""} ${p}`,enterFrom:`${f.enterFrom||""}`,enterTo:`${f.enterTo||""}`,leave:`${f.leave||""} ${p}`,leaveFrom:`${f.leaveFrom||""}`,leaveTo:`${f.leaveTo||""}`,beforeEnter:()=>{l(!0)},afterLeave:()=>{l(!1)}},v={style:{...!f.dialog&&(f.transform||f.transform===void 0)?{position:d,zIndex:f.zIndex||9999,top:"0px",left:"0px",right:"auto",bottom:"auto",transform:`translate(${Math.round(a||0)}px,${Math.round(u||0)}px)`}:{position:d,zIndex:f.zIndex||9999,top:`${u||0}px`,left:`${a||0}px`},width:f.adaptiveWidth&&typeof h=="number"?`${h}px`:void 0}};function m(b){return f.portal?Ee.jsx(Ih,{children:b}):b}function y(b){const k={...v,...n,ref:r};if(f.as===x.Fragment)return Ee.jsx(b.type,{...b.props,...k});const A=f.as||"div";return Ee.jsx(A,{...k,children:Ee.jsx(b.type,{...b.props})})}function w(){return ip.isServer?o.current&&f.show?Ee.jsx(t.type,{...t.props}):Ee.jsx(x.Fragment,{}):f.transitionChild?Ee.jsx(IS.Child,{as:x.Fragment,...g,children:Ee.jsx(t.type,{...t.props})}):Ee.jsx(IS,{as:x.Fragment,...g,children:Ee.jsx(t.type,{...t.props})})}return m(y(w()))}function vR([t,e],n){var i,r;const s=x.useRef(!1),[o,l]=x.useState(),a=x.useRef(null),u=x.useMemo(()=>({show:n.onShow||(()=>{}),hide:n.onHide||(()=>{}),update:n.onUpdate||(()=>{})}),[n.onShow,n.onHide,n.onUpdate]),{x:c,y:d,placement:h,strategy:f,update:p,refs:g,middlewareData:v}=iF({placement:n.placement||"bottom-start",strategy:n.strategy,middleware:o}),[m,y]=x.useState(null),w=x.useCallback(()=>{p(),u.update()},[p,u]);x.useEffect(w,[n.placement,n.strategy,o]),uF(l,g,a,n),x.useEffect(()=>{s.current=!0},[]),cF(n.adaptiveWidth,g.reference,y),x.useEffect(()=>{if(g.reference.current&&g.floating.current&&t){const N=n.autoUpdate!==!1?H$(g.reference.current,g.floating.current,w,typeof n.autoUpdate=="object"?n.autoUpdate:void 0):()=>{};return u.show(),()=>{N(),u.hide()}}},[t,w,g]);const b=x.useRef(!0);x.useEffect(()=>{!(g.reference.current instanceof Element)&&g.reference.current&&g.floating.current&&b.current&&(b.current=!1,w(),window.requestAnimationFrame(()=>{b.current=!0,w()}))},[g]);const k={referenceRef:g.setReference,placement:h},A={floatingRef:g.setFloating,props:n,mounted:s,setShow:e,x:c,y:d,placement:h,strategy:f,referenceElWidth:m},R={arrowRef:a,placement:h,x:(i=v.arrow)==null?void 0:i.x,y:(r=v.arrow)==null?void 0:r.y};return{referenceApi:k,floatingApi:A,arrowApi:R,x:c,y:d,placement:h,strategy:f,update:w,refs:g,middlewareData:v}}const wR=x.forwardRef((t,e)=>{const[n,i]=x.useState(t.show??!1),{referenceApi:r,floatingApi:s,arrowApi:o,placement:l}=vR([n,i],t),a={placement:l},[u,c]=typeof t.children=="function"?t.children(a):t.children;if(!x.isValidElement(u))return console.warn("<Float /> is missing a reference and floating element."),Ee.jsx(x.Fragment,{});function d(p){if(t.as===x.Fragment||!t.as)return Ee.jsx(x.Fragment,{children:p});const g=t.as;return Ee.jsx(g,{ref:e,className:t.className,children:p})}if(t.composable||t.dialog)return d(Ee.jsx(Yv.Provider,{value:r,children:Ee.jsx(Kv.Provider,{value:s,children:Ee.jsx(Vu.Provider,{value:o,children:typeof t.children=="function"?t.children(a):t.children})})},"FloatingNode"));const h=yR(u,{as:x.Fragment},{key:"reference-node"},r),f=qv(c,{as:t.floatingAs||"div"},{},s);return d([h,Ee.jsx(Vu.Provider,{value:o,children:f},"floating-node")])});wR.displayName="Float";function yF(t){if(!t.children)return Ee.jsx(x.Fragment,{});const e=x.useMemo(()=>{const{as:s,children:o,...l}=t;return l},[t]),n=pR("Float.Reference"),{placement:i}=n,r={placement:i};return yR(typeof t.children=="function"?t.children(r):t.children,{...t,as:t.as||x.Fragment},e,n)}function vF(t){if(!t.children)return Ee.jsx(x.Fragment,{});const e=x.useMemo(()=>{const{as:s,enter:o,enterFrom:l,enterTo:a,leave:u,leaveFrom:c,leaveTo:d,originClass:h,tailwindcssOriginClass:f,transitionChild:p,children:g,...v}=t;return v},[t]),n=mR("Float.Content"),{placement:i}=n,r={placement:i};return qv(typeof t.children=="function"?t.children(r):t.children,{...t,as:t.as||"div"},e,n)}function wF(t){const{arrowRef:e,placement:n,x:i,y:r}=gR("Float.Arrow"),s=x.useMemo(()=>{const{as:u,offset:c,children:d,...h}=t;return h},[t]),o={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]],l={left:typeof i=="number"?`${i}px`:void 0,top:typeof r=="number"?`${r}px`:void 0,right:void 0,bottom:void 0,[o]:`${(t.offset??4)*-1}px`,...s.style};if(t.as===x.Fragment){const u={placement:n},c=typeof t.children=="function"?t.children(u):t.children;return!c||!x.isValidElement(c)?Ee.jsx(x.Fragment,{}):Ee.jsx(c.type,{...c.props,ref:e,style:l})}const a=t.as||"div";return Ee.jsx(a,{ref:e,...s,style:l,children:t.children})}function Qv({onInitial:t,children:e,...n}){const[i,r]=x.useState(n.show??!1),s=x.useMemo(()=>{const{as:h,show:f,placement:p,strategy:g,offset:v,shift:m,flip:y,arrow:w,autoPlacement:b,hide:k,autoUpdate:A,zIndex:R,enter:N,enterFrom:E,enterTo:C,leave:P,leaveFrom:M,leaveTo:T,originClass:L,tailwindcssOriginClass:F,portal:$,transform:W,middleware:B,onShow:I,onHide:V,onUpdate:te,...le}=n;return le},[n]),{floatingApi:o,arrowApi:l,placement:a,refs:u}=vR([i,r],n);x.useEffect(()=>{r(n.show??!1)},[n.show]);function c(){i&&r(!1)}if(t({show:i,setShow:r,placement:a,refs:u}),!e)return Ee.jsx(x.Fragment,{});const d=qv(typeof e=="function"?e({placement:a,close:c}):e,{...n,as:n.as||x.Fragment,show:i},s,o);return Ee.jsx(Vu.Provider,{value:l,children:d})}function bF(t){function e({setShow:n,refs:i}){Ni("contextmenu",r=>{r.preventDefault(),i.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:r.clientX,y:r.clientY,top:r.clientY,left:r.clientX,right:r.clientX,bottom:r.clientY}}}),n(!0)}),gF(i.floating,()=>{n(!1)})}return Ee.jsx(Qv,{flip:!0,...t,show:!1,portal:!0,onInitial:e})}function SF({globalHideCursor:t,...e}){function n({setShow:i,refs:r}){function s(){i(!0)}function o(){i(!1)}function l(d){r.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:d.clientX,y:d.clientY,top:d.clientY,left:d.clientX,right:d.clientX,bottom:d.clientY}}})}function a(d){s(),l(d)}function u(d){s(),l(d.touches[0])}const c=hR(r.floating);c&&(x.useEffect(()=>{if((t||t===void 0)&&!c.getElementById("headlesui-float-cursor-style")){const d=c.createElement("style");return(c.head||c.getElementsByTagName("head")[0]).appendChild(d),d.id="headlesui-float-cursor-style",d.appendChild(c.createTextNode(["*, *::before, *::after {","  cursor: none !important;","}",".headlesui-float-cursor-root {","  pointer-events: none !important;","}"].join(`
`))),()=>{var h;return(h=c.getElementById("headlesui-float-cursor-style"))==null?void 0:h.remove()}}},[t]),"ontouchstart"in window||navigator.maxTouchPoints>0?(Ni("touchstart",u),Ni("touchend",o),Ni("touchmove",u)):(Ni("mouseenter",a),Ni("mouseleave",o),Ni("mousemove",a)))}return Ee.jsx(Qv,{...e,portal:!0,className:"headlesui-float-cursor-root",onInitial:n})}const xF=Object.assign(wR,{Reference:yF,Content:vF,Arrow:wF,Virtual:Qv,ContextMenu:bF,Cursor:SF}),dc=x.createContext({current:null,open:()=>{},close:()=>{}});function kF(t){return D.jsx(Wv,{children:({open:e})=>D.jsx(EF,{...t,popoverIsOpen:e})})}function EF({popoverIsOpen:t,children:e,...n}){const[i,r]=x.useState([]),s=i.at(-1)||null,o=a=>r([...i,a]),l=()=>r(i.slice(0,-1));return!t&&s!==null&&setTimeout(()=>r([]),50),D.jsx(dc.Provider,{value:{current:s,open:o,close:l},children:D.jsx(xF,{...n,children:e})})}const bR=x.forwardRef(({children:t},e)=>{const n=x.useRef(null),{current:i}=x.useContext(dc);return D.jsxs(Wv.Panel,{ref:e,className:"z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-100 bg-white p-1 text-slate-700 shadow-md",children:[D.jsx("div",{ref:n}),D.jsx(Ih.Group,{target:n,children:D.jsx(Ih,{as:"div",className:i===null?"block":"hidden",children:t})})]})});bR.displayName="MenuContent";function SR({children:t}){const{current:e,close:n}=x.useContext(dc);return D.jsxs("div",{className:"flex items-center px-2 py-1.5 text-sm font-semibold text-slate-900",children:[e&&D.jsx("button",{className:"-ml-0.5 mr-1 flex items-center justify-center rounded-full hover:bg-slate-100 focus:bg-slate-100",onClick:n,children:D.jsx("span",{className:"icon-[carbon--chevron-left] h-5 w-5"})}),t]})}function xR(){return D.jsx("hr",{className:"-mx-1 my-1 h-px border-none bg-slate-100"})}function Zv({children:t,disabled:e=!1,leading:n,trailing:i,href:r,external:s=!1,onClick:o}){if(r&&o)throw new Error("`href` and `onClick` are mutually exclusive");const l=e?"div":r?"a":o?"button":"div";return r&&s&&!i&&(i="icon-[carbon--launch]"),x.createElement(l,{className:lo("relative flex select-none items-center rounded-sm py-1.5 px-2 text-sm font-medium outline-none hover:bg-slate-100 focus:bg-slate-100 w-full",e&&"pointer-events-none opacity-50 cursor-default"),...l==="a"?{href:r,target:s?"_blank":void 0,rel:"noreferrer"}:l==="button"?{onClick:o}:{}},D.jsxs(D.Fragment,{children:[D.jsx("span",{className:lo("mr-2 h-4 w-4",n)}),t,i&&D.jsx("span",{className:lo("ml-auto block h-4 w-4",i)})]}))}function CF({value:t,onChange:e,options:n,getOptionLabel:i,...r}){return D.jsxs(kR,{children:[D.jsx(ER,{...r}),D.jsxs(CR,{children:[D.jsx(SR,{children:r.children}),D.jsx(xR,{}),n.map((s,o)=>D.jsx(Zv,{leading:s===t?"icon-[carbon--radio-button-checked]":"icon-[carbon--radio-button]",onClick:()=>e(s),children:i(s)},o))]})]})}const ew=x.createContext(null);function kR({children:t}){const e=x.useId();return D.jsx(ew.Provider,{value:e,children:t})}function ER(t){const e=x.useContext(ew),{open:n}=x.useContext(dc);if(e===null)throw new Error("SubmenuTrigger must be rendered inside a Submenu");return D.jsx(Zv,{...t,trailing:"icon-[carbon--chevron-right]",onClick:()=>n(e)})}function CR({children:t}){const e=x.useContext(ew),{current:n}=x.useContext(dc);return D.jsx(Ih,{as:"div",className:n===e?"block":"hidden",children:t})}const qt=Object.assign(kF,{Button:Wv.Button,Content:bR,Title:SR,Separator:xR,Item:Zv,Radio:CF,Submenu:kR,SubmenuTrigger:ER,SubmenuContent:CR});function AF(){const[t,e]=$c(uA),[n,i]=$c(Q5),[r,s]=$c(lA),[o,l]=$c(hv),a=Gf(),[u]=Iv(),c=u.type==="stopped";return D.jsxs(qt,{strategy:"fixed",placement:"bottom-end",shift:8,offset:8,children:[D.jsx(qt.Button,{className:"flex h-full items-center p-3 outline-none transition hover:bg-slate-500/30 focus:bg-slate-500/30 focus:outline-none",title:a("menu.label"),children:D.jsx("span",{className:"icon-[carbon--menu] h-6 w-6"})}),D.jsxs(qt.Content,{children:[D.jsx(qt.Title,{children:a("menu.label")}),D.jsx(qt.Separator,{}),D.jsx(qt.Radio,{leading:"icon-[carbon--devices]",value:t,onChange:e,options:["pio-switches-and-leds","pio-printer","handshake"],getOptionLabel:d=>a(`menu.devices.${d}`),disabled:!c,children:a("menu.devices.label")}),D.jsx(qt.Radio,{leading:"icon-[carbon--character-whole-number]",value:n,onChange:i,options:["hex","bin","uint","int","ascii"],getOptionLabel:d=>a(`menu.dataRepresentation.${d}`),children:a("menu.dataRepresentation.label")}),D.jsx(qt.Radio,{leading:"icon-[carbon--data-table]",value:r,onChange:s,options:["unchanged","clean","randomize"],getOptionLabel:d=>a(`menu.dataOnLoad.${d}`),children:a("menu.dataOnLoad.label")}),D.jsx(qt.Separator,{}),D.jsx(qt.Radio,{leading:"icon-[carbon--translate]",value:o,onChange:l,options:["en","es"],getOptionLabel:d=>D.jsxs("span",{className:"flex items-center gap-1 [&_svg]:h-5",children:[d==="en"&&D.jsxs(D.Fragment,{children:[D.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36",children:[D.jsx("path",{fill:"#00247D",d:"M0 9.059V13h5.628zM4.664 31H13v-5.837zM23 25.164V31h8.335zM0 23v3.941L5.63 23zM31.337 5H23v5.837zM36 26.942V23h-5.631zM36 13V9.059L30.371 13zM13 5H4.664L13 10.837z"}),D.jsx("path",{fill:"#CF1B2B",d:"M25.14 23l9.712 6.801c.471-.479.808-1.082.99-1.749L28.627 23H25.14zM13 23h-2.141l-9.711 6.8c.521.53 1.189.909 1.938 1.085L13 23.943V23zm10-10h2.141l9.711-6.8c-.521-.53-1.188-.909-1.937-1.085L23 12.057V13zm-12.141 0L1.148 6.2C.677 6.68.34 7.282.157 7.949L7.372 13h3.487z"}),D.jsx("path",{fill:"#EEE",d:"M36 21H21v10h2v-5.836L31.335 31H32c1.117 0 2.126-.461 2.852-1.199L25.14 23h3.487l7.215 5.052c.093-.337.158-.686.158-1.052v-.058L30.369 23H36v-2zM0 21v2h5.63L0 26.941V27c0 1.091.439 2.078 1.148 2.8l9.711-6.8H13v.943l-9.914 6.941c.294.07.598.116.914.116h.664L13 25.163V31h2V21H0zM36 9c0-1.091-.439-2.078-1.148-2.8L25.141 13H23v-.943l9.915-6.942C32.62 5.046 32.316 5 32 5h-.663L23 10.837V5h-2v10h15v-2h-5.629L36 9.059V9zM13 5v5.837L4.664 5H4c-1.118 0-2.126.461-2.852 1.2l9.711 6.8H7.372L.157 7.949C.065 8.286 0 8.634 0 9v.059L5.628 13H0v2h15V5h-2z"}),D.jsx("path",{fill:"#CF1B2B",d:"M21 15V5h-6v10H0v6h15v10h6V21h15v-6z"})]}),"English"]}),d==="es"&&D.jsxs(D.Fragment,{children:[D.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36",children:[D.jsx("path",{fill:"#75AADB",d:"M36 27c0 2.209-1.791 4-4 4H4c-2.209 0-4-1.791-4-4V9c0-2.209 1.791-4 4-4h28c2.209 0 4 1.791 4 4v18z"}),D.jsx("path",{fill:"#EEE",d:"M0 13h36v10H0z"}),D.jsx("path",{fill:"#FCBF49",d:"M18 13l.488 2.548 1.426-2.167-.525 2.54 2.146-1.457-1.457 2.147 2.541-.524-2.167 1.425L23 18l-2.548.488 2.167 1.426-2.541-.525 1.457 2.146-2.146-1.457.525 2.541-1.426-2.167L18 23l-.488-2.548-1.425 2.167.524-2.541-2.147 1.457 1.457-2.146-2.54.525 2.167-1.426L13 18l2.548-.488-2.167-1.425 2.54.524-1.457-2.147 2.147 1.457-.524-2.54 1.425 2.167z"}),D.jsx("path",{fill:"#843511",d:"M18 14.33l.242 1.265.116.605.339-.514.708-1.076-.261 1.261-.125.604.51-.346 1.066-.723-.723 1.066-.346.51.603-.125 1.262-.26-1.076.708-.515.337.605.116L21.67 18l-1.265.242-.605.116.514.339 1.076.708-1.262-.261-.604-.125.346.51.723 1.065-1.065-.723-.51-.346.125.604.261 1.262-.708-1.076-.338-.515-.116.605L18 21.67l-.242-1.265-.116-.605-.339.515-.708 1.076.26-1.262.125-.603-.51.346-1.066.723.723-1.066.346-.51-.604.125-1.261.261 1.076-.708.514-.339-.605-.116L14.33 18l1.265-.242.605-.116-.515-.339-1.076-.708 1.261.26.603.125-.346-.51-.724-1.066 1.066.724.51.346-.125-.603-.26-1.261.708 1.076.339.515.116-.605L18 14.33M18 13l-.488 2.548-1.425-2.167.524 2.541-2.147-1.457 1.457 2.147-2.54-.524 2.167 1.425L13 18l2.548.488-2.167 1.426 2.54-.525-1.457 2.146 2.147-1.457-.524 2.541 1.425-2.167L18 23l.488-2.548 1.426 2.167-.525-2.541 2.146 1.457-1.457-2.146 2.541.525-2.167-1.426L23 18l-2.548-.488 2.167-1.425-2.541.524 1.457-2.147-2.146 1.457.525-2.541-1.426 2.167L18 13zm1.914.381h.005-.005zm1.621 1.083h.005-.005zm1.084 1.623h.005-.005z"}),D.jsx("circle",{fill:"#FCBF49",cx:"18",cy:"18",r:"2"}),D.jsx("path",{fill:"#843511",d:"M18 20.125c-1.172 0-2.125-.953-2.125-2.125s.953-2.125 2.125-2.125 2.125.953 2.125 2.125-.953 2.125-2.125 2.125zm0-4c-1.034 0-1.875.841-1.875 1.875s.841 1.875 1.875 1.875 1.875-.841 1.875-1.875-.841-1.875-1.875-1.875z"}),D.jsx("path",{fill:"#C16540",d:"M17.801 17.774c0 .155-.261.28-.583.28-.323 0-.584-.125-.584-.28 0-.155.261-.28.584-.28.322 0 .583.125.583.28zm1.553-.024c0-.161-.266-.292-.594-.292-.328 0-.594.13-.594.292s.266.292.594.292c.329 0 .594-.131.594-.292z"}),D.jsx("path",{fill:"#ED8662",d:"M17.463 18.874c0-.126.246-.229.548-.229.303 0 .548.102.548.229 0 .126-.246.229-.548.229-.303 0-.548-.103-.548-.229z"})]}),"Espaol"]})]}),children:a("menu.language")}),D.jsx(qt.Separator,{}),D.jsx(qt.Item,{href:"docs",external:!0,leading:"icon-[carbon--document]",children:a("menu.documentation")}),D.jsx(qt.Item,{href:"https://github.com/vonsim/vonsim",external:!0,leading:"icon-[carbon--logo-github]",children:"GitHub"}),D.jsx(qt.Item,{href:"https://github.com/vonsim/vonsim/issues/new?labels=new+version",external:!0,leading:"icon-[carbon--warning-filled]",children:a("menu.report-issue")})]})]})}function PF(){const t=Gf(),[e]=Iv();return D.jsxs("div",{className:lo("mx-auto flex h-6 w-40 select-none items-center justify-center gap-1 rounded-full lg:mx-8","text-center text-sm font-semibold",e.type==="running"&&"bg-emerald-200 text-emerald-700",e.type==="paused"&&"bg-amber-200 text-amber-700",e.type==="waiting-for-input"&&"bg-amber-200 text-amber-700",e.type==="stopped"&&(e.reason==="halt"?"bg-sky-200 text-sky-700":"bg-red-200 text-red-700")),children:[D.jsx("span",{className:lo("h-4 w-4",e.type==="running"&&"icon-[carbon--settings] animate-spin",e.type==="paused"&&"icon-[carbon--pause] animate-pulse",e.type==="waiting-for-input"&&"icon-[carbon--keyboard] animate-bounce",e.type==="stopped"&&[e.reason==="halt"&&"icon-[carbon--stop-sign]",e.reason==="error"&&"icon-[carbon--error]"])}),D.jsx("span",{children:t(`runner.state.${e.type}`)})]})}function RF(){const t=dN(),[e,n]=ZD(!1),i=lN(()=>{window.navigator.vibrate(100),n()},{isPreventDefault:!0,delay:1500});return D.jsxs("header",{className:"text-sm text-white",children:[D.jsxs("div",{className:"flex items-center lg:h-full",children:[D.jsxs("div",{className:"flex select-none items-center justify-center px-4 py-2",children:[D.jsx("span",{className:lo("icon-[carbon--machine-learning] mr-2 block h-8 w-8",e&&"animate-spin"),...i}),D.jsxs("h1",{className:"text-xl font-bold",children:["Von",D.jsx("span",{className:"text-lime-500",children:"Sim"})]})]}),D.jsx(PF,{}),!t&&D.jsxs(D.Fragment,{children:[D.jsx(OS,{}),D.jsx("div",{className:"grow"})]}),D.jsx(AF,{})]}),t&&D.jsx(OS,{})]})}const MF=1024;let OF=0;class Am{constructor(e,n){this.from=e,this.to=n}}class be{constructor(e={}){this.id=OF++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=pn.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}be.closedBy=new be({deserialize:t=>t.split(" ")});be.openedBy=new be({deserialize:t=>t.split(" ")});be.group=new be({deserialize:t=>t.split(" ")});be.contextHash=new be({perNode:!0});be.lookAhead=new be({perNode:!0});be.mounted=new be({perNode:!0});const TF=Object.create(null);class pn{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):TF,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new pn(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(be.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(be.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}pn.none=new pn("",Object.create(null),0,8);class tw{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new pn(i.name,r,i.id,i.flags):i)}return new tw(n)}}const rd=new WeakMap,YS=new WeakMap;var St;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(St||(St={}));class Ge{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(be.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Hh(this.topNode,e)}cursorAt(e,n=0,i=0){let r=rd.get(this)||this.topNode,s=new Hh(r);return s.moveTo(e,n),rd.set(this,s._tree),s}get topNode(){return new Ar(this,0,0,null)}resolve(e,n=0){let i=jl(rd.get(this)||this.topNode,e,n,!1);return rd.set(this,i),i}resolveInner(e,n=0){let i=jl(YS.get(this)||this.topNode,e,n,!0);return YS.set(this,i),i}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,l=(o&St.IncludeAnonymous)>0;for(let a=this.cursor(o|St.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=r&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:rw(pn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Ge(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Ge(pn.none,n,i,r)))}static build(e){return NF(e)}}Ge.empty=new Ge(pn.none,[],[],0);class nw{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new nw(this.buffer,this.index)}}class Ro{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return pn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,l=-1;for(let a=e;a!=n&&!(AR(s,r,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let l=e,a=0;l<n;){s[a++]=r[l++],s[a++]=r[l++]-i;let u=s[a++]=r[l++]-i;s[a++]=r[l++]-e,o=Math.max(o,u)}return new Ro(s,o,this.set)}}function AR(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function PR(t,e){let n=t.childBefore(e);for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(t=n,n=i.prevSibling):n=i}return t}function jl(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Ar&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:St.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof Ar&&o.index<0&&((r=l.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Ar{constructor(e,n,i,r){this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,u=n>0?l.length:-1;e!=u;e+=n){let c=l[e],d=a[e]+o.from;if(AR(r,i,d,d+c.length)){if(c instanceof Ro){if(s&St.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new cs(new DF(o,c,e,d),null,h)}else if(s&St.IncludeAnonymous||!c.type.isAnonymous||iw(c)){let h;if(!(s&St.IgnoreMounts)&&c.props&&(h=c.prop(be.mounted))&&!h.overlay)return new Ar(h.tree,d,e,o);let f=new Ar(c,d,e,o);return s&St.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&St.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&St.IgnoreOverlays)&&(r=this._tree.prop(be.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?l>=s:l>s))return new Ar(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Hh(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return jl(this,e,n,!1)}resolveInner(e,n=0){return jl(this,e,n,!0)}enterUnfinishedNodesBefore(e){return PR(this,e)}getChild(e,n=null,i=null){let r=Uh(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return Uh(this,e,n,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Vh(this,e)}}function Uh(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(;!r.type.is(n);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Vh(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class DF{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class cs{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new cs(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&St.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new cs(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new cs(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new cs(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new Hh(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Ge(this.type,e,n,this.to-this.from)}resolve(e,n=0){return jl(this,e,n,!1)}resolveInner(e,n=0){return jl(this,e,n,!0)}enterUnfinishedNodesBefore(e){return PR(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,i=null){let r=Uh(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return Uh(this,e,n,i)}get node(){return this}matchContext(e){return Vh(this,e)}}class Hh{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ar)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Ar?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&St.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&St.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&St.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&St.IncludeAnonymous||l instanceof Ro||!l.type.isAnonymous||iw(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new cs(this.buffer,n,this.stack[r]);return this.bufferNode=new cs(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Vh(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Vh(this.node,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function iw(t){return t.children.some(e=>e instanceof Ro||!e.type.isAnonymous||iw(e))}function NF(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=MF,reused:s=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(n)?new nw(n,n.length):n,a=i.types,u=0,c=0;function d(b,k,A,R,N){let{id:E,start:C,end:P,size:M}=l,T=c;for(;M<0;)if(l.next(),M==-1){let B=s[E];A.push(B),R.push(C-b);return}else if(M==-3){u=E;return}else if(M==-4){c=E;return}else throw new RangeError(`Unrecognized record size: ${M}`);let L=a[E],F,$,W=C-b;if(P-C<=r&&($=g(l.pos-k,N))){let B=new Uint16Array($.size-$.skip),I=l.pos-$.size,V=B.length;for(;l.pos>I;)V=v($.start,B,V);F=new Ro(B,P-$.start,i),W=$.start-b}else{let B=l.pos-M;l.next();let I=[],V=[],te=E>=o?E:-1,le=0,pe=P;for(;l.pos>B;)te>=0&&l.id==te&&l.size>=0?(l.end<=pe-r&&(f(I,V,C,le,l.end,pe,te,T),le=I.length,pe=l.end),l.next()):d(C,B,I,V,te);if(te>=0&&le>0&&le<I.length&&f(I,V,C,le,C,pe,te,T),I.reverse(),V.reverse(),te>-1&&le>0){let dt=h(L);F=rw(L,I,V,0,I.length,0,P-C,dt,dt)}else F=p(L,I,V,P-C,T-P)}A.push(F),R.push(W)}function h(b){return(k,A,R)=>{let N=0,E=k.length-1,C,P;if(E>=0&&(C=k[E])instanceof Ge){if(!E&&C.type==b&&C.length==R)return C;(P=C.prop(be.lookAhead))&&(N=A[E]+C.length+P)}return p(b,k,A,R,N)}}function f(b,k,A,R,N,E,C,P){let M=[],T=[];for(;b.length>R;)M.push(b.pop()),T.push(k.pop()+A-N);b.push(p(i.types[C],M,T,E-N,P-E)),k.push(N-A)}function p(b,k,A,R,N=0,E){if(u){let C=[be.contextHash,u];E=E?[C].concat(E):[C]}if(N>25){let C=[be.lookAhead,N];E=E?[C].concat(E):[C]}return new Ge(b,k,A,R,E)}function g(b,k){let A=l.fork(),R=0,N=0,E=0,C=A.end-r,P={size:0,start:0,skip:0};e:for(let M=A.pos-b;A.pos>M;){let T=A.size;if(A.id==k&&T>=0){P.size=R,P.start=N,P.skip=E,E+=4,R+=4,A.next();continue}let L=A.pos-T;if(T<0||L<M||A.start<C)break;let F=A.id>=o?4:0,$=A.start;for(A.next();A.pos>L;){if(A.size<0)if(A.size==-3)F+=4;else break e;else A.id>=o&&(F+=4);A.next()}N=$,R+=T,E+=F}return(k<0||R==b)&&(P.size=R,P.start=N,P.skip=E),P.size>4?P:void 0}function v(b,k,A){let{id:R,start:N,end:E,size:C}=l;if(l.next(),C>=0&&R<o){let P=A;if(C>4){let M=l.pos-(C-4);for(;l.pos>M;)A=v(b,k,A)}k[--A]=P,k[--A]=E-b,k[--A]=N-b,k[--A]=R}else C==-3?u=R:C==-4&&(c=R);return A}let m=[],y=[];for(;l.pos>0;)d(t.start||0,t.bufferStart||0,m,y,-1);let w=(e=t.length)!==null&&e!==void 0?e:m.length?y[0]+m[0].length:0;return new Ge(a[t.topID],m.reverse(),y.reverse(),w)}const KS=new WeakMap;function Vd(t,e){if(!t.isAnonymous||e instanceof Ro||e.type!=t)return 1;let n=KS.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Ge)){n=1;break}n+=Vd(t,i)}KS.set(e,n)}return n}function rw(t,e,n,i,r,s,o,l,a){let u=0;for(let p=i;p<r;p++)u+=Vd(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,g,v,m,y){for(let w=v;w<m;){let b=w,k=g[w],A=Vd(t,p[w]);for(w++;w<m;w++){let R=Vd(t,p[w]);if(A+R>=c)break;A+=R}if(w==b+1){if(A>c){let R=p[b];f(R.children,R.positions,0,R.children.length,g[b]+y);continue}d.push(p[b])}else{let R=g[w-1]+p[w-1].length-k;d.push(rw(t,p,g,b,w,k,R,null,a))}h.push(k+y-s)}}return f(e,n,i,r,0),(l||a)(d,h,o)}class co{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new co(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<n.length?n[l]:null,d=c?c.fromA:1e9;if(d-a>=i)for(;o&&o.from<d;){let h=o;if(a>=h.from||d<=h.to||u){let f=Math.max(h.from,a)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new co(f,p,h.tree,h.offset+u,l>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return r}}class RR{startParse(e,n,i){return typeof e=="string"&&(e=new LF(e)),i=i?i.length?i.map(r=>new Am(r.from,r.to)):[new Am(0,0)]:[new Am(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class LF{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new be({perNode:!0});let BF=0;class wt{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=BF++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new wt([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new Wh;return n=>n.modified.indexOf(e)>-1?n:Wh.get(n.base||n,n.modified.concat(e).sort((i,r)=>i.id-r.id))}}let IF=0;class Wh{constructor(){this.instances=[],this.id=IF++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(l=>l.base==e&&_F(n,l.modified));if(i)return i;let r=[],s=new wt(r,e,n);for(let l of n)l.instances.push(s);let o=$F(n);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(Wh.get(l,a));return s}}function _F(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function $F(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function FF(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,l=r;for(let d=0;;){if(l=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);l=r.slice(d)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+r);let c=new Gh(i,o,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return MR.add(e)}const MR=new be;class Gh{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Gh.empty=new Gh([],2,null);function OR(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let a of l.set){let u=n[a.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function zF(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function jF(t,e,n,i=0,r=t.length){let s=new UF(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class UF{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=VF(e)||Gh.empty,d=zF(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,l),u),c.opaque)return;let h=e.tree&&e.tree.prop(be.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+l,1),p=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),g=e.firstChild();for(let v=0,m=l;;v++){let y=v<h.overlay.length?h.overlay[v]:null,w=y?y.from+l:a,b=Math.max(n,m),k=Math.min(i,w);if(b<k&&g)for(;e.from<k&&(this.highlightRange(e,b,k,r,s),this.startSpan(Math.min(k,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>i)break;m=y.to+l,m>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+l),Math.min(i,m),"",p),this.startSpan(Math.min(i,m),u))}g&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function VF(t){let e=t.type.prop(MR);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const K=wt.define,sd=K(),Gr=K(),qS=K(Gr),QS=K(Gr),Xr=K(),od=K(Xr),Pm=K(Xr),Ci=K(),Us=K(Ci),ki=K(),Ei=K(),$0=K(),Ea=K($0),ld=K(),ae={comment:sd,lineComment:K(sd),blockComment:K(sd),docComment:K(sd),name:Gr,variableName:K(Gr),typeName:qS,tagName:K(qS),propertyName:QS,attributeName:K(QS),className:K(Gr),labelName:K(Gr),namespace:K(Gr),macroName:K(Gr),literal:Xr,string:od,docString:K(od),character:K(od),attributeValue:K(od),number:Pm,integer:K(Pm),float:K(Pm),bool:K(Xr),regexp:K(Xr),escape:K(Xr),color:K(Xr),url:K(Xr),keyword:ki,self:K(ki),null:K(ki),atom:K(ki),unit:K(ki),modifier:K(ki),operatorKeyword:K(ki),controlKeyword:K(ki),definitionKeyword:K(ki),moduleKeyword:K(ki),operator:Ei,derefOperator:K(Ei),arithmeticOperator:K(Ei),logicOperator:K(Ei),bitwiseOperator:K(Ei),compareOperator:K(Ei),updateOperator:K(Ei),definitionOperator:K(Ei),typeOperator:K(Ei),controlOperator:K(Ei),punctuation:$0,separator:K($0),bracket:Ea,angleBracket:K(Ea),squareBracket:K(Ea),paren:K(Ea),brace:K(Ea),content:Ci,heading:Us,heading1:K(Us),heading2:K(Us),heading3:K(Us),heading4:K(Us),heading5:K(Us),heading6:K(Us),contentSeparator:K(Ci),list:K(Ci),quote:K(Ci),emphasis:K(Ci),strong:K(Ci),link:K(Ci),monospace:K(Ci),strikethrough:K(Ci),inserted:K(),deleted:K(),changed:K(),invalid:K(),meta:ld,documentMeta:K(ld),annotation:K(ld),processingInstruction:K(ld),definition:wt.defineModifier(),constant:wt.defineModifier(),function:wt.defineModifier(),standard:wt.defineModifier(),local:wt.defineModifier(),special:wt.defineModifier()};OR([{tag:ae.link,class:"tok-link"},{tag:ae.heading,class:"tok-heading"},{tag:ae.emphasis,class:"tok-emphasis"},{tag:ae.strong,class:"tok-strong"},{tag:ae.keyword,class:"tok-keyword"},{tag:ae.atom,class:"tok-atom"},{tag:ae.bool,class:"tok-bool"},{tag:ae.url,class:"tok-url"},{tag:ae.labelName,class:"tok-labelName"},{tag:ae.inserted,class:"tok-inserted"},{tag:ae.deleted,class:"tok-deleted"},{tag:ae.literal,class:"tok-literal"},{tag:ae.string,class:"tok-string"},{tag:ae.number,class:"tok-number"},{tag:[ae.regexp,ae.escape,ae.special(ae.string)],class:"tok-string2"},{tag:ae.variableName,class:"tok-variableName"},{tag:ae.local(ae.variableName),class:"tok-variableName tok-local"},{tag:ae.definition(ae.variableName),class:"tok-variableName tok-definition"},{tag:ae.special(ae.variableName),class:"tok-variableName2"},{tag:ae.definition(ae.propertyName),class:"tok-propertyName tok-definition"},{tag:ae.typeName,class:"tok-typeName"},{tag:ae.namespace,class:"tok-namespace"},{tag:ae.className,class:"tok-className"},{tag:ae.macroName,class:"tok-macroName"},{tag:ae.propertyName,class:"tok-propertyName"},{tag:ae.operator,class:"tok-operator"},{tag:ae.comment,class:"tok-comment"},{tag:ae.meta,class:"tok-meta"},{tag:ae.invalid,class:"tok-invalid"},{tag:ae.punctuation,class:"tok-punctuation"}]);var Rm;const el=new be;function HF(t){return ne.define({combine:t?e=>e.concat(t):void 0})}const WF=new be;class ci{constructor(e,n,i=[],r=""){this.data=e,this.name=r,ge.prototype.hasOwnProperty("tree")||Object.defineProperty(ge.prototype,"tree",{get(){return vi(this)}}),this.parser=n,this.extension=[Hl.of(this),ge.languageData.of((s,o,l)=>{let a=ZS(s,o,l),u=a.type.prop(el);if(!u)return[];let c=s.facet(u),d=a.type.prop(WF);if(d){let h=a.resolve(o-a.from,l);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return ZS(e,n,i).type.prop(el)==this.data}findRegions(e){let n=e.facet(Hl);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(el)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(be.mounted);if(l){if(l.tree.prop(el)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof Ge&&r(u,s.positions[a]+o)}};return r(vi(e),0),i}get allowsNesting(){return!0}}ci.setState=fe.define();function ZS(t,e,n){let i=t.facet(Hl),r=vi(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,St.ExcludeBuffers))s.type.isTop&&(r=s);return r}function vi(t){let e=t.field(ci.state,!1);return e?e.tree:Ge.empty}class GF{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Ca=null;class Ul{constructor(e,n,i=[],r,s,o,l,a){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Ul(e,n,[],Ge.empty,0,i,[],null)}startParse(){return this.parser.startParse(new GF(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Ge.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(co.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(co.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ca;Ca=this;try{return e()}finally{Ca=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=ex(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,d,h)=>a.push({fromA:u,toA:c,fromB:d,toB:h})),i=co.applyChanges(i,a),r=Ge.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&l.push({from:c,to:d})}}}return new Ul(this.parser,n,i,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=ex(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends RR{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=Ca;if(a){for(let u of r)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Ge(pn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ca}}function ex(t,e,n){return co.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Vl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Vl(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Ul.create(e.facet(Hl).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Vl(i)}}ci.state=_t.define({create:Vl.init,update(t,e){for(let n of e.effects)if(n.is(ci.setState))return n.value;return e.startState.facet(Hl)!=e.state.facet(Hl)?Vl.init(e.state):t.apply(e)}});let TR=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(TR=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Mm=typeof navigator<"u"&&(!((Rm=navigator.scheduling)===null||Rm===void 0)&&Rm.isInputPending)?()=>navigator.scheduling.isInputPending():null,XF=Pt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ci.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ci.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=TR(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(ci.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Mm?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&i.doc.length>r+1e3,a=s.context.work(()=>Mm&&Mm()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ci.setState.of(new Vl(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>fi(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Hl=ne.define({combine(t){return t.length?t[0]:null},enables:t=>[ci.state,XF,re.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class JF{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const DR=ne.define(),sw=ne.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function So(t){let e=t.facet(sw);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Xh(t,e){let n="",i=t.tabSize,r=t.facet(sw)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function NR(t,e){t instanceof ge&&(t=new ow(t));for(let i of t.state.facet(DR)){let r=i(t,e);if(r!==void 0)return r}let n=vi(t.state);return n?KF(t,n,e):null}class ow{constructor(e,n={}){this.state=e,this.options=n,this.unit=So(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Af(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const YF=new be;function KF(t,e,n){return LR(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function qF(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function QF(t){let e=t.type.prop(YF);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(be.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>n6(o,!0,1,void 0,s&&!qF(o)?r.from:void 0)}return t.parent==null?ZF:null}function LR(t,e,n){for(;t;t=t.parent){let i=QF(t);if(i)return i(lw.create(n,e,t))}return null}function ZF(){return 0}class lw extends ow{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.node=i}static create(e,n,i){return new lw(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(e6(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?LR(e,this.pos,this.base):0}}function e6(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function t6(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?n:null;l=a.to}}function n6(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||r==t.pos+o,a=e?t6(t):null;return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}const i6=200;function r6(){return ge.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+i6)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,l=-1,a=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==l)continue;l=c.from;let d=NR(o,c.from);if(d==null)continue;let h=/^\s*/.exec(c.text)[0],f=Xh(o,d);h!=f&&a.push({from:c.from,to:c.from+h.length,insert:f})}return a.length?[t,{changes:a,sequential:!0}]:t})}const s6=ne.define(),o6=new be;function l6(t,e,n){let i=vi(t);if(i.length<n)return null;let r=i.resolveInner(n,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let l=o.type.prop(o6);if(l&&(o.to<i.length-50||i.length==t.doc.length||!a6(o))){let a=l(o,t);a&&a.from<=n&&a.from>=e&&a.to>n&&(s=a)}}return s}function a6(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function BR(t,e,n){for(let i of t.facet(s6)){let r=i(t,e,n);if(r)return r}return l6(t,e,n)}function IR(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const aw=fe.define({map:IR}),rp=fe.define({map:IR});function _R(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const hc=_t.define({create(){return xe.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(aw)&&!u6(t,n.value.from,n.value.to)?t=t.update({add:[tx.range(n.value.from,n.value.to)]}):n.is(rp)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>re.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(tx.range(i,r))}return xe.set(e,!0)}});function $R(t,e,n){var i;let r=null;return(i=t.field(hc,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function u6(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function FR(t,e){return t.field(hc,!1)?e:e.concat(fe.appendConfig.of(m6()))}const c6=t=>{for(let e of _R(t)){let n=BR(t.state,e.from,e.to);if(n)return t.dispatch({effects:FR(t.state,[aw.of(n),zR(t,n)])}),!0}return!1},d6=t=>{if(!t.state.field(hc,!1))return!1;let e=[];for(let n of _R(t)){let i=$R(t.state,n.from,n.to);i&&e.push(rp.of(i),zR(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function zR(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return re.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const h6=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=BR(e,r.from,r.to);s&&n.push(aw.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:FR(t.state,n)}),!!n.length},f6=t=>{let e=t.state.field(hc,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(rp.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},p6={placeholderDOM:null,placeholderText:""},jR=ne.define({combine(t){return Bs(t,p6)}});function m6(t){let e=[hc,g6];return t&&e.push(jR.of(t)),e}const tx=xe.replace({widget:new class extends Ao{toDOM(t){let{state:e}=t,n=e.facet(jR),i=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),l=$R(t.state,o.from,o.to);l&&t.dispatch({effects:rp.of(l)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),g6=re.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class sp{constructor(e,n){this.specs=e;let i;function r(l){let a=Es.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof ci?l=>l.prop(el)==o.data:o?l=>l==o:void 0,this.style=OR(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new Es(i):null,this.themeType=n.themeType}static define(e,n){return new sp(e,n||{})}}const F0=ne.define(),UR=ne.define({combine(t){return t.length?[t[0]]:null}});function Om(t){let e=t.facet(F0);return e.length?e:t.facet(UR)}function y6(t,e){let n=[w6],i;return t instanceof sp&&(t.module&&n.push(re.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(UR.of(t)):i?n.push(F0.computeN([re.darkTheme],r=>r.facet(re.darkTheme)==(i=="dark")?[t]:[])):n.push(F0.of(t)),n}class v6{constructor(e){this.markCache=Object.create(null),this.tree=vi(e.state),this.decorations=this.buildDeco(e,Om(e.state))}update(e){let n=vi(e.state),i=Om(e.state),r=i!=Om(e.startState);n.length<e.view.viewport.to&&!r&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,n){if(!n||!this.tree.length)return xe.none;let i=new vo;for(let{from:r,to:s}of e.visibleRanges)jF(this.tree,n,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=xe.mark({class:a})))},r,s);return i.finish()}}const w6=ec.high(Pt.fromClass(v6,{decorations:t=>t.decorations})),b6=1e4,S6="()[]{}",x6=new be;function z0(t,e,n){let i=t.prop(e<0?be.openedBy:be.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function j0(t){let e=t.type.prop(x6);return e?e(t.node):t}function ad(t,e,n,i={}){let r=i.maxScanDistance||b6,s=i.brackets||S6,o=vi(t),l=o.resolveInner(e,n);for(let a=l;a;a=a.parent){let u=z0(a.type,n,s);if(u&&a.from<a.to){let c=j0(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return k6(t,e,n,a,c,u,s)}}return E6(t,e,n,o,l.type,r,s)}function k6(t,e,n,i,r,s,o){let l=i.parent,a={from:r.from,to:r.to},u=0,c=l==null?void 0:l.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=j0(c);return{start:a,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(z0(c.type,n,o))u++;else if(z0(c.type,-n,o)){if(u==0){let d=j0(c);return{start:a,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function E6(t,e,n,i,r,s,o){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let g=n>0?0:f.length-1,v=n>0?f.length:-1;g!=v;g+=n){let m=o.indexOf(f[g]);if(!(m<0||i.resolveInner(p+g,1).type!=r))if(m%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+g,to:p+g+1},matched:m>>1==a>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function nx(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class VR{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=nx(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:nx(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function C6(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||A6,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||dw}}function A6(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const ix=new WeakMap;class uw extends ci{constructor(e){let n=HF(e.languageData),i=C6(e),r,s=new class extends RR{createParse(o,l,a){return new R6(r,o,l,a)}};super(n,s,[DR.of((o,l)=>this.getIndent(o,l))],e.name),this.topNode=T6(n),r=this,this.streamParser=i,this.stateAfter=new be({perNode:!0}),this.tokenTable=e.tokenTable?new XR(i.tokenTable):O6}static define(e){return new uw(e)}getIndent(e,n){let i=vi(e.state),r=i.resolve(n);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=ix.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let l=cw(this,i,0,r.from,s??n),a,u;if(l?(u=l.state,a=l.pos+1):(u=this.streamParser.startState(e.unit),a=0),n-a>1e4)return null;for(;a<n;){let d=e.state.doc.lineAt(a),h=Math.min(n,d.to);if(d.length){let f=o?o(d.from):-1,p=new VR(d.text,e.state.tabSize,e.unit,f<0?void 0:f);for(;p.pos<h-d.from;)WR(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==n)break;a=d.to+1}let c=e.lineAt(n);return o&&s==null&&ix.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function cw(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=n+e.positions[o],u=l instanceof Ge&&a<r&&cw(t,l,a,i,r);if(u)return u}return null}function HR(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],l=e.children[s],a;if(o<i&&l instanceof Ge){if(!(a=HR(t,l,n-o,i-o,r)))break;return r?new Ge(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),o+a.length):a}}return null}function P6(t,e,n,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),l=s<=n&&o>n&&cw(t,r.tree,0-r.offset,n,o),a;if(l&&(a=HR(t,r.tree,n+r.offset,l.pos+r.offset,!1)))return{state:l.state,tree:a}}return{state:t.streamParser.startState(i?So(i):4),tree:Ge.empty}}class R6{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Ul.get(),o=r[0].from,{state:l,tree:a}=P6(e,i,o,s==null?void 0:s.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(So(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Ul.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,l=this.lineAfter(o);n+=l,i=o+l.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,n,i,r),s}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new VR(n,e?e.state.tabSize:4,e?So(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=WR(s.token,o,this.state);if(l&&(r=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Ge.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:M6,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Ge(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Ge(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function WR(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const dw=Object.create(null),Hu=[pn.none],M6=new tw(Hu),rx=[],GR=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])GR[t]=JR(dw,e);class XR{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),GR)}resolve(e){return e?this.table[e]||(this.table[e]=JR(this.extra,e)):0}}const O6=new XR(dw);function Tm(t,e){rx.indexOf(t)>-1||(rx.push(t),console.warn(e))}function JR(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||ae[s];o?typeof o=="function"?n?n=o(n):Tm(s,`Modifier ${s} used at start of tag`):n?Tm(s,`Tag ${s} used as modifier`):n=o:Tm(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let i=e.replace(/ /g,"_"),r=pn.define({id:Hu.length,name:i,props:[FF({[i]:n})]});return Hu.push(r),r.id}function T6(t){let e=pn.define({id:Hu.length,name:"Document",props:[el.add(()=>t)]});return Hu.push(e),e}const D6=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=hw(t.state,n.from);return i.line?N6(t):i.block?_6(t):!1};function fc(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const N6=fc(fw,0),L6=fc(fw,1),B6=fc(fw,2),I6=fc(YR,0),_6=fc((t,e)=>YR(t,e,F6(e)),0);function hw(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Aa=50;function $6(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Aa,i),o=t.sliceDoc(r,r+Aa),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,u=s.length-l;if(s.slice(u-e.length,u)==e&&o.slice(a,a+n.length)==n)return{open:{pos:i-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let c,d;r-i<=2*Aa?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+Aa),d=t.sliceDoc(r-Aa,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function F6(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function YR(t,e,n=e.selection.ranges){let i=n.map(s=>hw(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>$6(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=i[o],{open:u,close:c}=l;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function fw(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let l=i.length,a=1e9,u=hw(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<a&&(a=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:l.from+u,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let u=o.from+l,c=u+a.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const U0=Ir.define(),z6=Ir.define(),j6=ne.define(),KR=ne.define({combine(t){return Bs(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}});function U6(t){let e=0;return t.iterChangedRanges((n,i)=>e=i),e}const qR=_t.define({create(){return Fi.empty},update(t,e){let n=e.state.facet(KR),i=e.annotation(U0);if(i){let a=e.docChanged?j.single(U6(e.changes)):void 0,u=an.fromTransaction(e,a),c=i.side,d=c==0?t.undone:t.done;return u?d=Jh(d,d.length,n.minDepth,u):d=eM(d,e.startState.selection),new Fi(c==0?i.rest:d,c==0?d:i.rest)}let r=e.annotation(z6);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(ct.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=an.fromTransaction(e),o=e.annotation(ct.time),l=e.annotation(ct.userEvent);return s?t=t.addChanges(s,o,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Fi(t.done.map(an.fromJSON),t.undone.map(an.fromJSON))}});function V6(t={}){return[qR,KR.of(t),re.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?QR:e.inputType=="historyRedo"?V0:null;return i?(e.preventDefault(),i(n)):!1}})]}function pw(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(qR,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const QR=pw(0,!1),V0=pw(1,!1),H6=pw(0,!0);class an{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new an(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new an(e.changes&&lt.fromJSON(e.changes),[],e.mapped&&Ui.fromJSON(e.mapped),e.startSelection&&j.fromJSON(e.startSelection),e.selectionsAfter.map(j.fromJSON))}static fromTransaction(e,n){let i=Hn;for(let r of e.startState.facet(j6)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new an(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Hn)}static selection(e){return new an(void 0,Hn,void 0,void 0,e)}}function Jh(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function W6(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,l)=>{for(let a=0;a<n.length;){let u=n[a++],c=n[a++];l>=u&&o<=c&&(i=!0)}}),i}function G6(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function ZR(t,e){return t.length?e.length?t.concat(e):t:e}const Hn=[],X6=200;function eM(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-X6));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Jh(t,t.length-1,1e9,n.setSelAfter(i)))}else return[an.selection([e])]}function J6(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Dm(t,e){if(!t.length)return t;let n=t.length,i=Hn;for(;n;){let r=Y6(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[an.selection(i)]:Hn}function Y6(t,e,n){let i=ZR(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Hn,n);if(!t.changes)return an.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new an(r,fe.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const K6=/^(input\.type|delete)($|\.)/;class Fi{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Fi(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||K6.test(i))&&(!l.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,W6(l.changes,e.changes))||i=="input.type.compose")?o=Jh(o,o.length-1,r.minDepth,new an(e.changes.compose(l.changes),ZR(e.effects,l.effects),l.mapped,l.startSelection,Hn)):o=Jh(o,o.length,r.minDepth,e),new Fi(o,Hn,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Hn;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&G6(s[s.length-1],e)?this:new Fi(eM(this.done,e),this.undone,n,i)}addMapping(e){return new Fi(Dm(this.done,e),Dm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:U0.of({side:e,rest:J6(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?Hn:r.slice(0,r.length-1);return s.mapped&&(o=Dm(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:U0.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Fi.empty=new Fi(Hn,Hn);function pc(t,e){return j.create(t.ranges.map(e),t.mainIndex)}function Is(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Mo({state:t,dispatch:e},n){let i=pc(t.selection,n);return i.eq(t.selection)?!1:(e(Is(t,i)),!0)}function op(t,e){return j.cursor(e?t.to:t.from)}function tM(t,e){return Mo(t,n=>n.empty?t.moveByChar(n,e):op(n,e))}function _s(t){return t.textDirectionAt(t.state.selection.main.head)==We.LTR}const sx=t=>tM(t,!_s(t)),ox=t=>tM(t,_s(t));function nM(t,e){return Mo(t,n=>n.empty?t.moveByGroup(n,e):op(n,e))}const q6=t=>nM(t,!_s(t)),Q6=t=>nM(t,_s(t));function iM(t,e){return Mo(t,n=>{if(!n.empty)return op(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const lx=t=>iM(t,!1),ax=t=>iM(t,!0);function rM(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(re.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function sM(t,e){let n=rM(t),{state:i}=t,r=pc(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):op(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,u=l.bottom-n.marginBottom;o&&o.top>a&&o.bottom<u&&(s=re.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(Is(i,r),{effects:s}),!0}const Nm=t=>sM(t,!1),Lm=t=>sM(t,!0);function lp(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=j.cursor(i.from+s))}return r}const ux=t=>Mo(t,e=>lp(t,e,!0)),cx=t=>Mo(t,e=>lp(t,e,!1)),Z6=t=>Mo(t,e=>j.cursor(t.lineBlockAt(e.head).from,1)),ez=t=>Mo(t,e=>j.cursor(t.lineBlockAt(e.head).to,-1));function tz(t,e,n){let i=!1,r=pc(t.selection,s=>{let o=ad(t,s.head,-1)||ad(t,s.head,1)||s.head>0&&ad(t,s.head-1,1)||s.head<t.doc.length&&ad(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return n?j.range(s.anchor,l):j.cursor(l)});return i?(e(Is(t,r)),!0):!1}const nz=({state:t,dispatch:e})=>tz(t,e,!1);function $s(t,e){let n=pc(t.state.selection,i=>{let r=e(i);return j.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Is(t.state,n)),!0)}function oM(t,e){return $s(t,n=>t.moveByChar(n,e))}const dx=t=>oM(t,!_s(t)),hx=t=>oM(t,_s(t));function lM(t,e){return $s(t,n=>t.moveByGroup(n,e))}const iz=t=>lM(t,!_s(t)),rz=t=>lM(t,_s(t));function aM(t,e){return $s(t,n=>t.moveVertically(n,e))}const fx=t=>aM(t,!1),px=t=>aM(t,!0);function uM(t,e){return $s(t,n=>t.moveVertically(n,e,rM(t).height))}const mx=t=>uM(t,!1),gx=t=>uM(t,!0),yx=t=>$s(t,e=>lp(t,e,!0)),vx=t=>$s(t,e=>lp(t,e,!1)),sz=t=>$s(t,e=>j.cursor(t.lineBlockAt(e.head).from)),oz=t=>$s(t,e=>j.cursor(t.lineBlockAt(e.head).to)),wx=({state:t,dispatch:e})=>(e(Is(t,{anchor:0})),!0),bx=({state:t,dispatch:e})=>(e(Is(t,{anchor:t.doc.length})),!0),Sx=({state:t,dispatch:e})=>(e(Is(t,{anchor:t.selection.main.anchor,head:0})),!0),xx=({state:t,dispatch:e})=>(e(Is(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),lz=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),az=({state:t,dispatch:e})=>{let n=up(t).map(({from:i,to:r})=>j.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:j.create(n),userEvent:"select"})),!0};function ap(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(o);a<o?(n="delete.backward",a=ud(t,a,!1)):a>o&&(n="delete.forward",a=ud(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=ud(t,o,!1),l=ud(t,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:j.cursor(o)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?re.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function ud(t,e,n){if(t instanceof re)for(let i of t.state.facet(re.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const cM=(t,e)=>ap(t,n=>{let{state:i}=t,r=i.doc.lineAt(n),s,o;if(!e&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,n-r.from))){if(s[s.length-1]=="	")return n-1;let l=Af(s,i.tabSize),a=l%So(i)||So(i);for(let u=0;u<a&&s[s.length-1-u]==" ";u++)n--;o=n}else o=Wt(r.text,n-r.from,e,e)+r.from,o==n&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),Bm=t=>cM(t,!1),kx=t=>cM(t,!0),dM=(t,e)=>ap(t,n=>{let i=n,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==n&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let a=Wt(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),c=o(u);if(l!=null&&c!=l)break;(u!=" "||i!=n)&&(l=c),i=a}return i}),Ex=t=>dM(t,!1),uz=t=>dM(t,!0),Cx=t=>ap(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),cz=t=>ap(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),dz=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ke.of(["",""])},range:j.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},hz=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Wt(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:Wt(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:t.doc.slice(r,l).append(t.doc.slice(o,r))},range:j.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function up(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function hM(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of up(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),l=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let a of s.ranges)r.push(j.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let a of s.ranges)r.push(j.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:j.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const fz=({state:t,dispatch:e})=>hM(t,e,!1),pz=({state:t,dispatch:e})=>hM(t,e,!0);function fM(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of up(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const mz=({state:t,dispatch:e})=>fM(t,e,!1),gz=({state:t,dispatch:e})=>fM(t,e,!0),yz=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(up(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=pc(e.selection,r=>t.moveVertically(r,!0)).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function vz(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=vi(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(be.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const Ax=wz(!1);function wz(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),a=!t&&s==o&&vz(e,s);t&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let u=new ow(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=NR(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let d=["",Xh(e,c)];return a&&d.push(Xh(e,u.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:ke.of(d)},range:j.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function pM(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>n&&(i.empty||i.to>l.from)&&(e(l,r,i),n=l.number),o=l.to+1}let s=t.changes(r);return{changes:r,range:j.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const Px=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(pM(t,(n,i)=>{i.push({from:n.from,insert:t.facet(sw)})}),{userEvent:"input.indent"})),!0),Rx=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(pM(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Af(r,t.tabSize),o=0,l=Xh(t,Math.max(0,s-So(t)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0);function Te(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)mM(t,arguments[e]);return t}function mM(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)mM(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const Mx=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Wu{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?l=>s(Mx(l)):Mx,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Vt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Qy(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ai(e);let r=this.normalize(n);for(let s=0,o=i;;s++){let l=r.charCodeAt(s),a=this.match(l,o);if(a)return this.value=a,this;if(s==r.length-1)break;o==i&&s<n.length&&n.charCodeAt(s)==l&&o++}}}match(e,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:n+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(Wu.prototype[Symbol.iterator]=function(){return this});const gM={from:-1,to:-1,match:/.*/.exec("")},mw="gm"+(/x/.unicode==null?"":"u");class yM{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=gM,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new vM(e,n,i,r,s);this.re=new RegExp(n,mw+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Yh(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Yh(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Im=new WeakMap;class vl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=Im.get(e);if(!r||r.from>=i||r.to<=n){let l=new vl(n,e.sliceString(n,i));return Im.set(e,l),l}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),Im.set(e,new vl(o,s)),new vl(n,s.slice(n-o,i-o))}}class vM{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=gM,this.matchPos=Yh(e,r),this.re=new RegExp(n,mw+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=vl.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Yh(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=vl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(yM.prototype[Symbol.iterator]=vM.prototype[Symbol.iterator]=function(){return this});function bz(t){try{return new RegExp(t,mw),!0}catch{return!1}}function Yh(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function H0(t){let e=Te("input",{class:"cm-textfield",name:"line"}),n=Te("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:Kh.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},Te("label",t.state.phrase("Go to line"),": ",e)," ",Te("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,l,a,u,c]=r,d=u?+u.slice(1):0,h=a?+a:o.number;if(a&&c){let p=h/100;l&&(p=p*(l=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*p)}else a&&l&&(h=h*(l=="-"?-1:1)+o.number);let f=s.doc.line(Math.max(1,Math.min(s.doc.lines,h)));t.dispatch({effects:Kh.of(!1),selection:j.cursor(f.from+Math.max(0,Math.min(d,f.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const Kh=fe.define(),Ox=_t.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Kh)&&(t=n.value);return t},provide:t=>_l.from(t,e=>e?H0:null)}),Sz=t=>{let e=Ru(t,H0);if(!e){let n=[Kh.of(!0)];t.state.field(Ox,!1)==null&&n.push(fe.appendConfig.of([Ox,xz])),t.dispatch({effects:n}),e=Ru(t,H0)}return e&&e.dom.querySelector("input").focus(),!0},xz=re.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),kz=({state:t,dispatch:e})=>{let{selection:n}=t,i=j.create(n.ranges.map(r=>t.wordAt(r.head)||j.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Ez(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,l=new Wu(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new Wu(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const Cz=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return kz({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Ez(t,i);return r?(e(t.update({selection:t.selection.addRange(j.range(r.from,r.to),!1),effects:re.scrollIntoView(r.to)})),!0):!1},ta=ne.define({combine(t){return Bs(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Lz(e),scrollToMatch:e=>re.scrollIntoView(e)})}});class wM{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||bz(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Mz(this):new Pz(this)}getCursor(e,n=0,i){let r=e.doc?e:ge.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Fo(this,r,n,i):$o(this,r,n,i)}}class bM{constructor(e){this.spec=e}}function $o(t,e,n,i){return new Wu(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?Az(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Az(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(qh(r,n-s))!=Et.Word||e(Qh(r,n-s))!=Et.Word)&&(e(Qh(r,i-s))!=Et.Word||e(qh(r,i-s))!=Et.Word))}class Pz extends bM{constructor(e){super(e)}nextMatch(e,n,i){let r=$o(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=$o(this.spec,e,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=$o(this.spec,e,s,r),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=$o(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=$o(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Fo(t,e,n,i){return new yM(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Rz(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function qh(t,e){return t.slice(Wt(t,e,!1),e)}function Qh(t,e){return t.slice(e,Wt(t,e))}function Rz(t){return(e,n,i)=>!i[0].length||(t(qh(i.input,i.index))!=Et.Word||t(Qh(i.input,i.index))!=Et.Word)&&(t(Qh(i.input,i.index+i[0].length))!=Et.Word||t(qh(i.input,i.index+i[0].length))!=Et.Word)}class Mz extends bM{nextMatch(e,n,i){let r=Fo(this.spec,e,i,e.doc.length).next();return r.done&&(r=Fo(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Fo(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==n||l.from>s+10))return l;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n))}matchAll(e,n){let i=Fo(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Fo(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Gu=fe.define(),gw=fe.define(),bs=_t.define({create(t){return new _m(W0(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Gu)?t=new _m(n.value.create(),t.panel):n.is(gw)&&(t=new _m(t.query,n.value?yw:null));return t},provide:t=>_l.from(t,e=>e.panel)});class _m{constructor(e,n){this.query=e,this.panel=n}}const Oz=xe.mark({class:"cm-searchMatch"}),Tz=xe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Dz=Pt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(bs))}update(t){let e=t.state.field(bs);(e!=t.startState.field(bs)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return xe.none;let{view:n}=this,i=new vo;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:l,to:a}=s[r];for(;r<o-1&&a>s[r+1].from-2*250;)a=s[++r].to;t.highlight(n.state,l,a,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?Tz:Oz)})}return i.finish()}},{decorations:t=>t.decorations});function mc(t){return e=>{let n=e.state.field(bs,!1);return n&&n.query.spec.valid?t(e,n):CM(e)}}const Tx=mc((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=j.single(i.from,i.to),s=t.state.facet(ta);return t.dispatch({selection:r,effects:[vw(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),EM(t),!0}),Dx=mc((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=j.single(r.from,r.to),o=t.state.facet(ta);return t.dispatch({selection:s,effects:[vw(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),EM(t),!0}),SM=mc((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:j.create(n.map(i=>j.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Nz=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let l=new Wu(t.doc,t.sliceDoc(i,r));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(j.range(l.value.from,l.value.to))}return e(t.update({selection:j.create(s,o),userEvent:"select.search.matches"})),!0},Nx=mc((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=[],l,a,u=[];if(s.from==i&&s.to==r&&(a=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(n,s.from,s.to),u.push(re.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-a.length;l=j.single(s.from-c,s.to-c),u.push(vw(t,s)),u.push(n.facet(ta).scrollToMatch(l.main,t))}return t.dispatch({changes:o,selection:l,effects:u,userEvent:"input.replace"}),!0}),xM=mc((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:re.announce.of(i),userEvent:"input.replace.all"}),!0});function yw(t){return t.state.facet(ta).createPanel(t)}function W0(t,e){var n,i,r,s,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let u=t.facet(ta);return new wM({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function kM(t){let e=Ru(t,yw);return e&&e.dom.querySelector("[main-field]")}function EM(t){let e=kM(t);e&&e==t.root.activeElement&&e.select()}const CM=t=>{let e=t.state.field(bs,!1);if(e&&e.panel){let n=kM(t);if(n&&n!=t.root.activeElement){let i=W0(t.state,e.query.spec);i.valid&&t.dispatch({effects:Gu.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[gw.of(!0),e?Gu.of(W0(t.state,e.query.spec)):fe.appendConfig.of(Iz)]});return!0},AM=t=>{let e=t.state.field(bs,!1);if(!e||!e.panel)return!1;let n=Ru(t,yw);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:gw.of(!1)}),!0};class Lz{constructor(e){this.view=e;let n=this.query=e.state.field(bs).query.spec;this.commit=this.commit.bind(this),this.searchField=Te("input",{value:n.search,placeholder:mn(e,"Find"),"aria-label":mn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Te("input",{value:n.replace,placeholder:mn(e,"Replace"),"aria-label":mn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Te("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Te("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Te("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Te("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Te("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>Tx(e),[mn(e,"next")]),i("prev",()=>Dx(e),[mn(e,"previous")]),i("select",()=>SM(e),[mn(e,"all")]),Te("label",null,[this.caseField,mn(e,"match case")]),Te("label",null,[this.reField,mn(e,"regexp")]),Te("label",null,[this.wordField,mn(e,"by word")]),...e.state.readOnly?[]:[Te("br"),this.replaceField,i("replace",()=>Nx(e),[mn(e,"replace")]),i("replaceAll",()=>xM(e),[mn(e,"replace all")])],Te("button",{name:"close",onclick:()=>AM(e),"aria-label":mn(e,"close"),type:"button"},[""])])}commit(){let e=new wM({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Gu.of(e)}))}keydown(e){X4(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Dx:Tx)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Nx(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Gu)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ta).top}}function mn(t,e){return t.state.phrase(e)}const cd=30,dd=/[\s\.,:;?!]/;function vw(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-cd),o=Math.min(r,n+cd),l=t.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<cd;a++)if(!dd.test(l[a+1])&&dd.test(l[a])){l=l.slice(a);break}}if(o!=r){for(let a=l.length-1;a>l.length-cd;a--)if(!dd.test(l[a-1])&&dd.test(l[a])){l=l.slice(0,a);break}}return re.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const Bz=re.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Iz=[bs,ec.lowest(Dz),Bz];class _z{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=vi(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(PM(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function Lx(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function $z(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=Lx(e)+Lx(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Fz(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:$z(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class Bx{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function wl(t){return t.selection.main.from}function PM(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const zz=Ir.define();function jz(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(l=>l!=r&&n!=i&&t.sliceDoc(l.from+s,l.from+o)!=t.sliceDoc(n,i)?{range:l}:{changes:{from:l.from+s,to:i==r.from?l.to:l.from+o,insert:e},range:j.cursor(l.from+s+e.length)})),{userEvent:"input.complete"})}const Ix=new WeakMap;function Uz(t){if(!Array.isArray(t))return t;let e=Ix.get(t);return e||Ix.set(t,e=Fz(t)),e}const RM=fe.define(),ww=fe.define();class Vz{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Vt(e,n),r=ai(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Vt(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=Vt(e,0),w=ai(y),b=w==e.length?0:-100;if(y!=n[0])if(y==i[0])b+=-200;else return!1;return this.ret(b,[0,w])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,u=0;if(l<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<a;){let b=Vt(e,y);(b==n[u]||b==i[u])&&(r[u++]=y),y+=ai(b)}if(u<a)return!1}let c=0,d=0,h=!1,f=0,p=-1,g=-1,v=/[a-z]/.test(e),m=!0;for(let y=0,w=Math.min(e.length,200),b=0;y<w&&d<a;){let k=Vt(e,y);l<0&&(c<a&&k==n[c]&&(s[c++]=y),f<a&&(k==n[f]||k==i[f]?(f==0&&(p=y),g=y+1,f++):f=0));let A,R=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(A=Qy(k))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!y||R==1&&v||b==0&&R!=0)&&(n[d]==k||i[d]==k&&(h=!0)?o[d++]=y:o.length&&(m=!1)),b=R,y+=ai(k)}return d==a&&o[0]==0&&m?this.result(-100+(h?-200:0),o,e):f==a&&p==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):f==a?this.ret(-200+-700-e.length,[p,g]):d==a?this.result(-100+(h?-200:0)+-700+(m?0:-1100),o,e):n.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let l=o+(this.astral?ai(Vt(i,o)):1);s&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return this.ret(e-i.length,r)}}const wr=ne.define({combine(t){return Bs(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Hz,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>_x(e(i),n(i)),optionClass:(e,n)=>i=>_x(e(i),n(i)),addToOptions:(e,n)=>e.concat(n)})}});function _x(t,e){return t?e?t+" "+e:t:e}function Hz(t,e,n,i,r){let s=t.textDirection==We.RTL,o=s,l=!1,a="top",u,c,d=e.left-r.left,h=r.right-e.right,f=i.right-i.left,p=i.bottom-i.top;if(o&&d<Math.min(f,h)?o=!1:!o&&h<Math.min(f,d)&&(o=!0),f<=(o?d:h))u=Math.max(r.top,Math.min(n.top,r.bottom-p))-e.top,c=Math.min(400,o?d:h);else{l=!0,c=Math.min(400,(s?e.right:r.right-e.left)-30);let g=r.bottom-e.bottom;g>=p||g>e.top?u=n.bottom-e.top:(a="bottom",u=e.bottom-n.top)}return{style:`${a}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(l?s?"left-narrow":"right-narrow":o?"left":"right")}}function Wz(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r){let s=document.createElement("span");s.className="cm-completionLabel";let o=n.displayLabel||n.label,l=0;for(let a=0;a<r.length;){let u=r[a++],c=r[a++];u>l&&s.appendChild(document.createTextNode(o.slice(l,u)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(u,c))),d.className="cm-completionMatchedText",l=c}return l<o.length&&s.appendChild(document.createTextNode(o.slice(l))),s},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function $x(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class Gz{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,l=e.state.facet(wr);this.optionContent=Wz(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=$x(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{for(let u=a.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<s.length){this.applyCompletion(e,s[+c[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(wr).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:ww.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,i,r;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=s.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=$x(n.options.length,n.selected,this.view.state.facet(wr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>fi(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&Jz(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(wr).positionInfo(this.view,n,r,i,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:u}=l;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(l);d&&(c.className=d);for(let h of this.optionContent){let f=h(l,this.view.state,a);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Xz(t,e){return n=>new Gz(n,t,e)}function Jz(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<n.top?t.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(t.scrollTop+=i.bottom-n.bottom)}function Fx(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Yz(t,e){let n=[],i=null,r=a=>{n.push(a);let{section:u}=a.completion;if(u){i||(i=[]);let c=typeof u=="string"?u:u.name;i.some(d=>d.name==c)||i.push(typeof u=="string"?{name:c}:u)}};for(let a of t)if(a.hasResult()){let u=a.result.getMatch;if(a.result.filter===!1)for(let c of a.result.options)r(new Bx(c,a.source,u?u(c):[],1e9-n.length));else{let c=new Vz(e.sliceDoc(a.from,a.to));for(let d of a.result.options)if(c.match(d.label)){let h=d.displayLabel?u?u(d,c.matched):[]:c.matched;r(new Bx(d,a.source,h,c.score+(d.boost||0)))}}}if(i){let a=Object.create(null),u=0,c=(d,h)=>{var f,p;return((f=d.rank)!==null&&f!==void 0?f:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(d.name<h.name?-1:1)};for(let d of i.sort(c))u-=1e5,a[d.name]=u;for(let d of n){let{section:h}=d.completion;h&&(d.score+=a[typeof h=="string"?h:h.name])}}let s=[],o=null,l=e.facet(wr).compareCompletions;for(let a of n.sort((u,c)=>c.score-u.score||l(u.completion,c.completion))){let u=a.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?s.push(a):Fx(a.completion)>Fx(o)&&(s[s.length-1]=a),o=a.completion}return s}class tl{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new tl(this.options,zx(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s){let o=Yz(e,n);if(!o.length)return r&&e.some(a=>a.state==1)?new tl(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=n.facet(wr).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let a=r.options[r.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==a){l=u;break}}return new tl(o,zx(i,l),{pos:e.reduce((a,u)=>u.hasResult()?Math.min(a,u.from):a,1e8),create:Xz(na,OM),above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new tl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Zh{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Zh(Qz,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(wr),s=(i.override||n.languageDataAt("autocomplete",wl(n)).map(Uz)).map(l=>(this.active.find(u=>u.source==l)||new xn(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Kz(s,this.active)?o=tl.build(s,n,this.id,o,i):o&&o.disabled&&!s.some(l=>l.state==1)&&(o=null),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new xn(l.source,0):l));for(let l of e.effects)l.is(MM)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Zh(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:qz}}function Kz(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const qz={"aria-autocomplete":"list"};function zx(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Qz=[];function Zz(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class xn{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=Zz(e),r=this;i?r=r.handleUserEvent(e,i,n):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new xn(r.source,0));for(let s of e.effects)if(s.is(RM))r=new xn(r.source,1,s.value?wl(e.state):-1);else if(s.is(ww))r=new xn(r.source,0);else if(s.is(t9))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new xn(this.source,1)}handleChange(e){return e.changes.touchesRange(wl(e.startState))?new xn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new xn(this.source,this.state,e.mapPos(this.explicitPos))}}class nu extends xn{constructor(e,n,i,r,s){super(e,2,n),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,n,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=wl(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||n=="delete"&&wl(e.startState)==this.from)return new xn(this.source,n=="input"&&i.activateOnTyping?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return e9(this.result.validFor,e.state,s,o)?new nu(this.source,a,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new _z(e.state,l,a>=0)))?new nu(this.source,a,u,u.from,(r=u.to)!==null&&r!==void 0?r:wl(e.state)):new xn(this.source,1,a)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new xn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new nu(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function e9(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):PM(t,!0).test(r)}const t9=fe.define({map(t,e){return t.map(n=>n.map(e))}}),MM=fe.define(),na=_t.define({create(){return Zh.start()},update(t,e){return t.update(e)},provide:t=>[av.from(t,e=>e.tooltip),re.contentAttributes.from(t,e=>e.attrs)]});function OM(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(na).active.find(r=>r.source==e.source);return i instanceof nu?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},jz(t.state,n,i.from,i.to)),{annotations:zz.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}function hd(t,e="option"){return n=>{let i=n.state.field(na,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(wr).interactionDelay)return!1;let r=1,s;e=="page"&&(s=A5(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),n.dispatch({effects:MM.of(l)}),!0}}const jx=t=>{let e=t.state.field(na,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(wr).interactionDelay?!1:OM(t,e.open.options[e.open.selected])},n9=t=>t.state.field(na,!1)?(t.dispatch({effects:RM.of(!0)}),!0):!1,i9=t=>{let e=t.state.field(na,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:ww.of(null)}),!0)},TM={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},DM=new class extends yo{};DM.startSide=1;DM.endSide=-1;const $m="()[]{}<>";function r9(t){for(let e=0;e<$m.length;e+=2)if($m.charCodeAt(e)==t)return $m.charAt(e+1);return Qy(t<128?t:t+1)}function s9(t,e){return t.languageDataAt("closeBrackets",e)[0]||TM}const o9=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=s9(t,t.selection.main.head).brackets||TM.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let l=a9(t.doc,o.head);for(let a of i)if(a==l&&l9(t.doc,o.head)==r9(Vt(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:j.cursor(o.head-a.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function l9(t,e){let n=t.sliceString(e,e+2);return n.slice(0,ai(Vt(n,0)))}function a9(t,e){let n=t.sliceString(e-2,e);return ai(Vt(n,0))==n.length?n:n.slice(1)}class u9{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Ys{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(io).markerFilter;s&&(r=s(r));let o=xe.set(r.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?xe.widget({widget:new b9(l),diagnostic:l}).range(l.from):xe.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new Ys(o,n,Wl(o))}}function Wl(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new u9(r,s,o.diagnostic),!1}),i}function c9(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(i=>i.is(bw))||t.changes.touchesRange(n.from,n.to))}function NM(t,e){return t.field(un,!1)?e:e.concat(fe.appendConfig.of(_M))}function d9(t,e){return{effects:NM(t,[bw.of(e)])}}const bw=fe.define(),Sw=fe.define(),LM=fe.define(),un=_t.define({create(){return new Ys(xe.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=Wl(n,t.selected.diagnostic,r)||Wl(n,null,r)}t=new Ys(n,t.panel,i)}for(let n of e.effects)n.is(bw)?t=Ys.init(n.value,t.panel,e.state):n.is(Sw)?t=new Ys(t.diagnostics,n.value?cp.open:null,t.selected):n.is(LM)&&(t=new Ys(t.diagnostics,t.panel,n.value));return t},provide:t=>[_l.from(t,e=>e.panel),re.decorations.from(t,e=>e.diagnostics)]});function h9(t){let e=t.field(un,!1);return e?e.diagnostics.size:0}const f9=xe.mark({class:"cm-lintRange cm-lintRange-active"});function p9(t,e,n){let{diagnostics:i}=t.state.field(un),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(a,u,{spec:c})=>{e>=a&&e<=u&&(a==u||(e>a||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(a,s),o=Math.max(u,o))});let l=t.state.facet(io).tooltipFilter;return l&&(r=l(r)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:m9(t,r)}}}:null}function m9(t,e){return Te("ul",{class:"cm-tooltip-lint"},e.map(n=>IM(t,n,!1)))}const g9=t=>{let e=t.state.field(un,!1);(!e||!e.panel)&&t.dispatch({effects:NM(t.state,[Sw.of(!0)])});let n=Ru(t,cp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},Ux=t=>{let e=t.state.field(un,!1);return!e||!e.panel?!1:(t.dispatch({effects:Sw.of(!1)}),!0)},y9=t=>{let e=t.state.field(un,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},v9=Pt.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(io);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(io);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(d9(this.view.state,r))},i=>{fi(this.view.state,i)})}}update(t){let e=t.state.facet(io);(t.docChanged||e!=t.startState.facet(io)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),io=ne.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Bs(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function w9(t,e={}){return[io.of({source:t,config:e}),v9,_M]}function BM(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function IM(t,e,n){var i;let r=n?BM(e.actions):[];return Te("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Te("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=!1,a=h=>{if(h.preventDefault(),l)return;l=!0;let f=Wl(t.state.field(un).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),Te("u",u.slice(c,c+1)),u.slice(c+1)];return Te("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Te("div",{class:"cm-diagnosticSource"},e.source))}class b9 extends Ao{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Te("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Vx{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=IM(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class cp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)Ux(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=BM(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let a=Wl(this.view.state.field(un).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Te("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Te("div",{class:"cm-panel-lint"},this.list,Te("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Ux(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(un).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(un),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==a.diagnostic){u=d;break}u<0?(c=new Vx(this.view,a.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new Vx(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{o.top<l.top?this.list.scrollTop-=l.top-o.top:o.bottom>l.bottom&&(this.list.scrollTop+=o.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(un),i=Wl(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:LM.of(i)})}static open(e){return new cp(e)}}function S9(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function fd(t){return S9(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const x9=re.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:fd("#d11")},".cm-lintRange-warning":{backgroundImage:fd("orange")},".cm-lintRange-info":{backgroundImage:fd("#999")},".cm-lintRange-hint":{backgroundImage:fd("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),_M=[un,re.decorations.compute([un],t=>{let{selected:e,panel:n}=t.field(un);return!e||!n||e.from==e.to?xe.none:xe.set([f9.range(e.from,e.to)])}),C5(p9,{hideOn:c9}),x9],$M=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},k9=$M("up"),E9=$M("down"),C9=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(j.range(s,s)):e=j.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},A9=[{key:"Ctrl-Space",run:n9},{key:"Escape",run:i9},{key:"ArrowDown",run:hd(!0)},{key:"ArrowUp",run:hd(!1)},{key:"PageDown",run:hd(!0,"page")},{key:"PageUp",run:hd(!1,"page")},{key:"Enter",run:jx},{key:"Tab",run:jx},{key:"Mod-f",run:CM,scope:"editor search-panel"},{key:"Escape",run:AM,scope:"editor search-panel"},{key:"Alt-Enter",run:SM,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:xM,scope:"editor search-panel"},{key:"Ctrl-g",run:Sz},{key:"Mod-d",run:Cz,preventDefault:!0},{key:"Shift-Mod-l",run:Nz},{key:"Enter",run:Ax,shift:Ax},{key:"ArrowLeft",run:sx,shift:dx,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:q6,shift:iz},{key:"ArrowRight",run:ox,shift:hx,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Q6,shift:rz},{key:"ArrowUp",run:lx,shift:fx,preventDefault:!0},{key:"ArrowDown",run:ax,shift:px,preventDefault:!0},{key:"Home",run:cx,shift:vx},{mac:"Cmd-ArrowLeft",run:cx,shift:vx},{key:"Mod-Home",run:wx,shift:Sx},{mac:"Cmd-ArrowUp",run:wx,shift:Sx},{key:"PageUp",run:Nm,shift:mx},{mac:"Ctrl-ArrowUp",run:Nm,shift:mx},{key:"PageDown",run:Lm,shift:gx},{mac:"Ctrl-ArrowDown",run:Lm,shift:gx},{key:"End",run:ux,shift:yx},{mac:"Cmd-ArrowRight",run:ux,shift:yx},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:k9,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:E9,preventDefault:!0},{key:"Shift-Alt-i",run:C9},{key:"Mod-End",run:bx,shift:xx},{mac:"Cmd-ArrowDown",run:bx,shift:xx},{key:"Mod-a",run:lz},{key:"Backspace",run:o9},{key:"Backspace",run:Bm,shift:Bm},{key:"Delete",run:kx},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ex},{key:"Mod-Delete",mac:"Alt-Delete",run:uz},{mac:"Mod-Backspace",run:cz},{mac:"Mod-Delete",run:Cx},{mac:"Ctrl-b",run:sx,shift:dx,preventDefault:!0},{mac:"Ctrl-f",run:ox,shift:hx},{mac:"Ctrl-p",run:lx,shift:fx},{mac:"Ctrl-n",run:ax,shift:px},{mac:"Ctrl-a",run:Z6,shift:sz},{mac:"Ctrl-e",run:ez,shift:oz},{mac:"Ctrl-d",run:kx},{mac:"Ctrl-h",run:Bm},{mac:"Ctrl-k",run:Cx},{mac:"Ctrl-Alt-h",run:Ex},{mac:"Ctrl-o",run:dz},{mac:"Ctrl-t",run:hz},{mac:"Ctrl-v",run:Lm},{mac:"Alt-v",run:Nm},{key:"Shift-Mod-k",run:yz},{key:"Alt-ArrowDown",run:pz},{key:"Alt-ArrowUp",run:fz},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:gz},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:mz},{key:"Mod-l",run:az,preventDefault:!0},{key:"Shift-Mod-\\",run:nz},{key:"Tab",run:Px,shift:Rx,preventDefault:!0},{key:"Mod-[",run:Rx},{key:"Mod-]",run:Px},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:c6},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:d6},{key:"Mod-k Mod-0",run:h6},{key:"Mod-k Mod-j",run:f6},{key:"Mod-k Mod-c",run:L6},{key:"Mod-k Mod-u",run:B6},{key:"Mod-/",run:D6},{key:"Shift-Alt-a",run:I6},{key:"Mod-z",run:QR,preventDefault:!0},{key:"Mod-y",run:V0,preventDefault:!0},{key:"Mod-Shift-z",run:V0,preventDefault:!0},{key:"Mod-u",run:H6,preventDefault:!0},{key:"Mod-Shift-m",run:g9},{key:"F8",run:y9}];function P9(t){const e=document.createElement("div");return Hx(t.state,e),{dom:e,update(n){Hx(n.view.state,e)}}}function Hx(t,e){const n=h9(t);e.textContent=dv(Of(),"editor.lintSummary",n),e.className=hr("border-t border-stone-600 bg-stone-800 pr-3 text-right font-sans text-xs tracking-wider",n===0?"text-stone-400":"font-semibold text-red-400")}const FM="vonsim-program",R9=Pt.fromClass(class{constructor(t){Y(this,"timeout",null);this.view=t}update(t){t.docChanged&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=this.view.state.doc.toString();localStorage.setItem(FM,e),this.timeout=null},500))}}),M9=`; Bienvenido a VonSim!
; Este es un ejemplo de cdigo que calcula los primeros
; n nmeros de la sucesin de Fibonacci, y se guardan a
; partir de la posicin 1000h de la memoria.

     n EQU 10    ; Calcula los primeros 10 nmeros

       ORG 1000h
inicio DB 1

       ORG 2000h
       MOV BX, OFFSET inicio + 1
       MOV AL, 0
       MOV AH, inicio

BUCLE: CMP BX, OFFSET inicio + n
       JNS FIN
       MOV CL, AH
       ADD CL, AL
       MOV AL, AH
       MOV AH, CL
       MOV [BX], CL
       INC BX
       JMP BUCLE
  FIN: HLT
       END
`,O9=localStorage.getItem(FM)||M9,gn={comment:ae.comment,"data-directive":wt.define(),identifier:ae.variableName,instruction:wt.define(),label:ae.labelName,number:ae.number,operator:ae.operator,offset:wt.define(),"ptr-size":wt.define(),punctuation:ae.punctuation,register:wt.define(),special:wt.define(),string:ae.string,unassigned:wt.define()},T9=uw.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":Jy.includes(e)?"data-directive":Yy.includes(e)?"instruction":gh.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:gn}),D9=y6(sp.define([{tag:gn.comment,class:"text-stone-400 italic"},{tag:gn["data-directive"],class:"text-rose-400"},{tag:gn.instruction,class:"text-lime-300"},{tag:gn.number,class:"text-amber-500 font-semibold"},{tag:gn.operator,class:"text-rose-400"},{tag:gn.offset,class:"text-rose-400 italic"},{tag:gn["ptr-size"],class:"text-rose-400 italic"},{tag:gn.punctuation,class:"text-stone-500"},{tag:gn.register,class:"text-amber-500 italic"},{tag:gn.special,class:"text-sky-300 italic"},{tag:gn.string,class:"text-emerald-300"},{tag:gn.unassigned,class:"text-rose-400"}])),N9=w9(t=>{const e=t.state.doc.toString(),n=qy(e);if(n.success)return[];const i=Of();return n.errors.map(r=>{var l,a;const s=((l=r.position)==null?void 0:l.start)??0,o=((a=r.position)==null?void 0:a.end)??e.length;return{message:r.translate(i),severity:"error",from:s,to:o}})},{delay:200});function L9(){return new JF(T9,[D9,N9])}function B9({className:t}){const[e,n]=x.useState(),i=x.useCallback(r=>{r&&n(r)},[]);return x.useEffect(()=>{if(e)return window.codemirror=new re({state:ge.create({doc:O9,extensions:[ge.tabSize.of(2),oA.of(ge.readOnly.of(!1)),R9,L5(),$5,_5(),c5(),V6(),Z4(),r5(),ge.allowMultipleSelections.of(!0),r6(),g5(),XC.of([...A9,{key:"Escape",run:r=>(r.dispatch({selection:j.create([r.state.selection.main],0)}),!0)}]),L9(),_l.of(P9)]}),parent:e}),()=>{var r;return(r=window.codemirror)==null?void 0:r.destroy()}},[e]),rN(r=>r.ctrlKey&&r.key==="s",r=>{if(r.preventDefault(),!window.codemirror)return;const s=new Blob([window.codemirror.state.doc.toString()],{type:"text/plain"}),o=URL.createObjectURL(s),l=document.createElement("a");l.style.display="none",l.href=o,l.download=`vonsim-${new Date().toISOString().slice(0,16)}.txt`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}),D.jsx("div",{ref:i,className:hr("overflow-auto font-mono",t)})}var Wn=function(t,e){return Number(t.toFixed(e))},I9=function(t,e){return typeof t=="number"?t:e},ze=function(t,e,n){n&&typeof n=="function"&&n(t,e)},_9=function(t){return-Math.cos(t*Math.PI)/2+.5},$9=function(t){return t},F9=function(t){return t*t},z9=function(t){return t*(2-t)},j9=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},U9=function(t){return t*t*t},V9=function(t){return--t*t*t+1},H9=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},W9=function(t){return t*t*t*t},G9=function(t){return 1- --t*t*t*t},X9=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},J9=function(t){return t*t*t*t*t},Y9=function(t){return 1+--t*t*t*t*t},K9=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},zM={easeOut:_9,linear:$9,easeInQuad:F9,easeOutQuad:z9,easeInOutQuad:j9,easeInCubic:U9,easeOutCubic:V9,easeInOutCubic:H9,easeInQuart:W9,easeOutQuart:G9,easeInOutQuart:X9,easeInQuint:J9,easeOutQuint:Y9,easeInOutQuint:K9},jM=function(t){typeof t=="number"&&cancelAnimationFrame(t)},$i=function(t){t.mounted&&(jM(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function UM(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;$i(t),t.animation=function(){if(!t.mounted)return jM(t.animation);var o=new Date().getTime()-r,l=o/n,a=zM[e],u=a(l);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function q9(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Fs(t,e,n,i){var r=q9(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,l=o.scale,a=o.positionX,u=o.positionY,c=e.scale-l,d=e.positionX-a,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):UM(t,i,n,function(f){var p=l+c*f,g=a+d*f,v=u+h*f;s(p,g,v)})}}function Q9(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,l=s*n,a=o*n,u=i-l,c=r-a;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:l,newDiffWidth:u,newContentHeight:a,newDiffHeight:c}}var Z9=function(t,e,n,i,r,s,o){var l=t>e?n*(o?1:.5):0,a=i>r?s*(o?1:.5):0,u=t-e-l,c=l,d=i-r-a,h=a;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},xw=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=Q9(n,i,e),o=s.wrapperWidth,l=s.wrapperHeight,a=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=Z9(o,a,u,l,c,d,!!r);return h},G0=function(t,e,n,i){return i?t<e?Wn(e,2):t>n?Wn(n,2):Wn(t,2):Wn(t,2)},Gl=function(t,e){var n=xw(t,e);return t.bounds=n,n};function dp(t,e,n,i,r,s,o){var l=n.minPositionX,a=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=G0(t,l-d,u+d,i),p=G0(e,a-h,c+h,i);return{x:f,y:p}}function hp(t,e,n,i,r,s){var o=t.transformState,l=o.scale,a=o.positionX,u=o.positionY,c=i-l;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:a,y:u};var d=a-e*c,h=u-n*c,f=dp(d,h,r,s,0,0,null);return f}function gc(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var Wx=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o=r==null?void 0:r.contains(s),l=i&&s&&o;if(!l)return!1;var a=fp(s,n);return!a},Gx=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},ej=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},tj=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var l=n[0].clientX,a=n[0].clientY;t.startCoords={x:l-r,y:a-s}}};function nj(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,l=s.limitToBounds,a=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,g=n>d||n<h,v=i>f||i<p,m=n>d?u.offsetWidth:t.setup.minPositionX||0,y=i>f?u.offsetHeight:t.setup.minPositionY||0,w=hp(t,m,y,r,t.bounds,l||a),b=w.x,k=w.y;return{scale:r,positionX:g?b:n,positionY:v?k:i}}}function ij(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,l=t.bounds,a=t.transformState,u=a.scale,c=a.positionX,d=a.positionY;if(!(o===null||l===null||e===c&&n===d)){var h=dp(e,n,l,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var rj=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,l=s.lockAxisY,a=r.positionX,u=r.positionY;if(!i)return{x:a,y:u};var c=e-i.x,d=n-i.y,h=o?a:c,f=l?u:d;return{x:h,y:f}},ef=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},sj=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,l=!o||s>1||!i||e;return!!l},oj=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,l=t.transformState.scale,a=o.disabled,u=!a||l>1||!s||e;return!(!u||!n||!i)};function lj(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function Xx(t,e,n,i,r,s,o,l,a,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>a?a:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<l?l:c>s?s:c}}return i?e:G0(t,s,o,r)}function aj(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function uj(t,e){var n=sj(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,l=s.velocityAnimation.equalToMove,a=Date.now();if(i&&r&&o){var u=aj(o,l),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=a-r,g=c*c+d*d,v=Math.sqrt(g)/p;t.velocity={velocityX:h,velocityY:f,total:v}}t.lastMousePosition=e,t.velocityTime=a}}function cj(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=oj(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,l=e.velocityY,a=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,g=i.zoomAnimation,v=i.panning,m=v.lockAxisY,y=v.lockAxisX,w=g.animationType,b=p.sizeX,k=p.sizeY,A=p.velocityAlignmentTime,R=A,N=lj(t,a),E=Math.max(N,R),C=ef(t,b),P=ef(t,k),M=C*r.offsetWidth/100,T=P*r.offsetHeight/100,L=u+M,F=c-M,$=d+T,W=h-T,B=t.transformState,I=new Date().getTime();UM(t,w,E,function(V){var te=t.transformState,le=te.scale,pe=te.positionX,dt=te.positionY,$r=new Date().getTime()-I,Rt=$r/R,Ki=zM[p.animationType],yc=1-Ki(Math.min(1,Rt)),ia=1-V,vc=pe+o*ia,Oo=dt+l*ia,bi=Xx(vc,B.positionX,pe,y,f,c,u,F,L,yc),ce=Xx(Oo,B.positionY,dt,m,f,h,d,W,$,yc);(pe!==vc||dt!==Oo)&&t.setTransformState(le,bi,ce)})}}function Jx(t,e){var n=t.transformState.scale;$i(t),Gl(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?tj(t,e):ej(t,e)}function VM(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,l=r.sizeY,a=r.animationTime,u=r.animationType,c=s||e<i||!o&&!l;if(!c){var d=nj(t);d&&Fs(t,d,a,u)}}function Yx(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,l=s.sizeY;if(i){var a=rj(t,e,n),u=a.x,c=a.y,d=ef(t,o),h=ef(t,l);uj(t,{x:u,y:c}),ij(t,u,c,d,h)}}function dj(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),l=(s==null?void 0:s.width)||0,a=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=l<u||a<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?cj(t):VM(t)}}function kw(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,l=r.limitToBounds,a=gc(Wn(e,2),s,o,0,!1),u=Gl(t,a),c=hp(t,n,i,a,u,l),d=c.x,h=c.y;return{scale:a,positionX:d,positionY:h}}function HM(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,l=s.limitToBounds,a=s.zoomAnimation,u=a.disabled,c=a.animationTime,d=a.animationType,h=u||i>=o;if((i>=1||l)&&VM(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,g=kw(t,o,f,p);g&&Fs(t,g,c,d)}}var Ss=function(){return Ss=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ss.apply(this,arguments)};function Kx(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var pd={previousScale:1,scale:1,positionX:0,positionY:0},Pa={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},WM=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:pd.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:pd.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:pd.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:pd.positionY}},qx=function(t){var e=Ss({},Pa);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Pa[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Pa[n]),o=s==="[object Object]",l=s==="[object Array]";o?e[n]=Ss(Ss({},Pa[n]),t[n]):l?e[n]=Kx(Kx([],Pa[n],!0),t[n],!0):e[n]=t[n]}}),e},GM=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,l=s.minScale,a=s.zoomAnimation,u=s.smooth,c=a.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=gc(Wn(d,3),l,o,c,!1);return h};function XM(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,l=o.scale,a=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-a)/l,f=(d/2-u)/l,p=GM(t,e,n),g=kw(t,p,h,f);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");Fs(t,g,i,r)}function JM(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,l=WM(t.props),a=t.transformState,u=a.scale,c=a.positionX,d=a.positionY;if(s){var h=xw(t,l.scale),f=dp(l.positionX,l.positionY,h,o,0,0,s),p={scale:l.scale,positionX:f.x,positionY:f.y};u===l.scale&&c===l.positionX&&d===l.positionY||(i==null||i(),Fs(t,p,e,n))}}function hj(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),l=s.x*i.scale,a=s.y*i.scale;return{x:(r.x-o.x+l)/i.scale,y:(r.y-o.y+a)/i.scale}}function fj(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,l=o.limitToBounds,a=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=hj(e,i,r,s),f=h.x,p=h.y,g=d.width/s.scale,v=d.height/s.scale,m=i.offsetWidth/g,y=i.offsetHeight/v,w=gc(n||Math.min(m,y),a,u,0,!1),b=(c.width-g*w)/2,k=(c.height-v*w)/2,A=(c.left-f)*w+b,R=(c.top-p)*w+k,N=xw(t,w),E=dp(A,R,N,l,0,0,i),C=E.x,P=E.y;return{positionX:C,positionY:P,scale:w}}var pj=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),XM(t,1,e,n,i)}},mj=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),XM(t,-1,e,n,i)}},gj=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,l=o.positionX,a=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?l:e,positionY:Number.isNaN(n)?a:n,scale:Number.isNaN(i)?u:i};Fs(t,f,r,s)}}},yj=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),JM(t,e,n)}},vj=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var l=YM(e||r.scale,s,o);Fs(t,l,n,i)}}},wj=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),$i(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var l=fj(t,o,n);Fs(t,l,i,r)}}},X0=function(t){return{instance:t,zoomIn:pj(t),zoomOut:mj(t),setTransform:gj(t),resetTransform:yj(t),centerView:vj(t),zoomToElement:wj(t)}},bj=function(t){return{instance:t,state:t.transformState}},Me=function(t){var e={};return Object.assign(e,bj(t)),Object.assign(e,X0(t)),e},Fm=!1;function zm(){try{var t={get passive(){return Fm=!0,!1}};return t}catch{return Fm=!1,Fm}}var fp=function(t,e){var n=t.tagName.toUpperCase(),i=e.find(function(s){return s.toUpperCase()===n});if(i)return!0;var r=e.find(function(s){return t.classList.contains(s)});return!!r},J0=function(t){t&&clearTimeout(t)},Sj=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},YM=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function xj(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var kj=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,l=t.isInitialized,a=t.isPanning,u=e.target,c=l&&!a&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=fp(u,o);return!d},Ej=function(t){return t?t.deltaY<0?1:-1:0};function Cj(t,e){var n=Ej(t),i=I9(e,n);return i}function KM(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var Aj=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,l=t.setup,a=l.maxScale,u=l.minScale,c=l.zoomAnimation,d=l.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(r)return p;var g=i?!1:!f,v=gc(Wn(p,3),u,a,h,g&&!d);return v},Pj=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Rj=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,l=s&&!i&&o;if(!l)return!1;var a=fp(o,r);return!a},Mj=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},Oj=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Wn(r[0].clientX-i.left,5),o=Wn(r[0].clientY-i.top,5),l=Wn(r[1].clientX-i.left,5),a=Wn(r[1].clientY-i.top,5);return{x:(s+l)/2/e,y:(o+a)/2/e}},qM=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},Tj=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,l=r.zoomAnimation,a=r.disablePadding,u=l.size,c=l.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return gc(Wn(h,2),o,s,u,!c&&!a)},Dj=160,Nj=100,Lj=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||($i(t),ze(Me(t),e,i),ze(Me(t),e,r))},Bj=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,l=t.transformState,a=l.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,g=d.size,v=d.disabled,m=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=Cj(e,null),b=p?y*Math.abs(e.deltaY):m,k=Aj(t,w,b,!e.ctrlKey);if(a!==k){var A=Gl(t,k),R=KM(e,s,a),N=v||g===0||c||f,E=u&&N,C=hp(t,R.x,R.y,k,A,E),P=C.x,M=C.y;t.previousWheelEvent=e,t.setTransformState(k,P,M),ze(Me(t),e,i),ze(Me(t),e,r)}},Ij=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;J0(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(HM(t,e.x,e.y),t.wheelAnimationTimer=null)},Nj);var s=Pj(t,e);s&&(J0(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,ze(Me(t),e,i),ze(Me(t),e,r))},Dj))},_j=function(t,e){var n=qM(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,$i(t)},$j=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.transformState.scale,s=t.setup,o=s.limitToBounds,l=s.centerZoomedOut,a=s.zoomAnimation,u=a.disabled,c=a.size;if(!(i===null||!n)){var d=Oj(e,r,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var h=qM(e),f=Tj(t,h);if(f!==r){var p=Gl(t,f),g=u||c===0||l,v=o&&g,m=hp(t,d.x,d.y,f,p,v),y=m.x,w=m.y;t.pinchMidpoint=d,t.lastDistance=h,t.setTransformState(f,y,w)}}}},Fj=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,HM(t,e==null?void 0:e.x,e==null?void 0:e.y)},QM=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;J0(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,ze(Me(t),e,n)},i)},zj=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,l=s.animationType;ze(Me(t),e,i),JM(t,o,l,function(){return ze(Me(t),e,r)}),QM(t,e)};function jj(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,l=t.props,a=l.onZoomStart,u=l.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,g=c.animationType;if(!d&&!i){if(h==="reset")return zj(t,e);if(!s)return console.error("No ContentComponent found");var v=h==="zoomOut"?-1:1,m=GM(t,v,f);if(o!==m){ze(Me(t),e,a);var y=KM(e,s,o),w=kw(t,m,y.x,y.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");ze(Me(t),e,u),Fs(t,w,p,g),QM(t,e)}}}var Uj=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,l=s.excluded,a=e.target,u=r==null?void 0:r.contains(a),c=n&&a&&u&&!o;if(!c)return!1;var d=fp(a,l);return!d},Vj=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){Gl(n,n.transformState.scale),n.setup=qx(i)},this.initializeWindowEvents=function(){var i,r=zm(),s=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,r),o==null||o.addEventListener("mousemove",n.onPanning,r),o==null||o.addEventListener("mouseup",n.onPanningStop,r),s==null||s.addEventListener("mouseleave",n.clearPanning,r),o==null||o.addEventListener("keyup",n.setKeyUnPressed,r),o==null||o.addEventListener("keydown",n.setKeyPressed,r)},this.cleanupWindowEvents=function(){var i,r,s=zm(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,l=o==null?void 0:o.defaultView;l==null||l.removeEventListener("mousedown",n.onPanningStart,s),l==null||l.removeEventListener("mousemove",n.onPanning,s),l==null||l.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),l==null||l.removeEventListener("keyup",n.setKeyUnPressed,s),l==null||l.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),$i(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=zm();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(Me(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(Me(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=kj(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(Lj(n,i),Bj(n,i),Ij(n,i))}}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=Wx(n,i);if(o){var l=n.isPressingKeys(n.setup.panning.activationKeys);l&&(i.preventDefault(),i.stopPropagation(),$i(n),Jx(n,i),ze(Me(n),i,s))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=Gx(n);if(o){var l=n.isPressingKeys(n.setup.panning.activationKeys);l&&(i.preventDefault(),i.stopPropagation(),Yx(n,i.clientX,i.clientY),ze(Me(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(dj(n),ze(Me(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,l=s.onZoomStart;if(!r){var a=Rj(n,i);a&&(_j(n,i),$i(n),ze(Me(n),i,o),ze(Me(n),i,l))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,l=s.onZoom;if(!r){var a=Mj(n);a&&(i.preventDefault(),i.stopPropagation(),$j(n,i),ze(Me(n),i,o),ze(Me(n),i,l))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(Fj(n),ze(Me(n),i,s),ze(Me(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=Wx(n,i);if(o){var l=n.lastTouch&&+new Date-n.lastTouch<200;if(l&&i.touches.length===1)n.onDoubleClick(i);else{n.lastTouch=+new Date,$i(n);var a=i.touches,u=a.length===1,c=a.length===2;u&&($i(n),Jx(n,i),ze(Me(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=Gx(n);if(!o)return;i.preventDefault(),i.stopPropagation();var l=i.touches[0];Yx(n,l.clientX,l.clientY),ze(Me(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=Uj(n,i);s&&jj(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var l=Me(n);n.onChangeCallbacks.forEach(function(a){return a(l)}),ze(l,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=YM(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Sj(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,l=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=l}},this.getContext=function(){return Me(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Gl(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=Me(n);ze(s,void 0,n.props.onInit)},this.props=e,this.setup=qx(this.props),this.transformState=WM(this.props)}return t}(),Ew=z.createContext(null),Hj=function(t,e){return typeof t=="function"?t(e):t},Wj=z.forwardRef(function(t,e){var n=x.useRef(new Vj(t)).current,i=Hj(t.children,X0(n));return x.useImperativeHandle(e,function(){return X0(n)},[n]),x.useEffect(function(){n.update(t)},[n,t]),z.createElement(Ew.Provider,{value:n},i)});z.forwardRef(function(t,e){var n=x.useRef(null),i=x.useContext(Ew);return x.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),z.createElement("div",Ss({},t,{ref:xj([n,e])}))});function Gj(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var Xj=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Qx={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Gj(Xj);var Jj=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,l=t.contentStyle,a=t.wrapperProps,u=a===void 0?{}:a,c=t.contentProps,d=c===void 0?{}:c,h=x.useContext(Ew).init,f=x.useRef(null),p=x.useRef(null);return x.useEffect(function(){var g=f.current,v=p.current;g!==null&&v!==null&&h&&h(g,v)},[]),z.createElement("div",Ss({},u,{ref:f,className:"react-transform-wrapper ".concat(Qx.wrapper," ").concat(i),style:o}),z.createElement("div",Ss({},d,{ref:p,className:"react-transform-component ".concat(Qx.content," ").concat(s),style:l}),e))};function Yj({className:t}){return D.jsx("div",{className:t,children:D.jsxs("div",{className:"relative h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900",children:[D.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-lime-700 px-2 py-1 text-3xl font-bold text-white",children:"CPU"}),D.jsx(Kj,{}),D.jsx(Qt,{name:"left",className:"left-[60px] top-[70px]"}),D.jsx(Qt,{name:"right",className:"left-[60px] top-[130px]"}),D.jsx(Qt,{name:"result",className:"left-[300px] top-[100px]"}),D.jsx(qj,{}),D.jsx(Qt,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),D.jsx(Qt,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),D.jsx(Qt,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),D.jsx(Qt,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),D.jsx(Qt,{name:"id",className:"left-[520px] top-[190px]"}),D.jsx(Qt,{name:"MBR",className:"right-[-38px] top-[233px]"}),D.jsx(Qt,{name:"IR",className:"left-[171px] top-[270px]"}),D.jsx(Qj,{}),D.jsx(Qt,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),D.jsx(Qt,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),D.jsx(Qt,{name:"ri",className:"left-[450px] top-[372px]"}),D.jsx(Qt,{name:"MAR",className:"right-[-51px] top-[333px]"})]})})}function Kj(){const t=Kl(Lv),e=zf(),{strokeDashoffset:n}=Pv({ref:e.cpu.highlightPath,from:{strokeDashoffset:1},to:{strokeDashoffset:0},immediate:!1,config:{duration:1500,easing:Lf.easeInOutSine}});return D.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[D.jsx("path",{className:"fill-none stroke-stone-700 stroke-[10px]",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 273 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),D.jsx(Rv.path,{d:t,className:"fill-none stroke-lime-500 stroke-[10px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,strokeDashoffset:n})]})}function Qt({name:t,emphasis:e=!1,className:n}){const i=Kl(Ie[t]),r=i.low,s=i.is16bits()?i.high:null,o=zf(),l=Pv({ref:o.cpu[t],from:{backgroundColor:"rgb(41 37 36)"},to:{backgroundColor:"rgb(132 204 22)"},immediate:!1,config:{duration:250,easing:Lf.easeOutQuart}});return D.jsxs(Rv.div,{className:hr("absolute flex w-min items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none",e?"border-lime-500 text-lg":"border-stone-600 text-base",n),style:l,children:[D.jsx("span",{className:"mr-2 font-bold",children:t}),s&&D.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:s.toString("hex")}),D.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:r.toString("hex")})]})}function qj(){const t=Kl(Ie.FLAGS),e=t.bit(0),n=t.bit(6),i=t.bit(7),r=t.bit(9),s=t.bit(11),o=zf(),l=Pv({ref:o.cpu.FLAGS,from:{backgroundColor:"rgb(41 37 36)"},to:{backgroundColor:"rgb(132 204 22)"},immediate:!1,config:{duration:250,easing:Lf.easeOutQuart}});return D.jsxs(D.Fragment,{children:[D.jsx("svg",{className:"absolute left-[215px] top-[60px] h-[110px] w-[110px]",viewBox:"0 0 110 110",children:D.jsx("path",{d:"M 5 5 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})}),D.jsxs(Rv.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-lime-500 bg-stone-800 px-2 py-1 font-mono leading-none",style:l,children:[D.jsx("span",{className:hr("rounded p-1 font-light",e?"bg-lime-500":"bg-stone-900"),children:"CF"}),D.jsx("span",{className:hr("rounded p-1 font-light",n?"bg-lime-500":"bg-stone-900"),children:"ZF"}),D.jsx("span",{className:hr("rounded p-1 font-light",i?"bg-lime-500":"bg-stone-900"),children:"SF"}),D.jsx("span",{className:hr("rounded p-1 font-light",r?"bg-lime-500":"bg-stone-900"),children:"IF"}),D.jsx("span",{className:hr("rounded p-1 font-light",s?"bg-lime-500":"bg-stone-900"),children:"OF"})]})]})}function Qj(){return D.jsx("div",{className:"absolute bottom-[30px] left-[30px] h-[150px] w-[350px] rounded-lg border border-stone-600 bg-stone-800"})}function Zj(){return D.jsx(Wj,{children:D.jsx(Jj,{wrapperClass:"!h-full !w-full relative",children:D.jsx(Yj,{className:"h-full w-full"})})})}function eU(){const t=Gf(),{updateServiceWorker:e}=YD({onNeedRefresh(){Vy(t("update.update-available"),{action:{label:t("update.reload"),onClick:()=>e(!0)}})}});return D.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",children:[D.jsx(RF,{}),D.jsxs("main",{className:"flex grow gap-2 overflow-auto p-2",children:[D.jsx("section",{className:"w-full overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:D.jsx(B9,{className:"h-full w-full"})}),D.jsx("section",{className:"w-full rounded-lg border border-stone-600 bg-stone-800",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='rgb(120 113 108)' fill-opacity='0.4'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`},children:D.jsx(Zj,{})})]})]})}window.codemirror=null;jm.createRoot(document.getElementById("root")).render(D.jsxs(z.StrictMode,{children:[D.jsx(HD,{richColors:!0,closeButton:!0,position:"top-center"}),D.jsx(G5,{children:D.jsx(SI,{children:D.jsx(eU,{})})})]}));
