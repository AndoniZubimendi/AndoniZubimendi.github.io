var aO=Object.defineProperty;var uO=(t,e,n)=>e in t?aO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(uO(t,typeof e!="symbol"?e+"":e,n),n),bp=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var x=(t,e,n)=>(bp(t,e,"read from private field"),n?n.call(t):e.get(t)),ie=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},F=(t,e,n,i)=>(bp(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var Oe=(t,e,n)=>(bp(t,e,"access private method"),n);function cO(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function nc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pk={exports:{}},mf={},mk={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic=Symbol.for("react.element"),dO=Symbol.for("react.portal"),hO=Symbol.for("react.fragment"),fO=Symbol.for("react.strict_mode"),pO=Symbol.for("react.profiler"),mO=Symbol.for("react.provider"),gO=Symbol.for("react.context"),yO=Symbol.for("react.forward_ref"),vO=Symbol.for("react.suspense"),wO=Symbol.for("react.memo"),bO=Symbol.for("react.lazy"),$w=Symbol.iterator;function xO(t){return t===null||typeof t!="object"?null:(t=$w&&t[$w]||t["@@iterator"],typeof t=="function"?t:null)}var gk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yk=Object.assign,vk={};function oa(t,e,n){this.props=t,this.context=e,this.refs=vk,this.updater=n||gk}oa.prototype.isReactComponent={};oa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wk(){}wk.prototype=oa.prototype;function sy(t,e,n){this.props=t,this.context=e,this.refs=vk,this.updater=n||gk}var oy=sy.prototype=new wk;oy.constructor=sy;yk(oy,oa.prototype);oy.isPureReactComponent=!0;var Fw=Array.isArray,bk=Object.prototype.hasOwnProperty,ly={current:null},xk={key:!0,ref:!0,__self:!0,__source:!0};function Sk(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)bk.call(e,i)&&!xk.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:ic,type:t,key:s,ref:o,props:r,_owner:ly.current}}function SO(t,e){return{$$typeof:ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ay(t){return typeof t=="object"&&t!==null&&t.$$typeof===ic}function kO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zw=/\/+/g;function xp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kO(""+t.key):e.toString(36)}function Cd(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ic:case dO:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+xp(o,0):i,Fw(r)?(n="",t!=null&&(n=t.replace(zw,"$&/")+"/"),Cd(r,e,n,"",function(u){return u})):r!=null&&(ay(r)&&(r=SO(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(zw,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Fw(t))for(var l=0;l<t.length;l++){s=t[l];var a=i+xp(s,l);o+=Cd(s,e,n,a,r)}else if(a=xO(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=i+xp(s,l++),o+=Cd(s,e,n,a,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rc(t,e,n){if(t==null)return t;var i=[],r=0;return Cd(t,i,"","",function(s){return e.call(n,s,r++)}),i}function CO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Ed={transition:null},EO={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Ed,ReactCurrentOwner:ly};ve.Children={map:Rc,forEach:function(t,e,n){Rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rc(t,function(){e++}),e},toArray:function(t){return Rc(t,function(e){return e})||[]},only:function(t){if(!ay(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=oa;ve.Fragment=hO;ve.Profiler=pO;ve.PureComponent=sy;ve.StrictMode=fO;ve.Suspense=vO;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EO;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=yk({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ly.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)bk.call(e,a)&&!xk.hasOwnProperty(a)&&(i[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:ic,type:t.type,key:r,ref:s,props:i,_owner:o}};ve.createContext=function(t){return t={$$typeof:gO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mO,_context:t},t.Consumer=t};ve.createElement=Sk;ve.createFactory=function(t){var e=Sk.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:yO,render:t}};ve.isValidElement=ay;ve.lazy=function(t){return{$$typeof:bO,_payload:{_status:-1,_result:t},_init:CO}};ve.memo=function(t,e){return{$$typeof:wO,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Ed.transition;Ed.transition={};try{t()}finally{Ed.transition=e}};ve.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ve.useCallback=function(t,e){return rn.current.useCallback(t,e)};ve.useContext=function(t){return rn.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};ve.useEffect=function(t,e){return rn.current.useEffect(t,e)};ve.useId=function(){return rn.current.useId()};ve.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return rn.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};ve.useRef=function(t){return rn.current.useRef(t)};ve.useState=function(t){return rn.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return rn.current.useTransition()};ve.version="18.2.0";mk.exports=ve;var S=mk.exports;const U=nc(S),AO=cO({__proto__:null,default:U},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PO=S,RO=Symbol.for("react.element"),MO=Symbol.for("react.fragment"),OO=Object.prototype.hasOwnProperty,TO=PO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DO={key:!0,ref:!0,__self:!0,__source:!0};function kk(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)OO.call(e,i)&&!DO.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:RO,type:t,key:s,ref:o,props:r,_owner:TO.current}}mf.Fragment=MO;mf.jsx=kk;mf.jsxs=kk;pk.exports=mf;var M=pk.exports;var Jm={},Ck={exports:{}},_n={},Ek={exports:{}},Ak={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,_){var j=L.length;L.push(_);e:for(;0<j;){var ee=j-1>>>1,re=L[ee];if(0<r(re,_))L[ee]=_,L[j]=re,j=ee;else break e}}function n(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var _=L[0],j=L.pop();if(j!==_){L[0]=j;e:for(var ee=0,re=L.length,me=re>>>1;ee<me;){var nt=2*(ee+1)-1,ot=L[nt],Qe=nt+1,gt=L[Qe];if(0>r(ot,j))Qe<re&&0>r(gt,ot)?(L[ee]=gt,L[Qe]=j,ee=Qe):(L[ee]=ot,L[nt]=j,ee=nt);else if(Qe<re&&0>r(gt,j))L[ee]=gt,L[Qe]=j,ee=Qe;else break e}}return _}function r(L,_){var j=L.sortIndex-_.sortIndex;return j!==0?j:L.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var _=n(u);_!==null;){if(_.callback===null)i(u);else if(_.startTime<=L)i(u),_.sortIndex=_.expirationTime,e(a,_);else break;_=n(u)}}function b(L){if(g=!1,w(L),!p)if(n(a)!==null)p=!0,$(k);else{var _=n(u);_!==null&&z(b,_.startTime-L)}}function k(L,_){p=!1,g&&(g=!1,m(B),B=-1),f=!0;var j=h;try{for(w(_),d=n(a);d!==null&&(!(d.expirationTime>_)||L&&!R());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,h=d.priorityLevel;var re=ee(d.expirationTime<=_);_=t.unstable_now(),typeof re=="function"?d.callback=re:d===n(a)&&i(a),w(_)}else i(a);d=n(a)}if(d!==null)var me=!0;else{var nt=n(u);nt!==null&&z(b,nt.startTime-_),me=!1}return me}finally{d=null,h=j,f=!1}}var A=!1,P=null,B=-1,C=5,E=-1;function R(){return!(t.unstable_now()-E<C)}function O(){if(P!==null){var L=t.unstable_now();E=L;var _=!0;try{_=P(!0,L)}finally{_?N():(A=!1,P=null)}}else A=!1}var N;if(typeof y=="function")N=function(){y(O)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,I=T.port2;T.port1.onmessage=O,N=function(){I.postMessage(null)}}else N=function(){v(O,0)};function $(L){P=L,A||(A=!0,N())}function z(L,_){B=v(function(){L(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,$(k))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var _=3;break;default:_=h}var j=h;h=_;try{return L()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,_){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=h;h=L;try{return _()}finally{h=j}},t.unstable_scheduleCallback=function(L,_,j){var ee=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ee+j:ee):j=ee,L){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=j+re,L={id:c++,callback:_,priorityLevel:L,startTime:j,expirationTime:re,sortIndex:-1},j>ee?(L.sortIndex=j,e(u,L),n(a)===null&&L===n(u)&&(g?(m(B),B=-1):g=!0,z(b,j-ee))):(L.sortIndex=re,e(a,L),p||f||(p=!0,$(k))),L},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(L){var _=h;return function(){var j=h;h=_;try{return L.apply(this,arguments)}finally{h=j}}}})(Ak);Ek.exports=Ak;var NO=Ek.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk=S,In=NO;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rk=new Set,mu={};function No(t,e){jl(t,e),jl(t+"Capture",e)}function jl(t,e){for(mu[t]=e,t=0;t<e.length;t++)Rk.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ym=Object.prototype.hasOwnProperty,LO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jw={},Uw={};function BO(t){return Ym.call(Uw,t)?!0:Ym.call(jw,t)?!1:LO.test(t)?Uw[t]=!0:(jw[t]=!0,!1)}function IO(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _O(t,e,n,i){if(e===null||typeof e>"u"||IO(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var uy=/[\-:]([a-z])/g;function cy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uy,cy);Nt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uy,cy);Nt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uy,cy);Nt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function dy(t,e,n,i){var r=Nt.hasOwnProperty(e)?Nt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_O(e,n,r,i)&&(n=null),i||r===null?BO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Vr=Pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),Zo=Symbol.for("react.fragment"),hy=Symbol.for("react.strict_mode"),Km=Symbol.for("react.profiler"),Mk=Symbol.for("react.provider"),Ok=Symbol.for("react.context"),fy=Symbol.for("react.forward_ref"),qm=Symbol.for("react.suspense"),Qm=Symbol.for("react.suspense_list"),py=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),Tk=Symbol.for("react.offscreen"),Vw=Symbol.iterator;function ma(t){return t===null||typeof t!="object"?null:(t=Vw&&t[Vw]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,Sp;function $a(t){if(Sp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sp=e&&e[1]||""}return`
`+Sp+t}var kp=!1;function Cp(t,e){if(!t||kp)return"";kp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var a=`
`+r[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{kp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$a(t):""}function $O(t){switch(t.tag){case 5:return $a(t.type);case 16:return $a("Lazy");case 13:return $a("Suspense");case 19:return $a("SuspenseList");case 0:case 2:case 15:return t=Cp(t.type,!1),t;case 11:return t=Cp(t.type.render,!1),t;case 1:return t=Cp(t.type,!0),t;default:return""}}function Zm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zo:return"Fragment";case Qo:return"Portal";case Km:return"Profiler";case hy:return"StrictMode";case qm:return"Suspense";case Qm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ok:return(t.displayName||"Context")+".Consumer";case Mk:return(t._context.displayName||"Context")+".Provider";case fy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case py:return e=t.displayName||null,e!==null?e:Zm(t.type)||"Memo";case qr:e=t._payload,t=t._init;try{return Zm(t(e))}catch{}}return null}function FO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zm(e);case 8:return e===hy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zO(t){var e=Dk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oc(t){t._valueTracker||(t._valueTracker=zO(t))}function Nk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Dk(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Zd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eg(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hw(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ds(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lk(t,e){e=e.checked,e!=null&&dy(t,"checked",e,!1)}function tg(t,e){Lk(t,e);var n=Ds(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ng(t,e.type,n):e.hasOwnProperty("defaultValue")&&ng(t,e.type,Ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ww(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ng(t,e,n){(e!=="number"||Zd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fa=Array.isArray;function pl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ds(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ig(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Fa(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ds(n)}}function Bk(t,e){var n=Ds(e.value),i=Ds(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Xw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ik(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ik(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tc,_k=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tc=Tc||document.createElement("div"),Tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ka={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jO=["Webkit","ms","Moz","O"];Object.keys(Ka).forEach(function(t){jO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ka[e]=Ka[t]})});function $k(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ka.hasOwnProperty(t)&&Ka[t]?(""+e).trim():e+"px"}function Fk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=$k(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var UO=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sg(t,e){if(e){if(UO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function og(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lg=null;function my(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ag=null,ml=null,gl=null;function Jw(t){if(t=oc(t)){if(typeof ag!="function")throw Error(W(280));var e=t.stateNode;e&&(e=bf(e),ag(t.stateNode,t.type,e))}}function zk(t){ml?gl?gl.push(t):gl=[t]:ml=t}function jk(){if(ml){var t=ml,e=gl;if(gl=ml=null,Jw(t),e)for(t=0;t<e.length;t++)Jw(e[t])}}function Uk(t,e){return t(e)}function Vk(){}var Ep=!1;function Hk(t,e,n){if(Ep)return t(e,n);Ep=!0;try{return Uk(t,e,n)}finally{Ep=!1,(ml!==null||gl!==null)&&(Vk(),jk())}}function yu(t,e){var n=t.stateNode;if(n===null)return null;var i=bf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var ug=!1;if(_r)try{var ga={};Object.defineProperty(ga,"passive",{get:function(){ug=!0}}),window.addEventListener("test",ga,ga),window.removeEventListener("test",ga,ga)}catch{ug=!1}function VO(t,e,n,i,r,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var qa=!1,eh=null,th=!1,cg=null,HO={onError:function(t){qa=!0,eh=t}};function WO(t,e,n,i,r,s,o,l,a){qa=!1,eh=null,VO.apply(HO,arguments)}function GO(t,e,n,i,r,s,o,l,a){if(WO.apply(this,arguments),qa){if(qa){var u=eh;qa=!1,eh=null}else throw Error(W(198));th||(th=!0,cg=u)}}function Lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yw(t){if(Lo(t)!==t)throw Error(W(188))}function XO(t){var e=t.alternate;if(!e){if(e=Lo(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Yw(r),t;if(s===i)return Yw(r),e;s=s.sibling}throw Error(W(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==i)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function Gk(t){return t=XO(t),t!==null?Xk(t):null}function Xk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Xk(t);if(e!==null)return e;t=t.sibling}return null}var Jk=In.unstable_scheduleCallback,Kw=In.unstable_cancelCallback,JO=In.unstable_shouldYield,YO=In.unstable_requestPaint,st=In.unstable_now,KO=In.unstable_getCurrentPriorityLevel,gy=In.unstable_ImmediatePriority,Yk=In.unstable_UserBlockingPriority,nh=In.unstable_NormalPriority,qO=In.unstable_LowPriority,Kk=In.unstable_IdlePriority,gf=null,Yi=null;function QO(t){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(gf,t,void 0,(t.current.flags&128)===128)}catch{}}var bi=Math.clz32?Math.clz32:tT,ZO=Math.log,eT=Math.LN2;function tT(t){return t>>>=0,t===0?32:31-(ZO(t)/eT|0)|0}var Dc=64,Nc=4194304;function za(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ih(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?i=za(l):(s&=o,s!==0&&(i=za(s)))}else o=n&~r,o!==0?i=za(o):s!==0&&(i=za(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-bi(e),r=1<<n,i|=t[n],e&=~r;return i}function nT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iT(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bi(s),l=1<<o,a=r[o];a===-1?(!(l&n)||l&i)&&(r[o]=nT(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function dg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qk(){var t=Dc;return Dc<<=1,!(Dc&4194240)&&(Dc=64),t}function Ap(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bi(e),t[e]=n}function rT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-bi(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function yy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-bi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Re=0;function Qk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zk,vy,e2,t2,n2,hg=!1,Lc=[],xs=null,Ss=null,ks=null,vu=new Map,wu=new Map,os=[],sT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qw(t,e){switch(t){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":vu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(e.pointerId)}}function ya(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=oc(e),e!==null&&vy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function oT(t,e,n,i,r){switch(e){case"focusin":return xs=ya(xs,t,e,n,i,r),!0;case"dragenter":return Ss=ya(Ss,t,e,n,i,r),!0;case"mouseover":return ks=ya(ks,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return vu.set(s,ya(vu.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,wu.set(s,ya(wu.get(s)||null,t,e,n,i,r)),!0}return!1}function i2(t){var e=so(t.target);if(e!==null){var n=Lo(e);if(n!==null){if(e=n.tag,e===13){if(e=Wk(n),e!==null){t.blockedOn=e,n2(t.priority,function(){e2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ad(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);lg=i,n.target.dispatchEvent(i),lg=null}else return e=oc(n),e!==null&&vy(e),t.blockedOn=n,!1;e.shift()}return!0}function Qw(t,e,n){Ad(t)&&n.delete(e)}function lT(){hg=!1,xs!==null&&Ad(xs)&&(xs=null),Ss!==null&&Ad(Ss)&&(Ss=null),ks!==null&&Ad(ks)&&(ks=null),vu.forEach(Qw),wu.forEach(Qw)}function va(t,e){t.blockedOn===e&&(t.blockedOn=null,hg||(hg=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,lT)))}function bu(t){function e(r){return va(r,t)}if(0<Lc.length){va(Lc[0],t);for(var n=1;n<Lc.length;n++){var i=Lc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(xs!==null&&va(xs,t),Ss!==null&&va(Ss,t),ks!==null&&va(ks,t),vu.forEach(e),wu.forEach(e),n=0;n<os.length;n++)i=os[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<os.length&&(n=os[0],n.blockedOn===null);)i2(n),n.blockedOn===null&&os.shift()}var yl=Vr.ReactCurrentBatchConfig,rh=!0;function aT(t,e,n,i){var r=Re,s=yl.transition;yl.transition=null;try{Re=1,wy(t,e,n,i)}finally{Re=r,yl.transition=s}}function uT(t,e,n,i){var r=Re,s=yl.transition;yl.transition=null;try{Re=4,wy(t,e,n,i)}finally{Re=r,yl.transition=s}}function wy(t,e,n,i){if(rh){var r=fg(t,e,n,i);if(r===null)Ip(t,e,i,sh,n),qw(t,i);else if(oT(r,t,e,n,i))i.stopPropagation();else if(qw(t,i),e&4&&-1<sT.indexOf(t)){for(;r!==null;){var s=oc(r);if(s!==null&&Zk(s),s=fg(t,e,n,i),s===null&&Ip(t,e,i,sh,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Ip(t,e,i,null,n)}}var sh=null;function fg(t,e,n,i){if(sh=null,t=my(i),t=so(t),t!==null)if(e=Lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sh=t,null}function r2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KO()){case gy:return 1;case Yk:return 4;case nh:case qO:return 16;case Kk:return 536870912;default:return 16}default:return 16}}var ms=null,by=null,Pd=null;function s2(){if(Pd)return Pd;var t,e=by,n=e.length,i,r="value"in ms?ms.value:ms.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Pd=r.slice(t,1<i?1-i:void 0)}function Rd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bc(){return!0}function Zw(){return!1}function $n(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bc:Zw,this.isPropagationStopped=Zw,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bc)},persist:function(){},isPersistent:Bc}),e}var la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xy=$n(la),sc=qe({},la,{view:0,detail:0}),cT=$n(sc),Pp,Rp,wa,yf=qe({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wa&&(wa&&t.type==="mousemove"?(Pp=t.screenX-wa.screenX,Rp=t.screenY-wa.screenY):Rp=Pp=0,wa=t),Pp)},movementY:function(t){return"movementY"in t?t.movementY:Rp}}),e1=$n(yf),dT=qe({},yf,{dataTransfer:0}),hT=$n(dT),fT=qe({},sc,{relatedTarget:0}),Mp=$n(fT),pT=qe({},la,{animationName:0,elapsedTime:0,pseudoElement:0}),mT=$n(pT),gT=qe({},la,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yT=$n(gT),vT=qe({},la,{data:0}),t1=$n(vT),wT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ST(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xT[t])?!!e[t]:!1}function Sy(){return ST}var kT=qe({},sc,{key:function(t){if(t.key){var e=wT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sy,charCode:function(t){return t.type==="keypress"?Rd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CT=$n(kT),ET=qe({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n1=$n(ET),AT=qe({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sy}),PT=$n(AT),RT=qe({},la,{propertyName:0,elapsedTime:0,pseudoElement:0}),MT=$n(RT),OT=qe({},yf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TT=$n(OT),DT=[9,13,27,32],ky=_r&&"CompositionEvent"in window,Qa=null;_r&&"documentMode"in document&&(Qa=document.documentMode);var NT=_r&&"TextEvent"in window&&!Qa,o2=_r&&(!ky||Qa&&8<Qa&&11>=Qa),i1=String.fromCharCode(32),r1=!1;function l2(t,e){switch(t){case"keyup":return DT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var el=!1;function LT(t,e){switch(t){case"compositionend":return a2(e);case"keypress":return e.which!==32?null:(r1=!0,i1);case"textInput":return t=e.data,t===i1&&r1?null:t;default:return null}}function BT(t,e){if(el)return t==="compositionend"||!ky&&l2(t,e)?(t=s2(),Pd=by=ms=null,el=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return o2&&e.locale!=="ko"?null:e.data;default:return null}}var IT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!IT[t.type]:e==="textarea"}function u2(t,e,n,i){zk(i),e=oh(e,"onChange"),0<e.length&&(n=new xy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Za=null,xu=null;function _T(t){b2(t,0)}function vf(t){var e=il(t);if(Nk(e))return t}function $T(t,e){if(t==="change")return e}var c2=!1;if(_r){var Op;if(_r){var Tp="oninput"in document;if(!Tp){var o1=document.createElement("div");o1.setAttribute("oninput","return;"),Tp=typeof o1.oninput=="function"}Op=Tp}else Op=!1;c2=Op&&(!document.documentMode||9<document.documentMode)}function l1(){Za&&(Za.detachEvent("onpropertychange",d2),xu=Za=null)}function d2(t){if(t.propertyName==="value"&&vf(xu)){var e=[];u2(e,xu,t,my(t)),Hk(_T,e)}}function FT(t,e,n){t==="focusin"?(l1(),Za=e,xu=n,Za.attachEvent("onpropertychange",d2)):t==="focusout"&&l1()}function zT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vf(xu)}function jT(t,e){if(t==="click")return vf(e)}function UT(t,e){if(t==="input"||t==="change")return vf(e)}function VT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ci=typeof Object.is=="function"?Object.is:VT;function Su(t,e){if(Ci(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ym.call(e,r)||!Ci(t[r],e[r]))return!1}return!0}function a1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function u1(t,e){var n=a1(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=a1(n)}}function h2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f2(){for(var t=window,e=Zd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zd(t.document)}return e}function Cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HT(t){var e=f2(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&h2(n.ownerDocument.documentElement,n)){if(i!==null&&Cy(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=u1(n,s);var o=u1(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WT=_r&&"documentMode"in document&&11>=document.documentMode,tl=null,pg=null,eu=null,mg=!1;function c1(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mg||tl==null||tl!==Zd(i)||(i=tl,"selectionStart"in i&&Cy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),eu&&Su(eu,i)||(eu=i,i=oh(pg,"onSelect"),0<i.length&&(e=new xy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=tl)))}function Ic(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nl={animationend:Ic("Animation","AnimationEnd"),animationiteration:Ic("Animation","AnimationIteration"),animationstart:Ic("Animation","AnimationStart"),transitionend:Ic("Transition","TransitionEnd")},Dp={},p2={};_r&&(p2=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function wf(t){if(Dp[t])return Dp[t];if(!nl[t])return t;var e=nl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in p2)return Dp[t]=e[n];return t}var m2=wf("animationend"),g2=wf("animationiteration"),y2=wf("animationstart"),v2=wf("transitionend"),w2=new Map,d1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Us(t,e){w2.set(t,e),No(e,[t])}for(var Np=0;Np<d1.length;Np++){var Lp=d1[Np],GT=Lp.toLowerCase(),XT=Lp[0].toUpperCase()+Lp.slice(1);Us(GT,"on"+XT)}Us(m2,"onAnimationEnd");Us(g2,"onAnimationIteration");Us(y2,"onAnimationStart");Us("dblclick","onDoubleClick");Us("focusin","onFocus");Us("focusout","onBlur");Us(v2,"onTransitionEnd");jl("onMouseEnter",["mouseout","mouseover"]);jl("onMouseLeave",["mouseout","mouseover"]);jl("onPointerEnter",["pointerout","pointerover"]);jl("onPointerLeave",["pointerout","pointerover"]);No("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));No("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));No("onBeforeInput",["compositionend","keypress","textInput","paste"]);No("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));No("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));No("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ja));function h1(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,GO(i,e,void 0,t),t.currentTarget=null}function b2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&r.isPropagationStopped())break e;h1(r,l,u),s=a}else for(o=0;o<i.length;o++){if(l=i[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&r.isPropagationStopped())break e;h1(r,l,u),s=a}}}if(th)throw t=cg,th=!1,cg=null,t}function _e(t,e){var n=e[bg];n===void 0&&(n=e[bg]=new Set);var i=t+"__bubble";n.has(i)||(x2(e,t,2,!1),n.add(i))}function Bp(t,e,n){var i=0;e&&(i|=4),x2(n,t,i,e)}var _c="_reactListening"+Math.random().toString(36).slice(2);function ku(t){if(!t[_c]){t[_c]=!0,Rk.forEach(function(n){n!=="selectionchange"&&(JT.has(n)||Bp(n,!1,t),Bp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_c]||(e[_c]=!0,Bp("selectionchange",!1,e))}}function x2(t,e,n,i){switch(r2(e)){case 1:var r=aT;break;case 4:r=uT;break;default:r=wy}n=r.bind(null,e,n,t),r=void 0,!ug||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Ip(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;o=o.return}for(;l!==null;){if(o=so(l),o===null)return;if(a=o.tag,a===5||a===6){i=s=o;continue e}l=l.parentNode}}i=i.return}Hk(function(){var u=s,c=my(n),d=[];e:{var h=w2.get(t);if(h!==void 0){var f=xy,p=t;switch(t){case"keypress":if(Rd(n)===0)break e;case"keydown":case"keyup":f=CT;break;case"focusin":p="focus",f=Mp;break;case"focusout":p="blur",f=Mp;break;case"beforeblur":case"afterblur":f=Mp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=e1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=hT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=PT;break;case m2:case g2:case y2:f=mT;break;case v2:f=MT;break;case"scroll":f=cT;break;case"wheel":f=TT;break;case"copy":case"cut":case"paste":f=yT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=n1}var g=(e&4)!==0,v=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var y=u,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=yu(y,m),b!=null&&g.push(Cu(y,b,w)))),v)break;y=y.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==lg&&(p=n.relatedTarget||n.fromElement)&&(so(p)||p[$r]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?so(p):null,p!==null&&(v=Lo(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=e1,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=n1,b="onPointerLeave",m="onPointerEnter",y="pointer"),v=f==null?h:il(f),w=p==null?h:il(p),h=new g(b,y+"leave",f,n,c),h.target=v,h.relatedTarget=w,b=null,so(c)===u&&(g=new g(m,y+"enter",p,n,c),g.target=w,g.relatedTarget=v,b=g),v=b,f&&p)t:{for(g=f,m=p,y=0,w=g;w;w=Uo(w))y++;for(w=0,b=m;b;b=Uo(b))w++;for(;0<y-w;)g=Uo(g),y--;for(;0<w-y;)m=Uo(m),w--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Uo(g),m=Uo(m)}g=null}else g=null;f!==null&&f1(d,h,f,g,!1),p!==null&&v!==null&&f1(d,v,p,g,!0)}}e:{if(h=u?il(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=$T;else if(s1(h))if(c2)k=UT;else{k=zT;var A=FT}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=jT);if(k&&(k=k(t,u))){u2(d,k,n,c);break e}A&&A(t,h,u),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&ng(h,"number",h.value)}switch(A=u?il(u):window,t){case"focusin":(s1(A)||A.contentEditable==="true")&&(tl=A,pg=u,eu=null);break;case"focusout":eu=pg=tl=null;break;case"mousedown":mg=!0;break;case"contextmenu":case"mouseup":case"dragend":mg=!1,c1(d,n,c);break;case"selectionchange":if(WT)break;case"keydown":case"keyup":c1(d,n,c)}var P;if(ky)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else el?l2(t,n)&&(B="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(o2&&n.locale!=="ko"&&(el||B!=="onCompositionStart"?B==="onCompositionEnd"&&el&&(P=s2()):(ms=c,by="value"in ms?ms.value:ms.textContent,el=!0)),A=oh(u,B),0<A.length&&(B=new t1(B,t,null,n,c),d.push({event:B,listeners:A}),P?B.data=P:(P=a2(n),P!==null&&(B.data=P)))),(P=NT?LT(t,n):BT(t,n))&&(u=oh(u,"onBeforeInput"),0<u.length&&(c=new t1("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=P))}b2(d,e)})}function Cu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=yu(t,n),s!=null&&i.unshift(Cu(t,s,r)),s=yu(t,e),s!=null&&i.push(Cu(t,s,r))),t=t.return}return i}function Uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function f1(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===i)break;l.tag===5&&u!==null&&(l=u,r?(a=yu(n,s),a!=null&&o.unshift(Cu(n,a,l))):r||(a=yu(n,s),a!=null&&o.push(Cu(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var YT=/\r\n?/g,KT=/\u0000|\uFFFD/g;function p1(t){return(typeof t=="string"?t:""+t).replace(YT,`
`).replace(KT,"")}function $c(t,e,n){if(e=p1(e),p1(t)!==e&&n)throw Error(W(425))}function lh(){}var gg=null,yg=null;function vg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wg=typeof setTimeout=="function"?setTimeout:void 0,qT=typeof clearTimeout=="function"?clearTimeout:void 0,m1=typeof Promise=="function"?Promise:void 0,QT=typeof queueMicrotask=="function"?queueMicrotask:typeof m1<"u"?function(t){return m1.resolve(null).then(t).catch(ZT)}:wg;function ZT(t){setTimeout(function(){throw t})}function _p(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),bu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);bu(e)}function Cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function g1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var aa=Math.random().toString(36).slice(2),Vi="__reactFiber$"+aa,Eu="__reactProps$"+aa,$r="__reactContainer$"+aa,bg="__reactEvents$"+aa,eD="__reactListeners$"+aa,tD="__reactHandles$"+aa;function so(t){var e=t[Vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$r]||n[Vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=g1(t);t!==null;){if(n=t[Vi])return n;t=g1(t)}return e}t=n,n=t.parentNode}return null}function oc(t){return t=t[Vi]||t[$r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function il(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function bf(t){return t[Eu]||null}var xg=[],rl=-1;function Vs(t){return{current:t}}function je(t){0>rl||(t.current=xg[rl],xg[rl]=null,rl--)}function Le(t,e){rl++,xg[rl]=t.current,t.current=e}var Ns={},Ut=Vs(Ns),vn=Vs(!1),So=Ns;function Ul(t,e){var n=t.type.contextTypes;if(!n)return Ns;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function wn(t){return t=t.childContextTypes,t!=null}function ah(){je(vn),je(Ut)}function y1(t,e,n){if(Ut.current!==Ns)throw Error(W(168));Le(Ut,e),Le(vn,n)}function S2(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(W(108,FO(t)||"Unknown",r));return qe({},n,i)}function uh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ns,So=Ut.current,Le(Ut,t),Le(vn,vn.current),!0}function v1(t,e,n){var i=t.stateNode;if(!i)throw Error(W(169));n?(t=S2(t,e,So),i.__reactInternalMemoizedMergedChildContext=t,je(vn),je(Ut),Le(Ut,t)):je(vn),Le(vn,n)}var dr=null,xf=!1,$p=!1;function k2(t){dr===null?dr=[t]:dr.push(t)}function nD(t){xf=!0,k2(t)}function Hs(){if(!$p&&dr!==null){$p=!0;var t=0,e=Re;try{var n=dr;for(Re=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}dr=null,xf=!1}catch(r){throw dr!==null&&(dr=dr.slice(t+1)),Jk(gy,Hs),r}finally{Re=e,$p=!1}}return null}var sl=[],ol=0,ch=null,dh=0,Xn=[],Jn=0,ko=null,Cr=1,Er="";function Zs(t,e){sl[ol++]=dh,sl[ol++]=ch,ch=t,dh=e}function C2(t,e,n){Xn[Jn++]=Cr,Xn[Jn++]=Er,Xn[Jn++]=ko,ko=t;var i=Cr;t=Er;var r=32-bi(i)-1;i&=~(1<<r),n+=1;var s=32-bi(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Cr=1<<32-bi(e)+r|n<<r|i,Er=s+t}else Cr=1<<s|n<<r|i,Er=t}function Ey(t){t.return!==null&&(Zs(t,1),C2(t,1,0))}function Ay(t){for(;t===ch;)ch=sl[--ol],sl[ol]=null,dh=sl[--ol],sl[ol]=null;for(;t===ko;)ko=Xn[--Jn],Xn[Jn]=null,Er=Xn[--Jn],Xn[Jn]=null,Cr=Xn[--Jn],Xn[Jn]=null}var Bn=null,Nn=null,Ve=!1,mi=null;function E2(t,e){var n=Qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function w1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Nn=Cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ko!==null?{id:Cr,overflow:Er}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Nn=null,!0):!1;default:return!1}}function Sg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kg(t){if(Ve){var e=Nn;if(e){var n=e;if(!w1(t,e)){if(Sg(t))throw Error(W(418));e=Cs(n.nextSibling);var i=Bn;e&&w1(t,e)?E2(i,n):(t.flags=t.flags&-4097|2,Ve=!1,Bn=t)}}else{if(Sg(t))throw Error(W(418));t.flags=t.flags&-4097|2,Ve=!1,Bn=t}}}function b1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function Fc(t){if(t!==Bn)return!1;if(!Ve)return b1(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vg(t.type,t.memoizedProps)),e&&(e=Nn)){if(Sg(t))throw A2(),Error(W(418));for(;e;)E2(t,e),e=Cs(e.nextSibling)}if(b1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nn=Cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nn=null}}else Nn=Bn?Cs(t.stateNode.nextSibling):null;return!0}function A2(){for(var t=Nn;t;)t=Cs(t.nextSibling)}function Vl(){Nn=Bn=null,Ve=!1}function Py(t){mi===null?mi=[t]:mi.push(t)}var iD=Vr.ReactCurrentBatchConfig;function ci(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var hh=Vs(null),fh=null,ll=null,Ry=null;function My(){Ry=ll=fh=null}function Oy(t){var e=hh.current;je(hh),t._currentValue=e}function Cg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function vl(t,e){fh=t,Ry=ll=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function ri(t){var e=t._currentValue;if(Ry!==t)if(t={context:t,memoizedValue:e,next:null},ll===null){if(fh===null)throw Error(W(308));ll=t,fh.dependencies={lanes:0,firstContext:t}}else ll=ll.next=t;return e}var oo=null;function Ty(t){oo===null?oo=[t]:oo.push(t)}function P2(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ty(e)):(n.next=r.next,r.next=n),e.interleaved=n,Fr(t,i)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qr=!1;function Dy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Es(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,xe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Fr(t,n)}return r=i.interleaved,r===null?(e.next=e,Ty(i)):(e.next=r.next,r.next=e),i.interleaved=e,Fr(t,n)}function Md(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,yy(t,n)}}function x1(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ph(t,e,n,i){var r=t.updateQueue;Qr=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var d=r.baseState;o=0,c=u=a=null,l=s;do{var h=l.lane,f=l.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,g=l;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=qe({},d,h);break e;case 2:Qr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=f,a=d):c=c.next=f,o|=h;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(c===null&&(a=d),r.baseState=a,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Eo|=o,t.lanes=o,t.memoizedState=d}}function S1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(W(191,r));r.call(i)}}}var M2=new Pk.Component().refs;function Eg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sf={isMounted:function(t){return(t=t._reactInternals)?Lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=tn(),r=Ps(t),s=Or(i,r);s.payload=e,n!=null&&(s.callback=n),e=Es(t,s,r),e!==null&&(xi(e,t,r,i),Md(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=tn(),r=Ps(t),s=Or(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Es(t,s,r),e!==null&&(xi(e,t,r,i),Md(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tn(),i=Ps(t),r=Or(n,i);r.tag=2,e!=null&&(r.callback=e),e=Es(t,r,i),e!==null&&(xi(e,t,i,n),Md(e,t,i))}};function k1(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Su(n,i)||!Su(r,s):!0}function O2(t,e,n){var i=!1,r=Ns,s=e.contextType;return typeof s=="object"&&s!==null?s=ri(s):(r=wn(e)?So:Ut.current,i=e.contextTypes,s=(i=i!=null)?Ul(t,r):Ns),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function C1(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Sf.enqueueReplaceState(e,e.state,null)}function Ag(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=M2,Dy(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ri(s):(s=wn(e)?So:Ut.current,r.context=Ul(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Eg(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Sf.enqueueReplaceState(r,r.state,null),ph(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ba(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var i=n.stateNode}if(!i)throw Error(W(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;l===M2&&(l=r.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function zc(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E1(t){var e=t._init;return e(t._payload)}function T2(t){function e(m,y){if(t){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function r(m,y){return m=Rs(m,y),m.index=0,m.sibling=null,m}function s(m,y,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,y,w,b){return y===null||y.tag!==6?(y=Wp(w,m.mode,b),y.return=m,y):(y=r(y,w),y.return=m,y)}function a(m,y,w,b){var k=w.type;return k===Zo?c(m,y,w.props.children,b,w.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===qr&&E1(k)===y.type)?(b=r(y,w.props),b.ref=ba(m,y,w),b.return=m,b):(b=Bd(w.type,w.key,w.props,null,m.mode,b),b.ref=ba(m,y,w),b.return=m,b)}function u(m,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Gp(w,m.mode,b),y.return=m,y):(y=r(y,w.children||[]),y.return=m,y)}function c(m,y,w,b,k){return y===null||y.tag!==7?(y=yo(w,m.mode,b,k),y.return=m,y):(y=r(y,w),y.return=m,y)}function d(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Wp(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Mc:return w=Bd(y.type,y.key,y.props,null,m.mode,w),w.ref=ba(m,null,y),w.return=m,w;case Qo:return y=Gp(y,m.mode,w),y.return=m,y;case qr:var b=y._init;return d(m,b(y._payload),w)}if(Fa(y)||ma(y))return y=yo(y,m.mode,w,null),y.return=m,y;zc(m,y)}return null}function h(m,y,w,b){var k=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:l(m,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:return w.key===k?a(m,y,w,b):null;case Qo:return w.key===k?u(m,y,w,b):null;case qr:return k=w._init,h(m,y,k(w._payload),b)}if(Fa(w)||ma(w))return k!==null?null:c(m,y,w,b,null);zc(m,w)}return null}function f(m,y,w,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,l(y,m,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Mc:return m=m.get(b.key===null?w:b.key)||null,a(y,m,b,k);case Qo:return m=m.get(b.key===null?w:b.key)||null,u(y,m,b,k);case qr:var A=b._init;return f(m,y,w,A(b._payload),k)}if(Fa(b)||ma(b))return m=m.get(w)||null,c(y,m,b,k,null);zc(y,b)}return null}function p(m,y,w,b){for(var k=null,A=null,P=y,B=y=0,C=null;P!==null&&B<w.length;B++){P.index>B?(C=P,P=null):C=P.sibling;var E=h(m,P,w[B],b);if(E===null){P===null&&(P=C);break}t&&P&&E.alternate===null&&e(m,P),y=s(E,y,B),A===null?k=E:A.sibling=E,A=E,P=C}if(B===w.length)return n(m,P),Ve&&Zs(m,B),k;if(P===null){for(;B<w.length;B++)P=d(m,w[B],b),P!==null&&(y=s(P,y,B),A===null?k=P:A.sibling=P,A=P);return Ve&&Zs(m,B),k}for(P=i(m,P);B<w.length;B++)C=f(P,m,B,w[B],b),C!==null&&(t&&C.alternate!==null&&P.delete(C.key===null?B:C.key),y=s(C,y,B),A===null?k=C:A.sibling=C,A=C);return t&&P.forEach(function(R){return e(m,R)}),Ve&&Zs(m,B),k}function g(m,y,w,b){var k=ma(w);if(typeof k!="function")throw Error(W(150));if(w=k.call(w),w==null)throw Error(W(151));for(var A=k=null,P=y,B=y=0,C=null,E=w.next();P!==null&&!E.done;B++,E=w.next()){P.index>B?(C=P,P=null):C=P.sibling;var R=h(m,P,E.value,b);if(R===null){P===null&&(P=C);break}t&&P&&R.alternate===null&&e(m,P),y=s(R,y,B),A===null?k=R:A.sibling=R,A=R,P=C}if(E.done)return n(m,P),Ve&&Zs(m,B),k;if(P===null){for(;!E.done;B++,E=w.next())E=d(m,E.value,b),E!==null&&(y=s(E,y,B),A===null?k=E:A.sibling=E,A=E);return Ve&&Zs(m,B),k}for(P=i(m,P);!E.done;B++,E=w.next())E=f(P,m,B,E.value,b),E!==null&&(t&&E.alternate!==null&&P.delete(E.key===null?B:E.key),y=s(E,y,B),A===null?k=E:A.sibling=E,A=E);return t&&P.forEach(function(O){return e(m,O)}),Ve&&Zs(m,B),k}function v(m,y,w,b){if(typeof w=="object"&&w!==null&&w.type===Zo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:e:{for(var k=w.key,A=y;A!==null;){if(A.key===k){if(k=w.type,k===Zo){if(A.tag===7){n(m,A.sibling),y=r(A,w.props.children),y.return=m,m=y;break e}}else if(A.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===qr&&E1(k)===A.type){n(m,A.sibling),y=r(A,w.props),y.ref=ba(m,A,w),y.return=m,m=y;break e}n(m,A);break}else e(m,A);A=A.sibling}w.type===Zo?(y=yo(w.props.children,m.mode,b,w.key),y.return=m,m=y):(b=Bd(w.type,w.key,w.props,null,m.mode,b),b.ref=ba(m,y,w),b.return=m,m=b)}return o(m);case Qo:e:{for(A=w.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(m,y.sibling),y=r(y,w.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=Gp(w,m.mode,b),y.return=m,m=y}return o(m);case qr:return A=w._init,v(m,y,A(w._payload),b)}if(Fa(w))return p(m,y,w,b);if(ma(w))return g(m,y,w,b);zc(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(m,y.sibling),y=r(y,w),y.return=m,m=y):(n(m,y),y=Wp(w,m.mode,b),y.return=m,m=y),o(m)):n(m,y)}return v}var Hl=T2(!0),D2=T2(!1),lc={},Ki=Vs(lc),Au=Vs(lc),Pu=Vs(lc);function lo(t){if(t===lc)throw Error(W(174));return t}function Ny(t,e){switch(Le(Pu,e),Le(Au,t),Le(Ki,lc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rg(e,t)}je(Ki),Le(Ki,e)}function Wl(){je(Ki),je(Au),je(Pu)}function N2(t){lo(Pu.current);var e=lo(Ki.current),n=rg(e,t.type);e!==n&&(Le(Au,t),Le(Ki,n))}function Ly(t){Au.current===t&&(je(Ki),je(Au))}var Ge=Vs(0);function mh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fp=[];function By(){for(var t=0;t<Fp.length;t++)Fp[t]._workInProgressVersionPrimary=null;Fp.length=0}var Od=Vr.ReactCurrentDispatcher,zp=Vr.ReactCurrentBatchConfig,Co=0,Ye=null,dt=null,yt=null,gh=!1,tu=!1,Ru=0,rD=0;function Bt(){throw Error(W(321))}function Iy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ci(t[n],e[n]))return!1;return!0}function _y(t,e,n,i,r,s){if(Co=s,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Od.current=t===null||t.memoizedState===null?aD:uD,t=n(i,r),tu){s=0;do{if(tu=!1,Ru=0,25<=s)throw Error(W(301));s+=1,yt=dt=null,e.updateQueue=null,Od.current=cD,t=n(i,r)}while(tu)}if(Od.current=yh,e=dt!==null&&dt.next!==null,Co=0,yt=dt=Ye=null,gh=!1,e)throw Error(W(300));return t}function $y(){var t=Ru!==0;return Ru=0,t}function Bi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ye.memoizedState=yt=t:yt=yt.next=t,yt}function si(){if(dt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=yt===null?Ye.memoizedState:yt.next;if(e!==null)yt=e,dt=t;else{if(t===null)throw Error(W(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},yt===null?Ye.memoizedState=yt=t:yt=yt.next=t}return yt}function Mu(t,e){return typeof e=="function"?e(t):e}function jp(t){var e=si(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var i=dt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((Co&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=i):a=a.next=d,Ye.lanes|=c,Eo|=c}u=u.next}while(u!==null&&u!==s);a===null?o=i:a.next=l,Ci(i,e.memoizedState)||(mn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=a,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ye.lanes|=s,Eo|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Up(t){var e=si(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Ci(s,e.memoizedState)||(mn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function L2(){}function B2(t,e){var n=Ye,i=si(),r=e(),s=!Ci(i.memoizedState,r);if(s&&(i.memoizedState=r,mn=!0),i=i.queue,Fy($2.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,Ou(9,_2.bind(null,n,i,r,e),void 0,null),kt===null)throw Error(W(349));Co&30||I2(n,e,r)}return r}function I2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _2(t,e,n,i){e.value=n,e.getSnapshot=i,F2(e)&&z2(t)}function $2(t,e,n){return n(function(){F2(e)&&z2(t)})}function F2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ci(t,n)}catch{return!0}}function z2(t){var e=Fr(t,1);e!==null&&xi(e,t,1,-1)}function A1(t){var e=Bi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:t},e.queue=t,t=t.dispatch=lD.bind(null,Ye,t),[e.memoizedState,t]}function Ou(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function j2(){return si().memoizedState}function Td(t,e,n,i){var r=Bi();Ye.flags|=t,r.memoizedState=Ou(1|e,n,void 0,i===void 0?null:i)}function kf(t,e,n,i){var r=si();i=i===void 0?null:i;var s=void 0;if(dt!==null){var o=dt.memoizedState;if(s=o.destroy,i!==null&&Iy(i,o.deps)){r.memoizedState=Ou(e,n,s,i);return}}Ye.flags|=t,r.memoizedState=Ou(1|e,n,s,i)}function P1(t,e){return Td(8390656,8,t,e)}function Fy(t,e){return kf(2048,8,t,e)}function U2(t,e){return kf(4,2,t,e)}function V2(t,e){return kf(4,4,t,e)}function H2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function W2(t,e,n){return n=n!=null?n.concat([t]):null,kf(4,4,H2.bind(null,e,t),n)}function zy(){}function G2(t,e){var n=si();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Iy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function X2(t,e){var n=si();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Iy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function J2(t,e,n){return Co&21?(Ci(n,e)||(n=qk(),Ye.lanes|=n,Eo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function sD(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var i=zp.transition;zp.transition={};try{t(!1),e()}finally{Re=n,zp.transition=i}}function Y2(){return si().memoizedState}function oD(t,e,n){var i=Ps(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},K2(t))q2(e,n);else if(n=P2(t,e,n,i),n!==null){var r=tn();xi(n,t,i,r),Q2(n,e,i)}}function lD(t,e,n){var i=Ps(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(K2(t))q2(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(r.hasEagerState=!0,r.eagerState=l,Ci(l,o)){var a=e.interleaved;a===null?(r.next=r,Ty(e)):(r.next=a.next,a.next=r),e.interleaved=r;return}}catch{}finally{}n=P2(t,e,r,i),n!==null&&(r=tn(),xi(n,t,i,r),Q2(n,e,i))}}function K2(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function q2(t,e){tu=gh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q2(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,yy(t,n)}}var yh={readContext:ri,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},aD={readContext:ri,useCallback:function(t,e){return Bi().memoizedState=[t,e===void 0?null:e],t},useContext:ri,useEffect:P1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Td(4194308,4,H2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Td(4194308,4,t,e)},useInsertionEffect:function(t,e){return Td(4,2,t,e)},useMemo:function(t,e){var n=Bi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Bi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=oD.bind(null,Ye,t),[i.memoizedState,t]},useRef:function(t){var e=Bi();return t={current:t},e.memoizedState=t},useState:A1,useDebugValue:zy,useDeferredValue:function(t){return Bi().memoizedState=t},useTransition:function(){var t=A1(!1),e=t[0];return t=sD.bind(null,t[1]),Bi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ye,r=Bi();if(Ve){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),kt===null)throw Error(W(349));Co&30||I2(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,P1($2.bind(null,i,s,t),[t]),i.flags|=2048,Ou(9,_2.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Bi(),e=kt.identifierPrefix;if(Ve){var n=Er,i=Cr;n=(i&~(1<<32-bi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ru++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uD={readContext:ri,useCallback:G2,useContext:ri,useEffect:Fy,useImperativeHandle:W2,useInsertionEffect:U2,useLayoutEffect:V2,useMemo:X2,useReducer:jp,useRef:j2,useState:function(){return jp(Mu)},useDebugValue:zy,useDeferredValue:function(t){var e=si();return J2(e,dt.memoizedState,t)},useTransition:function(){var t=jp(Mu)[0],e=si().memoizedState;return[t,e]},useMutableSource:L2,useSyncExternalStore:B2,useId:Y2,unstable_isNewReconciler:!1},cD={readContext:ri,useCallback:G2,useContext:ri,useEffect:Fy,useImperativeHandle:W2,useInsertionEffect:U2,useLayoutEffect:V2,useMemo:X2,useReducer:Up,useRef:j2,useState:function(){return Up(Mu)},useDebugValue:zy,useDeferredValue:function(t){var e=si();return dt===null?e.memoizedState=t:J2(e,dt.memoizedState,t)},useTransition:function(){var t=Up(Mu)[0],e=si().memoizedState;return[t,e]},useMutableSource:L2,useSyncExternalStore:B2,useId:Y2,unstable_isNewReconciler:!1};function Gl(t,e){try{var n="",i=e;do n+=$O(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Vp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dD=typeof WeakMap=="function"?WeakMap:Map;function Z2(t,e,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){wh||(wh=!0,_g=i),Pg(t,e)},n}function eC(t,e,n){n=Or(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Pg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Pg(t,e),typeof i!="function"&&(As===null?As=new Set([this]):As.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function R1(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new dD;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=ED.bind(null,t,e,n),e.then(t,t))}function M1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function O1(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Or(-1,1),e.tag=2,Es(n,e,1))),n.lanes|=1),t)}var hD=Vr.ReactCurrentOwner,mn=!1;function Jt(t,e,n,i){e.child=t===null?D2(e,null,n,i):Hl(e,t.child,n,i)}function T1(t,e,n,i,r){n=n.render;var s=e.ref;return vl(e,r),i=_y(t,e,n,i,s,r),n=$y(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,zr(t,e,r)):(Ve&&n&&Ey(e),e.flags|=1,Jt(t,e,i,r),e.child)}function D1(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Jy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tC(t,e,s,i,r)):(t=Bd(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Su,n(o,i)&&t.ref===e.ref)return zr(t,e,r)}return e.flags|=1,t=Rs(s,i),t.ref=e.ref,t.return=e,e.child=t}function tC(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Su(s,i)&&t.ref===e.ref)if(mn=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,zr(t,e,r)}return Rg(t,e,n,i,r)}function nC(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ul,Mn),Mn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(ul,Mn),Mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Le(ul,Mn),Mn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Le(ul,Mn),Mn|=i;return Jt(t,e,r,n),e.child}function iC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rg(t,e,n,i,r){var s=wn(n)?So:Ut.current;return s=Ul(e,s),vl(e,r),n=_y(t,e,n,i,s,r),i=$y(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,zr(t,e,r)):(Ve&&i&&Ey(e),e.flags|=1,Jt(t,e,n,r),e.child)}function N1(t,e,n,i,r){if(wn(n)){var s=!0;uh(e)}else s=!1;if(vl(e,r),e.stateNode===null)Dd(t,e),O2(e,n,i),Ag(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ri(u):(u=wn(n)?So:Ut.current,u=Ul(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||a!==u)&&C1(e,o,i,u),Qr=!1;var h=e.memoizedState;o.state=h,ph(e,i,o,r),a=e.memoizedState,l!==i||h!==a||vn.current||Qr?(typeof c=="function"&&(Eg(e,n,c,i),a=e.memoizedState),(l=Qr||k1(e,n,l,i,h,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=a),o.props=i,o.state=a,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,R2(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ci(e.type,l),o.props=u,d=e.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=ri(a):(a=wn(n)?So:Ut.current,a=Ul(e,a));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==a)&&C1(e,o,i,a),Qr=!1,h=e.memoizedState,o.state=h,ph(e,i,o,r);var p=e.memoizedState;l!==d||h!==p||vn.current||Qr?(typeof f=="function"&&(Eg(e,n,f,i),p=e.memoizedState),(u=Qr||k1(e,n,u,i,h,p,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=a,i=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return Mg(t,e,n,i,s,r)}function Mg(t,e,n,i,r,s){iC(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&v1(e,n,!1),zr(t,e,s);i=e.stateNode,hD.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Hl(e,t.child,null,s),e.child=Hl(e,null,l,s)):Jt(t,e,l,s),e.memoizedState=i.state,r&&v1(e,n,!0),e.child}function rC(t){var e=t.stateNode;e.pendingContext?y1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&y1(t,e.context,!1),Ny(t,e.containerInfo)}function L1(t,e,n,i,r){return Vl(),Py(r),e.flags|=256,Jt(t,e,n,i),e.child}var Og={dehydrated:null,treeContext:null,retryLane:0};function Tg(t){return{baseLanes:t,cachePool:null,transitions:null}}function sC(t,e,n){var i=e.pendingProps,r=Ge.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Le(Ge,r&1),t===null)return kg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Af(o,i,0,null),t=yo(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Tg(n),e.memoizedState=Og,t):jy(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return fD(t,e,o,i,l,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,l=r.sibling;var a={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=a,e.deletions=null):(i=Rs(r,a),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=Rs(l,s):(s=yo(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Tg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Og,i}return s=t.child,t=s.sibling,i=Rs(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function jy(t,e){return e=Af({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jc(t,e,n,i){return i!==null&&Py(i),Hl(e,t.child,null,n),t=jy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fD(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Vp(Error(W(422))),jc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Af({mode:"visible",children:i.children},r,0,null),s=yo(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Hl(e,t.child,null,o),e.child.memoizedState=Tg(o),e.memoizedState=Og,s);if(!(e.mode&1))return jc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(W(419)),i=Vp(s,i,void 0),jc(t,e,o,i)}if(l=(o&t.childLanes)!==0,mn||l){if(i=kt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Fr(t,r),xi(i,t,r,-1))}return Xy(),i=Vp(Error(W(421))),jc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=AD.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Nn=Cs(r.nextSibling),Bn=e,Ve=!0,mi=null,t!==null&&(Xn[Jn++]=Cr,Xn[Jn++]=Er,Xn[Jn++]=ko,Cr=t.id,Er=t.overflow,ko=e),e=jy(e,i.children),e.flags|=4096,e)}function B1(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Cg(t.return,e,n)}function Hp(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function oC(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Jt(t,e,i.children,n),i=Ge.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B1(t,n,e);else if(t.tag===19)B1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Le(Ge,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&mh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Hp(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&mh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Hp(e,!0,n,null,s);break;case"together":Hp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Eo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pD(t,e,n){switch(e.tag){case 3:rC(e),Vl();break;case 5:N2(e);break;case 1:wn(e.type)&&uh(e);break;case 4:Ny(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Le(hh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Le(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?sC(t,e,n):(Le(Ge,Ge.current&1),t=zr(t,e,n),t!==null?t.sibling:null);Le(Ge,Ge.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return oC(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Le(Ge,Ge.current),i)break;return null;case 22:case 23:return e.lanes=0,nC(t,e,n)}return zr(t,e,n)}var lC,Dg,aC,uC;lC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dg=function(){};aC=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,lo(Ki.current);var s=null;switch(n){case"input":r=eg(t,r),i=eg(t,i),s=[];break;case"select":r=qe({},r,{value:void 0}),i=qe({},i,{value:void 0}),s=[];break;case"textarea":r=ig(t,r),i=ig(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=lh)}sg(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(mu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var a=i[u];if(l=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(mu.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&_e("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};uC=function(t,e,n,i){n!==i&&(e.flags|=4)};function xa(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function It(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function mD(t,e,n){var i=e.pendingProps;switch(Ay(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(e),null;case 1:return wn(e.type)&&ah(),It(e),null;case 3:return i=e.stateNode,Wl(),je(vn),je(Ut),By(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Fc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mi!==null&&(zg(mi),mi=null))),Dg(t,e),It(e),null;case 5:Ly(e);var r=lo(Pu.current);if(n=e.type,t!==null&&e.stateNode!=null)aC(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(W(166));return It(e),null}if(t=lo(Ki.current),Fc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Vi]=e,i[Eu]=s,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",i),_e("close",i);break;case"iframe":case"object":case"embed":_e("load",i);break;case"video":case"audio":for(r=0;r<ja.length;r++)_e(ja[r],i);break;case"source":_e("error",i);break;case"img":case"image":case"link":_e("error",i),_e("load",i);break;case"details":_e("toggle",i);break;case"input":Hw(i,s),_e("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},_e("invalid",i);break;case"textarea":Gw(i,s),_e("invalid",i)}sg(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&$c(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&$c(i.textContent,l,t),r=["children",""+l]):mu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_e("scroll",i)}switch(n){case"input":Oc(i),Ww(i,s,!0);break;case"textarea":Oc(i),Xw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=lh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ik(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Vi]=e,t[Eu]=i,lC(t,e,!1,!1),e.stateNode=t;e:{switch(o=og(n,i),n){case"dialog":_e("cancel",t),_e("close",t),r=i;break;case"iframe":case"object":case"embed":_e("load",t),r=i;break;case"video":case"audio":for(r=0;r<ja.length;r++)_e(ja[r],t);r=i;break;case"source":_e("error",t),r=i;break;case"img":case"image":case"link":_e("error",t),_e("load",t),r=i;break;case"details":_e("toggle",t),r=i;break;case"input":Hw(t,i),r=eg(t,i),_e("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=qe({},i,{value:void 0}),_e("invalid",t);break;case"textarea":Gw(t,i),r=ig(t,i),_e("invalid",t);break;default:r=i}sg(n,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Fk(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&_k(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&gu(t,a):typeof a=="number"&&gu(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(mu.hasOwnProperty(s)?a!=null&&s==="onScroll"&&_e("scroll",t):a!=null&&dy(t,s,a,o))}switch(n){case"input":Oc(t),Ww(t,i,!1);break;case"textarea":Oc(t),Xw(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ds(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?pl(t,!!i.multiple,s,!1):i.defaultValue!=null&&pl(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=lh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return It(e),null;case 6:if(t&&e.stateNode!=null)uC(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(W(166));if(n=lo(Pu.current),lo(Ki.current),Fc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Vi]=e,(s=i.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:$c(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$c(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Vi]=e,e.stateNode=i}return It(e),null;case 13:if(je(Ge),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&Nn!==null&&e.mode&1&&!(e.flags&128))A2(),Vl(),e.flags|=98560,s=!1;else if(s=Fc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Vi]=e}else Vl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;It(e),s=!1}else mi!==null&&(zg(mi),mi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?pt===0&&(pt=3):Xy())),e.updateQueue!==null&&(e.flags|=4),It(e),null);case 4:return Wl(),Dg(t,e),t===null&&ku(e.stateNode.containerInfo),It(e),null;case 10:return Oy(e.type._context),It(e),null;case 17:return wn(e.type)&&ah(),It(e),null;case 19:if(je(Ge),s=e.memoizedState,s===null)return It(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)xa(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mh(t),o!==null){for(e.flags|=128,xa(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&st()>Xl&&(e.flags|=128,i=!0,xa(s,!1),e.lanes=4194304)}else{if(!i)if(t=mh(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return It(e),null}else 2*st()-s.renderingStartTime>Xl&&n!==1073741824&&(e.flags|=128,i=!0,xa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=st(),e.sibling=null,n=Ge.current,Le(Ge,i?n&1|2:n&1),e):(It(e),null);case 22:case 23:return Gy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Mn&1073741824&&(It(e),e.subtreeFlags&6&&(e.flags|=8192)):It(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function gD(t,e){switch(Ay(e),e.tag){case 1:return wn(e.type)&&ah(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wl(),je(vn),je(Ut),By(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ly(e),null;case 13:if(je(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Vl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ge),null;case 4:return Wl(),null;case 10:return Oy(e.type._context),null;case 22:case 23:return Gy(),null;case 24:return null;default:return null}}var Uc=!1,Ft=!1,yD=typeof WeakSet=="function"?WeakSet:Set,Q=null;function al(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){tt(t,e,i)}else n.current=null}function Ng(t,e,n){try{n()}catch(i){tt(t,e,i)}}var I1=!1;function vD(t,e){if(gg=rh,t=f2(),Cy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(l=o+r),d!==s||i!==0&&d.nodeType!==3||(a=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(l=o),h===s&&++c===i&&(a=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(yg={focusedElem:t,selectionRange:n},rh=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:ci(e.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(b){tt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return p=I1,I1=!1,p}function nu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Ng(e,n,s)}r=r.next}while(r!==i)}}function Cf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Lg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cC(t){var e=t.alternate;e!==null&&(t.alternate=null,cC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vi],delete e[Eu],delete e[bg],delete e[eD],delete e[tD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dC(t){return t.tag===5||t.tag===3||t.tag===4}function _1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lh));else if(i!==4&&(t=t.child,t!==null))for(Bg(t,e,n),t=t.sibling;t!==null;)Bg(t,e,n),t=t.sibling}function Ig(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Ig(t,e,n),t=t.sibling;t!==null;)Ig(t,e,n),t=t.sibling}var Ct=null,pi=!1;function Jr(t,e,n){for(n=n.child;n!==null;)hC(t,e,n),n=n.sibling}function hC(t,e,n){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(gf,n)}catch{}switch(n.tag){case 5:Ft||al(n,e);case 6:var i=Ct,r=pi;Ct=null,Jr(t,e,n),Ct=i,pi=r,Ct!==null&&(pi?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(pi?(t=Ct,n=n.stateNode,t.nodeType===8?_p(t.parentNode,n):t.nodeType===1&&_p(t,n),bu(t)):_p(Ct,n.stateNode));break;case 4:i=Ct,r=pi,Ct=n.stateNode.containerInfo,pi=!0,Jr(t,e,n),Ct=i,pi=r;break;case 0:case 11:case 14:case 15:if(!Ft&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ng(n,e,o),r=r.next}while(r!==i)}Jr(t,e,n);break;case 1:if(!Ft&&(al(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){tt(n,e,l)}Jr(t,e,n);break;case 21:Jr(t,e,n);break;case 22:n.mode&1?(Ft=(i=Ft)||n.memoizedState!==null,Jr(t,e,n),Ft=i):Jr(t,e,n);break;default:Jr(t,e,n)}}function $1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yD),e.forEach(function(i){var r=PD.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function li(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ct=l.stateNode,pi=!1;break e;case 3:Ct=l.stateNode.containerInfo,pi=!0;break e;case 4:Ct=l.stateNode.containerInfo,pi=!0;break e}l=l.return}if(Ct===null)throw Error(W(160));hC(s,o,r),Ct=null,pi=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(u){tt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fC(e,t),e=e.sibling}function fC(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(li(e,t),Oi(t),i&4){try{nu(3,t,t.return),Cf(3,t)}catch(g){tt(t,t.return,g)}try{nu(5,t,t.return)}catch(g){tt(t,t.return,g)}}break;case 1:li(e,t),Oi(t),i&512&&n!==null&&al(n,n.return);break;case 5:if(li(e,t),Oi(t),i&512&&n!==null&&al(n,n.return),t.flags&32){var r=t.stateNode;try{gu(r,"")}catch(g){tt(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Lk(r,s),og(l,o);var u=og(l,s);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?Fk(r,d):c==="dangerouslySetInnerHTML"?_k(r,d):c==="children"?gu(r,d):dy(r,c,d,u)}switch(l){case"input":tg(r,s);break;case"textarea":Bk(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?pl(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?pl(r,!!s.multiple,s.defaultValue,!0):pl(r,!!s.multiple,s.multiple?[]:"",!1))}r[Eu]=s}catch(g){tt(t,t.return,g)}}break;case 6:if(li(e,t),Oi(t),i&4){if(t.stateNode===null)throw Error(W(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){tt(t,t.return,g)}}break;case 3:if(li(e,t),Oi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{bu(e.containerInfo)}catch(g){tt(t,t.return,g)}break;case 4:li(e,t),Oi(t);break;case 13:li(e,t),Oi(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Hy=st())),i&4&&$1(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(u=Ft)||c,li(e,t),Ft=u):li(e,t),Oi(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Q=t,c=t.child;c!==null;){for(d=Q=c;Q!==null;){switch(h=Q,f=h.child,h.tag){case 0:case 11:case 14:case 15:nu(4,h,h.return);break;case 1:al(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){tt(i,n,g)}}break;case 5:al(h,h.return);break;case 22:if(h.memoizedState!==null){z1(d);continue}}f!==null?(f.return=h,Q=f):z1(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=$k("display",o))}catch(g){tt(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){tt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:li(e,t),Oi(t),i&4&&$1(t);break;case 21:break;default:li(e,t),Oi(t)}}function Oi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dC(n)){var i=n;break e}n=n.return}throw Error(W(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(gu(r,""),i.flags&=-33);var s=_1(t);Ig(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=_1(t);Bg(t,l,o);break;default:throw Error(W(161))}}catch(a){tt(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wD(t,e,n){Q=t,pC(t)}function pC(t,e,n){for(var i=(t.mode&1)!==0;Q!==null;){var r=Q,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Uc;if(!o){var l=r.alternate,a=l!==null&&l.memoizedState!==null||Ft;l=Uc;var u=Ft;if(Uc=o,(Ft=a)&&!u)for(Q=r;Q!==null;)o=Q,a=o.child,o.tag===22&&o.memoizedState!==null?j1(r):a!==null?(a.return=o,Q=a):j1(r);for(;s!==null;)Q=s,pC(s),s=s.sibling;Q=r,Uc=l,Ft=u}F1(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Q=s):F1(t)}}function F1(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Cf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ft)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ci(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&S1(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}S1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&bu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Ft||e.flags&512&&Lg(e)}catch(h){tt(e,e.return,h)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function z1(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function j1(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cf(4,e)}catch(a){tt(e,n,a)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(a){tt(e,r,a)}}var s=e.return;try{Lg(e)}catch(a){tt(e,s,a)}break;case 5:var o=e.return;try{Lg(e)}catch(a){tt(e,o,a)}}}catch(a){tt(e,e.return,a)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var bD=Math.ceil,vh=Vr.ReactCurrentDispatcher,Uy=Vr.ReactCurrentOwner,ti=Vr.ReactCurrentBatchConfig,xe=0,kt=null,at=null,Dt=0,Mn=0,ul=Vs(0),pt=0,Tu=null,Eo=0,Ef=0,Vy=0,iu=null,fn=null,Hy=0,Xl=1/0,ur=null,wh=!1,_g=null,As=null,Vc=!1,gs=null,bh=0,ru=0,$g=null,Nd=-1,Ld=0;function tn(){return xe&6?st():Nd!==-1?Nd:Nd=st()}function Ps(t){return t.mode&1?xe&2&&Dt!==0?Dt&-Dt:iD.transition!==null?(Ld===0&&(Ld=qk()),Ld):(t=Re,t!==0||(t=window.event,t=t===void 0?16:r2(t.type)),t):1}function xi(t,e,n,i){if(50<ru)throw ru=0,$g=null,Error(W(185));rc(t,n,i),(!(xe&2)||t!==kt)&&(t===kt&&(!(xe&2)&&(Ef|=n),pt===4&&ls(t,Dt)),bn(t,i),n===1&&xe===0&&!(e.mode&1)&&(Xl=st()+500,xf&&Hs()))}function bn(t,e){var n=t.callbackNode;iT(t,e);var i=ih(t,t===kt?Dt:0);if(i===0)n!==null&&Kw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Kw(n),e===1)t.tag===0?nD(U1.bind(null,t)):k2(U1.bind(null,t)),QT(function(){!(xe&6)&&Hs()}),n=null;else{switch(Qk(i)){case 1:n=gy;break;case 4:n=Yk;break;case 16:n=nh;break;case 536870912:n=Kk;break;default:n=nh}n=SC(n,mC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mC(t,e){if(Nd=-1,Ld=0,xe&6)throw Error(W(327));var n=t.callbackNode;if(wl()&&t.callbackNode!==n)return null;var i=ih(t,t===kt?Dt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=xh(t,i);else{e=i;var r=xe;xe|=2;var s=yC();(kt!==t||Dt!==e)&&(ur=null,Xl=st()+500,go(t,e));do try{kD();break}catch(l){gC(t,l)}while(1);My(),vh.current=s,xe=r,at!==null?e=0:(kt=null,Dt=0,e=pt)}if(e!==0){if(e===2&&(r=dg(t),r!==0&&(i=r,e=Fg(t,r))),e===1)throw n=Tu,go(t,0),ls(t,i),bn(t,st()),n;if(e===6)ls(t,i);else{if(r=t.current.alternate,!(i&30)&&!xD(r)&&(e=xh(t,i),e===2&&(s=dg(t),s!==0&&(i=s,e=Fg(t,s))),e===1))throw n=Tu,go(t,0),ls(t,i),bn(t,st()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(W(345));case 2:eo(t,fn,ur);break;case 3:if(ls(t,i),(i&130023424)===i&&(e=Hy+500-st(),10<e)){if(ih(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){tn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=wg(eo.bind(null,t,fn,ur),e);break}eo(t,fn,ur);break;case 4:if(ls(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-bi(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=st()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bD(i/1960))-i,10<i){t.timeoutHandle=wg(eo.bind(null,t,fn,ur),i);break}eo(t,fn,ur);break;case 5:eo(t,fn,ur);break;default:throw Error(W(329))}}}return bn(t,st()),t.callbackNode===n?mC.bind(null,t):null}function Fg(t,e){var n=iu;return t.current.memoizedState.isDehydrated&&(go(t,e).flags|=256),t=xh(t,e),t!==2&&(e=fn,fn=n,e!==null&&zg(e)),t}function zg(t){fn===null?fn=t:fn.push.apply(fn,t)}function xD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ci(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e){for(e&=~Vy,e&=~Ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bi(e),i=1<<n;t[n]=-1,e&=~i}}function U1(t){if(xe&6)throw Error(W(327));wl();var e=ih(t,0);if(!(e&1))return bn(t,st()),null;var n=xh(t,e);if(t.tag!==0&&n===2){var i=dg(t);i!==0&&(e=i,n=Fg(t,i))}if(n===1)throw n=Tu,go(t,0),ls(t,e),bn(t,st()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,eo(t,fn,ur),bn(t,st()),null}function Wy(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Xl=st()+500,xf&&Hs())}}function Ao(t){gs!==null&&gs.tag===0&&!(xe&6)&&wl();var e=xe;xe|=1;var n=ti.transition,i=Re;try{if(ti.transition=null,Re=1,t)return t()}finally{Re=i,ti.transition=n,xe=e,!(xe&6)&&Hs()}}function Gy(){Mn=ul.current,je(ul)}function go(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qT(n)),at!==null)for(n=at.return;n!==null;){var i=n;switch(Ay(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ah();break;case 3:Wl(),je(vn),je(Ut),By();break;case 5:Ly(i);break;case 4:Wl();break;case 13:je(Ge);break;case 19:je(Ge);break;case 10:Oy(i.type._context);break;case 22:case 23:Gy()}n=n.return}if(kt=t,at=t=Rs(t.current,null),Dt=Mn=e,pt=0,Tu=null,Vy=Ef=Eo=0,fn=iu=null,oo!==null){for(e=0;e<oo.length;e++)if(n=oo[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}oo=null}return t}function gC(t,e){do{var n=at;try{if(My(),Od.current=yh,gh){for(var i=Ye.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}gh=!1}if(Co=0,yt=dt=Ye=null,tu=!1,Ru=0,Uy.current=null,n===null||n.return===null){pt=1,Tu=e,at=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Dt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=M1(o);if(f!==null){f.flags&=-257,O1(f,o,l,s,e),f.mode&1&&R1(s,u,e),e=f,a=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(a),e.updateQueue=g}else p.add(a);break e}else{if(!(e&1)){R1(s,u,e),Xy();break e}a=Error(W(426))}}else if(Ve&&l.mode&1){var v=M1(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),O1(v,o,l,s,e),Py(Gl(a,l));break e}}s=a=Gl(a,l),pt!==4&&(pt=2),iu===null?iu=[s]:iu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Z2(s,a,e);x1(s,m);break e;case 1:l=a;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(As===null||!As.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=eC(s,l,e);x1(s,b);break e}}s=s.return}while(s!==null)}wC(n)}catch(k){e=k,at===n&&n!==null&&(at=n=n.return);continue}break}while(1)}function yC(){var t=vh.current;return vh.current=yh,t===null?yh:t}function Xy(){(pt===0||pt===3||pt===2)&&(pt=4),kt===null||!(Eo&268435455)&&!(Ef&268435455)||ls(kt,Dt)}function xh(t,e){var n=xe;xe|=2;var i=yC();(kt!==t||Dt!==e)&&(ur=null,go(t,e));do try{SD();break}catch(r){gC(t,r)}while(1);if(My(),xe=n,vh.current=i,at!==null)throw Error(W(261));return kt=null,Dt=0,pt}function SD(){for(;at!==null;)vC(at)}function kD(){for(;at!==null&&!JO();)vC(at)}function vC(t){var e=xC(t.alternate,t,Mn);t.memoizedProps=t.pendingProps,e===null?wC(t):at=e,Uy.current=null}function wC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gD(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,at=null;return}}else if(n=mD(n,e,Mn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);pt===0&&(pt=5)}function eo(t,e,n){var i=Re,r=ti.transition;try{ti.transition=null,Re=1,CD(t,e,n,i)}finally{ti.transition=r,Re=i}return null}function CD(t,e,n,i){do wl();while(gs!==null);if(xe&6)throw Error(W(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(rT(t,s),t===kt&&(at=kt=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vc||(Vc=!0,SC(nh,function(){return wl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ti.transition,ti.transition=null;var o=Re;Re=1;var l=xe;xe|=4,Uy.current=null,vD(t,n),fC(n,t),HT(yg),rh=!!gg,yg=gg=null,t.current=n,wD(n),YO(),xe=l,Re=o,ti.transition=s}else t.current=n;if(Vc&&(Vc=!1,gs=t,bh=r),s=t.pendingLanes,s===0&&(As=null),QO(n.stateNode),bn(t,st()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(wh)throw wh=!1,t=_g,_g=null,t;return bh&1&&t.tag!==0&&wl(),s=t.pendingLanes,s&1?t===$g?ru++:(ru=0,$g=t):ru=0,Hs(),null}function wl(){if(gs!==null){var t=Qk(bh),e=ti.transition,n=Re;try{if(ti.transition=null,Re=16>t?16:t,gs===null)var i=!1;else{if(t=gs,gs=null,bh=0,xe&6)throw Error(W(331));var r=xe;for(xe|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(Q=u;Q!==null;){var c=Q;switch(c.tag){case 0:case 11:case 15:nu(8,c,s)}var d=c.child;if(d!==null)d.return=c,Q=d;else for(;Q!==null;){c=Q;var h=c.sibling,f=c.return;if(cC(c),c===u){Q=null;break}if(h!==null){h.return=f,Q=h;break}Q=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nu(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Q=m;break e}Q=s.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Q=w;else e:for(o=y;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cf(9,l)}}catch(k){tt(l,l.return,k)}if(l===o){Q=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Q=b;break e}Q=l.return}}if(xe=r,Hs(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(gf,t)}catch{}i=!0}return i}finally{Re=n,ti.transition=e}}return!1}function V1(t,e,n){e=Gl(n,e),e=Z2(t,e,1),t=Es(t,e,1),e=tn(),t!==null&&(rc(t,1,e),bn(t,e))}function tt(t,e,n){if(t.tag===3)V1(t,t,n);else for(;e!==null;){if(e.tag===3){V1(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(As===null||!As.has(i))){t=Gl(n,t),t=eC(e,t,1),e=Es(e,t,1),t=tn(),e!==null&&(rc(e,1,t),bn(e,t));break}}e=e.return}}function ED(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=tn(),t.pingedLanes|=t.suspendedLanes&n,kt===t&&(Dt&n)===n&&(pt===4||pt===3&&(Dt&130023424)===Dt&&500>st()-Hy?go(t,0):Vy|=n),bn(t,e)}function bC(t,e){e===0&&(t.mode&1?(e=Nc,Nc<<=1,!(Nc&130023424)&&(Nc=4194304)):e=1);var n=tn();t=Fr(t,e),t!==null&&(rc(t,e,n),bn(t,n))}function AD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bC(t,n)}function PD(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(W(314))}i!==null&&i.delete(e),bC(t,n)}var xC;xC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,pD(t,e,n);mn=!!(t.flags&131072)}else mn=!1,Ve&&e.flags&1048576&&C2(e,dh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Dd(t,e),t=e.pendingProps;var r=Ul(e,Ut.current);vl(e,n),r=_y(null,e,i,t,r,n);var s=$y();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wn(i)?(s=!0,uh(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Dy(e),r.updater=Sf,e.stateNode=r,r._reactInternals=e,Ag(e,i,t,n),e=Mg(null,e,i,!0,s,n)):(e.tag=0,Ve&&s&&Ey(e),Jt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Dd(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=MD(i),t=ci(i,t),r){case 0:e=Rg(null,e,i,t,n);break e;case 1:e=N1(null,e,i,t,n);break e;case 11:e=T1(null,e,i,t,n);break e;case 14:e=D1(null,e,i,ci(i.type,t),n);break e}throw Error(W(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),Rg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),N1(t,e,i,r,n);case 3:e:{if(rC(e),t===null)throw Error(W(387));i=e.pendingProps,s=e.memoizedState,r=s.element,R2(t,e),ph(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Gl(Error(W(423)),e),e=L1(t,e,i,n,r);break e}else if(i!==r){r=Gl(Error(W(424)),e),e=L1(t,e,i,n,r);break e}else for(Nn=Cs(e.stateNode.containerInfo.firstChild),Bn=e,Ve=!0,mi=null,n=D2(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vl(),i===r){e=zr(t,e,n);break e}Jt(t,e,i,n)}e=e.child}return e;case 5:return N2(e),t===null&&kg(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,vg(i,r)?o=null:s!==null&&vg(i,s)&&(e.flags|=32),iC(t,e),Jt(t,e,o,n),e.child;case 6:return t===null&&kg(e),null;case 13:return sC(t,e,n);case 4:return Ny(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Hl(e,null,i,n):Jt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),T1(t,e,i,r,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Le(hh,i._currentValue),i._currentValue=o,s!==null)if(Ci(s.value,o)){if(s.children===r.children&&!vn.current){e=zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===i){if(s.tag===1){a=Or(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Cg(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Cg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,vl(e,n),r=ri(r),i=i(r),e.flags|=1,Jt(t,e,i,n),e.child;case 14:return i=e.type,r=ci(i,e.pendingProps),r=ci(i.type,r),D1(t,e,i,r,n);case 15:return tC(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),Dd(t,e),e.tag=1,wn(i)?(t=!0,uh(e)):t=!1,vl(e,n),O2(e,i,r),Ag(e,i,r,n),Mg(null,e,i,!0,t,n);case 19:return oC(t,e,n);case 22:return nC(t,e,n)}throw Error(W(156,e.tag))};function SC(t,e){return Jk(t,e)}function RD(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,e,n,i){return new RD(t,e,n,i)}function Jy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MD(t){if(typeof t=="function")return Jy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fy)return 11;if(t===py)return 14}return 2}function Rs(t,e){var n=t.alternate;return n===null?(n=Qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bd(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Jy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zo:return yo(n.children,r,s,e);case hy:o=8,r|=8;break;case Km:return t=Qn(12,n,e,r|2),t.elementType=Km,t.lanes=s,t;case qm:return t=Qn(13,n,e,r),t.elementType=qm,t.lanes=s,t;case Qm:return t=Qn(19,n,e,r),t.elementType=Qm,t.lanes=s,t;case Tk:return Af(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mk:o=10;break e;case Ok:o=9;break e;case fy:o=11;break e;case py:o=14;break e;case qr:o=16,i=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Qn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function yo(t,e,n,i){return t=Qn(7,t,i,e),t.lanes=n,t}function Af(t,e,n,i){return t=Qn(22,t,i,e),t.elementType=Tk,t.lanes=n,t.stateNode={isHidden:!1},t}function Wp(t,e,n){return t=Qn(6,t,null,e),t.lanes=n,t}function Gp(t,e,n){return e=Qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OD(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ap(0),this.expirationTimes=Ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ap(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Yy(t,e,n,i,r,s,o,l,a){return t=new OD(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Qn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dy(s),t}function TD(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function kC(t){if(!t)return Ns;t=t._reactInternals;e:{if(Lo(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(wn(n))return S2(t,n,e)}return e}function CC(t,e,n,i,r,s,o,l,a){return t=Yy(n,i,!0,t,r,s,o,l,a),t.context=kC(null),n=t.current,i=tn(),r=Ps(n),s=Or(i,r),s.callback=e??null,Es(n,s,r),t.current.lanes=r,rc(t,r,i),bn(t,i),t}function Pf(t,e,n,i){var r=e.current,s=tn(),o=Ps(r);return n=kC(n),e.context===null?e.context=n:e.pendingContext=n,e=Or(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Es(r,e,o),t!==null&&(xi(t,r,o,s),Md(t,r,o)),o}function Sh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function H1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ky(t,e){H1(t,e),(t=t.alternate)&&H1(t,e)}function DD(){return null}var EC=typeof reportError=="function"?reportError:function(t){console.error(t)};function qy(t){this._internalRoot=t}Rf.prototype.render=qy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Pf(t,e,null,null)};Rf.prototype.unmount=qy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ao(function(){Pf(null,t,null,null)}),e[$r]=null}};function Rf(t){this._internalRoot=t}Rf.prototype.unstable_scheduleHydration=function(t){if(t){var e=t2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<os.length&&e!==0&&e<os[n].priority;n++);os.splice(n,0,t),n===0&&i2(t)}};function Qy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function W1(){}function ND(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Sh(o);s.call(u)}}var o=CC(e,i,t,0,null,!1,!1,"",W1);return t._reactRootContainer=o,t[$r]=o.current,ku(t.nodeType===8?t.parentNode:t),Ao(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var u=Sh(a);l.call(u)}}var a=Yy(t,0,!1,null,null,!1,!1,"",W1);return t._reactRootContainer=a,t[$r]=a.current,ku(t.nodeType===8?t.parentNode:t),Ao(function(){Pf(e,a,n,i)}),a}function Of(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var a=Sh(o);l.call(a)}}Pf(e,o,t,r)}else o=ND(n,e,t,r,i);return Sh(o)}Zk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=za(e.pendingLanes);n!==0&&(yy(e,n|1),bn(e,st()),!(xe&6)&&(Xl=st()+500,Hs()))}break;case 13:Ao(function(){var i=Fr(t,1);if(i!==null){var r=tn();xi(i,t,1,r)}}),Ky(t,1)}};vy=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=tn();xi(e,t,134217728,n)}Ky(t,134217728)}};e2=function(t){if(t.tag===13){var e=Ps(t),n=Fr(t,e);if(n!==null){var i=tn();xi(n,t,e,i)}Ky(t,e)}};t2=function(){return Re};n2=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};ag=function(t,e,n){switch(e){case"input":if(tg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=bf(i);if(!r)throw Error(W(90));Nk(i),tg(i,r)}}}break;case"textarea":Bk(t,n);break;case"select":e=n.value,e!=null&&pl(t,!!n.multiple,e,!1)}};Uk=Wy;Vk=Ao;var LD={usingClientEntryPoint:!1,Events:[oc,il,bf,zk,jk,Wy]},Sa={findFiberByHostInstance:so,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},BD={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gk(t),t===null?null:t.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance||DD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{gf=Hc.inject(BD),Yi=Hc}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LD;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qy(e))throw Error(W(200));return TD(t,e,null,n)};_n.createRoot=function(t,e){if(!Qy(t))throw Error(W(299));var n=!1,i="",r=EC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Yy(t,1,!1,null,null,n,!1,i,r),t[$r]=e.current,ku(t.nodeType===8?t.parentNode:t),new qy(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=Gk(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return Ao(t)};_n.hydrate=function(t,e,n){if(!Mf(e))throw Error(W(200));return Of(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!Qy(t))throw Error(W(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=EC;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=CC(e,null,t,1,n??null,r,!1,s,o),t[$r]=e.current,ku(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Rf(e)};_n.render=function(t,e,n){if(!Mf(e))throw Error(W(200));return Of(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!Mf(t))throw Error(W(40));return t._reactRootContainer?(Ao(function(){Of(null,null,t,!1,function(){t._reactRootContainer=null,t[$r]=null})}),!0):!1};_n.unstable_batchedUpdates=Wy;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Mf(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Of(t,e,n,!1,i)};_n.version="18.2.0-next-9e3b772b8-20220608";function AC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AC)}catch(t){console.error(t)}}AC(),Ck.exports=_n;var ac=Ck.exports;const ID=nc(ac);var G1=ac;Jm.createRoot=G1.createRoot,Jm.hydrateRoot=G1.hydrateRoot;function _D(t,{insertAt:e}={}){if(!t||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}_D(`[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 6px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:-3px;margin-right:4px}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:-1px}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:auto;border:none;cursor:pointer;outline:none;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:auto}[data-sonner-toast] [data-cancel]{color:var(--color);background:var(--border-color)}[data-sonner-toast] [data-close-button]{position:absolute;left:0;top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:translate(-35%,-35%);border-radius:50%;opacity:0;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]{opacity:1}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}
`);var $D=t=>{switch(t){case"success":return jD;case"error":return UD;default:return null}},FD=Array(12).fill(0),zD=({visible:t})=>U.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},U.createElement("div",{className:"sonner-spinner"},FD.map((e,n)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),jD=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),UD=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),jg=0,VD=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...i}=t,r=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:jg++;return this.toasts.find(s=>s.id===r)?this.toasts=this.toasts.map(s=>s.id===r?(this.publish({...s,...t,id:r,title:n}),{...s,...t,id:r,title:n}):s):this.addToast({title:n,...i,id:r}),r},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.promise=(t,e)=>{let n=this.create({...e,promise:t,type:"loading",message:e.loading});return(t instanceof Promise?t:t()).then(i=>{let r=typeof e.success=="function"?e.success(i):e.success;this.create({id:n,type:"success",message:r})}).catch(i=>{let r=typeof e.error=="function"?e.error(i):e.error;this.create({id:n,type:"error",message:r})}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||jg++;this.publish({jsx:t(n),id:n,...e})},this.subscribers=[],this.toasts=[]}},Zr=new VD,HD=(t,e)=>{let n=(e==null?void 0:e.id)||jg++;return Zr.addToast({title:t,...e,id:n}),n},WD=HD,Zy=Object.assign(WD,{success:Zr.success,error:Zr.error,custom:Zr.custom,message:Zr.message,promise:Zr.promise,dismiss:Zr.dismiss}),GD=3,XD="32px",JD=4e3,YD=356,PC=14,KD=20,qD=200,QD=t=>{let{invert:e,toast:n,interacting:i,setHeights:r,visibleToasts:s,heights:o,index:l,toasts:a,expanded:u,removeToast:c,closeButton:d,style:h,className:f="",descriptionClassName:p="",duration:g,position:v,expandByDefault:m}=t,[y,w]=U.useState(!1),[b,k]=U.useState(!1),[A,P]=U.useState(!1),[B,C]=U.useState(!1),[E,R]=U.useState(0),[O,N]=U.useState(0),T=U.useRef(null),I=l===0,$=l+1<=s,z=n.type,L=n.className||"",_=n.descriptionClassName||"",j=U.useMemo(()=>o.findIndex(he=>he.toastId===n.id)||0,[o,n.id]),ee=U.useMemo(()=>n.duration||g||JD,[n.duration,g]),re=U.useRef(0),me=U.useRef(0),nt=U.useRef(ee),ot=U.useRef(0),Qe=U.useRef(null),[gt,lr]=v.split("-"),kn=U.useMemo(()=>o.reduce((he,Ze,Ht)=>Ht>=j?he:he+Ze.height,0),[o,j]),Xr=n.invert||e,jo=z==="loading";me.current=U.useMemo(()=>j*PC+kn,[j,kn]),U.useEffect(()=>{w(!0)},[]),U.useLayoutEffect(()=>{if(!y)return;let he=T.current,Ze=he.style.height;he.style.height="auto";let Ht=he.getBoundingClientRect().height;he.style.height=Ze,N(Ht),r(ar=>ar.find(Ks=>Ks.toastId===n.id)?ar.map(Ks=>Ks.toastId===n.id?{...Ks,height:Ht}:Ks):[{toastId:n.id,height:Ht},...ar])},[y,n.title,n.description,r,n.id]);let Mi=U.useCallback(()=>{k(!0),R(me.current),r(he=>he.filter(Ze=>Ze.toastId!==n.id)),setTimeout(()=>{c(n)},qD)},[n,c,r,me]);return U.useEffect(()=>{if(n.promise&&z==="loading"||n.duration===1/0)return;let he;return u||i?(()=>{if(ot.current<re.current){let Ze=new Date().getTime()-re.current;nt.current=nt.current-Ze}ot.current=new Date().getTime()})():(re.current=new Date().getTime(),he=setTimeout(()=>{var Ze;(Ze=n.onAutoClose)==null||Ze.call(n,n),Mi()},nt.current)),()=>clearTimeout(he)},[u,i,m,n,ee,Mi,n.promise,z]),U.useEffect(()=>{let he=T.current;if(he){let Ze=he.getBoundingClientRect().height;return N(Ze),r(Ht=>[{toastId:n.id,height:Ze},...Ht]),()=>r(Ht=>Ht.filter(ar=>ar.toastId!==n.id))}},[r,n.id]),U.useEffect(()=>{n.delete&&Mi()},[Mi,n.delete]),U.createElement("li",{"aria-live":n.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:T,className:f+" "+L,"data-sonner-toast":"","data-styled":!n.jsx,"data-mounted":y,"data-promise":!!n.promise,"data-removed":b,"data-visible":$,"data-y-position":gt,"data-x-position":lr,"data-index":l,"data-front":I,"data-swiping":A,"data-type":z,"data-invert":Xr,"data-swipe-out":B,"data-expanded":!!(u||m&&y),style:{"--index":l,"--toasts-before":l,"--z-index":a.length-l,"--offset":`${b?E:me.current}px`,"--initial-height":m?"auto":`${O}px`,...h,...n.style},onPointerDown:he=>{jo||(R(me.current),he.target.setPointerCapture(he.pointerId),he.target.tagName!=="BUTTON"&&(P(!0),Qe.current={x:he.clientX,y:he.clientY}))},onPointerUp:()=>{var he,Ze,Ht;if(B)return;Qe.current=null;let ar=Number(((he=T.current)==null?void 0:he.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(ar)>=KD){R(me.current),(Ze=n.onDismiss)==null||Ze.call(n,n),Mi(),C(!0);return}(Ht=T.current)==null||Ht.style.setProperty("--swipe-amount","0px"),P(!1)},onPointerMove:he=>{var Ze;if(!Qe.current)return;let Ht=he.clientY-Qe.current.y,ar=he.clientX-Qe.current.x,Ks=(gt==="top"?Math.min:Math.max)(0,Ht),_w=he.pointerType==="touch"?10:2;Math.abs(Ks)>_w?(Ze=T.current)==null||Ze.style.setProperty("--swipe-amount",`${Ht}px`):Math.abs(ar)>_w&&(Qe.current=null)}},d&&!n.jsx?U.createElement("button",{"aria-label":"Close toast","data-disabled":jo,"data-close-button":!0,onClick:jo?void 0:()=>{var he;Mi(),(he=n.onDismiss)==null||he.call(n,n)}},U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,n.jsx||U.isValidElement(n.title)?n.jsx||n.title:U.createElement(U.Fragment,null,z||n.icon||n.promise?U.createElement("div",{"data-icon":""},n.promise?U.createElement(zD,{visible:z==="loading"}):null,n.icon||$D(z)):null,U.createElement("div",{"data-content":""},U.createElement("div",{"data-title":""},n.title),n.description?U.createElement("div",{"data-description":"",className:p+_},n.description):null),n.cancel?U.createElement("button",{"data-button":!0,"data-cancel":!0,onClick:()=>{var he;Mi(),(he=n.cancel)!=null&&he.onClick&&n.cancel.onClick()}},n.cancel.label):null,n.action?U.createElement("button",{"data-button":"",onClick:he=>{var Ze;(Ze=n.action)==null||Ze.onClick(he),!he.defaultPrevented&&Mi()}},n.action.label):null))},ZD=t=>{var e;let{invert:n,position:i="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:a,theme:u="light",richColors:c,duration:d,style:h,visibleToasts:f=GD,toastOptions:p}=t,[g,v]=U.useState([]),[m,y]=U.useState([]),[w,b]=U.useState(!1),[k,A]=U.useState(!1),[P,B]=U.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),[C,E]=i.split("-"),R=U.useRef(null),O=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=U.useCallback(T=>v(I=>I.filter(({id:$})=>$!==T.id)),[]);return U.useEffect(()=>Zr.subscribe(T=>{if(T.dismiss){v(I=>I.map($=>$.id===T.id?{...$,delete:!0}:$));return}setTimeout(()=>{ID.flushSync(()=>{v(I=>{let $=I.findIndex(z=>z.id===T.id);return $!==-1?[...I.slice(0,$),{...I[$],...T},...I.slice($+1)]:[T,...I]})})})}),[]),U.useEffect(()=>{if(u!=="system"){B(u);return}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:T})=>{B(T?"dark":"light")})},[u]),U.useEffect(()=>{g.length<=1&&b(!1)},[g]),U.useEffect(()=>{let T=I=>{var $,z;r.every(L=>I[L]||I.code===L)&&(b(!0),($=R.current)==null||$.focus()),I.code==="Escape"&&(document.activeElement===R.current||(z=R.current)!=null&&z.contains(document.activeElement))&&b(!1)};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[r]),g.length?U.createElement("section",{"aria-label":`Notifications ${O}`,tabIndex:-1},U.createElement("ol",{tabIndex:-1,ref:R,className:l,"data-sonner-toaster":!0,"data-theme":P,"data-rich-colors":c,"data-y-position":C,"data-x-position":E,style:{"--front-toast-height":`${(e=m[0])==null?void 0:e.height}px`,"--offset":typeof a=="number"?`${a}px`:a||XD,"--width":`${YD}px`,"--gap":`${PC}px`,...h},onMouseEnter:()=>b(!0),onMouseMove:()=>b(!0),onMouseLeave:()=>{k||b(!1)},onPointerDown:()=>{A(!0)},onPointerUp:()=>A(!1)},g.map((T,I)=>U.createElement(QD,{key:T.id,index:I,toast:T,duration:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:f,closeButton:o,interacting:k,position:i,style:p==null?void 0:p.style,removeToast:N,toasts:g,heights:m,setHeights:y,expandByDefault:s,expanded:w})))):null};const eN="modulepreload",tN=function(t){return"/"+t},X1={},nN=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=tN(s),s in X1)return;X1[s]=!0;const o=s.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!i)for(let c=r.length-1;c>=0;c--){const d=r[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":eN,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function iN(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let l,a,u;const c=async(h=!0)=>{await a,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){const{Workbox:h}=await nN(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);l=new h("/sw.js",{scope:"/",type:"classic"}),u=async()=>{await(l==null?void 0:l.messageSkipWaiting())};{let f=!1;const p=()=>{f=!0,l==null||l.addEventListener("controlling",g=>{g.isUpdate&&window.location.reload()}),n==null||n()};l.addEventListener("installed",g=>{typeof g.isUpdate>"u"?typeof g.isExternal<"u"?g.isExternal?p():!f&&(i==null||i()):g.isExternal?window.location.reload():!f&&(i==null||i()):g.isUpdate||i==null||i()}),l.addEventListener("waiting",p),l.addEventListener("externalwaiting",p)}l.register({immediate:e}).then(f=>{s?s("/sw.js",f):r==null||r(f)}).catch(f=>{o==null||o(f)})}}return a=d(),c}function rN(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[l,a]=S.useState(!1),[u,c]=S.useState(!1),[d]=S.useState(()=>iN({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){a(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[l,a],offlineReady:[u,c],updateServiceWorker:d}}var sN=function(){};function RC(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function MC(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var OC=typeof window<"u",oN=function(t,e){return typeof e=="boolean"?e:!t},lN=function(t){return S.useReducer(oN,t)};const aN=lN;var uN=OC?window:null,J1=function(t){return!!t.addEventListener},Y1=function(t){return!!t.on},cN=function(t,e,n,i){n===void 0&&(n=uN),S.useEffect(function(){if(e&&n)return J1(n)?RC(n,t,e,i):Y1(n)&&n.on(t,e,i),function(){J1(n)?MC(n,t,e,i):Y1(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])};const TC=cN;var dN=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},hN=function(t,e,n,i){e===void 0&&(e=sN),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,l=n.options,a=S.useMemo(function(){var u=dN(t),c=function(d){if(u(d))return e(d)};return c},i);TC(s,a,o,l)};const fN=hN;var pN=function(t){return"touches"in t},K1=function(t){pN(t)&&t.touches.length<2&&t.preventDefault&&t.preventDefault()},mN=function(t,e){var n=e===void 0?{}:e,i=n.isPreventDefault,r=i===void 0?!0:i,s=n.delay,o=s===void 0?300:s,l=S.useRef(),a=S.useRef(),u=S.useCallback(function(d){r&&d.target&&(RC(d.target,"touchend",K1,{passive:!1}),a.current=d.target),l.current=setTimeout(function(){return t(d)},o)},[t,o,r]),c=S.useCallback(function(){l.current&&clearTimeout(l.current),r&&a.current&&MC(a.current,"touchend",K1)},[r]);return{onMouseDown:function(d){return u(d)},onTouchStart:function(d){return u(d)},onMouseUp:c,onMouseLeave:c,onTouchEnd:c}};const gN=mN;var yN=function(t,e){return e!==void 0?e:OC?window.matchMedia(t).matches:!1},vN=function(t,e){var n=S.useState(yN(t,e)),i=n[0],r=n[1];return S.useEffect(function(){var s=!0,o=window.matchMedia(t),l=function(){s&&r(!!o.matches)};return o.addListener(l),r(o.matches),function(){s=!1,o.removeListener(l)}},[t]),i};const wN=vN;function bN(){return wN("(max-width: 1024px)")}function DC(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=DC(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function Kn(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=DC(t))&&(i&&(i+=" "),i+=e);return i}function xN(){for(var t=0,e,n,i="";t<arguments.length;)(e=arguments[t++])&&(n=NC(e))&&(i&&(i+=" "),i+=n);return i}function NC(t){if(typeof t=="string")return t;for(var e,n="",i=0;i<t.length;i++)t[i]&&(e=NC(t[i]))&&(n&&(n+=" "),n+=e);return n}var ev="-";function SN(t){var e=CN(t),n=t.conflictingClassGroups,i=t.conflictingClassGroupModifiers,r=i===void 0?{}:i;function s(l){var a=l.split(ev);return a[0]===""&&a.length!==1&&a.shift(),LC(a,e)||kN(l)}function o(l,a){var u=n[l]||[];return a&&r[l]?[].concat(u,r[l]):u}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function LC(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],i=e.nextPart.get(n),r=i?LC(t.slice(1),i):void 0;if(r)return r;if(e.validators.length!==0){var s=t.join(ev);return(o=e.validators.find(function(l){var a=l.validator;return a(s)}))==null?void 0:o.classGroupId}}var q1=/^\[(.+)\]$/;function kN(t){if(q1.test(t)){var e=q1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function CN(t){var e=t.theme,n=t.prefix,i={nextPart:new Map,validators:[]},r=AN(Object.entries(t.classGroups),n);return r.forEach(function(s){var o=s[0],l=s[1];Ug(l,i,o,e)}),i}function Ug(t,e,n,i){t.forEach(function(r){if(typeof r=="string"){var s=r===""?e:Q1(e,r);s.classGroupId=n;return}if(typeof r=="function"){if(EN(r)){Ug(r(i),e,n,i);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(function(o){var l=o[0],a=o[1];Ug(a,Q1(e,l),n,i)})})}function Q1(t,e){var n=t;return e.split(ev).forEach(function(i){n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n}function EN(t){return t.isThemeGetter}function AN(t,e){return e?t.map(function(n){var i=n[0],r=n[1],s=r.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var a=l[0],u=l[1];return[e+a,u]})):o});return[i,s]}):t}function PN(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,i=new Map;function r(s,o){n.set(s,o),e++,e>t&&(e=0,i=n,n=new Map)}return{get:function(o){var l=n.get(o);if(l!==void 0)return l;if((l=i.get(o))!==void 0)return r(o,l),l},set:function(o,l){n.has(o)?n.set(o,l):r(o,l)}}}var BC="!";function RN(t){var e=t.separator||":",n=e.length===1,i=e[0],r=e.length;return function(o){for(var l=[],a=0,u=0,c,d=0;d<o.length;d++){var h=o[d];if(a===0){if(h===i&&(n||o.slice(d,d+r)===e)){l.push(o.slice(u,d)),u=d+r;continue}if(h==="/"){c=d;continue}}h==="["?a++:h==="]"&&a--}var f=l.length===0?o:o.substring(u),p=f.startsWith(BC),g=p?f.substring(1):f,v=c&&c>u?c-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:v}}}function MN(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(i){var r=i[0]==="[";r?(e.push.apply(e,n.sort().concat([i])),n=[]):n.push(i)}),e.push.apply(e,n.sort()),e}function ON(t){return{cache:PN(t.cacheSize),splitModifiers:RN(t),...SN(t)}}var TN=/\s+/;function DN(t,e){var n=e.splitModifiers,i=e.getClassGroupId,r=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(TN).map(function(o){var l=n(o),a=l.modifiers,u=l.hasImportantModifier,c=l.baseClassName,d=l.maybePostfixModifierPosition,h=i(d?c.substring(0,d):c),f=!!d;if(!h){if(!d)return{isTailwindClass:!1,originalClassName:o};if(h=i(c),!h)return{isTailwindClass:!1,originalClassName:o};f=!1}var p=MN(a).join(":"),g=u?p+BC:p;return{isTailwindClass:!0,modifierId:g,classGroupId:h,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,a=o.classGroupId,u=o.hasPostfixModifier,c=l+a;return s.has(c)?!1:(s.add(c),r(a,u).forEach(function(d){return s.add(l+d)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function NN(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,r,s,o=l;function l(u){var c=e[0],d=e.slice(1),h=d.reduce(function(f,p){return p(f)},c());return i=ON(h),r=i.cache.get,s=i.cache.set,o=a,a(u)}function a(u){var c=r(u);if(c)return c;var d=DN(u,i);return s(u,d),d}return function(){return o(xN.apply(null,arguments))}}function Ie(t){var e=function(i){return i[t]||[]};return e.isThemeGetter=!0,e}var IC=/^\[(?:([a-z-]+):)?(.+)\]$/i,LN=/^\d+\/\d+$/,BN=new Set(["px","full","screen"]),IN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_N=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$N=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ai(t){return ao(t)||BN.has(t)||LN.test(t)||Vg(t)}function Vg(t){return Bo(t,"length",HN)}function FN(t){return Bo(t,"size",_C)}function zN(t){return Bo(t,"position",_C)}function jN(t){return Bo(t,"url",WN)}function Wc(t){return Bo(t,"number",ao)}function ao(t){return!Number.isNaN(Number(t))}function UN(t){return t.endsWith("%")&&ao(t.slice(0,-1))}function ka(t){return Z1(t)||Bo(t,"number",Z1)}function ge(t){return IC.test(t)}function Ca(){return!0}function Yr(t){return IN.test(t)}function VN(t){return Bo(t,"",GN)}function Bo(t,e,n){var i=IC.exec(t);return i?i[1]?i[1]===e:n(i[2]):!1}function HN(t){return _N.test(t)}function _C(){return!1}function WN(t){return t.startsWith("url(")}function Z1(t){return Number.isInteger(Number(t))}function GN(t){return $N.test(t)}function XN(){var t=Ie("colors"),e=Ie("spacing"),n=Ie("blur"),i=Ie("brightness"),r=Ie("borderColor"),s=Ie("borderRadius"),o=Ie("borderSpacing"),l=Ie("borderWidth"),a=Ie("contrast"),u=Ie("grayscale"),c=Ie("hueRotate"),d=Ie("invert"),h=Ie("gap"),f=Ie("gradientColorStops"),p=Ie("gradientColorStopPositions"),g=Ie("inset"),v=Ie("margin"),m=Ie("opacity"),y=Ie("padding"),w=Ie("saturate"),b=Ie("scale"),k=Ie("sepia"),A=Ie("skew"),P=Ie("space"),B=Ie("translate"),C=function(){return["auto","contain","none"]},E=function(){return["auto","hidden","clip","visible","scroll"]},R=function(){return["auto",ge,e]},O=function(){return[ge,e]},N=function(){return["",ai]},T=function(){return["auto",ao,ge]},I=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},$=function(){return["solid","dashed","dotted","double","none"]},z=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},L=function(){return["start","end","center","between","around","evenly","stretch"]},_=function(){return["","0",ge]},j=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},ee=function(){return[ao,Wc]},re=function(){return[ao,ge]};return{cacheSize:500,theme:{colors:[Ca],spacing:[ai],blur:["none","",Yr,ge],brightness:ee(),borderColor:[t],borderRadius:["none","","full",Yr,ge],borderSpacing:O(),borderWidth:N(),contrast:ee(),grayscale:_(),hueRotate:re(),invert:_(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[UN,Vg],inset:R(),margin:R(),opacity:ee(),padding:O(),saturate:ee(),scale:ee(),sepia:_(),skew:re(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",ge]}],container:["container"],columns:[{columns:[Yr]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(I(),[ge])}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ka]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ge]}],grow:[{grow:_()}],shrink:[{shrink:_()}],order:[{order:["first","last","none",ka]}],"grid-cols":[{"grid-cols":[Ca]}],"col-start-end":[{col:["auto",{span:["full",ka]},ge]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[Ca]}],"row-start-end":[{row:["auto",{span:[ka]},ge]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ge]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(L())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(L(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(L(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ge,e]}],"min-w":[{"min-w":["min","max","fit",ge,ai]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Yr]},Yr,ge]}],h:[{h:[ge,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ge,ai]}],"max-h":[{"max-h":[ge,e,"min","max","fit"]}],"font-size":[{text:["base",Yr,Vg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wc]}],"font-family":[{font:[Ca]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ge]}],"line-clamp":[{"line-clamp":["none",ao,Wc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ge,ai]}],"list-image":[{"list-image":["none",ge]}],"list-style-type":[{list:["none","disc","decimal",ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat($(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ai]}],"underline-offset":[{"underline-offset":["auto",ge,ai]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(I(),[zN])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",FN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jN]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[].concat($(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:$()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat($())}],"outline-offset":[{"outline-offset":[ge,ai]}],"outline-w":[{outline:[ai]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[ai]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Yr,VN]}],"shadow-color":[{shadow:[Ca]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":z()}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[a]}],"drop-shadow":[{"drop-shadow":["","none",Yr,ge]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[a]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ge]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",ge]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[ka,ge]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ge]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ge]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ge]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ai,Wc]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var JN=NN(XN);function bl(...t){return JN(Kn(t))}let YN=0;function de(t,e){const n=`atom${++YN}`,i={toString:()=>n};return typeof t=="function"?i.read=t:(i.init=t,i.read=r=>r(i),i.write=(r,s,o)=>s(i,typeof o=="function"?o(r(i)):o)),e&&(i.write=e),i}const eb=t=>"init"in t,tb=t=>!!t.write,kh=new WeakMap,KN=(t,e)=>{kh.set(t,e),t.catch(()=>{}).finally(()=>kh.delete(t))},nb=(t,e)=>{const n=kh.get(t);n&&(kh.delete(t),n(e))},ib=(t,e)=>{t.status="fulfilled",t.value=e},rb=(t,e)=>{t.status="rejected",t.reason=e},qN=t=>typeof(t==null?void 0:t.then)=="function",Ea=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),sb=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),Vo=t=>"v"in t&&t.v instanceof Promise,QN=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Gc=t=>{if("e"in t)throw t.e;return t.v},tv=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let i,r,s;const o=C=>t.get(C),l=(C,E)=>{const R=t.get(C);if(t.set(C,E),n.has(C)||n.set(C,R),R&&Vo(R)){const O="v"in E?E.v instanceof Promise?E.v:Promise.resolve(E.v):Promise.reject(E.e);nb(R.v,O)}},a=(C,E,R)=>{const O=new Map;let N=!1;R.forEach((T,I)=>{!T&&I===C&&(T=E),T&&(O.set(I,T),E.d.get(I)!==T&&(N=!0))}),(N||E.d.size!==O.size)&&(E.d=O)},u=(C,E,R)=>{const O=o(C),N={d:(O==null?void 0:O.d)||new Map,v:E};if(R&&a(C,N,R),O&&Ea(O,N)&&O.d===N.d)return O;if(O&&Vo(O)&&Vo(N)&&QN(O,N)){if(O.d===N.d)return O;N.v=O.v}return l(C,N),N},c=(C,E,R,O)=>{if(qN(E)){let N;const T=new Promise((I,$)=>{let z=!1;E.then(L=>{if(!z){z=!0;const _=o(C),j=u(C,T,R);ib(T,L),I(L),(_==null?void 0:_.d)!==j.d&&A(C,j,_==null?void 0:_.d)}},L=>{if(!z){z=!0;const _=o(C),j=u(C,T,R);rb(T,L),$(L),(_==null?void 0:_.d)!==j.d&&A(C,j,_==null?void 0:_.d)}}),N=L=>{z||(z=!0,L.then(_=>ib(T,_),_=>rb(T,_)),I(L))}});return T.orig=E,T.status="pending",KN(T,I=>{I&&N(I),O==null||O()}),u(C,T,R)}return u(C,E,R)},d=(C,E,R)=>{const O=o(C),N={d:(O==null?void 0:O.d)||new Map,e:E};return R&&a(C,N,R),O&&sb(O,N)&&O.d===N.d?O:(l(C,N),N)},h=C=>{const E=o(C);if(E&&(E.d.forEach((z,L)=>{L!==C&&!e.has(L)&&h(L)}),Array.from(E.d).every(([z,L])=>{const _=o(z);return z===C||_===L||_&&!Vo(_)&&Ea(_,L)})))return E;const R=new Map;let O=!0;const N=z=>{if(z===C){const _=o(z);if(_)return R.set(z,_),Gc(_);if(eb(z))return R.set(z,void 0),z.init;throw new Error("no atom init")}const L=h(z);return R.set(z,L),Gc(L)};let T,I;const $={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return!I&&tb(C)&&(I=(...z)=>{if(!O)return w(C,...z)}),I}};try{const z=C.read(N,$);return c(C,z,R,()=>T==null?void 0:T.abort())}catch(z){return d(C,z,R)}finally{O=!1}},f=C=>Gc(h(C)),p=C=>{let E=e.get(C);return E||(E=b(C)),E},g=(C,E)=>!E.l.size&&(!E.t.size||E.t.size===1&&E.t.has(C)),v=C=>{const E=e.get(C);E&&g(C,E)&&k(C)},m=C=>{const E=new Map,R=new WeakMap,O=T=>{const I=e.get(T);I==null||I.t.forEach($=>{$!==T&&(E.set($,(E.get($)||new Set).add(T)),R.set($,(R.get($)||0)+1),O($))})};O(C);const N=T=>{const I=e.get(T);I==null||I.t.forEach($=>{var z;if($!==T){let L=R.get($);if(L&&R.set($,--L),!L){let _=!!((z=E.get($))!=null&&z.size);if(_){const j=o($),ee=h($);_=!j||!Ea(j,ee)}_||E.forEach(j=>j.delete($))}N($)}})};N(C)},y=(C,...E)=>{let R=!0;const O=I=>Gc(h(I)),N=(I,...$)=>{let z;if(I===C){if(!eb(I))throw new Error("atom not writable");const L=o(I),_=c(I,$[0]);(!L||!Ea(L,_))&&m(I)}else z=y(I,...$);if(!R){const L=P()}return z},T=C.write(O,N,...E);return R=!1,T},w=(C,...E)=>{const R=y(C,...E),O=P();return R},b=(C,E)=>{const R={t:new Set(E&&[E]),l:new Set};if(e.set(C,R),h(C).d.forEach((O,N)=>{const T=e.get(N);T?T.t.add(C):N!==C&&b(N,C)}),h(C),tb(C)&&C.onMount){const O=C.onMount((...N)=>w(C,...N));O&&(R.u=O)}return R},k=C=>{var E;const R=(E=e.get(C))==null?void 0:E.u;R&&R(),e.delete(C);const O=o(C);O&&(Vo(O)&&nb(O.v),O.d.forEach((N,T)=>{if(T!==C){const I=e.get(T);I&&(I.t.delete(C),g(T,I)&&k(T))}}))},A=(C,E,R)=>{const O=new Set(E.d.keys());R==null||R.forEach((N,T)=>{if(O.has(T)){O.delete(T);return}const I=e.get(T);I&&(I.t.delete(C),g(T,I)&&k(T))}),O.forEach(N=>{const T=e.get(N);T?T.t.add(C):e.has(C)&&b(N,C)})},P=()=>{let C;for(;n.size;){const E=Array.from(n);n.clear(),E.forEach(([R,O])=>{const N=o(R);if(N){N.d!==(O==null?void 0:O.d)&&A(R,N,O==null?void 0:O.d);const T=e.get(R);T&&!(O&&!Vo(O)&&(Ea(O,N)||sb(O,N)))&&T.l.forEach(I=>I())}})}};return{get:f,set:w,sub:(C,E)=>{const R=p(C),O=P(),N=R.l;return N.add(E),()=>{N.delete(E),v(C)}}}};let Xp;const ZN=()=>(Xp||(Xp=tv()),Xp),$C=S.createContext(void 0),FC=t=>{const e=S.useContext($C);return(t==null?void 0:t.store)||e||ZN()},eL=({children:t,store:e})=>{const n=S.useRef();return!e&&!n.current&&(n.current=tv()),S.createElement($C.Provider,{value:e||n.current},t)},tL=t=>typeof(t==null?void 0:t.then)=="function",nL=U.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Qi(t,e){const n=FC(e),[[i,r,s],o]=S.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let l=i;(r!==n||s!==t)&&(o(),l=n.get(t));const a=e==null?void 0:e.delay;return S.useEffect(()=>{const u=n.sub(t,()=>{if(typeof a=="number"){setTimeout(o,a);return}o()});return o(),u},[n,t,a]),S.useDebugValue(l),tL(l)?nL(l):l}function iL(t,e){const n=FC(e);return S.useCallback((...r)=>n.set(t,...r),[n,t])}function Ua(t,e){return[Qi(t,e),iL(t,e)]}function Ch(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{e(t[r],r,t)}catch(s){i.push(n(s,r,t))}return i}function zC(t,e,n,i,r){for(e=e.split?e.split("."):e,i=0;i<e.length;i++)t=t?t[e[i]]:r;return t===r?n:t}function nv(t){return function(n,i,...r){const s=zC(t,`${n}.${i}`,null);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}class vt{constructor(e,n){Y(this,"start");Y(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new vt(i,r)}toJSON(){return this.range}}function jC(t){const e=t.charCodeAt(0);return D.fitsUnsigned(e,8)?e:null}function iv(t){return D.fitsUnsigned(t,8)?String.fromCharCode(t):null}var We,et;const we=class we{constructor(e,n){ie(this,We,void 0);ie(this,et,void 0);F(this,We,e|0),F(this,et,n)}get size(){return x(this,et)}is8bits(){return x(this,et)===8}is16bits(){return x(this,et)===16}get unsigned(){return x(this,We)}get signed(){return x(this,We)<=we.maxSignedValue(x(this,et))?x(this,We):x(this,We)-(we.maxValue(x(this,et))+1)}get low(){return this.is8bits()?this:we.fromUnsigned(x(this,We)&we.maxValue(8),8)}get high(){return this.is8bits()?new we(0,8):we.fromUnsigned(x(this,We)>>8&we.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return we.fromUnsigned(x(this,We)&~we.maxValue(8)|e.unsigned,x(this,et))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return we.fromUnsigned(x(this,We)&we.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=x(this,et))throw new RangeError(`Index ${e} out of bounds for byte of size ${x(this,et)}`);return(x(this,We)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=x(this,et))throw new RangeError(`Index ${e} out of bounds for byte of size ${x(this,et)}`);return n?we.fromUnsigned(x(this,We)|1<<e,x(this,et)):we.fromUnsigned(x(this,We)&~(1<<e),x(this,et))}add(e){return e=Number(e),we.fromUnsigned(x(this,We)+e,x(this,et))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:x(this,We)===x(e,We)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(x(this,et));for(let n=0;n<x(this,et);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return x(this,We).toString(16).padStart(x(this,et)/4,"0").toUpperCase();case"bin":return x(this,We).toString(2).padStart(x(this,et),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return x(this,et)===8?iv(x(this,We))??"---":this.low.toString("ascii")+this.high.toString("ascii")}}toJSON(){return x(this,We)}valueOf(){return x(this,We)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=we.minSignedValue(n)&&e<=we.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=we.minValue()&&e<=we.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=we.minSignedValue(n)&&e<=we.maxSignedValue(n)}static fromUnsigned(e,n){if(!we.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new we(e,n)}static fromSigned(e,n){if(!we.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new we(e+we.maxValue(n)+1,n):new we(e,n)}static fromNumber(e,n){return e<0?we.fromSigned(e,n):we.fromUnsigned(e,n)}static fromChar(e){const n=jC(e)??-1;return we.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*we.maxValue(e));return new we(n,e)}static zero(e){return new we(0,e)}};We=new WeakMap,et=new WeakMap;let D=we;var hr;const is=class is{constructor(e){ie(this,hr,void 0);F(this,hr,e)}get value(){return x(this,hr).unsigned}get byte(){return x(this,hr)}toString(e=!0){let n=x(this,hr).toString("hex");return e&&(n+="h"),n}toJSON(){return x(this,hr).toJSON()}valueOf(){return x(this,hr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=is.MIN_ADDRESS&&e<=is.MAX_ADDRESS}static from(e){if(e=Number(e),!is.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=D.fromUnsigned(e,16);return new is(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i}};hr=new WeakMap,Y(is,"MIN_ADDRESS",0),Y(is,"MAX_ADDRESS",32767);let se=is;var fr;const rs=class rs{constructor(e){ie(this,fr,void 0);F(this,fr,e)}get value(){return x(this,fr).unsigned}get byte(){return x(this,fr)}toString(e=!0){let n=x(this,fr).toString("hex");return e&&(n+="h"),n}toJSON(){return x(this,fr).toJSON()}valueOf(){return x(this,fr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=rs.MIN_ADDRESS&&e<=rs.MAX_ADDRESS}static from(e){if(e=Number(e),!rs.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=D.fromUnsigned(e,8);return new rs(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};fr=new WeakMap,Y(rs,"MIN_ADDRESS",0),Y(rs,"MAX_ADDRESS",127);let xn=rs;const ob=se.from(se.MAX_ADDRESS).toString(),rL=xn.from(xn.MAX_ADDRESS).toString(),sL={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${se.format(t)} is out of range (max memory address: ${ob}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${se.format(t)}, which is outside the memory range (max memory address: ${ob}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${rL}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"label-should-be-writable":t=>`Label ${t} doesn't point to a writable memory address  should point to a DB or DW declaration.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},lb=se.from(se.MAX_ADDRESS).toString(),oL=xn.from(xn.MAX_ADDRESS).toString(),lL={"address-has-code":t=>`La direccin de memoria ${se.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${t} est fuera de rango (direccin mxima de memoria: ${lb}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${se.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${lb}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${oL}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"label-should-be-writable":t=>`La etiqueta ${t} no apunta a una direccin de memoria modificable  debera apuntar a una declaracin DB o DW.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${t}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},aL=nv({en:sL,es:lL});class J extends Error{constructor(n,...i){super();Y(this,"code");Y(this,"context");Y(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof vt?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return aL(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof J?n:new J("unexpected-error",n)}}var cs,Nl;class uL{constructor(){Y(this,"codeMemory",new Set);Y(this,"labels",new Map);ie(this,cs,!1);ie(this,Nl,!1)}loadStatements(e){if(x(this,cs))throw new Error("Tried to load statements twice");F(this,cs,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new J("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:se.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:se.from(0)})}return n}computeAddresses(e){if(x(this,Nl))throw new Error("Tried to compute addresses twice");F(this,Nl,!0),this.codeMemory.clear();const n=new Set;let i=null;return Ch(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){i=s.newAddress;return}if(i===null)throw new J("missing-org").at(s);const o=s.length;for(let a=0;a<o;a++){if(!se.inRange(i+a))throw new J("instruction-out-of-range",i+a).at(s);const u=se.from(i+a);if(n.has(u.value))throw new J("occupied-address",u).at(s);n.add(u.value),s.isInstruction()&&this.codeMemory.add(u.value)}const l=se.from(i);s.setStart(l),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:l}),i+=o},J.from)}labelExists(e){if(!x(this,cs))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!x(this,cs))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!x(this,cs))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!x(this,Nl))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof se&&(e=e.value),this.codeMemory.has(e)}}cs=new WeakMap,Nl=new WeakMap;const cL=["AL","BL","CL","DL","AH","BH","CH","DH"],UC=["AX","BX","CX","DX","SP"],Eh=[...cL,...UC],rv=["DB","DW","EQU"],sv=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],dL=["OFFSET","ORG","BYTE","WORD","PTR","END",...Eh,...sv,...rv];class hL{constructor(e,n,i){Y(this,"type");Y(this,"lexeme");Y(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class fL{constructor(e){Y(this,"scanned",!1);Y(this,"tokens",[]);Y(this,"position",new vt(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new vt(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new J("lexer.unterminated-string").at(this.position);if(this.peek().charCodeAt(0)>255)throw new J("lexer.only-ascii").at(new vt(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new J("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new J("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();dL.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new J("lexer.unexpected-character",e).at(this.position)}return this.position=new vt(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new hL(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new vt(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Mt{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}Y(Mt,"numberLiteral",(...e)=>new pL(...e)),Y(Mt,"label",(...e)=>new mL(...e)),Y(Mt,"unaryOperation",(...e)=>new gL(...e)),Y(Mt,"binaryOperation",(...e)=>new yL(...e));class pL extends Mt{constructor(n,i){super(i);Y(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class mL extends Mt{constructor(n,i,r){super(r);Y(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new J("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new J("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new J("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class gL extends Mt{constructor(n,i,r){super(r);Y(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class yL extends Mt{constructor(n,i,r,s){super(s);Y(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Tf{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var pr;class VC extends Tf{constructor(n,i,r){super(r);Y(this,"type","data-directive");Y(this,"label");Y(this,"values");ie(this,pr,null);this.values=n,this.label=i}get start(){if(x(this,pr)===null)throw new Error("Start not set");return x(this,pr)}setStart(n){if(x(this,pr)!==null)throw new Error("Start already set");F(this,pr,n)}toJSON(){return{...super.toJSON(),...x(this,pr)?{start:x(this,pr).toJSON()}:{},directive:this.directive,label:this.label}}}pr=new WeakMap;var mo,ds,Ll;class vL extends VC{constructor(n,i,r){super(n,i,r);Y(this,"directive","EQU");ie(this,mo,"not-processed");ie(this,ds,null);ie(this,Ll,null)}toJSON(){var n;return{...super.toJSON(),value:x(this,Ll)??((n=x(this,ds))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(x(this,ds))throw new Error("Constant already validated");if(!this.label)throw new J("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new J("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new J("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new J("cannot-be-unassinged","EQU").at(n);F(this,ds,n.value)}evaluateExpressions(n){if(!x(this,ds))throw new Error("Constant not validated");if(x(this,mo)==="processed")return x(this,Ll);if(x(this,mo)==="processing")throw new J("circular-reference").at(this.position);F(this,mo,"processed");const i=x(this,ds).evaluate(n);return F(this,mo,"processed"),F(this,Ll,i),i}evaluate(n){return this.evaluateExpressions(n)}}mo=new WeakMap,ds=new WeakMap,Ll=new WeakMap;const Va=Symbol("unassigned");var an,di;class wL extends VC{constructor(n,i,r,s){super(i,r,s);Y(this,"size");ie(this,an,null);ie(this,di,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!x(this,an))throw new Error("Data directive not validated");return x(this,an).length*(this.size/8)}getValues(){if(!x(this,di))throw new Error("Data directive not evaluated");return x(this,di)}toJSON(){return{...super.toJSON(),values:(x(this,di)??x(this,an)??this.values).map(n=>n===Va?"?":n.toJSON())}}validate(){if(x(this,an))throw new Error("Data directive already validated");F(this,an,[]);for(const n of this.values)if(n.isUnassigned())x(this,an).push(Va);else if(n.isString()){if(this.directive!=="DB")throw new J("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=jC(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new vt(n.position.start+r,n.position.start+r+1),l=Mt.numberLiteral(s,o);x(this,an).push(l)}}else x(this,an).push(n.value);if(x(this,an).length===0)throw new J("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!x(this,an))throw new Error("Data directive not validated");if(x(this,di))throw new Error("Data directive already evaluated");F(this,di,[]);const i=Ch(x(this,an),r=>{if(r===Va)x(this,di).push(Va);else{const s=r.evaluate(n);if(!D.fits(s,this.size))throw new J("value-out-of-range",s,this.size).at(this);const o=D.fromNumber(s,this.size);x(this,di).push(o)}},J.from);return i.length>0&&F(this,di,null),i}}an=new WeakMap,di=new WeakMap;class ov{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class bL extends ov{constructor(n,i){super(i);Y(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class xL extends ov{constructor(n){super(n);Y(this,"type","unassigned")}}class SL extends ov{constructor(n){super(n.position);Y(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function kL(t,e,n){const i=vt.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new wL(t.type,e,n,i);case"EQU":return new vL(e,n,i)}}class CL extends Tf{constructor(n){super(n);Y(this,"type","end")}}function to(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var mr;class Io extends Tf{constructor(n,i,r){super(r);Y(this,"type","instruction");Y(this,"label");Y(this,"operands");ie(this,mr,null);this.operands=n,this.label=i}get start(){if(x(this,mr)===null)throw new Error("Start not set");return x(this,mr)}setStart(n){if(x(this,mr)!==null)throw new Error("Start already set");F(this,mr,n)}toJSON(){return{...super.toJSON(),...x(this,mr)?{start:x(this,mr).toJSON()}:{},instruction:this.instruction,label:this.label}}}mr=new WeakMap;var _t,Vn;class EL extends Io{constructor(n,i,r,s){super(i,r,s);ie(this,_t,null);ie(this,Vn,null);this.instruction=n}get length(){if(!x(this,_t))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=x(this,_t);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!x(this,Vn))throw new Error("Instruction not evaluated");return x(this,Vn)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],l={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=l[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=to(s)<<3,o[1]|=to(r)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=to(r)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=to(r)<<0,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}case"mem<-reg":{r.mode==="direct"?(o[1]=192,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=208,o[1]|=to(s)<<0;break}case"mem<-imd":{r.mode==="direct"?(o[1]=200,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...x(this,Vn)??x(this,_t)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(x(this,_t))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new J("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new J("size-mismatch",r.size,i.size).at(this);F(this,_t,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new J("size-mismatch",r.size,i.size).at(this);F(this,_t,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new J("size-mismatch",r.size,i.size).at(this);F(this,_t,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}if(r.value.isLabel()){const s=r.isDataDirectiveLabel(n);if(s){if(s!==i.size)throw new J("size-mismatch",s,i.size).at(this);F(this,_t,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:Mt.label(r.value.value,!0,r.value.position)}});return}}F(this,_t,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else if(i.value.isLabel()){if(s=i.isDataDirectiveLabel(n)||"auto",s==="auto")throw new J("label-should-be-writable",i.value.value).at(i);o={mode:"direct",address:Mt.label(i.value.value,!0,i.value.position)}}else throw new J("destination-cannot-be-immediate").at(i);if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new J("size-mismatch",s,r.size).at(this);F(this,_t,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.isDataDirectiveLabel(n))throw new J("double-memory-access").at(this);if(s==="auto")throw new J("unknown-size").at(i);F(this,_t,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new J("double-memory-access").at(this)}}evaluateExpressions(n){if(!x(this,_t))throw new Error("Instruction not validated");if(x(this,Vn))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=x(this,_t),l=a=>{const u=a.evaluate(n);if(!se.inRange(u))throw new J("address-out-of-range",u).at(a);const c=se.from(u);if(n.addressIsReserved(c))throw new J("address-has-code",c).at(a);return c};switch(i){case"reg<-reg":{F(this,Vn,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{F(this,Vn,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:l(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const a=o.evaluate(n);if(!D.fits(a,r))throw new J("value-out-of-range",a,r).at(o);const u=D.fromNumber(a,r);F(this,Vn,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{F(this,Vn,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:l(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const a=o.evaluate(n);if(!D.fits(a,r))throw new J("value-out-of-range",a,r).at(o);const u=D.fromNumber(a,r);F(this,Vn,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:l(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}_t=new WeakMap,Vn=new WeakMap;var _i,gr;class AL extends Io{constructor(n,i,r,s){super(i,r,s);ie(this,_i,null);ie(this,gr,null);Y(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!x(this,gr))throw new Error("Instruction not evaluated");return x(this,gr)}toJSON(){return{...super.toJSON(),...x(this,gr)?{value:x(this,gr).toJSON()}:x(this,_i)?{initialValue:x(this,_i).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(x(this,_i))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new J("expects-immediate").at(n);F(this,_i,n.value)}evaluateExpressions(n){if(!x(this,_i))throw new Error("Instruction not validated");if(x(this,gr))throw new Error("Instruction aready evaluated");const i=x(this,_i).evaluate(n);if(!D.fitsUnsigned(i,8))throw new J("invalid-interrupt",i).at(x(this,_i));F(this,gr,D.fromUnsigned(i,8))}}_i=new WeakMap,gr=new WeakMap;var hi,yr,uk;let PL=(uk=class extends Io{constructor(n,i,r,s){super(i,r,s);ie(this,hi,null);ie(this,yr,null);this.instruction=n}get length(){if(!x(this,hi))throw new Error("Instruction not validated");return x(this,hi).port==="fixed"?2:1}toBytes(){const n=[],i={IN:80,OUT:84};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(x(this,yr)===null)throw new Error("Operation not set");return x(this,yr)}toJSON(){return{...super.toJSON(),...x(this,yr)??x(this,hi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(x(this,hi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new J("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new J("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new J("expects-dx").at(i);F(this,hi,{port:"variable",size:r});return}if(i.isNumberExpression()){F(this,hi,{port:"fixed",size:r,address:i.value});return}throw new J("expects-immediate").at(i)}evaluateExpressions(n){if(!x(this,hi))throw new Error("Instruction not validated");if(x(this,yr))throw new Error("Instruction aready evaluated");const i=x(this,hi);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!xn.inRange(r))throw new J("io-address-out-of-range",r).at(this);const s=xn.from(r);F(this,yr,{port:"fixed",size:i.size,address:s})}else F(this,yr,{port:"variable",size:i.size})}},hi=new WeakMap,yr=new WeakMap,uk);var vr,wr,ck;let RL=(ck=class extends Io{constructor(n,i,r,s){super(i,r,s);ie(this,vr,null);ie(this,wr,null);Y(this,"length",3);this.instruction=n}toBytes(){const n=[],i={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(x(this,wr)===null)throw new Error("Instruction not evaluated");return x(this,wr)}toJSON(){return{...super.toJSON(),...x(this,wr)?{address:x(this,wr).toJSON()}:x(this,vr)?{jumpTo:x(this,vr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(x(this,vr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new J("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new J("label-not-found",r).at(i);if(s!=="instruction")throw new J("label-should-be-an-instruction",r).at(i);F(this,vr,r)}evaluateExpressions(n){if(!x(this,vr))throw new Error("Instruction not validated");if(x(this,wr))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(x(this,vr));if(!se.inRange(i))throw new J("address-out-of-range",i).at(this);F(this,wr,se.from(i))}},vr=new WeakMap,wr=new WeakMap,ck);var $i,dk;let ML=(dk=class extends Io{constructor(n,i,r,s){super(i,r,s);ie(this,$i,null);Y(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:96,POP:104}[this.instruction];return i|=to(this.register),new Uint8Array([i])}get register(){if(!x(this,$i))throw new Error("Instruction not evaluated");return x(this,$i)}toJSON(){return{...super.toJSON(),...x(this,$i)?{register:x(this,$i)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(x(this,$i))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new J("expects-word-register").at(n);F(this,$i,n.value)}evaluateExpressions(){if(!x(this,$i))throw new Error("Instruction not validated")}},$i=new WeakMap,dk);var An,Fi;class OL extends Io{constructor(n,i,r,s){super(i,r,s);ie(this,An,null);ie(this,Fi,null);this.instruction=n}get length(){if(!x(this,An))throw new Error("Instruction not validated");const{mode:n}=x(this,An);let i=2;return n==="mem-direct"&&(i+=2),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=to(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!x(this,Fi))throw new Error("Instruction not evaluated");return x(this,Fi)}toJSON(){return{...super.toJSON(),...x(this,Fi)??x(this,An)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(x(this,An))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new J("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){F(this,An,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new J("unknown-size").at(i);F(this,An,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new J("unknown-size").at(i);F(this,An,{mode:"mem-indirect",size:i.size});return}if(i.value.isLabel()){const r=i.isDataDirectiveLabel(n);if(r){F(this,An,{mode:"mem-direct",size:r,address:Mt.label(i.value.value,!0,i.value.position)});return}}throw new J("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!x(this,An))throw new Error("Instruction not validated");if(x(this,Fi))throw new Error("Instruction aready evaluated");const i=x(this,An);switch(i.mode){case"reg":{F(this,Fi,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!se.inRange(r))throw new J("address-out-of-range",r).at(i.address);const s=se.from(r);if(n.addressIsReserved(s))throw new J("address-has-code",s).at(i.address);F(this,Fi,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{F(this,Fi,{mode:"mem-indirect",size:i.size});return}default:return i}}}An=new WeakMap,Fi=new WeakMap;var Bl;class TL extends Io{constructor(n,i,r,s){super(i,r,s);ie(this,Bl,!1);Y(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(x(this,Bl))throw new Error("Instruction already validated");if(this.operands.length>0)throw new J("expects-no-operands").at(this);F(this,Bl,!0)}evaluateExpressions(){if(!x(this,Bl))throw new Error("Instruction not validated")}}Bl=new WeakMap;class Df{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class DL extends Df{constructor(n){super(n.position);Y(this,"type","register");Y(this,"value");this.value=n.type}get size(){return UC.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class NL extends Df{constructor(n,i){super(i);Y(this,"type","indirect-address");Y(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class LL extends Df{constructor(n,i,r){super(r);Y(this,"type","direct-address");Y(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class BL extends Df{constructor(n){super(n.position);Y(this,"type","number-expression");this.value=n}isDataDirectiveLabel(n){if(!this.value.isLabel())return!1;const i=this.value;if(i.offset)return!1;if(!n.labelExists(i.value))throw new J("label-not-found",i.value).at(this.position);const r=n.getLabelType(i.value);return r==="DB"?8:r==="DW"?16:!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function ab(t,e,n){const i=vt.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new TL(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new EL(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new OL(t.type,e,n,i);case"PUSH":case"POP":return new ML(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new RL(t.type,e,n,i);case"IN":case"OUT":return new PL(t.type,e,n,i);case"INT":return new AL(t.type,e,n,i)}}class IL extends Tf{constructor(n,i){super(i);Y(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let _L=class{constructor(e){Y(this,"tokens");Y(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new J("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new J("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new IL(i,vt.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new J("end-must-be-the-last-statement").at(e);return new CL(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...rv);if(e&&!n)throw new J("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),kL(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new bL(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new xL(e.position)}return new SL(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...sv);if(e&&!n){const s=this.peek();throw new J("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return ab(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),ab(n,r,i)}instructionOperand(){if(this.match(...Eh)){const n=this.previous();return new DL(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new J("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Eh)){this.consume("BX",new J("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new J("parser.expected-literal-after-literal","]","BX"));return new NL(e==null?void 0:e.type,vt.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new J("parser.expected-literal-after-expression","]"));return new LL(i,e==null?void 0:e.type,vt.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new J("parser.expected-literal-after-literal","[","PTR");return new BL(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new J("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new J("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Mt.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new J("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new J("parser.expected-label-after-offset").at(this.peek());if(!n)throw new J("parser.expected-argument").at(this.peek());return Mt.label(n.lexeme.toUpperCase(),e!==null,vt.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new J("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Mt.unaryOperation(e.type==="PLUS"?"+":"-",n,vt.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Mt.binaryOperation(e,"*",n,vt.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Mt.binaryOperation(e,n.type==="PLUS"?"+":"-",i,vt.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function lv(t){try{const n=new fL(t).scanTokens(),r=new _L(n).parse(),s=r.at(-1);if(!s)throw new J("empty-program");if(!s.isEnd())throw new J("end-must-be-the-last-statement").at(s);let o=[];const l=new uL;if(o=l.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Ch(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(l)},J.from),o.length>0)return{success:!1,errors:o};if(o=l.computeAddresses(r),o.length>0)return{success:!1,errors:o};const a=[],u=[];return o=Ch(r,c=>{c.isDataDirective()?(c.evaluateExpressions(l),c.directive!=="EQU"&&a.push(c)):c.isInstruction()&&(c.evaluateExpressions(l),u.push(c))},J.from),o.length>0?{success:!1,errors:o}:{success:!0,data:a,instructions:u}}catch(e){return{success:!1,errors:[J.from(e)]}}}class sr{constructor(e){Y(this,"computer");this.computer=e.computer}}const $L=se.from(se.MAX_ADDRESS).toString(),FL={"address-has-instruction":t=>`Memory address ${se.format(t)} has an instruction, and cannot be read nor written.`,"address-out-of-range":t=>`Memory address ${se.format(t)} is out of range (max memory address: ${$L}).`,"io-memory-not-implemented":t=>`I/O memory address ${xn.format(t)} has no implementation.`,"no-instruction":t=>`Expected instruction at memory address ${se.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},zL=se.from(se.MAX_ADDRESS).toString(),jL={"address-has-instruction":t=>`La direccin de memoria ${t} tiene una instruccin, y no se puede leer ni escribir.`,"address-out-of-range":t=>`La direccin de memoria ${se.format(t)} est fuera de rango (direccin mxima de memoria: ${zL}).`,"io-memory-not-implemented":t=>`La direccin de memoria E/S ${xn.format(t)} no est implementada.`,"no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${t} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},UL=nv({en:FL,es:jL});class xt extends Error{constructor(n,...i){super();Y(this,"code");Y(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return UL(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof xt?n:new xt("unexpected-error",n)}}class Hr{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const r=e.cpu.getRegister("IP").toString("hex");throw new xt("unexpected-error",`Could not read instruction byte at address ${r}h`)}yield*e.cpu.updateWordRegister("IP",r=>r.add(1)),yield*e.cpu.getMBR(n)}}var df,HC;class VL extends Hr{constructor(){super(...arguments);ie(this,df)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Oe(this,df,HC).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const l=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),a=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?l.signed&a.signed:this.name==="OR"?l.signed|a.signed:l.signed^a.signed;u=D.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=l.unsigned+a.unsigned+d;h>D.maxValue(r)?(c.CF=!0,u=D.fromUnsigned(h-D.maxValue(r)-1,r)):(c.CF=!1,u=D.fromUnsigned(h,r)),c.OF=l.signed>=0&&a.signed>=0&&u.signed<0||l.signed<0&&a.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=l.unsigned-a.unsigned-d;h<0?(c.CF=!0,u=D.fromUnsigned(h+D.maxValue(r)+1,r)):(c.CF=!1,u=D.fromUnsigned(h,r)),c.OF=l.signed>=0&&a.signed<0&&u.signed<0||l.signed<0&&a.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}df=new WeakSet,HC=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};var hf,WC;class HL extends Hr{constructor(){super(...arguments);ie(this,hf)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Oe(this,hf,WC).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=D.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=D.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===D.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",D.fromSigned(1,16));const o=i.unsigned+1;o>D.maxValue(this.operation.size)?(s.CF=!0,r=D.fromUnsigned(o-D.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=D.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",D.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=D.fromUnsigned(o+D.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=D.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}hf=new WeakSet,WC=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class WL extends Hr{get number(){return this.statement.value}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};const n=this.number.unsigned;switch(n){case 0:return yield{type:"cpu:int.0"},!1;case 3:return yield{type:"cpu:int.3"},!0;case 6:case 7:{if(yield*e.cpu.copyWordRegister("FLAGS","id"),!(yield*e.cpu.pushToStack())||(yield*e.cpu.updateFLAGS({IF:!1}),yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;if(yield{type:`cpu:int.${n}`},n===6){yield*e.cpu.copyWordRegister("BX","ri");const i=yield*e.io.console.read();if(yield*e.cpu.updateWordRegister("id",i.withHigh(D.zero(8))),yield*e.cpu.setMAR("ri"),yield*e.cpu.setMBR("id.l"),!(yield*e.cpu.useBus("mem-write")))return!1}else{if(yield*e.cpu.copyWordRegister("AX","id"),!(yield*e.cpu.pushToStack())||(yield*e.cpu.copyWordRegister("BX","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyByteRegister("AL","left.l"),yield*e.cpu.updateByteRegister("right.l",D.zero(8));const i=e.cpu.getRegister("AL");for(yield*e.cpu.aluExecute("SUB",i,{CF:!1,OF:!1,SF:i.signed<0,ZF:i.isZero()});!e.cpu.getRegister("AL").isZero();){if(yield*e.cpu.copyWordRegister("BX","ri"),yield*e.cpu.setMAR("ri"),!(yield*e.cpu.useBus("mem-read")))return!1;yield*e.cpu.getMBR("id.l");const r=e.cpu.getRegister("id.l");yield*e.io.console.write(r),yield*e.cpu.copyWordRegister("BX","left"),yield*e.cpu.updateWordRegister("right",D.fromUnsigned(1,16));const s=e.cpu.getRegister("BX").add(1);yield*e.cpu.aluExecute("ADD",s,{CF:!1,OF:s.signed<0,SF:s.signed<0,ZF:!1}),yield*e.cpu.copyWordRegister("result","BX"),yield*e.cpu.copyByteRegister("AL","left.l"),yield*e.cpu.updateByteRegister("right.l",D.fromUnsigned(1,8));const o=e.cpu.getRegister("AL").add(-1);yield*e.cpu.aluExecute("SUB",o,{CF:!1,OF:o.signed===D.maxSignedValue(8),SF:o.signed<0,ZF:o.isZero()}),yield*e.cpu.copyByteRegister("result.l","AL")}if(!(yield*e.cpu.popFromStack())||(yield*e.cpu.copyWordRegister("id","BX"),!(yield*e.cpu.popFromStack())))return!1;yield*e.cpu.copyWordRegister("id","AX")}return!(yield*e.cpu.popFromStack())||(yield*e.cpu.copyWordRegister("id","IP"),!(yield*e.cpu.popFromStack()))?!1:(yield*e.cpu.copyWordRegister("id","FLAGS"),!0)}default:return yield*e.cpu.startInterrupt(this.number),!0}}}var ff,GC;class GL extends Hr{constructor(){super(...arguments);ie(this,ff)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Oe(this,ff,GC).call(this),willUse:{ri:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",D.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new xt("io-memory-not-implemented",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new xt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new xt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}ff=new WeakSet,GC=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class XL extends Hr{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class JL extends Hr{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function no(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function YL(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var pf,XC;class KL extends Hr{constructor(){super(...arguments);ie(this,pf)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Oe(this,pf,XC).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd",id:i==="reg<-mem"||i==="reg<-imd"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",l=>l.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return r===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[l,a]=YL(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(!(yield*n.cpu.useBus("mem-write"))||a&&(yield*n.cpu.updateWordRegister("ri",u=>u.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",l=>l.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}pf=new WeakSet,XC=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};class qL extends Hr{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class QL extends Hr{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function ZL(t){switch(t.instruction){case"MOV":return new KL(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new VL(t);case"NOT":case"NEG":case"INC":case"DEC":return new HL(t);case"IN":case"OUT":return new GL(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new QL(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new XL(t);case"RET":case"IRET":return new qL(t);case"INT":return new WL(t);case"CLI":case"STI":case"NOP":case"HLT":return new JL(t)}}var Il,fe,Pn,Wt,hs,Yo,un,Un,hk;let e3=(hk=class extends sr{constructor(n){super(n);ie(this,hs);ie(this,un);ie(this,Il,void 0);ie(this,fe,void 0);ie(this,Pn,void 0);ie(this,Wt,void 0);n.data==="unchanged"?(F(this,fe,x(n.previous.cpu,fe)),F(this,Pn,x(n.previous.cpu,Pn)),F(this,Wt,x(n.previous.cpu,Wt))):n.data==="randomize"?(F(this,fe,{AX:D.random(16),BX:D.random(16),CX:D.random(16),DX:D.random(16),SP:D.random(16),IP:D.random(16),IR:D.random(8),ri:D.random(16),id:D.random(16),left:D.random(16),right:D.random(16),result:D.random(16),FLAGS:D.random(16)}),F(this,Pn,D.random(16)),F(this,Wt,D.random(8))):(F(this,fe,{AX:D.zero(16),BX:D.zero(16),CX:D.zero(16),DX:D.zero(16),SP:D.zero(16),IP:D.zero(16),IR:D.zero(8),ri:D.zero(16),id:D.zero(16),left:D.zero(16),right:D.zero(16),result:D.zero(16),FLAGS:D.zero(16)}),F(this,Pn,D.zero(16)),F(this,Wt,D.zero(8))),x(this,fe).SP=D.fromUnsigned(se.MAX_ADDRESS+1,16),x(this,fe).IP=D.fromUnsigned(8192,16),Oe(this,un,Un).call(this,"IF",!0),F(this,Il,new Map);for(const i of n.program.instructions){const r=ZL(i);x(this,Il).set(r.start.value,r)}}*run(){for(;;){const n=x(this,Il).get(x(this,fe).IP.unsigned);if(!n){yield{type:"cpu:error",error:new xt("no-instruction",x(this,fe).IP)};return}if(!(yield*n.execute(this.computer)))return;if(this.getFlag("IF")&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const r=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",D.zero(8)),yield*this.startInterrupt(r)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;let i=D.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),i=i.add(1),yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(x(this,fe)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:x(this,Pn).toJSON(),MBR:x(this,Wt).toJSON()}}getRegister(n){const[i,r]=no(n);return r==="low"?x(this,fe)[i].low:r==="high"?x(this,fe)[i].high:x(this,fe)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Oe(this,hs,Yo).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Oe(this,hs,Yo).call(this,i,r),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Oe(this,hs,Yo).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Oe(this,hs,Yo).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return x(this,fe).FLAGS.bit(0);case"ZF":return x(this,fe).FLAGS.bit(6);case"SF":return x(this,fe).FLAGS.bit(7);case"IF":return x(this,fe).FLAGS.bit(9);case"OF":return x(this,fe).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Oe(this,un,Un).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Oe(this,un,Un).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Oe(this,un,Un).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Oe(this,un,Un).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Oe(this,un,Un).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:x(this,fe).FLAGS}}*aluExecute(n,i,r){x(this,fe).result=i.is8bits()?x(this,fe).result.withLow(i):i,typeof r.CF=="boolean"&&Oe(this,un,Un).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Oe(this,un,Un).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Oe(this,un,Un).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Oe(this,un,Un).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Oe(this,un,Un).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:x(this,fe).result,flags:x(this,fe).FLAGS}}*setMAR(n){const i=this.getRegister(n);F(this,Pn,i),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Oe(this,hs,Yo).call(this,n,x(this,Wt)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);F(this,Wt,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(x(this,Pn));return i?(F(this,Wt,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(x(this,Pn),x(this,Wt)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"},yield{type:"cpu:rd.on"};const i=yield*this.computer.io.read(x(this,Pn).low);return i?(F(this,Wt,i),yield{type:"bus:reset"},!0):!1}case"io-write":return yield{type:"cpu:iom.on"},yield{type:"cpu:wr.on"},(yield*this.computer.io.write(x(this,Pn).low,x(this,Wt)))?(yield{type:"bus:reset"},!0):!1;case"intr-read":{const i=yield*this.computer.io.pic.handleINTR();return F(this,Wt,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return se.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?se.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new xt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new xt("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return se.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),se.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new xt("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new xt("stack-underflow")},!1)}},Il=new WeakMap,fe=new WeakMap,Pn=new WeakMap,Wt=new WeakMap,hs=new WeakSet,Yo=function(n,i){const[r,s]=no(n);if(s===null){if(x(this,fe)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);x(this,fe)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?x(this,fe)[r]=x(this,fe)[r].withLow(i):x(this,fe)[r]=x(this,fe)[r].withHigh(i)}},un=new WeakSet,Un=function(n,i){switch(n){case"CF":x(this,fe).FLAGS=x(this,fe).FLAGS.withBit(0,i);return;case"ZF":x(this,fe).FLAGS=x(this,fe).FLAGS.withBit(6,i);return;case"SF":x(this,fe).FLAGS=x(this,fe).FLAGS.withBit(7,i);return;case"IF":x(this,fe).FLAGS=x(this,fe).FLAGS.withBit(9,i);return;case"OF":x(this,fe).FLAGS=x(this,fe).FLAGS.withBit(11,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},hk);class t3 extends sr{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}}var Rn;class n3 extends sr{constructor(n){super(n);ie(this,Rn,void 0);n.data==="unchanged"?F(this,Rn,x(n.previous.io.console,Rn)):F(this,Rn,"")}get screen(){return x(this,Rn)}clear(){return this.write(D.fromUnsigned(12,8))}*read(){const n=yield{type:"console:read"};if(!(n instanceof D)||!n.is8bits())throw new Error("INT 6 was not given a valid 8-bit character!");return n}*write(n){switch(n.unsigned){case 8:F(this,Rn,x(this,Rn).slice(0,-1));break;case 10:F(this,Rn,x(this,Rn)+`
`);break;case 12:F(this,Rn,"");break;default:F(this,Rn,x(this,Rn)+iv(n.unsigned));break}yield{type:"console:write",char:n}}toJSON(){return x(this,Rn)}}Rn=new WeakMap;class i3 extends sr{*press(){yield{type:"f10:press"},yield*this.computer.io.pic.interrupt(0)}toJSON(){return null}}class Nf extends sr{}var br,cn,Gt,fi,_l,Id,$l,_d;const ss=class ss extends Nf{constructor(n){super(n);ie(this,_l);ie(this,$l);ie(this,br,void 0);ie(this,cn,void 0);ie(this,Gt,void 0);ie(this,fi,void 0);F(this,br,D.fromUnsigned(255,8)),F(this,cn,D.fromUnsigned(0,8)),F(this,Gt,D.fromUnsigned(0,8)),n.data==="unchanged"?F(this,fi,x(n.previous.io.pic,fi)):n.data==="randomize"?F(this,fi,new Array(ss.LINES).fill(D.zero(8)).map(()=>D.random(8))):F(this,fi,new Array(ss.LINES).fill(D.zero(8)))}chipSelect(n){const r=4+ss.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=D.zero(8);else if(n==="IMR")i=x(this,br);else if(n==="IRR")i=x(this,cn);else if(n==="ISR")i=x(this,Gt);else{const r=Number(n.slice(3));i=x(this,fi)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")x(this,Gt).isZero()||(yield{type:"pic:intr.off"},F(this,Gt,D.zero(8)),yield{type:"pic:register.update",register:"ISR",value:x(this,Gt)},yield*Oe(this,$l,_d).call(this));else if(n==="IMR")F(this,br,i),yield{type:"pic:register.update",register:"IMR",value:x(this,br)},yield*Oe(this,$l,_d).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));x(this,fi)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=ss.LINES)throw new RangeError(`Invalid interrupt line ${n}`);x(this,cn).bit(n)||(F(this,cn,x(this,cn).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:x(this,cn)},yield*Oe(this,$l,_d).call(this))}isINTRActive(){return!x(this,Gt).isZero()||Oe(this,_l,Id).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!x(this,Gt).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Oe(this,_l,Id).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");F(this,cn,x(this,cn).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:x(this,cn)},F(this,Gt,x(this,Gt).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:x(this,Gt)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=x(this,fi)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},i}toJSON(){return{IMR:x(this,br).toJSON(),IRR:x(this,cn).toJSON(),ISR:x(this,Gt).toJSON(),lines:x(this,fi).map(n=>n.toJSON())}}};br=new WeakMap,cn=new WeakMap,Gt=new WeakMap,fi=new WeakMap,_l=new WeakSet,Id=function(){for(let n=0;n<ss.LINES;n++)if(x(this,cn).bit(n)&&!x(this,br).bit(n))return n;return null},$l=new WeakSet,_d=function*(){x(this,Gt).isZero()&&Oe(this,_l,Id).call(this)!==null&&(yield{type:"pic:intr.on"})},Y(ss,"LINES",8);let Hg=ss;var zi,fs;class r3 extends Nf{constructor(n){super(n);ie(this,zi,void 0);ie(this,fs,void 0);F(this,zi,D.zero(8)),F(this,fs,D.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=x(this,zi);else if(n==="COMP")i=x(this,fs);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")F(this,zi,i);else if(n==="COMP")F(this,fs,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=x(this,zi).unsigned===D.maxValue(8)?D.zero(8):x(this,zi).add(1);F(this,zi,n),yield{type:"timer:register.update",register:"CONT",value:n},x(this,fs).equals(n)&&(yield{type:"timer:interrupt"},yield*this.computer.io.pic.interrupt(1))}toJSON(){return{CONT:x(this,zi).toJSON(),COMP:x(this,fs).toJSON()}}}zi=new WeakMap,fs=new WeakMap;class Lf extends sr{constructor(n){super(n);Y(this,"clock");Y(this,"console");Y(this,"f10");Y(this,"pic");Y(this,"timer");this.clock=new t3(n),this.console=new n3(n),this.f10=new i3(n),this.pic=new Hg(n),this.timer=new r3(n)}*read(n){const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},yield*this.pic.read(i);const r=this.timer.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"timer"},yield*this.timer.read(r)):(yield{type:"bus:io.error",error:new xt("io-memory-not-implemented",n)},null)}*write(n,i){const r=this.pic.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},yield*this.pic.write(r,i),!0;const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},yield*this.timer.write(s,i),!0):(yield{type:"bus:io.error",error:new xt("io-memory-not-implemented",n)},!1)}toJSON(){return{clock:this.clock.toJSON(),console:this.console.toJSON(),f10:this.f10.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}}Y(Lf,"SIZE",xn.MAX_ADDRESS+1);var ji,Xt,fk;let s3=(fk=class extends Nf{constructor(n){super(n);ie(this,ji,void 0);ie(this,Xt,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?F(this,ji,D.zero(8)):n.data==="randomize"?F(this,ji,D.random(8)):F(this,ji,D.zero(8)),F(this,Xt,D.zero(8))}get interrupts(){return x(this,Xt).bit(7)}get DATA(){return x(this,ji)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=x(this,ji);else if(n==="STATE")i=x(this,Xt);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")F(this,ji,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.computer.io.printer.busy),F(this,Xt,i),yield{type:"handshake:register.update",register:n,value:i},x(this,Xt).bit(1)&&(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),F(this,Xt,x(this,Xt).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:x(this,Xt)}),this.interrupts&&!this.computer.io.printer.busy&&(yield*this.computer.io.pic.interrupt(2));else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){F(this,Xt,x(this,Xt).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:x(this,Xt)},this.interrupts&&!n&&(yield*this.computer.io.pic.interrupt(2))}toJSON(){return{DATA:x(this,ji).toJSON(),STATE:x(this,Xt).toJSON()}}},ji=new WeakMap,Xt=new WeakMap,fk);var Hn,xr,ps;const pu=class pu extends sr{constructor(n){super(n);ie(this,Hn,void 0);ie(this,xr,void 0);ie(this,ps,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(F(this,Hn,x(n.previous.io.printer,Hn)),F(this,xr,x(n.previous.io.printer,xr)),F(this,ps,x(n.previous.io.printer,ps))):(F(this,Hn,[]),F(this,xr,""),F(this,ps,!1))}get busy(){return x(this,Hn).length>=pu.BUFFER_SIZE}*setStrobe(n){const i=x(this,ps);if(i===n)return;if(F(this,ps,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();x(this,Hn).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){F(this,xr,""),yield{type:"printer:paper.replace"}}*print(){if(x(this,Hn).length===0)return;const[n,...i]=x(this,Hn);if(F(this,Hn,i),yield{type:"printer:buffer.pop",char:n},i.length===pu.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=iv(n.unsigned);F(this,xr,x(this,xr)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:x(this,xr),buffer:[...x(this,Hn).map(n=>n.unsigned)]}}};Hn=new WeakMap,xr=new WeakMap,ps=new WeakMap,Y(pu,"BUFFER_SIZE",5);let Ah=pu,o3=class extends Ah{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}};class l3 extends Lf{constructor(n){super(n);Y(this,"printer");Y(this,"handshake");this.printer=new o3(n),this.handshake=new s3(n)}*read(n){const i=this.handshake.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"handshake"},yield*this.handshake.read(i)):yield*super.read(n)}*write(n,i){const r=this.handshake.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"handshake"},yield*this.handshake.write(r,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),handshake:this.handshake.toJSON()}}}class JC extends Nf{constructor(n){super(n);Y(this,"PA");Y(this,"PB");Y(this,"CA");Y(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=D.random(8),this.PB=D.random(8),this.CA=D.random(8),this.CB=D.random(8)):(this.PA=D.zero(8),this.PB=D.zero(8),this.CA=D.zero(8),this.CB=D.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let a3=class extends JC{readData(){const e=this.PB.unsigned&~this.CB.unsigned;return D.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.computer.io.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=D.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA},this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1))))}};class u3 extends Ah{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}}class c3 extends Lf{constructor(n){super(n);Y(this,"printer");Y(this,"pio");this.printer=new u3(n),this.pio=new a3(n)}*read(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},yield*this.pio.read(i)):yield*super.read(n)}*write(n,i){const r=this.pio.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"pio"},yield*this.pio.write(r,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),pio:this.pio.toJSON()}}}var Sr;class d3 extends sr{constructor(n){super(n);ie(this,Sr,void 0);n.data==="unchanged"&&"leds"in n.previous.io?F(this,Sr,x(n.previous.io.leds,Sr)):n.data==="randomize"?F(this,Sr,D.random(8)):F(this,Sr,D.zero(8))}get state(){return x(this,Sr)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return x(this,Sr).toJSON()}}Sr=new WeakMap;class h3 extends JC{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=D.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.computer.io.leds.update(D.fromUnsigned(n,8))}}}var Wn;class f3 extends sr{constructor(n){super(n);ie(this,Wn,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?F(this,Wn,x(n.previous.io.switches,Wn)):n.data==="randomize"?F(this,Wn,D.random(8)):F(this,Wn,D.zero(8))}get state(){return x(this,Wn)}*toggle(n){F(this,Wn,x(this,Wn).withBit(n,!x(this,Wn).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return x(this,Wn).toJSON()}}Wn=new WeakMap;class p3 extends Lf{constructor(n){super(n);Y(this,"leds");Y(this,"switches");Y(this,"pio");this.leds=new d3(n),this.switches=new f3(n),this.pio=new h3(n)}*read(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},yield*this.pio.read(i)):yield*super.read(n)}*write(n,i){const r=this.pio.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"pio"},yield*this.pio.write(r,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),leds:this.leds.toJSON(),switches:this.switches.toJSON(),pio:this.pio.toJSON()}}}var xo,Gn,Fl;let m3=(xo=class extends sr{constructor(n){super(n);ie(this,Gn,void 0);ie(this,Fl,void 0);n.data==="unchanged"?F(this,Gn,x(n.previous.memory,Gn)):n.data==="randomize"?F(this,Gn,new Uint8Array(xo.SIZE).map(()=>D.random(8).unsigned)):F(this,Gn,new Uint8Array(xo.SIZE));for(const i of n.program.data){let r=i.start.value;for(const s of i.getValues())s!==Va&&x(this,Gn).set(s.toUint8Array(),r),r+=i.size/8}F(this,Fl,new Set);for(const i of n.program.instructions){x(this,Gn).set(i.toBytes(),i.start.value);for(let r=0;r<i.length;r++)x(this,Fl).add(i.start.value+r)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!se.inRange(n))return yield{type:"memory:read.error",error:new xt("address-out-of-range",n)},null;const i=D.fromUnsigned(x(this,Gn).at(n),8);return yield{type:"memory:read.ok",value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},se.inRange(n)?x(this,Fl).has(n)?(yield{type:"memory:write.error",error:new xt("address-has-instruction",n)},!1):(x(this,Gn).set([i.unsigned],n),yield{type:"memory:write.ok"},!0):(yield{type:"memory:write.error",error:new xt("address-out-of-range",n)},!1)}toJSON(){return[...x(this,Gn)]}},Gn=new WeakMap,Fl=new WeakMap,Y(xo,"SIZE",se.MAX_ADDRESS+1),xo);class ub{constructor(e){Y(this,"cpu");Y(this,"memory");Y(this,"io");const n={computer:this,...e};if(this.cpu=new e3(n),this.memory=new m3(n),e.devices==="pio-switches-and-leds")this.io=new p3(n);else if(e.devices==="pio-printer")this.io=new c3(n);else if(e.devices==="handshake")this.io=new l3(n);else throw new Error("Invalid devices configuration")}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var it,zl;class g3{constructor(){ie(this,it,new ub({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}));ie(this,zl,x(this,it).cpu.run())}loadProgram(e){var n;F(this,it,new ub({...e,previous:x(this,it)})),(n=x(this,zl))==null||n.return(),F(this,zl,x(this,it).cpu.run())}getComputerState(){var e;return((e=x(this,it))==null?void 0:e.toJSON())||null}advanceCPU(e){if(!x(this,it))throw new xt("no-program");const{value:n,done:i}=x(this,zl).next(e);if(i)throw new Error("Called advanceCPU on a finished CPU!");return n}get devices(){if(!x(this,it))throw new Error("No computer loaded!");return{clock:{tick:()=>x(this,it).io.clock.tick()},console:{clear:()=>x(this,it).io.console.clear()},f10:{press:()=>x(this,it).io.f10.press()},printer:{connected:()=>"printer"in x(this,it).io,clear:()=>{if("printer"in x(this,it).io)return x(this,it).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in x(this,it).io)return x(this,it).io.printer.print();console.warn("No printer connected to the computer!")}},switches:{connected:()=>"printer"in x(this,it).io,toggle:e=>{if("switches"in x(this,it).io)return x(this,it).io.switches.toggle(e);console.warn("No switches connected to the computer!")}}}}}it=new WeakMap,zl=new WeakMap;class ke{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Hi.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let i=[];return this.decompose(e,n,i,0),Hi.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new su(this),s=new su(e);for(let o=n,l=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new su(this,e)}iterRange(e,n=this.length){return new YC(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new KC(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ke.empty:e.length<=32?new rt(e):Hi.from(rt.split(e,[]))}}class rt extends ke{constructor(e,n=y3(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((n?i:l)>=e)return new v3(r,l,i,o);r=l+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new rt(cb(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),l=$d(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new rt(l,o.length+s.length));else{let a=l.length>>1;i.push(new rt(l.slice(0,a)),new rt(l.slice(a)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof rt))return super.replace(e,n,i);let r=$d(this.text,$d(i.text,cb(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new rt(r,s):Hi.from(rt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(r+=i),e<a&&n>s&&(r+=l.slice(Math.max(0,e-s),n-s)),s=a+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new rt(i,r)),i=[],r=-1);return r>-1&&n.push(new rt(i,r)),n}}class Hi extends ke{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,a=i+o.lines-1;if((n?a:l)>=e)return o.lineInner(e,n,i,r);r=l+1,i=a+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&n>=o){let u=r&((o<=e?1:0)|(a>=n?2:0));o>=e&&a<=n&&!u?i.push(l):l.decompose(e-o,n-o,i,u)}o=a+1}}replace(e,n,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&n<=l){let a=o.replace(e-s,n-s,i),u=this.lines-o.lines+a.lines;if(a.lines<u>>5-1&&a.lines>u>>5+1){let c=this.children.slice();return c[r]=a,new Hi(c,this.length-(n-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(r+=i),e<a&&n>o&&(r+=l.sliceString(e-o,n-o,i)),o=a+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Hi))return 0;let i=0,[r,s,o,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==l)return i;let a=this.children[r],u=e.children[s];if(a!=u)return i+a.scanIdentical(u,n);i+=a.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new rt(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,l=[],a=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof Hi)for(let g of f.children)d(g);else f.lines>o&&(a>o||!a)?(h(),l.push(f)):f instanceof rt&&a&&(p=c[c.length-1])instanceof rt&&f.lines+p.lines<=32?(a+=f.lines,u+=f.length+1,c[c.length-1]=new rt(p.text.concat(f.text),p.length+1+f.length)):(a+f.lines>r&&h(),a+=f.lines,u+=f.length+1,c.push(f))}function h(){a!=0&&(l.push(c.length==1?c[0]:Hi.from(c,u)),u=-1,a=c.length=0)}for(let f of e)d(f);return h(),l.length==1?l[0]:new Hi(l,n)}}ke.empty=new rt([""],0);function y3(t){let e=-1;for(let n of t)e+=n.length+1;return e}function $d(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let l=t[s],a=r+l.length;a>=n&&(a>i&&(l=l.slice(0,i-r)),r<n&&(l=l.slice(n-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function cb(t,e,n){return $d(t,[""],e,n)}class su{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof rt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,l=r instanceof rt?r.text.length:r.children.length;if(o==(n>0?l:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof rt){let a=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof rt?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class YC{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new su(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class KC{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ke.prototype[Symbol.iterator]=function(){return this.iter()},su.prototype[Symbol.iterator]=YC.prototype[Symbol.iterator]=KC.prototype[Symbol.iterator]=function(){return this});class v3{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}let xl="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<xl.length;t++)xl[t]+=xl[t-1];function w3(t){for(let e=1;e<xl.length;e+=2)if(xl[e]>t)return xl[e-1]<=t;return!1}function db(t){return t>=127462&&t<=127487}const hb=8205;function jt(t,e,n=!0,i=!0){return(n?qC:b3)(t,e,i)}function qC(t,e,n){if(e==t.length)return e;e&&QC(t.charCodeAt(e))&&ZC(t.charCodeAt(e-1))&&e--;let i=Yt(t,e);for(e+=yi(i);e<t.length;){let r=Yt(t,e);if(i==hb||r==hb||n&&w3(r))e+=yi(r),i=r;else if(db(r)){let s=0,o=e-2;for(;o>=0&&db(Yt(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function b3(t,e,n){for(;e>0;){let i=qC(t,e-2,n);if(i<e)return i;e--}return 0}function QC(t){return t>=56320&&t<57344}function ZC(t){return t>=55296&&t<56320}function Yt(t,e){let n=t.charCodeAt(e);if(!ZC(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return QC(i)?(n-55296<<10)+(i-56320)+65536:n}function av(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function yi(t){return t<65536?1:2}const Wg=/\r\n?|\n/;var pn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(pn||(pn={}));class qi{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){Gg(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new qi(e)}composeDesc(e){return this.empty?e:e.empty?this:eE(this,e)}mapDesc(e,n=!1){return e.empty?this:Xg(this,e,n)}mapPos(e,n=-1,i=pn.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],u=r+l;if(a<0){if(u>e)return s+(e-r);s+=l}else{if(i!=pn.Simple&&u>=e&&(i==pn.TrackDel&&r<e&&u>e||i==pn.TrackBefore&&r<e||i==pn.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!l)return e==r||n<0?s:s+a;s+=a}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],l=r+s;if(o>=0&&r<=n&&l>=e)return r<e&&l>n?"cover":!0;r=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new qi(e)}static create(e){return new qi(e)}}class ht extends qi{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Gg(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return Xg(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],l=n[r+1];if(l>=0){n[r]=l,n[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(ke.empty);i.push(o?e.slice(s,s+o):ke.empty)}s+=o}return new ht(n,i)}compose(e){return this.empty?e:e.empty?this:eE(this,e,!0)}map(e,n=!1){return e.empty?this:Xg(this,e,n,!0)}iterChanges(e,n=!1){Gg(this,e,n)}get desc(){return qi.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Du(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-l);$t(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;$t(n,c,d),d>0&&ys(i,n,s.text),s.forward(c),l+=c}let u=e[o++];for(;l<u;){if(s.done)break e;let c=Math.min(s.len,u-l);$t(n,c,-1),$t(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new ht(n,i),filtered:qi.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,l=null;function a(c=!1){if(!c&&!r.length)return;o<n&&$t(r,n-o,-1);let d=new ht(r,s);l=l?l.compose(d.map(l)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof ht){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?ke.of(f.split(i||Wg)):f:ke.empty,g=p.length;if(d==h&&g==0)return;d<o&&a(),d>o&&$t(r,d-o,-1),$t(r,h-d,g),ys(s,r,p),o=h}}return u(e),a(!l),l}static empty(e){return new ht(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(ke.empty);i[r]=ke.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new ht(n,i)}static createSet(e,n){return new ht(e,n)}}function $t(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function ys(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(ke.empty);t.push(n)}}function Gg(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)r+=l,s+=l;else{let u=r,c=s,d=ke.empty;for(;u+=l,c+=a,a&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function Xg(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Du(t),l=new Du(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let u=Math.min(o.len,l.len);$t(r,u,-1),o.forward(u),l.forward(u)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!n))){let u=l.len;for($t(r,l.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&a<o.i&&o.len<=c&&($t(r,0,o.ins),s&&ys(s,r,o.text),a=o.i),o.forward(c),u-=c}l.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(l.ins==-1){let d=Math.min(c,l.len);u+=d,c-=d,l.forward(d)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;$t(r,u,a<o.i?o.ins:0),s&&a<o.i&&ys(s,r,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?ht.createSet(r,s):qi.create(r);throw new Error("Mismatched change set lengths")}}function eE(t,e,n=!1){let i=[],r=n?[]:null,s=new Du(t),o=new Du(e);for(let l=!1;;){if(s.done&&o.done)return r?ht.createSet(i,r):qi.create(i);if(s.ins==0)$t(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)$t(i,0,o.ins,l),r&&ys(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;$t(i,a,c,l),r&&c&&ys(r,i,o.text)}else o.ins==-1?($t(i,s.off?0:s.len,a,l),r&&ys(r,i,s.textBit(a))):($t(i,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&ys(r,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>u),s.forward2(a),o.forward(a)}}}}class Du{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ke.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?ke.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class uo{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new uo(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return V.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return V.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return V.range(e.anchor,e.head)}static create(e,n,i){return new uo(e,n,i)}}class V{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:V.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new V([this.main],0)}addRange(e,n=!0){return V.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,V.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new V(e.ranges.map(n=>uo.fromJSON(n)),e.main)}static single(e,n=e){return new V([V.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return V.normalized(e.slice(),n);i=s.to}return new V(e,n)}static cursor(e,n=0,i,r){return uo.create(e,e,(n==0?0:n<0?4:8)|(i==null?3:Math.min(2,i))|(r??33554431)<<5)}static range(e,n,i,r){let s=(i??33554431)<<5|(r==null?3:Math.min(2,r));return n<e?uo.create(n,e,24|s):uo.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?V.range(a,l):V.range(l,a))}}return new V(e,n)}}function tE(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let uv=0;class ne{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=uv++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new ne(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:cv),!!e.static,e.enables)}of(e){return new Fd([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Fd(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Fd(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function cv(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Fd{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=uv++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?a=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(a&&h.docChanged||u&&(h.docChanged||h.selection)||Jg(d,c)){let f=i(d);if(l?!fb(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let g=Rh(h,p);if(this.dependencies.every(v=>v instanceof ne?h.facet(v)===d.facet(v):v instanceof Vt?h.field(v,!1)==d.field(v,!1):!0)||(l?fb(f=i(d),g,r):r(f=i(d),g)))return d.values[o]=g,0}else f=i(d);return d.values[o]=f,1}}}}function fb(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function Jg(t,e){let n=!1;for(let i of e)ou(t,i)&1&&(n=!0);return n}function x3(t,e,n){let i=n.map(a=>t[a.id]),r=n.map(a=>a.type),s=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let u=[];for(let c=0;c<i.length;c++){let d=Rh(a,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(a){for(let u of i)ou(a,u);return a.values[o]=l(a),1},update(a,u){if(!Jg(a,s))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,u){let c=Jg(a,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&cv(n,d))return a.values[o]=h,0;let f=l(a);return e.compare(f,h)?(a.values[o]=h,0):(a.values[o]=f,1)}}}const pb=ne.define({static:!0});class Vt{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Vt(uv++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(pb).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,pb.of({field:this,create:e})]}get extension(){return this}}const io={lowest:4,low:3,default:2,high:1,highest:0};function Aa(t){return e=>new nE(e,t)}const uc={highest:Aa(io.highest),high:Aa(io.high),default:Aa(io.default),low:Aa(io.low),lowest:Aa(io.lowest)};class nE{constructor(e,n){this.inner=e,this.prec=n}}class cc{of(e){return new Yg(this,e)}reconfigure(e){return cc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Yg{constructor(e,n){this.compartment=e,this.inner=n}}class Ph{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of S3(e,n,o))h instanceof Vt?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],u=[];for(let h of r)l[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,g=c&&c[h]||[];if(f.every(v=>v.type==0))if(l[p.id]=a.length<<1|1,cv(g,f))a.push(i.facet(p));else{let v=p.combine(f.map(m=>m.value));a.push(i&&p.compare(v,i.facet(p))?i.facet(p):v)}else{for(let v of f)v.type==0?(l[v.id]=a.length<<1|1,a.push(v.value)):(l[v.id]=u.length<<1,u.push(m=>v.dynamicSlot(m)));l[p.id]=u.length<<1,u.push(v=>x3(v,p,f))}}let d=u.map(h=>h(l));return new Ph(e,o,d,l,a,s)}}function S3(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let u=i[a].indexOf(o);u>-1&&i[a].splice(u,1),o instanceof Yg&&n.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let u of o)s(u,l);else if(o instanceof Yg){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,l)}else if(o instanceof nE)s(o.inner,o.prec);else if(o instanceof Vt)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Fd)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,io.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,l)}}return s(t,io.default),i.reduce((o,l)=>o.concat(l))}function ou(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Rh(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const iE=ne.define(),rE=ne.define({combine:t=>t.some(e=>e),static:!0}),sE=ne.define({combine:t=>t.length?t[0]:void 0,static:!0}),oE=ne.define(),lE=ne.define(),aE=ne.define(),uE=ne.define({combine:t=>t.length?t[0]:!1});class Wr{constructor(e,n){this.type=e,this.value=n}static define(){return new k3}}class k3{of(e){return new Wr(this,e)}}class C3{constructor(e){this.map=e}of(e){return new pe(this,e)}}class pe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new pe(this.type,n)}is(e){return this.type==e}static define(e={}){return new C3(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}pe.reconfigure=pe.define();pe.appendConfig=pe.define();class mt{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&tE(i,n.newLength),s.some(l=>l.type==mt.time)||(this.annotations=s.concat(mt.time.of(Date.now())))}static create(e,n,i,r,s,o){return new mt(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(mt.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}mt.time=Wr.define();mt.userEvent=Wr.define();mt.addToHistory=Wr.define();mt.remote=Wr.define();function E3(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function cE(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=ht.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:pe.mapEffects(t.effects,r).concat(pe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Kg(t,e,n){let i=e.selection,r=Sl(e.annotations);return e.userEvent&&(r=r.concat(mt.userEvent.of(e.userEvent))),{changes:e.changes instanceof ht?e.changes:ht.of(e.changes||[],n,t.facet(sE)),selection:i&&(i instanceof V?i:V.single(i.anchor,i.head)),effects:Sl(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function dE(t,e,n){let i=Kg(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=cE(i,Kg(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=mt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return P3(n?A3(r):r)}function A3(t){let e=t.startState,n=!0;for(let r of e.facet(oE)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:E3(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=ht.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=mt.create(e,r,t.selection&&t.selection.map(s),pe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(lE);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof mt?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof mt?t=s[0]:t=dE(e,Sl(s),!1)}return t}function P3(t){let e=t.startState,n=e.facet(aE),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=cE(i,Kg(e,s,t.changes.newLength),!0))}return i==t?t:mt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const R3=[];function Sl(t){return t==null?R3:Array.isArray(t)?t:[t]}var Tt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Tt||(Tt={}));const M3=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let qg;try{qg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function O3(t){if(qg)return qg.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||M3.test(n)))return!0}return!1}function T3(t){return e=>{if(!/\S/.test(e))return Tt.Space;if(O3(e))return Tt.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Tt.Word;return Tt.Other}}class ye{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)ou(this,l<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return ou(this,i),Rh(this,i)}update(...e){return dE(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(cc.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,a)=>r.set(a,l)),n=null),r.set(o.value.compartment,o.value.extension)):o.is(pe.reconfigure)?(n=null,i=o.value):o.is(pe.appendConfig)&&(n=null,i=Sl(i).concat(o.value));let s;n?s=e.startState.values.slice():(n=Ph.resolve(i,r,this),s=new ye(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new ye(n,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:V.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Sl(i.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),u=this.changes(a.changes),c=u.map(r);for(let h=0;h<l;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(a.range.map(d)),r=r.compose(c),o=pe.mapEffects(o,c).concat(pe.mapEffects(Sl(a.effects),d))}return{changes:r,selection:V.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof ht?e:ht.of(e,this.doc.length,this.facet(ye.lineSeparator))}toText(e){return ke.of(e.split(this.facet(ye.lineSeparator)||Wg))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ou(this,n),Rh(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Vt&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return ye.create({doc:e.doc,selection:V.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Ph.resolve(e.extensions||[],new Map),i=e.doc instanceof ke?e.doc:ke.of((e.doc||"").split(n.staticFacet(ye.lineSeparator)||Wg)),r=e.selection?e.selection instanceof V?e.selection:V.single(e.selection.anchor,e.selection.head):V.single(0);return tE(r,i.length),n.staticFacet(rE)||(r=r.asSingle()),new ye(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ye.tabSize)}get lineBreak(){return this.facet(ye.lineSeparator)||`
`}get readOnly(){return this.facet(uE)}phrase(e,...n){for(let i of this.facet(ye.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(iE))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return T3(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=jt(n,o,!1);if(s(n.slice(a,o))!=Tt.Word)break;o=a}for(;l<r;){let a=jt(n,l);if(s(n.slice(l,a))!=Tt.Word)break;l=a}return o==l?null:V.range(o+i,l+i)}}ye.allowMultipleSelections=rE;ye.tabSize=ne.define({combine:t=>t.length?t[0]:4});ye.lineSeparator=sE;ye.readOnly=uE;ye.phrases=ne.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});ye.languageData=iE;ye.changeFilter=oE;ye.transactionFilter=lE;ye.transactionExtender=aE;cc.reconfigure=pe.define();function Ws(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Po{eq(e){return this==e}range(e,n=e){return Qg.create(e,n,this)}}Po.prototype.startSide=Po.prototype.endSide=0;Po.prototype.point=!1;Po.prototype.mapMode=pn.TrackDel;let Qg=class hE{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new hE(e,n,i)}};function Zg(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class dv{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let a=o+l>>1,u=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-n;if(a==o)return u>=0?o:l;u>=0?l=a:o=a+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,d=this.to[a]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(l=Math.max(l,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new dv(r,s,i,l):null,pos:o}}}class ze{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new ze(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(Zg)),this.isEmpty)return n.length?ze.of(n):this;let l=new fE(this,null,-1).goto(0),a=0,u=[],c=new Ro;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let d=n[a++];c.addInner(d.from,d.to,d.value)||u.push(d)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push(Qg.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?ze.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],u=e.touchesRange(l,l+a.length);if(u===!1)r=Math.max(r,a.maxPoint),n.push(a),i.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:d}=a.map(l,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new ze(i,n,s||ze.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Nu.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Nu.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=mb(o,l,i),u=new Pa(o,a,s),c=new Pa(l,a,s);i.iterGaps((d,h,f)=>gb(u,d,c,h,f,r)),i.empty&&i.length==0&&gb(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=mb(s,o),a=new Pa(s,l,0).goto(i),u=new Pa(o,l,0).goto(i);for(;;){if(a.to!=u.to||!e0(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>r)return!0;a.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new Pa(e,null,s).goto(n),l=n,a=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:Math.min(c.length,a);r.point(l,u,o.point,c,d,o.pointRank),a=Math.min(o.openEnd(u),c.length)}else u>l&&(r.span(l,u,o.active,a),a=o.openEnd(u));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,n=!1){let i=new Ro;for(let r of e instanceof Qg?[e]:n?D3(e):e)i.add(r.from,r.to,r.value);return i.finish()}}ze.empty=new ze([],[],null,-1);function D3(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(Zg(e,i)>0)return t.slice().sort(Zg);e=i}return t}ze.empty.nextLayer=ze.empty;class Ro{finishChunk(e){this.chunks.push(new dv(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Ro)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(ze.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ze.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function mb(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(n?n.mapPos(l):l)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(l,l+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class fE{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Nu{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new fE(o,n,i,s));return r.length==1?r[0]:new Nu(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)Jp(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)Jp(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Jp(this.heap,0)}}}function Jp(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Pa{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Nu.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Xc(this.active,e),Xc(this.activeTo,e),Xc(this.activeRank,e),this.minActive=yb(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;Jc(this.active,n,i),Jc(this.activeTo,n,r),Jc(this.activeRank,n,s),e&&Jc(e,n,this.cursor.from),this.minActive=yb(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Xc(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function gb(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,l=i,a=i-e;for(;;){let u=t.to+a-n.to||t.endSide-n.endSide,c=u<0?t.to+a:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&e0(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(l,d,t.point,n.point):d>l&&!e0(t.active,n.active)&&s.compareRange(l,d,t.active,n.active),c>o)break;l=c,u<=0&&t.next(),u>=0&&n.next()}}function e0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Xc(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Jc(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function yb(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Bf(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=jt(t,r));return i}function N3(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=jt(t,r)}return i===!0?-1:t.length}const t0="",vb=typeof Symbol>"u"?"__"+t0:Symbol.for(t0),n0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Ls{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&l==null)return a.push(o[0]+";");for(let f in l){let p=l[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>o.map(v=>g.replace(/&/,v))).reduce((g,v)=>g.concat(v)),p,a);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(c.length||h)&&a.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=wb[vb]||1;return wb[vb]=e+1,t0+e.toString(36)}static mount(e,n){(e[n0]||new L3(e)).mount(Array.isArray(n)?n:[n])}}let bb=new Map;class L3{constructor(e){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=bb.get(n);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[n0]=r;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],bb.set(n,this)}else{this.styleTag=n.createElement("style");let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[n0]=this}mount(e){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],l=this.modules.indexOf(o);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,o),n)for(let a=0;a<o.rules.length;a++)n.insertRule(o.rules[a],i++)}else{for(;r<l;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var Bs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Lu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},B3=typeof navigator<"u"&&/Mac/.test(navigator.platform),I3=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Pt=0;Pt<10;Pt++)Bs[48+Pt]=Bs[96+Pt]=String(Pt);for(var Pt=1;Pt<=24;Pt++)Bs[Pt+111]="F"+Pt;for(var Pt=65;Pt<=90;Pt++)Bs[Pt]=String.fromCharCode(Pt+32),Lu[Pt]=String.fromCharCode(Pt);for(var Yp in Bs)Lu.hasOwnProperty(Yp)||(Lu[Yp]=Bs[Yp]);function _3(t){var e=B3&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||I3&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Lu:Bs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Mh(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function i0(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function $3(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function zd(t,e){if(!e.anchorNode)return!1;try{return i0(t,e.anchorNode)}catch{return!1}}function Bu(t){return t.nodeType==3?Mo(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Oh(t,e,n,i){return n?xb(t,e,n,i,-1)||xb(t,e,n,i,1):!1}function Th(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function xb(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Is(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Th(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?Is(t):0}else return!1}}function Is(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function hv(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function F3(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function z3(t,e,n,i,r,s,o,l){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==a.body;if(f)h=F3(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let v=c.getBoundingClientRect();h={left:v.left,right:v.left+c.clientWidth,top:v.top,bottom:v.top+c.clientHeight}}let p=0,g=0;if(r=="nearest")e.top<h.top?(g=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+g&&(g=e.bottom-h.bottom+g+o)):e.bottom>h.bottom&&(g=e.bottom-h.bottom+o,n<0&&e.top-g<h.top&&(g=-(h.top+g-e.top+o)));else{let v=e.bottom-e.top,m=h.bottom-h.top;g=(r=="center"&&v<=m?e.top+v/2-m/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-m+o)-h.top}if(i=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),n>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,n<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||g)if(f)u.scrollBy(p,g);else{let v=0,m=0;if(g){let y=c.scrollTop;c.scrollTop+=g,m=c.scrollTop-y}if(p){let y=c.scrollLeft;c.scrollLeft+=p,v=c.scrollLeft-y}e={left:e.left-v,top:e.top-m,right:e.right-v,bottom:e.bottom-m},v&&Math.abs(v-p)<1&&(i="nearest"),m&&Math.abs(m-g)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function j3(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class U3{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?Is(n):0),i,Math.min(e.focusOffset,i?Is(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Ho=null;function pE(t){if(t.setActive)return t.setActive();if(Ho)return t.focus(Ho);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Ho==null?{get preventScroll(){return Ho={preventScroll:!0},!0}}:void 0),!Ho){Ho=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Sb;function Mo(t,e,n=e){let i=Sb||(Sb=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function kl(t,e,n){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function V3(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function mE(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function H3(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,Is(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=Is(n))}else{if(n==t)return!0;i=Th(n),n=n.parentNode}}function gE(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class Zt{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Zt(e.parentNode,Th(e),n)}static after(e,n){return new Zt(e.parentNode,Th(e)+1,n)}}const fv=[];class Be{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let l=Be.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=kb(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=kb(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=Is(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Be.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,l=-1;for(let a=0,u=i,c=i;a<this.children.length;a++){let d=this.children[a],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=a,s=u),u>n&&d.dom.parentNode==this.dom){o=a,l=c;break}c=h,u=h+d.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=fv){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new yE(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}Be.prototype.breakAfter=0;function kb(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class yE{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function vE(t,e,n,i,r,s,o,l,a){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,l,a))){if(i<u.length){let f=u[i];f&&r<f.length?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,a)?s[s.length-1]=f:(r&&f.merge(0,r,null,!1,0,a),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,l,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(u[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,l,a)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function wE(t,e,n,i,r,s){let o=t.childCursor(),{i:l,off:a}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,vE(t,u,c,l,a,i,0,r,s)}const cl="";class bE{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ye.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=cl}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let l=Be.get(r),a=Be.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Cb(r))||Cb(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=r.exec(n))&&(s=l.index,o=l[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Be.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(n,i.offset))}}function Cb(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class Eb{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let Dn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},r0=typeof document<"u"?document:{documentElement:{style:{}}};const s0=/Edge\/(\d+)/.exec(Dn.userAgent),xE=/MSIE \d/.test(Dn.userAgent),o0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Dn.userAgent),If=!!(xE||o0||s0),Ab=!If&&/gecko\/(\d+)/i.test(Dn.userAgent),Kp=!If&&/Chrome\/(\d+)/.exec(Dn.userAgent),Pb="webkitFontSmoothing"in r0.documentElement.style,SE=!If&&/Apple Computer/.test(Dn.vendor),Rb=SE&&(/Mobile\/\w+/.test(Dn.userAgent)||Dn.maxTouchPoints>2);var te={mac:Rb||/Mac/.test(Dn.platform),windows:/Win/.test(Dn.platform),linux:/Linux|X11/.test(Dn.platform),ie:If,ie_version:xE?r0.documentMode||6:o0?+o0[1]:s0?+s0[1]:0,gecko:Ab,gecko_version:Ab?+(/Firefox\/(\d+)/.exec(Dn.userAgent)||[0,0])[1]:0,chrome:!!Kp,chrome_version:Kp?+Kp[1]:0,ios:Rb,android:/Android\b/.test(Dn.userAgent),webkit:Pb,safari:SE,webkit_version:Pb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:r0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const W3=256;class Zi extends Be{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Zi)||this.length-(n-e)+i.length>W3||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Zi(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Zt(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return G3(this.dom,e,n)}}class jr extends Be{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(mE(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof jr&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(wE(this,e,n,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&n.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=s),i=a,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new jr(this.mark,n,o)}domAtPos(e){return kE(this,e)}coordsAt(e,n){return EE(this,e,n)}}function G3(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?te.chrome||te.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let l=Mo(t,r,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:n>=0)?0:l.length-1];return te.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),o?hv(a,o<0):a||null}class co extends Be{constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}static create(e,n,i){return new co(e,n,i)}split(e){let n=co.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof co)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof co&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ke.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ke.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Zt.before(this.dom):Zt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=o?-1:1);return hv(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Jl extends Be{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Jl&&e.side==this.side}split(){return new Jl(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Zt.before(this.dom):Zt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ke.empty}get isHidden(){return!0}}Zi.prototype.children=co.prototype.children=Jl.prototype.children=fv;function kE(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Zt(n,0)}function CE(t,e,n){let i,{children:r}=t;n>0&&e instanceof jr&&r.length&&(i=r[r.length-1])instanceof jr&&i.mark.eq(e.mark)?CE(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function EE(t,e,n){let i=null,r=-1,s=null,o=-1;function l(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?l(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}l(t,e);let a=(n<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?r:o),n):X3(t)}function X3(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Bu(e);return n[n.length-1]||null}function l0(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Mb=Object.create(null);function pv(t,e,n){if(t==e)return!0;t||(t=Mb),e||(e=Mb);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function a0(t,e,n){let i=null;if(e)for(let r in e)n&&r in n||t.removeAttribute(i=r);if(n)for(let r in n)e&&e[r]==n[r]||t.setAttribute(i=r,n[r]);return!!i}function J3(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class _o{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}destroy(e){}}var Ke=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Ke||(Ke={}));class Se extends Po{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new dc(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new _s(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=AE(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new _s(e,i,r,n,e.widget||null,!0)}static line(e){return new hc(e)}static set(e,n=!1){return ze.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Se.none=ze.empty;class dc extends Se{constructor(e){let{start:n,end:i}=AE(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof dc&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&pv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}dc.prototype.point=!1;class hc extends Se{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof hc&&this.spec.class==e.spec.class&&pv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}hc.prototype.mapMode=pn.TrackBefore;hc.prototype.point=!0;class _s extends Se{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?pn.TrackBefore:pn.TrackAfter:pn.TrackDel}get type(){return this.startSide<this.endSide?Ke.WidgetRange:this.startSide<=0?Ke.WidgetBefore:Ke.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof _s&&Y3(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}_s.prototype.point=!0;function AE(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function Y3(t,e){return t==e||!!(t&&e&&t.compare(e))}function u0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class Kt extends Be{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof Kt))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),wE(this,e,n,i?i.children:[],s,o),!0}split(e){let n=new Kt;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){pv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){CE(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=l0(n,this.attrs||{})),i&&(this.attrs=l0({class:i},this.attrs||{}))}domAtPos(e){return kE(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(mE(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(a0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Be.get(r)instanceof jr;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Be.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!te.ios||!this.children.some(s=>s instanceof Zi))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Zi)||/[^ -~]/.test(i.text))return null;let r=Bu(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=EE(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}get type(){return Ke.Text}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof Kt)return s;if(o>n)break}r=o+s.breakAfter}return null}}class vo extends Be{constructor(e,n,i){super(),this.widget=e,this.length=n,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof vo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Zt.before(this.dom):Zt.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new vo(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i}get children(){return fv}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ke.empty}domBoundsAround(){return null}become(e){return e instanceof vo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class lu{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof vo&&e.type==Ke.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Kt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Yc(new Jl(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Yc(new Zi(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof _s){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(i instanceof _s)if(i.block){let{type:a}=i;a==Ke.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new vo(i.widget||new Ob("div"),l,a))}else{let a=co.create(i.widget||new Ob("span"),l,l?0:i.startSide),u=this.atCursorPos&&!a.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!a.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(Yc(new Jl(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Yc(a,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new lu(e,n,i,s);return o.openEnd=ze.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Yc(t,e){for(let n of e)t=new jr(n,[t],t.length);return t}class Ob extends _o{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const PE=ne.define(),RE=ne.define(),ME=ne.define(),OE=ne.define(),c0=ne.define(),TE=ne.define(),DE=ne.define(),NE=ne.define({combine:t=>t.some(e=>e)}),LE=ne.define({combine:t=>t.some(e=>e)});class Dh{constructor(e,n="nearest",i="nearest",r=5,s=5){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new Dh(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Tb=pe.define({map:(t,e)=>t.map(e)});function Si(t,e,n){let i=t.facet(OE);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const _f=ne.define({combine:t=>t.length?t[0]:!0});let K3=0;const Ha=ne.define();class Lt{constructor(e,n,i,r){this.id=e,this.create=n,this.domEventHandlers=i,this.extension=r(this)}static define(e,n){const{eventHandlers:i,provide:r,decorations:s}=n||{};return new Lt(K3++,e,i,o=>{let l=[Ha.of(o)];return s&&l.push(Iu.of(a=>{let u=a.plugin(o);return u?s(u):Se.none})),r&&l.push(r(o)),l})}static fromClass(e,n){return Lt.define(i=>new e(i),n)}}class qp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(Si(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Si(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){Si(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const BE=ne.define(),mv=ne.define(),Iu=ne.define(),gv=ne.define(),IE=ne.define();function _E(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(IE)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Wa=ne.define();class ni{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new ni(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],u=o-l,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(l,d),p=Math.min(c,h);if(f<=p&&new ni(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!a)return i;new ni(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Nh{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=ht.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,l,a)=>r.push(new ni(s,o,l,a))),this.changedRanges=r}static create(e,n,i){return new Nh(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Xe=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Xe||(Xe={}));const d0=Xe.LTR,q3=Xe.RTL;function $E(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Q3=$E("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Z3=$E("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),h0=Object.create(null),Ti=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);h0[e]=n,h0[n]=-e}function e4(t){return t<=247?Q3[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Z3[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const t4=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Cl{constructor(e,n,i){this.from=e,this.to=n,this.level=i}get dir(){return this.level%2?q3:d0}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=n&&l.to>=n){if(l.level==i)return o;(s<0||(r!=0?r<0?l.from<n:l.to>n:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const He=[];function n4(t,e){let n=t.length,i=e==d0?1:2,r=e==d0?2:1;if(!t||i==1&&!t4.test(t))return FE(n);for(let o=0,l=i,a=i;o<n;o++){let u=e4(t.charCodeAt(o));u==512?u=l:u==8&&a==4&&(u=16),He[o]=u==4?2:u,u&7&&(a=u),l=u}for(let o=0,l=i,a=i;o<n;o++){let u=He[o];if(u==128)o<n-1&&l==He[o+1]&&l&24?u=He[o]=l:He[o]=256;else if(u==64){let c=o+1;for(;c<n&&He[c]==64;)c++;let d=o&&l==8||c<n&&He[c]==8?a==1?1:8:256;for(let h=o;h<c;h++)He[h]=d;o=c-1}else u==8&&a==1&&(He[o]=1);l=u,u&7&&(a=u)}for(let o=0,l=0,a=0,u,c,d;o<n;o++)if(c=h0[u=t.charCodeAt(o)])if(c<0){for(let h=l-3;h>=0;h-=3)if(Ti[h+1]==-c){let f=Ti[h+2],p=f&2?i:f&4?f&1?r:i:0;p&&(He[o]=He[Ti[h]]=p),l=h;break}}else{if(Ti.length==189)break;Ti[l++]=o,Ti[l++]=u,Ti[l++]=a}else if((d=He[o])==2||d==1){let h=d==i;a=h?0:1;for(let f=l-3;f>=0;f-=3){let p=Ti[f+2];if(p&2)break;if(h)Ti[f+2]|=2;else{if(p&4)break;Ti[f+2]|=4}}}for(let o=0;o<n;o++)if(He[o]==256){let l=o+1;for(;l<n&&He[l]==256;)l++;let a=(o?He[o-1]:i)==1,u=(l<n?He[l]:i)==1,c=a==u?a?1:2:i;for(let d=o;d<l;d++)He[d]=c;o=l-1}let s=[];if(i==1)for(let o=0;o<n;){let l=o,a=He[o++]!=1;for(;o<n&&a==(He[o]!=1);)o++;if(a)for(let u=o;u>l;){let c=u,d=He[--u]!=2;for(;u>l&&d==(He[u-1]!=2);)u--;s.push(new Cl(u,c,d?2:1))}else s.push(new Cl(l,o,0))}else for(let o=0;o<n;){let l=o,a=He[o++]==2;for(;o<n&&a==(He[o]==2);)o++;s.push(new Cl(l,o,a?1:2))}return s}function FE(t){return[new Cl(0,t,0)]}let zE="";function i4(t,e,n,i,r){var s;let o=i.head-t.from,l=-1;if(o==0){if(!r||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),l=0)}else if(o==t.length){if(r)return null;let h=e[e.length-1];h.level!=n&&(o=h.side(!0,n),l=e.length-1)}l<0&&(l=Cl.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let a=e[l];o==a.side(r,n)&&(a=e[l+=r?1:-1],o=a.side(!r,n));let u=r==(a.dir==n),c=jt(t.text,o,u);if(zE=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=a.side(r,n))return V.cursor(c+t.from,u?-1:1,a.level);let d=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return!d&&a.level!=n?V.cursor(r?t.to:t.from,r?-1:1,n):d&&d.level<a.level?V.cursor(d.side(!r,n)+t.from,r?1:-1,d.level):V.cursor(c+t.from,r?-1:1,a.level)}class Db extends Be{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Kt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ni(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:l,toA:a})=>a<this.minWidthFrom||l>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=this.view.inputState.composing<0?null:s4(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:l,to:a}=this.hasComposition;n=new ni(l,a,e.changes.mapPos(l,-1),e.changes.mapPos(a,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(te.ie||te.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),o=a4(r,s,e.changes);return n=ni.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=te.chrome||te.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof vo&&o.widget instanceof Nb&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let l=o>=0?r[o]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:d}=l,h,f,p,g;if(i&&i.range.fromB<d&&i.range.toB>c){let b=lu.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=lu.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=b.breakAtStart,p=b.openStart,g=k.openEnd;let A=this.compositionView(i);k.breakAtStart?A.breakAfter=1:k.content.length&&A.merge(A.length,A.length,k.content[0],!1,k.openStart,0)&&(A.breakAfter=k.content[0].breakAfter,k.content.shift()),b.content.length&&A.merge(0,0,b.content[b.content.length-1],!0,0,b.openEnd)&&b.content.pop(),h=b.content.concat(A).concat(k.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:g}=lu.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:m}=s.findPos(u,1),{i:y,off:w}=s.findPos(a,-1);vE(this,y,w,v,m,h,f,p,g)}i&&this.fixCompositionDOM(i)}compositionView(e){let n=new Zi(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new jr(r,[n],n.length);let i=new Kt;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let l=Be.get(s);l!=o&&(l&&(l.dom=null),o.setDOM(s))},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&zd(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.domAtPos(l.anchor),u=l.empty?a:this.domAtPos(l.head);if(te.gecko&&l.empty&&!this.hasComposition&&r4(a)){let d=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(d,a.node.childNodes[a.offset]||null)),a=u=new Zt(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!Oh(a.node,a.offset,c.anchorNode,c.anchorOffset)||!Oh(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{te.android&&te.chrome&&this.dom.contains(c.focusNode)&&u4(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Mh(this.view.root);if(d)if(l.empty){if(te.gecko){let h=o4(a.node,a.offset);if(h&&h!=3){let f=UE(a.node,a.offset,h==1?1:-1);f&&(a=new Zt(f,h==1?0:f.nodeValue.length))}}d.collapse(a.node,a.offset),l.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=l.bidiLevel)}else if(d.extend){d.collapse(a.node,a.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),h.setEnd(u.node,u.offset),h.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Zt(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Zt(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Mh(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=Kt.find(this,n.head);if(!o)return;let l=o.posAtStart;if(n.head==l||n.head==l+o.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}nearest(e){for(let n=e;n;){let i=Be.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof Kt)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Ke.WidgetBefore&&s.type!=Ke.WidgetAfter&&(!r||n==2||this.children[r-1].breakAfter||this.children[r-1].type==Ke.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);i=o}}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof Kt))return null;for(;r.children.length;){let{i:l,off:a}=r.childPos(i,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}i=a}if(!(r instanceof Zi))return null;let s=jt(r.text,i);if(s==i)return null;let o=Mo(r.dom,i,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Xe.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,g=p?Bu(p):[];if(g.length){let v=g[g.length-1],m=a?v.right-f.left:f.right-v.left;m>l&&(l=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Xe.RTL:Xe.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Kt){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Bu(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new yE(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let l=n.lineBlockAt(o).bottom-n.lineBlockAt(i).top;e.push(Se.replace({widget:new Nb(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Se.set(e)}updateDeco(){let e=this.view.state.facet(Iu).map((n,i)=>(this.dynamicDecorationMap[i]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=_E(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom};z3(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Xe.LTR)}}function r4(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class Nb extends _o{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function jE(t){let e=t.observer.selectionRange,n=e.focusNode&&UE(e.focusNode,e.focusOffset,0);if(!n)return null;let i=Be.get(n),r,s;if(i instanceof Zi)r=i.posAtStart,s=r+i.length;else e:for(let o=0,l=n;;){for(let u=l.previousSibling,c;u;u=u.previousSibling){if(c=Be.get(u)){r=s=c.posAtEnd+o;break e}let d=new bE([],t.state);if(d.readNode(u),d.text.indexOf(cl)>-1)return null;o+=d.text.length}if(l=l.parentNode,!l)return null;let a=Be.get(l);if(a){r=s=a.posAtStart+o;break}}return{from:r,to:s,node:n}}function s4(t,e){let n=jE(t);if(!n)return null;let{from:i,to:r,node:s}=n,o=e.mapPos(i,-1),l=e.mapPos(r,1),a=s.nodeValue;if(/[\n\r]/.test(a))return null;if(l-o!=a.length){let h=e.mapPos(i,1),f=e.mapPos(r,-1);if(f-h==a.length)o=h,l=f;else if(t.state.doc.sliceString(l-a.length,l)==a)o=l-a.length;else if(t.state.doc.sliceString(o,o+a.length)==a)l=o+a.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,l)!=a||o>u.head||l<u.head)return null;let c=[],d=new ni(i,r,o,l);for(let h=s.parentNode;;h=h.parentNode){let f=Be.get(h);if(f instanceof jr)c.push({node:h,deco:f.mark});else{if(f instanceof Kt||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:d,text:s,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new dc({inclusive:!0,attributes:J3(h),tagName:h.tagName.toLowerCase()})});else return null}}}function UE(t,e,n){if(n<=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=Is(i);else break}if(n>=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r<i.childNodes.length&&n>=0)i=i.childNodes[r],r=0;else break}return null}function o4(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class l4{constructor(){this.changes=[]}compareRange(e,n){u0(e,n,this.changes)}comparePoint(e,n){u0(e,n,this.changes)}}function a4(t,e,n){let i=new l4;return ze.compare(t,e,n,i),i.changes}function u4(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function c4(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return V.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,l=s;n<0?o=jt(r.text,s,!1):l=jt(r.text,s);let a=i(r.text.slice(o,l));for(;o>0;){let u=jt(r.text,o,!1);if(i(r.text.slice(u,o))!=a)break;o=u}for(;l<r.length;){let u=jt(r.text,l);if(i(r.text.slice(l,u))!=a)break;l=u}return V.range(o+r.from,l+r.from)}function d4(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function h4(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Qp(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Lb(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Bb(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function f0(t,e,n){let i,r,s,o,l=!1,a,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let g=Bu(p);for(let v=0;v<g.length;v++){let m=g[v];r&&Qp(r,m)&&(m=Lb(Bb(m,r.bottom),r.top));let y=d4(e,m),w=h4(n,m);if(y==0&&w==0)return p.nodeType==3?Ib(p,e,n):f0(p,e,n);if(!i||o>w||o==w&&s>y){i=p,r=m,s=y,o=w;let b=w?n<m.top?-1:1:y?e<m.left?-1:1:0;l=!b||(b>0?v<g.length-1:v>0)}y==0?n>m.bottom&&(!c||c.bottom<m.bottom)?(a=p,c=m):n<m.top&&(!d||d.top>m.top)&&(u=p,d=m):c&&Qp(c,m)?c=Bb(c,m.bottom):d&&Qp(d,m)&&(d=Lb(d,m.top))}}if(c&&c.bottom>=n?(i=a,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Ib(i,h,n);if(l&&i.contentEditable!="false")return f0(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function Ib(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Mo(t,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((te.chrome||te.gecko)&&Mo(t,l).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:l+(f?1:0)};r=l+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function VE(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-l;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let b=t.viewState.heightOracle.textHeight/2,k=!1;a=t.elementAtHeight(h),a.type!=Ke.Text;)for(;h=i>0?a.bottom+b:a.top-b,!(h>=0&&h<=u);){if(k)return n?null:0;k=!0,i=-i}d=l+h;let f=a.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:_b(t,o,a,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:_b(t,o,a,c,d);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,v=g.elementFromPoint(c,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(c=Math.max(o.left+1,Math.min(o.right-1,c)),v=g.elementFromPoint(c,d),v&&!t.contentDOM.contains(v)&&(v=null));let m,y=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let b=p.caretPositionFromPoint(c,d);b&&({offsetNode:m,offset:y}=b)}else if(p.caretRangeFromPoint){let b=p.caretRangeFromPoint(c,d);b&&({startContainer:m,startOffset:y}=b,(!t.contentDOM.contains(m)||te.safari&&f4(m,y,c)||te.chrome&&p4(m,y,c))&&(m=void 0))}}if(!m||!t.docView.dom.contains(m)){let b=Kt.find(t.docView,f);if(!b)return h>a.top+a.height/2?a.to:a.from;({node:m,offset:y}=f0(b.dom,c,d))}let w=t.docView.nearest(m);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let b=w.dom.getBoundingClientRect();return e.y<b.top||e.y<=b.bottom&&e.x<=(b.left+b.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(m,y)+w.posAtStart}function _b(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((r-n.top-(t.defaultLineHeight-l)*.5)/l);s+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+N3(o,s,t.state.tabSize)}function f4(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Mo(t,i-1,i).getBoundingClientRect().left>n}function p4(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Mo(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function p0(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==Ke.Text))return i}return n}function m4(t,e,n,i){let r=p0(t,e.head),s=!i||r.type!=Ke.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(r.from),a=t.posAtCoords({x:n==(l==Xe.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return V.cursor(a,n?-1:1)}return V.cursor(n?r.to:r.from,n?-1:1)}function $b(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let l=e,a=null;;){let u=i4(r,s,o,l,n),c=zE;if(!u){if(r.number==(n?t.state.doc.lines:1))return l;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=V.cursor(n?r.from:r.to)}if(a){if(!a(c))return l}else{if(!i)return u;a=i(c)}l=u}}function g4(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Tt.Space&&(r=o),r==o}}function y4(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return V.cursor(r,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r),c=t.documentTop;if(u)o==null&&(o=u.left-a.left),l=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(r-f.from))),l=(s<0?f.top:f.bottom)+c}let d=a.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=l+(h+f)*s,g=VE(t,{x:d,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?g<r:g>r))return V.cursor(g,e.assoc,void 0,o)}}function jd(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=i||n||(e-s<o-e?-1:1);e=a<0?s:o,i=a}});if(!i)return e}}function Zp(t,e,n){let i=jd(t.state.facet(gv).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:V.cursor(i,i<n.from?1:-1)}class v4{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(i,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(r.type,e,r)?r.preventDefault():i(e,r))};for(let i in ut){let r=ut[i];e.contentDOM.addEventListener(i,s=>{Fb(e,s)&&n(r,s)},m0[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{if(i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(ut.mousedown,i),!i.defaultPrevented&&i.button==2)){let r=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=r,200)}}),e.scrollDOM.addEventListener("drop",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(ut.drop,i)}),te.chrome&&te.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,te.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var i;let r;this.customHandlers=[];for(let s of n)if(r=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{Fb(e,l)&&this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,n,i){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,i,n)||i.defaultPrevented)return!0}catch(o){Si(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,n,e)}catch(s){Si(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&WE.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),te.android&&te.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let i;return te.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((i=HE.find(r=>r.keyCode==n.keyCode))&&!n.ctrlKey||w4.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=i||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,kl(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:te.safari&&!te.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const HE=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],w4="dthko",WE=[16,17,18,20,91,92,224,225],Kc=6;function qc(t){return Math.max(0,t)*.7+8}function b4(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class x4{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=j3(e.contentDOM),this.atoms=e.state.facet(gv).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ye.allowMultipleSelections)&&S4(e,n),this.dragging=C4(e,n)&&YE(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&b4(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=_E(this.view);e.clientX-o.left<=s.left+Kc?i=-qc(s.left-e.clientX):e.clientX+o.right>=s.right-Kc&&(i=qc(e.clientX-s.right)),e.clientY-o.top<=s.top+Kc?r=-qc(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Kc&&(r=qc(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=jd(this.atoms,r.from,0);o!=r.from&&(s=V.cursor(o,-1))}else{let o=jd(this.atoms,r.from,-1),l=jd(this.atoms,r.to,1);(o!=r.from||l!=r.to)&&(s=V.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?V.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection)||i.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function S4(t,e){let n=t.state.facet(PE);return n.length?n[0](e):te.mac?e.metaKey:e.ctrlKey}function k4(t,e){let n=t.state.facet(RE);return n.length?n[0](e):te.mac?!e.altKey:!e.ctrlKey}function C4(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Mh(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Fb(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Be.get(n))&&i.ignoreEvent(e))return!1;return!0}const ut=Object.create(null),m0=Object.create(null),GE=te.ie&&te.ie_version<15||te.ios&&te.webkit_version<604;function E4(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),XE(t,n.value)},50)}function XE(t,e){let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(g0!=null&&n.selection.ranges.every(a=>a.empty)&&g0==s.toString()){let a=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:V.cursor(u.from+d.length)}})}else o?i=n.changeByRange(a=>{let u=s.line(r++);return{changes:{from:a.from,to:a.to,insert:u.text},range:V.cursor(a.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}ut.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};ut.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};ut.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};m0.touchstart=m0.touchmove={passive:!0};ut.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let i of t.state.facet(ME))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=R4(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new x4(t,e,n,i)),i&&t.observer.ignore(()=>pE(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function zb(t,e,n,i){if(i==1)return V.cursor(e,n);if(i==2)return c4(t.state,e,n);{let r=Kt.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<t.state.doc.length&&l==s.to&&l++,V.range(o,l)}}let JE=(t,e)=>t>=e.top&&t<=e.bottom,jb=(t,e,n)=>JE(e,n)&&t>=n.left&&t<=n.right;function A4(t,e,n,i){let r=Kt.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&jb(n,i,o))return-1;let l=r.coordsAt(s,1);return l&&jb(n,i,l)?1:o&&JE(i,o)?-1:1}function Ub(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:A4(t,n,e.clientX,e.clientY)}}const P4=te.ie&&te.ie_version<=11;let Vb=null,Hb=0,Wb=0;function YE(t){if(!P4)return t.detail;let e=Vb,n=Wb;return Vb=t,Wb=Date.now(),Hb=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Hb+1)%3:1}function R4(t,e){let n=Ub(t,e),i=YE(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,l){let a=Ub(t,s),u,c=zb(t,a.pos,a.bias,i);if(n.pos!=a.pos&&!o){let d=zb(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?V.range(h,f):V.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):l&&i==1&&r.ranges.length>1&&(u=M4(r,a.pos))?u:l?r.addRange(c):V.create([c])}}}function M4(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return V.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}ut.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:i}=t.inputState;i&&(i.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function Gb(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=i&&s&&s.dragging&&k4(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,l={from:r,insert:n},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}ut.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let i=Array(n.length),r=0,s=()=>{++r==n.length&&Gb(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(n[o])}}else Gb(t,e,e.dataTransfer.getData("Text"),!0)};ut.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=GE?null:e.clipboardData;n?(XE(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):E4(t)};function O4(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function T4(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}let g0=null;ut.copy=ut.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=T4(t.state);if(!n&&!r)return;g0=r?n:null;let s=GE?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):O4(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const KE=Wr.define();function qE(t,e){let n=[];for(let i of t.facet(DE)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:KE.of(!0)}):null}function QE(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=qE(t.state,e);n?t.dispatch(n):t.update([])}},10)}ut.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),QE(t)};ut.blur=t=>{t.observer.clearSelectionRange(),QE(t)};ut.compositionstart=ut.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};ut.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,te.chrome&&te.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};ut.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ut.beforeinput=(t,e)=>{var n;let i;if(te.chrome&&te.android&&(i=HE.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const Xb=["pre-wrap","normal","pre-line","break-spaces"];class D4{constructor(e){this.lineWrapping=e,this.doc=ke.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Xb.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let l=Xb.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class N4{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Wi{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Ke.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof _s?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Wi(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Fe=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Fe||(Fe={}));const Ud=.001;class nn{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>Ud&&(e.heightChanged=!0),this.height=n)}replace(e,n,i){return nn.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:d}=r[l],h=s.lineAt(a,Fe.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,Fe.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;l>0&&h.from<=r[l-1].toA;)a=r[l-1].fromA,c=r[l-1].fromB,l--,a<h.from&&(h=s.lineAt(a,Fe.ByPosNoHeight,i,0,0));c+=h.from-a,a=h.from;let p=yv.build(i.setDoc(o),e,c,d);s=s.replace(a,u,p)}return s.updateHeight(i,0)}static empty(){return new On(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(s>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[n++];l&&(r+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new L4(nn.of(e.slice(0,n)),o,nn.of(e.slice(i)))}}nn.prototype.size=1;class ZE extends nn{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Wi(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class On extends ZE{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Wi(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof On||r instanceof Et&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Et?r=new On(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):nn.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Et extends nn{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:l}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),c=n.doc.lineAt(u),d=l+c.length*a,h=Math.max(i,e-d/2);return new Wi(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:c,length:d}=n.doc.line(s+u);return new Wi(c,d,i+l*u,l,0)}}lineAt(e,n,i,r,s){if(n==Fe.ByHeight)return this.blockAt(e,i,r,s);if(n==Fe.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new Wi(f,p-f,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=l+u.length*a,d=u.number-o,h=r+l*d+a*(u.from-s-d);return new Wi(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-l;d+=a*p+u*(e-s-p)}let f=a+u*h.length;o(new Wi(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Et?i[i.length-1]=new Et(s.length+r):i.push(null,new Et(r-1))}if(e>0){let s=i[0];s instanceof Et?i[0]=new Et(e+s.length):i.unshift(new Et(e-1),null)}return nn.of(i)}decomposeLeft(e,n){n.push(new Et(e-1),null)}decomposeRight(e,n){n.push(null,new Et(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],l=Math.max(n,r.from),a=-1;for(r.from>n&&o.push(new Et(r.from-n-1).updateHeight(e,n));l<=s&&r.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let d=r.heights[r.index++];a==-1?a=d:Math.abs(d-a)>=Ud&&(a=-2);let h=new On(c,d);h.outdated=!1,o.push(h),l+=c+1}l<=s&&o.push(null,new Et(s-l).updateHeight(e,l));let u=nn.of(o);return(a<0||Math.abs(u.height-this.height)>=Ud||Math.abs(a-this.heightMetrics(e,n).perLine)>=Ud)&&(e.heightChanged=!0),u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class L4 extends nn{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,a=n==Fe.ByHeight?e<o:e<l,u=a?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=n==Fe.ByPosNoHeight?Fe.ByPosNoHeight:Fe.ByPos;return a?u.join(this.right.lineAt(l,c,i,o,l)):this.left.lineAt(l,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let l=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,i,r,s,o),n>=a&&this.right.forEachLine(e,n,i,l,a,o);else{let u=this.lineAt(a,Fe.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,l,a,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&Jb(s,o-1),n<this.length){let l=s.length;this.decomposeRight(n,s),Jb(s,l)}return nn.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?nn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,l=n+s.length+this.break,a=null;return r&&r.from<=n+s.length&&r.more?a=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,i,r):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Jb(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Et&&(i=t[e+1])instanceof Et&&t.splice(e-1,3,new Et(n.length+1+i.length))}const B4=5;class yv{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof On?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new On(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new ZE(o,r,i)):(o||s||r>=B4)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new On(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Et(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof On)return e;let n=new On(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let i=(n=e.deco)===null||n===void 0?void 0:n.type;i==Ke.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i!=Ke.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof On)&&!this.isCovered?this.nodes.push(new On(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof On&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new yv(i,e);return ze.spans(n,i,r,s,0),s.finish(i)}}function I4(t,e,n){let i=new _4;return ze.compare(t,e,n,i,0),i.changes}class _4{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&u0(e,n,this.changes,5)}}function $4(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=u==t.parentNode?h.bottom:Math.min(a,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function F4(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class em{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return Se.replace({widget:new z4(this.size,e)}).range(this.from,this.to)}}class z4 extends _o{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Yb{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Kb,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Xe.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(mv).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new D4(n),this.stateDeco=e.facet(Iu).filter(i=>typeof i!="function"),this.heightMap=nn.empty().applyChanges(this.stateDeco,ke.empty,this.heightOracle.setDoc(e.doc),[new ni(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Se.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Qc(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?Kb:new V4(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Ga(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Iu).filter(c=>typeof c!="function");let r=e.changedRanges,s=ni.extendWithRanges(r,I4(i,this.stateDeco,e?e.changes:ht.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(LE)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Xe.RTL:Xe.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=n.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0,d=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=gE(e.scrollDOM);let f=(this.printing?F4:$4)(n,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let m=l.width;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),a){let w=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(w)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:b,charWidth:k,textHeight:A}=e.docView.measureTextSize();o=b>0&&r.refresh(s,b,k,A,m/k,w),o&&(e.docView.minWidth=0,u|=8)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),r.heightChanged=!1;for(let b of this.viewports){let k=b.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(b);this.heightMap=(o?nn.empty().applyChanges(this.stateDeco,ke.empty,this.heightOracle,[new ni(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new N4(b.from,k))}r.heightChanged&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Qc(r.lineAt(o-i*1e3,Fe.ByHeight,s,0,0).from,r.lineAt(l+(1-i)*1e3,Fe.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,Fe.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?h=d.top:h=d.bottom-c,a=new Qc(r.lineAt(h-1e3/2,Fe.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,Fe.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Qc(this.heightMap.lineAt(i,Fe.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Fe.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Fe.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Fe.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new em(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Xe.LTR&&!i)return[];let l=[],a=(u,c,d,h)=>{if(c-u<s)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let v of p)if(v>u&&v<c){a(u,v-10,d,h),a(v+10,c,d,h);return}let g=U4(e,v=>v.from>=d.from&&v.to<=d.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-c)<s&&!p.some(m=>v.from<m&&v.to>m));if(!g){if(c<d.to&&n&&i&&n.visibleRanges.some(v=>v.from<=c&&v.to>=c)){let v=n.moveToLineBoundary(V.cursor(c),!1,!0).head;v>u&&(c=v)}g=new em(u,c,this.gapSize(d,u,c,h))}l.push(g)};for(let u of this.viewportLines){if(u.length<o)continue;let c=j4(u.from,u.to,this.stateDeco);if(c.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,v;if(d!=null){let m=ed(c,d),y=((this.visibleBottom-this.visibleTop)/2+p)/u.height;g=m-y,v=m+y}else g=(this.visibleTop-u.top-p)/u.height,v=(this.visibleBottom-u.top+p)/u.height;h=Zc(c,g),f=Zc(c,v)}else{let p=c.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,v,m;if(d!=null){let y=ed(c,d),w=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/p;v=y-w,m=y+w}else v=(this.pixelViewport.left-g)/p,m=(this.pixelViewport.right+g)/p;h=Zc(c,v),f=Zc(c,m)}h>u.from&&a(u.from,h,u,c),f<u.to&&a(f,u.to,u,c)}return l}gapSize(e,n,i,r){let s=ed(r,i)-ed(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){em.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Se.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ze.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Ga(this.heightMap.lineAt(e,Fe.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Ga(this.heightMap.lineAt(this.scaler.fromDOM(e),Fe.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Ga(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Qc{constructor(e,n){this.from=e,this.to=n}}function j4(t,e,n){let i=[],r=t,s=0;return ze.spans(n,t,e,{span(){},point(o,l){o>r&&(i.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Zc({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(i<=l)return s+i;i-=l}}function ed(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function U4(t,e){for(let n of t)if(e(n))return n}const Kb={toDOM(t){return t},fromDOM(t){return t},scale:1};class V4{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let u=n.lineAt(l,Fe.ByPos,e,0,0).top,c=n.lineAt(a,Fe.ByPos,e,0,0).bottom;return r+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function Ga(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Wi(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Ga(r,e)):t._content)}const td=ne.define({combine:t=>t.join(" ")}),y0=ne.define({combine:t=>t.indexOf(!0)>-1}),v0=Ls.newName(),eA=Ls.newName(),tA=Ls.newName(),nA={"&light":"."+eA,"&dark":"."+tA};function w0(t,e,n){return new Ls(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const H4=w0("."+v0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},nA);class W4{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let l=s||o?[]:X4(e),a=new bE(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=J4(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!i0(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!i0(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=V.single(u,a)}}}function iA(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=r.from,u=null;(s===8||te.android&&e.text.length<l-o)&&(a=r.to,u="end");let c=G4(t.state.doc.sliceString(o,l,cl),e.text,a-o,u);c&&(te.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==cl+cl&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:ke.of(e.text.slice(c.from,c.toB).split(cl))})}else i&&(!t.hasFocus&&t.state.facet(_f)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(te.mac||te.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=V.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ke.of([" "])}):te.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=V.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ke.of([" "])}),n){let o=t.state;if(te.ios&&t.inputState.flushIOSKey(t)||te.android&&(n.from==r.from&&n.to==r.to&&n.insert.length==1&&n.insert.lines==2&&kl(t.contentDOM,"Enter",13)||(n.from==r.from-1&&n.to==r.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&kl(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&n.insert.length==0&&kl(t.contentDOM,"Delete",46)))return!0;let l=n.insert.toString();if(t.state.facet(TE).some(c=>c(t,n.from,n.to,l)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let a;if(n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=r.from<n.from?o.sliceDoc(r.from,n.from):"",d=r.to>n.to?o.sliceDoc(n.to,r.to):"";a=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let c=o.changes(n),d=i&&i.main.to<=c.newLength?i.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){let h=t.state.sliceDoc(n.from,n.to),f=jE(t)||t.state.doc.lineAt(r.head),p=r.to-n.to,g=r.to-r.from;a=o.changeByRange(v=>{if(v.from==r.from&&v.to==r.to)return{changes:c,range:d||v.map(c)};let m=v.to-p,y=m-h.length;if(v.to-v.from!=g||t.state.sliceDoc(y,m)!=h||f&&v.to>=f.from&&v.from<=f.to)return{range:v};let w=o.changes({from:y,to:m,insert:n.insert}),b=v.to-r.to;return{changes:w,range:d?V.range(Math.max(0,d.anchor+b),Math.max(0,d.head+b)):v.map(w)}})}else a={changes:c,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(a,{scrollIntoView:!0,userEvent:u}),!0}else if(i&&!i.main.eq(r)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function G4(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));n-=o+a-s}if(o<s&&t.length<e.length){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function X4(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Eb(n,i)),(r!=n||s!=i)&&e.push(new Eb(r,s))),e}function J4(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?V.single(n+e,i+e):null}const Y4={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},tm=te.ie&&te.ie_version<=11;class K4{constructor(e){this.view=e,this.active=!1,this.selectionRange=new U3,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(te.ie&&te.ie_version<=11||te.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),tm&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(_f)?i.root.activeElement!=this.dom:!zd(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(te.ie&&te.ie_version<=11||te.android&&te.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Oh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=te.safari&&e.root.nodeType==11&&$3(this.dom.ownerDocument)==this.dom&&q4(this.view)||Mh(e.root);if(!n||this.selectionRange.eq(n))return!1;let i=zd(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&H3(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Y4),tm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),tm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&kl(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&zd(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new W4(this.view,e,n,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let i=this.view.state,r=iA(this.view,n);return this.view.state==i&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=qb(n,e.previousSibling||e.target.previousSibling,-1),r=qb(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function qb(t,e,n){for(;e;){let i=Be.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function q4(t){let e=null;function n(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return Oh(l.node,l.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}class oe{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||V3(e.parent)||document,this.viewState=new Yb(e.state||ye.create(e)),this.plugins=this.state.facet(Ha).map(n=>new qp(n));for(let n of this.plugins)n.update(this);this.observer=new K4(this),this.inputState=new v4(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Db(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof mt?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(KE))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=qE(s,o),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(ye.phrases)!=this.state.facet(ye.phrases))return this.setState(s);r=Nh.create(this,s,e),r.flags|=l;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Dh(f.empty?f:V.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Tb)&&(d=f.value)}this.viewState.update(r,d),this.bidiCache=Lh.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Wa)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(td)!=r.state.facet(td)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let h of this.state.facet(c0))h(r);(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!iA(this,c)&&u.force&&kl(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Yb(e),this.plugins=e.facet(Ha).map(i=>new qp(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Db(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Ha),i=e.state.facet(Ha);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new qp(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,{scrollTop:r}=i,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;r!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(gE(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return Si(this.state,p),Qb}}),d=Nh.create(this,this.state,[]),h=!1;d.flags|=a,n?n.flags|=a:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let f=0;f<u.length;f++)if(c[f]!=Qb)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){Si(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=i.scrollTop=r+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(c0))l(n)}get themeClasses(){return v0+" "+(this.state.facet(y0)?tA:eA)+" "+this.state.facet(td)}updateAttrs(){let e=Zb(this,BE,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(_f)?"true":"false",class:"cm-content",style:`${te.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Zb(this,mv,n);let i=this.observer.ignore(()=>{let r=a0(this.contentDOM,this.contentAttrs,n),s=a0(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(oe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Wa),Ls.mount(this.root,this.styleModules.concat(H4).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Zp(this,e,$b(this,e,n,i))}moveByGroup(e,n){return Zp(this,e,$b(this,e,n,i=>g4(this,e.head,i)))}moveToLineBoundary(e,n,i=!0){return m4(this,e,n,i)}moveVertically(e,n,i){return Zp(this,e,y4(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),VE(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Cl.find(s,e-r.from,-1,n)];return hv(i,o.dir==Xe.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(NE)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Q4)return FE(e.length);let n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n)return r.order;let i=n4(e.text,n);return this.bidiCache.push(new Lh(e.from,e.to,n,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||te.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{pE(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Tb.of(new Dh(typeof e=="number"?V.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return Lt.define(()=>({}),{eventHandlers:e})}static theme(e,n){let i=Ls.newName(),r=[td.of(i),Wa.of(w0(`.${i}`,e))];return n&&n.dark&&r.push(y0.of(!0)),r}static baseTheme(e){return uc.lowest(Wa.of(w0("."+v0,e,nA)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Be.get(i)||Be.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}oe.styleModule=Wa;oe.inputHandler=TE;oe.focusChangeEffect=DE;oe.perLineTextDirection=NE;oe.exceptionSink=OE;oe.updateListener=c0;oe.editable=_f;oe.mouseSelectionStyle=ME;oe.dragMovesSelection=RE;oe.clickAddsSelectionRange=PE;oe.decorations=Iu;oe.atomicRanges=gv;oe.scrollMargins=IE;oe.darkTheme=y0;oe.contentAttributes=mv;oe.editorAttributes=BE;oe.lineWrapping=oe.contentAttributes.of({class:"cm-lineWrapping"});oe.announce=pe.define();const Q4=4096,Qb={};class Lh{constructor(e,n,i,r){this.from=e,this.to=n,this.dir=i,this.order=r}static update(e,n){if(n.empty)return e;let i=[],r=e.length?e[e.length-1].dir:Xe.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Lh(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return i}}function Zb(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&l0(o,n)}return n}const Z4=te.mac?"mac":te.windows?"win":te.linux?"linux":"key";function e5(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,l;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function nd(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const t5=uc.default(oe.domEventHandlers({keydown(t,e){return oA(sA(e.state),t,e,"editor")}})),rA=ne.define({enables:t5}),ex=new WeakMap;function sA(t){let e=t.facet(rA),n=ex.get(e);return n||ex.set(e,n=r5(e.reduce((i,r)=>i.concat(r),[]))),n}function n5(t,e,n){return oA(sA(t.state),e,t,n)}let as=null;const i5=4e3;function r5(t,e=Z4){let n=Object.create(null),i=Object.create(null),r=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=l.split(/ (?!$)/).map(m=>e5(m,e));for(let m=1;m<p.length;m++){let y=p.slice(0,m).join(" ");r(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let b=as={view:w,prefix:y,scope:o};return setTimeout(()=>{as==b&&(as=null)},i5),!0}]})}let g=p.join(" ");r(g,!1);let v=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});a&&v.run.push(a),u&&(v.preventDefault=!0),c&&(v.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of l){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in c)c[d].run.push(o.any)}let a=o[e]||o.key;if(a)for(let u of l)s(u,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return n}function oA(t,e,n,i){let r=_3(e),s=Yt(r,0),o=yi(s)==r.length&&r!=" ",l="",a=!1,u=!1,c=!1;as&&as.view==n&&as.scope==i&&(l=as.prefix+" ",WE.indexOf(e.keyCode)<0&&(u=!0,as=null));let d=new Set,h=v=>{if(v){for(let m of v.run)if(!d.has(m)&&(d.add(m),m(n,e)))return v.stopPropagation&&(c=!0),!0;v.preventDefault&&(v.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,g;return f&&(h(f[l+nd(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(te.windows&&e.ctrlKey&&e.altKey)&&(p=Bs[e.keyCode])&&p!=r?(h(f[l+nd(p,e,!0)])||e.shiftKey&&(g=Lu[e.keyCode])!=r&&g!=p&&h(f[l+nd(g,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(f[l+nd(r,e,!0)])&&(a=!0),!a&&h(f._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),a}class fc{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=lA(e);return[new fc(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return s5(e,n,i)}}function lA(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Xe.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function tx(t,e,n){let i=V.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:Ke.Text}}function s5(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Xe.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=lA(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=l.right-(c?parseInt(c.paddingRight):0),f=p0(t,i),p=p0(t,r),g=f.type==Ke.Text?f:null,v=p.type==Ke.Text?p:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=tx(t,i,g)),v&&(t.lineWrapping||p.widgetLineBreaks)&&(v=tx(t,r,v)),g&&v&&g.from==v.from)return y(w(n.from,n.to,g));{let k=g?w(n.from,null,g):b(f,!1),A=v?w(null,n.to,v):b(p,!0),P=[];return(g||f).to<(v||p).from-(g&&v?1:0)||f.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<A.top?P.push(m(d,k.bottom,h,A.top)):k.bottom<A.top&&t.elementAtHeight((k.bottom+A.top)/2).type==Ke.Text&&(k.bottom=A.top=(k.bottom+A.top)/2),y(k).concat(P).concat(y(A))}function m(k,A,P,B){return new fc(e,k-a.left,A-a.top-.01,P-k,B-A+.01)}function y({top:k,bottom:A,horizontal:P}){let B=[];for(let C=0;C<P.length;C+=2)B.push(m(P[C],k,P[C+1],A));return B}function w(k,A,P){let B=1e9,C=-1e9,E=[];function R(T,I,$,z,L){let _=t.coordsAtPos(T,T==P.to?-2:2),j=t.coordsAtPos($,$==P.from?2:-2);!_||!j||(B=Math.min(_.top,j.top,B),C=Math.max(_.bottom,j.bottom,C),L==Xe.LTR?E.push(s&&I?d:_.left,s&&z?h:j.right):E.push(!s&&z?d:j.left,!s&&I?h:_.right))}let O=k??P.from,N=A??P.to;for(let T of t.visibleRanges)if(T.to>O&&T.from<N)for(let I=Math.max(T.from,O),$=Math.min(T.to,N);;){let z=t.state.doc.lineAt(I);for(let L of t.bidiSpans(z)){let _=L.from+z.from,j=L.to+z.from;if(_>=$)break;j>I&&R(Math.max(_,I),k==null&&_<=O,Math.min(j,$),A==null&&j>=N,L.dir)}if(I=z.to+1,I>=$)break}return E.length==0&&R(O,k==null,N,A==null,t.textDirection),{top:B,bottom:C,horizontal:E}}function b(k,A){let P=l.top+(A?k.top:k.bottom);return{top:P,bottom:P,horizontal:[]}}}function o5(t,e){return t.constructor==e.constructor&&t.eq(e)}class l5{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Vd)!=e.state.facet(Vd)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(Vd);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!o5(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Vd=ne.define();function aA(t){return[Lt.define(e=>new l5(e,t)),Vd.of(t)]}const uA=!te.ios,_u=ne.define({combine(t){return Ws(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function a5(t={}){return[_u.of(t),u5,c5,d5,LE.of(!0)]}function cA(t){return t.startState.facet(_u)!=t.state.facet(_u)}const u5=aA({above:!0,markers(t){let{state:e}=t,n=e.facet(_u),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||uA:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:V.cursor(r.head,r.head>r.anchor?-1:1);for(let a of fc.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=cA(t);return n&&nx(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){nx(e.state,t)},class:"cm-cursorLayer"});function nx(t,e){e.style.animationDuration=t.facet(_u).cursorBlinkRate+"ms"}const c5=aA({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:fc.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||cA(t)},class:"cm-selectionLayer"}),dA={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};uA&&(dA[".cm-line"].caretColor="transparent !important");const d5=uc.highest(oe.theme(dA)),hA=pe.define({map(t,e){return t==null?null:e.mapPos(t)}}),Xa=Vt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(hA)?i.value:n,t)}}),h5=Lt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Xa);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Xa)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Xa),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Xa)!=t&&this.view.dispatch({effects:hA.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function f5(){return[Xa,h5]}function ix(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}function p5(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class m5{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(l,a,u,c)=>r(c,u,u+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,u,c)=>{let d=i(l,a,u);d&&c(u,u+l[0].length,d)};else if(i)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Ro,i=n.add.bind(n);for(let{from:r,to:s}of p5(e,this.maxLength))ix(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),r=Math.max(a,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,r);if(l>o){let a=e.state.doc.lineAt(o),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(s.from,a.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){d=l;break}}let h=[],f,p=(g,v,m)=>h.push(m.range(g,v));if(a==u)for(this.regexp.lastIndex=c-a.from;(f=this.regexp.exec(a.text))&&f.index<d-a.from;)this.addMatch(f,e,f.index+a.from,p);else ix(e.state.doc,this.regexp,c,d,(g,v)=>this.addMatch(v,e,g,p));n=n.update({filterFrom:c,filterTo:d,filter:(g,v)=>g<c||v>d,add:h})}}return n}}const b0=/x/.unicode!=null?"gu":"g",g5=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,b0),y5={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let nm=null;function v5(){var t;if(nm==null&&typeof document<"u"&&document.body){let e=document.body.style;nm=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return nm||!1}const Hd=ne.define({combine(t){let e=Ws(t,{render:null,specialChars:g5,addSpecialChars:null});return(e.replaceTabs=!v5())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,b0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,b0)),e}});function w5(t={}){return[Hd.of(t),b5()]}let rx=null;function b5(){return rx||(rx=Lt.fromClass(class{constructor(t){this.view=t,this.decorations=Se.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Hd)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new m5({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Yt(e[0],0);if(s==9){let o=r.lineAt(i),l=n.state.tabSize,a=Bf(o.text,l,i-o.from);return Se.replace({widget:new C5((l-a%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Se.replace({widget:new k5(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Hd);t.startState.facet(Hd)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const x5="";function S5(t){return t>=32?x5:t==10?"":String.fromCharCode(9216+t)}class k5 extends _o{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=S5(this.code),i=e.state.phrase("Control character")+" "+(y5[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class C5 extends _o{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function E5(){return P5}const A5=Se.line({class:"cm-activeLine"}),P5=Lt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(A5.range(r.from)),e=r.from)}return Se.set(n)}},{decorations:t=>t.decorations}),id="-10000px";class fA{constructor(e,n,i){this.facet=n,this.createTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){var n;let i=e.state.facet(this.facet),r=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let l=r[o],a=-1;if(l){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==l.create&&(a=u)}if(a<0)s[o]=this.createTooltipView(l);else{let u=s[o]=this.tooltipViews[a];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function R5(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const im=ne.define({combine:t=>{var e,n,i;return{position:te.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||R5}}}),sx=new WeakMap,pA=Lt.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(im);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new fA(t,vv,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(im);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=id,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let i=this.manager.tooltipViews[n];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(im).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:i}=t,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],l=this.manager.tooltipViews[s],{dom:a}=l,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){a.style.top=id;continue}let d=o.arrow?l.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,f=c.right-c.left,p=(e=sx.get(l))!==null&&e!==void 0?e:c.bottom-c.top,g=l.offset||O5,v=this.view.textDirection==Xe.LTR,m=c.width>i.right-i.left?v?i.left:i.right-c.width:v?Math.min(u.left-(d?14:0)+g.x,i.right-f):Math.max(i.left,u.left-f+(d?14:0)-g.x),y=!!o.above;!o.strictSide&&(y?u.top-(c.bottom-c.top)-g.y<i.top:u.bottom+(c.bottom-c.top)+g.y>i.bottom)&&y==i.bottom-u.bottom>u.top-i.top&&(y=!y);let w=(y?u.top-i.top:i.bottom-u.bottom)-h;if(w<p&&l.resize!==!1){if(w<this.view.defaultLineHeight){a.style.top=id;continue}sx.set(l,p),a.style.height=(p=w)+"px"}else a.style.height&&(a.style.height="");let b=y?u.top-p-h-g.y:u.bottom+h+g.y,k=m+f;if(l.overlap!==!0)for(let A of r)A.left<k&&A.right>m&&A.top<b+p&&A.bottom>b&&(b=y?A.top-p-2-h:A.bottom+h+2);this.position=="absolute"?(a.style.top=b-t.parent.top+"px",a.style.left=m-t.parent.left+"px"):(a.style.top=b+"px",a.style.left=m+"px"),d&&(d.style.left=`${u.left+(v?g.x:-g.x)-(m+14-7)}px`),l.overlap!==!0&&r.push({left:m,top:b,right:k,bottom:b+p}),a.classList.toggle("cm-tooltip-above",y),a.classList.toggle("cm-tooltip-below",!y),l.positioned&&l.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=id}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),M5=oe.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),O5={x:0,y:0},vv=ne.define({enables:[pA,M5]}),Bh=ne.define();class wv{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new fA(e,Bh,n=>this.createHostedView(n))}static create(e){return new wv(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const T5=vv.compute([Bh],t=>{let e=t.facet(Bh).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:wv.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class D5{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let i=this.view.coordsAtPos(n);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(l=>l.from<=n&&l.to>=n),s=r&&r.dir==Xe.RTL?-1:1,o=this.source(this.view,n,e.x<i.left?-s:s);if(o!=null&&o.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&this.view.dispatch({effects:this.setHover.of(a)}))},a=>Si(this.view.state,a,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!ox(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=(n=i==null?void 0:i.end)!==null&&n!==void 0?n:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!N5(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!ox(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function ox(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function N5(t,e,n,i,r,s){let o=document.createRange(),l=t.domAtPos(e),a=t.domAtPos(n);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let d=u[c];if(Math.max(d.top-r,r-d.bottom,d.left-i,i-d.right)<=s)return!0}return!1}function L5(t,e={}){let n=pe.define(),i=Vt.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,pn.TrackDel);if(o==null)return null;let l=Object.assign(Object.create(null),r);l.pos=o,r.end!=null&&(l.end=s.changes.mapPos(r.end)),r=l}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(I5)&&(r=null);return r},provide:r=>Bh.from(r)});return[i,Lt.define(r=>new D5(r,t,i,n,e.hoverTime||300)),T5]}function B5(t,e){let n=t.plugin(pA);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const I5=pe.define(),lx=ne.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function $u(t,e){let n=t.plugin(mA),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const mA=Lt.fromClass(class{constructor(t){this.input=t.state.facet(Yl),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(lx);this.top=new rd(t,!0,e.topContainer),this.bottom=new rd(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(lx);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new rd(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new rd(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Yl);if(n!=this.input){let i=n.filter(a=>a),r=[],s=[],o=[],l=[];for(let a of i){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),l.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>oe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class rd{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=ax(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=ax(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function ax(t){let e=t.nextSibling;return t.remove(),e}const Yl=ne.define({enables:mA});class $s extends Po{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}$s.prototype.elementClass="";$s.prototype.toDOM=void 0;$s.prototype.mapMode=pn.TrackBefore;$s.prototype.startSide=$s.prototype.endSide=-1;$s.prototype.point=!0;const Wd=ne.define(),Gd=ne.define(),x0=ne.define({combine:t=>t.some(e=>e)});function _5(t){let e=[$5];return t&&t.fixed===!1&&e.push(x0.of(!0)),e}const $5=Lt.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Gd).map(e=>new cx(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(x0),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(x0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ze.iter(this.view.state.facet(Wd),this.view.viewport.from),i=[],r=this.gutters.map(s=>new F5(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==Ke.Text&&o){S0(n,i,l.from);for(let a of r)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of r)a.widget(this.view,l)}else if(s.type==Ke.Text){S0(n,i,s.from);for(let o of r)o.line(this.view,s,i)}for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Gd),n=t.state.facet(Gd),i=t.docChanged||t.heightChanged||t.viewportChanged||!ze.eq(t.startState.facet(Wd),t.state.facet(Wd),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new cx(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>oe.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Xe.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function ux(t){return Array.isArray(t)?t:[t]}function S0(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class F5{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ze.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=n.top-this.height;if(this.i==r.elements.length){let o=new gA(e,n.height,s,i);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,n.height,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];S0(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n);i&&this.addElement(e,n,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class cx{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,l,r)&&r.preventDefault()});this.markers=ux(n.markers(e)),n.initialSpacer&&(this.spacer=new gA(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=ux(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!ze.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class gA{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),z5(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(a)){l=d,u=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!a)break;a.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function z5(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const j5=ne.define(),dl=ne.define({combine(t){return Ws(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(l,a,u)=>s(l,a,u)||o(l,a,u):o}return i}})}});class rm extends $s{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function sm(t,e){return t.state.facet(dl).formatNumber(e,t.state)}const U5=Gd.compute([dl],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(j5)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new rm(sm(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(dl)!=e.state.facet(dl),initialSpacer(e){return new rm(sm(e,dx(e.state.doc.lines)))},updateSpacer(e,n){let i=sm(n.view,dx(n.view.state.doc.lines));return i==e.number?e:new rm(i)},domEventHandlers:t.facet(dl).domEventHandlers}));function V5(t={}){return[dl.of(t),_5(),U5]}function dx(t){let e=9;for(;e<t;)e=e*10+9;return e}const H5=new class extends $s{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},W5=Wd.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(H5.range(r)))}return ze.of(e)});function G5(){return W5}const yA=new cc;function bv(t){window.codemirror&&window.codemirror.dispatch({effects:yA.reconfigure(ye.readOnly.of(t))})}const k0=pe.define(),X5=Vt.define({create(){return Se.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(k0)&&(n=Se.none,i.value!==null&&(n=n.update({add:[J5.range(i.value)]})));return n},provide:t=>oe.decorations.from(t)}),J5=Se.line({class:"!bg-sky-400/30"});function $f(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:k0.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:k0.of(e)})}}const Y5=se.from(se.MAX_ADDRESS).toString(),K5=new Intl.NumberFormat("en",{style:"decimal"}).format,q5={clean:"Clean",computer:"Computer",frequency:"Frequency",hertz:t=>`${K5(t)} Hz`,update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again."},cpu:{name:"CPU","general-registers":"General-purpose registers","special-registers":"Special registers",register:t=>`${t} register`,alu:"ALU",memory:{name:"Memory",cell:t=>`Cell ${se.format(t)}`,"start-address":"Start address","start-address-must-be-integer":"Start address must be an integer.","start-address-too-big":`Start address must be less or equal to ${Y5}.`},interrups:{label:"Interrupts",enabled:"Enabled",disabled:"Disabled"}},devices:{internal:{label:"Internal devices",handshake:{name:"Handshake",data:"Data",state:"State"},pic:{name:"PIC",state:"State",connections:"Connections"},pio:{name:"PIO",data:"Data",config:"Configuration",port:t=>`Port ${t}`},timer:"Timer"},external:{label:"External devices",console:"Console",f10:{name:"F10",interrupt:"Interrupt"},leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},switches:"Switches"},ioRegister:(t,e)=>`${t} register (${xn.format(e)})`},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},runner:{action:{start:"Start",debug:"Debug","run-until-halt":"Finish",step:"Next",stop:"Abort"},state:{running:"Running",paused:"Paused","waiting-for-input":"Wating for key",stopped:"Stopped"}},menu:{label:"Menu",devices:{label:"Devices","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer w/PIO",handshake:"Printer w/Handshake"},dataRepresentation:{label:"Representation mode",hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"2's complement",ascii:"ASCII"},dataOnLoad:{label:"Data on load",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},language:"Language",documentation:"Documentation","report-issue":"Report an issue"}},Q5=se.from(se.MAX_ADDRESS).toString(),Z5=new Intl.NumberFormat("es",{style:"decimal"}).format,eB={clean:"Limpiar",computer:"Computadora",frequency:"Frecuencia",hertz:t=>`${Z5(t)} Hz`,update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar."},cpu:{name:"CPU","general-registers":"Registros de propsito general","special-registers":"Registros especiales",register:t=>`Registro ${t}`,alu:"ALU",memory:{name:"Memoria",cell:t=>`Celda ${se.format(t)}`,"start-address":"Direccin de inicio","start-address-must-be-integer":"El valor de inicio debe ser un nmero entero.","start-address-too-big":`El valor de inicio debe ser menor o igual a ${Q5}.`},interrups:{label:"Interrupciones",enabled:"Habilitadas",disabled:"Inhabilitadas"}},devices:{internal:{label:"Dispositivos internos",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:{name:"PIC",state:"Estado",connections:"Conexiones"},pio:{name:"PIO",data:"Datos",config:"Configuracin",port:t=>`Puerto ${t}`},timer:"Timer"},external:{label:"Dispositivos externos",console:"Consola",f10:{name:"F10",interrupt:"Interrumpir"},leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},switches:"Teclas"},ioRegister:(t,e)=>`Registro ${t} (${xn.format(e)})`},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},runner:{action:{start:"Ejecutar",debug:"Depurar","run-until-halt":"Finalizar",step:"Siguiente",stop:"Abortar"},state:{running:"Ejecutando",paused:"Pausado","waiting-for-input":"Esperando tecla",stopped:"Detenido"}},menu:{label:"Men",devices:{label:"Dispositivos","pio-switches-and-leds":"Teclas y leds","pio-printer":"Impresora con PIO",handshake:"Impresora con Handshake"},dataRepresentation:{label:"Modo de representacin",hex:"Hexadecimal",bin:"Binario",uint:"Binario sin signo (BSS)",int:"Complemento a 2 (Ca2)",ascii:"ASCII"},dataOnLoad:{label:"Memoria al cargar",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},language:"Idioma",documentation:"Documentacin","report-issue":"Reportar un error"}},xv=nv({en:q5,es:eB}),G=tv();function tB(t){return M.jsx(eL,{store:G,children:t.children})}const nB=Symbol(),iB=t=>typeof(t==null?void 0:t.then)=="function";function vA(t){let e,n;const i={getItem:(r,s)=>{var o,l;const a=c=>{if(c=c||"",e!==c){try{n=JSON.parse(c)}catch{return s}e=c}return n},u=(l=(o=t())==null?void 0:o.getItem(r))!=null?l:null;return iB(u)?u.then(a):a(u)},setItem:(r,s)=>{var o;return(o=t())==null?void 0:o.setItem(r,JSON.stringify(s))},removeItem:r=>{var s;return(s=t())==null?void 0:s.removeItem(r)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&(i.subscribe=(r,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const l=a=>{if(a.storageArea===t()&&a.key===r){let u;try{u=JSON.parse(a.newValue||"")}catch{u=o}s(u)}};return window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}}),i}const rB=vA(()=>typeof window<"u"?window.localStorage:void 0);function pc(t,e,n=rB,i){const r=i==null?void 0:i.unstable_getOnInit,s=de(r?n.getItem(t,e):e);return s.onMount=l=>{r||l(n.getItem(t,e));let a;return n.subscribe&&(a=n.subscribe(t,l,e)),a},de(l=>l(s),(l,a,u)=>{const c=typeof u=="function"?u(l(s)):u;return c===nB?(a(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(a(s,d),n.setItem(t,d))):(a(s,c),n.setItem(t,c))})}const mc=vA(()=>window.localStorage);function sB(){const t=["en","es"],e=navigator.language.toLowerCase();for(const n of t)if(e.startsWith(n))return n;return"en"}const Sv=pc("language",sB(),mc,{unstable_getOnInit:!0}),Ff=()=>G.get(Sv),wA=pc("data-on-load","randomize",mc,{unstable_getOnInit:!0}),bA=()=>G.get(wA),xA=pc("devices","pio-switches-and-leds",mc,{unstable_getOnInit:!0}),SA=()=>G.get(xA),oB=pc("data-representation","bin",mc,{unstable_getOnInit:!0}),kv=pc("speeds",{executionUnit:150,printer:1e3},mc,{unstable_getOnInit:!0}),Kl=()=>G.get(kv),om=de(D.zero(16)),lm=de(D.zero(16)),am=de(D.zero(16)),um=de(D.zero(16)),cm=de(D.zero(16)),dm=de(D.zero(16)),lB=de(D.zero(8)),hm=de(D.zero(16)),fm=de(D.zero(16)),pm=de(D.zero(16)),mm=de(D.zero(16)),gm=de(D.zero(16)),ym=de(D.zero(16)),kA=de(D.zero(16)),Ur=de(D.zero(8)),Fn=t=>de(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),zn=t=>de(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),$e={AX:om,AL:Fn(om),AH:zn(om),BX:lm,BL:Fn(lm),BH:zn(lm),CX:am,CL:Fn(am),CH:zn(am),DX:um,DL:Fn(um),DH:zn(um),SP:cm,"SP.l":Fn(cm),"SP.h":zn(cm),IP:dm,"IP.l":Fn(dm),"IP.h":zn(dm),IR:lB,ri:hm,"ri.l":Fn(hm),"ri.h":zn(hm),id:fm,"id.l":Fn(fm),"id.h":zn(fm),left:pm,"left.l":Fn(pm),"left.h":zn(pm),right:mm,"right.l":Fn(mm),"right.h":zn(mm),result:gm,"result.l":Fn(gm),"result.h":zn(gm),FLAGS:ym,"FLAGS.l":Fn(ym),"FLAGS.h":zn(ym),MAR:kA,MBR:Ur},us=de({phase:"stopped"}),CA=de("ADD");function aB(t){G.set($e.AX,D.fromUnsigned(t.cpu.AX,16)),G.set($e.BX,D.fromUnsigned(t.cpu.BX,16)),G.set($e.CX,D.fromUnsigned(t.cpu.CX,16)),G.set($e.DX,D.fromUnsigned(t.cpu.DX,16)),G.set($e.SP,D.fromUnsigned(t.cpu.SP,16)),G.set($e.IP,D.fromUnsigned(t.cpu.IP,16)),G.set($e.IR,D.fromUnsigned(t.cpu.IR,8)),G.set($e.ri,D.fromUnsigned(t.cpu.ri,16)),G.set($e.id,D.fromUnsigned(t.cpu.id,16)),G.set($e.left,D.fromUnsigned(t.cpu.left,16)),G.set($e.right,D.fromUnsigned(t.cpu.right,16)),G.set($e.result,D.fromUnsigned(t.cpu.result,16)),G.set($e.FLAGS,D.fromUnsigned(t.cpu.FLAGS,16)),G.set($e.MAR,D.fromUnsigned(t.cpu.MAR,16)),G.set($e.MBR,D.fromUnsigned(t.cpu.MBR,8)),G.set(us,{phase:"stopped"})}const Cv=de(new Array(se.MAX_ADDRESS+1).fill(D.zero(8))),C0=de(se.from(4096)),hx=8,uB=de(t=>{const e=t(C0),n=e.value-e.value%hx,i=t(Cv),r=[];for(let s=0;s<hx;s++)r.push({address:se.from(n+s),value:i[n+s]});return r}),EA=de(D.fromUnsigned(0,8)),AA=de(D.fromUnsigned(1,8));function cB(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{G.set(Ur,t.value);return}case"handshake:write":case"handshake:register.update":switch(t.register){case"DATA":{G.set(EA,t.value);return}case"STATE":{G.set(AA,t.value);return}default:return t.register}case"handshake:write.ok":return;case"handshake:interrupt":return;default:return t}}const PA=de(D.zero(8));function dB(t){switch(t.type){case"leds:update":{G.set(PA,t.state);return}default:return t}}const RA=de(D.fromUnsigned(255,8)),MA=de(D.fromUnsigned(0,8)),OA=de(D.fromUnsigned(0,8)),TA=de(new Array(8).fill(D.zero(8)));function hB(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{G.set(Ur,t.value);return}case"pic:write":case"pic:register.update":switch(t.register){case"EOI":return;case"IMR":{G.set(RA,t.value);return}case"IRR":{G.set(MA,t.value);return}case"ISR":{G.set(OA,t.value);return}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));G.set(TA,n=>[...n.slice(0,e),t.value,...n.slice(e+1)]);return}default:return t.register}case"pic:write.ok":return;case"pic:intr.off":return;case"pic:intr.on":return;case"pic:int.send":{G.set(Ur,t.number);return}default:return t}}const DA=de(D.zero(8)),NA=de(D.zero(8)),LA=de(D.zero(8)),BA=de(D.zero(8));function fB(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{G.set(Ur,t.value);return}case"pio:write":case"pio:register.update":switch(t.register){case"PA":{G.set(DA,t.value);return}case"PB":{G.set(NA,t.value);return}case"CA":{G.set(LA,t.value);return}case"CB":{G.set(BA,t.value);return}default:return t.register}case"pio:write.ok":return;default:return t}}const E0=de([]),A0=de("");function pB(t){switch(t.type){case"printer:buffer.add":{G.set(E0,e=>[...e,t.char]);return}case"printer:buffer.pop":{G.set(E0,e=>e.slice(1));return}case"printer:busy.off":return;case"printer:busy.on":return;case"printer:data.read":return;case"printer:paper.print":{const e=lt.getComputerState().io;"printer"in e&&G.set(A0,e.printer.paper);return}case"printer:paper.replace":{G.set(A0,"");return}case"printer:strobe.off":return;case"printer:strobe.on":return;default:return t}}const IA=de(D.zero(8));function mB(t){switch(t.type){case"switches:toggle":{G.set(IA,e=>e.withBit(t.index,!e.bit(t.index)));return}default:return t}}const _A=de(D.zero(8)),$A=de(D.zero(8));function gB(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{G.set(Ur,t.value);return}case"timer:write":case"timer:register.update":switch(t.register){case"CONT":{G.set(_A,t.value);return}case"COMP":{G.set($A,t.value);return}default:return t.register}case"timer:write.ok":return;case"timer:interrupt":return;default:return t}}const bt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},stone:{600:"#57534e",700:"#44403c",800:"#292524"}};var yB=Object.defineProperty,vB=(t,e)=>{for(var n in e)yB(t,n,{get:e[n],enumerable:!0})},Ei={};vB(Ei,{assign:()=>xB,colors:()=>Ms,createStringInterpolator:()=>Tv,skipAnimation:()=>WA,to:()=>HA,willAdvance:()=>Dv});var Ev=yc(),ce=t=>gc(t,Ev),Av=yc();ce.write=t=>gc(t,Av);var zf=yc();ce.onStart=t=>gc(t,zf);var Pv=yc();ce.onFrame=t=>gc(t,Pv);var Rv=yc();ce.onFinish=t=>gc(t,Rv);var El=[];ce.setTimeout=(t,e)=>{const n=ce.now()+e,i=()=>{const s=El.findIndex(o=>o.cancel==i);~s&&El.splice(s,1),ws-=~s?1:0},r={time:n,handler:t,cancel:i};return El.splice(FA(n),0,r),ws+=1,zA(),r};var FA=t=>~(~El.findIndex(e=>e.time>t)||~El.length);ce.cancel=t=>{zf.delete(t),Pv.delete(t),Rv.delete(t),Ev.delete(t),Av.delete(t)};ce.sync=t=>{P0=!0,ce.batchedUpdates(t),P0=!1};ce.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,ce.onStart(n)}return i.handler=t,i.cancel=()=>{zf.delete(n),e=null},i};var Mv=typeof window<"u"?window.requestAnimationFrame:()=>{};ce.use=t=>Mv=t;ce.now=typeof performance<"u"?()=>performance.now():Date.now;ce.batchedUpdates=t=>t();ce.catch=console.error;ce.frameLoop="always";ce.advance=()=>{ce.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):UA()};var vs=-1,ws=0,P0=!1;function gc(t,e){P0?(e.delete(t),t(0)):(e.add(t),zA())}function zA(){vs<0&&(vs=0,ce.frameLoop!=="demand"&&Mv(jA))}function wB(){vs=-1}function jA(){~vs&&(Mv(jA),ce.batchedUpdates(UA))}function UA(){const t=vs;vs=ce.now();const e=FA(vs);if(e&&(VA(El.splice(0,e),n=>n.handler()),ws-=e),!ws){wB();return}zf.flush(),Ev.flush(t?Math.min(64,vs-t):16.667),Pv.flush(),Av.flush(),Rv.flush()}function yc(){let t=new Set,e=t;return{add(n){ws+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return ws-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,ws-=e.size,VA(e,i=>i(n)&&t.add(i)),ws+=t.size,e=t)}}}function VA(t,e){t.forEach(n=>{try{e(n)}catch(i){ce.catch(i)}})}function R0(){}var bB=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),H={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function cr(t,e){if(H.arr(t)){if(!H.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var ue=(t,e)=>t.forEach(e);function er(t,e,n){if(H.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var en=t=>H.und(t)?[]:H.arr(t)?t:[t];function au(t,e){if(t.size){const n=Array.from(t);t.clear(),ue(n,e)}}var Ja=(t,...e)=>au(t,n=>n(...e)),Ov=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Tv,HA,Ms=null,WA=!1,Dv=R0,xB=t=>{t.to&&(HA=t.to),t.now&&(ce.now=t.now),t.colors!==void 0&&(Ms=t.colors),t.skipAnimation!=null&&(WA=t.skipAnimation),t.createStringInterpolator&&(Tv=t.createStringInterpolator),t.requestAnimationFrame&&ce.use(t.requestAnimationFrame),t.batchedUpdates&&(ce.batchedUpdates=t.batchedUpdates),t.willAdvance&&(Dv=t.willAdvance),t.frameLoop&&(ce.frameLoop=t.frameLoop)},uu=new Set,qn=[],vm=[],Ih=0,jf={get idle(){return!uu.size&&!qn.length},start(t){Ih>t.priority?(uu.add(t),ce.onStart(SB)):(GA(t),ce(M0))},advance:M0,sort(t){if(Ih)ce.onFrame(()=>jf.sort(t));else{const e=qn.indexOf(t);~e&&(qn.splice(e,1),XA(t))}},clear(){qn=[],uu.clear()}};function SB(){uu.forEach(GA),uu.clear(),ce(M0)}function GA(t){qn.includes(t)||XA(t)}function XA(t){qn.splice(kB(qn,e=>e.priority>t.priority),0,t)}function M0(t){const e=vm;for(let n=0;n<qn.length;n++){const i=qn[n];Ih=i.priority,i.idle||(Dv(i),i.advance(t),i.idle||e.push(i))}return Ih=0,vm=qn,vm.length=0,qn=e,qn.length>0}function kB(t,e){const n=t.findIndex(e);return n<0?t.length:n}var CB=(t,e,n)=>Math.min(Math.max(n,t),e),EB={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},vi="[-+]?\\d*\\.?\\d+",_h=vi+"%";function Uf(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var AB=new RegExp("rgb"+Uf(vi,vi,vi)),PB=new RegExp("rgba"+Uf(vi,vi,vi,vi)),RB=new RegExp("hsl"+Uf(vi,_h,_h)),MB=new RegExp("hsla"+Uf(vi,_h,_h,vi)),OB=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,TB=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,DB=/^#([0-9a-fA-F]{6})$/,NB=/^#([0-9a-fA-F]{8})$/;function LB(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=DB.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ms&&Ms[t]!==void 0?Ms[t]:(e=AB.exec(t))?(Wo(e[1])<<24|Wo(e[2])<<16|Wo(e[3])<<8|255)>>>0:(e=PB.exec(t))?(Wo(e[1])<<24|Wo(e[2])<<16|Wo(e[3])<<8|mx(e[4]))>>>0:(e=OB.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=NB.exec(t))?parseInt(e[1],16)>>>0:(e=TB.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=RB.exec(t))?(fx(px(e[1]),sd(e[2]),sd(e[3]))|255)>>>0:(e=MB.exec(t))?(fx(px(e[1]),sd(e[2]),sd(e[3]))|mx(e[4]))>>>0:null}function wm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function fx(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=wm(r,i,t+1/3),o=wm(r,i,t),l=wm(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(l*255)<<8}function Wo(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function px(t){return(parseFloat(t)%360+360)%360/360}function mx(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function sd(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function gx(t){let e=LB(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Fu=(t,e,n)=>{if(H.fun(t))return t;if(H.arr(t))return Fu({range:t,output:e,extrapolate:n});if(H.str(t.output[0]))return Tv(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",l=i.extrapolateRight||i.extrapolate||"extend",a=i.easing||(u=>u);return u=>{const c=IB(u,s);return BB(u,s[c],s[c+1],r[c],r[c+1],a,o,l,i.map)}};function BB(t,e,n,i,r,s,o,l,a){let u=a?a(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(l==="identity")return u;l==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function IB(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var _B=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return CB(0,1,r/t)},$h=1.70158,od=$h*1.525,yx=$h+1,vx=2*Math.PI/3,wx=2*Math.PI/4.5,ld=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,Nv={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>yx*t*t*t-$h*t*t,easeOutBack:t=>1+yx*Math.pow(t-1,3)+$h*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((od+1)*2*t-od)/2:(Math.pow(2*t-2,2)*((od+1)*(t*2-2)+od)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*vx),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*vx)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*wx))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*wx)/2+1,easeInBounce:t=>1-ld(1-t),easeOutBounce:ld,easeInOutBounce:t=>t<.5?(1-ld(1-2*t))/2:(1+ld(2*t-1))/2,steps:_B},zu=Symbol.for("FluidValue.get"),ql=Symbol.for("FluidValue.observers"),Yn=t=>!!(t&&t[zu]),dn=t=>t&&t[zu]?t[zu]():t,bx=t=>t[ql]||null;function $B(t,e){t.eventObserved?t.eventObserved(e):t(e)}function ju(t,e){const n=t[ql];n&&n.forEach(i=>{$B(i,e)})}var JA=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");FB(this,t)}},FB=(t,e)=>YA(t,zu,e);function ua(t,e){if(t[zu]){let n=t[ql];n||YA(t,ql,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Uu(t,e){const n=t[ql];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[ql]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var YA=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Xd=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,zB=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,xx=new RegExp(`(${Xd.source})(%|[a-z]+)`,"i"),jB=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Vf=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,KA=t=>{const[e,n]=UB(t);if(!e||Ov())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Vf.test(n))return KA(n);if(n)return n}return t},UB=t=>{const e=Vf.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},bm,VB=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,qA=t=>{bm||(bm=Ms?new RegExp(`(${Object.keys(Ms).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>dn(s).replace(Vf,KA).replace(zB,gx).replace(bm,gx)),n=e.map(s=>s.match(Xd).map(Number)),r=n[0].map((s,o)=>n.map(l=>{if(!(o in l))throw Error('The arity of each "output" value must be equal');return l[o]})).map(s=>Fu({...t,output:s}));return s=>{var a;const o=!xx.test(e[0])&&((a=e.find(u=>xx.test(u)))==null?void 0:a.replace(Xd,""));let l=0;return e[0].replace(Xd,()=>`${r[l++](s)}${o||""}`).replace(jB,VB)}},Lv="react-spring: ",QA=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${Lv}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},HB=QA(console.warn);function WB(){HB(`${Lv}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var GB=QA(console.warn);function XB(){GB(`${Lv}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Hf(t){return H.str(t)&&(t[0]=="#"||/\d/.test(t)||!Ov()&&Vf.test(t)||t in(Ms||{}))}var ho=Ov()?S.useEffect:S.useLayoutEffect,JB=()=>{const t=S.useRef(!1);return ho(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Bv(){const t=S.useState()[1],e=JB();return()=>{e.current&&t(Math.random())}}function YB(t,e){const[n]=S.useState(()=>({inputs:e,result:t()})),i=S.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&KB(e,s.inputs)||(s={inputs:e,result:t()}):s=n,S.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function KB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var Iv=t=>S.useEffect(t,qB),qB=[];function O0(t){const e=S.useRef();return S.useEffect(()=>{e.current=t}),e.current}var Vu=Symbol.for("Animated:node"),QB=t=>!!t&&t[Vu]===t,Ii=t=>t&&t[Vu],_v=(t,e)=>bB(t,Vu,e),Wf=t=>t&&t[Vu]&&t[Vu].getPayload(),ZA=class{constructor(){_v(this,this)}getPayload(){return this.payload||[]}},vc=class extends ZA{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,H.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new vc(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return H.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,H.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Hu=class extends vc{constructor(t){super(0),this._string=null,this._toString=Fu({output:[t,t]})}static create(t){return new Hu(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(H.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Fu({output:[this.getValue(),t]})),this._value=0,super.reset()}},Fh={dependencies:null},Gf=class extends ZA{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return er(this.source,(n,i)=>{QB(n)?e[i]=n.getValue(t):Yn(n)?e[i]=dn(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&ue(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return er(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Fh.dependencies&&Yn(t)&&Fh.dependencies.add(t);const e=Wf(t);e&&ue(e,n=>this.add(n))}},eP=class extends Gf{constructor(t){super(t)}static create(t){return new eP(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(ZB)),!0)}};function ZB(t){return(Hf(t)?Hu:vc).create(t)}function T0(t){const e=Ii(t);return e?e.constructor:H.arr(t)?eP:Hf(t)?Hu:vc}var Sx=(t,e)=>{const n=!H.fun(t)||t.prototype&&t.prototype.isReactComponent;return S.forwardRef((i,r)=>{const s=S.useRef(null),o=n&&S.useCallback(p=>{s.current=n8(r,p)},[r]),[l,a]=t8(i,e),u=Bv(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,l.getValue(!0)):!1)===!1&&u()},d=new e8(c,a),h=S.useRef();ho(()=>(h.current=d,ue(a,p=>ua(p,d)),()=>{h.current&&(ue(h.current.deps,p=>Uu(p,h.current)),ce.cancel(h.current.update))})),S.useEffect(c,[]),Iv(()=>()=>{const p=h.current;ue(p.deps,g=>Uu(g,p))});const f=e.getComponentProps(l.getValue());return S.createElement(t,{...f,ref:o})})},e8=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&ce.write(this.update)}};function t8(t,e){const n=new Set;return Fh.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Gf(t),Fh.dependencies=null,[t,n]}function n8(t,e){return t&&(H.fun(t)?t(e):t.current=e),e}var kx=Symbol.for("AnimatedComponent"),i8=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new Gf(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const l=Cx(o)||"Anonymous";return H.str(o)?o=s[o]||(s[o]=Sx(o,r)):o=o[kx]||(o[kx]=Sx(o,r)),o.displayName=`Animated(${l})`,o};return er(t,(o,l)=>{H.arr(t)&&(l=Cx(o)),s[l]=s(o)}),{animated:s}},Cx=t=>H.str(t)?t:t&&H.str(t.displayName)?t.displayName:H.fun(t)&&t.name||null;function hn(t,...e){return H.fun(t)?t(...e):t}var cu=(t,e)=>t===!0||!!(e&&t&&(H.fun(t)?t(e):en(t).includes(e))),tP=(t,e)=>H.obj(t)?e&&t[e]:t,nP=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,r8=t=>t,Xf=(t,e=r8)=>{let n=s8;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);H.und(s)||(i[r]=s)}return i},s8=["config","onProps","onStart","onChange","onPause","onResume","onRest"],o8={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function l8(t){const e={};let n=0;if(er(t,(i,r)=>{o8[r]||(e[r]=i,n++)}),n)return e}function $v(t){const e=l8(t);if(e){const n={to:e};return er(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Wu(t){return t=dn(t),H.arr(t)?t.map(Wu):Hf(t)?Ei.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function iP(t){for(const e in t)return!0;return!1}function D0(t){return H.fun(t)||H.arr(t)&&H.obj(t[0])}function N0(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function rP(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var a8={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},L0={...a8.default,mass:1,damping:1,easing:Nv.linear,clamp:!1},u8=class{constructor(){this.velocity=0,Object.assign(this,L0)}};function c8(t,e,n){n&&(n={...n},Ex(n,e),e={...n,...e}),Ex(t,e),Object.assign(t,e);for(const o in L0)t[o]==null&&(t[o]=L0[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return H.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function Ex(t,e){if(!H.und(e.decay))t.duration=void 0;else{const n=!H.und(e.tension)||!H.und(e.friction);(n||!H.und(e.frequency)||!H.und(e.damping)||!H.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var Ax=[],d8=class{constructor(){this.changed=!1,this.values=Ax,this.toValues=null,this.fromValues=Ax,this.config=new u8,this.immediate=!1}};function sP(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,l)=>{let a,u,c=cu(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{H.und(n.pause)||(r.paused=cu(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||cu(p,e)),a=hn(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),a=u.time-ce.now()}function h(){a>0&&!Ei.skipAnimation?(r.delayed=!0,u=ce.setTimeout(f,a),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){l(p)}}})}var Fv=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Al(t.get()):e.every(n=>n.noop)?oP(t.get()):gi(t.get(),e.every(n=>n.finished)),oP=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),gi=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Al=t=>({value:t,cancelled:!0,finished:!1});function lP(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:l,promise:a}=n;return!s&&t===l&&!e.reset?a:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=Xf(e,(v,m)=>m==="onRest"?void 0:v);let c,d;const h=new Promise((v,m)=>(c=v,d=m)),f=v=>{const m=r<=(n.cancelId||0)&&Al(i)||r!==n.asyncId&&gi(i,!1);if(m)throw v.result=m,d(v),v},p=(v,m)=>{const y=new Px,w=new Rx;return(async()=>{if(Ei.skipAnimation)throw Gu(n),w.result=gi(i,!1),d(w),w;f(y);const b=H.obj(v)?{...v}:{...m,to:v};b.parentId=r,er(u,(A,P)=>{H.und(b[P])&&(b[P]=A)});const k=await i.start(b);return f(y),n.paused&&await new Promise(A=>{n.resumeQueue.add(A)}),k})()};let g;if(Ei.skipAnimation)return Gu(n),gi(i,!1);try{let v;H.arr(t)?v=(async m=>{for(const y of m)await p(y)})(t):v=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([v.then(c),h]),g=gi(i.get(),!0,!1)}catch(v){if(v instanceof Px)g=v.result;else if(v instanceof Rx)g=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?l:void 0,n.promise=s?a:void 0)}return H.fun(o)&&ce.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function Gu(t,e){au(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Px=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Rx=class extends Error{constructor(){super("SkipAnimationSignal")}},B0=t=>t instanceof zv,h8=1,zv=class extends JA{constructor(){super(...arguments),this.id=h8++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ii(this);return t&&t.getValue()}to(...t){return Ei.to(this,t)}interpolate(...t){return WB(),Ei.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){ju(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||jf.sort(this),ju(this,{type:"priority",parent:this,priority:t})}},Oo=Symbol.for("SpringPhase"),aP=1,I0=2,_0=4,xm=t=>(t[Oo]&aP)>0,Kr=t=>(t[Oo]&I0)>0,Ra=t=>(t[Oo]&_0)>0,Mx=(t,e)=>e?t[Oo]|=I0|aP:t[Oo]&=~I0,Ox=(t,e)=>e?t[Oo]|=_0:t[Oo]&=~_0,f8=class extends zv{constructor(t,e){if(super(),this.animation=new d8,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!H.und(t)||!H.und(e)){const n=H.obj(t)?{...t}:{...e,from:t};H.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Kr(this)||this._state.asyncTo)||Ra(this)}get goal(){return dn(this.animation.to)}get velocity(){const t=Ii(this);return t instanceof vc?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return xm(this)}get isAnimating(){return Kr(this)}get isPaused(){return Ra(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Wf(i.to);!o&&Yn(i.to)&&(r=en(dn(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Hu?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const g=i.fromValues[c],v=u.v0!=null?u.v0:u.v0=H.arr(s.velocity)?s.velocity[c]:s.velocity;let m;const y=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(H.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,b=Math.exp(-(1-w)*p);f=g+v/(1-w)*(1-b),h=Math.abs(u.lastPosition-f)<=y,m=v*b}else{m=u.lastVelocity==null?v:u.lastVelocity;const w=s.restVelocity||y/10,b=s.clamp?0:s.bounce,k=!H.und(b),A=g==d?u.v0>0:g<d;let P,B=!1;const C=1,E=Math.ceil(t/C);for(let R=0;R<E&&(P=Math.abs(m)>w,!(!P&&(h=Math.abs(d-f)<=y,h)));++R){k&&(B=f==d||f>d==A,B&&(m=-m*b,f=d));const O=-s.tension*1e-6*(f-d),N=-s.friction*.001*m,T=(O+N)/s.mass;m=m+T*C,f=f+m*C}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=g+s.easing(w)*(d-g),m=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=m,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const l=Ii(this),a=l.getValue();if(e){const u=dn(i.to);(a!==u||n)&&!s.decay?(l.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(a),this._stop()}else n&&this._onChange(a)}set(t){return ce.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Kr(this)){const{to:t,config:e}=this.animation;ce.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return H.und(t)?(n=this.queue||[],this.queue=[]):n=[H.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>Fv(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Gu(this._state,t&&this._lastCallId),ce.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=H.obj(n)?n[e]:n,(n==null||D0(n))&&(n=void 0),i=H.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return xm(this)||(t.reverse&&([n,i]=[i,n]),i=dn(i),H.und(i)?Ii(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,Xf(t,(o,l)=>/^on/.test(l)?tP(o,n):o)),Dx(this,t,"onProps"),Oa(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return sP(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Ra(this)||(Ox(this,!0),Ja(s.pauseQueue),Oa(this,"onPause",gi(this,Ma(this,this.animation.to)),this))},resume:()=>{Ra(this)&&(Ox(this,!1),Kr(this)&&this._resume(),Ja(s.resumeQueue),Oa(this,"onResume",gi(this,Ma(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const l=uP(t);if(l)return this._update(l,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Al(this));const i=!H.und(t.to),r=!H.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Al(this));const{key:s,defaultProps:o,animation:l}=this,{to:a,from:u}=l;let{to:c=a,from:d=u}=t;r&&!i&&(!e.default||H.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!cr(d,u);h&&(l.from=d),d=dn(d);const f=!cr(c,a);f&&this._focus(c);const p=D0(e.to),{config:g}=l,{decay:v,velocity:m}=g;(i||r)&&(g.velocity=0),e.config&&!p&&c8(g,hn(e.config,s),e.config!==o.config?hn(o.config,s):void 0);let y=Ii(this);if(!y||H.und(c))return n(gi(this,!0));const w=H.und(e.reset)?r&&!e.default:!H.und(d)&&cu(e.reset,s),b=w?d:this.get(),k=Wu(c),A=H.num(k)||H.arr(k)||Hf(k),P=!p&&(!A||cu(o.immediate||e.immediate,s));if(f){const R=T0(c);if(R!==y.constructor)if(P)y=this._set(k);else throw Error(`Cannot animate between ${y.constructor.name} and ${R.name}, as the "to" prop suggests`)}const B=y.constructor;let C=Yn(c),E=!1;if(!C){const R=w||!xm(this)&&h;(f||R)&&(E=cr(Wu(b),k),C=!E),(!cr(l.immediate,P)&&!P||!cr(g.decay,v)||!cr(g.velocity,m))&&(C=!0)}if(E&&Kr(this)&&(l.changed&&!w?C=!0:C||this._stop(a)),!p&&((C||Yn(a))&&(l.values=y.getPayload(),l.toValues=Yn(c)?null:B==Hu?[1]:en(k)),l.immediate!=P&&(l.immediate=P,!P&&!w&&this._set(a)),C)){const{onRest:R}=l;ue(m8,N=>Dx(this,e,N));const O=gi(this,Ma(this,a));Ja(this._pendingCalls,O),this._pendingCalls.add(n),l.changed&&ce.batchedUpdates(()=>{var N;l.changed=!w,R==null||R(O,this),w?hn(o.onRest,O):(N=l.onStart)==null||N.call(l,O,this)})}w&&this._set(b),p?n(lP(e.to,e,this._state,this)):C?this._start():Kr(this)&&!f?this._pendingCalls.add(n):n(oP(b))}_focus(t){const e=this.animation;t!==e.to&&(bx(this)&&this._detach(),e.to=t,bx(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Yn(e)&&(ua(e,this),B0(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Yn(t)&&Uu(t,this)}_set(t,e=!0){const n=dn(t);if(!H.und(n)){const i=Ii(this);if(!i||!cr(n,i.getValue())){const r=T0(n);!i||i.constructor!=r?_v(this,r.create(n)):i.setValue(n),i&&ce.batchedUpdates(()=>{this._onChange(n,e)})}}return Ii(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Oa(this,"onStart",gi(this,Ma(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),hn(this.animation.onChange,t,this)),hn(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ii(this).reset(dn(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Kr(this)||(Mx(this,!0),Ra(this)||this._resume())}_resume(){Ei.skipAnimation?this.finish():jf.start(this)}_stop(t,e){if(Kr(this)){Mx(this,!1);const n=this.animation;ue(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),ju(this,{type:"idle",parent:this});const i=e?Al(this.get()):gi(this.get(),Ma(this,t??n.to));Ja(this._pendingCalls,i),n.changed&&(n.changed=!1,Oa(this,"onRest",i,this))}}};function Ma(t,e){const n=Wu(e),i=Wu(t.get());return cr(i,n)}function uP(t,e=t.loop,n=t.to){const i=hn(e);if(i){const r=i!==!0&&$v(i),s=(r||t).reverse,o=!r||r.reset;return Xu({...t,loop:e,default:!1,pause:void 0,to:!s||D0(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Xu(t){const{to:e,from:n}=t=$v(t),i=new Set;return H.obj(e)&&Tx(e,i),H.obj(n)&&Tx(n,i),t.keys=i.size?Array.from(i):null,t}function p8(t){const e=Xu(t);return H.und(e.default)&&(e.default=Xf(e)),e}function Tx(t,e){er(t,(n,i)=>n!=null&&e.add(i))}var m8=["onStart","onRest","onChange","onPause","onResume"];function Dx(t,e,n){t.animation[n]=e[n]!==nP(e,n)?tP(e[n],t.key):void 0}function Oa(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var g8=["onStart","onChange","onRest"],y8=1,cP=class{constructor(t,e){this.id=y8++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];H.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Xu(t)),this}start(t){let{queue:e}=this;return t?e=en(t).map(Xu):this.queue=[],this._flush?this._flush(this,e):(mP(this,e),$0(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;ue(en(e),i=>n[i].stop(!!t))}else Gu(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(H.und(t))this.start({pause:!0});else{const e=this.springs;ue(en(t),n=>e[n].pause())}return this}resume(t){if(H.und(t))this.start({pause:!1});else{const e=this.springs;ue(en(t),n=>e[n].resume())}return this}each(t){er(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,au(t,([l,a])=>{a.value=this.get(),l(a,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&au(e,([l,a])=>{a.value=o,l(a,this,this._item)}),s&&(this._started=!1,au(n,([l,a])=>{a.value=o,l(a,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;ce.onFrame(this._onFrame)}};function $0(t,e){return Promise.all(e.map(n=>dP(t,n))).then(n=>Fv(t,n))}async function dP(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:l,onResolve:a}=e,u=H.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const c=H.arr(r)||H.fun(r)?r:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):ue(g8,g=>{const v=e[g];if(H.fun(v)){const m=t._events[g];e[g]=({finished:y,cancelled:w})=>{const b=m.get(v);b?(y||(b.finished=!1),w&&(b.cancelled=!0)):m.set(v,{value:null,finished:y||!1,cancelled:w||!1})},u&&(u[g]=e[g])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,Ja(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),f=e.cancel===!0||nP(e,"cancel")===!0;(c||f&&d.asyncId)&&h.push(sP(++t._lastAsyncId,{props:e,state:d,actions:{pause:R0,resume:R0,start(g,v){f?(Gu(d,t._lastAsyncId),v(Al(t))):(g.onRest=l,v(lP(c,g,d,t)))}}})),d.paused&&await new Promise(g=>{d.resumeQueue.add(g)});const p=Fv(t,await Promise.all(h));if(o&&p.finished&&!(n&&p.noop)){const g=uP(e,o,r);if(g)return mP(t,[g]),dP(t,g,!0)}return a&&ce.batchedUpdates(()=>a(p,t,t.item)),p}function F0(t,e){const n={...t.springs};return e&&ue(en(e),i=>{H.und(i.keys)&&(i=Xu(i)),H.obj(i.to)||(i={...i,to:void 0}),pP(n,i,r=>fP(r))}),hP(t,n),n}function hP(t,e){er(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,ua(n,t))})}function fP(t,e){const n=new f8;return n.key=t,e&&ua(n,e),n}function pP(t,e,n){e.keys&&ue(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function mP(t,e){ue(e,n=>{pP(t.springs,n,i=>fP(i,t))})}var wc=({children:t,...e})=>{const n=S.useContext(zh),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=YB(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=zh;return S.createElement(s,{value:e},t)},zh=v8(wc,{});wc.Provider=zh.Provider;wc.Consumer=zh.Consumer;function v8(t,e){return Object.assign(t,S.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Ce=()=>{const t=[],e=function(i){XB();const r=[];return ue(t,(s,o)=>{if(H.und(i))r.push(s.start());else{const l=n(i,s,o);l&&r.push(s.start(l))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return ue(t,i=>i.pause(...arguments)),this},e.resume=function(){return ue(t,i=>i.resume(...arguments)),this},e.set=function(i){ue(t,(r,s)=>{const o=H.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return ue(t,(s,o)=>{if(H.und(i))r.push(s.start());else{const l=this._getProps(i,s,o);l&&r.push(s.start(l))}}),r},e.stop=function(){return ue(t,i=>i.stop(...arguments)),this},e.update=function(i){return ue(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return H.fun(i)?i(s,r):i};return e._getProps=n,e};function w8(t,e,n){const i=H.fun(e)&&e;i&&!n&&(n=[]);const r=S.useMemo(()=>i||arguments.length==3?Ce():void 0,[]),s=S.useRef(0),o=Bv(),l=S.useMemo(()=>({ctrls:[],queue:[],flush(m,y){const w=F0(m,y);return s.current>0&&!l.queue.length&&!Object.keys(w).some(k=>!m.springs[k])?$0(m,y):new Promise(k=>{hP(m,w),l.queue.push(()=>{k($0(m,y))}),o()})}}),[]),a=S.useRef([...l.ctrls]),u=[],c=O0(t)||0;S.useMemo(()=>{ue(a.current.slice(t,c),m=>{N0(m,r),m.stop(!0)}),a.current.length=t,d(c,t)},[t]),S.useMemo(()=>{d(0,Math.min(c,t))},n);function d(m,y){for(let w=m;w<y;w++){const b=a.current[w]||(a.current[w]=new cP(null,l.flush)),k=i?i(w,b):e[w];k&&(u[w]=p8(k))}}const h=a.current.map((m,y)=>F0(m,u[y])),f=S.useContext(wc),p=O0(f),g=f!==p&&iP(f);ho(()=>{s.current++,l.ctrls=a.current;const{queue:m}=l;m.length&&(l.queue=[],ue(m,y=>y())),ue(a.current,(y,w)=>{r==null||r.add(y),g&&y.start({default:f});const b=u[w];b&&(rP(y,b.ref),y.ref?y.queue.push(b):y.start(b))})}),Iv(()=>()=>{ue(l.ctrls,m=>m.stop(!0))});const v=h.map(m=>({...m}));return r?[v,r]:v}function Qt(t,e){const n=H.fun(t),[[i],r]=w8(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[i,r]:i}function b8(t,e,n){const i=H.fun(e)&&e,{reset:r,sort:s,trail:o=0,expires:l=!0,exitBeforeEnter:a=!1,onDestroyed:u,ref:c,config:d}=i?i():e,h=S.useMemo(()=>i||arguments.length==3?Ce():void 0,[]),f=en(t),p=[],g=S.useRef(null),v=r?null:g.current;ho(()=>{g.current=p}),Iv(()=>(ue(p,T=>{h==null||h.add(T.ctrl),T.ctrl.ref=h}),()=>{ue(g.current,T=>{T.expired&&clearTimeout(T.expirationId),N0(T.ctrl,h),T.ctrl.stop(!0)})}));const m=S8(f,i?i():e,v),y=r&&g.current||[];ho(()=>ue(y,({ctrl:T,item:I,key:$})=>{N0(T,h),hn(u,I,$)}));const w=[];if(v&&ue(v,(T,I)=>{T.expired?(clearTimeout(T.expirationId),y.push(T)):(I=w[I]=m.indexOf(T.key),~I&&(p[I]=T))}),ue(f,(T,I)=>{p[I]||(p[I]={key:m[I],item:T,phase:"mount",ctrl:new cP},p[I].ctrl.item=T)}),w.length){let T=-1;const{leave:I}=i?i():e;ue(w,($,z)=>{const L=v[z];~$?(T=p.indexOf(L),p[T]={...L,item:f[$]}):I&&p.splice(++T,0,L)})}H.fun(s)&&p.sort((T,I)=>s(T.item,I.item));let b=-o;const k=Bv(),A=Xf(e),P=new Map,B=S.useRef(new Map),C=S.useRef(!1);ue(p,(T,I)=>{const $=T.key,z=T.phase,L=i?i():e;let _,j;const ee=hn(L.delay||0,$);if(z=="mount")_=L.enter,j="enter";else{const ot=m.indexOf($)<0;if(z!="leave")if(ot)_=L.leave,j="leave";else if(_=L.update)j="update";else return;else if(!ot)_=L.enter,j="enter";else return}if(_=hn(_,T.item,I),_=H.obj(_)?$v(_):{to:_},!_.config){const ot=d||A.config;_.config=hn(ot,T.item,I,j)}b+=o;const re={...A,delay:ee+b,ref:c,immediate:L.immediate,reset:!1,..._};if(j=="enter"&&H.und(re.from)){const ot=i?i():e,Qe=H.und(ot.initial)||v?ot.from:ot.initial;re.from=hn(Qe,T.item,I)}const{onResolve:me}=re;re.onResolve=ot=>{hn(me,ot);const Qe=g.current,gt=Qe.find(lr=>lr.key===$);if(gt&&!(ot.cancelled&&gt.phase!="update")&&gt.ctrl.idle){const lr=Qe.every(kn=>kn.ctrl.idle);if(gt.phase=="leave"){const kn=hn(l,gt.item);if(kn!==!1){const Xr=kn===!0?0:kn;if(gt.expired=!0,!lr&&Xr>0){Xr<=2147483647&&(gt.expirationId=setTimeout(k,Xr));return}}}lr&&Qe.some(kn=>kn.expired)&&(B.current.delete(gt),a&&(C.current=!0),k())}};const nt=F0(T.ctrl,re);j==="leave"&&a?B.current.set(T,{phase:j,springs:nt,payload:re}):P.set(T,{phase:j,springs:nt,payload:re})});const E=S.useContext(wc),R=O0(E),O=E!==R&&iP(E);ho(()=>{O&&ue(p,T=>{T.ctrl.start({default:E})})},[E]),ue(P,(T,I)=>{if(B.current.size){const $=p.findIndex(z=>z.key===I.key);p.splice($,1)}}),ho(()=>{ue(B.current.size?B.current:P,({phase:T,payload:I},$)=>{const{ctrl:z}=$;$.phase=T,h==null||h.add(z),O&&T=="enter"&&z.start({default:E}),I&&(rP(z,I.ref),(z.ref||h)&&!C.current?z.update(I):(z.start(I),C.current&&(C.current=!1)))})},r?void 0:n);const N=T=>S.createElement(S.Fragment,null,p.map((I,$)=>{const{springs:z}=P.get(I)||I.ctrl,L=T({...z},I.item,I,$);return L&&L.type?S.createElement(L.type,{...L.props,key:H.str(I.key)||H.num(I.key)?I.key:I.ctrl.id,ref:L.ref}):L}));return h?[N,h]:N}var x8=1;function S8(t,{key:e,keys:n=e},i){if(n===null){const r=new Set;return t.map(s=>{const o=i&&i.find(l=>l.item===s&&l.phase!=="leave"&&!r.has(l));return o?(r.add(o),o.key):x8++})}return H.und(n)?t:H.fun(n)?t.map(n):en(n)}var k8=class extends zv{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Fu(...e);const n=this._get(),i=T0(n);_v(this,i.create(n))}advance(t){const e=this._get(),n=this.get();cr(e,n)||(Ii(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&Nx(this._active)&&Sm(this)}_get(){const t=H.arr(this.source)?this.source.map(dn):en(dn(this.source));return this.calc(...t)}_start(){this.idle&&!Nx(this._active)&&(this.idle=!1,ue(Wf(this),t=>{t.done=!1}),Ei.skipAnimation?(ce.batchedUpdates(()=>this.advance()),Sm(this)):jf.start(this))}_attach(){let t=1;ue(en(this.source),e=>{Yn(e)&&ua(e,this),B0(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){ue(en(this.source),t=>{Yn(t)&&Uu(t,this)}),this._active.clear(),Sm(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=en(this.source).reduce((e,n)=>Math.max(e,(B0(n)?n.priority:0)+1),0))}};function C8(t){return t.idle!==!1}function Nx(t){return!t.size||Array.from(t).every(C8)}function Sm(t){t.idle||(t.idle=!0,ue(Wf(t),e=>{e.done=!0}),ju(t,{type:"idle",parent:t}))}Ei.assign({createStringInterpolator:qA,to:(t,e)=>new k8(t,e)});var gP=/^--/;function E8(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!gP.test(t)&&!(du.hasOwnProperty(t)&&du[t])?e+"px":(""+e).trim()}var Lx={};function A8(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:l,...a}=e,u=Object.values(a),c=Object.keys(a).map(d=>n||t.hasAttribute(d)?d:Lx[d]||(Lx[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in i)if(i.hasOwnProperty(d)){const h=E8(d,i[d]);gP.test(d)?t.style.setProperty(d,h):t.style[d]=h}c.forEach((d,h)=>{t.setAttribute(d,u[h])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),l!==void 0&&t.setAttribute("viewBox",l)}var du={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P8=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),R8=["Webkit","Ms","Moz","O"];du=Object.keys(du).reduce((t,e)=>(R8.forEach(n=>t[P8(n,e)]=t[e]),t),du);var M8=/^(matrix|translate|scale|rotate|skew)/,O8=/^(translate)/,T8=/^(rotate|skew)/,km=(t,e)=>H.num(t)&&t!==0?t+e:t,Jd=(t,e)=>H.arr(t)?t.every(n=>Jd(n,e)):H.num(t)?t===e:parseFloat(t)===e,D8=class extends Gf{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(l=>km(l,"px")).join(",")})`,Jd(o,0)])),er(i,(o,l)=>{if(l==="transform")r.push([o||""]),s.push(a=>[a,a===""]);else if(M8.test(l)){if(delete i[l],H.und(o))return;const a=O8.test(l)?"px":T8.test(l)?"deg":"";r.push(en(o)),s.push(l==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${km(h,a)})`,Jd(h,0)]:u=>[`${l}(${u.map(c=>km(c,a)).join(",")})`,Jd(u,l.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new N8(r,s)),super(i)}},N8=class extends JA{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return ue(this.inputs,(n,i)=>{const r=dn(n[0]),[s,o]=this.transforms[i](H.arr(r)?r:n.map(dn));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&ue(this.inputs,e=>ue(e,n=>Yn(n)&&ua(n,this)))}observerRemoved(t){t==0&&ue(this.inputs,e=>ue(e,n=>Yn(n)&&Uu(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),ju(this,t)}},L8=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Ei.assign({batchedUpdates:ac.unstable_batchedUpdates,createStringInterpolator:qA,colors:EB});var B8=i8(L8,{applyAnimatedValues:A8,createAnimatedStyle:t=>new D8(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),wt=B8.animated;const zt={bus:{address:Ce(),data:Ce()},cpu:{internalBus:{address:Ce(),data:Ce(),rd:Ce(),wr:Ce(),iom:Ce()},alu:{operands:Ce(),results:Ce(),cog:Ce(),operation:Ce()},decoder:{path:Ce(),progress:Ce()},AX:Ce(),BX:Ce(),CX:Ce(),DX:Ce(),SP:Ce(),IP:Ce(),IR:Ce(),ri:Ce(),id:Ce(),left:Ce(),right:Ce(),result:Ce(),FLAGS:Ce(),MAR:Ce(),MBR:Ce()}};async function Ee(t,e,n){const i=zC(zt,t);if(!i)throw new Error(`No animation ref found for key ${t}`);return await Promise.all(i.start({...e,config:{duration:Kl().executionUnit*n.duration,easing:Nv[n.easing]}}))}async function I8(t){await Ee("bus.data",{stroke:bt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Ee("cpu.MBR",{backgroundColor:bt.mantis[400]},{duration:1,easing:"easeOutQuart"}),G.set(Ur,t),await Ee("cpu.MBR",{backgroundColor:bt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function _8(t){switch(t.type){case"bus:io.selected":return;case"bus:io.error":{Ju(t.error);return}case"bus:reset":{const e={duration:1,easing:"easeInSine"};await Promise.all([Ee("bus.address",{stroke:bt.stone[700]},e),Ee("bus.data",{stroke:bt.stone[700]},e),Ee("cpu.internalBus.rd",{opacity:0},e),Ee("cpu.internalBus.wr",{opacity:0},e),Ee("cpu.internalBus.iom",{opacity:0},e)]);return}default:return t}}function $8(t){switch(t){case"IP":return"M 551 309 H 575 V 349 H 598";case"SP":return"M 551 349 H 598";case"ri":return"M 544 388 H 575 V 349 H 598";default:throw new Error(`Invalid register ${t}`)}}function F8(){const{path:t,...e}=Qt({ref:zt.cpu.internalBus.address,from:{strokeDashoffset:1,opacity:1,path:""}});return M.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[M.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598"].join(" ")}),M.jsx(wt.path,{d:t,className:"fill-none stroke-blue-500 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var jv={exports:{}},Pl=typeof Reflect=="object"?Reflect:null,Bx=Pl&&typeof Pl.apply=="function"?Pl.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},Yd;Pl&&typeof Pl.ownKeys=="function"?Yd=Pl.ownKeys:Object.getOwnPropertySymbols?Yd=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Yd=function(e){return Object.getOwnPropertyNames(e)};function z8(t){console&&console.warn&&console.warn(t)}var yP=Number.isNaN||function(e){return e!==e};function Me(){Me.init.call(this)}jv.exports=Me;jv.exports.once=H8;Me.EventEmitter=Me;Me.prototype._events=void 0;Me.prototype._eventsCount=0;Me.prototype._maxListeners=void 0;var Ix=10;function Jf(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Me,"defaultMaxListeners",{enumerable:!0,get:function(){return Ix},set:function(t){if(typeof t!="number"||t<0||yP(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Ix=t}});Me.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Me.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||yP(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function vP(t){return t._maxListeners===void 0?Me.defaultMaxListeners:t._maxListeners}Me.prototype.getMaxListeners=function(){return vP(this)};Me.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var a=s[e];if(a===void 0)return!1;if(typeof a=="function")Bx(a,this,n);else for(var u=a.length,c=kP(a,u),i=0;i<u;++i)Bx(c[i],this,n);return!0};function wP(t,e,n,i){var r,s,o;if(Jf(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=vP(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,z8(l)}return t}Me.prototype.addListener=function(e,n){return wP(this,e,n,!1)};Me.prototype.on=Me.prototype.addListener;Me.prototype.prependListener=function(e,n){return wP(this,e,n,!0)};function j8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bP(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=j8.bind(i);return r.listener=n,i.wrapFn=r,r}Me.prototype.once=function(e,n){return Jf(n),this.on(e,bP(this,e,n)),this};Me.prototype.prependOnceListener=function(e,n){return Jf(n),this.prependListener(e,bP(this,e,n)),this};Me.prototype.removeListener=function(e,n){var i,r,s,o,l;if(Jf(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){l=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():U8(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,l||n)}return this};Me.prototype.off=Me.prototype.removeListener;Me.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function xP(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?V8(r):kP(r,r.length)}Me.prototype.listeners=function(e){return xP(this,e,!0)};Me.prototype.rawListeners=function(e){return xP(this,e,!1)};Me.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):SP.call(t,e)};Me.prototype.listenerCount=SP;function SP(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Me.prototype.eventNames=function(){return this._eventsCount>0?Yd(this._events):[]};function kP(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function U8(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function V8(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function H8(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}CP(t,e,s,{once:!0}),e!=="error"&&W8(t,r,{once:!0})})}function W8(t,e,n){typeof t.on=="function"&&CP(t,"error",e,n)}function CP(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var G8=jv.exports;function tr(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(tr.prototype[Symbol.iterator]=function(){return this});tr.of=function(){var t=arguments,e=t.length,n=0;return new tr(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};tr.empty=function(){var t=new tr(function(){return{done:!0}});return t};tr.fromSequence=function(t){var e=0,n=t.length;return new tr(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};tr.is=function(t){return t instanceof tr?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Yf=tr;const oi=nc(Yf);var Kf={};Kf.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Kf.SYMBOL_SUPPORT=typeof Symbol<"u";var X8=Yf,EP=Kf,J8=EP.ARRAY_BUFFER_SUPPORT,Y8=EP.SYMBOL_SUPPORT;function K8(t){return typeof t=="string"||Array.isArray(t)||J8&&ArrayBuffer.isView(t)?X8.fromSequence(t):typeof t!="object"||t===null?null:Y8&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var AP=function(e){var n=K8(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},q8=AP,Q8=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,l=q8(e);;){if(o===i)return r;if(s=l.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const PP=nc(Q8);var Z8=Yf,eI=AP,tI=function(){var e=arguments,n=null,i=-1;return new Z8(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=eI(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Tr=nc(tI);function nI(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let ft=nI;typeof Object.assign=="function"&&(ft=Object.assign);function ii(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Ot(t){return typeof t=="object"&&t!==null}function RP(t){let e;for(e in t)return!1;return!0}function jn(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function ui(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function _x(t){return!(!Ot(t)||t.attributes&&!Array.isArray(t.attributes))}function iI(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class Uv extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class q extends Uv{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,q.prototype.constructor)}}class X extends Uv{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,X.prototype.constructor)}}class le extends Uv{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,le.prototype.constructor)}}function MP(t,e){this.key=t,this.attributes=e,this.clear()}MP.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function OP(t,e){this.key=t,this.attributes=e,this.clear()}OP.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function TP(t,e){this.key=t,this.attributes=e,this.clear()}TP.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function ca(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}ca.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};ca.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};ca.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};ca.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const DP=0,NP=1,rI=2,LP=3;function Gr(t,e,n,i,r,s,o){let l,a,u,c;if(i=""+i,n===DP){if(l=t._nodes.get(i),!l)throw new X(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===LP){if(r=""+r,a=t._edges.get(r),!a)throw new X(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=a.source.key,h=a.target.key;if(i===d)l=a.target;else if(i===h)l=a.source;else throw new X(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(a=t._edges.get(i),!a)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===NP?l=a.source:l=a.target,u=r,c=s}return[l,u,c]}function sI(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Gr(this,e,n,i,r,s);return o.attributes[l]}}function oI(t,e,n){t.prototype[e]=function(i,r){const[s]=Gr(this,e,n,i,r);return s.attributes}}function lI(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Gr(this,e,n,i,r,s);return o.attributes.hasOwnProperty(l)}}function aI(t,e,n){t.prototype[e]=function(i,r,s,o){const[l,a,u]=Gr(this,e,n,i,r,s,o);return l.attributes[a]=u,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:a}),this}}function uI(t,e,n){t.prototype[e]=function(i,r,s,o){const[l,a,u]=Gr(this,e,n,i,r,s,o);if(typeof u!="function")throw new q(`Graph.${e}: updater should be a function.`);const c=l.attributes,d=u(c[a]);return c[a]=d,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:a}),this}}function cI(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Gr(this,e,n,i,r,s);return delete o.attributes[l],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:l}),this}}function dI(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Gr(this,e,n,i,r,s);if(!Ot(l))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=l,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function hI(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Gr(this,e,n,i,r,s);if(!Ot(l))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return ft(o.attributes,l),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:l}),this}}function fI(t,e,n){t.prototype[e]=function(i,r,s){const[o,l]=Gr(this,e,n,i,r,s);if(typeof l!="function")throw new q(`Graph.${e}: provided updater is not a function.`);return o.attributes=l(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const pI=[{name:t=>`get${t}Attribute`,attacher:sI},{name:t=>`get${t}Attributes`,attacher:oI},{name:t=>`has${t}Attribute`,attacher:lI},{name:t=>`set${t}Attribute`,attacher:aI},{name:t=>`update${t}Attribute`,attacher:uI},{name:t=>`remove${t}Attribute`,attacher:cI},{name:t=>`replace${t}Attributes`,attacher:dI},{name:t=>`merge${t}Attributes`,attacher:hI},{name:t=>`update${t}Attributes`,attacher:fI}];function mI(t){pI.forEach(function({name:e,attacher:n}){n(t,e("Node"),DP),n(t,e("Source"),NP),n(t,e("Target"),rI),n(t,e("Opposite"),LP)})}function gI(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function yI(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=ii(this,s,o,n),!r)throw new X(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function vI(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function wI(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,a=""+r;if(r=arguments[2],s=arguments[3],o=ii(this,l,a,n),!o)throw new X(`Graph.${e}: could not find an edge for the given path ("${l}" - "${a}").`)}else{if(n!=="mixed")throw new le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function bI(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,a=""+r;if(r=arguments[2],s=arguments[3],o=ii(this,l,a,n),!o)throw new X(`Graph.${e}: could not find an edge for the given path ("${l}" - "${a}").`)}else{if(n!=="mixed")throw new le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new q(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function xI(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function SI(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Ot(r))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function kI(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Ot(r))throw new q(`Graph.${e}: provided attributes are not a plain object.`);return ft(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function CI(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,l=""+r;if(r=arguments[2],s=ii(this,o,l,n),!s)throw new X(`Graph.${e}: could not find an edge for the given path ("${o}" - "${l}").`)}else{if(n!=="mixed")throw new le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new X(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new q(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const EI=[{name:t=>`get${t}Attribute`,attacher:gI},{name:t=>`get${t}Attributes`,attacher:yI},{name:t=>`has${t}Attribute`,attacher:vI},{name:t=>`set${t}Attribute`,attacher:wI},{name:t=>`update${t}Attribute`,attacher:bI},{name:t=>`remove${t}Attribute`,attacher:xI},{name:t=>`replace${t}Attributes`,attacher:SI},{name:t=>`merge${t}Attributes`,attacher:kI},{name:t=>`update${t}Attributes`,attacher:CI}];function AI(t){EI.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const PI=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function RI(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function MI(t,e,n,i){let r,s,o,l=!1;for(const a in e)if(a!==i){r=e[a];do{if(s=r.source,o=r.target,l=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&l)return r.key;r=r.next}while(r!==void 0)}}function Cm(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new oi(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const l=n[s++];if(l===e){r=void 0;continue}r=t[l]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function OI(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function TI(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function Em(t,e){let n=t[e];return n.next!==void 0?new oi(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):oi.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function DI(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):PP(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,l,a;for(;l=s.next(),l.done!==!0;)a=l.value,a.undirected===r&&(i[o++]=a.key);return i}function BP(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,l,a=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(l=o.value,r&&l.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=l;if(a=i(c,d,h.key,f.key,h.attributes,f.attributes,l.undirected),t&&a)return c}}function NI(t,e){if(t.size===0)return oi.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new oi(function(){let o,l;for(;;){if(o=r.next(),o.done)return o;if(l=o.value,!(n&&l.undirected!==i))break}return{value:{edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected},done:!1}})}function Vv(t,e,n,i,r,s){const o=e?MI:RI;let l;if(n!=="undirected"&&(i!=="out"&&(l=o(t,r.in,s),t&&l)||i!=="in"&&(l=o(t,r.out,s,i?void 0:r.key),t&&l))||n!=="directed"&&(l=o(t,r.undirected,s),t&&l))return l}function LI(t,e,n,i){const r=[];return Vv(!1,t,e,n,i,function(s){r.push(s)}),r}function BI(t,e,n){let i=oi.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Tr(i,Cm(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Tr(i,Cm(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Tr(i,Cm(n.undirected))),i}function Hv(t,e,n,i,r,s,o){const l=n?TI:OI;let a;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(a=l(t,r.in,s,o),t&&a)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(a=l(t,r.out,s,o),t&&a))||e!=="directed"&&typeof r.undirected<"u"&&(a=l(t,r.undirected,s,o),t&&a))return a}function II(t,e,n,i,r){const s=[];return Hv(!1,t,e,n,i,r,function(o){s.push(o)}),s}function _I(t,e,n,i){let r=oi.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Tr(r,Em(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Tr(r,Em(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Tr(r,Em(n.undirected,i))),r}function $I(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return DI(this,i);if(arguments.length===1){s=""+s;const l=this._nodes.get(s);if(typeof l>"u")throw new X(`Graph.${n}: could not find the "${s}" node in the graph.`);return LI(this.multi,i==="mixed"?this.type:i,r,l)}if(arguments.length===2){s=""+s,o=""+o;const l=this._nodes.get(s);if(!l)throw new X(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new X(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return II(i,this.multi,r,l,o)}throw new q(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function FI(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,BP(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new X(`Graph.${s}: could not find the "${u}" node in the graph.`);return Vv(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new X(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new X(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return Hv(!1,i,this.multi,r,h,c,d)}throw new q(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,g,v,m,y,w,b)=>{d[f++]=c(p,g,v,m,y,w,b)})}else d=[],u.push((h,f,p,g,v,m,y)=>{d.push(c(h,f,p,g,v,m,y))});return this[s].apply(this,u),d};const l="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,g,v,m,y)=>{c(h,f,p,g,v,m,y)&&d.push(h)}),this[s].apply(this,u),d};const a="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new q(`Graph.${a}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new q(`Graph.${a}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,g,v,m,y,w)=>{h=c(h,f,p,g,v,m,y,w)}),this[s].apply(this,u),h}}function zI(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(a,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=a,BP(!0,this,i,c);if(arguments.length===2){a=""+a,c=u;const d=this._nodes.get(a);if(typeof d>"u")throw new X(`Graph.${s}: could not find the "${a}" node in the graph.`);return Vv(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){a=""+a,u=""+u;const d=this._nodes.get(a);if(!d)throw new X(`Graph.${s}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(u))throw new X(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return Hv(!0,i,this.multi,r,d,u,c)}throw new q(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const a=Array.prototype.slice.call(arguments),u=a.pop();return a.push((d,h,f,p,g,v,m)=>u(d,h,f,p,g,v,m)),!!this[s].apply(this,a)};const l="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[l]=function(){const a=Array.prototype.slice.call(arguments),u=a.pop();return a.push((d,h,f,p,g,v,m)=>!u(d,h,f,p,g,v,m)),!this[s].apply(this,a)}}function jI(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,l){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return oi.empty();if(!arguments.length)return NI(this,i);if(arguments.length===1){o=""+o;const a=this._nodes.get(o);if(!a)throw new X(`Graph.${s}: could not find the "${o}" node in the graph.`);return BI(i,r,a)}if(arguments.length===2){o=""+o,l=""+l;const a=this._nodes.get(o);if(!a)throw new X(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(l))throw new X(`Graph.${s}:  could not find the "${l}" target node in the graph.`);return _I(i,r,a,l)}throw new q(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function UI(t){PI.forEach(e=>{$I(t,e),FI(t,e),zI(t,e),jI(t,e)})}const VI=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function qf(){this.A=null,this.B=null}qf.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};qf.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Ta(t,e,n,i,r){for(const s in i){const o=i[s],l=o.source,a=o.target,u=l===n?a:l;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function Wv(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Ta(t,null,i,i.undirected,r);if(typeof n=="string")return Ta(t,null,i,i[n],r)}const s=new qf;let o;if(e!=="undirected"){if(n!=="out"){if(o=Ta(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Ta(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Ta(t,s,i,i.undirected,r),t&&o))return o}function HI(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return Wv(!1,t,e,n,function(r){i.push(r)}),i}function Da(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new oi(function(){let l=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const a=n[i[s++]],u=a.source,c=a.target;if(l=u===e?c:u,t&&t.has(l.key)){l=null;continue}}while(l===null);return{done:!1,value:{neighbor:l.key,attributes:l.attributes}}})}function WI(t,e,n){if(t!=="mixed"){if(t==="undirected")return Da(null,n,n.undirected);if(typeof e=="string")return Da(null,n,n[e])}let i=oi.empty();const r=new qf;return t!=="undirected"&&(e!=="out"&&(i=Tr(i,Da(r,n,n.in))),e!=="in"&&(i=Tr(i,Da(r,n,n.out)))),t!=="directed"&&(i=Tr(i,Da(r,n,n.undirected))),i}function GI(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new X(`Graph.${n}: could not find the "${s}" node in the graph.`);return HI(i==="mixed"?this.type:i,r,o)}}function XI(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new X(`Graph.${s}: could not find the "${u}" node in the graph.`);Wv(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const l="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const a="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c,d){if(arguments.length<3)throw new q(`Graph.${a}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function JI(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new X(`Graph.${o}: could not find the "${u}" node in the graph.`);return Wv(!0,i==="mixed"?this.type:i,r,d,c)};const l="some"+s;t.prototype[l]=function(u,c){return!!this[o](u,c)};const a="every"+s;t.prototype[a]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function YI(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return oi.empty();o=""+o;const l=this._nodes.get(o);if(typeof l>"u")throw new X(`Graph.${s}: could not find the "${o}" node in the graph.`);return WI(i==="mixed"?this.type:i,r,l)}}function KI(t){VI.forEach(e=>{GI(t,e),XI(t,e),JI(t,e),YI(t,e)})}function ad(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let l,a,u,c,d,h,f;for(;l=s.next(),l.done!==!0;){let p=!1;if(a=l.value,o!=="undirected"){c=a.out;for(u in c){d=c[u];do{if(h=d.target,p=!0,f=r(a.key,h.key,a.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(o!=="directed"){c=a.undirected;for(u in c)if(!(e&&a.key>u)){d=c[u];do{if(h=d.target,h.key!==u&&(h=d.source),p=!0,f=r(a.key,h.key,a.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(n&&!p&&(f=r(a.key,null,a.attributes,null,null,null,null),t&&f))return null}}function qI(t,e){const n={key:t};return RP(e.attributes)||(n.attributes=ft({},e.attributes)),n}function QI(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return RP(n.attributes)||(i.attributes=ft({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function ZI(t){if(!Ot(t))throw new q('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new q("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Ot(t.attributes)||t.attributes===null))throw new q("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function e_(t){if(!Ot(t))throw new q('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new q("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new q("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Ot(t.attributes)||t.attributes===null))throw new q("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new q("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const t_=iI(),n_=new Set(["directed","undirected","mixed"]),$x=new Set(["domain","_events","_eventsCount","_maxListeners"]),i_=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],r_={allowSelfLoops:!0,multi:!1,type:"mixed"};function s_(t,e,n){if(n&&!Ot(n))throw new q(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new le(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function Fx(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function IP(t,e,n,i,r,s,o,l){if(!i&&t.type==="undirected")throw new le(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new le(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(l&&!Ot(l))throw new q(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`);if(s=""+s,o=""+o,l=l||{},!t.allowSelfLoops&&s===o)throw new le(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const a=t._nodes.get(s),u=t._nodes.get(o);if(!a)throw new X(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new X(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:l};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new le(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof a.undirected[o]<"u":typeof a.out[o]<"u"))throw new le(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new ca(i,r,a,u,l);t._edges.set(r,d);const h=s===o;return i?(a.undirectedDegree++,u.undirectedDegree++,h&&(a.undirectedLoops++,t._undirectedSelfLoopCount++)):(a.outDegree++,u.inDegree++,h&&(a.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function o_(t,e,n,i,r,s,o,l,a){if(!i&&t.type==="undirected")throw new le(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new le(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(l){if(a){if(typeof l!="function")throw new q(`Graph.${e}: invalid updater function. Expecting a function but got "${l}"`)}else if(!Ot(l))throw new q(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`)}s=""+s,o=""+o;let u;if(a&&(u=l,l=void 0),!t.allowSelfLoops&&s===o)throw new le(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new le(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(a?!u:!l)return y;if(a){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else ft(f.attributes,l),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:l});return y}l=l||{},a&&u&&(l=u(l));const p={key:null,undirected:i,source:s,target:o,attributes:l};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new le(`Graph.${e}: the "${r}" edge already exists in the graph.`);let g=!1,v=!1;c||(c=Fx(t,s,{}),g=!0,s===o&&(d=c,v=!0)),d||(d=Fx(t,o,{}),v=!0),h=new ca(i,r,c,d,l),t._edges.set(r,h);const m=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,m&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,m&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,g,v]}function Go(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class De extends G8.EventEmitter{constructor(e){if(super(),e=ft({},r_,e),typeof e.multi!="boolean")throw new q(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!n_.has(e.type))throw new q(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new q(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?MP:e.type==="directed"?OP:TP;jn(this,"NodeDataClass",n);const i="geid_"+t_()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};jn(this,"_attributes",{}),jn(this,"_nodes",new Map),jn(this,"_edges",new Map),jn(this,"_directedSize",0),jn(this,"_undirectedSize",0),jn(this,"_directedSelfLoopCount",0),jn(this,"_undirectedSelfLoopCount",0),jn(this,"_edgeKeyGenerator",s),jn(this,"_options",e),$x.forEach(o=>jn(this,o,this[o])),ui(this,"order",()=>this._nodes.size),ui(this,"size",()=>this._edges.size),ui(this,"directedSize",()=>this._directedSize),ui(this,"undirectedSize",()=>this._undirectedSize),ui(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ui(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ui(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ui(this,"multi",this._options.multi),ui(this,"type",this._options.type),ui(this,"allowSelfLoops",this._options.allowSelfLoops),ui(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new q(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new q(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new q(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new le("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new X(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new le("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new X(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new le("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new X(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new X(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new X(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new X(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new X(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new X(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return s_(this,e,n).key}mergeNode(e,n){if(n&&!Ot(n))throw new q(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(ft(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new q(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new X(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do Go(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do Go(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do Go(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=ii(this,i,r,this.type),!n)throw new X(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new X(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Go(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new le("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new le("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=ii(this,e,n,"directed");if(!i)throw new X(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Go(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new le("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new le("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=ii(this,e,n,"undirected");if(!i)throw new X(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Go(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new q("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Ot(e))throw new q("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Ot(e))throw new q("Graph.mergeAttributes: provided attributes are not a plain object.");return ft(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new q("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new q("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!_x(n))throw new q("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new q("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!_x(n))throw new q("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,l;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,l=s.target,s.attributes=e(s.key,s.attributes,o.key,l.key,o.attributes,l.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new q("Graph.forEachAdjacencyEntry: expecting a callback.");ad(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new q("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");ad(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new q("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");ad(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new q("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");ad(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):PP(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new q("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new q("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new q("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new q("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new q("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new q("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new q("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new q("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new oi(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=qI(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=QI(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof De)return e.forEachNode((a,u)=>{n?this.mergeNode(a,u):this.addNode(a,u)}),e.forEachEdge((a,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(a,c,d,u):this.mergeDirectedEdgeWithKey(a,c,d,u):p?this.addUndirectedEdgeWithKey(a,c,d,u):this.addDirectedEdgeWithKey(a,c,d,u)}),this;if(!Ot(e))throw new q("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Ot(e.attributes))throw new q("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,l;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new q("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],ZI(o);const{key:a,attributes:u}=o;n?this.mergeNode(a,u):this.addNode(a,u)}}if(e.edges){let a=!1;if(this.type==="undirected"&&(a=!0),s=e.edges,!Array.isArray(s))throw new q("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){l=s[i],e_(l);const{source:u,target:c,attributes:d,undirected:h=a}=l;let f;"key"in l?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,l.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new De(ft({},this._options,e));return n.replaceAttributes(ft({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=ft({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new le(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new le("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new le("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,IP(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,ft({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const l=s.undirected?"--":"->";let a="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${l}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,a+=`${i[h]}. `):a+=`[${o}]: `,a+=h,n[a]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!$x.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,jn(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(De.prototype[Symbol.for("nodejs.util.inspect.custom")]=De.prototype.inspect);i_.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?IP:o_;t.generateKey?De.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:De.prototype[n]=function(r,s,o,l){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,l,e==="update")}})});mI(De);AI(De);UI(De);KI(De);class _P extends De{constructor(e){const n=ft({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new q("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new q('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Gv extends De{constructor(e){const n=ft({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new q("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new q('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class $P extends De{constructor(e){const n=ft({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new q("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class FP extends De{constructor(e){const n=ft({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new q("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new q('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class zP extends De{constructor(e){const n=ft({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new q("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new q('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function da(t){t.from=function(e,n){const i=ft({},e.options,n),r=new t(i);return r.import(e),r}}da(De);da(_P);da(Gv);da($P);da(FP);da(zP);De.Graph=De;De.DirectedGraph=_P;De.UndirectedGraph=Gv;De.MultiGraph=$P;De.MultiDirectedGraph=FP;De.MultiUndirectedGraph=zP;De.InvalidArgumentsGraphError=q;De.NotFoundGraphError=X;De.UsageGraphError=le;var l_=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},jP=Kf,a_=jP.ARRAY_BUFFER_SUPPORT,u_=jP.SYMBOL_SUPPORT,c_=function(e,n){var i,r,s,o,l;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||a_&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(u_&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;l=i.next(),l.done!==!0;)n(l.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},UP=Yf,d_=c_;function ct(){this.clear()}ct.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};ct.prototype.enqueue=function(t){return this.items.push(t),++this.size};ct.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};ct.prototype.peek=function(){if(this.size)return this.items[this.offset]};ct.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};ct.prototype.toArray=function(){return this.items.slice(this.offset)};ct.prototype.values=function(){var t=this.items,e=this.offset;return new UP(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};ct.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new UP(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(ct.prototype[Symbol.iterator]=ct.prototype.values);ct.prototype.toString=function(){return this.toArray().join(",")};ct.prototype.toJSON=function(){return this.toArray()};ct.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:ct,enumerable:!1}),t};typeof Symbol<"u"&&(ct.prototype[Symbol.for("nodejs.util.inspect.custom")]=ct.prototype.inspect);ct.from=function(t){var e=new ct;return d_(t,function(n){e.enqueue(n)}),e};ct.of=function(){return ct.from(arguments)};var h_=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},VP=l_,f_=h_;function p_(t,e,n){if(!VP(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var l=[e],a=[n],u,c,d,h,f,p,g,v,m=!1;e:for(;l.length&&a.length;)if(l.length<=a.length){for(u=l,l=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=r(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in s||(l.push(h),s[h]=c),h in o){m=!0;break e}}else for(u=a,a=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=i(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in o||(a.push(h),o[h]=c),h in s){m=!0;break e}if(!m)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function HP(t,e,n){if(!VP(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],l,a,u;o.length!==0;){var c=[];for(l=0,a=o.length;l<a;l++)u=o[l],!i.has(u)&&(i.add(u),f_(c,e[t](u)),r[u]=s);s++,o=c}return r}HP.bind(null,"outboundNeighbors");HP.bind(null,"neighbors");var m_=p_;const Z=new Gv({allowSelfLoops:!1});Z.addNode("MBR",{position:[610,250]});Z.addNode("AX",{position:[522,45]});Z.addNode("BX",{position:[522,85]});Z.addNode("CX",{position:[522,125]});Z.addNode("DX",{position:[522,165]});Z.addNode("id",{position:[522,205]});Z.addNode("IP",{position:[451,309]});Z.addNode("SP",{position:[451,349]});Z.addNode("ri",{position:[451,388]});Z.addNode("result",{position:[370,130]});Z.addNode("FLAGS",{position:[250,225]});Z.addNode("IR",{position:[205,272]});Z.addNode("left",{position:[60,85]});Z.addNode("right",{position:[60,145]});Z.addNode("AX join",{position:[492,45]});Z.addNode("BX join",{position:[492,85]});Z.addNode("CX join",{position:[492,125]});Z.addNode("DX join",{position:[492,165]});Z.addNode("id join",{position:[492,205]});Z.addNode("data mbr join",{position:[492,250]});Z.addNode("IP join",{position:[421,309]});Z.addNode("SP join",{position:[421,349]});Z.addNode("ri join",{position:[421,388]});Z.addNode("addresses mbr join",{position:[421,250]});Z.addNode("result mbr join",{position:[370,250]});Z.addNode("FLAGS mbr join",{position:[250,250]});Z.addNode("IR mbr join",{position:[205,250]});Z.addNode("left join",{position:[30,85]});Z.addNode("right join",{position:[30,145]});Z.addNode("operands mbr join",{position:[30,250]});Z.addUndirectedEdge("AX","AX join");Z.addUndirectedEdge("BX","BX join");Z.addUndirectedEdge("CX","CX join");Z.addUndirectedEdge("DX","DX join");Z.addUndirectedEdge("id","id join");Z.addUndirectedEdge("AX join","BX join");Z.addUndirectedEdge("BX join","CX join");Z.addUndirectedEdge("CX join","DX join");Z.addUndirectedEdge("DX join","id join");Z.addUndirectedEdge("id join","data mbr join");Z.addUndirectedEdge("data mbr join","MBR");Z.addUndirectedEdge("IP","IP join");Z.addUndirectedEdge("SP","SP join");Z.addUndirectedEdge("ri","ri join");Z.addUndirectedEdge("IP join","SP join");Z.addUndirectedEdge("SP join","ri join");Z.addUndirectedEdge("IP join","addresses mbr join");Z.addUndirectedEdge("addresses mbr join","data mbr join");Z.addUndirectedEdge("result","result mbr join");Z.addUndirectedEdge("result mbr join","addresses mbr join");Z.addUndirectedEdge("FLAGS","FLAGS mbr join");Z.addUndirectedEdge("FLAGS mbr join","result mbr join");Z.addUndirectedEdge("IR","IR mbr join");Z.addUndirectedEdge("IR mbr join","FLAGS mbr join");Z.addUndirectedEdge("left","left join");Z.addUndirectedEdge("right","right join");Z.addUndirectedEdge("left join","right join");Z.addUndirectedEdge("right join","operands mbr join");Z.addUndirectedEdge("operands mbr join","IR mbr join");function g_(t,e){const n=m_(Z,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const i=Z.getNodeAttribute(n[0],"position");let r=`M ${i[0]} ${i[1]}`;for(let s=1;s<n.length;s++){const[o,l]=Z.getNodeAttribute(n[s],"position");r+=` L ${o} ${l}`}return r}function y_(){const{path:t,...e}=Qt({ref:zt.cpu.internalBus.data,from:{strokeDashoffset:1,opacity:1,path:""}});return M.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[M.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 272 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),M.jsx(wt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const Am=(t,e)=>{const n=g_(t,e);return Ee("cpu.internalBus.data",{from:{strokeDashoffset:1,opacity:1,path:n},to:{strokeDashoffset:0}},{duration:5,easing:"easeInOutSine"})},Pm=()=>Ee("cpu.internalBus.data",{opacity:0},{duration:1,easing:"easeInSine"}),Xo=t=>Ee(`cpu.${t}`,{backgroundColor:bt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Jo=t=>Ee(`cpu.${t}`,{backgroundColor:bt.stone[800]},{duration:1,easing:"easeOutQuart"});async function v_(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"},n={duration:1,easing:"easeInSine"};await Ee("cpu.alu.operands",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},e),G.set(CA,t.operation),await Promise.all([Ee("cpu.alu.operation",{backgroundColor:bt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Ee("cpu.alu.cog",{rot:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Ee("cpu.alu.operation",{backgroundColor:bt.stone[800]},{duration:1,easing:"easeOutQuart"}),Ee("cpu.alu.results",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},e)]),await Promise.all([Xo("result"),Xo("FLAGS")]),G.set($e.FLAGS,t.flags),G.set($e.result,t.result),await Promise.all([Jo("result"),Jo("FLAGS")]),await Promise.all([Ee("cpu.alu.operands",{opacity:0},n),Ee("cpu.alu.results",{opacity:0},n)]);return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{G.set(us,e=>e.phase==="stopped"?e:{...e,phase:"interrupt"});return}case"cpu:cycle.start":{$f(t.instruction.position.start),G.set(us,{phase:"fetching",metadata:t.instruction});return}case"cpu:cycle.update":{G.set(us,e=>e.phase==="stopped"?e:{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase});return}case"cpu:decode":{await Ee("cpu.decoder.path",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},{duration:3,easing:"easeInOutSine"}),await Ee("cpu.decoder.progress",{from:{progress:0,opacity:1},to:{progress:1}},{duration:3,easing:"easeInOutSine"}),await Promise.all([Ee("cpu.decoder.progress",{opacity:0},{duration:1,easing:"easeInSine"}),Ee("cpu.decoder.path",{opacity:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:error":{G.set(us,{phase:"stopped",error:t.error}),Ju(t.error);return}case"cpu:halt":case"cpu:int.0":{G.set(us,{phase:"stopped"}),Ju();return}case"cpu:int.3":{WP();return}case"cpu:int.6":return;case"cpu:int.7":return;case"cpu:inta.off":return;case"cpu:inta.on":return;case"cpu:rd.on":case"cpu:wr.on":case"cpu:iom.on":{const e=t.type==="cpu:rd.on"?"rd":t.type==="cpu:wr.on"?"wr":"iom";await Ee(`cpu.internalBus.${e}`,{from:{width:0,opacity:1},to:{width:1}},{duration:30,easing:"easeInOutSine"});return}case"cpu:mar.set":{const e=$8(t.register);await Ee("cpu.internalBus.address",{from:{strokeDashoffset:1,opacity:1,path:e},to:{strokeDashoffset:0}},{duration:5,easing:"easeInOutSine"}),await Ee("cpu.MAR",{backgroundColor:bt.blue[500]},{duration:1,easing:"easeOutQuart"}),G.set(kA,G.get($e[t.register])),await Ee("bus.address",{stroke:bt.blue[500]},{duration:5,easing:"easeOutSine"}),await Promise.all([Ee("cpu.MAR",{backgroundColor:bt.stone[800]},{duration:1,easing:"easeOutQuart"}),Ee("cpu.internalBus.address",{opacity:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=no(t.register);await Am("MBR",e),await Xo(e),G.set($e[t.register],G.get(Ur)),await Promise.all([Jo(e),Pm()]);return}case"cpu:mbr.set":{const[e]=no(t.register);await Am(e,"MBR"),await Xo("MBR"),G.set(Ur,G.get($e[t.register])),await Ee("bus.data",{stroke:bt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Promise.all([Jo("MBR"),Pm()]);return}case"cpu:register.copy":{const[e]=no(t.src),[n]=no(t.dest);e!==n&&await Am(e,n),await Xo(n),G.set($e[t.dest],G.get($e[t.src])),await Promise.all([Jo(n),e!==n&&Pm()]);return}case"cpu:register.update":{const[e]=no(t.register);await Xo(e),G.set($e[t.register],t.value),await Jo(e);return}default:return t}}async function w_(t){switch(t.type){case"memory:read":{se.inRange(t.address)&&G.set(C0,se.from(t.address));return}case"memory:read.ok":{await I8(t.value);return}case"memory:write":{if(se.inRange(t.address)){const e=Number(t.address);G.set(C0,se.from(t.address)),G.set(Cv,n=>[...n.slice(0,e),t.value,...n.slice(e+1)])}return}case"memory:write.ok":return;case"memory:read.error":case"memory:write.error":{Ju(t.error);return}default:return t}}function b_(t){switch(t.type){case"clock:tick":return;default:return t}}const x_=de("");function S_(t){switch(t.type){case"console:read":{G.set(Fs,e=>e.type==="running"||e.type==="paused"?{type:"waiting-for-input",previousState:e.type}:e);return}case"console:write":{G.set(x_,lt.getComputerState().io.console);return}default:return t}}function k_(t){switch(t.type){case"f10:press":return;default:return t}}const C_={bus:"#2563eb",clock:"#65a30d",console:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",switches:"#65a30d",timer:"#2563eb"};async function kr(t){const[e,n]=t.type.split(":");console.group(`%c ${e} %c ${n}`,`background: ${C_[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof D?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof se?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof xn?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r} %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}if(console.groupEnd(),e==="bus")return await _8(t);if(e==="clock")return b_(t);if(e==="console")return S_(t);if(e==="cpu")return await v_(t);if(e==="f10")return k_(t);if(e==="handshake")return cB(t);if(e==="leds")return dB(t);if(e==="memory")return await w_(t);if(e==="pic")return hB(t);if(e==="pio")return fB(t);if(e==="printer")return pB(t);if(e==="switches")return mB(t);if(e==="timer")return gB(t);throw new Error(`Unknown event type: ${t.type}`)}function E_(t){const e=t.translate(Ff());Zy.error(e)}const lt=new g3,Fs=de({type:"stopped",reason:"halt"}),wo=()=>G.get(Fs);function Ju(t){t&&E_(t),$f(null),bv(!1),G.set(Fs,{type:"stopped",reason:t?"error":"halt"})}function WP(){G.set(Fs,{type:"paused"})}function hu(){Zy.error(xv(Ff(),"messages.assemble-error"))}function GP(t){aB(t),G.set(Cv,t.memory.map(e=>D.fromUnsigned(e,8))),G.set(RA,D.fromUnsigned(t.io.pic.IMR,8)),G.set(MA,D.fromUnsigned(t.io.pic.IRR,8)),G.set(OA,D.fromUnsigned(t.io.pic.ISR,8)),G.set(TA,t.io.pic.lines.map(e=>D.fromUnsigned(e,8))),G.set(_A,D.fromUnsigned(t.io.timer.CONT,8)),G.set($A,D.fromUnsigned(t.io.timer.COMP,8)),"handshake"in t.io&&(G.set(EA,D.fromUnsigned(t.io.handshake.DATA,8)),G.set(AA,D.fromUnsigned(t.io.handshake.STATE,8))),"leds"in t.io&&G.set(PA,D.fromUnsigned(t.io.leds,8)),"pio"in t.io&&(G.set(DA,D.fromUnsigned(t.io.pio.PA,8)),G.set(NA,D.fromUnsigned(t.io.pio.PB,8)),G.set(LA,D.fromUnsigned(t.io.pio.CA,8)),G.set(BA,D.fromUnsigned(t.io.pio.CB,8))),"printer"in t.io&&(G.set(E0,t.io.printer.buffer.map(e=>D.fromUnsigned(e,8))),G.set(A0,t.io.printer.paper)),"switches"in t.io&&G.set(IA,D.fromUnsigned(t.io.switches,8))}async function XP(...t){const e=t[0],n=wo();switch(e){case"run":case"step":{if(n.type!=="stopped"&&n.type!=="paused"){hu();break}if(n.type==="stopped"){if(!window.codemirror)break;const i=window.codemirror.state.doc.toString(),r=lv(i);if(!r.success){hu();break}bv(!0),lt.loadProgram({program:r,data:bA(),devices:SA()}),JP(),GP(lt.getComputerState());const s=r.instructions.find(o=>o.start.value===8192);s&&$f(s.position.start),e==="step"&&WP()}if(e==="step"){const i=Math.round(1e3/Kl().cpu);Rm(i)}else{G.set(Fs,{type:"running"});const i=8;Rm(i);const r=setInterval(()=>{if(wo().type!=="running"){clearInterval(r);return}Rm(i)},i)}break}case"stop":{n.type!=="stopped"?Ju():hu();break}case"f10.press":{const i=lt.devices.f10.press();let r=i.next();for(;!r.done;)kr(r.value),r=i.next();break}case"switch.toggle":{if(lt.devices.switches.connected())throw new Error("Invalid device call");const i=lt.devices.switches.toggle(t[1]);let r=i.next();for(;!r.done;)kr(r.value),r=i.next();break}case"console.handleKey":{const i=t[1];if(n.type!=="waiting-for-input")break;let r;if(i.inputType==="insertLineBreak")r=`
`;else if(i.inputType==="insertText"||i.inputType==="insertCompositionText"){if(!i.data)break;r=i.data}else break;const s=n.previousState;G.set(Fs,{type:"paused"}),kr(lt.advanceCPU(D.fromChar(r))),XP(s==="running"?"run":"step");break}case"console.clean":{const i=lt.devices.console.clear();let r=i.next();for(;!r.done;)kr(r.value),r=i.next();break}case"printer.clean":{if(lt.devices.printer.connected()){const i=lt.devices.printer.clear();let r=i.next();for(;!r.done;)kr(r.value),r=i.next()}break}}}let Ya=0,jh=0,Uh=0,Xv=0;function JP(){Ya=0,jh=1e3/Kl().cpu,Uh=1e3,Xv=1e3/Kl().printer}function zx(){return lt.devices.printer.connected()?[["cpu",jh],["clock",Uh],["printer",Xv]]:[["cpu",jh],["clock",Uh]]}function Rm(t){let e=zx().sort((n,i)=>n[1]-i[1])[0];for(;e[1]<=Ya+t;){if(e[0]==="cpu"){let n=lt.advanceCPU();for(;n.type!=="cpu:cycle.end";){if(kr(n),wo().type!=="running"&&wo().type!=="paused")return;n=lt.advanceCPU()}jh+=1e3/Kl().cpu}else if(e[0]==="clock"){const n=lt.devices.clock.tick();let i=n.next();for(;!i.done;)kr(i.value),i=n.next();Uh+=1e3}else if(e[0]==="printer"){const n=lt.devices.printer.print();let i=n.next();for(;!i.done;)kr(i.value),i=n.next();Xv+=1e3/Kl().printer}else return e[0];t-=e[1]-Ya,Ya=e[1],e=zx().sort((n,i)=>n[1]-i[1])[0]}Ya+=t}async function A_(){const t=wo();if(t.type!=="stopped"&&t.type!=="paused"){hu();return}if(t.type==="stopped"){if(!window.codemirror)return;const n=window.codemirror.state.doc.toString(),i=lv(n);if(!i.success){hu();return}bv(!0),lt.loadProgram({program:i,data:bA(),devices:SA()}),JP(),GP(lt.getComputerState());const r=i.instructions.find(s=>s.start.value===8192);r&&$f(r.position.start)}G.set(Fs,{type:"running"});let e=lt.advanceCPU();for(;;){if(await kr(e),wo().type!=="running"&&wo().type!=="paused")return;e=lt.advanceCPU()}}function Jv(){return[Qi(Fs),XP]}const P_=()=>Qi(Sv),R_=()=>Qi(kv);function Qf(){const t=P_();return(e,...n)=>xv(t,e,...n)}function jx(){const t=Qf(),[e,n]=Ua(kv),[i,r]=Jv(),s=S.useCallback(o=>{o.key==="F5"?(o.preventDefault(),o.shiftKey?r("stop"):r("run")):o.key==="F11"&&(o.preventDefault(),r("step"))},[r]);return TC("keydown",s,void 0,[r]),M.jsxs("div",{className:"flex items-center justify-center gap-4 lg:h-full lg:justify-start",children:[M.jsxs("button",{className:"flex w-min items-center gap-1 rounded-md bg-mantis-500 p-2 text-mantis-50 transition-colors hover:enabled:bg-mantis-600 hover:enabled:text-white disabled:opacity-40",disabled:i.type!=="stopped",onClick:A_,children:[M.jsx("span",{className:"icon-[lucide--play] block h-5 w-5"}),M.jsx("span",{className:"whitespace-nowrap font-semibold tracking-wide",children:t("runner.action.start")})]}),M.jsx("input",{type:"range",className:"rotate-180",min:5,max:300,step:5,value:e.executionUnit,onChange:o=>n({...e,executionUnit:o.currentTarget.valueAsNumber})})]})}var M_=Object.defineProperty,O_=(t,e,n)=>e in t?M_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mm=(t,e,n)=>(O_(t,typeof e!="symbol"?e+"":e,n),n);let T_=class{constructor(){Mm(this,"current",this.detect()),Mm(this,"handoffState","pending"),Mm(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Dr=new T_,nr=(t,e)=>{Dr.isServer?S.useEffect(t,e):S.useLayoutEffect(t,e)};function ki(t){let e=S.useRef(t);return nr(()=>{e.current=t},[t]),e}function YP(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function bc(){let t=[],e={addEventListener(n,i,r,s){return n.addEventListener(i,r,s),e.add(()=>n.removeEventListener(i,r,s))},requestAnimationFrame(...n){let i=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(i))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let i=setTimeout(...n);return e.add(()=>clearTimeout(i))},microTask(...n){let i={current:!0};return YP(()=>{i.current&&n[0]()}),e.add(()=>{i.current=!1})},style(n,i,r){let s=n.style.getPropertyValue(i);return Object.assign(n.style,{[i]:r}),this.add(()=>{Object.assign(n.style,{[i]:s})})},group(n){let i=bc();return n(i),this.add(()=>i.dispose())},add(n){return t.push(n),()=>{let i=t.indexOf(n);if(i>=0)for(let r of t.splice(i,1))r()}},dispose(){for(let n of t.splice(0))n()}};return e}function KP(){let[t]=S.useState(bc);return S.useEffect(()=>()=>t.dispose(),[t]),t}let Pe=function(t){let e=ki(t);return U.useCallback((...n)=>e.current(...n),[e])};function Zf(){let[t,e]=S.useState(Dr.isHandoffComplete);return t&&Dr.isHandoffComplete===!1&&e(!1),S.useEffect(()=>{t!==!0&&e(!0)},[t]),S.useEffect(()=>Dr.handoff(),[]),t}var Ux;let Rl=(Ux=U.useId)!=null?Ux:function(){let t=Zf(),[e,n]=U.useState(t?()=>Dr.nextId():null);return nr(()=>{e===null&&n(Dr.nextId())},[e]),e!=null?""+e:void 0};function St(t,e,...n){if(t in e){let r=e[t];return typeof r=="function"?r(...n):r}let i=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,St),i}function Yv(t){return Dr.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let z0=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Ar=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Ar||{}),Vh=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(Vh||{}),D_=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(D_||{});function ep(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(z0)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Kv=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Kv||{});function qP(t,e=0){var n;return t===((n=Yv(t))==null?void 0:n.body)?!1:St(e,{0(){return t.matches(z0)},1(){let i=t;for(;i!==null;){if(i.matches(z0))return!0;i=i.parentElement}return!1}})}var N_=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(N_||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let L_=["textarea","input"].join(",");function B_(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,L_))!=null?n:!1}function I_(t,e=n=>n){return t.slice().sort((n,i)=>{let r=e(n),s=e(i);if(r===null||s===null)return 0;let o=r.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function fo(t,e,{sorted:n=!0,relativeTo:i=null,skipElements:r=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?I_(t):t:ep(t);r.length>0&&o.length>1&&(o=o.filter(f=>!r.includes(f))),i=i??s.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(i))-1;if(e&4)return Math.max(0,o.indexOf(i))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},c=0,d=o.length,h;do{if(c>=d||c+d<=0)return 0;let f=a+c;if(e&16)f=(f+d)%d;else{if(f<0)return 3;if(f>=d)return 1}h=o[f],h==null||h.focus(u),c+=l}while(h!==s.activeElement);return e&6&&B_(h)&&h.select(),2}function ud(t,e,n){let i=ki(e);S.useEffect(()=>{function r(s){i.current(s)}return document.addEventListener(t,r,n),()=>document.removeEventListener(t,r,n)},[t,n])}function QP(t,e,n){let i=ki(e);S.useEffect(()=>{function r(s){i.current(s)}return window.addEventListener(t,r,n),()=>window.removeEventListener(t,r,n)},[t,n])}function __(t,e,n=!0){let i=S.useRef(!1);S.useEffect(()=>{requestAnimationFrame(()=>{i.current=n})},[n]);function r(o,l){if(!i.current||o.defaultPrevented)return;let a=l(o);if(a===null||!a.getRootNode().contains(a)||!a.isConnected)return;let u=function c(d){return typeof d=="function"?c(d()):Array.isArray(d)||d instanceof Set?d:[d]}(t);for(let c of u){if(c===null)continue;let d=c instanceof HTMLElement?c:c.current;if(d!=null&&d.contains(a)||o.composed&&o.composedPath().includes(d))return}return!qP(a,Kv.Loose)&&a.tabIndex!==-1&&o.preventDefault(),e(o,a)}let s=S.useRef(null);ud("pointerdown",o=>{var l,a;i.current&&(s.current=((a=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:a[0])||o.target)},!0),ud("mousedown",o=>{var l,a;i.current&&(s.current=((a=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:a[0])||o.target)},!0),ud("click",o=>{s.current&&(r(o,()=>s.current),s.current=null)},!0),ud("touchend",o=>r(o,()=>o.target instanceof HTMLElement?o.target:null),!0),QP("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Vx(t){var e;if(t.type)return t.type;let n=(e=t.as)!=null?e:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function $_(t,e){let[n,i]=S.useState(()=>Vx(t));return nr(()=>{i(Vx(t))},[t.type,t.as]),nr(()=>{n||e.current&&e.current instanceof HTMLButtonElement&&!e.current.hasAttribute("type")&&i("button")},[n,e]),n}let ZP=Symbol();function eR(t,e=!0){return Object.assign(t,{[ZP]:e})}function ir(...t){let e=S.useRef(t);S.useEffect(()=>{e.current=t},[t]);let n=Pe(i=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(i):r.current=i)});return t.every(i=>i==null||(i==null?void 0:i[ZP]))?void 0:n}function j0(...t){return t.filter(Boolean).join(" ")}var Ql=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Ql||{}),Pr=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Pr||{});function or({ourProps:t,theirProps:e,slot:n,defaultTag:i,features:r,visible:s=!0,name:o}){let l=tR(e,t);if(s)return cd(l,n,i,o);let a=r??0;if(a&2){let{static:u=!1,...c}=l;if(u)return cd(c,n,i,o)}if(a&1){let{unmount:u=!0,...c}=l;return St(u?0:1,{0(){return null},1(){return cd({...c,hidden:!0,style:{display:"none"}},n,i,o)}})}return cd(l,n,i,o)}function cd(t,e={},n,i){let{as:r=n,children:s,refName:o="ref",...l}=Om(t,["unmount","static"]),a=t.ref!==void 0?{[o]:t.ref}:{},u=typeof s=="function"?s(e):s;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e));let c={};if(e){let d=!1,h=[];for(let[f,p]of Object.entries(e))typeof p=="boolean"&&(d=!0),p===!0&&h.push(f);d&&(c["data-headlessui-state"]=h.join(" "))}if(r===S.Fragment&&Object.keys(Hx(l)).length>0){if(!S.isValidElement(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`));let d=u.props,h=typeof(d==null?void 0:d.className)=="function"?(...p)=>j0(d==null?void 0:d.className(...p),l.className):j0(d==null?void 0:d.className,l.className),f=h?{className:h}:{};return S.cloneElement(u,Object.assign({},tR(u.props,Hx(Om(l,["ref"]))),c,a,F_(u.ref,a.ref),f))}return S.createElement(r,Object.assign({},Om(l,["ref"]),r!==S.Fragment&&a,r!==S.Fragment&&c),u)}function F_(...t){return{ref:t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}}function tR(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let i of t)for(let r in i)r.startsWith("on")&&typeof i[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(i[r])):e[r]=i[r];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(i=>[i,void 0])));for(let i in n)Object.assign(e,{[i](r,...s){let o=n[i];for(let l of o){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;l(r,...s)}}});return e}function Ri(t){var e;return Object.assign(S.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Hx(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function Om(t,e=[]){let n=Object.assign({},t);for(let i of e)i in n&&delete n[i];return n}function nR(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let i=(e==null?void 0:e.getAttribute("disabled"))==="";return i&&z_(n)?!1:i}function z_(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let j_="div";var Yu=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Yu||{});function U_(t,e){let{features:n=1,...i}=t,r={ref:e,"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return or({ourProps:r,theirProps:i,slot:{},defaultTag:j_,name:"Hidden"})}let Hh=Ri(U_),qv=S.createContext(null);qv.displayName="OpenClosedContext";var qt=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(qt||{});function tp(){return S.useContext(qv)}function iR({value:t,children:e}){return U.createElement(qv.Provider,{value:t},e)}var es=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(es||{}),Rr=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Rr||{});function rR(){let t=S.useRef(0);return QP("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function Qv(){let t=S.useRef(!1);return nr(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function ha(...t){return S.useMemo(()=>Yv(...t),[...t])}function V_(t,e,n,i){let r=ki(n);S.useEffect(()=>{t=t??window;function s(o){r.current(o)}return t.addEventListener(e,s,i),()=>t.removeEventListener(e,s,i)},[t,e,i])}function H_(t){let e=Pe(t),n=S.useRef(!1);S.useEffect(()=>(n.current=!1,()=>{n.current=!0,YP(()=>{n.current&&e()})}),[e])}let W_=S.createContext(!1);function G_(){return S.useContext(W_)}function X_(t){let e=G_(),n=S.useContext(sR),i=ha(t),[r,s]=S.useState(()=>{if(!e&&n!==null||Dr.isServer)return null;let o=i==null?void 0:i.getElementById("headlessui-portal-root");if(o)return o;if(i===null)return null;let l=i.createElement("div");return l.setAttribute("id","headlessui-portal-root"),i.body.appendChild(l)});return S.useEffect(()=>{r!==null&&(i!=null&&i.body.contains(r)||i==null||i.body.appendChild(r))},[r,i]),S.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),r}let J_=S.Fragment;function Y_(t,e){let n=t,i=S.useRef(null),r=ir(eR(c=>{i.current=c}),e),s=ha(i),o=X_(i),[l]=S.useState(()=>{var c;return Dr.isServer?null:(c=s==null?void 0:s.createElement("div"))!=null?c:null}),a=S.useContext(U0),u=Zf();return nr(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),nr(()=>{if(l&&a)return a.register(l)},[a,l]),H_(()=>{var c;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((c=o.parentElement)==null||c.removeChild(o)))}),u?!o||!l?null:ac.createPortal(or({ourProps:{ref:r},theirProps:n,defaultTag:J_,name:"Portal"}),l):null}let K_=S.Fragment,sR=S.createContext(null);function q_(t,e){let{target:n,...i}=t,r={ref:ir(e)};return U.createElement(sR.Provider,{value:n},or({ourProps:r,theirProps:i,defaultTag:K_,name:"Popover.Group"}))}let U0=S.createContext(null);function Q_(){let t=S.useContext(U0),e=S.useRef([]),n=Pe(s=>(e.current.push(s),t&&t.register(s),()=>i(s))),i=Pe(s=>{let o=e.current.indexOf(s);o!==-1&&e.current.splice(o,1),t&&t.unregister(s)}),r=S.useMemo(()=>({register:n,unregister:i,portals:e}),[n,i,e]);return[e,S.useMemo(()=>function({children:s}){return U.createElement(U0.Provider,{value:r},s)},[r])]}let Z_=Ri(Y_),e$=Ri(q_),Wh=Object.assign(Z_,{Group:e$});function t$({defaultContainers:t=[],portals:e}={}){let n=S.useRef(null),i=ha(n),r=Pe(()=>{var s;let o=[];for(let l of t)l!==null&&(l instanceof HTMLElement?o.push(l):"current"in l&&l.current instanceof HTMLElement&&o.push(l.current));if(e!=null&&e.current)for(let l of e.current)o.push(l);for(let l of(s=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(l.contains(n.current)||o.some(a=>l.contains(a))||o.push(l));return o});return{resolveContainers:r,contains:Pe(s=>r().some(o=>o.contains(s))),mainTreeNodeRef:n,MainTreeNode:S.useMemo(()=>function(){return U.createElement(Hh,{features:Yu.Hidden,ref:n})},[n])}}var n$=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(n$||{}),i$=(t=>(t[t.TogglePopover=0]="TogglePopover",t[t.ClosePopover=1]="ClosePopover",t[t.SetButton=2]="SetButton",t[t.SetButtonId=3]="SetButtonId",t[t.SetPanel=4]="SetPanel",t[t.SetPanelId=5]="SetPanelId",t))(i$||{});let r$={0:t=>{let e={...t,popoverState:St(t.popoverState,{0:1,1:0})};return e.popoverState===0&&(e.__demoMode=!1),e},1(t){return t.popoverState===1?t:{...t,popoverState:1}},2(t,e){return t.button===e.button?t:{...t,button:e.button}},3(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},4(t,e){return t.panel===e.panel?t:{...t,panel:e.panel}},5(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}}},Zv=S.createContext(null);Zv.displayName="PopoverContext";function np(t){let e=S.useContext(Zv);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,np),n}return e}let ew=S.createContext(null);ew.displayName="PopoverAPIContext";function tw(t){let e=S.useContext(ew);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,tw),n}return e}let nw=S.createContext(null);nw.displayName="PopoverGroupContext";function oR(){return S.useContext(nw)}let ip=S.createContext(null);ip.displayName="PopoverPanelContext";function s$(){return S.useContext(ip)}function o$(t,e){return St(e.type,r$,t,e)}let l$="div";function a$(t,e){var n;let{__demoMode:i=!1,...r}=t,s=S.useRef(null),o=ir(e,eR($=>{s.current=$})),l=S.useRef([]),a=S.useReducer(o$,{__demoMode:i,popoverState:i?0:1,buttons:l,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:S.createRef(),afterPanelSentinel:S.createRef()}),[{popoverState:u,button:c,buttonId:d,panel:h,panelId:f,beforePanelSentinel:p,afterPanelSentinel:g},v]=a,m=ha((n=s.current)!=null?n:c),y=S.useMemo(()=>{if(!c||!h)return!1;for(let re of document.querySelectorAll("body > *"))if(Number(re==null?void 0:re.contains(c))^Number(re==null?void 0:re.contains(h)))return!0;let $=ep(),z=$.indexOf(c),L=(z+$.length-1)%$.length,_=(z+1)%$.length,j=$[L],ee=$[_];return!h.contains(j)&&!h.contains(ee)},[c,h]),w=ki(d),b=ki(f),k=S.useMemo(()=>({buttonId:w,panelId:b,close:()=>v({type:1})}),[w,b,v]),A=oR(),P=A==null?void 0:A.registerPopover,B=Pe(()=>{var $;return($=A==null?void 0:A.isFocusWithinPopoverGroup())!=null?$:(m==null?void 0:m.activeElement)&&((c==null?void 0:c.contains(m.activeElement))||(h==null?void 0:h.contains(m.activeElement)))});S.useEffect(()=>P==null?void 0:P(k),[P,k]);let[C,E]=Q_(),R=t$({portals:C,defaultContainers:[c,h]});V_(m==null?void 0:m.defaultView,"focus",$=>{var z,L,_,j;$.target!==window&&$.target instanceof HTMLElement&&u===0&&(B()||c&&h&&(R.contains($.target)||(L=(z=p.current)==null?void 0:z.contains)!=null&&L.call(z,$.target)||(j=(_=g.current)==null?void 0:_.contains)!=null&&j.call(_,$.target)||v({type:1})))},!0),__(R.resolveContainers,($,z)=>{v({type:1}),qP(z,Kv.Loose)||($.preventDefault(),c==null||c.focus())},u===0);let O=Pe($=>{v({type:1});let z=(()=>$?$ instanceof HTMLElement?$:"current"in $&&$.current instanceof HTMLElement?$.current:c:c)();z==null||z.focus()}),N=S.useMemo(()=>({close:O,isPortalled:y}),[O,y]),T=S.useMemo(()=>({open:u===0,close:O}),[u,O]),I={ref:o};return U.createElement(ip.Provider,{value:null},U.createElement(Zv.Provider,{value:a},U.createElement(ew.Provider,{value:N},U.createElement(iR,{value:St(u,{0:qt.Open,1:qt.Closed})},U.createElement(E,null,or({ourProps:I,theirProps:r,slot:T,defaultTag:l$,name:"Popover"}),U.createElement(R.MainTreeNode,null))))))}let u$="button";function c$(t,e){let n=Rl(),{id:i=`headlessui-popover-button-${n}`,...r}=t,[s,o]=np("Popover.Button"),{isPortalled:l}=tw("Popover.Button"),a=S.useRef(null),u=`headlessui-focus-sentinel-${Rl()}`,c=oR(),d=c==null?void 0:c.closeOthers,h=s$()!==null;S.useEffect(()=>{if(!h)return o({type:3,buttonId:i}),()=>{o({type:3,buttonId:null})}},[h,i,o]);let[f]=S.useState(()=>Symbol()),p=ir(a,e,h?null:R=>{if(R)s.buttons.current.push(f);else{let O=s.buttons.current.indexOf(f);O!==-1&&s.buttons.current.splice(O,1)}s.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),R&&o({type:2,button:R})}),g=ir(a,e),v=ha(a),m=Pe(R=>{var O,N,T;if(h){if(s.popoverState===1)return;switch(R.key){case es.Space:case es.Enter:R.preventDefault(),(N=(O=R.target).click)==null||N.call(O),o({type:1}),(T=s.button)==null||T.focus();break}}else switch(R.key){case es.Space:case es.Enter:R.preventDefault(),R.stopPropagation(),s.popoverState===1&&(d==null||d(s.buttonId)),o({type:0});break;case es.Escape:if(s.popoverState!==0)return d==null?void 0:d(s.buttonId);if(!a.current||v!=null&&v.activeElement&&!a.current.contains(v.activeElement))return;R.preventDefault(),R.stopPropagation(),o({type:1});break}}),y=Pe(R=>{h||R.key===es.Space&&R.preventDefault()}),w=Pe(R=>{var O,N;nR(R.currentTarget)||t.disabled||(h?(o({type:1}),(O=s.button)==null||O.focus()):(R.preventDefault(),R.stopPropagation(),s.popoverState===1&&(d==null||d(s.buttonId)),o({type:0}),(N=s.button)==null||N.focus()))}),b=Pe(R=>{R.preventDefault(),R.stopPropagation()}),k=s.popoverState===0,A=S.useMemo(()=>({open:k}),[k]),P=$_(t,a),B=h?{ref:g,type:P,onKeyDown:m,onClick:w}:{ref:p,id:s.buttonId,type:P,"aria-expanded":s.popoverState===0,"aria-controls":s.panel?s.panelId:void 0,onKeyDown:m,onKeyUp:y,onClick:w,onMouseDown:b},C=rR(),E=Pe(()=>{let R=s.panel;if(!R)return;function O(){St(C.current,{[Rr.Forwards]:()=>fo(R,Ar.First),[Rr.Backwards]:()=>fo(R,Ar.Last)})===Vh.Error&&fo(ep().filter(N=>N.dataset.headlessuiFocusGuard!=="true"),St(C.current,{[Rr.Forwards]:Ar.Next,[Rr.Backwards]:Ar.Previous}),{relativeTo:s.button})}O()});return U.createElement(U.Fragment,null,or({ourProps:B,theirProps:r,slot:A,defaultTag:u$,name:"Popover.Button"}),k&&!h&&l&&U.createElement(Hh,{id:u,features:Yu.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:E}))}let d$="div",h$=Ql.RenderStrategy|Ql.Static;function f$(t,e){let n=Rl(),{id:i=`headlessui-popover-overlay-${n}`,...r}=t,[{popoverState:s},o]=np("Popover.Overlay"),l=ir(e),a=tp(),u=(()=>a!==null?(a&qt.Open)===qt.Open:s===0)(),c=Pe(h=>{if(nR(h.currentTarget))return h.preventDefault();o({type:1})}),d=S.useMemo(()=>({open:s===0}),[s]);return or({ourProps:{ref:l,id:i,"aria-hidden":!0,onClick:c},theirProps:r,slot:d,defaultTag:d$,features:h$,visible:u,name:"Popover.Overlay"})}let p$="div",m$=Ql.RenderStrategy|Ql.Static;function g$(t,e){let n=Rl(),{id:i=`headlessui-popover-panel-${n}`,focus:r=!1,...s}=t,[o,l]=np("Popover.Panel"),{close:a,isPortalled:u}=tw("Popover.Panel"),c=`headlessui-focus-sentinel-before-${Rl()}`,d=`headlessui-focus-sentinel-after-${Rl()}`,h=S.useRef(null),f=ir(h,e,P=>{l({type:4,panel:P})}),p=ha(h);nr(()=>(l({type:5,panelId:i}),()=>{l({type:5,panelId:null})}),[i,l]);let g=tp(),v=(()=>g!==null?(g&qt.Open)===qt.Open:o.popoverState===0)(),m=Pe(P=>{var B;switch(P.key){case es.Escape:if(o.popoverState!==0||!h.current||p!=null&&p.activeElement&&!h.current.contains(p.activeElement))return;P.preventDefault(),P.stopPropagation(),l({type:1}),(B=o.button)==null||B.focus();break}});S.useEffect(()=>{var P;t.static||o.popoverState===1&&((P=t.unmount)==null||P)&&l({type:4,panel:null})},[o.popoverState,t.unmount,t.static,l]),S.useEffect(()=>{if(o.__demoMode||!r||o.popoverState!==0||!h.current)return;let P=p==null?void 0:p.activeElement;h.current.contains(P)||fo(h.current,Ar.First)},[o.__demoMode,r,h,o.popoverState]);let y=S.useMemo(()=>({open:o.popoverState===0,close:a}),[o,a]),w={ref:f,id:i,onKeyDown:m,onBlur:r&&o.popoverState===0?P=>{var B,C,E,R,O;let N=P.relatedTarget;N&&h.current&&((B=h.current)!=null&&B.contains(N)||(l({type:1}),((E=(C=o.beforePanelSentinel.current)==null?void 0:C.contains)!=null&&E.call(C,N)||(O=(R=o.afterPanelSentinel.current)==null?void 0:R.contains)!=null&&O.call(R,N))&&N.focus({preventScroll:!0})))}:void 0,tabIndex:-1},b=rR(),k=Pe(()=>{let P=h.current;if(!P)return;function B(){St(b.current,{[Rr.Forwards]:()=>{var C;fo(P,Ar.First)===Vh.Error&&((C=o.afterPanelSentinel.current)==null||C.focus())},[Rr.Backwards]:()=>{var C;(C=o.button)==null||C.focus({preventScroll:!0})}})}B()}),A=Pe(()=>{let P=h.current;if(!P)return;function B(){St(b.current,{[Rr.Forwards]:()=>{var C;if(!o.button)return;let E=ep(),R=E.indexOf(o.button),O=E.slice(0,R+1),N=[...E.slice(R+1),...O];for(let T of N.slice())if(T.dataset.headlessuiFocusGuard==="true"||(C=o.panel)!=null&&C.contains(T)){let I=N.indexOf(T);I!==-1&&N.splice(I,1)}fo(N,Ar.First,{sorted:!1})},[Rr.Backwards]:()=>{var C;fo(P,Ar.Previous)===Vh.Error&&((C=o.button)==null||C.focus())}})}B()});return U.createElement(ip.Provider,{value:i},v&&u&&U.createElement(Hh,{id:c,ref:o.beforePanelSentinel,features:Yu.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:k}),or({ourProps:w,theirProps:s,slot:y,defaultTag:p$,features:m$,visible:v,name:"Popover.Panel"}),v&&u&&U.createElement(Hh,{id:d,ref:o.afterPanelSentinel,features:Yu.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:A}))}let y$="div";function v$(t,e){let n=S.useRef(null),i=ir(n,e),[r,s]=S.useState([]),o=Pe(p=>{s(g=>{let v=g.indexOf(p);if(v!==-1){let m=g.slice();return m.splice(v,1),m}return g})}),l=Pe(p=>(s(g=>[...g,p]),()=>o(p))),a=Pe(()=>{var p;let g=Yv(n);if(!g)return!1;let v=g.activeElement;return(p=n.current)!=null&&p.contains(v)?!0:r.some(m=>{var y,w;return((y=g.getElementById(m.buttonId.current))==null?void 0:y.contains(v))||((w=g.getElementById(m.panelId.current))==null?void 0:w.contains(v))})}),u=Pe(p=>{for(let g of r)g.buttonId.current!==p&&g.close()}),c=S.useMemo(()=>({registerPopover:l,unregisterPopover:o,isFocusWithinPopoverGroup:a,closeOthers:u}),[l,o,a,u]),d=S.useMemo(()=>({}),[]),h=t,f={ref:i};return U.createElement(nw.Provider,{value:c},or({ourProps:f,theirProps:h,slot:d,defaultTag:y$,name:"Popover.Group"}))}let w$=Ri(a$),b$=Ri(c$),x$=Ri(f$),S$=Ri(g$),k$=Ri(v$),iw=Object.assign(w$,{Button:b$,Overlay:x$,Panel:S$,Group:k$});function C$(t=0){let[e,n]=S.useState(t),i=Qv(),r=S.useCallback(a=>{i.current&&n(u=>u|a)},[e,i]),s=S.useCallback(a=>!!(e&a),[e]),o=S.useCallback(a=>{i.current&&n(u=>u&~a)},[n,i]),l=S.useCallback(a=>{i.current&&n(u=>u^a)},[n]);return{flags:e,addFlag:r,hasFlag:s,removeFlag:o,toggleFlag:l}}function E$(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function Tm(t,...e){t&&e.length>0&&t.classList.add(...e)}function Dm(t,...e){t&&e.length>0&&t.classList.remove(...e)}function A$(t,e){let n=bc();if(!t)return n.dispose;let{transitionDuration:i,transitionDelay:r}=getComputedStyle(t),[s,o]=[i,r].map(a=>{let[u=0]=a.split(",").filter(Boolean).map(c=>c.includes("ms")?parseFloat(c):parseFloat(c)*1e3).sort((c,d)=>d-c);return u}),l=s+o;if(l!==0){n.group(u=>{u.setTimeout(()=>{e(),u.dispose()},l),u.addEventListener(t,"transitionrun",c=>{c.target===c.currentTarget&&u.dispose()})});let a=n.addEventListener(t,"transitionend",u=>{u.target===u.currentTarget&&(e(),a())})}else e();return n.add(()=>e()),n.dispose}function P$(t,e,n,i){let r=n?"enter":"leave",s=bc(),o=i!==void 0?E$(i):()=>{};r==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let l=St(r,{enter:()=>e.enter,leave:()=>e.leave}),a=St(r,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),u=St(r,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return Dm(t,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),Tm(t,...l,...u),s.nextFrame(()=>{Dm(t,...u),Tm(t,...a),A$(t,()=>(Dm(t,...l),Tm(t,...e.entered),o()))}),s.dispose}function R$({container:t,direction:e,classes:n,onStart:i,onStop:r}){let s=Qv(),o=KP(),l=ki(e);nr(()=>{let a=bc();o.add(a.dispose);let u=t.current;if(u&&l.current!=="idle"&&s.current)return a.dispose(),i.current(l.current),a.add(P$(u,n.current,l.current==="enter",()=>{a.dispose(),r.current(l.current)})),a.dispose},[e])}function qs(t=""){return t.split(" ").filter(e=>e.trim().length>1)}let rp=S.createContext(null);rp.displayName="TransitionContext";var M$=(t=>(t.Visible="visible",t.Hidden="hidden",t))(M$||{});function O$(){let t=S.useContext(rp);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function T$(){let t=S.useContext(sp);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let sp=S.createContext(null);sp.displayName="NestingContext";function op(t){return"children"in t?op(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function lR(t,e){let n=ki(t),i=S.useRef([]),r=Qv(),s=KP(),o=Pe((f,p=Pr.Hidden)=>{let g=i.current.findIndex(({el:v})=>v===f);g!==-1&&(St(p,{[Pr.Unmount](){i.current.splice(g,1)},[Pr.Hidden](){i.current[g].state="hidden"}}),s.microTask(()=>{var v;!op(i)&&r.current&&((v=n.current)==null||v.call(n))}))}),l=Pe(f=>{let p=i.current.find(({el:g})=>g===f);return p?p.state!=="visible"&&(p.state="visible"):i.current.push({el:f,state:"visible"}),()=>o(f,Pr.Unmount)}),a=S.useRef([]),u=S.useRef(Promise.resolve()),c=S.useRef({enter:[],leave:[],idle:[]}),d=Pe((f,p,g)=>{a.current.splice(0),e&&(e.chains.current[p]=e.chains.current[p].filter(([v])=>v!==f)),e==null||e.chains.current[p].push([f,new Promise(v=>{a.current.push(v)})]),e==null||e.chains.current[p].push([f,new Promise(v=>{Promise.all(c.current[p].map(([m,y])=>y)).then(()=>v())})]),p==="enter"?u.current=u.current.then(()=>e==null?void 0:e.wait.current).then(()=>g(p)):g(p)}),h=Pe((f,p,g)=>{Promise.all(c.current[p].splice(0).map(([v,m])=>m)).then(()=>{var v;(v=a.current.shift())==null||v()}).then(()=>g(p))});return S.useMemo(()=>({children:i,register:l,unregister:o,onStart:d,onStop:h,wait:u,chains:c}),[l,o,i,d,h,c,u])}function D$(){}let N$=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Wx(t){var e;let n={};for(let i of N$)n[i]=(e=t[i])!=null?e:D$;return n}function L$(t){let e=S.useRef(Wx(t));return S.useEffect(()=>{e.current=Wx(t)},[t]),e}let B$="div",aR=Ql.RenderStrategy;function I$(t,e){let{beforeEnter:n,afterEnter:i,beforeLeave:r,afterLeave:s,enter:o,enterFrom:l,enterTo:a,entered:u,leave:c,leaveFrom:d,leaveTo:h,...f}=t,p=S.useRef(null),g=ir(p,e),v=f.unmount?Pr.Unmount:Pr.Hidden,{show:m,appear:y,initial:w}=O$(),[b,k]=S.useState(m?"visible":"hidden"),A=T$(),{register:P,unregister:B}=A,C=S.useRef(null);S.useEffect(()=>P(p),[P,p]),S.useEffect(()=>{if(v===Pr.Hidden&&p.current){if(m&&b!=="visible"){k("visible");return}return St(b,{hidden:()=>B(p),visible:()=>P(p)})}},[b,p,P,B,m,v]);let E=ki({enter:qs(o),enterFrom:qs(l),enterTo:qs(a),entered:qs(u),leave:qs(c),leaveFrom:qs(d),leaveTo:qs(h)}),R=L$({beforeEnter:n,afterEnter:i,beforeLeave:r,afterLeave:s}),O=Zf();S.useEffect(()=>{if(O&&b==="visible"&&p.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[p,b,O]);let N=w&&!y,T=(()=>!O||N||C.current===m?"idle":m?"enter":"leave")(),I=C$(0),$=Pe(ee=>St(ee,{enter:()=>{I.addFlag(qt.Opening),R.current.beforeEnter()},leave:()=>{I.addFlag(qt.Closing),R.current.beforeLeave()},idle:()=>{}})),z=Pe(ee=>St(ee,{enter:()=>{I.removeFlag(qt.Opening),R.current.afterEnter()},leave:()=>{I.removeFlag(qt.Closing),R.current.afterLeave()},idle:()=>{}})),L=lR(()=>{k("hidden"),B(p)},A);R$({container:p,classes:E,direction:T,onStart:ki(ee=>{L.onStart(p,ee,$)}),onStop:ki(ee=>{L.onStop(p,ee,z),ee==="leave"&&!op(L)&&(k("hidden"),B(p))})}),S.useEffect(()=>{N&&(v===Pr.Hidden?C.current=null:C.current=m)},[m,N,b]);let _=f,j={ref:g};return y&&m&&w&&(_={..._,className:j0(f.className,...E.current.enter,...E.current.enterFrom)}),U.createElement(sp.Provider,{value:L},U.createElement(iR,{value:St(b,{visible:qt.Open,hidden:qt.Closed})|I.flags},or({ourProps:j,theirProps:_,defaultTag:B$,features:aR,visible:b==="visible",name:"Transition.Child"})))}function _$(t,e){let{show:n,appear:i=!1,unmount:r,...s}=t,o=S.useRef(null),l=ir(o,e);Zf();let a=tp();if(n===void 0&&a!==null&&(n=(a&qt.Open)===qt.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,c]=S.useState(n?"visible":"hidden"),d=lR(()=>{c("hidden")}),[h,f]=S.useState(!0),p=S.useRef([n]);nr(()=>{h!==!1&&p.current[p.current.length-1]!==n&&(p.current.push(n),f(!1))},[p,n]);let g=S.useMemo(()=>({show:n,appear:i,initial:h}),[n,i,h]);S.useEffect(()=>{if(n)c("visible");else if(!op(d))c("hidden");else{let w=o.current;if(!w)return;let b=w.getBoundingClientRect();b.x===0&&b.y===0&&b.width===0&&b.height===0&&c("hidden")}},[n,d]);let v={unmount:r},m=Pe(()=>{var w;h&&f(!1),(w=t.beforeEnter)==null||w.call(t)}),y=Pe(()=>{var w;h&&f(!1),(w=t.beforeLeave)==null||w.call(t)});return U.createElement(sp.Provider,{value:d},U.createElement(rp.Provider,{value:g},or({ourProps:{...v,as:S.Fragment,children:U.createElement(uR,{ref:l,...v,...s,beforeEnter:m,beforeLeave:y})},theirProps:{},defaultTag:S.Fragment,features:aR,visible:u==="visible",name:"Transition"})))}function $$(t,e){let n=S.useContext(rp)!==null,i=tp()!==null;return U.createElement(U.Fragment,null,!n&&i?U.createElement(V0,{ref:e,...t}):U.createElement(uR,{ref:e,...t}))}let V0=Ri(_$),uR=Ri(I$),F$=Ri($$),Gx=Object.assign(V0,{Child:F$,Root:V0});function Gi(t){return t.split("-")[1]}function rw(t){return t==="y"?"height":"width"}function Nr(t){return t.split("-")[0]}function xc(t){return["top","bottom"].includes(Nr(t))?"x":"y"}function Xx(t,e,n){let{reference:i,floating:r}=t;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,l=xc(e),a=rw(l),u=i[a]/2-r[a]/2,c=l==="x";let d;switch(Nr(e)){case"top":d={x:s,y:i.y-r.height};break;case"bottom":d={x:s,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:o};break;case"left":d={x:i.x-r.width,y:o};break;default:d={x:i.x,y:i.y}}switch(Gi(e)){case"start":d[l]-=u*(n&&c?-1:1);break;case"end":d[l]+=u*(n&&c?-1:1)}return d}const z$=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=Xx(u,i,a),h=i,f={},p=0;for(let g=0;g<l.length;g++){const{name:v,fn:m}=l[g],{x:y,y:w,data:b,reset:k}=await m({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=w??d,f={...f,[v]:{...f[v],...b}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):k.rects),{x:c,y:d}=Xx(u,h,a)),g=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};function $o(t,e){return typeof t=="function"?t(e):t}function cR(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function Gh(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Ku(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:l,strategy:a}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=$o(e,t),p=cR(f),g=l[h?d==="floating"?"reference":"floating":d],v=Gh(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:c,strategy:a})),m=d==="floating"?{...o.floating,x:i,y:r}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),w=await(s.isElement==null?void 0:s.isElement(y))&&await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1},b=Gh(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m,offsetParent:y,strategy:a}):m);return{top:(v.top-b.top+p.top)/w.y,bottom:(b.bottom-v.bottom+p.bottom)/w.y,left:(v.left-b.left+p.left)/w.x,right:(b.right-v.right+p.right)/w.x}}const H0=Math.min,j$=Math.max;function W0(t,e,n){return j$(t,H0(e,n))}const Jx=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:l}=e,{element:a,padding:u=0}=$o(t,e)||{};if(a==null)return{};const c=cR(u),d={x:n,y:i},h=xc(r),f=rw(h),p=await o.getDimensions(a),g=h==="y",v=g?"top":"left",m=g?"bottom":"right",y=g?"clientHeight":"clientWidth",w=s.reference[f]+s.reference[h]-d[h]-s.floating[f],b=d[h]-s.reference[h],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a));let A=k?k[y]:0;A&&await(o.isElement==null?void 0:o.isElement(k))||(A=l.floating[y]||s.floating[f]);const P=w/2-b/2,B=A/2-p[f]/2-1,C=H0(c[v],B),E=H0(c[m],B),R=C,O=A-p[f]-E,N=A/2-p[f]/2+P,T=W0(R,N,O),I=Gi(r)!=null&&N!=T&&s.reference[f]/2-(N<R?C:E)-p[f]/2<0?N<R?R-N:O-N:0;return{[h]:d[h]-I,data:{[h]:T,centerOffset:N-T+I}}}}),dR=["top","right","bottom","left"],Yx=dR.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),U$={left:"right",right:"left",bottom:"top",top:"bottom"};function Xh(t){return t.replace(/left|right|bottom|top/g,e=>U$[e])}function hR(t,e,n){n===void 0&&(n=!1);const i=Gi(t),r=xc(t),s=rw(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Xh(o)),{main:o,cross:Xh(o)}}const V$={start:"end",end:"start"};function Kd(t){return t.replace(/start|end/g,e=>V$[e])}const H$=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,i,r;const{rects:s,middlewareData:o,placement:l,platform:a,elements:u}=e,{crossAxis:c=!1,alignment:d,allowedPlacements:h=Yx,autoAlignment:f=!0,...p}=$o(t,e),g=d!==void 0||h===Yx?function(E,R,O){return(E?[...O.filter(N=>Gi(N)===E),...O.filter(N=>Gi(N)!==E)]:O.filter(N=>Nr(N)===N)).filter(N=>!E||Gi(N)===E||!!R&&Kd(N)!==N)}(d||null,f,h):h,v=await Ku(e,p),m=((n=o.autoPlacement)==null?void 0:n.index)||0,y=g[m];if(y==null)return{};const{main:w,cross:b}=hR(y,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));if(l!==y)return{reset:{placement:g[0]}};const k=[v[Nr(y)],v[w],v[b]],A=[...((i=o.autoPlacement)==null?void 0:i.overflows)||[],{placement:y,overflows:k}],P=g[m+1];if(P)return{data:{index:m+1,overflows:A},reset:{placement:P}};const B=A.map(E=>{const R=Gi(E.placement);return[E.placement,R&&c?E.overflows.slice(0,2).reduce((O,N)=>O+N,0):E.overflows[0],E.overflows]}).sort((E,R)=>E[1]-R[1]),C=((r=B.filter(E=>E[2].slice(0,Gi(E[0])?2:3).every(R=>R<=0))[0])==null?void 0:r[0])||B[0][0];return C!==l?{data:{index:m+1,overflows:A},reset:{placement:C}}:{}}}},W$=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:l,elements:a}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...g}=$o(t,e),v=Nr(i),m=Nr(o)===o,y=await(l.isRTL==null?void 0:l.isRTL(a.floating)),w=d||(m||!p?[Xh(o)]:function(R){const O=Xh(R);return[Kd(R),O,Kd(O)]}(o));d||f==="none"||w.push(...function(R,O,N,T){const I=Gi(R);let $=function(z,L,_){const j=["left","right"],ee=["right","left"],re=["top","bottom"],me=["bottom","top"];switch(z){case"top":case"bottom":return _?L?ee:j:L?j:ee;case"left":case"right":return L?re:me;default:return[]}}(Nr(R),N==="start",T);return I&&($=$.map(z=>z+"-"+I),O&&($=$.concat($.map(Kd)))),$}(o,p,f,y));const b=[o,...w],k=await Ku(e,g),A=[];let P=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&A.push(k[v]),c){const{main:R,cross:O}=hR(i,s,y);A.push(k[R],k[O])}if(P=[...P,{placement:i,overflows:A}],!A.every(R=>R<=0)){var B,C;const R=(((B=r.flip)==null?void 0:B.index)||0)+1,O=b[R];if(O)return{data:{index:R,overflows:P},reset:{placement:O}};let N=(C=P.filter(T=>T.overflows[0]<=0).sort((T,I)=>T.overflows[1]-I.overflows[1])[0])==null?void 0:C.placement;if(!N)switch(h){case"bestFit":{var E;const T=(E=P.map(I=>[I.placement,I.overflows.filter($=>$>0).reduce(($,z)=>$+z,0)]).sort((I,$)=>I[1]-$[1])[0])==null?void 0:E[0];T&&(N=T);break}case"initialPlacement":N=o}if(i!==N)return{reset:{placement:N}}}return{}}}};function Kx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function qx(t){return dR.some(e=>t[e]>=0)}const G$=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=$o(t,e);switch(i){case"referenceHidden":{const s=Kx(await Ku(e,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:qx(s)}}}case"escaped":{const s=Kx(await Ku(e,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:qx(s)}}}default:return{}}}}},X$=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,r=await async function(s,o){const{placement:l,platform:a,elements:u}=s,c=await(a.isRTL==null?void 0:a.isRTL(u.floating)),d=Nr(l),h=Gi(l),f=xc(l)==="x",p=["left","top"].includes(d)?-1:1,g=c&&f?-1:1,v=$o(o,s);let{mainAxis:m,crossAxis:y,alignmentAxis:w}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...v};return h&&typeof w=="number"&&(y=h==="end"?-1*w:w),f?{x:y*g,y:m*p}:{x:m*p,y:y*g}}(e,t);return{x:n+r.x,y:i+r.y,data:r}}}};function J$(t){return t==="x"?"y":"x"}const Y$=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:m,y}=v;return{x:m,y}}},...a}=$o(t,e),u={x:n,y:i},c=await Ku(e,a),d=xc(Nr(r)),h=J$(d);let f=u[d],p=u[h];if(s){const v=d==="y"?"bottom":"right";f=W0(f+c[d==="y"?"top":"left"],f,f-c[v])}if(o){const v=h==="y"?"bottom":"right";p=W0(p+c[h==="y"?"top":"left"],p,p-c[v])}const g=l.fn({...e,[d]:f,[h]:p});return{...g,data:{x:g.x-n,y:g.y-i}}}}};function Ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function rr(t){return Ln(t).getComputedStyle(t)}function fR(t){return t instanceof Ln(t).Node}function zs(t){return fR(t)?(t.nodeName||"").toLowerCase():"#document"}function Ai(t){return t instanceof HTMLElement||t instanceof Ln(t).HTMLElement}function Qx(t){return typeof ShadowRoot<"u"&&(t instanceof Ln(t).ShadowRoot||t instanceof ShadowRoot)}function qu(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=rr(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function K$(t){return["table","td","th"].includes(zs(t))}function G0(t){const e=sw(),n=rr(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function sw(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function lp(t){return["html","body","#document"].includes(zs(t))}const X0=Math.min,Ml=Math.max,Jh=Math.round,dd=Math.floor,js=t=>({x:t,y:t});function pR(t){const e=rr(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Ai(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,l=Jh(n)!==s||Jh(i)!==o;return l&&(n=s,i=o),{width:n,height:i,$:l}}function Lr(t){return t instanceof Element||t instanceof Ln(t).Element}function ow(t){return Lr(t)?t:t.contextElement}function Ol(t){const e=ow(t);if(!Ai(e))return js(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=pR(e);let o=(s?Jh(n.width):n.width)/i,l=(s?Jh(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}const q$=js(0);function mR(t){const e=Ln(t);return sw()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:q$}function To(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=ow(t);let o=js(1);e&&(i?Lr(i)&&(o=Ol(i)):o=Ol(t));const l=function(h,f,p){return f===void 0&&(f=!1),!(!p||f&&p!==Ln(h))&&f}(s,n,i)?mR(s):js(0);let a=(r.left+l.x)/o.x,u=(r.top+l.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=Ln(s),f=i&&Lr(i)?Ln(i):i;let p=h.frameElement;for(;p&&i&&f!==h;){const g=Ol(p),v=p.getBoundingClientRect(),m=getComputedStyle(p),y=v.left+(p.clientLeft+parseFloat(m.paddingLeft))*g.x,w=v.top+(p.clientTop+parseFloat(m.paddingTop))*g.y;a*=g.x,u*=g.y,c*=g.x,d*=g.y,a+=y,u+=w,p=Ln(p).frameElement}}return Gh({width:c,height:d,x:a,y:u})}function ap(t){return Lr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Br(t){var e;return(e=(fR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function gR(t){return To(Br(t)).left+ap(t).scrollLeft}function Zl(t){if(zs(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Qx(t)&&t.host||Br(t);return Qx(e)?e.host:e}function yR(t){const e=Zl(t);return lp(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ai(e)&&qu(e)?e:yR(e)}function Yh(t,e){var n;e===void 0&&(e=[]);const i=yR(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=Ln(i);return r?e.concat(s,s.visualViewport||[],qu(i)?i:[]):e.concat(i,Yh(i))}function Zx(t,e,n){let i;if(e==="viewport")i=function(r,s){const o=Ln(r),l=Br(r),a=o.visualViewport;let u=l.clientWidth,c=l.clientHeight,d=0,h=0;if(a){u=a.width,c=a.height;const f=sw();(!f||f&&s==="fixed")&&(d=a.offsetLeft,h=a.offsetTop)}return{width:u,height:c,x:d,y:h}}(t,n);else if(e==="document")i=function(r){const s=Br(r),o=ap(r),l=r.ownerDocument.body,a=Ml(s.scrollWidth,s.clientWidth,l.scrollWidth,l.clientWidth),u=Ml(s.scrollHeight,s.clientHeight,l.scrollHeight,l.clientHeight);let c=-o.scrollLeft+gR(r);const d=-o.scrollTop;return rr(l).direction==="rtl"&&(c+=Ml(s.clientWidth,l.clientWidth)-a),{width:a,height:u,x:c,y:d}}(Br(t));else if(Lr(e))i=function(r,s){const o=To(r,!0,s==="fixed"),l=o.top+r.clientTop,a=o.left+r.clientLeft,u=Ai(r)?Ol(r):js(1);return{width:r.clientWidth*u.x,height:r.clientHeight*u.y,x:a*u.x,y:l*u.y}}(e,n);else{const r=mR(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return Gh(i)}function vR(t,e){const n=Zl(t);return!(n===e||!Lr(n)||lp(n))&&(rr(n).position==="fixed"||vR(n,e))}function Q$(t,e,n){const i=Ai(e),r=Br(e),s=n==="fixed",o=To(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const a=js(0);if(i||!i&&!s)if((zs(e)!=="body"||qu(r))&&(l=ap(e)),Ai(e)){const u=To(e,!0,s,e);a.x=u.x+e.clientLeft,a.y=u.y+e.clientTop}else r&&(a.x=gR(r));return{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function eS(t,e){return Ai(t)&&rr(t).position!=="fixed"?e?e(t):t.offsetParent:null}function tS(t,e){const n=Ln(t);if(!Ai(t))return n;let i=eS(t,e);for(;i&&K$(i)&&rr(i).position==="static";)i=eS(i,e);return i&&(zs(i)==="html"||zs(i)==="body"&&rr(i).position==="static"&&!G0(i))?n:i||function(r){let s=Zl(r);for(;Ai(s)&&!lp(s);){if(G0(s))return s;s=Zl(s)}return null}(t)||n}const Z$={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=Ai(n),s=Br(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},l=js(1);const a=js(0);if((r||!r&&i!=="fixed")&&((zs(n)!=="body"||qu(s))&&(o=ap(n)),Ai(n))){const u=To(n);l=Ol(n),a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-o.scrollLeft*l.x+a.x,y:e.y*l.y-o.scrollTop*l.y+a.y}},getDocumentElement:Br,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[...n==="clippingAncestors"?function(a,u){const c=u.get(a);if(c)return c;let d=Yh(a).filter(g=>Lr(g)&&zs(g)!=="body"),h=null;const f=rr(a).position==="fixed";let p=f?Zl(a):a;for(;Lr(p)&&!lp(p);){const g=rr(p),v=G0(p);v||g.position!=="fixed"||(h=null),(f?!v&&!h:!v&&g.position==="static"&&h&&["absolute","fixed"].includes(h.position)||qu(p)&&!v&&vR(a,p))?d=d.filter(m=>m!==p):h=g,p=Zl(p)}return u.set(a,d),d}(e,this._c):[].concat(n),i],o=s[0],l=s.reduce((a,u)=>{const c=Zx(e,u,r);return a.top=Ml(c.top,a.top),a.right=X0(c.right,a.right),a.bottom=X0(c.bottom,a.bottom),a.left=Ml(c.left,a.left),a},Zx(e,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:tS,getElementRects:async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||tS,s=this.getDimensions;return{reference:Q$(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return pR(t)},getScale:Ol,isElement:Lr,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function e6(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,u=ow(t),c=r||s?[...u?Yh(u):[],...Yh(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&l?function(v,m){let y,w=null;const b=Br(v);function k(){clearTimeout(y),w&&w.disconnect(),w=null}return function A(P,B){P===void 0&&(P=!1),B===void 0&&(B=1),k();const{left:C,top:E,width:R,height:O}=v.getBoundingClientRect();if(P||m(),!R||!O)return;const N={rootMargin:-dd(E)+"px "+-dd(b.clientWidth-(C+R))+"px "+-dd(b.clientHeight-(E+O))+"px "+-dd(C)+"px",threshold:Ml(0,X0(1,B))||1};let T=!0;function I($){const z=$[0].intersectionRatio;if(z!==B){if(!T)return A();z?A(!1,z):y=setTimeout(()=>{A(!1,1e-7)},100)}T=!1}try{w=new IntersectionObserver(I,{...N,root:b.ownerDocument})}catch{w=new IntersectionObserver(I,N)}w.observe(v)}(!0),k}(u,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[m]=v;m&&m.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),u&&!a&&p.observe(u),p.observe(e));let g=a?To(t):null;return a&&function v(){const m=To(t);!g||m.x===g.x&&m.y===g.y&&m.width===g.width&&m.height===g.height||n(),g=m,h=requestAnimationFrame(v)}(),n(),()=>{c.forEach(v=>{r&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,a&&cancelAnimationFrame(h)}}const t6=(t,e,n)=>{const i=new Map,r={platform:Z$,...n},s={...r.platform,_c:i};return z$(t,e,{...r,platform:s})},n6=t=>{const{element:e,padding:n}=t;function i(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){return i(e)?e.current!=null?Jx({element:e.current,padding:n}).fn(r):{}:e?Jx({element:e,padding:n}).fn(r):{}}}};var qd=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Kh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!Kh(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!Kh(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function nS(t){const e=S.useRef(t);return qd(()=>{e.current=t}),e}function i6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,whileElementsMounted:s,open:o}=t,[l,a]=S.useState({x:null,y:null,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[u,c]=S.useState(i);Kh(u,i)||c(i);const d=S.useRef(null),h=S.useRef(null),f=S.useRef(l),p=nS(s),g=nS(r),[v,m]=S.useState(null),[y,w]=S.useState(null),b=S.useCallback(E=>{d.current!==E&&(d.current=E,m(E))},[]),k=S.useCallback(E=>{h.current!==E&&(h.current=E,w(E))},[]),A=S.useCallback(()=>{if(!d.current||!h.current)return;const E={placement:e,strategy:n,middleware:u};g.current&&(E.platform=g.current),t6(d.current,h.current,E).then(R=>{const O={...R,isPositioned:!0};P.current&&!Kh(f.current,O)&&(f.current=O,ac.flushSync(()=>{a(O)}))})},[u,e,n,g]);qd(()=>{o===!1&&f.current.isPositioned&&(f.current.isPositioned=!1,a(E=>({...E,isPositioned:!1})))},[o]);const P=S.useRef(!1);qd(()=>(P.current=!0,()=>{P.current=!1}),[]),qd(()=>{if(v&&y){if(p.current)return p.current(v,y,A);A()}},[v,y,A,p]);const B=S.useMemo(()=>({reference:d,floating:h,setReference:b,setFloating:k}),[b,k]),C=S.useMemo(()=>({reference:v,floating:y}),[v,y]);return S.useMemo(()=>({...l,update:A,refs:B,elements:C,reference:b,floating:k}),[l,A,B,C,b,k])}var r6=typeof document<"u"?S.useLayoutEffect:S.useEffect;function s6(){const t=new Map;return{emit(e,n){var i;(i=t.get(e))==null||i.forEach(r=>r(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){t.set(e,(t.get(e)||[]).filter(i=>i!==n))}}}const o6=S.createContext(null),l6=()=>S.useContext(o6);function a6(t){return(t==null?void 0:t.ownerDocument)||document}function u6(t){return a6(t).defaultView||window}function hd(t){return t?t instanceof u6(t).Element:!1}const c6=AO["useInsertionEffect".toString()],d6=c6||(t=>t());function h6(t){const e=S.useRef(()=>{});return d6(()=>{e.current=t}),S.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function f6(t){t===void 0&&(t={});const{open:e=!1,onOpenChange:n,nodeId:i}=t,r=i6(t),s=l6(),o=S.useRef(null),l=S.useRef({}),a=S.useState(()=>s6())[0],[u,c]=S.useState(null),d=S.useCallback(m=>{const y=hd(m)?{getBoundingClientRect:()=>m.getBoundingClientRect(),contextElement:m}:m;r.refs.setReference(y)},[r.refs]),h=S.useCallback(m=>{(hd(m)||m===null)&&(o.current=m,c(m)),(hd(r.refs.reference.current)||r.refs.reference.current===null||m!==null&&!hd(m))&&r.refs.setReference(m)},[r.refs]),f=S.useMemo(()=>({...r.refs,setReference:h,setPositionReference:d,domReference:o}),[r.refs,h,d]),p=S.useMemo(()=>({...r.elements,domReference:u}),[r.elements,u]),g=h6(n),v=S.useMemo(()=>({...r,refs:f,elements:p,dataRef:l,nodeId:i,events:a,open:e,onOpenChange:g}),[r,i,a,e,g,f,p]);return r6(()=>{const m=s==null?void 0:s.nodesRef.current.find(y=>y.id===i);m&&(m.context=v)}),S.useMemo(()=>({...r,context:v,refs:f,reference:h,positionReference:d}),[r,f,v,h,d])}var p6=Object.defineProperty,m6=(t,e,n)=>e in t?p6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g6=(t,e,n)=>(m6(t,typeof e!="symbol"?e+"":e,n),n),wR={exports:{}},Na={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iS;function y6(){if(iS)return Na;iS=1;var t=U,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,a,u){var c,d={},h=null,f=null;u!==void 0&&(h=""+u),a.key!==void 0&&(h=""+a.key),a.ref!==void 0&&(f=a.ref);for(c in a)i.call(a,c)&&!s.hasOwnProperty(c)&&(d[c]=a[c]);if(l&&l.defaultProps)for(c in a=l.defaultProps,a)d[c]===void 0&&(d[c]=a[c]);return{$$typeof:e,type:l,key:h,ref:f,props:d,_owner:r.current}}return Na.Fragment=n,Na.jsx=o,Na.jsxs=o,Na}wR.exports=y6();var Ae=wR.exports;class v6{constructor(){g6(this,"current",this.detect())}set(e){this.current!==e&&(this.current=e)}reset(){this.set(this.detect())}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}const up=new v6;function w6(t,e,n,i){S.useEffect(()=>{const r=[];(typeof i.offset=="number"||typeof i.offset=="object"||typeof i.offset=="function")&&r.push(X$(i.offset)),(i.flip===!0||typeof i.flip=="number"||typeof i.flip=="object")&&r.push(W$({padding:typeof i.flip=="number"?i.flip:void 0,...typeof i.flip=="object"?i.flip:{}})),(i.shift===!0||typeof i.shift=="number"||typeof i.shift=="object")&&r.push(Y$({padding:typeof i.shift=="number"?i.shift:void 0,...typeof i.shift=="object"?i.shift:{}})),(i.autoPlacement===!0||typeof i.autoPlacement=="object")&&r.push(H$(typeof i.autoPlacement=="object"?i.autoPlacement:void 0)),(i.arrow===!0||typeof i.arrow=="number")&&r.push(n6({element:n,padding:i.arrow===!0?0:i.arrow})),r.push(...typeof i.middleware=="function"?i.middleware({referenceEl:e.reference,floatingEl:e.floating}):i.middleware||[]),(i.hide===!0||typeof i.hide=="object")&&r.push(G$(typeof i.hide=="object"?i.hide:void 0)),t(r)},[i.offset,i.shift,i.flip,i.arrow,i.autoPlacement,i.hide,i.middleware])}function b6(t,e,n){S.useEffect(()=>{if(t&&up.isClient&&typeof ResizeObserver<"u"&&e.current&&e.current instanceof Element){const i=new ResizeObserver(([r])=>{const s=r.borderBoxSize.reduce((o,{inlineSize:l})=>o+l,0);n(s)});return i.observe(e.current),()=>{i.disconnect(),n(null)}}},[])}const x6=t=>{switch(t){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return""}};function S6(t,e){return S.useMemo(()=>typeof t.originClass=="function"?t.originClass(e):typeof t.originClass=="string"?t.originClass:t.tailwindcssOriginClass?x6(e):"",[e,t.originClass,t.tailwindcssOriginClass])}function bR(t,e,...n){if(t in e){const r=e[t];return typeof r=="function"?r(...n):r}const i=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,bR),i}function xR(t){return up.isServer?null:t instanceof Node?t.ownerDocument:t&&Object.prototype.hasOwnProperty.call(t,"current")&&t.current instanceof Node?t.current.ownerDocument:document}const rS=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var SR=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(SR||{});function k6(t,e=0){var n;return t===((n=xR(t))==null?void 0:n.body)?!1:bR(e,{0(){return t.matches(rS)},1(){let i=t;for(;i!==null;){if(i.matches(rS))return!0;i=i.parentElement}return!1}})}const C6=(t,e)=>{up.isServer?S.useEffect(t,e):S.useLayoutEffect(t,e)};function E6(t){const e=S.useRef(t);return C6(()=>{e.current=t},[t]),e}function Ui(t,e,n){const i=E6(e);S.useEffect(()=>{function r(s){i.current(s)}return document.addEventListener(t,r,n),()=>document.removeEventListener(t,r,n)},[t,n])}function A6(t,e,n=!0){const i=S.useRef(!1);S.useEffect(()=>{requestAnimationFrame(()=>{i.current=n})},[n]);function r(o,l){if(!i.current||o.defaultPrevented)return;const a=function c(d){return typeof d=="function"?c(d()):Array.isArray(d)||d instanceof Set?d:[d]}(t),u=l(o);if(u!==null&&u.getRootNode().contains(u)){for(const c of a){if(c===null)continue;const d=c instanceof HTMLElement?c:c.current;if(d!=null&&d.contains(u)||o.composed&&o.composedPath().includes(d))return}return!k6(u,SR.Loose)&&u.tabIndex!==-1&&o.preventDefault(),e(o,u)}}const s=S.useRef(null);Ui("mousedown",o=>{var l,a;i.current&&(s.current=((a=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:a[0])||o.target)},!0),Ui("click",o=>{s.current&&(r(o,()=>s.current),s.current=null)},!0),Ui("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}const lw=S.createContext(null);lw.displayName="ReferenceContext";const aw=S.createContext(null);aw.displayName="FloatingContext";const Qu=S.createContext(null);Qu.displayName="ArrowContext";function kR(t){const e=S.useContext(lw);if(e===null){const n=new Error(`<${t} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,kR),n}return e}function CR(t){const e=S.useContext(aw);if(e===null){const n=new Error(`<${t} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,CR),n}return e}function ER(t){const e=S.useContext(Qu);if(e===null){const n=new Error(`<${t} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ER),n}return e}function AR(t,e,n,i){const{referenceRef:r}=i,s=e;if(s.as===S.Fragment)return Ae.jsx(t.type,{...t.props,...n,ref:r});const o=s.as||"div";return Ae.jsx(o,{...n,ref:r,children:Ae.jsx(t.type,{...t.props})})}function uw(t,e,n,i){const{floatingRef:r,props:s,mounted:o,setShow:l,x:a,y:u,placement:c,strategy:d,referenceElWidth:h}=i,f={...s,...e},p=S6(f,c),g={show:o.current?f.show:!1,enter:`${f.enter||""} ${p}`,enterFrom:`${f.enterFrom||""}`,enterTo:`${f.enterTo||""}`,leave:`${f.leave||""} ${p}`,leaveFrom:`${f.leaveFrom||""}`,leaveTo:`${f.leaveTo||""}`,beforeEnter:()=>{l(!0)},afterLeave:()=>{l(!1)}},v={style:{...!f.dialog&&(f.transform||f.transform===void 0)?{position:d,zIndex:f.zIndex||9999,top:"0px",left:"0px",right:"auto",bottom:"auto",transform:`translate(${Math.round(a||0)}px,${Math.round(u||0)}px)`}:{position:d,zIndex:f.zIndex||9999,top:`${u||0}px`,left:`${a||0}px`},width:f.adaptiveWidth&&typeof h=="number"?`${h}px`:void 0}};function m(b){return f.portal?Ae.jsx(Wh,{children:b}):b}function y(b){const k={...v,...n,ref:r};if(f.as===S.Fragment)return Ae.jsx(b.type,{...b.props,...k});const A=f.as||"div";return Ae.jsx(A,{...k,children:Ae.jsx(b.type,{...b.props})})}function w(){return up.isServer?o.current&&f.show?Ae.jsx(t.type,{...t.props}):Ae.jsx(S.Fragment,{}):f.transitionChild?Ae.jsx(Gx.Child,{as:S.Fragment,...g,children:Ae.jsx(t.type,{...t.props})}):Ae.jsx(Gx,{as:S.Fragment,...g,children:Ae.jsx(t.type,{...t.props})})}return m(y(w()))}function PR([t,e],n){var i,r;const s=S.useRef(!1),[o,l]=S.useState(),a=S.useRef(null),u=S.useMemo(()=>({show:n.onShow||(()=>{}),hide:n.onHide||(()=>{}),update:n.onUpdate||(()=>{})}),[n.onShow,n.onHide,n.onUpdate]),{x:c,y:d,placement:h,strategy:f,update:p,refs:g,middlewareData:v}=f6({placement:n.placement||"bottom-start",strategy:n.strategy,middleware:o}),[m,y]=S.useState(null),w=S.useCallback(()=>{p(),u.update()},[p,u]);S.useEffect(w,[n.placement,n.strategy,o]),w6(l,g,a,n),S.useEffect(()=>{s.current=!0},[]),b6(n.adaptiveWidth,g.reference,y),S.useEffect(()=>{if(g.reference.current&&g.floating.current&&t){const B=n.autoUpdate!==!1?e6(g.reference.current,g.floating.current,w,typeof n.autoUpdate=="object"?n.autoUpdate:void 0):()=>{};return u.show(),()=>{B(),u.hide()}}},[t,w,g]);const b=S.useRef(!0);S.useEffect(()=>{!(g.reference.current instanceof Element)&&g.reference.current&&g.floating.current&&b.current&&(b.current=!1,w(),window.requestAnimationFrame(()=>{b.current=!0,w()}))},[g]);const k={referenceRef:g.setReference,placement:h},A={floatingRef:g.setFloating,props:n,mounted:s,setShow:e,x:c,y:d,placement:h,strategy:f,referenceElWidth:m},P={arrowRef:a,placement:h,x:(i=v.arrow)==null?void 0:i.x,y:(r=v.arrow)==null?void 0:r.y};return{referenceApi:k,floatingApi:A,arrowApi:P,x:c,y:d,placement:h,strategy:f,update:w,refs:g,middlewareData:v}}const RR=S.forwardRef((t,e)=>{const[n,i]=S.useState(t.show??!1),{referenceApi:r,floatingApi:s,arrowApi:o,placement:l}=PR([n,i],t),a={placement:l},[u,c]=typeof t.children=="function"?t.children(a):t.children;if(!S.isValidElement(u))return console.warn("<Float /> is missing a reference and floating element."),Ae.jsx(S.Fragment,{});function d(p){if(t.as===S.Fragment||!t.as)return Ae.jsx(S.Fragment,{children:p});const g=t.as;return Ae.jsx(g,{ref:e,className:t.className,children:p})}if(t.composable||t.dialog)return d(Ae.jsx(lw.Provider,{value:r,children:Ae.jsx(aw.Provider,{value:s,children:Ae.jsx(Qu.Provider,{value:o,children:typeof t.children=="function"?t.children(a):t.children})})},"FloatingNode"));const h=AR(u,{as:S.Fragment},{key:"reference-node"},r),f=uw(c,{as:t.floatingAs||"div"},{},s);return d([h,Ae.jsx(Qu.Provider,{value:o,children:f},"floating-node")])});RR.displayName="Float";function P6(t){if(!t.children)return Ae.jsx(S.Fragment,{});const e=S.useMemo(()=>{const{as:s,children:o,...l}=t;return l},[t]),n=kR("Float.Reference"),{placement:i}=n,r={placement:i};return AR(typeof t.children=="function"?t.children(r):t.children,{...t,as:t.as||S.Fragment},e,n)}function R6(t){if(!t.children)return Ae.jsx(S.Fragment,{});const e=S.useMemo(()=>{const{as:s,enter:o,enterFrom:l,enterTo:a,leave:u,leaveFrom:c,leaveTo:d,originClass:h,tailwindcssOriginClass:f,transitionChild:p,children:g,...v}=t;return v},[t]),n=CR("Float.Content"),{placement:i}=n,r={placement:i};return uw(typeof t.children=="function"?t.children(r):t.children,{...t,as:t.as||"div"},e,n)}function M6(t){const{arrowRef:e,placement:n,x:i,y:r}=ER("Float.Arrow"),s=S.useMemo(()=>{const{as:u,offset:c,children:d,...h}=t;return h},[t]),o={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]],l={left:typeof i=="number"?`${i}px`:void 0,top:typeof r=="number"?`${r}px`:void 0,right:void 0,bottom:void 0,[o]:`${(t.offset??4)*-1}px`,...s.style};if(t.as===S.Fragment){const u={placement:n},c=typeof t.children=="function"?t.children(u):t.children;return!c||!S.isValidElement(c)?Ae.jsx(S.Fragment,{}):Ae.jsx(c.type,{...c.props,ref:e,style:l})}const a=t.as||"div";return Ae.jsx(a,{ref:e,...s,style:l,children:t.children})}function cw({onInitial:t,children:e,...n}){const[i,r]=S.useState(n.show??!1),s=S.useMemo(()=>{const{as:h,show:f,placement:p,strategy:g,offset:v,shift:m,flip:y,arrow:w,autoPlacement:b,hide:k,autoUpdate:A,zIndex:P,enter:B,enterFrom:C,enterTo:E,leave:R,leaveFrom:O,leaveTo:N,originClass:T,tailwindcssOriginClass:I,portal:$,transform:z,middleware:L,onShow:_,onHide:j,onUpdate:ee,...re}=n;return re},[n]),{floatingApi:o,arrowApi:l,placement:a,refs:u}=PR([i,r],n);S.useEffect(()=>{r(n.show??!1)},[n.show]);function c(){i&&r(!1)}if(t({show:i,setShow:r,placement:a,refs:u}),!e)return Ae.jsx(S.Fragment,{});const d=uw(typeof e=="function"?e({placement:a,close:c}):e,{...n,as:n.as||S.Fragment,show:i},s,o);return Ae.jsx(Qu.Provider,{value:l,children:d})}function O6(t){function e({setShow:n,refs:i}){Ui("contextmenu",r=>{r.preventDefault(),i.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:r.clientX,y:r.clientY,top:r.clientY,left:r.clientX,right:r.clientX,bottom:r.clientY}}}),n(!0)}),A6(i.floating,()=>{n(!1)})}return Ae.jsx(cw,{flip:!0,...t,show:!1,portal:!0,onInitial:e})}function T6({globalHideCursor:t,...e}){function n({setShow:i,refs:r}){function s(){i(!0)}function o(){i(!1)}function l(d){r.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:d.clientX,y:d.clientY,top:d.clientY,left:d.clientX,right:d.clientX,bottom:d.clientY}}})}function a(d){s(),l(d)}function u(d){s(),l(d.touches[0])}const c=xR(r.floating);c&&(S.useEffect(()=>{if((t||t===void 0)&&!c.getElementById("headlesui-float-cursor-style")){const d=c.createElement("style");return(c.head||c.getElementsByTagName("head")[0]).appendChild(d),d.id="headlesui-float-cursor-style",d.appendChild(c.createTextNode(["*, *::before, *::after {","  cursor: none !important;","}",".headlesui-float-cursor-root {","  pointer-events: none !important;","}"].join(`
`))),()=>{var h;return(h=c.getElementById("headlesui-float-cursor-style"))==null?void 0:h.remove()}}},[t]),"ontouchstart"in window||navigator.maxTouchPoints>0?(Ui("touchstart",u),Ui("touchend",o),Ui("touchmove",u)):(Ui("mouseenter",a),Ui("mouseleave",o),Ui("mousemove",a)))}return Ae.jsx(cw,{...e,portal:!0,className:"headlesui-float-cursor-root",onInitial:n})}const D6=Object.assign(RR,{Reference:P6,Content:R6,Arrow:M6,Virtual:cw,ContextMenu:O6,Cursor:T6}),Sc=S.createContext({current:null,open:()=>{},close:()=>{}});function N6(t){return M.jsx(iw,{children:({open:e})=>M.jsx(L6,{...t,popoverIsOpen:e})})}function L6({popoverIsOpen:t,children:e,...n}){const[i,r]=S.useState([]),s=i.at(-1)||null,o=a=>r([...i,a]),l=()=>r(i.slice(0,-1));return!t&&s!==null&&setTimeout(()=>r([]),50),M.jsx(Sc.Provider,{value:{current:s,open:o,close:l},children:M.jsx(D6,{...n,children:e})})}const MR=S.forwardRef(({children:t},e)=>{const n=S.useRef(null),{current:i}=S.useContext(Sc);return M.jsxs(iw.Panel,{ref:e,className:"z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-100 bg-white p-1 text-slate-700 shadow-md",children:[M.jsx("div",{ref:n}),M.jsx(Wh.Group,{target:n,children:M.jsx(Wh,{as:"div",className:i===null?"block":"hidden",children:t})})]})});MR.displayName="MenuContent";function OR({children:t}){const{current:e,close:n}=S.useContext(Sc);return M.jsxs("div",{className:"flex items-center px-2 py-1.5 text-sm font-semibold text-slate-900",children:[e&&M.jsx("button",{className:"-ml-0.5 mr-1 flex items-center justify-center rounded-full hover:bg-slate-100 focus:bg-slate-100",onClick:n,children:M.jsx("span",{className:"icon-[carbon--chevron-left] h-5 w-5"})}),t]})}function TR(){return M.jsx("hr",{className:"-mx-1 my-1 h-px border-none bg-slate-100"})}function dw({children:t,disabled:e=!1,leading:n,trailing:i,href:r,external:s=!1,onClick:o}){if(r&&o)throw new Error("`href` and `onClick` are mutually exclusive");const l=e?"div":r?"a":o?"button":"div";return r&&s&&!i&&(i="icon-[carbon--launch]"),S.createElement(l,{className:bl("relative flex select-none items-center rounded-sm py-1.5 px-2 text-sm font-medium outline-none hover:bg-slate-100 focus:bg-slate-100 w-full",e&&"pointer-events-none opacity-50 cursor-default"),...l==="a"?{href:r,target:s?"_blank":void 0,rel:"noreferrer"}:l==="button"?{onClick:o}:{}},M.jsxs(M.Fragment,{children:[M.jsx("span",{className:bl("mr-2 h-4 w-4",n)}),t,i&&M.jsx("span",{className:bl("ml-auto block h-4 w-4",i)})]}))}function B6({value:t,onChange:e,options:n,getOptionLabel:i,...r}){return M.jsxs(DR,{children:[M.jsx(NR,{...r}),M.jsxs(LR,{children:[M.jsx(OR,{children:r.children}),M.jsx(TR,{}),n.map((s,o)=>M.jsx(dw,{leading:s===t?"icon-[carbon--radio-button-checked]":"icon-[carbon--radio-button]",onClick:()=>e(s),children:i(s)},o))]})]})}const hw=S.createContext(null);function DR({children:t}){const e=S.useId();return M.jsx(hw.Provider,{value:e,children:t})}function NR(t){const e=S.useContext(hw),{open:n}=S.useContext(Sc);if(e===null)throw new Error("SubmenuTrigger must be rendered inside a Submenu");return M.jsx(dw,{...t,trailing:"icon-[carbon--chevron-right]",onClick:()=>n(e)})}function LR({children:t}){const e=S.useContext(hw),{current:n}=S.useContext(Sc);return M.jsx(Wh,{as:"div",className:n===e?"block":"hidden",children:t})}const on=Object.assign(N6,{Button:iw.Button,Content:MR,Title:OR,Separator:TR,Item:dw,Radio:B6,Submenu:DR,SubmenuTrigger:NR,SubmenuContent:LR});function I6(){const[t,e]=Ua(xA),[n,i]=Ua(oB),[r,s]=Ua(wA),[o,l]=Ua(Sv),a=Qf(),[u]=Jv(),c=u.type==="stopped";return M.jsxs(on,{strategy:"fixed",placement:"bottom-end",shift:8,offset:8,children:[M.jsx(on.Button,{className:"flex h-full items-center p-3 outline-none transition hover:bg-slate-500/30 focus:bg-slate-500/30 focus:outline-none",title:a("menu.label"),children:M.jsx("span",{className:"icon-[carbon--menu] h-6 w-6"})}),M.jsxs(on.Content,{children:[M.jsx(on.Title,{children:a("menu.label")}),M.jsx(on.Separator,{}),M.jsx(on.Radio,{leading:"icon-[carbon--devices]",value:t,onChange:e,options:["pio-switches-and-leds","pio-printer","handshake"],getOptionLabel:d=>a(`menu.devices.${d}`),disabled:!c,children:a("menu.devices.label")}),M.jsx(on.Radio,{leading:"icon-[carbon--character-whole-number]",value:n,onChange:i,options:["hex","bin","uint","int","ascii"],getOptionLabel:d=>a(`menu.dataRepresentation.${d}`),children:a("menu.dataRepresentation.label")}),M.jsx(on.Radio,{leading:"icon-[carbon--data-table]",value:r,onChange:s,options:["unchanged","clean","randomize"],getOptionLabel:d=>a(`menu.dataOnLoad.${d}`),children:a("menu.dataOnLoad.label")}),M.jsx(on.Separator,{}),M.jsx(on.Radio,{leading:"icon-[carbon--translate]",value:o,onChange:l,options:["en","es"],getOptionLabel:d=>M.jsxs("span",{className:"flex items-center gap-1 [&_svg]:h-5",children:[d==="en"&&M.jsxs(M.Fragment,{children:[M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36",children:[M.jsx("path",{fill:"#00247D",d:"M0 9.059V13h5.628zM4.664 31H13v-5.837zM23 25.164V31h8.335zM0 23v3.941L5.63 23zM31.337 5H23v5.837zM36 26.942V23h-5.631zM36 13V9.059L30.371 13zM13 5H4.664L13 10.837z"}),M.jsx("path",{fill:"#CF1B2B",d:"M25.14 23l9.712 6.801c.471-.479.808-1.082.99-1.749L28.627 23H25.14zM13 23h-2.141l-9.711 6.8c.521.53 1.189.909 1.938 1.085L13 23.943V23zm10-10h2.141l9.711-6.8c-.521-.53-1.188-.909-1.937-1.085L23 12.057V13zm-12.141 0L1.148 6.2C.677 6.68.34 7.282.157 7.949L7.372 13h3.487z"}),M.jsx("path",{fill:"#EEE",d:"M36 21H21v10h2v-5.836L31.335 31H32c1.117 0 2.126-.461 2.852-1.199L25.14 23h3.487l7.215 5.052c.093-.337.158-.686.158-1.052v-.058L30.369 23H36v-2zM0 21v2h5.63L0 26.941V27c0 1.091.439 2.078 1.148 2.8l9.711-6.8H13v.943l-9.914 6.941c.294.07.598.116.914.116h.664L13 25.163V31h2V21H0zM36 9c0-1.091-.439-2.078-1.148-2.8L25.141 13H23v-.943l9.915-6.942C32.62 5.046 32.316 5 32 5h-.663L23 10.837V5h-2v10h15v-2h-5.629L36 9.059V9zM13 5v5.837L4.664 5H4c-1.118 0-2.126.461-2.852 1.2l9.711 6.8H7.372L.157 7.949C.065 8.286 0 8.634 0 9v.059L5.628 13H0v2h15V5h-2z"}),M.jsx("path",{fill:"#CF1B2B",d:"M21 15V5h-6v10H0v6h15v10h6V21h15v-6z"})]}),"English"]}),d==="es"&&M.jsxs(M.Fragment,{children:[M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36",children:[M.jsx("path",{fill:"#75AADB",d:"M36 27c0 2.209-1.791 4-4 4H4c-2.209 0-4-1.791-4-4V9c0-2.209 1.791-4 4-4h28c2.209 0 4 1.791 4 4v18z"}),M.jsx("path",{fill:"#EEE",d:"M0 13h36v10H0z"}),M.jsx("path",{fill:"#FCBF49",d:"M18 13l.488 2.548 1.426-2.167-.525 2.54 2.146-1.457-1.457 2.147 2.541-.524-2.167 1.425L23 18l-2.548.488 2.167 1.426-2.541-.525 1.457 2.146-2.146-1.457.525 2.541-1.426-2.167L18 23l-.488-2.548-1.425 2.167.524-2.541-2.147 1.457 1.457-2.146-2.54.525 2.167-1.426L13 18l2.548-.488-2.167-1.425 2.54.524-1.457-2.147 2.147 1.457-.524-2.54 1.425 2.167z"}),M.jsx("path",{fill:"#843511",d:"M18 14.33l.242 1.265.116.605.339-.514.708-1.076-.261 1.261-.125.604.51-.346 1.066-.723-.723 1.066-.346.51.603-.125 1.262-.26-1.076.708-.515.337.605.116L21.67 18l-1.265.242-.605.116.514.339 1.076.708-1.262-.261-.604-.125.346.51.723 1.065-1.065-.723-.51-.346.125.604.261 1.262-.708-1.076-.338-.515-.116.605L18 21.67l-.242-1.265-.116-.605-.339.515-.708 1.076.26-1.262.125-.603-.51.346-1.066.723.723-1.066.346-.51-.604.125-1.261.261 1.076-.708.514-.339-.605-.116L14.33 18l1.265-.242.605-.116-.515-.339-1.076-.708 1.261.26.603.125-.346-.51-.724-1.066 1.066.724.51.346-.125-.603-.26-1.261.708 1.076.339.515.116-.605L18 14.33M18 13l-.488 2.548-1.425-2.167.524 2.541-2.147-1.457 1.457 2.147-2.54-.524 2.167 1.425L13 18l2.548.488-2.167 1.426 2.54-.525-1.457 2.146 2.147-1.457-.524 2.541 1.425-2.167L18 23l.488-2.548 1.426 2.167-.525-2.541 2.146 1.457-1.457-2.146 2.541.525-2.167-1.426L23 18l-2.548-.488 2.167-1.425-2.541.524 1.457-2.147-2.146 1.457.525-2.541-1.426 2.167L18 13zm1.914.381h.005-.005zm1.621 1.083h.005-.005zm1.084 1.623h.005-.005z"}),M.jsx("circle",{fill:"#FCBF49",cx:"18",cy:"18",r:"2"}),M.jsx("path",{fill:"#843511",d:"M18 20.125c-1.172 0-2.125-.953-2.125-2.125s.953-2.125 2.125-2.125 2.125.953 2.125 2.125-.953 2.125-2.125 2.125zm0-4c-1.034 0-1.875.841-1.875 1.875s.841 1.875 1.875 1.875 1.875-.841 1.875-1.875-.841-1.875-1.875-1.875z"}),M.jsx("path",{fill:"#C16540",d:"M17.801 17.774c0 .155-.261.28-.583.28-.323 0-.584-.125-.584-.28 0-.155.261-.28.584-.28.322 0 .583.125.583.28zm1.553-.024c0-.161-.266-.292-.594-.292-.328 0-.594.13-.594.292s.266.292.594.292c.329 0 .594-.131.594-.292z"}),M.jsx("path",{fill:"#ED8662",d:"M17.463 18.874c0-.126.246-.229.548-.229.303 0 .548.102.548.229 0 .126-.246.229-.548.229-.303 0-.548-.103-.548-.229z"})]}),"Espaol"]})]}),children:a("menu.language")}),M.jsx(on.Separator,{}),M.jsx(on.Item,{href:"docs",external:!0,leading:"icon-[carbon--document]",children:a("menu.documentation")}),M.jsx(on.Item,{href:"https://github.com/vonsim/vonsim",external:!0,leading:"icon-[carbon--logo-github]",children:"GitHub"}),M.jsx(on.Item,{href:"https://github.com/vonsim/vonsim/issues/new?labels=new+version",external:!0,leading:"icon-[carbon--warning-filled]",children:a("menu.report-issue")})]})]})}function _6(){const t=Qf(),[e]=Jv();return M.jsxs("div",{className:bl("mx-auto flex h-6 w-40 select-none items-center justify-center gap-1 rounded-full lg:mx-8","text-center text-sm font-semibold",e.type==="running"&&"bg-emerald-200 text-emerald-700",e.type==="paused"&&"bg-amber-200 text-amber-700",e.type==="waiting-for-input"&&"bg-amber-200 text-amber-700",e.type==="stopped"&&(e.reason==="halt"?"bg-sky-200 text-sky-700":"bg-red-200 text-red-700")),children:[M.jsx("span",{className:bl("h-4 w-4",e.type==="running"&&"icon-[carbon--settings] animate-spin",e.type==="paused"&&"icon-[carbon--pause] animate-pulse",e.type==="waiting-for-input"&&"icon-[carbon--keyboard] animate-bounce",e.type==="stopped"&&[e.reason==="halt"&&"icon-[carbon--stop-sign]",e.reason==="error"&&"icon-[carbon--error]"])}),M.jsx("span",{children:t(`runner.state.${e.type}`)})]})}function $6(){const t=bN(),[e,n]=aN(!1),i=gN(()=>{window.navigator.vibrate(100),n()},{isPreventDefault:!0,delay:1500});return M.jsxs("header",{className:"text-sm text-white",children:[M.jsxs("div",{className:"flex items-center lg:h-full",children:[M.jsxs("div",{className:"flex select-none items-center justify-center px-4 py-2",children:[M.jsx("span",{className:bl("icon-[carbon--machine-learning] mr-2 block h-8 w-8",e&&"animate-spin"),...i}),M.jsxs("h1",{className:"text-xl font-bold",children:["Von",M.jsx("span",{className:"text-mantis-400",children:"Sim"})]})]}),M.jsx(_6,{}),!t&&M.jsxs(M.Fragment,{children:[M.jsx(jx,{}),M.jsx("div",{className:"grow"})]}),M.jsx(I6,{})]}),t&&M.jsx(jx,{})]})}const F6=1024;let z6=0;class Nm{constructor(e,n){this.from=e,this.to=n}}class be{constructor(e={}){this.id=z6++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Sn.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}be.closedBy=new be({deserialize:t=>t.split(" ")});be.openedBy=new be({deserialize:t=>t.split(" ")});be.group=new be({deserialize:t=>t.split(" ")});be.contextHash=new be({perNode:!0});be.lookAhead=new be({perNode:!0});be.mounted=new be({perNode:!0});const j6=Object.create(null);class Sn{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):j6,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Sn(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(be.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(be.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Sn.none=new Sn("",Object.create(null),0,8);class fw{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Sn(i.name,r,i.id,i.flags):i)}return new fw(n)}}const fd=new WeakMap,sS=new WeakMap;var Rt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Rt||(Rt={}));class Je{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(be.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Zh(this.topNode,e)}cursorAt(e,n=0,i=0){let r=fd.get(this)||this.topNode,s=new Zh(r);return s.moveTo(e,n),fd.set(this,s._tree),s}get topNode(){return new Ir(this,0,0,null)}resolve(e,n=0){let i=ea(fd.get(this)||this.topNode,e,n,!1);return fd.set(this,i),i}resolveInner(e,n=0){let i=ea(sS.get(this)||this.topNode,e,n,!0);return sS.set(this,i),i}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,l=(o&Rt.IncludeAnonymous)>0;for(let a=this.cursor(o|Rt.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=r&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:gw(Sn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Je(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Je(Sn.none,n,i,r)))}static build(e){return V6(e)}}Je.empty=new Je(Sn.none,[],[],0);class pw{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new pw(this.buffer,this.index)}}class Fo{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Sn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,l=-1;for(let a=e;a!=n&&!(BR(s,r,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let l=e,a=0;l<n;){s[a++]=r[l++],s[a++]=r[l++]-i;let u=s[a++]=r[l++]-i;s[a++]=r[l++]-e,o=Math.max(o,u)}return new Fo(s,o,this.set)}}function BR(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function IR(t,e){let n=t.childBefore(e);for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(t=n,n=i.prevSibling):n=i}return t}function ea(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Ir&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Rt.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof Ir&&o.index<0&&((r=l.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Ir{constructor(e,n,i,r){this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,u=n>0?l.length:-1;e!=u;e+=n){let c=l[e],d=a[e]+o.from;if(BR(r,i,d,d+c.length)){if(c instanceof Fo){if(s&Rt.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new bs(new U6(o,c,e,d),null,h)}else if(s&Rt.IncludeAnonymous||!c.type.isAnonymous||mw(c)){let h;if(!(s&Rt.IgnoreMounts)&&c.props&&(h=c.prop(be.mounted))&&!h.overlay)return new Ir(h.tree,d,e,o);let f=new Ir(c,d,e,o);return s&Rt.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&Rt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Rt.IgnoreOverlays)&&(r=this._tree.prop(be.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?l>=s:l>s))return new Ir(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Zh(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return ea(this,e,n,!1)}resolveInner(e,n=0){return ea(this,e,n,!0)}enterUnfinishedNodesBefore(e){return IR(this,e)}getChild(e,n=null,i=null){let r=qh(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return qh(this,e,n,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Qh(this,e)}}function qh(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(;!r.type.is(n);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Qh(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class U6{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class bs{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new bs(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Rt.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new bs(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new bs(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new bs(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new Zh(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Je(this.type,e,n,this.to-this.from)}resolve(e,n=0){return ea(this,e,n,!1)}resolveInner(e,n=0){return ea(this,e,n,!0)}enterUnfinishedNodesBefore(e){return IR(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,i=null){let r=qh(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return qh(this,e,n,i)}get node(){return this}matchContext(e){return Qh(this,e)}}class Zh{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ir)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Ir?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Rt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Rt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Rt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Rt.IncludeAnonymous||l instanceof Fo||!l.type.isAnonymous||mw(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new bs(this.buffer,n,this.stack[r]);return this.bufferNode=new bs(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Qh(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Qh(this.node,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function mw(t){return t.children.some(e=>e instanceof Fo||!e.type.isAnonymous||mw(e))}function V6(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=F6,reused:s=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(n)?new pw(n,n.length):n,a=i.types,u=0,c=0;function d(b,k,A,P,B){let{id:C,start:E,end:R,size:O}=l,N=c;for(;O<0;)if(l.next(),O==-1){let L=s[C];A.push(L),P.push(E-b);return}else if(O==-3){u=C;return}else if(O==-4){c=C;return}else throw new RangeError(`Unrecognized record size: ${O}`);let T=a[C],I,$,z=E-b;if(R-E<=r&&($=g(l.pos-k,B))){let L=new Uint16Array($.size-$.skip),_=l.pos-$.size,j=L.length;for(;l.pos>_;)j=v($.start,L,j);I=new Fo(L,R-$.start,i),z=$.start-b}else{let L=l.pos-O;l.next();let _=[],j=[],ee=C>=o?C:-1,re=0,me=R;for(;l.pos>L;)ee>=0&&l.id==ee&&l.size>=0?(l.end<=me-r&&(f(_,j,E,re,l.end,me,ee,N),re=_.length,me=l.end),l.next()):d(E,L,_,j,ee);if(ee>=0&&re>0&&re<_.length&&f(_,j,E,re,E,me,ee,N),_.reverse(),j.reverse(),ee>-1&&re>0){let nt=h(T);I=gw(T,_,j,0,_.length,0,R-E,nt,nt)}else I=p(T,_,j,R-E,N-R)}A.push(I),P.push(z)}function h(b){return(k,A,P)=>{let B=0,C=k.length-1,E,R;if(C>=0&&(E=k[C])instanceof Je){if(!C&&E.type==b&&E.length==P)return E;(R=E.prop(be.lookAhead))&&(B=A[C]+E.length+R)}return p(b,k,A,P,B)}}function f(b,k,A,P,B,C,E,R){let O=[],N=[];for(;b.length>P;)O.push(b.pop()),N.push(k.pop()+A-B);b.push(p(i.types[E],O,N,C-B,R-C)),k.push(B-A)}function p(b,k,A,P,B=0,C){if(u){let E=[be.contextHash,u];C=C?[E].concat(C):[E]}if(B>25){let E=[be.lookAhead,B];C=C?[E].concat(C):[E]}return new Je(b,k,A,P,C)}function g(b,k){let A=l.fork(),P=0,B=0,C=0,E=A.end-r,R={size:0,start:0,skip:0};e:for(let O=A.pos-b;A.pos>O;){let N=A.size;if(A.id==k&&N>=0){R.size=P,R.start=B,R.skip=C,C+=4,P+=4,A.next();continue}let T=A.pos-N;if(N<0||T<O||A.start<E)break;let I=A.id>=o?4:0,$=A.start;for(A.next();A.pos>T;){if(A.size<0)if(A.size==-3)I+=4;else break e;else A.id>=o&&(I+=4);A.next()}B=$,P+=N,C+=I}return(k<0||P==b)&&(R.size=P,R.start=B,R.skip=C),R.size>4?R:void 0}function v(b,k,A){let{id:P,start:B,end:C,size:E}=l;if(l.next(),E>=0&&P<o){let R=A;if(E>4){let O=l.pos-(E-4);for(;l.pos>O;)A=v(b,k,A)}k[--A]=R,k[--A]=C-b,k[--A]=B-b,k[--A]=P}else E==-3?u=P:E==-4&&(c=P);return A}let m=[],y=[];for(;l.pos>0;)d(t.start||0,t.bufferStart||0,m,y,-1);let w=(e=t.length)!==null&&e!==void 0?e:m.length?y[0]+m[0].length:0;return new Je(a[t.topID],m.reverse(),y.reverse(),w)}const oS=new WeakMap;function Qd(t,e){if(!t.isAnonymous||e instanceof Fo||e.type!=t)return 1;let n=oS.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Je)){n=1;break}n+=Qd(t,i)}oS.set(e,n)}return n}function gw(t,e,n,i,r,s,o,l,a){let u=0;for(let p=i;p<r;p++)u+=Qd(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,g,v,m,y){for(let w=v;w<m;){let b=w,k=g[w],A=Qd(t,p[w]);for(w++;w<m;w++){let P=Qd(t,p[w]);if(A+P>=c)break;A+=P}if(w==b+1){if(A>c){let P=p[b];f(P.children,P.positions,0,P.children.length,g[b]+y);continue}d.push(p[b])}else{let P=g[w-1]+p[w-1].length-k;d.push(gw(t,p,g,b,w,k,P,null,a))}h.push(k+y-s)}}return f(e,n,i,r,0),(l||a)(d,h,o)}class bo{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new bo(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<n.length?n[l]:null,d=c?c.fromA:1e9;if(d-a>=i)for(;o&&o.from<d;){let h=o;if(a>=h.from||d<=h.to||u){let f=Math.max(h.from,a)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new bo(f,p,h.tree,h.offset+u,l>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return r}}class _R{startParse(e,n,i){return typeof e=="string"&&(e=new H6(e)),i=i?i.length?i.map(r=>new Nm(r.from,r.to)):[new Nm(0,0)]:[new Nm(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class H6{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new be({perNode:!0});let W6=0;class At{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=W6++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new At([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new ef;return n=>n.modified.indexOf(e)>-1?n:ef.get(n.base||n,n.modified.concat(e).sort((i,r)=>i.id-r.id))}}let G6=0;class ef{constructor(){this.instances=[],this.id=G6++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(l=>l.base==e&&X6(n,l.modified));if(i)return i;let r=[],s=new At(r,e,n);for(let l of n)l.instances.push(s);let o=J6(n);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(ef.get(l,a));return s}}function X6(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function J6(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Y6(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,l=r;for(let d=0;;){if(l=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);l=r.slice(d)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+r);let c=new tf(i,o,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return $R.add(e)}const $R=new be;class tf{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}tf.empty=new tf([],2,null);function FR(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let a of l.set){let u=n[a.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function K6(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function q6(t,e,n,i=0,r=t.length){let s=new Q6(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Q6{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=Z6(e)||tf.empty,d=K6(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,l),u),c.opaque)return;let h=e.tree&&e.tree.prop(be.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+l,1),p=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),g=e.firstChild();for(let v=0,m=l;;v++){let y=v<h.overlay.length?h.overlay[v]:null,w=y?y.from+l:a,b=Math.max(n,m),k=Math.min(i,w);if(b<k&&g)for(;e.from<k&&(this.highlightRange(e,b,k,r,s),this.startSpan(Math.min(k,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>i)break;m=y.to+l,m>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+l),Math.min(i,m),"",p),this.startSpan(Math.min(i,m),u))}g&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function Z6(t){let e=t.type.prop($R);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const K=At.define,pd=K(),ts=K(),lS=K(ts),aS=K(ts),ns=K(),md=K(ns),Lm=K(ns),Li=K(),Qs=K(Li),Di=K(),Ni=K(),J0=K(),La=K(J0),gd=K(),ae={comment:pd,lineComment:K(pd),blockComment:K(pd),docComment:K(pd),name:ts,variableName:K(ts),typeName:lS,tagName:K(lS),propertyName:aS,attributeName:K(aS),className:K(ts),labelName:K(ts),namespace:K(ts),macroName:K(ts),literal:ns,string:md,docString:K(md),character:K(md),attributeValue:K(md),number:Lm,integer:K(Lm),float:K(Lm),bool:K(ns),regexp:K(ns),escape:K(ns),color:K(ns),url:K(ns),keyword:Di,self:K(Di),null:K(Di),atom:K(Di),unit:K(Di),modifier:K(Di),operatorKeyword:K(Di),controlKeyword:K(Di),definitionKeyword:K(Di),moduleKeyword:K(Di),operator:Ni,derefOperator:K(Ni),arithmeticOperator:K(Ni),logicOperator:K(Ni),bitwiseOperator:K(Ni),compareOperator:K(Ni),updateOperator:K(Ni),definitionOperator:K(Ni),typeOperator:K(Ni),controlOperator:K(Ni),punctuation:J0,separator:K(J0),bracket:La,angleBracket:K(La),squareBracket:K(La),paren:K(La),brace:K(La),content:Li,heading:Qs,heading1:K(Qs),heading2:K(Qs),heading3:K(Qs),heading4:K(Qs),heading5:K(Qs),heading6:K(Qs),contentSeparator:K(Li),list:K(Li),quote:K(Li),emphasis:K(Li),strong:K(Li),link:K(Li),monospace:K(Li),strikethrough:K(Li),inserted:K(),deleted:K(),changed:K(),invalid:K(),meta:gd,documentMeta:K(gd),annotation:K(gd),processingInstruction:K(gd),definition:At.defineModifier(),constant:At.defineModifier(),function:At.defineModifier(),standard:At.defineModifier(),local:At.defineModifier(),special:At.defineModifier()};FR([{tag:ae.link,class:"tok-link"},{tag:ae.heading,class:"tok-heading"},{tag:ae.emphasis,class:"tok-emphasis"},{tag:ae.strong,class:"tok-strong"},{tag:ae.keyword,class:"tok-keyword"},{tag:ae.atom,class:"tok-atom"},{tag:ae.bool,class:"tok-bool"},{tag:ae.url,class:"tok-url"},{tag:ae.labelName,class:"tok-labelName"},{tag:ae.inserted,class:"tok-inserted"},{tag:ae.deleted,class:"tok-deleted"},{tag:ae.literal,class:"tok-literal"},{tag:ae.string,class:"tok-string"},{tag:ae.number,class:"tok-number"},{tag:[ae.regexp,ae.escape,ae.special(ae.string)],class:"tok-string2"},{tag:ae.variableName,class:"tok-variableName"},{tag:ae.local(ae.variableName),class:"tok-variableName tok-local"},{tag:ae.definition(ae.variableName),class:"tok-variableName tok-definition"},{tag:ae.special(ae.variableName),class:"tok-variableName2"},{tag:ae.definition(ae.propertyName),class:"tok-propertyName tok-definition"},{tag:ae.typeName,class:"tok-typeName"},{tag:ae.namespace,class:"tok-namespace"},{tag:ae.className,class:"tok-className"},{tag:ae.macroName,class:"tok-macroName"},{tag:ae.propertyName,class:"tok-propertyName"},{tag:ae.operator,class:"tok-operator"},{tag:ae.comment,class:"tok-comment"},{tag:ae.meta,class:"tok-meta"},{tag:ae.invalid,class:"tok-invalid"},{tag:ae.punctuation,class:"tok-punctuation"}]);var Bm;const hl=new be;function eF(t){return ne.define({combine:t?e=>e.concat(t):void 0})}const tF=new be;class wi{constructor(e,n,i=[],r=""){this.data=e,this.name=r,ye.prototype.hasOwnProperty("tree")||Object.defineProperty(ye.prototype,"tree",{get(){return Pi(this)}}),this.parser=n,this.extension=[ia.of(this),ye.languageData.of((s,o,l)=>{let a=uS(s,o,l),u=a.type.prop(hl);if(!u)return[];let c=s.facet(u),d=a.type.prop(tF);if(d){let h=a.resolve(o-a.from,l);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return uS(e,n,i).type.prop(hl)==this.data}findRegions(e){let n=e.facet(ia);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(hl)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(be.mounted);if(l){if(l.tree.prop(hl)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof Je&&r(u,s.positions[a]+o)}};return r(Pi(e),0),i}get allowsNesting(){return!0}}wi.setState=pe.define();function uS(t,e,n){let i=t.facet(ia),r=Pi(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Rt.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Pi(t){let e=t.field(wi.state,!1);return e?e.tree:Je.empty}class nF{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Ba=null;class ta{constructor(e,n,i=[],r,s,o,l,a){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new ta(e,n,[],Je.empty,0,i,[],null)}startParse(){return this.parser.startParse(new nF(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Je.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(bo.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(bo.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ba;Ba=this;try{return e()}finally{Ba=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=cS(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,d,h)=>a.push({fromA:u,toA:c,fromB:d,toB:h})),i=bo.applyChanges(i,a),r=Je.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&l.push({from:c,to:d})}}}return new ta(this.parser,n,i,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=cS(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends _R{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=Ba;if(a){for(let u of r)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Je(Sn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ba}}function cS(t,e,n){return bo.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class na{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new na(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=ta.create(e.facet(ia).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new na(i)}}wi.state=Vt.define({create:na.init,update(t,e){for(let n of e.effects)if(n.is(wi.setState))return n.value;return e.startState.facet(ia)!=e.state.facet(ia)?na.init(e.state):t.apply(e)}});let zR=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(zR=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Im=typeof navigator<"u"&&(!((Bm=navigator.scheduling)===null||Bm===void 0)&&Bm.isInputPending)?()=>navigator.scheduling.isInputPending():null,iF=Lt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(wi.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(wi.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=zR(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(wi.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Im?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&i.doc.length>r+1e3,a=s.context.work(()=>Im&&Im()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:wi.setState.of(new na(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Si(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ia=ne.define({combine(t){return t.length?t[0]:null},enables:t=>[wi.state,iF,oe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class rF{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const jR=ne.define(),yw=ne.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Do(t){let e=t.facet(yw);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function nf(t,e){let n="",i=t.tabSize,r=t.facet(yw)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function UR(t,e){t instanceof ye&&(t=new vw(t));for(let i of t.state.facet(jR)){let r=i(t,e);if(r!==void 0)return r}let n=Pi(t.state);return n?oF(t,n,e):null}class vw{constructor(e,n={}){this.state=e,this.options=n,this.unit=Do(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Bf(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const sF=new be;function oF(t,e,n){return VR(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function lF(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function aF(t){let e=t.type.prop(sF);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(be.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>hF(o,!0,1,void 0,s&&!lF(o)?r.from:void 0)}return t.parent==null?uF:null}function VR(t,e,n){for(;t;t=t.parent){let i=aF(t);if(i)return i(ww.create(n,e,t))}return null}function uF(){return 0}class ww extends vw{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.node=i}static create(e,n,i){return new ww(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(cF(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?VR(e,this.pos,this.base):0}}function cF(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function dF(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?n:null;l=a.to}}function hF(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||r==t.pos+o,a=e?dF(t):null;return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}const fF=200;function pF(){return ye.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+fF)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,l=-1,a=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==l)continue;l=c.from;let d=UR(o,c.from);if(d==null)continue;let h=/^\s*/.exec(c.text)[0],f=nf(o,d);h!=f&&a.push({from:c.from,to:c.from+h.length,insert:f})}return a.length?[t,{changes:a,sequential:!0}]:t})}const mF=ne.define(),gF=new be;function yF(t,e,n){let i=Pi(t);if(i.length<n)return null;let r=i.resolveInner(n,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let l=o.type.prop(gF);if(l&&(o.to<i.length-50||i.length==t.doc.length||!vF(o))){let a=l(o,t);a&&a.from<=n&&a.from>=e&&a.to>n&&(s=a)}}return s}function vF(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function HR(t,e,n){for(let i of t.facet(mF)){let r=i(t,e,n);if(r)return r}return yF(t,e,n)}function WR(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const bw=pe.define({map:WR}),cp=pe.define({map:WR});function GR(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const kc=Vt.define({create(){return Se.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(bw)&&!wF(t,n.value.from,n.value.to)?t=t.update({add:[dS.range(n.value.from,n.value.to)]}):n.is(cp)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>oe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(dS.range(i,r))}return Se.set(e,!0)}});function XR(t,e,n){var i;let r=null;return(i=t.field(kc,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function wF(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function JR(t,e){return t.field(kc,!1)?e:e.concat(pe.appendConfig.of(EF()))}const bF=t=>{for(let e of GR(t)){let n=HR(t.state,e.from,e.to);if(n)return t.dispatch({effects:JR(t.state,[bw.of(n),YR(t,n)])}),!0}return!1},xF=t=>{if(!t.state.field(kc,!1))return!1;let e=[];for(let n of GR(t)){let i=XR(t.state,n.from,n.to);i&&e.push(cp.of(i),YR(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function YR(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return oe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const SF=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=HR(e,r.from,r.to);s&&n.push(bw.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:JR(t.state,n)}),!!n.length},kF=t=>{let e=t.state.field(kc,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(cp.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},CF={placeholderDOM:null,placeholderText:""},KR=ne.define({combine(t){return Ws(t,CF)}});function EF(t){let e=[kc,AF];return t&&e.push(KR.of(t)),e}const dS=Se.replace({widget:new class extends _o{toDOM(t){let{state:e}=t,n=e.facet(KR),i=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),l=XR(t.state,o.from,o.to);l&&t.dispatch({effects:cp.of(l)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),AF=oe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class dp{constructor(e,n){this.specs=e;let i;function r(l){let a=Ls.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof wi?l=>l.prop(hl)==o.data:o?l=>l==o:void 0,this.style=FR(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new Ls(i):null,this.themeType=n.themeType}static define(e,n){return new dp(e,n||{})}}const Y0=ne.define(),qR=ne.define({combine(t){return t.length?[t[0]]:null}});function _m(t){let e=t.facet(Y0);return e.length?e:t.facet(qR)}function PF(t,e){let n=[MF],i;return t instanceof dp&&(t.module&&n.push(oe.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(qR.of(t)):i?n.push(Y0.computeN([oe.darkTheme],r=>r.facet(oe.darkTheme)==(i=="dark")?[t]:[])):n.push(Y0.of(t)),n}class RF{constructor(e){this.markCache=Object.create(null),this.tree=Pi(e.state),this.decorations=this.buildDeco(e,_m(e.state))}update(e){let n=Pi(e.state),i=_m(e.state),r=i!=_m(e.startState);n.length<e.view.viewport.to&&!r&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,n){if(!n||!this.tree.length)return Se.none;let i=new Ro;for(let{from:r,to:s}of e.visibleRanges)q6(this.tree,n,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Se.mark({class:a})))},r,s);return i.finish()}}const MF=uc.high(Lt.fromClass(RF,{decorations:t=>t.decorations})),OF=1e4,TF="()[]{}",DF=new be;function K0(t,e,n){let i=t.prop(e<0?be.openedBy:be.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function q0(t){let e=t.type.prop(DF);return e?e(t.node):t}function yd(t,e,n,i={}){let r=i.maxScanDistance||OF,s=i.brackets||TF,o=Pi(t),l=o.resolveInner(e,n);for(let a=l;a;a=a.parent){let u=K0(a.type,n,s);if(u&&a.from<a.to){let c=q0(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return NF(t,e,n,a,c,u,s)}}return LF(t,e,n,o,l.type,r,s)}function NF(t,e,n,i,r,s,o){let l=i.parent,a={from:r.from,to:r.to},u=0,c=l==null?void 0:l.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=q0(c);return{start:a,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(K0(c.type,n,o))u++;else if(K0(c.type,-n,o)){if(u==0){let d=q0(c);return{start:a,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function LF(t,e,n,i,r,s,o){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let g=n>0?0:f.length-1,v=n>0?f.length:-1;g!=v;g+=n){let m=o.indexOf(f[g]);if(!(m<0||i.resolveInner(p+g,1).type!=r))if(m%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+g,to:p+g+1},matched:m>>1==a>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function hS(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class QR{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=hS(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:hS(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function BF(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||IF,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||kw}}function IF(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const fS=new WeakMap;class xw extends wi{constructor(e){let n=eF(e.languageData),i=BF(e),r,s=new class extends _R{createParse(o,l,a){return new $F(r,o,l,a)}};super(n,s,[jR.of((o,l)=>this.getIndent(o,l))],e.name),this.topNode=jF(n),r=this,this.streamParser=i,this.stateAfter=new be({perNode:!0}),this.tokenTable=e.tokenTable?new nM(i.tokenTable):zF}static define(e){return new xw(e)}getIndent(e,n){let i=Pi(e.state),r=i.resolve(n);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=fS.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let l=Sw(this,i,0,r.from,s??n),a,u;if(l?(u=l.state,a=l.pos+1):(u=this.streamParser.startState(e.unit),a=0),n-a>1e4)return null;for(;a<n;){let d=e.state.doc.lineAt(a),h=Math.min(n,d.to);if(d.length){let f=o?o(d.from):-1,p=new QR(d.text,e.state.tabSize,e.unit,f<0?void 0:f);for(;p.pos<h-d.from;)eM(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==n)break;a=d.to+1}let c=e.lineAt(n);return o&&s==null&&fS.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function Sw(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=n+e.positions[o],u=l instanceof Je&&a<r&&Sw(t,l,a,i,r);if(u)return u}return null}function ZR(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],l=e.children[s],a;if(o<i&&l instanceof Je){if(!(a=ZR(t,l,n-o,i-o,r)))break;return r?new Je(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),o+a.length):a}}return null}function _F(t,e,n,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),l=s<=n&&o>n&&Sw(t,r.tree,0-r.offset,n,o),a;if(l&&(a=ZR(t,r.tree,n+r.offset,l.pos+r.offset,!1)))return{state:l.state,tree:a}}return{state:t.streamParser.startState(i?Do(i):4),tree:Je.empty}}class $F{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=ta.get(),o=r[0].from,{state:l,tree:a}=_F(e,i,o,s==null?void 0:s.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Do(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=ta.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,l=this.lineAfter(o);n+=l,i=o+l.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,n,i,r),s}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new QR(n,e?e.state.tabSize:4,e?Do(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=eM(s.token,o,this.state);if(l&&(r=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Je.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:FF,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Je(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Je(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function eM(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const kw=Object.create(null),Zu=[Sn.none],FF=new fw(Zu),pS=[],tM=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])tM[t]=iM(kw,e);class nM{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),tM)}resolve(e){return e?this.table[e]||(this.table[e]=iM(this.extra,e)):0}}const zF=new nM(kw);function $m(t,e){pS.indexOf(t)>-1||(pS.push(t),console.warn(e))}function iM(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||ae[s];o?typeof o=="function"?n?n=o(n):$m(s,`Modifier ${s} used at start of tag`):n?$m(s,`Tag ${s} used as modifier`):n=o:$m(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let i=e.replace(/ /g,"_"),r=Sn.define({id:Zu.length,name:i,props:[Y6({[i]:n})]});return Zu.push(r),r.id}function jF(t){let e=Sn.define({id:Zu.length,name:"Document",props:[hl.add(()=>t)]});return Zu.push(e),e}const UF=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=Cw(t.state,n.from);return i.line?VF(t):i.block?XF(t):!1};function Cc(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const VF=Cc(Ew,0),HF=Cc(Ew,1),WF=Cc(Ew,2),GF=Cc(rM,0),XF=Cc((t,e)=>rM(t,e,YF(e)),0);function Cw(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Ia=50;function JF(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Ia,i),o=t.sliceDoc(r,r+Ia),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,u=s.length-l;if(s.slice(u-e.length,u)==e&&o.slice(a,a+n.length)==n)return{open:{pos:i-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let c,d;r-i<=2*Ia?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+Ia),d=t.sliceDoc(r-Ia,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function YF(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function rM(t,e,n=e.selection.ranges){let i=n.map(s=>Cw(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>JF(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=i[o],{open:u,close:c}=l;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function Ew(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let l=i.length,a=1e9,u=Cw(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<a&&(a=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:l.from+u,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let u=o.from+l,c=u+a.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const Q0=Wr.define(),KF=Wr.define(),qF=ne.define(),sM=ne.define({combine(t){return Ws(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}});function QF(t){let e=0;return t.iterChangedRanges((n,i)=>e=i),e}const oM=Vt.define({create(){return Ji.empty},update(t,e){let n=e.state.facet(sM),i=e.annotation(Q0);if(i){let a=e.docChanged?V.single(QF(e.changes)):void 0,u=gn.fromTransaction(e,a),c=i.side,d=c==0?t.undone:t.done;return u?d=rf(d,d.length,n.minDepth,u):d=uM(d,e.startState.selection),new Ji(c==0?i.rest:d,c==0?d:i.rest)}let r=e.annotation(KF);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(mt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=gn.fromTransaction(e),o=e.annotation(mt.time),l=e.annotation(mt.userEvent);return s?t=t.addChanges(s,o,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Ji(t.done.map(gn.fromJSON),t.undone.map(gn.fromJSON))}});function ZF(t={}){return[oM,sM.of(t),oe.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?lM:e.inputType=="historyRedo"?Z0:null;return i?(e.preventDefault(),i(n)):!1}})]}function Aw(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(oM,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const lM=Aw(0,!1),Z0=Aw(1,!1),ez=Aw(0,!0);class gn{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new gn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new gn(e.changes&&ht.fromJSON(e.changes),[],e.mapped&&qi.fromJSON(e.mapped),e.startSelection&&V.fromJSON(e.startSelection),e.selectionsAfter.map(V.fromJSON))}static fromTransaction(e,n){let i=Zn;for(let r of e.startState.facet(qF)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new gn(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Zn)}static selection(e){return new gn(void 0,Zn,void 0,void 0,e)}}function rf(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function tz(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,l)=>{for(let a=0;a<n.length;){let u=n[a++],c=n[a++];l>=u&&o<=c&&(i=!0)}}),i}function nz(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function aM(t,e){return t.length?e.length?t.concat(e):t:e}const Zn=[],iz=200;function uM(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-iz));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),rf(t,t.length-1,1e9,n.setSelAfter(i)))}else return[gn.selection([e])]}function rz(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Fm(t,e){if(!t.length)return t;let n=t.length,i=Zn;for(;n;){let r=sz(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[gn.selection(i)]:Zn}function sz(t,e,n){let i=aM(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Zn,n);if(!t.changes)return gn.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new gn(r,pe.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const oz=/^(input\.type|delete)($|\.)/;class Ji{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Ji(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||oz.test(i))&&(!l.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,tz(l.changes,e.changes))||i=="input.type.compose")?o=rf(o,o.length-1,r.minDepth,new gn(e.changes.compose(l.changes),aM(e.effects,l.effects),l.mapped,l.startSelection,Zn)):o=rf(o,o.length,r.minDepth,e),new Ji(o,Zn,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Zn;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&nz(s[s.length-1],e)?this:new Ji(uM(this.done,e),this.undone,n,i)}addMapping(e){return new Ji(Fm(this.done,e),Fm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Q0.of({side:e,rest:rz(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?Zn:r.slice(0,r.length-1);return s.mapped&&(o=Fm(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Q0.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ji.empty=new Ji(Zn,Zn);function Ec(t,e){return V.create(t.ranges.map(e),t.mainIndex)}function Gs(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function zo({state:t,dispatch:e},n){let i=Ec(t.selection,n);return i.eq(t.selection)?!1:(e(Gs(t,i)),!0)}function hp(t,e){return V.cursor(e?t.to:t.from)}function cM(t,e){return zo(t,n=>n.empty?t.moveByChar(n,e):hp(n,e))}function Xs(t){return t.textDirectionAt(t.state.selection.main.head)==Xe.LTR}const mS=t=>cM(t,!Xs(t)),gS=t=>cM(t,Xs(t));function dM(t,e){return zo(t,n=>n.empty?t.moveByGroup(n,e):hp(n,e))}const lz=t=>dM(t,!Xs(t)),az=t=>dM(t,Xs(t));function hM(t,e){return zo(t,n=>{if(!n.empty)return hp(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const yS=t=>hM(t,!1),vS=t=>hM(t,!0);function fM(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(oe.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function pM(t,e){let n=fM(t),{state:i}=t,r=Ec(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):hp(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,u=l.bottom-n.marginBottom;o&&o.top>a&&o.bottom<u&&(s=oe.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(Gs(i,r),{effects:s}),!0}const zm=t=>pM(t,!1),jm=t=>pM(t,!0);function fp(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=V.cursor(i.from+s))}return r}const wS=t=>zo(t,e=>fp(t,e,!0)),bS=t=>zo(t,e=>fp(t,e,!1)),uz=t=>zo(t,e=>V.cursor(t.lineBlockAt(e.head).from,1)),cz=t=>zo(t,e=>V.cursor(t.lineBlockAt(e.head).to,-1));function dz(t,e,n){let i=!1,r=Ec(t.selection,s=>{let o=yd(t,s.head,-1)||yd(t,s.head,1)||s.head>0&&yd(t,s.head-1,1)||s.head<t.doc.length&&yd(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return n?V.range(s.anchor,l):V.cursor(l)});return i?(e(Gs(t,r)),!0):!1}const hz=({state:t,dispatch:e})=>dz(t,e,!1);function Js(t,e){let n=Ec(t.state.selection,i=>{let r=e(i);return V.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Gs(t.state,n)),!0)}function mM(t,e){return Js(t,n=>t.moveByChar(n,e))}const xS=t=>mM(t,!Xs(t)),SS=t=>mM(t,Xs(t));function gM(t,e){return Js(t,n=>t.moveByGroup(n,e))}const fz=t=>gM(t,!Xs(t)),pz=t=>gM(t,Xs(t));function yM(t,e){return Js(t,n=>t.moveVertically(n,e))}const kS=t=>yM(t,!1),CS=t=>yM(t,!0);function vM(t,e){return Js(t,n=>t.moveVertically(n,e,fM(t).height))}const ES=t=>vM(t,!1),AS=t=>vM(t,!0),PS=t=>Js(t,e=>fp(t,e,!0)),RS=t=>Js(t,e=>fp(t,e,!1)),mz=t=>Js(t,e=>V.cursor(t.lineBlockAt(e.head).from)),gz=t=>Js(t,e=>V.cursor(t.lineBlockAt(e.head).to)),MS=({state:t,dispatch:e})=>(e(Gs(t,{anchor:0})),!0),OS=({state:t,dispatch:e})=>(e(Gs(t,{anchor:t.doc.length})),!0),TS=({state:t,dispatch:e})=>(e(Gs(t,{anchor:t.selection.main.anchor,head:0})),!0),DS=({state:t,dispatch:e})=>(e(Gs(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),yz=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),vz=({state:t,dispatch:e})=>{let n=mp(t).map(({from:i,to:r})=>V.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:V.create(n),userEvent:"select"})),!0};function pp(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(o);a<o?(n="delete.backward",a=vd(t,a,!1)):a>o&&(n="delete.forward",a=vd(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=vd(t,o,!1),l=vd(t,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:V.cursor(o)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?oe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function vd(t,e,n){if(t instanceof oe)for(let i of t.state.facet(oe.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const wM=(t,e)=>pp(t,n=>{let{state:i}=t,r=i.doc.lineAt(n),s,o;if(!e&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,n-r.from))){if(s[s.length-1]=="	")return n-1;let l=Bf(s,i.tabSize),a=l%Do(i)||Do(i);for(let u=0;u<a&&s[s.length-1-u]==" ";u++)n--;o=n}else o=jt(r.text,n-r.from,e,e)+r.from,o==n&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),Um=t=>wM(t,!1),NS=t=>wM(t,!0),bM=(t,e)=>pp(t,n=>{let i=n,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==n&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let a=jt(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),c=o(u);if(l!=null&&c!=l)break;(u!=" "||i!=n)&&(l=c),i=a}return i}),LS=t=>bM(t,!1),wz=t=>bM(t,!0),BS=t=>pp(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),bz=t=>pp(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),xz=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ke.of(["",""])},range:V.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Sz=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:jt(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:jt(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:t.doc.slice(r,l).append(t.doc.slice(o,r))},range:V.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function mp(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function xM(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of mp(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),l=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let a of s.ranges)r.push(V.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let a of s.ranges)r.push(V.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:V.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const kz=({state:t,dispatch:e})=>xM(t,e,!1),Cz=({state:t,dispatch:e})=>xM(t,e,!0);function SM(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of mp(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Ez=({state:t,dispatch:e})=>SM(t,e,!1),Az=({state:t,dispatch:e})=>SM(t,e,!0),Pz=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(mp(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Ec(e.selection,r=>t.moveVertically(r,!0)).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Rz(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Pi(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(be.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const IS=Mz(!1);function Mz(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),a=!t&&s==o&&Rz(e,s);t&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let u=new vw(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=UR(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let d=["",nf(e,c)];return a&&d.push(nf(e,u.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:ke.of(d)},range:V.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function kM(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>n&&(i.empty||i.to>l.from)&&(e(l,r,i),n=l.number),o=l.to+1}let s=t.changes(r);return{changes:r,range:V.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const _S=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(kM(t,(n,i)=>{i.push({from:n.from,insert:t.facet(yw)})}),{userEvent:"input.indent"})),!0),$S=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(kM(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Bf(r,t.tabSize),o=0,l=nf(t,Math.max(0,s-Do(t)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0);function Ne(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)CM(t,arguments[e]);return t}function CM(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)CM(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const FS=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class ec{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?l=>s(FS(l)):FS,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Yt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=av(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=yi(e);let r=this.normalize(n);for(let s=0,o=i;;s++){let l=r.charCodeAt(s),a=this.match(l,o);if(a)return this.value=a,this;if(s==r.length-1)break;o==i&&s<n.length&&n.charCodeAt(s)==l&&o++}}}match(e,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:n+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(ec.prototype[Symbol.iterator]=function(){return this});const EM={from:-1,to:-1,match:/.*/.exec("")},Pw="gm"+(/x/.unicode==null?"":"u");class AM{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=EM,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new PM(e,n,i,r,s);this.re=new RegExp(n,Pw+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=sf(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=sf(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Vm=new WeakMap;class Tl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=Vm.get(e);if(!r||r.from>=i||r.to<=n){let l=new Tl(n,e.sliceString(n,i));return Vm.set(e,l),l}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),Vm.set(e,new Tl(o,s)),new Tl(n,s.slice(n-o,i-o))}}class PM{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=EM,this.matchPos=sf(e,r),this.re=new RegExp(n,Pw+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Tl.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=sf(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Tl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(AM.prototype[Symbol.iterator]=PM.prototype[Symbol.iterator]=function(){return this});function Oz(t){try{return new RegExp(t,Pw),!0}catch{return!1}}function sf(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function ey(t){let e=Ne("input",{class:"cm-textfield",name:"line"}),n=Ne("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:of.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},Ne("label",t.state.phrase("Go to line"),": ",e)," ",Ne("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,l,a,u,c]=r,d=u?+u.slice(1):0,h=a?+a:o.number;if(a&&c){let p=h/100;l&&(p=p*(l=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*p)}else a&&l&&(h=h*(l=="-"?-1:1)+o.number);let f=s.doc.line(Math.max(1,Math.min(s.doc.lines,h)));t.dispatch({effects:of.of(!1),selection:V.cursor(f.from+Math.max(0,Math.min(d,f.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const of=pe.define(),zS=Vt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(of)&&(t=n.value);return t},provide:t=>Yl.from(t,e=>e?ey:null)}),Tz=t=>{let e=$u(t,ey);if(!e){let n=[of.of(!0)];t.state.field(zS,!1)==null&&n.push(pe.appendConfig.of([zS,Dz])),t.dispatch({effects:n}),e=$u(t,ey)}return e&&e.dom.querySelector("input").focus(),!0},Dz=oe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Nz=({state:t,dispatch:e})=>{let{selection:n}=t,i=V.create(n.ranges.map(r=>t.wordAt(r.head)||V.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Lz(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,l=new ec(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new ec(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const Bz=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Nz({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Lz(t,i);return r?(e(t.update({selection:t.selection.addRange(V.range(r.from,r.to),!1),effects:oe.scrollIntoView(r.to)})),!0):!1},fa=ne.define({combine(t){return Ws(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Hz(e),scrollToMatch:e=>oe.scrollIntoView(e)})}});class RM{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Oz(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Fz(this):new _z(this)}getCursor(e,n=0,i){let r=e.doc?e:ye.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?qo(this,r,n,i):Ko(this,r,n,i)}}class MM{constructor(e){this.spec=e}}function Ko(t,e,n,i){return new ec(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?Iz(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Iz(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(lf(r,n-s))!=Tt.Word||e(af(r,n-s))!=Tt.Word)&&(e(af(r,i-s))!=Tt.Word||e(lf(r,i-s))!=Tt.Word))}class _z extends MM{constructor(e){super(e)}nextMatch(e,n,i){let r=Ko(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=Ko(this.spec,e,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Ko(this.spec,e,s,r),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Ko(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Ko(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function qo(t,e,n,i){return new AM(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?$z(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function lf(t,e){return t.slice(jt(t,e,!1),e)}function af(t,e){return t.slice(e,jt(t,e))}function $z(t){return(e,n,i)=>!i[0].length||(t(lf(i.input,i.index))!=Tt.Word||t(af(i.input,i.index))!=Tt.Word)&&(t(af(i.input,i.index+i[0].length))!=Tt.Word||t(lf(i.input,i.index+i[0].length))!=Tt.Word)}class Fz extends MM{nextMatch(e,n,i){let r=qo(this.spec,e,i,e.doc.length).next();return r.done&&(r=qo(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=qo(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==n||l.from>s+10))return l;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n))}matchAll(e,n){let i=qo(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=qo(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const tc=pe.define(),Rw=pe.define(),Os=Vt.define({create(t){return new Hm(ty(t).create(),null)},update(t,e){for(let n of e.effects)n.is(tc)?t=new Hm(n.value.create(),t.panel):n.is(Rw)&&(t=new Hm(t.query,n.value?Mw:null));return t},provide:t=>Yl.from(t,e=>e.panel)});class Hm{constructor(e,n){this.query=e,this.panel=n}}const zz=Se.mark({class:"cm-searchMatch"}),jz=Se.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Uz=Lt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Os))}update(t){let e=t.state.field(Os);(e!=t.startState.field(Os)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Se.none;let{view:n}=this,i=new Ro;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:l,to:a}=s[r];for(;r<o-1&&a>s[r+1].from-2*250;)a=s[++r].to;t.highlight(n.state,l,a,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?jz:zz)})}return i.finish()}},{decorations:t=>t.decorations});function Ac(t){return e=>{let n=e.state.field(Os,!1);return n&&n.query.spec.valid?t(e,n):LM(e)}}const jS=Ac((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=V.single(i.from,i.to),s=t.state.facet(fa);return t.dispatch({selection:r,effects:[Ow(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),NM(t),!0}),US=Ac((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=V.single(r.from,r.to),o=t.state.facet(fa);return t.dispatch({selection:s,effects:[Ow(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),NM(t),!0}),OM=Ac((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:V.create(n.map(i=>V.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Vz=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let l=new ec(t.doc,t.sliceDoc(i,r));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(V.range(l.value.from,l.value.to))}return e(t.update({selection:V.create(s,o),userEvent:"select.search.matches"})),!0},VS=Ac((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=[],l,a,u=[];if(s.from==i&&s.to==r&&(a=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(n,s.from,s.to),u.push(oe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-a.length;l=V.single(s.from-c,s.to-c),u.push(Ow(t,s)),u.push(n.facet(fa).scrollToMatch(l.main,t))}return t.dispatch({changes:o,selection:l,effects:u,userEvent:"input.replace"}),!0}),TM=Ac((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:oe.announce.of(i),userEvent:"input.replace.all"}),!0});function Mw(t){return t.state.facet(fa).createPanel(t)}function ty(t,e){var n,i,r,s,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let u=t.facet(fa);return new RM({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function DM(t){let e=$u(t,Mw);return e&&e.dom.querySelector("[main-field]")}function NM(t){let e=DM(t);e&&e==t.root.activeElement&&e.select()}const LM=t=>{let e=t.state.field(Os,!1);if(e&&e.panel){let n=DM(t);if(n&&n!=t.root.activeElement){let i=ty(t.state,e.query.spec);i.valid&&t.dispatch({effects:tc.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[Rw.of(!0),e?tc.of(ty(t.state,e.query.spec)):pe.appendConfig.of(Gz)]});return!0},BM=t=>{let e=t.state.field(Os,!1);if(!e||!e.panel)return!1;let n=$u(t,Mw);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Rw.of(!1)}),!0};class Hz{constructor(e){this.view=e;let n=this.query=e.state.field(Os).query.spec;this.commit=this.commit.bind(this),this.searchField=Ne("input",{value:n.search,placeholder:Cn(e,"Find"),"aria-label":Cn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ne("input",{value:n.replace,placeholder:Cn(e,"Replace"),"aria-label":Cn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ne("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Ne("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Ne("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Ne("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Ne("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>jS(e),[Cn(e,"next")]),i("prev",()=>US(e),[Cn(e,"previous")]),i("select",()=>OM(e),[Cn(e,"all")]),Ne("label",null,[this.caseField,Cn(e,"match case")]),Ne("label",null,[this.reField,Cn(e,"regexp")]),Ne("label",null,[this.wordField,Cn(e,"by word")]),...e.state.readOnly?[]:[Ne("br"),this.replaceField,i("replace",()=>VS(e),[Cn(e,"replace")]),i("replaceAll",()=>TM(e),[Cn(e,"replace all")])],Ne("button",{name:"close",onclick:()=>BM(e),"aria-label":Cn(e,"close"),type:"button"},[""])])}commit(){let e=new RM({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:tc.of(e)}))}keydown(e){n5(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?US:jS)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),VS(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(tc)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(fa).top}}function Cn(t,e){return t.state.phrase(e)}const wd=30,bd=/[\s\.,:;?!]/;function Ow(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-wd),o=Math.min(r,n+wd),l=t.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<wd;a++)if(!bd.test(l[a+1])&&bd.test(l[a])){l=l.slice(a);break}}if(o!=r){for(let a=l.length-1;a>l.length-wd;a--)if(!bd.test(l[a-1])&&bd.test(l[a])){l=l.slice(0,a);break}}return oe.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const Wz=oe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Gz=[Os,uc.lowest(Uz),Wz];class Xz{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=Pi(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(IM(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function HS(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Jz(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=HS(e)+HS(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Yz(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Jz(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class WS{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Dl(t){return t.selection.main.from}function IM(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const Kz=Wr.define();function qz(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(l=>l!=r&&n!=i&&t.sliceDoc(l.from+s,l.from+o)!=t.sliceDoc(n,i)?{range:l}:{changes:{from:l.from+s,to:i==r.from?l.to:l.from+o,insert:e},range:V.cursor(l.from+s+e.length)})),{userEvent:"input.complete"})}const GS=new WeakMap;function Qz(t){if(!Array.isArray(t))return t;let e=GS.get(t);return e||GS.set(t,e=Yz(t)),e}const _M=pe.define(),Tw=pe.define();class Zz{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Yt(e,n),r=yi(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Yt(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=Yt(e,0),w=yi(y),b=w==e.length?0:-100;if(y!=n[0])if(y==i[0])b+=-200;else return!1;return this.ret(b,[0,w])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,u=0;if(l<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<a;){let b=Yt(e,y);(b==n[u]||b==i[u])&&(r[u++]=y),y+=yi(b)}if(u<a)return!1}let c=0,d=0,h=!1,f=0,p=-1,g=-1,v=/[a-z]/.test(e),m=!0;for(let y=0,w=Math.min(e.length,200),b=0;y<w&&d<a;){let k=Yt(e,y);l<0&&(c<a&&k==n[c]&&(s[c++]=y),f<a&&(k==n[f]||k==i[f]?(f==0&&(p=y),g=y+1,f++):f=0));let A,P=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(A=av(k))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!y||P==1&&v||b==0&&P!=0)&&(n[d]==k||i[d]==k&&(h=!0)?o[d++]=y:o.length&&(m=!1)),b=P,y+=yi(k)}return d==a&&o[0]==0&&m?this.result(-100+(h?-200:0),o,e):f==a&&p==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):f==a?this.ret(-200+-700-e.length,[p,g]):d==a?this.result(-100+(h?-200:0)+-700+(m?0:-1100),o,e):n.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let l=o+(this.astral?yi(Yt(i,o)):1);s&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return this.ret(e-i.length,r)}}const Mr=ne.define({combine(t){return Ws(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:ej,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>XS(e(i),n(i)),optionClass:(e,n)=>i=>XS(e(i),n(i)),addToOptions:(e,n)=>e.concat(n)})}});function XS(t,e){return t?e?t+" "+e:t:e}function ej(t,e,n,i,r){let s=t.textDirection==Xe.RTL,o=s,l=!1,a="top",u,c,d=e.left-r.left,h=r.right-e.right,f=i.right-i.left,p=i.bottom-i.top;if(o&&d<Math.min(f,h)?o=!1:!o&&h<Math.min(f,d)&&(o=!0),f<=(o?d:h))u=Math.max(r.top,Math.min(n.top,r.bottom-p))-e.top,c=Math.min(400,o?d:h);else{l=!0,c=Math.min(400,(s?e.right:r.right-e.left)-30);let g=r.bottom-e.bottom;g>=p||g>e.top?u=n.bottom-e.top:(a="bottom",u=e.bottom-n.top)}return{style:`${a}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(l?s?"left-narrow":"right-narrow":o?"left":"right")}}function tj(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r){let s=document.createElement("span");s.className="cm-completionLabel";let o=n.displayLabel||n.label,l=0;for(let a=0;a<r.length;){let u=r[a++],c=r[a++];u>l&&s.appendChild(document.createTextNode(o.slice(l,u)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(u,c))),d.className="cm-completionMatchedText",l=c}return l<o.length&&s.appendChild(document.createTextNode(o.slice(l))),s},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function JS(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class nj{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,l=e.state.facet(Mr);this.optionContent=tj(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=JS(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{for(let u=a.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<s.length){this.applyCompletion(e,s[+c[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Mr).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Tw.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,i,r;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=s.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=JS(n.options.length,n.selected,this.view.state.facet(Mr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>Si(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&rj(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Mr).positionInfo(this.view,n,r,i,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:u}=l;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(l);d&&(c.className=d);for(let h of this.optionContent){let f=h(l,this.view.state,a);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function ij(t,e){return n=>new nj(n,t,e)}function rj(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<n.top?t.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(t.scrollTop+=i.bottom-n.bottom)}function YS(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function sj(t,e){let n=[],i=null,r=a=>{n.push(a);let{section:u}=a.completion;if(u){i||(i=[]);let c=typeof u=="string"?u:u.name;i.some(d=>d.name==c)||i.push(typeof u=="string"?{name:c}:u)}};for(let a of t)if(a.hasResult()){let u=a.result.getMatch;if(a.result.filter===!1)for(let c of a.result.options)r(new WS(c,a.source,u?u(c):[],1e9-n.length));else{let c=new Zz(e.sliceDoc(a.from,a.to));for(let d of a.result.options)if(c.match(d.label)){let h=d.displayLabel?u?u(d,c.matched):[]:c.matched;r(new WS(d,a.source,h,c.score+(d.boost||0)))}}}if(i){let a=Object.create(null),u=0,c=(d,h)=>{var f,p;return((f=d.rank)!==null&&f!==void 0?f:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(d.name<h.name?-1:1)};for(let d of i.sort(c))u-=1e5,a[d.name]=u;for(let d of n){let{section:h}=d.completion;h&&(d.score+=a[typeof h=="string"?h:h.name])}}let s=[],o=null,l=e.facet(Mr).compareCompletions;for(let a of n.sort((u,c)=>c.score-u.score||l(u.completion,c.completion))){let u=a.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?s.push(a):YS(a.completion)>YS(o)&&(s[s.length-1]=a),o=a.completion}return s}class fl{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new fl(this.options,KS(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s){let o=sj(e,n);if(!o.length)return r&&e.some(a=>a.state==1)?new fl(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=n.facet(Mr).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let a=r.options[r.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==a){l=u;break}}return new fl(o,KS(i,l),{pos:e.reduce((a,u)=>u.hasResult()?Math.min(a,u.from):a,1e8),create:ij(pa,FM),above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new fl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class uf{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new uf(aj,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Mr),s=(i.override||n.languageDataAt("autocomplete",Dl(n)).map(Qz)).map(l=>(this.active.find(u=>u.source==l)||new Tn(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!oj(s,this.active)?o=fl.build(s,n,this.id,o,i):o&&o.disabled&&!s.some(l=>l.state==1)&&(o=null),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Tn(l.source,0):l));for(let l of e.effects)l.is($M)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new uf(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:lj}}function oj(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const lj={"aria-autocomplete":"list"};function KS(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const aj=[];function uj(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Tn{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=uj(e),r=this;i?r=r.handleUserEvent(e,i,n):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new Tn(r.source,0));for(let s of e.effects)if(s.is(_M))r=new Tn(r.source,1,s.value?Dl(e.state):-1);else if(s.is(Tw))r=new Tn(r.source,0);else if(s.is(dj))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new Tn(this.source,1)}handleChange(e){return e.changes.touchesRange(Dl(e.startState))?new Tn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Tn(this.source,this.state,e.mapPos(this.explicitPos))}}class fu extends Tn{constructor(e,n,i,r,s){super(e,2,n),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,n,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Dl(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||n=="delete"&&Dl(e.startState)==this.from)return new Tn(this.source,n=="input"&&i.activateOnTyping?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return cj(this.result.validFor,e.state,s,o)?new fu(this.source,a,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new Xz(e.state,l,a>=0)))?new fu(this.source,a,u,u.from,(r=u.to)!==null&&r!==void 0?r:Dl(e.state)):new Tn(this.source,1,a)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Tn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new fu(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function cj(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):IM(t,!0).test(r)}const dj=pe.define({map(t,e){return t.map(n=>n.map(e))}}),$M=pe.define(),pa=Vt.define({create(){return uf.start()},update(t,e){return t.update(e)},provide:t=>[vv.from(t,e=>e.tooltip),oe.contentAttributes.from(t,e=>e.attrs)]});function FM(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(pa).active.find(r=>r.source==e.source);return i instanceof fu?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},qz(t.state,n,i.from,i.to)),{annotations:Kz.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}function xd(t,e="option"){return n=>{let i=n.state.field(pa,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Mr).interactionDelay)return!1;let r=1,s;e=="page"&&(s=B5(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),n.dispatch({effects:$M.of(l)}),!0}}const qS=t=>{let e=t.state.field(pa,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Mr).interactionDelay?!1:FM(t,e.open.options[e.open.selected])},hj=t=>t.state.field(pa,!1)?(t.dispatch({effects:_M.of(!0)}),!0):!1,fj=t=>{let e=t.state.field(pa,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Tw.of(null)}),!0)},zM={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},jM=new class extends Po{};jM.startSide=1;jM.endSide=-1;const Wm="()[]{}<>";function pj(t){for(let e=0;e<Wm.length;e+=2)if(Wm.charCodeAt(e)==t)return Wm.charAt(e+1);return av(t<128?t:t+1)}function mj(t,e){return t.languageDataAt("closeBrackets",e)[0]||zM}const gj=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=mj(t,t.selection.main.head).brackets||zM.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let l=vj(t.doc,o.head);for(let a of i)if(a==l&&yj(t.doc,o.head)==pj(Yt(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:V.cursor(o.head-a.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function yj(t,e){let n=t.sliceString(e,e+2);return n.slice(0,yi(Yt(n,0)))}function vj(t,e){let n=t.sliceString(e-2,e);return yi(Yt(n,0))==n.length?n:n.slice(1)}class wj{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class ro{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(po).markerFilter;s&&(r=s(r));let o=Se.set(r.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?Se.widget({widget:new Oj(l),diagnostic:l}).range(l.from):Se.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new ro(o,n,ra(o))}}function ra(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new wj(r,s,o.diagnostic),!1}),i}function bj(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(i=>i.is(Dw))||t.changes.touchesRange(n.from,n.to))}function UM(t,e){return t.field(yn,!1)?e:e.concat(pe.appendConfig.of(GM))}function xj(t,e){return{effects:UM(t,[Dw.of(e)])}}const Dw=pe.define(),Nw=pe.define(),VM=pe.define(),yn=Vt.define({create(){return new ro(Se.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=ra(n,t.selected.diagnostic,r)||ra(n,null,r)}t=new ro(n,t.panel,i)}for(let n of e.effects)n.is(Dw)?t=ro.init(n.value,t.panel,e.state):n.is(Nw)?t=new ro(t.diagnostics,n.value?gp.open:null,t.selected):n.is(VM)&&(t=new ro(t.diagnostics,t.panel,n.value));return t},provide:t=>[Yl.from(t,e=>e.panel),oe.decorations.from(t,e=>e.diagnostics)]});function Sj(t){let e=t.field(yn,!1);return e?e.diagnostics.size:0}const kj=Se.mark({class:"cm-lintRange cm-lintRange-active"});function Cj(t,e,n){let{diagnostics:i}=t.state.field(yn),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(a,u,{spec:c})=>{e>=a&&e<=u&&(a==u||(e>a||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(a,s),o=Math.max(u,o))});let l=t.state.facet(po).tooltipFilter;return l&&(r=l(r)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Ej(t,r)}}}:null}function Ej(t,e){return Ne("ul",{class:"cm-tooltip-lint"},e.map(n=>WM(t,n,!1)))}const Aj=t=>{let e=t.state.field(yn,!1);(!e||!e.panel)&&t.dispatch({effects:UM(t.state,[Nw.of(!0)])});let n=$u(t,gp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},QS=t=>{let e=t.state.field(yn,!1);return!e||!e.panel?!1:(t.dispatch({effects:Nw.of(!1)}),!0)},Pj=t=>{let e=t.state.field(yn,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Rj=Lt.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(po);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(po);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(xj(this.view.state,r))},i=>{Si(this.view.state,i)})}}update(t){let e=t.state.facet(po);(t.docChanged||e!=t.startState.facet(po)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),po=ne.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Ws(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Mj(t,e={}){return[po.of({source:t,config:e}),Rj,GM]}function HM(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function WM(t,e,n){var i;let r=n?HM(e.actions):[];return Ne("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ne("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=!1,a=h=>{if(h.preventDefault(),l)return;l=!0;let f=ra(t.state.field(yn).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),Ne("u",u.slice(c,c+1)),u.slice(c+1)];return Ne("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Ne("div",{class:"cm-diagnosticSource"},e.source))}class Oj extends _o{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ne("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class ZS{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=WM(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class gp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)QS(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=HM(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let a=ra(this.view.state.field(yn).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Ne("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Ne("div",{class:"cm-panel-lint"},this.list,Ne("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>QS(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(yn).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(yn),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==a.diagnostic){u=d;break}u<0?(c=new ZS(this.view,a.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new ZS(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{o.top<l.top?this.list.scrollTop-=l.top-o.top:o.bottom>l.bottom&&(this.list.scrollTop+=o.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(yn),i=ra(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:VM.of(i)})}static open(e){return new gp(e)}}function Tj(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Sd(t){return Tj(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Dj=oe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Sd("#d11")},".cm-lintRange-warning":{backgroundImage:Sd("orange")},".cm-lintRange-info":{backgroundImage:Sd("#999")},".cm-lintRange-hint":{backgroundImage:Sd("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),GM=[yn,oe.decorations.compute([yn],t=>{let{selected:e,panel:n}=t.field(yn);return!e||!n||e.from==e.to?Se.none:Se.set([kj.range(e.from,e.to)])}),L5(Cj,{hideOn:bj}),Dj],XM=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},Nj=XM("up"),Lj=XM("down"),Bj=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(V.range(s,s)):e=V.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},Ij=[{key:"Ctrl-Space",run:hj},{key:"Escape",run:fj},{key:"ArrowDown",run:xd(!0)},{key:"ArrowUp",run:xd(!1)},{key:"PageDown",run:xd(!0,"page")},{key:"PageUp",run:xd(!1,"page")},{key:"Enter",run:qS},{key:"Tab",run:qS},{key:"Mod-f",run:LM,scope:"editor search-panel"},{key:"Escape",run:BM,scope:"editor search-panel"},{key:"Alt-Enter",run:OM,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:TM,scope:"editor search-panel"},{key:"Ctrl-g",run:Tz},{key:"Mod-d",run:Bz,preventDefault:!0},{key:"Shift-Mod-l",run:Vz},{key:"Enter",run:IS,shift:IS},{key:"ArrowLeft",run:mS,shift:xS,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:lz,shift:fz},{key:"ArrowRight",run:gS,shift:SS,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:az,shift:pz},{key:"ArrowUp",run:yS,shift:kS,preventDefault:!0},{key:"ArrowDown",run:vS,shift:CS,preventDefault:!0},{key:"Home",run:bS,shift:RS},{mac:"Cmd-ArrowLeft",run:bS,shift:RS},{key:"Mod-Home",run:MS,shift:TS},{mac:"Cmd-ArrowUp",run:MS,shift:TS},{key:"PageUp",run:zm,shift:ES},{mac:"Ctrl-ArrowUp",run:zm,shift:ES},{key:"PageDown",run:jm,shift:AS},{mac:"Ctrl-ArrowDown",run:jm,shift:AS},{key:"End",run:wS,shift:PS},{mac:"Cmd-ArrowRight",run:wS,shift:PS},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Nj,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Lj,preventDefault:!0},{key:"Shift-Alt-i",run:Bj},{key:"Mod-End",run:OS,shift:DS},{mac:"Cmd-ArrowDown",run:OS,shift:DS},{key:"Mod-a",run:yz},{key:"Backspace",run:gj},{key:"Backspace",run:Um,shift:Um},{key:"Delete",run:NS},{key:"Mod-Backspace",mac:"Alt-Backspace",run:LS},{key:"Mod-Delete",mac:"Alt-Delete",run:wz},{mac:"Mod-Backspace",run:bz},{mac:"Mod-Delete",run:BS},{mac:"Ctrl-b",run:mS,shift:xS,preventDefault:!0},{mac:"Ctrl-f",run:gS,shift:SS},{mac:"Ctrl-p",run:yS,shift:kS},{mac:"Ctrl-n",run:vS,shift:CS},{mac:"Ctrl-a",run:uz,shift:mz},{mac:"Ctrl-e",run:cz,shift:gz},{mac:"Ctrl-d",run:NS},{mac:"Ctrl-h",run:Um},{mac:"Ctrl-k",run:BS},{mac:"Ctrl-Alt-h",run:LS},{mac:"Ctrl-o",run:xz},{mac:"Ctrl-t",run:Sz},{mac:"Ctrl-v",run:jm},{mac:"Alt-v",run:zm},{key:"Shift-Mod-k",run:Pz},{key:"Alt-ArrowDown",run:Cz},{key:"Alt-ArrowUp",run:kz},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Az},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Ez},{key:"Mod-l",run:vz,preventDefault:!0},{key:"Shift-Mod-\\",run:hz},{key:"Tab",run:_S,shift:$S,preventDefault:!0},{key:"Mod-[",run:$S},{key:"Mod-]",run:_S},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:bF},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:xF},{key:"Mod-k Mod-0",run:SF},{key:"Mod-k Mod-j",run:kF},{key:"Mod-k Mod-c",run:HF},{key:"Mod-k Mod-u",run:WF},{key:"Mod-/",run:UF},{key:"Shift-Alt-a",run:GF},{key:"Mod-z",run:lM,preventDefault:!0},{key:"Mod-y",run:Z0,preventDefault:!0},{key:"Mod-Shift-z",run:Z0,preventDefault:!0},{key:"Mod-u",run:ez,preventDefault:!0},{key:"Mod-Shift-m",run:Aj},{key:"F8",run:Pj}];function _j(t){const e=document.createElement("div");return ek(t.state,e),{dom:e,update(n){ek(n.view.state,e)}}}function ek(t,e){const n=Sj(t);e.textContent=xv(Ff(),"editor.lintSummary",n),e.className=Kn("border-t border-stone-600 bg-stone-800 pr-3 text-right font-sans text-xs tracking-wider",n===0?"text-stone-400":"font-semibold text-red-400")}const JM="vonsim-program",$j=Lt.fromClass(class{constructor(t){Y(this,"timeout",null);this.view=t}update(t){t.docChanged&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=this.view.state.doc.toString();localStorage.setItem(JM,e),this.timeout=null},500))}}),Fj=`; Bienvenido a VonSim!
; Este es un ejemplo de cdigo que calcula los primeros
; n nmeros de la sucesin de Fibonacci, y se guardan a
; partir de la posicin 1000h de la memoria.

     n EQU 10    ; Calcula los primeros 10 nmeros

       ORG 1000h
inicio DB 1

       ORG 2000h
       MOV BX, OFFSET inicio + 1
       MOV AL, 0
       MOV AH, inicio

BUCLE: CMP BX, OFFSET inicio + n
       JNS FIN
       MOV CL, AH
       ADD CL, AL
       MOV AL, AH
       MOV AH, CL
       MOV [BX], CL
       INC BX
       JMP BUCLE
  FIN: HLT
       END
`,zj=localStorage.getItem(JM)||Fj,En={comment:ae.comment,"data-directive":At.define(),identifier:ae.variableName,instruction:At.define(),label:ae.labelName,number:ae.number,operator:ae.operator,offset:At.define(),"ptr-size":At.define(),punctuation:ae.punctuation,register:At.define(),special:At.define(),string:ae.string,unassigned:At.define()},jj=xw.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":rv.includes(e)?"data-directive":sv.includes(e)?"instruction":Eh.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:En}),Uj=PF(dp.define([{tag:En.comment,class:"text-stone-400 italic"},{tag:En["data-directive"],class:"text-rose-400"},{tag:En.instruction,class:"text-mantis-400"},{tag:En.number,class:"text-amber-500 font-semibold"},{tag:En.operator,class:"text-rose-400"},{tag:En.offset,class:"text-rose-400 italic"},{tag:En["ptr-size"],class:"text-rose-400 italic"},{tag:En.punctuation,class:"text-stone-500"},{tag:En.register,class:"text-amber-500 italic"},{tag:En.special,class:"text-sky-300 italic"},{tag:En.string,class:"text-emerald-300"},{tag:En.unassigned,class:"text-rose-400"}])),Vj=Mj(t=>{const e=t.state.doc.toString(),n=lv(e);if(n.success)return[];const i=Ff();return n.errors.map(r=>{var l,a;const s=((l=r.position)==null?void 0:l.start)??0,o=((a=r.position)==null?void 0:a.end)??e.length;return{message:r.translate(i),severity:"error",from:s,to:o}})},{delay:200});function Hj(){return new rF(jj,[Uj,Vj])}function Wj({className:t}){const[e,n]=S.useState(),i=S.useCallback(r=>{r&&n(r)},[]);return S.useEffect(()=>{if(e)return window.codemirror=new oe({state:ye.create({doc:zj,extensions:[ye.tabSize.of(2),yA.of(ye.readOnly.of(!1)),$j,V5(),X5,G5(),w5(),ZF(),a5(),f5(),ye.allowMultipleSelections.of(!0),pF(),E5(),rA.of([...Ij,{key:"Escape",run:r=>(r.dispatch({selection:V.create([r.state.selection.main],0)}),!0)}]),Hj(),Yl.of(_j)]}),parent:e}),()=>{var r;return(r=window.codemirror)==null?void 0:r.destroy()}},[e]),fN(r=>r.ctrlKey&&r.key==="s",r=>{if(r.preventDefault(),!window.codemirror)return;const s=new Blob([window.codemirror.state.doc.toString()],{type:"text/plain"}),o=URL.createObjectURL(s),l=document.createElement("a");l.style.display="none",l.href=o,l.download=`vonsim-${new Date().toISOString().slice(0,16)}.txt`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}),M.jsx("div",{ref:i,className:Kn("overflow-auto font-mono",t)})}var ei=function(t,e){return Number(t.toFixed(e))},Gj=function(t,e){return typeof t=="number"?t:e},Ue=function(t,e,n){n&&typeof n=="function"&&n(t,e)},Xj=function(t){return-Math.cos(t*Math.PI)/2+.5},Jj=function(t){return t},Yj=function(t){return t*t},Kj=function(t){return t*(2-t)},qj=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},Qj=function(t){return t*t*t},Zj=function(t){return--t*t*t+1},e9=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},t9=function(t){return t*t*t*t},n9=function(t){return 1- --t*t*t*t},i9=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},r9=function(t){return t*t*t*t*t},s9=function(t){return 1+--t*t*t*t*t},o9=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},YM={easeOut:Xj,linear:Jj,easeInQuad:Yj,easeOutQuad:Kj,easeInOutQuad:qj,easeInCubic:Qj,easeOutCubic:Zj,easeInOutCubic:e9,easeInQuart:t9,easeOutQuart:n9,easeInOutQuart:i9,easeInQuint:r9,easeOutQuint:s9,easeInOutQuint:o9},KM=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Xi=function(t){t.mounted&&(KM(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function qM(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;Xi(t),t.animation=function(){if(!t.mounted)return KM(t.animation);var o=new Date().getTime()-r,l=o/n,a=YM[e],u=a(l);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function l9(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Ys(t,e,n,i){var r=l9(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,l=o.scale,a=o.positionX,u=o.positionY,c=e.scale-l,d=e.positionX-a,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):qM(t,i,n,function(f){var p=l+c*f,g=a+d*f,v=u+h*f;s(p,g,v)})}}function a9(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,l=s*n,a=o*n,u=i-l,c=r-a;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:l,newDiffWidth:u,newContentHeight:a,newDiffHeight:c}}var u9=function(t,e,n,i,r,s,o){var l=t>e?n*(o?1:.5):0,a=i>r?s*(o?1:.5):0,u=t-e-l,c=l,d=i-r-a,h=a;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},Lw=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=a9(n,i,e),o=s.wrapperWidth,l=s.wrapperHeight,a=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=u9(o,a,u,l,c,d,!!r);return h},ny=function(t,e,n,i){return i?t<e?ei(e,2):t>n?ei(n,2):ei(t,2):ei(t,2)},sa=function(t,e){var n=Lw(t,e);return t.bounds=n,n};function yp(t,e,n,i,r,s,o){var l=n.minPositionX,a=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=ny(t,l-d,u+d,i),p=ny(e,a-h,c+h,i);return{x:f,y:p}}function vp(t,e,n,i,r,s){var o=t.transformState,l=o.scale,a=o.positionX,u=o.positionY,c=i-l;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:a,y:u};var d=a-e*c,h=u-n*c,f=yp(d,h,r,s,0,0,null);return f}function Pc(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var tk=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o=r==null?void 0:r.contains(s),l=i&&s&&o;if(!l)return!1;var a=wp(s,n);return!a},nk=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},c9=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},d9=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var l=n[0].clientX,a=n[0].clientY;t.startCoords={x:l-r,y:a-s}}};function h9(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,l=s.limitToBounds,a=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,g=n>d||n<h,v=i>f||i<p,m=n>d?u.offsetWidth:t.setup.minPositionX||0,y=i>f?u.offsetHeight:t.setup.minPositionY||0,w=vp(t,m,y,r,t.bounds,l||a),b=w.x,k=w.y;return{scale:r,positionX:g?b:n,positionY:v?k:i}}}function f9(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,l=t.bounds,a=t.transformState,u=a.scale,c=a.positionX,d=a.positionY;if(!(o===null||l===null||e===c&&n===d)){var h=yp(e,n,l,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var p9=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,l=s.lockAxisY,a=r.positionX,u=r.positionY;if(!i)return{x:a,y:u};var c=e-i.x,d=n-i.y,h=o?a:c,f=l?u:d;return{x:h,y:f}},cf=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},m9=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,l=!o||s>1||!i||e;return!!l},g9=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,l=t.transformState.scale,a=o.disabled,u=!a||l>1||!s||e;return!(!u||!n||!i)};function y9(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function ik(t,e,n,i,r,s,o,l,a,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>a?a:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<l?l:c>s?s:c}}return i?e:ny(t,s,o,r)}function v9(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function w9(t,e){var n=m9(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,l=s.velocityAnimation.equalToMove,a=Date.now();if(i&&r&&o){var u=v9(o,l),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=a-r,g=c*c+d*d,v=Math.sqrt(g)/p;t.velocity={velocityX:h,velocityY:f,total:v}}t.lastMousePosition=e,t.velocityTime=a}}function b9(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=g9(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,l=e.velocityY,a=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,g=i.zoomAnimation,v=i.panning,m=v.lockAxisY,y=v.lockAxisX,w=g.animationType,b=p.sizeX,k=p.sizeY,A=p.velocityAlignmentTime,P=A,B=y9(t,a),C=Math.max(B,P),E=cf(t,b),R=cf(t,k),O=E*r.offsetWidth/100,N=R*r.offsetHeight/100,T=u+O,I=c-O,$=d+N,z=h-N,L=t.transformState,_=new Date().getTime();qM(t,w,C,function(j){var ee=t.transformState,re=ee.scale,me=ee.positionX,nt=ee.positionY,ot=new Date().getTime()-_,Qe=ot/P,gt=YM[p.animationType],lr=1-gt(Math.min(1,Qe)),kn=1-j,Xr=me+o*kn,jo=nt+l*kn,Mi=ik(Xr,L.positionX,me,y,f,c,u,I,T,lr),he=ik(jo,L.positionY,nt,m,f,h,d,z,$,lr);(me!==Xr||nt!==jo)&&t.setTransformState(re,Mi,he)})}}function rk(t,e){var n=t.transformState.scale;Xi(t),sa(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?d9(t,e):c9(t,e)}function QM(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,l=r.sizeY,a=r.animationTime,u=r.animationType,c=s||e<i||!o&&!l;if(!c){var d=h9(t);d&&Ys(t,d,a,u)}}function sk(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,l=s.sizeY;if(i){var a=p9(t,e,n),u=a.x,c=a.y,d=cf(t,o),h=cf(t,l);w9(t,{x:u,y:c}),f9(t,u,c,d,h)}}function x9(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),l=(s==null?void 0:s.width)||0,a=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=l<u||a<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?b9(t):QM(t)}}function Bw(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,l=r.limitToBounds,a=Pc(ei(e,2),s,o,0,!1),u=sa(t,a),c=vp(t,n,i,a,u,l),d=c.x,h=c.y;return{scale:a,positionX:d,positionY:h}}function ZM(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,l=s.limitToBounds,a=s.zoomAnimation,u=a.disabled,c=a.animationTime,d=a.animationType,h=u||i>=o;if((i>=1||l)&&QM(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,g=Bw(t,o,f,p);g&&Ys(t,g,c,d)}}var Ts=function(){return Ts=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ts.apply(this,arguments)};function ok(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var kd={previousScale:1,scale:1,positionX:0,positionY:0},_a={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},eO=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:kd.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:kd.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:kd.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:kd.positionY}},lk=function(t){var e=Ts({},_a);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof _a[n]<"u";if(r&&i){var s=Object.prototype.toString.call(_a[n]),o=s==="[object Object]",l=s==="[object Array]";o?e[n]=Ts(Ts({},_a[n]),t[n]):l?e[n]=ok(ok([],_a[n],!0),t[n],!0):e[n]=t[n]}}),e},tO=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,l=s.minScale,a=s.zoomAnimation,u=s.smooth,c=a.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=Pc(ei(d,3),l,o,c,!1);return h};function nO(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,l=o.scale,a=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-a)/l,f=(d/2-u)/l,p=tO(t,e,n),g=Bw(t,p,h,f);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");Ys(t,g,i,r)}function iO(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,l=eO(t.props),a=t.transformState,u=a.scale,c=a.positionX,d=a.positionY;if(s){var h=Lw(t,l.scale),f=yp(l.positionX,l.positionY,h,o,0,0,s),p={scale:l.scale,positionX:f.x,positionY:f.y};u===l.scale&&c===l.positionX&&d===l.positionY||(i==null||i(),Ys(t,p,e,n))}}function S9(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),l=s.x*i.scale,a=s.y*i.scale;return{x:(r.x-o.x+l)/i.scale,y:(r.y-o.y+a)/i.scale}}function k9(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,l=o.limitToBounds,a=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=S9(e,i,r,s),f=h.x,p=h.y,g=d.width/s.scale,v=d.height/s.scale,m=i.offsetWidth/g,y=i.offsetHeight/v,w=Pc(n||Math.min(m,y),a,u,0,!1),b=(c.width-g*w)/2,k=(c.height-v*w)/2,A=(c.left-f)*w+b,P=(c.top-p)*w+k,B=Lw(t,w),C=yp(A,P,B,l,0,0,i),E=C.x,R=C.y;return{positionX:E,positionY:R,scale:w}}var C9=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),nO(t,1,e,n,i)}},E9=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),nO(t,-1,e,n,i)}},A9=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,l=o.positionX,a=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?l:e,positionY:Number.isNaN(n)?a:n,scale:Number.isNaN(i)?u:i};Ys(t,f,r,s)}}},P9=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),iO(t,e,n)}},R9=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var l=rO(e||r.scale,s,o);Ys(t,l,n,i)}}},M9=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),Xi(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var l=k9(t,o,n);Ys(t,l,i,r)}}},iy=function(t){return{instance:t,zoomIn:C9(t),zoomOut:E9(t),setTransform:A9(t),resetTransform:P9(t),centerView:R9(t),zoomToElement:M9(t)}},O9=function(t){return{instance:t,state:t.transformState}},Te=function(t){var e={};return Object.assign(e,O9(t)),Object.assign(e,iy(t)),e},Gm=!1;function Xm(){try{var t={get passive(){return Gm=!0,!1}};return t}catch{return Gm=!1,Gm}}var wp=function(t,e){var n=t.tagName.toUpperCase(),i=e.find(function(s){return s.toUpperCase()===n});if(i)return!0;var r=e.find(function(s){return t.classList.contains(s)});return!!r},ry=function(t){t&&clearTimeout(t)},T9=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},rO=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function D9(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var N9=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,l=t.isInitialized,a=t.isPanning,u=e.target,c=l&&!a&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=wp(u,o);return!d},L9=function(t){return t?t.deltaY<0?1:-1:0};function B9(t,e){var n=L9(t),i=Gj(e,n);return i}function sO(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var I9=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,l=t.setup,a=l.maxScale,u=l.minScale,c=l.zoomAnimation,d=l.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(r)return p;var g=i?!1:!f,v=Pc(ei(p,3),u,a,h,g&&!d);return v},_9=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},$9=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,l=s&&!i&&o;if(!l)return!1;var a=wp(o,r);return!a},F9=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},z9=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=ei(r[0].clientX-i.left,5),o=ei(r[0].clientY-i.top,5),l=ei(r[1].clientX-i.left,5),a=ei(r[1].clientY-i.top,5);return{x:(s+l)/2/e,y:(o+a)/2/e}},oO=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},j9=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,l=r.zoomAnimation,a=r.disablePadding,u=l.size,c=l.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return Pc(ei(h,2),o,s,u,!c&&!a)},U9=160,V9=100,H9=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(Xi(t),Ue(Te(t),e,i),Ue(Te(t),e,r))},W9=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,l=t.transformState,a=l.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,g=d.size,v=d.disabled,m=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=B9(e,null),b=p?y*Math.abs(e.deltaY):m,k=I9(t,w,b,!e.ctrlKey);if(a!==k){var A=sa(t,k),P=sO(e,s,a),B=v||g===0||c||f,C=u&&B,E=vp(t,P.x,P.y,k,A,C),R=E.x,O=E.y;t.previousWheelEvent=e,t.setTransformState(k,R,O),Ue(Te(t),e,i),Ue(Te(t),e,r)}},G9=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;ry(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(ZM(t,e.x,e.y),t.wheelAnimationTimer=null)},V9);var s=_9(t,e);s&&(ry(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Ue(Te(t),e,i),Ue(Te(t),e,r))},U9))},X9=function(t,e){var n=oO(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,Xi(t)},J9=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.transformState.scale,s=t.setup,o=s.limitToBounds,l=s.centerZoomedOut,a=s.zoomAnimation,u=a.disabled,c=a.size;if(!(i===null||!n)){var d=z9(e,r,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var h=oO(e),f=j9(t,h);if(f!==r){var p=sa(t,f),g=u||c===0||l,v=o&&g,m=vp(t,d.x,d.y,f,p,v),y=m.x,w=m.y;t.pinchMidpoint=d,t.lastDistance=h,t.setTransformState(f,y,w)}}}},Y9=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,ZM(t,e==null?void 0:e.x,e==null?void 0:e.y)},lO=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;ry(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Ue(Te(t),e,n)},i)},K9=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,l=s.animationType;Ue(Te(t),e,i),iO(t,o,l,function(){return Ue(Te(t),e,r)}),lO(t,e)};function q9(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,l=t.props,a=l.onZoomStart,u=l.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,g=c.animationType;if(!d&&!i){if(h==="reset")return K9(t,e);if(!s)return console.error("No ContentComponent found");var v=h==="zoomOut"?-1:1,m=tO(t,v,f);if(o!==m){Ue(Te(t),e,a);var y=sO(e,s,o),w=Bw(t,m,y.x,y.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");Ue(Te(t),e,u),Ys(t,w,p,g),lO(t,e)}}}var Q9=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,l=s.excluded,a=e.target,u=r==null?void 0:r.contains(a),c=n&&a&&u&&!o;if(!c)return!1;var d=wp(a,l);return!d},Z9=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){sa(n,n.transformState.scale),n.setup=lk(i)},this.initializeWindowEvents=function(){var i,r=Xm(),s=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,r),o==null||o.addEventListener("mousemove",n.onPanning,r),o==null||o.addEventListener("mouseup",n.onPanningStop,r),s==null||s.addEventListener("mouseleave",n.clearPanning,r),o==null||o.addEventListener("keyup",n.setKeyUnPressed,r),o==null||o.addEventListener("keydown",n.setKeyPressed,r)},this.cleanupWindowEvents=function(){var i,r,s=Xm(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,l=o==null?void 0:o.defaultView;l==null||l.removeEventListener("mousedown",n.onPanningStart,s),l==null||l.removeEventListener("mousemove",n.onPanning,s),l==null||l.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),l==null||l.removeEventListener("keyup",n.setKeyUnPressed,s),l==null||l.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),Xi(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=Xm();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(Te(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(Te(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=N9(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(H9(n,i),W9(n,i),G9(n,i))}}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=tk(n,i);if(o){var l=n.isPressingKeys(n.setup.panning.activationKeys);l&&(i.preventDefault(),i.stopPropagation(),Xi(n),rk(n,i),Ue(Te(n),i,s))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=nk(n);if(o){var l=n.isPressingKeys(n.setup.panning.activationKeys);l&&(i.preventDefault(),i.stopPropagation(),sk(n,i.clientX,i.clientY),Ue(Te(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(x9(n),Ue(Te(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,l=s.onZoomStart;if(!r){var a=$9(n,i);a&&(X9(n,i),Xi(n),Ue(Te(n),i,o),Ue(Te(n),i,l))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,l=s.onZoom;if(!r){var a=F9(n);a&&(i.preventDefault(),i.stopPropagation(),J9(n,i),Ue(Te(n),i,o),Ue(Te(n),i,l))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(Y9(n),Ue(Te(n),i,s),Ue(Te(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=tk(n,i);if(o){var l=n.lastTouch&&+new Date-n.lastTouch<200;if(l&&i.touches.length===1)n.onDoubleClick(i);else{n.lastTouch=+new Date,Xi(n);var a=i.touches,u=a.length===1,c=a.length===2;u&&(Xi(n),rk(n,i),Ue(Te(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=nk(n);if(!o)return;i.preventDefault(),i.stopPropagation();var l=i.touches[0];sk(n,l.clientX,l.clientY),Ue(Te(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=Q9(n,i);s&&q9(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var l=Te(n);n.onChangeCallbacks.forEach(function(a){return a(l)}),Ue(l,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=rO(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):T9(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,l=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=l}},this.getContext=function(){return Te(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,sa(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=Te(n);Ue(s,void 0,n.props.onInit)},this.props=e,this.setup=lk(this.props),this.transformState=eO(this.props)}return t}(),Iw=U.createContext(null),eU=function(t,e){return typeof t=="function"?t(e):t},tU=U.forwardRef(function(t,e){var n=S.useRef(new Z9(t)).current,i=eU(t.children,iy(n));return S.useImperativeHandle(e,function(){return iy(n)},[n]),S.useEffect(function(){n.update(t)},[n,t]),U.createElement(Iw.Provider,{value:n},i)});U.forwardRef(function(t,e){var n=S.useRef(null),i=S.useContext(Iw);return S.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),U.createElement("div",Ts({},t,{ref:D9([n,e])}))});function nU(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var iU=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,ak={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};nU(iU);var rU=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,l=t.contentStyle,a=t.wrapperProps,u=a===void 0?{}:a,c=t.contentProps,d=c===void 0?{}:c,h=S.useContext(Iw).init,f=S.useRef(null),p=S.useRef(null);return S.useEffect(function(){var g=f.current,v=p.current;g!==null&&v!==null&&h&&h(g,v)},[]),U.createElement("div",Ts({},u,{ref:f,className:"react-transform-wrapper ".concat(ak.wrapper," ").concat(i),style:o}),U.createElement("div",Ts({},d,{ref:p,className:"react-transform-component ".concat(ak.content," ").concat(s),style:l}),e))};function sU({className:t}){const e=Qt({ref:zt.bus.address,from:{stroke:bt.stone[700]}}),n=Qt({ref:zt.bus.data,from:{stroke:bt.stone[700]}});return M.jsxs("svg",{viewBox:"0 0 950 500",className:Kn("absolute h-[500px] w-[950px]",t),children:[M.jsx(wt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:"M 699 349 H 800",style:e}),M.jsx(wt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:"M 687 249 H 800",style:n})]})}function oU(){const t=Qi($e.FLAGS),e=Qi(CA),n=t.bit(0),i=t.bit(6),r=t.bit(7),s=t.bit(9),o=t.bit(11),l=Qt({ref:zt.cpu.FLAGS,from:{backgroundColor:bt.stone[800]}}),a=Qt({ref:zt.cpu.alu.operands,from:{strokeDashoffset:1,opacity:1}}),u=Qt({ref:zt.cpu.alu.operation,from:{backgroundColor:bt.stone[800]}}),c=Qt({ref:zt.cpu.alu.cog,from:{rot:0}}),d=Qt({ref:zt.cpu.alu.results,from:{strokeDashoffset:1,opacity:1}});return M.jsxs(M.Fragment,{children:[M.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[M.jsx(wt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 173 85 H 220",pathLength:1,strokeDasharray:1,style:a}),M.jsx(wt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 182 145 H 220",pathLength:1,strokeDasharray:1,style:a}),M.jsx(wt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:d}),M.jsx(wt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:d}),M.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),M.jsx(wt.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:c.rot.to(h=>`rotate(${h*60}deg)`)}}),M.jsx(wt.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:u,children:e}),M.jsxs(wt.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:l,children:[M.jsx("span",{className:Kn("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),M.jsx("span",{className:Kn("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"ZF"}),M.jsx("span",{className:Kn("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"SF"}),M.jsx("span",{className:Kn("rounded p-1 font-light",s?"bg-mantis-400":"bg-stone-900"),children:"IF"}),M.jsx("span",{className:Kn("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"OF"})]})]})}function lU(){const t=Qi(us),e=S.useMemo(()=>{if(!("metadata"in t)||t.metadata.operands.length===0)return"";if(t.phase==="fetching-operands"){let o=" __";for(let l=1;l<t.metadata.operands.length;l++)o+=", __";return o}else return" "+t.metadata.operands.join(", ")},[t]),{executionUnit:n}=R_(),i=b8(t.phase,{from:{transform:"translateY(-100%)"},enter:{transform:"translateY(0%)"},leave:{transform:"translateY(100%)"},config:{duration:5*n,easing:Nv.easeOutElastic}}),r=Qt({ref:zt.cpu.decoder.path,from:{strokeDashoffset:1,opacity:1}}),s=Qt({ref:zt.cpu.decoder.progress,from:{progress:0,opacity:1}});return M.jsxs(M.Fragment,{children:[M.jsx("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:M.jsx(wt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:r})}),M.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:M.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs font-semibold tracking-wide text-white",children:"Unidad de control"})}),M.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[M.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[M.jsx("span",{className:"text-sm leading-none",children:"Decodificador"}),M.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:M.jsx(wt.div,{className:"h-full bg-mantis-400",style:{width:s.progress.to(o=>`${o*100}%`),opacity:s.opacity}})})]}),M.jsx("div",{className:"relative mt-4 h-8 w-48 overflow-hidden rounded-lg border border-stone-600 bg-stone-900",children:i((o,l)=>M.jsx(wt.div,{className:"absolute inset-0 flex items-center",style:o,children:M.jsx("span",{className:"w-full text-center align-middle text-sm leading-none",children:l==="fetching"?"Leyendo instruccin...":l==="fetching-operands"?"Leyendo operandos...":l==="executing"?"Ejecutando...":l==="writeback"?"Escribiendo resultados...":l==="interrupt"?"Manejando interrupcin...":l==="stopped"?"Detenido":null})}))}),M.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:M.jsx("p",{className:"text-center font-mono",children:t.phase==="fetching"||t.phase==="stopped"?M.jsx("span",{className:"font-bold italic text-stone-400",children:"???"}):M.jsxs(M.Fragment,{children:[M.jsx("span",{className:"font-bold text-mantis-400",children:t.metadata.name}),M.jsx("span",{className:"text-white",children:e})]})})})]})]})}function aU(){const t=Qt({ref:zt.cpu.internalBus.rd,from:{width:0,opacity:1}}),e=Qt({ref:zt.cpu.internalBus.wr,from:{width:0,opacity:1}}),n=Qt({ref:zt.cpu.internalBus.iom,from:{width:0,opacity:1}});return M.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[M.jsx("text",{className:"fill-stone-400 font-mono text-xs font-bold tracking-wider",x:384,y:415,children:"rd"}),M.jsx("line",{x1:380,y1:420,x2:650,y2:420,className:"stroke-stone-700 stroke-[4px]"}),M.jsx(wt.line,{x1:380,y1:420,x2:t.width.to(i=>380+i*(650-380)),y2:420,className:"stroke-red-500 stroke-[4px]",style:{opacity:t.opacity}}),M.jsx("text",{className:"fill-stone-400 font-mono text-xs font-bold tracking-wider",x:384,y:435,children:"wr"}),M.jsx("line",{x1:380,y1:440,x2:650,y2:440,className:"stroke-stone-700 stroke-[4px]"}),M.jsx(wt.line,{x1:380,y1:440,x2:e.width.to(i=>380+i*(650-380)),y2:440,className:"stroke-red-500 stroke-[4px]",style:{opacity:e.opacity}}),M.jsx("text",{className:"fill-stone-400 font-mono text-xs font-bold tracking-wider",x:384,y:455,children:"io/m"}),M.jsx("line",{x1:380,y1:460,x2:650,y2:460,className:"stroke-stone-700 stroke-[4px]"}),M.jsx(wt.line,{x1:380,y1:460,x2:n.width.to(i=>380+i*(650-380)),y2:460,className:"stroke-red-500 stroke-[4px]",style:{opacity:n.opacity}})]})}function uU({className:t}){return M.jsxs("div",{className:Kn("absolute h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900",t),children:[M.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:"CPU"}),M.jsx(F8,{}),M.jsx(aU,{}),M.jsx(y_,{}),M.jsx(ln,{name:"left",className:"left-[60px] top-[70px]"}),M.jsx(ln,{name:"right",className:"left-[60px] top-[130px]"}),M.jsx(ln,{name:"result",className:"left-[300px] top-[100px]"}),M.jsx(oU,{}),M.jsx(ln,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),M.jsx(ln,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),M.jsx(ln,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),M.jsx(ln,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),M.jsx(ln,{name:"id",className:"left-[520px] top-[190px]"}),M.jsx(ln,{name:"MBR",className:"right-[-38px] top-[233px]"}),M.jsx(ln,{name:"IR",className:"left-[171px] top-[270px]"}),M.jsx(lU,{}),M.jsx(ln,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),M.jsx(ln,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),M.jsx(ln,{name:"ri",className:"left-[450px] top-[372px]"}),M.jsx(ln,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function ln({name:t,emphasis:e=!1,className:n}){const i=Qi(us),r=Qi($e[t]),s=r.low,o=r.is16bits()?r.high:null,l=Qt({ref:zt.cpu[t],from:{backgroundColor:bt.stone[800]}}),a=(t==="id"||t==="ri")&&"metadata"in i&&!i.metadata.willUse[t];return M.jsxs(wt.div,{className:Kn("absolute flex w-min items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",e?"border-mantis-400 text-lg":"border-stone-600 text-base",a&&"opacity-40",n),style:l,children:[M.jsx("span",{className:"mr-2 font-bold",children:t}),o&&M.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:o.toString("hex")}),M.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:s.toString("hex")})]})}function cU({className:t}){const e=Qi(uB);return M.jsxs("div",{className:Kn("absolute h-[400px] w-[150px] rounded-lg border border-stone-600 bg-stone-900",t),children:[M.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:"Memory"}),M.jsx("div",{className:"m-4 w-min overflow-hidden rounded-lg border border-stone-600",children:M.jsx("table",{className:"font-mono text-lg",children:M.jsx("tbody",{children:e.map((n,i)=>M.jsxs("tr",{className:"border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",children:[M.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:n.address.toString()}),M.jsx("td",{className:"px-2 py-1",children:n.value.toString("hex")})]},i))})})})]})}function dU(){return M.jsx(tU,{minScale:.5,centerOnInit:!0,children:M.jsxs(rU,{wrapperClass:"!w-full !h-full",contentClass:"relative !h-[700px] !w-[1200px] border-4 border-red-500",children:[M.jsx(sU,{className:"left-[100px] top-[100px]"}),M.jsx(uU,{className:"left-[100px] top-[100px]"}),M.jsx(cU,{className:"left-[900px] top-[150px]"})]})})}function hU(){const t=Qf(),{updateServiceWorker:e}=rN({onNeedRefresh(){Zy(t("update.update-available"),{action:{label:t("update.reload"),onClick:()=>e(!0)}})}});return M.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",children:[M.jsx($6,{}),M.jsxs("main",{className:"grid grow grid-cols-[minmax(0,1fr),minmax(0,2fr)] grid-rows-1 gap-2 overflow-auto p-2",children:[M.jsx("section",{className:"w-full overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:M.jsx(Wj,{className:"h-full w-full"})}),M.jsx("section",{className:"w-full rounded-lg border border-stone-600 bg-stone-800",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='rgb(120 113 108)' fill-opacity='0.4'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`},children:M.jsx(dU,{})})]})]})}window.codemirror=null;Jm.createRoot(document.getElementById("root")).render(M.jsxs(U.StrictMode,{children:[M.jsx(ZD,{richColors:!0,closeButton:!0,position:"top-center"}),M.jsx(tB,{children:M.jsx(hU,{})})]}));
