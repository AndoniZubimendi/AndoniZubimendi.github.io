var FT=Object.defineProperty;var UT=(t,e,n)=>e in t?FT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ue=(t,e,n)=>(UT(t,typeof e!="symbol"?e+"":e,n),n),dg=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var A=(t,e,n)=>(dg(t,e,"read from private field"),n?n.call(t):e.get(t)),Ee=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},J=(t,e,n,i)=>(dg(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var nt=(t,e,n)=>(dg(t,e,"access private method"),n);function VT(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var HT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var t2={exports:{}},im={},n2={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cd=Symbol.for("react.element"),WT=Symbol.for("react.portal"),GT=Symbol.for("react.fragment"),KT=Symbol.for("react.strict_mode"),XT=Symbol.for("react.profiler"),ZT=Symbol.for("react.provider"),YT=Symbol.for("react.context"),JT=Symbol.for("react.forward_ref"),qT=Symbol.for("react.suspense"),QT=Symbol.for("react.memo"),e_=Symbol.for("react.lazy"),lx=Symbol.iterator;function t_(t){return t===null||typeof t!="object"?null:(t=lx&&t[lx]||t["@@iterator"],typeof t=="function"?t:null)}var i2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r2=Object.assign,s2={};function pu(t,e,n){this.props=t,this.context=e,this.refs=s2,this.updater=n||i2}pu.prototype.isReactComponent={};pu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function o2(){}o2.prototype=pu.prototype;function mw(t,e,n){this.props=t,this.context=e,this.refs=s2,this.updater=n||i2}var gw=mw.prototype=new o2;gw.constructor=mw;r2(gw,pu.prototype);gw.isPureReactComponent=!0;var ux=Array.isArray,a2=Object.prototype.hasOwnProperty,yw={current:null},l2={key:!0,ref:!0,__self:!0,__source:!0};function u2(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)a2.call(e,i)&&!l2.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Cd,type:t,key:s,ref:o,props:r,_owner:yw.current}}function n_(t,e){return{$$typeof:Cd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cd}function i_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cx=/\/+/g;function hg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?i_(""+t.key):e.toString(36)}function Zh(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cd:case WT:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+hg(o,0):i,ux(r)?(n="",t!=null&&(n=t.replace(cx,"$&/")+"/"),Zh(r,e,n,"",function(u){return u})):r!=null&&(vw(r)&&(r=n_(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(cx,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",ux(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+hg(s,a);o+=Zh(s,e,n,l,r)}else if(l=t_(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+hg(s,a++),o+=Zh(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kd(t,e,n){if(t==null)return t;var i=[],r=0;return Zh(t,i,"","",function(s){return e.call(n,s,r++)}),i}function r_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},Yh={transition:null},s_={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:Yh,ReactCurrentOwner:yw};Ue.Children={map:Kd,forEach:function(t,e,n){Kd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kd(t,function(){e++}),e},toArray:function(t){return Kd(t,function(e){return e})||[]},only:function(t){if(!vw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=pu;Ue.Fragment=GT;Ue.Profiler=XT;Ue.PureComponent=mw;Ue.StrictMode=KT;Ue.Suspense=qT;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s_;Ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=r2({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=yw.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)a2.call(e,l)&&!l2.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Cd,type:t.type,key:r,ref:s,props:i,_owner:o}};Ue.createContext=function(t){return t={$$typeof:YT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZT,_context:t},t.Consumer=t};Ue.createElement=u2;Ue.createFactory=function(t){var e=u2.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:JT,render:t}};Ue.isValidElement=vw;Ue.lazy=function(t){return{$$typeof:e_,_payload:{_status:-1,_result:t},_init:r_}};Ue.memo=function(t,e){return{$$typeof:QT,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=Yh.transition;Yh.transition={};try{t()}finally{Yh.transition=e}};Ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ue.useCallback=function(t,e){return Rn.current.useCallback(t,e)};Ue.useContext=function(t){return Rn.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return Rn.current.useEffect(t,e)};Ue.useId=function(){return Rn.current.useId()};Ue.useImperativeHandle=function(t,e,n){return Rn.current.useImperativeHandle(t,e,n)};Ue.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return Rn.current.useMemo(t,e)};Ue.useReducer=function(t,e,n){return Rn.current.useReducer(t,e,n)};Ue.useRef=function(t){return Rn.current.useRef(t)};Ue.useState=function(t){return Rn.current.useState(t)};Ue.useSyncExternalStore=function(t,e,n){return Rn.current.useSyncExternalStore(t,e,n)};Ue.useTransition=function(){return Rn.current.useTransition()};Ue.version="18.2.0";n2.exports=Ue;var y=n2.exports;const de=fu(y),ww=VT({__proto__:null,default:de},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_=y,a_=Symbol.for("react.element"),l_=Symbol.for("react.fragment"),u_=Object.prototype.hasOwnProperty,c_=o_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d_={key:!0,ref:!0,__self:!0,__source:!0};function c2(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)u_.call(e,i)&&!d_.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:a_,type:t,key:s,ref:o,props:r,_owner:c_.current}}im.Fragment=l_;im.jsx=c2;im.jsxs=c2;t2.exports=im;var x=t2.exports;var q0={},d2={exports:{}},mi={},h2={exports:{}},f2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,R){var H=W.length;W.push(R);e:for(;0<H;){var q=H-1>>>1,re=W[q];if(0<r(re,R))W[q]=R,W[H]=re,H=q;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var R=W[0],H=W.pop();if(H!==R){W[0]=H;e:for(var q=0,re=W.length,we=re>>>1;q<we;){var U=2*(q+1)-1,I=W[U],G=U+1,S=W[G];if(0>r(I,H))G<re&&0>r(S,I)?(W[q]=S,W[G]=H,q=G):(W[q]=I,W[U]=H,q=U);else if(G<re&&0>r(S,H))W[q]=S,W[G]=H,q=G;else break e}}return R}function r(W,R){var H=W.sortIndex-R.sortIndex;return H!==0?H:W.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(W){for(var R=n(u);R!==null;){if(R.callback===null)i(u);else if(R.startTime<=W)i(u),R.sortIndex=R.expirationTime,e(l,R);else break;R=n(u)}}function k(W){if(g=!1,w(W),!p)if(n(l)!==null)p=!0,Y(C);else{var R=n(u);R!==null&&ee(k,R.startTime-W)}}function C(W,R){p=!1,g&&(g=!1,m(E),E=-1),f=!0;var H=h;try{for(w(R),d=n(l);d!==null&&(!(d.expirationTime>R)||W&&!T());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var re=q(d.expirationTime<=R);R=t.unstable_now(),typeof re=="function"?d.callback=re:d===n(l)&&i(l),w(R)}else i(l);d=n(l)}if(d!==null)var we=!0;else{var U=n(u);U!==null&&ee(k,U.startTime-R),we=!1}return we}finally{d=null,h=H,f=!1}}var O=!1,M=null,E=-1,N=5,D=-1;function T(){return!(t.unstable_now()-D<N)}function F(){if(M!==null){var W=t.unstable_now();D=W;var R=!0;try{R=M(!0,W)}finally{R?j():(O=!1,M=null)}}else O=!1}var j;if(typeof v=="function")j=function(){v(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,K=B.port2;B.port1.onmessage=F,j=function(){K.postMessage(null)}}else j=function(){b(F,0)};function Y(W){M=W,O||(O=!0,j())}function ee(W,R){E=b(function(){W(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Y(C))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var H=h;h=R;try{return W()}finally{h=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,R){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var H=h;h=W;try{return R()}finally{h=H}},t.unstable_scheduleCallback=function(W,R,H){var q=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,W){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=H+re,W={id:c++,callback:R,priorityLevel:W,startTime:H,expirationTime:re,sortIndex:-1},H>q?(W.sortIndex=H,e(u,W),n(l)===null&&W===n(u)&&(g?(m(E),E=-1):g=!0,ee(k,H-q))):(W.sortIndex=re,e(l,W),p||f||(p=!0,Y(C))),W},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(W){var R=h;return function(){var H=h;h=R;try{return W.apply(this,arguments)}finally{h=H}}}})(f2);h2.exports=f2;var h_=h2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2=y,pi=h_;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m2=new Set,Cc={};function _a(t,e){Hl(t,e),Hl(t+"Capture",e)}function Hl(t,e){for(Cc[t]=e,t=0;t<e.length;t++)m2.add(e[t])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Q0=Object.prototype.hasOwnProperty,f_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dx={},hx={};function p_(t){return Q0.call(hx,t)?!0:Q0.call(dx,t)?!1:f_.test(t)?hx[t]=!0:(dx[t]=!0,!1)}function m_(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function g_(t,e,n,i){if(e===null||typeof e>"u"||m_(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ln[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ln[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ln[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ln[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ln[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ln[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ln[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ln[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ln[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var bw=/[\-:]([a-z])/g;function xw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bw,xw);ln[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bw,xw);ln[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bw,xw);ln[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ln[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});ln.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ln[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sw(t,e,n,i){var r=ln.hasOwnProperty(e)?ln[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(g_(e,n,r,i)&&(n=null),i||r===null?p_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Cs=p2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xd=Symbol.for("react.element"),nl=Symbol.for("react.portal"),il=Symbol.for("react.fragment"),kw=Symbol.for("react.strict_mode"),ey=Symbol.for("react.profiler"),g2=Symbol.for("react.provider"),y2=Symbol.for("react.context"),Ew=Symbol.for("react.forward_ref"),ty=Symbol.for("react.suspense"),ny=Symbol.for("react.suspense_list"),Cw=Symbol.for("react.memo"),Ds=Symbol.for("react.lazy"),v2=Symbol.for("react.offscreen"),fx=Symbol.iterator;function Au(t){return t===null||typeof t!="object"?null:(t=fx&&t[fx]||t["@@iterator"],typeof t=="function"?t:null)}var Pt=Object.assign,fg;function Ku(t){if(fg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fg=e&&e[1]||""}return`
`+fg+t}var pg=!1;function mg(t,e){if(!t||pg)return"";pg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{pg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ku(t):""}function y_(t){switch(t.tag){case 5:return Ku(t.type);case 16:return Ku("Lazy");case 13:return Ku("Suspense");case 19:return Ku("SuspenseList");case 0:case 2:case 15:return t=mg(t.type,!1),t;case 11:return t=mg(t.type.render,!1),t;case 1:return t=mg(t.type,!0),t;default:return""}}function iy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case il:return"Fragment";case nl:return"Portal";case ey:return"Profiler";case kw:return"StrictMode";case ty:return"Suspense";case ny:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y2:return(t.displayName||"Context")+".Consumer";case g2:return(t._context.displayName||"Context")+".Provider";case Ew:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cw:return e=t.displayName||null,e!==null?e:iy(t.type)||"Memo";case Ds:e=t._payload,t=t._init;try{return iy(t(e))}catch{}}return null}function v_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return iy(e);case 8:return e===kw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function w2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function w_(t){var e=w2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zd(t){t._valueTracker||(t._valueTracker=w_(t))}function b2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=w2(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Nf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ry(t,e){var n=e.checked;return Pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function px(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=vo(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x2(t,e){e=e.checked,e!=null&&Sw(t,"checked",e,!1)}function sy(t,e){x2(t,e);var n=vo(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?oy(t,e.type,n):e.hasOwnProperty("defaultValue")&&oy(t,e.type,vo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function oy(t,e,n){(e!=="number"||Nf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xu=Array.isArray;function wl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+vo(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ay(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(Xu(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vo(n)}}function S2(t,e){var n=vo(e.value),i=vo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function yx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function k2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ly(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?k2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yd,E2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yd=Yd||document.createElement("div"),Yd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ac(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b_=["Webkit","ms","Moz","O"];Object.keys(sc).forEach(function(t){b_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sc[e]=sc[t]})});function C2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sc.hasOwnProperty(t)&&sc[t]?(""+e).trim():e+"px"}function A2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=C2(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var x_=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uy(t,e){if(e){if(x_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function cy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dy=null;function Aw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hy=null,bl=null,xl=null;function vx(t){if(t=Od(t)){if(typeof hy!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=lm(e),hy(t.stateNode,t.type,e))}}function P2(t){bl?xl?xl.push(t):xl=[t]:bl=t}function O2(){if(bl){var t=bl,e=xl;if(xl=bl=null,vx(t),e)for(t=0;t<e.length;t++)vx(e[t])}}function M2(t,e){return t(e)}function $2(){}var gg=!1;function R2(t,e,n){if(gg)return t(e,n);gg=!0;try{return M2(t,e,n)}finally{gg=!1,(bl!==null||xl!==null)&&($2(),O2())}}function Pc(t,e){var n=t.stateNode;if(n===null)return null;var i=lm(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var fy=!1;if(vs)try{var Pu={};Object.defineProperty(Pu,"passive",{get:function(){fy=!0}}),window.addEventListener("test",Pu,Pu),window.removeEventListener("test",Pu,Pu)}catch{fy=!1}function S_(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var oc=!1,Tf=null,_f=!1,py=null,k_={onError:function(t){oc=!0,Tf=t}};function E_(t,e,n,i,r,s,o,a,l){oc=!1,Tf=null,S_.apply(k_,arguments)}function C_(t,e,n,i,r,s,o,a,l){if(E_.apply(this,arguments),oc){if(oc){var u=Tf;oc=!1,Tf=null}else throw Error(ne(198));_f||(_f=!0,py=u)}}function Da(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wx(t){if(Da(t)!==t)throw Error(ne(188))}function A_(t){var e=t.alternate;if(!e){if(e=Da(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return wx(r),t;if(s===i)return wx(r),e;s=s.sibling}throw Error(ne(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==i)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function T2(t){return t=A_(t),t!==null?_2(t):null}function _2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_2(t);if(e!==null)return e;t=t.sibling}return null}var D2=pi.unstable_scheduleCallback,bx=pi.unstable_cancelCallback,P_=pi.unstable_shouldYield,O_=pi.unstable_requestPaint,_t=pi.unstable_now,M_=pi.unstable_getCurrentPriorityLevel,Pw=pi.unstable_ImmediatePriority,I2=pi.unstable_UserBlockingPriority,Df=pi.unstable_NormalPriority,$_=pi.unstable_LowPriority,L2=pi.unstable_IdlePriority,rm=null,Ir=null;function R_(t){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(rm,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:__,N_=Math.log,T_=Math.LN2;function __(t){return t>>>=0,t===0?32:31-(N_(t)/T_|0)|0}var Jd=64,qd=4194304;function Zu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function If(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Zu(a):(s&=o,s!==0&&(i=Zu(s)))}else o=n&~r,o!==0?i=Zu(o):s!==0&&(i=Zu(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-tr(e),r=1<<n,i|=t[n],e&=~r;return i}function D_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I_(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-tr(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=D_(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function my(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function B2(){var t=Jd;return Jd<<=1,!(Jd&4194240)&&(Jd=64),t}function yg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ad(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function L_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-tr(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Ow(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-tr(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var et=0;function z2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var j2,Mw,F2,U2,V2,gy=!1,Qd=[],oo=null,ao=null,lo=null,Oc=new Map,Mc=new Map,Us=[],B_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xx(t,e){switch(t){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mc.delete(e.pointerId)}}function Ou(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Od(e),e!==null&&Mw(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function z_(t,e,n,i,r){switch(e){case"focusin":return oo=Ou(oo,t,e,n,i,r),!0;case"dragenter":return ao=Ou(ao,t,e,n,i,r),!0;case"mouseover":return lo=Ou(lo,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Oc.set(s,Ou(Oc.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Mc.set(s,Ou(Mc.get(s)||null,t,e,n,i,r)),!0}return!1}function H2(t){var e=ia(t.target);if(e!==null){var n=Da(e);if(n!==null){if(e=n.tag,e===13){if(e=N2(n),e!==null){t.blockedOn=e,V2(t.priority,function(){F2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);dy=i,n.target.dispatchEvent(i),dy=null}else return e=Od(n),e!==null&&Mw(e),t.blockedOn=n,!1;e.shift()}return!0}function Sx(t,e,n){Jh(t)&&n.delete(e)}function j_(){gy=!1,oo!==null&&Jh(oo)&&(oo=null),ao!==null&&Jh(ao)&&(ao=null),lo!==null&&Jh(lo)&&(lo=null),Oc.forEach(Sx),Mc.forEach(Sx)}function Mu(t,e){t.blockedOn===e&&(t.blockedOn=null,gy||(gy=!0,pi.unstable_scheduleCallback(pi.unstable_NormalPriority,j_)))}function $c(t){function e(r){return Mu(r,t)}if(0<Qd.length){Mu(Qd[0],t);for(var n=1;n<Qd.length;n++){var i=Qd[n];i.blockedOn===t&&(i.blockedOn=null)}}for(oo!==null&&Mu(oo,t),ao!==null&&Mu(ao,t),lo!==null&&Mu(lo,t),Oc.forEach(e),Mc.forEach(e),n=0;n<Us.length;n++)i=Us[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Us.length&&(n=Us[0],n.blockedOn===null);)H2(n),n.blockedOn===null&&Us.shift()}var Sl=Cs.ReactCurrentBatchConfig,Lf=!0;function F_(t,e,n,i){var r=et,s=Sl.transition;Sl.transition=null;try{et=1,$w(t,e,n,i)}finally{et=r,Sl.transition=s}}function U_(t,e,n,i){var r=et,s=Sl.transition;Sl.transition=null;try{et=4,$w(t,e,n,i)}finally{et=r,Sl.transition=s}}function $w(t,e,n,i){if(Lf){var r=yy(t,e,n,i);if(r===null)Pg(t,e,i,Bf,n),xx(t,i);else if(z_(r,t,e,n,i))i.stopPropagation();else if(xx(t,i),e&4&&-1<B_.indexOf(t)){for(;r!==null;){var s=Od(r);if(s!==null&&j2(s),s=yy(t,e,n,i),s===null&&Pg(t,e,i,Bf,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Pg(t,e,i,null,n)}}var Bf=null;function yy(t,e,n,i){if(Bf=null,t=Aw(i),t=ia(t),t!==null)if(e=Da(t),e===null)t=null;else if(n=e.tag,n===13){if(t=N2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bf=t,null}function W2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M_()){case Pw:return 1;case I2:return 4;case Df:case $_:return 16;case L2:return 536870912;default:return 16}default:return 16}}var Qs=null,Rw=null,qh=null;function G2(){if(qh)return qh;var t,e=Rw,n=e.length,i,r="value"in Qs?Qs.value:Qs.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return qh=r.slice(t,1<i?1-i:void 0)}function Qh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eh(){return!0}function kx(){return!1}function gi(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?eh:kx,this.isPropagationStopped=kx,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eh)},persist:function(){},isPersistent:eh}),e}var mu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nw=gi(mu),Pd=Pt({},mu,{view:0,detail:0}),V_=gi(Pd),vg,wg,$u,sm=Pt({},Pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$u&&($u&&t.type==="mousemove"?(vg=t.screenX-$u.screenX,wg=t.screenY-$u.screenY):wg=vg=0,$u=t),vg)},movementY:function(t){return"movementY"in t?t.movementY:wg}}),Ex=gi(sm),H_=Pt({},sm,{dataTransfer:0}),W_=gi(H_),G_=Pt({},Pd,{relatedTarget:0}),bg=gi(G_),K_=Pt({},mu,{animationName:0,elapsedTime:0,pseudoElement:0}),X_=gi(K_),Z_=Pt({},mu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Y_=gi(Z_),J_=Pt({},mu,{data:0}),Cx=gi(J_),q_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eD[t])?!!e[t]:!1}function Tw(){return tD}var nD=Pt({},Pd,{key:function(t){if(t.key){var e=q_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Q_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tw,charCode:function(t){return t.type==="keypress"?Qh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iD=gi(nD),rD=Pt({},sm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ax=gi(rD),sD=Pt({},Pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tw}),oD=gi(sD),aD=Pt({},mu,{propertyName:0,elapsedTime:0,pseudoElement:0}),lD=gi(aD),uD=Pt({},sm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cD=gi(uD),dD=[9,13,27,32],_w=vs&&"CompositionEvent"in window,ac=null;vs&&"documentMode"in document&&(ac=document.documentMode);var hD=vs&&"TextEvent"in window&&!ac,K2=vs&&(!_w||ac&&8<ac&&11>=ac),Px=String.fromCharCode(32),Ox=!1;function X2(t,e){switch(t){case"keyup":return dD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rl=!1;function fD(t,e){switch(t){case"compositionend":return Z2(e);case"keypress":return e.which!==32?null:(Ox=!0,Px);case"textInput":return t=e.data,t===Px&&Ox?null:t;default:return null}}function pD(t,e){if(rl)return t==="compositionend"||!_w&&X2(t,e)?(t=G2(),qh=Rw=Qs=null,rl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return K2&&e.locale!=="ko"?null:e.data;default:return null}}var mD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mD[t.type]:e==="textarea"}function Y2(t,e,n,i){P2(i),e=zf(e,"onChange"),0<e.length&&(n=new Nw("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var lc=null,Rc=null;function gD(t){aA(t,0)}function om(t){var e=al(t);if(b2(e))return t}function yD(t,e){if(t==="change")return e}var J2=!1;if(vs){var xg;if(vs){var Sg="oninput"in document;if(!Sg){var $x=document.createElement("div");$x.setAttribute("oninput","return;"),Sg=typeof $x.oninput=="function"}xg=Sg}else xg=!1;J2=xg&&(!document.documentMode||9<document.documentMode)}function Rx(){lc&&(lc.detachEvent("onpropertychange",q2),Rc=lc=null)}function q2(t){if(t.propertyName==="value"&&om(Rc)){var e=[];Y2(e,Rc,t,Aw(t)),R2(gD,e)}}function vD(t,e,n){t==="focusin"?(Rx(),lc=e,Rc=n,lc.attachEvent("onpropertychange",q2)):t==="focusout"&&Rx()}function wD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return om(Rc)}function bD(t,e){if(t==="click")return om(e)}function xD(t,e){if(t==="input"||t==="change")return om(e)}function SD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ar=typeof Object.is=="function"?Object.is:SD;function Nc(t,e){if(ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Q0.call(e,r)||!ar(t[r],e[r]))return!1}return!0}function Nx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tx(t,e){var n=Nx(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nx(n)}}function Q2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Q2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eA(){for(var t=window,e=Nf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nf(t.document)}return e}function Dw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kD(t){var e=eA(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Q2(n.ownerDocument.documentElement,n)){if(i!==null&&Dw(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Tx(n,s);var o=Tx(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ED=vs&&"documentMode"in document&&11>=document.documentMode,sl=null,vy=null,uc=null,wy=!1;function _x(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wy||sl==null||sl!==Nf(i)||(i=sl,"selectionStart"in i&&Dw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),uc&&Nc(uc,i)||(uc=i,i=zf(vy,"onSelect"),0<i.length&&(e=new Nw("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=sl)))}function th(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ol={animationend:th("Animation","AnimationEnd"),animationiteration:th("Animation","AnimationIteration"),animationstart:th("Animation","AnimationStart"),transitionend:th("Transition","TransitionEnd")},kg={},tA={};vs&&(tA=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function am(t){if(kg[t])return kg[t];if(!ol[t])return t;var e=ol[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tA)return kg[t]=e[n];return t}var nA=am("animationend"),iA=am("animationiteration"),rA=am("animationstart"),sA=am("transitionend"),oA=new Map,Dx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function No(t,e){oA.set(t,e),_a(e,[t])}for(var Eg=0;Eg<Dx.length;Eg++){var Cg=Dx[Eg],CD=Cg.toLowerCase(),AD=Cg[0].toUpperCase()+Cg.slice(1);No(CD,"on"+AD)}No(nA,"onAnimationEnd");No(iA,"onAnimationIteration");No(rA,"onAnimationStart");No("dblclick","onDoubleClick");No("focusin","onFocus");No("focusout","onBlur");No(sA,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_a("onBeforeInput",["compositionend","keypress","textInput","paste"]);_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function Ix(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,C_(i,e,void 0,t),t.currentTarget=null}function aA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Ix(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Ix(r,a,u),s=l}}}if(_f)throw t=py,_f=!1,py=null,t}function ut(t,e){var n=e[Ey];n===void 0&&(n=e[Ey]=new Set);var i=t+"__bubble";n.has(i)||(lA(e,t,2,!1),n.add(i))}function Ag(t,e,n){var i=0;e&&(i|=4),lA(n,t,i,e)}var nh="_reactListening"+Math.random().toString(36).slice(2);function Tc(t){if(!t[nh]){t[nh]=!0,m2.forEach(function(n){n!=="selectionchange"&&(PD.has(n)||Ag(n,!1,t),Ag(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nh]||(e[nh]=!0,Ag("selectionchange",!1,e))}}function lA(t,e,n,i){switch(W2(e)){case 1:var r=F_;break;case 4:r=U_;break;default:r=$w}n=r.bind(null,e,n,t),r=void 0,!fy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Pg(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ia(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}R2(function(){var u=s,c=Aw(n),d=[];e:{var h=oA.get(t);if(h!==void 0){var f=Nw,p=t;switch(t){case"keypress":if(Qh(n)===0)break e;case"keydown":case"keyup":f=iD;break;case"focusin":p="focus",f=bg;break;case"focusout":p="blur",f=bg;break;case"beforeblur":case"afterblur":f=bg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Ex;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=W_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=oD;break;case nA:case iA:case rA:f=X_;break;case sA:f=lD;break;case"scroll":f=V_;break;case"wheel":f=cD;break;case"copy":case"cut":case"paste":f=Y_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Ax}var g=(e&4)!==0,b=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var v=u,w;v!==null;){w=v;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,m!==null&&(k=Pc(v,m),k!=null&&g.push(_c(v,k,w)))),b)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==dy&&(p=n.relatedTarget||n.fromElement)&&(ia(p)||p[ws]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?ia(p):null,p!==null&&(b=Da(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=Ex,k="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=Ax,k="onPointerLeave",m="onPointerEnter",v="pointer"),b=f==null?h:al(f),w=p==null?h:al(p),h=new g(k,v+"leave",f,n,c),h.target=b,h.relatedTarget=w,k=null,ia(c)===u&&(g=new g(m,v+"enter",p,n,c),g.target=w,g.relatedTarget=b,k=g),b=k,f&&p)t:{for(g=f,m=p,v=0,w=g;w;w=Ha(w))v++;for(w=0,k=m;k;k=Ha(k))w++;for(;0<v-w;)g=Ha(g),v--;for(;0<w-v;)m=Ha(m),w--;for(;v--;){if(g===m||m!==null&&g===m.alternate)break t;g=Ha(g),m=Ha(m)}g=null}else g=null;f!==null&&Lx(d,h,f,g,!1),p!==null&&b!==null&&Lx(d,b,p,g,!0)}}e:{if(h=u?al(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=yD;else if(Mx(h))if(J2)C=xD;else{C=wD;var O=vD}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=bD);if(C&&(C=C(t,u))){Y2(d,C,n,c);break e}O&&O(t,h,u),t==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&oy(h,"number",h.value)}switch(O=u?al(u):window,t){case"focusin":(Mx(O)||O.contentEditable==="true")&&(sl=O,vy=u,uc=null);break;case"focusout":uc=vy=sl=null;break;case"mousedown":wy=!0;break;case"contextmenu":case"mouseup":case"dragend":wy=!1,_x(d,n,c);break;case"selectionchange":if(ED)break;case"keydown":case"keyup":_x(d,n,c)}var M;if(_w)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else rl?X2(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(K2&&n.locale!=="ko"&&(rl||E!=="onCompositionStart"?E==="onCompositionEnd"&&rl&&(M=G2()):(Qs=c,Rw="value"in Qs?Qs.value:Qs.textContent,rl=!0)),O=zf(u,E),0<O.length&&(E=new Cx(E,t,null,n,c),d.push({event:E,listeners:O}),M?E.data=M:(M=Z2(n),M!==null&&(E.data=M)))),(M=hD?fD(t,n):pD(t,n))&&(u=zf(u,"onBeforeInput"),0<u.length&&(c=new Cx("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=M))}aA(d,e)})}function _c(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Pc(t,n),s!=null&&i.unshift(_c(t,s,r)),s=Pc(t,e),s!=null&&i.push(_c(t,s,r))),t=t.return}return i}function Ha(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lx(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Pc(n,s),l!=null&&o.unshift(_c(n,l,a))):r||(l=Pc(n,s),l!=null&&o.push(_c(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var OD=/\r\n?/g,MD=/\u0000|\uFFFD/g;function Bx(t){return(typeof t=="string"?t:""+t).replace(OD,`
`).replace(MD,"")}function ih(t,e,n){if(e=Bx(e),Bx(t)!==e&&n)throw Error(ne(425))}function jf(){}var by=null,xy=null;function Sy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ky=typeof setTimeout=="function"?setTimeout:void 0,$D=typeof clearTimeout=="function"?clearTimeout:void 0,zx=typeof Promise=="function"?Promise:void 0,RD=typeof queueMicrotask=="function"?queueMicrotask:typeof zx<"u"?function(t){return zx.resolve(null).then(t).catch(ND)}:ky;function ND(t){setTimeout(function(){throw t})}function Og(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),$c(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);$c(e)}function uo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gu=Math.random().toString(36).slice(2),Mr="__reactFiber$"+gu,Dc="__reactProps$"+gu,ws="__reactContainer$"+gu,Ey="__reactEvents$"+gu,TD="__reactListeners$"+gu,_D="__reactHandles$"+gu;function ia(t){var e=t[Mr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ws]||n[Mr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jx(t);t!==null;){if(n=t[Mr])return n;t=jx(t)}return e}t=n,n=t.parentNode}return null}function Od(t){return t=t[Mr]||t[ws],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function al(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function lm(t){return t[Dc]||null}var Cy=[],ll=-1;function To(t){return{current:t}}function ft(t){0>ll||(t.current=Cy[ll],Cy[ll]=null,ll--)}function at(t,e){ll++,Cy[ll]=t.current,t.current=e}var wo={},yn=To(wo),Wn=To(!1),ya=wo;function Wl(t,e){var n=t.type.contextTypes;if(!n)return wo;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Gn(t){return t=t.childContextTypes,t!=null}function Ff(){ft(Wn),ft(yn)}function Fx(t,e,n){if(yn.current!==wo)throw Error(ne(168));at(yn,e),at(Wn,n)}function uA(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ne(108,v_(t)||"Unknown",r));return Pt({},n,i)}function Uf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wo,ya=yn.current,at(yn,t),at(Wn,Wn.current),!0}function Ux(t,e,n){var i=t.stateNode;if(!i)throw Error(ne(169));n?(t=uA(t,e,ya),i.__reactInternalMemoizedMergedChildContext=t,ft(Wn),ft(yn),at(yn,t)):ft(Wn),at(Wn,n)}var Zr=null,um=!1,Mg=!1;function cA(t){Zr===null?Zr=[t]:Zr.push(t)}function DD(t){um=!0,cA(t)}function _o(){if(!Mg&&Zr!==null){Mg=!0;var t=0,e=et;try{var n=Zr;for(et=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Zr=null,um=!1}catch(r){throw Zr!==null&&(Zr=Zr.slice(t+1)),D2(Pw,_o),r}finally{et=e,Mg=!1}}return null}var ul=[],cl=0,Vf=null,Hf=0,Ai=[],Pi=0,va=null,as=1,ls="";function Xo(t,e){ul[cl++]=Hf,ul[cl++]=Vf,Vf=t,Hf=e}function dA(t,e,n){Ai[Pi++]=as,Ai[Pi++]=ls,Ai[Pi++]=va,va=t;var i=as;t=ls;var r=32-tr(i)-1;i&=~(1<<r),n+=1;var s=32-tr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,as=1<<32-tr(e)+r|n<<r|i,ls=s+t}else as=1<<s|n<<r|i,ls=t}function Iw(t){t.return!==null&&(Xo(t,1),dA(t,1,0))}function Lw(t){for(;t===Vf;)Vf=ul[--cl],ul[cl]=null,Hf=ul[--cl],ul[cl]=null;for(;t===va;)va=Ai[--Pi],Ai[Pi]=null,ls=Ai[--Pi],Ai[Pi]=null,as=Ai[--Pi],Ai[Pi]=null}var fi=null,ci=null,gt=!1,Zi=null;function hA(t,e){var n=$i(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fi=t,ci=uo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fi=t,ci=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=va!==null?{id:as,overflow:ls}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$i(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fi=t,ci=null,!0):!1;default:return!1}}function Ay(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Py(t){if(gt){var e=ci;if(e){var n=e;if(!Vx(t,e)){if(Ay(t))throw Error(ne(418));e=uo(n.nextSibling);var i=fi;e&&Vx(t,e)?hA(i,n):(t.flags=t.flags&-4097|2,gt=!1,fi=t)}}else{if(Ay(t))throw Error(ne(418));t.flags=t.flags&-4097|2,gt=!1,fi=t}}}function Hx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fi=t}function rh(t){if(t!==fi)return!1;if(!gt)return Hx(t),gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sy(t.type,t.memoizedProps)),e&&(e=ci)){if(Ay(t))throw fA(),Error(ne(418));for(;e;)hA(t,e),e=uo(e.nextSibling)}if(Hx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ci=uo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ci=null}}else ci=fi?uo(t.stateNode.nextSibling):null;return!0}function fA(){for(var t=ci;t;)t=uo(t.nextSibling)}function Gl(){ci=fi=null,gt=!1}function Bw(t){Zi===null?Zi=[t]:Zi.push(t)}var ID=Cs.ReactCurrentBatchConfig;function Hi(t,e){if(t&&t.defaultProps){e=Pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Wf=To(null),Gf=null,dl=null,zw=null;function jw(){zw=dl=Gf=null}function Fw(t){var e=Wf.current;ft(Wf),t._currentValue=e}function Oy(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function kl(t,e){Gf=t,zw=dl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Un=!0),t.firstContext=null)}function Li(t){var e=t._currentValue;if(zw!==t)if(t={context:t,memoizedValue:e,next:null},dl===null){if(Gf===null)throw Error(ne(308));dl=t,Gf.dependencies={lanes:0,firstContext:t}}else dl=dl.next=t;return e}var ra=null;function Uw(t){ra===null?ra=[t]:ra.push(t)}function pA(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Uw(e)):(n.next=r.next,r.next=n),e.interleaved=n,bs(t,i)}function bs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Is=!1;function Vw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function co(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,bs(t,n)}return r=i.interleaved,r===null?(e.next=e,Uw(i)):(e.next=r.next,r.next=e),i.interleaved=e,bs(t,n)}function ef(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ow(t,n)}}function Wx(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Kf(t,e,n,i){var r=t.updateQueue;Is=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Pt({},d,h);break e;case 2:Is=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ba|=o,t.lanes=o,t.memoizedState=d}}function Gx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ne(191,r));r.call(i)}}}var gA=new p2.Component().refs;function My(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cm={isMounted:function(t){return(t=t._reactInternals)?Da(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=On(),r=fo(t),s=cs(i,r);s.payload=e,n!=null&&(s.callback=n),e=co(t,s,r),e!==null&&(nr(e,t,r,i),ef(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=On(),r=fo(t),s=cs(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=co(t,s,r),e!==null&&(nr(e,t,r,i),ef(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=On(),i=fo(t),r=cs(n,i);r.tag=2,e!=null&&(r.callback=e),e=co(t,r,i),e!==null&&(nr(e,t,i,n),ef(e,t,i))}};function Kx(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Nc(n,i)||!Nc(r,s):!0}function yA(t,e,n){var i=!1,r=wo,s=e.contextType;return typeof s=="object"&&s!==null?s=Li(s):(r=Gn(e)?ya:yn.current,i=e.contextTypes,s=(i=i!=null)?Wl(t,r):wo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cm,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Xx(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&cm.enqueueReplaceState(e,e.state,null)}function $y(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=gA,Vw(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Li(s):(s=Gn(e)?ya:yn.current,r.context=Wl(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(My(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&cm.enqueueReplaceState(r,r.state,null),Kf(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ru(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var i=n.stateNode}if(!i)throw Error(ne(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===gA&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function sh(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zx(t){var e=t._init;return e(t._payload)}function vA(t){function e(m,v){if(t){var w=m.deletions;w===null?(m.deletions=[v],m.flags|=16):w.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function i(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function r(m,v){return m=po(m,v),m.index=0,m.sibling=null,m}function s(m,v,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<v?(m.flags|=2,v):w):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,v,w,k){return v===null||v.tag!==6?(v=Ig(w,m.mode,k),v.return=m,v):(v=r(v,w),v.return=m,v)}function l(m,v,w,k){var C=w.type;return C===il?c(m,v,w.props.children,k,w.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ds&&Zx(C)===v.type)?(k=r(v,w.props),k.ref=Ru(m,v,w),k.return=m,k):(k=af(w.type,w.key,w.props,null,m.mode,k),k.ref=Ru(m,v,w),k.return=m,k)}function u(m,v,w,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Lg(w,m.mode,k),v.return=m,v):(v=r(v,w.children||[]),v.return=m,v)}function c(m,v,w,k,C){return v===null||v.tag!==7?(v=ha(w,m.mode,k,C),v.return=m,v):(v=r(v,w),v.return=m,v)}function d(m,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ig(""+v,m.mode,w),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xd:return w=af(v.type,v.key,v.props,null,m.mode,w),w.ref=Ru(m,null,v),w.return=m,w;case nl:return v=Lg(v,m.mode,w),v.return=m,v;case Ds:var k=v._init;return d(m,k(v._payload),w)}if(Xu(v)||Au(v))return v=ha(v,m.mode,w,null),v.return=m,v;sh(m,v)}return null}function h(m,v,w,k){var C=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:a(m,v,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xd:return w.key===C?l(m,v,w,k):null;case nl:return w.key===C?u(m,v,w,k):null;case Ds:return C=w._init,h(m,v,C(w._payload),k)}if(Xu(w)||Au(w))return C!==null?null:c(m,v,w,k,null);sh(m,w)}return null}function f(m,v,w,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return m=m.get(w)||null,a(v,m,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Xd:return m=m.get(k.key===null?w:k.key)||null,l(v,m,k,C);case nl:return m=m.get(k.key===null?w:k.key)||null,u(v,m,k,C);case Ds:var O=k._init;return f(m,v,w,O(k._payload),C)}if(Xu(k)||Au(k))return m=m.get(w)||null,c(v,m,k,C,null);sh(v,k)}return null}function p(m,v,w,k){for(var C=null,O=null,M=v,E=v=0,N=null;M!==null&&E<w.length;E++){M.index>E?(N=M,M=null):N=M.sibling;var D=h(m,M,w[E],k);if(D===null){M===null&&(M=N);break}t&&M&&D.alternate===null&&e(m,M),v=s(D,v,E),O===null?C=D:O.sibling=D,O=D,M=N}if(E===w.length)return n(m,M),gt&&Xo(m,E),C;if(M===null){for(;E<w.length;E++)M=d(m,w[E],k),M!==null&&(v=s(M,v,E),O===null?C=M:O.sibling=M,O=M);return gt&&Xo(m,E),C}for(M=i(m,M);E<w.length;E++)N=f(M,m,E,w[E],k),N!==null&&(t&&N.alternate!==null&&M.delete(N.key===null?E:N.key),v=s(N,v,E),O===null?C=N:O.sibling=N,O=N);return t&&M.forEach(function(T){return e(m,T)}),gt&&Xo(m,E),C}function g(m,v,w,k){var C=Au(w);if(typeof C!="function")throw Error(ne(150));if(w=C.call(w),w==null)throw Error(ne(151));for(var O=C=null,M=v,E=v=0,N=null,D=w.next();M!==null&&!D.done;E++,D=w.next()){M.index>E?(N=M,M=null):N=M.sibling;var T=h(m,M,D.value,k);if(T===null){M===null&&(M=N);break}t&&M&&T.alternate===null&&e(m,M),v=s(T,v,E),O===null?C=T:O.sibling=T,O=T,M=N}if(D.done)return n(m,M),gt&&Xo(m,E),C;if(M===null){for(;!D.done;E++,D=w.next())D=d(m,D.value,k),D!==null&&(v=s(D,v,E),O===null?C=D:O.sibling=D,O=D);return gt&&Xo(m,E),C}for(M=i(m,M);!D.done;E++,D=w.next())D=f(M,m,E,D.value,k),D!==null&&(t&&D.alternate!==null&&M.delete(D.key===null?E:D.key),v=s(D,v,E),O===null?C=D:O.sibling=D,O=D);return t&&M.forEach(function(F){return e(m,F)}),gt&&Xo(m,E),C}function b(m,v,w,k){if(typeof w=="object"&&w!==null&&w.type===il&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Xd:e:{for(var C=w.key,O=v;O!==null;){if(O.key===C){if(C=w.type,C===il){if(O.tag===7){n(m,O.sibling),v=r(O,w.props.children),v.return=m,m=v;break e}}else if(O.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ds&&Zx(C)===O.type){n(m,O.sibling),v=r(O,w.props),v.ref=Ru(m,O,w),v.return=m,m=v;break e}n(m,O);break}else e(m,O);O=O.sibling}w.type===il?(v=ha(w.props.children,m.mode,k,w.key),v.return=m,m=v):(k=af(w.type,w.key,w.props,null,m.mode,k),k.ref=Ru(m,v,w),k.return=m,m=k)}return o(m);case nl:e:{for(O=w.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(m,v.sibling),v=r(v,w.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=Lg(w,m.mode,k),v.return=m,m=v}return o(m);case Ds:return O=w._init,b(m,v,O(w._payload),k)}if(Xu(w))return p(m,v,w,k);if(Au(w))return g(m,v,w,k);sh(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(m,v.sibling),v=r(v,w),v.return=m,m=v):(n(m,v),v=Ig(w,m.mode,k),v.return=m,m=v),o(m)):n(m,v)}return b}var Kl=vA(!0),wA=vA(!1),Md={},Lr=To(Md),Ic=To(Md),Lc=To(Md);function sa(t){if(t===Md)throw Error(ne(174));return t}function Hw(t,e){switch(at(Lc,e),at(Ic,t),at(Lr,Md),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ly(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ly(e,t)}ft(Lr),at(Lr,e)}function Xl(){ft(Lr),ft(Ic),ft(Lc)}function bA(t){sa(Lc.current);var e=sa(Lr.current),n=ly(e,t.type);e!==n&&(at(Ic,t),at(Lr,n))}function Ww(t){Ic.current===t&&(ft(Lr),ft(Ic))}var St=To(0);function Xf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $g=[];function Gw(){for(var t=0;t<$g.length;t++)$g[t]._workInProgressVersionPrimary=null;$g.length=0}var tf=Cs.ReactCurrentDispatcher,Rg=Cs.ReactCurrentBatchConfig,wa=0,Ct=null,jt=null,Kt=null,Zf=!1,cc=!1,Bc=0,LD=0;function cn(){throw Error(ne(321))}function Kw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function Xw(t,e,n,i,r,s){if(wa=s,Ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tf.current=t===null||t.memoizedState===null?FD:UD,t=n(i,r),cc){s=0;do{if(cc=!1,Bc=0,25<=s)throw Error(ne(301));s+=1,Kt=jt=null,e.updateQueue=null,tf.current=VD,t=n(i,r)}while(cc)}if(tf.current=Yf,e=jt!==null&&jt.next!==null,wa=0,Kt=jt=Ct=null,Zf=!1,e)throw Error(ne(300));return t}function Zw(){var t=Bc!==0;return Bc=0,t}function Sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ct.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function Bi(){if(jt===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var e=Kt===null?Ct.memoizedState:Kt.next;if(e!==null)Kt=e,jt=t;else{if(t===null)throw Error(ne(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Kt===null?Ct.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function zc(t,e){return typeof e=="function"?e(t):e}function Ng(t){var e=Bi(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var i=jt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((wa&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Ct.lanes|=c,ba|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,ar(i,e.memoizedState)||(Un=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ct.lanes|=s,ba|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tg(t){var e=Bi(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ar(s,e.memoizedState)||(Un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function xA(){}function SA(t,e){var n=Ct,i=Bi(),r=e(),s=!ar(i.memoizedState,r);if(s&&(i.memoizedState=r,Un=!0),i=i.queue,Yw(CA.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Kt!==null&&Kt.memoizedState.tag&1){if(n.flags|=2048,jc(9,EA.bind(null,n,i,r,e),void 0,null),Zt===null)throw Error(ne(349));wa&30||kA(n,e,r)}return r}function kA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EA(t,e,n,i){e.value=n,e.getSnapshot=i,AA(e)&&PA(t)}function CA(t,e,n){return n(function(){AA(e)&&PA(t)})}function AA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch{return!0}}function PA(t){var e=bs(t,1);e!==null&&nr(e,t,1,-1)}function Yx(t){var e=Sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zc,lastRenderedState:t},e.queue=t,t=t.dispatch=jD.bind(null,Ct,t),[e.memoizedState,t]}function jc(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function OA(){return Bi().memoizedState}function nf(t,e,n,i){var r=Sr();Ct.flags|=t,r.memoizedState=jc(1|e,n,void 0,i===void 0?null:i)}function dm(t,e,n,i){var r=Bi();i=i===void 0?null:i;var s=void 0;if(jt!==null){var o=jt.memoizedState;if(s=o.destroy,i!==null&&Kw(i,o.deps)){r.memoizedState=jc(e,n,s,i);return}}Ct.flags|=t,r.memoizedState=jc(1|e,n,s,i)}function Jx(t,e){return nf(8390656,8,t,e)}function Yw(t,e){return dm(2048,8,t,e)}function MA(t,e){return dm(4,2,t,e)}function $A(t,e){return dm(4,4,t,e)}function RA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NA(t,e,n){return n=n!=null?n.concat([t]):null,dm(4,4,RA.bind(null,e,t),n)}function Jw(){}function TA(t,e){var n=Bi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Kw(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function _A(t,e){var n=Bi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Kw(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function DA(t,e,n){return wa&21?(ar(n,e)||(n=B2(),Ct.lanes|=n,ba|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Un=!0),t.memoizedState=n)}function BD(t,e){var n=et;et=n!==0&&4>n?n:4,t(!0);var i=Rg.transition;Rg.transition={};try{t(!1),e()}finally{et=n,Rg.transition=i}}function IA(){return Bi().memoizedState}function zD(t,e,n){var i=fo(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},LA(t))BA(e,n);else if(n=pA(t,e,n,i),n!==null){var r=On();nr(n,t,i,r),zA(n,e,i)}}function jD(t,e,n){var i=fo(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(LA(t))BA(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ar(a,o)){var l=e.interleaved;l===null?(r.next=r,Uw(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=pA(t,e,r,i),n!==null&&(r=On(),nr(n,t,i,r),zA(n,e,i))}}function LA(t){var e=t.alternate;return t===Ct||e!==null&&e===Ct}function BA(t,e){cc=Zf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zA(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ow(t,n)}}var Yf={readContext:Li,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},FD={readContext:Li,useCallback:function(t,e){return Sr().memoizedState=[t,e===void 0?null:e],t},useContext:Li,useEffect:Jx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nf(4194308,4,RA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nf(4194308,4,t,e)},useInsertionEffect:function(t,e){return nf(4,2,t,e)},useMemo:function(t,e){var n=Sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Sr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=zD.bind(null,Ct,t),[i.memoizedState,t]},useRef:function(t){var e=Sr();return t={current:t},e.memoizedState=t},useState:Yx,useDebugValue:Jw,useDeferredValue:function(t){return Sr().memoizedState=t},useTransition:function(){var t=Yx(!1),e=t[0];return t=BD.bind(null,t[1]),Sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ct,r=Sr();if(gt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),Zt===null)throw Error(ne(349));wa&30||kA(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Jx(CA.bind(null,i,s,t),[t]),i.flags|=2048,jc(9,EA.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Sr(),e=Zt.identifierPrefix;if(gt){var n=ls,i=as;n=(i&~(1<<32-tr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UD={readContext:Li,useCallback:TA,useContext:Li,useEffect:Yw,useImperativeHandle:NA,useInsertionEffect:MA,useLayoutEffect:$A,useMemo:_A,useReducer:Ng,useRef:OA,useState:function(){return Ng(zc)},useDebugValue:Jw,useDeferredValue:function(t){var e=Bi();return DA(e,jt.memoizedState,t)},useTransition:function(){var t=Ng(zc)[0],e=Bi().memoizedState;return[t,e]},useMutableSource:xA,useSyncExternalStore:SA,useId:IA,unstable_isNewReconciler:!1},VD={readContext:Li,useCallback:TA,useContext:Li,useEffect:Yw,useImperativeHandle:NA,useInsertionEffect:MA,useLayoutEffect:$A,useMemo:_A,useReducer:Tg,useRef:OA,useState:function(){return Tg(zc)},useDebugValue:Jw,useDeferredValue:function(t){var e=Bi();return jt===null?e.memoizedState=t:DA(e,jt.memoizedState,t)},useTransition:function(){var t=Tg(zc)[0],e=Bi().memoizedState;return[t,e]},useMutableSource:xA,useSyncExternalStore:SA,useId:IA,unstable_isNewReconciler:!1};function Zl(t,e){try{var n="",i=e;do n+=y_(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function _g(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ry(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HD=typeof WeakMap=="function"?WeakMap:Map;function jA(t,e,n){n=cs(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){qf||(qf=!0,Fy=i),Ry(t,e)},n}function FA(t,e,n){n=cs(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Ry(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ry(t,e),typeof i!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function qx(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new HD;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=r3.bind(null,t,e,n),e.then(t,t))}function Qx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function eS(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cs(-1,1),e.tag=2,co(n,e,1))),n.lanes|=1),t)}var WD=Cs.ReactCurrentOwner,Un=!1;function kn(t,e,n,i){e.child=t===null?wA(e,null,n,i):Kl(e,t.child,n,i)}function tS(t,e,n,i,r){n=n.render;var s=e.ref;return kl(e,r),i=Xw(t,e,n,i,s,r),n=Zw(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,xs(t,e,r)):(gt&&n&&Iw(e),e.flags|=1,kn(t,e,i,r),e.child)}function nS(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!sb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,UA(t,e,s,i,r)):(t=af(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Nc,n(o,i)&&t.ref===e.ref)return xs(t,e,r)}return e.flags|=1,t=po(s,i),t.ref=e.ref,t.return=e,e.child=t}function UA(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Nc(s,i)&&t.ref===e.ref)if(Un=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Un=!0);else return e.lanes=t.lanes,xs(t,e,r)}return Ny(t,e,n,i,r)}function VA(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(fl,si),si|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,at(fl,si),si|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,at(fl,si),si|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,at(fl,si),si|=i;return kn(t,e,r,n),e.child}function HA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ny(t,e,n,i,r){var s=Gn(n)?ya:yn.current;return s=Wl(e,s),kl(e,r),n=Xw(t,e,n,i,s,r),i=Zw(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,xs(t,e,r)):(gt&&i&&Iw(e),e.flags|=1,kn(t,e,n,r),e.child)}function iS(t,e,n,i,r){if(Gn(n)){var s=!0;Uf(e)}else s=!1;if(kl(e,r),e.stateNode===null)rf(t,e),yA(e,n,i),$y(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Li(u):(u=Gn(n)?ya:yn.current,u=Wl(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Xx(e,o,i,u),Is=!1;var h=e.memoizedState;o.state=h,Kf(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Wn.current||Is?(typeof c=="function"&&(My(e,n,c,i),l=e.memoizedState),(a=Is||Kx(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,mA(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Hi(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Li(l):(l=Gn(n)?ya:yn.current,l=Wl(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Xx(e,o,i,l),Is=!1,h=e.memoizedState,o.state=h,Kf(e,i,o,r);var p=e.memoizedState;a!==d||h!==p||Wn.current||Is?(typeof f=="function"&&(My(e,n,f,i),p=e.memoizedState),(u=Is||Kx(e,n,u,i,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return Ty(t,e,n,i,s,r)}function Ty(t,e,n,i,r,s){HA(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Ux(e,n,!1),xs(t,e,s);i=e.stateNode,WD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Kl(e,t.child,null,s),e.child=Kl(e,null,a,s)):kn(t,e,a,s),e.memoizedState=i.state,r&&Ux(e,n,!0),e.child}function WA(t){var e=t.stateNode;e.pendingContext?Fx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fx(t,e.context,!1),Hw(t,e.containerInfo)}function rS(t,e,n,i,r){return Gl(),Bw(r),e.flags|=256,kn(t,e,n,i),e.child}var _y={dehydrated:null,treeContext:null,retryLane:0};function Dy(t){return{baseLanes:t,cachePool:null,transitions:null}}function GA(t,e,n){var i=e.pendingProps,r=St.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),at(St,r&1),t===null)return Py(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pm(o,i,0,null),t=ha(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Dy(n),e.memoizedState=_y,t):qw(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return GD(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=po(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=po(a,s):(s=ha(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Dy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=_y,i}return s=t.child,t=s.sibling,i=po(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function qw(t,e){return e=pm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oh(t,e,n,i){return i!==null&&Bw(i),Kl(e,t.child,null,n),t=qw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GD(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=_g(Error(ne(422))),oh(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=pm({mode:"visible",children:i.children},r,0,null),s=ha(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Kl(e,t.child,null,o),e.child.memoizedState=Dy(o),e.memoizedState=_y,s);if(!(e.mode&1))return oh(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ne(419)),i=_g(s,i,void 0),oh(t,e,o,i)}if(a=(o&t.childLanes)!==0,Un||a){if(i=Zt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,bs(t,r),nr(i,t,r,-1))}return rb(),i=_g(Error(ne(421))),oh(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=s3.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ci=uo(r.nextSibling),fi=e,gt=!0,Zi=null,t!==null&&(Ai[Pi++]=as,Ai[Pi++]=ls,Ai[Pi++]=va,as=t.id,ls=t.overflow,va=e),e=qw(e,i.children),e.flags|=4096,e)}function sS(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Oy(t.return,e,n)}function Dg(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function KA(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(kn(t,e,i.children,n),i=St.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sS(t,n,e);else if(t.tag===19)sS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(at(St,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Xf(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Dg(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Xf(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Dg(e,!0,n,null,s);break;case"together":Dg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ba|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=po(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=po(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KD(t,e,n){switch(e.tag){case 3:WA(e),Gl();break;case 5:bA(e);break;case 1:Gn(e.type)&&Uf(e);break;case 4:Hw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;at(Wf,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(at(St,St.current&1),e.flags|=128,null):n&e.child.childLanes?GA(t,e,n):(at(St,St.current&1),t=xs(t,e,n),t!==null?t.sibling:null);at(St,St.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return KA(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),at(St,St.current),i)break;return null;case 22:case 23:return e.lanes=0,VA(t,e,n)}return xs(t,e,n)}var XA,Iy,ZA,YA;XA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Iy=function(){};ZA=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,sa(Lr.current);var s=null;switch(n){case"input":r=ry(t,r),i=ry(t,i),s=[];break;case"select":r=Pt({},r,{value:void 0}),i=Pt({},i,{value:void 0}),s=[];break;case"textarea":r=ay(t,r),i=ay(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=jf)}uy(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ut("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};YA=function(t,e,n,i){n!==i&&(e.flags|=4)};function Nu(t,e){if(!gt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function dn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function XD(t,e,n){var i=e.pendingProps;switch(Lw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(e),null;case 1:return Gn(e.type)&&Ff(),dn(e),null;case 3:return i=e.stateNode,Xl(),ft(Wn),ft(yn),Gw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(rh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zi!==null&&(Hy(Zi),Zi=null))),Iy(t,e),dn(e),null;case 5:Ww(e);var r=sa(Lc.current);if(n=e.type,t!==null&&e.stateNode!=null)ZA(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ne(166));return dn(e),null}if(t=sa(Lr.current),rh(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Mr]=e,i[Dc]=s,t=(e.mode&1)!==0,n){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(r=0;r<Yu.length;r++)ut(Yu[r],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":px(i,s),ut("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ut("invalid",i);break;case"textarea":gx(i,s),ut("invalid",i)}uy(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&ih(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ih(i.textContent,a,t),r=["children",""+a]):Cc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ut("scroll",i)}switch(n){case"input":Zd(i),mx(i,s,!0);break;case"textarea":Zd(i),yx(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=jf)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=k2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Mr]=e,t[Dc]=i,XA(t,e,!1,!1),e.stateNode=t;e:{switch(o=cy(n,i),n){case"dialog":ut("cancel",t),ut("close",t),r=i;break;case"iframe":case"object":case"embed":ut("load",t),r=i;break;case"video":case"audio":for(r=0;r<Yu.length;r++)ut(Yu[r],t);r=i;break;case"source":ut("error",t),r=i;break;case"img":case"image":case"link":ut("error",t),ut("load",t),r=i;break;case"details":ut("toggle",t),r=i;break;case"input":px(t,i),r=ry(t,i),ut("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Pt({},i,{value:void 0}),ut("invalid",t);break;case"textarea":gx(t,i),r=ay(t,i),ut("invalid",t);break;default:r=i}uy(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?A2(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&E2(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ac(t,l):typeof l=="number"&&Ac(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ut("scroll",t):l!=null&&Sw(t,s,l,o))}switch(n){case"input":Zd(t),mx(t,i,!1);break;case"textarea":Zd(t),yx(t);break;case"option":i.value!=null&&t.setAttribute("value",""+vo(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?wl(t,!!i.multiple,s,!1):i.defaultValue!=null&&wl(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=jf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dn(e),null;case 6:if(t&&e.stateNode!=null)YA(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ne(166));if(n=sa(Lc.current),sa(Lr.current),rh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Mr]=e,(s=i.nodeValue!==n)&&(t=fi,t!==null))switch(t.tag){case 3:ih(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ih(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Mr]=e,e.stateNode=i}return dn(e),null;case 13:if(ft(St),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gt&&ci!==null&&e.mode&1&&!(e.flags&128))fA(),Gl(),e.flags|=98560,s=!1;else if(s=rh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ne(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ne(317));s[Mr]=e}else Gl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dn(e),s=!1}else Zi!==null&&(Hy(Zi),Zi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||St.current&1?Vt===0&&(Vt=3):rb())),e.updateQueue!==null&&(e.flags|=4),dn(e),null);case 4:return Xl(),Iy(t,e),t===null&&Tc(e.stateNode.containerInfo),dn(e),null;case 10:return Fw(e.type._context),dn(e),null;case 17:return Gn(e.type)&&Ff(),dn(e),null;case 19:if(ft(St),s=e.memoizedState,s===null)return dn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Nu(s,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xf(t),o!==null){for(e.flags|=128,Nu(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return at(St,St.current&1|2),e.child}t=t.sibling}s.tail!==null&&_t()>Yl&&(e.flags|=128,i=!0,Nu(s,!1),e.lanes=4194304)}else{if(!i)if(t=Xf(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!gt)return dn(e),null}else 2*_t()-s.renderingStartTime>Yl&&n!==1073741824&&(e.flags|=128,i=!0,Nu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_t(),e.sibling=null,n=St.current,at(St,i?n&1|2:n&1),e):(dn(e),null);case 22:case 23:return ib(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?si&1073741824&&(dn(e),e.subtreeFlags&6&&(e.flags|=8192)):dn(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function ZD(t,e){switch(Lw(e),e.tag){case 1:return Gn(e.type)&&Ff(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xl(),ft(Wn),ft(yn),Gw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ww(e),null;case 13:if(ft(St),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Gl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ft(St),null;case 4:return Xl(),null;case 10:return Fw(e.type._context),null;case 22:case 23:return ib(),null;case 24:return null;default:return null}}var ah=!1,pn=!1,YD=typeof WeakSet=="function"?WeakSet:Set,ve=null;function hl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){$t(t,e,i)}else n.current=null}function Ly(t,e,n){try{n()}catch(i){$t(t,e,i)}}var oS=!1;function JD(t,e){if(by=Lf,t=eA(),Dw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(xy={focusedElem:t,selectionRange:n},Lf=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Hi(e.type,g),b);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(k){$t(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return p=oS,oS=!1,p}function dc(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Ly(e,n,s)}r=r.next}while(r!==i)}}function hm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function By(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JA(t){var e=t.alternate;e!==null&&(t.alternate=null,JA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mr],delete e[Dc],delete e[Ey],delete e[TD],delete e[_D])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qA(t){return t.tag===5||t.tag===3||t.tag===4}function aS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zy(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jf));else if(i!==4&&(t=t.child,t!==null))for(zy(t,e,n),t=t.sibling;t!==null;)zy(t,e,n),t=t.sibling}function jy(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(jy(t,e,n),t=t.sibling;t!==null;)jy(t,e,n),t=t.sibling}var Jt=null,Xi=!1;function Rs(t,e,n){for(n=n.child;n!==null;)QA(t,e,n),n=n.sibling}function QA(t,e,n){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(rm,n)}catch{}switch(n.tag){case 5:pn||hl(n,e);case 6:var i=Jt,r=Xi;Jt=null,Rs(t,e,n),Jt=i,Xi=r,Jt!==null&&(Xi?(t=Jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Jt.removeChild(n.stateNode));break;case 18:Jt!==null&&(Xi?(t=Jt,n=n.stateNode,t.nodeType===8?Og(t.parentNode,n):t.nodeType===1&&Og(t,n),$c(t)):Og(Jt,n.stateNode));break;case 4:i=Jt,r=Xi,Jt=n.stateNode.containerInfo,Xi=!0,Rs(t,e,n),Jt=i,Xi=r;break;case 0:case 11:case 14:case 15:if(!pn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ly(n,e,o),r=r.next}while(r!==i)}Rs(t,e,n);break;case 1:if(!pn&&(hl(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){$t(n,e,a)}Rs(t,e,n);break;case 21:Rs(t,e,n);break;case 22:n.mode&1?(pn=(i=pn)||n.memoizedState!==null,Rs(t,e,n),pn=i):Rs(t,e,n);break;default:Rs(t,e,n)}}function lS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YD),e.forEach(function(i){var r=o3.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ui(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jt=a.stateNode,Xi=!1;break e;case 3:Jt=a.stateNode.containerInfo,Xi=!0;break e;case 4:Jt=a.stateNode.containerInfo,Xi=!0;break e}a=a.return}if(Jt===null)throw Error(ne(160));QA(s,o,r),Jt=null,Xi=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){$t(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eP(e,t),e=e.sibling}function eP(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ui(e,t),yr(t),i&4){try{dc(3,t,t.return),hm(3,t)}catch(g){$t(t,t.return,g)}try{dc(5,t,t.return)}catch(g){$t(t,t.return,g)}}break;case 1:Ui(e,t),yr(t),i&512&&n!==null&&hl(n,n.return);break;case 5:if(Ui(e,t),yr(t),i&512&&n!==null&&hl(n,n.return),t.flags&32){var r=t.stateNode;try{Ac(r,"")}catch(g){$t(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&x2(r,s),cy(a,o);var u=cy(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?A2(r,d):c==="dangerouslySetInnerHTML"?E2(r,d):c==="children"?Ac(r,d):Sw(r,c,d,u)}switch(a){case"input":sy(r,s);break;case"textarea":S2(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?wl(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?wl(r,!!s.multiple,s.defaultValue,!0):wl(r,!!s.multiple,s.multiple?[]:"",!1))}r[Dc]=s}catch(g){$t(t,t.return,g)}}break;case 6:if(Ui(e,t),yr(t),i&4){if(t.stateNode===null)throw Error(ne(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){$t(t,t.return,g)}}break;case 3:if(Ui(e,t),yr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{$c(e.containerInfo)}catch(g){$t(t,t.return,g)}break;case 4:Ui(e,t),yr(t);break;case 13:Ui(e,t),yr(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(tb=_t())),i&4&&lS(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(pn=(u=pn)||c,Ui(e,t),pn=u):Ui(e,t),yr(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ve=t,c=t.child;c!==null;){for(d=ve=c;ve!==null;){switch(h=ve,f=h.child,h.tag){case 0:case 11:case 14:case 15:dc(4,h,h.return);break;case 1:hl(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){$t(i,n,g)}}break;case 5:hl(h,h.return);break;case 22:if(h.memoizedState!==null){cS(d);continue}}f!==null?(f.return=h,ve=f):cS(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=C2("display",o))}catch(g){$t(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){$t(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ui(e,t),yr(t),i&4&&lS(t);break;case 21:break;default:Ui(e,t),yr(t)}}function yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qA(n)){var i=n;break e}n=n.return}throw Error(ne(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ac(r,""),i.flags&=-33);var s=aS(t);jy(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=aS(t);zy(t,a,o);break;default:throw Error(ne(161))}}catch(l){$t(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qD(t,e,n){ve=t,tP(t)}function tP(t,e,n){for(var i=(t.mode&1)!==0;ve!==null;){var r=ve,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||ah;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||pn;a=ah;var u=pn;if(ah=o,(pn=l)&&!u)for(ve=r;ve!==null;)o=ve,l=o.child,o.tag===22&&o.memoizedState!==null?dS(r):l!==null?(l.return=o,ve=l):dS(r);for(;s!==null;)ve=s,tP(s),s=s.sibling;ve=r,ah=a,pn=u}uS(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ve=s):uS(t)}}function uS(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pn||hm(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!pn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Hi(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Gx(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Gx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&$c(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}pn||e.flags&512&&By(e)}catch(h){$t(e,e.return,h)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function cS(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function dS(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hm(4,e)}catch(l){$t(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){$t(e,r,l)}}var s=e.return;try{By(e)}catch(l){$t(e,s,l)}break;case 5:var o=e.return;try{By(e)}catch(l){$t(e,o,l)}}}catch(l){$t(e,e.return,l)}if(e===t){ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ve=a;break}ve=e.return}}var QD=Math.ceil,Jf=Cs.ReactCurrentDispatcher,Qw=Cs.ReactCurrentOwner,Ti=Cs.ReactCurrentBatchConfig,Ge=0,Zt=null,It=null,an=0,si=0,fl=To(0),Vt=0,Fc=null,ba=0,fm=0,eb=0,hc=null,jn=null,tb=0,Yl=1/0,Gr=null,qf=!1,Fy=null,ho=null,lh=!1,eo=null,Qf=0,fc=0,Uy=null,sf=-1,of=0;function On(){return Ge&6?_t():sf!==-1?sf:sf=_t()}function fo(t){return t.mode&1?Ge&2&&an!==0?an&-an:ID.transition!==null?(of===0&&(of=B2()),of):(t=et,t!==0||(t=window.event,t=t===void 0?16:W2(t.type)),t):1}function nr(t,e,n,i){if(50<fc)throw fc=0,Uy=null,Error(ne(185));Ad(t,n,i),(!(Ge&2)||t!==Zt)&&(t===Zt&&(!(Ge&2)&&(fm|=n),Vt===4&&Vs(t,an)),Kn(t,i),n===1&&Ge===0&&!(e.mode&1)&&(Yl=_t()+500,um&&_o()))}function Kn(t,e){var n=t.callbackNode;I_(t,e);var i=If(t,t===Zt?an:0);if(i===0)n!==null&&bx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&bx(n),e===1)t.tag===0?DD(hS.bind(null,t)):cA(hS.bind(null,t)),RD(function(){!(Ge&6)&&_o()}),n=null;else{switch(z2(i)){case 1:n=Pw;break;case 4:n=I2;break;case 16:n=Df;break;case 536870912:n=L2;break;default:n=Df}n=uP(n,nP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nP(t,e){if(sf=-1,of=0,Ge&6)throw Error(ne(327));var n=t.callbackNode;if(El()&&t.callbackNode!==n)return null;var i=If(t,t===Zt?an:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ep(t,i);else{e=i;var r=Ge;Ge|=2;var s=rP();(Zt!==t||an!==e)&&(Gr=null,Yl=_t()+500,da(t,e));do try{n3();break}catch(a){iP(t,a)}while(1);jw(),Jf.current=s,Ge=r,It!==null?e=0:(Zt=null,an=0,e=Vt)}if(e!==0){if(e===2&&(r=my(t),r!==0&&(i=r,e=Vy(t,r))),e===1)throw n=Fc,da(t,0),Vs(t,i),Kn(t,_t()),n;if(e===6)Vs(t,i);else{if(r=t.current.alternate,!(i&30)&&!e3(r)&&(e=ep(t,i),e===2&&(s=my(t),s!==0&&(i=s,e=Vy(t,s))),e===1))throw n=Fc,da(t,0),Vs(t,i),Kn(t,_t()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ne(345));case 2:Zo(t,jn,Gr);break;case 3:if(Vs(t,i),(i&130023424)===i&&(e=tb+500-_t(),10<e)){if(If(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){On(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ky(Zo.bind(null,t,jn,Gr),e);break}Zo(t,jn,Gr);break;case 4:if(Vs(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-tr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=_t()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*QD(i/1960))-i,10<i){t.timeoutHandle=ky(Zo.bind(null,t,jn,Gr),i);break}Zo(t,jn,Gr);break;case 5:Zo(t,jn,Gr);break;default:throw Error(ne(329))}}}return Kn(t,_t()),t.callbackNode===n?nP.bind(null,t):null}function Vy(t,e){var n=hc;return t.current.memoizedState.isDehydrated&&(da(t,e).flags|=256),t=ep(t,e),t!==2&&(e=jn,jn=n,e!==null&&Hy(e)),t}function Hy(t){jn===null?jn=t:jn.push.apply(jn,t)}function e3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ar(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vs(t,e){for(e&=~eb,e&=~fm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),i=1<<n;t[n]=-1,e&=~i}}function hS(t){if(Ge&6)throw Error(ne(327));El();var e=If(t,0);if(!(e&1))return Kn(t,_t()),null;var n=ep(t,e);if(t.tag!==0&&n===2){var i=my(t);i!==0&&(e=i,n=Vy(t,i))}if(n===1)throw n=Fc,da(t,0),Vs(t,e),Kn(t,_t()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zo(t,jn,Gr),Kn(t,_t()),null}function nb(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(Yl=_t()+500,um&&_o())}}function xa(t){eo!==null&&eo.tag===0&&!(Ge&6)&&El();var e=Ge;Ge|=1;var n=Ti.transition,i=et;try{if(Ti.transition=null,et=1,t)return t()}finally{et=i,Ti.transition=n,Ge=e,!(Ge&6)&&_o()}}function ib(){si=fl.current,ft(fl)}function da(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$D(n)),It!==null)for(n=It.return;n!==null;){var i=n;switch(Lw(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ff();break;case 3:Xl(),ft(Wn),ft(yn),Gw();break;case 5:Ww(i);break;case 4:Xl();break;case 13:ft(St);break;case 19:ft(St);break;case 10:Fw(i.type._context);break;case 22:case 23:ib()}n=n.return}if(Zt=t,It=t=po(t.current,null),an=si=e,Vt=0,Fc=null,eb=fm=ba=0,jn=hc=null,ra!==null){for(e=0;e<ra.length;e++)if(n=ra[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}ra=null}return t}function iP(t,e){do{var n=It;try{if(jw(),tf.current=Yf,Zf){for(var i=Ct.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Zf=!1}if(wa=0,Kt=jt=Ct=null,cc=!1,Bc=0,Qw.current=null,n===null||n.return===null){Vt=1,Fc=e,It=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=an,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Qx(o);if(f!==null){f.flags&=-257,eS(f,o,a,s,e),f.mode&1&&qx(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){qx(s,u,e),rb();break e}l=Error(ne(426))}}else if(gt&&a.mode&1){var b=Qx(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),eS(b,o,a,s,e),Bw(Zl(l,a));break e}}s=l=Zl(l,a),Vt!==4&&(Vt=2),hc===null?hc=[s]:hc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=jA(s,l,e);Wx(s,m);break e;case 1:a=l;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ho===null||!ho.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=FA(s,a,e);Wx(s,k);break e}}s=s.return}while(s!==null)}oP(n)}catch(C){e=C,It===n&&n!==null&&(It=n=n.return);continue}break}while(1)}function rP(){var t=Jf.current;return Jf.current=Yf,t===null?Yf:t}function rb(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Zt===null||!(ba&268435455)&&!(fm&268435455)||Vs(Zt,an)}function ep(t,e){var n=Ge;Ge|=2;var i=rP();(Zt!==t||an!==e)&&(Gr=null,da(t,e));do try{t3();break}catch(r){iP(t,r)}while(1);if(jw(),Ge=n,Jf.current=i,It!==null)throw Error(ne(261));return Zt=null,an=0,Vt}function t3(){for(;It!==null;)sP(It)}function n3(){for(;It!==null&&!P_();)sP(It)}function sP(t){var e=lP(t.alternate,t,si);t.memoizedProps=t.pendingProps,e===null?oP(t):It=e,Qw.current=null}function oP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ZD(n,e),n!==null){n.flags&=32767,It=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,It=null;return}}else if(n=XD(n,e,si),n!==null){It=n;return}if(e=e.sibling,e!==null){It=e;return}It=e=t}while(e!==null);Vt===0&&(Vt=5)}function Zo(t,e,n){var i=et,r=Ti.transition;try{Ti.transition=null,et=1,i3(t,e,n,i)}finally{Ti.transition=r,et=i}return null}function i3(t,e,n,i){do El();while(eo!==null);if(Ge&6)throw Error(ne(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(L_(t,s),t===Zt&&(It=Zt=null,an=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lh||(lh=!0,uP(Df,function(){return El(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ti.transition,Ti.transition=null;var o=et;et=1;var a=Ge;Ge|=4,Qw.current=null,JD(t,n),eP(n,t),kD(xy),Lf=!!by,xy=by=null,t.current=n,qD(n),O_(),Ge=a,et=o,Ti.transition=s}else t.current=n;if(lh&&(lh=!1,eo=t,Qf=r),s=t.pendingLanes,s===0&&(ho=null),R_(n.stateNode),Kn(t,_t()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(qf)throw qf=!1,t=Fy,Fy=null,t;return Qf&1&&t.tag!==0&&El(),s=t.pendingLanes,s&1?t===Uy?fc++:(fc=0,Uy=t):fc=0,_o(),null}function El(){if(eo!==null){var t=z2(Qf),e=Ti.transition,n=et;try{if(Ti.transition=null,et=16>t?16:t,eo===null)var i=!1;else{if(t=eo,eo=null,Qf=0,Ge&6)throw Error(ne(331));var r=Ge;for(Ge|=4,ve=t.current;ve!==null;){var s=ve,o=s.child;if(ve.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ve=u;ve!==null;){var c=ve;switch(c.tag){case 0:case 11:case 15:dc(8,c,s)}var d=c.child;if(d!==null)d.return=c,ve=d;else for(;ve!==null;){c=ve;var h=c.sibling,f=c.return;if(JA(c),c===u){ve=null;break}if(h!==null){h.return=f,ve=h;break}ve=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}ve=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ve=o;else e:for(;ve!==null;){if(s=ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dc(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,ve=m;break e}ve=s.return}}var v=t.current;for(ve=v;ve!==null;){o=ve;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ve=w;else e:for(o=v;ve!==null;){if(a=ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hm(9,a)}}catch(C){$t(a,a.return,C)}if(a===o){ve=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ve=k;break e}ve=a.return}}if(Ge=r,_o(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(rm,t)}catch{}i=!0}return i}finally{et=n,Ti.transition=e}}return!1}function fS(t,e,n){e=Zl(n,e),e=jA(t,e,1),t=co(t,e,1),e=On(),t!==null&&(Ad(t,1,e),Kn(t,e))}function $t(t,e,n){if(t.tag===3)fS(t,t,n);else for(;e!==null;){if(e.tag===3){fS(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ho===null||!ho.has(i))){t=Zl(n,t),t=FA(e,t,1),e=co(e,t,1),t=On(),e!==null&&(Ad(e,1,t),Kn(e,t));break}}e=e.return}}function r3(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=On(),t.pingedLanes|=t.suspendedLanes&n,Zt===t&&(an&n)===n&&(Vt===4||Vt===3&&(an&130023424)===an&&500>_t()-tb?da(t,0):eb|=n),Kn(t,e)}function aP(t,e){e===0&&(t.mode&1?(e=qd,qd<<=1,!(qd&130023424)&&(qd=4194304)):e=1);var n=On();t=bs(t,e),t!==null&&(Ad(t,e,n),Kn(t,n))}function s3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aP(t,n)}function o3(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ne(314))}i!==null&&i.delete(e),aP(t,n)}var lP;lP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wn.current)Un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Un=!1,KD(t,e,n);Un=!!(t.flags&131072)}else Un=!1,gt&&e.flags&1048576&&dA(e,Hf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;rf(t,e),t=e.pendingProps;var r=Wl(e,yn.current);kl(e,n),r=Xw(null,e,i,t,r,n);var s=Zw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gn(i)?(s=!0,Uf(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Vw(e),r.updater=cm,e.stateNode=r,r._reactInternals=e,$y(e,i,t,n),e=Ty(null,e,i,!0,s,n)):(e.tag=0,gt&&s&&Iw(e),kn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(rf(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=l3(i),t=Hi(i,t),r){case 0:e=Ny(null,e,i,t,n);break e;case 1:e=iS(null,e,i,t,n);break e;case 11:e=tS(null,e,i,t,n);break e;case 14:e=nS(null,e,i,Hi(i.type,t),n);break e}throw Error(ne(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Hi(i,r),Ny(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Hi(i,r),iS(t,e,i,r,n);case 3:e:{if(WA(e),t===null)throw Error(ne(387));i=e.pendingProps,s=e.memoizedState,r=s.element,mA(t,e),Kf(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Zl(Error(ne(423)),e),e=rS(t,e,i,n,r);break e}else if(i!==r){r=Zl(Error(ne(424)),e),e=rS(t,e,i,n,r);break e}else for(ci=uo(e.stateNode.containerInfo.firstChild),fi=e,gt=!0,Zi=null,n=wA(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gl(),i===r){e=xs(t,e,n);break e}kn(t,e,i,n)}e=e.child}return e;case 5:return bA(e),t===null&&Py(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Sy(i,r)?o=null:s!==null&&Sy(i,s)&&(e.flags|=32),HA(t,e),kn(t,e,o,n),e.child;case 6:return t===null&&Py(e),null;case 13:return GA(t,e,n);case 4:return Hw(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Kl(e,null,i,n):kn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Hi(i,r),tS(t,e,i,r,n);case 7:return kn(t,e,e.pendingProps,n),e.child;case 8:return kn(t,e,e.pendingProps.children,n),e.child;case 12:return kn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,at(Wf,i._currentValue),i._currentValue=o,s!==null)if(ar(s.value,o)){if(s.children===r.children&&!Wn.current){e=xs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=cs(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Oy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ne(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Oy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,kl(e,n),r=Li(r),i=i(r),e.flags|=1,kn(t,e,i,n),e.child;case 14:return i=e.type,r=Hi(i,e.pendingProps),r=Hi(i.type,r),nS(t,e,i,r,n);case 15:return UA(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Hi(i,r),rf(t,e),e.tag=1,Gn(i)?(t=!0,Uf(e)):t=!1,kl(e,n),yA(e,i,r),$y(e,i,r,n),Ty(null,e,i,!0,t,n);case 19:return KA(t,e,n);case 22:return VA(t,e,n)}throw Error(ne(156,e.tag))};function uP(t,e){return D2(t,e)}function a3(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(t,e,n,i){return new a3(t,e,n,i)}function sb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function l3(t){if(typeof t=="function")return sb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ew)return 11;if(t===Cw)return 14}return 2}function po(t,e){var n=t.alternate;return n===null?(n=$i(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function af(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")sb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case il:return ha(n.children,r,s,e);case kw:o=8,r|=8;break;case ey:return t=$i(12,n,e,r|2),t.elementType=ey,t.lanes=s,t;case ty:return t=$i(13,n,e,r),t.elementType=ty,t.lanes=s,t;case ny:return t=$i(19,n,e,r),t.elementType=ny,t.lanes=s,t;case v2:return pm(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case g2:o=10;break e;case y2:o=9;break e;case Ew:o=11;break e;case Cw:o=14;break e;case Ds:o=16,i=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=$i(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function ha(t,e,n,i){return t=$i(7,t,i,e),t.lanes=n,t}function pm(t,e,n,i){return t=$i(22,t,i,e),t.elementType=v2,t.lanes=n,t.stateNode={isHidden:!1},t}function Ig(t,e,n){return t=$i(6,t,null,e),t.lanes=n,t}function Lg(t,e,n){return e=$i(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function u3(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yg(0),this.expirationTimes=yg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yg(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ob(t,e,n,i,r,s,o,a,l){return t=new u3(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$i(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vw(s),t}function c3(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nl,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function cP(t){if(!t)return wo;t=t._reactInternals;e:{if(Da(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(Gn(n))return uA(t,n,e)}return e}function dP(t,e,n,i,r,s,o,a,l){return t=ob(n,i,!0,t,r,s,o,a,l),t.context=cP(null),n=t.current,i=On(),r=fo(n),s=cs(i,r),s.callback=e??null,co(n,s,r),t.current.lanes=r,Ad(t,r,i),Kn(t,i),t}function mm(t,e,n,i){var r=e.current,s=On(),o=fo(r);return n=cP(n),e.context===null?e.context=n:e.pendingContext=n,e=cs(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=co(r,e,o),t!==null&&(nr(t,r,o,s),ef(t,r,o)),o}function tp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ab(t,e){pS(t,e),(t=t.alternate)&&pS(t,e)}function d3(){return null}var hP=typeof reportError=="function"?reportError:function(t){console.error(t)};function lb(t){this._internalRoot=t}gm.prototype.render=lb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));mm(t,e,null,null)};gm.prototype.unmount=lb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xa(function(){mm(null,t,null,null)}),e[ws]=null}};function gm(t){this._internalRoot=t}gm.prototype.unstable_scheduleHydration=function(t){if(t){var e=U2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Us.length&&e!==0&&e<Us[n].priority;n++);Us.splice(n,0,t),n===0&&H2(t)}};function ub(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ym(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mS(){}function h3(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=tp(o);s.call(u)}}var o=dP(e,i,t,0,null,!1,!1,"",mS);return t._reactRootContainer=o,t[ws]=o.current,Tc(t.nodeType===8?t.parentNode:t),xa(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=tp(l);a.call(u)}}var l=ob(t,0,!1,null,null,!1,!1,"",mS);return t._reactRootContainer=l,t[ws]=l.current,Tc(t.nodeType===8?t.parentNode:t),xa(function(){mm(e,l,n,i)}),l}function vm(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=tp(o);a.call(l)}}mm(e,o,t,r)}else o=h3(n,e,t,r,i);return tp(o)}j2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zu(e.pendingLanes);n!==0&&(Ow(e,n|1),Kn(e,_t()),!(Ge&6)&&(Yl=_t()+500,_o()))}break;case 13:xa(function(){var i=bs(t,1);if(i!==null){var r=On();nr(i,t,1,r)}}),ab(t,1)}};Mw=function(t){if(t.tag===13){var e=bs(t,134217728);if(e!==null){var n=On();nr(e,t,134217728,n)}ab(t,134217728)}};F2=function(t){if(t.tag===13){var e=fo(t),n=bs(t,e);if(n!==null){var i=On();nr(n,t,e,i)}ab(t,e)}};U2=function(){return et};V2=function(t,e){var n=et;try{return et=t,e()}finally{et=n}};hy=function(t,e,n){switch(e){case"input":if(sy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=lm(i);if(!r)throw Error(ne(90));b2(i),sy(i,r)}}}break;case"textarea":S2(t,n);break;case"select":e=n.value,e!=null&&wl(t,!!n.multiple,e,!1)}};M2=nb;$2=xa;var f3={usingClientEntryPoint:!1,Events:[Od,al,lm,P2,O2,nb]},Tu={findFiberByHostInstance:ia,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},p3={bundleType:Tu.bundleType,version:Tu.version,rendererPackageName:Tu.rendererPackageName,rendererConfig:Tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T2(t),t===null?null:t.stateNode},findFiberByHostInstance:Tu.findFiberByHostInstance||d3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uh.isDisabled&&uh.supportsFiber)try{rm=uh.inject(p3),Ir=uh}catch{}}mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f3;mi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ub(e))throw Error(ne(200));return c3(t,e,null,n)};mi.createRoot=function(t,e){if(!ub(t))throw Error(ne(299));var n=!1,i="",r=hP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=ob(t,1,!1,null,null,n,!1,i,r),t[ws]=e.current,Tc(t.nodeType===8?t.parentNode:t),new lb(e)};mi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=T2(e),t=t===null?null:t.stateNode,t};mi.flushSync=function(t){return xa(t)};mi.hydrate=function(t,e,n){if(!ym(e))throw Error(ne(200));return vm(null,t,e,!0,n)};mi.hydrateRoot=function(t,e,n){if(!ub(t))throw Error(ne(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=hP;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dP(e,null,t,1,n??null,r,!1,s,o),t[ws]=e.current,Tc(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new gm(e)};mi.render=function(t,e,n){if(!ym(e))throw Error(ne(200));return vm(null,t,e,!1,n)};mi.unmountComponentAtNode=function(t){if(!ym(t))throw Error(ne(40));return t._reactRootContainer?(xa(function(){vm(null,null,t,!1,function(){t._reactRootContainer=null,t[ws]=null})}),!0):!1};mi.unstable_batchedUpdates=nb;mi.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ym(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return vm(t,e,n,!1,i)};mi.version="18.2.0-next-9e3b772b8-20220608";function fP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fP)}catch(t){console.error(t)}}fP(),d2.exports=mi;var Do=d2.exports;const pP=fu(Do);var gS=Do;q0.createRoot=gS.createRoot,q0.hydrateRoot=gS.hydrateRoot;function m3(t,{insertAt:e}={}){if(!t||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}m3(`[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 6px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:-3px;margin-right:4px}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:-1px}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:auto;border:none;cursor:pointer;outline:none;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:auto}[data-sonner-toast] [data-cancel]{color:var(--color);background:var(--border-color)}[data-sonner-toast] [data-close-button]{position:absolute;left:0;top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:translate(-35%,-35%);border-radius:50%;opacity:0;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]{opacity:1}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}
`);var g3=t=>{switch(t){case"success":return w3;case"error":return b3;default:return null}},y3=Array(12).fill(0),v3=({visible:t})=>de.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},de.createElement("div",{className:"sonner-spinner"},y3.map((e,n)=>de.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),w3=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),b3=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Wy=0,x3=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...i}=t,r=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Wy++;return this.toasts.find(s=>s.id===r)?this.toasts=this.toasts.map(s=>s.id===r?(this.publish({...s,...t,id:r,title:n}),{...s,...t,id:r,title:n}):s):this.addToast({title:n,...i,id:r}),r},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.promise=(t,e)=>{let n=this.create({...e,promise:t,type:"loading",message:e.loading});return(t instanceof Promise?t:t()).then(i=>{let r=typeof e.success=="function"?e.success(i):e.success;this.create({id:n,type:"success",message:r})}).catch(i=>{let r=typeof e.error=="function"?e.error(i):e.error;this.create({id:n,type:"error",message:r})}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Wy++;this.publish({jsx:t(n),id:n,...e})},this.subscribers=[],this.toasts=[]}},Ls=new x3,S3=(t,e)=>{let n=(e==null?void 0:e.id)||Wy++;return Ls.addToast({title:t,...e,id:n}),n},k3=S3,wm=Object.assign(k3,{success:Ls.success,error:Ls.error,custom:Ls.custom,message:Ls.message,promise:Ls.promise,dismiss:Ls.dismiss}),E3=3,C3="32px",A3=4e3,P3=356,mP=14,O3=20,M3=200,$3=t=>{let{invert:e,toast:n,interacting:i,setHeights:r,visibleToasts:s,heights:o,index:a,toasts:l,expanded:u,removeToast:c,closeButton:d,style:h,className:f="",descriptionClassName:p="",duration:g,position:b,expandByDefault:m}=t,[v,w]=de.useState(!1),[k,C]=de.useState(!1),[O,M]=de.useState(!1),[E,N]=de.useState(!1),[D,T]=de.useState(0),[F,j]=de.useState(0),B=de.useRef(null),K=a===0,Y=a+1<=s,ee=n.type,W=n.className||"",R=n.descriptionClassName||"",H=de.useMemo(()=>o.findIndex(V=>V.toastId===n.id)||0,[o,n.id]),q=de.useMemo(()=>n.duration||g||A3,[n.duration,g]),re=de.useRef(0),we=de.useRef(0),U=de.useRef(q),I=de.useRef(0),G=de.useRef(null),[S,P]=b.split("-"),_=de.useMemo(()=>o.reduce((V,Z,Q)=>Q>=H?V:V+Z.height,0),[o,H]),$=n.invert||e,z=ee==="loading";we.current=de.useMemo(()=>H*mP+_,[H,_]),de.useEffect(()=>{w(!0)},[]),de.useLayoutEffect(()=>{if(!v)return;let V=B.current,Z=V.style.height;V.style.height="auto";let Q=V.getBoundingClientRect().height;V.style.height=Z,j(Q),r($e=>$e.find(he=>he.toastId===n.id)?$e.map(he=>he.toastId===n.id?{...he,height:Q}:he):[{toastId:n.id,height:Q},...$e])},[v,n.title,n.description,r,n.id]);let X=de.useCallback(()=>{C(!0),T(we.current),r(V=>V.filter(Z=>Z.toastId!==n.id)),setTimeout(()=>{c(n)},M3)},[n,c,r,we]);return de.useEffect(()=>{if(n.promise&&ee==="loading"||n.duration===1/0)return;let V;return u||i?(()=>{if(I.current<re.current){let Z=new Date().getTime()-re.current;U.current=U.current-Z}I.current=new Date().getTime()})():(re.current=new Date().getTime(),V=setTimeout(()=>{var Z;(Z=n.onAutoClose)==null||Z.call(n,n),X()},U.current)),()=>clearTimeout(V)},[u,i,m,n,q,X,n.promise,ee]),de.useEffect(()=>{let V=B.current;if(V){let Z=V.getBoundingClientRect().height;return j(Z),r(Q=>[{toastId:n.id,height:Z},...Q]),()=>r(Q=>Q.filter($e=>$e.toastId!==n.id))}},[r,n.id]),de.useEffect(()=>{n.delete&&X()},[X,n.delete]),de.createElement("li",{"aria-live":n.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:B,className:f+" "+W,"data-sonner-toast":"","data-styled":!n.jsx,"data-mounted":v,"data-promise":!!n.promise,"data-removed":k,"data-visible":Y,"data-y-position":S,"data-x-position":P,"data-index":a,"data-front":K,"data-swiping":O,"data-type":ee,"data-invert":$,"data-swipe-out":E,"data-expanded":!!(u||m&&v),style:{"--index":a,"--toasts-before":a,"--z-index":l.length-a,"--offset":`${k?D:we.current}px`,"--initial-height":m?"auto":`${F}px`,...h,...n.style},onPointerDown:V=>{z||(T(we.current),V.target.setPointerCapture(V.pointerId),V.target.tagName!=="BUTTON"&&(M(!0),G.current={x:V.clientX,y:V.clientY}))},onPointerUp:()=>{var V,Z,Q;if(E)return;G.current=null;let $e=Number(((V=B.current)==null?void 0:V.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs($e)>=O3){T(we.current),(Z=n.onDismiss)==null||Z.call(n,n),X(),N(!0);return}(Q=B.current)==null||Q.style.setProperty("--swipe-amount","0px"),M(!1)},onPointerMove:V=>{var Z;if(!G.current)return;let Q=V.clientY-G.current.y,$e=V.clientX-G.current.x,he=(S==="top"?Math.min:Math.max)(0,Q),Re=V.pointerType==="touch"?10:2;Math.abs(he)>Re?(Z=B.current)==null||Z.style.setProperty("--swipe-amount",`${Q}px`):Math.abs($e)>Re&&(G.current=null)}},d&&!n.jsx?de.createElement("button",{"aria-label":"Close toast","data-disabled":z,"data-close-button":!0,onClick:z?void 0:()=>{var V;X(),(V=n.onDismiss)==null||V.call(n,n)}},de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},de.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),de.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,n.jsx||de.isValidElement(n.title)?n.jsx||n.title:de.createElement(de.Fragment,null,ee||n.icon||n.promise?de.createElement("div",{"data-icon":""},n.promise?de.createElement(v3,{visible:ee==="loading"}):null,n.icon||g3(ee)):null,de.createElement("div",{"data-content":""},de.createElement("div",{"data-title":""},n.title),n.description?de.createElement("div",{"data-description":"",className:p+R},n.description):null),n.cancel?de.createElement("button",{"data-button":!0,"data-cancel":!0,onClick:()=>{var V;X(),(V=n.cancel)!=null&&V.onClick&&n.cancel.onClick()}},n.cancel.label):null,n.action?de.createElement("button",{"data-button":"",onClick:V=>{var Z;(Z=n.action)==null||Z.onClick(V),!V.defaultPrevented&&X()}},n.action.label):null))},R3=t=>{var e;let{invert:n,position:i="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,theme:u="light",richColors:c,duration:d,style:h,visibleToasts:f=E3,toastOptions:p}=t,[g,b]=de.useState([]),[m,v]=de.useState([]),[w,k]=de.useState(!1),[C,O]=de.useState(!1),[M,E]=de.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),[N,D]=i.split("-"),T=de.useRef(null),F=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=de.useCallback(B=>b(K=>K.filter(({id:Y})=>Y!==B.id)),[]);return de.useEffect(()=>Ls.subscribe(B=>{if(B.dismiss){b(K=>K.map(Y=>Y.id===B.id?{...Y,delete:!0}:Y));return}setTimeout(()=>{pP.flushSync(()=>{b(K=>{let Y=K.findIndex(ee=>ee.id===B.id);return Y!==-1?[...K.slice(0,Y),{...K[Y],...B},...K.slice(Y+1)]:[B,...K]})})})}),[]),de.useEffect(()=>{if(u!=="system"){E(u);return}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{E(B?"dark":"light")})},[u]),de.useEffect(()=>{g.length<=1&&k(!1)},[g]),de.useEffect(()=>{let B=K=>{var Y,ee;r.every(W=>K[W]||K.code===W)&&(k(!0),(Y=T.current)==null||Y.focus()),K.code==="Escape"&&(document.activeElement===T.current||(ee=T.current)!=null&&ee.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[r]),g.length?de.createElement("section",{"aria-label":`Notifications ${F}`,tabIndex:-1},de.createElement("ol",{tabIndex:-1,ref:T,className:a,"data-sonner-toaster":!0,"data-theme":M,"data-rich-colors":c,"data-y-position":N,"data-x-position":D,style:{"--front-toast-height":`${(e=m[0])==null?void 0:e.height}px`,"--offset":typeof l=="number"?`${l}px`:l||C3,"--width":`${P3}px`,"--gap":`${mP}px`,...h},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{C||k(!1)},onPointerDown:()=>{O(!0)},onPointerUp:()=>O(!1)},g.map((B,K)=>de.createElement($3,{key:B.id,index:K,toast:B,duration:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:f,closeButton:o,interacting:C,position:i,style:p==null?void 0:p.style,removeToast:j,toasts:g,heights:m,setHeights:v,expandByDefault:s,expanded:w})))):null};function le(){return le=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},le.apply(this,arguments)}function Se(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function Hr(t,e=[]){let n=[];function i(s,o){const a=y.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,g=(h==null?void 0:h[t][l])||a,b=y.useMemo(()=>p,Object.values(p));return y.createElement(g.Provider,{value:b},f)}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=y.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const r=()=>{const s=n.map(o=>y.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,N3(r,...e)]}function N3(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function T3(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function bm(...t){return e=>t.forEach(n=>T3(n,e))}function Qe(...t){return y.useCallback(bm(...t),t)}const Sa=y.forwardRef((t,e)=>{const{children:n,...i}=t,r=y.Children.toArray(n),s=r.find(D3);if(s){const o=s.props.children,a=r.map(l=>l===s?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:l);return y.createElement(Gy,le({},i,{ref:e}),y.isValidElement(o)?y.cloneElement(o,void 0,a):null)}return y.createElement(Gy,le({},i,{ref:e}),n)});Sa.displayName="Slot";const Gy=y.forwardRef((t,e)=>{const{children:n,...i}=t;return y.isValidElement(n)?y.cloneElement(n,{...I3(i,n.props),ref:e?bm(e,n.ref):n.ref}):y.Children.count(n)>1?y.Children.only(null):null});Gy.displayName="SlotClone";const _3=({children:t})=>y.createElement(y.Fragment,null,t);function D3(t){return y.isValidElement(t)&&t.type===_3}function I3(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function xm(t){const e=t+"CollectionProvider",[n,i]=Hr(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:g}=f,b=de.useRef(null),m=de.useRef(new Map).current;return de.createElement(r,{scope:p,itemMap:m,collectionRef:b},g)},a=t+"CollectionSlot",l=de.forwardRef((f,p)=>{const{scope:g,children:b}=f,m=s(a,g),v=Qe(p,m.collectionRef);return de.createElement(Sa,{ref:v},b)}),u=t+"CollectionItemSlot",c="data-radix-collection-item",d=de.forwardRef((f,p)=>{const{scope:g,children:b,...m}=f,v=de.useRef(null),w=Qe(p,v),k=s(u,g);return de.useEffect(()=>(k.itemMap.set(v,{ref:v,...m}),()=>void k.itemMap.delete(v))),de.createElement(Sa,{[c]:"",ref:w},b)});function h(f){const p=s(t+"CollectionConsumer",f);return de.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const m=Array.from(b.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((k,C)=>m.indexOf(k.ref.current)-m.indexOf(C.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,i]}const lr=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},L3=ww["useId".toString()]||(()=>{});let B3=0;function ka(t){const[e,n]=y.useState(L3());return lr(()=>{t||n(i=>i??String(B3++))},[t]),t||(e?`radix-${e}`:"")}const z3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=z3.reduce((t,e)=>{const n=y.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?Sa:e;return y.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),y.createElement(a,le({},o,{ref:r}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function gP(t,e){t&&Do.flushSync(()=>t.dispatchEvent(e))}function ur(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...n)},[])}function bo({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=j3({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:i,a=ur(n),l=y.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else r(u)},[s,t,r,a]);return[o,l]}function j3({defaultProp:t,onChange:e}){const n=y.useState(t),[i]=n,r=y.useRef(i),s=ur(e);return y.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}const F3=y.createContext(void 0);function $d(t){const e=y.useContext(F3);return t||e||"ltr"}const Bg="rovingFocusGroup.onEntryFocus",U3={bubbles:!1,cancelable:!0},cb="RovingFocusGroup",[Ky,yP,V3]=xm(cb),[H3,Sm]=Hr(cb,[V3]),[W3,G3]=H3(cb),K3=y.forwardRef((t,e)=>y.createElement(Ky.Provider,{scope:t.__scopeRovingFocusGroup},y.createElement(Ky.Slot,{scope:t.__scopeRovingFocusGroup},y.createElement(X3,le({},t,{ref:e}))))),X3=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,...c}=t,d=y.useRef(null),h=Qe(e,d),f=$d(s),[p=null,g]=bo({prop:o,defaultProp:a,onChange:l}),[b,m]=y.useState(!1),v=ur(u),w=yP(n),k=y.useRef(!1),[C,O]=y.useState(0);return y.useEffect(()=>{const M=d.current;if(M)return M.addEventListener(Bg,v),()=>M.removeEventListener(Bg,v)},[v]),y.createElement(W3,{scope:n,orientation:i,dir:f,loop:r,currentTabStopId:p,onItemFocus:y.useCallback(M=>g(M),[g]),onItemShiftTab:y.useCallback(()=>m(!0),[]),onFocusableItemAdd:y.useCallback(()=>O(M=>M+1),[]),onFocusableItemRemove:y.useCallback(()=>O(M=>M-1),[])},y.createElement(Je.div,le({tabIndex:b||C===0?-1:0,"data-orientation":i},c,{ref:h,style:{outline:"none",...t.style},onMouseDown:Se(t.onMouseDown,()=>{k.current=!0}),onFocus:Se(t.onFocus,M=>{const E=!k.current;if(M.target===M.currentTarget&&E&&!b){const N=new CustomEvent(Bg,U3);if(M.currentTarget.dispatchEvent(N),!N.defaultPrevented){const D=w().filter(K=>K.focusable),T=D.find(K=>K.active),F=D.find(K=>K.id===p),B=[T,F,...D].filter(Boolean).map(K=>K.ref.current);vP(B)}}k.current=!1}),onBlur:Se(t.onBlur,()=>m(!1))})))}),Z3="RovingFocusGroupItem",Y3=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=t,a=ka(),l=s||a,u=G3(Z3,n),c=u.currentTabStopId===l,d=yP(n),{onFocusableItemAdd:h,onFocusableItemRemove:f}=u;return y.useEffect(()=>{if(i)return h(),()=>f()},[i,h,f]),y.createElement(Ky.ItemSlot,{scope:n,id:l,focusable:i,active:r},y.createElement(Je.span,le({tabIndex:c?0:-1,"data-orientation":u.orientation},o,{ref:e,onMouseDown:Se(t.onMouseDown,p=>{i?u.onItemFocus(l):p.preventDefault()}),onFocus:Se(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:Se(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=Q3(p,u.orientation,u.dir);if(g!==void 0){p.preventDefault();let m=d().filter(v=>v.focusable).map(v=>v.ref.current);if(g==="last")m.reverse();else if(g==="prev"||g==="next"){g==="prev"&&m.reverse();const v=m.indexOf(p.currentTarget);m=u.loop?eI(m,v+1):m.slice(v+1)}setTimeout(()=>vP(m))}})})))}),J3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function q3(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Q3(t,e,n){const i=q3(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return J3[i]}function vP(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function eI(t,e){return t.map((n,i)=>t[(e+i)%t.length])}const wP=K3,bP=Y3;function tI(t,e){return y.useReducer((n,i)=>{const r=e[n][i];return r??n},t)}const Io=t=>{const{present:e,children:n}=t,i=nI(e),r=typeof n=="function"?n({present:i.isPresent}):y.Children.only(n),s=Qe(i.ref,r.ref);return typeof n=="function"||i.isPresent?y.cloneElement(r,{ref:s}):null};Io.displayName="Presence";function nI(t){const[e,n]=y.useState(),i=y.useRef({}),r=y.useRef(t),s=y.useRef("none"),o=t?"mounted":"unmounted",[a,l]=tI(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=ch(i.current);s.current=a==="mounted"?u:"none"},[a]),lr(()=>{const u=i.current,c=r.current;if(c!==t){const h=s.current,f=ch(u);t?l("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&h!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),lr(()=>{if(e){const u=d=>{const f=ch(i.current).includes(d.animationName);d.target===e&&f&&Do.flushSync(()=>l("ANIMATION_END"))},c=d=>{d.target===e&&(s.current=ch(i.current))};return e.addEventListener("animationstart",c),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",c),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(u=>{u&&(i.current=getComputedStyle(u)),n(u)},[])}}function ch(t){return(t==null?void 0:t.animationName)||"none"}const xP="Tabs",[iI,fZ]=Hr(xP,[Sm]),SP=Sm(),[rI,db]=iI(xP),sI=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,c=$d(a),[d,h]=bo({prop:i,onChange:r,defaultProp:s});return y.createElement(rI,{scope:n,baseId:ka(),value:d,onValueChange:h,orientation:o,dir:c,activationMode:l},y.createElement(Je.div,le({dir:c,"data-orientation":o},u,{ref:e})))}),oI="TabsList",aI=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=db(oI,n),o=SP(n);return y.createElement(wP,le({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:i}),y.createElement(Je.div,le({role:"tablist","aria-orientation":s.orientation},r,{ref:e})))}),lI="TabsTrigger",yS=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=db(lI,n),a=SP(n),l=kP(o.baseId,i),u=EP(o.baseId,i),c=i===o.value;return y.createElement(bP,le({asChild:!0},a,{focusable:!r,active:c}),y.createElement(Je.button,le({type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l},s,{ref:e,onMouseDown:Se(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:Se(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:Se(t.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!r&&d&&o.onValueChange(i)})})))}),uI="TabsContent",zg=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=db(uI,n),l=kP(a.baseId,i),u=EP(a.baseId,i),c=i===a.value,d=y.useRef(c);return y.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),y.createElement(Io,{present:r||c},({present:h})=>y.createElement(Je.div,le({"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:u,tabIndex:0},o,{ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0}}),h&&s))});function kP(t,e){return`${t}-trigger-${e}`}function EP(t,e){return`${t}-content-${e}`}let cI=0;function Ce(t,e){const n=`atom${++cI}`,i={toString:()=>n};return typeof t=="function"?i.read=t:(i.init=t,i.read=r=>r(i),i.write=(r,s,o)=>s(i,typeof o=="function"?o(r(i)):o)),e&&(i.write=e),i}const vS=t=>"init"in t,wS=t=>!!t.write,np=new WeakMap,dI=(t,e)=>{np.set(t,e),t.catch(()=>{}).finally(()=>np.delete(t))},bS=(t,e)=>{const n=np.get(t);n&&(np.delete(t),n(e))},xS=(t,e)=>{t.status="fulfilled",t.value=e},SS=(t,e)=>{t.status="rejected",t.reason=e},hI=t=>typeof(t==null?void 0:t.then)=="function",dh=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),kS=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),_u=t=>"v"in t&&t.v instanceof Promise,fI=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,hh=t=>{if("e"in t)throw t.e;return t.v},hb=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let i,r;const s=E=>t.get(E),o=(E,N)=>{const D=t.get(E);if(t.set(E,N),n.has(E)||n.set(E,D),D&&_u(D)){const T="v"in N?N.v instanceof Promise?N.v:Promise.resolve(N.v):Promise.reject(N.e);bS(D.v,T)}},a=(E,N,D)=>{const T=new Map;let F=!1;D.forEach((j,B)=>{!j&&B===E&&(j=N),j&&(T.set(B,j),N.d.get(B)!==j&&(F=!0))}),(F||N.d.size!==T.size)&&(N.d=T)},l=(E,N,D)=>{const T=s(E),F={d:(T==null?void 0:T.d)||new Map,v:N};if(D&&a(E,F,D),T&&dh(T,F)&&T.d===F.d)return T;if(T&&_u(T)&&_u(F)&&fI(T,F)){if(T.d===F.d)return T;F.v=T.v}return o(E,F),F},u=(E,N,D,T)=>{if(hI(N)){let F;const j=new Promise((B,K)=>{let Y=!1;N.then(ee=>{if(!Y){Y=!0;const W=s(E),R=l(E,j,D);xS(j,ee),B(ee),(W==null?void 0:W.d)!==R.d&&C(E,R,W==null?void 0:W.d)}},ee=>{if(!Y){Y=!0;const W=s(E),R=l(E,j,D);SS(j,ee),K(ee),(W==null?void 0:W.d)!==R.d&&C(E,R,W==null?void 0:W.d)}}),F=ee=>{Y||(Y=!0,ee.then(W=>xS(j,W),W=>SS(j,W)),B(ee))}});return j.orig=N,j.status="pending",dI(j,B=>{B&&F(B),T==null||T()}),l(E,j,D)}return l(E,N,D)},c=(E,N,D)=>{const T=s(E),F={d:(T==null?void 0:T.d)||new Map,e:N};return D&&a(E,F,D),T&&kS(T,F)&&T.d===F.d?T:(o(E,F),F)},d=(E,N)=>{const D=s(E);if(!N&&D&&(e.has(E)||Array.from(D.d).every(([ee,W])=>ee===E||d(ee)===W)))return D;const T=new Map;let F=!0;const j=ee=>{if(ee===E){const R=s(ee);if(R)return T.set(ee,R),hh(R);if(vS(ee))return T.set(ee,void 0),ee.init;throw new Error("no atom init")}const W=d(ee);return T.set(ee,W),hh(W)};let B,K;const Y={get signal(){return B||(B=new AbortController),B.signal},get setSelf(){return!K&&wS(E)&&(K=(...ee)=>{if(!F)return v(E,...ee)}),K}};try{const ee=E.read(j,Y);return u(E,ee,T,()=>B==null?void 0:B.abort())}catch(ee){return c(E,ee,T)}finally{F=!1}},h=E=>hh(d(E)),f=E=>{let N=e.get(E);return N||(N=w(E)),N},p=(E,N)=>!N.l.size&&(!N.t.size||N.t.size===1&&N.t.has(E)),g=E=>{const N=e.get(E);N&&p(E,N)&&k(E)},b=E=>{const N=new Map,D=new WeakMap,T=j=>{const B=e.get(j);B==null||B.t.forEach(K=>{K!==j&&(N.set(K,(N.get(K)||new Set).add(j)),D.set(K,(D.get(K)||0)+1),T(K))})};T(E);const F=j=>{const B=e.get(j);B==null||B.t.forEach(K=>{var Y;if(K!==j){let ee=D.get(K);if(ee&&D.set(K,--ee),!ee){let W=!!((Y=N.get(K))!=null&&Y.size);if(W){const R=s(K),H=d(K,!0);W=!R||!dh(R,H)}W||N.forEach(R=>R.delete(K))}F(K)}})};F(E)},m=(E,...N)=>{let D=!0;const T=B=>hh(d(B)),F=(B,...K)=>{let Y;if(B===E){if(!vS(B))throw new Error("atom not writable");const ee=s(B),W=u(B,K[0]);(!ee||!dh(ee,W))&&b(B)}else Y=m(B,...K);if(!D){const ee=O()}return Y},j=E.write(T,F,...N);return D=!1,j},v=(E,...N)=>{const D=m(E,...N),T=O();return D},w=(E,N)=>{var D;(D=s(E))==null||D.d.forEach((F,j)=>{const B=e.get(j);B?B.t.add(E):j!==E&&w(j,E)}),d(E);const T={t:new Set(N&&[N]),l:new Set};if(e.set(E,T),wS(E)&&E.onMount){const F=E.onMount((...j)=>v(E,...j));F&&(T.u=F)}return T},k=E=>{var N;const D=(N=e.get(E))==null?void 0:N.u;D&&D(),e.delete(E);const T=s(E);T&&(_u(T)&&bS(T.v),T.d.forEach((F,j)=>{if(j!==E){const B=e.get(j);B&&(B.t.delete(E),p(j,B)&&k(j))}}))},C=(E,N,D)=>{const T=new Set(N.d.keys());D==null||D.forEach((F,j)=>{if(T.has(j)){T.delete(j);return}const B=e.get(j);B&&(B.t.delete(E),p(j,B)&&k(j))}),T.forEach(F=>{const j=e.get(F);j?j.t.add(E):e.has(E)&&w(F,E)})},O=()=>{let E;for(;n.size;){const N=Array.from(n);n.clear(),N.forEach(([D,T])=>{const F=s(D);if(F){F.d!==(T==null?void 0:T.d)&&C(D,F,T==null?void 0:T.d);const j=e.get(D);j&&!(T&&!_u(T)&&(dh(T,F)||kS(T,F)))&&j.l.forEach(B=>B())}})}};return{get:h,set:v,sub:(E,N)=>{const D=f(E),T=O(),F=D.l;return F.add(N),()=>{F.delete(N),g(E)}}}};let jg;const pI=()=>(jg||(jg=hb()),jg),CP=y.createContext(void 0),AP=t=>{const e=y.useContext(CP);return(t==null?void 0:t.store)||e||pI()},mI=({children:t,store:e})=>{const n=y.useRef();return!e&&!n.current&&(n.current=hb()),y.createElement(CP.Provider,{value:e||n.current},t)},gI=t=>typeof(t==null?void 0:t.then)=="function",yI=de.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Xn(t,e){const n=AP(e),[[i,r,s],o]=y.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=i;(r!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return y.useEffect(()=>{const u=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),u},[n,t,l]),y.useDebugValue(a),gI(a)?yI(a):a}function vI(t,e){const n=AP(e);return y.useCallback((...r)=>n.set(t,...r),[n,t])}function km(t,e){return[Xn(t,e),vI(t,e)]}const{createElement:Jl,createContext:wI,forwardRef:PP,useCallback:Wr,useContext:OP,useEffect:ds,useImperativeHandle:MP,useLayoutEffect:bI,useMemo:xI,useRef:ai,useState:pc}=ww,ES=ww["useId".toString()],mc=bI,SI=typeof ES=="function"?ES:()=>null;let kI=0;function fb(t=null){const e=SI(),n=ai(t||e||null);return n.current===null&&(n.current=""+kI++),n.current}const Em=wI(null);Em.displayName="PanelGroupContext";function $P({children:t=null,className:e="",collapsedSize:n=0,collapsible:i=!1,defaultSize:r=null,forwardedRef:s,id:o=null,maxSize:a=null,minSize:l,onCollapse:u=null,onResize:c=null,order:d=null,style:h={},tagName:f="div"}){const p=OP(Em);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const g=fb(o),{collapsePanel:b,expandPanel:m,getPanelSize:v,getPanelStyle:w,registerPanel:k,resizePanel:C,units:O,unregisterPanel:M}=p;l==null&&(O==="percentages"?l=10:l=0);const E=ai({onCollapse:u,onResize:c});ds(()=>{E.current.onCollapse=u,E.current.onResize=c});const N=w(g,r),D=ai({size:CS(N)}),T=ai({callbacksRef:E,collapsedSize:n,collapsible:i,defaultSize:r,id:g,idWasAutoGenerated:o==null,maxSize:a,minSize:l,order:d});return mc(()=>{D.current.size=CS(N),T.current.callbacksRef=E,T.current.collapsedSize=n,T.current.collapsible=i,T.current.defaultSize=r,T.current.id=g,T.current.idWasAutoGenerated=o==null,T.current.maxSize=a,T.current.minSize=l,T.current.order=d}),mc(()=>(k(g,T),()=>{M(g)}),[d,g,k,M]),MP(s,()=>({collapse:()=>b(g),expand:()=>m(g),getCollapsed(){return D.current.size===0},getId(){return g},getSize(F){return v(g,F)},resize:(F,j)=>C(g,F,j)}),[b,m,v,g,C]),Jl(f,{children:t,className:e,"data-panel":"","data-panel-collapsible":i||void 0,"data-panel-id":g,"data-panel-size":parseFloat(""+N.flexGrow).toFixed(1),id:`data-panel-id-${g}`,style:{...N,...h}})}const lf=PP((t,e)=>Jl($P,{...t,forwardedRef:e}));$P.displayName="Panel";lf.displayName="forwardRef(Panel)";function CS(t){const{flexGrow:e}=t;return typeof e=="string"?parseFloat(e):e}const Ea=10;function Ju(t,e,n,i,r,s,o,a){const{id:l,panels:u,units:c}=e,d=c==="pixels"?Hs(l):NaN,{sizes:h}=a||{},f=h||s,p=Bn(u),g=f.concat();let b=0;{const w=r<0?i:n,k=p.findIndex(E=>E.current.id===w),C=p[k],O=f[k],M=Xy(c,d,C,O,O+Math.abs(r),t);if(O===M)return f;M===0&&O>0&&o.set(w,O),r=r<0?O-M:M-O}let m=r<0?n:i,v=p.findIndex(w=>w.current.id===m);for(;;){const w=p[v],k=f[v],C=Math.abs(r)-Math.abs(b),O=Xy(c,d,w,k,k-C,t);if(k!==O&&(O===0&&k>0&&o.set(w.current.id,k),b+=k-O,g[v]=O,b.toPrecision(Ea).localeCompare(Math.abs(r).toPrecision(Ea),void 0,{numeric:!0})>=0))break;if(r<0){if(--v<0)break}else if(++v>=p.length)break}return b===0?f:(m=r<0?i:n,v=p.findIndex(w=>w.current.id===m),g[v]=f[v]+b,g)}function Wa(t,e,n){e.forEach((i,r)=>{const s=t[r];if(!s)return;const{callbacksRef:o,collapsedSize:a,collapsible:l,id:u}=s.current,c=n[u];if(c!==i){n[u]=i;const{onCollapse:d,onResize:h}=o.current;h&&h(i,c),l&&d&&((c==null||c===a)&&i!==a?d(!1):c!==a&&i===a&&d(!0))}})}function EI({groupId:t,panels:e,units:n}){const i=n==="pixels"?Hs(t):NaN,r=Bn(e),s=Array(r.length);let o=0,a=100;for(let l=0;l<r.length;l++){const u=r[l],{defaultSize:c}=u.current;c!=null&&(o++,s[l]=n==="pixels"?c/i*100:c,a-=s[l])}for(let l=0;l<r.length;l++){const u=r[l];let{defaultSize:c,id:d,maxSize:h,minSize:f}=u.current;if(c!=null)continue;n==="pixels"&&(f=f/i*100,h!=null&&(h=h/i*100));const p=r.length-o,g=Math.min(h??100,Math.max(f,a/p));s[l]=g,o++,a-=g}if(a!==0)for(let l=0;l<r.length;l++){const u=r[l];let{maxSize:c,minSize:d}=u.current;n==="pixels"&&(d=d/i*100,c!=null&&(c=c/i*100));const h=Math.min(c??100,Math.max(d,s[l]+a));if(h!==s[l]&&(a-=h-s[l],s[l]=h,Math.abs(a).toFixed(3)==="0.000"))break}return Math.abs(a).toFixed(3),s}function Fg(t,e){if(e.length<2)return[null,null];const n=e.findIndex(o=>o.current.id===t);if(n<0)return[null,null];const i=n===e.length-1,r=i?e[n-1].current.id:t,s=i?t:e[n+1].current.id;return[r,s]}function Hs(t){const e=Uc(t);if(e==null)return NaN;const n=e.getAttribute("data-panel-group-direction"),i=pb(t);return n==="horizontal"?e.offsetWidth-i.reduce((r,s)=>r+s.offsetWidth,0):e.offsetHeight-i.reduce((r,s)=>r+s.offsetHeight,0)}function RP(t,e,n){if(t.size===1)return"100";const r=Bn(t).findIndex(o=>o.current.id===e),s=n[r];return s==null?"0":s.toPrecision(Ea)}function CI(t){const e=document.querySelector(`[data-panel-id="${t}"]`);return e||null}function Uc(t){const e=document.querySelector(`[data-panel-group-id="${t}"]`);return e||null}function Cm(t){const e=document.querySelector(`[data-panel-resize-handle-id="${t}"]`);return e||null}function AI(t){return NP().findIndex(i=>i.getAttribute("data-panel-resize-handle-id")===t)??null}function NP(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function pb(t){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function mb(t,e,n){var l,u,c,d;const i=Cm(e),r=pb(t),s=i?r.indexOf(i):-1,o=((u=(l=n[s])==null?void 0:l.current)==null?void 0:u.id)??null,a=((d=(c=n[s+1])==null?void 0:c.current)==null?void 0:d.id)??null;return[o,a]}function Bn(t){return Array.from(t.values()).sort((e,n)=>{const i=e.current.order,r=n.current.order;return i==null&&r==null?0:i==null?-1:r==null?1:i-r})}function Xy(t,e,n,i,r,s=null){var c;let{collapsedSize:o,collapsible:a,maxSize:l,minSize:u}=n.current;if(t==="pixels"&&(o=o/e*100,l!=null&&(l=l/e*100),u=u/e*100),a){if(i>o){if(r<=u/2+o)return o}else if(!((c=s==null?void 0:s.type)==null?void 0:c.startsWith("key"))&&r<u)return o}return Math.min(l??100,Math.max(u,r))}function PI(t,e){const{collapsible:n,defaultSize:i,maxSize:r,minSize:s}=e.current;(s<0||t==="percentages"&&s>100)&&(e.current.minSize=0),r!=null&&(r<0||t==="percentages"&&r>100)&&(e.current.maxSize=null),i!==null&&(i<0||t==="percentages"&&i>100?e.current.defaultSize=null:i<s&&!n?e.current.defaultSize=s:r!=null&&i>r&&(e.current.defaultSize=r))}function Ug({groupId:t,panels:e,nextSizes:n,prevSizes:i,units:r}){n=[...n];const s=Bn(e),o=r==="pixels"?Hs(t):NaN;let a=0;for(let l=0;l<s.length;l++){const u=s[l],c=i[l],d=n[l],h=Xy(r,o,u,c,d);d!=h&&(a+=d-h,n[l]=h)}if(a.toFixed(3)!=="0.000")for(let l=0;l<s.length;l++){const u=s[l];let{maxSize:c,minSize:d}=u.current;r==="pixels"&&(d=d/o*100,c!=null&&(c=c/o*100));const h=Math.min(c??100,Math.max(d,n[l]+a));if(h!==n[l]&&(a-=h-n[l],n[l]=h,Math.abs(a).toFixed(3)==="0.000"))break}return a.toFixed(3),n}function TP(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}function OI({committedValuesRef:t,groupId:e,panels:n,setSizes:i,sizes:r,panelSizeBeforeCollapse:s}){ds(()=>{const{direction:o,panels:a}=t.current,l=Uc(e);TP(l!=null,`No group found for id "${e}"`);const{height:u,width:c}=l.getBoundingClientRect(),h=pb(e).map(f=>{const p=f.getAttribute("data-panel-resize-handle-id"),g=Bn(a),[b,m]=mb(e,p,g);if(b==null||m==null)return()=>{};let v=0,w=100,k=0,C=0;g.forEach(T=>{const{id:F,maxSize:j,minSize:B}=T.current;F===b?(v=B,w=j??100):(k+=B,C+=j??100)});const O=Math.min(w,100-k),M=Math.max(v,(g.length-1)*100-C),E=RP(a,b,r);f.setAttribute("aria-valuemax",""+Math.round(O)),f.setAttribute("aria-valuemin",""+Math.round(M)),f.setAttribute("aria-valuenow",""+Math.round(parseInt(E)));const N=T=>{if(!T.defaultPrevented)switch(T.key){case"Enter":{T.preventDefault();const F=g.findIndex(j=>j.current.id===b);if(F>=0){const j=g[F],B=r[F];if(B!=null){let K=0;B.toPrecision(Ea)<=j.current.minSize.toPrecision(Ea)?K=o==="horizontal"?c:u:K=-(o==="horizontal"?c:u);const Y=Ju(T,t.current,b,m,K,r,s.current,null);r!==Y&&i(Y)}}break}}};f.addEventListener("keydown",N);const D=CI(b);return D!=null&&f.setAttribute("aria-controls",D.id),()=>{f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow"),f.removeEventListener("keydown",N),D!=null&&f.removeAttribute("aria-controls")}});return()=>{h.forEach(f=>f())}},[t,e,n,s,i,r])}function MI({disabled:t,handleId:e,resizeHandler:n}){ds(()=>{if(t||n==null)return;const i=Cm(e);if(i==null)return;const r=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),n(s);break}case"F6":{s.preventDefault();const o=NP(),a=AI(e);TP(a!==null);const l=s.shiftKey?a>0?a-1:o.length-1:a+1<o.length?a+1:0;o[l].focus();break}}};return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}},[t,e,n])}function Vg(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function _P(t,e,n,i=0,r=null){const s=n==="horizontal";let o=0;if(Zy(t))o=s?t.clientX:t.clientY;else if(Yy(t)){const c=t.touches[0];o=s?c.screenX:c.screenY}else return 0;const a=Cm(e),l=r||a.getBoundingClientRect(),u=s?l.left:l.top;return o-u-i}function $I(t,e,n,i,r,s,o){const{dragOffset:a=0,dragHandleRect:l,sizes:u}=o||{},c=u||s;if(RI(t)){const d=r==="horizontal",f=Uc(e).getBoundingClientRect(),p=d?f.width:f.height,g=t.shiftKey?10:100,b=p/g;let m=0;switch(t.key){case"ArrowDown":m=d?0:b;break;case"ArrowLeft":m=d?-b:0;break;case"ArrowRight":m=d?b:0;break;case"ArrowUp":m=d?0:-b;break;case"End":m=p;break;case"Home":m=-p;break}const[v,w]=mb(e,n,i),k=m<0?v:w,C=i.findIndex(M=>M.current.id===k),O=i[C];if(O.current.collapsible){const M=c[C];(M===0||M.toPrecision(Ea)===O.current.minSize.toPrecision(Ea))&&(m=m<0?-O.current.minSize*p:O.current.minSize*p)}return m}else return _P(t,n,r,a,l)}function RI(t){return t.type==="keydown"}function Zy(t){return t.type.startsWith("mouse")}function Yy(t){return t.type.startsWith("touch")}let Jy=null,oa=null;function DP(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function NI(){oa!==null&&(document.head.removeChild(oa),Jy=null,oa=null)}function Hg(t){if(Jy===t)return;Jy=t;const e=DP(t);oa===null&&(oa=document.createElement("style"),document.head.appendChild(oa)),oa.innerHTML=`*{cursor: ${e}!important;}`}function TI(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function IP(t){return t.map(e=>{const{minSize:n,order:i}=e.current;return i?`${i}:${n}`:`${n}`}).sort((e,n)=>e.localeCompare(n)).join(",")}function LP(t,e){try{const n=e.getItem(`PanelGroup:sizes:${t}`);if(n){const i=JSON.parse(n);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function _I(t,e,n){const i=LP(t,n);if(i){const r=IP(e);return i[r]??null}return null}function DI(t,e,n,i){const r=IP(e),s=LP(t,i)||{};s[r]=n;try{i.setItem(`PanelGroup:sizes:${t}`,JSON.stringify(s))}catch(o){console.error(o)}}const Wg={};function AS(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}const qu={getItem:t=>(AS(qu),qu.getItem(t)),setItem:(t,e)=>{AS(qu),qu.setItem(t,e)}};function BP({autoSaveId:t,children:e=null,className:n="",direction:i,disablePointerEventsDuringResize:r=!1,forwardedRef:s,id:o=null,onLayout:a,storage:l=qu,style:u={},tagName:c="div",units:d="percentages"}){const h=fb(o),[f,p]=pc(null),[g,b]=pc(new Map),m=ai(null);ai({didLogDefaultSizeWarning:!1,didLogIdAndOrderWarning:!1,didLogInvalidLayoutWarning:!1,prevPanelIds:[]});const v=ai({onLayout:a});ds(()=>{v.current.onLayout=a});const w=ai({}),[k,C]=pc([]),O=ai(new Map),M=ai(0),E=ai({direction:i,id:h,panels:g,sizes:k,units:d});MP(s,()=>({getId:()=>h,getLayout:R=>{const{sizes:H,units:q}=E.current;if((R??q)==="pixels"){const we=Hs(h);return H.map(U=>U/100*we)}else return H},setLayout:(R,H)=>{const{id:q,panels:re,sizes:we,units:U}=E.current;if((H||U)==="pixels"){const P=Hs(q);R=R.map(_=>_/P*100)}const I=w.current,G=Bn(re),S=Ug({groupId:q,panels:re,nextSizes:R,prevSizes:we,units:U});Vg(we,S)||(C(S),Wa(G,S,I))}}),[h]),mc(()=>{E.current.direction=i,E.current.id=h,E.current.panels=g,E.current.sizes=k,E.current.units=d}),OI({committedValuesRef:E,groupId:h,panels:g,setSizes:C,sizes:k,panelSizeBeforeCollapse:O}),ds(()=>{const{onLayout:R}=v.current,{panels:H,sizes:q}=E.current;if(q.length>0){R&&R(q);const re=w.current,we=Bn(H);Wa(we,q,re)}},[k]),mc(()=>{const{id:R,sizes:H,units:q}=E.current;if(H.length===g.size)return;let re=null;if(t){const we=Bn(g);re=_I(t,we,l)}if(re!=null){const we=Ug({groupId:R,panels:g,nextSizes:re,prevSizes:re,units:q});C(we)}else{const we=EI({groupId:R,panels:g,units:q});C(we)}},[t,g,l]),ds(()=>{if(t){if(k.length===0||k.length!==g.size)return;const R=Bn(g);Wg[t]||(Wg[t]=TI(DI,100)),Wg[t](t,R,k,l)}},[t,g,k,l]),mc(()=>{if(d==="pixels"){const R=new ResizeObserver(()=>{const{panels:H,sizes:q}=E.current,re=Ug({groupId:h,panels:H,nextSizes:q,prevSizes:q,units:d});Vg(q,re)||C(re)});return R.observe(Uc(h)),()=>{R.disconnect()}}},[h,d]);const N=Wr((R,H)=>{const{panels:q,units:re}=E.current,U=Bn(q).findIndex(S=>S.current.id===R),I=k[U];if((H??re)==="pixels"){const S=Hs(h);return I/100*S}else return I},[h,k]),D=Wr((R,H)=>{const{panels:q}=E.current;return q.size===0?{flexBasis:0,flexGrow:H??void 0,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:RP(q,R,k),flexShrink:1,overflow:"hidden",pointerEvents:r&&f!==null?"none":void 0}},[f,r,k]),T=Wr((R,H)=>{const{units:q}=E.current;PI(q,H),b(re=>{if(re.has(R))return re;const we=new Map(re);return we.set(R,H),we})},[]),F=Wr(R=>q=>{q.preventDefault();const{direction:re,panels:we,sizes:U}=E.current,I=Bn(we),[G,S]=mb(h,R,I);if(G==null||S==null)return;let P=$I(q,h,R,I,re,U,m.current);if(P===0)return;const $=Uc(h).getBoundingClientRect(),z=re==="horizontal";document.dir==="rtl"&&z&&(P=-P);const X=z?$.width:$.height,V=P/X*100,Z=Ju(q,E.current,G,S,V,U,O.current,m.current),Q=!Vg(U,Z);if((Zy(q)||Yy(q))&&M.current!=V&&Hg(Q?z?"horizontal":"vertical":z?P<0?"horizontal-min":"horizontal-max":P<0?"vertical-min":"vertical-max"),Q){const $e=w.current;C(Z),Wa(I,Z,$e)}M.current=V},[h]),j=Wr(R=>{b(H=>{if(!H.has(R))return H;const q=new Map(H);return q.delete(R),q})},[]),B=Wr(R=>{const{panels:H,sizes:q}=E.current,re=H.get(R);if(re==null)return;const{collapsedSize:we,collapsible:U}=re.current;if(!U)return;const I=Bn(H),G=I.indexOf(re);if(G<0)return;const S=q[G];if(S===we)return;O.current.set(R,S);const[P,_]=Fg(R,I);if(P==null||_==null)return;const z=G===I.length-1?S:we-S,X=Ju(null,E.current,P,_,z,q,O.current,null);if(q!==X){const V=w.current;C(X),Wa(I,X,V)}},[]),K=Wr(R=>{const{panels:H,sizes:q}=E.current,re=H.get(R);if(re==null)return;const{collapsedSize:we,minSize:U}=re.current,I=O.current.get(R)||U;if(!I)return;const G=Bn(H),S=G.indexOf(re);if(S<0||q[S]!==we)return;const[_,$]=Fg(R,G);if(_==null||$==null)return;const X=S===G.length-1?we-I:I,V=Ju(null,E.current,_,$,X,q,O.current,null);if(q!==V){const Z=w.current;C(V),Wa(G,V,Z)}},[]),Y=Wr((R,H,q)=>{const{id:re,panels:we,sizes:U,units:I}=E.current;if((q||I)==="pixels"){const De=Hs(re);H=H/De*100}const G=we.get(R);if(G==null)return;let{collapsedSize:S,collapsible:P,maxSize:_,minSize:$}=G.current;if(I==="pixels"){const De=Hs(re);$=$/De*100,_!=null&&(_=_/De*100)}const z=Bn(we),X=z.indexOf(G);if(X<0)return;const V=U[X];if(V===H)return;P&&H===S||(H=Math.min(_??100,Math.max($,H)));const[Z,Q]=Fg(R,z);if(Z==null||Q==null)return;const he=X===z.length-1?V-H:H-V,Re=Ju(null,E.current,Z,Q,he,U,O.current,null);if(U!==Re){const De=w.current;C(Re),Wa(z,Re,De)}},[]),ee=xI(()=>({activeHandleId:f,collapsePanel:B,direction:i,expandPanel:K,getPanelSize:N,getPanelStyle:D,groupId:h,registerPanel:T,registerResizeHandle:F,resizePanel:Y,startDragging:(R,H)=>{if(p(R),Zy(H)||Yy(H)){const q=Cm(R);m.current={dragHandleRect:q.getBoundingClientRect(),dragOffset:_P(H,R,i),sizes:E.current.sizes}}},stopDragging:()=>{NI(),p(null),m.current=null},units:d,unregisterPanel:j}),[f,B,i,K,N,D,h,T,F,Y,d,j]),W={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Jl(Em.Provider,{children:Jl(c,{children:e,className:n,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":h,"data-panel-group-units":d,style:{...W,...u}}),value:ee})}const zP=PP((t,e)=>Jl(BP,{...t,forwardedRef:e}));BP.displayName="PanelGroup";zP.displayName="forwardRef(PanelGroup)";function qy({children:t=null,className:e="",disabled:n=!1,id:i=null,onDragging:r,style:s={},tagName:o="div"}){const a=ai(null),l=ai({onDragging:r});ds(()=>{l.current.onDragging=r});const u=OP(Em);if(u===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:c,direction:d,groupId:h,registerResizeHandle:f,startDragging:p,stopDragging:g}=u,b=fb(i),m=c===b,[v,w]=pc(!1),[k,C]=pc(null),O=Wr(()=>{a.current.blur(),g();const{onDragging:N}=l.current;N&&N(!1)},[g]);ds(()=>{if(n)C(null);else{const E=f(b);C(()=>E)}},[n,b,f]),ds(()=>{if(n||k==null||!m)return;const E=F=>{k(F)},N=F=>{k(F)},T=a.current.ownerDocument;return T.body.addEventListener("contextmenu",O),T.body.addEventListener("mousemove",E),T.body.addEventListener("touchmove",E),T.body.addEventListener("mouseleave",N),window.addEventListener("mouseup",O),window.addEventListener("touchend",O),()=>{T.body.removeEventListener("contextmenu",O),T.body.removeEventListener("mousemove",E),T.body.removeEventListener("touchmove",E),T.body.removeEventListener("mouseleave",N),window.removeEventListener("mouseup",O),window.removeEventListener("touchend",O)}},[d,n,m,k,O]),MI({disabled:n,handleId:b,resizeHandler:k});const M={cursor:DP(d),touchAction:"none",userSelect:"none"};return Jl(o,{children:t,className:e,"data-resize-handle-active":m?"pointer":v?"keyboard":void 0,"data-panel-group-direction":d,"data-panel-group-id":h,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":b,onBlur:()=>w(!1),onFocus:()=>w(!0),onMouseDown:E=>{p(b,E.nativeEvent);const{onDragging:N}=l.current;N&&N(!0)},onMouseUp:O,onTouchCancel:O,onTouchEnd:O,onTouchStart:E=>{p(b,E.nativeEvent);const{onDragging:N}=l.current;N&&N(!0)},ref:a,role:"separator",style:{...M,...s},tabIndex:0})}qy.displayName="PanelResizeHandle";var II=function(){};function LI(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function BI(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var jP=typeof window<"u",zI=jP?window:null,PS=function(t){return!!t.addEventListener},OS=function(t){return!!t.on},jI=function(t,e,n,i){n===void 0&&(n=zI),y.useEffect(function(){if(e&&n)return PS(n)?LI(n,t,e,i):OS(n)&&n.on(t,e,i),function(){PS(n)?BI(n,t,e,i):OS(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])};const FI=jI;var UI=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},VI=function(t,e,n,i){e===void 0&&(e=II),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=y.useMemo(function(){var u=UI(t),c=function(d){if(u(d))return e(d)};return c},i);FI(s,l,o,a)};const FP=VI;var HI=function(t,e){return e!==void 0?e:jP?window.matchMedia(t).matches:!1},WI=function(t,e){var n=y.useState(HI(t,e)),i=n[0],r=n[1];return y.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addListener(a),r(o.matches),function(){s=!1,o.removeListener(a)}},[t]),i};const GI=WI,KI="modulepreload",XI=function(t){return"/vonsim-next/"+t},MS={},ZI=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=XI(s),s in MS)return;MS[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let c=r.length-1;c>=0;c--){const d=r[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":KI,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function YI(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){const{Workbox:h}=await ZI(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);a=new h("/vonsim-next/sw.js",{scope:"/vonsim-next/",type:"classic"}),u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let f=!1;const p=()=>{f=!0,a==null||a.addEventListener("controlling",g=>{g.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",g=>{typeof g.isUpdate>"u"?typeof g.isExternal<"u"?g.isExternal?p():!f&&(i==null||i()):g.isExternal?window.location.reload():!f&&(i==null||i()):g.isUpdate||i==null||i()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(f=>{s?s("/vonsim-next/sw.js",f):r==null||r(f)}).catch(f=>{o==null||o(f)})}}return l=d(),c}function JI(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=y.useState(!1),[u,c]=y.useState(!1),[d]=y.useState(()=>YI({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}function UP(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const VP=["en","es"];function gb(t){return function(n,i,...r){const s=UP(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const qI=Symbol(),QI=t=>typeof(t==null?void 0:t.then)=="function";function eL(t){let e,n;const i={getItem:(r,s)=>{var o,a;const l=c=>{if(c=c||"",e!==c){try{n=JSON.parse(c)}catch{return s}e=c}return n},u=(a=(o=t())==null?void 0:o.getItem(r))!=null?a:null;return QI(u)?u.then(l):l(u)},setItem:(r,s)=>{var o;return(o=t())==null?void 0:o.setItem(r,JSON.stringify(s))},removeItem:r=>{var s;return(s=t())==null?void 0:s.removeItem(r)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&(i.subscribe=(r,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===r){let u;try{u=JSON.parse(l.newValue||"")}catch{u=o}s(u)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),i}const tL=eL(()=>typeof window<"u"?window.localStorage:void 0);function nL(t,e,n=tL,i){const r=i==null?void 0:i.unstable_getOnInit,s=Ce(r?n.getItem(t,e):e);return s.onMount=a=>{r||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},Ce(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===qI?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}const ie=hb();function iL(t){return x.jsx(mI,{store:ie,children:t.children})}var Xe;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Xe||(Xe={}));var Qy;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Qy||(Qy={}));const me=Xe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ws=t=>{switch(typeof t){case"undefined":return me.undefined;case"string":return me.string;case"number":return isNaN(t)?me.nan:me.number;case"boolean":return me.boolean;case"function":return me.function;case"bigint":return me.bigint;case"symbol":return me.symbol;case"object":return Array.isArray(t)?me.array:t===null?me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?me.promise:typeof Map<"u"&&t instanceof Map?me.map:typeof Set<"u"&&t instanceof Set?me.set:typeof Date<"u"&&t instanceof Date?me.date:me.object;default:return me.unknown}},se=Xe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),rL=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ir extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return r(this),i}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}ir.create=t=>new ir(t);const Vc=(t,e)=>{let n;switch(t.code){case se.invalid_type:t.received===me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case se.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Xe.jsonStringifyReplacer)}`;break;case se.unrecognized_keys:n=`Unrecognized key(s) in object: ${Xe.joinValues(t.keys,", ")}`;break;case se.invalid_union:n="Invalid input";break;case se.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Xe.joinValues(t.options)}`;break;case se.invalid_enum_value:n=`Invalid enum value. Expected ${Xe.joinValues(t.options)}, received '${t.received}'`;break;case se.invalid_arguments:n="Invalid function arguments";break;case se.invalid_return_type:n="Invalid function return type";break;case se.invalid_date:n="Invalid date";break;case se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Xe.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case se.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case se.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case se.custom:n="Invalid input";break;case se.invalid_intersection_types:n="Intersection results could not be merged";break;case se.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case se.not_finite:n="Number must be finite";break;default:n=e.defaultError,Xe.assertNever(t)}return{message:n}};let HP=Vc;function sL(t){HP=t}function ip(){return HP}const rp=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};let a="";const l=i.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...r,path:s,message:r.message||a}},oL=[];function ge(t,e){const n=rp({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ip(),Vc].filter(i=>!!i)});t.common.issues.push(n)}class vn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return _e;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n)i.push({key:await r.key,value:await r.value});return vn.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return _e;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const _e=Object.freeze({status:"aborted"}),WP=t=>({status:"dirty",value:t}),$n=t=>({status:"valid",value:t}),ev=t=>t.status==="aborted",tv=t=>t.status==="dirty",Hc=t=>t.status==="valid",sp=t=>typeof Promise<"u"&&t instanceof Promise;var Ae;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ae||(Ae={}));class zr{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $S=(t,e)=>{if(Hc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ir(t.common.issues);return this._error=n,this._error}}};function Ie(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:i??a.defaultError}:{message:n??a.defaultError},description:r}}class ze{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ws(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ws(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new vn,ctx:{common:e.parent.common,data:e.data,parsedType:Ws(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(sp(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ws(e)},s=this._parseSync({data:e,path:r.path,parent:r});return $S(r,s)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ws(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(sp(r)?r:Promise.resolve(r));return $S(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:se.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new cr({schema:this,typeName:Ne.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return hs.create(this,this._def)}nullable(){return Pa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return rr.create(this,this._def)}promise(){return Ql.create(this,this._def)}or(e){return Xc.create([this,e],this._def)}and(e){return Zc.create(this,e,this._def)}transform(e){return new cr({...Ie(this._def),schema:this,typeName:Ne.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ed({...Ie(this._def),innerType:this,defaultValue:n,typeName:Ne.ZodDefault})}brand(){return new KP({typeName:Ne.ZodBranded,type:this,...Ie(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new up({...Ie(this._def),innerType:this,catchValue:n,typeName:Ne.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Rd.create(this,e)}readonly(){return dp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const aL=/^c[^\s-]{8,}$/i,lL=/^[a-z][a-z0-9]*$/,uL=/[0-9A-HJKMNP-TV-Z]{26}/,cL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,dL=/^([A-Z0-9_+-]+\.?)*[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hL=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,fL=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,pL=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,mL=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function gL(t,e){return!!((e==="v4"||!e)&&fL.test(t)||(e==="v6"||!e)&&pL.test(t))}class qi extends ze{constructor(){super(...arguments),this._regex=(e,n,i)=>this.refinement(r=>e.test(r),{validation:n,code:se.invalid_string,...Ae.errToObj(i)}),this.nonempty=e=>this.min(1,Ae.errToObj(e)),this.trim=()=>new qi({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new qi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new qi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==me.string){const s=this._getOrReturnCtx(e);return ge(s,{code:se.invalid_type,expected:me.string,received:s.parsedType}),_e}const i=new vn;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),ge(r,{code:se.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),ge(r,{code:se.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?ge(r,{code:se.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ge(r,{code:se.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")dL.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"email",code:se.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")hL.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"emoji",code:se.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")cL.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"uuid",code:se.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")aL.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"cuid",code:se.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")lL.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"cuid2",code:se.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")uL.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"ulid",code:se.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ge(r,{validation:"url",code:se.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"regex",code:se.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),ge(r,{code:se.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),ge(r,{code:se.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),ge(r,{code:se.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?mL(s).test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{code:se.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="ip"?gL(e.data,s.version)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"ip",code:se.invalid_string,message:s.message}),i.dirty()):Xe.assertNever(s);return{status:i.value,value:e.data}}_addCheck(e){return new qi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ae.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ae.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ae.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ae.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ae.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ae.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ae.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ae.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ae.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}qi.create=t=>{var e;return new qi({checks:[],typeName:Ne.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ie(t)})};function yL(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class xo extends ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==me.number){const s=this._getOrReturnCtx(e);return ge(s,{code:se.invalid_type,expected:me.number,received:s.parsedType}),_e}let i;const r=new vn;for(const s of this._def.checks)s.kind==="int"?Xe.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{code:se.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ge(i,{code:se.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ge(i,{code:se.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?yL(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),ge(i,{code:se.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{code:se.not_finite,message:s.message}),r.dirty()):Xe.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ae.toString(n))}setLimit(e,n,i,r){return new xo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ae.toString(r)}]})}_addCheck(e){return new xo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Xe.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}xo.create=t=>new xo({checks:[],typeName:Ne.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ie(t)});class So extends ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==me.bigint){const s=this._getOrReturnCtx(e);return ge(s,{code:se.invalid_type,expected:me.bigint,received:s.parsedType}),_e}let i;const r=new vn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ge(i,{code:se.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ge(i,{code:se.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),ge(i,{code:se.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Xe.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ae.toString(n))}setLimit(e,n,i,r){return new So({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ae.toString(r)}]})}_addCheck(e){return new So({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}So.create=t=>{var e;return new So({checks:[],typeName:Ne.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ie(t)})};class Wc extends ze{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==me.boolean){const i=this._getOrReturnCtx(e);return ge(i,{code:se.invalid_type,expected:me.boolean,received:i.parsedType}),_e}return $n(e.data)}}Wc.create=t=>new Wc({typeName:Ne.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ie(t)});class Ca extends ze{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==me.date){const s=this._getOrReturnCtx(e);return ge(s,{code:se.invalid_type,expected:me.date,received:s.parsedType}),_e}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ge(s,{code:se.invalid_date}),_e}const i=new vn;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),ge(r,{code:se.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),ge(r,{code:se.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Xe.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ca({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ae.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ae.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ca.create=t=>new Ca({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ne.ZodDate,...Ie(t)});class op extends ze{_parse(e){if(this._getType(e)!==me.symbol){const i=this._getOrReturnCtx(e);return ge(i,{code:se.invalid_type,expected:me.symbol,received:i.parsedType}),_e}return $n(e.data)}}op.create=t=>new op({typeName:Ne.ZodSymbol,...Ie(t)});class Gc extends ze{_parse(e){if(this._getType(e)!==me.undefined){const i=this._getOrReturnCtx(e);return ge(i,{code:se.invalid_type,expected:me.undefined,received:i.parsedType}),_e}return $n(e.data)}}Gc.create=t=>new Gc({typeName:Ne.ZodUndefined,...Ie(t)});class Kc extends ze{_parse(e){if(this._getType(e)!==me.null){const i=this._getOrReturnCtx(e);return ge(i,{code:se.invalid_type,expected:me.null,received:i.parsedType}),_e}return $n(e.data)}}Kc.create=t=>new Kc({typeName:Ne.ZodNull,...Ie(t)});class ql extends ze{constructor(){super(...arguments),this._any=!0}_parse(e){return $n(e.data)}}ql.create=t=>new ql({typeName:Ne.ZodAny,...Ie(t)});class fa extends ze{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $n(e.data)}}fa.create=t=>new fa({typeName:Ne.ZodUnknown,...Ie(t)});class Ss extends ze{_parse(e){const n=this._getOrReturnCtx(e);return ge(n,{code:se.invalid_type,expected:me.never,received:n.parsedType}),_e}}Ss.create=t=>new Ss({typeName:Ne.ZodNever,...Ie(t)});class ap extends ze{_parse(e){if(this._getType(e)!==me.undefined){const i=this._getOrReturnCtx(e);return ge(i,{code:se.invalid_type,expected:me.void,received:i.parsedType}),_e}return $n(e.data)}}ap.create=t=>new ap({typeName:Ne.ZodVoid,...Ie(t)});class rr extends ze{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==me.array)return ge(n,{code:se.invalid_type,expected:me.array,received:n.parsedType}),_e;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(ge(n,{code:o?se.too_big:se.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ge(n,{code:se.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ge(n,{code:se.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new zr(n,o,n.path,a)))).then(o=>vn.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new zr(n,o,n.path,a)));return vn.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new rr({...this._def,minLength:{value:e,message:Ae.toString(n)}})}max(e,n){return new rr({...this._def,maxLength:{value:e,message:Ae.toString(n)}})}length(e,n){return new rr({...this._def,exactLength:{value:e,message:Ae.toString(n)}})}nonempty(e){return this.min(1,e)}}rr.create=(t,e)=>new rr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ne.ZodArray,...Ie(e)});function qa(t){if(t instanceof xt){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=hs.create(qa(i))}return new xt({...t._def,shape:()=>e})}else return t instanceof rr?new rr({...t._def,type:qa(t.element)}):t instanceof hs?hs.create(qa(t.unwrap())):t instanceof Pa?Pa.create(qa(t.unwrap())):t instanceof jr?jr.create(t.items.map(e=>qa(e))):t}class xt extends ze{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Xe.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==me.object){const u=this._getOrReturnCtx(e);return ge(u,{code:se.invalid_type,expected:me.object,received:u.parsedType}),_e}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ss&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new zr(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof Ss){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")a.length>0&&(ge(r,{code:se.unrecognized_keys,keys:a}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new zr(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key;u.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>vn.mergeObjectSync(i,u)):vn.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Ae.errToObj,new xt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&o!==void 0?o:i.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ae.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new xt({...this._def,unknownKeys:"strip"})}passthrough(){return new xt({...this._def,unknownKeys:"passthrough"})}extend(e){return new xt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new xt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ne.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new xt({...this._def,catchall:e})}pick(e){const n={};return Xe.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new xt({...this._def,shape:()=>n})}omit(e){const n={};return Xe.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new xt({...this._def,shape:()=>n})}deepPartial(){return qa(this)}partial(e){const n={};return Xe.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new xt({...this._def,shape:()=>n})}required(e){const n={};return Xe.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof hs;)s=s._def.innerType;n[i]=s}}),new xt({...this._def,shape:()=>n})}keyof(){return GP(Xe.objectKeys(this.shape))}}xt.create=(t,e)=>new xt({shape:()=>t,unknownKeys:"strip",catchall:Ss.create(),typeName:Ne.ZodObject,...Ie(e)});xt.strictCreate=(t,e)=>new xt({shape:()=>t,unknownKeys:"strict",catchall:Ss.create(),typeName:Ne.ZodObject,...Ie(e)});xt.lazycreate=(t,e)=>new xt({shape:t,unknownKeys:"strip",catchall:Ss.create(),typeName:Ne.ZodObject,...Ie(e)});class Xc extends ze{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ir(a.ctx.common.issues));return ge(n,{code:se.invalid_union,unionErrors:o}),_e}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new ir(l));return ge(n,{code:se.invalid_union,unionErrors:a}),_e}}get options(){return this._def.options}}Xc.create=(t,e)=>new Xc({options:t,typeName:Ne.ZodUnion,...Ie(e)});const uf=t=>t instanceof Jc?uf(t.schema):t instanceof cr?uf(t.innerType()):t instanceof qc?[t.value]:t instanceof ko?t.options:t instanceof Qc?Object.keys(t.enum):t instanceof ed?uf(t._def.innerType):t instanceof Gc?[void 0]:t instanceof Kc?[null]:null;class Am extends ze{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==me.object)return ge(n,{code:se.invalid_type,expected:me.object,received:n.parsedType}),_e;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(ge(n,{code:se.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),_e)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const o=uf(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new Am({typeName:Ne.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,...Ie(i)})}}function nv(t,e){const n=Ws(t),i=Ws(e);if(t===e)return{valid:!0,data:t};if(n===me.object&&i===me.object){const r=Xe.objectKeys(e),s=Xe.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=nv(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===me.array&&i===me.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=nv(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===me.date&&i===me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Zc extends ze{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(ev(s)||ev(o))return _e;const a=nv(s.value,o.value);return a.valid?((tv(s)||tv(o))&&n.dirty(),{status:n.value,value:a.data}):(ge(i,{code:se.invalid_intersection_types}),_e)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Zc.create=(t,e,n)=>new Zc({left:t,right:e,typeName:Ne.ZodIntersection,...Ie(n)});class jr extends ze{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==me.array)return ge(i,{code:se.invalid_type,expected:me.array,received:i.parsedType}),_e;if(i.data.length<this._def.items.length)return ge(i,{code:se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_e;!this._def.rest&&i.data.length>this._def.items.length&&(ge(i,{code:se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new zr(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>vn.mergeArray(n,o)):vn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new jr({...this._def,rest:e})}}jr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new jr({items:t,typeName:Ne.ZodTuple,rest:null,...Ie(e)})};class Yc extends ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==me.object)return ge(i,{code:se.invalid_type,expected:me.object,received:i.parsedType}),_e;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new zr(i,a,i.path,a)),value:o._parse(new zr(i,i.data[a],i.path,a))});return i.common.async?vn.mergeObjectAsync(n,r):vn.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof ze?new Yc({keyType:e,valueType:n,typeName:Ne.ZodRecord,...Ie(i)}):new Yc({keyType:qi.create(),valueType:e,typeName:Ne.ZodRecord,...Ie(n)})}}class lp extends ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==me.map)return ge(i,{code:se.invalid_type,expected:me.map,received:i.parsedType}),_e;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],u)=>({key:r._parse(new zr(i,a,i.path,[u,"key"])),value:s._parse(new zr(i,l,i.path,[u,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return _e;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return _e;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}lp.create=(t,e,n)=>new lp({valueType:e,keyType:t,typeName:Ne.ZodMap,...Ie(n)});class Aa extends ze{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==me.set)return ge(i,{code:se.invalid_type,expected:me.set,received:i.parsedType}),_e;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(ge(i,{code:se.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(ge(i,{code:se.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return _e;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...i.data.values()].map((l,u)=>s._parse(new zr(i,l,i.path,u)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Aa({...this._def,minSize:{value:e,message:Ae.toString(n)}})}max(e,n){return new Aa({...this._def,maxSize:{value:e,message:Ae.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Aa.create=(t,e)=>new Aa({valueType:t,minSize:null,maxSize:null,typeName:Ne.ZodSet,...Ie(e)});class Cl extends ze{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==me.function)return ge(n,{code:se.invalid_type,expected:me.function,received:n.parsedType}),_e;function i(a,l){return rp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ip(),Vc].filter(u=>!!u),issueData:{code:se.invalid_arguments,argumentsError:l}})}function r(a,l){return rp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ip(),Vc].filter(u=>!!u),issueData:{code:se.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Ql){const a=this;return $n(async function(...l){const u=new ir([]),c=await a._def.args.parseAsync(l,s).catch(f=>{throw u.addIssue(i(l,f)),u}),d=await Reflect.apply(o,this,c);return await a._def.returns._def.type.parseAsync(d,s).catch(f=>{throw u.addIssue(r(d,f)),u})})}else{const a=this;return $n(function(...l){const u=a._def.args.safeParse(l,s);if(!u.success)throw new ir([i(l,u.error)]);const c=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(c,s);if(!d.success)throw new ir([r(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Cl({...this._def,args:jr.create(e).rest(fa.create())})}returns(e){return new Cl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new Cl({args:e||jr.create([]).rest(fa.create()),returns:n||fa.create(),typeName:Ne.ZodFunction,...Ie(i)})}}class Jc extends ze{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Jc.create=(t,e)=>new Jc({getter:t,typeName:Ne.ZodLazy,...Ie(e)});class qc extends ze{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ge(n,{received:n.data,code:se.invalid_literal,expected:this._def.value}),_e}return{status:"valid",value:e.data}}get value(){return this._def.value}}qc.create=(t,e)=>new qc({value:t,typeName:Ne.ZodLiteral,...Ie(e)});function GP(t,e){return new ko({values:t,typeName:Ne.ZodEnum,...Ie(e)})}class ko extends ze{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return ge(n,{expected:Xe.joinValues(i),received:n.parsedType,code:se.invalid_type}),_e}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),i=this._def.values;return ge(n,{received:n.data,code:se.invalid_enum_value,options:i}),_e}return $n(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return ko.create(e)}exclude(e){return ko.create(this.options.filter(n=>!e.includes(n)))}}ko.create=GP;class Qc extends ze{_parse(e){const n=Xe.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==me.string&&i.parsedType!==me.number){const r=Xe.objectValues(n);return ge(i,{expected:Xe.joinValues(r),received:i.parsedType,code:se.invalid_type}),_e}if(n.indexOf(e.data)===-1){const r=Xe.objectValues(n);return ge(i,{received:i.data,code:se.invalid_enum_value,options:r}),_e}return $n(e.data)}get enum(){return this._def.values}}Qc.create=(t,e)=>new Qc({values:t,typeName:Ne.ZodNativeEnum,...Ie(e)});class Ql extends ze{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==me.promise&&n.common.async===!1)return ge(n,{code:se.invalid_type,expected:me.promise,received:n.parsedType}),_e;const i=n.parsedType===me.promise?n.data:Promise.resolve(n.data);return $n(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ql.create=(t,e)=>new Ql({type:t,typeName:Ne.ZodPromise,...Ie(e)});class cr extends ze{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ne.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{ge(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);return i.common.issues.length?{status:"dirty",value:i.data}:i.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:i.path,parent:i})):this._def.schema._parseSync({data:o,path:i.path,parent:i})}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?_e:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?_e:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Hc(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Hc(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Xe.assertNever(r)}}cr.create=(t,e,n)=>new cr({schema:t,typeName:Ne.ZodEffects,effect:e,...Ie(n)});cr.createWithPreprocess=(t,e,n)=>new cr({schema:e,effect:{type:"preprocess",transform:t},typeName:Ne.ZodEffects,...Ie(n)});class hs extends ze{_parse(e){return this._getType(e)===me.undefined?$n(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hs.create=(t,e)=>new hs({innerType:t,typeName:Ne.ZodOptional,...Ie(e)});class Pa extends ze{_parse(e){return this._getType(e)===me.null?$n(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pa.create=(t,e)=>new Pa({innerType:t,typeName:Ne.ZodNullable,...Ie(e)});class ed extends ze{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===me.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ed.create=(t,e)=>new ed({innerType:t,typeName:Ne.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ie(e)});class up extends ze{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return sp(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ir(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ir(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}up.create=(t,e)=>new up({innerType:t,typeName:Ne.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ie(e)});class cp extends ze{_parse(e){if(this._getType(e)!==me.nan){const i=this._getOrReturnCtx(e);return ge(i,{code:se.invalid_type,expected:me.nan,received:i.parsedType}),_e}return{status:"valid",value:e.data}}}cp.create=t=>new cp({typeName:Ne.ZodNaN,...Ie(t)});const vL=Symbol("zod_brand");class KP extends ze{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class Rd extends ze{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?_e:s.status==="dirty"?(n.dirty(),WP(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?_e:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new Rd({in:e,out:n,typeName:Ne.ZodPipeline})}}class dp extends ze{_parse(e){const n=this._def.innerType._parse(e);return Hc(n)&&(n.value=Object.freeze(n.value)),n}}dp.create=(t,e)=>new dp({innerType:t,typeName:Ne.ZodReadonly,...Ie(e)});const XP=(t,e={},n)=>t?ql.create().superRefine((i,r)=>{var s,o;if(!t(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;r.addIssue({code:"custom",...u,fatal:l})}}):ql.create(),wL={object:xt.lazycreate};var Ne;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ne||(Ne={}));const bL=(t,e={message:`Input not instance of ${t.name}`})=>XP(n=>n instanceof t,e),ZP=qi.create,YP=xo.create,xL=cp.create,SL=So.create,JP=Wc.create,kL=Ca.create,EL=op.create,CL=Gc.create,AL=Kc.create,PL=ql.create,OL=fa.create,ML=Ss.create,$L=ap.create,RL=rr.create,NL=xt.create,TL=xt.strictCreate,_L=Xc.create,DL=Am.create,IL=Zc.create,LL=jr.create,BL=Yc.create,zL=lp.create,jL=Aa.create,FL=Cl.create,UL=Jc.create,VL=qc.create,HL=ko.create,WL=Qc.create,GL=Ql.create,RS=cr.create,KL=hs.create,XL=Pa.create,ZL=cr.createWithPreprocess,YL=Rd.create,JL=()=>ZP().optional(),qL=()=>YP().optional(),QL=()=>JP().optional(),e5={string:t=>qi.create({...t,coerce:!0}),number:t=>xo.create({...t,coerce:!0}),boolean:t=>Wc.create({...t,coerce:!0}),bigint:t=>So.create({...t,coerce:!0}),date:t=>Ca.create({...t,coerce:!0})},t5=_e;var Ns=Object.freeze({__proto__:null,defaultErrorMap:Vc,setErrorMap:sL,getErrorMap:ip,makeIssue:rp,EMPTY_PATH:oL,addIssueToContext:ge,ParseStatus:vn,INVALID:_e,DIRTY:WP,OK:$n,isAborted:ev,isDirty:tv,isValid:Hc,isAsync:sp,get util(){return Xe},get objectUtil(){return Qy},ZodParsedType:me,getParsedType:Ws,ZodType:ze,ZodString:qi,ZodNumber:xo,ZodBigInt:So,ZodBoolean:Wc,ZodDate:Ca,ZodSymbol:op,ZodUndefined:Gc,ZodNull:Kc,ZodAny:ql,ZodUnknown:fa,ZodNever:Ss,ZodVoid:ap,ZodArray:rr,ZodObject:xt,ZodUnion:Xc,ZodDiscriminatedUnion:Am,ZodIntersection:Zc,ZodTuple:jr,ZodRecord:Yc,ZodMap:lp,ZodSet:Aa,ZodFunction:Cl,ZodLazy:Jc,ZodLiteral:qc,ZodEnum:ko,ZodNativeEnum:Qc,ZodPromise:Ql,ZodEffects:cr,ZodTransformer:cr,ZodOptional:hs,ZodNullable:Pa,ZodDefault:ed,ZodCatch:up,ZodNaN:cp,BRAND:vL,ZodBranded:KP,ZodPipeline:Rd,ZodReadonly:dp,custom:XP,Schema:ze,ZodSchema:ze,late:wL,get ZodFirstPartyTypeKind(){return Ne},coerce:e5,any:PL,array:RL,bigint:SL,boolean:JP,date:kL,discriminatedUnion:DL,effect:RS,enum:HL,function:FL,instanceof:bL,intersection:IL,lazy:UL,literal:VL,map:zL,nan:xL,nativeEnum:WL,never:ML,null:AL,nullable:XL,number:YP,object:NL,oboolean:QL,onumber:qL,optional:KL,ostring:JL,pipeline:YL,preprocess:ZL,promise:GL,record:BL,set:jL,strictObject:TL,string:ZP,symbol:EL,transformer:RS,tuple:LL,undefined:CL,union:_L,unknown:OL,void:$L,NEVER:t5,ZodIssueCode:se,quotelessJson:rL,ZodError:ir});const qP=["randomize","clean","unchanged"],QP=["pio-switches-and-leds","pio-printer","handshake"],iv=Ns.object({language:Ns.enum(VP).catch(i5),dataOnLoad:Ns.enum(qP).catch("randomize"),devices:Ns.enum(QP).catch("pio-switches-and-leds"),executionUnit:Ns.number().min(1).max(500).catch(150),clockSpeed:Ns.number().min(100).max(3e3).catch(1e3),printerSpeed:Ns.number().min(500).max(2e4).catch(5e3),disableAnimations:Ns.boolean().catch(!1)}),n5=iv.parse({});function i5(){const t=navigator.language.toLowerCase();for(const e of VP)if(t.startsWith(e))return e;return"en"}const yu=nL("vonsim-settings",n5,{getItem(t,e){try{const n=localStorage.getItem(t);return iv.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=iv.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{unstable_getOnInit:!0}),dr=()=>ie.get(yu),r5=()=>km(yu),s5=Ce(t=>t(yu).language),eO=()=>Xn(s5);Ce(t=>t(yu).dataOnLoad);const o5=Ce(t=>t(yu).devices),a5=()=>Xn(o5);Ce(t=>{const e=t(yu);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});function tO(t){const e=t.charCodeAt(0);return L.fitsUnsigned(e,8)?e:null}function yb(t){return L.fitsUnsigned(t,8)?String.fromCharCode(t):null}function l5(t){return u5.at(t)??null}const u5=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var bt,Mt;const He=class He{constructor(e,n){Ee(this,bt,void 0);Ee(this,Mt,void 0);J(this,bt,e|0),J(this,Mt,n)}get size(){return A(this,Mt)}is8bits(){return A(this,Mt)===8}is16bits(){return A(this,Mt)===16}get unsigned(){return A(this,bt)}get signed(){return A(this,bt)<=He.maxSignedValue(A(this,Mt))?A(this,bt):A(this,bt)-(He.maxValue(A(this,Mt))+1)}get low(){return this.is8bits()?this:He.fromUnsigned(A(this,bt)&He.maxValue(8),8)}get high(){return this.is8bits()?new He(0,8):He.fromUnsigned(A(this,bt)>>8&He.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return He.fromUnsigned(A(this,bt)&~He.maxValue(8)|e.unsigned,A(this,Mt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return He.fromUnsigned(A(this,bt)&He.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Mt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Mt)}`);return(A(this,bt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Mt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Mt)}`);return n?He.fromUnsigned(A(this,bt)|1<<e,A(this,Mt)):He.fromUnsigned(A(this,bt)&~(1<<e),A(this,Mt))}add(e){return e=Number(e),He.fromUnsigned(A(this,bt)+e,A(this,Mt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,bt)===A(e,bt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Mt));for(let n=0;n<A(this,Mt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,bt).toString(16).padStart(A(this,Mt)/4,"0").toUpperCase();case"bin":return A(this,bt).toString(2).padStart(A(this,Mt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Mt)===8?yb(A(this,bt))??"---":this.low.toString("ascii")+this.high.toString("ascii")}}toJSON(){return A(this,bt)}valueOf(){return A(this,bt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=He.minSignedValue(n)&&e<=He.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=He.minValue()&&e<=He.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=He.minSignedValue(n)&&e<=He.maxSignedValue(n)}static fromUnsigned(e,n){if(!He.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new He(e,n)}static fromSigned(e,n){if(!He.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new He(e+He.maxValue(n)+1,n):new He(e,n)}static fromNumber(e,n){return e<0?He.fromSigned(e,n):He.fromUnsigned(e,n)}static fromChar(e){const n=tO(e)??-1;return He.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*He.maxValue(e));return new He(n,e)}static zero(e){return new He(0,e)}};bt=new WeakMap,Mt=new WeakMap;let L=He;var Yr;const js=class js{constructor(e){Ee(this,Yr,void 0);J(this,Yr,e)}get value(){return A(this,Yr).unsigned}get byte(){return A(this,Yr)}toString(e=!0){let n=A(this,Yr).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,Yr).toJSON()}valueOf(){return A(this,Yr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=js.MIN_ADDRESS&&e<=js.MAX_ADDRESS}static from(e){if(e=Number(e),!js.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=L.fromUnsigned(e,16);return new js(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i}};Yr=new WeakMap,ue(js,"MIN_ADDRESS",0),ue(js,"MAX_ADDRESS",32767);let Oe=js;var Jr;const Fs=class Fs{constructor(e){Ee(this,Jr,void 0);J(this,Jr,e)}get value(){return A(this,Jr).unsigned}get byte(){return A(this,Jr)}toString(e=!0){let n=A(this,Jr).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,Jr).toJSON()}valueOf(){return A(this,Jr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Fs.MIN_ADDRESS&&e<=Fs.MAX_ADDRESS}static from(e){if(e=Number(e),!Fs.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=L.fromUnsigned(e,8);return new Fs(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Jr=new WeakMap,ue(Fs,"MIN_ADDRESS",0),ue(Fs,"MAX_ADDRESS",127);let Zn=Fs;const c5=Oe.from(Oe.MAX_ADDRESS).toString(),d5={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Zn.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer",ascii:"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`},control:{action:{start:"Start",run:{"cycle-change":"One cycle","end-of-instruction":"One instruction",infinity:"Until stop"},stop:"Stop"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input..."}},memory:{name:"Memory",cell:t=>`Cell ${Oe.format(t)}`,"start-address":"Start address","start-address-must-be-integer":"Start address must be an integer.","start-address-too-big":`Start address must be less or equal to ${c5}.`},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:{name:"F10",interrupt:"Interrupt"},keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",language:{label:"Language"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which preset of devices to use.","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer (PIO)",handshake:"Printer (Handshake)"},speeds:{label:"Speeds",executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed",disableAnimations:{label:"Disable animations",description:"Disable animations for faster running. Only affects animations affected by the simulation speed (e.g. the CPU). Other animations (like the clock and the printer) will run at their own speed."}}},footer:{documentation:"Documentation","report-issue":"Report an issue",copyright:"III-LIDI, FI, UNLP"}},h5=Oe.from(Oe.MAX_ADDRESS).toString(),f5={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Zn.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo",ascii:"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},control:{action:{start:"Ejecutar",run:{"cycle-change":"Un ciclo","end-of-instruction":"Una instrucción",infinity:"Hasta el final"},stop:"Detener"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",status:{fetching:"Leyendo instrucción...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla..."}},memory:{name:"Memoria",cell:t=>`Celda ${Oe.format(t)}`,"start-address":"Dirección de inicio","start-address-must-be-integer":"El valor de inicio debe ser un número entero.","start-address-too-big":`El valor de inicio debe ser menor o igual a ${h5}.`},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:{name:"F10",interrupt:"Interrumpir"},keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Teclas",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",language:{label:"Idioma"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué conjunto de dispositivos usar.","pio-switches-and-leds":"Teclas y luces","pio-printer":"Impresora (PIO)",handshake:"Impresora (Handshake)"},speeds:{label:"Velocidades",executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión",disableAnimations:{label:"Inhabilitar animaciones",description:"Inhabilitar animaciones para una ejecución más rápida. Solo afecta a las animaciones afectadas por la velocidad de simulación (como la CPU). Otras animaciones (como el reloj y la impresora) se ejecutarán a su propia velocidad."}}},footer:{documentation:"Documentación","report-issue":"Reportar un error",copyright:"III-LIDI, FI, UNLP"}},Pm=gb({en:d5,es:f5});function yt(){const t=eO();return(e,...n)=>Pm(t,e,...n)}function p5(){const t=yt();return x.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[x.jsx("a",{href:"/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),x.jsx("span",{className:"px-2",children:"·"}),x.jsx("a",{href:"https://github.com/vonsim/vonsim",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),x.jsx("span",{className:"px-2",children:"·"}),x.jsx("a",{href:"https://github.com/vonsim/vonsim/issues/new?labels=new+version",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.report-issue")}),x.jsx("span",{className:"px-2 max-sm:hidden",children:"·"}),x.jsx("br",{className:"sm:hidden"}),x.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:["© Copyright 2017-",new Date().getFullYear()," — ",t("footer.copyright")]})]})}function nO(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=nO(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function Ze(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=nO(t))&&(i&&(i+=" "),i+=e);return i}function m5(t,e=globalThis==null?void 0:globalThis.document){const n=ur(t);y.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[n,e])}const rv="dismissableLayer.update",g5="dismissableLayer.pointerDownOutside",y5="dismissableLayer.focusOutside";let NS;const v5=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vb=y.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=t,c=y.useContext(v5),[d,h]=y.useState(null),f=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=y.useState({}),g=Qe(e,E=>h(E)),b=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=b.indexOf(m),w=d?b.indexOf(d):-1,k=c.layersWithOutsidePointerEventsDisabled.size>0,C=w>=v,O=w5(E=>{const N=E.target,D=[...c.branches].some(T=>T.contains(N));!C||D||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},f),M=b5(E=>{const N=E.target;[...c.branches].some(T=>T.contains(N))||(o==null||o(E),a==null||a(E),E.defaultPrevented||l==null||l())},f);return m5(E=>{w===c.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},f),y.useEffect(()=>{if(d)return i&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(NS=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),TS(),()=>{i&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=NS)}},[d,f,i,c]),y.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),TS())},[d,c]),y.useEffect(()=>{const E=()=>p({});return document.addEventListener(rv,E),()=>document.removeEventListener(rv,E)},[]),y.createElement(Je.div,le({},u,{ref:g,style:{pointerEvents:k?C?"auto":"none":void 0,...t.style},onFocusCapture:Se(t.onFocusCapture,M.onFocusCapture),onBlurCapture:Se(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Se(t.onPointerDownCapture,O.onPointerDownCapture)}))});function w5(t,e=globalThis==null?void 0:globalThis.document){const n=ur(t),i=y.useRef(!1),r=y.useRef(()=>{});return y.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let c=function(){iO(g5,n,u,{discrete:!0})};var l=c;const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function b5(t,e=globalThis==null?void 0:globalThis.document){const n=ur(t),i=y.useRef(!1);return y.useEffect(()=>{const r=s=>{s.target&&!i.current&&iO(y5,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function TS(){const t=new CustomEvent(rv);document.dispatchEvent(t)}function iO(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?gP(r,s):r.dispatchEvent(s)}let Gg=0;function wb(){y.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:_S()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:_S()),Gg++,()=>{Gg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(i=>i.remove()),Gg--}},[])}function _S(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const Kg="focusScope.autoFocusOnMount",Xg="focusScope.autoFocusOnUnmount",DS={bubbles:!1,cancelable:!0},bb=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=y.useState(null),u=ur(r),c=ur(s),d=y.useRef(null),h=Qe(e,g=>l(g)),f=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(i){let v=function(O){if(f.paused||!a)return;const M=O.target;a.contains(M)?d.current=M:_s(d.current,{select:!0})},w=function(O){if(f.paused||!a)return;const M=O.relatedTarget;M!==null&&(a.contains(M)||_s(d.current,{select:!0}))},k=function(O){const M=document.activeElement;for(const E of O)E.removedNodes.length>0&&(a!=null&&a.contains(M)||_s(a))};var g=v,b=w,m=k;document.addEventListener("focusin",v),document.addEventListener("focusout",w);const C=new MutationObserver(k);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),C.disconnect()}}},[i,a,f.paused]),y.useEffect(()=>{if(a){LS.add(f);const g=document.activeElement;if(!a.contains(g)){const m=new CustomEvent(Kg,DS);a.addEventListener(Kg,u),a.dispatchEvent(m),m.defaultPrevented||(x5(A5(rO(a)),{select:!0}),document.activeElement===g&&_s(a))}return()=>{a.removeEventListener(Kg,u),setTimeout(()=>{const m=new CustomEvent(Xg,DS);a.addEventListener(Xg,c),a.dispatchEvent(m),m.defaultPrevented||_s(g??document.body,{select:!0}),a.removeEventListener(Xg,c),LS.remove(f)},0)}}},[a,u,c,f]);const p=y.useCallback(g=>{if(!n&&!i||f.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,m=document.activeElement;if(b&&m){const v=g.currentTarget,[w,k]=S5(v);w&&k?!g.shiftKey&&m===k?(g.preventDefault(),n&&_s(w,{select:!0})):g.shiftKey&&m===w&&(g.preventDefault(),n&&_s(k,{select:!0})):m===v&&g.preventDefault()}},[n,i,f.paused]);return y.createElement(Je.div,le({tabIndex:-1},o,{ref:h,onKeyDown:p}))});function x5(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(_s(i,{select:e}),document.activeElement!==n)return}function S5(t){const e=rO(t),n=IS(e,t),i=IS(e.reverse(),t);return[n,i]}function rO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function IS(t,e){for(const n of t)if(!k5(n,{upTo:e}))return n}function k5(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function E5(t){return t instanceof HTMLInputElement&&"select"in t}function _s(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&E5(t)&&e&&t.select()}}const LS=C5();function C5(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=BS(t,e),t.unshift(e)},remove(e){var n;t=BS(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function BS(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function A5(t){return t.filter(e=>e.tagName!=="A")}function vu(t){return t.split("-")[1]}function xb(t){return t==="y"?"height":"width"}function fs(t){return t.split("-")[0]}function Ia(t){return["top","bottom"].includes(fs(t))?"x":"y"}function zS(t,e,n){let{reference:i,floating:r}=t;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,a=Ia(e),l=xb(a),u=i[l]/2-r[l]/2,c=a==="x";let d;switch(fs(e)){case"top":d={x:s,y:i.y-r.height};break;case"bottom":d={x:s,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:o};break;case"left":d={x:i.x-r.width,y:o};break;default:d={x:i.x,y:i.y}}switch(vu(e)){case"start":d[a]-=u*(n&&c?-1:1);break;case"end":d[a]+=u*(n&&c?-1:1)}return d}const P5=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=zS(u,i,l),h=i,f={},p=0;for(let g=0;g<a.length;g++){const{name:b,fn:m}=a[g],{x:v,y:w,data:k,reset:C}=await m({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=v??c,d=w??d,f={...f,[b]:{...f[b],...k}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):C.rects),{x:c,y:d}=zS(u,h,l)),g=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};function ks(t,e){return typeof t=="function"?t(e):t}function sO(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function hp(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function td(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=ks(e,t),p=sO(f),g=a[h?d==="floating"?"reference":"floating":d],b=hp(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),m=d==="floating"?{...o.floating,x:i,y:r}:o.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(v))&&await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1},k=hp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m,offsetParent:v,strategy:l}):m);return{top:(b.top-k.top+p.top)/w.y,bottom:(k.bottom-b.bottom+p.bottom)/w.y,left:(b.left-k.left+p.left)/w.x,right:(k.right-b.right+p.right)/w.x}}const nd=Math.min,Yo=Math.max;function sv(t,e,n){return Yo(t,nd(e,n))}const jS=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a}=e,{element:l,padding:u=0}=ks(t,e)||{};if(l==null)return{};const c=sO(u),d={x:n,y:i},h=Ia(r),f=xb(h),p=await o.getDimensions(l),g=h==="y",b=g?"top":"left",m=g?"bottom":"right",v=g?"clientHeight":"clientWidth",w=s.reference[f]+s.reference[h]-d[h]-s.floating[f],k=d[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let O=C?C[v]:0;O&&await(o.isElement==null?void 0:o.isElement(C))||(O=a.floating[v]||s.floating[f]);const M=w/2-k/2,E=O/2-p[f]/2-1,N=nd(c[b],E),D=nd(c[m],E),T=N,F=O-p[f]-D,j=O/2-p[f]/2+M,B=sv(T,j,F),K=vu(r)!=null&&j!=B&&s.reference[f]/2-(j<T?N:D)-p[f]/2<0?j<T?T-j:F-j:0;return{[h]:d[h]-K,data:{[h]:B,centerOffset:j-B+K}}}}),oO=["top","right","bottom","left"];oO.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const O5={left:"right",right:"left",bottom:"top",top:"bottom"};function fp(t){return t.replace(/left|right|bottom|top/g,e=>O5[e])}function M5(t,e,n){n===void 0&&(n=!1);const i=vu(t),r=Ia(t),s=xb(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=fp(o)),{main:o,cross:fp(o)}}const $5={start:"end",end:"start"};function Zg(t){return t.replace(/start|end/g,e=>$5[e])}const R5=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...g}=ks(t,e),b=fs(i),m=fs(o)===o,v=await(a.isRTL==null?void 0:a.isRTL(l.floating)),w=d||(m||!p?[fp(o)]:function(T){const F=fp(T);return[Zg(T),F,Zg(F)]}(o));d||f==="none"||w.push(...function(T,F,j,B){const K=vu(T);let Y=function(ee,W,R){const H=["left","right"],q=["right","left"],re=["top","bottom"],we=["bottom","top"];switch(ee){case"top":case"bottom":return R?W?q:H:W?H:q;case"left":case"right":return W?re:we;default:return[]}}(fs(T),j==="start",B);return K&&(Y=Y.map(ee=>ee+"-"+K),F&&(Y=Y.concat(Y.map(Zg)))),Y}(o,p,f,v));const k=[o,...w],C=await td(e,g),O=[];let M=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&O.push(C[b]),c){const{main:T,cross:F}=M5(i,s,v);O.push(C[T],C[F])}if(M=[...M,{placement:i,overflows:O}],!O.every(T=>T<=0)){var E,N;const T=(((E=r.flip)==null?void 0:E.index)||0)+1,F=k[T];if(F)return{data:{index:T,overflows:M},reset:{placement:F}};let j=(N=M.filter(B=>B.overflows[0]<=0).sort((B,K)=>B.overflows[1]-K.overflows[1])[0])==null?void 0:N.placement;if(!j)switch(h){case"bestFit":{var D;const B=(D=M.map(K=>[K.placement,K.overflows.filter(Y=>Y>0).reduce((Y,ee)=>Y+ee,0)]).sort((K,Y)=>K[1]-Y[1])[0])==null?void 0:D[0];B&&(j=B);break}case"initialPlacement":j=o}if(i!==j)return{reset:{placement:j}}}return{}}}};function FS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function US(t){return oO.some(e=>t[e]>=0)}const N5=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=ks(t,e);switch(i){case"referenceHidden":{const s=FS(await td(e,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:US(s)}}}case"escaped":{const s=FS(await td(e,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:US(s)}}}default:return{}}}}},T5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,r=await async function(s,o){const{placement:a,platform:l,elements:u}=s,c=await(l.isRTL==null?void 0:l.isRTL(u.floating)),d=fs(a),h=vu(a),f=Ia(a)==="x",p=["left","top"].includes(d)?-1:1,g=c&&f?-1:1,b=ks(o,s);let{mainAxis:m,crossAxis:v,alignmentAxis:w}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return h&&typeof w=="number"&&(v=h==="end"?-1*w:w),f?{x:v*g,y:m*p}:{x:m*p,y:v*g}}(e,t);return{x:n+r.x,y:i+r.y,data:r}}}};function aO(t){return t==="x"?"y":"x"}const _5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:m,y:v}=b;return{x:m,y:v}}},...l}=ks(t,e),u={x:n,y:i},c=await td(e,l),d=Ia(fs(r)),h=aO(d);let f=u[d],p=u[h];if(s){const b=d==="y"?"bottom":"right";f=sv(f+c[d==="y"?"top":"left"],f,f-c[b])}if(o){const b=h==="y"?"bottom":"right";p=sv(p+c[h==="y"?"top":"left"],p,p-c[b])}const g=a.fn({...e,[d]:f,[h]:p});return{...g,data:{x:g.x-n,y:g.y-i}}}}},D5=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=ks(t,e),c={x:n,y:i},d=Ia(r),h=aO(d);let f=c[d],p=c[h];const g=ks(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=d==="y"?"height":"width",k=s.reference[d]-s.floating[w]+b.mainAxis,C=s.reference[d]+s.reference[w]-b.mainAxis;f<k?f=k:f>C&&(f=C)}if(u){var m,v;const w=d==="y"?"width":"height",k=["top","left"].includes(fs(r)),C=s.reference[h]-s.floating[w]+(k&&((m=o.offset)==null?void 0:m[h])||0)+(k?0:b.crossAxis),O=s.reference[h]+s.reference[w]+(k?0:((v=o.offset)==null?void 0:v[h])||0)-(k?b.crossAxis:0);p<C?p=C:p>O&&(p=O)}return{[d]:f,[h]:p}}}},I5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:i,platform:r,elements:s}=e,{apply:o=()=>{},...a}=ks(t,e),l=await td(e,a),u=fs(n),c=vu(n),d=Ia(n)==="x",{width:h,height:f}=i.floating;let p,g;u==="top"||u==="bottom"?(p=u,g=c===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(g=u,p=c==="end"?"top":"bottom");const b=f-l[p],m=h-l[g],v=!e.middlewareData.shift;let w=b,k=m;if(d){const O=h-l.left-l.right;k=c||v?nd(m,O):O}else{const O=f-l.top-l.bottom;w=c||v?nd(b,O):O}if(v&&!c){const O=Yo(l.left,0),M=Yo(l.right,0),E=Yo(l.top,0),N=Yo(l.bottom,0);d?k=h-2*(O!==0||M!==0?O+M:Yo(l.left,l.right)):w=f-2*(E!==0||N!==0?E+N:Yo(l.top,l.bottom))}await o({...e,availableWidth:k,availableHeight:w});const C=await r.getDimensions(s.floating);return h!==C.width||f!==C.height?{reset:{rects:!0}}:{}}}};function di(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Fr(t){return di(t).getComputedStyle(t)}function lO(t){return t instanceof di(t).Node}function Eo(t){return lO(t)?(t.nodeName||"").toLowerCase():"#document"}function hr(t){return t instanceof HTMLElement||t instanceof di(t).HTMLElement}function VS(t){return typeof ShadowRoot<"u"&&(t instanceof di(t).ShadowRoot||t instanceof ShadowRoot)}function id(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Fr(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function L5(t){return["table","td","th"].includes(Eo(t))}function ov(t){const e=Sb(),n=Fr(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Sb(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Om(t){return["html","body","#document"].includes(Eo(t))}const av=Math.min,Al=Math.max,pp=Math.round,fh=Math.floor,Co=t=>({x:t,y:t});function uO(t){const e=Fr(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=hr(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=pp(n)!==s||pp(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function ps(t){return t instanceof Element||t instanceof di(t).Element}function kb(t){return ps(t)?t:t.contextElement}function Pl(t){const e=kb(t);if(!hr(e))return Co(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=uO(e);let o=(s?pp(n.width):n.width)/i,a=(s?pp(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const B5=Co(0);function cO(t){const e=di(t);return Sb()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:B5}function Oa(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=kb(t);let o=Co(1);e&&(i?ps(i)&&(o=Pl(i)):o=Pl(t));const a=function(h,f,p){return f===void 0&&(f=!1),!(!p||f&&p!==di(h))&&f}(s,n,i)?cO(s):Co(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=di(s),f=i&&ps(i)?di(i):i;let p=h.frameElement;for(;p&&i&&f!==h;){const g=Pl(p),b=p.getBoundingClientRect(),m=getComputedStyle(p),v=b.left+(p.clientLeft+parseFloat(m.paddingLeft))*g.x,w=b.top+(p.clientTop+parseFloat(m.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=v,u+=w,p=di(p).frameElement}}return hp({width:c,height:d,x:l,y:u})}function Mm(t){return ps(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ms(t){var e;return(e=(lO(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function dO(t){return Oa(ms(t)).left+Mm(t).scrollLeft}function eu(t){if(Eo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||VS(t)&&t.host||ms(t);return VS(e)?e.host:e}function hO(t){const e=eu(t);return Om(e)?t.ownerDocument?t.ownerDocument.body:t.body:hr(e)&&id(e)?e:hO(e)}function mp(t,e){var n;e===void 0&&(e=[]);const i=hO(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=di(i);return r?e.concat(s,s.visualViewport||[],id(i)?i:[]):e.concat(i,mp(i))}function HS(t,e,n){let i;if(e==="viewport")i=function(r,s){const o=di(r),a=ms(r),l=o.visualViewport;let u=a.clientWidth,c=a.clientHeight,d=0,h=0;if(l){u=l.width,c=l.height;const f=Sb();(!f||f&&s==="fixed")&&(d=l.offsetLeft,h=l.offsetTop)}return{width:u,height:c,x:d,y:h}}(t,n);else if(e==="document")i=function(r){const s=ms(r),o=Mm(r),a=r.ownerDocument.body,l=Al(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),u=Al(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let c=-o.scrollLeft+dO(r);const d=-o.scrollTop;return Fr(a).direction==="rtl"&&(c+=Al(s.clientWidth,a.clientWidth)-l),{width:l,height:u,x:c,y:d}}(ms(t));else if(ps(e))i=function(r,s){const o=Oa(r,!0,s==="fixed"),a=o.top+r.clientTop,l=o.left+r.clientLeft,u=hr(r)?Pl(r):Co(1);return{width:r.clientWidth*u.x,height:r.clientHeight*u.y,x:l*u.x,y:a*u.y}}(e,n);else{const r=cO(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return hp(i)}function fO(t,e){const n=eu(t);return!(n===e||!ps(n)||Om(n))&&(Fr(n).position==="fixed"||fO(n,e))}function z5(t,e,n){const i=hr(e),r=ms(e),s=n==="fixed",o=Oa(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Co(0);if(i||!i&&!s)if((Eo(e)!=="body"||id(r))&&(a=Mm(e)),hr(e)){const u=Oa(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else r&&(l.x=dO(r));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function WS(t,e){return hr(t)&&Fr(t).position!=="fixed"?e?e(t):t.offsetParent:null}function GS(t,e){const n=di(t);if(!hr(t))return n;let i=WS(t,e);for(;i&&L5(i)&&Fr(i).position==="static";)i=WS(i,e);return i&&(Eo(i)==="html"||Eo(i)==="body"&&Fr(i).position==="static"&&!ov(i))?n:i||function(r){let s=eu(r);for(;hr(s)&&!Om(s);){if(ov(s))return s;s=eu(s)}return null}(t)||n}const j5={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=hr(n),s=ms(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=Co(1);const l=Co(0);if((r||!r&&i!=="fixed")&&((Eo(n)!=="body"||id(s))&&(o=Mm(n)),hr(n))){const u=Oa(n);a=Pl(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},getDocumentElement:ms,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[...n==="clippingAncestors"?function(l,u){const c=u.get(l);if(c)return c;let d=mp(l).filter(g=>ps(g)&&Eo(g)!=="body"),h=null;const f=Fr(l).position==="fixed";let p=f?eu(l):l;for(;ps(p)&&!Om(p);){const g=Fr(p),b=ov(p);b||g.position!=="fixed"||(h=null),(f?!b&&!h:!b&&g.position==="static"&&h&&["absolute","fixed"].includes(h.position)||id(p)&&!b&&fO(l,p))?d=d.filter(m=>m!==p):h=g,p=eu(p)}return u.set(l,d),d}(e,this._c):[].concat(n),i],o=s[0],a=s.reduce((l,u)=>{const c=HS(e,u,r);return l.top=Al(c.top,l.top),l.right=av(c.right,l.right),l.bottom=av(c.bottom,l.bottom),l.left=Al(c.left,l.left),l},HS(e,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:GS,getElementRects:async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||GS,s=this.getDimensions;return{reference:z5(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return uO(t)},getScale:Pl,isElement:ps,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function F5(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=kb(t),c=r||s?[...u?mp(u):[],...mp(e)]:[];c.forEach(b=>{r&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const d=u&&a?function(b,m){let v,w=null;const k=ms(b);function C(){clearTimeout(v),w&&w.disconnect(),w=null}return function O(M,E){M===void 0&&(M=!1),E===void 0&&(E=1),C();const{left:N,top:D,width:T,height:F}=b.getBoundingClientRect();if(M||m(),!T||!F)return;const j={rootMargin:-fh(D)+"px "+-fh(k.clientWidth-(N+T))+"px "+-fh(k.clientHeight-(D+F))+"px "+-fh(N)+"px",threshold:Al(0,av(1,E))||1};let B=!0;function K(Y){const ee=Y[0].intersectionRatio;if(ee!==E){if(!B)return O();ee?O(!1,ee):v=setTimeout(()=>{O(!1,1e-7)},100)}B=!1}try{w=new IntersectionObserver(K,{...j,root:k.ownerDocument})}catch{w=new IntersectionObserver(K,j)}w.observe(b)}(!0),C}(u,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(b=>{let[m]=b;m&&m.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let g=l?Oa(t):null;return l&&function b(){const m=Oa(t);!g||m.x===g.x&&m.y===g.y&&m.width===g.width&&m.height===g.height||n(),g=m,h=requestAnimationFrame(b)}(),n(),()=>{c.forEach(b=>{r&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const U5=(t,e,n)=>{const i=new Map,r={platform:j5,...n},s={...r.platform,_c:i};return P5(t,e,{...r,platform:s})},V5=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?jS({element:i.current,padding:r}).fn(n):{}:i?jS({element:i,padding:r}).fn(n):{}}}};var cf=typeof document<"u"?y.useLayoutEffect:y.useEffect;function gp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!gp(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!gp(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function pO(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function KS(t,e){const n=pO(t);return Math.round(e*n)/n}function XS(t){const e=y.useRef(t);return cf(()=>{e.current=t}),e}function H5(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=y.useState(i);gp(h,i)||f(i);const[p,g]=y.useState(null),[b,m]=y.useState(null),v=y.useCallback(Y=>{Y!=O.current&&(O.current=Y,g(Y))},[g]),w=y.useCallback(Y=>{Y!==M.current&&(M.current=Y,m(Y))},[m]),k=s||p,C=o||b,O=y.useRef(null),M=y.useRef(null),E=y.useRef(c),N=XS(l),D=XS(r),T=y.useCallback(()=>{if(!O.current||!M.current)return;const Y={placement:e,strategy:n,middleware:h};D.current&&(Y.platform=D.current),U5(O.current,M.current,Y).then(ee=>{const W={...ee,isPositioned:!0};F.current&&!gp(E.current,W)&&(E.current=W,Do.flushSync(()=>{d(W)}))})},[h,e,n,D]);cf(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(Y=>({...Y,isPositioned:!1})))},[u]);const F=y.useRef(!1);cf(()=>(F.current=!0,()=>{F.current=!1}),[]),cf(()=>{if(k&&(O.current=k),C&&(M.current=C),k&&C){if(N.current)return N.current(k,C,T);T()}},[k,C,T,N]);const j=y.useMemo(()=>({reference:O,floating:M,setReference:v,setFloating:w}),[v,w]),B=y.useMemo(()=>({reference:k,floating:C}),[k,C]),K=y.useMemo(()=>{const Y={position:n,left:0,top:0};if(!B.floating)return Y;const ee=KS(B.floating,c.x),W=KS(B.floating,c.y);return a?{...Y,transform:"translate("+ee+"px, "+W+"px)",...pO(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ee,top:W}},[n,a,B.floating,c.x,c.y]);return y.useMemo(()=>({...c,update:T,refs:j,elements:B,floatingStyles:K}),[c,T,j,B,K])}function Eb(t){const[e,n]=y.useState(void 0);return lr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}const mO="Popper",[gO,wu]=Hr(mO),[W5,yO]=gO(mO),G5=t=>{const{__scopePopper:e,children:n}=t,[i,r]=y.useState(null);return y.createElement(W5,{scope:e,anchor:i,onAnchorChange:r},n)},K5="PopperAnchor",X5=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=yO(K5,n),o=y.useRef(null),a=Qe(e,o);return y.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:y.createElement(Je.div,le({},r,{ref:a}))}),vO="PopperContent",[Z5,pZ]=gO(vO),Y5=y.forwardRef((t,e)=>{var n,i,r,s,o,a,l,u;const{__scopePopper:c,side:d="bottom",sideOffset:h=0,align:f="center",alignOffset:p=0,arrowPadding:g=0,collisionBoundary:b=[],collisionPadding:m=0,sticky:v="partial",hideWhenDetached:w=!1,avoidCollisions:k=!0,onPlaced:C,...O}=t,M=yO(vO,c),[E,N]=y.useState(null),D=Qe(e,Z=>N(Z)),[T,F]=y.useState(null),j=Eb(T),B=(n=j==null?void 0:j.width)!==null&&n!==void 0?n:0,K=(i=j==null?void 0:j.height)!==null&&i!==void 0?i:0,Y=d+(f!=="center"?"-"+f:""),ee=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},W=Array.isArray(b)?b:[b],R=W.length>0,H={padding:ee,boundary:W.filter(J5),altBoundary:R},{refs:q,floatingStyles:re,placement:we,isPositioned:U,middlewareData:I}=H5({strategy:"fixed",placement:Y,whileElementsMounted:F5,elements:{reference:M.anchor},middleware:[T5({mainAxis:h+K,alignmentAxis:p}),k&&_5({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?D5():void 0,...H}),k&&R5({...H}),I5({...H,apply:({elements:Z,rects:Q,availableWidth:$e,availableHeight:he})=>{const{width:Re,height:De}=Q.reference,ye=Z.floating.style;ye.setProperty("--radix-popper-available-width",`${$e}px`),ye.setProperty("--radix-popper-available-height",`${he}px`),ye.setProperty("--radix-popper-anchor-width",`${Re}px`),ye.setProperty("--radix-popper-anchor-height",`${De}px`)}}),T&&V5({element:T,padding:g}),q5({arrowWidth:B,arrowHeight:K}),w&&N5({strategy:"referenceHidden"})]}),[G,S]=wO(we),P=ur(C);lr(()=>{U&&(P==null||P())},[U,P]);const _=(r=I.arrow)===null||r===void 0?void 0:r.x,$=(s=I.arrow)===null||s===void 0?void 0:s.y,z=((o=I.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[X,V]=y.useState();return lr(()=>{E&&V(window.getComputedStyle(E).zIndex)},[E]),y.createElement("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:U?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(a=I.transformOrigin)===null||a===void 0?void 0:a.x,(l=I.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},y.createElement(Z5,{scope:c,placedSide:G,onArrowChange:F,arrowX:_,arrowY:$,shouldHideArrow:z},y.createElement(Je.div,le({"data-side":G,"data-align":S},O,{ref:D,style:{...O.style,animation:U?void 0:"none",opacity:(u=I.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function J5(t){return t!==null}const q5=t=>({name:"transformOrigin",options:t,fn(e){var n,i,r,s,o;const{placement:a,rects:l,middlewareData:u}=e,d=((n=u.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=d?0:t.arrowWidth,f=d?0:t.arrowHeight,[p,g]=wO(a),b={start:"0%",center:"50%",end:"100%"}[g],m=((i=(r=u.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+h/2,v=((s=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+f/2;let w="",k="";return p==="bottom"?(w=d?b:`${m}px`,k=`${-f}px`):p==="top"?(w=d?b:`${m}px`,k=`${l.floating.height+f}px`):p==="right"?(w=`${-f}px`,k=d?b:`${v}px`):p==="left"&&(w=`${l.floating.width+f}px`,k=d?b:`${v}px`),{data:{x:w,y:k}}}});function wO(t){const[e,n="center"]=t.split("-");return[e,n]}const Cb=G5,Ab=X5,Pb=Y5,Ob=y.forwardRef((t,e)=>{var n;const{container:i=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...r}=t;return i?pP.createPortal(y.createElement(Je.div,le({},r,{ref:e})),i):null});var Q5=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ga=new WeakMap,ph=new WeakMap,mh={},Yg=0,bO=function(t){return t&&(t.host||bO(t.parentNode))},e6=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=bO(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},t6=function(t,e,n,i){var r=e6(e,Array.isArray(t)?t:[t]);mh[n]||(mh[n]=new WeakMap);var s=mh[n],o=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else{var f=h.getAttribute(i),p=f!==null&&f!=="false",g=(Ga.get(h)||0)+1,b=(s.get(h)||0)+1;Ga.set(h,g),s.set(h,b),o.push(h),g===1&&p&&ph.set(h,!0),b===1&&h.setAttribute(n,"true"),p||h.setAttribute(i,"true")}})};return c(e),a.clear(),Yg++,function(){o.forEach(function(d){var h=Ga.get(d)-1,f=s.get(d)-1;Ga.set(d,h),s.set(d,f),h||(ph.has(d)||d.removeAttribute(i),ph.delete(d)),f||d.removeAttribute(n)}),Yg--,Yg||(Ga=new WeakMap,Ga=new WeakMap,ph=new WeakMap,mh={})}},Mb=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=e||Q5(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),t6(i,r,n,"aria-hidden")):function(){return null}},$r=function(){return $r=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$r.apply(this,arguments)};function xO(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function n6(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var df="right-scroll-bar-position",hf="width-before-scroll-bar",i6="with-scroll-bars-hidden",r6="--removed-body-scroll-bar-size";function s6(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function o6(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}function a6(t,e){return o6(e||null,function(n){return t.forEach(function(i){return s6(i,n)})})}function l6(t){return t}function u6(t,e){e===void 0&&(e=l6);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return r}function c6(t){t===void 0&&(t={});var e=u6(null);return e.options=$r({async:!0,ssr:!1},t),e}var SO=function(t){var e=t.sideCar,n=xO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return y.createElement(i,$r({},n))};SO.isSideCarExport=!0;function d6(t,e){return t.useMedium(e),SO}var kO=c6(),Jg=function(){},$m=y.forwardRef(function(t,e){var n=y.useRef(null),i=y.useState({onScrollCapture:Jg,onWheelCapture:Jg,onTouchMoveCapture:Jg}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,g=t.allowPinchZoom,b=t.as,m=b===void 0?"div":b,v=xO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,k=a6([n,e]),C=$r($r({},v),r);return y.createElement(y.Fragment,null,c&&y.createElement(w,{sideCar:kO,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n}),o?y.cloneElement(y.Children.only(a),$r($r({},C),{ref:k})):y.createElement(m,$r({},C,{className:l,ref:k}),a))});$m.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$m.classNames={fullWidth:hf,zeroRight:df};var ZS,h6=function(){if(ZS)return ZS;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function f6(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=h6();return e&&t.setAttribute("nonce",e),t}function p6(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function m6(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var g6=function(){var t=0,e=null;return{add:function(n){t==0&&(e=f6())&&(p6(e,n),m6(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},y6=function(){var t=g6();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},EO=function(){var t=y6(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},v6={left:0,top:0,right:0,gap:0},qg=function(t){return parseInt(t||"",10)||0},w6=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[qg(n),qg(i),qg(r)]},b6=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return v6;var e=w6(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},x6=EO(),S6=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(i6,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(df,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(hf,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(df," .").concat(df,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(hf," .").concat(hf,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body {
    `).concat(r6,": ").concat(a,`px;
  }
`)},k6=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i,s=y.useMemo(function(){return b6(r)},[r]);return y.createElement(x6,{styles:S6(s,!e,r,n?"":"!important")})},lv=!1;if(typeof window<"u")try{var gh=Object.defineProperty({},"passive",{get:function(){return lv=!0,!0}});window.addEventListener("test",gh,gh),window.removeEventListener("test",gh,gh)}catch{lv=!1}var Ka=lv?{passive:!1}:!1,E6=function(t){return t.tagName==="TEXTAREA"},CO=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!E6(t)&&n[e]==="visible")},C6=function(t){return CO(t,"overflowY")},A6=function(t){return CO(t,"overflowX")},YS=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=AO(t,n);if(i){var r=PO(t,n),s=r[1],o=r[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},P6=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},O6=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},AO=function(t,e){return t==="v"?C6(e):A6(e)},PO=function(t,e){return t==="v"?P6(e):O6(e)},M6=function(t,e){return t==="h"&&e==="rtl"?-1:1},$6=function(t,e,n,i,r){var s=M6(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=PO(t,a),p=f[0],g=f[1],b=f[2],m=g-b-s*p;(p||m)&&AO(t,a)&&(d+=m,h+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(r&&d===0||!r&&o>d)||!c&&(r&&h===0||!r&&-o>h))&&(u=!0),u},yh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},JS=function(t){return[t.deltaX,t.deltaY]},qS=function(t){return t&&"current"in t?t.current:t},R6=function(t,e){return t[0]===e[0]&&t[1]===e[1]},N6=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},T6=0,Xa=[];function _6(t){var e=y.useRef([]),n=y.useRef([0,0]),i=y.useRef(),r=y.useState(T6++)[0],s=y.useState(function(){return EO()})[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var g=n6([t.lockRef.current],(t.shards||[]).map(qS),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(g,b){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var m=yh(g),v=n.current,w="deltaX"in g?g.deltaX:v[0]-m[0],k="deltaY"in g?g.deltaY:v[1]-m[1],C,O=g.target,M=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in g&&M==="h"&&O.type==="range")return!1;var E=YS(M,O);if(!E)return!0;if(E?C=M:(C=M==="v"?"h":"v",E=YS(M,O)),!E)return!1;if(!i.current&&"changedTouches"in g&&(w||k)&&(i.current=C),!C)return!0;var N=i.current||C;return $6(N,b,g,N==="h"?w:k,!0)},[]),l=y.useCallback(function(g){var b=g;if(!(!Xa.length||Xa[Xa.length-1]!==s)){var m="deltaY"in b?JS(b):yh(b),v=e.current.filter(function(C){return C.name===b.type&&C.target===b.target&&R6(C.delta,m)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var w=(o.current.shards||[]).map(qS).filter(Boolean).filter(function(C){return C.contains(b.target)}),k=w.length>0?a(b,w[0]):!o.current.noIsolation;k&&b.cancelable&&b.preventDefault()}}},[]),u=y.useCallback(function(g,b,m,v){var w={name:g,delta:b,target:m,should:v};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(k){return k!==w})},1)},[]),c=y.useCallback(function(g){n.current=yh(g),i.current=void 0},[]),d=y.useCallback(function(g){u(g.type,JS(g),g.target,a(g,t.lockRef.current))},[]),h=y.useCallback(function(g){u(g.type,yh(g),g.target,a(g,t.lockRef.current))},[]);y.useEffect(function(){return Xa.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ka),document.addEventListener("touchmove",l,Ka),document.addEventListener("touchstart",c,Ka),function(){Xa=Xa.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Ka),document.removeEventListener("touchmove",l,Ka),document.removeEventListener("touchstart",c,Ka)}},[]);var f=t.removeScrollBar,p=t.inert;return y.createElement(y.Fragment,null,p?y.createElement(s,{styles:N6(r)}):null,f?y.createElement(k6,{gapMode:"margin"}):null)}const D6=d6(kO,_6);var OO=y.forwardRef(function(t,e){return y.createElement($m,$r({},t,{ref:e,sideCar:D6}))});OO.classNames=$m.classNames;const $b=OO,uv=["Enter"," "],I6=["ArrowDown","PageUp","Home"],MO=["ArrowUp","PageDown","End"],L6=[...I6,...MO],B6={ltr:[...uv,"ArrowRight"],rtl:[...uv,"ArrowLeft"]},z6={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rm="Menu",[rd,j6,F6]=xm(Rm),[La,$O]=Hr(Rm,[F6,wu,Sm]),Rb=wu(),RO=Sm(),[U6,Ba]=La(Rm),[V6,Nd]=La(Rm),H6=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:s,modal:o=!0}=t,a=Rb(e),[l,u]=y.useState(null),c=y.useRef(!1),d=ur(s),h=$d(r);return y.useEffect(()=>{const f=()=>{c.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>c.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),y.createElement(Cb,a,y.createElement(U6,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:u},y.createElement(V6,{scope:e,onClose:y.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:h,modal:o},i)))},NO=y.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=Rb(n);return y.createElement(Ab,le({},r,i,{ref:e}))}),TO="MenuPortal",[W6,_O]=La(TO,{forceMount:void 0}),G6=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=Ba(TO,e);return y.createElement(W6,{scope:e,forceMount:n},y.createElement(Io,{present:n||s.open},y.createElement(Ob,{asChild:!0,container:r},i)))},sr="MenuContent",[K6,Nb]=La(sr),X6=y.forwardRef((t,e)=>{const n=_O(sr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Ba(sr,t.__scopeMenu),o=Nd(sr,t.__scopeMenu);return y.createElement(rd.Provider,{scope:t.__scopeMenu},y.createElement(Io,{present:i||s.open},y.createElement(rd.Slot,{scope:t.__scopeMenu},o.modal?y.createElement(Z6,le({},r,{ref:e})):y.createElement(Y6,le({},r,{ref:e})))))}),Z6=y.forwardRef((t,e)=>{const n=Ba(sr,t.__scopeMenu),i=y.useRef(null),r=Qe(e,i);return y.useEffect(()=>{const s=i.current;if(s)return Mb(s)},[]),y.createElement(Tb,le({},t,{ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Se(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),Y6=y.forwardRef((t,e)=>{const n=Ba(sr,t.__scopeMenu);return y.createElement(Tb,le({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),Tb=y.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...g}=t,b=Ba(sr,n),m=Nd(sr,n),v=Rb(n),w=RO(n),k=j6(n),[C,O]=y.useState(null),M=y.useRef(null),E=Qe(e,M,b.onContentChange),N=y.useRef(0),D=y.useRef(""),T=y.useRef(0),F=y.useRef(null),j=y.useRef("right"),B=y.useRef(0),K=p?$b:y.Fragment,Y=p?{as:Sa,allowPinchZoom:!0}:void 0,ee=R=>{var H,q;const re=D.current+R,we=k().filter(_=>!_.disabled),U=document.activeElement,I=(H=we.find(_=>_.ref.current===U))===null||H===void 0?void 0:H.textValue,G=we.map(_=>_.textValue),S=h4(G,re,I),P=(q=we.find(_=>_.textValue===S))===null||q===void 0?void 0:q.ref.current;(function _($){D.current=$,window.clearTimeout(N.current),$!==""&&(N.current=window.setTimeout(()=>_(""),1e3))})(re),P&&setTimeout(()=>P.focus())};y.useEffect(()=>()=>window.clearTimeout(N.current),[]),wb();const W=y.useCallback(R=>{var H,q;return j.current===((H=F.current)===null||H===void 0?void 0:H.side)&&p4(R,(q=F.current)===null||q===void 0?void 0:q.area)},[]);return y.createElement(K6,{scope:n,searchRef:D,onItemEnter:y.useCallback(R=>{W(R)&&R.preventDefault()},[W]),onItemLeave:y.useCallback(R=>{var H;W(R)||((H=M.current)===null||H===void 0||H.focus(),O(null))},[W]),onTriggerLeave:y.useCallback(R=>{W(R)&&R.preventDefault()},[W]),pointerGraceTimerRef:T,onPointerGraceIntentChange:y.useCallback(R=>{F.current=R},[])},y.createElement(K,Y,y.createElement(bb,{asChild:!0,trapped:r,onMountAutoFocus:Se(s,R=>{var H;R.preventDefault(),(H=M.current)===null||H===void 0||H.focus()}),onUnmountAutoFocus:o},y.createElement(vb,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f},y.createElement(wP,le({asChild:!0},w,{dir:m.dir,orientation:"vertical",loop:i,currentTabStopId:C,onCurrentTabStopIdChange:O,onEntryFocus:Se(l,R=>{m.isUsingKeyboardRef.current||R.preventDefault()})}),y.createElement(Pb,le({role:"menu","aria-orientation":"vertical","data-state":zO(b.open),"data-radix-menu-content":"",dir:m.dir},v,g,{ref:E,style:{outline:"none",...g.style},onKeyDown:Se(g.onKeyDown,R=>{const q=R.target.closest("[data-radix-menu-content]")===R.currentTarget,re=R.ctrlKey||R.altKey||R.metaKey,we=R.key.length===1;q&&(R.key==="Tab"&&R.preventDefault(),!re&&we&&ee(R.key));const U=M.current;if(R.target!==U||!L6.includes(R.key))return;R.preventDefault();const G=k().filter(S=>!S.disabled).map(S=>S.ref.current);MO.includes(R.key)&&G.reverse(),c4(G)}),onBlur:Se(t.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(N.current),D.current="")}),onPointerMove:Se(t.onPointerMove,sd(R=>{const H=R.target,q=B.current!==R.clientX;if(R.currentTarget.contains(H)&&q){const re=R.clientX>B.current?"right":"left";j.current=re,B.current=R.clientX}}))})))))))}),J6=y.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return y.createElement(Je.div,le({},i,{ref:e}))}),cv="MenuItem",QS="menu.itemSelect",_b=y.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=y.useRef(null),o=Nd(cv,t.__scopeMenu),a=Nb(cv,t.__scopeMenu),l=Qe(e,s),u=y.useRef(!1),c=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(QS,{bubbles:!0,cancelable:!0});d.addEventListener(QS,f=>i==null?void 0:i(f),{once:!0}),gP(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return y.createElement(DO,le({},r,{ref:l,disabled:n,onClick:Se(t.onClick,c),onPointerDown:d=>{var h;(h=t.onPointerDown)===null||h===void 0||h.call(t,d),u.current=!0},onPointerUp:Se(t.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)===null||h===void 0||h.click()}),onKeyDown:Se(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||uv.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})}))}),DO=y.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=Nb(cv,n),a=RO(n),l=y.useRef(null),u=Qe(e,l),[c,d]=y.useState(!1),[h,f]=y.useState("");return y.useEffect(()=>{const p=l.current;if(p){var g;f(((g=p.textContent)!==null&&g!==void 0?g:"").trim())}},[s.children]),y.createElement(rd.ItemSlot,{scope:n,disabled:i,textValue:r??h},y.createElement(bP,le({asChild:!0},a,{focusable:!i}),y.createElement(Je.div,le({role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0},s,{ref:u,onPointerMove:Se(t.onPointerMove,sd(p=>{i?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus())})),onPointerLeave:Se(t.onPointerLeave,sd(p=>o.onItemLeave(p))),onFocus:Se(t.onFocus,()=>d(!0)),onBlur:Se(t.onBlur,()=>d(!1))}))))}),q6=y.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return y.createElement(LO,{scope:t.__scopeMenu,checked:n},y.createElement(_b,le({role:"menuitemcheckbox","aria-checked":yp(n)?"mixed":n},r,{ref:e,"data-state":Db(n),onSelect:Se(r.onSelect,()=>i==null?void 0:i(yp(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),Q6="MenuRadioGroup",[mZ,e4]=La(Q6,{value:void 0,onValueChange:()=>{}}),t4="MenuRadioItem",n4=y.forwardRef((t,e)=>{const{value:n,...i}=t,r=e4(t4,t.__scopeMenu),s=n===r.value;return y.createElement(LO,{scope:t.__scopeMenu,checked:s},y.createElement(_b,le({role:"menuitemradio","aria-checked":s},i,{ref:e,"data-state":Db(s),onSelect:Se(i.onSelect,()=>{var o;return(o=r.onValueChange)===null||o===void 0?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})))}),IO="MenuItemIndicator",[LO,i4]=La(IO,{checked:!1}),r4=y.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=i4(IO,n);return y.createElement(Io,{present:i||yp(s.checked)||s.checked===!0},y.createElement(Je.span,le({},r,{ref:e,"data-state":Db(s.checked)})))}),s4=y.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return y.createElement(Je.div,le({role:"separator","aria-orientation":"horizontal"},i,{ref:e}))}),o4="MenuSub",[gZ,BO]=La(o4),vh="MenuSubTrigger",a4=y.forwardRef((t,e)=>{const n=Ba(vh,t.__scopeMenu),i=Nd(vh,t.__scopeMenu),r=BO(vh,t.__scopeMenu),s=Nb(vh,t.__scopeMenu),o=y.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:t.__scopeMenu},c=y.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return y.useEffect(()=>c,[c]),y.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),y.createElement(NO,le({asChild:!0},u),y.createElement(DO,le({id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":zO(n.open)},t,{ref:bm(e,r.onTriggerChange),onClick:d=>{var h;(h=t.onClick)===null||h===void 0||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Se(t.onPointerMove,sd(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:Se(t.onPointerLeave,sd(d=>{var h;c();const f=(h=n.content)===null||h===void 0?void 0:h.getBoundingClientRect();if(f){var p;const g=(p=n.content)===null||p===void 0?void 0:p.dataset.side,b=g==="right",m=b?-5:5,v=f[b?"left":"right"],w=f[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+m,y:d.clientY},{x:v,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:v,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Se(t.onKeyDown,d=>{const h=s.searchRef.current!=="";if(!(t.disabled||h&&d.key===" ")&&B6[i.dir].includes(d.key)){var f;n.onOpenChange(!0),(f=n.content)===null||f===void 0||f.focus(),d.preventDefault()}})})))}),l4="MenuSubContent",u4=y.forwardRef((t,e)=>{const n=_O(sr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Ba(sr,t.__scopeMenu),o=Nd(sr,t.__scopeMenu),a=BO(l4,t.__scopeMenu),l=y.useRef(null),u=Qe(e,l);return y.createElement(rd.Provider,{scope:t.__scopeMenu},y.createElement(Io,{present:i||s.open},y.createElement(rd.Slot,{scope:t.__scopeMenu},y.createElement(Tb,le({id:a.contentId,"aria-labelledby":a.triggerId},r,{ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)===null||d===void 0||d.focus()),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:Se(t.onFocusOutside,c=>{c.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Se(t.onEscapeKeyDown,c=>{o.onClose(),c.preventDefault()}),onKeyDown:Se(t.onKeyDown,c=>{const d=c.currentTarget.contains(c.target),h=z6[o.dir].includes(c.key);if(d&&h){var f;s.onOpenChange(!1),(f=a.trigger)===null||f===void 0||f.focus(),c.preventDefault()}})})))))});function zO(t){return t?"open":"closed"}function yp(t){return t==="indeterminate"}function Db(t){return yp(t)?"indeterminate":t?"checked":"unchecked"}function c4(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function d4(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function h4(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=d4(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function f4(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,c=e[o].y;l>i!=c>i&&n<(u-a)*(i-l)/(c-l)+a&&(r=!r)}return r}function p4(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return f4(n,e)}function sd(t){return e=>e.pointerType==="mouse"?t(e):void 0}const m4=H6,g4=NO,y4=G6,v4=X6,w4=J6,b4=_b,x4=q6,S4=n4,k4=r4,E4=s4,C4=a4,A4=u4,jO="DropdownMenu",[P4,yZ]=Hr(jO,[$O]),ji=$O(),[O4,FO]=P4(jO),M4=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=ji(e),u=y.useRef(null),[c=!1,d]=bo({prop:r,defaultProp:s,onChange:o});return y.createElement(O4,{scope:e,triggerId:ka(),triggerRef:u,contentId:ka(),open:c,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(h=>!h),[d]),modal:a},y.createElement(m4,le({},l,{open:c,onOpenChange:d,dir:i,modal:a}),n))},$4="DropdownMenuTrigger",R4=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=FO($4,n),o=ji(n);return y.createElement(g4,le({asChild:!0},o),y.createElement(Je.button,le({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i},r,{ref:bm(e,s.triggerRef),onPointerDown:Se(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Se(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})))}),N4=t=>{const{__scopeDropdownMenu:e,...n}=t,i=ji(e);return y.createElement(y4,le({},i,n))},T4="DropdownMenuContent",_4=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=FO(T4,n),s=ji(n),o=y.useRef(!1);return y.createElement(v4,le({id:r.contentId,"aria-labelledby":r.triggerId},s,i,{ref:e,onCloseAutoFocus:Se(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)===null||l===void 0||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Se(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;(!r.modal||c)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),D4=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ji(n);return y.createElement(w4,le({},r,i,{ref:e}))}),I4=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ji(n);return y.createElement(b4,le({},r,i,{ref:e}))}),L4=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ji(n);return y.createElement(x4,le({},r,i,{ref:e}))}),B4=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ji(n);return y.createElement(S4,le({},r,i,{ref:e}))}),z4=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ji(n);return y.createElement(k4,le({},r,i,{ref:e}))}),j4=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ji(n);return y.createElement(E4,le({},r,i,{ref:e}))}),F4=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ji(n);return y.createElement(C4,le({},r,i,{ref:e}))}),U4=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ji(n);return y.createElement(A4,le({},r,i,{ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),V4=M4,H4=R4,W4=N4,UO=_4,VO=D4,HO=I4,WO=L4,GO=B4,KO=z4,XO=j4,ZO=F4,YO=U4,G4=V4,K4=H4,X4=y.forwardRef(({className:t,inset:e,children:n,...i},r)=>x.jsxs(ZO,{ref:r,className:Ze("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,x.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block h-4 w-4"})]}));X4.displayName=ZO.displayName;const Z4=y.forwardRef(({className:t,...e},n)=>x.jsx(YO,{ref:n,className:Ze("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));Z4.displayName=YO.displayName;const JO=y.forwardRef(({className:t,sideOffset:e=4,...n},i)=>x.jsx(W4,{children:x.jsx(UO,{ref:i,sideOffset:e,className:Ze("z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));JO.displayName=UO.displayName;const ff=y.forwardRef(({className:t,inset:e,...n},i)=>x.jsx(HO,{ref:i,className:Ze("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));ff.displayName=HO.displayName;const Y4=y.forwardRef(({className:t,children:e,checked:n,...i},r)=>x.jsxs(WO,{ref:r,className:Ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(KO,{children:x.jsx("span",{className:"icon-[lucide--check] h-4 w-4"})})}),e]}));Y4.displayName=WO.displayName;const J4=y.forwardRef(({className:t,children:e,...n},i)=>x.jsxs(GO,{ref:i,className:Ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(KO,{children:x.jsx("span",{className:"icon-[lucide--circle-dot] block h-4 w-4"})})}),e]}));J4.displayName=GO.displayName;const q4=y.forwardRef(({className:t,inset:e,...n},i)=>x.jsx(VO,{ref:i,className:Ze("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));q4.displayName=VO.displayName;const Q4=y.forwardRef(({className:t,...e},n)=>x.jsx(XO,{ref:n,className:Ze("-mx-1 my-1 h-px bg-stone-600",t),...e}));Q4.displayName=XO.displayName;function vp(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class Xt{constructor(e,n){ue(this,"start");ue(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new Xt(i,r)}toJSON(){return this.range}}const ek=Oe.from(Oe.MAX_ADDRESS).toString(),e8=Zn.from(Zn.MAX_ADDRESS).toString(),t8={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Oe.format(t)} is out of range (max memory address: ${ek}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${Oe.format(t)}, which is outside the memory range (max memory address: ${ek}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${e8}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"label-should-be-writable":t=>`Label ${t} doesn't point to a writable memory address — should point to a DB or DW declaration.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},tk=Oe.from(Oe.MAX_ADDRESS).toString(),n8=Zn.from(Zn.MAX_ADDRESS).toString(),i8={"address-has-code":t=>`La dirección de memoria ${Oe.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${t} está fuera de rango (dirección máxima de memoria: ${tk}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vacío. El programa debe tener, al menos, una instrucción END.","end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${Oe.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${tk}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${n8}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"label-should-be-writable":t=>`La etiqueta ${t} no apunta a una dirección de memoria modificable — debería apuntar a una declaración DB o DW.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${t}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},r8=gb({en:t8,es:i8});class ae extends Error{constructor(n,...i){super();ue(this,"code");ue(this,"context");ue(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof Xt?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return r8(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ae?n:new ae("unexpected-error",n)}}var Xs,Il;class s8{constructor(){ue(this,"codeMemory",new Set);ue(this,"labels",new Map);Ee(this,Xs,!1);Ee(this,Il,!1)}loadStatements(e){if(A(this,Xs))throw new Error("Tried to load statements twice");J(this,Xs,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new ae("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Oe.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Oe.from(0)})}return n}computeAddresses(e){if(A(this,Il))throw new Error("Tried to compute addresses twice");J(this,Il,!0),this.codeMemory.clear();const n=new Set;let i=null;return vp(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){i=s.newAddress;return}if(i===null)throw new ae("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!Oe.inRange(i+l))throw new ae("instruction-out-of-range",i+l).at(s);const u=Oe.from(i+l);if(n.has(u.value))throw new ae("occupied-address",u).at(s);n.add(u.value),s.isInstruction()&&this.codeMemory.add(u.value)}const a=Oe.from(i);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),i+=o},ae.from)}labelExists(e){if(!A(this,Xs))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,Xs))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,Xs))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,Il))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Oe&&(e=e.value),this.codeMemory.has(e)}}Xs=new WeakMap,Il=new WeakMap;const o8=["AL","BL","CL","DL","AH","BH","CH","DH"],qO=["AX","BX","CX","DX","SP"],wp=[...o8,...qO],Ib=["DB","DW","EQU"],Lb=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],a8=["OFFSET","ORG","BYTE","WORD","PTR","END",...wp,...Lb,...Ib];class l8{constructor(e,n,i){ue(this,"type");ue(this,"lexeme");ue(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class u8{constructor(e){ue(this,"scanned",!1);ue(this,"tokens",[]);ue(this,"position",new Xt(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new Xt(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ae("lexer.unterminated-string").at(this.position);if(this.peek().charCodeAt(0)>255)throw new ae("lexer.only-ascii").at(new Xt(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ae("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ae("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();a8.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ae("lexer.unexpected-character",e).at(this.position)}return this.position=new Xt(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new l8(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new Xt(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class nn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}ue(nn,"numberLiteral",(...e)=>new c8(...e)),ue(nn,"label",(...e)=>new d8(...e)),ue(nn,"unaryOperation",(...e)=>new h8(...e)),ue(nn,"binaryOperation",(...e)=>new f8(...e));class c8 extends nn{constructor(n,i){super(i);ue(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class d8 extends nn{constructor(n,i,r){super(r);ue(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new ae("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new ae("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new ae("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class h8 extends nn{constructor(n,i,r){super(r);ue(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class f8 extends nn{constructor(n,i,r,s){super(s);ue(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Nm{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var qr;class QO extends Nm{constructor(n,i,r){super(r);ue(this,"type","data-directive");ue(this,"label");ue(this,"values");Ee(this,qr,null);this.values=n,this.label=i}get start(){if(A(this,qr)===null)throw new Error("Start not set");return A(this,qr)}setStart(n){if(A(this,qr)!==null)throw new Error("Start already set");J(this,qr,n)}toJSON(){return{...super.toJSON(),...A(this,qr)?{start:A(this,qr).toJSON()}:{},directive:this.directive,label:this.label}}}qr=new WeakMap;var ca,Zs,Ll;class p8 extends QO{constructor(n,i,r){super(n,i,r);ue(this,"directive","EQU");Ee(this,ca,"not-processed");Ee(this,Zs,null);Ee(this,Ll,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,Ll)??((n=A(this,Zs))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Zs))throw new Error("Constant already validated");if(!this.label)throw new ae("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ae("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ae("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ae("cannot-be-unassinged","EQU").at(n);J(this,Zs,n.value)}evaluateExpressions(n){if(!A(this,Zs))throw new Error("Constant not validated");if(A(this,ca)==="processed")return A(this,Ll);if(A(this,ca)==="processing")throw new ae("circular-reference").at(this.position);J(this,ca,"processed");const i=A(this,Zs).evaluate(n);return J(this,ca,"processed"),J(this,Ll,i),i}evaluate(n){return this.evaluateExpressions(n)}}ca=new WeakMap,Zs=new WeakMap,Ll=new WeakMap;const Qu=Symbol("unassigned");var Dn,Wi;class m8 extends QO{constructor(n,i,r,s){super(i,r,s);ue(this,"size");Ee(this,Dn,null);Ee(this,Wi,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Dn))throw new Error("Data directive not validated");return A(this,Dn).length*(this.size/8)}getValues(){if(!A(this,Wi))throw new Error("Data directive not evaluated");return A(this,Wi)}toJSON(){return{...super.toJSON(),values:(A(this,Wi)??A(this,Dn)??this.values).map(n=>n===Qu?"?":n.toJSON())}}validate(){if(A(this,Dn))throw new Error("Data directive already validated");J(this,Dn,[]);for(const n of this.values)if(n.isUnassigned())A(this,Dn).push(Qu);else if(n.isString()){if(this.directive!=="DB")throw new ae("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=tO(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new Xt(n.position.start+r,n.position.start+r+1),a=nn.numberLiteral(s,o);A(this,Dn).push(a)}}else A(this,Dn).push(n.value);if(A(this,Dn).length===0)throw new ae("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Dn))throw new Error("Data directive not validated");if(A(this,Wi))throw new Error("Data directive already evaluated");J(this,Wi,[]);const i=vp(A(this,Dn),r=>{if(r===Qu)A(this,Wi).push(Qu);else{const s=r.evaluate(n);if(!L.fits(s,this.size))throw new ae("value-out-of-range",s,this.size).at(this);const o=L.fromNumber(s,this.size);A(this,Wi).push(o)}},ae.from);return i.length>0&&J(this,Wi,null),i}}Dn=new WeakMap,Wi=new WeakMap;class Bb{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class g8 extends Bb{constructor(n,i){super(i);ue(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class y8 extends Bb{constructor(n){super(n);ue(this,"type","unassigned")}}class v8 extends Bb{constructor(n){super(n.position);ue(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function w8(t,e,n){const i=Xt.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new m8(t.type,e,n,i);case"EQU":return new p8(e,n,i)}}class b8 extends Nm{constructor(n){super(n);ue(this,"type","end")}}function Jo(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var Qr;class za extends Nm{constructor(n,i,r){super(r);ue(this,"type","instruction");ue(this,"label");ue(this,"operands");Ee(this,Qr,null);this.operands=n,this.label=i}get start(){if(A(this,Qr)===null)throw new Error("Start not set");return A(this,Qr)}setStart(n){if(A(this,Qr)!==null)throw new Error("Start already set");J(this,Qr,n)}toJSON(){return{...super.toJSON(),...A(this,Qr)?{start:A(this,Qr).toJSON()}:{},instruction:this.instruction,label:this.label}}}Qr=new WeakMap;var hn,xi;class x8 extends za{constructor(n,i,r,s){super(i,r,s);Ee(this,hn,null);Ee(this,xi,null);this.instruction=n}get length(){if(!A(this,hn))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,hn);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,xi))throw new Error("Instruction not evaluated");return A(this,xi)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=Jo(s)<<3,o[1]|=Jo(r)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=Jo(r)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=Jo(r)<<0,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}case"mem<-reg":{r.mode==="direct"?(o[1]=192,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=208,o[1]|=Jo(s)<<0;break}case"mem<-imd":{r.mode==="direct"?(o[1]=200,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,xi)??A(this,hn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,hn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ae("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new ae("size-mismatch",r.size,i.size).at(this);J(this,hn,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ae("size-mismatch",r.size,i.size).at(this);J(this,hn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ae("size-mismatch",r.size,i.size).at(this);J(this,hn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}if(r.value.isLabel()){const s=r.isDataDirectiveLabel(n);if(s){if(s!==i.size)throw new ae("size-mismatch",s,i.size).at(this);J(this,hn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:nn.label(r.value.value,!0,r.value.position)}});return}}J(this,hn,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else if(i.value.isLabel()){if(s=i.isDataDirectiveLabel(n)||"auto",s==="auto")throw new ae("label-should-be-writable",i.value.value).at(i);o={mode:"direct",address:nn.label(i.value.value,!0,i.value.position)}}else throw new ae("destination-cannot-be-immediate").at(i);if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new ae("size-mismatch",s,r.size).at(this);J(this,hn,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.isDataDirectiveLabel(n))throw new ae("double-memory-access").at(this);if(s==="auto")throw new ae("unknown-size").at(i);J(this,hn,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new ae("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,hn))throw new Error("Instruction not validated");if(A(this,xi))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,hn),a=l=>{const u=l.evaluate(n);if(!Oe.inRange(u))throw new ae("address-out-of-range",u).at(l);const c=Oe.from(u);if(n.addressIsReserved(c))throw new ae("address-has-code",c).at(l);return c};switch(i){case"reg<-reg":{J(this,xi,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{J(this,xi,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!L.fits(l,r))throw new ae("value-out-of-range",l,r).at(o);const u=L.fromNumber(l,r);J(this,xi,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{J(this,xi,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!L.fits(l,r))throw new ae("value-out-of-range",l,r).at(o);const u=L.fromNumber(l,r);J(this,xi,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}hn=new WeakMap,xi=new WeakMap;var Er,es;class S8 extends za{constructor(n,i,r,s){super(i,r,s);Ee(this,Er,null);Ee(this,es,null);ue(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,es))throw new Error("Instruction not evaluated");return A(this,es)}toJSON(){return{...super.toJSON(),...A(this,es)?{value:A(this,es).toJSON()}:A(this,Er)?{initialValue:A(this,Er).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Er))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ae("expects-immediate").at(n);J(this,Er,n.value)}evaluateExpressions(n){if(!A(this,Er))throw new Error("Instruction not validated");if(A(this,es))throw new Error("Instruction aready evaluated");const i=A(this,Er).evaluate(n);if(!L.fitsUnsigned(i,8))throw new ae("invalid-interrupt",i).at(A(this,Er));J(this,es,L.fromUnsigned(i,8))}}Er=new WeakMap,es=new WeakMap;var Gi,ts,WC;let k8=(WC=class extends za{constructor(n,i,r,s){super(i,r,s);Ee(this,Gi,null);Ee(this,ts,null);this.instruction=n}get length(){if(!A(this,Gi))throw new Error("Instruction not validated");return A(this,Gi).port==="fixed"?2:1}toBytes(){const n=[],i={IN:80,OUT:84};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,ts)===null)throw new Error("Operation not set");return A(this,ts)}toJSON(){return{...super.toJSON(),...A(this,ts)??A(this,Gi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Gi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ae("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ae("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new ae("expects-dx").at(i);J(this,Gi,{port:"variable",size:r});return}if(i.isNumberExpression()){J(this,Gi,{port:"fixed",size:r,address:i.value});return}throw new ae("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,Gi))throw new Error("Instruction not validated");if(A(this,ts))throw new Error("Instruction aready evaluated");const i=A(this,Gi);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Zn.inRange(r))throw new ae("io-address-out-of-range",r).at(this);const s=Zn.from(r);J(this,ts,{port:"fixed",size:i.size,address:s})}else J(this,ts,{port:"variable",size:i.size})}},Gi=new WeakMap,ts=new WeakMap,WC);var ns,is,GC;let E8=(GC=class extends za{constructor(n,i,r,s){super(i,r,s);Ee(this,ns,null);Ee(this,is,null);ue(this,"length",3);this.instruction=n}toBytes(){const n=[],i={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(A(this,is)===null)throw new Error("Instruction not evaluated");return A(this,is)}toJSON(){return{...super.toJSON(),...A(this,is)?{address:A(this,is).toJSON()}:A(this,ns)?{jumpTo:A(this,ns)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,ns))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new ae("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new ae("label-not-found",r).at(i);if(s!=="instruction")throw new ae("label-should-be-an-instruction",r).at(i);J(this,ns,r)}evaluateExpressions(n){if(!A(this,ns))throw new Error("Instruction not validated");if(A(this,is))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(A(this,ns));if(!Oe.inRange(i))throw new ae("address-out-of-range",i).at(this);J(this,is,Oe.from(i))}},ns=new WeakMap,is=new WeakMap,GC);var Cr,KC;let C8=(KC=class extends za{constructor(n,i,r,s){super(i,r,s);Ee(this,Cr,null);ue(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:96,POP:104}[this.instruction];return i|=Jo(this.register),new Uint8Array([i])}get register(){if(!A(this,Cr))throw new Error("Instruction not evaluated");return A(this,Cr)}toJSON(){return{...super.toJSON(),...A(this,Cr)?{register:A(this,Cr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Cr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new ae("expects-word-register").at(n);J(this,Cr,n.value)}evaluateExpressions(){if(!A(this,Cr))throw new Error("Instruction not validated")}},Cr=new WeakMap,KC);var ti,Ar;class A8 extends za{constructor(n,i,r,s){super(i,r,s);Ee(this,ti,null);Ee(this,Ar,null);this.instruction=n}get length(){if(!A(this,ti))throw new Error("Instruction not validated");const{mode:n}=A(this,ti);let i=2;return n==="mem-direct"&&(i+=2),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=Jo(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Ar))throw new Error("Instruction not evaluated");return A(this,Ar)}toJSON(){return{...super.toJSON(),...A(this,Ar)??A(this,ti)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,ti))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){J(this,ti,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new ae("unknown-size").at(i);J(this,ti,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new ae("unknown-size").at(i);J(this,ti,{mode:"mem-indirect",size:i.size});return}if(i.value.isLabel()){const r=i.isDataDirectiveLabel(n);if(r){J(this,ti,{mode:"mem-direct",size:r,address:nn.label(i.value.value,!0,i.value.position)});return}}throw new ae("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,ti))throw new Error("Instruction not validated");if(A(this,Ar))throw new Error("Instruction aready evaluated");const i=A(this,ti);switch(i.mode){case"reg":{J(this,Ar,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Oe.inRange(r))throw new ae("address-out-of-range",r).at(i.address);const s=Oe.from(r);if(n.addressIsReserved(s))throw new ae("address-has-code",s).at(i.address);J(this,Ar,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{J(this,Ar,{mode:"mem-indirect",size:i.size});return}default:return i}}}ti=new WeakMap,Ar=new WeakMap;var Bl;class P8 extends za{constructor(n,i,r,s){super(i,r,s);Ee(this,Bl,!1);ue(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,Bl))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ae("expects-no-operands").at(this);J(this,Bl,!0)}evaluateExpressions(){if(!A(this,Bl))throw new Error("Instruction not validated")}}Bl=new WeakMap;class Tm{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class O8 extends Tm{constructor(n){super(n.position);ue(this,"type","register");ue(this,"value");this.value=n.type}get size(){return qO.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class M8 extends Tm{constructor(n,i){super(i);ue(this,"type","indirect-address");ue(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class $8 extends Tm{constructor(n,i,r){super(r);ue(this,"type","direct-address");ue(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class R8 extends Tm{constructor(n){super(n.position);ue(this,"type","number-expression");this.value=n}isDataDirectiveLabel(n){if(!this.value.isLabel())return!1;const i=this.value;if(i.offset)return!1;if(!n.labelExists(i.value))throw new ae("label-not-found",i.value).at(this.position);const r=n.getLabelType(i.value);return r==="DB"?8:r==="DW"?16:!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function nk(t,e,n){const i=Xt.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new P8(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new x8(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new A8(t.type,e,n,i);case"PUSH":case"POP":return new C8(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new E8(t.type,e,n,i);case"IN":case"OUT":return new k8(t.type,e,n,i);case"INT":return new S8(t.type,e,n,i)}}class N8 extends Nm{constructor(n,i){super(i);ue(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let T8=class{constructor(e){ue(this,"tokens");ue(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ae("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ae("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new N8(i,Xt.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ae("end-must-be-the-last-statement").at(e);return new b8(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...Ib);if(e&&!n)throw new ae("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),w8(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new g8(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new y8(e.position)}return new v8(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...Lb);if(e&&!n){const s=this.peek();throw new ae("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return nk(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),nk(n,r,i)}instructionOperand(){if(this.match(...wp)){const n=this.previous();return new O8(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ae("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...wp)){this.consume("BX",new ae("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new ae("parser.expected-literal-after-literal","]","BX"));return new M8(e==null?void 0:e.type,Xt.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new ae("parser.expected-literal-after-expression","]"));return new $8(i,e==null?void 0:e.type,Xt.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new ae("parser.expected-literal-after-literal","[","PTR");return new R8(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new ae("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ae("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return nn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new ae("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ae("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ae("parser.expected-argument").at(this.peek());return nn.label(n.lexeme.toUpperCase(),e!==null,Xt.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ae("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return nn.unaryOperation(e.type==="PLUS"?"+":"-",n,Xt.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=nn.binaryOperation(e,"*",n,Xt.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=nn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,Xt.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function eM(t){try{const n=new u8(t).scanTokens(),r=new T8(n).parse(),s=r.at(-1);if(!s)throw new ae("empty-program");if(!s.isEnd())throw new ae("end-must-be-the-last-statement").at(s);let o=[];const a=new s8;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=vp(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},ae.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=vp(r,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},ae.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u}}catch(e){return{success:!1,errors:[ae.from(e)]}}}class mr{constructor(e){ue(this,"computer");this.computer=e.computer}}const _8=Oe.from(Oe.MAX_ADDRESS).toString(),D8={"address-has-instruction":t=>`Memory address ${Oe.format(t)} has an instruction, and cannot be read nor written.`,"address-out-of-range":t=>`Memory address ${Oe.format(t)} is out of range (max memory address: ${_8}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-implemented":t=>`I/O memory address ${Zn.format(t)} has no implementation.`,"no-instruction":t=>`Expected instruction at memory address ${Oe.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},I8=Oe.from(Oe.MAX_ADDRESS).toString(),L8={"address-has-instruction":t=>`La dirección de memoria ${t} tiene una instrucción, y no se puede leer ni escribir.`,"address-out-of-range":t=>`La dirección de memoria ${Oe.format(t)} está fuera de rango (dirección máxima de memoria: ${I8}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-implemented":t=>`La dirección de memoria E/S ${Zn.format(t)} no está implementada.`,"no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${t} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},B8=gb({en:D8,es:L8});class Lt extends Error{constructor(n,...i){super();ue(this,"code");ue(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return B8(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Lt?n:new Lt("unexpected-error",n)}}class As{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const r=e.cpu.getRegister("IP").toString("hex");throw new Lt("unexpected-error",`Could not read instruction byte at address ${r}h`)}yield*e.cpu.updateWordRegister("IP",r=>r.add(1)),yield*e.cpu.getMBR(n)}}var Qp,tM;class z8 extends As{constructor(){super(...arguments);Ee(this,Qp)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:nt(this,Qp,tM).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=L.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>L.maxValue(r)?(c.CF=!0,u=L.fromUnsigned(h-L.maxValue(r)-1,r)):(c.CF=!1,u=L.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=L.fromUnsigned(h+L.maxValue(r)+1,r)):(c.CF=!1,u=L.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Qp=new WeakSet,tM=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};var em,nM;class j8 extends As{constructor(){super(...arguments);Ee(this,em)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:nt(this,em,nM).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=L.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=L.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===L.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",L.fromSigned(1,16));const o=i.unsigned+1;o>L.maxValue(this.operation.size)?(s.CF=!0,r=L.fromUnsigned(o-L.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=L.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",L.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=L.fromUnsigned(o+L.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=L.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}em=new WeakSet,nM=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class F8 extends As{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var tm,iM;class U8 extends As{constructor(){super(...arguments);Ee(this,tm)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:nt(this,tm,iM).call(this),willUse:{ri:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",L.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Lt("io-memory-not-implemented",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Lt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Lt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}tm=new WeakSet,iM=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class V8 extends As{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class H8 extends As{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function qo(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function W8(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var nm,rM;class G8 extends As{constructor(){super(...arguments);Ee(this,nm)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:nt(this,nm,rM).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd",id:i==="reg<-mem"||i==="reg<-imd"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return r===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[a,l]=W8(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(!(yield*n.cpu.useBus("mem-write"))||l&&(yield*n.cpu.updateWordRegister("ri",u=>u.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}nm=new WeakSet,rM=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};class K8 extends As{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class X8 extends As{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function Z8(t){switch(t.instruction){case"MOV":return new G8(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new z8(t);case"NOT":case"NEG":case"INC":case"DEC":return new j8(t);case"IN":case"OUT":return new U8(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new X8(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new V8(t);case"RET":case"IRET":return new K8(t);case"INT":return new F8(t);case"CLI":case"STI":case"NOP":case"HLT":return new H8(t)}}const pl={0:32768,3:32771,6:32774,7:32775};function Y8(t){return Object.values(pl).includes(t.unsigned)}function*J8(t,e){switch(e.unsigned){case pl[0]:return yield{type:"cpu:int.0"},!1;case pl[3]:return yield{type:"cpu:int.3"},!0;case pl[6]:{yield*t.cpu.copyWordRegister("BX","ri");const n=yield*t.io.keyboard.readChar();if(yield*t.cpu.updateWordRegister("id",n.withHigh(L.zero(8))),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("id.l"),!(yield*t.cpu.useBus("mem-write")))return!1;break}case pl[7]:{if(yield*t.cpu.copyWordRegister("AX","id"),!(yield*t.cpu.pushToStack())||(yield*t.cpu.copyWordRegister("BX","id"),!(yield*t.cpu.pushToStack())))return!1;yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",L.zero(8));const n=t.cpu.getRegister("AL");for(yield*t.cpu.aluExecute("SUB",n,{CF:!1,OF:!1,SF:n.signed<0,ZF:n.isZero()});!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read")))return!1;yield*t.cpu.getMBR("id.l");const i=t.cpu.getRegister("id.l");yield*t.io.screen.sendChar(i),yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",L.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",L.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===L.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","BX"),!(yield*t.cpu.popFromStack())))return!1;yield*t.cpu.copyWordRegister("id","AX");break}default:throw new Error("Invalid interrupt number")}return!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","IP"),!(yield*t.cpu.popFromStack()))?!1:(yield*t.cpu.copyWordRegister("id","FLAGS"),!0)}var zl,Le,ni,bn,Ys,Qa,In,bi,XC;let q8=(XC=class extends mr{constructor(n){super(n);Ee(this,Ys);Ee(this,In);Ee(this,zl,void 0);Ee(this,Le,void 0);Ee(this,ni,void 0);Ee(this,bn,void 0);n.data==="unchanged"?(J(this,Le,A(n.previous.cpu,Le)),J(this,ni,A(n.previous.cpu,ni)),J(this,bn,A(n.previous.cpu,bn))):n.data==="randomize"?(J(this,Le,{AX:L.random(16),BX:L.random(16),CX:L.random(16),DX:L.random(16),SP:L.random(16),IP:L.random(16),IR:L.random(8),ri:L.random(16),id:L.random(16),left:L.random(16),right:L.random(16),result:L.random(16),FLAGS:L.random(16)}),J(this,ni,L.random(16)),J(this,bn,L.random(8))):(J(this,Le,{AX:L.zero(16),BX:L.zero(16),CX:L.zero(16),DX:L.zero(16),SP:L.zero(16),IP:L.zero(16),IR:L.zero(8),ri:L.zero(16),id:L.zero(16),left:L.zero(16),right:L.zero(16),result:L.zero(16),FLAGS:L.zero(16)}),J(this,ni,L.zero(16)),J(this,bn,L.zero(8))),A(this,Le).SP=L.fromUnsigned(Oe.MAX_ADDRESS+1,16),A(this,Le).IP=L.fromUnsigned(8192,16),nt(this,In,bi).call(this,"IF",!0),J(this,zl,new Map);for(const i of n.program.instructions){const r=Z8(i);A(this,zl).set(r.start.value,r)}}*run(){for(;;){const n=A(this,Le).IP;if(Y8(n)){if(!(yield*J8(this.computer,n)))return}else{const i=A(this,zl).get(n.unsigned);if(!i){yield{type:"cpu:error",error:new Lt("no-instruction",A(this,Le).IP)};return}if(!(yield*i.execute(this.computer)))return}if(this.getFlag("IF")&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const i=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",L.zero(8)),yield*this.startInterrupt(i)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;let i=L.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),i=i.add(1),yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(A(this,Le)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,ni).toJSON(),MBR:A(this,bn).toJSON()}}getRegister(n){const[i,r]=qo(n);return r==="low"?A(this,Le)[i].low:r==="high"?A(this,Le)[i].high:A(this,Le)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);nt(this,Ys,Qa).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);nt(this,Ys,Qa).call(this,i,r),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,nt(this,Ys,Qa).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,nt(this,Ys,Qa).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,Le).FLAGS.bit(0);case"ZF":return A(this,Le).FLAGS.bit(6);case"SF":return A(this,Le).FLAGS.bit(7);case"IF":return A(this,Le).FLAGS.bit(9);case"OF":return A(this,Le).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&nt(this,In,bi).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&nt(this,In,bi).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&nt(this,In,bi).call(this,"SF",n.SF),typeof n.IF=="boolean"&&nt(this,In,bi).call(this,"IF",n.IF),typeof n.OF=="boolean"&&nt(this,In,bi).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,Le).FLAGS}}*aluExecute(n,i,r){A(this,Le).result=i.is8bits()?A(this,Le).result.withLow(i):i,typeof r.CF=="boolean"&&nt(this,In,bi).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&nt(this,In,bi).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&nt(this,In,bi).call(this,"SF",r.SF),typeof r.IF=="boolean"&&nt(this,In,bi).call(this,"IF",r.IF),typeof r.OF=="boolean"&&nt(this,In,bi).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,Le).result,flags:A(this,Le).FLAGS}}*setMAR(n){const i=this.getRegister(n);J(this,ni,i),yield{type:"cpu:mar.set",register:n}}*getMBR(n){nt(this,Ys,Qa).call(this,n,A(this,bn)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);J(this,bn,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,ni));return i?(J(this,bn,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,ni),A(this,bn)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,ni).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(J(this,bn,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,ni).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,bn))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{const i=yield*this.computer.io.pic.handleINTR();return J(this,bn,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return Oe.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?Oe.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new Lt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new Lt("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return Oe.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),Oe.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new Lt("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new Lt("stack-underflow")},!1)}},zl=new WeakMap,Le=new WeakMap,ni=new WeakMap,bn=new WeakMap,Ys=new WeakSet,Qa=function(n,i){const[r,s]=qo(n);if(s===null){if(A(this,Le)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,Le)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,Le)[r]=A(this,Le)[r].withLow(i):A(this,Le)[r]=A(this,Le)[r].withHigh(i)}},In=new WeakSet,bi=function(n,i){switch(n){case"CF":A(this,Le).FLAGS=A(this,Le).FLAGS.withBit(0,i);return;case"ZF":A(this,Le).FLAGS=A(this,Le).FLAGS.withBit(6,i);return;case"SF":A(this,Le).FLAGS=A(this,Le).FLAGS.withBit(7,i);return;case"IF":A(this,Le).FLAGS=A(this,Le).FLAGS.withBit(9,i);return;case"OF":A(this,Le).FLAGS=A(this,Le).FLAGS.withBit(11,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},XC),Q8=class extends mr{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}},eB=class extends mr{*press(){yield{type:"f10:press"},yield*this.computer.io.pic.interrupt(0)}toJSON(){return null}};var jl,ZC;let tB=(ZC=class extends mr{constructor(){super(...arguments);Ee(this,jl,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,jl);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},J(this,jl,null),n}setLastCharRead(n){J(this,jl,n)}toJSON(){return null}},jl=new WeakMap,ZC);var ii,YC;let nB=(YC=class extends mr{constructor(n){super(n);Ee(this,ii,void 0);n.data==="unchanged"?J(this,ii,A(n.previous.io.screen,ii)):J(this,ii,"")}clear(){return this.sendChar(L.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:J(this,ii,A(this,ii).slice(0,-1));break;case 10:J(this,ii,A(this,ii)+`
`);break;case 12:J(this,ii,"");break;default:J(this,ii,A(this,ii)+yb(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,ii)}}toJSON(){return A(this,ii)}},ii=new WeakMap,YC);class _m extends mr{}var _r,rs,Ln,xn,Ki,Fl,pf,Ul,mf;let iB=(_r=class extends _m{constructor(n){super(n);Ee(this,Fl);Ee(this,Ul);Ee(this,rs,void 0);Ee(this,Ln,void 0);Ee(this,xn,void 0);Ee(this,Ki,void 0);J(this,rs,L.fromUnsigned(255,8)),J(this,Ln,L.fromUnsigned(0,8)),J(this,xn,L.fromUnsigned(0,8)),n.data==="unchanged"?J(this,Ki,A(n.previous.io.pic,Ki)):n.data==="randomize"?J(this,Ki,new Array(_r.LINES).fill(L.zero(8)).map(()=>L.random(8))):J(this,Ki,new Array(_r.LINES).fill(L.zero(8)))}chipSelect(n){const r=4+_r.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=L.zero(8);else if(n==="IMR")i=A(this,rs);else if(n==="IRR")i=A(this,Ln);else if(n==="ISR")i=A(this,xn);else{const r=Number(n.slice(3));i=A(this,Ki)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,xn).isZero()||(yield{type:"pic:intr.off"},J(this,xn,L.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,xn)},yield*nt(this,Ul,mf).call(this));else if(n==="IMR")J(this,rs,i),yield{type:"pic:register.update",register:"IMR",value:A(this,rs)},yield*nt(this,Ul,mf).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,Ki)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=_r.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Ln).bit(n)||(J(this,Ln,A(this,Ln).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ln)},yield*nt(this,Ul,mf).call(this))}isINTRActive(){return A(this,xn).isZero()&&nt(this,Fl,pf).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,xn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=nt(this,Fl,pf).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");J(this,xn,A(this,xn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,xn)},J(this,Ln,A(this,Ln).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ln)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,Ki)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,rs).toJSON(),IRR:A(this,Ln).toJSON(),ISR:A(this,xn).toJSON(),lines:A(this,Ki).map(n=>n.toJSON())}}},rs=new WeakMap,Ln=new WeakMap,xn=new WeakMap,Ki=new WeakMap,Fl=new WeakSet,pf=function(){for(let n=0;n<_r.LINES;n++)if(A(this,Ln).bit(n)&&!A(this,rs).bit(n))return n;return null},Ul=new WeakSet,mf=function*(){A(this,xn).isZero()&&nt(this,Fl,pf).call(this)!==null&&(yield{type:"pic:intr.on"})},ue(_r,"LINES",8),_r);var Pr,Js,JC;let rB=(JC=class extends _m{constructor(n){super(n);Ee(this,Pr,void 0);Ee(this,Js,void 0);J(this,Pr,L.zero(8)),J(this,Js,L.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Pr);else if(n==="COMP")i=A(this,Js);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")J(this,Pr,i);else if(n==="COMP")J(this,Js,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Pr).unsigned===L.maxValue(8)?L.zero(8):A(this,Pr).add(1);J(this,Pr,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,Js).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Pr).toJSON(),COMP:A(this,Js).toJSON()}}},Pr=new WeakMap,Js=new WeakMap,JC);class Dm extends mr{constructor(n){super(n);ue(this,"clock");ue(this,"f10");ue(this,"keyboard");ue(this,"screen");ue(this,"pic");ue(this,"timer");this.clock=new Q8(n),this.f10=new eB(n),this.keyboard=new tB(n),this.screen=new nB(n),this.pic=new iB(n),this.timer=new rB(n)}*chipSelect(n){const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const r=this.timer.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:r}):(yield{type:"bus:io.error",error:new Lt("io-memory-not-implemented",n)},null)}*read(n){const{chip:i,register:r}=n;return i==="pic"?yield*this.pic.read(r):i==="timer"?yield*this.timer.read(r):(yield{type:"bus:io.error",error:new Lt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return r==="pic"?(yield*this.pic.write(s,i),!0):r==="timer"?(yield*this.timer.write(s,i),!0):(yield{type:"bus:io.error",error:new Lt("device-not-connected",r)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),screen:this.screen.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}}ue(Dm,"SIZE",Zn.MAX_ADDRESS+1);var Or,Sn,qC;let sB=(qC=class extends _m{constructor(n){super(n);Ee(this,Or,void 0);Ee(this,Sn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?J(this,Or,L.zero(8)):n.data==="randomize"?J(this,Or,L.random(8)):J(this,Or,L.zero(8)),J(this,Sn,L.zero(8))}get interrupts(){return A(this,Sn).bit(7)}get DATA(){return A(this,Or)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Or);else if(n==="STATE")i=A(this,Sn);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")J(this,Or,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.computer.io.printer.busy),J(this,Sn,i),yield{type:"handshake:register.update",register:n,value:i},A(this,Sn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),J(this,Sn,A(this,Sn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,Sn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){J(this,Sn,A(this,Sn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,Sn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Or).toJSON(),STATE:A(this,Sn).toJSON()}}},Or=new WeakMap,Sn=new WeakMap,qC);var Si,ss,qs;const Ec=class Ec extends mr{constructor(n){super(n);Ee(this,Si,void 0);Ee(this,ss,void 0);Ee(this,qs,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(J(this,Si,A(n.previous.io.printer,Si)),J(this,ss,A(n.previous.io.printer,ss)),J(this,qs,A(n.previous.io.printer,qs))):(J(this,Si,[]),J(this,ss,""),J(this,qs,!1))}get busy(){return A(this,Si).length>=Ec.BUFFER_SIZE}*setStrobe(n){const i=A(this,qs);if(i===n)return;if(J(this,qs,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,Si).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){J(this,ss,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,Si).length===0)return;const[n,...i]=A(this,Si);if(J(this,Si,i),yield{type:"printer:buffer.pop",char:n},i.length===Ec.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=yb(n.unsigned);J(this,ss,A(this,ss)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:A(this,ss),buffer:[...A(this,Si).map(n=>n.unsigned)]}}};Si=new WeakMap,ss=new WeakMap,qs=new WeakMap,ue(Ec,"BUFFER_SIZE",5);let bp=Ec,oB=class extends bp{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}},aB=class extends Dm{constructor(n){super(n);ue(this,"printer");ue(this,"handshake");this.printer=new oB(n),this.handshake=new sB(n)}*chipSelect(n){const i=this.handshake.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="handshake"?yield*this.handshake.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="handshake"?(yield*this.handshake.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),handshake:this.handshake.toJSON()}}};class sM extends _m{constructor(n){super(n);ue(this,"PA");ue(this,"PB");ue(this,"CA");ue(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=L.random(8),this.PB=L.random(8),this.CA=L.random(8),this.CB=L.random(8)):(this.PA=L.zero(8),this.PB=L.zero(8),this.CA=L.zero(8),this.CB=L.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let lB=class extends sM{readData(){const e=this.PB.unsigned&~this.CB.unsigned;return L.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.computer.io.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=L.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1)))}},uB=class extends bp{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}};class cB extends Dm{constructor(n){super(n);ue(this,"printer");ue(this,"pio");this.printer=new uB(n),this.pio=new lB(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),pio:this.pio.toJSON()}}}var os,QC;let dB=(QC=class extends mr{constructor(n){super(n);Ee(this,os,void 0);n.data==="unchanged"&&"leds"in n.previous.io?J(this,os,A(n.previous.io.leds,os)):n.data==="randomize"?J(this,os,L.random(8)):J(this,os,L.zero(8))}get state(){return A(this,os)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,os).toJSON()}},os=new WeakMap,QC),hB=class extends sM{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=L.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.computer.io.leds.update(L.fromUnsigned(n,8))}}};var ki,e2;let fB=(e2=class extends mr{constructor(n){super(n);Ee(this,ki,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?J(this,ki,A(n.previous.io.switches,ki)):n.data==="randomize"?J(this,ki,L.random(8)):J(this,ki,L.zero(8))}get state(){return A(this,ki)}*toggle(n){J(this,ki,A(this,ki).withBit(n,!A(this,ki).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return A(this,ki).toJSON()}},ki=new WeakMap,e2);class pB extends Dm{constructor(n){super(n);ue(this,"leds");ue(this,"switches");ue(this,"pio");this.leds=new dB(n),this.switches=new fB(n),this.pio=new hB(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),leds:this.leds.toJSON(),switches:this.switches.toJSON(),pio:this.pio.toJSON()}}}var ga,ri,Vl;let mB=(ga=class extends mr{constructor(n){super(n);Ee(this,ri,void 0);Ee(this,Vl,void 0);n.data==="unchanged"?J(this,ri,A(n.previous.memory,ri)):n.data==="randomize"?J(this,ri,new Uint8Array(ga.SIZE).map(()=>L.random(8).unsigned)):J(this,ri,new Uint8Array(ga.SIZE));for(const[i,r]of Object.entries(pl)){const s=L.fromUnsigned(r,16);A(this,ri).set(s.toUint8Array(),Number(i)*4)}for(const i of n.program.data){let r=i.start.value;for(const s of i.getValues())s!==Qu&&A(this,ri).set(s.toUint8Array(),r),r+=i.size/8}J(this,Vl,new Set);for(const i of n.program.instructions){A(this,ri).set(i.toBytes(),i.start.value);for(let r=0;r<i.length;r++)A(this,Vl).add(i.start.value+r)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Oe.inRange(n))return yield{type:"memory:read.error",error:new Lt("address-out-of-range",n)},null;const i=L.fromUnsigned(A(this,ri).at(n),8);return yield{type:"memory:read.ok",value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Oe.inRange(n)?A(this,Vl).has(n)?(yield{type:"memory:write.error",error:new Lt("address-has-instruction",n)},!1):(A(this,ri).set([i.unsigned],n),yield{type:"memory:write.ok"},!0):(yield{type:"memory:write.error",error:new Lt("address-out-of-range",n)},!1)}toJSON(){return[...A(this,ri)]}},ri=new WeakMap,Vl=new WeakMap,ue(ga,"SIZE",Oe.MAX_ADDRESS+1),ga);class ik{constructor(e){ue(this,"cpu");ue(this,"memory");ue(this,"io");const n={computer:this,...e};switch(this.cpu=new q8(n),this.memory=new mB(n),e.devices){case"pio-switches-and-leds":{this.io=new pB(n);break}case"pio-printer":{this.io=new cB(n);break}case"handshake":{this.io=new aB(n);break}default:throw new Error("Invalid devices configuration")}}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var Nt;class gB{constructor(){Ee(this,Nt,new ik({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){J(this,Nt,new ik({...e,previous:A(this,Nt)}))}getComputerState(){var e;return((e=A(this,Nt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,Nt))throw new Lt("no-program");return A(this,Nt).cpu.run()}get devices(){if(!A(this,Nt))throw new Error("No computer loaded!");return{clock:{tick:()=>A(this,Nt).io.clock.tick()},f10:{press:()=>A(this,Nt).io.f10.press()},keyboard:{readChar:e=>A(this,Nt).io.keyboard.setLastCharRead(e)},printer:{connected:()=>"printer"in A(this,Nt).io,clear:()=>{if("printer"in A(this,Nt).io)return A(this,Nt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in A(this,Nt).io)return A(this,Nt).io.printer.print();console.warn("No printer connected to the computer!")}},screen:{clear:()=>A(this,Nt).io.screen.clear()},switches:{connected:()=>"switches"in A(this,Nt).io,toggle:e=>{if("switches"in A(this,Nt).io)return A(this,Nt).io.switches.toggle(e);console.warn("No switches connected to the computer!")}}}}}Nt=new WeakMap;class Ye{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Rr.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let i=[];return this.decompose(e,n,i,0),Rr.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new gc(this),s=new gc(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new gc(this,e)}iterRange(e,n=this.length){return new oM(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new aM(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ye.empty:e.length<=32?new Tt(e):Rr.from(Tt.split(e,[]))}}class Tt extends Ye{constructor(e,n=yB(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new vB(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new Tt(rk(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=gf(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Tt(a,o.length+s.length));else{let l=a.length>>1;i.push(new Tt(a.slice(0,l)),new Tt(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof Tt))return super.replace(e,n,i);let r=gf(this.text,gf(i.text,rk(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new Tt(r,s):Rr.from(Tt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new Tt(i,r)),i=[],r=-1);return r>-1&&n.push(new Tt(i,r)),n}}class Rr extends Ye{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?i.push(a):a.decompose(e-o,n-o,i,u)}o=l+1}}replace(e,n,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),u=this.lines-o.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[r]=l,new Rr(c,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Rr))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],u=e.children[s];if(l!=u)return i+l.scanIdentical(u,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new Tt(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof Rr)for(let g of f.children)d(g);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Tt&&l&&(p=c[c.length-1])instanceof Tt&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Tt(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:Rr.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new Rr(a,n)}}Ye.empty=new Tt([""],0);function yB(t){let e=-1;for(let n of t)e+=n.length+1;return e}function gf(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function rk(t,e,n){return gf(t,[""],e,n)}class gc{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Tt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Tt?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Tt){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Tt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class oM{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new gc(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class aM{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ye.prototype[Symbol.iterator]=function(){return this.iter()},gc.prototype[Symbol.iterator]=oM.prototype[Symbol.iterator]=aM.prototype[Symbol.iterator]=function(){return this});class vB{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}let Ol="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Ol.length;t++)Ol[t]+=Ol[t-1];function wB(t){for(let e=1;e<Ol.length;e+=2)if(Ol[e]>t)return Ol[e-1]<=t;return!1}function sk(t){return t>=127462&&t<=127487}const ok=8205;function mn(t,e,n=!0,i=!0){return(n?lM:bB)(t,e,i)}function lM(t,e,n){if(e==t.length)return e;e&&uM(t.charCodeAt(e))&&cM(t.charCodeAt(e-1))&&e--;let i=En(t,e);for(e+=Ji(i);e<t.length;){let r=En(t,e);if(i==ok||r==ok||n&&wB(r))e+=Ji(r),i=r;else if(sk(r)){let s=0,o=e-2;for(;o>=0&&sk(En(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function bB(t,e,n){for(;e>0;){let i=lM(t,e-2,n);if(i<e)return i;e--}return 0}function uM(t){return t>=56320&&t<57344}function cM(t){return t>=55296&&t<56320}function En(t,e){let n=t.charCodeAt(e);if(!cM(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return uM(i)?(n-55296<<10)+(i-56320)+65536:n}function zb(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Ji(t){return t<65536?1:2}const dv=/\r\n?|\n/;var Fn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Fn||(Fn={}));class Br{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){hv(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Br(e)}composeDesc(e){return this.empty?e:e.empty?this:dM(this,e)}mapDesc(e,n=!1){return e.empty?this:fv(this,e,n)}mapPos(e,n=-1,i=Fn.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=r+a;if(l<0){if(u>e)return s+(e-r);s+=a}else{if(i!=Fn.Simple&&u>=e&&(i==Fn.TrackDel&&r<e&&u>e||i==Fn.TrackBefore&&r<e||i==Fn.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Br(e)}static create(e){return new Br(e)}}class Ft extends Br{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return hv(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return fv(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(Ye.empty);i.push(o?e.slice(s,s+o):Ye.empty)}s+=o}return new Ft(n,i)}compose(e){return this.empty?e:e.empty?this:dM(this,e,!0)}map(e,n=!1){return e.empty?this:fv(this,e,n,!0)}iterChanges(e,n=!1){hv(this,e,n)}get desc(){return Br.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new od(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);fn(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;fn(n,c,d),d>0&&to(i,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);fn(n,c,-1),fn(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new Ft(n,i),filtered:Br.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!r.length)return;o<n&&fn(r,n-o,-1);let d=new Ft(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof Ft){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?Ye.of(f.split(i||dv)):f:Ye.empty,g=p.length;if(d==h&&g==0)return;d<o&&l(),d>o&&fn(r,d-o,-1),fn(r,h-d,g),to(s,r,p),o=h}}return u(e),l(!a),a}static empty(e){return new Ft(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(Ye.empty);i[r]=Ye.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new Ft(n,i)}static createSet(e,n){return new Ft(e,n)}}function fn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function to(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Ye.empty);t.push(n)}}function hv(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let u=r,c=s,d=Ye.empty;for(;u+=a,c+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function fv(t,e,n,i=!1){let r=[],s=i?[]:null,o=new od(t),a=new od(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);fn(r,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(fn(r,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(fn(r,0,o.ins),s&&to(s,r,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;fn(r,u,l<o.i?o.ins:0),s&&l<o.i&&to(s,r,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?Ft.createSet(r,s):Br.create(r);throw new Error("Mismatched change set lengths")}}function dM(t,e,n=!1){let i=[],r=n?[]:null,s=new od(t),o=new od(e);for(let a=!1;;){if(s.done&&o.done)return r?Ft.createSet(i,r):Br.create(i);if(s.ins==0)fn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)fn(i,0,o.ins,a),r&&to(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;fn(i,l,c,a),r&&c&&to(r,i,o.text)}else o.ins==-1?(fn(i,s.off?0:s.len,l,a),r&&to(r,i,s.textBit(l))):(fn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&to(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>u),s.forward2(l),o.forward(l)}}}}class od{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Ye.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Ye.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class aa{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new aa(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return te.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return te.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return te.range(e.anchor,e.head)}static create(e,n,i){return new aa(e,n,i)}}class te{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:te.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new te([this.main],0)}addRange(e,n=!0){return te.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,te.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new te(e.ranges.map(n=>aa.fromJSON(n)),e.main)}static single(e,n=e){return new te([te.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return te.normalized(e.slice(),n);i=s.to}return new te(e,n)}static cursor(e,n=0,i,r){return aa.create(e,e,(n==0?0:n<0?4:8)|(i==null?3:Math.min(2,i))|(r??33554431)<<5)}static range(e,n,i,r){let s=(i??33554431)<<5|(r==null?3:Math.min(2,r));return n<e?aa.create(n,e,24|s):aa.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?te.range(l,a):te.range(a,l))}}return new te(e,n)}}function hM(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let jb=0;class ke{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=jb++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new ke(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:Fb),!!e.static,e.enables)}of(e){return new yf([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new yf(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new yf(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function Fb(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class yf{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=jb++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||pv(d,c)){let f=i(d);if(a?!ak(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let g=Sp(h,p);if(this.dependencies.every(b=>b instanceof ke?h.facet(b)===d.facet(b):b instanceof wn?h.field(b,!1)==d.field(b,!1):!0)||(a?ak(f=i(d),g,r):r(f=i(d),g)))return d.values[o]=g,0}else f=i(d);return d.values[o]=f,1}}}}function ak(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function pv(t,e){let n=!1;for(let i of e)yc(t,i)&1&&(n=!0);return n}function xB(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<i.length;c++){let d=Sp(l,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of i)yc(l,u);return l.values[o]=a(l),1},update(l,u){if(!pv(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=pv(l,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&Fb(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const lk=ke.define({static:!0});class wn{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new wn(jb++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(lk).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,lk.of({field:this,create:e})]}get extension(){return this}}const Qo={lowest:4,low:3,default:2,high:1,highest:0};function Du(t){return e=>new fM(e,t)}const Td={highest:Du(Qo.highest),high:Du(Qo.high),default:Du(Qo.default),low:Du(Qo.low),lowest:Du(Qo.lowest)};class fM{constructor(e,n){this.inner=e,this.prec=n}}class _d{of(e){return new mv(this,e)}reconfigure(e){return _d.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class mv{constructor(e,n){this.compartment=e,this.inner=n}}class xp{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of SB(e,n,o))h instanceof wn?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of r)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,g=c&&c[h]||[];if(f.every(b=>b.type==0))if(a[p.id]=l.length<<1|1,Fb(g,f))l.push(i.facet(p));else{let b=p.combine(f.map(m=>m.value));l.push(i&&p.compare(b,i.facet(p))?i.facet(p):b)}else{for(let b of f)b.type==0?(a[b.id]=l.length<<1|1,l.push(b.value)):(a[b.id]=u.length<<1,u.push(m=>b.dynamicSlot(m)));a[p.id]=u.length<<1,u.push(b=>xB(b,p,f))}}let d=u.map(h=>h(a));return new xp(e,o,d,a,l,s)}}function SB(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let u=i[l].indexOf(o);u>-1&&i[l].splice(u,1),o instanceof mv&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof mv){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof fM)s(o.inner,o.prec);else if(o instanceof wn)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof yf)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Qo.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Qo.default),i.reduce((o,a)=>o.concat(a))}function yc(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Sp(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const pM=ke.define(),mM=ke.define({combine:t=>t.some(e=>e),static:!0}),gM=ke.define({combine:t=>t.length?t[0]:void 0,static:!0}),yM=ke.define(),vM=ke.define(),wM=ke.define(),bM=ke.define({combine:t=>t.length?t[0]:!1});class Ps{constructor(e,n){this.type=e,this.value=n}static define(){return new kB}}class kB{of(e){return new Ps(this,e)}}class EB{constructor(e){this.map=e}of(e){return new je(this,e)}}class je{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new je(this.type,n)}is(e){return this.type==e}static define(e={}){return new EB(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}je.reconfigure=je.define();je.appendConfig=je.define();class Ht{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&hM(i,n.newLength),s.some(a=>a.type==Ht.time)||(this.annotations=s.concat(Ht.time.of(Date.now())))}static create(e,n,i,r,s,o){return new Ht(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ht.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ht.time=Ps.define();Ht.userEvent=Ps.define();Ht.addToHistory=Ps.define();Ht.remote=Ps.define();function CB(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function xM(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=Ft.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:je.mapEffects(t.effects,r).concat(je.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function gv(t,e,n){let i=e.selection,r=Ml(e.annotations);return e.userEvent&&(r=r.concat(Ht.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ft?e.changes:Ft.of(e.changes||[],n,t.facet(gM)),selection:i&&(i instanceof te?i:te.single(i.anchor,i.head)),effects:Ml(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function SM(t,e,n){let i=gv(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=xM(i,gv(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=Ht.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return PB(n?AB(r):r)}function AB(t){let e=t.startState,n=!0;for(let r of e.facet(yM)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:CB(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=Ft.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Ht.create(e,r,t.selection&&t.selection.map(s),je.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(vM);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof Ht?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ht?t=s[0]:t=SM(e,Ml(s),!1)}return t}function PB(t){let e=t.startState,n=e.facet(wM),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=xM(i,gv(e,s,t.changes.newLength),!0))}return i==t?t:Ht.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const OB=[];function Ml(t){return t==null?OB:Array.isArray(t)?t:[t]}var on=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(on||(on={}));const MB=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let yv;try{yv=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function $B(t){if(yv)return yv.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||MB.test(n)))return!0}return!1}function RB(t){return e=>{if(!/\S/.test(e))return on.Space;if($B(e))return on.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return on.Word;return on.Other}}class Fe{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)yc(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return yc(this,i),Sp(this,i)}update(...e){return SM(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(_d.reconfigure)?(n&&(r=new Map,n.compartments.forEach((a,l)=>r.set(l,a)),n=null),r.set(o.value.compartment,o.value.extension)):o.is(je.reconfigure)?(n=null,i=o.value):o.is(je.appendConfig)&&(n=null,i=Ml(i).concat(o.value));let s;n?s=e.startState.values.slice():(n=xp.resolve(i,r,this),s=new Fe(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new Fe(n,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:te.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Ml(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(l.range.map(d)),r=r.compose(c),o=je.mapEffects(o,c).concat(je.mapEffects(Ml(l.effects),d))}return{changes:r,selection:te.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Ft?e:Ft.of(e,this.doc.length,this.facet(Fe.lineSeparator))}toText(e){return Ye.of(e.split(this.facet(Fe.lineSeparator)||dv))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(yc(this,n),Sp(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof wn&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Fe.create({doc:e.doc,selection:te.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=xp.resolve(e.extensions||[],new Map),i=e.doc instanceof Ye?e.doc:Ye.of((e.doc||"").split(n.staticFacet(Fe.lineSeparator)||dv)),r=e.selection?e.selection instanceof te?e.selection:te.single(e.selection.anchor,e.selection.head):te.single(0);return hM(r,i.length),n.staticFacet(mM)||(r=r.asSingle()),new Fe(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Fe.tabSize)}get lineBreak(){return this.facet(Fe.lineSeparator)||`
`}get readOnly(){return this.facet(bM)}phrase(e,...n){for(let i of this.facet(Fe.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(pM))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return RB(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=mn(n,o,!1);if(s(n.slice(l,o))!=on.Word)break;o=l}for(;a<r;){let l=mn(n,a);if(s(n.slice(a,l))!=on.Word)break;a=l}return o==a?null:te.range(o+i,a+i)}}Fe.allowMultipleSelections=mM;Fe.tabSize=ke.define({combine:t=>t.length?t[0]:4});Fe.lineSeparator=gM;Fe.readOnly=bM;Fe.phrases=ke.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});Fe.languageData=pM;Fe.changeFilter=yM;Fe.transactionFilter=vM;Fe.transactionExtender=wM;_d.reconfigure=je.define();function Lo(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Ma{eq(e){return this==e}range(e,n=e){return vv.create(e,n,this)}}Ma.prototype.startSide=Ma.prototype.endSide=0;Ma.prototype.point=!1;Ma.prototype.mapMode=Fn.TrackDel;let vv=class kM{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new kM(e,n,i)}};function wv(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Ub{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new Ub(r,s,i,a):null,pos:o}}}class ht{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new ht(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(wv)),this.isEmpty)return n.length?ht.of(n):this;let a=new EM(this,null,-1).goto(0),l=0,u=[],c=new $a;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(vv.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?ht.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new ht(i,n,s||ht.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return ad.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return ad.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=uk(o,a,i),u=new Iu(o,l,s),c=new Iu(a,l,s);i.iterGaps((d,h,f)=>ck(u,d,c,h,f,r)),i.empty&&i.length==0&&ck(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=uk(s,o),l=new Iu(s,a,0).goto(i),u=new Iu(o,a,0).goto(i);for(;;){if(l.to!=u.to||!bv(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>r)return!0;l.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new Iu(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:Math.min(c.length,l);r.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(r.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new $a;for(let r of e instanceof vv?[e]:n?NB(e):e)i.add(r.from,r.to,r.value);return i.finish()}}ht.empty=new ht([],[],null,-1);function NB(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(wv(e,i)>0)return t.slice().sort(wv);e=i}return t}ht.empty.nextLayer=ht.empty;class $a{finishChunk(e){this.chunks.push(new Ub(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new $a)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(ht.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ht.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function uk(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class EM{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ad{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new EM(o,n,i,s));return r.length==1?r[0]:new ad(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)Qg(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)Qg(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Qg(this.heap,0)}}}function Qg(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Iu{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ad.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){wh(this.active,e),wh(this.activeTo,e),wh(this.activeRank,e),this.minActive=dk(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;bh(this.active,n,i),bh(this.activeTo,n,r),bh(this.activeRank,n,s),e&&bh(e,n,this.cursor.from),this.minActive=dk(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&wh(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function ck(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&bv(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!bv(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function bv(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function wh(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function bh(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function dk(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Im(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=mn(t,r));return i}function TB(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=mn(t,r)}return i===!0?-1:t.length}const xv="ͼ",hk=typeof Symbol>"u"?"__"+xv:Symbol.for(xv),Sv=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),fk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Ao{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>o.map(b=>g.replace(/&/,b))).reduce((g,b)=>g.concat(b)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=fk[hk]||1;return fk[hk]=e+1,xv+e.toString(36)}static mount(e,n){(e[Sv]||new _B(e)).mount(Array.isArray(n)?n:[n])}}let pk=new Map;class _B{constructor(e){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=pk.get(n);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[Sv]=r;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],pk.set(n,this)}else{this.styleTag=n.createElement("style");let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[Sv]=this}mount(e){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var Po={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ld={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},DB=typeof navigator<"u"&&/Mac/.test(navigator.platform),IB=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var en=0;en<10;en++)Po[48+en]=Po[96+en]=String(en);for(var en=1;en<=24;en++)Po[en+111]="F"+en;for(var en=65;en<=90;en++)Po[en]=String.fromCharCode(en+32),ld[en]=String.fromCharCode(en);for(var e0 in Po)ld.hasOwnProperty(e0)||(ld[e0]=Po[e0]);function LB(t){var e=DB&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||IB&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?ld:Po)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function kp(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function kv(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function BB(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function vf(t,e){if(!e.anchorNode)return!1;try{return kv(t,e.anchorNode)}catch{return!1}}function ud(t){return t.nodeType==3?Ra(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Ep(t,e,n,i){return n?mk(t,e,n,i,-1)||mk(t,e,n,i,1):!1}function Cp(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function mk(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Oo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Cp(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?Oo(t):0}else return!1}}function Oo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Vb(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function zB(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function jB(t,e,n,i,r,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body;if(f)h=zB(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let b=c.getBoundingClientRect();h={left:b.left,right:b.left+c.clientWidth,top:b.top,bottom:b.top+c.clientHeight}}let p=0,g=0;if(r=="nearest")e.top<h.top?(g=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+g&&(g=e.bottom-h.bottom+g+o)):e.bottom>h.bottom&&(g=e.bottom-h.bottom+o,n<0&&e.top-g<h.top&&(g=-(h.top+g-e.top+o)));else{let b=e.bottom-e.top,m=h.bottom-h.top;g=(r=="center"&&b<=m?e.top+b/2-m/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-m+o)-h.top}if(i=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),n>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,n<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||g)if(f)u.scrollBy(p,g);else{let b=0,m=0;if(g){let v=c.scrollTop;c.scrollTop+=g,m=c.scrollTop-v}if(p){let v=c.scrollLeft;c.scrollLeft+=p,b=c.scrollLeft-v}e={left:e.left-b,top:e.top-m,right:e.right-b,bottom:e.bottom-m},b&&Math.abs(b-p)<1&&(i="nearest"),m&&Math.abs(m-g)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function FB(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class UB{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?Oo(n):0),i,Math.min(e.focusOffset,i?Oo(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Za=null;function CM(t){if(t.setActive)return t.setActive();if(Za)return t.focus(Za);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Za==null?{get preventScroll(){return Za={preventScroll:!0},!0}}:void 0),!Za){Za=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let gk;function Ra(t,e,n=e){let i=gk||(gk=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function $l(t,e,n){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function VB(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function AM(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function HB(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,Oo(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=Oo(n))}else{if(n==t)return!0;i=Cp(n),n=n.parentNode}}function PM(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class Pn{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Pn(e.parentNode,Cp(e),n)}static after(e,n){return new Pn(e.parentNode,Cp(e)+1,n)}}const Hb=[];class lt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=lt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=yk(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=yk(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=Oo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!lt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=Hb){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new OM(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}lt.prototype.breakAfter=0;function yk(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class OM{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function MM(t,e,n,i,r,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,a,l))){if(i<u.length){let f=u[i];f&&r<f.length?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,l)?s[s.length-1]=f:(r&&f.merge(0,r,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function $M(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,MM(t,u,c,a,l,i,0,r,s)}const ml="￿";class RM{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Fe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ml}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=lt.get(r),l=lt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:vk(r))||vk(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=lt.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(n,i.offset))}}function vk(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class wk{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let ui=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ev=typeof document<"u"?document:{documentElement:{style:{}}};const Cv=/Edge\/(\d+)/.exec(ui.userAgent),NM=/MSIE \d/.test(ui.userAgent),Av=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ui.userAgent),Lm=!!(NM||Av||Cv),bk=!Lm&&/gecko\/(\d+)/i.test(ui.userAgent),t0=!Lm&&/Chrome\/(\d+)/.exec(ui.userAgent),xk="webkitFontSmoothing"in Ev.documentElement.style,TM=!Lm&&/Apple Computer/.test(ui.vendor),Sk=TM&&(/Mobile\/\w+/.test(ui.userAgent)||ui.maxTouchPoints>2);var xe={mac:Sk||/Mac/.test(ui.platform),windows:/Win/.test(ui.platform),linux:/Linux|X11/.test(ui.platform),ie:Lm,ie_version:NM?Ev.documentMode||6:Av?+Av[1]:Cv?+Cv[1]:0,gecko:bk,gecko_version:bk?+(/Firefox\/(\d+)/.exec(ui.userAgent)||[0,0])[1]:0,chrome:!!t0,chrome_version:t0?+t0[1]:0,ios:Sk,android:/Android\b/.test(ui.userAgent),webkit:xk,safari:TM,webkit_version:xk?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Ev.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const WB=256;class Ur extends lt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Ur)||this.length-(n-e)+i.length>WB||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Ur(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Pn(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return GB(this.dom,e,n)}}class Es extends lt{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(AM(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Es&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:($M(this,e,n,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Es(this.mark,n,o)}domAtPos(e){return _M(this,e)}coordsAt(e,n){return IM(this,e,n)}}function GB(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?xe.chrome||xe.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Ra(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return xe.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?Vb(l,o<0):l||null}class la extends lt{constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}static create(e,n,i){return new la(e,n,i)}split(e){let n=la.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof la)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof la&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ye.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Ye.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Pn.before(this.dom):Pn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Vb(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class tu extends lt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof tu&&e.side==this.side}split(){return new tu(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Pn.before(this.dom):Pn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ye.empty}get isHidden(){return!0}}Ur.prototype.children=la.prototype.children=tu.prototype.children=Hb;function _M(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Pn(n,0)}function DM(t,e,n){let i,{children:r}=t;n>0&&e instanceof Es&&r.length&&(i=r[r.length-1])instanceof Es&&i.mark.eq(e.mark)?DM(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function IM(t,e,n){let i=null,r=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):KB(t)}function KB(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=ud(e);return n[n.length-1]||null}function Pv(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const kk=Object.create(null);function Wb(t,e,n){if(t==e)return!0;t||(t=kk),e||(e=kk);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Ov(t,e,n){let i=null;if(e)for(let r in e)n&&r in n||t.removeAttribute(i=r);if(n)for(let r in n)e&&e[r]==n[r]||t.setAttribute(i=r,n[r]);return!!i}function XB(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class ja{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}destroy(e){}}var At=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(At||(At={}));class Ke extends Ma{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Dd(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Mo(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=LM(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new Mo(e,i,r,n,e.widget||null,!0)}static line(e){return new Id(e)}static set(e,n=!1){return ht.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ke.none=ht.empty;class Dd extends Ke{constructor(e){let{start:n,end:i}=LM(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof Dd&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Wb(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Dd.prototype.point=!1;class Id extends Ke{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Id&&this.spec.class==e.spec.class&&Wb(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Id.prototype.mapMode=Fn.TrackBefore;Id.prototype.point=!0;class Mo extends Ke{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Fn.TrackBefore:Fn.TrackAfter:Fn.TrackDel}get type(){return this.startSide<this.endSide?At.WidgetRange:this.startSide<=0?At.WidgetBefore:At.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Mo&&ZB(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Mo.prototype.point=!0;function LM(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function ZB(t,e){return t==e||!!(t&&e&&t.compare(e))}function Mv(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class Cn extends lt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof Cn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),$M(this,e,n,i?i.children:[],s,o),!0}split(e){let n=new Cn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Wb(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){DM(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=Pv(n,this.attrs||{})),i&&(this.attrs=Pv({class:i},this.attrs||{}))}domAtPos(e){return _M(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(AM(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Ov(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&lt.get(r)instanceof Es;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=lt.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!xe.ios||!this.children.some(s=>s instanceof Ur))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Ur)||/[^ -~]/.test(i.text))return null;let r=ud(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=IM(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}get type(){return At.Text}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof Cn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class pa extends lt{constructor(e,n,i){super(),this.widget=e,this.length=n,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof pa)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Pn.before(this.dom):Pn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new pa(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i}get children(){return Hb}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ye.empty}domBoundsAround(){return null}become(e){return e instanceof pa&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class vc{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof pa&&e.type==At.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Cn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(xh(new tu(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(xh(new Ur(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Mo){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof Mo)if(i.block){let{type:l}=i;l==At.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new pa(i.widget||new Ek("div"),a,l))}else{let l=la.create(i.widget||new Ek("span"),a,a?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(xh(new tu(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(xh(l,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new vc(e,n,i,s);return o.openEnd=ht.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function xh(t,e){for(let n of e)t=new Es(n,[t],t.length);return t}class Ek extends ja{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const BM=ke.define(),zM=ke.define(),jM=ke.define(),FM=ke.define(),$v=ke.define(),UM=ke.define(),VM=ke.define(),HM=ke.define({combine:t=>t.some(e=>e)}),WM=ke.define({combine:t=>t.some(e=>e)});class Ap{constructor(e,n="nearest",i="nearest",r=5,s=5){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new Ap(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Ck=je.define({map:(t,e)=>t.map(e)});function or(t,e,n){let i=t.facet(FM);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Bm=ke.define({combine:t=>t.length?t[0]:!0});let YB=0;const ec=ke.define();class un{constructor(e,n,i,r){this.id=e,this.create=n,this.domEventHandlers=i,this.extension=r(this)}static define(e,n){const{eventHandlers:i,provide:r,decorations:s}=n||{};return new un(YB++,e,i,o=>{let a=[ec.of(o)];return s&&a.push(cd.of(l=>{let u=l.plugin(o);return u?s(u):Ke.none})),r&&a.push(r(o)),a})}static fromClass(e,n){return un.define(i=>new e(i),n)}}class n0{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(or(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){or(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){or(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const GM=ke.define(),Gb=ke.define(),cd=ke.define(),Kb=ke.define(),KM=ke.define();function XM(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(KM)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const tc=ke.define();class _i{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new _i(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new _i(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!l)return i;new _i(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class Pp{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ft.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new _i(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new Pp(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var kt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(kt||(kt={}));const Rv=kt.LTR,JB=kt.RTL;function ZM(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const qB=ZM("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),QB=ZM("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Nv=Object.create(null),vr=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Nv[e]=n,Nv[n]=-e}function e9(t){return t<=247?qB[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?QB[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const t9=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Rl{constructor(e,n,i){this.from=e,this.to=n,this.level=i}get dir(){return this.level%2?JB:Rv}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const wt=[];function n9(t,e){let n=t.length,i=e==Rv?1:2,r=e==Rv?2:1;if(!t||i==1&&!t9.test(t))return YM(n);for(let o=0,a=i,l=i;o<n;o++){let u=e9(t.charCodeAt(o));u==512?u=a:u==8&&l==4&&(u=16),wt[o]=u==4?2:u,u&7&&(l=u),a=u}for(let o=0,a=i,l=i;o<n;o++){let u=wt[o];if(u==128)o<n-1&&a==wt[o+1]&&a&24?u=wt[o]=a:wt[o]=256;else if(u==64){let c=o+1;for(;c<n&&wt[c]==64;)c++;let d=o&&a==8||c<n&&wt[c]==8?l==1?1:8:256;for(let h=o;h<c;h++)wt[h]=d;o=c-1}else u==8&&l==1&&(wt[o]=1);a=u,u&7&&(l=u)}for(let o=0,a=0,l=0,u,c,d;o<n;o++)if(c=Nv[u=t.charCodeAt(o)])if(c<0){for(let h=a-3;h>=0;h-=3)if(vr[h+1]==-c){let f=vr[h+2],p=f&2?i:f&4?f&1?r:i:0;p&&(wt[o]=wt[vr[h]]=p),a=h;break}}else{if(vr.length==189)break;vr[a++]=o,vr[a++]=u,vr[a++]=l}else if((d=wt[o])==2||d==1){let h=d==i;l=h?0:1;for(let f=a-3;f>=0;f-=3){let p=vr[f+2];if(p&2)break;if(h)vr[f+2]|=2;else{if(p&4)break;vr[f+2]|=4}}}for(let o=0;o<n;o++)if(wt[o]==256){let a=o+1;for(;a<n&&wt[a]==256;)a++;let l=(o?wt[o-1]:i)==1,u=(a<n?wt[a]:i)==1,c=l==u?l?1:2:i;for(let d=o;d<a;d++)wt[d]=c;o=a-1}let s=[];if(i==1)for(let o=0;o<n;){let a=o,l=wt[o++]!=1;for(;o<n&&l==(wt[o]!=1);)o++;if(l)for(let u=o;u>a;){let c=u,d=wt[--u]!=2;for(;u>a&&d==(wt[u-1]!=2);)u--;s.push(new Rl(u,c,d?2:1))}else s.push(new Rl(a,o,0))}else for(let o=0;o<n;){let a=o,l=wt[o++]==2;for(;o<n&&l==(wt[o]==2);)o++;s.push(new Rl(a,o,l?1:2))}return s}function YM(t){return[new Rl(0,t,0)]}let JM="";function i9(t,e,n,i,r){var s;let o=i.head-t.from,a=-1;if(o==0){if(!r||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),a=0)}else if(o==t.length){if(r)return null;let h=e[e.length-1];h.level!=n&&(o=h.side(!0,n),a=e.length-1)}a<0&&(a=Rl.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let l=e[a];o==l.side(r,n)&&(l=e[a+=r?1:-1],o=l.side(!r,n));let u=r==(l.dir==n),c=mn(t.text,o,u);if(JM=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=l.side(r,n))return te.cursor(c+t.from,u?-1:1,l.level);let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return!d&&l.level!=n?te.cursor(r?t.to:t.from,r?-1:1,n):d&&d.level<l.level?te.cursor(d.side(!r,n)+t.from,r?1:-1,d.level):te.cursor(c+t.from,r?-1:1,l.level)}class Ak extends lt{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Cn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new _i(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=this.view.inputState.composing<0?null:s9(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:a,to:l}=this.hasComposition;n=new _i(a,l,e.changes.mapPos(a,-1),e.changes.mapPos(l,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(xe.ie||xe.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),o=l9(r,s,e.changes);return n=_i.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=xe.chrome||xe.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof pa&&o.widget instanceof Pk&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,g;if(i&&i.range.fromB<d&&i.range.toB>c){let k=vc.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),C=vc.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=k.breakAtStart,p=k.openStart,g=C.openEnd;let O=this.compositionView(i);C.breakAtStart?O.breakAfter=1:C.content.length&&O.merge(O.length,O.length,C.content[0],!1,C.openStart,0)&&(O.breakAfter=C.content[0].breakAfter,C.content.shift()),k.content.length&&O.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),h=k.content.concat(O).concat(C.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:g}=vc.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:b,off:m}=s.findPos(u,1),{i:v,off:w}=s.findPos(l,-1);MM(this,v,w,b,m,h,f,p,g)}i&&this.fixCompositionDOM(i)}compositionView(e){let n=new Ur(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Es(r,[n],n.length);let i=new Cn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let a=lt.get(s);a!=o&&(a&&(a.dom=null),o.setDOM(s))},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&vf(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.domAtPos(a.anchor),u=a.empty?l:this.domAtPos(a.head);if(xe.gecko&&a.empty&&!this.hasComposition&&r9(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new Pn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!Ep(l.node,l.offset,c.anchorNode,c.anchorOffset)||!Ep(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{xe.android&&xe.chrome&&this.dom.contains(c.focusNode)&&u9(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=kp(this.view.root);if(d)if(a.empty){if(xe.gecko){let h=o9(l.node,l.offset);if(h&&h!=3){let f=QM(l.node,l.offset,h==1?1:-1);f&&(l=new Pn(f,h==1?0:f.nodeValue.length))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Pn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Pn(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=kp(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=Cn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}nearest(e){for(let n=e;n;){let i=lt.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof Cn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=At.WidgetBefore&&s.type!=At.WidgetAfter&&(!r||n==2||this.children[r-1].breakAfter||this.children[r-1].type==At.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);i=o}}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof Cn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof Ur))return null;let s=mn(r.text,i);if(s==i)return null;let o=Ra(r.dom,i,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==kt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,g=p?ud(p):[];if(g.length){let b=g[g.length-1],m=l?b.right-f.left:f.right-b.left;m>a&&(a=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?kt.RTL:kt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Cn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=ud(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new OM(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=n.lineBlockAt(o).bottom-n.lineBlockAt(i).top;e.push(Ke.replace({widget:new Pk(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Ke.set(e)}updateDeco(){let e=this.view.state.facet(cd).map((n,i)=>(this.dynamicDecorationMap[i]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=XM(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom};jB(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==kt.LTR)}}function r9(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class Pk extends ja{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function qM(t){let e=t.observer.selectionRange,n=e.focusNode&&QM(e.focusNode,e.focusOffset,0);if(!n)return null;let i=lt.get(n),r,s;if(i instanceof Ur)r=i.posAtStart,s=r+i.length;else e:for(let o=0,a=n;;){for(let u=a.previousSibling,c;u;u=u.previousSibling){if(c=lt.get(u)){r=s=c.posAtEnd+o;break e}let d=new RM([],t.state);if(d.readNode(u),d.text.indexOf(ml)>-1)return null;o+=d.text.length}if(a=a.parentNode,!a)return null;let l=lt.get(a);if(l){r=s=l.posAtStart+o;break}}return{from:r,to:s,node:n}}function s9(t,e){let n=qM(t);if(!n)return null;let{from:i,to:r,node:s}=n,o=e.mapPos(i,-1),a=e.mapPos(r,1),l=s.nodeValue;if(/[\n\r]/.test(l))return null;if(a-o!=l.length){let h=e.mapPos(i,1),f=e.mapPos(r,-1);if(f-h==l.length)o=h,a=f;else if(t.state.doc.sliceString(a-l.length,a)==l)o=a-l.length;else if(t.state.doc.sliceString(o,o+l.length)==l)a=o+l.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,a)!=l||o>u.head||a<u.head)return null;let c=[],d=new _i(i,r,o,a);for(let h=s.parentNode;;h=h.parentNode){let f=lt.get(h);if(f instanceof Es)c.push({node:h,deco:f.mark});else{if(f instanceof Cn||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:d,text:s,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new Dd({inclusive:!0,attributes:XB(h),tagName:h.tagName.toLowerCase()})});else return null}}}function QM(t,e,n){if(n<=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=Oo(i);else break}if(n>=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r<i.childNodes.length&&n>=0)i=i.childNodes[r],r=0;else break}return null}function o9(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class a9{constructor(){this.changes=[]}compareRange(e,n){Mv(e,n,this.changes)}comparePoint(e,n){Mv(e,n,this.changes)}}function l9(t,e,n){let i=new a9;return ht.compare(t,e,n,i),i.changes}function u9(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function c9(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return te.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=mn(r.text,s,!1):a=mn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let u=mn(r.text,o,!1);if(i(r.text.slice(u,o))!=l)break;o=u}for(;a<r.length;){let u=mn(r.text,a);if(i(r.text.slice(a,u))!=l)break;a=u}return te.range(o+r.from,a+r.from)}function d9(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function h9(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function i0(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Ok(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Mk(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Tv(t,e,n){let i,r,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let g=ud(p);for(let b=0;b<g.length;b++){let m=g[b];r&&i0(r,m)&&(m=Ok(Mk(m,r.bottom),r.top));let v=d9(e,m),w=h9(n,m);if(v==0&&w==0)return p.nodeType==3?$k(p,e,n):Tv(p,e,n);if(!i||o>w||o==w&&s>v){i=p,r=m,s=v,o=w;let k=w?n<m.top?-1:1:v?e<m.left?-1:1:0;a=!k||(k>0?b<g.length-1:b>0)}v==0?n>m.bottom&&(!c||c.bottom<m.bottom)?(l=p,c=m):n<m.top&&(!d||d.top>m.top)&&(u=p,d=m):c&&i0(c,m)?c=Mk(c,m.bottom):d&&i0(d,m)&&(d=Ok(d,m.top))}}if(c&&c.bottom>=n?(i=l,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return $k(i,h,n);if(a&&i.contentEditable!="false")return Tv(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function $k(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Ra(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((xe.chrome||xe.gecko)&&Ra(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};r=a+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function e$(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,C=!1;l=t.elementAtHeight(h),l.type!=At.Text;)for(;h=i>0?l.bottom+k:l.top-k,!(h>=0&&h<=u);){if(C)return n?null:0;C=!0,i=-i}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:Rk(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Rk(t,o,l,c,d);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,b=g.elementFromPoint(c,d);b&&!t.contentDOM.contains(b)&&(b=null),b||(c=Math.max(o.left+1,Math.min(o.right-1,c)),b=g.elementFromPoint(c,d),b&&!t.contentDOM.contains(b)&&(b=null));let m,v=-1;if(b&&((r=t.docView.nearest(b))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let k=p.caretPositionFromPoint(c,d);k&&({offsetNode:m,offset:v}=k)}else if(p.caretRangeFromPoint){let k=p.caretRangeFromPoint(c,d);k&&({startContainer:m,startOffset:v}=k,(!t.contentDOM.contains(m)||xe.safari&&f9(m,v,c)||xe.chrome&&p9(m,v,c))&&(m=void 0))}}if(!m||!t.docView.dom.contains(m)){let k=Cn.find(t.docView,f);if(!k)return h>l.top+l.height/2?l.to:l.from;({node:m,offset:v}=Tv(k.dom,c,d))}let w=t.docView.nearest(m);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=w.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(m,v)+w.posAtStart}function Rk(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+TB(o,s,t.state.tabSize)}function f9(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Ra(t,i-1,i).getBoundingClientRect().left>n}function p9(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Ra(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function _v(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==At.Text))return i}return n}function m9(t,e,n,i){let r=_v(t,e.head),s=!i||r.type!=At.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==kt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return te.cursor(l,n?-1:1)}return te.cursor(n?r.to:r.from,n?-1:1)}function Nk(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let u=i9(r,s,o,a,n),c=JM;if(!u){if(r.number==(n?t.state.doc.lines:1))return a;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=te.cursor(n?r.from:r.to)}if(l){if(!l(c))return a}else{if(!i)return u;l=i(c)}a=u}}function g9(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==on.Space&&(r=o),r==o}}function y9(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return te.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,g=e$(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?g<r:g>r))return te.cursor(g,e.assoc,void 0,o)}}function wf(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function r0(t,e,n){let i=wf(t.state.facet(Kb).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:te.cursor(i,i<n.from?1:-1)}class v9{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(i,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(r.type,e,r)?r.preventDefault():i(e,r))};for(let i in Bt){let r=Bt[i];e.contentDOM.addEventListener(i,s=>{Tk(e,s)&&n(r,s)},Dv[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{if(i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(Bt.mousedown,i),!i.defaultPrevented&&i.button==2)){let r=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=r,200)}}),e.scrollDOM.addEventListener("drop",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(Bt.drop,i)}),xe.chrome&&xe.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,xe.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var i;let r;this.customHandlers=[];for(let s of n)if(r=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{Tk(e,a)&&this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,n,i){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,i,n)||i.defaultPrevented)return!0}catch(o){or(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,n,e)}catch(s){or(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&n$.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),xe.android&&xe.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let i;return xe.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((i=t$.find(r=>r.keyCode==n.keyCode))&&!n.ctrlKey||w9.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=i||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,$l(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:xe.safari&&!xe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const t$=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],w9="dthko",n$=[16,17,18,20,91,92,224,225],Sh=6;function kh(t){return Math.max(0,t)*.7+8}function b9(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class x9{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=FB(e.contentDOM),this.atoms=e.state.facet(Kb).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Fe.allowMultipleSelections)&&S9(e,n),this.dragging=E9(e,n)&&o$(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&b9(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=XM(this.view);e.clientX-o.left<=s.left+Sh?i=-kh(s.left-e.clientX):e.clientX+o.right>=s.right-Sh&&(i=kh(e.clientX-s.right)),e.clientY-o.top<=s.top+Sh?r=-kh(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Sh&&(r=kh(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=wf(this.atoms,r.from,0);o!=r.from&&(s=te.cursor(o,-1))}else{let o=wf(this.atoms,r.from,-1),a=wf(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=te.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?te.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection)||i.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function S9(t,e){let n=t.state.facet(BM);return n.length?n[0](e):xe.mac?e.metaKey:e.ctrlKey}function k9(t,e){let n=t.state.facet(zM);return n.length?n[0](e):xe.mac?!e.altKey:!e.ctrlKey}function E9(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=kp(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Tk(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=lt.get(n))&&i.ignoreEvent(e))return!1;return!0}const Bt=Object.create(null),Dv=Object.create(null),i$=xe.ie&&xe.ie_version<15||xe.ios&&xe.webkit_version<604;function C9(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),r$(t,n.value)},50)}function r$(t,e){let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Iv!=null&&n.selection.ranges.every(l=>l.empty)&&Iv==s.toString()){let l=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:te.cursor(u.from+d.length)}})}else o?i=n.changeByRange(l=>{let u=s.line(r++);return{changes:{from:l.from,to:l.to,insert:u.text},range:te.cursor(l.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Bt.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};Bt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Bt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Dv.touchstart=Dv.touchmove={passive:!0};Bt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let i of t.state.facet(jM))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=O9(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new x9(t,e,n,i)),i&&t.observer.ignore(()=>CM(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function _k(t,e,n,i){if(i==1)return te.cursor(e,n);if(i==2)return c9(t.state,e,n);{let r=Cn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,te.range(o,a)}}let s$=(t,e)=>t>=e.top&&t<=e.bottom,Dk=(t,e,n)=>s$(e,n)&&t>=n.left&&t<=n.right;function A9(t,e,n,i){let r=Cn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&Dk(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&Dk(n,i,a)?1:o&&s$(i,o)?-1:1}function Ik(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:A9(t,n,e.clientX,e.clientY)}}const P9=xe.ie&&xe.ie_version<=11;let Lk=null,Bk=0,zk=0;function o$(t){if(!P9)return t.detail;let e=Lk,n=zk;return Lk=t,zk=Date.now(),Bk=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Bk+1)%3:1}function O9(t,e){let n=Ik(t,e),i=o$(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=Ik(t,s),u,c=_k(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=_k(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?te.range(h,f):te.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(u=M9(r,l.pos))?u:a?r.addRange(c):te.create([c])}}}function M9(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return te.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Bt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:i}=t.inputState;i&&(i.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function jk(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=i&&s&&s.dragging&&k9(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}Bt.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let i=Array(n.length),r=0,s=()=>{++r==n.length&&jk(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}}else jk(t,e,e.dataTransfer.getData("Text"),!0)};Bt.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=i$?null:e.clipboardData;n?(r$(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):C9(t)};function $9(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function R9(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}let Iv=null;Bt.copy=Bt.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=R9(t.state);if(!n&&!r)return;Iv=r?n:null;let s=i$?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):$9(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const a$=Ps.define();function l$(t,e){let n=[];for(let i of t.facet(VM)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:a$.of(!0)}):null}function u$(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=l$(t.state,e);n?t.dispatch(n):t.update([])}},10)}Bt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),u$(t)};Bt.blur=t=>{t.observer.clearSelectionRange(),u$(t)};Bt.compositionstart=Bt.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};Bt.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,xe.chrome&&xe.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};Bt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Bt.beforeinput=(t,e)=>{var n;let i;if(xe.chrome&&xe.android&&(i=t$.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const Fk=["pre-wrap","normal","pre-line","break-spaces"];class N9{constructor(e){this.lineWrapping=e,this.doc=Ye.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Fk.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=Fk.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class T9{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Nr{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?At.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Mo?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Nr(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var dt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(dt||(dt={}));const bf=.001;class Mn{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>bf&&(e.heightChanged=!0),this.height=n)}replace(e,n,i){return Mn.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=r[a],h=s.lineAt(l,dt.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,dt.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,dt.ByPosNoHeight,i,0,0));c+=h.from-l,l=h.from;let p=Xb.build(i.setDoc(o),e,c,d);s=s.replace(l,u,p)}return s.updateHeight(i,0)}static empty(){return new oi(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new _9(Mn.of(e.slice(0,n)),o,Mn.of(e.slice(i)))}}Mn.prototype.size=1;class c$ extends Mn{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Nr(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class oi extends c${constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Nr(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof oi||r instanceof qt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof qt?r=new oi(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Mn.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class qt extends Mn{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(i,e-d/2);return new Nr(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:d}=n.doc.line(s+u);return new Nr(c,d,i+a*u,a,0)}}lineAt(e,n,i,r,s){if(n==dt.ByHeight)return this.blockAt(e,i,r,s);if(n==dt.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new Nr(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=r+a*d+l*(u.from-s-d);return new Nr(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new Nr(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof qt?i[i.length-1]=new qt(s.length+r):i.push(null,new qt(r-1))}if(e>0){let s=i[0];s instanceof qt?i[0]=new qt(e+s.length):i.unshift(new qt(e-1),null)}return Mn.of(i)}decomposeLeft(e,n){n.push(new qt(e-1),null)}decomposeRight(e,n){n.push(null,new qt(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new qt(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=bf&&(l=-2);let h=new oi(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new qt(s-a).updateHeight(e,a));let u=Mn.of(o);return(l<0||Math.abs(u.height-this.height)>=bf||Math.abs(l-this.heightMetrics(e,n).perLine)>=bf)&&(e.heightChanged=!0),u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class _9 extends Mn{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==dt.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==dt.ByPosNoHeight?dt.ByPosNoHeight:dt.ByPos;return l?u.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let u=this.lineAt(l,dt.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&Uk(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),Uk(s,a)}return Mn.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Mn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Uk(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof qt&&(i=t[e+1])instanceof qt&&t.splice(e-1,3,new qt(n.length+1+i.length))}const D9=5;class Xb{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof oi?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new oi(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new c$(o,r,i)):(o||s||r>=D9)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new oi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new qt(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof oi)return e;let n=new oi(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let i=(n=e.deco)===null||n===void 0?void 0:n.type;i==At.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i!=At.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof oi)&&!this.isCovered?this.nodes.push(new oi(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof oi&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new Xb(i,e);return ht.spans(n,i,r,s,0),s.finish(i)}}function I9(t,e,n){let i=new L9;return ht.compare(t,e,n,i,0),i.changes}class L9{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&Mv(e,n,this.changes,5)}}function B9(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=u==t.parentNode?h.bottom:Math.min(l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function z9(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class s0{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return Ke.replace({widget:new j9(this.size,e)}).range(this.from,this.to)}}class j9 extends ja{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Vk{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Hk,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=kt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Gb).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new N9(n),this.stateDeco=e.facet(cd).filter(i=>typeof i!="function"),this.heightMap=Mn.empty().applyChanges(this.stateDeco,Ye.empty,this.heightOracle.setDoc(e.doc),[new _i(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ke.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Eh(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?Hk:new V9(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:nc(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(cd).filter(c=>typeof c!="function");let r=e.changedRanges,s=_i.extendWithRanges(r,I9(i,this.stateDeco,e?e.changes:Ft.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(WM)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?kt.RTL:kt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0,d=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=PM(e.scrollDOM);let f=(this.printing?z9:B9)(n,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let m=a.width;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let w=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(w)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:k,charWidth:C,textHeight:O}=e.docView.measureTextSize();o=k>0&&r.refresh(s,k,C,O,m/C,w),o&&(e.docView.minWidth=0,u|=8)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),r.heightChanged=!1;for(let k of this.viewports){let C=k.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?Mn.empty().applyChanges(this.stateDeco,Ye.empty,this.heightOracle,[new _i(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new T9(k.from,C))}r.heightChanged&&(u|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Eh(r.lineAt(o-i*1e3,dt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,dt.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,dt.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new Eh(r.lineAt(h-1e3/2,dt.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,dt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Eh(this.heightMap.lineAt(i,dt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,dt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,dt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,dt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new s0(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=kt.LTR&&!i)return[];let a=[],l=(u,c,d,h)=>{if(c-u<s)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let b of p)if(b>u&&b<c){l(u,b-10,d,h),l(b+10,c,d,h);return}let g=U9(e,b=>b.from>=d.from&&b.to<=d.to&&Math.abs(b.from-u)<s&&Math.abs(b.to-c)<s&&!p.some(m=>b.from<m&&b.to>m));if(!g){if(c<d.to&&n&&i&&n.visibleRanges.some(b=>b.from<=c&&b.to>=c)){let b=n.moveToLineBoundary(te.cursor(c),!1,!0).head;b>u&&(c=b)}g=new s0(u,c,this.gapSize(d,u,c,h))}a.push(g)};for(let u of this.viewportLines){if(u.length<o)continue;let c=F9(u.from,u.to,this.stateDeco);if(c.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,b;if(d!=null){let m=Ah(c,d),v=((this.visibleBottom-this.visibleTop)/2+p)/u.height;g=m-v,b=m+v}else g=(this.visibleTop-u.top-p)/u.height,b=(this.visibleBottom-u.top+p)/u.height;h=Ch(c,g),f=Ch(c,b)}else{let p=c.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,b,m;if(d!=null){let v=Ah(c,d),w=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/p;b=v-w,m=v+w}else b=(this.pixelViewport.left-g)/p,m=(this.pixelViewport.right+g)/p;h=Ch(c,b),f=Ch(c,m)}h>u.from&&l(u.from,h,u,c),f<u.to&&l(f,u.to,u,c)}return a}gapSize(e,n,i,r){let s=Ah(r,i)-Ah(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){s0.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ke.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ht.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||nc(this.heightMap.lineAt(e,dt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return nc(this.heightMap.lineAt(this.scaler.fromDOM(e),dt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return nc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Eh{constructor(e,n){this.from=e,this.to=n}}function F9(t,e,n){let i=[],r=t,s=0;return ht.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Ch({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Ah(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function U9(t,e){for(let n of t)if(e(n))return n}const Hk={toDOM(t){return t},fromDOM(t){return t},scale:1};class V9{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let u=n.lineAt(a,dt.ByPos,e,0,0).top,c=n.lineAt(l,dt.ByPos,e,0,0).bottom;return r+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function nc(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Nr(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>nc(r,e)):t._content)}const Ph=ke.define({combine:t=>t.join(" ")}),Lv=ke.define({combine:t=>t.indexOf(!0)>-1}),Bv=Ao.newName(),d$=Ao.newName(),h$=Ao.newName(),f$={"&light":"."+d$,"&dark":"."+h$};function zv(t,e,n){return new Ao(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const H9=zv("."+Bv,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},f$);class W9{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:K9(e),l=new RM(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=X9(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!kv(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!kv(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=te.single(u,l)}}}function p$(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,u=null;(s===8||xe.android&&e.text.length<a-o)&&(l=r.to,u="end");let c=G9(t.state.doc.sliceString(o,a,ml),e.text,l-o,u);c&&(xe.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==ml+ml&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:Ye.of(e.text.slice(c.from,c.toB).split(ml))})}else i&&(!t.hasFocus&&t.state.facet(Bm)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(xe.mac||xe.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=te.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ye.of([" "])}):xe.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=te.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ye.of([" "])}),n){let o=t.state;if(xe.ios&&t.inputState.flushIOSKey(t)||xe.android&&(n.from==r.from&&n.to==r.to&&n.insert.length==1&&n.insert.lines==2&&$l(t.contentDOM,"Enter",13)||(n.from==r.from-1&&n.to==r.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&$l(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&n.insert.length==0&&$l(t.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(t.state.facet(UM).some(c=>c(t,n.from,n.to,a)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let l;if(n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=r.from<n.from?o.sliceDoc(r.from,n.from):"",d=r.to>n.to?o.sliceDoc(n.to,r.to):"";l=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let c=o.changes(n),d=i&&i.main.to<=c.newLength?i.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){let h=t.state.sliceDoc(n.from,n.to),f=qM(t)||t.state.doc.lineAt(r.head),p=r.to-n.to,g=r.to-r.from;l=o.changeByRange(b=>{if(b.from==r.from&&b.to==r.to)return{changes:c,range:d||b.map(c)};let m=b.to-p,v=m-h.length;if(b.to-b.from!=g||t.state.sliceDoc(v,m)!=h||f&&b.to>=f.from&&b.from<=f.to)return{range:b};let w=o.changes({from:v,to:m,insert:n.insert}),k=b.to-r.to;return{changes:w,range:d?te.range(Math.max(0,d.anchor+k),Math.max(0,d.head+k)):b.map(w)}})}else l={changes:c,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(l,{scrollIntoView:!0,userEvent:u}),!0}else if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function G9(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function K9(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new wk(n,i)),(r!=n||s!=i)&&e.push(new wk(r,s))),e}function X9(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?te.single(n+e,i+e):null}const Z9={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},o0=xe.ie&&xe.ie_version<=11;class Y9{constructor(e){this.view=e,this.active=!1,this.selectionRange=new UB,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(xe.ie&&xe.ie_version<=11||xe.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),o0&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Bm)?i.root.activeElement!=this.dom:!vf(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(xe.ie&&xe.ie_version<=11||xe.android&&xe.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Ep(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=xe.safari&&e.root.nodeType==11&&BB(this.dom.ownerDocument)==this.dom&&J9(this.view)||kp(e.root);if(!n||this.selectionRange.eq(n))return!1;let i=vf(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&HB(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Z9),o0&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),o0&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&$l(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&vf(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new W9(this.view,e,n,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let i=this.view.state,r=p$(this.view,n);return this.view.state==i&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=Wk(n,e.previousSibling||e.target.previousSibling,-1),r=Wk(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Wk(t,e,n){for(;e;){let i=lt.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function J9(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return Ep(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}class Pe{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||VB(e.parent)||document,this.viewState=new Vk(e.state||Fe.create(e)),this.plugins=this.state.facet(ec).map(n=>new n0(n));for(let n of this.plugins)n.update(this);this.observer=new Y9(this),this.inputState=new v9(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Ak(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof Ht?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(a$))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=l$(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(Fe.phrases)!=this.state.facet(Fe.phrases))return this.setState(s);r=Pp.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Ap(f.empty?f:te.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Ck)&&(d=f.value)}this.viewState.update(r,d),this.bidiCache=Op.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(tc)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Ph)!=r.state.facet(Ph)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let h of this.state.facet($v))h(r);(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!p$(this,c)&&u.force&&$l(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Vk(e),this.plugins=e.facet(ec).map(i=>new n0(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Ak(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(ec),i=e.state.facet(ec);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new n0(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,{scrollTop:r}=i,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;r!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(PM(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return or(this.state,p),Gk}}),d=Pp.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let f=0;f<u.length;f++)if(c[f]!=Gk)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){or(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=i.scrollTop=r+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet($v))a(n)}get themeClasses(){return Bv+" "+(this.state.facet(Lv)?h$:d$)+" "+this.state.facet(Ph)}updateAttrs(){let e=Kk(this,GM,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Bm)?"true":"false",class:"cm-content",style:`${xe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Kk(this,Gb,n);let i=this.observer.ignore(()=>{let r=Ov(this.contentDOM,this.contentAttrs,n),s=Ov(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Pe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(tc),Ao.mount(this.root,this.styleModules.concat(H9).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return r0(this,e,Nk(this,e,n,i))}moveByGroup(e,n){return r0(this,e,Nk(this,e,n,i=>g9(this,e.head,i)))}moveToLineBoundary(e,n,i=!0){return m9(this,e,n,i)}moveVertically(e,n,i){return r0(this,e,y9(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),e$(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Rl.find(s,e-r.from,-1,n)];return Vb(i,o.dir==kt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(HM)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>q9)return YM(e.length);let n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n)return r.order;let i=n9(e.text,n);return this.bidiCache.push(new Op(e.from,e.to,n,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||xe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{CM(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Ck.of(new Ap(typeof e=="number"?te.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return un.define(()=>({}),{eventHandlers:e})}static theme(e,n){let i=Ao.newName(),r=[Ph.of(i),tc.of(zv(`.${i}`,e))];return n&&n.dark&&r.push(Lv.of(!0)),r}static baseTheme(e){return Td.lowest(tc.of(zv("."+Bv,e,f$)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&lt.get(i)||lt.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Pe.styleModule=tc;Pe.inputHandler=UM;Pe.focusChangeEffect=VM;Pe.perLineTextDirection=HM;Pe.exceptionSink=FM;Pe.updateListener=$v;Pe.editable=Bm;Pe.mouseSelectionStyle=jM;Pe.dragMovesSelection=zM;Pe.clickAddsSelectionRange=BM;Pe.decorations=cd;Pe.atomicRanges=Kb;Pe.scrollMargins=KM;Pe.darkTheme=Lv;Pe.contentAttributes=Gb;Pe.editorAttributes=GM;Pe.lineWrapping=Pe.contentAttributes.of({class:"cm-lineWrapping"});Pe.announce=je.define();const q9=4096,Gk={};class Op{constructor(e,n,i,r){this.from=e,this.to=n,this.dir=i,this.order=r}static update(e,n){if(n.empty)return e;let i=[],r=e.length?e[e.length-1].dir:kt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Op(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return i}}function Kk(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&Pv(o,n)}return n}const Q9=xe.mac?"mac":xe.windows?"win":xe.linux?"linux":"key";function e7(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Oh(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const t7=Td.default(Pe.domEventHandlers({keydown(t,e){return y$(g$(e.state),t,e,"editor")}})),m$=ke.define({enables:t7}),Xk=new WeakMap;function g$(t){let e=t.facet(m$),n=Xk.get(e);return n||Xk.set(e,n=r7(e.reduce((i,r)=>i.concat(r),[]))),n}function n7(t,e,n){return y$(g$(t.state),e,t,n)}let Gs=null;const i7=4e3;function r7(t,e=Q9){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(m=>e7(m,e));for(let m=1;m<p.length;m++){let v=p.slice(0,m).join(" ");r(v,!0),f[v]||(f[v]={preventDefault:!0,stopPropagation:!1,run:[w=>{let k=Gs={view:w,prefix:v,scope:o};return setTimeout(()=>{Gs==k&&(Gs=null)},i7),!0}]})}let g=p.join(" ");r(g,!1);let b=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&b.run.push(l),u&&(b.preventDefault=!0),c&&(b.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in c)c[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function y$(t,e,n,i){let r=LB(e),s=En(r,0),o=Ji(s)==r.length&&r!=" ",a="",l=!1,u=!1,c=!1;Gs&&Gs.view==n&&Gs.scope==i&&(a=Gs.prefix+" ",n$.indexOf(e.keyCode)<0&&(u=!0,Gs=null));let d=new Set,h=b=>{if(b){for(let m of b.run)if(!d.has(m)&&(d.add(m),m(n,e)))return b.stopPropagation&&(c=!0),!0;b.preventDefault&&(b.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,g;return f&&(h(f[a+Oh(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(xe.windows&&e.ctrlKey&&e.altKey)&&(p=Po[e.keyCode])&&p!=r?(h(f[a+Oh(p,e,!0)])||e.shiftKey&&(g=ld[e.keyCode])!=r&&g!=p&&h(f[a+Oh(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+Oh(r,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class Ld{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=v$(e);return[new Ld(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return s7(e,n,i)}}function v$(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==kt.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function Zk(t,e,n){let i=te.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:At.Text}}function s7(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==kt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=v$(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=_v(t,i),p=_v(t,r),g=f.type==At.Text?f:null,b=p.type==At.Text?p:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=Zk(t,i,g)),b&&(t.lineWrapping||p.widgetLineBreaks)&&(b=Zk(t,r,b)),g&&b&&g.from==b.from)return v(w(n.from,n.to,g));{let C=g?w(n.from,null,g):k(f,!1),O=b?w(null,n.to,b):k(p,!0),M=[];return(g||f).to<(b||p).from-(g&&b?1:0)||f.widgetLineBreaks>1&&C.bottom+t.defaultLineHeight/2<O.top?M.push(m(d,C.bottom,h,O.top)):C.bottom<O.top&&t.elementAtHeight((C.bottom+O.top)/2).type==At.Text&&(C.bottom=O.top=(C.bottom+O.top)/2),v(C).concat(M).concat(v(O))}function m(C,O,M,E){return new Ld(e,C-l.left,O-l.top-.01,M-C,E-O+.01)}function v({top:C,bottom:O,horizontal:M}){let E=[];for(let N=0;N<M.length;N+=2)E.push(m(M[N],C,M[N+1],O));return E}function w(C,O,M){let E=1e9,N=-1e9,D=[];function T(B,K,Y,ee,W){let R=t.coordsAtPos(B,B==M.to?-2:2),H=t.coordsAtPos(Y,Y==M.from?2:-2);!R||!H||(E=Math.min(R.top,H.top,E),N=Math.max(R.bottom,H.bottom,N),W==kt.LTR?D.push(s&&K?d:R.left,s&&ee?h:H.right):D.push(!s&&ee?d:H.left,!s&&K?h:R.right))}let F=C??M.from,j=O??M.to;for(let B of t.visibleRanges)if(B.to>F&&B.from<j)for(let K=Math.max(B.from,F),Y=Math.min(B.to,j);;){let ee=t.state.doc.lineAt(K);for(let W of t.bidiSpans(ee)){let R=W.from+ee.from,H=W.to+ee.from;if(R>=Y)break;H>K&&T(Math.max(R,K),C==null&&R<=F,Math.min(H,Y),O==null&&H>=j,W.dir)}if(K=ee.to+1,K>=Y)break}return D.length==0&&T(F,C==null,j,O==null,t.textDirection),{top:E,bottom:N,horizontal:D}}function k(C,O){let M=a.top+(O?C.top:C.bottom);return{top:M,bottom:M,horizontal:[]}}}function o7(t,e){return t.constructor==e.constructor&&t.eq(e)}class a7{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(xf)!=e.state.facet(xf)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(xf);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!o7(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const xf=ke.define();function w$(t){return[un.define(e=>new a7(e,t)),xf.of(t)]}const b$=!xe.ios,dd=ke.define({combine(t){return Lo(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function l7(t={}){return[dd.of(t),u7,c7,d7,WM.of(!0)]}function x$(t){return t.startState.facet(dd)!=t.state.facet(dd)}const u7=w$({above:!0,markers(t){let{state:e}=t,n=e.facet(dd),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||b$:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:te.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Ld.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=x$(t);return n&&Yk(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){Yk(e.state,t)},class:"cm-cursorLayer"});function Yk(t,e){e.style.animationDuration=t.facet(dd).cursorBlinkRate+"ms"}const c7=w$({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Ld.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||x$(t)},class:"cm-selectionLayer"}),S$={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};b$&&(S$[".cm-line"].caretColor="transparent !important");const d7=Td.highest(Pe.theme(S$)),k$=je.define({map(t,e){return t==null?null:e.mapPos(t)}}),ic=wn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(k$)?i.value:n,t)}}),h7=un.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(ic);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(ic)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(ic),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(ic)!=t&&this.view.dispatch({effects:k$.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function f7(){return[ic,h7]}function Jk(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function p7(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class m7{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,u,c)=>r(c,u,u+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,u,c)=>{let d=i(a,l,u);d&&c(u,u+a[0].length,d)};else if(i)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new $a,i=n.add.bind(n);for(let{from:r,to:s}of p7(e,this.maxLength))Jk(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(g,b,m)=>h.push(m.range(g,b));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else Jk(e.state.doc,this.regexp,c,d,(g,b)=>this.addMatch(b,e,g,p));n=n.update({filterFrom:c,filterTo:d,filter:(g,b)=>g<c||b>d,add:h})}}return n}}const jv=/x/.unicode!=null?"gu":"g",g7=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,jv),y7={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let a0=null;function v7(){var t;if(a0==null&&typeof document<"u"&&document.body){let e=document.body.style;a0=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return a0||!1}const Sf=ke.define({combine(t){let e=Lo(t,{render:null,specialChars:g7,addSpecialChars:null});return(e.replaceTabs=!v7())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,jv)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,jv)),e}});function w7(t={}){return[Sf.of(t),b7()]}let qk=null;function b7(){return qk||(qk=un.fromClass(class{constructor(t){this.view=t,this.decorations=Ke.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Sf)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new m7({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=En(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Im(o.text,a,i-o.from);return Ke.replace({widget:new E7((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Ke.replace({widget:new k7(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Sf);t.startState.facet(Sf)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const x7="•";function S7(t){return t>=32?x7:t==10?"␤":String.fromCharCode(9216+t)}class k7 extends ja{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=S7(this.code),i=e.state.phrase("Control character")+" "+(y7[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class E7 extends ja{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function C7(){return P7}const A7=Ke.line({class:"cm-activeLine"}),P7=un.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(A7.range(r.from)),e=r.from)}return Ke.set(n)}},{decorations:t=>t.decorations}),Mh="-10000px";class E${constructor(e,n,i){this.facet=n,this.createTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){var n;let i=e.state.facet(this.facet),r=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let a=r[o],l=-1;if(a){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==a.create&&(l=u)}if(l<0)s[o]=this.createTooltipView(a);else{let u=s[o]=this.tooltipViews[l];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function O7(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const l0=ke.define({combine:t=>{var e,n,i;return{position:xe.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||O7}}}),Qk=new WeakMap,C$=un.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(l0);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new E$(t,Zb,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(l0);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Mh,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let i=this.manager.tooltipViews[n];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(l0).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:i}=t,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){l.style.top=Mh;continue}let d=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,f=c.right-c.left,p=(e=Qk.get(a))!==null&&e!==void 0?e:c.bottom-c.top,g=a.offset||$7,b=this.view.textDirection==kt.LTR,m=c.width>i.right-i.left?b?i.left:i.right-c.width:b?Math.min(u.left-(d?14:0)+g.x,i.right-f):Math.max(i.left,u.left-f+(d?14:0)-g.x),v=!!o.above;!o.strictSide&&(v?u.top-(c.bottom-c.top)-g.y<i.top:u.bottom+(c.bottom-c.top)+g.y>i.bottom)&&v==i.bottom-u.bottom>u.top-i.top&&(v=!v);let w=(v?u.top-i.top:i.bottom-u.bottom)-h;if(w<p&&a.resize!==!1){if(w<this.view.defaultLineHeight){l.style.top=Mh;continue}Qk.set(a,p),l.style.height=(p=w)+"px"}else l.style.height&&(l.style.height="");let k=v?u.top-p-h-g.y:u.bottom+h+g.y,C=m+f;if(a.overlap!==!0)for(let O of r)O.left<C&&O.right>m&&O.top<k+p&&O.bottom>k&&(k=v?O.top-p-2-h:O.bottom+h+2);this.position=="absolute"?(l.style.top=k-t.parent.top+"px",l.style.left=m-t.parent.left+"px"):(l.style.top=k+"px",l.style.left=m+"px"),d&&(d.style.left=`${u.left+(b?g.x:-g.x)-(m+14-7)}px`),a.overlap!==!0&&r.push({left:m,top:k,right:C,bottom:k+p}),l.classList.toggle("cm-tooltip-above",v),l.classList.toggle("cm-tooltip-below",!v),a.positioned&&a.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Mh}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),M7=Pe.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),$7={x:0,y:0},Zb=ke.define({enables:[C$,M7]}),Mp=ke.define();class Yb{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new E$(e,Mp,n=>this.createHostedView(n))}static create(e){return new Yb(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const R7=Zb.compute([Mp],t=>{let e=t.facet(Mp).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:Yb.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class N7{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let i=this.view.coordsAtPos(n);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(a=>a.from<=n&&a.to>=n),s=r&&r.dir==kt.RTL?-1:1,o=this.source(this.view,n,e.x<i.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:n};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>or(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!eE(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=(n=i==null?void 0:i.end)!==null&&n!==void 0?n:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!T7(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!eE(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function eE(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function T7(t,e,n,i,r,s){let o=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let d=u[c];if(Math.max(d.top-r,r-d.bottom,d.left-i,i-d.right)<=s)return!0}return!1}function _7(t,e={}){let n=je.define(),i=wn.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,Fn.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),r);a.pos=o,r.end!=null&&(a.end=s.changes.mapPos(r.end)),r=a}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(I7)&&(r=null);return r},provide:r=>Mp.from(r)});return[i,un.define(r=>new N7(r,t,i,n,e.hoverTime||300)),R7]}function D7(t,e){let n=t.plugin(C$);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const I7=je.define(),tE=ke.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function hd(t,e){let n=t.plugin(A$),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const A$=un.fromClass(class{constructor(t){this.input=t.state.facet(nu),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(tE);this.top=new $h(t,!0,e.topContainer),this.bottom=new $h(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(tE);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new $h(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new $h(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(nu);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Pe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class $h{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=nE(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=nE(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function nE(t){let e=t.nextSibling;return t.remove(),e}const nu=ke.define({enables:A$});class $o extends Ma{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}$o.prototype.elementClass="";$o.prototype.toDOM=void 0;$o.prototype.mapMode=Fn.TrackBefore;$o.prototype.startSide=$o.prototype.endSide=-1;$o.prototype.point=!0;const kf=ke.define(),Ef=ke.define(),Fv=ke.define({combine:t=>t.some(e=>e)});function L7(t){let e=[B7];return t&&t.fixed===!1&&e.push(Fv.of(!0)),e}const B7=un.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Ef).map(e=>new rE(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Fv),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Fv)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ht.iter(this.view.state.facet(kf),this.view.viewport.from),i=[],r=this.gutters.map(s=>new z7(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==At.Text&&o){Uv(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==At.Text){Uv(n,i,s.from);for(let o of r)o.line(this.view,s,i)}for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Ef),n=t.state.facet(Ef),i=t.docChanged||t.heightChanged||t.viewportChanged||!ht.eq(t.startState.facet(kf),t.state.facet(kf),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new rE(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Pe.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==kt.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function iE(t){return Array.isArray(t)?t:[t]}function Uv(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class z7{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ht.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=n.top-this.height;if(this.i==r.elements.length){let o=new P$(e,n.height,s,i);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,n.height,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];Uv(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n);i&&this.addElement(e,n,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class rE{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=iE(n.markers(e)),n.initialSpacer&&(this.spacer=new P$(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=iE(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!ht.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class P${constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),j7(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function j7(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const F7=ke.define(),gl=ke.define({combine(t){return Lo(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return i}})}});class u0 extends $o{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function c0(t,e){return t.state.facet(gl).formatNumber(e,t.state)}const U7=Ef.compute([gl],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(F7)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new u0(c0(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(gl)!=e.state.facet(gl),initialSpacer(e){return new u0(c0(e,sE(e.state.doc.lines)))},updateSpacer(e,n){let i=c0(n.view,sE(n.view.state.doc.lines));return i==e.number?e:new u0(i)},domEventHandlers:t.facet(gl).domEventHandlers}));function V7(t={}){return[gl.of(t),L7(),U7]}function sE(t){let e=9;for(;e<t;)e=e*10+9;return e}const H7=new class extends $o{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},W7=kf.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(H7.range(r)))}return ht.of(e)});function G7(){return W7}const O$=new _d;function M$(t){window.codemirror&&window.codemirror.dispatch({effects:O$.reconfigure(Fe.readOnly.of(t))})}const Vv=je.define(),K7=wn.define({create(){return Ke.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(Vv)&&(n=Ke.none,i.value!==null&&(n=n.update({add:[X7.range(i.value)]})));return n},provide:t=>Pe.decorations.from(t)}),X7=Ke.line({class:"!bg-mantis-400/10"});function $$(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:Vv.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:Vv.of(e)})}}const d0=Ce(L.zero(16)),h0=Ce(L.zero(16)),f0=Ce(L.zero(16)),p0=Ce(L.zero(16)),m0=Ce(L.zero(16)),g0=Ce(L.zero(16)),Z7=Ce(L.zero(8)),y0=Ce(L.zero(16)),v0=Ce(L.zero(16)),w0=Ce(L.zero(16)),b0=Ce(L.zero(16)),x0=Ce(L.zero(16)),S0=Ce(L.zero(16)),R$=Ce(L.zero(16)),$p=Ce(L.zero(8)),yi=t=>Ce(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),vi=t=>Ce(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),ct={AX:d0,AL:yi(d0),AH:vi(d0),BX:h0,BL:yi(h0),BH:vi(h0),CX:f0,CL:yi(f0),CH:vi(f0),DX:p0,DL:yi(p0),DH:vi(p0),SP:m0,"SP.l":yi(m0),"SP.h":vi(m0),IP:g0,"IP.l":yi(g0),"IP.h":vi(g0),IR:Z7,ri:y0,"ri.l":yi(y0),"ri.h":vi(y0),id:v0,"id.l":yi(v0),"id.h":vi(v0),left:w0,"left.l":yi(w0),"left.h":vi(w0),right:b0,"right.l":yi(b0),"right.h":vi(b0),result:x0,"result.l":yi(x0),"result.h":vi(x0),FLAGS:S0,"FLAGS.l":yi(S0),"FLAGS.h":vi(S0),MAR:R$,MBR:$p},Ks=Ce({phase:"stopped"}),N$=Ce("ADD");function Y7(t){ie.set(ct.AX,L.fromUnsigned(t.cpu.AX,16)),ie.set(ct.BX,L.fromUnsigned(t.cpu.BX,16)),ie.set(ct.CX,L.fromUnsigned(t.cpu.CX,16)),ie.set(ct.DX,L.fromUnsigned(t.cpu.DX,16)),ie.set(ct.SP,L.fromUnsigned(t.cpu.SP,16)),ie.set(ct.IP,L.fromUnsigned(t.cpu.IP,16)),ie.set(ct.IR,L.fromUnsigned(t.cpu.IR,8)),ie.set(ct.ri,L.fromUnsigned(t.cpu.ri,16)),ie.set(ct.id,L.fromUnsigned(t.cpu.id,16)),ie.set(ct.left,L.fromUnsigned(t.cpu.left,16)),ie.set(ct.right,L.fromUnsigned(t.cpu.right,16)),ie.set(ct.result,L.fromUnsigned(t.cpu.result,16)),ie.set(ct.FLAGS,L.fromUnsigned(t.cpu.FLAGS,16)),ie.set(ct.MAR,L.fromUnsigned(t.cpu.MAR,16)),ie.set(ct.MBR,L.fromUnsigned(t.cpu.MBR,8)),ie.set(Ks,{phase:"stopped"})}var J7=Object.defineProperty,q7=(t,e)=>{for(var n in e)J7(t,n,{get:e[n],enumerable:!0})},fr={};q7(fr,{assign:()=>nz,colors:()=>mo,createStringInterpolator:()=>i1,skipAnimation:()=>j$,to:()=>z$,willAdvance:()=>r1});var Jb=zd(),Be=t=>Bd(t,Jb),qb=zd();Be.write=t=>Bd(t,qb);var zm=zd();Be.onStart=t=>Bd(t,zm);var Qb=zd();Be.onFrame=t=>Bd(t,Qb);var e1=zd();Be.onFinish=t=>Bd(t,e1);var Nl=[];Be.setTimeout=(t,e)=>{const n=Be.now()+e,i=()=>{const s=Nl.findIndex(o=>o.cancel==i);~s&&Nl.splice(s,1),io-=~s?1:0},r={time:n,handler:t,cancel:i};return Nl.splice(T$(n),0,r),io+=1,_$(),r};var T$=t=>~(~Nl.findIndex(e=>e.time>t)||~Nl.length);Be.cancel=t=>{zm.delete(t),Qb.delete(t),e1.delete(t),Jb.delete(t),qb.delete(t)};Be.sync=t=>{Hv=!0,Be.batchedUpdates(t),Hv=!1};Be.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Be.onStart(n)}return i.handler=t,i.cancel=()=>{zm.delete(n),e=null},i};var t1=typeof window<"u"?window.requestAnimationFrame:()=>{};Be.use=t=>t1=t;Be.now=typeof performance<"u"?()=>performance.now():Date.now;Be.batchedUpdates=t=>t();Be.catch=console.error;Be.frameLoop="always";Be.advance=()=>{Be.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):I$()};var no=-1,io=0,Hv=!1;function Bd(t,e){Hv?(e.delete(t),t(0)):(e.add(t),_$())}function _$(){no<0&&(no=0,Be.frameLoop!=="demand"&&t1(D$))}function Q7(){no=-1}function D$(){~no&&(t1(D$),Be.batchedUpdates(I$))}function I$(){const t=no;no=Be.now();const e=T$(no);if(e&&(L$(Nl.splice(0,e),n=>n.handler()),io-=e),!io){Q7();return}zm.flush(),Jb.flush(t?Math.min(64,no-t):16.667),Qb.flush(),qb.flush(),e1.flush()}function zd(){let t=new Set,e=t;return{add(n){io+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return io-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,io-=e.size,L$(e,i=>i(n)&&t.add(i)),io+=t.size,e=t)}}}function L$(t,e){t.forEach(n=>{try{e(n)}catch(i){Be.catch(i)}})}function ez(){}var tz=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),pe={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Kr(t,e){if(pe.arr(t)){if(!pe.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var rn=(t,e)=>t.forEach(e);function Ro(t,e,n){if(pe.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var ro=t=>pe.und(t)?[]:pe.arr(t)?t:[t];function B$(t,e){if(t.size){const n=Array.from(t);t.clear(),rn(n,e)}}var Rh=(t,...e)=>B$(t,n=>n(...e)),n1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),i1,z$,mo=null,j$=!1,r1=ez,nz=t=>{t.to&&(z$=t.to),t.now&&(Be.now=t.now),t.colors!==void 0&&(mo=t.colors),t.skipAnimation!=null&&(j$=t.skipAnimation),t.createStringInterpolator&&(i1=t.createStringInterpolator),t.requestAnimationFrame&&Be.use(t.requestAnimationFrame),t.batchedUpdates&&(Be.batchedUpdates=t.batchedUpdates),t.willAdvance&&(r1=t.willAdvance),t.frameLoop&&(Be.frameLoop=t.frameLoop)},wc=new Set,Mi=[],k0=[],Rp=0,jm={get idle(){return!wc.size&&!Mi.length},start(t){Rp>t.priority?(wc.add(t),Be.onStart(iz)):(F$(t),Be(Wv))},advance:Wv,sort(t){if(Rp)Be.onFrame(()=>jm.sort(t));else{const e=Mi.indexOf(t);~e&&(Mi.splice(e,1),U$(t))}},clear(){Mi=[],wc.clear()}};function iz(){wc.forEach(F$),wc.clear(),Be(Wv)}function F$(t){Mi.includes(t)||U$(t)}function U$(t){Mi.splice(rz(Mi,e=>e.priority>t.priority),0,t)}function Wv(t){const e=k0;for(let n=0;n<Mi.length;n++){const i=Mi[n];Rp=i.priority,i.idle||(r1(i),i.advance(t),i.idle||e.push(i))}return Rp=0,k0=Mi,k0.length=0,Mi=e,Mi.length>0}function rz(t,e){const n=t.findIndex(e);return n<0?t.length:n}var sz=(t,e,n)=>Math.min(Math.max(n,t),e),oz={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Qi="[-+]?\\d*\\.?\\d+",Np=Qi+"%";function Fm(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var az=new RegExp("rgb"+Fm(Qi,Qi,Qi)),lz=new RegExp("rgba"+Fm(Qi,Qi,Qi,Qi)),uz=new RegExp("hsl"+Fm(Qi,Np,Np)),cz=new RegExp("hsla"+Fm(Qi,Np,Np,Qi)),dz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,fz=/^#([0-9a-fA-F]{6})$/,pz=/^#([0-9a-fA-F]{8})$/;function mz(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=fz.exec(t))?parseInt(e[1]+"ff",16)>>>0:mo&&mo[t]!==void 0?mo[t]:(e=az.exec(t))?(Ya(e[1])<<24|Ya(e[2])<<16|Ya(e[3])<<8|255)>>>0:(e=lz.exec(t))?(Ya(e[1])<<24|Ya(e[2])<<16|Ya(e[3])<<8|lE(e[4]))>>>0:(e=dz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=pz.exec(t))?parseInt(e[1],16)>>>0:(e=hz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=uz.exec(t))?(oE(aE(e[1]),Nh(e[2]),Nh(e[3]))|255)>>>0:(e=cz.exec(t))?(oE(aE(e[1]),Nh(e[2]),Nh(e[3]))|lE(e[4]))>>>0:null}function E0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function oE(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=E0(r,i,t+1/3),o=E0(r,i,t),a=E0(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Ya(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function aE(t){return(parseFloat(t)%360+360)%360/360}function lE(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Nh(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function uE(t){let e=mz(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var fd=(t,e,n)=>{if(pe.fun(t))return t;if(pe.arr(t))return fd({range:t,output:e,extrapolate:n});if(pe.str(t.output[0]))return i1(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=yz(u,s);return gz(u,s[c],s[c+1],r[c],r[c+1],l,o,a,i.map)}};function gz(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function yz(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var vz=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return sz(0,1,r/t)},Tp=1.70158,Th=Tp*1.525,cE=Tp+1,dE=2*Math.PI/3,hE=2*Math.PI/4.5,_h=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,V$={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>cE*t*t*t-Tp*t*t,easeOutBack:t=>1+cE*Math.pow(t-1,3)+Tp*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Th+1)*2*t-Th)/2:(Math.pow(2*t-2,2)*((Th+1)*(t*2-2)+Th)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*dE),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*dE)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*hE))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*hE)/2+1,easeInBounce:t=>1-_h(1-t),easeOutBounce:_h,easeInOutBounce:t=>t<.5?(1-_h(1-2*t))/2:(1+_h(2*t-1))/2,steps:vz},pd=Symbol.for("FluidValue.get"),iu=Symbol.for("FluidValue.observers"),Oi=t=>!!(t&&t[pd]),zn=t=>t&&t[pd]?t[pd]():t,fE=t=>t[iu]||null;function wz(t,e){t.eventObserved?t.eventObserved(e):t(e)}function md(t,e){const n=t[iu];n&&n.forEach(i=>{wz(i,e)})}var H$=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");bz(this,t)}},bz=(t,e)=>W$(t,pd,e);function Um(t,e){if(t[pd]){let n=t[iu];n||W$(t,iu,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function gd(t,e){const n=t[iu];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[iu]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var W$=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Cf=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,xz=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,pE=new RegExp(`(${Cf.source})(%|[a-z]+)`,"i"),Sz=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Vm=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,G$=t=>{const[e,n]=kz(t);if(!e||n1())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Vm.test(n))return G$(n);if(n)return n}return t},kz=t=>{const e=Vm.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},C0,Ez=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,K$=t=>{C0||(C0=mo?new RegExp(`(${Object.keys(mo).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>zn(s).replace(Vm,G$).replace(xz,uE).replace(C0,uE)),n=e.map(s=>s.match(Cf).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>fd({...t,output:s}));return s=>{var l;const o=!pE.test(e[0])&&((l=e.find(u=>pE.test(u)))==null?void 0:l.replace(Cf,""));let a=0;return e[0].replace(Cf,()=>`${r[a++](s)}${o||""}`).replace(Sz,Ez)}},X$="react-spring: ",Z$=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${X$}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Cz=Z$(console.warn);function Az(){Cz(`${X$}The "interpolate" function is deprecated in v9 (use "to" instead)`)}Z$(console.warn);function Hm(t){return pe.str(t)&&(t[0]=="#"||/\d/.test(t)||!n1()&&Vm.test(t)||t in(mo||{}))}var Y$=n1()?y.useEffect:y.useLayoutEffect,Pz=()=>{const t=y.useRef(!1);return Y$(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Oz(){const t=y.useState()[1],e=Pz();return()=>{e.current&&t(Math.random())}}function Mz(t,e){const[n]=y.useState(()=>({inputs:e,result:t()})),i=y.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&$z(e,s.inputs)||(s={inputs:e,result:t()}):s=n,y.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function $z(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var Rz=t=>y.useEffect(t,Nz),Nz=[],yd=Symbol.for("Animated:node"),Tz=t=>!!t&&t[yd]===t,kr=t=>t&&t[yd],s1=(t,e)=>tz(t,yd,e),Wm=t=>t&&t[yd]&&t[yd].getPayload(),J$=class{constructor(){s1(this,this)}getPayload(){return this.payload||[]}},jd=class extends J${constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,pe.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new jd(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return pe.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,pe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},vd=class extends jd{constructor(t){super(0),this._string=null,this._toString=fd({output:[t,t]})}static create(t){return new vd(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(pe.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=fd({output:[this.getValue(),t]})),this._value=0,super.reset()}},_p={dependencies:null},Gm=class extends J${constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Ro(this.source,(n,i)=>{Tz(n)?e[i]=n.getValue(t):Oi(n)?e[i]=zn(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&rn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Ro(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){_p.dependencies&&Oi(t)&&_p.dependencies.add(t);const e=Wm(t);e&&rn(e,n=>this.add(n))}},q$=class extends Gm{constructor(t){super(t)}static create(t){return new q$(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(_z)),!0)}};function _z(t){return(Hm(t)?vd:jd).create(t)}function Gv(t){const e=kr(t);return e?e.constructor:pe.arr(t)?q$:Hm(t)?vd:jd}var mE=(t,e)=>{const n=!pe.fun(t)||t.prototype&&t.prototype.isReactComponent;return y.forwardRef((i,r)=>{const s=y.useRef(null),o=n&&y.useCallback(p=>{s.current=Lz(r,p)},[r]),[a,l]=Iz(i,e),u=Oz(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new Dz(c,l),h=y.useRef();Y$(()=>(h.current=d,rn(l,p=>Um(p,d)),()=>{h.current&&(rn(h.current.deps,p=>gd(p,h.current)),Be.cancel(h.current.update))})),y.useEffect(c,[]),Rz(()=>()=>{const p=h.current;rn(p.deps,g=>gd(g,p))});const f=e.getComponentProps(a.getValue());return y.createElement(t,{...f,ref:o})})},Dz=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Be.write(this.update)}};function Iz(t,e){const n=new Set;return _p.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Gm(t),_p.dependencies=null,[t,n]}function Lz(t,e){return t&&(pe.fun(t)?t(e):t.current=e),e}var gE=Symbol.for("AnimatedComponent"),Bz=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new Gm(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=yE(o)||"Anonymous";return pe.str(o)?o=s[o]||(s[o]=mE(o,r)):o=o[gE]||(o[gE]=mE(o,r)),o.displayName=`Animated(${a})`,o};return Ro(t,(o,a)=>{pe.arr(t)&&(a=yE(o)),s[a]=s(o)}),{animated:s}},yE=t=>pe.str(t)?t:t&&pe.str(t.displayName)?t.displayName:pe.fun(t)&&t.name||null;function ea(t,...e){return pe.fun(t)?t(...e):t}var bc=(t,e)=>t===!0||!!(e&&t&&(pe.fun(t)?t(e):ro(t).includes(e))),Q$=(t,e)=>pe.obj(t)?e&&t[e]:t,zz=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,jz=t=>t,eR=(t,e=jz)=>{let n=Fz;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);pe.und(s)||(i[r]=s)}return i},Fz=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Uz={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Vz(t){const e={};let n=0;if(Ro(t,(i,r)=>{Uz[r]||(e[r]=i,n++)}),n)return e}function tR(t){const e=Vz(t);if(e){const n={to:e};return Ro(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function wd(t){return t=zn(t),pe.arr(t)?t.map(wd):Hm(t)?fr.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Kv(t){return pe.fun(t)||pe.arr(t)&&pe.obj(t[0])}var Hz={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Xv={...Hz.default,mass:1,damping:1,easing:V$.linear,clamp:!1},Wz=class{constructor(){this.velocity=0,Object.assign(this,Xv)}};function Gz(t,e,n){n&&(n={...n},vE(n,e),e={...n,...e}),vE(t,e),Object.assign(t,e);for(const o in Xv)t[o]==null&&(t[o]=Xv[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return pe.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function vE(t,e){if(!pe.und(e.decay))t.duration=void 0;else{const n=!pe.und(e.tension)||!pe.und(e.friction);(n||!pe.und(e.frequency)||!pe.und(e.damping)||!pe.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var wE=[],Kz=class{constructor(){this.changed=!1,this.values=wE,this.toValues=null,this.fromValues=wE,this.config=new Wz,this.immediate=!1}};function Xz(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,c=bc(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{pe.und(n.pause)||(r.paused=bc(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||bc(p,e)),l=ea(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),l=u.time-Be.now()}function h(){l>0&&!fr.skipAnimation?(r.delayed=!0,u=Be.setTimeout(f,l),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var Zz=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?xc(t.get()):e.every(n=>n.noop)?nR(t.get()):Yi(t.get(),e.every(n=>n.finished)),nR=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Yi=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),xc=t=>({value:t,cancelled:!0,finished:!1});function Yz(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=eR(e,(b,m)=>m==="onRest"?void 0:b);let c,d;const h=new Promise((b,m)=>(c=b,d=m)),f=b=>{const m=r<=(n.cancelId||0)&&xc(i)||r!==n.asyncId&&Yi(i,!1);if(m)throw b.result=m,d(b),b},p=(b,m)=>{const v=new bE,w=new xE;return(async()=>{if(fr.skipAnimation)throw Zv(n),w.result=Yi(i,!1),d(w),w;f(v);const k=pe.obj(b)?{...b}:{...m,to:b};k.parentId=r,Ro(u,(O,M)=>{pe.und(k[M])&&(k[M]=O)});const C=await i.start(k);return f(v),n.paused&&await new Promise(O=>{n.resumeQueue.add(O)}),C})()};let g;if(fr.skipAnimation)return Zv(n),Yi(i,!1);try{let b;pe.arr(t)?b=(async m=>{for(const v of m)await p(v)})(t):b=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([b.then(c),h]),g=Yi(i.get(),!0,!1)}catch(b){if(b instanceof bE)g=b.result;else if(b instanceof xE)g=b.result;else throw b}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return pe.fun(o)&&Be.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function Zv(t,e){B$(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var bE=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},xE=class extends Error{constructor(){super("SkipAnimationSignal")}},Yv=t=>t instanceof o1,Jz=1,o1=class extends H${constructor(){super(...arguments),this.id=Jz++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=kr(this);return t&&t.getValue()}to(...t){return fr.to(this,t)}interpolate(...t){return Az(),fr.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){md(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||jm.sort(this),md(this,{type:"priority",parent:this,priority:t})}},Na=Symbol.for("SpringPhase"),iR=1,Jv=2,qv=4,A0=t=>(t[Na]&iR)>0,Ts=t=>(t[Na]&Jv)>0,Lu=t=>(t[Na]&qv)>0,SE=(t,e)=>e?t[Na]|=Jv|iR:t[Na]&=~Jv,kE=(t,e)=>e?t[Na]|=qv:t[Na]&=~qv,pt=class extends o1{constructor(t,e){if(super(),this.animation=new Kz,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!pe.und(t)||!pe.und(e)){const n=pe.obj(t)?{...t}:{...e,from:t};pe.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ts(this)||this._state.asyncTo)||Lu(this)}get goal(){return zn(this.animation.to)}get velocity(){const t=kr(this);return t instanceof jd?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return A0(this)}get isAnimating(){return Ts(this)}get isPaused(){return Lu(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Wm(i.to);!o&&Oi(i.to)&&(r=ro(zn(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==vd?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const g=i.fromValues[c],b=u.v0!=null?u.v0:u.v0=pe.arr(s.velocity)?s.velocity[c]:s.velocity;let m;const v=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(pe.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,k=Math.exp(-(1-w)*p);f=g+b/(1-w)*(1-k),h=Math.abs(u.lastPosition-f)<=v,m=b*k}else{m=u.lastVelocity==null?b:u.lastVelocity;const w=s.restVelocity||v/10,k=s.clamp?0:s.bounce,C=!pe.und(k),O=g==d?u.v0>0:g<d;let M,E=!1;const N=1,D=Math.ceil(t/N);for(let T=0;T<D&&(M=Math.abs(m)>w,!(!M&&(h=Math.abs(d-f)<=v,h)));++T){C&&(E=f==d||f>d==O,E&&(m=-m*k,f=d));const F=-s.tension*1e-6*(f-d),j=-s.friction*.001*m,B=(F+j)/s.mass;m=m+B*N,f=f+m*N}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=g+s.easing(w)*(d-g),m=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=m,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=kr(this),l=a.getValue();if(e){const u=zn(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Be.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ts(this)){const{to:t,config:e}=this.animation;Be.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return pe.und(t)?(n=this.queue||[],this.queue=[]):n=[pe.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>Zz(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Zv(this._state,t&&this._lastCallId),Be.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=pe.obj(n)?n[e]:n,(n==null||Kv(n))&&(n=void 0),i=pe.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return A0(this)||(t.reverse&&([n,i]=[i,n]),i=zn(i),pe.und(i)?kr(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,eR(t,(o,a)=>/^on/.test(a)?Q$(o,n):o)),CE(this,t,"onProps"),zu(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return Xz(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Lu(this)||(kE(this,!0),Rh(s.pauseQueue),zu(this,"onPause",Yi(this,Bu(this,this.animation.to)),this))},resume:()=>{Lu(this)&&(kE(this,!1),Ts(this)&&this._resume(),Rh(s.resumeQueue),zu(this,"onResume",Yi(this,Bu(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=qz(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(xc(this));const i=!pe.und(t.to),r=!pe.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(xc(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;r&&!i&&(!e.default||pe.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!Kr(d,u);h&&(a.from=d),d=zn(d);const f=!Kr(c,l);f&&this._focus(c);const p=Kv(e.to),{config:g}=a,{decay:b,velocity:m}=g;(i||r)&&(g.velocity=0),e.config&&!p&&Gz(g,ea(e.config,s),e.config!==o.config?ea(o.config,s):void 0);let v=kr(this);if(!v||pe.und(c))return n(Yi(this,!0));const w=pe.und(e.reset)?r&&!e.default:!pe.und(d)&&bc(e.reset,s),k=w?d:this.get(),C=wd(c),O=pe.num(C)||pe.arr(C)||Hm(C),M=!p&&(!O||bc(o.immediate||e.immediate,s));if(f){const T=Gv(c);if(T!==v.constructor)if(M)v=this._set(C);else throw Error(`Cannot animate between ${v.constructor.name} and ${T.name}, as the "to" prop suggests`)}const E=v.constructor;let N=Oi(c),D=!1;if(!N){const T=w||!A0(this)&&h;(f||T)&&(D=Kr(wd(k),C),N=!D),(!Kr(a.immediate,M)&&!M||!Kr(g.decay,b)||!Kr(g.velocity,m))&&(N=!0)}if(D&&Ts(this)&&(a.changed&&!w?N=!0:N||this._stop(l)),!p&&((N||Oi(l))&&(a.values=v.getPayload(),a.toValues=Oi(c)?null:E==vd?[1]:ro(C)),a.immediate!=M&&(a.immediate=M,!M&&!w&&this._set(l)),N)){const{onRest:T}=a;rn(ej,j=>CE(this,e,j));const F=Yi(this,Bu(this,l));Rh(this._pendingCalls,F),this._pendingCalls.add(n),a.changed&&Be.batchedUpdates(()=>{var j;a.changed=!w,T==null||T(F,this),w?ea(o.onRest,F):(j=a.onStart)==null||j.call(a,F,this)})}w&&this._set(k),p?n(Yz(e.to,e,this._state,this)):N?this._start():Ts(this)&&!f?this._pendingCalls.add(n):n(nR(k))}_focus(t){const e=this.animation;t!==e.to&&(fE(this)&&this._detach(),e.to=t,fE(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Oi(e)&&(Um(e,this),Yv(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Oi(t)&&gd(t,this)}_set(t,e=!0){const n=zn(t);if(!pe.und(n)){const i=kr(this);if(!i||!Kr(n,i.getValue())){const r=Gv(n);!i||i.constructor!=r?s1(this,r.create(n)):i.setValue(n),i&&Be.batchedUpdates(()=>{this._onChange(n,e)})}}return kr(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,zu(this,"onStart",Yi(this,Bu(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),ea(this.animation.onChange,t,this)),ea(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;kr(this).reset(zn(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Ts(this)||(SE(this,!0),Lu(this)||this._resume())}_resume(){fr.skipAnimation?this.finish():jm.start(this)}_stop(t,e){if(Ts(this)){SE(this,!1);const n=this.animation;rn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),md(this,{type:"idle",parent:this});const i=e?xc(this.get()):Yi(this.get(),Bu(this,t??n.to));Rh(this._pendingCalls,i),n.changed&&(n.changed=!1,zu(this,"onRest",i,this))}}};function Bu(t,e){const n=wd(e),i=wd(t.get());return Kr(i,n)}function qz(t,e=t.loop,n=t.to){const i=ea(e);if(i){const r=i!==!0&&tR(i),s=(r||t).reverse,o=!r||r.reset;return Qz({...t,loop:e,default:!1,pause:void 0,to:!s||Kv(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Qz(t){const{to:e,from:n}=t=tR(t),i=new Set;return pe.obj(e)&&EE(e,i),pe.obj(n)&&EE(n,i),t.keys=i.size?Array.from(i):null,t}function EE(t,e){Ro(t,(n,i)=>n!=null&&e.add(i))}var ej=["onStart","onRest","onChange","onPause","onResume"];function CE(t,e,n){t.animation[n]=e[n]!==zz(e,n)?Q$(e[n],t.key):void 0}function zu(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var a1=({children:t,...e})=>{const n=y.useContext(Dp),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=Mz(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Dp;return y.createElement(s,{value:e},t)},Dp=tj(a1,{});a1.Provider=Dp.Provider;a1.Consumer=Dp.Consumer;function tj(t,e){return Object.assign(t,y.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var nj=class extends o1{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=fd(...e);const n=this._get(),i=Gv(n);s1(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Kr(e,n)||(kr(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&AE(this._active)&&P0(this)}_get(){const t=pe.arr(this.source)?this.source.map(zn):ro(zn(this.source));return this.calc(...t)}_start(){this.idle&&!AE(this._active)&&(this.idle=!1,rn(Wm(this),t=>{t.done=!1}),fr.skipAnimation?(Be.batchedUpdates(()=>this.advance()),P0(this)):jm.start(this))}_attach(){let t=1;rn(ro(this.source),e=>{Oi(e)&&Um(e,this),Yv(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){rn(ro(this.source),t=>{Oi(t)&&gd(t,this)}),this._active.clear(),P0(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=ro(this.source).reduce((e,n)=>Math.max(e,(Yv(n)?n.priority:0)+1),0))}};function ij(t){return t.idle!==!1}function AE(t){return!t.size||Array.from(t).every(ij)}function P0(t){t.idle||(t.idle=!0,rn(Wm(t),e=>{e.done=!0}),md(t,{type:"idle",parent:t}))}fr.assign({createStringInterpolator:K$,to:(t,e)=>new nj(t,e)});var rR=/^--/;function rj(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!rR.test(t)&&!(Sc.hasOwnProperty(t)&&Sc[t])?e+"px":(""+e).trim()}var PE={};function sj(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,u=Object.values(l),c=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:PE[d]||(PE[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in i)if(i.hasOwnProperty(d)){const h=rj(d,i[d]);rR.test(d)?t.style.setProperty(d,h):t.style[d]=h}c.forEach((d,h)=>{t.setAttribute(d,u[h])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var Sc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oj=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),aj=["Webkit","Ms","Moz","O"];Sc=Object.keys(Sc).reduce((t,e)=>(aj.forEach(n=>t[oj(n,e)]=t[e]),t),Sc);var lj=/^(matrix|translate|scale|rotate|skew)/,uj=/^(translate)/,cj=/^(rotate|skew)/,O0=(t,e)=>pe.num(t)&&t!==0?t+e:t,Af=(t,e)=>pe.arr(t)?t.every(n=>Af(n,e)):pe.num(t)?t===e:parseFloat(t)===e,dj=class extends Gm{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>O0(a,"px")).join(",")})`,Af(o,0)])),Ro(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(lj.test(a)){if(delete i[a],pe.und(o))return;const l=uj.test(a)?"px":cj.test(a)?"deg":"";r.push(ro(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${O0(h,l)})`,Af(h,0)]:u=>[`${a}(${u.map(c=>O0(c,l)).join(",")})`,Af(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new hj(r,s)),super(i)}},hj=class extends H${constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return rn(this.inputs,(n,i)=>{const r=zn(n[0]),[s,o]=this.transforms[i](pe.arr(r)?r:n.map(zn));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&rn(this.inputs,e=>rn(e,n=>Oi(n)&&Um(n,this)))}observerRemoved(t){t==0&&rn(this.inputs,e=>rn(e,n=>Oi(n)&&gd(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),md(this,t)}},fj=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];fr.assign({batchedUpdates:Do.unstable_batchedUpdates,createStringInterpolator:K$,colors:oz});var pj=Bz(fj,{applyAnimatedValues:sj,createAnimatedStyle:t=>new dj(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Dt=pj.animated;const Rt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"}},Ve=(t=Rt.stone[800])=>({backgroundColor:new pt(t),opacity:new pt(1)}),Wt=()=>({strokeDashoffset:new pt(1),opacity:new pt(1)}),l1={bus:{address:{stroke:new pt(Rt.stone[700])},data:{stroke:new pt(Rt.stone[700])},rd:{stroke:new pt(Rt.stone[700])},wr:{stroke:new pt(Rt.stone[700])},iom:Wt(),mem:{stroke:new pt(Rt.red[500])},handshake:Wt(),pic:Wt(),pio:Wt(),timer:Wt(),intr:Wt(),inta:Wt(),int0:Wt(),int1:Wt(),int2:Wt(),"switches->pio":Wt(),"pio->leds":Wt(),printer:{data:Wt(),strobe:Wt(),busy:Wt()}},clock:{angle:new pt(0)},cpu:{internalBus:{address:{strokeDashoffset:new pt(1),opacity:new pt(1),path:new pt("")},data:{strokeDashoffset:new pt(1),opacity:new pt(1),path:new pt("")}},alu:{operands:Wt(),results:Wt(),cog:{rot:new pt(0)},operation:{backgroundColor:new pt(Rt.stone[800])}},decoder:{path:Wt(),progress:{progress:new pt(0),opacity:new pt(1)}},AX:Ve(),BX:Ve(),CX:Ve(),DX:Ve(),SP:Ve(),IP:Ve(),IR:Ve(),ri:Ve(),id:Ve(),left:Ve(),right:Ve(),result:Ve(),FLAGS:Ve(),MAR:Ve(),MBR:Ve()},handshake:{DATA:Ve(),STATE:Ve()},pic:{IMR:Ve(),IRR:Ve(),ISR:Ve(),INT0:Ve(),INT1:Ve(),INT2:Ve(),INT3:Ve(),INT4:Ve(),INT5:Ve(),INT6:Ve(),INT7:Ve()},pio:{PA:Ve(),PB:Ve(),CA:Ve(),CB:Ve()},printer:{printing:{progress:new pt(0),opacity:new pt(1)}},timer:{CONT:Ve(),COMP:Ve()}};function rt(t){return UP(l1,t)}function sR(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof pt?e[n]=i.get():e[n]=sR(i)}return e}const mj=sR(l1);function oR(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof pt?i.set(e[n]):oR(t[n],e[n])}}const gj=()=>oR(l1,mj),bd=new Set;async function qe(t,e){const n=ie.get(gn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=ie.sub(gn,()=>{o(),s()})}),await qe(t,e);const i=dr();if(i.disableAnimations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:e.duration*i.executionUnit,easing:V$[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;const l=rt(s);if(a===void 0)return l.set(o);{bd.add(s);const u=await rt(s).start({from:o,to:a,config:r});return bd.delete(s),u}}))}const yj=()=>bd.forEach(t=>rt(t).pause()),vj=()=>bd.forEach(t=>rt(t).resume());function wj(){bd.forEach(t=>rt(t).stop(!0)),setTimeout(()=>gj(),10)}async function Ei(t,e=Rt.mantis[400]){return await qe({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function Ci(t){return await qe({key:`${t}.backgroundColor`,to:Rt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function ru(t){await qe({key:"bus.data.stroke",to:Rt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Ei("cpu.MBR"),ie.set($p,t),await Ci("cpu.MBR")}async function Di(t,e){return await qe([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function An(t){return await qe({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function bj(t){switch(t.type){case"bus:io.selected":{await Promise.all([qe({key:"bus.mem.stroke",to:Rt.stone[700]},{duration:1,easing:"easeInSine"}),Di(`bus.${t.chip}`,15)]);return}case"bus:io.error":{su(t.error);return}case"bus:reset":{await Promise.all([qe([{key:"bus.address.stroke",to:Rt.stone[700]},{key:"bus.data.stroke",to:Rt.stone[700]},{key:"bus.rd.stroke",to:Rt.stone[700]},{key:"bus.wr.stroke",to:Rt.stone[700]}],{duration:1,easing:"easeInSine"}),qe({key:"bus.mem.stroke",to:Rt.red[500]},{duration:1,easing:"easeOutSine"}),An("bus.iom"),An("bus.handshake"),An("bus.pio"),An("bus.pic"),An("bus.timer")]);return}default:return t}}async function xj(t){switch(t.type){case"clock:tick":return;default:return t.type}}function Sj(t){switch(t){case"IP":return"M 551 309 H 575 V 349 H 598";case"SP":return"M 551 349 H 598";case"ri":return"M 544 388 H 575 V 349 H 598";default:throw new Error(`Invalid register ${t}`)}}function kj(){const{path:t,...e}=rt("cpu.internalBus.address");return x.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[x.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598"].join(" ")}),x.jsx(Dt.path,{d:t,className:"fill-none stroke-blue-500 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var u1={exports:{}},Tl=typeof Reflect=="object"?Reflect:null,OE=Tl&&typeof Tl.apply=="function"?Tl.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},Pf;Tl&&typeof Tl.ownKeys=="function"?Pf=Tl.ownKeys:Object.getOwnPropertySymbols?Pf=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Pf=function(e){return Object.getOwnPropertyNames(e)};function Ej(t){console&&console.warn&&console.warn(t)}var aR=Number.isNaN||function(e){return e!==e};function tt(){tt.init.call(this)}u1.exports=tt;u1.exports.once=Oj;tt.EventEmitter=tt;tt.prototype._events=void 0;tt.prototype._eventsCount=0;tt.prototype._maxListeners=void 0;var ME=10;function Km(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(tt,"defaultMaxListeners",{enumerable:!0,get:function(){return ME},set:function(t){if(typeof t!="number"||t<0||aR(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ME=t}});tt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};tt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||aR(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function lR(t){return t._maxListeners===void 0?tt.defaultMaxListeners:t._maxListeners}tt.prototype.getMaxListeners=function(){return lR(this)};tt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")OE(l,this,n);else for(var u=l.length,c=fR(l,u),i=0;i<u;++i)OE(c[i],this,n);return!0};function uR(t,e,n,i){var r,s,o;if(Km(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=lR(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Ej(a)}return t}tt.prototype.addListener=function(e,n){return uR(this,e,n,!1)};tt.prototype.on=tt.prototype.addListener;tt.prototype.prependListener=function(e,n){return uR(this,e,n,!0)};function Cj(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function cR(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Cj.bind(i);return r.listener=n,i.wrapFn=r,r}tt.prototype.once=function(e,n){return Km(n),this.on(e,cR(this,e,n)),this};tt.prototype.prependOnceListener=function(e,n){return Km(n),this.prependListener(e,cR(this,e,n)),this};tt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Km(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Aj(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};tt.prototype.off=tt.prototype.removeListener;tt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function dR(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?Pj(r):fR(r,r.length)}tt.prototype.listeners=function(e){return dR(this,e,!0)};tt.prototype.rawListeners=function(e){return dR(this,e,!1)};tt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):hR.call(t,e)};tt.prototype.listenerCount=hR;function hR(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}tt.prototype.eventNames=function(){return this._eventsCount>0?Pf(this._events):[]};function fR(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Aj(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Pj(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Oj(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}pR(t,e,s,{once:!0}),e!=="error"&&Mj(t,r,{once:!0})})}function Mj(t,e,n){typeof t.on=="function"&&pR(t,"error",e,n)}function pR(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var $j=u1.exports;function Vr(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Vr.prototype[Symbol.iterator]=function(){return this});Vr.of=function(){var t=arguments,e=t.length,n=0;return new Vr(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Vr.empty=function(){var t=new Vr(function(){return{done:!0}});return t};Vr.fromSequence=function(t){var e=0,n=t.length;return new Vr(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Vr.is=function(t){return t instanceof Vr?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Xm=Vr;const zi=fu(Xm);var Zm={};Zm.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Zm.SYMBOL_SUPPORT=typeof Symbol<"u";var Rj=Xm,mR=Zm,Nj=mR.ARRAY_BUFFER_SUPPORT,Tj=mR.SYMBOL_SUPPORT;function _j(t){return typeof t=="string"||Array.isArray(t)||Nj&&ArrayBuffer.isView(t)?Rj.fromSequence(t):typeof t!="object"||t===null?null:Tj&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var gR=function(e){var n=_j(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Dj=gR,Ij=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Dj(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const yR=fu(Ij);var Lj=Xm,Bj=gR,zj=function(){var e=arguments,n=null,i=-1;return new Lj(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Bj(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const gs=fu(zj);function jj(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let Ut=jj;typeof Object.assign=="function"&&(Ut=Object.assign);function Ii(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function sn(t){return typeof t=="object"&&t!==null}function vR(t){let e;for(e in t)return!1;return!0}function wi(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Vi(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function $E(t){return!(!sn(t)||t.attributes&&!Array.isArray(t.attributes))}function Fj(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class c1 extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class fe extends c1{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fe.prototype.constructor)}}class oe extends c1{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,oe.prototype.constructor)}}class Me extends c1{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Me.prototype.constructor)}}function wR(t,e){this.key=t,this.attributes=e,this.clear()}wR.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function bR(t,e){this.key=t,this.attributes=e,this.clear()}bR.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function xR(t,e){this.key=t,this.attributes=e,this.clear()}xR.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function bu(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}bu.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};bu.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};bu.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};bu.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const SR=0,kR=1,Uj=2,ER=3;function Os(t,e,n,i,r,s,o){let a,l,u,c;if(i=""+i,n===SR){if(a=t._nodes.get(i),!a)throw new oe(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===ER){if(r=""+r,l=t._edges.get(r),!l)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new oe(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(i),!l)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===kR?a=l.source:a=l.target,u=r,c=s}return[a,u,c]}function Vj(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Os(this,e,n,i,r,s);return o.attributes[a]}}function Hj(t,e,n){t.prototype[e]=function(i,r){const[s]=Os(this,e,n,i,r);return s.attributes}}function Wj(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Os(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function Gj(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=Os(this,e,n,i,r,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Kj(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=Os(this,e,n,i,r,s,o);if(typeof u!="function")throw new fe(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Xj(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Os(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Zj(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Os(this,e,n,i,r,s);if(!sn(a))throw new fe(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Yj(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Os(this,e,n,i,r,s);if(!sn(a))throw new fe(`Graph.${e}: provided attributes are not a plain object.`);return Ut(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Jj(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Os(this,e,n,i,r,s);if(typeof a!="function")throw new fe(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const qj=[{name:t=>`get${t}Attribute`,attacher:Vj},{name:t=>`get${t}Attributes`,attacher:Hj},{name:t=>`has${t}Attribute`,attacher:Wj},{name:t=>`set${t}Attribute`,attacher:Gj},{name:t=>`update${t}Attribute`,attacher:Kj},{name:t=>`remove${t}Attribute`,attacher:Xj},{name:t=>`replace${t}Attributes`,attacher:Zj},{name:t=>`merge${t}Attributes`,attacher:Yj},{name:t=>`update${t}Attributes`,attacher:Jj}];function Qj(t){qj.forEach(function({name:e,attacher:n}){n(t,e("Node"),SR),n(t,e("Source"),kR),n(t,e("Target"),Uj),n(t,e("Opposite"),ER)})}function eF(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ii(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function tF(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=Ii(this,s,o,n),!r)throw new oe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function nF(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ii(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function iF(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Ii(this,a,l,n),!o)throw new oe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function rF(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Ii(this,a,l,n),!o)throw new oe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new fe(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function sF(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ii(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function oF(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ii(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!sn(r))throw new fe(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function aF(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ii(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!sn(r))throw new fe(`Graph.${e}: provided attributes are not a plain object.`);return Ut(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function lF(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Me(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Me(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Ii(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Me(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new fe(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const uF=[{name:t=>`get${t}Attribute`,attacher:eF},{name:t=>`get${t}Attributes`,attacher:tF},{name:t=>`has${t}Attribute`,attacher:nF},{name:t=>`set${t}Attribute`,attacher:iF},{name:t=>`update${t}Attribute`,attacher:rF},{name:t=>`remove${t}Attribute`,attacher:sF},{name:t=>`replace${t}Attributes`,attacher:oF},{name:t=>`merge${t}Attributes`,attacher:aF},{name:t=>`update${t}Attributes`,attacher:lF}];function cF(t){uF.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const dF=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function hF(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function fF(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function M0(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new zi(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function pF(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function mF(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function $0(t,e){let n=t[e];return n.next!==void 0?new zi(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):zi.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function gF(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):yR(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function CR(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=i(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function yF(t,e){if(t.size===0)return zi.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new zi(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function d1(t,e,n,i,r,s){const o=e?fF:hF;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function vF(t,e,n,i){const r=[];return d1(!1,t,e,n,i,function(s){r.push(s)}),r}function wF(t,e,n){let i=zi.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=gs(i,M0(n.in))),e!=="in"&&typeof n.out<"u"&&(i=gs(i,M0(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=gs(i,M0(n.undirected))),i}function h1(t,e,n,i,r,s,o){const a=n?mF:pF;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function bF(t,e,n,i,r){const s=[];return h1(!1,t,e,n,i,r,function(o){s.push(o)}),s}function xF(t,e,n,i){let r=zi.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=gs(r,$0(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=gs(r,$0(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=gs(r,$0(n.undirected,i))),r}function SF(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return gF(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new oe(`Graph.${n}: could not find the "${s}" node in the graph.`);return vF(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new oe(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new oe(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return bF(i,this.multi,r,a,o)}throw new fe(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function kF(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,CR(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new oe(`Graph.${s}: could not find the "${u}" node in the graph.`);return d1(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new oe(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new oe(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return h1(!1,i,this.multi,r,h,c,d)}throw new fe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,g,b,m,v,w,k)=>{d[f++]=c(p,g,b,m,v,w,k)})}else d=[],u.push((h,f,p,g,b,m,v)=>{d.push(c(h,f,p,g,b,m,v))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,g,b,m,v)=>{c(h,f,p,g,b,m,v)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new fe(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new fe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,g,b,m,v,w)=>{h=c(h,f,p,g,b,m,v,w)}),this[s].apply(this,u),h}}function EF(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=l,CR(!0,this,i,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new oe(`Graph.${s}: could not find the "${l}" node in the graph.`);return d1(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new oe(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new oe(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return h1(!0,i,this.multi,r,d,u,c)}throw new fe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,g,b,m)=>u(d,h,f,p,g,b,m)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,g,b,m)=>!u(d,h,f,p,g,b,m)),!this[s].apply(this,l)}}function CF(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return zi.empty();if(!arguments.length)return yF(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new oe(`Graph.${s}: could not find the "${o}" node in the graph.`);return wF(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new oe(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new oe(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return xF(i,r,l,a)}throw new fe(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function AF(t){dF.forEach(e=>{SF(t,e),kF(t,e),EF(t,e),CF(t,e)})}const PF=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ym(){this.A=null,this.B=null}Ym.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Ym.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function ju(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function f1(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return ju(t,null,i,i.undirected,r);if(typeof n=="string")return ju(t,null,i,i[n],r)}const s=new Ym;let o;if(e!=="undirected"){if(n!=="out"){if(o=ju(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=ju(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=ju(t,s,i,i.undirected,r),t&&o))return o}function OF(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return f1(!1,t,e,n,function(r){i.push(r)}),i}function Fu(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new zi(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function MF(t,e,n){if(t!=="mixed"){if(t==="undirected")return Fu(null,n,n.undirected);if(typeof e=="string")return Fu(null,n,n[e])}let i=zi.empty();const r=new Ym;return t!=="undirected"&&(e!=="out"&&(i=gs(i,Fu(r,n,n.in))),e!=="in"&&(i=gs(i,Fu(r,n,n.out)))),t!=="directed"&&(i=gs(i,Fu(r,n,n.undirected))),i}function $F(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new oe(`Graph.${n}: could not find the "${s}" node in the graph.`);return OF(i==="mixed"?this.type:i,r,o)}}function RF(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new oe(`Graph.${s}: could not find the "${u}" node in the graph.`);f1(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new fe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function NF(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new oe(`Graph.${o}: could not find the "${u}" node in the graph.`);return f1(!0,i==="mixed"?this.type:i,r,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function TF(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return zi.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new oe(`Graph.${s}: could not find the "${o}" node in the graph.`);return MF(i==="mixed"?this.type:i,r,a)}}function _F(t){PF.forEach(e=>{$F(t,e),RF(t,e),NF(t,e),TF(t,e)})}function Dh(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,u,c,d,h,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do{if(h=d.target,p=!0,f=r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do{if(h=d.target,h.key!==u&&(h=d.source),p=!0,f=r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(n&&!p&&(f=r(l.key,null,l.attributes,null,null,null,null),t&&f))return null}}function DF(t,e){const n={key:t};return vR(e.attributes)||(n.attributes=Ut({},e.attributes)),n}function IF(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return vR(n.attributes)||(i.attributes=Ut({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function LF(t){if(!sn(t))throw new fe('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new fe("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!sn(t.attributes)||t.attributes===null))throw new fe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function BF(t){if(!sn(t))throw new fe('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new fe("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new fe("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!sn(t.attributes)||t.attributes===null))throw new fe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new fe("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const zF=Fj(),jF=new Set(["directed","undirected","mixed"]),RE=new Set(["domain","_events","_eventsCount","_maxListeners"]),FF=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],UF={allowSelfLoops:!0,multi:!1,type:"mixed"};function VF(t,e,n){if(n&&!sn(n))throw new fe(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Me(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function NE(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function AR(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new Me(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Me(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!sn(a))throw new fe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Me(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new oe(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new oe(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Me(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Me(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new bu(i,r,l,u,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function HF(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new Me(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Me(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new fe(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!sn(a))throw new fe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Me(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new Me(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const v=[f.key,!1,!1,!1];if(l?!u:!a)return v;if(l){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Ut(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return v}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Me(`Graph.${e}: the "${r}" edge already exists in the graph.`);let g=!1,b=!1;c||(c=NE(t,s,{}),g=!0,s===o&&(d=c,b=!0)),d||(d=NE(t,o,{}),b=!0),h=new bu(i,r,c,d,a),t._edges.set(r,h);const m=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,m&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,m&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,g,b]}function Ja(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class st extends $j.EventEmitter{constructor(e){if(super(),e=Ut({},UF,e),typeof e.multi!="boolean")throw new fe(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!jF.has(e.type))throw new fe(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new fe(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?wR:e.type==="directed"?bR:xR;wi(this,"NodeDataClass",n);const i="geid_"+zF()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};wi(this,"_attributes",{}),wi(this,"_nodes",new Map),wi(this,"_edges",new Map),wi(this,"_directedSize",0),wi(this,"_undirectedSize",0),wi(this,"_directedSelfLoopCount",0),wi(this,"_undirectedSelfLoopCount",0),wi(this,"_edgeKeyGenerator",s),wi(this,"_options",e),RE.forEach(o=>wi(this,o,this[o])),Vi(this,"order",()=>this._nodes.size),Vi(this,"size",()=>this._edges.size),Vi(this,"directedSize",()=>this._directedSize),Vi(this,"undirectedSize",()=>this._undirectedSize),Vi(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Vi(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Vi(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Vi(this,"multi",this._options.multi),Vi(this,"type",this._options.type),Vi(this,"allowSelfLoops",this._options.allowSelfLoops),Vi(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new fe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new fe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new fe(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Me("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new oe(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new oe(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Me("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new oe(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new oe(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new Me("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new oe(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new oe(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new oe(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new oe(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new oe(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new oe(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new oe(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new oe(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new oe(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new oe(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new oe(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new oe(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return VF(this,e,n).key}mergeNode(e,n){if(n&&!sn(n))throw new fe(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(Ut(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new fe(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do Ja(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do Ja(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do Ja(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Ii(this,i,r,this.type),!n)throw new oe(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new oe(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Ja(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Me("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Me("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Ii(this,e,n,"directed");if(!i)throw new oe(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Ja(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Me("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Me("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Ii(this,e,n,"undirected");if(!i)throw new oe(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Ja(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new fe("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!sn(e))throw new fe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!sn(e))throw new fe("Graph.mergeAttributes: provided attributes are not a plain object.");return Ut(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new fe("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new fe("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!$E(n))throw new fe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new fe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!$E(n))throw new fe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new fe("Graph.forEachAdjacencyEntry: expecting a callback.");Dh(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new fe("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Dh(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new fe("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Dh(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new fe("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Dh(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):yR(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new fe("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new fe("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new fe("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new fe("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new fe("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new fe("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new fe("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new fe("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new zi(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=DF(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=IF(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof st)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!sn(e))throw new fe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!sn(e.attributes))throw new fe("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new fe("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],LF(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new fe("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],BF(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new st(Ut({},this._options,e));return n.replaceAttributes(Ut({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Ut({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Me(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Me("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Me("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,AR(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Ut({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!RE.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,wi(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(st.prototype[Symbol.for("nodejs.util.inspect.custom")]=st.prototype.inspect);FF.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?AR:HF;t.generateKey?st.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:st.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});Qj(st);cF(st);AF(st);_F(st);class PR extends st{constructor(e){const n=Ut({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new fe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new fe('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class p1 extends st{constructor(e){const n=Ut({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new fe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new fe('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class OR extends st{constructor(e){const n=Ut({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new fe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class MR extends st{constructor(e){const n=Ut({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new fe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new fe('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class $R extends st{constructor(e){const n=Ut({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new fe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new fe('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function xu(t){t.from=function(e,n){const i=Ut({},e.options,n),r=new t(i);return r.import(e),r}}xu(st);xu(PR);xu(p1);xu(OR);xu(MR);xu($R);st.Graph=st;st.DirectedGraph=PR;st.UndirectedGraph=p1;st.MultiGraph=OR;st.MultiDirectedGraph=MR;st.MultiUndirectedGraph=$R;st.InvalidArgumentsGraphError=fe;st.NotFoundGraphError=oe;st.UsageGraphError=Me;var WF=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},RR=Zm,GF=RR.ARRAY_BUFFER_SUPPORT,KF=RR.SYMBOL_SUPPORT,XF=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||GF&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(KF&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},NR=Xm,ZF=XF;function zt(){this.clear()}zt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};zt.prototype.enqueue=function(t){return this.items.push(t),++this.size};zt.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};zt.prototype.peek=function(){if(this.size)return this.items[this.offset]};zt.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};zt.prototype.toArray=function(){return this.items.slice(this.offset)};zt.prototype.values=function(){var t=this.items,e=this.offset;return new NR(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};zt.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new NR(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(zt.prototype[Symbol.iterator]=zt.prototype.values);zt.prototype.toString=function(){return this.toArray().join(",")};zt.prototype.toJSON=function(){return this.toArray()};zt.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:zt,enumerable:!1}),t};typeof Symbol<"u"&&(zt.prototype[Symbol.for("nodejs.util.inspect.custom")]=zt.prototype.inspect);zt.from=function(t){var e=new zt;return ZF(t,function(n){e.enqueue(n)}),e};zt.of=function(){return zt.from(arguments)};var YF=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},TR=WF,JF=YF;function qF(t,e,n){if(!TR(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,g,b,m=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=r(c),p=0,b=d.length;p<b;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){m=!0;break e}}else for(u=l,l=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=i(c),p=0,b=d.length;p<b;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){m=!0;break e}if(!m)return null;for(var v=[];h;)v.unshift(h),h=s[h];for(h=o[v[v.length-1]];h;)v.push(h),h=o[h];return v.length?v:null}function _R(t,e,n){if(!TR(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!i.has(u)&&(i.add(u),JF(c,e[t](u)),r[u]=s);s++,o=c}return r}_R.bind(null,"outboundNeighbors");_R.bind(null,"neighbors");var QF=qF;const be=new p1({allowSelfLoops:!1});be.addNode("MBR",{position:[610,250]});be.addNode("AX",{position:[522,45]});be.addNode("BX",{position:[522,85]});be.addNode("CX",{position:[522,125]});be.addNode("DX",{position:[522,165]});be.addNode("id",{position:[522,205]});be.addNode("IP",{position:[451,309]});be.addNode("SP",{position:[451,349]});be.addNode("ri",{position:[451,388]});be.addNode("result",{position:[370,130]});be.addNode("FLAGS",{position:[250,225]});be.addNode("IR",{position:[205,272]});be.addNode("left",{position:[60,85]});be.addNode("right",{position:[60,145]});be.addNode("AX join",{position:[492,45]});be.addNode("BX join",{position:[492,85]});be.addNode("CX join",{position:[492,125]});be.addNode("DX join",{position:[492,165]});be.addNode("id join",{position:[492,205]});be.addNode("data mbr join",{position:[492,250]});be.addNode("IP join",{position:[421,309]});be.addNode("SP join",{position:[421,349]});be.addNode("ri join",{position:[421,388]});be.addNode("addresses mbr join",{position:[421,250]});be.addNode("result mbr join",{position:[370,250]});be.addNode("FLAGS mbr join",{position:[250,250]});be.addNode("IR mbr join",{position:[205,250]});be.addNode("left join",{position:[30,85]});be.addNode("right join",{position:[30,145]});be.addNode("operands mbr join",{position:[30,250]});be.addUndirectedEdge("AX","AX join");be.addUndirectedEdge("BX","BX join");be.addUndirectedEdge("CX","CX join");be.addUndirectedEdge("DX","DX join");be.addUndirectedEdge("id","id join");be.addUndirectedEdge("AX join","BX join");be.addUndirectedEdge("BX join","CX join");be.addUndirectedEdge("CX join","DX join");be.addUndirectedEdge("DX join","id join");be.addUndirectedEdge("id join","data mbr join");be.addUndirectedEdge("data mbr join","MBR");be.addUndirectedEdge("IP","IP join");be.addUndirectedEdge("SP","SP join");be.addUndirectedEdge("ri","ri join");be.addUndirectedEdge("IP join","SP join");be.addUndirectedEdge("SP join","ri join");be.addUndirectedEdge("IP join","addresses mbr join");be.addUndirectedEdge("addresses mbr join","data mbr join");be.addUndirectedEdge("result","result mbr join");be.addUndirectedEdge("result mbr join","addresses mbr join");be.addUndirectedEdge("FLAGS","FLAGS mbr join");be.addUndirectedEdge("FLAGS mbr join","result mbr join");be.addUndirectedEdge("IR","IR mbr join");be.addUndirectedEdge("IR mbr join","FLAGS mbr join");be.addUndirectedEdge("left","left join");be.addUndirectedEdge("right","right join");be.addUndirectedEdge("left join","right join");be.addUndirectedEdge("right join","operands mbr join");be.addUndirectedEdge("operands mbr join","IR mbr join");function eU(t,e){const n=QF(be,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const i=be.getNodeAttribute(n[0],"position");let r=`M ${i[0]} ${i[1]}`;for(let s=1;s<n.length;s++){const[o,a]=be.getNodeAttribute(n[s],"position");r+=` L ${o} ${a}`}return r}function tU(){const{path:t,...e}=rt("cpu.internalBus.data");return x.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[x.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 272 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),x.jsx(Dt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const R0=(t,e)=>{const n=eU(t,e);return qe([{key:"cpu.internalBus.data.path",from:n},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},N0=()=>qe({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});async function nU(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await qe([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),ie.set(N$,t.operation),await Promise.all([qe({key:"cpu.alu.operation.backgroundColor",to:Rt.mantis[400]},{duration:1,easing:"easeOutQuart"}),qe({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([qe({key:"cpu.alu.operation.backgroundColor",to:Rt.stone[800]},{duration:1,easing:"easeOutQuart"}),qe([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([Ei("cpu.result"),Ei("cpu.FLAGS")]),ie.set(ct.FLAGS,t.flags),ie.set(ct.result,t.result),await Promise.all([Ci("cpu.result"),Ci("cpu.FLAGS")]),await qe([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{ie.set(Ks,e=>e.phase==="stopped"?e:{...e,phase:"interrupt"}),await qe([{key:"cpu.id.opacity",to:1},{key:"cpu.ri.opacity",to:1}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{$$(t.instruction.position.start),ie.set(Ks,{phase:"fetching",metadata:t.instruction}),await qe([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:.4},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:.4}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{ie.set(Ks,e=>e.phase==="stopped"?e:{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase});return}case"cpu:decode":{await qe([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await qe([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await qe([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{ie.set(Ks,{phase:"stopped",error:t.error}),su(t.error);return}case"cpu:halt":case"cpu:int.0":{ie.set(Ks,{phase:"stopped"}),su();return}case"cpu:int.3":{tw();return}case"cpu:int.6":return;case"cpu:int.7":return;case"cpu:inta.off":{await An("bus.inta");return}case"cpu:inta.on":{await Di("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await qe({key:`bus.${e}.stroke`,to:Rt.red[500]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Di("bus.iom",15);return}case"cpu:mar.set":{await qe([{key:"cpu.internalBus.address.path",from:Sj(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await Ei("cpu.MAR",Rt.blue[500]),ie.set(R$,ie.get(ct[t.register])),await qe({key:"bus.address.stroke",to:Rt.blue[500]},{duration:5,easing:"easeOutSine"}),await Promise.all([Ci("cpu.MAR"),qe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=qo(t.register);await R0("MBR",e),await Ei(`cpu.${e}`),ie.set(ct[t.register],ie.get($p)),await Promise.all([Ci(`cpu.${e}`),N0()]);return}case"cpu:mbr.set":{const[e]=qo(t.register);await R0(e,"MBR"),await Ei("cpu.MBR"),ie.set($p,ie.get(ct[t.register])),await qe({key:"bus.data.stroke",to:Rt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Promise.all([Ci("cpu.MBR"),N0()]);return}case"cpu:register.copy":{const[e]=qo(t.src),[n]=qo(t.dest);e!==n&&await R0(e,n),await Ei(`cpu.${n}`),ie.set(ct[t.dest],ie.get(ct[t.src])),await Promise.all([Ci(`cpu.${n}`),e!==n&&N0()]);return}case"cpu:register.update":{const[e]=qo(t.register);await Ei(`cpu.${e}`),ie.set(ct[t.register],t.value),await Ci(`cpu.${e}`);return}default:return t}}async function iU(t){switch(t.type){case"f10:press":await Di("bus.int0",15),await An("bus.int0");return;default:return t.type}}const m1=Ce(L.zero(8)),g1=Ce(L.zero(8));function rU(t){"handshake"in t.io&&(ie.set(m1,L.fromUnsigned(t.io.handshake.DATA,8)),ie.set(g1,L.fromUnsigned(t.io.handshake.STATE,8)))}async function sU(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await ru(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await Ei(`handshake.${t.register}`),t.register){case"DATA":{ie.set(m1,t.value);break}case"STATE":{ie.set(g1,t.value);break}default:return t.register}await Ci(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await An("bus.int2");return}case"handshake:int.on":{await Di("bus.int2",10);return}default:return t}}async function oU(t){switch(t.type){case"keyboard:listen-key":{ie.set(gn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{ie.sub(gn,()=>{const n=ie.get(gn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const y1=Ce(L.zero(8));function aU(t){"leds"in t.io&&ie.set(y1,L.fromUnsigned(t.io.leds,8))}async function lU(t){switch(t.type){case"leds:update":{await Di("bus.pio->leds",10),ie.set(y1,t.state),await An("bus.pio->leds");return}default:return t.type}}const v1=Ce(new Array(Oe.MAX_ADDRESS+1).fill(L.zero(8))),Qv=Ce(Oe.from(4096)),TE=8,uU=Ce(t=>{const e=t(Qv),n=e.value-e.value%TE,i=t(v1),r=[];for(let s=0;s<TE;s++)r.push({address:Oe.from(n+s),value:i[n+s]});return r});function cU(t){ie.set(v1,t.memory.map(e=>L.fromUnsigned(e,8)))}async function dU(t){switch(t.type){case"memory:read":{Oe.inRange(t.address)&&ie.set(Qv,Oe.from(t.address));return}case"memory:read.ok":{await ru(t.value);return}case"memory:write":{if(Oe.inRange(t.address)){const e=Number(t.address);ie.set(Qv,Oe.from(t.address)),ie.set(v1,n=>[...n.slice(0,e),t.value,...n.slice(e+1)])}return}case"memory:write.ok":return;case"memory:read.error":case"memory:write.error":{su(t.error);return}default:return t}}const w1=Ce(L.fromUnsigned(255,8)),b1=Ce(L.fromUnsigned(0,8)),x1=Ce(L.fromUnsigned(0,8)),Ip=[Ce(L.zero(8)),Ce(L.zero(8)),Ce(L.zero(8)),Ce(L.zero(8)),Ce(L.zero(8)),Ce(L.zero(8)),Ce(L.zero(8)),Ce(L.zero(8))];function hU(t){ie.set(w1,L.fromUnsigned(t.io.pic.IMR,8)),ie.set(b1,L.fromUnsigned(t.io.pic.IRR,8)),ie.set(x1,L.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Ip.length;e++)ie.set(Ip[e],L.fromUnsigned(t.io.pic.lines[e],8))}async function fU(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await ru(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Ei(`pic.${t.register}`),t.register){case"IMR":{ie.set(w1,t.value);break}case"IRR":{ie.set(b1,t.value);break}case"ISR":{ie.set(x1,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));ie.set(Ip[e],t.value);break}default:return t}await Ci(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await An("bus.intr");return}case"pic:intr.on":{await Di("bus.intr",10);return}case"pic:int.send":{await ru(t.number);return}default:return t}}const S1=Ce(L.zero(8)),k1=Ce(L.zero(8)),E1=Ce(L.zero(8)),C1=Ce(L.zero(8));function pU(t){"pio"in t.io&&(ie.set(S1,L.fromUnsigned(t.io.pio.PA,8)),ie.set(k1,L.fromUnsigned(t.io.pio.PB,8)),ie.set(E1,L.fromUnsigned(t.io.pio.CA,8)),ie.set(C1,L.fromUnsigned(t.io.pio.CB,8)))}async function mU(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await ru(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await Ei(`pio.${t.register}`),t.register){case"PA":{ie.set(S1,t.value);break}case"PB":{ie.set(k1,t.value);break}case"CA":{ie.set(E1,t.value);break}case"CB":{ie.set(C1,t.value);break}default:return t.register}await Ci(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Lp=Ce([]),Bp=Ce("");function gU(t){"printer"in t.io&&(ie.set(Lp,t.io.printer.buffer.map(e=>L.fromUnsigned(e,8))),ie.set(Bp,t.io.printer.paper))}async function yU(t){switch(t.type){case"printer:buffer.add":{ie.set(Lp,e=>[...e,t.char]);return}case"printer:buffer.pop":{ie.set(Lp,e=>e.slice(1));return}case"printer:busy.off":{await An("bus.printer.busy");return}case"printer:busy.on":{await Di("bus.printer.busy",15);return}case"printer:data.read":{await Di("bus.printer.data",15),await An("bus.printer.data");return}case"printer:paper.print":{ie.set(Bp,e=>e+t.char);return}case"printer:paper.replace":{ie.set(Bp,"");return}case"printer:strobe.off":{await An("bus.printer.strobe");return}case"printer:strobe.on":{await Di("bus.printer.strobe",15);return}default:return t}}const A1=Ce("");function vU(t){ie.set(A1,t.io.screen)}async function wU(t){switch(t.type){case"screen:send-char":{ie.set(A1,t.output);return}default:return t.type}}const P1=Ce(L.zero(8));function bU(t){"switches"in t.io&&ie.set(P1,L.fromUnsigned(t.io.switches,8))}async function xU(t){switch(t.type){case"switches:toggle":{ie.set(P1,e=>e.withBit(t.index,!e.bit(t.index))),await Di("bus.switches->pio",15),await An("bus.switches->pio");return}default:return t.type}}const O1=Ce(L.zero(8)),M1=Ce(L.zero(8));function SU(t){ie.set(O1,L.fromUnsigned(t.io.timer.CONT,8)),ie.set(M1,L.fromUnsigned(t.io.timer.COMP,8))}async function kU(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await ru(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Ei(`timer.${t.register}`),t.register){case"CONT":{ie.set(O1,t.value);break}case"COMP":{ie.set(M1,t.value);break}default:return t.register}await Ci(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await An("bus.int1");return}case"timer:int.on":{await Di("bus.int1",10);return}default:return t}}const ew=new Set;async function EU(t){AU(t);const[e]=t.type.split(":",2);switch(ew.add(t.type),e){case"bus":{await bj(t);break}case"clock":{await xj(t);break}case"cpu":{await nU(t);break}case"f10":{await iU(t);break}case"handshake":{await sU(t);break}case"keyboard":{await oU(t);break}case"leds":{await lU(t);break}case"memory":{await dU(t);break}case"pic":{await fU(t);break}case"pio":{await mU(t);break}case"printer":{await yU(t);break}case"screen":{await wU(t);break}case"switches":{await xU(t);break}case"timer":{await kU(t);break}default:return e}ew.delete(t.type)}function _E(...t){for(const e of t)if(ew.has(e))return!0;return!1}const CU={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function AU(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${CU[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof L?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Oe?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Zn?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const ei=new gB,gn=Ce({type:"stopped"});function PU(t){const e=t.translate(dr().language);wm.error(e)}function su(t){t&&PU(t),$$(null),M$(!1),ie.set(gn,{type:"stopped",error:t}),ie.set(Ks,{phase:"stopped",error:t}),wj()}function tw(){ie.set(gn,{type:"paused"}),yj()}function OU(){wm.error(Pm(dr().language,"messages.assemble-error"))}function Uu(){wm.error(Pm(dr().language,"messages.invalid-action"))}function MU(t){Y7(t),cU(t),rU(t),hU(t),pU(t),SU(t),aU(t),gU(t),vU(t),bU(t)}async function ta(t){try{for(;;){const e=ie.get(gn),n=dr();if(e.type==="stopped")break;if(e.type==="paused"){await new Promise(r=>{const s=ie.sub(gn,()=>{s(),r()})});continue}const i=t.next();if(i.done)break;await EU(i.value),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until==="cycle-change"?tw():n.disableAnimations&&await new Promise(r=>setTimeout(r,n.executionUnit)):i.value.type==="cpu:cycle.end"&&(e.until==="end-of-instruction"?tw():n.disableAnimations&&await new Promise(r=>setTimeout(r,n.executionUnit)))}t.return()}catch(e){const n=Lt.from(e);su(n)}}async function $U(...t){const e=t[0],n=ie.get(gn);switch(e){case"cpu.run":{if(n.type==="running")return Uu();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;const r=window.codemirror.state.doc.toString(),s=eM(r);if(!s.success)return OU();M$(!0),ei.loadProgram({program:s,data:dr().dataOnLoad,devices:dr().devices}),MU(ei.getComputerState()),ie.set(gn,{type:"running",until:i,waitingForInput:!1}),ta(ei.startCPU()),RU(),NU()}else ie.set(gn,{type:"running",until:i,waitingForInput:!1}),vj();return}case"cpu.stop":{su();return}case"f10.press":{if(n.type!=="running")return Uu();if(_E("f10:press"))return;ta(ei.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!ei.devices.switches.connected())return Uu();if(_E("switches:toggle"))return;const i=t[1];ta(ei.devices.switches.toggle(i));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return Uu();ei.devices.keyboard.readChar(L.fromChar(t[1])),ie.set(gn,{...n,waitingForInput:!1});return}case"screen.clean":{ta(ei.devices.screen.clear());return}case"printer.clean":{if(!ei.devices.printer.connected())return Uu();ta(ei.devices.printer.clear());return}default:return e}}async function RU(){for(;ie.get(gn).type!=="stopped";){const t=dr().clockSpeed;await qe({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),ta(ei.devices.clock.tick())}}async function NU(){if(ei.devices.printer.connected())for(;ie.get(gn).type!=="stopped";){const t=dr().printerSpeed;await qe([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await qe({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),ta(ei.devices.printer.print())}}function Fi(){const t=Xn(gn),e=a5(),n=y.useMemo(()=>({preset:e,clock:!0,f10:!0,keyboard:!0,handshake:e==="handshake",leds:e==="pio-switches-and-leds",pic:!0,pio:e==="pio-switches-and-leds"||e==="pio-printer",printer:e==="pio-printer"||e==="handshake",screen:!0,switches:e==="pio-switches-and-leds",timer:!0}),[e]);return{status:t,dispatch:$U,devices:n}}function TU({className:t}){const e=yt(),{status:n,dispatch:i}=Fi();return x.jsxs("div",{className:Ze("flex items-center justify-center gap-4",t),children:[x.jsxs(G4,{children:[x.jsx(K4,{asChild:!0,children:x.jsxs("button",{disabled:n.type==="running",onClick:()=>i("cpu.run","infinity"),className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-3 text-sm leading-none text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[x.jsx("span",{className:"icon-[lucide--play] mr-2 h-4 w-4"}),e("control.action.start")]})}),x.jsxs(JO,{className:"w-56",align:"start",children:[x.jsxs(ff,{disabled:n.type==="running",onClick:()=>i("cpu.run","cycle-change"),children:[x.jsx("span",{className:"icon-[lucide--chevron-right] mr-2 h-4 w-4"}),e("control.action.run.cycle-change")]}),x.jsxs(ff,{disabled:n.type==="running",onClick:()=>i("cpu.run","end-of-instruction"),children:[x.jsx("span",{className:"icon-[lucide--chevrons-right] mr-2 h-4 w-4"}),e("control.action.run.end-of-instruction")]}),x.jsxs(ff,{disabled:n.type==="running",onClick:()=>i("cpu.run","infinity"),children:[x.jsx("span",{className:"icon-[lucide--infinity] mr-2 h-4 w-4"}),e("control.action.run.infinity")]})]})]}),x.jsxs("button",{disabled:n.type==="stopped",onClick:()=>i("cpu.stop"),className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-3 text-sm leading-none text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[x.jsx("span",{className:"icon-[lucide--stop-circle] mr-2 h-4 w-4"}),e("control.action.stop")]})]})}function zp(t,[e,n]){return Math.min(n,Math.max(e,t))}function $1(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const _U=y.forwardRef((t,e)=>y.createElement(Je.span,le({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),DU=[" ","Enter","ArrowUp","ArrowDown"],IU=[" ","Enter"],Jm="Select",[qm,R1,LU]=xm(Jm),[Su,IZ]=Hr(Jm,[LU,wu]),N1=wu(),[BU,Fa]=Su(Jm),[zU,jU]=Su(Jm),FU=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f}=t,p=N1(e),[g,b]=y.useState(null),[m,v]=y.useState(null),[w,k]=y.useState(!1),C=$d(u),[O=!1,M]=bo({prop:i,defaultProp:r,onChange:s}),[E,N]=bo({prop:o,defaultProp:a,onChange:l}),D=y.useRef(null),T=g?!!g.closest("form"):!0,[F,j]=y.useState(new Set),B=Array.from(F).map(K=>K.props.value).join(";");return y.createElement(Cb,p,y.createElement(BU,{required:f,scope:e,trigger:g,onTriggerChange:b,valueNode:m,onValueNodeChange:v,valueNodeHasChildren:w,onValueNodeHasChildrenChange:k,contentId:ka(),value:E,onValueChange:N,open:O,onOpenChange:M,dir:C,triggerPointerDownPosRef:D,disabled:h},y.createElement(qm.Provider,{scope:e},y.createElement(zU,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(K=>{j(Y=>new Set(Y).add(K))},[]),onNativeOptionRemove:y.useCallback(K=>{j(Y=>{const ee=new Set(Y);return ee.delete(K),ee})},[])},n)),T?y.createElement(IR,{key:B,"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:E,onChange:K=>N(K.target.value),disabled:h},E===void 0?y.createElement("option",{value:""}):null,Array.from(F)):null))},UU="SelectTrigger",VU=y.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=N1(n),o=Fa(UU,n),a=o.disabled||i,l=Qe(e,o.onTriggerChange),u=R1(n),[c,d,h]=LR(p=>{const g=u().filter(v=>!v.disabled),b=g.find(v=>v.value===o.value),m=BR(g,p,b);m!==void 0&&o.onValueChange(m.value)}),f=()=>{a||(o.onOpenChange(!0),h())};return y.createElement(Ab,le({asChild:!0},s),y.createElement(Je.button,le({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},r,{ref:l,onClick:Se(r.onClick,p=>{p.currentTarget.focus()}),onPointerDown:Se(r.onPointerDown,p=>{const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(f(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:Se(r.onKeyDown,p=>{const g=c.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(g&&p.key===" ")&&DU.includes(p.key)&&(f(),p.preventDefault())})})))}),HU="SelectValue",WU=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o,...a}=t,l=Fa(HU,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=Qe(e,l.onValueNodeChange);return lr(()=>{u(c)},[u,c]),y.createElement(Je.span,le({},a,{ref:d,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:s)}),GU=y.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return y.createElement(Je.span,le({"aria-hidden":!0},r,{ref:e}),i||"▼")}),KU=t=>y.createElement(Ob,le({asChild:!0},t)),ou="SelectContent",XU=y.forwardRef((t,e)=>{const n=Fa(ou,t.__scopeSelect),[i,r]=y.useState();if(lr(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Do.createPortal(y.createElement(DR,{scope:t.__scopeSelect},y.createElement(qm.Slot,{scope:t.__scopeSelect},y.createElement("div",null,t.children))),s):null}return y.createElement(ZU,le({},t,{ref:e}))}),Xr=10,[DR,Qm]=Su(ou),ZU=y.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:b,...m}=t,v=Fa(ou,n),[w,k]=y.useState(null),[C,O]=y.useState(null),M=Qe(e,S=>k(S)),[E,N]=y.useState(null),[D,T]=y.useState(null),F=R1(n),[j,B]=y.useState(!1),K=y.useRef(!1);y.useEffect(()=>{if(w)return Mb(w)},[w]),wb();const Y=y.useCallback(S=>{const[P,..._]=F().map(X=>X.ref.current),[$]=_.slice(-1),z=document.activeElement;for(const X of S)if(X===z||(X==null||X.scrollIntoView({block:"nearest"}),X===P&&C&&(C.scrollTop=0),X===$&&C&&(C.scrollTop=C.scrollHeight),X==null||X.focus(),document.activeElement!==z))return},[F,C]),ee=y.useCallback(()=>Y([E,w]),[Y,E,w]);y.useEffect(()=>{j&&ee()},[j,ee]);const{onOpenChange:W,triggerPointerDownPosRef:R}=v;y.useEffect(()=>{if(w){let S={x:0,y:0};const P=$=>{var z,X,V,Z;S={x:Math.abs(Math.round($.pageX)-((z=(X=R.current)===null||X===void 0?void 0:X.x)!==null&&z!==void 0?z:0)),y:Math.abs(Math.round($.pageY)-((V=(Z=R.current)===null||Z===void 0?void 0:Z.y)!==null&&V!==void 0?V:0))}},_=$=>{S.x<=10&&S.y<=10?$.preventDefault():w.contains($.target)||W(!1),document.removeEventListener("pointermove",P),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",_,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",_,{capture:!0})}}},[w,W,R]),y.useEffect(()=>{const S=()=>W(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[W]);const[H,q]=LR(S=>{const P=F().filter(z=>!z.disabled),_=P.find(z=>z.ref.current===document.activeElement),$=BR(P,S,_);$&&setTimeout(()=>$.ref.current.focus())}),re=y.useCallback((S,P,_)=>{const $=!K.current&&!_;(v.value!==void 0&&v.value===P||$)&&(N(S),$&&(K.current=!0))},[v.value]),we=y.useCallback(()=>w==null?void 0:w.focus(),[w]),U=y.useCallback((S,P,_)=>{const $=!K.current&&!_;(v.value!==void 0&&v.value===P||$)&&T(S)},[v.value]),I=i==="popper"?DE:YU,G=I===DE?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:b}:{};return y.createElement(DR,{scope:n,content:w,viewport:C,onViewportChange:O,itemRefCallback:re,selectedItem:E,onItemLeave:we,itemTextRefCallback:U,focusSelectedItem:ee,selectedItemText:D,position:i,isPositioned:j,searchRef:H},y.createElement($b,{as:Sa,allowPinchZoom:!0},y.createElement(bb,{asChild:!0,trapped:v.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:Se(r,S=>{var P;(P=v.trigger)===null||P===void 0||P.focus({preventScroll:!0}),S.preventDefault()})},y.createElement(vb,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>v.onOpenChange(!1)},y.createElement(I,le({role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:S=>S.preventDefault()},m,G,{onPlaced:()=>B(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:Se(m.onKeyDown,S=>{const P=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!P&&S.key.length===1&&q(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let $=F().filter(z=>!z.disabled).map(z=>z.ref.current);if(["ArrowUp","End"].includes(S.key)&&($=$.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const z=S.target,X=$.indexOf(z);$=$.slice(X+1)}setTimeout(()=>Y($)),S.preventDefault()}})}))))))}),YU=y.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Fa(ou,n),o=Qm(ou,n),[a,l]=y.useState(null),[u,c]=y.useState(null),d=Qe(e,M=>c(M)),h=R1(n),f=y.useRef(!1),p=y.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:m,focusSelectedItem:v}=o,w=y.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&g&&b&&m){const M=s.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),D=m.getBoundingClientRect();if(s.dir!=="rtl"){const z=D.left-E.left,X=N.left-z,V=M.left-X,Z=M.width+V,Q=Math.max(Z,E.width),$e=window.innerWidth-Xr,he=zp(X,[Xr,$e-Q]);a.style.minWidth=Z+"px",a.style.left=he+"px"}else{const z=E.right-D.right,X=window.innerWidth-N.right-z,V=window.innerWidth-M.right-X,Z=M.width+V,Q=Math.max(Z,E.width),$e=window.innerWidth-Xr,he=zp(X,[Xr,$e-Q]);a.style.minWidth=Z+"px",a.style.right=he+"px"}const T=h(),F=window.innerHeight-Xr*2,j=g.scrollHeight,B=window.getComputedStyle(u),K=parseInt(B.borderTopWidth,10),Y=parseInt(B.paddingTop,10),ee=parseInt(B.borderBottomWidth,10),W=parseInt(B.paddingBottom,10),R=K+Y+j+W+ee,H=Math.min(b.offsetHeight*5,R),q=window.getComputedStyle(g),re=parseInt(q.paddingTop,10),we=parseInt(q.paddingBottom,10),U=M.top+M.height/2-Xr,I=F-U,G=b.offsetHeight/2,S=b.offsetTop+G,P=K+Y+S,_=R-P;if(P<=U){const z=b===T[T.length-1].ref.current;a.style.bottom="0px";const X=u.clientHeight-g.offsetTop-g.offsetHeight,V=Math.max(I,G+(z?we:0)+X+ee),Z=P+V;a.style.height=Z+"px"}else{const z=b===T[0].ref.current;a.style.top="0px";const V=Math.max(U,K+g.offsetTop+(z?re:0)+G)+_;a.style.height=V+"px",g.scrollTop=P-U+g.offsetTop}a.style.margin=`${Xr}px 0`,a.style.minHeight=H+"px",a.style.maxHeight=F+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,g,b,m,s.dir,i]);lr(()=>w(),[w]);const[k,C]=y.useState();lr(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const O=y.useCallback(M=>{M&&p.current===!0&&(w(),v==null||v(),p.current=!1)},[w,v]);return y.createElement(JU,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:O},y.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k}},y.createElement(Je.div,le({},r,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}}))))}),DE=y.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Xr,...s}=t,o=N1(n);return y.createElement(Pb,le({},o,s,{ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[JU,qU]=Su(ou,{}),IE="SelectViewport",QU=y.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Qm(IE,n),s=qU(IE,n),o=Qe(e,r.onViewportChange),a=y.useRef(0);return y.createElement(y.Fragment,null,y.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),y.createElement(qm.Slot,{scope:n},y.createElement(Je.div,le({"data-radix-select-viewport":"",role:"presentation"},i,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...i.style},onScroll:Se(i.onScroll,l=>{const u=l.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&c){const h=Math.abs(a.current-u.scrollTop);if(h>0){const f=window.innerHeight-Xr*2,p=parseFloat(c.style.minHeight),g=parseFloat(c.style.height),b=Math.max(p,g);if(b<f){const m=b+h,v=Math.min(f,m),w=m-v;c.style.height=v+"px",c.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,c.style.justifyContent="flex-end")}}}a.current=u.scrollTop})}))))}),eV="SelectGroup";Su(eV);const nw="SelectItem",[tV,nV]=Su(nw),iV=y.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Fa(nw,n),l=Qm(nw,n),u=a.value===i,[c,d]=y.useState(s??""),[h,f]=y.useState(!1),p=Qe(e,m=>{var v;return(v=l.itemRefCallback)===null||v===void 0?void 0:v.call(l,m,i,r)}),g=ka(),b=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};return y.createElement(tV,{scope:n,value:i,disabled:r,textId:g,isSelected:u,onItemTextChange:y.useCallback(m=>{d(v=>{var w;return v||((w=m==null?void 0:m.textContent)!==null&&w!==void 0?w:"").trim()})},[])},y.createElement(qm.ItemSlot,{scope:n,value:i,disabled:r,textValue:c},y.createElement(Je.div,le({role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1},o,{ref:p,onFocus:Se(o.onFocus,()=>f(!0)),onBlur:Se(o.onBlur,()=>f(!1)),onPointerUp:Se(o.onPointerUp,b),onPointerMove:Se(o.onPointerMove,m=>{if(r){var v;(v=l.onItemLeave)===null||v===void 0||v.call(l)}else m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Se(o.onPointerLeave,m=>{if(m.currentTarget===document.activeElement){var v;(v=l.onItemLeave)===null||v===void 0||v.call(l)}}),onKeyDown:Se(o.onKeyDown,m=>{var v;((v=l.searchRef)===null||v===void 0?void 0:v.current)!==""&&m.key===" "||(IU.includes(m.key)&&b(),m.key===" "&&m.preventDefault())})}))))}),Ih="SelectItemText",rV=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Fa(Ih,n),a=Qm(Ih,n),l=nV(Ih,n),u=jU(Ih,n),[c,d]=y.useState(null),h=Qe(e,m=>d(m),l.onItemTextChange,m=>{var v;return(v=a.itemTextRefCallback)===null||v===void 0?void 0:v.call(a,m,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=y.useMemo(()=>y.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},f),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return lr(()=>(g(p),()=>b(p)),[g,b,p]),y.createElement(y.Fragment,null,y.createElement(Je.span,le({id:l.textId},s,{ref:h})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Do.createPortal(s.children,o.valueNode):null)}),IR=y.forwardRef((t,e)=>{const{value:n,...i}=t,r=y.useRef(null),s=Qe(e,r),o=$1(n);return y.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),y.createElement(_U,{asChild:!0},y.createElement("select",le({},i,{ref:s,defaultValue:n})))});IR.displayName="BubbleSelect";function LR(t){const e=ur(t),n=y.useRef(""),i=y.useRef(0),r=y.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(i.current),u!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=y.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function BR(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=sV(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function sV(t,e){return t.map((n,i)=>t[(e+i)%t.length])}const oV=FU,zR=VU,aV=WU,lV=GU,uV=KU,jR=XU,cV=QU,FR=iV,dV=rV,T0=oV,_0=aV,Of=y.forwardRef(({className:t,children:e,...n},i)=>x.jsxs(zR,{ref:i,className:Ze("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,x.jsx(lV,{asChild:!0,children:x.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));Of.displayName=zR.displayName;const Mf=y.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>x.jsx(uV,{children:x.jsx(jR,{ref:r,className:Ze("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:x.jsx(cV,{className:"p-1",children:e})})}));Mf.displayName=jR.displayName;const rc=y.forwardRef(({className:t,children:e,...n},i)=>x.jsx(FR,{ref:i,className:Ze("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:x.jsx(dV,{children:e})}));rc.displayName=FR.displayName;const UR=["PageUp","PageDown"],VR=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],HR={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Fd="Slider",[iw,hV,fV]=xm(Fd),[WR,LZ]=Hr(Fd,[fV]),[pV,eg]=WR(Fd),mV=y.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[i],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,...p}=t,[g,b]=y.useState(null),m=Qe(e,B=>b(B)),v=y.useRef(new Set),w=y.useRef(0),k=o==="horizontal",C=g?!!g.closest("form"):!0,O=k?gV:yV,[M=[],E]=bo({prop:c,defaultProp:u,onChange:B=>{var K;(K=[...v.current][w.current])===null||K===void 0||K.focus(),d(B)}}),N=y.useRef(M);function D(B){const K=AV(M,B);j(B,K)}function T(B){j(B,w.current)}function F(){const B=N.current[w.current];M[w.current]!==B&&h(M)}function j(B,K,{commit:Y}={commit:!1}){const ee=$V(s),W=RV(Math.round((B-i)/s)*s+i,ee),R=zp(W,[i,r]);E((H=[])=>{const q=EV(H,R,K);if(MV(q,l*s)){w.current=q.indexOf(R);const re=String(q)!==String(H);return re&&Y&&h(q),re?q:H}else return H})}return y.createElement(pV,{scope:t.__scopeSlider,disabled:a,min:i,max:r,valueIndexToChangeRef:w,thumbs:v.current,values:M,orientation:o},y.createElement(iw.Provider,{scope:t.__scopeSlider},y.createElement(iw.Slot,{scope:t.__scopeSlider},y.createElement(O,le({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:m,onPointerDown:Se(p.onPointerDown,()=>{a||(N.current=M)}),min:i,max:r,inverted:f,onSlideStart:a?void 0:D,onSlideMove:a?void 0:T,onSlideEnd:a?void 0:F,onHomeKeyDown:()=>!a&&j(i,0,{commit:!0}),onEndKeyDown:()=>!a&&j(r,M.length-1,{commit:!0}),onStepKeyDown:({event:B,direction:K})=>{if(!a){const W=UR.includes(B.key)||B.shiftKey&&VR.includes(B.key)?10:1,R=w.current,H=M[R],q=s*W*K;j(H+q,R,{commit:!0})}}})))),C&&M.map((B,K)=>y.createElement(kV,{key:K,name:n?n+(M.length>1?"[]":""):void 0,value:B})))}),[GR,KR]=WR(Fd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),gV=y.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=y.useState(null),f=Qe(e,w=>h(w)),p=y.useRef(),g=$d(r),b=g==="ltr",m=b&&!s||!b&&s;function v(w){const k=p.current||d.getBoundingClientRect(),C=[0,k.width],M=T1(C,m?[n,i]:[i,n]);return p.current=k,M(w-k.left)}return y.createElement(GR,{scope:t.__scopeSlider,startEdge:m?"left":"right",endEdge:m?"right":"left",direction:m?1:-1,size:"width"},y.createElement(XR,le({dir:g,"data-orientation":"horizontal"},c,{ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const k=v(w.clientX);o==null||o(k)},onSlideMove:w=>{const k=v(w.clientX);a==null||a(k)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:w=>{const C=HR[m?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:C?-1:1})}})))}),yV=y.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=y.useRef(null),d=Qe(e,c),h=y.useRef(),f=!r;function p(g){const b=h.current||c.current.getBoundingClientRect(),m=[0,b.height],w=T1(m,f?[i,n]:[n,i]);return h.current=b,w(g-b.top)}return y.createElement(GR,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1},y.createElement(XR,le({"data-orientation":"vertical"},u,{ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const b=p(g.clientY);s==null||s(b)},onSlideMove:g=>{const b=p(g.clientY);o==null||o(b)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:g=>{const m=HR[f?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:m?-1:1})}})))}),XR=y.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=eg(Fd,n);return y.createElement(Je.span,le({},u,{ref:e,onKeyDown:Se(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):UR.concat(VR).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Se(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():i(d)}),onPointerMove:Se(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:Se(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})}))}),vV="SliderTrack",wV=y.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=eg(vV,n);return y.createElement(Je.span,le({"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation},i,{ref:e}))}),LE="SliderRange",bV=y.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=eg(LE,n),s=KR(LE,n),o=y.useRef(null),a=Qe(e,o),l=r.values.length,u=r.values.map(h=>ZR(h,r.min,r.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return y.createElement(Je.span,le({"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0},i,{ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}}))}),BE="SliderThumb",xV=y.forwardRef((t,e)=>{const n=hV(t.__scopeSlider),[i,r]=y.useState(null),s=Qe(e,a=>r(a)),o=y.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return y.createElement(SV,le({},t,{ref:s,index:o}))}),SV=y.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,...r}=t,s=eg(BE,n),o=KR(BE,n),[a,l]=y.useState(null),u=Qe(e,b=>l(b)),c=Eb(a),d=s.values[i],h=d===void 0?0:ZR(d,s.min,s.max),f=CV(i,s.values.length),p=c==null?void 0:c[o.size],g=p?PV(p,h,o.direction):0;return y.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),y.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${h}% + ${g}px)`}},y.createElement(iw.ItemSlot,{scope:t.__scopeSlider},y.createElement(Je.span,le({role:"slider","aria-label":t["aria-label"]||f,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},r,{ref:u,style:d===void 0?{display:"none"}:t.style,onFocus:Se(t.onFocus,()=>{s.valueIndexToChangeRef.current=i})}))))}),kV=t=>{const{value:e,...n}=t,i=y.useRef(null),r=$1(e);return y.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[r,e]),y.createElement("input",le({style:{display:"none"}},n,{ref:i,defaultValue:e}))};function EV(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function ZR(t,e,n){const s=100/(n-e)*(t-e);return zp(s,[0,100])}function CV(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function AV(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function PV(t,e,n){const i=t/2,s=T1([0,50],[0,i]);return(i-s(e)*n)*n}function OV(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function MV(t,e){if(e>0){const n=OV(t);return Math.min(...n)>=e}return!0}function T1(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function $V(t){return(String(t).split(".")[1]||"").length}function RV(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const YR=mV,NV=wV,TV=bV,_V=xV,$f=y.forwardRef(({className:t,...e},n)=>x.jsxs(YR,{ref:n,className:Ze("relative flex touch-none select-none items-center",t),...e,children:[x.jsx(NV,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:x.jsx(TV,{className:"absolute h-full bg-mantis-400"})}),x.jsx(_V,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));$f.displayName=YR.displayName;const JR="Switch",[DV,BZ]=Hr(JR),[IV,LV]=DV(JR),BV=y.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,...c}=t,[d,h]=y.useState(null),f=Qe(e,v=>h(v)),p=y.useRef(!1),g=d?!!d.closest("form"):!0,[b=!1,m]=bo({prop:r,defaultProp:s,onChange:u});return y.createElement(IV,{scope:n,checked:b,disabled:a},y.createElement(Je.button,le({type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":qR(b),"data-disabled":a?"":void 0,disabled:a,value:l},c,{ref:f,onClick:Se(t.onClick,v=>{m(w=>!w),g&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})),g&&y.createElement(FV,{control:d,bubbles:!p.current,name:i,value:l,checked:b,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),zV="SwitchThumb",jV=y.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=LV(zV,n);return y.createElement(Je.span,le({"data-state":qR(r.checked),"data-disabled":r.disabled?"":void 0},i,{ref:e}))}),FV=t=>{const{control:e,checked:n,bubbles:i=!0,...r}=t,s=y.useRef(null),o=$1(n),a=Eb(e);return y.useEffect(()=>{const l=s.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:i});d.call(l,n),l.dispatchEvent(h)}},[o,n,i]),y.createElement("input",le({type:"checkbox","aria-hidden":!0,defaultChecked:n},r,{tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function qR(t){return t?"checked":"unchecked"}const QR=BV,UV=jV,_1=y.forwardRef(({className:t,...e},n)=>x.jsx(QR,{className:Ze("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:x.jsx(UV,{className:Ze("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));_1.displayName=QR.displayName;const D1=Ce(!1);function eN({className:t}){const e=yt(),[n,i]=r5(),{status:r}=Fi();return x.jsxs("div",{className:t,children:[x.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[x.jsx("span",{className:"icon-[lucide--settings] h-6 w-6"})," ",e("settings.title")]}),x.jsxs(Vo,{children:[x.jsx(Ho,{children:x.jsxs(Wo,{children:[x.jsx("span",{className:"icon-[lucide--languages] h-6 w-6"}),e("settings.language.label")]})}),x.jsxs(T0,{value:n.language,onValueChange:s=>i(o=>({...o,language:s})),children:[x.jsx(Of,{className:"w-32",children:x.jsx(_0,{})}),x.jsxs(Mf,{children:[x.jsx(rc,{value:"en",children:x.jsxs("span",{className:"inline-flex items-center gap-2",children:[x.jsx("span",{className:"icon-[circle-flags--uk] h-4 w-4"})," English"]})}),x.jsx(rc,{value:"es",children:x.jsxs("span",{className:"inline-flex items-center gap-2",children:[x.jsx("span",{className:"icon-[circle-flags--ar] h-4 w-4"})," Español"]})})]})]})]}),x.jsx("hr",{className:"border-stone-600"}),x.jsxs(Vo,{children:[x.jsxs(Ho,{children:[x.jsxs(Wo,{children:[x.jsx("span",{className:"icon-[lucide--memory-stick] h-6 w-6"}),e("settings.dataOnLoad.label")]}),x.jsx(D0,{children:e("settings.dataOnLoad.description")})]}),x.jsxs(T0,{value:n.dataOnLoad,onValueChange:s=>i(o=>({...o,dataOnLoad:s})),children:[x.jsx(Of,{className:"w-32 min-w-[theme(width.32)]",children:x.jsx(_0,{})}),x.jsx(Mf,{children:qP.map(s=>x.jsx(rc,{value:s,children:e(`settings.dataOnLoad.${s}`)},s))})]})]}),x.jsxs(Vo,{children:[x.jsxs(Ho,{children:[x.jsxs(Wo,{children:[x.jsx("span",{className:"icon-[lucide--monitor-smartphone] h-6 w-6"}),e("settings.devices.label")]}),x.jsx(D0,{children:e("settings.devices.description")})]}),x.jsxs(T0,{value:n.devices,onValueChange:s=>i(o=>({...o,devices:s})),disabled:r.type!=="stopped",children:[x.jsx(Of,{className:"w-52 min-w-[theme(width.52)]",children:x.jsx(_0,{})}),x.jsx(Mf,{children:QP.map(s=>x.jsx(rc,{value:s,children:e(`settings.devices.${s}`)},s))})]})]}),x.jsx("hr",{className:"border-stone-600"}),x.jsxs(Vo,{children:[x.jsx(Ho,{children:x.jsxs(Wo,{children:[x.jsx("span",{className:"icon-[lucide--gauge] h-6 w-6"}),e("settings.speeds.executionUnit")]})}),x.jsx($f,{className:"w-44",...I0({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),x.jsxs(Vo,{children:[x.jsx(Ho,{children:x.jsxs(Wo,{children:[x.jsx("span",{className:"icon-[lucide--clock] h-6 w-6"}),e("settings.speeds.clockSpeed")]})}),x.jsx($f,{className:"w-44",...I0({value:n.clockSpeed,onValueChange:s=>i(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),x.jsxs(Vo,{children:[x.jsx(Ho,{children:x.jsxs(Wo,{children:[x.jsx("span",{className:"icon-[lucide--printer] h-6 w-6"}),e("settings.speeds.printerSpeed")]})}),x.jsx($f,{className:"w-44",...I0({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),x.jsxs(Vo,{children:[x.jsxs(Ho,{children:[x.jsxs(Wo,{children:[x.jsx("span",{className:"icon-[lucide--rabbit] h-6 w-6"}),e("settings.speeds.disableAnimations.label")]}),x.jsx(D0,{children:e("settings.speeds.disableAnimations.description")})]}),x.jsx(_1,{className:"ml-8",checked:n.disableAnimations,onCheckedChange:s=>i(o=>({...o,disableAnimations:s}))})]})]})}function Vo({children:t}){return x.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ho({children:t}){return x.jsx("div",{className:"grow",children:t})}function Wo({children:t}){return x.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function D0({children:t}){return x.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function I0({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}function VV(){const t=yt(),[e,n]=km(D1);return x.jsxs("header",{className:"relative p-2 text-sm text-white",children:[x.jsx(TU,{className:" absolute inset-0"}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex select-none items-center justify-center",children:[x.jsx("img",{src:"/favicon.svg",className:"mr-2 h-10 w-10"}),x.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",x.jsx("span",{className:"text-mantis-400",children:"Sim"})]})]}),x.jsx("button",{className:Ze("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:x.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}var Ri=function(t,e){return Number(t.toFixed(e))},HV=function(t,e){return typeof t=="number"?t:e},mt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},WV=function(t){return-Math.cos(t*Math.PI)/2+.5},GV=function(t){return t},KV=function(t){return t*t},XV=function(t){return t*(2-t)},ZV=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},YV=function(t){return t*t*t},JV=function(t){return--t*t*t+1},qV=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},QV=function(t){return t*t*t*t},eH=function(t){return 1- --t*t*t*t},tH=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},nH=function(t){return t*t*t*t*t},iH=function(t){return 1+--t*t*t*t*t},rH=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},tN={easeOut:WV,linear:GV,easeInQuad:KV,easeOutQuad:XV,easeInOutQuad:ZV,easeInCubic:YV,easeOutCubic:JV,easeInOutCubic:qV,easeInQuart:QV,easeOutQuart:eH,easeInOutQuart:tH,easeInQuint:nH,easeOutQuint:iH,easeInOutQuint:rH},nN=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Tr=function(t){t.mounted&&(nN(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function iN(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;Tr(t),t.animation=function(){if(!t.mounted)return nN(t.animation);var o=new Date().getTime()-r,a=o/n,l=tN[e],u=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function sH(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Bo(t,e,n,i){var r=sH(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):iN(t,i,n,function(f){var p=a+c*f,g=l+d*f,b=u+h*f;s(p,g,b)})}}function oH(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=i-a,c=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var aH=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,u=t-e-a,c=a,d=i-r-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},I1=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=oH(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=aH(o,l,u,a,c,d,!!r);return h},rw=function(t,e,n,i){return i?t<e?Ri(e,2):t>n?Ri(n,2):Ri(t,2):Ri(t,2)},au=function(t,e){var n=I1(t,e);return t.bounds=n,n};function tg(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=rw(t,a-d,u+d,i),p=rw(e,l-h,c+h,i);return{x:f,y:p}}function ng(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=tg(d,h,r,s,0,0,null);return f}function Ud(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var zE=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o=r==null?void 0:r.contains(s),a=i&&s&&o;if(!a)return!1;var l=ig(s,n);return!l},jE=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},lH=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},uH=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function cH(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,g=n>d||n<h,b=i>f||i<p,m=n>d?u.offsetWidth:t.setup.minPositionX||0,v=i>f?u.offsetHeight:t.setup.minPositionY||0,w=ng(t,m,v,r,t.bounds,a||l),k=w.x,C=w.y;return{scale:r,positionX:g?k:n,positionY:b?C:i}}}function dH(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=tg(e,n,a,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var hH=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,u=r.positionY;if(!i)return{x:l,y:u};var c=e-i.x,d=n-i.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},jp=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},fH=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},pH=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!i)};function mH(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function FE(t,e,n,i,r,s,o,a,l,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return i?e:rw(t,s,o,r)}function gH(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function yH(t,e){var n=fH(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var u=gH(o,a),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=l-r,g=c*c+d*d,b=Math.sqrt(g)/p;t.velocity={velocityX:h,velocityY:f,total:b}}t.lastMousePosition=e,t.velocityTime=l}}function vH(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=pH(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,g=i.zoomAnimation,b=i.panning,m=b.lockAxisY,v=b.lockAxisX,w=g.animationType,k=p.sizeX,C=p.sizeY,O=p.velocityAlignmentTime,M=O,E=mH(t,l),N=Math.max(E,M),D=jp(t,k),T=jp(t,C),F=D*r.offsetWidth/100,j=T*r.offsetHeight/100,B=u+F,K=c-F,Y=d+j,ee=h-j,W=t.transformState,R=new Date().getTime();iN(t,w,N,function(H){var q=t.transformState,re=q.scale,we=q.positionX,U=q.positionY,I=new Date().getTime()-R,G=I/M,S=tN[p.animationType],P=1-S(Math.min(1,G)),_=1-H,$=we+o*_,z=U+a*_,X=FE($,W.positionX,we,v,f,c,u,K,B,P),V=FE(z,W.positionY,U,m,f,h,d,ee,Y,P);(we!==$||U!==z)&&t.setTransformState(re,X,V)})}}function UE(t,e){var n=t.transformState.scale;Tr(t),au(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?uH(t,e):lH(t,e)}function rN(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,a=r.sizeY,l=r.animationTime,u=r.animationType,c=s||e<i||!o&&!a;if(!c){var d=cH(t);d&&Bo(t,d,l,u)}}function VE(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=hH(t,e,n),u=l.x,c=l.y,d=jp(t,o),h=jp(t,a);yH(t,{x:u,y:c}),dH(t,u,c,d,h)}}function wH(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?vH(t):rN(t)}}function L1(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=Ud(Ri(e,2),s,o,0,!1),u=au(t,l),c=ng(t,n,i,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function sN(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||i>=o;if((i>=1||a)&&rN(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,g=L1(t,o,f,p);g&&Bo(t,g,c,d)}}var go=function(){return go=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},go.apply(this,arguments)};function HE(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Lh={previousScale:1,scale:1,positionX:0,positionY:0},Vu={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},oN=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Lh.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Lh.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:Lh.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:Lh.positionY}},WE=function(t){var e=go({},Vu);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Vu[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Vu[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=go(go({},Vu[n]),t[n]):a?e[n]=HE(HE([],Vu[n],!0),t[n],!0):e[n]=t[n]}}),e},aN=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=Ud(Ri(d,3),a,o,c,!1);return h};function lN(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=aN(t,e,n),g=L1(t,p,h,f);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");Bo(t,g,i,r)}function uN(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=oN(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=I1(t,a.scale),f=tg(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(i==null||i(),Bo(t,p,e,n))}}function bH(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function xH(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=bH(e,i,r,s),f=h.x,p=h.y,g=d.width/s.scale,b=d.height/s.scale,m=i.offsetWidth/g,v=i.offsetHeight/b,w=Ud(n||Math.min(m,v),l,u,0,!1),k=(c.width-g*w)/2,C=(c.height-b*w)/2,O=(c.left-f)*w+k,M=(c.top-p)*w+C,E=I1(t,w),N=tg(O,M,E,a,0,0,i),D=N.x,T=N.y;return{positionX:D,positionY:T,scale:w}}var SH=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),lN(t,1,e,n,i)}},kH=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),lN(t,-1,e,n,i)}},EH=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?u:i};Bo(t,f,r,s)}}},CH=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),uN(t,e,n)}},AH=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=cN(e||r.scale,s,o);Bo(t,a,n,i)}}},PH=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),Tr(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=xH(t,o,n);Bo(t,a,i,r)}}},sw=function(t){return{instance:t,zoomIn:SH(t),zoomOut:kH(t),setTransform:EH(t),resetTransform:CH(t),centerView:AH(t),zoomToElement:PH(t)}},OH=function(t){return{instance:t,state:t.transformState}},it=function(t){var e={};return Object.assign(e,OH(t)),Object.assign(e,sw(t)),e},L0=!1;function B0(){try{var t={get passive(){return L0=!0,!1}};return t}catch{return L0=!1,L0}}var ig=function(t,e){var n=t.tagName.toUpperCase(),i=e.find(function(s){return s.toUpperCase()===n});if(i)return!0;var r=e.find(function(s){return t.classList.contains(s)});return!!r},ow=function(t){t&&clearTimeout(t)},MH=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},cN=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function $H(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var RH=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=ig(u,o);return!d},NH=function(t){return t?t.deltaY<0?1:-1:0};function TH(t,e){var n=NH(t),i=HV(e,n);return i}function dN(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var _H=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(r)return p;var g=i?!1:!f,b=Ud(Ri(p,3),u,l,h,g&&!d);return b},DH=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},IH=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=ig(o,r);return!l},LH=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},BH=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Ri(r[0].clientX-i.left,5),o=Ri(r[0].clientY-i.top,5),a=Ri(r[1].clientX-i.left,5),l=Ri(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},hN=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},zH=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,u=a.size,c=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return Ud(Ri(h,2),o,s,u,!c&&!l)},jH=160,FH=100,UH=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(Tr(t),mt(it(t),e,i),mt(it(t),e,r))},VH=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,g=d.size,b=d.disabled,m=h.step,v=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=TH(e,null),k=p?v*Math.abs(e.deltaY):m,C=_H(t,w,k,!e.ctrlKey);if(l!==C){var O=au(t,C),M=dN(e,s,l),E=b||g===0||c||f,N=u&&E,D=ng(t,M.x,M.y,C,O,N),T=D.x,F=D.y;t.previousWheelEvent=e,t.setTransformState(C,T,F),mt(it(t),e,i),mt(it(t),e,r)}},HH=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;ow(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(sN(t,e.x,e.y),t.wheelAnimationTimer=null)},FH);var s=DH(t,e);s&&(ow(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,mt(it(t),e,i),mt(it(t),e,r))},jH))},WH=function(t,e){var n=hN(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,Tr(t)},GH=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,u=l.disabled,c=l.size;if(!(i===null||!n)){var d=BH(e,r,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var h=hN(e),f=zH(t,h);if(f!==r){var p=au(t,f),g=u||c===0||a,b=o&&g,m=ng(t,d.x,d.y,f,p,b),v=m.x,w=m.y;t.pinchMidpoint=d,t.lastDistance=h,t.setTransformState(f,v,w)}}}},KH=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,sN(t,e==null?void 0:e.x,e==null?void 0:e.y)},fN=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;ow(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,mt(it(t),e,n)},i)},XH=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;mt(it(t),e,i),uN(t,o,a,function(){return mt(it(t),e,r)}),fN(t,e)};function ZH(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,g=c.animationType;if(!d&&!i){if(h==="reset")return XH(t,e);if(!s)return console.error("No ContentComponent found");var b=h==="zoomOut"?-1:1,m=aN(t,b,f);if(o!==m){mt(it(t),e,l);var v=dN(e,s,o),w=L1(t,m,v.x,v.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");mt(it(t),e,u),Bo(t,w,p,g),fN(t,e)}}}var YH=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=r==null?void 0:r.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=ig(l,a);return!d},JH=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){au(n,n.transformState.scale),n.setup=WE(i)},this.initializeWindowEvents=function(){var i,r=B0(),s=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,r),o==null||o.addEventListener("mousemove",n.onPanning,r),o==null||o.addEventListener("mouseup",n.onPanningStop,r),s==null||s.addEventListener("mouseleave",n.clearPanning,r),o==null||o.addEventListener("keyup",n.setKeyUnPressed,r),o==null||o.addEventListener("keydown",n.setKeyPressed,r)},this.cleanupWindowEvents=function(){var i,r,s=B0(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),Tr(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=B0();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(it(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(it(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=RH(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(UH(n,i),VH(n,i),HH(n,i))}}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=zE(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),Tr(n),UE(n,i),mt(it(n),i,s))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=jE(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),VE(n,i.clientX,i.clientY),mt(it(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(wH(n),mt(it(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=IH(n,i);l&&(WH(n,i),Tr(n),mt(it(n),i,o),mt(it(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=LH(n);l&&(i.preventDefault(),i.stopPropagation(),GH(n,i),mt(it(n),i,o),mt(it(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(KH(n),mt(it(n),i,s),mt(it(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=zE(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&i.touches.length===1)n.onDoubleClick(i);else{n.lastTouch=+new Date,Tr(n);var l=i.touches,u=l.length===1,c=l.length===2;u&&(Tr(n),UE(n,i),mt(it(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=jE(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];VE(n,a.clientX,a.clientY),mt(it(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=YH(n,i);s&&ZH(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=it(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),mt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=cN(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):MH(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return it(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,au(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=it(n);mt(s,void 0,n.props.onInit)},this.props=e,this.setup=WE(this.props),this.transformState=oN(this.props)}return t}(),B1=de.createContext(null),qH=function(t,e){return typeof t=="function"?t(e):t},QH=de.forwardRef(function(t,e){var n=y.useRef(new JH(t)).current,i=qH(t.children,sw(n));return y.useImperativeHandle(e,function(){return sw(n)},[n]),y.useEffect(function(){n.update(t)},[n,t]),de.createElement(B1.Provider,{value:n},i)});de.forwardRef(function(t,e){var n=y.useRef(null),i=y.useContext(B1);return y.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),de.createElement("div",go({},t,{ref:$H([n,e])}))});function eW(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var tW=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,GE={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};eW(tW);var nW=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=y.useContext(B1).init,f=y.useRef(null),p=y.useRef(null);return y.useEffect(function(){var g=f.current,b=p.current;g!==null&&b!==null&&h&&h(g,b)},[]),de.createElement("div",go({},u,{ref:f,className:"react-transform-wrapper ".concat(GE.wrapper," ").concat(i),style:o}),de.createElement("div",go({},d,{ref:p,className:"react-transform-component ".concat(GE.content," ").concat(s),style:a}),e))};function iW({wrapperRef:t}){const e=yt();return x.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[x.jsxs("button",{className:"m-0.5 h-8 w-8 rounded-t-lg text-white hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},children:[x.jsx("span",{className:"sr-only",children:e("control.zoom.in")}),x.jsx("span",{className:"icon-[lucide--zoom-in] h-4 w-4"})]}),x.jsx("hr",{className:"border-stone-600"}),x.jsxs("button",{className:"m-0.5 h-8 w-8 rounded-b-lg text-white hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},children:[x.jsx("span",{className:"sr-only",children:e("control.zoom.out")}),x.jsx("span",{className:"icon-[lucide--zoom-out] h-4 w-4"})]})]})}function rW(){const t=yt();return x.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:x.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg font-bold text-white",children:t("computer.chip-select.name")})})}function sW(){const{devices:t}=Fi(),e=["M 380 420 H 820 V 400","M 820 420 V 805","M 450 805 H 900","M 583 805 V 875"].join(" "),n=["M 380 440 H 840 V 400","M 840 440 V 815","M 450 815 H 900","M 573 815 V 875"].join(" "),i="M 750 545 H 860 V 400";return x.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full",children:[x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),x.jsx(Dt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:e,style:rt("bus.rd")}),x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),x.jsx(Dt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:rt("bus.wr")}),x.jsx(Gt,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),x.jsx(Dt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:rt("bus.mem")}),x.jsx(Gt,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),x.jsx(Gt,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&x.jsx(Gt,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&x.jsx(Gt,{springs:"bus.handshake",d:"M 635 595 V 730 H 900"}),x.jsx(Gt,{springs:"bus.intr",d:"M 110 700 V 470"}),x.jsx(Gt,{springs:"bus.inta",d:"M 160 470 V 700"}),x.jsx(Gt,{springs:"bus.int0",d:"M 145 950 V 900"}),x.jsx(Gt,{springs:"bus.int1",d:"M 500 955 H 400 V 900"}),t.preset==="pio-switches-and-leds"&&x.jsxs(x.Fragment,{children:[x.jsx(Gt,{springs:"bus.switches->pio",d:"M 1300 760 H 1120"}),x.jsx(Gt,{springs:"bus.pio->leds",d:"M 1120 850 H 1300"})]}),t.preset==="pio-printer"&&x.jsxs(x.Fragment,{children:[x.jsx(Gt,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),x.jsx(Gt,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),x.jsx(Gt,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]}),t.preset==="handshake"&&x.jsxs(x.Fragment,{children:[x.jsx(Gt,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),x.jsx(Gt,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),x.jsx(Gt,{springs:"bus.printer.data",d:"M 1120 837 H 1250"}),x.jsx(Gt,{springs:"bus.int2",d:"M 930 866 V 1050 H 300 V 900"})]})]})}function Gt({d:t,springs:e}){return x.jsxs(x.Fragment,{children:[x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),x.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),x.jsx(Dt.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:rt(e)})]})}function oW(){const t=yt(),{devices:e}=Fi();return x.jsxs(x.Fragment,{children:[x.jsx(Jn,{className:"left-[384px] top-[403px]",children:"rd"}),x.jsx(Jn,{className:"left-[384px] top-[423px]",children:"wr"}),x.jsx(Jn,{className:"left-[384px] top-[443px]",children:"io/m"}),x.jsx(Jn,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")}),x.jsx(Jn,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),x.jsx(Jn,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&x.jsx(Jn,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&x.jsx(Jn,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.handshake")}),x.jsx(Jn,{className:"left-[75px] top-[478px]",children:"intr"}),x.jsx(Jn,{className:"left-[125px] top-[478px]",children:"inta"}),e.printer&&x.jsxs(x.Fragment,{children:[x.jsx(Jn,{className:"left-[1260px] top-[758px]",children:"strobe"}),x.jsx(Jn,{className:"left-[1260px] top-[773px]",children:"busy"}),x.jsx(Jn,{className:"left-[1260px] top-[828px]",children:"data"})]})]})}function Jn({className:t,children:e}){return x.jsx("span",{className:Ze("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function aW(){const t=["M 699 349 H 800","M 725 349 V 770","M 450 770 H 900","M 618 770 V 875"].join(" "),e=["M 687 249 H 800","M 770 249 V 790","M 450 790 H 900","M 598 790 V 875"].join(" ");return x.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] h-full w-full",children:[x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),x.jsx(Dt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:rt("bus.data")}),x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:t}),x.jsx(Dt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:t,style:rt("bus.address")})]})}function lW(){return x.jsxs(x.Fragment,{children:[x.jsx(aW,{}),x.jsx(sW,{}),x.jsx(oW,{}),x.jsx(rW,{})]})}function uW(){const t=rt("clock.angle");return x.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:x.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[x.jsx("circle",{cx:"12",cy:"12",r:"10"}),x.jsx(Dt.line,{x1:t.to(e=>12+6*Math.sin(e*Math.PI/180)),y1:t.to(e=>12-6*Math.cos(e*Math.PI/180)),x2:12,y2:12})]})})}const pN="Popover",[mN,zZ]=Hr(pN,[wu]),z1=wu(),[cW,ku]=mN(pN),dW=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=z1(e),l=y.useRef(null),[u,c]=y.useState(!1),[d=!1,h]=bo({prop:i,defaultProp:r,onChange:s});return y.createElement(Cb,a,y.createElement(cW,{scope:e,contentId:ka(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:y.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:u,onCustomAnchorAdd:y.useCallback(()=>c(!0),[]),onCustomAnchorRemove:y.useCallback(()=>c(!1),[]),modal:o},n))},hW="PopoverTrigger",fW=y.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=ku(hW,n),s=z1(n),o=Qe(e,r.triggerRef),a=y.createElement(Je.button,le({type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":vN(r.open)},i,{ref:o,onClick:Se(t.onClick,r.onOpenToggle)}));return r.hasCustomAnchor?a:y.createElement(Ab,le({asChild:!0},s),a)}),gN="PopoverPortal",[pW,mW]=mN(gN,{forceMount:void 0}),gW=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=ku(gN,e);return y.createElement(pW,{scope:e,forceMount:n},y.createElement(Io,{present:n||s.open},y.createElement(Ob,{asChild:!0,container:r},i)))},xd="PopoverContent",yW=y.forwardRef((t,e)=>{const n=mW(xd,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=ku(xd,t.__scopePopover);return y.createElement(Io,{present:i||s.open},s.modal?y.createElement(vW,le({},r,{ref:e})):y.createElement(wW,le({},r,{ref:e})))}),vW=y.forwardRef((t,e)=>{const n=ku(xd,t.__scopePopover),i=y.useRef(null),r=Qe(e,i),s=y.useRef(!1);return y.useEffect(()=>{const o=i.current;if(o)return Mb(o)},[]),y.createElement($b,{as:Sa,allowPinchZoom:!0},y.createElement(yN,le({},t,{ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:Se(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,u=a.button===2||l;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Se(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})))}),wW=y.forwardRef((t,e)=>{const n=ku(xd,t.__scopePopover),i=y.useRef(!1),r=y.useRef(!1);return y.createElement(yN,le({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var a;i.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}i.current=!1,r.current=!1},onInteractOutside:s=>{var o,a;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}}))}),yN=y.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=t,h=ku(xd,n),f=z1(n);return wb(),y.createElement(bb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s},y.createElement(vb,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1)},y.createElement(Pb,le({"data-state":vN(h.open),role:"dialog",id:h.contentId},f,d,{ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function vN(t){return t?"open":"closed"}const bW=dW,xW=fW,SW=gW,wN=yW,kW=bW,EW=xW,bN=y.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>x.jsx(SW,{children:x.jsx(wN,{ref:r,align:e,sideOffset:n,className:Ze("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));bN.displayName=wN.displayName;function hi({name:t,title:e,valueAtom:n,springs:i,emphasis:r=!1,className:s}){const o=yt(),a=Xn(n),l=a.low,u=a.is16bits()?a.high:null;return x.jsxs(kW,{children:[x.jsx(EW,{asChild:!0,children:x.jsxs(Dt.button,{title:e,className:Ze("flex w-min cursor-pointer items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",r?"border-mantis-400 text-lg":"border-stone-600 text-base",s),style:rt(i),children:[x.jsx("span",{className:"mr-2 font-bold",children:t}),u&&x.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:u.toString("hex")}),x.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:l.toString("hex")})]})}),x.jsxs(bN,{className:"w-60",children:[x.jsx("p",{className:"px-4 py-2 font-medium text-white",children:e}),x.jsx("hr",{className:"border-stone-600"}),x.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","ascii"].map(c=>x.jsxs("li",{children:[x.jsx("b",{className:"font-medium",children:o(`generics.byte-representation.${c}`)}),":"," ",x.jsx("span",{className:"font-mono text-mantis-400",children:a.toString(c)})]},c))})]})]})}function CW(){const t=Xn(ct.FLAGS),e=Xn(N$),n=t.bit(0),i=t.bit(6),r=t.bit(7),s=t.bit(9),o=t.bit(11);return x.jsxs(x.Fragment,{children:[x.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[x.jsx(Dt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 173 85 H 220",pathLength:1,strokeDasharray:1,style:rt("cpu.alu.operands")}),x.jsx(Dt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 182 145 H 220",pathLength:1,strokeDasharray:1,style:rt("cpu.alu.operands")}),x.jsx(Dt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:rt("cpu.alu.results")}),x.jsx(Dt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:rt("cpu.alu.results")}),x.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),x.jsx(Dt.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:rt("cpu.alu.cog").rot.to(a=>`rotate(${a*60}deg)`)}}),x.jsx(Dt.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:rt("cpu.alu.operation"),children:e}),x.jsxs(Dt.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:rt("cpu.FLAGS"),children:[x.jsx("span",{className:Ze("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),x.jsx("span",{className:Ze("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"ZF"}),x.jsx("span",{className:Ze("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"SF"}),x.jsx("span",{className:Ze("rounded p-1 font-light",s?"bg-mantis-400":"bg-stone-900"),children:"IF"}),x.jsx("span",{className:Ze("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"OF"})]})]})}function AW(){const t=yt(),{status:e}=Fi(),n=Xn(Ks),i=y.useMemo(()=>{if(!("metadata"in n)||n.metadata.operands.length===0)return"";if(n.phase==="fetching-operands"){let s=" __";for(let o=1;o<n.metadata.operands.length;o++)s+=", __";return s}else return" "+n.metadata.operands.join(", ")},[n]),r=y.useMemo(()=>e.type==="running"&&e.waitingForInput?"waiting-for-input":e.type==="stopped"?e.error?"stopped-error":"stopped":n.phase==="stopped"&&n.error?"stopped-error":n.phase,[e,n]);return x.jsxs(x.Fragment,{children:[x.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:x.jsx(Dt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:rt("cpu.decoder.path")})}),x.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:x.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs font-semibold tracking-wide text-white",children:t("computer.cpu.control-unit")})}),x.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[x.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[x.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),x.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:x.jsx(Dt.div,{className:"h-full bg-mantis-400",style:{width:rt("cpu.decoder.progress.progress").to(s=>`${s*100}%`),opacity:rt("cpu.decoder.progress.opacity")}})})]}),x.jsx("span",{className:Ze("mt-4 w-48 rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",r==="stopped-error"?"bg-red-500":r==="waiting-for-input"?"bg-amber-600":"bg-stone-900"),children:t(`computer.cpu.status.${r}`)}),x.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:x.jsx("p",{className:"text-center font-mono",children:n.phase==="fetching"||n.phase==="stopped"?x.jsx("span",{className:"font-bold italic text-stone-400",children:"???"}):x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"font-bold text-mantis-400",children:n.metadata.name}),x.jsx("span",{className:"text-white",children:i})]})})})]})]})}function PW(){const t=yt();return x.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:t("computer.cpu.name")}),x.jsx(kj,{}),x.jsx(tU,{}),x.jsx(_n,{name:"left",className:"left-[60px] top-[70px]"}),x.jsx(_n,{name:"right",className:"left-[60px] top-[130px]"}),x.jsx(_n,{name:"result",className:"left-[300px] top-[100px]"}),x.jsx(CW,{}),x.jsx(_n,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),x.jsx(_n,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),x.jsx(_n,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),x.jsx(_n,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),x.jsx(_n,{name:"id",className:"left-[520px] top-[190px]"}),x.jsx(_n,{name:"MBR",className:"right-[-38px] top-[233px]"}),x.jsx(_n,{name:"IR",className:"left-[171px] top-[270px]"}),x.jsx(AW,{}),x.jsx(_n,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),x.jsx(_n,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),x.jsx(_n,{name:"ri",className:"left-[450px] top-[372px]"}),x.jsx(_n,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function _n({name:t,emphasis:e,className:n}){const i=yt();return x.jsx(hi,{name:t,valueAtom:ct[t],springs:`cpu.${t}`,emphasis:e,title:i("computer.cpu.register",t),className:Ze("absolute",n)})}const OW="_pushable_1nhoa_2",MW="_front_1nhoa_15",$W="_shadow_1nhoa_20",RW="_edge_1nhoa_52",Bh={pushable:OW,front:MW,shadow:$W,edge:RW};function NW(){const t=yt(),{status:e,dispatch:n}=Fi();return FP("F10",i=>{i.preventDefault(),n("f10.press")}),x.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:x.jsxs("button",{className:Bh.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),title:t("computer.f10.name"),children:[x.jsx("div",{className:Bh.shadow}),x.jsx("div",{className:Bh.edge}),x.jsx("span",{className:Bh.front,children:t("computer.f10.interrupt")})]})})}function TW(){const t=yt(),{devices:e}=Fi();return e.handshake?x.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.handshake.name")}),x.jsx(hi,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:g1,springs:"handshake.STATE",className:"mx-auto my-4"}),x.jsx("hr",{className:"border-stone-600"}),x.jsx(hi,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:m1,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var xN={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.6.52 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(y)})(HT,function(n){return function(){var i={689:function(a){a.exports=function(){var l={d:function(U,I){for(var G in I)l.o(I,G)&&!l.o(U,G)&&Object.defineProperty(U,G,{enumerable:!0,get:I[G]})},o:function(U,I){return Object.prototype.hasOwnProperty.call(U,I)},r:function(U){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})}},u={};function c(U){return function(I){if(Array.isArray(I))return h(I)}(U)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(U)||d(U)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(U,I){if(U){if(typeof U=="string")return h(U,I);var G=Object.prototype.toString.call(U).slice(8,-1);return G==="Object"&&U.constructor&&(G=U.constructor.name),G==="Map"||G==="Set"?Array.from(U):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?h(U,I):void 0}}function h(U,I){(I==null||I>U.length)&&(I=U.length);for(var G=0,S=new Array(I);G<I;G++)S[G]=U[G];return S}function f(U){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},f(U)}function p(U,I){for(var G=0;G<I.length;G++){var S=I[G];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(U,b(S.key),S)}}function g(U,I,G){return(I=b(I))in U?Object.defineProperty(U,I,{value:G,enumerable:!0,configurable:!0,writable:!0}):U[I]=G,U}function b(U){var I=function(G,S){if(f(G)!=="object"||G===null)return G;var P=G[Symbol.toPrimitive];if(P!==void 0){var _=P.call(G,S||"default");if(f(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(G)}(U,"string");return f(I)==="symbol"?I:String(I)}l.r(u),l.d(u,{SimpleKeyboard:function(){return re},default:function(){return we}});var m=function(){function U(P){var _=P.getOptions,$=P.getCaretPosition,z=P.getCaretPositionEnd,X=P.dispatch;(function(V,Z){if(!(V instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,U),g(this,"getOptions",void 0),g(this,"getCaretPosition",void 0),g(this,"getCaretPositionEnd",void 0),g(this,"dispatch",void 0),g(this,"maxLengthReached",void 0),g(this,"isStandardButton",function(V){return V&&!(V[0]==="{"&&V[V.length-1]==="}")}),this.getOptions=_,this.getCaretPosition=$,this.getCaretPositionEnd=z,this.dispatch=X,U.bindMethods(U,this)}var I,G,S;return I=U,G=[{key:"getButtonType",value:function(P){return P.includes("{")&&P.includes("}")&&P!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(P){var _=this.getButtonType(P),$=P.replace("{","").replace("}",""),z="";return _!=="standardBtn"&&(z=" hg-button-".concat($)),"hg-".concat(_).concat(z)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(P,_){return(_=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),_):_||this.getDefaultDiplay())[P]||P}},{key:"getUpdatedInput",value:function(P,_,$){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$,X=arguments.length>4&&arguments[4]!==void 0&&arguments[4],V=this.getOptions(),Z=[$,z,X],Q=_;return(P==="{bksp}"||P==="{backspace}")&&Q.length>0?Q=this.removeAt.apply(this,[Q].concat(Z)):(P==="{delete}"||P==="{forwarddelete}")&&Q.length>0?Q=this.removeForwardsAt.apply(this,[Q].concat(Z)):P==="{space}"?Q=this.addStringAt.apply(this,[Q," "].concat(Z)):P!=="{tab}"||typeof V.tabCharOnTab=="boolean"&&V.tabCharOnTab===!1?P!=="{enter}"&&P!=="{numpadenter}"||!V.newLineOnEnter?P.includes("numpad")&&Number.isInteger(Number(P[P.length-2]))?Q=this.addStringAt.apply(this,[Q,P[P.length-2]].concat(Z)):P==="{numpaddivide}"?Q=this.addStringAt.apply(this,[Q,"/"].concat(Z)):P==="{numpadmultiply}"?Q=this.addStringAt.apply(this,[Q,"*"].concat(Z)):P==="{numpadsubtract}"?Q=this.addStringAt.apply(this,[Q,"-"].concat(Z)):P==="{numpadadd}"?Q=this.addStringAt.apply(this,[Q,"+"].concat(Z)):P==="{numpaddecimal}"?Q=this.addStringAt.apply(this,[Q,"."].concat(Z)):P==="{"||P==="}"?Q=this.addStringAt.apply(this,[Q,P].concat(Z)):P.includes("{")||P.includes("}")||(Q=this.addStringAt.apply(this,[Q,P].concat(Z))):Q=this.addStringAt.apply(this,[Q,`
`].concat(Z)):Q=this.addStringAt.apply(this,[Q,"	"].concat(Z)),V.debug&&console.log("Input will be: "+Q),Q}},{key:"updateCaretPos",value:function(P){var _=arguments.length>1&&arguments[1]!==void 0&&arguments[1],$=this.updateCaretPosAction(P,_);this.dispatch(function(z){z.setCaretPosition($)})}},{key:"updateCaretPosAction",value:function(P){var _=arguments.length>1&&arguments[1]!==void 0&&arguments[1],$=this.getOptions(),z=this.getCaretPosition();return z!=null&&(_?z>0&&(z-=P):z+=P),$.debug&&console.log("Caret at:",z),z}},{key:"addStringAt",value:function(P,_){var $,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P.length,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:P.length,V=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return z||z===0?($=[P.slice(0,z),_,P.slice(X)].join(""),this.isMaxLengthReached()||V&&this.updateCaretPos(_.length)):$=P+_,$}},{key:"removeAt",value:function(P){var _,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P.length,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if($===0&&z===0)return P;if($===z){var V=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;$&&$>=0?P.substring($-2,$).match(V)?(_=P.substr(0,$-2)+P.substr($),X&&this.updateCaretPos(2,!0)):(_=P.substr(0,$-1)+P.substr($),X&&this.updateCaretPos(1,!0)):P.slice(-2).match(V)?(_=P.slice(0,-2),X&&this.updateCaretPos(2,!0)):(_=P.slice(0,-1),X&&this.updateCaretPos(1,!0))}else _=P.slice(0,$)+P.slice(z),X&&this.dispatch(function(Z){Z.setCaretPosition($)});return _}},{key:"removeForwardsAt",value:function(P){var _,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P.length,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return P!=null&&P.length&&$!==null?($===z?_=P.substring($,$+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?P.substr(0,$)+P.substr($+2):P.substr(0,$)+P.substr($+1):(_=P.slice(0,$)+P.slice(z),X&&this.dispatch(function(V){V.setCaretPosition($)})),_):P}},{key:"handleMaxLength",value:function(P,_){var $=this.getOptions(),z=$.maxLength,X=P[$.inputName||"default"],V=_.length-1>=z;if(_.length<=X.length)return!1;if(Number.isInteger(z))return $.debug&&console.log("maxLength (num) reached:",V),V?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(f(z)==="object"){var Z=_.length-1>=z[$.inputName||"default"];return $.debug&&console.log("maxLength (obj) reached:",Z),Z?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(P){return P?P.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(_,$){return $.length?_+$[0].toUpperCase()+$.slice(1):_}):""}},{key:"chunkArray",value:function(P,_){return c(Array(Math.ceil(P.length/_))).map(function($,z){return P.slice(_*z,_+_*z)})}},{key:"escapeRegex",value:function(P){return P.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(P,_){var $=P,z=_.indexOf("‫");return z<P&&z!=-1&&$--,_.indexOf("‬")<P&&z!=-1&&$--,$<0?0:$}}],S=[{key:"bindMethods",value:function(P,_){var $,z=function(V,Z){var Q=typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(!Q){if(Array.isArray(V)||(Q=d(V))||Z&&V&&typeof V.length=="number"){Q&&(V=Q);var $e=0,he=function(){};return{s:he,n:function(){return $e>=V.length?{done:!0}:{done:!1,value:V[$e++]}},e:function(vt){throw vt},f:he}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re,De=!0,ye=!1;return{s:function(){Q=Q.call(V)},n:function(){var vt=Q.next();return De=vt.done,vt},e:function(vt){ye=!0,Re=vt},f:function(){try{De||Q.return==null||Q.return()}finally{if(ye)throw Re}}}}(Object.getOwnPropertyNames(P.prototype));try{for(z.s();!($=z.n()).done;){var X=$.value;X==="constructor"||X==="bindMethods"||(_[X]=_[X].bind(_))}}catch(V){z.e(V)}finally{z.f()}}}],G&&p(I.prototype,G),S&&p(I,S),Object.defineProperty(I,"prototype",{writable:!1}),U}();g(m,"noop",function(){});var v=m;function w(U){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},w(U)}function k(U,I){for(var G=0;G<I.length;G++){var S=I[G];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(U,O(S.key),S)}}function C(U,I,G){return(I=O(I))in U?Object.defineProperty(U,I,{value:G,enumerable:!0,configurable:!0,writable:!0}):U[I]=G,U}function O(U){var I=function(G,S){if(w(G)!=="object"||G===null)return G;var P=G[Symbol.toPrimitive];if(P!==void 0){var _=P.call(G,S||"default");if(w(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(G)}(U,"string");return w(I)==="symbol"?I:String(I)}var M=function(){function U(S){var P=this,_=S.dispatch,$=S.getOptions;(function(z,X){if(!(z instanceof X))throw new TypeError("Cannot call a class as a function")})(this,U),C(this,"getOptions",void 0),C(this,"dispatch",void 0),C(this,"isMofifierKey",function(z){return z.altKey||z.ctrlKey||z.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(z.code||z.key||P.keyCodeToKey(z==null?void 0:z.keyCode))}),this.dispatch=_,this.getOptions=$,v.bindMethods(U,this)}var I,G;return I=U,(G=[{key:"handleHighlightKeyDown",value:function(S){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var _=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function($){var z,X,V=$.getButtonElement(_),Z=$.getButtonElement("{".concat(_,"}"));if(V)z=V,X=_;else{if(!Z)return;z=Z,X="{".concat(_,"}")}var Q,$e=function(Re){Re.style.background=P.physicalKeyboardHighlightBgColor||"#dadce4",Re.style.color=P.physicalKeyboardHighlightTextColor||"black"};if(z)if(Array.isArray(z)){if(z.forEach(function(Re){return $e(Re)}),P.physicalKeyboardHighlightPress)if(P.physicalKeyboardHighlightPressUsePointerEvents)(Q=z[0])===null||Q===void 0||Q.onpointerdown();else if(P.physicalKeyboardHighlightPressUseClick){var he;(he=z[0])===null||he===void 0||he.click()}else $.handleButtonClicked(X,S)}else $e(z),P.physicalKeyboardHighlightPress&&(P.physicalKeyboardHighlightPressUsePointerEvents?z.onpointerdown():P.physicalKeyboardHighlightPressUseClick?z.click():$.handleButtonClicked(X,S))})}},{key:"handleHighlightKeyUp",value:function(S){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var _=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function($){var z,X=$.getButtonElement(_)||$.getButtonElement("{".concat(_,"}")),V=function(Z){Z.removeAttribute&&Z.removeAttribute("style")};X&&(Array.isArray(X)?(X.forEach(function(Z){return V(Z)}),P.physicalKeyboardHighlightPressUsePointerEvents&&((z=X[0])===null||z===void 0||z.onpointerup())):(V(X),P.physicalKeyboardHighlightPressUsePointerEvents&&X.onpointerup()))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var P,_="",$=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(_=$!=null&&$.includes("Numpad")||$!=null&&$.includes("Shift")||$!=null&&$.includes("Space")||$!=null&&$.includes("Backspace")||$!=null&&$.includes("Control")||$!=null&&$.includes("Alt")||$!=null&&$.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?(P=_)===null||P===void 0?void 0:P.toLowerCase():_}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}])&&k(I.prototype,G),Object.defineProperty(I,"prototype",{writable:!1}),U}();function E(U){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},E(U)}function N(U,I){for(var G=0;G<I.length;G++){var S=I[G];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(U,T(S.key),S)}}function D(U,I,G){return(I=T(I))in U?Object.defineProperty(U,I,{value:G,enumerable:!0,configurable:!0,writable:!0}):U[I]=G,U}function T(U){var I=function(G,S){if(E(G)!=="object"||G===null)return G;var P=G[Symbol.toPrimitive];if(P!==void 0){var _=P.call(G,S||"default");if(E(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(G)}(U,"string");return E(I)==="symbol"?I:String(I)}var F=function(){function U(S){var P=S.utilities,_=S.options;(function($,z){if(!($ instanceof z))throw new TypeError("Cannot call a class as a function")})(this,U),D(this,"utilities",void 0),D(this,"options",void 0),D(this,"candidateBoxElement",void 0),D(this,"pageIndex",0),D(this,"pageSize",void 0),this.utilities=P,this.options=_,v.bindMethods(U,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var I,G;return I=U,G=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var P=this,_=S.candidateValue,$=S.targetElement,z=S.onSelect;if(_&&_.length){var X=this.utilities.chunkArray(_.split(" "),this.pageSize);this.renderPage({candidateListPages:X,targetElement:$,pageIndex:this.pageIndex,nbPages:X.length,onItemSelected:function(V,Z){z(V,Z),P.destroy()}})}}},{key:"renderPage",value:function(S){var P,_=this,$=S.candidateListPages,z=S.targetElement,X=S.pageIndex,V=S.nbPages,Z=S.onItemSelected;(P=this.candidateBoxElement)===null||P===void 0||P.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Q=document.createElement("ul");Q.className="hg-candidate-box-list",$[X].forEach(function(Tn){var Uo,gr=document.createElement("li"),Ms=function(){var $s=new(_.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty($s,"target",{value:gr}),$s};gr.className="hg-candidate-box-list-item",gr.innerHTML=((Uo=_.options.display)===null||Uo===void 0?void 0:Uo[Tn])||Tn,_.options.useTouchEvents?gr.ontouchstart=function($s){return Z(Tn,$s||Ms())}:gr.onclick=function(){var $s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ms();return Z(Tn,$s)},Q.appendChild(gr)});var $e=X>0,he=document.createElement("div");he.classList.add("hg-candidate-box-prev"),$e&&he.classList.add("hg-candidate-box-btn-active");var Re=function(){$e&&_.renderPage({candidateListPages:$,targetElement:z,pageIndex:X-1,nbPages:V,onItemSelected:Z})};this.options.useTouchEvents?he.ontouchstart=Re:he.onclick=Re,this.candidateBoxElement.appendChild(he),this.candidateBoxElement.appendChild(Q);var De=X<V-1,ye=document.createElement("div");ye.classList.add("hg-candidate-box-next"),De&&ye.classList.add("hg-candidate-box-btn-active");var vt=function(){De&&_.renderPage({candidateListPages:$,targetElement:z,pageIndex:X+1,nbPages:V,onItemSelected:Z})};this.options.useTouchEvents?ye.ontouchstart=vt:ye.onclick=vt,this.candidateBoxElement.appendChild(ye),z.prepend(this.candidateBoxElement)}}],G&&N(I.prototype,G),Object.defineProperty(I,"prototype",{writable:!1}),U}(),j=F;function B(U){return function(I){if(Array.isArray(I))return K(I)}(U)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(U)||function(I,G){if(I){if(typeof I=="string")return K(I,G);var S=Object.prototype.toString.call(I).slice(8,-1);return S==="Object"&&I.constructor&&(S=I.constructor.name),S==="Map"||S==="Set"?Array.from(I):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?K(I,G):void 0}}(U)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(U,I){(I==null||I>U.length)&&(I=U.length);for(var G=0,S=new Array(I);G<I;G++)S[G]=U[G];return S}function Y(U){return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},Y(U)}function ee(U,I){var G=Object.keys(U);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(U);I&&(S=S.filter(function(P){return Object.getOwnPropertyDescriptor(U,P).enumerable})),G.push.apply(G,S)}return G}function W(U,I){for(var G=0;G<I.length;G++){var S=I[G];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(U,H(S.key),S)}}function R(U,I,G){return(I=H(I))in U?Object.defineProperty(U,I,{value:G,enumerable:!0,configurable:!0,writable:!0}):U[I]=G,U}function H(U){var I=function(G,S){if(Y(G)!=="object"||G===null)return G;var P=G[Symbol.toPrimitive];if(P!==void 0){var _=P.call(G,S||"default");if(Y(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(G)}(U,"string");return Y(I)==="symbol"?I:String(I)}var q=function(){function U(S,P){var _=this;if(function(he,Re){if(!(he instanceof Re))throw new TypeError("Cannot call a class as a function")}(this,U),R(this,"input",void 0),R(this,"options",void 0),R(this,"utilities",void 0),R(this,"caretPosition",void 0),R(this,"caretPositionEnd",void 0),R(this,"keyboardDOM",void 0),R(this,"keyboardPluginClasses",void 0),R(this,"keyboardDOMClass",void 0),R(this,"buttonElements",void 0),R(this,"currentInstanceName",void 0),R(this,"allKeyboardInstances",void 0),R(this,"keyboardInstanceNames",void 0),R(this,"isFirstKeyboardInstance",void 0),R(this,"physicalKeyboard",void 0),R(this,"modules",void 0),R(this,"activeButtonClass",void 0),R(this,"holdInteractionTimeout",void 0),R(this,"holdTimeout",void 0),R(this,"isMouseHold",void 0),R(this,"initialized",void 0),R(this,"candidateBox",void 0),R(this,"keyboardRowsDOM",void 0),R(this,"defaultName","default"),R(this,"activeInputElement",null),R(this,"handleParams",function(he,Re){var De,ye,vt;if(typeof he=="string")De=he.split(".").join(""),ye=document.querySelector(".".concat(De)),vt=Re;else if(he instanceof HTMLDivElement){if(!he.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");De=he.className.split(" ")[0],ye=he,vt=Re}else De="simple-keyboard",ye=document.querySelector(".".concat(De)),vt=he;return{keyboardDOMClass:De,keyboardDOM:ye,options:vt}}),R(this,"getOptions",function(){return _.options}),R(this,"getCaretPosition",function(){return _.caretPosition}),R(this,"getCaretPositionEnd",function(){return _.caretPositionEnd}),R(this,"registerModule",function(he,Re){_.modules[he]||(_.modules[he]={}),Re(_.modules[he])}),R(this,"getKeyboardClassString",function(){for(var he=arguments.length,Re=new Array(he),De=0;De<he;De++)Re[De]=arguments[De];return[_.keyboardDOMClass].concat(Re).filter(function(ye){return!!ye}).join(" ")}),typeof window<"u"){var $=this.handleParams(S,P),z=$.keyboardDOMClass,X=$.keyboardDOM,V=$.options,Z=V===void 0?{}:V;this.utilities=new v({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=X,this.options=function(he){for(var Re=1;Re<arguments.length;Re++){var De=arguments[Re]!=null?arguments[Re]:{};Re%2?ee(Object(De),!0).forEach(function(ye){R(he,ye,De[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(he,Object.getOwnPropertyDescriptors(De)):ee(Object(De)).forEach(function(ye){Object.defineProperty(he,ye,Object.getOwnPropertyDescriptor(De,ye))})}return he}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Z),this.keyboardPluginClasses="",v.bindMethods(U,this);var Q=this.options.inputName,$e=Q===void 0?this.defaultName:Q;if(this.input={},this.input[$e]="",this.keyboardDOMClass=z,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new M({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new j({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(z,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var I,G;return I=U,G=[{key:"setCaretPosition",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=P}},{key:"getInputCandidates",value:function(S){var P=this,_=this.options,$=_.layoutCandidates,z=_.layoutCandidatesCaseSensitiveMatch;if(!$||Y($)!=="object")return{};var X=Object.keys($).filter(function(Q){var $e=S.substring(0,P.getCaretPositionEnd()||0)||S,he=new RegExp("".concat(P.utilities.escapeRegex(Q),"$"),z?"g":"gi");return!!B($e.matchAll(he)).length});if(X.length>1){var V=X.sort(function(Q,$e){return $e.length-Q.length})[0];return{candidateKey:V,candidateValue:$[V]}}if(X.length){var Z=X[0];return{candidateKey:Z,candidateValue:$[Z]}}return{}}},{key:"showCandidatesBox",value:function(S,P,_){var $=this;this.candidateBox&&this.candidateBox.show({candidateValue:P,targetElement:_,onSelect:function(z,X){var V=$.options,Z=V.layoutCandidatesCaseSensitiveMatch,Q=V.disableCandidateNormalization,$e=V.enableLayoutCandidatesKeyPress,he=z;Q||(he=z.normalize("NFD"));var Re=$.getInput($.options.inputName,!0),De=$.getCaretPositionEnd()||0,ye=Re.substring(0,De||0)||Re,vt=new RegExp("".concat($.utilities.escapeRegex(S),"$"),Z?"g":"gi"),Tn=ye.replace(vt,he),Uo=Re.replace(ye,Tn),gr=Tn.length-ye.length,Ms=(De||Re.length)+gr;Ms<0&&(Ms=0),$.setInput(Uo,$.options.inputName,!0),$.setCaretPosition(Ms),$e&&typeof $.options.onKeyPress=="function"&&$.options.onKeyPress(z,X),typeof $.options.onChange=="function"&&$.options.onChange($.getInput($.options.inputName,!0),X),typeof $.options.onChangeAll=="function"&&$.options.onChangeAll($.getAllInputs(),X)}})}},{key:"handleButtonClicked",value:function(S,P){var _=this.options,$=_.inputName,z=$===void 0?this.defaultName:$,X=_.debug;if(S!=="{//}"){this.input[z]||(this.input[z]="");var V=this.utilities.getUpdatedInput(S,this.input[z],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[z]&&this.input[z]===V&&this.caretPosition===0&&this.caretPositionEnd===V.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,P);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,P),this.input[z]!==V&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(V))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,V))return;var Z=this.utilities.getUpdatedInput(S,this.input[z],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(Z,this.options.inputName,!0),X&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),P==null?void 0:P.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),P),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),P),P!=null&&P.target&&this.options.enableLayoutCandidates){var Q,$e=this.getInputCandidates(V),he=$e.candidateKey,Re=$e.candidateValue;he&&Re?this.showCandidatesBox(he,Re,this.keyboardDOM):(Q=this.candidateBox)===null||Q===void 0||Q.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),X&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function(P){P.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,P){var _=this;P&&(this.options.preventMouseDownDefault&&P.preventDefault(),this.options.stopMouseDownPropagation&&P.stopPropagation(),P.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(_.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(_.options.debug&&console.log("Button held:",S),_.handleButtonHold(S)),clearTimeout(_.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,P){var _=this;P&&(this.options.preventMouseUpDefault&&P.preventDefault&&P.preventDefault(),this.options.stopMouseUpPropagation&&P.stopPropagation&&P.stopPropagation(),!(P.target===this.keyboardDOM||P.target&&this.keyboardDOM.contains(P.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(P.target===this.candidateBox.candidateBoxElement||P.target&&this.candidateBox.candidateBoxElement.contains(P.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function($){$.classList.remove(_.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,P)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var P=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){P.getMouseHold()?(P.handleButtonClicked(S),P.handleButtonHold(S)):clearTimeout(P.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function(P){P.replaceInput(S.input),P.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!P&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[S].replace("‫","").replace("‬","")+"‬":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,P={};return Object.keys(this.input).forEach(function(_){P[_]=S.getInput(_,!0)}),P}},{key:"setInput",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,_=arguments.length>2?arguments[2]:void 0;this.input[P]=S,!_&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=this.changedOptions(S);this.options=Object.assign(this.options,S),P.length&&(this.options.debug&&console.log("changedOptions",P),this.onSetOptions(P),this.render())}},{key:"changedOptions",value:function(S){var P=this;return Object.keys(S).filter(function(_){return JSON.stringify(S[_])!==JSON.stringify(P.options[_])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new j({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(P){S(window.SimpleKeyboardInstances[P],P)})}},{key:"addButtonTheme",value:function(S,P){var _=this;P&&S&&(S.split(" ").forEach(function($){P.split(" ").forEach(function(z){_.options.buttonTheme||(_.options.buttonTheme=[]);var X=!1;_.options.buttonTheme.map(function(V){if(V!=null&&V.class.split(" ").includes(z)){X=!0;var Z=V.buttons.split(" ");Z.includes($)||(X=!0,Z.push($),V.buttons=Z.join(" "))}return V}),X||_.options.buttonTheme.push({class:z,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,P){var _=this;if(!S&&!P)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function($){var z;(z=_.options)===null||z===void 0||(z=z.buttonTheme)===null||z===void 0||z.map(function(X,V){if(X&&P&&P.includes(X.class)||!P){var Z,Q,$e=(Z=X)===null||Z===void 0?void 0:Z.buttons.split(" ").filter(function(he){return he!==$});X&&$e!=null&&$e.length?X.buttons=$e.join(" "):((Q=_.options.buttonTheme)===null||Q===void 0||Q.splice(V,1),X=null)}return X})}),this.render())}},{key:"getButtonElement",value:function(S){var P,_=this.buttonElements[S];return _&&(P=_.length>1?_:_[0]),P}},{key:"inputPatternIsValid",value:function(S){var P,_=this.options.inputPattern;if((P=_ instanceof RegExp?_:_[this.options.inputName||this.defaultName])&&S){var $=P.test(S);return this.options.debug&&console.log('inputPattern ("'.concat(P,'"): ').concat($?"passed":"did not pass!")),$}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,P=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,P),document.addEventListener("keydown",this.handleKeyDown,P),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var P,_=this;S.target.tagName&&(P=S.target.tagName.toLowerCase()),this.dispatch(function($){var z=S.target===$.keyboardDOM||S.target&&$.keyboardDOM.contains(S.target);if(_.options.syncInstanceInputs&&Array.isArray(S.path)&&(z=S.path.some(function(Z){var Q;return Z==null||(Q=Z.hasAttribute)===null||Q===void 0?void 0:Q.call(Z,"data-skInstance")})),(P==="textarea"||P==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!$.options.disableCaretPositioning){var X=S.target.selectionStart,V=S.target.selectionEnd;$.options.rtl&&(X=$.utilities.getRtlOffset(X,$.getInput()),V=$.utilities.getRtlOffset(V,$.getInput())),$.setCaretPosition(X,V),_.activeInputElement=S.target,$.options.debug&&console.log("Caret at: ",$.getCaretPosition(),$.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat($.keyboardDOMClass,")"),S==null?void 0:S.type)}else!$.options.disableCaretPositioning&&z||(S==null?void 0:S.type)==="selectionchange"||($.setCaretPosition(null),_.activeInputElement=null,$.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var P=this;S&&Object.keys(this.buttonElements).forEach(function(_){return P.buttonElements[_].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,P=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,P),document.removeEventListener("keydown",this.handleKeyDown,P),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(_){_&&(_.onpointerdown=null,_.onpointerup=null,_.onpointercancel=null,_.ontouchstart=null,_.ontouchend=null,_.ontouchcancel=null,_.onclick=null,_.onmousedown=null,_.onmouseup=null,_.remove(),_=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var P=this.options.buttonTheme,_=[];return Array.isArray(P)&&P.forEach(function($){if($&&$.class&&typeof $.class=="string"&&$.buttons&&typeof $.buttons=="string"){var z=$.class.split(" ");$.buttons.split(" ").includes(S)&&(_=[].concat(B(_),B(z)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',$)}),_}},{key:"setDOMButtonAttributes",value:function(S,P){var _=this.options.buttonAttributes;Array.isArray(_)&&_.forEach(function($){$.attribute&&typeof $.attribute=="string"&&$.value&&typeof $.value=="string"&&$.buttons&&typeof $.buttons=="string"?$.buttons.split(" ").includes(S)&&P($.attribute,$.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',$)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){if(S.target.classList.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(P){var _=new P(S);_.init&&_.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,P){return!!this.modules[S]&&this.modules[S][P]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,P,_,$){var z=this,X=Array.from(S.children),V=0;return X.length&&_.forEach(function(Z,Q){var $e=$[Q];if(!($e&&$e>Z))return!1;var he=Z-V,Re=$e-V,De=document.createElement("div");De.className+="hg-button-container";var ye="".concat(z.options.layoutName,"-r").concat(P,"c").concat(Q);De.setAttribute("data-skUID",ye);var vt=X.splice(he,Re-he+1);V=Re-he,vt.forEach(function(Tn){return De.appendChild(Tn)}),X.splice(he,0,De),S.innerHTML="",X.forEach(function(Tn){return S.appendChild(Tn)}),z.options.debug&&console.log("rowDOMContainer",vt,he,Re,V+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var P="hg-layout-".concat(this.options.layoutName),_=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},$=this.options.useTouchEvents||!1,z=$?"hg-touch-events":"",X=this.options.useMouseEvents||!1,V=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,P,this.keyboardPluginClasses,z),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",_[this.options.layoutName||this.defaultName].forEach(function(Z,Q){var $e=Z.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&($e=$e.filter(function(ye){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(ye)}));var he=document.createElement("div");he.className+="hg-row";var Re=[],De=[];$e.forEach(function(ye,vt){var Tn,Uo=!V&&typeof ye=="string"&&ye.length>1&&ye.indexOf("[")===0,gr=!V&&typeof ye=="string"&&ye.length>1&&ye.indexOf("]")===ye.length-1;Uo&&(Re.push(vt),ye=ye.replace(/\[/g,"")),gr&&(De.push(vt),ye=ye.replace(/\]/g,""));var Ms=S.utilities.getButtonClass(ye),$s=S.utilities.getButtonDisplayName(ye,S.options.display,S.options.mergeDisplay),BT=S.options.useButtonTag?"button":"div",Yt=document.createElement(BT);Yt.className+="hg-button ".concat(Ms),(Tn=Yt.classList).add.apply(Tn,B(S.getButtonThemeClasses(ye))),S.setDOMButtonAttributes(ye,function(Ot,jT){Yt.setAttribute(Ot,jT)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||$||X?$?(Yt.ontouchstart=function(Ot){S.handleButtonClicked(ye,Ot),S.handleButtonMouseDown(ye,Ot)},Yt.ontouchend=function(Ot){S.handleButtonMouseUp(ye,Ot)},Yt.ontouchcancel=function(Ot){S.handleButtonMouseUp(ye,Ot)}):(Yt.onclick=function(Ot){S.setMouseHold(!1),typeof S.options.onKeyReleased!="function"&&S.handleButtonClicked(ye,Ot)},Yt.onmousedown=function(Ot){typeof S.options.onKeyReleased!="function"||S.isMouseHold||S.handleButtonClicked(ye,Ot),S.handleButtonMouseDown(ye,Ot)},Yt.onmouseup=function(Ot){S.handleButtonMouseUp(ye,Ot)}):(Yt.onpointerdown=function(Ot){S.handleButtonClicked(ye,Ot),S.handleButtonMouseDown(ye,Ot)},Yt.onpointerup=function(Ot){S.handleButtonMouseUp(ye,Ot)},Yt.onpointercancel=function(Ot){S.handleButtonMouseUp(ye,Ot)}),Yt.setAttribute("data-skBtn",ye);var zT="".concat(S.options.layoutName,"-r").concat(Q,"b").concat(vt);Yt.setAttribute("data-skBtnUID",zT);var ax=document.createElement("span");ax.innerHTML=$s,Yt.appendChild(ax),S.buttonElements[ye]||(S.buttonElements[ye]=[]),S.buttonElements[ye].push(Yt),he.appendChild(Yt)}),he=S.parseRowDOMContainers(he,Q,Re,De),S.keyboardRowsDOM.appendChild(he)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||$||X?$?(document.ontouchend=function(Z){return S.handleButtonMouseUp(void 0,Z)},document.ontouchcancel=function(Z){return S.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.ontouchstart=function(Z){return S.handleKeyboardContainerMouseDown(Z)}):$||(document.onmouseup=function(Z){return S.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onmousedown=function(Z){return S.handleKeyboardContainerMouseDown(Z)}):(document.onpointerup=function(Z){return S.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onpointerdown=function(Z){return S.handleKeyboardContainerMouseDown(Z)}),this.onInit())}}],G&&W(I.prototype,G),Object.defineProperty(I,"prototype",{writable:!1}),U}(),re=q,we=re;return u}()},787:function(a){a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var u=r[a]={exports:{}};return i[a].call(u.exports,u,u.exports,s),u.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return g},default:function(){return b}});var a=s(787);function l(m){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},l(m)}function u(m,v){var w=Object.keys(m);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(m);v&&(k=k.filter(function(C){return Object.getOwnPropertyDescriptor(m,C).enumerable})),w.push.apply(w,k)}return w}function c(m){for(var v=1;v<arguments.length;v++){var w=arguments[v]!=null?arguments[v]:{};v%2?u(Object(w),!0).forEach(function(k){d(m,k,w[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(w)):u(Object(w)).forEach(function(k){Object.defineProperty(m,k,Object.getOwnPropertyDescriptor(w,k))})}return m}function d(m,v,w){return(v=function(k){var C=function(O,M){if(l(O)!=="object"||O===null)return O;var E=O[Symbol.toPrimitive];if(E!==void 0){var N=E.call(O,M||"default");if(l(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(O)}(k,"string");return l(C)==="symbol"?C:String(C)}(v))in m?Object.defineProperty(m,v,{value:w,enumerable:!0,configurable:!0,writable:!0}):m[v]=w,m}var h=function(m){return c(c({},m),{},{keyboardRef:null})},f=s(689),p=s.n(f),g=function(m){var v=m.baseClass||"react-simple-keyboard",w=a.useRef(null),k=a.useRef(null),C=a.useRef(null),O=a.useRef(m);return a.useEffect(function(){var M=function(F){return c(c({},F),{},{theme:"simple-keyboard ".concat(F.theme||"hg-theme-default")})}(m);if(!w.current){w.current=!0,M.debug&&console.log("ReactSimpleKeyboard: Init");var E=k.current,N=".".concat(v);C.current=new(p())(E||N,M),M.keyboardRef&&M.keyboardRef(C.current)}var D=function(F,j){var B=h(j),K=h(F);return Object.keys(B).filter(function(Y){return B[Y]!==K[Y]})}(O.current,M);if(D.length){var T=C.current;O.current=M,T==null||T.setOptions(M),M.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",D)}},[w,v,O,m]),a.createElement("div",{className:v,ref:k})},b=g}(),o}()})})(xN);var _W=xN.exports;const DW=fu(_W),IW={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},LW={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},KE="Á É Í Ó Ú á é í ó ú ́",XE="Ü ü ̈";function BW(){const t=eO(),e=yt(),{status:n,dispatch:i}=Fi(),[r,s]=y.useState("none"),[o,a]=y.useState(!1),[l,u]=y.useState(!1),c=y.useMemo(()=>[t,t==="es"&&(o&&"accent"||l&&"diaeresis"),r!=="none"&&"shift"].filter(Boolean).join("-"),[t,r,o,l]),d=y.useCallback(h=>{n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",h)},[n,i]);return x.jsxs("div",{className:"absolute left-[1200px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl font-bold text-white",children:e("computer.keyboard")}),x.jsx(DW,{theme:Ze("hg-theme-vonsim",`hg-shift-${r}`,o&&"hg-accentDeadKey",l&&"hg-diaeresisDeadKey"),layoutName:c,layout:IW,display:LW[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:KE},{class:"hg-diaeresisDeadKeyButton",buttons:XE}],disableButtonHold:!0,onKeyPress:h=>{if(h==="{shiftleft}"||h==="{shiftright}"){s(f=>f==="none"?"once":"none");return}if(h==="{lock}"){s(f=>f==="none"?"lock":"none");return}if(t==="es"){if(o){KE.includes(h)&&(a(!1),r==="once"&&s("none"),d(h));return}else if(h==="́"){a(!0);return}if(l){XE.includes(h)&&(u(!1),r==="once"&&s("none"),d(h));return}else if(h==="̈"){u(!0);return}}r==="once"&&s("none"),d(h==="{bksp}"?"\b":h==="{enter}"?`
`:h==="{tab}"?"	":h==="{space}"?" ":h)}})]})}function zW(){const t=yt(),{devices:e}=Fi(),n=Xn(y1).toArray();return e.leds?x.jsxs("div",{className:"absolute left-[1300px] top-[820px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.leds")}),x.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>x.jsx("div",{className:Ze("relative h-7 w-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:x.jsx("div",{className:Ze("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})},r))})]}):null}function jW(){const t=yt(),e=Xn(uU);return x.jsxs("div",{className:"absolute left-[800px] top-0 z-10 h-[400px] w-[150px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:t("computer.memory.name")}),x.jsx("div",{className:"m-4 w-min overflow-hidden rounded-lg border border-stone-600",children:x.jsx("table",{className:"font-mono text-lg",children:x.jsx("tbody",{children:e.map((n,i)=>x.jsxs("tr",{title:t("computer.memory.cell",n.address),className:"border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",children:[x.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:n.address.toString()}),x.jsx("td",{className:"px-2 py-1",children:n.value.toString("hex")})]},i))})})})]})}function FW(){const t=yt();return x.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsxs("div",{className:"flex items-start",children:[x.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.pic")}),x.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[x.jsx(hi,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:w1,springs:"pic.IMR",emphasis:!0}),x.jsx(hi,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:b1,springs:"pic.IRR",emphasis:!0}),x.jsx(hi,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:x1,springs:"pic.ISR",emphasis:!0})]})]}),x.jsx("hr",{className:"mb-2 border-stone-600"}),x.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:Ip.map((e,n)=>x.jsx(hi,{name:`INT${n}`,title:t("generics.io-register",`INT${n}`,36+n),valueAtom:e,springs:`pic.INT${n}`,className:"mx-auto"},n))})]})}function UW(){const t=yt(),{devices:e}=Fi();return e.pio?x.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.pio.name")}),x.jsx("hr",{className:"border-stone-600"}),x.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[x.jsx(hi,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:S1,springs:"pio.PA"}),x.jsx(hi,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:E1,springs:"pio.CA"})]}),x.jsx("hr",{className:"border-stone-600"}),x.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[x.jsx(hi,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:k1,springs:"pio.PB"}),x.jsx(hi,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:C1,springs:"pio.CB"})]})]}):null}const VW="_printer_fbkny_2",HW="_shadow_fbkny_6",WW="_sides_fbkny_11",GW="_front_fbkny_22",KW="_trailContainer_fbkny_27",XW="_trail_fbkny_27",ZW="_paper_fbkny_33",Go={printer:VW,shadow:HW,sides:WW,front:GW,trailContainer:KW,trail:XW,paper:ZW},YW=Array.from({length:5},(t,e)=>e);function JW(){const t=yt(),{devices:e}=Fi(),n=Xn(Lp),i=Xn(Bp);return e.printer?x.jsx("div",{className:"absolute left-[1250px] top-[750px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:x.jsxs("div",{className:Go.printer,title:t("computer.printer.name"),children:[x.jsx("div",{className:Go.shadow}),x.jsx("div",{className:Go.sides}),x.jsxs("div",{className:Go.front,children:[x.jsx("div",{className:Go.trailContainer,children:x.jsx("div",{className:Go.trail,children:x.jsx("pre",{className:Go.paper,children:i})})}),x.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:YW.map(r=>{const s=n[r]?l5(n[r].unsigned):null;return x.jsx("span",{className:Ze("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),x.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:x.jsx(Dt.div,{className:"h-full bg-mantis-400",style:{width:rt("printer.printing.progress").to(r=>`${r*100}%`),opacity:rt("printer.printing.opacity")}})})]})]})}):null}const qW="_screen_1okia_2",QW={screen:qW};function eG(){const t=yt(),e=Xn(A1);return x.jsxs("div",{className:"absolute left-[1200px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl font-bold text-white",children:t("computer.screen")}),x.jsx("pre",{className:QW.screen,children:e})]})}function tG(){const t=yt(),{status:e,dispatch:n,devices:i}=Fi(),r=Xn(P1).toArray();return i.switches?x.jsxs("div",{className:"absolute left-[1300px] top-[690px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.switches")}),x.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:r.map((s,o)=>x.jsx("div",{className:"w-6",children:x.jsx(_1,{checked:s,onCheckedChange:()=>n("switch.toggle",o),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800",disabled:e.type!=="running"})},o))})]}):null}function nG(){const t=yt();return x.jsxs("div",{className:"absolute left-[500px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.timer")}),x.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[x.jsx(hi,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:O1,springs:"timer.CONT"}),x.jsx(hi,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:M1,springs:"timer.COMP"})]})]})}function SN(){const t=y.useRef(null);return x.jsx("div",{className:"relative h-full w-full",children:x.jsxs(QH,{minScale:.3,initialScale:.75,ref:t,children:[x.jsx(nW,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:x.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[x.jsx(lW,{}),x.jsx(PW,{}),x.jsx(jW,{}),x.jsx(TW,{}),x.jsx(FW,{}),x.jsx(UW,{}),x.jsx(nG,{}),x.jsx(uW,{}),x.jsx(NW,{}),x.jsx(BW,{}),x.jsx(zW,{}),x.jsx(JW,{}),x.jsx(tG,{}),x.jsx(eG,{})]})}),x.jsx(iW,{wrapperRef:t})]})})}const iG=1024;let rG=0;class z0{constructor(e,n){this.from=e,this.to=n}}class We{constructor(e={}){this.id=rG++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Yn.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}We.closedBy=new We({deserialize:t=>t.split(" ")});We.openedBy=new We({deserialize:t=>t.split(" ")});We.group=new We({deserialize:t=>t.split(" ")});We.contextHash=new We({perNode:!0});We.lookAhead=new We({perNode:!0});We.mounted=new We({perNode:!0});const sG=Object.create(null);class Yn{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):sG,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Yn(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(We.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(We.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Yn.none=new Yn("",Object.create(null),0,8);class j1{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Yn(i.name,r,i.id,i.flags):i)}return new j1(n)}}const zh=new WeakMap,ZE=new WeakMap;var tn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(tn||(tn={}));class Et{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(We.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Vp(this.topNode,e)}cursorAt(e,n=0,i=0){let r=zh.get(this)||this.topNode,s=new Vp(r);return s.moveTo(e,n),zh.set(this,s._tree),s}get topNode(){return new ys(this,0,0,null)}resolve(e,n=0){let i=lu(zh.get(this)||this.topNode,e,n,!1);return zh.set(this,i),i}resolveInner(e,n=0){let i=lu(ZE.get(this)||this.topNode,e,n,!0);return ZE.set(this,i),i}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&tn.IncludeAnonymous)>0;for(let l=this.cursor(o|tn.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:V1(Yn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Et(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Et(Yn.none,n,i,r)))}static build(e){return aG(e)}}Et.empty=new Et(Yn.none,[],[],0);class F1{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new F1(this.buffer,this.index)}}class Ua{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Yn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(kN(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let u=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,u)}return new Ua(s,o,this.set)}}function kN(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function EN(t,e){let n=t.childBefore(e);for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(t=n,n=i.prevSibling):n=i}return t}function lu(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof ys&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:tn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof ys&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class ys{constructor(e,n,i,r){this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(kN(r,i,d,d+c.length)){if(c instanceof Ua){if(s&tn.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new so(new oG(o,c,e,d),null,h)}else if(s&tn.IncludeAnonymous||!c.type.isAnonymous||U1(c)){let h;if(!(s&tn.IgnoreMounts)&&c.props&&(h=c.prop(We.mounted))&&!h.overlay)return new ys(h.tree,d,e,o);let f=new ys(c,d,e,o);return s&tn.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&tn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&tn.IgnoreOverlays)&&(r=this._tree.prop(We.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new ys(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Vp(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return lu(this,e,n,!1)}resolveInner(e,n=0){return lu(this,e,n,!0)}enterUnfinishedNodesBefore(e){return EN(this,e)}getChild(e,n=null,i=null){let r=Fp(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return Fp(this,e,n,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Up(this,e)}}function Fp(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(;!r.type.is(n);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Up(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class oG{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class so{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new so(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&tn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new so(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new so(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new so(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new Vp(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Et(this.type,e,n,this.to-this.from)}resolve(e,n=0){return lu(this,e,n,!1)}resolveInner(e,n=0){return lu(this,e,n,!0)}enterUnfinishedNodesBefore(e){return EN(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,i=null){let r=Fp(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return Fp(this,e,n,i)}get node(){return this}matchContext(e){return Up(this,e)}}class Vp{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ys)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof ys?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&tn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&tn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&tn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&tn.IncludeAnonymous||a instanceof Ua||!a.type.isAnonymous||U1(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new so(this.buffer,n,this.stack[r]);return this.bufferNode=new so(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Up(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Up(this.node,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function U1(t){return t.children.some(e=>e instanceof Ua||!e.type.isAnonymous||U1(e))}function aG(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=iG,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new F1(n,n.length):n,l=i.types,u=0,c=0;function d(k,C,O,M,E){let{id:N,start:D,end:T,size:F}=a,j=c;for(;F<0;)if(a.next(),F==-1){let W=s[N];O.push(W),M.push(D-k);return}else if(F==-3){u=N;return}else if(F==-4){c=N;return}else throw new RangeError(`Unrecognized record size: ${F}`);let B=l[N],K,Y,ee=D-k;if(T-D<=r&&(Y=g(a.pos-C,E))){let W=new Uint16Array(Y.size-Y.skip),R=a.pos-Y.size,H=W.length;for(;a.pos>R;)H=b(Y.start,W,H);K=new Ua(W,T-Y.start,i),ee=Y.start-k}else{let W=a.pos-F;a.next();let R=[],H=[],q=N>=o?N:-1,re=0,we=T;for(;a.pos>W;)q>=0&&a.id==q&&a.size>=0?(a.end<=we-r&&(f(R,H,D,re,a.end,we,q,j),re=R.length,we=a.end),a.next()):d(D,W,R,H,q);if(q>=0&&re>0&&re<R.length&&f(R,H,D,re,D,we,q,j),R.reverse(),H.reverse(),q>-1&&re>0){let U=h(B);K=V1(B,R,H,0,R.length,0,T-D,U,U)}else K=p(B,R,H,T-D,j-T)}O.push(K),M.push(ee)}function h(k){return(C,O,M)=>{let E=0,N=C.length-1,D,T;if(N>=0&&(D=C[N])instanceof Et){if(!N&&D.type==k&&D.length==M)return D;(T=D.prop(We.lookAhead))&&(E=O[N]+D.length+T)}return p(k,C,O,M,E)}}function f(k,C,O,M,E,N,D,T){let F=[],j=[];for(;k.length>M;)F.push(k.pop()),j.push(C.pop()+O-E);k.push(p(i.types[D],F,j,N-E,T-N)),C.push(E-O)}function p(k,C,O,M,E=0,N){if(u){let D=[We.contextHash,u];N=N?[D].concat(N):[D]}if(E>25){let D=[We.lookAhead,E];N=N?[D].concat(N):[D]}return new Et(k,C,O,M,N)}function g(k,C){let O=a.fork(),M=0,E=0,N=0,D=O.end-r,T={size:0,start:0,skip:0};e:for(let F=O.pos-k;O.pos>F;){let j=O.size;if(O.id==C&&j>=0){T.size=M,T.start=E,T.skip=N,N+=4,M+=4,O.next();continue}let B=O.pos-j;if(j<0||B<F||O.start<D)break;let K=O.id>=o?4:0,Y=O.start;for(O.next();O.pos>B;){if(O.size<0)if(O.size==-3)K+=4;else break e;else O.id>=o&&(K+=4);O.next()}E=Y,M+=j,N+=K}return(C<0||M==k)&&(T.size=M,T.start=E,T.skip=N),T.size>4?T:void 0}function b(k,C,O){let{id:M,start:E,end:N,size:D}=a;if(a.next(),D>=0&&M<o){let T=O;if(D>4){let F=a.pos-(D-4);for(;a.pos>F;)O=b(k,C,O)}C[--O]=T,C[--O]=N-k,C[--O]=E-k,C[--O]=M}else D==-3?u=M:D==-4&&(c=M);return O}let m=[],v=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,m,v,-1);let w=(e=t.length)!==null&&e!==void 0?e:m.length?v[0]+m[0].length:0;return new Et(l[t.topID],m.reverse(),v.reverse(),w)}const YE=new WeakMap;function Rf(t,e){if(!t.isAnonymous||e instanceof Ua||e.type!=t)return 1;let n=YE.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Et)){n=1;break}n+=Rf(t,i)}YE.set(e,n)}return n}function V1(t,e,n,i,r,s,o,a,l){let u=0;for(let p=i;p<r;p++)u+=Rf(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,g,b,m,v){for(let w=b;w<m;){let k=w,C=g[w],O=Rf(t,p[w]);for(w++;w<m;w++){let M=Rf(t,p[w]);if(O+M>=c)break;O+=M}if(w==k+1){if(O>c){let M=p[k];f(M.children,M.positions,0,M.children.length,g[k]+v);continue}d.push(p[k])}else{let M=g[w-1]+p[w-1].length-C;d.push(V1(t,p,g,k,w,C,M,null,l))}h.push(C+v-s)}}return f(e,n,i,r,0),(a||l)(d,h,o)}class ma{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new ma(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new ma(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return r}}class CN{startParse(e,n,i){return typeof e=="string"&&(e=new lG(e)),i=i?i.length?i.map(r=>new z0(r.from,r.to)):[new z0(0,0)]:[new z0(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class lG{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new We({perNode:!0});let uG=0;class Qt{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=uG++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Qt([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new Hp;return n=>n.modified.indexOf(e)>-1?n:Hp.get(n.base||n,n.modified.concat(e).sort((i,r)=>i.id-r.id))}}let cG=0;class Hp{constructor(){this.instances=[],this.id=cG++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&dG(n,a.modified));if(i)return i;let r=[],s=new Qt(r,e,n);for(let a of n)a.instances.push(s);let o=hG(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Hp.get(a,l));return s}}function dG(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function hG(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function fG(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+r);let c=new Wp(i,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return AN.add(e)}const AN=new We;class Wp{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Wp.empty=new Wp([],2,null);function PN(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function pG(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function mG(t,e,n,i=0,r=t.length){let s=new gG(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class gG{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=yG(e)||Wp.empty,d=pG(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(We.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(b=>!b.scope||b.scope(h.tree.type)),g=e.firstChild();for(let b=0,m=a;;b++){let v=b<h.overlay.length?h.overlay[b]:null,w=v?v.from+a:l,k=Math.max(n,m),C=Math.min(i,w);if(k<C&&g)for(;e.from<C&&(this.highlightRange(e,k,C,r,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=w||!e.nextSibling())););if(!v||w>i)break;m=v.to+a,m>n&&(this.highlightRange(f.cursor(),Math.max(n,v.from+a),Math.min(i,m),"",p),this.startSpan(Math.min(i,m),u))}g&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function yG(t){let e=t.type.prop(AN);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const ce=Qt.define,jh=ce(),Bs=ce(),JE=ce(Bs),qE=ce(Bs),zs=ce(),Fh=ce(zs),j0=ce(zs),xr=ce(),Ko=ce(xr),wr=ce(),br=ce(),aw=ce(),Hu=ce(aw),Uh=ce(),Te={comment:jh,lineComment:ce(jh),blockComment:ce(jh),docComment:ce(jh),name:Bs,variableName:ce(Bs),typeName:JE,tagName:ce(JE),propertyName:qE,attributeName:ce(qE),className:ce(Bs),labelName:ce(Bs),namespace:ce(Bs),macroName:ce(Bs),literal:zs,string:Fh,docString:ce(Fh),character:ce(Fh),attributeValue:ce(Fh),number:j0,integer:ce(j0),float:ce(j0),bool:ce(zs),regexp:ce(zs),escape:ce(zs),color:ce(zs),url:ce(zs),keyword:wr,self:ce(wr),null:ce(wr),atom:ce(wr),unit:ce(wr),modifier:ce(wr),operatorKeyword:ce(wr),controlKeyword:ce(wr),definitionKeyword:ce(wr),moduleKeyword:ce(wr),operator:br,derefOperator:ce(br),arithmeticOperator:ce(br),logicOperator:ce(br),bitwiseOperator:ce(br),compareOperator:ce(br),updateOperator:ce(br),definitionOperator:ce(br),typeOperator:ce(br),controlOperator:ce(br),punctuation:aw,separator:ce(aw),bracket:Hu,angleBracket:ce(Hu),squareBracket:ce(Hu),paren:ce(Hu),brace:ce(Hu),content:xr,heading:Ko,heading1:ce(Ko),heading2:ce(Ko),heading3:ce(Ko),heading4:ce(Ko),heading5:ce(Ko),heading6:ce(Ko),contentSeparator:ce(xr),list:ce(xr),quote:ce(xr),emphasis:ce(xr),strong:ce(xr),link:ce(xr),monospace:ce(xr),strikethrough:ce(xr),inserted:ce(),deleted:ce(),changed:ce(),invalid:ce(),meta:Uh,documentMeta:ce(Uh),annotation:ce(Uh),processingInstruction:ce(Uh),definition:Qt.defineModifier(),constant:Qt.defineModifier(),function:Qt.defineModifier(),standard:Qt.defineModifier(),local:Qt.defineModifier(),special:Qt.defineModifier()};PN([{tag:Te.link,class:"tok-link"},{tag:Te.heading,class:"tok-heading"},{tag:Te.emphasis,class:"tok-emphasis"},{tag:Te.strong,class:"tok-strong"},{tag:Te.keyword,class:"tok-keyword"},{tag:Te.atom,class:"tok-atom"},{tag:Te.bool,class:"tok-bool"},{tag:Te.url,class:"tok-url"},{tag:Te.labelName,class:"tok-labelName"},{tag:Te.inserted,class:"tok-inserted"},{tag:Te.deleted,class:"tok-deleted"},{tag:Te.literal,class:"tok-literal"},{tag:Te.string,class:"tok-string"},{tag:Te.number,class:"tok-number"},{tag:[Te.regexp,Te.escape,Te.special(Te.string)],class:"tok-string2"},{tag:Te.variableName,class:"tok-variableName"},{tag:Te.local(Te.variableName),class:"tok-variableName tok-local"},{tag:Te.definition(Te.variableName),class:"tok-variableName tok-definition"},{tag:Te.special(Te.variableName),class:"tok-variableName2"},{tag:Te.definition(Te.propertyName),class:"tok-propertyName tok-definition"},{tag:Te.typeName,class:"tok-typeName"},{tag:Te.namespace,class:"tok-namespace"},{tag:Te.className,class:"tok-className"},{tag:Te.macroName,class:"tok-macroName"},{tag:Te.propertyName,class:"tok-propertyName"},{tag:Te.operator,class:"tok-operator"},{tag:Te.comment,class:"tok-comment"},{tag:Te.meta,class:"tok-meta"},{tag:Te.invalid,class:"tok-invalid"},{tag:Te.punctuation,class:"tok-punctuation"}]);var F0;const yl=new We;function vG(t){return ke.define({combine:t?e=>e.concat(t):void 0})}const wG=new We;class er{constructor(e,n,i=[],r=""){this.data=e,this.name=r,Fe.prototype.hasOwnProperty("tree")||Object.defineProperty(Fe.prototype,"tree",{get(){return pr(this)}}),this.parser=n,this.extension=[du.of(this),Fe.languageData.of((s,o,a)=>{let l=QE(s,o,a),u=l.type.prop(yl);if(!u)return[];let c=s.facet(u),d=l.type.prop(wG);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return QE(e,n,i).type.prop(yl)==this.data}findRegions(e){let n=e.facet(du);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(yl)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(We.mounted);if(a){if(a.tree.prop(yl)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof Et&&r(u,s.positions[l]+o)}};return r(pr(e),0),i}get allowsNesting(){return!0}}er.setState=je.define();function QE(t,e,n){let i=t.facet(du),r=pr(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,tn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function pr(t){let e=t.field(er.state,!1);return e?e.tree:Et.empty}class bG{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Wu=null;class uu{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new uu(e,n,[],Et.empty,0,i,[],null)}startParse(){return this.parser.startParse(new bG(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Et.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(ma.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ma.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Wu;Wu=this;try{return e()}finally{Wu=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=eC(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),i=ma.applyChanges(i,l),r=Et.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new uu(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=eC(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends CN{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Wu;if(l){for(let u of r)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Et(Yn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Wu}}function eC(t,e,n){return ma.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class cu{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new cu(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=uu.create(e.facet(du).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new cu(i)}}er.state=wn.define({create:cu.init,update(t,e){for(let n of e.effects)if(n.is(er.setState))return n.value;return e.startState.facet(du)!=e.state.facet(du)?cu.init(e.state):t.apply(e)}});let ON=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(ON=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const U0=typeof navigator<"u"&&(!((F0=navigator.scheduling)===null||F0===void 0)&&F0.isInputPending)?()=>navigator.scheduling.isInputPending():null,xG=un.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(er.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(er.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=ON(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(er.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!U0?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>U0&&U0()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:er.setState.of(new cu(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>or(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),du=ke.define({combine(t){return t.length?t[0]:null},enables:t=>[er.state,xG,Pe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class SG{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const MN=ke.define(),H1=ke.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Ta(t){let e=t.facet(H1);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Gp(t,e){let n="",i=t.tabSize,r=t.facet(H1)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function $N(t,e){t instanceof Fe&&(t=new W1(t));for(let i of t.state.facet(MN)){let r=i(t,e);if(r!==void 0)return r}let n=pr(t.state);return n?EG(t,n,e):null}class W1{constructor(e,n={}){this.state=e,this.options=n,this.unit=Ta(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Im(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const kG=new We;function EG(t,e,n){return RN(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function CG(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function AG(t){let e=t.type.prop(kG);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(We.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>$G(o,!0,1,void 0,s&&!CG(o)?r.from:void 0)}return t.parent==null?PG:null}function RN(t,e,n){for(;t;t=t.parent){let i=AG(t);if(i)return i(G1.create(n,e,t))}return null}function PG(){return 0}class G1 extends W1{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.node=i}static create(e,n,i){return new G1(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(OG(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?RN(e,this.pos,this.base):0}}function OG(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function MG(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function $G(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=e?MG(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const RG=200;function NG(){return Fe.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+RG)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let d=$N(o,c.from);if(d==null)continue;let h=/^\s*/.exec(c.text)[0],f=Gp(o,d);h!=f&&l.push({from:c.from,to:c.from+h.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const TG=ke.define(),_G=new We;function DG(t,e,n){let i=pr(t);if(i.length<n)return null;let r=i.resolveInner(n,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(_G);if(a&&(o.to<i.length-50||i.length==t.doc.length||!IG(o))){let l=a(o,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(s=l)}}return s}function IG(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function NN(t,e,n){for(let i of t.facet(TG)){let r=i(t,e,n);if(r)return r}return DG(t,e,n)}function TN(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const K1=je.define({map:TN}),rg=je.define({map:TN});function _N(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Vd=wn.define({create(){return Ke.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(K1)&&!LG(t,n.value.from,n.value.to)?t=t.update({add:[tC.range(n.value.from,n.value.to)]}):n.is(rg)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>Pe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(tC.range(i,r))}return Ke.set(e,!0)}});function DN(t,e,n){var i;let r=null;return(i=t.field(Vd,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function LG(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function IN(t,e){return t.field(Vd,!1)?e:e.concat(je.appendConfig.of(VG()))}const BG=t=>{for(let e of _N(t)){let n=NN(t.state,e.from,e.to);if(n)return t.dispatch({effects:IN(t.state,[K1.of(n),LN(t,n)])}),!0}return!1},zG=t=>{if(!t.state.field(Vd,!1))return!1;let e=[];for(let n of _N(t)){let i=DN(t.state,n.from,n.to);i&&e.push(rg.of(i),LN(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function LN(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Pe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const jG=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=NN(e,r.from,r.to);s&&n.push(K1.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:IN(t.state,n)}),!!n.length},FG=t=>{let e=t.state.field(Vd,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(rg.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},UG={placeholderDOM:null,placeholderText:"…"},BN=ke.define({combine(t){return Lo(t,UG)}});function VG(t){let e=[Vd,HG];return t&&e.push(BN.of(t)),e}const tC=Ke.replace({widget:new class extends ja{toDOM(t){let{state:e}=t,n=e.facet(BN),i=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),a=DN(t.state,o.from,o.to);a&&t.dispatch({effects:rg.of(a)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),HG=Pe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class sg{constructor(e,n){this.specs=e;let i;function r(a){let l=Ao.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof er?a=>a.prop(yl)==o.data:o?a=>a==o:void 0,this.style=PN(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new Ao(i):null,this.themeType=n.themeType}static define(e,n){return new sg(e,n||{})}}const lw=ke.define(),zN=ke.define({combine(t){return t.length?[t[0]]:null}});function V0(t){let e=t.facet(lw);return e.length?e:t.facet(zN)}function WG(t,e){let n=[KG],i;return t instanceof sg&&(t.module&&n.push(Pe.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(zN.of(t)):i?n.push(lw.computeN([Pe.darkTheme],r=>r.facet(Pe.darkTheme)==(i=="dark")?[t]:[])):n.push(lw.of(t)),n}class GG{constructor(e){this.markCache=Object.create(null),this.tree=pr(e.state),this.decorations=this.buildDeco(e,V0(e.state))}update(e){let n=pr(e.state),i=V0(e.state),r=i!=V0(e.startState);n.length<e.view.viewport.to&&!r&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,n){if(!n||!this.tree.length)return Ke.none;let i=new $a;for(let{from:r,to:s}of e.visibleRanges)mG(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=Ke.mark({class:l})))},r,s);return i.finish()}}const KG=Td.high(un.fromClass(GG,{decorations:t=>t.decorations})),XG=1e4,ZG="()[]{}",YG=new We;function uw(t,e,n){let i=t.prop(e<0?We.openedBy:We.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function cw(t){let e=t.type.prop(YG);return e?e(t.node):t}function Vh(t,e,n,i={}){let r=i.maxScanDistance||XG,s=i.brackets||ZG,o=pr(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=uw(l.type,n,s);if(u&&l.from<l.to){let c=cw(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return JG(t,e,n,l,c,u,s)}}return qG(t,e,n,o,a.type,r,s)}function JG(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=cw(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(uw(c.type,n,o))u++;else if(uw(c.type,-n,o)){if(u==0){let d=cw(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function qG(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let g=n>0?0:f.length-1,b=n>0?f.length:-1;g!=b;g+=n){let m=o.indexOf(f[g]);if(!(m<0||i.resolveInner(p+g,1).type!=r))if(m%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+g,to:p+g+1},matched:m>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function nC(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class jN{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=nC(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:nC(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function QG(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||eK,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Y1}}function eK(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const iC=new WeakMap;class X1 extends er{constructor(e){let n=vG(e.languageData),i=QG(e),r,s=new class extends CN{createParse(o,a,l){return new nK(r,o,a,l)}};super(n,s,[MN.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=sK(n),r=this,this.streamParser=i,this.stateAfter=new We({perNode:!0}),this.tokenTable=e.tokenTable?new HN(i.tokenTable):rK}static define(e){return new X1(e)}getIndent(e,n){let i=pr(e.state),r=i.resolve(n);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=iC.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=Z1(this,i,0,r.from,s??n),l,u;if(a?(u=a.state,l=a.pos+1):(u=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),h=Math.min(n,d.to);if(d.length){let f=o?o(d.from):-1,p=new jN(d.text,e.state.tabSize,e.unit,f<0?void 0:f);for(;p.pos<h-d.from;)UN(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==n)break;l=d.to+1}let c=e.lineAt(n);return o&&s==null&&iC.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function Z1(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof Et&&l<r&&Z1(t,a,l,i,r);if(u)return u}return null}function FN(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof Et){if(!(l=FN(t,a,n-o,i-o,r)))break;return r?new Et(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function tK(t,e,n,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),a=s<=n&&o>n&&Z1(t,r.tree,0-r.offset,n,o),l;if(a&&(l=FN(t,r.tree,n+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(i?Ta(i):4),tree:Et.empty}}class nK{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=uu.get(),o=r[0].from,{state:a,tree:l}=tK(e,i,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Ta(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=uu.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,n,i,r),s}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new jN(n,e?e.state.tabSize:4,e?Ta(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=UN(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Et.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:iK,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Et(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Et(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function UN(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const Y1=Object.create(null),Sd=[Yn.none],iK=new j1(Sd),rC=[],VN=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])VN[t]=WN(Y1,e);class HN{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),VN)}resolve(e){return e?this.table[e]||(this.table[e]=WN(this.extra,e)):0}}const rK=new HN(Y1);function H0(t,e){rC.indexOf(t)>-1||(rC.push(t),console.warn(e))}function WN(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||Te[s];o?typeof o=="function"?n?n=o(n):H0(s,`Modifier ${s} used at start of tag`):n?H0(s,`Tag ${s} used as modifier`):n=o:H0(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let i=e.replace(/ /g,"_"),r=Yn.define({id:Sd.length,name:i,props:[fG({[i]:n})]});return Sd.push(r),r.id}function sK(t){let e=Yn.define({id:Sd.length,name:"Document",props:[yl.add(()=>t)]});return Sd.push(e),e}const oK=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=J1(t.state,n.from);return i.line?aK(t):i.block?dK(t):!1};function Hd(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const aK=Hd(q1,0),lK=Hd(q1,1),uK=Hd(q1,2),cK=Hd(GN,0),dK=Hd((t,e)=>GN(t,e,fK(e)),0);function J1(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Gu=50;function hK(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Gu,i),o=t.sliceDoc(r,r+Gu),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,d;r-i<=2*Gu?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+Gu),d=t.sliceDoc(r-Gu,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function fK(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function GN(t,e,n=e.selection.ranges){let i=n.map(s=>J1(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>hK(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function q1(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,u=J1(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const dw=Ps.define(),pK=Ps.define(),mK=ke.define(),KN=ke.define({combine(t){return Lo(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}});function gK(t){let e=0;return t.iterChangedRanges((n,i)=>e=i),e}const XN=wn.define({create(){return Dr.empty},update(t,e){let n=e.state.facet(KN),i=e.annotation(dw);if(i){let l=e.docChanged?te.single(gK(e.changes)):void 0,u=Vn.fromTransaction(e,l),c=i.side,d=c==0?t.undone:t.done;return u?d=Kp(d,d.length,n.minDepth,u):d=JN(d,e.startState.selection),new Dr(c==0?i.rest:d,c==0?d:i.rest)}let r=e.annotation(pK);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Ht.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Vn.fromTransaction(e),o=e.annotation(Ht.time),a=e.annotation(Ht.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Dr(t.done.map(Vn.fromJSON),t.undone.map(Vn.fromJSON))}});function yK(t={}){return[XN,KN.of(t),Pe.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?ZN:e.inputType=="historyRedo"?hw:null;return i?(e.preventDefault(),i(n)):!1}})]}function Q1(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(XN,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const ZN=Q1(0,!1),hw=Q1(1,!1),vK=Q1(0,!0);class Vn{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Vn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Vn(e.changes&&Ft.fromJSON(e.changes),[],e.mapped&&Br.fromJSON(e.mapped),e.startSelection&&te.fromJSON(e.startSelection),e.selectionsAfter.map(te.fromJSON))}static fromTransaction(e,n){let i=Ni;for(let r of e.startState.facet(mK)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Vn(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Ni)}static selection(e){return new Vn(void 0,Ni,void 0,void 0,e)}}function Kp(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function wK(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(i=!0)}}),i}function bK(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function YN(t,e){return t.length?e.length?t.concat(e):t:e}const Ni=[],xK=200;function JN(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-xK));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Kp(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Vn.selection([e])]}function SK(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function W0(t,e){if(!t.length)return t;let n=t.length,i=Ni;for(;n;){let r=kK(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Vn.selection(i)]:Ni}function kK(t,e,n){let i=YN(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Ni,n);if(!t.changes)return Vn.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Vn(r,je.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const EK=/^(input\.type|delete)($|\.)/;class Dr{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Dr(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||EK.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,wK(a.changes,e.changes))||i=="input.type.compose")?o=Kp(o,o.length-1,r.minDepth,new Vn(e.changes.compose(a.changes),YN(e.effects,a.effects),a.mapped,a.startSelection,Ni)):o=Kp(o,o.length,r.minDepth,e),new Dr(o,Ni,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Ni;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&bK(s[s.length-1],e)?this:new Dr(JN(this.done,e),this.undone,n,i)}addMapping(e){return new Dr(W0(this.done,e),W0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:dw.of({side:e,rest:SK(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?Ni:r.slice(0,r.length-1);return s.mapped&&(o=W0(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:dw.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Dr.empty=new Dr(Ni,Ni);function Wd(t,e){return te.create(t.ranges.map(e),t.mainIndex)}function zo(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Va({state:t,dispatch:e},n){let i=Wd(t.selection,n);return i.eq(t.selection)?!1:(e(zo(t,i)),!0)}function og(t,e){return te.cursor(e?t.to:t.from)}function qN(t,e){return Va(t,n=>n.empty?t.moveByChar(n,e):og(n,e))}function jo(t){return t.textDirectionAt(t.state.selection.main.head)==kt.LTR}const sC=t=>qN(t,!jo(t)),oC=t=>qN(t,jo(t));function QN(t,e){return Va(t,n=>n.empty?t.moveByGroup(n,e):og(n,e))}const CK=t=>QN(t,!jo(t)),AK=t=>QN(t,jo(t));function eT(t,e){return Va(t,n=>{if(!n.empty)return og(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const aC=t=>eT(t,!1),lC=t=>eT(t,!0);function tT(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Pe.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function nT(t,e){let n=tT(t),{state:i}=t,r=Wd(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):og(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Pe.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(zo(i,r),{effects:s}),!0}const G0=t=>nT(t,!1),K0=t=>nT(t,!0);function ag(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=te.cursor(i.from+s))}return r}const uC=t=>Va(t,e=>ag(t,e,!0)),cC=t=>Va(t,e=>ag(t,e,!1)),PK=t=>Va(t,e=>te.cursor(t.lineBlockAt(e.head).from,1)),OK=t=>Va(t,e=>te.cursor(t.lineBlockAt(e.head).to,-1));function MK(t,e,n){let i=!1,r=Wd(t.selection,s=>{let o=Vh(t,s.head,-1)||Vh(t,s.head,1)||s.head>0&&Vh(t,s.head-1,1)||s.head<t.doc.length&&Vh(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?te.range(s.anchor,a):te.cursor(a)});return i?(e(zo(t,r)),!0):!1}const $K=({state:t,dispatch:e})=>MK(t,e,!1);function Fo(t,e){let n=Wd(t.state.selection,i=>{let r=e(i);return te.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(zo(t.state,n)),!0)}function iT(t,e){return Fo(t,n=>t.moveByChar(n,e))}const dC=t=>iT(t,!jo(t)),hC=t=>iT(t,jo(t));function rT(t,e){return Fo(t,n=>t.moveByGroup(n,e))}const RK=t=>rT(t,!jo(t)),NK=t=>rT(t,jo(t));function sT(t,e){return Fo(t,n=>t.moveVertically(n,e))}const fC=t=>sT(t,!1),pC=t=>sT(t,!0);function oT(t,e){return Fo(t,n=>t.moveVertically(n,e,tT(t).height))}const mC=t=>oT(t,!1),gC=t=>oT(t,!0),yC=t=>Fo(t,e=>ag(t,e,!0)),vC=t=>Fo(t,e=>ag(t,e,!1)),TK=t=>Fo(t,e=>te.cursor(t.lineBlockAt(e.head).from)),_K=t=>Fo(t,e=>te.cursor(t.lineBlockAt(e.head).to)),wC=({state:t,dispatch:e})=>(e(zo(t,{anchor:0})),!0),bC=({state:t,dispatch:e})=>(e(zo(t,{anchor:t.doc.length})),!0),xC=({state:t,dispatch:e})=>(e(zo(t,{anchor:t.selection.main.anchor,head:0})),!0),SC=({state:t,dispatch:e})=>(e(zo(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),DK=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),IK=({state:t,dispatch:e})=>{let n=ug(t).map(({from:i,to:r})=>te.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:te.create(n),userEvent:"select"})),!0};function lg(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(n="delete.backward",l=Hh(t,l,!1)):l>o&&(n="delete.forward",l=Hh(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Hh(t,o,!1),a=Hh(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:te.cursor(o)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Pe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Hh(t,e,n){if(t instanceof Pe)for(let i of t.state.facet(Pe.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const aT=(t,e)=>lg(t,n=>{let{state:i}=t,r=i.doc.lineAt(n),s,o;if(!e&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,n-r.from))){if(s[s.length-1]=="	")return n-1;let a=Im(s,i.tabSize),l=a%Ta(i)||Ta(i);for(let u=0;u<l&&s[s.length-1-u]==" ";u++)n--;o=n}else o=mn(r.text,n-r.from,e,e)+r.from,o==n&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),X0=t=>aT(t,!1),kC=t=>aT(t,!0),lT=(t,e)=>lg(t,n=>{let i=n,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=mn(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||i!=n)&&(a=c),i=l}return i}),EC=t=>lT(t,!1),LK=t=>lT(t,!0),CC=t=>lg(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),BK=t=>lg(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),zK=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ye.of(["",""])},range:te.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},jK=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:mn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:mn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:te.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ug(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function uT(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of ug(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(te.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(te.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:te.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const FK=({state:t,dispatch:e})=>uT(t,e,!1),UK=({state:t,dispatch:e})=>uT(t,e,!0);function cT(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of ug(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const VK=({state:t,dispatch:e})=>cT(t,e,!1),HK=({state:t,dispatch:e})=>cT(t,e,!0),WK=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(ug(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Wd(e.selection,r=>t.moveVertically(r,!0)).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function GK(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=pr(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(We.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const AC=KK(!1);function KK(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&GK(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new W1(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=$N(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Gp(e,c)];return l&&d.push(Gp(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ye.of(d)},range:te.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function dT(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:te.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const PC=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(dT(t,(n,i)=>{i.push({from:n.from,insert:t.facet(H1)})}),{userEvent:"input.indent"})),!0),OC=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(dT(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Im(r,t.tabSize),o=0,a=Gp(t,Math.max(0,s-Ta(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function ot(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)hT(t,arguments[e]);return t}function hT(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)hT(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const MC=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class kd{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(MC(a)):MC,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return En(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=zb(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Ji(e);let r=this.normalize(n);for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:n+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(kd.prototype[Symbol.iterator]=function(){return this});const fT={from:-1,to:-1,match:/.*/.exec("")},ex="gm"+(/x/.unicode==null?"":"u");class pT{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=fT,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new mT(e,n,i,r,s);this.re=new RegExp(n,ex+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Xp(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Xp(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Z0=new WeakMap;class _l{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=Z0.get(e);if(!r||r.from>=i||r.to<=n){let a=new _l(n,e.sliceString(n,i));return Z0.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),Z0.set(e,new _l(o,s)),new _l(n,s.slice(n-o,i-o))}}class mT{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=fT,this.matchPos=Xp(e,r),this.re=new RegExp(n,ex+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=_l.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Xp(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=_l.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(pT.prototype[Symbol.iterator]=mT.prototype[Symbol.iterator]=function(){return this});function XK(t){try{return new RegExp(t,ex),!0}catch{return!1}}function Xp(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function fw(t){let e=ot("input",{class:"cm-textfield",name:"line"}),n=ot("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:Zp.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},ot("label",t.state.phrase("Go to line"),": ",e)," ",ot("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,a,l,u,c]=r,d=u?+u.slice(1):0,h=l?+l:o.number;if(l&&c){let g=h/100;a&&(g=g*(a=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*g)}else l&&a&&(h=h*(a=="-"?-1:1)+o.number);let f=s.doc.line(Math.max(1,Math.min(s.doc.lines,h))),p=te.cursor(f.from+Math.max(0,Math.min(d,f.length)));t.dispatch({effects:[Zp.of(!1),Pe.scrollIntoView(p.from,{y:"center"})],selection:p}),t.focus()}return{dom:n}}const Zp=je.define(),$C=wn.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Zp)&&(t=n.value);return t},provide:t=>nu.from(t,e=>e?fw:null)}),ZK=t=>{let e=hd(t,fw);if(!e){let n=[Zp.of(!0)];t.state.field($C,!1)==null&&n.push(je.appendConfig.of([$C,YK])),t.dispatch({effects:n}),e=hd(t,fw)}return e&&e.dom.querySelector("input").focus(),!0},YK=Pe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),JK=({state:t,dispatch:e})=>{let{selection:n}=t,i=te.create(n.ranges.map(r=>t.wordAt(r.head)||te.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function qK(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new kd(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new kd(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const QK=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return JK({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=qK(t,i);return r?(e(t.update({selection:t.selection.addRange(te.range(r.from,r.to),!1),effects:Pe.scrollIntoView(r.to)})),!0):!1},Eu=ke.define({combine(t){return Lo(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new lX(e),scrollToMatch:e=>Pe.scrollIntoView(e)})}});class gT{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||XK(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new iX(this):new tX(this)}getCursor(e,n=0,i){let r=e.doc?e:Fe.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?tl(this,r,n,i):el(this,r,n,i)}}class yT{constructor(e){this.spec=e}}function el(t,e,n,i){return new kd(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?eX(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function eX(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Yp(r,n-s))!=on.Word||e(Jp(r,n-s))!=on.Word)&&(e(Jp(r,i-s))!=on.Word||e(Yp(r,i-s))!=on.Word))}class tX extends yT{constructor(e){super(e)}nextMatch(e,n,i){let r=el(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=el(this.spec,e,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=el(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=el(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=el(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function tl(t,e,n,i){return new pT(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?nX(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Yp(t,e){return t.slice(mn(t,e,!1),e)}function Jp(t,e){return t.slice(e,mn(t,e))}function nX(t){return(e,n,i)=>!i[0].length||(t(Yp(i.input,i.index))!=on.Word||t(Jp(i.input,i.index))!=on.Word)&&(t(Jp(i.input,i.index+i[0].length))!=on.Word||t(Yp(i.input,i.index+i[0].length))!=on.Word)}class iX extends yT{nextMatch(e,n,i){let r=tl(this.spec,e,i,e.doc.length).next();return r.done&&(r=tl(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=tl(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n))}matchAll(e,n){let i=tl(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=tl(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Ed=je.define(),tx=je.define(),yo=wn.define({create(t){return new Y0(pw(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ed)?t=new Y0(n.value.create(),t.panel):n.is(tx)&&(t=new Y0(t.query,n.value?nx:null));return t},provide:t=>nu.from(t,e=>e.panel)});class Y0{constructor(e,n){this.query=e,this.panel=n}}const rX=Ke.mark({class:"cm-searchMatch"}),sX=Ke.mark({class:"cm-searchMatch cm-searchMatch-selected"}),oX=un.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(yo))}update(t){let e=t.state.field(yo);(e!=t.startState.field(yo)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ke.none;let{view:n}=this,i=new $a;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?sX:rX)})}return i.finish()}},{decorations:t=>t.decorations});function Gd(t){return e=>{let n=e.state.field(yo,!1);return n&&n.query.spec.valid?t(e,n):ST(e)}}const RC=Gd((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=te.single(i.from,i.to),s=t.state.facet(Eu);return t.dispatch({selection:r,effects:[ix(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),xT(t),!0}),NC=Gd((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=te.single(r.from,r.to),o=t.state.facet(Eu);return t.dispatch({selection:s,effects:[ix(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),xT(t),!0}),vT=Gd((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:te.create(n.map(i=>te.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),aX=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new kd(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(te.range(a.value.from,a.value.to))}return e(t.update({selection:te.create(s,o),userEvent:"select.search.matches"})),!0},TC=Gd((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=[],a,l,u=[];if(s.from==i&&s.to==r&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),u.push(Pe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=te.single(s.from-c,s.to-c),u.push(ix(t,s)),u.push(n.facet(Eu).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:u,userEvent:"input.replace"}),!0}),wT=Gd((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Pe.announce.of(i),userEvent:"input.replace.all"}),!0});function nx(t){return t.state.facet(Eu).createPanel(t)}function pw(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(Eu);return new gT({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function bT(t){let e=hd(t,nx);return e&&e.dom.querySelector("[main-field]")}function xT(t){let e=bT(t);e&&e==t.root.activeElement&&e.select()}const ST=t=>{let e=t.state.field(yo,!1);if(e&&e.panel){let n=bT(t);if(n&&n!=t.root.activeElement){let i=pw(t.state,e.query.spec);i.valid&&t.dispatch({effects:Ed.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[tx.of(!0),e?Ed.of(pw(t.state,e.query.spec)):je.appendConfig.of(cX)]});return!0},kT=t=>{let e=t.state.field(yo,!1);if(!e||!e.panel)return!1;let n=hd(t,nx);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:tx.of(!1)}),!0};class lX{constructor(e){this.view=e;let n=this.query=e.state.field(yo).query.spec;this.commit=this.commit.bind(this),this.searchField=ot("input",{value:n.search,placeholder:qn(e,"Find"),"aria-label":qn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ot("input",{value:n.replace,placeholder:qn(e,"Replace"),"aria-label":qn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ot("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=ot("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=ot("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return ot("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=ot("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>RC(e),[qn(e,"next")]),i("prev",()=>NC(e),[qn(e,"previous")]),i("select",()=>vT(e),[qn(e,"all")]),ot("label",null,[this.caseField,qn(e,"match case")]),ot("label",null,[this.reField,qn(e,"regexp")]),ot("label",null,[this.wordField,qn(e,"by word")]),...e.state.readOnly?[]:[ot("br"),this.replaceField,i("replace",()=>TC(e),[qn(e,"replace")]),i("replaceAll",()=>wT(e),[qn(e,"replace all")])],ot("button",{name:"close",onclick:()=>kT(e),"aria-label":qn(e,"close"),type:"button"},["×"])])}commit(){let e=new gT({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ed.of(e)}))}keydown(e){n7(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?NC:RC)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),TC(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Ed)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Eu).top}}function qn(t,e){return t.state.phrase(e)}const Wh=30,Gh=/[\s\.,:;?!]/;function ix(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Wh),o=Math.min(r,n+Wh),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Wh;l++)if(!Gh.test(a[l+1])&&Gh.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Wh;l--)if(!Gh.test(a[l-1])&&Gh.test(a[l])){a=a.slice(0,l);break}}return Pe.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const uX=Pe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),cX=[yo,Td.lowest(oX),uX];class dX{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=pr(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(ET(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function _C(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function hX(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=_C(e)+_C(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function fX(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:hX(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class DC{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Dl(t){return t.selection.main.from}function ET(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const pX=Ps.define();function mX(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i)?{range:a}:{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:e},range:te.cursor(a.from+s+e.length)})),{userEvent:"input.complete"})}const IC=new WeakMap;function gX(t){if(!Array.isArray(t))return t;let e=IC.get(t);return e||IC.set(t,e=fX(t)),e}const CT=je.define(),rx=je.define();class yX{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=En(e,n),r=Ji(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(En(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let v=En(e,0),w=Ji(v),k=w==e.length?0:-100;if(v!=n[0])if(v==i[0])k+=-200;else return!1;return this.ret(k,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let v=0,w=Math.min(e.length,200);v<w&&u<l;){let k=En(e,v);(k==n[u]||k==i[u])&&(r[u++]=v),v+=Ji(k)}if(u<l)return!1}let c=0,d=0,h=!1,f=0,p=-1,g=-1,b=/[a-z]/.test(e),m=!0;for(let v=0,w=Math.min(e.length,200),k=0;v<w&&d<l;){let C=En(e,v);a<0&&(c<l&&C==n[c]&&(s[c++]=v),f<l&&(C==n[f]||C==i[f]?(f==0&&(p=v),g=v+1,f++):f=0));let O,M=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(O=zb(C))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!v||M==1&&b||k==0&&M!=0)&&(n[d]==C||i[d]==C&&(h=!0)?o[d++]=v:o.length&&(m=!1)),k=M,v+=Ji(C)}return d==l&&o[0]==0&&m?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-200+-700-e.length,[p,g]):d==l?this.result(-100+(h?-200:0)+-700+(m?0:-1100),o,e):n.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Ji(En(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}const us=ke.define({combine(t){return Lo(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:vX,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>LC(e(i),n(i)),optionClass:(e,n)=>i=>LC(e(i),n(i)),addToOptions:(e,n)=>e.concat(n)})}});function LC(t,e){return t?e?t+" "+e:t:e}function vX(t,e,n,i,r){let s=t.textDirection==kt.RTL,o=s,a=!1,l="top",u,c,d=e.left-r.left,h=r.right-e.right,f=i.right-i.left,p=i.bottom-i.top;if(o&&d<Math.min(f,h)?o=!1:!o&&h<Math.min(f,d)&&(o=!0),f<=(o?d:h))u=Math.max(r.top,Math.min(n.top,r.bottom-p))-e.top,c=Math.min(400,o?d:h);else{a=!0,c=Math.min(400,(s?e.right:r.right-e.left)-30);let g=r.bottom-e.bottom;g>=p||g>e.top?u=n.bottom-e.top:(l="bottom",u=e.bottom-n.top)}return{style:`${l}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":o?"left":"right")}}function wX(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r){let s=document.createElement("span");s.className="cm-completionLabel";let o=n.displayLabel||n.label,a=0;for(let l=0;l<r.length;){let u=r[l++],c=r[l++];u>a&&s.appendChild(document.createTextNode(o.slice(a,u)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(u,c))),d.className="cm-completionMatchedText",a=c}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function BC(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class bX{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(us);this.optionContent=wX(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=BC(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let u=l.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<s.length){this.applyCompletion(e,s[+c[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(us).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:rx.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,i,r;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=s.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=BC(n.options.length,n.selected,this.view.state.facet(us).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>or(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&SX(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(us).positionInfo(this.view,n,r,i,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,l);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function xX(t,e){return n=>new bX(n,t,e)}function SX(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<n.top?t.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(t.scrollTop+=i.bottom-n.bottom)}function zC(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function kX(t,e){let n=[],i=null,r=l=>{n.push(l);let{section:u}=l.completion;if(u){i||(i=[]);let c=typeof u=="string"?u:u.name;i.some(d=>d.name==c)||i.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult()){let u=l.result.getMatch;if(l.result.filter===!1)for(let c of l.result.options)r(new DC(c,l.source,u?u(c):[],1e9-n.length));else{let c=new yX(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(c.match(d.label)){let h=d.displayLabel?u?u(d,c.matched):[]:c.matched;r(new DC(d,l.source,h,c.score+(d.boost||0)))}}}if(i){let l=Object.create(null),u=0,c=(d,h)=>{var f,p;return((f=d.rank)!==null&&f!==void 0?f:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(d.name<h.name?-1:1)};for(let d of i.sort(c))u-=1e5,l[d.name]=u;for(let d of n){let{section:h}=d.completion;h&&(d.score+=l[typeof h=="string"?h:h.name])}}let s=[],o=null,a=e.facet(us).compareCompletions;for(let l of n.sort((u,c)=>c.score-u.score||a(u.completion,c.completion))){let u=l.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?s.push(l):zC(l.completion)>zC(o)&&(s[s.length-1]=l),o=l.completion}return s}class vl{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new vl(this.options,jC(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s){let o=kX(e,n);if(!o.length)return r&&e.some(l=>l.state==1)?new vl(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let a=n.facet(us).selectOnOpen?0:-1;if(r&&r.selected!=a&&r.selected!=-1){let l=r.options[r.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){a=u;break}}return new vl(o,jC(i,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:xX(Cu,PT),above:s.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new vl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class qp{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new qp(AX,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(us),s=(i.override||n.languageDataAt("autocomplete",Dl(n)).map(gX)).map(a=>(this.active.find(u=>u.source==a)||new li(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!EX(s,this.active)?o=vl.build(s,n,this.id,o,i):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new li(a.source,0):a));for(let a of e.effects)a.is(AT)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new qp(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:CX}}function EX(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const CX={"aria-autocomplete":"list"};function jC(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const AX=[];function PX(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class li{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=PX(e),r=this;i?r=r.handleUserEvent(e,i,n):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new li(r.source,0));for(let s of e.effects)if(s.is(CT))r=new li(r.source,1,s.value?Dl(e.state):-1);else if(s.is(rx))r=new li(r.source,0);else if(s.is(MX))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new li(this.source,1)}handleChange(e){return e.changes.touchesRange(Dl(e.startState))?new li(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new li(this.source,this.state,e.mapPos(this.explicitPos))}}class kc extends li{constructor(e,n,i,r,s){super(e,2,n),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,n,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Dl(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&Dl(e.startState)==this.from)return new li(this.source,n=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return OX(this.result.validFor,e.state,s,o)?new kc(this.source,l,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new dX(e.state,a,l>=0)))?new kc(this.source,l,u,u.from,(r=u.to)!==null&&r!==void 0?r:Dl(e.state)):new li(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new li(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new kc(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function OX(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):ET(t,!0).test(r)}const MX=je.define({map(t,e){return t.map(n=>n.map(e))}}),AT=je.define(),Cu=wn.define({create(){return qp.start()},update(t,e){return t.update(e)},provide:t=>[Zb.from(t,e=>e.tooltip),Pe.contentAttributes.from(t,e=>e.attrs)]});function PT(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Cu).active.find(r=>r.source==e.source);return i instanceof kc?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},mX(t.state,n,i.from,i.to)),{annotations:pX.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}function Kh(t,e="option"){return n=>{let i=n.state.field(Cu,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(us).interactionDelay)return!1;let r=1,s;e=="page"&&(s=D7(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:AT.of(a)}),!0}}const FC=t=>{let e=t.state.field(Cu,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(us).interactionDelay?!1:PT(t,e.open.options[e.open.selected])},$X=t=>t.state.field(Cu,!1)?(t.dispatch({effects:CT.of(!0)}),!0):!1,RX=t=>{let e=t.state.field(Cu,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:rx.of(null)}),!0)},OT={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},MT=new class extends Ma{};MT.startSide=1;MT.endSide=-1;const J0="()[]{}<>";function NX(t){for(let e=0;e<J0.length;e+=2)if(J0.charCodeAt(e)==t)return J0.charAt(e+1);return zb(t<128?t:t+1)}function TX(t,e){return t.languageDataAt("closeBrackets",e)[0]||OT}const _X=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=TX(t,t.selection.main.head).brackets||OT.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=IX(t.doc,o.head);for(let l of i)if(l==a&&DX(t.doc,o.head)==NX(En(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:te.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function DX(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Ji(En(n,0)))}function IX(t,e){let n=t.sliceString(e-2,e);return Ji(En(n,0))==n.length?n:n.slice(1)}class LX{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class na{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(ua).markerFilter;s&&(r=s(r));let o=Ke.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?Ke.widget({widget:new XX(a),diagnostic:a}).range(a.from):Ke.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new na(o,n,hu(o))}}function hu(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new LX(r,s,o.diagnostic),!1}),i}function BX(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(i=>i.is(sx))||t.changes.touchesRange(n.from,n.to))}function $T(t,e){return t.field(Hn,!1)?e:e.concat(je.appendConfig.of(_T))}function zX(t,e){return{effects:$T(t,[sx.of(e)])}}const sx=je.define(),ox=je.define(),RT=je.define(),Hn=wn.define({create(){return new na(Ke.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=hu(n,t.selected.diagnostic,r)||hu(n,null,r)}t=new na(n,t.panel,i)}for(let n of e.effects)n.is(sx)?t=na.init(n.value,t.panel,e.state):n.is(ox)?t=new na(t.diagnostics,n.value?cg.open:null,t.selected):n.is(RT)&&(t=new na(t.diagnostics,t.panel,n.value));return t},provide:t=>[nu.from(t,e=>e.panel),Pe.decorations.from(t,e=>e.diagnostics)]});function jX(t){let e=t.field(Hn,!1);return e?e.diagnostics.size:0}const FX=Ke.mark({class:"cm-lintRange cm-lintRange-active"});function UX(t,e,n){let{diagnostics:i}=t.state.field(Hn),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(ua).tooltipFilter;return a&&(r=a(r)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:VX(t,r)}}}:null}function VX(t,e){return ot("ul",{class:"cm-tooltip-lint"},e.map(n=>TT(t,n,!1)))}const HX=t=>{let e=t.state.field(Hn,!1);(!e||!e.panel)&&t.dispatch({effects:$T(t.state,[ox.of(!0)])});let n=hd(t,cg.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},UC=t=>{let e=t.state.field(Hn,!1);return!e||!e.panel?!1:(t.dispatch({effects:ox.of(!1)}),!0)},WX=t=>{let e=t.state.field(Hn,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},GX=un.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(ua);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(ua);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(zX(this.view.state,r))},i=>{or(this.view.state,i)})}}update(t){let e=t.state.facet(ua);(t.docChanged||e!=t.startState.facet(ua)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),ua=ke.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Lo(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function KX(t,e={}){return[ua.of({source:t,config:e}),GX,_T]}function NT(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function TT(t,e,n){var i;let r=n?NT(e.actions):[];return ot("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ot("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=hu(t.state.field(Hn).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),ot("u",u.slice(c,c+1)),u.slice(c+1)];return ot("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&ot("div",{class:"cm-diagnosticSource"},e.source))}class XX extends ja{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return ot("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class VC{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=TT(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class cg{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)UC(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=NT(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=hu(this.view.state.field(Hn).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=ot("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=ot("div",{class:"cm-panel-lint"},this.list,ot("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>UC(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Hn).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Hn),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new VC(this.view,l.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new VC(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Hn),i=hu(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:RT.of(i)})}static open(e){return new cg(e)}}function ZX(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Xh(t){return ZX(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const YX=Pe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Xh("#d11")},".cm-lintRange-warning":{backgroundImage:Xh("orange")},".cm-lintRange-info":{backgroundImage:Xh("#999")},".cm-lintRange-hint":{backgroundImage:Xh("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),_T=[Hn,Pe.decorations.compute([Hn],t=>{let{selected:e,panel:n}=t.field(Hn);return!e||!n||e.from==e.to?Ke.none:Ke.set([FX.range(e.from,e.to)])}),_7(UX,{hideOn:BX}),YX],DT=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},JX=DT("up"),qX=DT("down"),QX=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(te.range(s,s)):e=te.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},eZ=[{key:"Ctrl-Space",run:$X},{key:"Escape",run:RX},{key:"ArrowDown",run:Kh(!0)},{key:"ArrowUp",run:Kh(!1)},{key:"PageDown",run:Kh(!0,"page")},{key:"PageUp",run:Kh(!1,"page")},{key:"Enter",run:FC},{key:"Tab",run:FC},{key:"Mod-f",run:ST,scope:"editor search-panel"},{key:"Escape",run:kT,scope:"editor search-panel"},{key:"Alt-Enter",run:vT,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:wT,scope:"editor search-panel"},{key:"Ctrl-g",run:ZK},{key:"Mod-d",run:QK,preventDefault:!0},{key:"Shift-Mod-l",run:aX},{key:"Enter",run:AC,shift:AC},{key:"ArrowLeft",run:sC,shift:dC,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:CK,shift:RK},{key:"ArrowRight",run:oC,shift:hC,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:AK,shift:NK},{key:"ArrowUp",run:aC,shift:fC,preventDefault:!0},{key:"ArrowDown",run:lC,shift:pC,preventDefault:!0},{key:"Home",run:cC,shift:vC},{mac:"Cmd-ArrowLeft",run:cC,shift:vC},{key:"Mod-Home",run:wC,shift:xC},{mac:"Cmd-ArrowUp",run:wC,shift:xC},{key:"PageUp",run:G0,shift:mC},{mac:"Ctrl-ArrowUp",run:G0,shift:mC},{key:"PageDown",run:K0,shift:gC},{mac:"Ctrl-ArrowDown",run:K0,shift:gC},{key:"End",run:uC,shift:yC},{mac:"Cmd-ArrowRight",run:uC,shift:yC},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:JX,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:qX,preventDefault:!0},{key:"Shift-Alt-i",run:QX},{key:"Mod-End",run:bC,shift:SC},{mac:"Cmd-ArrowDown",run:bC,shift:SC},{key:"Mod-a",run:DK},{key:"Backspace",run:_X},{key:"Backspace",run:X0,shift:X0},{key:"Delete",run:kC},{key:"Mod-Backspace",mac:"Alt-Backspace",run:EC},{key:"Mod-Delete",mac:"Alt-Delete",run:LK},{mac:"Mod-Backspace",run:BK},{mac:"Mod-Delete",run:CC},{mac:"Ctrl-b",run:sC,shift:dC,preventDefault:!0},{mac:"Ctrl-f",run:oC,shift:hC},{mac:"Ctrl-p",run:aC,shift:fC},{mac:"Ctrl-n",run:lC,shift:pC},{mac:"Ctrl-a",run:PK,shift:TK},{mac:"Ctrl-e",run:OK,shift:_K},{mac:"Ctrl-d",run:kC},{mac:"Ctrl-h",run:X0},{mac:"Ctrl-k",run:CC},{mac:"Ctrl-Alt-h",run:EC},{mac:"Ctrl-o",run:zK},{mac:"Ctrl-t",run:jK},{mac:"Ctrl-v",run:K0},{mac:"Alt-v",run:G0},{key:"Shift-Mod-k",run:WK},{key:"Alt-ArrowDown",run:UK},{key:"Alt-ArrowUp",run:FK},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:HK},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:VK},{key:"Mod-l",run:IK,preventDefault:!0},{key:"Shift-Mod-\\",run:$K},{key:"Tab",run:PC,shift:OC,preventDefault:!0},{key:"Mod-[",run:OC},{key:"Mod-]",run:PC},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:BG},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:zG},{key:"Mod-k Mod-0",run:jG},{key:"Mod-k Mod-j",run:FG},{key:"Mod-k Mod-c",run:lK},{key:"Mod-k Mod-u",run:uK},{key:"Mod-/",run:oK},{key:"Shift-Alt-a",run:cK},{key:"Mod-z",run:ZN,preventDefault:!0},{key:"Mod-y",run:hw,preventDefault:!0},{key:"Mod-Shift-z",run:hw,preventDefault:!0},{key:"Mod-u",run:vK,preventDefault:!0},{key:"Mod-Shift-m",run:HX},{key:"F8",run:WX}];function tZ(t){const e=document.createElement("div");return HC(t.state,e),{dom:e,update(n){HC(n.view.state,e)}}}function HC(t,e){const n=jX(t);e.textContent=Pm(dr().language,"editor.lintSummary",n),e.className=Ze("border-t border-stone-600 bg-stone-800 pr-3 text-right font-sans text-xs tracking-wider",n===0?"text-stone-400":"font-semibold text-red-400")}const IT="vonsim-program",nZ=un.fromClass(class{constructor(t){ue(this,"timeout",null);this.view=t}update(t){t.docChanged&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=this.view.state.doc.toString();localStorage.setItem(IT,e),this.timeout=null},500))}}),iZ=`; ¡Bienvenido a VonSim!
; Este es un ejemplo de código que calcula los primeros
; n números de la sucesión de Fibonacci, y se guardan a
; partir de la posición 1000h de la memoria.

     n EQU 10    ; Calcula los primeros 10 números

       ORG 1000h
inicio DB 1

       ORG 2000h
       MOV BX, OFFSET inicio + 1
       MOV AL, 0
       MOV AH, inicio

BUCLE: CMP BX, OFFSET inicio + n
       JNS FIN
       MOV CL, AH
       ADD CL, AL
       MOV AL, AH
       MOV AH, CL
       MOV [BX], CL
       INC BX
       JMP BUCLE
  FIN: HLT
       END
`,rZ=localStorage.getItem(IT)||iZ,Qn={comment:Te.comment,"data-directive":Qt.define(),identifier:Te.variableName,instruction:Qt.define(),label:Te.labelName,number:Te.number,operator:Te.operator,offset:Qt.define(),"ptr-size":Qt.define(),punctuation:Te.punctuation,register:Qt.define(),special:Qt.define(),string:Te.string,unassigned:Qt.define()},sZ=X1.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":Ib.includes(e)?"data-directive":Lb.includes(e)?"instruction":wp.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Qn}),oZ=WG(sg.define([{tag:Qn.comment,class:"text-stone-500 italic"},{tag:Qn["data-directive"],class:"text-rose-400/80"},{tag:Qn.instruction,class:"text-mantis-400"},{tag:Qn.number,class:"text-cyan-300/60"},{tag:Qn.operator,class:"text-rose-300"},{tag:Qn.offset,class:"text-rose-400/80 italic"},{tag:Qn["ptr-size"],class:"text-rose-400/80 italic"},{tag:Qn.punctuation,class:"text-stone-600"},{tag:Qn.register,class:"text-emerald-400/80"},{tag:Qn.special,class:"text-yellow-300/80"},{tag:Qn.string,class:"text-orange-300"},{tag:Qn.unassigned,class:"text-rose-400/80"}])),aZ=KX(t=>{const e=t.state.doc.toString(),n=eM(e);if(n.success)return[];const i=dr().language;return n.errors.map(r=>{var a,l;const s=((a=r.position)==null?void 0:a.start)??0,o=((l=r.position)==null?void 0:l.end)??e.length;return{message:r.translate(i),severity:"error",from:s,to:o}})},{delay:200});function lZ(){return new SG(sZ,[oZ,aZ])}function LT({className:t}){const[e,n]=y.useState(),i=y.useCallback(r=>{r&&n(r)},[]);return y.useEffect(()=>{if(e)return window.codemirror=new Pe({state:Fe.create({doc:rZ,extensions:[Fe.tabSize.of(2),O$.of(Fe.readOnly.of(!1)),nZ,V7(),K7,G7(),w7(),yK(),l7(),f7(),Fe.allowMultipleSelections.of(!0),NG(),C7(),m$.of([...eZ,{key:"Escape",run:r=>(r.dispatch({selection:te.create([r.state.selection.main],0)}),!0)}]),lZ(),nu.of(tZ)]}),parent:e}),()=>{var r;return(r=window.codemirror)==null?void 0:r.destroy()}},[e]),FP(r=>r.ctrlKey&&r.key==="s",r=>{if(r.preventDefault(),!window.codemirror)return;const s=new Blob([window.codemirror.state.doc.toString()],{type:"text/plain"}),o=URL.createObjectURL(s),a=document.createElement("a");a.style.display="none",a.href=o,a.download=`vonsim-${new Date().toISOString().slice(0,16)}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}),x.jsx("div",{ref:i,className:Ze("overflow-auto font-mono",t)})}function uZ(){const t=yt(),e=GI("(max-width: 640px)"),{updateServiceWorker:n}=JI({onNeedRefresh(){wm(t("update.update-available"),{action:{label:t("update.reload"),onClick:()=>n(!0)}})}});return x.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",children:[x.jsx(VV,{}),e?x.jsx(dZ,{}):x.jsx(cZ,{}),x.jsx(p5,{})]})}function cZ(){const[t]=km(D1);return x.jsxs(zP,{autoSaveId:"layout",direction:"horizontal",units:"pixels",tagName:"main",className:"overflow-auto px-2",children:[x.jsx(lf,{id:"panel-editor",order:1,minSize:250,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:x.jsx(LT,{className:"h-full w-full"})}),x.jsx(qy,{className:"w-2"}),x.jsx(lf,{id:"panel-computer",order:2,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:x.jsx(SN,{})}),t&&x.jsxs(x.Fragment,{children:[x.jsx(qy,{className:"w-2"}),x.jsx(lf,{id:"panel-settings",order:3,minSize:450,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:x.jsx(eN,{className:"h-full w-full"})})]})]})}function dZ(){const t=yt(),[e,n]=y.useState("editor"),[i,r]=km(D1),s=i?"settings":e,o=a=>{i&&r(!1),n(a)};return x.jsx(sI,{value:s,onValueChange:o,asChild:!0,children:x.jsxs(x.Fragment,{children:[x.jsx(zg,{value:"editor",asChild:!0,children:x.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:x.jsx(LT,{className:"h-full w-full"})})}),x.jsx(zg,{value:"computer",asChild:!0,children:x.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:x.jsx(SN,{})})}),x.jsx(zg,{value:"settings",asChild:!0,children:x.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:x.jsx(eN,{className:"h-full w-full"})})}),x.jsxs(aI,{className:"grid grid-cols-2 gap-2 p-2",children:[x.jsxs(yS,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold leading-none text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[x.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 h-4 w-4"}),t("control.tabs.editor")]}),x.jsxs(yS,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold leading-none text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[x.jsx("span",{className:"icon-[lucide--computer] mr-2 h-4 w-4"}),t("control.tabs.computer")]})]})]})})}window.codemirror=null;q0.createRoot(document.getElementById("root")).render(x.jsxs(de.StrictMode,{children:[x.jsx(R3,{richColors:!0,closeButton:!0,position:"top-center"}),x.jsx(iL,{children:x.jsx(uZ,{})})]}));
