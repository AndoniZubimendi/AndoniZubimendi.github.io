var FR=Object.defineProperty;var UR=(t,e,n)=>e in t?FR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ue=(t,e,n)=>(UR(t,typeof e!="symbol"?e+"":e,n),n),_g=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var P=(t,e,n)=>(_g(t,e,"read from private field"),n?n.call(t):e.get(t)),Ee=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},q=(t,e,n,r)=>(_g(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var rt=(t,e,n)=>(_g(t,e,"access private method"),n);function VR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var HR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var F2={exports:{}},Nm={},U2={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd=Symbol.for("react.element"),WR=Symbol.for("react.portal"),GR=Symbol.for("react.fragment"),KR=Symbol.for("react.strict_mode"),XR=Symbol.for("react.profiler"),ZR=Symbol.for("react.provider"),YR=Symbol.for("react.context"),JR=Symbol.for("react.forward_ref"),qR=Symbol.for("react.suspense"),QR=Symbol.for("react.memo"),eD=Symbol.for("react.lazy"),Ux=Symbol.iterator;function tD(t){return t===null||typeof t!="object"?null:(t=Ux&&t[Ux]||t["@@iterator"],typeof t=="function"?t:null)}var V2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H2=Object.assign,W2={};function Su(t,e,n){this.props=t,this.context=e,this.refs=W2,this.updater=n||V2}Su.prototype.isReactComponent={};Su.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Su.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function G2(){}G2.prototype=Su.prototype;function Ww(t,e,n){this.props=t,this.context=e,this.refs=W2,this.updater=n||V2}var Gw=Ww.prototype=new G2;Gw.constructor=Ww;H2(Gw,Su.prototype);Gw.isPureReactComponent=!0;var Vx=Array.isArray,K2=Object.prototype.hasOwnProperty,Kw={current:null},X2={key:!0,ref:!0,__self:!0,__source:!0};function Z2(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)K2.call(e,r)&&!X2.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Bd,type:t,key:s,ref:o,props:i,_owner:Kw.current}}function nD(t,e){return{$$typeof:Bd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bd}function rD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hx=/\/+/g;function Rg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rD(""+t.key):e.toString(36)}function mf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bd:case WR:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Rg(o,0):r,Vx(i)?(n="",t!=null&&(n=t.replace(Hx,"$&/")+"/"),mf(i,e,n,"",function(u){return u})):i!=null&&(Xw(i)&&(i=nD(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Hx,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Vx(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Rg(s,a);o+=mf(s,e,n,l,i)}else if(l=tD(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Rg(s,a++),o+=mf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function uh(t,e,n){if(t==null)return t;var r=[],i=0;return mf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function iD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dn={current:null},gf={transition:null},sD={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:gf,ReactCurrentOwner:Kw};He.Children={map:uh,forEach:function(t,e,n){uh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return uh(t,function(){e++}),e},toArray:function(t){return uh(t,function(e){return e})||[]},only:function(t){if(!Xw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=Su;He.Fragment=GR;He.Profiler=XR;He.PureComponent=Ww;He.StrictMode=KR;He.Suspense=qR;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sD;He.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=H2({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Kw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)K2.call(e,l)&&!X2.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Bd,type:t.type,key:i,ref:s,props:r,_owner:o}};He.createContext=function(t){return t={$$typeof:YR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZR,_context:t},t.Consumer=t};He.createElement=Z2;He.createFactory=function(t){var e=Z2.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:JR,render:t}};He.isValidElement=Xw;He.lazy=function(t){return{$$typeof:eD,_payload:{_status:-1,_result:t},_init:iD}};He.memo=function(t,e){return{$$typeof:QR,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=gf.transition;gf.transition={};try{t()}finally{gf.transition=e}};He.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};He.useCallback=function(t,e){return Dn.current.useCallback(t,e)};He.useContext=function(t){return Dn.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return Dn.current.useDeferredValue(t)};He.useEffect=function(t,e){return Dn.current.useEffect(t,e)};He.useId=function(){return Dn.current.useId()};He.useImperativeHandle=function(t,e,n){return Dn.current.useImperativeHandle(t,e,n)};He.useInsertionEffect=function(t,e){return Dn.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return Dn.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return Dn.current.useMemo(t,e)};He.useReducer=function(t,e,n){return Dn.current.useReducer(t,e,n)};He.useRef=function(t){return Dn.current.useRef(t)};He.useState=function(t){return Dn.current.useState(t)};He.useSyncExternalStore=function(t,e,n){return Dn.current.useSyncExternalStore(t,e,n)};He.useTransition=function(){return Dn.current.useTransition()};He.version="18.2.0";U2.exports=He;var y=U2.exports;const de=xu(y),Zw=VR({__proto__:null,default:de},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oD=y,aD=Symbol.for("react.element"),lD=Symbol.for("react.fragment"),uD=Object.prototype.hasOwnProperty,cD=oD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dD={key:!0,ref:!0,__self:!0,__source:!0};function Y2(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)uD.call(e,r)&&!dD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:aD,type:t,key:s,ref:o,props:i,_owner:cD.current}}Nm.Fragment=lD;Nm.jsx=Y2;Nm.jsxs=Y2;F2.exports=Nm;var x=F2.exports;var ky={},J2={exports:{}},yr={},q2={exports:{}},Q2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,M){var U=V.length;V.push(M);e:for(;0<U;){var J=U-1>>>1,ne=V[J];if(0<i(ne,M))V[J]=M,V[U]=ne,U=J;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var M=V[0],U=V.pop();if(U!==M){V[0]=U;e:for(var J=0,ne=V.length,me=ne>>>1;J<me;){var H=2*(J+1)-1,I=V[H],G=H+1,k=V[G];if(0>i(I,U))G<ne&&0>i(k,I)?(V[J]=k,V[G]=U,J=G):(V[J]=I,V[H]=U,J=H);else if(G<ne&&0>i(k,U))V[J]=k,V[G]=U,J=G;else break e}}return M}function i(V,M){var U=V.sortIndex-M.sortIndex;return U!==0?U:V.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=V)r(u),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(u)}}function S(V){if(g=!1,w(V),!p)if(n(l)!==null)p=!0,Z(C);else{var M=n(u);M!==null&&Q(S,M.startTime-V)}}function C(V,M){p=!1,g&&(g=!1,m(A),A=-1),f=!0;var U=h;try{for(w(M),d=n(l);d!==null&&(!(d.expirationTime>M)||V&&!T());){var J=d.callback;if(typeof J=="function"){d.callback=null,h=d.priorityLevel;var ne=J(d.expirationTime<=M);M=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(l)&&r(l),w(M)}else r(l);d=n(l)}if(d!==null)var me=!0;else{var H=n(u);H!==null&&Q(S,H.startTime-M),me=!1}return me}finally{d=null,h=U,f=!1}}var E=!1,$=null,A=-1,O=5,_=-1;function T(){return!(t.unstable_now()-_<O)}function z(){if($!==null){var V=t.unstable_now();_=V;var M=!0;try{M=$(!0,V)}finally{M?j():(E=!1,$=null)}}else E=!1}var j;if(typeof v=="function")j=function(){v(z)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,K=B.port2;B.port1.onmessage=z,j=function(){K.postMessage(null)}}else j=function(){b(z,0)};function Z(V){$=V,E||(E=!0,j())}function Q(V,M){A=b(function(){V(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Z(C))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var U=h;h=M;try{return V()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,M){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var U=h;h=V;try{return M()}finally{h=U}},t.unstable_scheduleCallback=function(V,M,U){var J=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?J+U:J):U=J,V){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=U+ne,V={id:c++,callback:M,priorityLevel:V,startTime:U,expirationTime:ne,sortIndex:-1},U>J?(V.sortIndex=U,e(u,V),n(l)===null&&V===n(u)&&(g?(m(A),A=-1):g=!0,Q(S,U-J))):(V.sortIndex=ne,e(l,V),p||f||(p=!0,Z(C))),V},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(V){var M=h;return function(){var U=h;h=M;try{return V.apply(this,arguments)}finally{h=U}}}})(Q2);q2.exports=Q2;var hD=q2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA=y,gr=hD;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tA=new Set,Ic={};function Ba(t,e){Xl(t,e),Xl(t+"Capture",e)}function Xl(t,e){for(Ic[t]=e,t=0;t<e.length;t++)tA.add(e[t])}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cy=Object.prototype.hasOwnProperty,fD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wx={},Gx={};function pD(t){return Cy.call(Gx,t)?!0:Cy.call(Wx,t)?!1:fD.test(t)?Gx[t]=!0:(Wx[t]=!0,!1)}function mD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gD(t,e,n,r){if(e===null||typeof e>"u"||mD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function In(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cn[t]=new In(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cn[e]=new In(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cn[t]=new In(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cn[t]=new In(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cn[t]=new In(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cn[t]=new In(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cn[t]=new In(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cn[t]=new In(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cn[t]=new In(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yw=/[\-:]([a-z])/g;function Jw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yw,Jw);cn[e]=new In(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yw,Jw);cn[e]=new In(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yw,Jw);cn[e]=new In(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cn[t]=new In(t,1,!1,t.toLowerCase(),null,!1,!1)});cn.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cn[t]=new In(t,1,!1,t.toLowerCase(),null,!0,!0)});function qw(t,e,n,r){var i=cn.hasOwnProperty(e)?cn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gD(e,n,i,r)&&(n=null),r||i===null?pD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ms=eA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ch=Symbol.for("react.element"),ol=Symbol.for("react.portal"),al=Symbol.for("react.fragment"),Qw=Symbol.for("react.strict_mode"),Ey=Symbol.for("react.profiler"),nA=Symbol.for("react.provider"),rA=Symbol.for("react.context"),eb=Symbol.for("react.forward_ref"),Ay=Symbol.for("react.suspense"),Py=Symbol.for("react.suspense_list"),tb=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),iA=Symbol.for("react.offscreen"),Kx=Symbol.iterator;function Ru(t){return t===null||typeof t!="object"?null:(t=Kx&&t[Kx]||t["@@iterator"],typeof t=="function"?t:null)}var Ot=Object.assign,Dg;function nc(t){if(Dg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dg=e&&e[1]||""}return`
`+Dg+t}var Ig=!1;function Lg(t,e){if(!t||Ig)return"";Ig=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ig=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nc(t):""}function yD(t){switch(t.tag){case 5:return nc(t.type);case 16:return nc("Lazy");case 13:return nc("Suspense");case 19:return nc("SuspenseList");case 0:case 2:case 15:return t=Lg(t.type,!1),t;case 11:return t=Lg(t.type.render,!1),t;case 1:return t=Lg(t.type,!0),t;default:return""}}function Ny(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case al:return"Fragment";case ol:return"Portal";case Ey:return"Profiler";case Qw:return"StrictMode";case Ay:return"Suspense";case Py:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rA:return(t.displayName||"Context")+".Consumer";case nA:return(t._context.displayName||"Context")+".Provider";case eb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tb:return e=t.displayName||null,e!==null?e:Ny(t.type)||"Memo";case Us:e=t._payload,t=t._init;try{return Ny(t(e))}catch{}}return null}function vD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ny(e);case 8:return e===Qw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Co(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wD(t){var e=sA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dh(t){t._valueTracker||(t._valueTracker=wD(t))}function oA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $y(t,e){var n=e.checked;return Ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Co(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aA(t,e){e=e.checked,e!=null&&qw(t,"checked",e,!1)}function Oy(t,e){aA(t,e);var n=Co(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ty(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ty(t,e.type,Co(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ty(t,e,n){(e!=="number"||Qf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rc=Array.isArray;function kl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Co(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function My(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(rc(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Co(n)}}function lA(t,e){var n=Co(e.value),r=Co(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _y(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hh,cA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hh=hh||document.createElement("div"),hh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bD=["Webkit","ms","Moz","O"];Object.keys(mc).forEach(function(t){bD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mc[e]=mc[t]})});function dA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mc.hasOwnProperty(t)&&mc[t]?(""+e).trim():e+"px"}function hA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=dA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xD=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ry(t,e){if(e){if(xD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function Dy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iy=null;function nb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ly=null,Cl=null,El=null;function qx(t){if(t=Fd(t)){if(typeof Ly!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=_m(e),Ly(t.stateNode,t.type,e))}}function fA(t){Cl?El?El.push(t):El=[t]:Cl=t}function pA(){if(Cl){var t=Cl,e=El;if(El=Cl=null,qx(t),e)for(t=0;t<e.length;t++)qx(e[t])}}function mA(t,e){return t(e)}function gA(){}var Bg=!1;function yA(t,e,n){if(Bg)return t(e,n);Bg=!0;try{return mA(t,e,n)}finally{Bg=!1,(Cl!==null||El!==null)&&(gA(),pA())}}function Bc(t,e){var n=t.stateNode;if(n===null)return null;var r=_m(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var By=!1;if(ks)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){By=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{By=!1}function SD(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var gc=!1,ep=null,tp=!1,zy=null,kD={onError:function(t){gc=!0,ep=t}};function CD(t,e,n,r,i,s,o,a,l){gc=!1,ep=null,SD.apply(kD,arguments)}function ED(t,e,n,r,i,s,o,a,l){if(CD.apply(this,arguments),gc){if(gc){var u=ep;gc=!1,ep=null}else throw Error(ie(198));tp||(tp=!0,zy=u)}}function za(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qx(t){if(za(t)!==t)throw Error(ie(188))}function AD(t){var e=t.alternate;if(!e){if(e=za(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Qx(i),t;if(s===r)return Qx(i),e;s=s.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function wA(t){return t=AD(t),t!==null?bA(t):null}function bA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bA(t);if(e!==null)return e;t=t.sibling}return null}var xA=gr.unstable_scheduleCallback,eS=gr.unstable_cancelCallback,PD=gr.unstable_shouldYield,ND=gr.unstable_requestPaint,It=gr.unstable_now,$D=gr.unstable_getCurrentPriorityLevel,rb=gr.unstable_ImmediatePriority,SA=gr.unstable_UserBlockingPriority,np=gr.unstable_NormalPriority,OD=gr.unstable_LowPriority,kA=gr.unstable_IdlePriority,$m=null,zi=null;function TD(t){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot($m,t,void 0,(t.current.flags&128)===128)}catch{}}var ii=Math.clz32?Math.clz32:RD,MD=Math.log,_D=Math.LN2;function RD(t){return t>>>=0,t===0?32:31-(MD(t)/_D|0)|0}var fh=64,ph=4194304;function ic(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ic(a):(s&=o,s!==0&&(r=ic(s)))}else o=n&~i,o!==0?r=ic(o):s!==0&&(r=ic(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ii(e),i=1<<n,r|=t[n],e&=~i;return r}function DD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ID(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ii(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=DD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function CA(){var t=fh;return fh<<=1,!(fh&4194240)&&(fh=64),t}function zg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ii(e),t[e]=n}function LD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ii(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ib(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ii(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var et=0;function EA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var AA,sb,PA,NA,$A,Fy=!1,mh=[],fo=null,po=null,mo=null,zc=new Map,jc=new Map,Zs=[],BD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tS(t,e){switch(t){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":zc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(e.pointerId)}}function Iu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Fd(e),e!==null&&sb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zD(t,e,n,r,i){switch(e){case"focusin":return fo=Iu(fo,t,e,n,r,i),!0;case"dragenter":return po=Iu(po,t,e,n,r,i),!0;case"mouseover":return mo=Iu(mo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return zc.set(s,Iu(zc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,jc.set(s,Iu(jc.get(s)||null,t,e,n,r,i)),!0}return!1}function OA(t){var e=ua(t.target);if(e!==null){var n=za(e);if(n!==null){if(e=n.tag,e===13){if(e=vA(n),e!==null){t.blockedOn=e,$A(t.priority,function(){PA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Iy=r,n.target.dispatchEvent(r),Iy=null}else return e=Fd(n),e!==null&&sb(e),t.blockedOn=n,!1;e.shift()}return!0}function nS(t,e,n){yf(t)&&n.delete(e)}function jD(){Fy=!1,fo!==null&&yf(fo)&&(fo=null),po!==null&&yf(po)&&(po=null),mo!==null&&yf(mo)&&(mo=null),zc.forEach(nS),jc.forEach(nS)}function Lu(t,e){t.blockedOn===e&&(t.blockedOn=null,Fy||(Fy=!0,gr.unstable_scheduleCallback(gr.unstable_NormalPriority,jD)))}function Fc(t){function e(i){return Lu(i,t)}if(0<mh.length){Lu(mh[0],t);for(var n=1;n<mh.length;n++){var r=mh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fo!==null&&Lu(fo,t),po!==null&&Lu(po,t),mo!==null&&Lu(mo,t),zc.forEach(e),jc.forEach(e),n=0;n<Zs.length;n++)r=Zs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zs.length&&(n=Zs[0],n.blockedOn===null);)OA(n),n.blockedOn===null&&Zs.shift()}var Al=Ms.ReactCurrentBatchConfig,ip=!0;function FD(t,e,n,r){var i=et,s=Al.transition;Al.transition=null;try{et=1,ob(t,e,n,r)}finally{et=i,Al.transition=s}}function UD(t,e,n,r){var i=et,s=Al.transition;Al.transition=null;try{et=4,ob(t,e,n,r)}finally{et=i,Al.transition=s}}function ob(t,e,n,r){if(ip){var i=Uy(t,e,n,r);if(i===null)Zg(t,e,r,sp,n),tS(t,r);else if(zD(i,t,e,n,r))r.stopPropagation();else if(tS(t,r),e&4&&-1<BD.indexOf(t)){for(;i!==null;){var s=Fd(i);if(s!==null&&AA(s),s=Uy(t,e,n,r),s===null&&Zg(t,e,r,sp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Zg(t,e,r,null,n)}}var sp=null;function Uy(t,e,n,r){if(sp=null,t=nb(r),t=ua(t),t!==null)if(e=za(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sp=t,null}function TA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($D()){case rb:return 1;case SA:return 4;case np:case OD:return 16;case kA:return 536870912;default:return 16}default:return 16}}var so=null,ab=null,vf=null;function MA(){if(vf)return vf;var t,e=ab,n=e.length,r,i="value"in so?so.value:so.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return vf=i.slice(t,1<r?1-r:void 0)}function wf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gh(){return!0}function rS(){return!1}function vr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?gh:rS,this.isPropagationStopped=rS,this}return Ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gh)},persist:function(){},isPersistent:gh}),e}var ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lb=vr(ku),jd=Ot({},ku,{view:0,detail:0}),VD=vr(jd),jg,Fg,Bu,Om=Ot({},jd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ub,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bu&&(Bu&&t.type==="mousemove"?(jg=t.screenX-Bu.screenX,Fg=t.screenY-Bu.screenY):Fg=jg=0,Bu=t),jg)},movementY:function(t){return"movementY"in t?t.movementY:Fg}}),iS=vr(Om),HD=Ot({},Om,{dataTransfer:0}),WD=vr(HD),GD=Ot({},jd,{relatedTarget:0}),Ug=vr(GD),KD=Ot({},ku,{animationName:0,elapsedTime:0,pseudoElement:0}),XD=vr(KD),ZD=Ot({},ku,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YD=vr(ZD),JD=Ot({},ku,{data:0}),sS=vr(JD),qD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=e3[t])?!!e[t]:!1}function ub(){return t3}var n3=Ot({},jd,{key:function(t){if(t.key){var e=qD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ub,charCode:function(t){return t.type==="keypress"?wf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),r3=vr(n3),i3=Ot({},Om,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oS=vr(i3),s3=Ot({},jd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ub}),o3=vr(s3),a3=Ot({},ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),l3=vr(a3),u3=Ot({},Om,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),c3=vr(u3),d3=[9,13,27,32],cb=ks&&"CompositionEvent"in window,yc=null;ks&&"documentMode"in document&&(yc=document.documentMode);var h3=ks&&"TextEvent"in window&&!yc,_A=ks&&(!cb||yc&&8<yc&&11>=yc),aS=String.fromCharCode(32),lS=!1;function RA(t,e){switch(t){case"keyup":return d3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ll=!1;function f3(t,e){switch(t){case"compositionend":return DA(e);case"keypress":return e.which!==32?null:(lS=!0,aS);case"textInput":return t=e.data,t===aS&&lS?null:t;default:return null}}function p3(t,e){if(ll)return t==="compositionend"||!cb&&RA(t,e)?(t=MA(),vf=ab=so=null,ll=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _A&&e.locale!=="ko"?null:e.data;default:return null}}var m3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m3[t.type]:e==="textarea"}function IA(t,e,n,r){fA(r),e=op(e,"onChange"),0<e.length&&(n=new lb("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vc=null,Uc=null;function g3(t){KA(t,0)}function Tm(t){var e=dl(t);if(oA(e))return t}function y3(t,e){if(t==="change")return e}var LA=!1;if(ks){var Vg;if(ks){var Hg="oninput"in document;if(!Hg){var cS=document.createElement("div");cS.setAttribute("oninput","return;"),Hg=typeof cS.oninput=="function"}Vg=Hg}else Vg=!1;LA=Vg&&(!document.documentMode||9<document.documentMode)}function dS(){vc&&(vc.detachEvent("onpropertychange",BA),Uc=vc=null)}function BA(t){if(t.propertyName==="value"&&Tm(Uc)){var e=[];IA(e,Uc,t,nb(t)),yA(g3,e)}}function v3(t,e,n){t==="focusin"?(dS(),vc=e,Uc=n,vc.attachEvent("onpropertychange",BA)):t==="focusout"&&dS()}function w3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tm(Uc)}function b3(t,e){if(t==="click")return Tm(e)}function x3(t,e){if(t==="input"||t==="change")return Tm(e)}function S3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ci=typeof Object.is=="function"?Object.is:S3;function Vc(t,e){if(ci(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Cy.call(e,i)||!ci(t[i],e[i]))return!1}return!0}function hS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fS(t,e){var n=hS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hS(n)}}function zA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jA(){for(var t=window,e=Qf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qf(t.document)}return e}function db(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function k3(t){var e=jA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zA(n.ownerDocument.documentElement,n)){if(r!==null&&db(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=fS(n,s);var o=fS(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var C3=ks&&"documentMode"in document&&11>=document.documentMode,ul=null,Vy=null,wc=null,Hy=!1;function pS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hy||ul==null||ul!==Qf(r)||(r=ul,"selectionStart"in r&&db(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wc&&Vc(wc,r)||(wc=r,r=op(Vy,"onSelect"),0<r.length&&(e=new lb("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ul)))}function yh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cl={animationend:yh("Animation","AnimationEnd"),animationiteration:yh("Animation","AnimationIteration"),animationstart:yh("Animation","AnimationStart"),transitionend:yh("Transition","TransitionEnd")},Wg={},FA={};ks&&(FA=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function Mm(t){if(Wg[t])return Wg[t];if(!cl[t])return t;var e=cl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FA)return Wg[t]=e[n];return t}var UA=Mm("animationend"),VA=Mm("animationiteration"),HA=Mm("animationstart"),WA=Mm("transitionend"),GA=new Map,mS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bo(t,e){GA.set(t,e),Ba(e,[t])}for(var Gg=0;Gg<mS.length;Gg++){var Kg=mS[Gg],E3=Kg.toLowerCase(),A3=Kg[0].toUpperCase()+Kg.slice(1);Bo(E3,"on"+A3)}Bo(UA,"onAnimationEnd");Bo(VA,"onAnimationIteration");Bo(HA,"onAnimationStart");Bo("dblclick","onDoubleClick");Bo("focusin","onFocus");Bo("focusout","onBlur");Bo(WA,"onTransitionEnd");Xl("onMouseEnter",["mouseout","mouseover"]);Xl("onMouseLeave",["mouseout","mouseover"]);Xl("onPointerEnter",["pointerout","pointerover"]);Xl("onPointerLeave",["pointerout","pointerover"]);Ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P3=new Set("cancel close invalid load scroll toggle".split(" ").concat(sc));function gS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ED(r,e,void 0,t),t.currentTarget=null}function KA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;gS(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;gS(i,a,u),s=l}}}if(tp)throw t=zy,tp=!1,zy=null,t}function dt(t,e){var n=e[Zy];n===void 0&&(n=e[Zy]=new Set);var r=t+"__bubble";n.has(r)||(XA(e,t,2,!1),n.add(r))}function Xg(t,e,n){var r=0;e&&(r|=4),XA(n,t,r,e)}var vh="_reactListening"+Math.random().toString(36).slice(2);function Hc(t){if(!t[vh]){t[vh]=!0,tA.forEach(function(n){n!=="selectionchange"&&(P3.has(n)||Xg(n,!1,t),Xg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vh]||(e[vh]=!0,Xg("selectionchange",!1,e))}}function XA(t,e,n,r){switch(TA(e)){case 1:var i=FD;break;case 4:i=UD;break;default:i=ob}n=i.bind(null,e,n,t),i=void 0,!By||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Zg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ua(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}yA(function(){var u=s,c=nb(n),d=[];e:{var h=GA.get(t);if(h!==void 0){var f=lb,p=t;switch(t){case"keypress":if(wf(n)===0)break e;case"keydown":case"keyup":f=r3;break;case"focusin":p="focus",f=Ug;break;case"focusout":p="blur",f=Ug;break;case"beforeblur":case"afterblur":f=Ug;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=iS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=WD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=o3;break;case UA:case VA:case HA:f=XD;break;case WA:f=l3;break;case"scroll":f=VD;break;case"wheel":f=c3;break;case"copy":case"cut":case"paste":f=YD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=oS}var g=(e&4)!==0,b=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var v=u,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,m!==null&&(S=Bc(v,m),S!=null&&g.push(Wc(v,S,w)))),b)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Iy&&(p=n.relatedTarget||n.fromElement)&&(ua(p)||p[Cs]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?ua(p):null,p!==null&&(b=za(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=iS,S="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=oS,S="onPointerLeave",m="onPointerEnter",v="pointer"),b=f==null?h:dl(f),w=p==null?h:dl(p),h=new g(S,v+"leave",f,n,c),h.target=b,h.relatedTarget=w,S=null,ua(c)===u&&(g=new g(m,v+"enter",p,n,c),g.target=w,g.relatedTarget=b,S=g),b=S,f&&p)t:{for(g=f,m=p,v=0,w=g;w;w=Xa(w))v++;for(w=0,S=m;S;S=Xa(S))w++;for(;0<v-w;)g=Xa(g),v--;for(;0<w-v;)m=Xa(m),w--;for(;v--;){if(g===m||m!==null&&g===m.alternate)break t;g=Xa(g),m=Xa(m)}g=null}else g=null;f!==null&&yS(d,h,f,g,!1),p!==null&&b!==null&&yS(d,b,p,g,!0)}}e:{if(h=u?dl(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=y3;else if(uS(h))if(LA)C=x3;else{C=w3;var E=v3}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=b3);if(C&&(C=C(t,u))){IA(d,C,n,c);break e}E&&E(t,h,u),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Ty(h,"number",h.value)}switch(E=u?dl(u):window,t){case"focusin":(uS(E)||E.contentEditable==="true")&&(ul=E,Vy=u,wc=null);break;case"focusout":wc=Vy=ul=null;break;case"mousedown":Hy=!0;break;case"contextmenu":case"mouseup":case"dragend":Hy=!1,pS(d,n,c);break;case"selectionchange":if(C3)break;case"keydown":case"keyup":pS(d,n,c)}var $;if(cb)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ll?RA(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(_A&&n.locale!=="ko"&&(ll||A!=="onCompositionStart"?A==="onCompositionEnd"&&ll&&($=MA()):(so=c,ab="value"in so?so.value:so.textContent,ll=!0)),E=op(u,A),0<E.length&&(A=new sS(A,t,null,n,c),d.push({event:A,listeners:E}),$?A.data=$:($=DA(n),$!==null&&(A.data=$)))),($=h3?f3(t,n):p3(t,n))&&(u=op(u,"onBeforeInput"),0<u.length&&(c=new sS("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=$))}KA(d,e)})}function Wc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function op(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Bc(t,n),s!=null&&r.unshift(Wc(t,s,i)),s=Bc(t,e),s!=null&&r.push(Wc(t,s,i))),t=t.return}return r}function Xa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yS(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Bc(n,s),l!=null&&o.unshift(Wc(n,l,a))):i||(l=Bc(n,s),l!=null&&o.push(Wc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var N3=/\r\n?/g,$3=/\u0000|\uFFFD/g;function vS(t){return(typeof t=="string"?t:""+t).replace(N3,`
`).replace($3,"")}function wh(t,e,n){if(e=vS(e),vS(t)!==e&&n)throw Error(ie(425))}function ap(){}var Wy=null,Gy=null;function Ky(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xy=typeof setTimeout=="function"?setTimeout:void 0,O3=typeof clearTimeout=="function"?clearTimeout:void 0,wS=typeof Promise=="function"?Promise:void 0,T3=typeof queueMicrotask=="function"?queueMicrotask:typeof wS<"u"?function(t){return wS.resolve(null).then(t).catch(M3)}:Xy;function M3(t){setTimeout(function(){throw t})}function Yg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fc(e)}function go(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cu=Math.random().toString(36).slice(2),Mi="__reactFiber$"+Cu,Gc="__reactProps$"+Cu,Cs="__reactContainer$"+Cu,Zy="__reactEvents$"+Cu,_3="__reactListeners$"+Cu,R3="__reactHandles$"+Cu;function ua(t){var e=t[Mi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cs]||n[Mi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bS(t);t!==null;){if(n=t[Mi])return n;t=bS(t)}return e}t=n,n=t.parentNode}return null}function Fd(t){return t=t[Mi]||t[Cs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function _m(t){return t[Gc]||null}var Yy=[],hl=-1;function zo(t){return{current:t}}function gt(t){0>hl||(t.current=Yy[hl],Yy[hl]=null,hl--)}function lt(t,e){hl++,Yy[hl]=t.current,t.current=e}var Eo={},bn=zo(Eo),Zn=zo(!1),Sa=Eo;function Zl(t,e){var n=t.type.contextTypes;if(!n)return Eo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yn(t){return t=t.childContextTypes,t!=null}function lp(){gt(Zn),gt(bn)}function xS(t,e,n){if(bn.current!==Eo)throw Error(ie(168));lt(bn,e),lt(Zn,n)}function ZA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ie(108,vD(t)||"Unknown",i));return Ot({},n,r)}function up(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Eo,Sa=bn.current,lt(bn,t),lt(Zn,Zn.current),!0}function SS(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=ZA(t,e,Sa),r.__reactInternalMemoizedMergedChildContext=t,gt(Zn),gt(bn),lt(bn,t)):gt(Zn),lt(Zn,n)}var Qi=null,Rm=!1,Jg=!1;function YA(t){Qi===null?Qi=[t]:Qi.push(t)}function D3(t){Rm=!0,YA(t)}function jo(){if(!Jg&&Qi!==null){Jg=!0;var t=0,e=et;try{var n=Qi;for(et=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qi=null,Rm=!1}catch(i){throw Qi!==null&&(Qi=Qi.slice(t+1)),xA(rb,jo),i}finally{et=e,Jg=!1}}return null}var fl=[],pl=0,cp=null,dp=0,Nr=[],$r=0,ka=null,ds=1,hs="";function ea(t,e){fl[pl++]=dp,fl[pl++]=cp,cp=t,dp=e}function JA(t,e,n){Nr[$r++]=ds,Nr[$r++]=hs,Nr[$r++]=ka,ka=t;var r=ds;t=hs;var i=32-ii(r)-1;r&=~(1<<i),n+=1;var s=32-ii(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ds=1<<32-ii(e)+i|n<<i|r,hs=s+t}else ds=1<<s|n<<i|r,hs=t}function hb(t){t.return!==null&&(ea(t,1),JA(t,1,0))}function fb(t){for(;t===cp;)cp=fl[--pl],fl[pl]=null,dp=fl[--pl],fl[pl]=null;for(;t===ka;)ka=Nr[--$r],Nr[$r]=null,hs=Nr[--$r],Nr[$r]=null,ds=Nr[--$r],Nr[$r]=null}var mr=null,hr=null,bt=!1,qr=null;function qA(t,e){var n=Mr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mr=t,hr=go(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mr=t,hr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ka!==null?{id:ds,overflow:hs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mr=t,hr=null,!0):!1;default:return!1}}function Jy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qy(t){if(bt){var e=hr;if(e){var n=e;if(!kS(t,e)){if(Jy(t))throw Error(ie(418));e=go(n.nextSibling);var r=mr;e&&kS(t,e)?qA(r,n):(t.flags=t.flags&-4097|2,bt=!1,mr=t)}}else{if(Jy(t))throw Error(ie(418));t.flags=t.flags&-4097|2,bt=!1,mr=t}}}function CS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mr=t}function bh(t){if(t!==mr)return!1;if(!bt)return CS(t),bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ky(t.type,t.memoizedProps)),e&&(e=hr)){if(Jy(t))throw QA(),Error(ie(418));for(;e;)qA(t,e),e=go(e.nextSibling)}if(CS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hr=go(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hr=null}}else hr=mr?go(t.stateNode.nextSibling):null;return!0}function QA(){for(var t=hr;t;)t=go(t.nextSibling)}function Yl(){hr=mr=null,bt=!1}function pb(t){qr===null?qr=[t]:qr.push(t)}var I3=Ms.ReactCurrentBatchConfig;function Kr(t,e){if(t&&t.defaultProps){e=Ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var hp=zo(null),fp=null,ml=null,mb=null;function gb(){mb=ml=fp=null}function yb(t){var e=hp.current;gt(hp),t._currentValue=e}function Qy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pl(t,e){fp=t,mb=ml=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gn=!0),t.firstContext=null)}function jr(t){var e=t._currentValue;if(mb!==t)if(t={context:t,memoizedValue:e,next:null},ml===null){if(fp===null)throw Error(ie(308));ml=t,fp.dependencies={lanes:0,firstContext:t}}else ml=ml.next=t;return e}var ca=null;function vb(t){ca===null?ca=[t]:ca.push(t)}function eP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vb(e)):(n.next=i.next,i.next=n),e.interleaved=n,Es(t,r)}function Es(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vs=!1;function wb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ms(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Es(t,n)}return i=r.interleaved,i===null?(e.next=e,vb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Es(t,n)}function bf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ib(t,n)}}function ES(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pp(t,e,n,r){var i=t.updateQueue;Vs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ot({},d,h);break e;case 2:Vs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ea|=o,t.lanes=o,t.memoizedState=d}}function AS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ie(191,i));i.call(r)}}}var nP=new eA.Component().refs;function ev(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dm={isMounted:function(t){return(t=t._reactInternals)?za(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=On(),i=wo(t),s=ms(r,i);s.payload=e,n!=null&&(s.callback=n),e=yo(t,s,i),e!==null&&(si(e,t,i,r),bf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=On(),i=wo(t),s=ms(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=yo(t,s,i),e!==null&&(si(e,t,i,r),bf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=On(),r=wo(t),i=ms(n,r);i.tag=2,e!=null&&(i.callback=e),e=yo(t,i,r),e!==null&&(si(e,t,r,n),bf(e,t,r))}};function PS(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Vc(n,r)||!Vc(i,s):!0}function rP(t,e,n){var r=!1,i=Eo,s=e.contextType;return typeof s=="object"&&s!==null?s=jr(s):(i=Yn(e)?Sa:bn.current,r=e.contextTypes,s=(r=r!=null)?Zl(t,i):Eo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function NS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Dm.enqueueReplaceState(e,e.state,null)}function tv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=nP,wb(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=jr(s):(s=Yn(e)?Sa:bn.current,i.context=Zl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ev(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Dm.enqueueReplaceState(i,i.state,null),pp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===nP&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function xh(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $S(t){var e=t._init;return e(t._payload)}function iP(t){function e(m,v){if(t){var w=m.deletions;w===null?(m.deletions=[v],m.flags|=16):w.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=bo(m,v),m.index=0,m.sibling=null,m}function s(m,v,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<v?(m.flags|=2,v):w):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,v,w,S){return v===null||v.tag!==6?(v=i0(w,m.mode,S),v.return=m,v):(v=i(v,w),v.return=m,v)}function l(m,v,w,S){var C=w.type;return C===al?c(m,v,w.props.children,S,w.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Us&&$S(C)===v.type)?(S=i(v,w.props),S.ref=zu(m,v,w),S.return=m,S):(S=Af(w.type,w.key,w.props,null,m.mode,S),S.ref=zu(m,v,w),S.return=m,S)}function u(m,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=s0(w,m.mode,S),v.return=m,v):(v=i(v,w.children||[]),v.return=m,v)}function c(m,v,w,S,C){return v===null||v.tag!==7?(v=va(w,m.mode,S,C),v.return=m,v):(v=i(v,w),v.return=m,v)}function d(m,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=i0(""+v,m.mode,w),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ch:return w=Af(v.type,v.key,v.props,null,m.mode,w),w.ref=zu(m,null,v),w.return=m,w;case ol:return v=s0(v,m.mode,w),v.return=m,v;case Us:var S=v._init;return d(m,S(v._payload),w)}if(rc(v)||Ru(v))return v=va(v,m.mode,w,null),v.return=m,v;xh(m,v)}return null}function h(m,v,w,S){var C=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:a(m,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ch:return w.key===C?l(m,v,w,S):null;case ol:return w.key===C?u(m,v,w,S):null;case Us:return C=w._init,h(m,v,C(w._payload),S)}if(rc(w)||Ru(w))return C!==null?null:c(m,v,w,S,null);xh(m,w)}return null}function f(m,v,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(w)||null,a(v,m,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ch:return m=m.get(S.key===null?w:S.key)||null,l(v,m,S,C);case ol:return m=m.get(S.key===null?w:S.key)||null,u(v,m,S,C);case Us:var E=S._init;return f(m,v,w,E(S._payload),C)}if(rc(S)||Ru(S))return m=m.get(w)||null,c(v,m,S,C,null);xh(v,S)}return null}function p(m,v,w,S){for(var C=null,E=null,$=v,A=v=0,O=null;$!==null&&A<w.length;A++){$.index>A?(O=$,$=null):O=$.sibling;var _=h(m,$,w[A],S);if(_===null){$===null&&($=O);break}t&&$&&_.alternate===null&&e(m,$),v=s(_,v,A),E===null?C=_:E.sibling=_,E=_,$=O}if(A===w.length)return n(m,$),bt&&ea(m,A),C;if($===null){for(;A<w.length;A++)$=d(m,w[A],S),$!==null&&(v=s($,v,A),E===null?C=$:E.sibling=$,E=$);return bt&&ea(m,A),C}for($=r(m,$);A<w.length;A++)O=f($,m,A,w[A],S),O!==null&&(t&&O.alternate!==null&&$.delete(O.key===null?A:O.key),v=s(O,v,A),E===null?C=O:E.sibling=O,E=O);return t&&$.forEach(function(T){return e(m,T)}),bt&&ea(m,A),C}function g(m,v,w,S){var C=Ru(w);if(typeof C!="function")throw Error(ie(150));if(w=C.call(w),w==null)throw Error(ie(151));for(var E=C=null,$=v,A=v=0,O=null,_=w.next();$!==null&&!_.done;A++,_=w.next()){$.index>A?(O=$,$=null):O=$.sibling;var T=h(m,$,_.value,S);if(T===null){$===null&&($=O);break}t&&$&&T.alternate===null&&e(m,$),v=s(T,v,A),E===null?C=T:E.sibling=T,E=T,$=O}if(_.done)return n(m,$),bt&&ea(m,A),C;if($===null){for(;!_.done;A++,_=w.next())_=d(m,_.value,S),_!==null&&(v=s(_,v,A),E===null?C=_:E.sibling=_,E=_);return bt&&ea(m,A),C}for($=r(m,$);!_.done;A++,_=w.next())_=f($,m,A,_.value,S),_!==null&&(t&&_.alternate!==null&&$.delete(_.key===null?A:_.key),v=s(_,v,A),E===null?C=_:E.sibling=_,E=_);return t&&$.forEach(function(z){return e(m,z)}),bt&&ea(m,A),C}function b(m,v,w,S){if(typeof w=="object"&&w!==null&&w.type===al&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ch:e:{for(var C=w.key,E=v;E!==null;){if(E.key===C){if(C=w.type,C===al){if(E.tag===7){n(m,E.sibling),v=i(E,w.props.children),v.return=m,m=v;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Us&&$S(C)===E.type){n(m,E.sibling),v=i(E,w.props),v.ref=zu(m,E,w),v.return=m,m=v;break e}n(m,E);break}else e(m,E);E=E.sibling}w.type===al?(v=va(w.props.children,m.mode,S,w.key),v.return=m,m=v):(S=Af(w.type,w.key,w.props,null,m.mode,S),S.ref=zu(m,v,w),S.return=m,m=S)}return o(m);case ol:e:{for(E=w.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(m,v.sibling),v=i(v,w.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=s0(w,m.mode,S),v.return=m,m=v}return o(m);case Us:return E=w._init,b(m,v,E(w._payload),S)}if(rc(w))return p(m,v,w,S);if(Ru(w))return g(m,v,w,S);xh(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(m,v.sibling),v=i(v,w),v.return=m,m=v):(n(m,v),v=i0(w,m.mode,S),v.return=m,m=v),o(m)):n(m,v)}return b}var Jl=iP(!0),sP=iP(!1),Ud={},ji=zo(Ud),Kc=zo(Ud),Xc=zo(Ud);function da(t){if(t===Ud)throw Error(ie(174));return t}function bb(t,e){switch(lt(Xc,e),lt(Kc,t),lt(ji,Ud),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_y(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_y(e,t)}gt(ji),lt(ji,e)}function ql(){gt(ji),gt(Kc),gt(Xc)}function oP(t){da(Xc.current);var e=da(ji.current),n=_y(e,t.type);e!==n&&(lt(Kc,t),lt(ji,n))}function xb(t){Kc.current===t&&(gt(ji),gt(Kc))}var At=zo(0);function mp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qg=[];function Sb(){for(var t=0;t<qg.length;t++)qg[t]._workInProgressVersionPrimary=null;qg.length=0}var xf=Ms.ReactCurrentDispatcher,Qg=Ms.ReactCurrentBatchConfig,Ca=0,Nt=null,Ft=null,Xt=null,gp=!1,bc=!1,Zc=0,L3=0;function hn(){throw Error(ie(321))}function kb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ci(t[n],e[n]))return!1;return!0}function Cb(t,e,n,r,i,s){if(Ca=s,Nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xf.current=t===null||t.memoizedState===null?F3:U3,t=n(r,i),bc){s=0;do{if(bc=!1,Zc=0,25<=s)throw Error(ie(301));s+=1,Xt=Ft=null,e.updateQueue=null,xf.current=V3,t=n(r,i)}while(bc)}if(xf.current=yp,e=Ft!==null&&Ft.next!==null,Ca=0,Xt=Ft=Nt=null,gp=!1,e)throw Error(ie(300));return t}function Eb(){var t=Zc!==0;return Zc=0,t}function Ci(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Nt.memoizedState=Xt=t:Xt=Xt.next=t,Xt}function Fr(){if(Ft===null){var t=Nt.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Xt===null?Nt.memoizedState:Xt.next;if(e!==null)Xt=e,Ft=t;else{if(t===null)throw Error(ie(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Xt===null?Nt.memoizedState=Xt=t:Xt=Xt.next=t}return Xt}function Yc(t,e){return typeof e=="function"?e(t):e}function e0(t){var e=Fr(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=Ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ca&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Nt.lanes|=c,Ea|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,ci(r,e.memoizedState)||(Gn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Nt.lanes|=s,Ea|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function t0(t){var e=Fr(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ci(s,e.memoizedState)||(Gn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function aP(){}function lP(t,e){var n=Nt,r=Fr(),i=e(),s=!ci(r.memoizedState,i);if(s&&(r.memoizedState=i,Gn=!0),r=r.queue,Ab(dP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Xt!==null&&Xt.memoizedState.tag&1){if(n.flags|=2048,Jc(9,cP.bind(null,n,r,i,e),void 0,null),Jt===null)throw Error(ie(349));Ca&30||uP(n,e,i)}return i}function uP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Nt.updateQueue,e===null?(e={lastEffect:null,stores:null},Nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cP(t,e,n,r){e.value=n,e.getSnapshot=r,hP(e)&&fP(t)}function dP(t,e,n){return n(function(){hP(e)&&fP(t)})}function hP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ci(t,n)}catch{return!0}}function fP(t){var e=Es(t,1);e!==null&&si(e,t,1,-1)}function OS(t){var e=Ci();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yc,lastRenderedState:t},e.queue=t,t=t.dispatch=j3.bind(null,Nt,t),[e.memoizedState,t]}function Jc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Nt.updateQueue,e===null?(e={lastEffect:null,stores:null},Nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function pP(){return Fr().memoizedState}function Sf(t,e,n,r){var i=Ci();Nt.flags|=t,i.memoizedState=Jc(1|e,n,void 0,r===void 0?null:r)}function Im(t,e,n,r){var i=Fr();r=r===void 0?null:r;var s=void 0;if(Ft!==null){var o=Ft.memoizedState;if(s=o.destroy,r!==null&&kb(r,o.deps)){i.memoizedState=Jc(e,n,s,r);return}}Nt.flags|=t,i.memoizedState=Jc(1|e,n,s,r)}function TS(t,e){return Sf(8390656,8,t,e)}function Ab(t,e){return Im(2048,8,t,e)}function mP(t,e){return Im(4,2,t,e)}function gP(t,e){return Im(4,4,t,e)}function yP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vP(t,e,n){return n=n!=null?n.concat([t]):null,Im(4,4,yP.bind(null,e,t),n)}function Pb(){}function wP(t,e){var n=Fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bP(t,e){var n=Fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xP(t,e,n){return Ca&21?(ci(n,e)||(n=CA(),Nt.lanes|=n,Ea|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gn=!0),t.memoizedState=n)}function B3(t,e){var n=et;et=n!==0&&4>n?n:4,t(!0);var r=Qg.transition;Qg.transition={};try{t(!1),e()}finally{et=n,Qg.transition=r}}function SP(){return Fr().memoizedState}function z3(t,e,n){var r=wo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kP(t))CP(e,n);else if(n=eP(t,e,n,r),n!==null){var i=On();si(n,t,r,i),EP(n,e,r)}}function j3(t,e,n){var r=wo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kP(t))CP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ci(a,o)){var l=e.interleaved;l===null?(i.next=i,vb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=eP(t,e,i,r),n!==null&&(i=On(),si(n,t,r,i),EP(n,e,r))}}function kP(t){var e=t.alternate;return t===Nt||e!==null&&e===Nt}function CP(t,e){bc=gp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function EP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ib(t,n)}}var yp={readContext:jr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},F3={readContext:jr,useCallback:function(t,e){return Ci().memoizedState=[t,e===void 0?null:e],t},useContext:jr,useEffect:TS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sf(4194308,4,yP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sf(4,2,t,e)},useMemo:function(t,e){var n=Ci();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ci();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=z3.bind(null,Nt,t),[r.memoizedState,t]},useRef:function(t){var e=Ci();return t={current:t},e.memoizedState=t},useState:OS,useDebugValue:Pb,useDeferredValue:function(t){return Ci().memoizedState=t},useTransition:function(){var t=OS(!1),e=t[0];return t=B3.bind(null,t[1]),Ci().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Nt,i=Ci();if(bt){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),Jt===null)throw Error(ie(349));Ca&30||uP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,TS(dP.bind(null,r,s,t),[t]),r.flags|=2048,Jc(9,cP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ci(),e=Jt.identifierPrefix;if(bt){var n=hs,r=ds;n=(r&~(1<<32-ii(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=L3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},U3={readContext:jr,useCallback:wP,useContext:jr,useEffect:Ab,useImperativeHandle:vP,useInsertionEffect:mP,useLayoutEffect:gP,useMemo:bP,useReducer:e0,useRef:pP,useState:function(){return e0(Yc)},useDebugValue:Pb,useDeferredValue:function(t){var e=Fr();return xP(e,Ft.memoizedState,t)},useTransition:function(){var t=e0(Yc)[0],e=Fr().memoizedState;return[t,e]},useMutableSource:aP,useSyncExternalStore:lP,useId:SP,unstable_isNewReconciler:!1},V3={readContext:jr,useCallback:wP,useContext:jr,useEffect:Ab,useImperativeHandle:vP,useInsertionEffect:mP,useLayoutEffect:gP,useMemo:bP,useReducer:t0,useRef:pP,useState:function(){return t0(Yc)},useDebugValue:Pb,useDeferredValue:function(t){var e=Fr();return Ft===null?e.memoizedState=t:xP(e,Ft.memoizedState,t)},useTransition:function(){var t=t0(Yc)[0],e=Fr().memoizedState;return[t,e]},useMutableSource:aP,useSyncExternalStore:lP,useId:SP,unstable_isNewReconciler:!1};function Ql(t,e){try{var n="",r=e;do n+=yD(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function n0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var H3=typeof WeakMap=="function"?WeakMap:Map;function AP(t,e,n){n=ms(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wp||(wp=!0,hv=r),nv(t,e)},n}function PP(t,e,n){n=ms(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){nv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){nv(t,e),typeof r!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function MS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new H3;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=iI.bind(null,t,e,n),e.then(t,t))}function _S(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function RS(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ms(-1,1),e.tag=2,yo(n,e,1))),n.lanes|=1),t)}var W3=Ms.ReactCurrentOwner,Gn=!1;function En(t,e,n,r){e.child=t===null?sP(e,null,n,r):Jl(e,t.child,n,r)}function DS(t,e,n,r,i){n=n.render;var s=e.ref;return Pl(e,i),r=Cb(t,e,n,r,s,i),n=Eb(),t!==null&&!Gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,As(t,e,i)):(bt&&n&&hb(e),e.flags|=1,En(t,e,r,i),e.child)}function IS(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Db(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,NP(t,e,s,r,i)):(t=Af(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vc,n(o,r)&&t.ref===e.ref)return As(t,e,i)}return e.flags|=1,t=bo(s,r),t.ref=e.ref,t.return=e,e.child=t}function NP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Vc(s,r)&&t.ref===e.ref)if(Gn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Gn=!0);else return e.lanes=t.lanes,As(t,e,i)}return rv(t,e,n,r,i)}function $P(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(yl,ar),ar|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(yl,ar),ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,lt(yl,ar),ar|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,lt(yl,ar),ar|=r;return En(t,e,i,n),e.child}function OP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rv(t,e,n,r,i){var s=Yn(n)?Sa:bn.current;return s=Zl(e,s),Pl(e,i),n=Cb(t,e,n,r,s,i),r=Eb(),t!==null&&!Gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,As(t,e,i)):(bt&&r&&hb(e),e.flags|=1,En(t,e,n,i),e.child)}function LS(t,e,n,r,i){if(Yn(n)){var s=!0;up(e)}else s=!1;if(Pl(e,i),e.stateNode===null)kf(t,e),rP(e,n,r),tv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=jr(u):(u=Yn(n)?Sa:bn.current,u=Zl(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&NS(e,o,r,u),Vs=!1;var h=e.memoizedState;o.state=h,pp(e,r,o,i),l=e.memoizedState,a!==r||h!==l||Zn.current||Vs?(typeof c=="function"&&(ev(e,n,c,r),l=e.memoizedState),(a=Vs||PS(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tP(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Kr(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=jr(l):(l=Yn(n)?Sa:bn.current,l=Zl(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&NS(e,o,r,l),Vs=!1,h=e.memoizedState,o.state=h,pp(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||Zn.current||Vs?(typeof f=="function"&&(ev(e,n,f,r),p=e.memoizedState),(u=Vs||PS(e,n,u,r,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return iv(t,e,n,r,s,i)}function iv(t,e,n,r,i,s){OP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&SS(e,n,!1),As(t,e,s);r=e.stateNode,W3.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Jl(e,t.child,null,s),e.child=Jl(e,null,a,s)):En(t,e,a,s),e.memoizedState=r.state,i&&SS(e,n,!0),e.child}function TP(t){var e=t.stateNode;e.pendingContext?xS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xS(t,e.context,!1),bb(t,e.containerInfo)}function BS(t,e,n,r,i){return Yl(),pb(i),e.flags|=256,En(t,e,n,r),e.child}var sv={dehydrated:null,treeContext:null,retryLane:0};function ov(t){return{baseLanes:t,cachePool:null,transitions:null}}function MP(t,e,n){var r=e.pendingProps,i=At.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),lt(At,i&1),t===null)return qy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zm(o,r,0,null),t=va(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ov(n),e.memoizedState=sv,t):Nb(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return G3(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=bo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=bo(a,s):(s=va(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ov(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=sv,r}return s=t.child,t=s.sibling,r=bo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Nb(t,e){return e=zm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sh(t,e,n,r){return r!==null&&pb(r),Jl(e,t.child,null,n),t=Nb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function G3(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=n0(Error(ie(422))),Sh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=zm({mode:"visible",children:r.children},i,0,null),s=va(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Jl(e,t.child,null,o),e.child.memoizedState=ov(o),e.memoizedState=sv,s);if(!(e.mode&1))return Sh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ie(419)),r=n0(s,r,void 0),Sh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Gn||a){if(r=Jt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Es(t,i),si(r,t,i,-1))}return Rb(),r=n0(Error(ie(421))),Sh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,hr=go(i.nextSibling),mr=e,bt=!0,qr=null,t!==null&&(Nr[$r++]=ds,Nr[$r++]=hs,Nr[$r++]=ka,ds=t.id,hs=t.overflow,ka=e),e=Nb(e,r.children),e.flags|=4096,e)}function zS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qy(t.return,e,n)}function r0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function _P(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(En(t,e,r.children,n),r=At.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zS(t,n,e);else if(t.tag===19)zS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lt(At,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),r0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}r0(e,!0,n,null,s);break;case"together":r0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function As(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ea|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=bo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function K3(t,e,n){switch(e.tag){case 3:TP(e),Yl();break;case 5:oP(e);break;case 1:Yn(e.type)&&up(e);break;case 4:bb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;lt(hp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lt(At,At.current&1),e.flags|=128,null):n&e.child.childLanes?MP(t,e,n):(lt(At,At.current&1),t=As(t,e,n),t!==null?t.sibling:null);lt(At,At.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _P(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(At,At.current),r)break;return null;case 22:case 23:return e.lanes=0,$P(t,e,n)}return As(t,e,n)}var RP,av,DP,IP;RP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};av=function(){};DP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,da(ji.current);var s=null;switch(n){case"input":i=$y(t,i),r=$y(t,r),s=[];break;case"select":i=Ot({},i,{value:void 0}),r=Ot({},r,{value:void 0}),s=[];break;case"textarea":i=My(t,i),r=My(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ap)}Ry(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ic.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ic.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&dt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};IP=function(t,e,n,r){n!==r&&(e.flags|=4)};function ju(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function X3(t,e,n){var r=e.pendingProps;switch(fb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return Yn(e.type)&&lp(),fn(e),null;case 3:return r=e.stateNode,ql(),gt(Zn),gt(bn),Sb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qr!==null&&(mv(qr),qr=null))),av(t,e),fn(e),null;case 5:xb(e);var i=da(Xc.current);if(n=e.type,t!==null&&e.stateNode!=null)DP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return fn(e),null}if(t=da(ji.current),bh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mi]=e,r[Gc]=s,t=(e.mode&1)!==0,n){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(i=0;i<sc.length;i++)dt(sc[i],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":Xx(r,s),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},dt("invalid",r);break;case"textarea":Yx(r,s),dt("invalid",r)}Ry(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wh(r.textContent,a,t),i=["children",""+a]):Ic.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&dt("scroll",r)}switch(n){case"input":dh(r),Zx(r,s,!0);break;case"textarea":dh(r),Jx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ap)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mi]=e,t[Gc]=r,RP(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dy(n,r),n){case"dialog":dt("cancel",t),dt("close",t),i=r;break;case"iframe":case"object":case"embed":dt("load",t),i=r;break;case"video":case"audio":for(i=0;i<sc.length;i++)dt(sc[i],t);i=r;break;case"source":dt("error",t),i=r;break;case"img":case"image":case"link":dt("error",t),dt("load",t),i=r;break;case"details":dt("toggle",t),i=r;break;case"input":Xx(t,r),i=$y(t,r),dt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ot({},r,{value:void 0}),dt("invalid",t);break;case"textarea":Yx(t,r),i=My(t,r),dt("invalid",t);break;default:i=r}Ry(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?hA(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cA(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lc(t,l):typeof l=="number"&&Lc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ic.hasOwnProperty(s)?l!=null&&s==="onScroll"&&dt("scroll",t):l!=null&&qw(t,s,l,o))}switch(n){case"input":dh(t),Zx(t,r,!1);break;case"textarea":dh(t),Jx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Co(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?kl(t,!!r.multiple,s,!1):r.defaultValue!=null&&kl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ap)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)IP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=da(Xc.current),da(ji.current),bh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mi]=e,(s=r.nodeValue!==n)&&(t=mr,t!==null))switch(t.tag){case 3:wh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mi]=e,e.stateNode=r}return fn(e),null;case 13:if(gt(At),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bt&&hr!==null&&e.mode&1&&!(e.flags&128))QA(),Yl(),e.flags|=98560,s=!1;else if(s=bh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ie(317));s[Mi]=e}else Yl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),s=!1}else qr!==null&&(mv(qr),qr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||At.current&1?Ht===0&&(Ht=3):Rb())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return ql(),av(t,e),t===null&&Hc(e.stateNode.containerInfo),fn(e),null;case 10:return yb(e.type._context),fn(e),null;case 17:return Yn(e.type)&&lp(),fn(e),null;case 19:if(gt(At),s=e.memoizedState,s===null)return fn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ju(s,!1);else{if(Ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mp(t),o!==null){for(e.flags|=128,ju(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(At,At.current&1|2),e.child}t=t.sibling}s.tail!==null&&It()>eu&&(e.flags|=128,r=!0,ju(s,!1),e.lanes=4194304)}else{if(!r)if(t=mp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ju(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bt)return fn(e),null}else 2*It()-s.renderingStartTime>eu&&n!==1073741824&&(e.flags|=128,r=!0,ju(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=It(),e.sibling=null,n=At.current,lt(At,r?n&1|2:n&1),e):(fn(e),null);case 22:case 23:return _b(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ar&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function Z3(t,e){switch(fb(e),e.tag){case 1:return Yn(e.type)&&lp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ql(),gt(Zn),gt(bn),Sb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xb(e),null;case 13:if(gt(At),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Yl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(At),null;case 4:return ql(),null;case 10:return yb(e.type._context),null;case 22:case 23:return _b(),null;case 24:return null;default:return null}}var kh=!1,gn=!1,Y3=typeof WeakSet=="function"?WeakSet:Set,we=null;function gl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Mt(t,e,r)}else n.current=null}function lv(t,e,n){try{n()}catch(r){Mt(t,e,r)}}var jS=!1;function J3(t,e){if(Wy=ip,t=jA(),db(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gy={focusedElem:t,selectionRange:n},ip=!1,we=e;we!==null;)if(e=we,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,we=t;else for(;we!==null;){e=we;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Kr(e.type,g),b);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(S){Mt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,we=t;break}we=e.return}return p=jS,jS=!1,p}function xc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&lv(e,n,s)}i=i.next}while(i!==r)}}function Lm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LP(t){var e=t.alternate;e!==null&&(t.alternate=null,LP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mi],delete e[Gc],delete e[Zy],delete e[_3],delete e[R3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BP(t){return t.tag===5||t.tag===3||t.tag===4}function FS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ap));else if(r!==4&&(t=t.child,t!==null))for(cv(t,e,n),t=t.sibling;t!==null;)cv(t,e,n),t=t.sibling}function dv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dv(t,e,n),t=t.sibling;t!==null;)dv(t,e,n),t=t.sibling}var en=null,Jr=!1;function Bs(t,e,n){for(n=n.child;n!==null;)zP(t,e,n),n=n.sibling}function zP(t,e,n){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount($m,n)}catch{}switch(n.tag){case 5:gn||gl(n,e);case 6:var r=en,i=Jr;en=null,Bs(t,e,n),en=r,Jr=i,en!==null&&(Jr?(t=en,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):en.removeChild(n.stateNode));break;case 18:en!==null&&(Jr?(t=en,n=n.stateNode,t.nodeType===8?Yg(t.parentNode,n):t.nodeType===1&&Yg(t,n),Fc(t)):Yg(en,n.stateNode));break;case 4:r=en,i=Jr,en=n.stateNode.containerInfo,Jr=!0,Bs(t,e,n),en=r,Jr=i;break;case 0:case 11:case 14:case 15:if(!gn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&lv(n,e,o),i=i.next}while(i!==r)}Bs(t,e,n);break;case 1:if(!gn&&(gl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Mt(n,e,a)}Bs(t,e,n);break;case 21:Bs(t,e,n);break;case 22:n.mode&1?(gn=(r=gn)||n.memoizedState!==null,Bs(t,e,n),gn=r):Bs(t,e,n);break;default:Bs(t,e,n)}}function US(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Y3),e.forEach(function(r){var i=oI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:en=a.stateNode,Jr=!1;break e;case 3:en=a.stateNode.containerInfo,Jr=!0;break e;case 4:en=a.stateNode.containerInfo,Jr=!0;break e}a=a.return}if(en===null)throw Error(ie(160));zP(s,o,i),en=null,Jr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Mt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jP(e,t),e=e.sibling}function jP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wr(e,t),wi(t),r&4){try{xc(3,t,t.return),Lm(3,t)}catch(g){Mt(t,t.return,g)}try{xc(5,t,t.return)}catch(g){Mt(t,t.return,g)}}break;case 1:Wr(e,t),wi(t),r&512&&n!==null&&gl(n,n.return);break;case 5:if(Wr(e,t),wi(t),r&512&&n!==null&&gl(n,n.return),t.flags&32){var i=t.stateNode;try{Lc(i,"")}catch(g){Mt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&aA(i,s),Dy(a,o);var u=Dy(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?hA(i,d):c==="dangerouslySetInnerHTML"?cA(i,d):c==="children"?Lc(i,d):qw(i,c,d,u)}switch(a){case"input":Oy(i,s);break;case"textarea":lA(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?kl(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?kl(i,!!s.multiple,s.defaultValue,!0):kl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Gc]=s}catch(g){Mt(t,t.return,g)}}break;case 6:if(Wr(e,t),wi(t),r&4){if(t.stateNode===null)throw Error(ie(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Mt(t,t.return,g)}}break;case 3:if(Wr(e,t),wi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fc(e.containerInfo)}catch(g){Mt(t,t.return,g)}break;case 4:Wr(e,t),wi(t);break;case 13:Wr(e,t),wi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Tb=It())),r&4&&US(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(gn=(u=gn)||c,Wr(e,t),gn=u):Wr(e,t),wi(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(we=t,c=t.child;c!==null;){for(d=we=c;we!==null;){switch(h=we,f=h.child,h.tag){case 0:case 11:case 14:case 15:xc(4,h,h.return);break;case 1:gl(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Mt(r,n,g)}}break;case 5:gl(h,h.return);break;case 22:if(h.memoizedState!==null){HS(d);continue}}f!==null?(f.return=h,we=f):HS(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=dA("display",o))}catch(g){Mt(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Mt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wr(e,t),wi(t),r&4&&US(t);break;case 21:break;default:Wr(e,t),wi(t)}}function wi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BP(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lc(i,""),r.flags&=-33);var s=FS(t);dv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=FS(t);cv(t,a,o);break;default:throw Error(ie(161))}}catch(l){Mt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function q3(t,e,n){we=t,FP(t)}function FP(t,e,n){for(var r=(t.mode&1)!==0;we!==null;){var i=we,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||kh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||gn;a=kh;var u=gn;if(kh=o,(gn=l)&&!u)for(we=i;we!==null;)o=we,l=o.child,o.tag===22&&o.memoizedState!==null?WS(i):l!==null?(l.return=o,we=l):WS(i);for(;s!==null;)we=s,FP(s),s=s.sibling;we=i,kh=a,gn=u}VS(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,we=s):VS(t)}}function VS(t){for(;we!==null;){var e=we;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gn||Lm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&AS(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}AS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Fc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}gn||e.flags&512&&uv(e)}catch(h){Mt(e,e.return,h)}}if(e===t){we=null;break}if(n=e.sibling,n!==null){n.return=e.return,we=n;break}we=e.return}}function HS(t){for(;we!==null;){var e=we;if(e===t){we=null;break}var n=e.sibling;if(n!==null){n.return=e.return,we=n;break}we=e.return}}function WS(t){for(;we!==null;){var e=we;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lm(4,e)}catch(l){Mt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Mt(e,i,l)}}var s=e.return;try{uv(e)}catch(l){Mt(e,s,l)}break;case 5:var o=e.return;try{uv(e)}catch(l){Mt(e,o,l)}}}catch(l){Mt(e,e.return,l)}if(e===t){we=null;break}var a=e.sibling;if(a!==null){a.return=e.return,we=a;break}we=e.return}}var Q3=Math.ceil,vp=Ms.ReactCurrentDispatcher,$b=Ms.ReactCurrentOwner,Dr=Ms.ReactCurrentBatchConfig,Xe=0,Jt=null,Lt=null,un=0,ar=0,yl=zo(0),Ht=0,qc=null,Ea=0,Bm=0,Ob=0,Sc=null,Hn=null,Tb=0,eu=1/0,Yi=null,wp=!1,hv=null,vo=null,Ch=!1,oo=null,bp=0,kc=0,fv=null,Cf=-1,Ef=0;function On(){return Xe&6?It():Cf!==-1?Cf:Cf=It()}function wo(t){return t.mode&1?Xe&2&&un!==0?un&-un:I3.transition!==null?(Ef===0&&(Ef=CA()),Ef):(t=et,t!==0||(t=window.event,t=t===void 0?16:TA(t.type)),t):1}function si(t,e,n,r){if(50<kc)throw kc=0,fv=null,Error(ie(185));zd(t,n,r),(!(Xe&2)||t!==Jt)&&(t===Jt&&(!(Xe&2)&&(Bm|=n),Ht===4&&Ys(t,un)),Jn(t,r),n===1&&Xe===0&&!(e.mode&1)&&(eu=It()+500,Rm&&jo()))}function Jn(t,e){var n=t.callbackNode;ID(t,e);var r=rp(t,t===Jt?un:0);if(r===0)n!==null&&eS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&eS(n),e===1)t.tag===0?D3(GS.bind(null,t)):YA(GS.bind(null,t)),T3(function(){!(Xe&6)&&jo()}),n=null;else{switch(EA(r)){case 1:n=rb;break;case 4:n=SA;break;case 16:n=np;break;case 536870912:n=kA;break;default:n=np}n=ZP(n,UP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function UP(t,e){if(Cf=-1,Ef=0,Xe&6)throw Error(ie(327));var n=t.callbackNode;if(Nl()&&t.callbackNode!==n)return null;var r=rp(t,t===Jt?un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xp(t,r);else{e=r;var i=Xe;Xe|=2;var s=HP();(Jt!==t||un!==e)&&(Yi=null,eu=It()+500,ya(t,e));do try{nI();break}catch(a){VP(t,a)}while(1);gb(),vp.current=s,Xe=i,Lt!==null?e=0:(Jt=null,un=0,e=Ht)}if(e!==0){if(e===2&&(i=jy(t),i!==0&&(r=i,e=pv(t,i))),e===1)throw n=qc,ya(t,0),Ys(t,r),Jn(t,It()),n;if(e===6)Ys(t,r);else{if(i=t.current.alternate,!(r&30)&&!eI(i)&&(e=xp(t,r),e===2&&(s=jy(t),s!==0&&(r=s,e=pv(t,s))),e===1))throw n=qc,ya(t,0),Ys(t,r),Jn(t,It()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:ta(t,Hn,Yi);break;case 3:if(Ys(t,r),(r&130023424)===r&&(e=Tb+500-It(),10<e)){if(rp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){On(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Xy(ta.bind(null,t,Hn,Yi),e);break}ta(t,Hn,Yi);break;case 4:if(Ys(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ii(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=It()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Q3(r/1960))-r,10<r){t.timeoutHandle=Xy(ta.bind(null,t,Hn,Yi),r);break}ta(t,Hn,Yi);break;case 5:ta(t,Hn,Yi);break;default:throw Error(ie(329))}}}return Jn(t,It()),t.callbackNode===n?UP.bind(null,t):null}function pv(t,e){var n=Sc;return t.current.memoizedState.isDehydrated&&(ya(t,e).flags|=256),t=xp(t,e),t!==2&&(e=Hn,Hn=n,e!==null&&mv(e)),t}function mv(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function eI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ci(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ys(t,e){for(e&=~Ob,e&=~Bm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ii(e),r=1<<n;t[n]=-1,e&=~r}}function GS(t){if(Xe&6)throw Error(ie(327));Nl();var e=rp(t,0);if(!(e&1))return Jn(t,It()),null;var n=xp(t,e);if(t.tag!==0&&n===2){var r=jy(t);r!==0&&(e=r,n=pv(t,r))}if(n===1)throw n=qc,ya(t,0),Ys(t,e),Jn(t,It()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ta(t,Hn,Yi),Jn(t,It()),null}function Mb(t,e){var n=Xe;Xe|=1;try{return t(e)}finally{Xe=n,Xe===0&&(eu=It()+500,Rm&&jo())}}function Aa(t){oo!==null&&oo.tag===0&&!(Xe&6)&&Nl();var e=Xe;Xe|=1;var n=Dr.transition,r=et;try{if(Dr.transition=null,et=1,t)return t()}finally{et=r,Dr.transition=n,Xe=e,!(Xe&6)&&jo()}}function _b(){ar=yl.current,gt(yl)}function ya(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,O3(n)),Lt!==null)for(n=Lt.return;n!==null;){var r=n;switch(fb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lp();break;case 3:ql(),gt(Zn),gt(bn),Sb();break;case 5:xb(r);break;case 4:ql();break;case 13:gt(At);break;case 19:gt(At);break;case 10:yb(r.type._context);break;case 22:case 23:_b()}n=n.return}if(Jt=t,Lt=t=bo(t.current,null),un=ar=e,Ht=0,qc=null,Ob=Bm=Ea=0,Hn=Sc=null,ca!==null){for(e=0;e<ca.length;e++)if(n=ca[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ca=null}return t}function VP(t,e){do{var n=Lt;try{if(gb(),xf.current=yp,gp){for(var r=Nt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gp=!1}if(Ca=0,Xt=Ft=Nt=null,bc=!1,Zc=0,$b.current=null,n===null||n.return===null){Ht=1,qc=e,Lt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=un,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=_S(o);if(f!==null){f.flags&=-257,RS(f,o,a,s,e),f.mode&1&&MS(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){MS(s,u,e),Rb();break e}l=Error(ie(426))}}else if(bt&&a.mode&1){var b=_S(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),RS(b,o,a,s,e),pb(Ql(l,a));break e}}s=l=Ql(l,a),Ht!==4&&(Ht=2),Sc===null?Sc=[s]:Sc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=AP(s,l,e);ES(s,m);break e;case 1:a=l;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(vo===null||!vo.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=PP(s,a,e);ES(s,S);break e}}s=s.return}while(s!==null)}GP(n)}catch(C){e=C,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(1)}function HP(){var t=vp.current;return vp.current=yp,t===null?yp:t}function Rb(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Jt===null||!(Ea&268435455)&&!(Bm&268435455)||Ys(Jt,un)}function xp(t,e){var n=Xe;Xe|=2;var r=HP();(Jt!==t||un!==e)&&(Yi=null,ya(t,e));do try{tI();break}catch(i){VP(t,i)}while(1);if(gb(),Xe=n,vp.current=r,Lt!==null)throw Error(ie(261));return Jt=null,un=0,Ht}function tI(){for(;Lt!==null;)WP(Lt)}function nI(){for(;Lt!==null&&!PD();)WP(Lt)}function WP(t){var e=XP(t.alternate,t,ar);t.memoizedProps=t.pendingProps,e===null?GP(t):Lt=e,$b.current=null}function GP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Z3(n,e),n!==null){n.flags&=32767,Lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ht=6,Lt=null;return}}else if(n=X3(n,e,ar),n!==null){Lt=n;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=t}while(e!==null);Ht===0&&(Ht=5)}function ta(t,e,n){var r=et,i=Dr.transition;try{Dr.transition=null,et=1,rI(t,e,n,r)}finally{Dr.transition=i,et=r}return null}function rI(t,e,n,r){do Nl();while(oo!==null);if(Xe&6)throw Error(ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(LD(t,s),t===Jt&&(Lt=Jt=null,un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ch||(Ch=!0,ZP(np,function(){return Nl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dr.transition,Dr.transition=null;var o=et;et=1;var a=Xe;Xe|=4,$b.current=null,J3(t,n),jP(n,t),k3(Gy),ip=!!Wy,Gy=Wy=null,t.current=n,q3(n),ND(),Xe=a,et=o,Dr.transition=s}else t.current=n;if(Ch&&(Ch=!1,oo=t,bp=i),s=t.pendingLanes,s===0&&(vo=null),TD(n.stateNode),Jn(t,It()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wp)throw wp=!1,t=hv,hv=null,t;return bp&1&&t.tag!==0&&Nl(),s=t.pendingLanes,s&1?t===fv?kc++:(kc=0,fv=t):kc=0,jo(),null}function Nl(){if(oo!==null){var t=EA(bp),e=Dr.transition,n=et;try{if(Dr.transition=null,et=16>t?16:t,oo===null)var r=!1;else{if(t=oo,oo=null,bp=0,Xe&6)throw Error(ie(331));var i=Xe;for(Xe|=4,we=t.current;we!==null;){var s=we,o=s.child;if(we.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(we=u;we!==null;){var c=we;switch(c.tag){case 0:case 11:case 15:xc(8,c,s)}var d=c.child;if(d!==null)d.return=c,we=d;else for(;we!==null;){c=we;var h=c.sibling,f=c.return;if(LP(c),c===u){we=null;break}if(h!==null){h.return=f,we=h;break}we=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}we=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,we=o;else e:for(;we!==null;){if(s=we,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xc(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,we=m;break e}we=s.return}}var v=t.current;for(we=v;we!==null;){o=we;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,we=w;else e:for(o=v;we!==null;){if(a=we,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Lm(9,a)}}catch(C){Mt(a,a.return,C)}if(a===o){we=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,we=S;break e}we=a.return}}if(Xe=i,jo(),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot($m,t)}catch{}r=!0}return r}finally{et=n,Dr.transition=e}}return!1}function KS(t,e,n){e=Ql(n,e),e=AP(t,e,1),t=yo(t,e,1),e=On(),t!==null&&(zd(t,1,e),Jn(t,e))}function Mt(t,e,n){if(t.tag===3)KS(t,t,n);else for(;e!==null;){if(e.tag===3){KS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vo===null||!vo.has(r))){t=Ql(n,t),t=PP(e,t,1),e=yo(e,t,1),t=On(),e!==null&&(zd(e,1,t),Jn(e,t));break}}e=e.return}}function iI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=On(),t.pingedLanes|=t.suspendedLanes&n,Jt===t&&(un&n)===n&&(Ht===4||Ht===3&&(un&130023424)===un&&500>It()-Tb?ya(t,0):Ob|=n),Jn(t,e)}function KP(t,e){e===0&&(t.mode&1?(e=ph,ph<<=1,!(ph&130023424)&&(ph=4194304)):e=1);var n=On();t=Es(t,e),t!==null&&(zd(t,e,n),Jn(t,n))}function sI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),KP(t,n)}function oI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),KP(t,n)}var XP;XP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zn.current)Gn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gn=!1,K3(t,e,n);Gn=!!(t.flags&131072)}else Gn=!1,bt&&e.flags&1048576&&JA(e,dp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kf(t,e),t=e.pendingProps;var i=Zl(e,bn.current);Pl(e,n),i=Cb(null,e,r,t,i,n);var s=Eb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yn(r)?(s=!0,up(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wb(e),i.updater=Dm,e.stateNode=i,i._reactInternals=e,tv(e,r,t,n),e=iv(null,e,r,!0,s,n)):(e.tag=0,bt&&s&&hb(e),En(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(kf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lI(r),t=Kr(r,t),i){case 0:e=rv(null,e,r,t,n);break e;case 1:e=LS(null,e,r,t,n);break e;case 11:e=DS(null,e,r,t,n);break e;case 14:e=IS(null,e,r,Kr(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kr(r,i),rv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kr(r,i),LS(t,e,r,i,n);case 3:e:{if(TP(e),t===null)throw Error(ie(387));r=e.pendingProps,s=e.memoizedState,i=s.element,tP(t,e),pp(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ql(Error(ie(423)),e),e=BS(t,e,r,n,i);break e}else if(r!==i){i=Ql(Error(ie(424)),e),e=BS(t,e,r,n,i);break e}else for(hr=go(e.stateNode.containerInfo.firstChild),mr=e,bt=!0,qr=null,n=sP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yl(),r===i){e=As(t,e,n);break e}En(t,e,r,n)}e=e.child}return e;case 5:return oP(e),t===null&&qy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ky(r,i)?o=null:s!==null&&Ky(r,s)&&(e.flags|=32),OP(t,e),En(t,e,o,n),e.child;case 6:return t===null&&qy(e),null;case 13:return MP(t,e,n);case 4:return bb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Jl(e,null,r,n):En(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kr(r,i),DS(t,e,r,i,n);case 7:return En(t,e,e.pendingProps,n),e.child;case 8:return En(t,e,e.pendingProps.children,n),e.child;case 12:return En(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,lt(hp,r._currentValue),r._currentValue=o,s!==null)if(ci(s.value,o)){if(s.children===i.children&&!Zn.current){e=As(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ms(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ie(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}En(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Pl(e,n),i=jr(i),r=r(i),e.flags|=1,En(t,e,r,n),e.child;case 14:return r=e.type,i=Kr(r,e.pendingProps),i=Kr(r.type,i),IS(t,e,r,i,n);case 15:return NP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kr(r,i),kf(t,e),e.tag=1,Yn(r)?(t=!0,up(e)):t=!1,Pl(e,n),rP(e,r,i),tv(e,r,i,n),iv(null,e,r,!0,t,n);case 19:return _P(t,e,n);case 22:return $P(t,e,n)}throw Error(ie(156,e.tag))};function ZP(t,e){return xA(t,e)}function aI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(t,e,n,r){return new aI(t,e,n,r)}function Db(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lI(t){if(typeof t=="function")return Db(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eb)return 11;if(t===tb)return 14}return 2}function bo(t,e){var n=t.alternate;return n===null?(n=Mr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Af(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Db(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case al:return va(n.children,i,s,e);case Qw:o=8,i|=8;break;case Ey:return t=Mr(12,n,e,i|2),t.elementType=Ey,t.lanes=s,t;case Ay:return t=Mr(13,n,e,i),t.elementType=Ay,t.lanes=s,t;case Py:return t=Mr(19,n,e,i),t.elementType=Py,t.lanes=s,t;case iA:return zm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nA:o=10;break e;case rA:o=9;break e;case eb:o=11;break e;case tb:o=14;break e;case Us:o=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=Mr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function va(t,e,n,r){return t=Mr(7,t,r,e),t.lanes=n,t}function zm(t,e,n,r){return t=Mr(22,t,r,e),t.elementType=iA,t.lanes=n,t.stateNode={isHidden:!1},t}function i0(t,e,n){return t=Mr(6,t,null,e),t.lanes=n,t}function s0(t,e,n){return e=Mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zg(0),this.expirationTimes=zg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ib(t,e,n,r,i,s,o,a,l){return t=new uI(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wb(s),t}function cI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ol,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function YP(t){if(!t)return Eo;t=t._reactInternals;e:{if(za(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(Yn(n))return ZA(t,n,e)}return e}function JP(t,e,n,r,i,s,o,a,l){return t=Ib(n,r,!0,t,i,s,o,a,l),t.context=YP(null),n=t.current,r=On(),i=wo(n),s=ms(r,i),s.callback=e??null,yo(n,s,i),t.current.lanes=i,zd(t,i,r),Jn(t,r),t}function jm(t,e,n,r){var i=e.current,s=On(),o=wo(i);return n=YP(n),e.context===null?e.context=n:e.pendingContext=n,e=ms(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yo(i,e,o),t!==null&&(si(t,i,o,s),bf(t,i,o)),o}function Sp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lb(t,e){XS(t,e),(t=t.alternate)&&XS(t,e)}function dI(){return null}var qP=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bb(t){this._internalRoot=t}Fm.prototype.render=Bb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));jm(t,e,null,null)};Fm.prototype.unmount=Bb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Aa(function(){jm(null,t,null,null)}),e[Cs]=null}};function Fm(t){this._internalRoot=t}Fm.prototype.unstable_scheduleHydration=function(t){if(t){var e=NA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zs.length&&e!==0&&e<Zs[n].priority;n++);Zs.splice(n,0,t),n===0&&OA(t)}};function zb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Um(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ZS(){}function hI(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Sp(o);s.call(u)}}var o=JP(e,r,t,0,null,!1,!1,"",ZS);return t._reactRootContainer=o,t[Cs]=o.current,Hc(t.nodeType===8?t.parentNode:t),Aa(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Sp(l);a.call(u)}}var l=Ib(t,0,!1,null,null,!1,!1,"",ZS);return t._reactRootContainer=l,t[Cs]=l.current,Hc(t.nodeType===8?t.parentNode:t),Aa(function(){jm(e,l,n,r)}),l}function Vm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Sp(o);a.call(l)}}jm(e,o,t,i)}else o=hI(n,e,t,i,r);return Sp(o)}AA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ic(e.pendingLanes);n!==0&&(ib(e,n|1),Jn(e,It()),!(Xe&6)&&(eu=It()+500,jo()))}break;case 13:Aa(function(){var r=Es(t,1);if(r!==null){var i=On();si(r,t,1,i)}}),Lb(t,1)}};sb=function(t){if(t.tag===13){var e=Es(t,134217728);if(e!==null){var n=On();si(e,t,134217728,n)}Lb(t,134217728)}};PA=function(t){if(t.tag===13){var e=wo(t),n=Es(t,e);if(n!==null){var r=On();si(n,t,e,r)}Lb(t,e)}};NA=function(){return et};$A=function(t,e){var n=et;try{return et=t,e()}finally{et=n}};Ly=function(t,e,n){switch(e){case"input":if(Oy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_m(r);if(!i)throw Error(ie(90));oA(r),Oy(r,i)}}}break;case"textarea":lA(t,n);break;case"select":e=n.value,e!=null&&kl(t,!!n.multiple,e,!1)}};mA=Mb;gA=Aa;var fI={usingClientEntryPoint:!1,Events:[Fd,dl,_m,fA,pA,Mb]},Fu={findFiberByHostInstance:ua,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},pI={bundleType:Fu.bundleType,version:Fu.version,rendererPackageName:Fu.rendererPackageName,rendererConfig:Fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wA(t),t===null?null:t.stateNode},findFiberByHostInstance:Fu.findFiberByHostInstance||dI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{$m=Eh.inject(pI),zi=Eh}catch{}}yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fI;yr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zb(e))throw Error(ie(200));return cI(t,e,null,n)};yr.createRoot=function(t,e){if(!zb(t))throw Error(ie(299));var n=!1,r="",i=qP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ib(t,1,!1,null,null,n,!1,r,i),t[Cs]=e.current,Hc(t.nodeType===8?t.parentNode:t),new Bb(e)};yr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=wA(e),t=t===null?null:t.stateNode,t};yr.flushSync=function(t){return Aa(t)};yr.hydrate=function(t,e,n){if(!Um(e))throw Error(ie(200));return Vm(null,t,e,!0,n)};yr.hydrateRoot=function(t,e,n){if(!zb(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JP(e,null,t,1,n??null,i,!1,s,o),t[Cs]=e.current,Hc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fm(e)};yr.render=function(t,e,n){if(!Um(e))throw Error(ie(200));return Vm(null,t,e,!1,n)};yr.unmountComponentAtNode=function(t){if(!Um(t))throw Error(ie(40));return t._reactRootContainer?(Aa(function(){Vm(null,null,t,!1,function(){t._reactRootContainer=null,t[Cs]=null})}),!0):!1};yr.unstable_batchedUpdates=Mb;yr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Um(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return Vm(t,e,n,!1,r)};yr.version="18.2.0-next-9e3b772b8-20220608";function QP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QP)}catch(t){console.error(t)}}QP(),J2.exports=yr;var Fo=J2.exports;const eN=xu(Fo);var YS=Fo;ky.createRoot=YS.createRoot,ky.hydrateRoot=YS.hydrateRoot;function mI(t,{insertAt:e}={}){if(!t||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}mI(`[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 6px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:-3px;margin-right:4px}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:-1px}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:auto;border:none;cursor:pointer;outline:none;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:auto}[data-sonner-toast] [data-cancel]{color:var(--color);background:var(--border-color)}[data-sonner-toast] [data-close-button]{position:absolute;left:0;top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:translate(-35%,-35%);border-radius:50%;opacity:0;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]{opacity:1}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}
`);var gI=t=>{switch(t){case"success":return wI;case"error":return bI;default:return null}},yI=Array(12).fill(0),vI=({visible:t})=>de.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},de.createElement("div",{className:"sonner-spinner"},yI.map((e,n)=>de.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),wI=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),bI=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),gv=0,xI=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:gv++;return this.toasts.find(s=>s.id===i)?this.toasts=this.toasts.map(s=>s.id===i?(this.publish({...s,...t,id:i,title:n}),{...s,...t,id:i,title:n}):s):this.addToast({title:n,...r,id:i}),i},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.promise=(t,e)=>{let n=this.create({...e,promise:t,type:"loading",message:e.loading});return(t instanceof Promise?t:t()).then(r=>{let i=typeof e.success=="function"?e.success(r):e.success;this.create({id:n,type:"success",message:i})}).catch(r=>{let i=typeof e.error=="function"?e.error(r):e.error;this.create({id:n,type:"error",message:i})}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||gv++;this.publish({jsx:t(n),id:n,...e})},this.subscribers=[],this.toasts=[]}},Hs=new xI,SI=(t,e)=>{let n=(e==null?void 0:e.id)||gv++;return Hs.addToast({title:t,...e,id:n}),n},kI=SI,tu=Object.assign(kI,{success:Hs.success,error:Hs.error,custom:Hs.custom,message:Hs.message,promise:Hs.promise,dismiss:Hs.dismiss}),CI=3,EI="32px",AI=4e3,PI=356,tN=14,NI=20,$I=200,OI=t=>{let{invert:e,toast:n,interacting:r,setHeights:i,visibleToasts:s,heights:o,index:a,toasts:l,expanded:u,removeToast:c,closeButton:d,style:h,className:f="",descriptionClassName:p="",duration:g,position:b,expandByDefault:m}=t,[v,w]=de.useState(!1),[S,C]=de.useState(!1),[E,$]=de.useState(!1),[A,O]=de.useState(!1),[_,T]=de.useState(0),[z,j]=de.useState(0),B=de.useRef(null),K=a===0,Z=a+1<=s,Q=n.type,V=n.className||"",M=n.descriptionClassName||"",U=de.useMemo(()=>o.findIndex(W=>W.toastId===n.id)||0,[o,n.id]),J=de.useMemo(()=>n.duration||g||AI,[n.duration,g]),ne=de.useRef(0),me=de.useRef(0),H=de.useRef(J),I=de.useRef(0),G=de.useRef(null),[k,N]=b.split("-"),D=de.useMemo(()=>o.reduce((W,Y,ee)=>ee>=U?W:W+Y.height,0),[o,U]),R=n.invert||e,F=Q==="loading";me.current=de.useMemo(()=>U*tN+D,[U,D]),de.useEffect(()=>{w(!0)},[]),de.useLayoutEffect(()=>{if(!v)return;let W=B.current,Y=W.style.height;W.style.height="auto";let ee=W.getBoundingClientRect().height;W.style.height=Y,j(ee),i(Oe=>Oe.find(he=>he.toastId===n.id)?Oe.map(he=>he.toastId===n.id?{...he,height:ee}:he):[{toastId:n.id,height:ee},...Oe])},[v,n.title,n.description,i,n.id]);let X=de.useCallback(()=>{C(!0),T(me.current),i(W=>W.filter(Y=>Y.toastId!==n.id)),setTimeout(()=>{c(n)},$I)},[n,c,i,me]);return de.useEffect(()=>{if(n.promise&&Q==="loading"||n.duration===1/0)return;let W;return u||r?(()=>{if(I.current<ne.current){let Y=new Date().getTime()-ne.current;H.current=H.current-Y}I.current=new Date().getTime()})():(ne.current=new Date().getTime(),W=setTimeout(()=>{var Y;(Y=n.onAutoClose)==null||Y.call(n,n),X()},H.current)),()=>clearTimeout(W)},[u,r,m,n,J,X,n.promise,Q]),de.useEffect(()=>{let W=B.current;if(W){let Y=W.getBoundingClientRect().height;return j(Y),i(ee=>[{toastId:n.id,height:Y},...ee]),()=>i(ee=>ee.filter(Oe=>Oe.toastId!==n.id))}},[i,n.id]),de.useEffect(()=>{n.delete&&X()},[X,n.delete]),de.createElement("li",{"aria-live":n.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:B,className:f+" "+V,"data-sonner-toast":"","data-styled":!n.jsx,"data-mounted":v,"data-promise":!!n.promise,"data-removed":S,"data-visible":Z,"data-y-position":k,"data-x-position":N,"data-index":a,"data-front":K,"data-swiping":E,"data-type":Q,"data-invert":R,"data-swipe-out":A,"data-expanded":!!(u||m&&v),style:{"--index":a,"--toasts-before":a,"--z-index":l.length-a,"--offset":`${S?_:me.current}px`,"--initial-height":m?"auto":`${z}px`,...h,...n.style},onPointerDown:W=>{F||(T(me.current),W.target.setPointerCapture(W.pointerId),W.target.tagName!=="BUTTON"&&($(!0),G.current={x:W.clientX,y:W.clientY}))},onPointerUp:()=>{var W,Y,ee;if(A)return;G.current=null;let Oe=Number(((W=B.current)==null?void 0:W.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(Oe)>=NI){T(me.current),(Y=n.onDismiss)==null||Y.call(n,n),X(),O(!0);return}(ee=B.current)==null||ee.style.setProperty("--swipe-amount","0px"),$(!1)},onPointerMove:W=>{var Y;if(!G.current)return;let ee=W.clientY-G.current.y,Oe=W.clientX-G.current.x,he=(k==="top"?Math.min:Math.max)(0,ee),Te=W.pointerType==="touch"?10:2;Math.abs(he)>Te?(Y=B.current)==null||Y.style.setProperty("--swipe-amount",`${ee}px`):Math.abs(Oe)>Te&&(G.current=null)}},d&&!n.jsx?de.createElement("button",{"aria-label":"Close toast","data-disabled":F,"data-close-button":!0,onClick:F?void 0:()=>{var W;X(),(W=n.onDismiss)==null||W.call(n,n)}},de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},de.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),de.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,n.jsx||de.isValidElement(n.title)?n.jsx||n.title:de.createElement(de.Fragment,null,Q||n.icon||n.promise?de.createElement("div",{"data-icon":""},n.promise?de.createElement(vI,{visible:Q==="loading"}):null,n.icon||gI(Q)):null,de.createElement("div",{"data-content":""},de.createElement("div",{"data-title":""},n.title),n.description?de.createElement("div",{"data-description":"",className:p+M},n.description):null),n.cancel?de.createElement("button",{"data-button":!0,"data-cancel":!0,onClick:()=>{var W;X(),(W=n.cancel)!=null&&W.onClick&&n.cancel.onClick()}},n.cancel.label):null,n.action?de.createElement("button",{"data-button":"",onClick:W=>{var Y;(Y=n.action)==null||Y.onClick(W),!W.defaultPrevented&&X()}},n.action.label):null))},TI=t=>{var e;let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,theme:u="light",richColors:c,duration:d,style:h,visibleToasts:f=CI,toastOptions:p}=t,[g,b]=de.useState([]),[m,v]=de.useState([]),[w,S]=de.useState(!1),[C,E]=de.useState(!1),[$,A]=de.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),[O,_]=r.split("-"),T=de.useRef(null),z=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=de.useCallback(B=>b(K=>K.filter(({id:Z})=>Z!==B.id)),[]);return de.useEffect(()=>Hs.subscribe(B=>{if(B.dismiss){b(K=>K.map(Z=>Z.id===B.id?{...Z,delete:!0}:Z));return}setTimeout(()=>{eN.flushSync(()=>{b(K=>{let Z=K.findIndex(Q=>Q.id===B.id);return Z!==-1?[...K.slice(0,Z),{...K[Z],...B},...K.slice(Z+1)]:[B,...K]})})})}),[]),de.useEffect(()=>{if(u!=="system"){A(u);return}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{A(B?"dark":"light")})},[u]),de.useEffect(()=>{g.length<=1&&S(!1)},[g]),de.useEffect(()=>{let B=K=>{var Z,Q;i.every(V=>K[V]||K.code===V)&&(S(!0),(Z=T.current)==null||Z.focus()),K.code==="Escape"&&(document.activeElement===T.current||(Q=T.current)!=null&&Q.contains(document.activeElement))&&S(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[i]),g.length?de.createElement("section",{"aria-label":`Notifications ${z}`,tabIndex:-1},de.createElement("ol",{tabIndex:-1,ref:T,className:a,"data-sonner-toaster":!0,"data-theme":$,"data-rich-colors":c,"data-y-position":O,"data-x-position":_,style:{"--front-toast-height":`${(e=m[0])==null?void 0:e.height}px`,"--offset":typeof l=="number"?`${l}px`:l||EI,"--width":`${PI}px`,"--gap":`${tN}px`,...h},onMouseEnter:()=>S(!0),onMouseMove:()=>S(!0),onMouseLeave:()=>{C||S(!1)},onPointerDown:()=>{E(!0)},onPointerUp:()=>E(!1)},g.map((B,K)=>de.createElement(OI,{key:B.id,index:K,toast:B,duration:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:f,closeButton:o,interacting:C,position:r,style:p==null?void 0:p.style,removeToast:j,toasts:g,heights:m,setHeights:v,expandByDefault:s,expanded:w})))):null};function le(){return le=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},le.apply(this,arguments)}function Ce(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Xi(t,e=[]){let n=[];function r(s,o){const a=y.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,g=(h==null?void 0:h[t][l])||a,b=y.useMemo(()=>p,Object.values(p));return y.createElement(g.Provider,{value:b},f)}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=y.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const i=()=>{const s=n.map(o=>y.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,MI(i,...e)]}function MI(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function _I(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Hm(...t){return e=>t.forEach(n=>_I(n,e))}function Qe(...t){return y.useCallback(Hm(...t),t)}const Pa=y.forwardRef((t,e)=>{const{children:n,...r}=t,i=y.Children.toArray(n),s=i.find(DI);if(s){const o=s.props.children,a=i.map(l=>l===s?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:l);return y.createElement(yv,le({},r,{ref:e}),y.isValidElement(o)?y.cloneElement(o,void 0,a):null)}return y.createElement(yv,le({},r,{ref:e}),n)});Pa.displayName="Slot";const yv=y.forwardRef((t,e)=>{const{children:n,...r}=t;return y.isValidElement(n)?y.cloneElement(n,{...II(r,n.props),ref:e?Hm(e,n.ref):n.ref}):y.Children.count(n)>1?y.Children.only(null):null});yv.displayName="SlotClone";const RI=({children:t})=>y.createElement(y.Fragment,null,t);function DI(t){return y.isValidElement(t)&&t.type===RI}function II(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Wm(t){const e=t+"CollectionProvider",[n,r]=Xi(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:g}=f,b=de.useRef(null),m=de.useRef(new Map).current;return de.createElement(i,{scope:p,itemMap:m,collectionRef:b},g)},a=t+"CollectionSlot",l=de.forwardRef((f,p)=>{const{scope:g,children:b}=f,m=s(a,g),v=Qe(p,m.collectionRef);return de.createElement(Pa,{ref:v},b)}),u=t+"CollectionItemSlot",c="data-radix-collection-item",d=de.forwardRef((f,p)=>{const{scope:g,children:b,...m}=f,v=de.useRef(null),w=Qe(p,v),S=s(u,g);return de.useEffect(()=>(S.itemMap.set(v,{ref:v,...m}),()=>void S.itemMap.delete(v))),de.createElement(Pa,{[c]:"",ref:w},b)});function h(f){const p=s(t+"CollectionConsumer",f);return de.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const m=Array.from(b.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((S,C)=>m.indexOf(S.ref.current)-m.indexOf(C.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,r]}const di=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},LI=Zw["useId".toString()]||(()=>{});let BI=0;function Na(t){const[e,n]=y.useState(LI());return di(()=>{t||n(r=>r??String(BI++))},[t]),t||(e?`radix-${e}`:"")}const zI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=zI.reduce((t,e)=>{const n=y.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Pa:e;return y.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),y.createElement(a,le({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function nN(t,e){t&&Fo.flushSync(()=>t.dispatchEvent(e))}function hi(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Ao({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=jI({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=hi(n),l=y.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else i(u)},[s,t,i,a]);return[o,l]}function jI({defaultProp:t,onChange:e}){const n=y.useState(t),[r]=n,i=y.useRef(r),s=hi(e);return y.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const FI=y.createContext(void 0);function Vd(t){const e=y.useContext(FI);return t||e||"ltr"}const o0="rovingFocusGroup.onEntryFocus",UI={bubbles:!1,cancelable:!0},jb="RovingFocusGroup",[vv,rN,VI]=Wm(jb),[HI,Gm]=Xi(jb,[VI]),[WI,GI]=HI(jb),KI=y.forwardRef((t,e)=>y.createElement(vv.Provider,{scope:t.__scopeRovingFocusGroup},y.createElement(vv.Slot,{scope:t.__scopeRovingFocusGroup},y.createElement(XI,le({},t,{ref:e}))))),XI=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,...c}=t,d=y.useRef(null),h=Qe(e,d),f=Vd(s),[p=null,g]=Ao({prop:o,defaultProp:a,onChange:l}),[b,m]=y.useState(!1),v=hi(u),w=rN(n),S=y.useRef(!1),[C,E]=y.useState(0);return y.useEffect(()=>{const $=d.current;if($)return $.addEventListener(o0,v),()=>$.removeEventListener(o0,v)},[v]),y.createElement(WI,{scope:n,orientation:r,dir:f,loop:i,currentTabStopId:p,onItemFocus:y.useCallback($=>g($),[g]),onItemShiftTab:y.useCallback(()=>m(!0),[]),onFocusableItemAdd:y.useCallback(()=>E($=>$+1),[]),onFocusableItemRemove:y.useCallback(()=>E($=>$-1),[])},y.createElement(Je.div,le({tabIndex:b||C===0?-1:0,"data-orientation":r},c,{ref:h,style:{outline:"none",...t.style},onMouseDown:Ce(t.onMouseDown,()=>{S.current=!0}),onFocus:Ce(t.onFocus,$=>{const A=!S.current;if($.target===$.currentTarget&&A&&!b){const O=new CustomEvent(o0,UI);if($.currentTarget.dispatchEvent(O),!O.defaultPrevented){const _=w().filter(K=>K.focusable),T=_.find(K=>K.active),z=_.find(K=>K.id===p),B=[T,z,..._].filter(Boolean).map(K=>K.ref.current);iN(B)}}S.current=!1}),onBlur:Ce(t.onBlur,()=>m(!1))})))}),ZI="RovingFocusGroupItem",YI=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=Na(),l=s||a,u=GI(ZI,n),c=u.currentTabStopId===l,d=rN(n),{onFocusableItemAdd:h,onFocusableItemRemove:f}=u;return y.useEffect(()=>{if(r)return h(),()=>f()},[r,h,f]),y.createElement(vv.ItemSlot,{scope:n,id:l,focusable:r,active:i},y.createElement(Je.span,le({tabIndex:c?0:-1,"data-orientation":u.orientation},o,{ref:e,onMouseDown:Ce(t.onMouseDown,p=>{r?u.onItemFocus(l):p.preventDefault()}),onFocus:Ce(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:Ce(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=QI(p,u.orientation,u.dir);if(g!==void 0){p.preventDefault();let m=d().filter(v=>v.focusable).map(v=>v.ref.current);if(g==="last")m.reverse();else if(g==="prev"||g==="next"){g==="prev"&&m.reverse();const v=m.indexOf(p.currentTarget);m=u.loop?eL(m,v+1):m.slice(v+1)}setTimeout(()=>iN(m))}})})))}),JI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qI(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function QI(t,e,n){const r=qI(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return JI[r]}function iN(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function eL(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const sN=KI,oN=YI;function tL(t,e){return y.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const Uo=t=>{const{present:e,children:n}=t,r=nL(e),i=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),s=Qe(r.ref,i.ref);return typeof n=="function"||r.isPresent?y.cloneElement(i,{ref:s}):null};Uo.displayName="Presence";function nL(t){const[e,n]=y.useState(),r=y.useRef({}),i=y.useRef(t),s=y.useRef("none"),o=t?"mounted":"unmounted",[a,l]=tL(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Ah(r.current);s.current=a==="mounted"?u:"none"},[a]),di(()=>{const u=r.current,c=i.current;if(c!==t){const h=s.current,f=Ah(u);t?l("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&h!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),di(()=>{if(e){const u=d=>{const f=Ah(r.current).includes(d.animationName);d.target===e&&f&&Fo.flushSync(()=>l("ANIMATION_END"))},c=d=>{d.target===e&&(s.current=Ah(r.current))};return e.addEventListener("animationstart",c),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",c),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Ah(t){return(t==null?void 0:t.animationName)||"none"}const aN="Tabs",[rL,IY]=Xi(aN,[Gm]),lN=Gm(),[iL,Fb]=rL(aN),sL=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,c=Vd(a),[d,h]=Ao({prop:r,onChange:i,defaultProp:s});return y.createElement(iL,{scope:n,baseId:Na(),value:d,onValueChange:h,orientation:o,dir:c,activationMode:l},y.createElement(Je.div,le({dir:c,"data-orientation":o},u,{ref:e})))}),oL="TabsList",aL=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=Fb(oL,n),o=lN(n);return y.createElement(sN,le({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),y.createElement(Je.div,le({role:"tablist","aria-orientation":s.orientation},i,{ref:e})))}),lL="TabsTrigger",JS=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=Fb(lL,n),a=lN(n),l=uN(o.baseId,r),u=cN(o.baseId,r),c=r===o.value;return y.createElement(oN,le({asChild:!0},a,{focusable:!i,active:c}),y.createElement(Je.button,le({type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:e,onMouseDown:Ce(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ce(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ce(t.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!i&&d&&o.onValueChange(r)})})))}),uL="TabsContent",a0=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=Fb(uL,n),l=uN(a.baseId,r),u=cN(a.baseId,r),c=r===a.value,d=y.useRef(c);return y.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),y.createElement(Uo,{present:i||c},({present:h})=>y.createElement(Je.div,le({"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:u,tabIndex:0},o,{ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0}}),h&&s))});function uN(t,e){return`${t}-trigger-${e}`}function cN(t,e){return`${t}-content-${e}`}let cL=0;function Ae(t,e){const n=`atom${++cL}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=i=>i(r),r.write=(i,s,o)=>s(r,typeof o=="function"?o(i(r)):o)),e&&(r.write=e),r}const qS=t=>"init"in t,QS=t=>!!t.write,kp=new WeakMap,dL=(t,e)=>{kp.set(t,e),t.catch(()=>{}).finally(()=>kp.delete(t))},ek=(t,e)=>{const n=kp.get(t);n&&(kp.delete(t),n(e))},tk=(t,e)=>{t.status="fulfilled",t.value=e},nk=(t,e)=>{t.status="rejected",t.reason=e},hL=t=>typeof(t==null?void 0:t.then)=="function",Ph=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),rk=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),Uu=t=>"v"in t&&t.v instanceof Promise,fL=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Nh=t=>{if("e"in t)throw t.e;return t.v},Ub=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let r,i;const s=A=>t.get(A),o=(A,O)=>{const _=t.get(A);if(t.set(A,O),n.has(A)||n.set(A,_),_&&Uu(_)){const T="v"in O?O.v instanceof Promise?O.v:Promise.resolve(O.v):Promise.reject(O.e);ek(_.v,T)}},a=(A,O,_)=>{const T=new Map;let z=!1;_.forEach((j,B)=>{!j&&B===A&&(j=O),j&&(T.set(B,j),O.d.get(B)!==j&&(z=!0))}),(z||O.d.size!==T.size)&&(O.d=T)},l=(A,O,_)=>{const T=s(A),z={d:(T==null?void 0:T.d)||new Map,v:O};if(_&&a(A,z,_),T&&Ph(T,z)&&T.d===z.d)return T;if(T&&Uu(T)&&Uu(z)&&fL(T,z)){if(T.d===z.d)return T;z.v=T.v}return o(A,z),z},u=(A,O,_,T)=>{if(hL(O)){let z;const j=new Promise((B,K)=>{let Z=!1;O.then(Q=>{if(!Z){Z=!0;const V=s(A),M=l(A,j,_);tk(j,Q),B(Q),(V==null?void 0:V.d)!==M.d&&C(A,M,V==null?void 0:V.d)}},Q=>{if(!Z){Z=!0;const V=s(A),M=l(A,j,_);nk(j,Q),K(Q),(V==null?void 0:V.d)!==M.d&&C(A,M,V==null?void 0:V.d)}}),z=Q=>{Z||(Z=!0,Q.then(V=>tk(j,V),V=>nk(j,V)),B(Q))}});return j.orig=O,j.status="pending",dL(j,B=>{B&&z(B),T==null||T()}),l(A,j,_)}return l(A,O,_)},c=(A,O,_)=>{const T=s(A),z={d:(T==null?void 0:T.d)||new Map,e:O};return _&&a(A,z,_),T&&rk(T,z)&&T.d===z.d?T:(o(A,z),z)},d=(A,O)=>{const _=s(A);if(!O&&_&&(e.has(A)||Array.from(_.d).every(([Q,V])=>Q===A||d(Q)===V)))return _;const T=new Map;let z=!0;const j=Q=>{if(Q===A){const M=s(Q);if(M)return T.set(Q,M),Nh(M);if(qS(Q))return T.set(Q,void 0),Q.init;throw new Error("no atom init")}const V=d(Q);return T.set(Q,V),Nh(V)};let B,K;const Z={get signal(){return B||(B=new AbortController),B.signal},get setSelf(){return!K&&QS(A)&&(K=(...Q)=>{if(!z)return v(A,...Q)}),K}};try{const Q=A.read(j,Z);return u(A,Q,T,()=>B==null?void 0:B.abort())}catch(Q){return c(A,Q,T)}finally{z=!1}},h=A=>Nh(d(A)),f=A=>{let O=e.get(A);return O||(O=w(A)),O},p=(A,O)=>!O.l.size&&(!O.t.size||O.t.size===1&&O.t.has(A)),g=A=>{const O=e.get(A);O&&p(A,O)&&S(A)},b=A=>{const O=new Map,_=new WeakMap,T=j=>{const B=e.get(j);B==null||B.t.forEach(K=>{K!==j&&(O.set(K,(O.get(K)||new Set).add(j)),_.set(K,(_.get(K)||0)+1),T(K))})};T(A);const z=j=>{const B=e.get(j);B==null||B.t.forEach(K=>{var Z;if(K!==j){let Q=_.get(K);if(Q&&_.set(K,--Q),!Q){let V=!!((Z=O.get(K))!=null&&Z.size);if(V){const M=s(K),U=d(K,!0);V=!M||!Ph(M,U)}V||O.forEach(M=>M.delete(K))}z(K)}})};z(A)},m=(A,...O)=>{let _=!0;const T=B=>Nh(d(B)),z=(B,...K)=>{let Z;if(B===A){if(!qS(B))throw new Error("atom not writable");const Q=s(B),V=u(B,K[0]);(!Q||!Ph(Q,V))&&b(B)}else Z=m(B,...K);if(!_){const Q=E()}return Z},j=A.write(T,z,...O);return _=!1,j},v=(A,...O)=>{const _=m(A,...O),T=E();return _},w=(A,O)=>{var _;(_=s(A))==null||_.d.forEach((z,j)=>{const B=e.get(j);B?B.t.add(A):j!==A&&w(j,A)}),d(A);const T={t:new Set(O&&[O]),l:new Set};if(e.set(A,T),QS(A)&&A.onMount){const z=A.onMount((...j)=>v(A,...j));z&&(T.u=z)}return T},S=A=>{var O;const _=(O=e.get(A))==null?void 0:O.u;_&&_(),e.delete(A);const T=s(A);T&&(Uu(T)&&ek(T.v),T.d.forEach((z,j)=>{if(j!==A){const B=e.get(j);B&&(B.t.delete(A),p(j,B)&&S(j))}}))},C=(A,O,_)=>{const T=new Set(O.d.keys());_==null||_.forEach((z,j)=>{if(T.has(j)){T.delete(j);return}const B=e.get(j);B&&(B.t.delete(A),p(j,B)&&S(j))}),T.forEach(z=>{const j=e.get(z);j?j.t.add(A):e.has(A)&&w(z,A)})},E=()=>{let A;for(;n.size;){const O=Array.from(n);n.clear(),O.forEach(([_,T])=>{const z=s(_);if(z){z.d!==(T==null?void 0:T.d)&&C(_,z,T==null?void 0:T.d);const j=e.get(_);j&&!(T&&!Uu(T)&&(Ph(T,z)||rk(T,z)))&&j.l.forEach(B=>B())}})}};return{get:h,set:v,sub:(A,O)=>{const _=f(A),T=E(),z=_.l;return z.add(O),()=>{z.delete(O),g(A)}}}};let l0;const pL=()=>(l0||(l0=Ub()),l0),dN=y.createContext(void 0),hN=t=>{const e=y.useContext(dN);return(t==null?void 0:t.store)||e||pL()},mL=({children:t,store:e})=>{const n=y.useRef();return!e&&!n.current&&(n.current=Ub()),y.createElement(dN.Provider,{value:e||n.current},t)},gL=t=>typeof(t==null?void 0:t.then)=="function",yL=de.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Mn(t,e){const n=hN(e),[[r,i,s],o]=y.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;(i!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return y.useEffect(()=>{const u=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),u},[n,t,l]),y.useDebugValue(a),gL(a)?yL(a):a}function vL(t,e){const n=hN(e);return y.useCallback((...i)=>n.set(t,...i),[n,t])}function Hd(t,e){return[Mn(t,e),vL(t,e)]}const{createElement:nu,createContext:wL,forwardRef:fN,useCallback:Zi,useContext:pN,useEffect:gs,useImperativeHandle:mN,useLayoutEffect:bL,useMemo:xL,useRef:ur,useState:Cc}=Zw,ik=Zw["useId".toString()],Ec=bL,SL=typeof ik=="function"?ik:()=>null;let kL=0;function Vb(t=null){const e=SL(),n=ur(t||e||null);return n.current===null&&(n.current=""+kL++),n.current}const Km=wL(null);Km.displayName="PanelGroupContext";function gN({children:t=null,className:e="",collapsedSize:n=0,collapsible:r=!1,defaultSize:i=null,forwardedRef:s,id:o=null,maxSize:a=null,minSize:l,onCollapse:u=null,onResize:c=null,order:d=null,style:h={},tagName:f="div"}){const p=pN(Km);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const g=Vb(o),{collapsePanel:b,expandPanel:m,getPanelSize:v,getPanelStyle:w,registerPanel:S,resizePanel:C,units:E,unregisterPanel:$}=p;l==null&&(E==="percentages"?l=10:l=0);const A=ur({onCollapse:u,onResize:c});gs(()=>{A.current.onCollapse=u,A.current.onResize=c});const O=w(g,i),_=ur({size:sk(O)}),T=ur({callbacksRef:A,collapsedSize:n,collapsible:r,defaultSize:i,id:g,idWasAutoGenerated:o==null,maxSize:a,minSize:l,order:d});return Ec(()=>{_.current.size=sk(O),T.current.callbacksRef=A,T.current.collapsedSize=n,T.current.collapsible=r,T.current.defaultSize=i,T.current.id=g,T.current.idWasAutoGenerated=o==null,T.current.maxSize=a,T.current.minSize=l,T.current.order=d}),Ec(()=>(S(g,T),()=>{$(g)}),[d,g,S,$]),mN(s,()=>({collapse:()=>b(g),expand:()=>m(g),getCollapsed(){return _.current.size===0},getId(){return g},getSize(z){return v(g,z)},resize:(z,j)=>C(g,z,j)}),[b,m,v,g,C]),nu(f,{children:t,className:e,"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-id":g,"data-panel-size":parseFloat(""+O.flexGrow).toFixed(1),id:`data-panel-id-${g}`,style:{...O,...h}})}const Pf=fN((t,e)=>nu(gN,{...t,forwardedRef:e}));gN.displayName="Panel";Pf.displayName="forwardRef(Panel)";function sk(t){const{flexGrow:e}=t;return typeof e=="string"?parseFloat(e):e}const $a=10;function oc(t,e,n,r,i,s,o,a){const{id:l,panels:u,units:c}=e,d=c==="pixels"?Js(l):NaN,{sizes:h}=a||{},f=h||s,p=Un(u),g=f.concat();let b=0;{const w=i<0?r:n,S=p.findIndex(A=>A.current.id===w),C=p[S],E=f[S],$=wv(c,d,C,E,E+Math.abs(i),t);if(E===$)return f;$===0&&E>0&&o.set(w,E),i=i<0?E-$:$-E}let m=i<0?n:r,v=p.findIndex(w=>w.current.id===m);for(;;){const w=p[v],S=f[v],C=Math.abs(i)-Math.abs(b),E=wv(c,d,w,S,S-C,t);if(S!==E&&(E===0&&S>0&&o.set(w.current.id,S),b+=S-E,g[v]=E,b.toPrecision($a).localeCompare(Math.abs(i).toPrecision($a),void 0,{numeric:!0})>=0))break;if(i<0){if(--v<0)break}else if(++v>=p.length)break}return b===0?f:(m=i<0?r:n,v=p.findIndex(w=>w.current.id===m),g[v]=f[v]+b,g)}function Za(t,e,n){e.forEach((r,i)=>{const s=t[i];if(!s)return;const{callbacksRef:o,collapsedSize:a,collapsible:l,id:u}=s.current,c=n[u];if(c!==r){n[u]=r;const{onCollapse:d,onResize:h}=o.current;h&&h(r,c),l&&d&&((c==null||c===a)&&r!==a?d(!1):c!==a&&r===a&&d(!0))}})}function CL({groupId:t,panels:e,units:n}){const r=n==="pixels"?Js(t):NaN,i=Un(e),s=Array(i.length);let o=0,a=100;for(let l=0;l<i.length;l++){const u=i[l],{defaultSize:c}=u.current;c!=null&&(o++,s[l]=n==="pixels"?c/r*100:c,a-=s[l])}for(let l=0;l<i.length;l++){const u=i[l];let{defaultSize:c,id:d,maxSize:h,minSize:f}=u.current;if(c!=null)continue;n==="pixels"&&(f=f/r*100,h!=null&&(h=h/r*100));const p=i.length-o,g=Math.min(h??100,Math.max(f,a/p));s[l]=g,o++,a-=g}if(a!==0)for(let l=0;l<i.length;l++){const u=i[l];let{maxSize:c,minSize:d}=u.current;n==="pixels"&&(d=d/r*100,c!=null&&(c=c/r*100));const h=Math.min(c??100,Math.max(d,s[l]+a));if(h!==s[l]&&(a-=h-s[l],s[l]=h,Math.abs(a).toFixed(3)==="0.000"))break}return Math.abs(a).toFixed(3),s}function u0(t,e){if(e.length<2)return[null,null];const n=e.findIndex(o=>o.current.id===t);if(n<0)return[null,null];const r=n===e.length-1,i=r?e[n-1].current.id:t,s=r?t:e[n+1].current.id;return[i,s]}function Js(t){const e=Qc(t);if(e==null)return NaN;const n=e.getAttribute("data-panel-group-direction"),r=Hb(t);return n==="horizontal"?e.offsetWidth-r.reduce((i,s)=>i+s.offsetWidth,0):e.offsetHeight-r.reduce((i,s)=>i+s.offsetHeight,0)}function yN(t,e,n){if(t.size===1)return"100";const i=Un(t).findIndex(o=>o.current.id===e),s=n[i];return s==null?"0":s.toPrecision($a)}function EL(t){const e=document.querySelector(`[data-panel-id="${t}"]`);return e||null}function Qc(t){const e=document.querySelector(`[data-panel-group-id="${t}"]`);return e||null}function Xm(t){const e=document.querySelector(`[data-panel-resize-handle-id="${t}"]`);return e||null}function AL(t){return vN().findIndex(r=>r.getAttribute("data-panel-resize-handle-id")===t)??null}function vN(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function Hb(t){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Wb(t,e,n){var l,u,c,d;const r=Xm(e),i=Hb(t),s=r?i.indexOf(r):-1,o=((u=(l=n[s])==null?void 0:l.current)==null?void 0:u.id)??null,a=((d=(c=n[s+1])==null?void 0:c.current)==null?void 0:d.id)??null;return[o,a]}function Un(t){return Array.from(t.values()).sort((e,n)=>{const r=e.current.order,i=n.current.order;return r==null&&i==null?0:r==null?-1:i==null?1:r-i})}function wv(t,e,n,r,i,s=null){var c;let{collapsedSize:o,collapsible:a,maxSize:l,minSize:u}=n.current;if(t==="pixels"&&(o=o/e*100,l!=null&&(l=l/e*100),u=u/e*100),a){if(r>o){if(i<=u/2+o)return o}else if(!((c=s==null?void 0:s.type)==null?void 0:c.startsWith("key"))&&i<u)return o}return Math.min(l??100,Math.max(u,i))}function PL(t,e){const{collapsible:n,defaultSize:r,maxSize:i,minSize:s}=e.current;(s<0||t==="percentages"&&s>100)&&(e.current.minSize=0),i!=null&&(i<0||t==="percentages"&&i>100)&&(e.current.maxSize=null),r!==null&&(r<0||t==="percentages"&&r>100?e.current.defaultSize=null:r<s&&!n?e.current.defaultSize=s:i!=null&&r>i&&(e.current.defaultSize=i))}function c0({groupId:t,panels:e,nextSizes:n,prevSizes:r,units:i}){n=[...n];const s=Un(e),o=i==="pixels"?Js(t):NaN;let a=0;for(let l=0;l<s.length;l++){const u=s[l],c=r[l],d=n[l],h=wv(i,o,u,c,d);d!=h&&(a+=d-h,n[l]=h)}if(a.toFixed(3)!=="0.000")for(let l=0;l<s.length;l++){const u=s[l];let{maxSize:c,minSize:d}=u.current;i==="pixels"&&(d=d/o*100,c!=null&&(c=c/o*100));const h=Math.min(c??100,Math.max(d,n[l]+a));if(h!==n[l]&&(a-=h-n[l],n[l]=h,Math.abs(a).toFixed(3)==="0.000"))break}return a.toFixed(3),n}function wN(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}function NL({committedValuesRef:t,groupId:e,panels:n,setSizes:r,sizes:i,panelSizeBeforeCollapse:s}){gs(()=>{const{direction:o,panels:a}=t.current,l=Qc(e);wN(l!=null,`No group found for id "${e}"`);const{height:u,width:c}=l.getBoundingClientRect(),h=Hb(e).map(f=>{const p=f.getAttribute("data-panel-resize-handle-id"),g=Un(a),[b,m]=Wb(e,p,g);if(b==null||m==null)return()=>{};let v=0,w=100,S=0,C=0;g.forEach(T=>{const{id:z,maxSize:j,minSize:B}=T.current;z===b?(v=B,w=j??100):(S+=B,C+=j??100)});const E=Math.min(w,100-S),$=Math.max(v,(g.length-1)*100-C),A=yN(a,b,i);f.setAttribute("aria-valuemax",""+Math.round(E)),f.setAttribute("aria-valuemin",""+Math.round($)),f.setAttribute("aria-valuenow",""+Math.round(parseInt(A)));const O=T=>{if(!T.defaultPrevented)switch(T.key){case"Enter":{T.preventDefault();const z=g.findIndex(j=>j.current.id===b);if(z>=0){const j=g[z],B=i[z];if(B!=null){let K=0;B.toPrecision($a)<=j.current.minSize.toPrecision($a)?K=o==="horizontal"?c:u:K=-(o==="horizontal"?c:u);const Z=oc(T,t.current,b,m,K,i,s.current,null);i!==Z&&r(Z)}}break}}};f.addEventListener("keydown",O);const _=EL(b);return _!=null&&f.setAttribute("aria-controls",_.id),()=>{f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow"),f.removeEventListener("keydown",O),_!=null&&f.removeAttribute("aria-controls")}});return()=>{h.forEach(f=>f())}},[t,e,n,s,r,i])}function $L({disabled:t,handleId:e,resizeHandler:n}){gs(()=>{if(t||n==null)return;const r=Xm(e);if(r==null)return;const i=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),n(s);break}case"F6":{s.preventDefault();const o=vN(),a=AL(e);wN(a!==null);const l=s.shiftKey?a>0?a-1:o.length-1:a+1<o.length?a+1:0;o[l].focus();break}}};return r.addEventListener("keydown",i),()=>{r.removeEventListener("keydown",i)}},[t,e,n])}function d0(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function bN(t,e,n,r=0,i=null){const s=n==="horizontal";let o=0;if(bv(t))o=s?t.clientX:t.clientY;else if(xv(t)){const c=t.touches[0];o=s?c.screenX:c.screenY}else return 0;const a=Xm(e),l=i||a.getBoundingClientRect(),u=s?l.left:l.top;return o-u-r}function OL(t,e,n,r,i,s,o){const{dragOffset:a=0,dragHandleRect:l,sizes:u}=o||{},c=u||s;if(TL(t)){const d=i==="horizontal",f=Qc(e).getBoundingClientRect(),p=d?f.width:f.height,g=t.shiftKey?10:100,b=p/g;let m=0;switch(t.key){case"ArrowDown":m=d?0:b;break;case"ArrowLeft":m=d?-b:0;break;case"ArrowRight":m=d?b:0;break;case"ArrowUp":m=d?0:-b;break;case"End":m=p;break;case"Home":m=-p;break}const[v,w]=Wb(e,n,r),S=m<0?v:w,C=r.findIndex($=>$.current.id===S),E=r[C];if(E.current.collapsible){const $=c[C];($===0||$.toPrecision($a)===E.current.minSize.toPrecision($a))&&(m=m<0?-E.current.minSize*p:E.current.minSize*p)}return m}else return bN(t,n,i,a,l)}function TL(t){return t.type==="keydown"}function bv(t){return t.type.startsWith("mouse")}function xv(t){return t.type.startsWith("touch")}let Sv=null,ha=null;function xN(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function ML(){ha!==null&&(document.head.removeChild(ha),Sv=null,ha=null)}function h0(t){if(Sv===t)return;Sv=t;const e=xN(t);ha===null&&(ha=document.createElement("style"),document.head.appendChild(ha)),ha.innerHTML=`*{cursor: ${e}!important;}`}function _L(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function SN(t){return t.map(e=>{const{minSize:n,order:r}=e.current;return r?`${r}:${n}`:`${n}`}).sort((e,n)=>e.localeCompare(n)).join(",")}function kN(t,e){try{const n=e.getItem(`PanelGroup:sizes:${t}`);if(n){const r=JSON.parse(n);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function RL(t,e,n){const r=kN(t,n);if(r){const i=SN(e);return r[i]??null}return null}function DL(t,e,n,r){const i=SN(e),s=kN(t,r)||{};s[i]=n;try{r.setItem(`PanelGroup:sizes:${t}`,JSON.stringify(s))}catch(o){console.error(o)}}const f0={};function ok(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}const ac={getItem:t=>(ok(ac),ac.getItem(t)),setItem:(t,e)=>{ok(ac),ac.setItem(t,e)}};function CN({autoSaveId:t,children:e=null,className:n="",direction:r,disablePointerEventsDuringResize:i=!1,forwardedRef:s,id:o=null,onLayout:a,storage:l=ac,style:u={},tagName:c="div",units:d="percentages"}){const h=Vb(o),[f,p]=Cc(null),[g,b]=Cc(new Map),m=ur(null);ur({didLogDefaultSizeWarning:!1,didLogIdAndOrderWarning:!1,didLogInvalidLayoutWarning:!1,prevPanelIds:[]});const v=ur({onLayout:a});gs(()=>{v.current.onLayout=a});const w=ur({}),[S,C]=Cc([]),E=ur(new Map),$=ur(0),A=ur({direction:r,id:h,panels:g,sizes:S,units:d});mN(s,()=>({getId:()=>h,getLayout:M=>{const{sizes:U,units:J}=A.current;if((M??J)==="pixels"){const me=Js(h);return U.map(H=>H/100*me)}else return U},setLayout:(M,U)=>{const{id:J,panels:ne,sizes:me,units:H}=A.current;if((U||H)==="pixels"){const N=Js(J);M=M.map(D=>D/N*100)}const I=w.current,G=Un(ne),k=c0({groupId:J,panels:ne,nextSizes:M,prevSizes:me,units:H});d0(me,k)||(C(k),Za(G,k,I))}}),[h]),Ec(()=>{A.current.direction=r,A.current.id=h,A.current.panels=g,A.current.sizes=S,A.current.units=d}),NL({committedValuesRef:A,groupId:h,panels:g,setSizes:C,sizes:S,panelSizeBeforeCollapse:E}),gs(()=>{const{onLayout:M}=v.current,{panels:U,sizes:J}=A.current;if(J.length>0){M&&M(J);const ne=w.current,me=Un(U);Za(me,J,ne)}},[S]),Ec(()=>{const{id:M,sizes:U,units:J}=A.current;if(U.length===g.size)return;let ne=null;if(t){const me=Un(g);ne=RL(t,me,l)}if(ne!=null){const me=c0({groupId:M,panels:g,nextSizes:ne,prevSizes:ne,units:J});C(me)}else{const me=CL({groupId:M,panels:g,units:J});C(me)}},[t,g,l]),gs(()=>{if(t){if(S.length===0||S.length!==g.size)return;const M=Un(g);f0[t]||(f0[t]=_L(DL,100)),f0[t](t,M,S,l)}},[t,g,S,l]),Ec(()=>{if(d==="pixels"){const M=new ResizeObserver(()=>{const{panels:U,sizes:J}=A.current,ne=c0({groupId:h,panels:U,nextSizes:J,prevSizes:J,units:d});d0(J,ne)||C(ne)});return M.observe(Qc(h)),()=>{M.disconnect()}}},[h,d]);const O=Zi((M,U)=>{const{panels:J,units:ne}=A.current,H=Un(J).findIndex(k=>k.current.id===M),I=S[H];if((U??ne)==="pixels"){const k=Js(h);return I/100*k}else return I},[h,S]),_=Zi((M,U)=>{const{panels:J}=A.current;return J.size===0?{flexBasis:0,flexGrow:U??void 0,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:yN(J,M,S),flexShrink:1,overflow:"hidden",pointerEvents:i&&f!==null?"none":void 0}},[f,i,S]),T=Zi((M,U)=>{const{units:J}=A.current;PL(J,U),b(ne=>{if(ne.has(M))return ne;const me=new Map(ne);return me.set(M,U),me})},[]),z=Zi(M=>J=>{J.preventDefault();const{direction:ne,panels:me,sizes:H}=A.current,I=Un(me),[G,k]=Wb(h,M,I);if(G==null||k==null)return;let N=OL(J,h,M,I,ne,H,m.current);if(N===0)return;const R=Qc(h).getBoundingClientRect(),F=ne==="horizontal";document.dir==="rtl"&&F&&(N=-N);const X=F?R.width:R.height,W=N/X*100,Y=oc(J,A.current,G,k,W,H,E.current,m.current),ee=!d0(H,Y);if((bv(J)||xv(J))&&$.current!=W&&h0(ee?F?"horizontal":"vertical":F?N<0?"horizontal-min":"horizontal-max":N<0?"vertical-min":"vertical-max"),ee){const Oe=w.current;C(Y),Za(I,Y,Oe)}$.current=W},[h]),j=Zi(M=>{b(U=>{if(!U.has(M))return U;const J=new Map(U);return J.delete(M),J})},[]),B=Zi(M=>{const{panels:U,sizes:J}=A.current,ne=U.get(M);if(ne==null)return;const{collapsedSize:me,collapsible:H}=ne.current;if(!H)return;const I=Un(U),G=I.indexOf(ne);if(G<0)return;const k=J[G];if(k===me)return;E.current.set(M,k);const[N,D]=u0(M,I);if(N==null||D==null)return;const F=G===I.length-1?k:me-k,X=oc(null,A.current,N,D,F,J,E.current,null);if(J!==X){const W=w.current;C(X),Za(I,X,W)}},[]),K=Zi(M=>{const{panels:U,sizes:J}=A.current,ne=U.get(M);if(ne==null)return;const{collapsedSize:me,minSize:H}=ne.current,I=E.current.get(M)||H;if(!I)return;const G=Un(U),k=G.indexOf(ne);if(k<0||J[k]!==me)return;const[D,R]=u0(M,G);if(D==null||R==null)return;const X=k===G.length-1?me-I:I,W=oc(null,A.current,D,R,X,J,E.current,null);if(J!==W){const Y=w.current;C(W),Za(G,W,Y)}},[]),Z=Zi((M,U,J)=>{const{id:ne,panels:me,sizes:H,units:I}=A.current;if((J||I)==="pixels"){const De=Js(ne);U=U/De*100}const G=me.get(M);if(G==null)return;let{collapsedSize:k,collapsible:N,maxSize:D,minSize:R}=G.current;if(I==="pixels"){const De=Js(ne);R=R/De*100,D!=null&&(D=D/De*100)}const F=Un(me),X=F.indexOf(G);if(X<0)return;const W=H[X];if(W===U)return;N&&U===k||(U=Math.min(D??100,Math.max(R,U)));const[Y,ee]=u0(M,F);if(Y==null||ee==null)return;const he=X===F.length-1?W-U:U-W,Te=oc(null,A.current,Y,ee,he,H,E.current,null);if(H!==Te){const De=w.current;C(Te),Za(F,Te,De)}},[]),Q=xL(()=>({activeHandleId:f,collapsePanel:B,direction:r,expandPanel:K,getPanelSize:O,getPanelStyle:_,groupId:h,registerPanel:T,registerResizeHandle:z,resizePanel:Z,startDragging:(M,U)=>{if(p(M),bv(U)||xv(U)){const J=Xm(M);m.current={dragHandleRect:J.getBoundingClientRect(),dragOffset:bN(U,M,r),sizes:A.current.sizes}}},stopDragging:()=>{ML(),p(null),m.current=null},units:d,unregisterPanel:j}),[f,B,r,K,O,_,h,T,z,Z,d,j]),V={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return nu(Km.Provider,{children:nu(c,{children:e,className:n,"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":h,"data-panel-group-units":d,style:{...V,...u}}),value:Q})}const EN=fN((t,e)=>nu(CN,{...t,forwardedRef:e}));CN.displayName="PanelGroup";EN.displayName="forwardRef(PanelGroup)";function kv({children:t=null,className:e="",disabled:n=!1,id:r=null,onDragging:i,style:s={},tagName:o="div"}){const a=ur(null),l=ur({onDragging:i});gs(()=>{l.current.onDragging=i});const u=pN(Km);if(u===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:c,direction:d,groupId:h,registerResizeHandle:f,startDragging:p,stopDragging:g}=u,b=Vb(r),m=c===b,[v,w]=Cc(!1),[S,C]=Cc(null),E=Zi(()=>{a.current.blur(),g();const{onDragging:O}=l.current;O&&O(!1)},[g]);gs(()=>{if(n)C(null);else{const A=f(b);C(()=>A)}},[n,b,f]),gs(()=>{if(n||S==null||!m)return;const A=z=>{S(z)},O=z=>{S(z)},T=a.current.ownerDocument;return T.body.addEventListener("contextmenu",E),T.body.addEventListener("mousemove",A),T.body.addEventListener("touchmove",A),T.body.addEventListener("mouseleave",O),window.addEventListener("mouseup",E),window.addEventListener("touchend",E),()=>{T.body.removeEventListener("contextmenu",E),T.body.removeEventListener("mousemove",A),T.body.removeEventListener("touchmove",A),T.body.removeEventListener("mouseleave",O),window.removeEventListener("mouseup",E),window.removeEventListener("touchend",E)}},[d,n,m,S,E]),$L({disabled:n,handleId:b,resizeHandler:S});const $={cursor:xN(d),touchAction:"none",userSelect:"none"};return nu(o,{children:t,className:e,"data-resize-handle-active":m?"pointer":v?"keyboard":void 0,"data-panel-group-direction":d,"data-panel-group-id":h,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":b,onBlur:()=>w(!1),onFocus:()=>w(!0),onMouseDown:A=>{p(b,A.nativeEvent);const{onDragging:O}=l.current;O&&O(!0)},onMouseUp:E,onTouchCancel:E,onTouchEnd:E,onTouchStart:A=>{p(b,A.nativeEvent);const{onDragging:O}=l.current;O&&O(!0)},ref:a,role:"separator",style:{...$,...s},tabIndex:0})}kv.displayName="PanelResizeHandle";var IL=function(){};function LL(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function BL(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var AN=typeof window<"u",zL=AN?window:null,ak=function(t){return!!t.addEventListener},lk=function(t){return!!t.on},jL=function(t,e,n,r){n===void 0&&(n=zL),y.useEffect(function(){if(e&&n)return ak(n)?LL(n,t,e,r):lk(n)&&n.on(t,e,r),function(){ak(n)?BL(n,t,e,r):lk(n)&&n.off(t,e,r)}},[t,e,n,JSON.stringify(r)])};const FL=jL;var UL=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},VL=function(t,e,n,r){e===void 0&&(e=IL),n===void 0&&(n={}),r===void 0&&(r=[t]);var i=n.event,s=i===void 0?"keydown":i,o=n.target,a=n.options,l=y.useMemo(function(){var u=UL(t),c=function(d){if(u(d))return e(d)};return c},r);FL(s,l,o,a)};const Ac=VL;var HL=function(t,e){return e!==void 0?e:AN?window.matchMedia(t).matches:!1},WL=function(t,e){var n=y.useState(HL(t,e)),r=n[0],i=n[1];return y.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&i(!!o.matches)};return o.addListener(a),i(o.matches),function(){s=!1,o.removeListener(a)}},[t]),r};const GL=WL,KL="modulepreload",XL=function(t){return"/vonsim-next/"+t},uk={},ZL=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=XL(s),s in uk)return;uk[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const d=i[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":KL,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function YL(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){const{Workbox:h}=await ZL(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);a=new h("/vonsim-next/sw.js",{scope:"/vonsim-next/",type:"classic"}),u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let f=!1;const p=()=>{f=!0,a==null||a.addEventListener("controlling",g=>{g.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",g=>{typeof g.isUpdate>"u"?typeof g.isExternal<"u"?g.isExternal?p():!f&&(r==null||r()):g.isExternal?window.location.reload():!f&&(r==null||r()):g.isUpdate||r==null||r()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(f=>{s?s("/vonsim-next/sw.js",f):i==null||i(f)}).catch(f=>{o==null||o(f)})}}return l=d(),c}function JL(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=y.useState(!1),[u,c]=y.useState(!1),[d]=y.useState(()=>YL({immediate:e,onOfflineReady(){c(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:i,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}function PN(t,e){const n=e.split(".");let r=t;for(const i of n)if(i in r)r=r[i];else throw new ReferenceError(`Couldn't find path "${e}".`);return r}const NN=["en","es"];function Gb(t){return function(n,r,...i){const s=PN(t[n],r);if(typeof s=="function")return s(...i);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${r}`)}}const qL=Symbol(),QL=t=>typeof(t==null?void 0:t.then)=="function";function e5(t){let e,n;const r={getItem:(i,s)=>{var o,a;const l=c=>{if(c=c||"",e!==c){try{n=JSON.parse(c)}catch{return s}e=c}return n},u=(a=(o=t())==null?void 0:o.getItem(i))!=null?a:null;return QL(u)?u.then(l):l(u)},setItem:(i,s)=>{var o;return(o=t())==null?void 0:o.setItem(i,JSON.stringify(s))},removeItem:i=>{var s;return(s=t())==null?void 0:s.removeItem(i)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&(r.subscribe=(i,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===i){let u;try{u=JSON.parse(l.newValue||"")}catch{u=o}s(u)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),r}const t5=e5(()=>typeof window<"u"?window.localStorage:void 0);function n5(t,e,n=t5,r){const i=r==null?void 0:r.unstable_getOnInit,s=Ae(i?n.getItem(t,e):e);return s.onMount=a=>{i||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},Ae(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===qL?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}const re=Ub();function r5(t){return x.jsx(mL,{store:re,children:t.children})}var Ye;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Ye||(Ye={}));var Cv;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Cv||(Cv={}));const ge=Ye.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),qs=t=>{switch(typeof t){case"undefined":return ge.undefined;case"string":return ge.string;case"number":return isNaN(t)?ge.nan:ge.number;case"boolean":return ge.boolean;case"function":return ge.function;case"bigint":return ge.bigint;case"symbol":return ge.symbol;case"object":return Array.isArray(t)?ge.array:t===null?ge.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ge.promise:typeof Map<"u"&&t instanceof Map?ge.map:typeof Set<"u"&&t instanceof Set?ge.set:typeof Date<"u"&&t instanceof Date?ge.date:ge.object;default:return ge.unknown}},se=Ye.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),i5=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class oi extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ye.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}oi.create=t=>new oi(t);const ed=(t,e)=>{let n;switch(t.code){case se.invalid_type:t.received===ge.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case se.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ye.jsonStringifyReplacer)}`;break;case se.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ye.joinValues(t.keys,", ")}`;break;case se.invalid_union:n="Invalid input";break;case se.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ye.joinValues(t.options)}`;break;case se.invalid_enum_value:n=`Invalid enum value. Expected ${Ye.joinValues(t.options)}, received '${t.received}'`;break;case se.invalid_arguments:n="Invalid function arguments";break;case se.invalid_return_type:n="Invalid function return type";break;case se.invalid_date:n="Invalid date";break;case se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ye.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case se.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case se.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case se.custom:n="Invalid input";break;case se.invalid_intersection_types:n="Intersection results could not be merged";break;case se.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case se.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ye.assertNever(t)}return{message:n}};let $N=ed;function s5(t){$N=t}function Cp(){return $N}const Ep=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},o5=[];function ye(t,e){const n=Ep({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Cp(),ed].filter(r=>!!r)});t.common.issues.push(n)}class xn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Re;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return xn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Re;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Re=Object.freeze({status:"aborted"}),ON=t=>({status:"dirty",value:t}),_n=t=>({status:"valid",value:t}),Ev=t=>t.status==="aborted",Av=t=>t.status==="dirty",td=t=>t.status==="valid",Ap=t=>typeof Promise<"u"&&t instanceof Promise;var Ne;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ne||(Ne={}));class Vi{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ck=(t,e)=>{if(td(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new oi(t.common.issues);return this._error=n,this._error}}};function Ie(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class Fe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return qs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:qs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new xn,ctx:{common:e.parent.common,data:e.data,parsedType:qs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Ap(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qs(e)},s=this._parseSync({data:e,path:i.path,parent:i});return ck(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qs(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Ap(i)?i:Promise.resolve(i));return ck(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:se.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new fi({schema:this,typeName:Me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ys.create(this,this._def)}nullable(){return Ma.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ai.create(this,this._def)}promise(){return iu.create(this,this._def)}or(e){return sd.create([this,e],this._def)}and(e){return od.create(this,e,this._def)}transform(e){return new fi({...Ie(this._def),schema:this,typeName:Me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new dd({...Ie(this._def),innerType:this,defaultValue:n,typeName:Me.ZodDefault})}brand(){return new MN({typeName:Me.ZodBranded,type:this,...Ie(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Op({...Ie(this._def),innerType:this,catchValue:n,typeName:Me.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Wd.create(this,e)}readonly(){return Mp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const a5=/^c[^\s-]{8,}$/i,l5=/^[a-z][a-z0-9]*$/,u5=/[0-9A-HJKMNP-TV-Z]{26}/,c5=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,d5=/^([A-Z0-9_+-]+\.?)*[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,h5=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,f5=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,p5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,m5=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function g5(t,e){return!!((e==="v4"||!e)&&f5.test(t)||(e==="v6"||!e)&&p5.test(t))}class ti extends Fe{constructor(){super(...arguments),this._regex=(e,n,r)=>this.refinement(i=>e.test(i),{validation:n,code:se.invalid_string,...Ne.errToObj(r)}),this.nonempty=e=>this.min(1,Ne.errToObj(e)),this.trim=()=>new ti({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new ti({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new ti({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ge.string){const s=this._getOrReturnCtx(e);return ye(s,{code:se.invalid_type,expected:ge.string,received:s.parsedType}),Re}const r=new xn;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ye(i,{code:se.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ye(i,{code:se.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?ye(i,{code:se.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ye(i,{code:se.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")d5.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"email",code:se.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")h5.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"emoji",code:se.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")c5.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"uuid",code:se.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")a5.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"cuid",code:se.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")l5.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"cuid2",code:se.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")u5.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"ulid",code:se.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ye(i,{validation:"url",code:se.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"regex",code:se.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ye(i,{code:se.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ye(i,{code:se.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ye(i,{code:se.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?m5(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{code:se.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?g5(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"ip",code:se.invalid_string,message:s.message}),r.dirty()):Ye.assertNever(s);return{status:r.value,value:e.data}}_addCheck(e){return new ti({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ne.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ne.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ne.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ne.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ne.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ne.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ne.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ne.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ne.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ne.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ne.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ne.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ne.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ne.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ne.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ne.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ti.create=t=>{var e;return new ti({checks:[],typeName:Me.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ie(t)})};function y5(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Po extends Fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ge.number){const s=this._getOrReturnCtx(e);return ye(s,{code:se.invalid_type,expected:ge.number,received:s.parsedType}),Re}let r;const i=new xn;for(const s of this._def.checks)s.kind==="int"?Ye.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{code:se.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ye(r,{code:se.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ye(r,{code:se.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?y5(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),ye(r,{code:se.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{code:se.not_finite,message:s.message}),i.dirty()):Ye.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ne.toString(n))}setLimit(e,n,r,i){return new Po({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ne.toString(i)}]})}_addCheck(e){return new Po({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ne.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ne.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ne.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ne.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ne.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ye.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Po.create=t=>new Po({checks:[],typeName:Me.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ie(t)});class No extends Fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ge.bigint){const s=this._getOrReturnCtx(e);return ye(s,{code:se.invalid_type,expected:ge.bigint,received:s.parsedType}),Re}let r;const i=new xn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ye(r,{code:se.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ye(r,{code:se.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ye(r,{code:se.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Ye.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ne.toString(n))}setLimit(e,n,r,i){return new No({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ne.toString(i)}]})}_addCheck(e){return new No({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ne.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}No.create=t=>{var e;return new No({checks:[],typeName:Me.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ie(t)})};class nd extends Fe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ge.boolean){const r=this._getOrReturnCtx(e);return ye(r,{code:se.invalid_type,expected:ge.boolean,received:r.parsedType}),Re}return _n(e.data)}}nd.create=t=>new nd({typeName:Me.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ie(t)});class Oa extends Fe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ge.date){const s=this._getOrReturnCtx(e);return ye(s,{code:se.invalid_type,expected:ge.date,received:s.parsedType}),Re}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ye(s,{code:se.invalid_date}),Re}const r=new xn;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ye(i,{code:se.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ye(i,{code:se.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Ye.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Oa({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ne.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ne.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Oa.create=t=>new Oa({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Me.ZodDate,...Ie(t)});class Pp extends Fe{_parse(e){if(this._getType(e)!==ge.symbol){const r=this._getOrReturnCtx(e);return ye(r,{code:se.invalid_type,expected:ge.symbol,received:r.parsedType}),Re}return _n(e.data)}}Pp.create=t=>new Pp({typeName:Me.ZodSymbol,...Ie(t)});class rd extends Fe{_parse(e){if(this._getType(e)!==ge.undefined){const r=this._getOrReturnCtx(e);return ye(r,{code:se.invalid_type,expected:ge.undefined,received:r.parsedType}),Re}return _n(e.data)}}rd.create=t=>new rd({typeName:Me.ZodUndefined,...Ie(t)});class id extends Fe{_parse(e){if(this._getType(e)!==ge.null){const r=this._getOrReturnCtx(e);return ye(r,{code:se.invalid_type,expected:ge.null,received:r.parsedType}),Re}return _n(e.data)}}id.create=t=>new id({typeName:Me.ZodNull,...Ie(t)});class ru extends Fe{constructor(){super(...arguments),this._any=!0}_parse(e){return _n(e.data)}}ru.create=t=>new ru({typeName:Me.ZodAny,...Ie(t)});class wa extends Fe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _n(e.data)}}wa.create=t=>new wa({typeName:Me.ZodUnknown,...Ie(t)});class Ps extends Fe{_parse(e){const n=this._getOrReturnCtx(e);return ye(n,{code:se.invalid_type,expected:ge.never,received:n.parsedType}),Re}}Ps.create=t=>new Ps({typeName:Me.ZodNever,...Ie(t)});class Np extends Fe{_parse(e){if(this._getType(e)!==ge.undefined){const r=this._getOrReturnCtx(e);return ye(r,{code:se.invalid_type,expected:ge.void,received:r.parsedType}),Re}return _n(e.data)}}Np.create=t=>new Np({typeName:Me.ZodVoid,...Ie(t)});class ai extends Fe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ge.array)return ye(n,{code:se.invalid_type,expected:ge.array,received:n.parsedType}),Re;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(ye(n,{code:o?se.too_big:se.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ye(n,{code:se.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ye(n,{code:se.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new Vi(n,o,n.path,a)))).then(o=>xn.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new Vi(n,o,n.path,a)));return xn.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new ai({...this._def,minLength:{value:e,message:Ne.toString(n)}})}max(e,n){return new ai({...this._def,maxLength:{value:e,message:Ne.toString(n)}})}length(e,n){return new ai({...this._def,exactLength:{value:e,message:Ne.toString(n)}})}nonempty(e){return this.min(1,e)}}ai.create=(t,e)=>new ai({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Me.ZodArray,...Ie(e)});function nl(t){if(t instanceof Et){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ys.create(nl(r))}return new Et({...t._def,shape:()=>e})}else return t instanceof ai?new ai({...t._def,type:nl(t.element)}):t instanceof ys?ys.create(nl(t.unwrap())):t instanceof Ma?Ma.create(nl(t.unwrap())):t instanceof Hi?Hi.create(t.items.map(e=>nl(e))):t}class Et extends Fe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ye.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ge.object){const u=this._getOrReturnCtx(e);return ye(u,{code:se.invalid_type,expected:ge.object,received:u.parsedType}),Re}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ps&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Vi(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ps){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")a.length>0&&(ye(i,{code:se.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Vi(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key;u.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>xn.mergeObjectSync(r,u)):xn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Ne.errToObj,new Et({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ne.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Et({...this._def,unknownKeys:"strip"})}passthrough(){return new Et({...this._def,unknownKeys:"passthrough"})}extend(e){return new Et({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Et({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Me.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Et({...this._def,catchall:e})}pick(e){const n={};return Ye.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Et({...this._def,shape:()=>n})}omit(e){const n={};return Ye.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Et({...this._def,shape:()=>n})}deepPartial(){return nl(this)}partial(e){const n={};return Ye.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Et({...this._def,shape:()=>n})}required(e){const n={};return Ye.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ys;)s=s._def.innerType;n[r]=s}}),new Et({...this._def,shape:()=>n})}keyof(){return TN(Ye.objectKeys(this.shape))}}Et.create=(t,e)=>new Et({shape:()=>t,unknownKeys:"strip",catchall:Ps.create(),typeName:Me.ZodObject,...Ie(e)});Et.strictCreate=(t,e)=>new Et({shape:()=>t,unknownKeys:"strict",catchall:Ps.create(),typeName:Me.ZodObject,...Ie(e)});Et.lazycreate=(t,e)=>new Et({shape:t,unknownKeys:"strip",catchall:Ps.create(),typeName:Me.ZodObject,...Ie(e)});class sd extends Fe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new oi(a.ctx.common.issues));return ye(n,{code:se.invalid_union,unionErrors:o}),Re}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new oi(l));return ye(n,{code:se.invalid_union,unionErrors:a}),Re}}get options(){return this._def.options}}sd.create=(t,e)=>new sd({options:t,typeName:Me.ZodUnion,...Ie(e)});const Nf=t=>t instanceof ld?Nf(t.schema):t instanceof fi?Nf(t.innerType()):t instanceof ud?[t.value]:t instanceof $o?t.options:t instanceof cd?Object.keys(t.enum):t instanceof dd?Nf(t._def.innerType):t instanceof rd?[void 0]:t instanceof id?[null]:null;class Zm extends Fe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ge.object)return ye(n,{code:se.invalid_type,expected:ge.object,received:n.parsedType}),Re;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(ye(n,{code:se.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Re)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=Nf(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Zm({typeName:Me.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Ie(r)})}}function Pv(t,e){const n=qs(t),r=qs(e);if(t===e)return{valid:!0,data:t};if(n===ge.object&&r===ge.object){const i=Ye.objectKeys(e),s=Ye.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=Pv(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ge.array&&r===ge.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=Pv(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===ge.date&&r===ge.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class od extends Fe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(Ev(s)||Ev(o))return Re;const a=Pv(s.value,o.value);return a.valid?((Av(s)||Av(o))&&n.dirty(),{status:n.value,value:a.data}):(ye(r,{code:se.invalid_intersection_types}),Re)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}od.create=(t,e,n)=>new od({left:t,right:e,typeName:Me.ZodIntersection,...Ie(n)});class Hi extends Fe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.array)return ye(r,{code:se.invalid_type,expected:ge.array,received:r.parsedType}),Re;if(r.data.length<this._def.items.length)return ye(r,{code:se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Re;!this._def.rest&&r.data.length>this._def.items.length&&(ye(r,{code:se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Vi(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>xn.mergeArray(n,o)):xn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Hi({...this._def,rest:e})}}Hi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Hi({items:t,typeName:Me.ZodTuple,rest:null,...Ie(e)})};class ad extends Fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.object)return ye(r,{code:se.invalid_type,expected:ge.object,received:r.parsedType}),Re;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Vi(r,a,r.path,a)),value:o._parse(new Vi(r,r.data[a],r.path,a))});return r.common.async?xn.mergeObjectAsync(n,i):xn.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Fe?new ad({keyType:e,valueType:n,typeName:Me.ZodRecord,...Ie(r)}):new ad({keyType:ti.create(),valueType:e,typeName:Me.ZodRecord,...Ie(n)})}}class $p extends Fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.map)return ye(r,{code:se.invalid_type,expected:ge.map,received:r.parsedType}),Re;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],u)=>({key:i._parse(new Vi(r,a,r.path,[u,"key"])),value:s._parse(new Vi(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Re;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Re;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}$p.create=(t,e,n)=>new $p({valueType:e,keyType:t,typeName:Me.ZodMap,...Ie(n)});class Ta extends Fe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.set)return ye(r,{code:se.invalid_type,expected:ge.set,received:r.parsedType}),Re;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ye(r,{code:se.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ye(r,{code:se.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Re;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>s._parse(new Vi(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Ta({...this._def,minSize:{value:e,message:Ne.toString(n)}})}max(e,n){return new Ta({...this._def,maxSize:{value:e,message:Ne.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ta.create=(t,e)=>new Ta({valueType:t,minSize:null,maxSize:null,typeName:Me.ZodSet,...Ie(e)});class $l extends Fe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ge.function)return ye(n,{code:se.invalid_type,expected:ge.function,received:n.parsedType}),Re;function r(a,l){return Ep({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Cp(),ed].filter(u=>!!u),issueData:{code:se.invalid_arguments,argumentsError:l}})}function i(a,l){return Ep({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Cp(),ed].filter(u=>!!u),issueData:{code:se.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof iu){const a=this;return _n(async function(...l){const u=new oi([]),c=await a._def.args.parseAsync(l,s).catch(f=>{throw u.addIssue(r(l,f)),u}),d=await Reflect.apply(o,this,c);return await a._def.returns._def.type.parseAsync(d,s).catch(f=>{throw u.addIssue(i(d,f)),u})})}else{const a=this;return _n(function(...l){const u=a._def.args.safeParse(l,s);if(!u.success)throw new oi([r(l,u.error)]);const c=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(c,s);if(!d.success)throw new oi([i(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new $l({...this._def,args:Hi.create(e).rest(wa.create())})}returns(e){return new $l({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new $l({args:e||Hi.create([]).rest(wa.create()),returns:n||wa.create(),typeName:Me.ZodFunction,...Ie(r)})}}class ld extends Fe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ld.create=(t,e)=>new ld({getter:t,typeName:Me.ZodLazy,...Ie(e)});class ud extends Fe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ye(n,{received:n.data,code:se.invalid_literal,expected:this._def.value}),Re}return{status:"valid",value:e.data}}get value(){return this._def.value}}ud.create=(t,e)=>new ud({value:t,typeName:Me.ZodLiteral,...Ie(e)});function TN(t,e){return new $o({values:t,typeName:Me.ZodEnum,...Ie(e)})}class $o extends Fe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ye(n,{expected:Ye.joinValues(r),received:n.parsedType,code:se.invalid_type}),Re}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return ye(n,{received:n.data,code:se.invalid_enum_value,options:r}),Re}return _n(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return $o.create(e)}exclude(e){return $o.create(this.options.filter(n=>!e.includes(n)))}}$o.create=TN;class cd extends Fe{_parse(e){const n=Ye.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ge.string&&r.parsedType!==ge.number){const i=Ye.objectValues(n);return ye(r,{expected:Ye.joinValues(i),received:r.parsedType,code:se.invalid_type}),Re}if(n.indexOf(e.data)===-1){const i=Ye.objectValues(n);return ye(r,{received:r.data,code:se.invalid_enum_value,options:i}),Re}return _n(e.data)}get enum(){return this._def.values}}cd.create=(t,e)=>new cd({values:t,typeName:Me.ZodNativeEnum,...Ie(e)});class iu extends Fe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ge.promise&&n.common.async===!1)return ye(n,{code:se.invalid_type,expected:ge.promise,received:n.parsedType}),Re;const r=n.parsedType===ge.promise?n.data:Promise.resolve(n.data);return _n(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}iu.create=(t,e)=>new iu({type:t,typeName:Me.ZodPromise,...Ie(e)});class fi extends Fe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{ye(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Re:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Re:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!td(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>td(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Ye.assertNever(i)}}fi.create=(t,e,n)=>new fi({schema:t,typeName:Me.ZodEffects,effect:e,...Ie(n)});fi.createWithPreprocess=(t,e,n)=>new fi({schema:e,effect:{type:"preprocess",transform:t},typeName:Me.ZodEffects,...Ie(n)});class ys extends Fe{_parse(e){return this._getType(e)===ge.undefined?_n(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ys.create=(t,e)=>new ys({innerType:t,typeName:Me.ZodOptional,...Ie(e)});class Ma extends Fe{_parse(e){return this._getType(e)===ge.null?_n(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ma.create=(t,e)=>new Ma({innerType:t,typeName:Me.ZodNullable,...Ie(e)});class dd extends Fe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ge.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}dd.create=(t,e)=>new dd({innerType:t,typeName:Me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ie(e)});class Op extends Fe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Ap(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new oi(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new oi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Op.create=(t,e)=>new Op({innerType:t,typeName:Me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ie(e)});class Tp extends Fe{_parse(e){if(this._getType(e)!==ge.nan){const r=this._getOrReturnCtx(e);return ye(r,{code:se.invalid_type,expected:ge.nan,received:r.parsedType}),Re}return{status:"valid",value:e.data}}}Tp.create=t=>new Tp({typeName:Me.ZodNaN,...Ie(t)});const v5=Symbol("zod_brand");class MN extends Fe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Wd extends Fe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Re:s.status==="dirty"?(n.dirty(),ON(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Re:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Wd({in:e,out:n,typeName:Me.ZodPipeline})}}class Mp extends Fe{_parse(e){const n=this._def.innerType._parse(e);return td(n)&&(n.value=Object.freeze(n.value)),n}}Mp.create=(t,e)=>new Mp({innerType:t,typeName:Me.ZodReadonly,...Ie(e)});const _N=(t,e={},n)=>t?ru.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...u,fatal:l})}}):ru.create(),w5={object:Et.lazycreate};var Me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Me||(Me={}));const b5=(t,e={message:`Input not instance of ${t.name}`})=>_N(n=>n instanceof t,e),RN=ti.create,DN=Po.create,x5=Tp.create,S5=No.create,IN=nd.create,k5=Oa.create,C5=Pp.create,E5=rd.create,A5=id.create,P5=ru.create,N5=wa.create,$5=Ps.create,O5=Np.create,T5=ai.create,M5=Et.create,_5=Et.strictCreate,R5=sd.create,D5=Zm.create,I5=od.create,L5=Hi.create,B5=ad.create,z5=$p.create,j5=Ta.create,F5=$l.create,U5=ld.create,V5=ud.create,H5=$o.create,W5=cd.create,G5=iu.create,dk=fi.create,K5=ys.create,X5=Ma.create,Z5=fi.createWithPreprocess,Y5=Wd.create,J5=()=>RN().optional(),q5=()=>DN().optional(),Q5=()=>IN().optional(),e6={string:t=>ti.create({...t,coerce:!0}),number:t=>Po.create({...t,coerce:!0}),boolean:t=>nd.create({...t,coerce:!0}),bigint:t=>No.create({...t,coerce:!0}),date:t=>Oa.create({...t,coerce:!0})},t6=Re;var zs=Object.freeze({__proto__:null,defaultErrorMap:ed,setErrorMap:s5,getErrorMap:Cp,makeIssue:Ep,EMPTY_PATH:o5,addIssueToContext:ye,ParseStatus:xn,INVALID:Re,DIRTY:ON,OK:_n,isAborted:Ev,isDirty:Av,isValid:td,isAsync:Ap,get util(){return Ye},get objectUtil(){return Cv},ZodParsedType:ge,getParsedType:qs,ZodType:Fe,ZodString:ti,ZodNumber:Po,ZodBigInt:No,ZodBoolean:nd,ZodDate:Oa,ZodSymbol:Pp,ZodUndefined:rd,ZodNull:id,ZodAny:ru,ZodUnknown:wa,ZodNever:Ps,ZodVoid:Np,ZodArray:ai,ZodObject:Et,ZodUnion:sd,ZodDiscriminatedUnion:Zm,ZodIntersection:od,ZodTuple:Hi,ZodRecord:ad,ZodMap:$p,ZodSet:Ta,ZodFunction:$l,ZodLazy:ld,ZodLiteral:ud,ZodEnum:$o,ZodNativeEnum:cd,ZodPromise:iu,ZodEffects:fi,ZodTransformer:fi,ZodOptional:ys,ZodNullable:Ma,ZodDefault:dd,ZodCatch:Op,ZodNaN:Tp,BRAND:v5,ZodBranded:MN,ZodPipeline:Wd,ZodReadonly:Mp,custom:_N,Schema:Fe,ZodSchema:Fe,late:w5,get ZodFirstPartyTypeKind(){return Me},coerce:e6,any:P5,array:T5,bigint:S5,boolean:IN,date:k5,discriminatedUnion:D5,effect:dk,enum:H5,function:F5,instanceof:b5,intersection:I5,lazy:U5,literal:V5,map:z5,nan:x5,nativeEnum:W5,never:$5,null:A5,nullable:X5,number:DN,object:M5,oboolean:Q5,onumber:q5,optional:K5,ostring:J5,pipeline:Y5,preprocess:Z5,promise:G5,record:B5,set:j5,strictObject:_5,string:RN,symbol:C5,transformer:dk,tuple:L5,undefined:E5,union:R5,unknown:N5,void:O5,NEVER:t6,ZodIssueCode:se,quotelessJson:i5,ZodError:oi});const LN=["randomize","clean","unchanged"],BN=["pio-switches-and-leds","pio-printer","handshake"],Nv=zs.object({language:zs.enum(NN).catch(r6),dataOnLoad:zs.enum(LN).catch("randomize"),devices:zs.enum(BN).catch("pio-switches-and-leds"),animations:zs.boolean().catch(!0),executionUnit:zs.number().min(1).max(500).catch(150),clockSpeed:zs.number().min(100).max(3e3).catch(1e3),printerSpeed:zs.number().min(500).max(2e4).catch(5e3)}),n6=Nv.parse({});function r6(){const t=navigator.language.toLowerCase();for(const e of NN)if(t.startsWith(e))return e;return"en"}const Eu=n5("vonsim-settings",n6,{getItem(t,e){try{const n=localStorage.getItem(t);return Nv.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const r=i=>{if(i.storageArea===localStorage&&i.key===t){let s;try{s=Nv.parse(JSON.parse(i.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",r),()=>window==null?void 0:window.removeEventListener("storage",r)}},{unstable_getOnInit:!0}),pi=()=>re.get(Eu),i6=()=>Hd(Eu),s6=Ae(t=>t(Eu).language),zN=()=>Mn(s6);Ae(t=>t(Eu).dataOnLoad);const o6=Ae(t=>t(Eu).devices),a6=()=>Mn(o6);Ae(t=>{const e=t(Eu);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});function jN(t){const e=t.charCodeAt(0);return L.fitsUnsigned(e,8)?e:null}function Kb(t){return L.fitsUnsigned(t,8)?String.fromCharCode(t):null}function FN(t){return l6.at(t)??null}const l6=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var vt,Ct;const Ge=class Ge{constructor(e,n){Ee(this,vt,void 0);Ee(this,Ct,void 0);q(this,vt,e|0),q(this,Ct,n)}get size(){return P(this,Ct)}is8bits(){return P(this,Ct)===8}is16bits(){return P(this,Ct)===16}get unsigned(){return P(this,vt)}get signed(){return P(this,vt)<=Ge.maxSignedValue(P(this,Ct))?P(this,vt):P(this,vt)-(Ge.maxValue(P(this,Ct))+1)}get low(){return this.is8bits()?this:Ge.fromUnsigned(P(this,vt)&Ge.maxValue(8),8)}get high(){return this.is8bits()?new Ge(0,8):Ge.fromUnsigned(P(this,vt)>>8&Ge.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Ge.fromUnsigned(P(this,vt)&~Ge.maxValue(8)|e.unsigned,P(this,Ct))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Ge.fromUnsigned(P(this,vt)&Ge.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=P(this,Ct))throw new RangeError(`Index ${e} out of bounds for byte of size ${P(this,Ct)}`);return(P(this,vt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=P(this,Ct))throw new RangeError(`Index ${e} out of bounds for byte of size ${P(this,Ct)}`);return n?Ge.fromUnsigned(P(this,vt)|1<<e,P(this,Ct)):Ge.fromUnsigned(P(this,vt)&~(1<<e),P(this,Ct))}add(e){return e=Number(e),Ge.fromUnsigned(P(this,vt)+e,P(this,Ct))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:P(this,vt)===P(e,vt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(P(this,Ct));for(let n=0;n<P(this,Ct);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return P(this,vt).toString(16).padStart(P(this,Ct)/4,"0").toUpperCase();case"bin":return P(this,vt).toString(2).padStart(P(this,Ct),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return P(this,Ct)===8?Kb(P(this,vt))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return P(this,Ct)===8?FN(P(this,vt))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return P(this,vt)}valueOf(){return P(this,vt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=Ge.minSignedValue(n)&&e<=Ge.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=Ge.minValue()&&e<=Ge.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=Ge.minSignedValue(n)&&e<=Ge.maxSignedValue(n)}static fromUnsigned(e,n){if(!Ge.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new Ge(e,n)}static fromSigned(e,n){if(!Ge.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new Ge(e+Ge.maxValue(n)+1,n):new Ge(e,n)}static fromNumber(e,n){return e<0?Ge.fromSigned(e,n):Ge.fromUnsigned(e,n)}static fromChar(e){const n=jN(e)??-1;return Ge.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*Ge.maxValue(e));return new Ge(n,e)}static zero(e){return new Ge(0,e)}};vt=new WeakMap,Ct=new WeakMap;let L=Ge;var es;const Ks=class Ks{constructor(e){Ee(this,es,void 0);q(this,es,e)}get value(){return P(this,es).unsigned}get byte(){return P(this,es)}toString(e=!0){let n=P(this,es).toString("hex");return e&&(n+="h"),n}toJSON(){return P(this,es).toJSON()}valueOf(){return P(this,es).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ks.MIN_ADDRESS&&e<=Ks.MAX_ADDRESS}static from(e){if(e=Number(e),!Ks.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=L.fromUnsigned(e,16);return new Ks(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let r=e.toString(16).padStart(4,"0").toUpperCase();return n&&(r+="h"),r}};es=new WeakMap,ue(Ks,"MIN_ADDRESS",0),ue(Ks,"MAX_ADDRESS",32767);let be=Ks;var ts;const Xs=class Xs{constructor(e){Ee(this,ts,void 0);q(this,ts,e)}get value(){return P(this,ts).unsigned}get byte(){return P(this,ts)}toString(e=!0){let n=P(this,ts).toString("hex");return e&&(n+="h"),n}toJSON(){return P(this,ts).toJSON()}valueOf(){return P(this,ts).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Xs.MIN_ADDRESS&&e<=Xs.MAX_ADDRESS}static from(e){if(e=Number(e),!Xs.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=L.fromUnsigned(e,8);return new Xs(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let r=e.toString(16).padStart(2,"0").toUpperCase();return n&&(r+="h"),r}};ts=new WeakMap,ue(Xs,"MIN_ADDRESS",0),ue(Xs,"MAX_ADDRESS",127);let qn=Xs;const u6=be.from(be.MAX_ADDRESS).toString(),c6={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${qn.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"One cycle","end-of-instruction":"One instruction",infinity:"Until stop"},stop:"Stop"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${be.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an integer.","address-out-of-range":`Start address must be less or equal to ${u6}.`},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",language:{label:"Language"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which preset of devices to use.","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer (PIO)",handshake:"Printer (Handshake)"},animations:{label:"Animations",description:["Disabling animations, you get faster execution.","Only affects animations affected by the simulation speed (like the CPU).","Other animations (like the clock and the printer) will run at their own speed.","Be careful! Very high simulation speeds without animations can saturate the processor."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"}},footer:{documentation:"Documentation","report-issue":"Report an issue",copyright:"III-LIDI, FI, UNLP"}},d6=be.from(be.MAX_ADDRESS).toString(),h6={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${qn.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Un ciclo","end-of-instruction":"Una instrucción",infinity:"Hasta el final"},stop:"Detener"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",status:{fetching:"Leyendo instrucción...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${be.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${d6}.`},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Teclas",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",language:{label:"Idioma"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué conjunto de dispositivos usar.","pio-switches-and-leds":"Teclas y luces","pio-printer":"Impresora (PIO)",handshake:"Impresora (Handshake)"},animations:{label:"Animaciones",description:["Inhabilitando las animaciones, se obtiene ejecución más rápida.","Solo afecta a las animaciones afectadas por la velocidad de simulación (como la CPU).","Otras animaciones (como el reloj y la impresora) se ejecutarán a su propia velocidad.","¡Cuidado! Velocidades de simulación muy altas sin animaciones puede saturar el procesador."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"}},footer:{documentation:"Documentación","report-issue":"Reportar un error",copyright:"III-LIDI, FI, UNLP"}},Ym=Gb({en:c6,es:h6});function yt(){const t=zN();return(e,...n)=>Ym(t,e,...n)}function f6(){const t=yt();return x.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[x.jsx("a",{href:"/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),x.jsx("span",{className:"px-2",children:"·"}),x.jsx("a",{href:"https://github.com/vonsim/vonsim",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),x.jsx("span",{className:"px-2",children:"·"}),x.jsx("a",{href:"https://github.com/vonsim/vonsim/issues/new?labels=new+version",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.report-issue")}),x.jsx("span",{className:"px-2 max-sm:hidden",children:"·"}),x.jsx("br",{className:"sm:hidden"}),x.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:["© Copyright 2017-",new Date().getFullYear()," — ",t("footer.copyright")]})]})}function UN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=UN(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Ue(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=UN(t))&&(r&&(r+=" "),r+=e);return r}function p6(t,e=globalThis==null?void 0:globalThis.document){const n=hi(t);y.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const $v="dismissableLayer.update",m6="dismissableLayer.pointerDownOutside",g6="dismissableLayer.focusOutside";let hk;const y6=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xb=y.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=t,c=y.useContext(y6),[d,h]=y.useState(null),f=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=y.useState({}),g=Qe(e,A=>h(A)),b=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=b.indexOf(m),w=d?b.indexOf(d):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,C=w>=v,E=v6(A=>{const O=A.target,_=[...c.branches].some(T=>T.contains(O));!C||_||(s==null||s(A),a==null||a(A),A.defaultPrevented||l==null||l())},f),$=w6(A=>{const O=A.target;[...c.branches].some(T=>T.contains(O))||(o==null||o(A),a==null||a(A),A.defaultPrevented||l==null||l())},f);return p6(A=>{w===c.layers.size-1&&(i==null||i(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},f),y.useEffect(()=>{if(d)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(hk=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),fk(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=hk)}},[d,f,r,c]),y.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),fk())},[d,c]),y.useEffect(()=>{const A=()=>p({});return document.addEventListener($v,A),()=>document.removeEventListener($v,A)},[]),y.createElement(Je.div,le({},u,{ref:g,style:{pointerEvents:S?C?"auto":"none":void 0,...t.style},onFocusCapture:Ce(t.onFocusCapture,$.onFocusCapture),onBlurCapture:Ce(t.onBlurCapture,$.onBlurCapture),onPointerDownCapture:Ce(t.onPointerDownCapture,E.onPointerDownCapture)}))});function v6(t,e=globalThis==null?void 0:globalThis.document){const n=hi(t),r=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){VN(m6,n,u,{discrete:!0})};var l=c;const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function w6(t,e=globalThis==null?void 0:globalThis.document){const n=hi(t),r=y.useRef(!1);return y.useEffect(()=>{const i=s=>{s.target&&!r.current&&VN(g6,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function fk(){const t=new CustomEvent($v);document.dispatchEvent(t)}function VN(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?nN(i,s):i.dispatchEvent(s)}let p0=0;function Zb(){y.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:pk()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:pk()),p0++,()=>{p0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),p0--}},[])}function pk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const m0="focusScope.autoFocusOnMount",g0="focusScope.autoFocusOnUnmount",mk={bubbles:!1,cancelable:!0},Yb=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=y.useState(null),u=hi(i),c=hi(s),d=y.useRef(null),h=Qe(e,g=>l(g)),f=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let v=function(E){if(f.paused||!a)return;const $=E.target;a.contains($)?d.current=$:Fs(d.current,{select:!0})},w=function(E){if(f.paused||!a)return;const $=E.relatedTarget;$!==null&&(a.contains($)||Fs(d.current,{select:!0}))},S=function(E){const $=document.activeElement;for(const A of E)A.removedNodes.length>0&&(a!=null&&a.contains($)||Fs(a))};var g=v,b=w,m=S;document.addEventListener("focusin",v),document.addEventListener("focusout",w);const C=new MutationObserver(S);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),C.disconnect()}}},[r,a,f.paused]),y.useEffect(()=>{if(a){yk.add(f);const g=document.activeElement;if(!a.contains(g)){const m=new CustomEvent(m0,mk);a.addEventListener(m0,u),a.dispatchEvent(m),m.defaultPrevented||(b6(E6(HN(a)),{select:!0}),document.activeElement===g&&Fs(a))}return()=>{a.removeEventListener(m0,u),setTimeout(()=>{const m=new CustomEvent(g0,mk);a.addEventListener(g0,c),a.dispatchEvent(m),m.defaultPrevented||Fs(g??document.body,{select:!0}),a.removeEventListener(g0,c),yk.remove(f)},0)}}},[a,u,c,f]);const p=y.useCallback(g=>{if(!n&&!r||f.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,m=document.activeElement;if(b&&m){const v=g.currentTarget,[w,S]=x6(v);w&&S?!g.shiftKey&&m===S?(g.preventDefault(),n&&Fs(w,{select:!0})):g.shiftKey&&m===w&&(g.preventDefault(),n&&Fs(S,{select:!0})):m===v&&g.preventDefault()}},[n,r,f.paused]);return y.createElement(Je.div,le({tabIndex:-1},o,{ref:h,onKeyDown:p}))});function b6(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Fs(r,{select:e}),document.activeElement!==n)return}function x6(t){const e=HN(t),n=gk(e,t),r=gk(e.reverse(),t);return[n,r]}function HN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function gk(t,e){for(const n of t)if(!S6(n,{upTo:e}))return n}function S6(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function k6(t){return t instanceof HTMLInputElement&&"select"in t}function Fs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&k6(t)&&e&&t.select()}}const yk=C6();function C6(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=vk(t,e),t.unshift(e)},remove(e){var n;t=vk(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function vk(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function E6(t){return t.filter(e=>e.tagName!=="A")}function Au(t){return t.split("-")[1]}function Jb(t){return t==="y"?"height":"width"}function vs(t){return t.split("-")[0]}function ja(t){return["top","bottom"].includes(vs(t))?"x":"y"}function wk(t,e,n){let{reference:r,floating:i}=t;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=ja(e),l=Jb(a),u=r[l]/2-i[l]/2,c=a==="x";let d;switch(vs(e)){case"top":d={x:s,y:r.y-i.height};break;case"bottom":d={x:s,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:o};break;case"left":d={x:r.x-i.width,y:o};break;default:d={x:r.x,y:r.y}}switch(Au(e)){case"start":d[a]-=u*(n&&c?-1:1);break;case"end":d[a]+=u*(n&&c?-1:1)}return d}const A6=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:d}=wk(u,r,l),h=r,f={},p=0;for(let g=0;g<a.length;g++){const{name:b,fn:m}=a[g],{x:v,y:w,data:S,reset:C}=await m({x:c,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=v??c,d=w??d,f={...f,[b]:{...f[b],...S}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):C.rects),{x:c,y:d}=wk(u,h,l)),g=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:f}};function Ns(t,e){return typeof t=="function"?t(e):t}function WN(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function _p(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function hd(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Ns(e,t),p=WN(f),g=a[h?d==="floating"?"reference":"floating":d],b=_p(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),m=d==="floating"?{...o.floating,x:r,y:i}:o.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(v))&&await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1},S=_p(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m,offsetParent:v,strategy:l}):m);return{top:(b.top-S.top+p.top)/w.y,bottom:(S.bottom-b.bottom+p.bottom)/w.y,left:(b.left-S.left+p.left)/w.x,right:(S.right-b.right+p.right)/w.x}}const fd=Math.min,na=Math.max;function Ov(t,e,n){return na(t,fd(e,n))}const bk=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a}=e,{element:l,padding:u=0}=Ns(t,e)||{};if(l==null)return{};const c=WN(u),d={x:n,y:r},h=ja(i),f=Jb(h),p=await o.getDimensions(l),g=h==="y",b=g?"top":"left",m=g?"bottom":"right",v=g?"clientHeight":"clientWidth",w=s.reference[f]+s.reference[h]-d[h]-s.floating[f],S=d[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let E=C?C[v]:0;E&&await(o.isElement==null?void 0:o.isElement(C))||(E=a.floating[v]||s.floating[f]);const $=w/2-S/2,A=E/2-p[f]/2-1,O=fd(c[b],A),_=fd(c[m],A),T=O,z=E-p[f]-_,j=E/2-p[f]/2+$,B=Ov(T,j,z),K=Au(i)!=null&&j!=B&&s.reference[f]/2-(j<T?O:_)-p[f]/2<0?j<T?T-j:z-j:0;return{[h]:d[h]-K,data:{[h]:B,centerOffset:j-B+K}}}}),GN=["top","right","bottom","left"];GN.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const P6={left:"right",right:"left",bottom:"top",top:"bottom"};function Rp(t){return t.replace(/left|right|bottom|top/g,e=>P6[e])}function N6(t,e,n){n===void 0&&(n=!1);const r=Au(t),i=ja(t),s=Jb(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Rp(o)),{main:o,cross:Rp(o)}}const $6={start:"end",end:"start"};function y0(t){return t.replace(/start|end/g,e=>$6[e])}const O6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...g}=Ns(t,e),b=vs(r),m=vs(o)===o,v=await(a.isRTL==null?void 0:a.isRTL(l.floating)),w=d||(m||!p?[Rp(o)]:function(T){const z=Rp(T);return[y0(T),z,y0(z)]}(o));d||f==="none"||w.push(...function(T,z,j,B){const K=Au(T);let Z=function(Q,V,M){const U=["left","right"],J=["right","left"],ne=["top","bottom"],me=["bottom","top"];switch(Q){case"top":case"bottom":return M?V?J:U:V?U:J;case"left":case"right":return V?ne:me;default:return[]}}(vs(T),j==="start",B);return K&&(Z=Z.map(Q=>Q+"-"+K),z&&(Z=Z.concat(Z.map(y0)))),Z}(o,p,f,v));const S=[o,...w],C=await hd(e,g),E=[];let $=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&E.push(C[b]),c){const{main:T,cross:z}=N6(r,s,v);E.push(C[T],C[z])}if($=[...$,{placement:r,overflows:E}],!E.every(T=>T<=0)){var A,O;const T=(((A=i.flip)==null?void 0:A.index)||0)+1,z=S[T];if(z)return{data:{index:T,overflows:$},reset:{placement:z}};let j=(O=$.filter(B=>B.overflows[0]<=0).sort((B,K)=>B.overflows[1]-K.overflows[1])[0])==null?void 0:O.placement;if(!j)switch(h){case"bestFit":{var _;const B=(_=$.map(K=>[K.placement,K.overflows.filter(Z=>Z>0).reduce((Z,Q)=>Z+Q,0)]).sort((K,Z)=>K[1]-Z[1])[0])==null?void 0:_[0];B&&(j=B);break}case"initialPlacement":j=o}if(r!==j)return{reset:{placement:j}}}return{}}}};function xk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Sk(t){return GN.some(e=>t[e]>=0)}const T6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Ns(t,e);switch(r){case"referenceHidden":{const s=xk(await hd(e,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Sk(s)}}}case"escaped":{const s=xk(await hd(e,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:Sk(s)}}}default:return{}}}}},M6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await async function(s,o){const{placement:a,platform:l,elements:u}=s,c=await(l.isRTL==null?void 0:l.isRTL(u.floating)),d=vs(a),h=Au(a),f=ja(a)==="x",p=["left","top"].includes(d)?-1:1,g=c&&f?-1:1,b=Ns(o,s);let{mainAxis:m,crossAxis:v,alignmentAxis:w}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return h&&typeof w=="number"&&(v=h==="end"?-1*w:w),f?{x:v*g,y:m*p}:{x:m*p,y:v*g}}(e,t);return{x:n+i.x,y:r+i.y,data:i}}}};function KN(t){return t==="x"?"y":"x"}const _6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:m,y:v}=b;return{x:m,y:v}}},...l}=Ns(t,e),u={x:n,y:r},c=await hd(e,l),d=ja(vs(i)),h=KN(d);let f=u[d],p=u[h];if(s){const b=d==="y"?"bottom":"right";f=Ov(f+c[d==="y"?"top":"left"],f,f-c[b])}if(o){const b=h==="y"?"bottom":"right";p=Ov(p+c[h==="y"?"top":"left"],p,p-c[b])}const g=a.fn({...e,[d]:f,[h]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}},R6=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Ns(t,e),c={x:n,y:r},d=ja(i),h=KN(d);let f=c[d],p=c[h];const g=Ns(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=d==="y"?"height":"width",S=s.reference[d]-s.floating[w]+b.mainAxis,C=s.reference[d]+s.reference[w]-b.mainAxis;f<S?f=S:f>C&&(f=C)}if(u){var m,v;const w=d==="y"?"width":"height",S=["top","left"].includes(vs(i)),C=s.reference[h]-s.floating[w]+(S&&((m=o.offset)==null?void 0:m[h])||0)+(S?0:b.crossAxis),E=s.reference[h]+s.reference[w]+(S?0:((v=o.offset)==null?void 0:v[h])||0)-(S?b.crossAxis:0);p<C?p=C:p>E&&(p=E)}return{[d]:f,[h]:p}}}},D6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=Ns(t,e),l=await hd(e,a),u=vs(n),c=Au(n),d=ja(n)==="x",{width:h,height:f}=r.floating;let p,g;u==="top"||u==="bottom"?(p=u,g=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=u,p=c==="end"?"top":"bottom");const b=f-l[p],m=h-l[g],v=!e.middlewareData.shift;let w=b,S=m;if(d){const E=h-l.left-l.right;S=c||v?fd(m,E):E}else{const E=f-l.top-l.bottom;w=c||v?fd(b,E):E}if(v&&!c){const E=na(l.left,0),$=na(l.right,0),A=na(l.top,0),O=na(l.bottom,0);d?S=h-2*(E!==0||$!==0?E+$:na(l.left,l.right)):w=f-2*(A!==0||O!==0?A+O:na(l.top,l.bottom))}await o({...e,availableWidth:S,availableHeight:w});const C=await i.getDimensions(s.floating);return h!==C.width||f!==C.height?{reset:{rects:!0}}:{}}}};function fr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Wi(t){return fr(t).getComputedStyle(t)}function XN(t){return t instanceof fr(t).Node}function Oo(t){return XN(t)?(t.nodeName||"").toLowerCase():"#document"}function mi(t){return t instanceof HTMLElement||t instanceof fr(t).HTMLElement}function kk(t){return typeof ShadowRoot<"u"&&(t instanceof fr(t).ShadowRoot||t instanceof ShadowRoot)}function pd(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Wi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function I6(t){return["table","td","th"].includes(Oo(t))}function Tv(t){const e=qb(),n=Wi(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function qb(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Jm(t){return["html","body","#document"].includes(Oo(t))}const Mv=Math.min,Ol=Math.max,Dp=Math.round,$h=Math.floor,To=t=>({x:t,y:t});function ZN(t){const e=Wi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=mi(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Dp(n)!==s||Dp(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function ws(t){return t instanceof Element||t instanceof fr(t).Element}function Qb(t){return ws(t)?t:t.contextElement}function Tl(t){const e=Qb(t);if(!mi(e))return To(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=ZN(e);let o=(s?Dp(n.width):n.width)/r,a=(s?Dp(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const L6=To(0);function YN(t){const e=fr(t);return qb()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:L6}function _a(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Qb(t);let o=To(1);e&&(r?ws(r)&&(o=Tl(r)):o=Tl(t));const a=function(h,f,p){return f===void 0&&(f=!1),!(!p||f&&p!==fr(h))&&f}(s,n,r)?YN(s):To(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const h=fr(s),f=r&&ws(r)?fr(r):r;let p=h.frameElement;for(;p&&r&&f!==h;){const g=Tl(p),b=p.getBoundingClientRect(),m=getComputedStyle(p),v=b.left+(p.clientLeft+parseFloat(m.paddingLeft))*g.x,w=b.top+(p.clientTop+parseFloat(m.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=v,u+=w,p=fr(p).frameElement}}return _p({width:c,height:d,x:l,y:u})}function qm(t){return ws(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function bs(t){var e;return(e=(XN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function JN(t){return _a(bs(t)).left+qm(t).scrollLeft}function su(t){if(Oo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||kk(t)&&t.host||bs(t);return kk(e)?e.host:e}function qN(t){const e=su(t);return Jm(e)?t.ownerDocument?t.ownerDocument.body:t.body:mi(e)&&pd(e)?e:qN(e)}function Ip(t,e){var n;e===void 0&&(e=[]);const r=qN(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=fr(r);return i?e.concat(s,s.visualViewport||[],pd(r)?r:[]):e.concat(r,Ip(r))}function Ck(t,e,n){let r;if(e==="viewport")r=function(i,s){const o=fr(i),a=bs(i),l=o.visualViewport;let u=a.clientWidth,c=a.clientHeight,d=0,h=0;if(l){u=l.width,c=l.height;const f=qb();(!f||f&&s==="fixed")&&(d=l.offsetLeft,h=l.offsetTop)}return{width:u,height:c,x:d,y:h}}(t,n);else if(e==="document")r=function(i){const s=bs(i),o=qm(i),a=i.ownerDocument.body,l=Ol(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),u=Ol(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let c=-o.scrollLeft+JN(i);const d=-o.scrollTop;return Wi(a).direction==="rtl"&&(c+=Ol(s.clientWidth,a.clientWidth)-l),{width:l,height:u,x:c,y:d}}(bs(t));else if(ws(e))r=function(i,s){const o=_a(i,!0,s==="fixed"),a=o.top+i.clientTop,l=o.left+i.clientLeft,u=mi(i)?Tl(i):To(1);return{width:i.clientWidth*u.x,height:i.clientHeight*u.y,x:l*u.x,y:a*u.y}}(e,n);else{const i=YN(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return _p(r)}function QN(t,e){const n=su(t);return!(n===e||!ws(n)||Jm(n))&&(Wi(n).position==="fixed"||QN(n,e))}function B6(t,e,n){const r=mi(e),i=bs(e),s=n==="fixed",o=_a(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=To(0);if(r||!r&&!s)if((Oo(e)!=="body"||pd(i))&&(a=qm(e)),mi(e)){const u=_a(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else i&&(l.x=JN(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Ek(t,e){return mi(t)&&Wi(t).position!=="fixed"?e?e(t):t.offsetParent:null}function Ak(t,e){const n=fr(t);if(!mi(t))return n;let r=Ek(t,e);for(;r&&I6(r)&&Wi(r).position==="static";)r=Ek(r,e);return r&&(Oo(r)==="html"||Oo(r)==="body"&&Wi(r).position==="static"&&!Tv(r))?n:r||function(i){let s=su(i);for(;mi(s)&&!Jm(s);){if(Tv(s))return s;s=su(s)}return null}(t)||n}const z6={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=mi(n),s=bs(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=To(1);const l=To(0);if((i||!i&&r!=="fixed")&&((Oo(n)!=="body"||pd(s))&&(o=qm(n)),mi(n))){const u=_a(n);a=Tl(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},getDocumentElement:bs,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?function(l,u){const c=u.get(l);if(c)return c;let d=Ip(l).filter(g=>ws(g)&&Oo(g)!=="body"),h=null;const f=Wi(l).position==="fixed";let p=f?su(l):l;for(;ws(p)&&!Jm(p);){const g=Wi(p),b=Tv(p);b||g.position!=="fixed"||(h=null),(f?!b&&!h:!b&&g.position==="static"&&h&&["absolute","fixed"].includes(h.position)||pd(p)&&!b&&QN(l,p))?d=d.filter(m=>m!==p):h=g,p=su(p)}return u.set(l,d),d}(e,this._c):[].concat(n),r],o=s[0],a=s.reduce((l,u)=>{const c=Ck(e,u,i);return l.top=Ol(c.top,l.top),l.right=Mv(c.right,l.right),l.bottom=Mv(c.bottom,l.bottom),l.left=Ol(c.left,l.left),l},Ck(e,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:Ak,getElementRects:async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||Ak,s=this.getDimensions;return{reference:B6(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return ZN(t)},getScale:Tl,isElement:ws,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function j6(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Qb(t),c=i||s?[...u?Ip(u):[],...Ip(e)]:[];c.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const d=u&&a?function(b,m){let v,w=null;const S=bs(b);function C(){clearTimeout(v),w&&w.disconnect(),w=null}return function E($,A){$===void 0&&($=!1),A===void 0&&(A=1),C();const{left:O,top:_,width:T,height:z}=b.getBoundingClientRect();if($||m(),!T||!z)return;const j={rootMargin:-$h(_)+"px "+-$h(S.clientWidth-(O+T))+"px "+-$h(S.clientHeight-(_+z))+"px "+-$h(O)+"px",threshold:Ol(0,Mv(1,A))||1};let B=!0;function K(Z){const Q=Z[0].intersectionRatio;if(Q!==A){if(!B)return E();Q?E(!1,Q):v=setTimeout(()=>{E(!1,1e-7)},100)}B=!1}try{w=new IntersectionObserver(K,{...j,root:S.ownerDocument})}catch{w=new IntersectionObserver(K,j)}w.observe(b)}(!0),C}(u,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(b=>{let[m]=b;m&&m.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let g=l?_a(t):null;return l&&function b(){const m=_a(t);!g||m.x===g.x&&m.y===g.y&&m.width===g.width&&m.height===g.height||n(),g=m,h=requestAnimationFrame(b)}(),n(),()=>{c.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const F6=(t,e,n)=>{const r=new Map,i={platform:z6,...n},s={...i.platform,_c:r};return A6(t,e,{...i,platform:s})},U6=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?bk({element:r.current,padding:i}).fn(n):{}:r?bk({element:r,padding:i}).fn(n):{}}}};var $f=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Lp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Lp(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Lp(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function e$(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Pk(t,e){const n=e$(t);return Math.round(e*n)/n}function Nk(t){const e=y.useRef(t);return $f(()=>{e.current=t}),e}function V6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=y.useState(r);Lp(h,r)||f(r);const[p,g]=y.useState(null),[b,m]=y.useState(null),v=y.useCallback(Z=>{Z!=E.current&&(E.current=Z,g(Z))},[g]),w=y.useCallback(Z=>{Z!==$.current&&($.current=Z,m(Z))},[m]),S=s||p,C=o||b,E=y.useRef(null),$=y.useRef(null),A=y.useRef(c),O=Nk(l),_=Nk(i),T=y.useCallback(()=>{if(!E.current||!$.current)return;const Z={placement:e,strategy:n,middleware:h};_.current&&(Z.platform=_.current),F6(E.current,$.current,Z).then(Q=>{const V={...Q,isPositioned:!0};z.current&&!Lp(A.current,V)&&(A.current=V,Fo.flushSync(()=>{d(V)}))})},[h,e,n,_]);$f(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d(Z=>({...Z,isPositioned:!1})))},[u]);const z=y.useRef(!1);$f(()=>(z.current=!0,()=>{z.current=!1}),[]),$f(()=>{if(S&&(E.current=S),C&&($.current=C),S&&C){if(O.current)return O.current(S,C,T);T()}},[S,C,T,O]);const j=y.useMemo(()=>({reference:E,floating:$,setReference:v,setFloating:w}),[v,w]),B=y.useMemo(()=>({reference:S,floating:C}),[S,C]),K=y.useMemo(()=>{const Z={position:n,left:0,top:0};if(!B.floating)return Z;const Q=Pk(B.floating,c.x),V=Pk(B.floating,c.y);return a?{...Z,transform:"translate("+Q+"px, "+V+"px)",...e$(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Q,top:V}},[n,a,B.floating,c.x,c.y]);return y.useMemo(()=>({...c,update:T,refs:j,elements:B,floatingStyles:K}),[c,T,j,B,K])}function e1(t){const[e,n]=y.useState(void 0);return di(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const t$="Popper",[n$,Pu]=Xi(t$),[H6,r$]=n$(t$),W6=t=>{const{__scopePopper:e,children:n}=t,[r,i]=y.useState(null);return y.createElement(H6,{scope:e,anchor:r,onAnchorChange:i},n)},G6="PopperAnchor",K6=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=r$(G6,n),o=y.useRef(null),a=Qe(e,o);return y.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.createElement(Je.div,le({},i,{ref:a}))}),i$="PopperContent",[X6,LY]=n$(i$),Z6=y.forwardRef((t,e)=>{var n,r,i,s,o,a,l,u;const{__scopePopper:c,side:d="bottom",sideOffset:h=0,align:f="center",alignOffset:p=0,arrowPadding:g=0,collisionBoundary:b=[],collisionPadding:m=0,sticky:v="partial",hideWhenDetached:w=!1,avoidCollisions:S=!0,onPlaced:C,...E}=t,$=r$(i$,c),[A,O]=y.useState(null),_=Qe(e,Y=>O(Y)),[T,z]=y.useState(null),j=e1(T),B=(n=j==null?void 0:j.width)!==null&&n!==void 0?n:0,K=(r=j==null?void 0:j.height)!==null&&r!==void 0?r:0,Z=d+(f!=="center"?"-"+f:""),Q=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},V=Array.isArray(b)?b:[b],M=V.length>0,U={padding:Q,boundary:V.filter(Y6),altBoundary:M},{refs:J,floatingStyles:ne,placement:me,isPositioned:H,middlewareData:I}=V6({strategy:"fixed",placement:Z,whileElementsMounted:j6,elements:{reference:$.anchor},middleware:[M6({mainAxis:h+K,alignmentAxis:p}),S&&_6({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?R6():void 0,...U}),S&&O6({...U}),D6({...U,apply:({elements:Y,rects:ee,availableWidth:Oe,availableHeight:he})=>{const{width:Te,height:De}=ee.reference,ve=Y.floating.style;ve.setProperty("--radix-popper-available-width",`${Oe}px`),ve.setProperty("--radix-popper-available-height",`${he}px`),ve.setProperty("--radix-popper-anchor-width",`${Te}px`),ve.setProperty("--radix-popper-anchor-height",`${De}px`)}}),T&&U6({element:T,padding:g}),J6({arrowWidth:B,arrowHeight:K}),w&&T6({strategy:"referenceHidden"})]}),[G,k]=s$(me),N=hi(C);di(()=>{H&&(N==null||N())},[H,N]);const D=(i=I.arrow)===null||i===void 0?void 0:i.x,R=(s=I.arrow)===null||s===void 0?void 0:s.y,F=((o=I.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[X,W]=y.useState();return di(()=>{A&&W(window.getComputedStyle(A).zIndex)},[A]),y.createElement("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...ne,transform:H?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(a=I.transformOrigin)===null||a===void 0?void 0:a.x,(l=I.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},y.createElement(X6,{scope:c,placedSide:G,onArrowChange:z,arrowX:D,arrowY:R,shouldHideArrow:F},y.createElement(Je.div,le({"data-side":G,"data-align":k},E,{ref:_,style:{...E.style,animation:H?void 0:"none",opacity:(u=I.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function Y6(t){return t!==null}const J6=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:u}=e,d=((n=u.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=d?0:t.arrowWidth,f=d?0:t.arrowHeight,[p,g]=s$(a),b={start:"0%",center:"50%",end:"100%"}[g],m=((r=(i=u.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+h/2,v=((s=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+f/2;let w="",S="";return p==="bottom"?(w=d?b:`${m}px`,S=`${-f}px`):p==="top"?(w=d?b:`${m}px`,S=`${l.floating.height+f}px`):p==="right"?(w=`${-f}px`,S=d?b:`${v}px`):p==="left"&&(w=`${l.floating.width+f}px`,S=d?b:`${v}px`),{data:{x:w,y:S}}}});function s$(t){const[e,n="center"]=t.split("-");return[e,n]}const t1=W6,n1=K6,r1=Z6,i1=y.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?eN.createPortal(y.createElement(Je.div,le({},i,{ref:e})),r):null});var q6=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ya=new WeakMap,Oh=new WeakMap,Th={},v0=0,o$=function(t){return t&&(t.host||o$(t.parentNode))},Q6=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=o$(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},e4=function(t,e,n,r){var i=Q6(e,Array.isArray(t)?t:[t]);Th[n]||(Th[n]=new WeakMap);var s=Th[n],o=[],a=new Set,l=new Set(i),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};i.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else{var f=h.getAttribute(r),p=f!==null&&f!=="false",g=(Ya.get(h)||0)+1,b=(s.get(h)||0)+1;Ya.set(h,g),s.set(h,b),o.push(h),g===1&&p&&Oh.set(h,!0),b===1&&h.setAttribute(n,"true"),p||h.setAttribute(r,"true")}})};return c(e),a.clear(),v0++,function(){o.forEach(function(d){var h=Ya.get(d)-1,f=s.get(d)-1;Ya.set(d,h),s.set(d,f),h||(Oh.has(d)||d.removeAttribute(r),Oh.delete(d)),f||d.removeAttribute(n)}),v0--,v0||(Ya=new WeakMap,Ya=new WeakMap,Oh=new WeakMap,Th={})}},s1=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||q6(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),e4(r,i,n,"aria-hidden")):function(){return null}},_i=function(){return _i=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_i.apply(this,arguments)};function a$(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function t4(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Of="right-scroll-bar-position",Tf="width-before-scroll-bar",n4="with-scroll-bars-hidden",r4="--removed-body-scroll-bar-size";function i4(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function s4(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}function o4(t,e){return s4(e||null,function(n){return t.forEach(function(r){return i4(r,n)})})}function a4(t){return t}function l4(t,e){e===void 0&&(e=a4);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return i}function u4(t){t===void 0&&(t={});var e=l4(null);return e.options=_i({async:!0,ssr:!1},t),e}var l$=function(t){var e=t.sideCar,n=a$(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,_i({},n))};l$.isSideCarExport=!0;function c4(t,e){return t.useMedium(e),l$}var u$=u4(),w0=function(){},Qm=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:w0,onWheelCapture:w0,onTouchMoveCapture:w0}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,g=t.allowPinchZoom,b=t.as,m=b===void 0?"div":b,v=a$(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,S=o4([n,e]),C=_i(_i({},v),i);return y.createElement(y.Fragment,null,c&&y.createElement(w,{sideCar:u$,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n}),o?y.cloneElement(y.Children.only(a),_i(_i({},C),{ref:S})):y.createElement(m,_i({},C,{className:l,ref:S}),a))});Qm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qm.classNames={fullWidth:Tf,zeroRight:Of};var $k,d4=function(){if($k)return $k;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function h4(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=d4();return e&&t.setAttribute("nonce",e),t}function f4(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function p4(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var m4=function(){var t=0,e=null;return{add:function(n){t==0&&(e=h4())&&(f4(e,n),p4(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},g4=function(){var t=m4();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},c$=function(){var t=g4(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},y4={left:0,top:0,right:0,gap:0},b0=function(t){return parseInt(t||"",10)||0},v4=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[b0(n),b0(r),b0(i)]},w4=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return y4;var e=v4(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},b4=c$(),x4=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(n4,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Of,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Tf,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Of," .").concat(Of,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Tf," .").concat(Tf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(r4,": ").concat(a,`px;
  }
`)},S4=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r,s=y.useMemo(function(){return w4(i)},[i]);return y.createElement(b4,{styles:x4(s,!e,i,n?"":"!important")})},_v=!1;if(typeof window<"u")try{var Mh=Object.defineProperty({},"passive",{get:function(){return _v=!0,!0}});window.addEventListener("test",Mh,Mh),window.removeEventListener("test",Mh,Mh)}catch{_v=!1}var Ja=_v?{passive:!1}:!1,k4=function(t){return t.tagName==="TEXTAREA"},d$=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!k4(t)&&n[e]==="visible")},C4=function(t){return d$(t,"overflowY")},E4=function(t){return d$(t,"overflowX")},Ok=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=h$(t,n);if(r){var i=f$(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},A4=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},P4=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},h$=function(t,e){return t==="v"?C4(e):E4(e)},f$=function(t,e){return t==="v"?A4(e):P4(e)},N4=function(t,e){return t==="h"&&e==="rtl"?-1:1},$4=function(t,e,n,r,i){var s=N4(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=f$(t,a),p=f[0],g=f[1],b=f[2],m=g-b-s*p;(p||m)&&h$(t,a)&&(d+=m,h+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(i&&d===0||!i&&o>d)||!c&&(i&&h===0||!i&&-o>h))&&(u=!0),u},_h=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Tk=function(t){return[t.deltaX,t.deltaY]},Mk=function(t){return t&&"current"in t?t.current:t},O4=function(t,e){return t[0]===e[0]&&t[1]===e[1]},T4=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},M4=0,qa=[];function _4(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),i=y.useState(M4++)[0],s=y.useState(function(){return c$()})[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=t4([t.lockRef.current],(t.shards||[]).map(Mk),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(g,b){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var m=_h(g),v=n.current,w="deltaX"in g?g.deltaX:v[0]-m[0],S="deltaY"in g?g.deltaY:v[1]-m[1],C,E=g.target,$=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in g&&$==="h"&&E.type==="range")return!1;var A=Ok($,E);if(!A)return!0;if(A?C=$:(C=$==="v"?"h":"v",A=Ok($,E)),!A)return!1;if(!r.current&&"changedTouches"in g&&(w||S)&&(r.current=C),!C)return!0;var O=r.current||C;return $4(O,b,g,O==="h"?w:S,!0)},[]),l=y.useCallback(function(g){var b=g;if(!(!qa.length||qa[qa.length-1]!==s)){var m="deltaY"in b?Tk(b):_h(b),v=e.current.filter(function(C){return C.name===b.type&&C.target===b.target&&O4(C.delta,m)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var w=(o.current.shards||[]).map(Mk).filter(Boolean).filter(function(C){return C.contains(b.target)}),S=w.length>0?a(b,w[0]):!o.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),u=y.useCallback(function(g,b,m,v){var w={name:g,delta:b,target:m,should:v};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),c=y.useCallback(function(g){n.current=_h(g),r.current=void 0},[]),d=y.useCallback(function(g){u(g.type,Tk(g),g.target,a(g,t.lockRef.current))},[]),h=y.useCallback(function(g){u(g.type,_h(g),g.target,a(g,t.lockRef.current))},[]);y.useEffect(function(){return qa.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ja),document.addEventListener("touchmove",l,Ja),document.addEventListener("touchstart",c,Ja),function(){qa=qa.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Ja),document.removeEventListener("touchmove",l,Ja),document.removeEventListener("touchstart",c,Ja)}},[]);var f=t.removeScrollBar,p=t.inert;return y.createElement(y.Fragment,null,p?y.createElement(s,{styles:T4(i)}):null,f?y.createElement(S4,{gapMode:"margin"}):null)}const R4=c4(u$,_4);var p$=y.forwardRef(function(t,e){return y.createElement(Qm,_i({},t,{ref:e,sideCar:R4}))});p$.classNames=Qm.classNames;const o1=p$,Rv=["Enter"," "],D4=["ArrowDown","PageUp","Home"],m$=["ArrowUp","PageDown","End"],I4=[...D4,...m$],L4={ltr:[...Rv,"ArrowRight"],rtl:[...Rv,"ArrowLeft"]},B4={ltr:["ArrowLeft"],rtl:["ArrowRight"]},eg="Menu",[md,z4,j4]=Wm(eg),[Fa,g$]=Xi(eg,[j4,Pu,Gm]),a1=Pu(),y$=Gm(),[F4,Ua]=Fa(eg),[U4,Gd]=Fa(eg),V4=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=a1(e),[l,u]=y.useState(null),c=y.useRef(!1),d=hi(s),h=Vd(i);return y.useEffect(()=>{const f=()=>{c.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>c.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),y.createElement(t1,a,y.createElement(F4,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:u},y.createElement(U4,{scope:e,onClose:y.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:h,modal:o},r)))},v$=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=a1(n);return y.createElement(n1,le({},i,r,{ref:e}))}),w$="MenuPortal",[H4,b$]=Fa(w$,{forceMount:void 0}),W4=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Ua(w$,e);return y.createElement(H4,{scope:e,forceMount:n},y.createElement(Uo,{present:n||s.open},y.createElement(i1,{asChild:!0,container:i},r)))},li="MenuContent",[G4,l1]=Fa(li),K4=y.forwardRef((t,e)=>{const n=b$(li,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Ua(li,t.__scopeMenu),o=Gd(li,t.__scopeMenu);return y.createElement(md.Provider,{scope:t.__scopeMenu},y.createElement(Uo,{present:r||s.open},y.createElement(md.Slot,{scope:t.__scopeMenu},o.modal?y.createElement(X4,le({},i,{ref:e})):y.createElement(Z4,le({},i,{ref:e})))))}),X4=y.forwardRef((t,e)=>{const n=Ua(li,t.__scopeMenu),r=y.useRef(null),i=Qe(e,r);return y.useEffect(()=>{const s=r.current;if(s)return s1(s)},[]),y.createElement(u1,le({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ce(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),Z4=y.forwardRef((t,e)=>{const n=Ua(li,t.__scopeMenu);return y.createElement(u1,le({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),u1=y.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...g}=t,b=Ua(li,n),m=Gd(li,n),v=a1(n),w=y$(n),S=z4(n),[C,E]=y.useState(null),$=y.useRef(null),A=Qe(e,$,b.onContentChange),O=y.useRef(0),_=y.useRef(""),T=y.useRef(0),z=y.useRef(null),j=y.useRef("right"),B=y.useRef(0),K=p?o1:y.Fragment,Z=p?{as:Pa,allowPinchZoom:!0}:void 0,Q=M=>{var U,J;const ne=_.current+M,me=S().filter(D=>!D.disabled),H=document.activeElement,I=(U=me.find(D=>D.ref.current===H))===null||U===void 0?void 0:U.textValue,G=me.map(D=>D.textValue),k=dB(G,ne,I),N=(J=me.find(D=>D.textValue===k))===null||J===void 0?void 0:J.ref.current;(function D(R){_.current=R,window.clearTimeout(O.current),R!==""&&(O.current=window.setTimeout(()=>D(""),1e3))})(ne),N&&setTimeout(()=>N.focus())};y.useEffect(()=>()=>window.clearTimeout(O.current),[]),Zb();const V=y.useCallback(M=>{var U,J;return j.current===((U=z.current)===null||U===void 0?void 0:U.side)&&fB(M,(J=z.current)===null||J===void 0?void 0:J.area)},[]);return y.createElement(G4,{scope:n,searchRef:_,onItemEnter:y.useCallback(M=>{V(M)&&M.preventDefault()},[V]),onItemLeave:y.useCallback(M=>{var U;V(M)||((U=$.current)===null||U===void 0||U.focus(),E(null))},[V]),onTriggerLeave:y.useCallback(M=>{V(M)&&M.preventDefault()},[V]),pointerGraceTimerRef:T,onPointerGraceIntentChange:y.useCallback(M=>{z.current=M},[])},y.createElement(K,Z,y.createElement(Yb,{asChild:!0,trapped:i,onMountAutoFocus:Ce(s,M=>{var U;M.preventDefault(),(U=$.current)===null||U===void 0||U.focus()}),onUnmountAutoFocus:o},y.createElement(Xb,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f},y.createElement(sN,le({asChild:!0},w,{dir:m.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:E,onEntryFocus:Ce(l,M=>{m.isUsingKeyboardRef.current||M.preventDefault()})}),y.createElement(r1,le({role:"menu","aria-orientation":"vertical","data-state":E$(b.open),"data-radix-menu-content":"",dir:m.dir},v,g,{ref:A,style:{outline:"none",...g.style},onKeyDown:Ce(g.onKeyDown,M=>{const J=M.target.closest("[data-radix-menu-content]")===M.currentTarget,ne=M.ctrlKey||M.altKey||M.metaKey,me=M.key.length===1;J&&(M.key==="Tab"&&M.preventDefault(),!ne&&me&&Q(M.key));const H=$.current;if(M.target!==H||!I4.includes(M.key))return;M.preventDefault();const G=S().filter(k=>!k.disabled).map(k=>k.ref.current);m$.includes(M.key)&&G.reverse(),uB(G)}),onBlur:Ce(t.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(O.current),_.current="")}),onPointerMove:Ce(t.onPointerMove,gd(M=>{const U=M.target,J=B.current!==M.clientX;if(M.currentTarget.contains(U)&&J){const ne=M.clientX>B.current?"right":"left";j.current=ne,B.current=M.clientX}}))})))))))}),Y4=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return y.createElement(Je.div,le({},r,{ref:e}))}),Dv="MenuItem",_k="menu.itemSelect",c1=y.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=y.useRef(null),o=Gd(Dv,t.__scopeMenu),a=l1(Dv,t.__scopeMenu),l=Qe(e,s),u=y.useRef(!1),c=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(_k,{bubbles:!0,cancelable:!0});d.addEventListener(_k,f=>r==null?void 0:r(f),{once:!0}),nN(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return y.createElement(x$,le({},i,{ref:l,disabled:n,onClick:Ce(t.onClick,c),onPointerDown:d=>{var h;(h=t.onPointerDown)===null||h===void 0||h.call(t,d),u.current=!0},onPointerUp:Ce(t.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)===null||h===void 0||h.click()}),onKeyDown:Ce(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||Rv.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})}))}),x$=y.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=l1(Dv,n),a=y$(n),l=y.useRef(null),u=Qe(e,l),[c,d]=y.useState(!1),[h,f]=y.useState("");return y.useEffect(()=>{const p=l.current;if(p){var g;f(((g=p.textContent)!==null&&g!==void 0?g:"").trim())}},[s.children]),y.createElement(md.ItemSlot,{scope:n,disabled:r,textValue:i??h},y.createElement(oN,le({asChild:!0},a,{focusable:!r}),y.createElement(Je.div,le({role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},s,{ref:u,onPointerMove:Ce(t.onPointerMove,gd(p=>{r?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus())})),onPointerLeave:Ce(t.onPointerLeave,gd(p=>o.onItemLeave(p))),onFocus:Ce(t.onFocus,()=>d(!0)),onBlur:Ce(t.onBlur,()=>d(!1))}))))}),J4=y.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return y.createElement(k$,{scope:t.__scopeMenu,checked:n},y.createElement(c1,le({role:"menuitemcheckbox","aria-checked":Bp(n)?"mixed":n},i,{ref:e,"data-state":d1(n),onSelect:Ce(i.onSelect,()=>r==null?void 0:r(Bp(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),q4="MenuRadioGroup",[BY,Q4]=Fa(q4,{value:void 0,onValueChange:()=>{}}),eB="MenuRadioItem",tB=y.forwardRef((t,e)=>{const{value:n,...r}=t,i=Q4(eB,t.__scopeMenu),s=n===i.value;return y.createElement(k$,{scope:t.__scopeMenu,checked:s},y.createElement(c1,le({role:"menuitemradio","aria-checked":s},r,{ref:e,"data-state":d1(s),onSelect:Ce(r.onSelect,()=>{var o;return(o=i.onValueChange)===null||o===void 0?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})))}),S$="MenuItemIndicator",[k$,nB]=Fa(S$,{checked:!1}),rB=y.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=nB(S$,n);return y.createElement(Uo,{present:r||Bp(s.checked)||s.checked===!0},y.createElement(Je.span,le({},i,{ref:e,"data-state":d1(s.checked)})))}),iB=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return y.createElement(Je.div,le({role:"separator","aria-orientation":"horizontal"},r,{ref:e}))}),sB="MenuSub",[zY,C$]=Fa(sB),Rh="MenuSubTrigger",oB=y.forwardRef((t,e)=>{const n=Ua(Rh,t.__scopeMenu),r=Gd(Rh,t.__scopeMenu),i=C$(Rh,t.__scopeMenu),s=l1(Rh,t.__scopeMenu),o=y.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:t.__scopeMenu},c=y.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return y.useEffect(()=>c,[c]),y.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),y.createElement(v$,le({asChild:!0},u),y.createElement(x$,le({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":E$(n.open)},t,{ref:Hm(e,i.onTriggerChange),onClick:d=>{var h;(h=t.onClick)===null||h===void 0||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ce(t.onPointerMove,gd(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:Ce(t.onPointerLeave,gd(d=>{var h;c();const f=(h=n.content)===null||h===void 0?void 0:h.getBoundingClientRect();if(f){var p;const g=(p=n.content)===null||p===void 0?void 0:p.dataset.side,b=g==="right",m=b?-5:5,v=f[b?"left":"right"],w=f[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+m,y:d.clientY},{x:v,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:v,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ce(t.onKeyDown,d=>{const h=s.searchRef.current!=="";if(!(t.disabled||h&&d.key===" ")&&L4[r.dir].includes(d.key)){var f;n.onOpenChange(!0),(f=n.content)===null||f===void 0||f.focus(),d.preventDefault()}})})))}),aB="MenuSubContent",lB=y.forwardRef((t,e)=>{const n=b$(li,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Ua(li,t.__scopeMenu),o=Gd(li,t.__scopeMenu),a=C$(aB,t.__scopeMenu),l=y.useRef(null),u=Qe(e,l);return y.createElement(md.Provider,{scope:t.__scopeMenu},y.createElement(Uo,{present:r||s.open},y.createElement(md.Slot,{scope:t.__scopeMenu},y.createElement(u1,le({id:a.contentId,"aria-labelledby":a.triggerId},i,{ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)===null||d===void 0||d.focus()),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:Ce(t.onFocusOutside,c=>{c.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ce(t.onEscapeKeyDown,c=>{o.onClose(),c.preventDefault()}),onKeyDown:Ce(t.onKeyDown,c=>{const d=c.currentTarget.contains(c.target),h=B4[o.dir].includes(c.key);if(d&&h){var f;s.onOpenChange(!1),(f=a.trigger)===null||f===void 0||f.focus(),c.preventDefault()}})})))))});function E$(t){return t?"open":"closed"}function Bp(t){return t==="indeterminate"}function d1(t){return Bp(t)?"indeterminate":t?"checked":"unchecked"}function uB(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function cB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function dB(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=cB(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function hB(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,c=e[o].y;l>r!=c>r&&n<(u-a)*(r-l)/(c-l)+a&&(i=!i)}return i}function fB(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return hB(n,e)}function gd(t){return e=>e.pointerType==="mouse"?t(e):void 0}const pB=V4,mB=v$,gB=W4,yB=K4,vB=Y4,wB=c1,bB=J4,xB=tB,SB=rB,kB=iB,CB=oB,EB=lB,A$="DropdownMenu",[AB,jY]=Xi(A$,[g$]),Vr=g$(),[PB,P$]=AB(A$),NB=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Vr(e),u=y.useRef(null),[c=!1,d]=Ao({prop:i,defaultProp:s,onChange:o});return y.createElement(PB,{scope:e,triggerId:Na(),triggerRef:u,contentId:Na(),open:c,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(h=>!h),[d]),modal:a},y.createElement(pB,le({},l,{open:c,onOpenChange:d,dir:r,modal:a}),n))},$B="DropdownMenuTrigger",OB=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=P$($B,n),o=Vr(n);return y.createElement(mB,le({asChild:!0},o),y.createElement(Je.button,le({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},i,{ref:Hm(e,s.triggerRef),onPointerDown:Ce(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Ce(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})))}),TB=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Vr(e);return y.createElement(gB,le({},r,n))},MB="DropdownMenuContent",_B=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=P$(MB,n),s=Vr(n),o=y.useRef(!1);return y.createElement(yB,le({id:i.contentId,"aria-labelledby":i.triggerId},s,r,{ref:e,onCloseAutoFocus:Ce(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)===null||l===void 0||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Ce(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;(!i.modal||c)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),RB=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Vr(n);return y.createElement(vB,le({},i,r,{ref:e}))}),DB=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Vr(n);return y.createElement(wB,le({},i,r,{ref:e}))}),IB=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Vr(n);return y.createElement(bB,le({},i,r,{ref:e}))}),LB=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Vr(n);return y.createElement(xB,le({},i,r,{ref:e}))}),BB=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Vr(n);return y.createElement(SB,le({},i,r,{ref:e}))}),zB=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Vr(n);return y.createElement(kB,le({},i,r,{ref:e}))}),jB=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Vr(n);return y.createElement(CB,le({},i,r,{ref:e}))}),FB=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Vr(n);return y.createElement(EB,le({},i,r,{ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),UB=NB,VB=OB,HB=TB,N$=_B,$$=RB,O$=DB,T$=IB,M$=LB,_$=BB,R$=zB,D$=jB,I$=FB,WB=UB,GB=VB,KB=y.forwardRef(({className:t,inset:e,children:n,...r},i)=>x.jsxs(D$,{ref:i,className:Ue("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...r,children:[n,x.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block h-4 w-4"})]}));KB.displayName=D$.displayName;const XB=y.forwardRef(({className:t,...e},n)=>x.jsx(I$,{ref:n,className:Ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));XB.displayName=I$.displayName;const L$=y.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(HB,{children:x.jsx(N$,{ref:r,sideOffset:e,className:Ue("z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));L$.displayName=N$.displayName;const Mf=y.forwardRef(({className:t,inset:e,...n},r)=>x.jsx(O$,{ref:r,className:Ue("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Mf.displayName=O$.displayName;const ZB=y.forwardRef(({className:t,children:e,checked:n,...r},i)=>x.jsxs(T$,{ref:i,className:Ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(_$,{children:x.jsx("span",{className:"icon-[lucide--check] h-4 w-4"})})}),e]}));ZB.displayName=T$.displayName;const YB=y.forwardRef(({className:t,children:e,...n},r)=>x.jsxs(M$,{ref:r,className:Ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(_$,{children:x.jsx("span",{className:"icon-[lucide--circle-dot] block h-4 w-4"})})}),e]}));YB.displayName=M$.displayName;const JB=y.forwardRef(({className:t,inset:e,...n},r)=>x.jsx($$,{ref:r,className:Ue("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));JB.displayName=$$.displayName;const qB=y.forwardRef(({className:t,...e},n)=>x.jsx(R$,{ref:n,className:Ue("-mx-1 my-1 h-px bg-stone-600",t),...e}));qB.displayName=R$.displayName;function zp(t,e,n){const r=[];for(let i=0;i<t.length;i++)try{const s=e(t[i],i,t);s&&(Array.isArray(s)?s.forEach(o=>o&&r.push(n(o,i,t))):r.push(n(s,i,t)))}catch(s){r.push(n(s,i,t))}return r}class Zt{constructor(e,n){ue(this,"start");ue(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let r=n[0].start,i=n[0].end;for(const s of n)s.start<r&&(r=s.start),s.end>i&&(i=s.end);return new Zt(r,i)}toJSON(){return this.range}}const Rk=be.from(be.MAX_ADDRESS).toString(),QB=qn.from(qn.MAX_ADDRESS).toString(),e8={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${be.format(t)} is out of range (max memory address: ${Rk}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${be.format(t)}, which is outside the memory range (max memory address: ${Rk}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${QB}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"label-should-be-writable":t=>`Label ${t} doesn't point to a writable memory address — should point to a DB or DW declaration.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},Dk=be.from(be.MAX_ADDRESS).toString(),t8=qn.from(qn.MAX_ADDRESS).toString(),n8={"address-has-code":t=>`La dirección de memoria ${be.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${be.format(t)} está fuera de rango (dirección máxima de memoria: ${Dk}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vacío. El programa debe tener, al menos, una instrucción END.","end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${be.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${Dk}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${t8}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"label-should-be-writable":t=>`La etiqueta ${t} no apunta a una dirección de memoria modificable — debería apuntar a una declaración DB o DW.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${be.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},r8=Gb({en:e8,es:n8});class ae extends Error{constructor(n,...r){super();ue(this,"code");ue(this,"context");ue(this,"position");this.code=n,this.context=r,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...r)}at(n){return n&&(n instanceof Zt?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return r8(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ae?n:new ae("unexpected-error",n)}}var eo,jl;class i8{constructor(){ue(this,"codeMemory",new Set);ue(this,"labels",new Map);Ee(this,eo,!1);Ee(this,jl,!1)}loadStatements(e){if(P(this,eo))throw new Error("Tried to load statements twice");q(this,eo,!0),this.labels.clear();const n=[];for(const r of e)if("label"in r&&r.label){if(this.labels.has(r.label)){n.push(new ae("duplicated-label",r.label).at(r.position));continue}r.isInstruction()?this.labels.set(r.label,{type:"instruction",address:be.from(0)}):r.directive==="EQU"?this.labels.set(r.label,{type:"EQU",constant:r}):this.labels.set(r.label,{type:r.directive,address:be.from(0)})}return n}computeAddresses(e){if(P(this,jl))throw new Error("Tried to compute addresses twice");q(this,jl,!0),this.codeMemory.clear();const n=new Set;let r=null;return zp(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){r=s.newAddress;return}if(r===null)throw new ae("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!be.inRange(r+l))throw new ae("instruction-out-of-range",r+l).at(s);const u=be.from(r+l);if(n.has(u.value))throw new ae("occupied-address",u).at(s);n.add(u.value),s.isInstruction()&&this.codeMemory.add(u.value)}const a=be.from(r);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),r+=o},ae.from)}labelExists(e){if(!P(this,eo))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!P(this,eo))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!P(this,eo))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!P(this,jl))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof be&&(e=e.value),this.codeMemory.has(e)}}eo=new WeakMap,jl=new WeakMap;const s8=["AL","BL","CL","DL","AH","BH","CH","DH"],B$=["AX","BX","CX","DX","SP"],jp=[...s8,...B$],h1=["DB","DW","EQU"],f1=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],o8=["OFFSET","ORG","BYTE","WORD","PTR","END",...jp,...f1,...h1];class a8{constructor(e,n,r){ue(this,"type");ue(this,"lexeme");ue(this,"position");this.type=e,this.lexeme=n,this.position=r}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class l8{constructor(e){ue(this,"scanned",!1);ue(this,"tokens",[]);ue(this,"position",new Zt(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new Zt(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ae("lexer.unterminated-string").at(this.position);if(this.peek().charCodeAt(0)>255)throw new ae("lexer.only-ascii").at(new Zt(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ae("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ae("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();o8.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ae("lexer.unexpected-character",e).at(this.position)}return this.position=new Zt(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new a8(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new Zt(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class sn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}ue(sn,"numberLiteral",(...e)=>new u8(...e)),ue(sn,"label",(...e)=>new c8(...e)),ue(sn,"unaryOperation",(...e)=>new d8(...e)),ue(sn,"binaryOperation",(...e)=>new h8(...e));class u8 extends sn{constructor(n,r){super(r);ue(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let c8=class extends sn{constructor(n,r,i){super(i);ue(this,"type","label");this.value=n,this.offset=r}evaluate(n){if(!n.labelExists(this.value))throw new ae("label-not-found",this.value).at(this.position);const r=n.getLabelType(this.value);if((r==="DB"||r==="DW")&&!this.offset)throw new ae("label-should-be-a-number",this.value).at(this.position);if((r==="EQU"||r==="instruction")&&this.offset)throw new ae("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class d8 extends sn{constructor(n,r,i){super(i);ue(this,"type","unary-operation");this.operator=n,this.right=r}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class h8 extends sn{constructor(n,r,i,s){super(s);ue(this,"type","binary-operation");this.left=n,this.operator=r,this.right=i}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class tg{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var ns;class z$ extends tg{constructor(n,r,i){super(i);ue(this,"type","data-directive");ue(this,"label");ue(this,"values");Ee(this,ns,null);this.values=n,this.label=r}get start(){if(P(this,ns)===null)throw new Error("Start not set");return P(this,ns)}setStart(n){if(P(this,ns)!==null)throw new Error("Start already set");q(this,ns,n)}toJSON(){return{...super.toJSON(),...P(this,ns)?{start:P(this,ns).toJSON()}:{},directive:this.directive,label:this.label}}}ns=new WeakMap;var ga,to,Fl;class f8 extends z${constructor(n,r,i){super(n,r,i);ue(this,"directive","EQU");Ee(this,ga,"not-processed");Ee(this,to,null);Ee(this,Fl,null)}toJSON(){var n;return{...super.toJSON(),value:P(this,Fl)??((n=P(this,to))==null?void 0:n.toJSON())??this.values.map(r=>r.toJSON())}}validate(){if(P(this,to))throw new Error("Constant already validated");if(!this.label)throw new ae("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ae("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ae("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ae("cannot-be-unassinged","EQU").at(n);q(this,to,n.value)}evaluateExpressions(n){if(!P(this,to))throw new Error("Constant not validated");if(P(this,ga)==="processed")return P(this,Fl);if(P(this,ga)==="processing")throw new ae("circular-reference").at(this.position);q(this,ga,"processed");const r=P(this,to).evaluate(n);return q(this,ga,"processed"),q(this,Fl,r),r}evaluate(n){return this.evaluateExpressions(n)}}ga=new WeakMap,to=new WeakMap,Fl=new WeakMap;const lc=Symbol("unassigned");var zn,Xr;class p8 extends z${constructor(n,r,i,s){super(r,i,s);ue(this,"size");Ee(this,zn,null);Ee(this,Xr,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!P(this,zn))throw new Error("Data directive not validated");return P(this,zn).length*(this.size/8)}getValues(){if(!P(this,Xr))throw new Error("Data directive not evaluated");return P(this,Xr)}toJSON(){return{...super.toJSON(),values:(P(this,Xr)??P(this,zn)??this.values).map(n=>n===lc?"?":n.toJSON())}}validate(){if(P(this,zn))throw new Error("Data directive already validated");q(this,zn,[]);for(const n of this.values)if(n.isUnassigned())P(this,zn).push(lc);else if(n.isString()){if(this.directive!=="DB")throw new ae("cannot-accept-strings",this.directive).at(n);const r=n.value;for(let i=0;i<r.length;i++){const s=jN(r[i]);if(s===null)throw new Error("Invalid character, should not happen");const o=new Zt(n.position.start+i,n.position.start+i+1),a=sn.numberLiteral(s,o);P(this,zn).push(a)}}else P(this,zn).push(n.value);if(P(this,zn).length===0)throw new ae("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!P(this,zn))throw new Error("Data directive not validated");if(P(this,Xr))throw new Error("Data directive already evaluated");q(this,Xr,[]);const r=zp(P(this,zn),i=>{if(i===lc)P(this,Xr).push(lc);else{const s=i.evaluate(n);if(!L.fits(s,this.size))throw new ae("value-out-of-range",s,this.size).at(this);const o=L.fromNumber(s,this.size);P(this,Xr).push(o)}},ae.from);return r.length>0&&q(this,Xr,null),r}}zn=new WeakMap,Xr=new WeakMap;class p1{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class m8 extends p1{constructor(n,r){super(r);ue(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class g8 extends p1{constructor(n){super(n);ue(this,"type","unassigned")}}class y8 extends p1{constructor(n){super(n.position);ue(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function v8(t,e,n){const r=Zt.merge(t.position,...e.map(i=>i.position));switch(t.type){case"DB":case"DW":return new p8(t.type,e,n,r);case"EQU":return new f8(e,n,r)}}class w8 extends tg{constructor(n){super(n);ue(this,"type","end")}}function ra(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var rs;class Va extends tg{constructor(n,r,i){super(i);ue(this,"type","instruction");ue(this,"label");ue(this,"operands");Ee(this,rs,null);this.operands=n,this.label=r}get start(){if(P(this,rs)===null)throw new Error("Start not set");return P(this,rs)}setStart(n){if(P(this,rs)!==null)throw new Error("Start already set");q(this,rs,n)}toJSON(){return{...super.toJSON(),...P(this,rs)?{start:P(this,rs).toJSON()}:{},instruction:this.instruction,label:this.label}}}rs=new WeakMap;var pn,kr;class b8 extends Va{constructor(n,r,i,s){super(r,i,s);Ee(this,pn,null);Ee(this,kr,null);this.instruction=n}get length(){if(!P(this,pn))throw new Error("Instruction not validated");const{mode:n,size:r,out:i,src:s}=P(this,pn);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&i.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=r/8),o}get operation(){if(!P(this,kr))throw new Error("Instruction not evaluated");return P(this,kr)}toBytes(){const{mode:n,size:r,out:i,src:s}=this.operation,o=[],a={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],r===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=ra(s)<<3,o[1]|=ra(i)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=ra(i)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=ra(i)<<0,o.push(s.low.unsigned),r===16&&o.push(s.high.unsigned);break}case"mem<-reg":{i.mode==="direct"?(o[1]=192,o.push(i.address.byte.low.unsigned),o.push(i.address.byte.high.unsigned)):o[1]=208,o[1]|=ra(s)<<0;break}case"mem<-imd":{i.mode==="direct"?(o[1]=200,o.push(i.address.byte.low.unsigned),o.push(i.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),r===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...P(this,kr)??P(this,pn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(P(this,pn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ae("expects-two-operands").at(this);const[r,i]=this.operands;if(r.isRegister()){if(i.isRegister()){if(r.size!==i.size)throw new ae("size-mismatch",i.size,r.size).at(this);q(this,pn,{mode:"reg<-reg",size:r.size,out:r.value,src:i.value});return}if(i.isDirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new ae("size-mismatch",i.size,r.size).at(this);q(this,pn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:i.value}});return}if(i.isIndirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new ae("size-mismatch",i.size,r.size).at(this);q(this,pn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"indirect"}});return}if(i.value.isLabel()){const s=i.isDataDirectiveLabel(n);if(s){if(s!==r.size)throw new ae("size-mismatch",s,r.size).at(this);q(this,pn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:sn.label(i.value.value,!0,i.value.position)}});return}}q(this,pn,{mode:"reg<-imd",size:r.size,out:r.value,src:i.value});return}else{let s,o;if(r.isIndirectAddress())s=r.size,o={mode:"indirect"};else if(r.isDirectAddress())s=r.size,o={mode:"direct",address:r.value};else if(r.value.isLabel()){if(s=r.isDataDirectiveLabel(n)||"auto",s==="auto")throw new ae("label-should-be-writable",r.value.value).at(r);o={mode:"direct",address:sn.label(r.value.value,!0,r.value.position)}}else throw new ae("destination-cannot-be-immediate").at(r);if(i.isRegister()){if(s!=="auto"&&s!==i.size)throw new ae("size-mismatch",s,i.size).at(this);q(this,pn,{mode:"mem<-reg",size:i.size,out:o,src:i.value});return}if(i.isNumberExpression()){if(i.isDataDirectiveLabel(n))throw new ae("double-memory-access").at(this);if(s==="auto")throw new ae("unknown-size").at(r);q(this,pn,{mode:"mem<-imd",size:s,out:o,src:i.value});return}throw new ae("double-memory-access").at(this)}}evaluateExpressions(n){if(!P(this,pn))throw new Error("Instruction not validated");if(P(this,kr))throw new Error("Instruction aready evaluated");const{mode:r,size:i,out:s,src:o}=P(this,pn),a=l=>{const u=l.evaluate(n);if(!be.inRange(u))throw new ae("address-out-of-range",u).at(l);const c=be.from(u);if(n.addressIsReserved(c))throw new ae("address-has-code",c).at(l);return c};switch(r){case"reg<-reg":{q(this,kr,{mode:r,size:i,out:s,src:o});return}case"reg<-mem":{q(this,kr,{mode:r,size:i,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!L.fits(l,i))throw new ae("value-out-of-range",l,i).at(o);const u=L.fromNumber(l,i);q(this,kr,{mode:r,size:i,out:s,src:u});return}case"mem<-reg":{q(this,kr,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!L.fits(l,i))throw new ae("value-out-of-range",l,i).at(o);const u=L.fromNumber(l,i);q(this,kr,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return r}}}pn=new WeakMap,kr=new WeakMap;var Pi,is;class x8 extends Va{constructor(n,r,i,s){super(r,i,s);Ee(this,Pi,null);Ee(this,is,null);ue(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!P(this,is))throw new Error("Instruction not evaluated");return P(this,is)}toJSON(){return{...super.toJSON(),...P(this,is)?{value:P(this,is).toJSON()}:P(this,Pi)?{initialValue:P(this,Pi).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(P(this,Pi))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ae("expects-immediate").at(n);q(this,Pi,n.value)}evaluateExpressions(n){if(!P(this,Pi))throw new Error("Instruction not validated");if(P(this,is))throw new Error("Instruction aready evaluated");const r=P(this,Pi).evaluate(n);if(!L.fitsUnsigned(r,8))throw new ae("invalid-interrupt",r).at(P(this,Pi));q(this,is,L.fromUnsigned(r,8))}}Pi=new WeakMap,is=new WeakMap;var Zr,ss,T2;let S8=(T2=class extends Va{constructor(n,r,i,s){super(r,i,s);Ee(this,Zr,null);Ee(this,ss,null);this.instruction=n}get length(){if(!P(this,Zr))throw new Error("Instruction not validated");return P(this,Zr).port==="fixed"?2:1}toBytes(){const n=[],r={IN:80,OUT:84};return n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(P(this,ss)===null)throw new Error("Operation not set");return P(this,ss)}toJSON(){return{...super.toJSON(),...P(this,ss)??P(this,Zr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(P(this,Zr))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ae("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],r=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ae("expects-ax").at(n);const i=n.value==="AX"?16:8;if(r.isRegister()){if(r.value!=="DX")throw new ae("expects-dx").at(r);q(this,Zr,{port:"variable",size:i});return}if(r.isNumberExpression()){q(this,Zr,{port:"fixed",size:i,address:r.value});return}throw new ae("expects-immediate").at(r)}evaluateExpressions(n){if(!P(this,Zr))throw new Error("Instruction not validated");if(P(this,ss))throw new Error("Instruction aready evaluated");const r=P(this,Zr);if(r.port==="fixed"){const i=r.address.evaluate(n);if(!qn.inRange(i))throw new ae("io-address-out-of-range",i).at(this);const s=qn.from(i);q(this,ss,{port:"fixed",size:r.size,address:s})}else q(this,ss,{port:"variable",size:r.size})}},Zr=new WeakMap,ss=new WeakMap,T2);var os,as,M2;let k8=(M2=class extends Va{constructor(n,r,i,s){super(r,i,s);Ee(this,os,null);Ee(this,as,null);ue(this,"length",3);this.instruction=n}toBytes(){const n=[],r={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(r[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(P(this,as)===null)throw new Error("Instruction not evaluated");return P(this,as)}toJSON(){return{...super.toJSON(),...P(this,as)?{address:P(this,as).toJSON()}:P(this,os)?{jumpTo:P(this,os)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(P(this,os))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const r=this.operands[0];if(!r.isNumberExpression()||!r.value.isLabel())throw new ae("expects-label").at(r);const i=r.value.value,s=n.getLabelType(i);if(!s)throw new ae("label-not-found",i).at(r);if(s!=="instruction")throw new ae("label-should-be-an-instruction",i).at(r);q(this,os,i)}evaluateExpressions(n){if(!P(this,os))throw new Error("Instruction not validated");if(P(this,as))throw new Error("Instruction aready evaluated");const r=n.getLabelValue(P(this,os));if(!be.inRange(r))throw new ae("address-out-of-range",r).at(this);q(this,as,be.from(r))}},os=new WeakMap,as=new WeakMap,M2);var Ni,_2;let C8=(_2=class extends Va{constructor(n,r,i,s){super(r,i,s);Ee(this,Ni,null);ue(this,"length",1);this.instruction=n}toBytes(){let r={PUSH:96,POP:104}[this.instruction];return r|=ra(this.register),new Uint8Array([r])}get register(){if(!P(this,Ni))throw new Error("Instruction not evaluated");return P(this,Ni)}toJSON(){return{...super.toJSON(),...P(this,Ni)?{register:P(this,Ni)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(P(this,Ni))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new ae("expects-word-register").at(n);q(this,Ni,n.value)}evaluateExpressions(){if(!P(this,Ni))throw new Error("Instruction not validated")}},Ni=new WeakMap,_2);var rr,$i;class E8 extends Va{constructor(n,r,i,s){super(r,i,s);Ee(this,rr,null);Ee(this,$i,null);this.instruction=n}get length(){if(!P(this,rr))throw new Error("Instruction not validated");const{mode:n}=P(this,rr);let r=2;return n==="mem-direct"&&(r+=2),r}toBytes(){const n=[],r={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=ra(this.operation.reg);break}case"mem-direct":{n[1]=192;const i=this.operation.address.byte;n.push(i.low.unsigned),n.push(i.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!P(this,$i))throw new Error("Instruction not evaluated");return P(this,$i)}toJSON(){return{...super.toJSON(),...P(this,$i)??P(this,rr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(P(this,rr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const r=this.operands[0];if(r.isRegister()){q(this,rr,{mode:"reg",size:r.size,reg:r.value});return}if(r.isDirectAddress()){if(r.size==="auto")throw new ae("unknown-size").at(r);q(this,rr,{mode:"mem-direct",size:r.size,address:r.value});return}if(r.isIndirectAddress()){if(r.size==="auto")throw new ae("unknown-size").at(r);q(this,rr,{mode:"mem-indirect",size:r.size});return}if(r.value.isLabel()){const i=r.isDataDirectiveLabel(n);if(i){q(this,rr,{mode:"mem-direct",size:i,address:sn.label(r.value.value,!0,r.value.position)});return}}throw new ae("destination-cannot-be-immediate").at(r)}evaluateExpressions(n){if(!P(this,rr))throw new Error("Instruction not validated");if(P(this,$i))throw new Error("Instruction aready evaluated");const r=P(this,rr);switch(r.mode){case"reg":{q(this,$i,{mode:"reg",size:r.size,reg:r.reg});return}case"mem-direct":{const i=r.address.evaluate(n);if(!be.inRange(i))throw new ae("address-out-of-range",i).at(r.address);const s=be.from(i);if(n.addressIsReserved(s))throw new ae("address-has-code",s).at(r.address);q(this,$i,{mode:"mem-direct",size:r.size,address:s});return}case"mem-indirect":{q(this,$i,{mode:"mem-indirect",size:r.size});return}default:return r}}}rr=new WeakMap,$i=new WeakMap;var Ul;class A8 extends Va{constructor(n,r,i,s){super(r,i,s);Ee(this,Ul,!1);ue(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(P(this,Ul))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ae("expects-no-operands").at(this);q(this,Ul,!0)}evaluateExpressions(){if(!P(this,Ul))throw new Error("Instruction not validated")}}Ul=new WeakMap;class ng{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class P8 extends ng{constructor(n){super(n.position);ue(this,"type","register");ue(this,"value");this.value=n.type}get size(){return B$.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class N8 extends ng{constructor(n,r){super(r);ue(this,"type","indirect-address");ue(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class $8 extends ng{constructor(n,r,i){super(i);ue(this,"type","direct-address");ue(this,"size");this.value=n,r?this.size=r==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class O8 extends ng{constructor(n){super(n.position);ue(this,"type","number-expression");this.value=n}isDataDirectiveLabel(n){if(!this.value.isLabel())return!1;const r=this.value;if(r.offset)return!1;if(!n.labelExists(r.value))throw new ae("label-not-found",r.value).at(this.position);const i=n.getLabelType(r.value);return i==="DB"?8:i==="DW"?16:!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function Ik(t,e,n){const r=Zt.merge(t.position,...e.map(i=>i.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new A8(t.type,e,n,r);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new b8(t.type,e,n,r);case"NEG":case"INC":case"DEC":case"NOT":return new E8(t.type,e,n,r);case"PUSH":case"POP":return new C8(t.type,e,n,r);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new k8(t.type,e,n,r);case"IN":case"OUT":return new S8(t.type,e,n,r);case"INT":return new x8(t.type,e,n,r)}}class T8 extends tg{constructor(n,r){super(r);ue(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let M8=class{constructor(e){ue(this,"tokens");ue(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ae("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ae("parser.expected-address-after-org")),r=this.parseNumber(n);return this.endOfStatement(),new T8(r,Zt.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ae("end-must-be-the-last-statement").at(e);return new w8(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...h1);if(e&&!n)throw new ae("parser.unexpected-identifier").at(e);if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase())||null,i=[this.dataDirectiveValue()];for(;this.match("COMMA");)i.push(this.dataDirectiveValue());return this.endOfStatement(),v8(n,i,r)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new m8(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new g8(e.position)}return new y8(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...f1);if(e&&!n){const s=this.peek();throw new ae("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return Ik(n,[],r);const i=[this.instructionOperand()];for(;this.match("COMMA");)i.push(this.instructionOperand());return this.endOfStatement(),Ik(n,i,r)}instructionOperand(){if(this.match(...jp)){const n=this.previous();return new P8(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ae("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...jp)){this.consume("BX",new ae("parser.indirect-addressing-must-be-bx"));const r=this.consume("RIGHT_BRACKET",new ae("parser.expected-literal-after-literal","]","BX"));return new N8(e==null?void 0:e.type,Zt.merge(e==null?void 0:e.position,n.position,r.position))}else{const r=this.numberExpression(),i=this.consume("RIGHT_BRACKET",new ae("parser.expected-literal-after-expression","]"));return new $8(r,e==null?void 0:e.type,Zt.merge(e==null?void 0:e.position,n.position,i.position))}}else if(e)throw new ae("parser.expected-literal-after-literal","[","PTR");return new O8(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const r=this.match(...e);if(r)return r;throw n||(n=new ae("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ae("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const r=this.previous(),i=this.parseNumber(r);return sn.numberLiteral(i,r.position)}if(this.match("LEFT_PAREN")){const r=this.numberExpression();return this.consume("RIGHT_PAREN",new ae("parser.unclosed-parenthesis")),r}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ae("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ae("parser.expected-argument").at(this.peek());return sn.label(n.lexeme.toUpperCase(),e!==null,Zt.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ae("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return sn.unaryOperation(e.type==="PLUS"?"+":"-",n,Zt.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=sn.binaryOperation(e,"*",n,Zt.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),r=this.factorNE();e=sn.binaryOperation(e,n.type==="PLUS"?"+":"-",r,Zt.merge(e.position,r.position))}return e}numberExpression(){return this.termNE()}};function j$(t){try{const n=new l8(t).scanTokens(),i=new M8(n).parse(),s=i.at(-1);if(!s)throw new ae("empty-program");if(!s.isEnd())throw new ae("end-must-be-the-last-statement").at(s);let o=[];const a=new i8;if(o=a.loadStatements(i),o.length>0)return{success:!1,errors:o};if(o=zp(i,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},ae.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(i),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=zp(i,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},ae.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u}}catch(e){return{success:!1,errors:[ae.from(e)]}}}class yi{constructor(e){ue(this,"computer");this.computer=e.computer}}const _8=be.from(be.MAX_ADDRESS).toString(),R8={"address-has-instruction":t=>`Memory address ${be.format(t)} has an instruction, and cannot be read nor written.`,"address-out-of-range":t=>`Memory address ${be.format(t)} is out of range (max memory address: ${_8}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-implemented":t=>`I/O memory address ${qn.format(t)} has no implementation.`,"no-instruction":t=>`Expected instruction at memory address ${be.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},D8=be.from(be.MAX_ADDRESS).toString(),I8={"address-has-instruction":t=>`La dirección de memoria ${be.format(t)} tiene una instrucción, y no se puede leer ni escribir.`,"address-out-of-range":t=>`La dirección de memoria ${be.format(t)} está fuera de rango (dirección máxima de memoria: ${D8}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-implemented":t=>`La dirección de memoria E/S ${qn.format(t)} no está implementada.`,"no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${be.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},L8=Gb({en:R8,es:I8});class Bt extends Error{constructor(n,...r){super();ue(this,"code");ue(this,"context");this.code=n,this.context=r,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...r)}translate(n){return L8(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Bt?n:new Bt("unexpected-error",n)}}class _s{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const i=e.cpu.getRegister("IP").toString("hex");throw new Bt("unexpected-error",`Could not read instruction byte at address ${i}h`)}yield*e.cpu.updateWordRegister("IP",i=>i.add(1)),yield*e.cpu.getMBR(n)}}var Cm,F$;class B8 extends _s{constructor(){super(...arguments);Ee(this,Cm)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:rt(this,Cm,F$).call(this),willUse:{ri:r==="reg<-mem"||r==="mem<-reg"||r==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(r==="reg<-reg"||r==="mem<-reg")i===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(r==="reg<-imd"||r==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),i===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=i===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=i===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=L.fromSigned(d,i),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>L.maxValue(i)?(c.CF=!0,u=L.fromUnsigned(h-L.maxValue(i)-1,i)):(c.CF=!1,u=L.fromUnsigned(h,i)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=L.fromUnsigned(h+L.maxValue(i)+1,i)):(c.CF=!1,u=L.fromUnsigned(h,i)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(i===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Cm=new WeakSet,F$=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BX";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,`${i.toString("hex")}h`];default:return n}};var Em,U$;class z8 extends _s{constructor(){super(...arguments);Ee(this,Em)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:rt(this,Em,U$).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const r=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let i;const s={};switch(this.name){case"NOT":{i=L.fromSigned(~r.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{i=L.fromSigned(-r.signed,this.operation.size),s.CF=!r.isZero(),s.OF=r.signed===L.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",L.fromSigned(1,16));const o=r.unsigned+1;o>L.maxValue(this.operation.size)?(s.CF=!0,i=L.fromUnsigned(o-L.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,i=L.fromUnsigned(o,this.operation.size)),s.OF=r.signed>=0&&i.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",L.fromSigned(1,16));const o=r.unsigned-1;o<0?(s.CF=!0,i=L.fromUnsigned(o+L.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,i=L.fromUnsigned(o,this.operation.size)),s.OF=r.signed<0&&i.signed>=0;break}}if(s.ZF=i.isZero(),s.SF=i.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,i,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Em=new WeakSet,U$=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class j8 extends _s{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Am,V$;class F8 extends _s{constructor(){super(...arguments);Ee(this,Am)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:rt(this,Am,V$).call(this),willUse:{ri:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",L.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Bt("io-memory-not-implemented",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Bt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Bt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Am=new WeakSet,V$=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class U8 extends _s{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class V8 extends _s{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function ia(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function H8(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Pm,H$;class W8 extends _s{constructor(){super(...arguments);Ee(this,Pm)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:rt(this,Pm,H$).call(this),willUse:{ri:r==="reg<-mem"||r==="mem<-reg"||r==="mem<-imd",id:r==="reg<-mem"||r==="reg<-imd"||r==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},r){case"reg<-reg":return i===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return i===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[a,l]=H8(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(!(yield*n.cpu.useBus("mem-write"))||l&&(yield*n.cpu.updateWordRegister("ri",u=>u.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||i===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return r}}}Pm=new WeakSet,H$=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BX";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,`${i.toString("hex")}h`];default:return n}};class G8 extends _s{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class K8 extends _s{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function X8(t){switch(t.instruction){case"MOV":return new W8(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new B8(t);case"NOT":case"NEG":case"INC":case"DEC":return new z8(t);case"IN":case"OUT":return new F8(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new K8(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new U8(t);case"RET":case"IRET":return new G8(t);case"INT":return new j8(t);case"CLI":case"STI":case"NOP":case"HLT":return new V8(t)}}const vl={0:32768,3:32771,6:32774,7:32775};function Z8(t){return Object.values(vl).includes(t.unsigned)}function*Y8(t,e){switch(e.unsigned){case vl[0]:return yield{type:"cpu:int.0"},!1;case vl[3]:return yield{type:"cpu:int.3"},!0;case vl[6]:{yield{type:"cpu:int.6"},yield*t.cpu.copyWordRegister("BX","ri");const n=yield*t.io.keyboard.readChar();if(yield*t.cpu.updateWordRegister("id",n.withHigh(L.zero(8))),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("id.l"),!(yield*t.cpu.useBus("mem-write")))return!1;break}case vl[7]:{if(yield{type:"cpu:int.7"},yield*t.cpu.copyWordRegister("AX","id"),!(yield*t.cpu.pushToStack())||(yield*t.cpu.copyWordRegister("BX","id"),!(yield*t.cpu.pushToStack())))return!1;yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",L.zero(8));const n=t.cpu.getRegister("AL");for(yield*t.cpu.aluExecute("SUB",n,{CF:!1,OF:!1,SF:n.signed<0,ZF:n.isZero()});!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read")))return!1;yield*t.cpu.getMBR("id.l");const r=t.cpu.getRegister("id.l");yield*t.io.screen.sendChar(r),yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",L.fromUnsigned(1,16));const i=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",i,{CF:!1,OF:i.signed<0,SF:i.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",L.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===L.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","BX"),!(yield*t.cpu.popFromStack())))return!1;yield*t.cpu.copyWordRegister("id","AX");break}default:throw new Error("Invalid interrupt number")}return!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","IP"),!(yield*t.cpu.popFromStack()))?!1:(yield*t.cpu.copyWordRegister("id","FLAGS"),!0)}var Vl,Le,ir,Sn,no,rl,jn,Sr,R2;let J8=(R2=class extends yi{constructor(n){super(n);Ee(this,no);Ee(this,jn);Ee(this,Vl,void 0);Ee(this,Le,void 0);Ee(this,ir,void 0);Ee(this,Sn,void 0);n.data==="unchanged"?(q(this,Le,P(n.previous.cpu,Le)),q(this,ir,P(n.previous.cpu,ir)),q(this,Sn,P(n.previous.cpu,Sn))):n.data==="randomize"?(q(this,Le,{AX:L.random(16),BX:L.random(16),CX:L.random(16),DX:L.random(16),SP:L.random(16),IP:L.random(16),IR:L.random(8),ri:L.random(16),id:L.random(16),left:L.random(16),right:L.random(16),result:L.random(16),FLAGS:L.random(16)}),q(this,ir,L.random(16)),q(this,Sn,L.random(8))):(q(this,Le,{AX:L.zero(16),BX:L.zero(16),CX:L.zero(16),DX:L.zero(16),SP:L.zero(16),IP:L.zero(16),IR:L.zero(8),ri:L.zero(16),id:L.zero(16),left:L.zero(16),right:L.zero(16),result:L.zero(16),FLAGS:L.zero(16)}),q(this,ir,L.zero(16)),q(this,Sn,L.zero(8))),P(this,Le).SP=L.fromUnsigned(be.MAX_ADDRESS+1,16),P(this,Le).IP=L.fromUnsigned(8192,16),rt(this,jn,Sr).call(this,"IF",!0),q(this,Vl,new Map);for(const r of n.program.instructions){const i=X8(r);P(this,Vl).set(i.start.value,i)}}*run(){for(;;){const n=P(this,Le).IP;if(Z8(n)){if(!(yield*Y8(this.computer,n)))return}else{const r=P(this,Vl).get(n.unsigned);if(!r){yield{type:"cpu:error",error:new Bt("no-instruction",P(this,Le).IP)};return}if(!(yield*r.execute(this.computer)))return}if(this.getFlag("IF")&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const r=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",L.zero(8)),yield*this.startInterrupt(r)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;let r=L.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",r),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),r=r.add(1),yield*this.updateWordRegister("ri",r),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(P(this,Le)).reduce((r,[i,s])=>({...r,[i]:s.toJSON()}),{}),MAR:P(this,ir).toJSON(),MBR:P(this,Sn).toJSON()}}getRegister(n){const[r,i]=ia(n);return i==="low"?P(this,Le)[r].low:i==="high"?P(this,Le)[r].high:P(this,Le)[r]}*copyByteRegister(n,r){const i=this.getRegister(n);rt(this,no,rl).call(this,r,i),yield{type:"cpu:register.copy",size:8,src:n,dest:r}}*copyWordRegister(n,r){const i=this.getRegister(n);rt(this,no,rl).call(this,r,i),yield{type:"cpu:register.copy",size:16,src:n,dest:r}}*updateByteRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,rt(this,no,rl).call(this,n,r),yield{type:"cpu:register.update",size:8,register:n,value:r}}*updateWordRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,rt(this,no,rl).call(this,n,r),yield{type:"cpu:register.update",size:16,register:n,value:r}}getFlag(n){switch(n){case"CF":return P(this,Le).FLAGS.bit(0);case"ZF":return P(this,Le).FLAGS.bit(6);case"SF":return P(this,Le).FLAGS.bit(7);case"IF":return P(this,Le).FLAGS.bit(9);case"OF":return P(this,Le).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&rt(this,jn,Sr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&rt(this,jn,Sr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&rt(this,jn,Sr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&rt(this,jn,Sr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&rt(this,jn,Sr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:P(this,Le).FLAGS}}*aluExecute(n,r,i){P(this,Le).result=r.is8bits()?P(this,Le).result.withLow(r):r,typeof i.CF=="boolean"&&rt(this,jn,Sr).call(this,"CF",i.CF),typeof i.ZF=="boolean"&&rt(this,jn,Sr).call(this,"ZF",i.ZF),typeof i.SF=="boolean"&&rt(this,jn,Sr).call(this,"SF",i.SF),typeof i.IF=="boolean"&&rt(this,jn,Sr).call(this,"IF",i.IF),typeof i.OF=="boolean"&&rt(this,jn,Sr).call(this,"OF",i.OF),yield{type:"cpu:alu.execute",operation:n,size:r.size,result:P(this,Le).result,flags:P(this,Le).FLAGS}}*setMAR(n){const r=this.getRegister(n);q(this,ir,r),yield{type:"cpu:mar.set",register:n}}*getMBR(n){rt(this,no,rl).call(this,n,P(this,Sn)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const r=this.getRegister(n);q(this,Sn,r),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const r=yield*this.computer.memory.read(P(this,ir));return r?(q(this,Sn,r),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(P(this,ir),P(this,Sn)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(P(this,ir).low);if(!r)return!1;yield{type:"cpu:rd.on"};const i=yield*this.computer.io.read(r);return i?(q(this,Sn,i),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(P(this,ir).low);return!r||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(r,P(this,Sn))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{const r=yield*this.computer.io.pic.handleINTR();return q(this,Sn,r),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return be.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?be.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new Bt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new Bt("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return be.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),be.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new Bt("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new Bt("stack-underflow")},!1)}},Vl=new WeakMap,Le=new WeakMap,ir=new WeakMap,Sn=new WeakMap,no=new WeakSet,rl=function(n,r){const[i,s]=ia(n);if(s===null){if(P(this,Le)[i].size!==r.size)throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);P(this,Le)[i]=r}else{if(!r.is8bits())throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);s==="low"?P(this,Le)[i]=P(this,Le)[i].withLow(r):P(this,Le)[i]=P(this,Le)[i].withHigh(r)}},jn=new WeakSet,Sr=function(n,r){switch(n){case"CF":P(this,Le).FLAGS=P(this,Le).FLAGS.withBit(0,r);return;case"ZF":P(this,Le).FLAGS=P(this,Le).FLAGS.withBit(6,r);return;case"SF":P(this,Le).FLAGS=P(this,Le).FLAGS.withBit(7,r);return;case"IF":P(this,Le).FLAGS=P(this,Le).FLAGS.withBit(9,r);return;case"OF":P(this,Le).FLAGS=P(this,Le).FLAGS.withBit(11,r);return;default:throw new TypeError(`Invalid flag ${n}`)}},R2),q8=class extends yi{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}},Q8=class extends yi{*press(){yield{type:"f10:press"},yield*this.computer.io.pic.interrupt(0)}toJSON(){return null}};var Hl,D2;let e9=(D2=class extends yi{constructor(){super(...arguments);Ee(this,Hl,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=P(this,Hl);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},q(this,Hl,null),n}setLastCharRead(n){q(this,Hl,n)}toJSON(){return null}},Hl=new WeakMap,D2);var sr,I2;let t9=(I2=class extends yi{constructor(n){super(n);Ee(this,sr,void 0);n.data==="unchanged"?q(this,sr,P(n.previous.io.screen,sr)):q(this,sr,"")}clear(){return this.sendChar(L.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:q(this,sr,P(this,sr).slice(0,-1));break;case 10:q(this,sr,P(this,sr)+`
`);break;case 12:q(this,sr,"");break;default:q(this,sr,P(this,sr)+Kb(n.unsigned));break}yield{type:"screen:send-char",char:n,output:P(this,sr)}}toJSON(){return P(this,sr)}},sr=new WeakMap,I2);class rg extends yi{}var Li,ls,Fn,kn,Yr,Wl,_f,Gl,Rf;let n9=(Li=class extends rg{constructor(n){super(n);Ee(this,Wl);Ee(this,Gl);Ee(this,ls,void 0);Ee(this,Fn,void 0);Ee(this,kn,void 0);Ee(this,Yr,void 0);q(this,ls,L.fromUnsigned(255,8)),q(this,Fn,L.fromUnsigned(0,8)),q(this,kn,L.fromUnsigned(0,8)),n.data==="unchanged"?q(this,Yr,P(n.previous.io.pic,Yr)):n.data==="randomize"?q(this,Yr,new Array(Li.LINES).fill(L.zero(8)).map(()=>L.random(8))):q(this,Yr,new Array(Li.LINES).fill(L.zero(8)))}chipSelect(n){const i=4+Li.LINES;return n=Number(n)-32,n<0||n>=i?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let r;if(n==="EOI")r=L.zero(8);else if(n==="IMR")r=P(this,ls);else if(n==="IRR")r=P(this,Fn);else if(n==="ISR")r=P(this,kn);else{const i=Number(n.slice(3));r=P(this,Yr)[i]}return yield{type:"pic:read.ok",value:r},r}*write(n,r){if(yield{type:"pic:write",register:n,value:r},n==="EOI")P(this,kn).isZero()||(yield{type:"pic:intr.off"},q(this,kn,L.zero(8)),yield{type:"pic:register.update",register:"ISR",value:P(this,kn)},yield*rt(this,Gl,Rf).call(this));else if(n==="IMR")q(this,ls,r),yield{type:"pic:register.update",register:"IMR",value:P(this,ls)},yield*rt(this,Gl,Rf).call(this);else if(!(n==="IRR"||n==="ISR")){const i=Number(n.slice(3));P(this,Yr)[i]=r,yield{type:"pic:register.update",register:n,value:r}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=Li.LINES)throw new RangeError(`Invalid interrupt line ${n}`);P(this,Fn).bit(n)||(q(this,Fn,P(this,Fn).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:P(this,Fn)},yield*rt(this,Gl,Rf).call(this))}isINTRActive(){return P(this,kn).isZero()&&rt(this,Wl,_f).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!P(this,kn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=rt(this,Wl,_f).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");q(this,kn,P(this,kn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:P(this,kn)},q(this,Fn,P(this,Fn).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:P(this,Fn)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const r=P(this,Yr)[n];return yield{type:"pic:int.send",number:r},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},r}toJSON(){return{IMR:P(this,ls).toJSON(),IRR:P(this,Fn).toJSON(),ISR:P(this,kn).toJSON(),lines:P(this,Yr).map(n=>n.toJSON())}}},ls=new WeakMap,Fn=new WeakMap,kn=new WeakMap,Yr=new WeakMap,Wl=new WeakSet,_f=function(){for(let n=0;n<Li.LINES;n++)if(P(this,Fn).bit(n)&&!P(this,ls).bit(n))return n;return null},Gl=new WeakSet,Rf=function*(){P(this,kn).isZero()&&rt(this,Wl,_f).call(this)!==null&&(yield{type:"pic:intr.on"})},ue(Li,"LINES",8),Li);var Oi,ro,L2;let r9=(L2=class extends rg{constructor(n){super(n);Ee(this,Oi,void 0);Ee(this,ro,void 0);q(this,Oi,L.zero(8)),q(this,ro,L.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let r;if(n==="CONT")r=P(this,Oi);else if(n==="COMP")r=P(this,ro);else return n;return yield{type:"timer:read.ok",value:r},r}*write(n,r){if(yield{type:"timer:write",register:n,value:r},n==="CONT")q(this,Oi,r);else if(n==="COMP")q(this,ro,r);else return n;yield{type:"timer:register.update",register:n,value:r},yield{type:"timer:write.ok"}}*tick(){const n=P(this,Oi).unsigned===L.maxValue(8)?L.zero(8):P(this,Oi).add(1);q(this,Oi,n),yield{type:"timer:register.update",register:"CONT",value:n},P(this,ro).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:P(this,Oi).toJSON(),COMP:P(this,ro).toJSON()}}},Oi=new WeakMap,ro=new WeakMap,L2);class ig extends yi{constructor(n){super(n);ue(this,"clock");ue(this,"f10");ue(this,"keyboard");ue(this,"screen");ue(this,"pic");ue(this,"timer");this.clock=new q8(n),this.f10=new Q8(n),this.keyboard=new e9(n),this.screen=new t9(n),this.pic=new n9(n),this.timer=new r9(n)}*chipSelect(n){const r=this.pic.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const i=this.timer.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:i}):(yield{type:"bus:io.error",error:new Bt("io-memory-not-implemented",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="pic"?yield*this.pic.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new Bt("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="pic"?(yield*this.pic.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new Bt("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),screen:this.screen.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}}ue(ig,"SIZE",qn.MAX_ADDRESS+1);var Ti,Cn,B2;let i9=(B2=class extends rg{constructor(n){super(n);Ee(this,Ti,void 0);Ee(this,Cn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?q(this,Ti,L.zero(8)):n.data==="randomize"?q(this,Ti,L.random(8)):q(this,Ti,L.zero(8)),q(this,Cn,L.zero(8))}get interrupts(){return P(this,Cn).bit(7)}get DATA(){return P(this,Ti)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let r;if(n==="DATA")r=P(this,Ti);else if(n==="STATE")r=P(this,Cn);else return n;return yield{type:"handshake:read.ok",value:r},r}*write(n,r){if(yield{type:"handshake:write",register:n,value:r},n==="DATA")q(this,Ti,r),yield{type:"handshake:register.update",register:n,value:r},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")r=r.withBit(0,this.computer.io.printer.busy),q(this,Cn,r),yield{type:"handshake:register.update",register:n,value:r},P(this,Cn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),q(this,Cn,P(this,Cn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:P(this,Cn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){q(this,Cn,P(this,Cn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:P(this,Cn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:P(this,Ti).toJSON(),STATE:P(this,Cn).toJSON()}}},Ti=new WeakMap,Cn=new WeakMap,B2);var Cr,us,io;const Dc=class Dc extends yi{constructor(n){super(n);Ee(this,Cr,void 0);Ee(this,us,void 0);Ee(this,io,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(q(this,Cr,P(n.previous.io.printer,Cr)),q(this,us,P(n.previous.io.printer,us)),q(this,io,P(n.previous.io.printer,io))):(q(this,Cr,[]),q(this,us,""),q(this,io,!1))}get busy(){return P(this,Cr).length>=Dc.BUFFER_SIZE}*setStrobe(n){const r=P(this,io);if(r===n)return;if(q(this,io,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!r&&!this.busy){const s=yield*this.readData();P(this,Cr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){q(this,us,""),yield{type:"printer:paper.replace"}}*print(){if(P(this,Cr).length===0)return;const[n,...r]=P(this,Cr);if(q(this,Cr,r),yield{type:"printer:buffer.pop",char:n},r.length===Dc.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const i=Kb(n.unsigned);q(this,us,P(this,us)+i),yield{type:"printer:paper.print",char:i}}}toJSON(){return{paper:P(this,us),buffer:[...P(this,Cr).map(n=>n.unsigned)]}}};Cr=new WeakMap,us=new WeakMap,io=new WeakMap,ue(Dc,"BUFFER_SIZE",5);let Fp=Dc,s9=class extends Fp{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}},o9=class extends ig{constructor(n){super(n);ue(this,"printer");ue(this,"handshake");this.printer=new s9(n),this.handshake=new i9(n)}*chipSelect(n){const r=this.handshake.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:r}):yield*super.chipSelect(n)}*read(n){return n.chip==="handshake"?yield*this.handshake.read(n.register):yield*super.read(n)}*write(n,r){return n.chip==="handshake"?(yield*this.handshake.write(n.register,r),!0):yield*super.write(n,r)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),handshake:this.handshake.toJSON()}}};class W$ extends rg{constructor(n){super(n);ue(this,"PA");ue(this,"PB");ue(this,"CA");ue(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=L.random(8),this.PB=L.random(8),this.CA=L.random(8),this.CB=L.random(8)):(this.PA=L.zero(8),this.PB=L.zero(8),this.CA=L.zero(8),this.CB=L.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let r;if(n==="PA")r=this.PA;else if(n==="PB")r=this.PB;else if(n==="CA")r=this.CA;else if(n==="CB")r=this.CB;else return n;return yield{type:"pio:read.ok",value:r},r}*write(n,r){if(yield{type:"pio:write",register:n,value:r},n==="PA")this.PA=r;else if(n==="PB")this.PB=r;else if(n==="CA")this.CA=r;else if(n==="CB")this.CB=r;else return n;yield{type:"pio:register.update",register:n,value:r},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,r){return n==="A"?this.CA.bit(r)?"input":"output":this.CB.bit(r)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let a9=class extends W${readData(){const e=this.PB.unsigned&~this.CB.unsigned;return L.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const r=this.CA.unsigned,i=this.computer.io.printer.busy;n=n&~r,this.line("A",0)==="input"&&i&&(n|=1),n!==this.PA.unsigned&&(this.PA=L.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1)))}},l9=class extends Fp{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}};class u9 extends ig{constructor(n){super(n);ue(this,"printer");ue(this,"pio");this.printer=new l9(n),this.pio=new a9(n)}*chipSelect(n){const r=this.pio.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:r}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,r){return n.chip==="pio"?(yield*this.pio.write(n.register,r),!0):yield*super.write(n,r)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),pio:this.pio.toJSON()}}}var cs,z2;let c9=(z2=class extends yi{constructor(n){super(n);Ee(this,cs,void 0);n.data==="unchanged"&&"leds"in n.previous.io?q(this,cs,P(n.previous.io.leds,cs)):n.data==="randomize"?q(this,cs,L.random(8)):q(this,cs,L.zero(8))}get state(){return P(this,cs)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return P(this,cs).toJSON()}},cs=new WeakMap,z2),d9=class extends W${*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let r=this.PA.unsigned;const i=this.CA.unsigned;r=n&i|r&~i,r!==this.PA.unsigned&&(this.PA=L.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const r=this.CB.unsigned;n=n&~r,yield*this.computer.io.leds.update(L.fromUnsigned(n,8))}}};var Er,j2;let h9=(j2=class extends yi{constructor(n){super(n);Ee(this,Er,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?q(this,Er,P(n.previous.io.switches,Er)):n.data==="randomize"?q(this,Er,L.random(8)):q(this,Er,L.zero(8))}get state(){return P(this,Er)}*toggle(n){q(this,Er,P(this,Er).withBit(n,!P(this,Er).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return P(this,Er).toJSON()}},Er=new WeakMap,j2);class f9 extends ig{constructor(n){super(n);ue(this,"leds");ue(this,"switches");ue(this,"pio");this.leds=new c9(n),this.switches=new h9(n),this.pio=new d9(n)}*chipSelect(n){const r=this.pio.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:r}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,r){return n.chip==="pio"?(yield*this.pio.write(n.register,r),!0):yield*super.write(n,r)}toJSON(){return{...super.toJSON(),leds:this.leds.toJSON(),switches:this.switches.toJSON(),pio:this.pio.toJSON()}}}var xa,or,Kl;let p9=(xa=class extends yi{constructor(n){super(n);Ee(this,or,void 0);Ee(this,Kl,void 0);n.data==="unchanged"?q(this,or,P(n.previous.memory,or)):n.data==="randomize"?q(this,or,new Uint8Array(xa.SIZE).map(()=>L.random(8).unsigned)):q(this,or,new Uint8Array(xa.SIZE));for(const[r,i]of Object.entries(vl)){const s=L.fromUnsigned(i,16);P(this,or).set(s.toUint8Array(),Number(r)*4)}for(const r of n.program.data){let i=r.start.value;for(const s of r.getValues())s!==lc&&P(this,or).set(s.toUint8Array(),i),i+=r.size/8}q(this,Kl,new Set);for(const r of n.program.instructions){P(this,or).set(r.toBytes(),r.start.value);for(let i=0;i<r.length;i++)P(this,Kl).add(r.start.value+i)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!be.inRange(n))return yield{type:"memory:read.error",error:new Bt("address-out-of-range",n)},null;const r=L.fromUnsigned(P(this,or).at(n),8);return yield{type:"memory:read.ok",address:be.from(n),value:r},r}*write(n,r){return n=Number(n),yield{type:"memory:write",address:n,value:r},be.inRange(n)?P(this,Kl).has(n)?(yield{type:"memory:write.error",error:new Bt("address-has-instruction",n)},!1):(P(this,or).set([r.unsigned],n),yield{type:"memory:write.ok",address:be.from(n),value:r},!0):(yield{type:"memory:write.error",error:new Bt("address-out-of-range",n)},!1)}toJSON(){return[...P(this,or)]}},or=new WeakMap,Kl=new WeakMap,ue(xa,"SIZE",be.MAX_ADDRESS+1),xa);class Lk{constructor(e){ue(this,"cpu");ue(this,"memory");ue(this,"io");const n={computer:this,...e};switch(this.cpu=new J8(n),this.memory=new p9(n),e.devices){case"pio-switches-and-leds":{this.io=new f9(n);break}case"pio-printer":{this.io=new u9(n);break}case"handshake":{this.io=new o9(n);break}default:throw new Error("Invalid devices configuration")}}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var _t;class m9{constructor(){Ee(this,_t,new Lk({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){q(this,_t,new Lk({...e,previous:P(this,_t)}))}getComputerState(){var e;return((e=P(this,_t))==null?void 0:e.toJSON())||null}startCPU(){if(!P(this,_t))throw new Bt("no-program");return P(this,_t).cpu.run()}get devices(){if(!P(this,_t))throw new Error("No computer loaded!");return{clock:{tick:()=>P(this,_t).io.clock.tick()},f10:{press:()=>P(this,_t).io.f10.press()},keyboard:{readChar:e=>P(this,_t).io.keyboard.setLastCharRead(e)},printer:{connected:()=>"printer"in P(this,_t).io,clear:()=>{if("printer"in P(this,_t).io)return P(this,_t).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in P(this,_t).io)return P(this,_t).io.printer.print();console.warn("No printer connected to the computer!")}},screen:{clear:()=>P(this,_t).io.screen.clear()},switches:{connected:()=>"switches"in P(this,_t).io,toggle:e=>{if("switches"in P(this,_t).io)return P(this,_t).io.switches.toggle(e);console.warn("No switches connected to the computer!")}}}}}_t=new WeakMap;class qe{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Ri.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let r=[];return this.decompose(e,n,r,0),Ri.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Pc(this),s=new Pc(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Pc(this,e)}iterRange(e,n=this.length){return new G$(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new K$(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?qe.empty:e.length<=32?new Rt(e):Ri.from(Rt.split(e,[]))}}class Rt extends qe{constructor(e,n=g9(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new y9(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Rt(Bk(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Df(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Rt(a,o.length+s.length));else{let l=a.length>>1;r.push(new Rt(a.slice(0,l)),new Rt(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Rt))return super.replace(e,n,r);let i=Df(this.text,Df(r.text,Bk(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Rt(i,s):Ri.from(Rt.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Rt(r,i)),r=[],i=-1);return i>-1&&n.push(new Rt(r,i)),n}}class Ri extends qe{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?r.push(a):a.decompose(e-o,n-o,r,u)}o=l+1}}replace(e,n,r){if(r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[i]=l,new Ri(c,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ri))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let f of e)r+=f.lines;if(r<32){let f=[];for(let p of e)p.flatten(f);return new Rt(f,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof Ri)for(let g of f.children)d(g);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Rt&&l&&(p=c[c.length-1])instanceof Rt&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Rt(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>i&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:Ri.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new Ri(a,n)}}qe.empty=new Rt([""],0);function g9(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Df(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function Bk(t,e,n){return Df(t,[""],e,n)}class Pc{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Rt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Rt?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Rt){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Rt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class G${constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Pc(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class K${constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(qe.prototype[Symbol.iterator]=function(){return this.iter()},Pc.prototype[Symbol.iterator]=G$.prototype[Symbol.iterator]=K$.prototype[Symbol.iterator]=function(){return this});class y9{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}let Ml="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Ml.length;t++)Ml[t]+=Ml[t-1];function v9(t){for(let e=1;e<Ml.length;e+=2)if(Ml[e]>t)return Ml[e-1]<=t;return!1}function zk(t){return t>=127462&&t<=127487}const jk=8205;function vn(t,e,n=!0,r=!0){return(n?X$:w9)(t,e,r)}function X$(t,e,n){if(e==t.length)return e;e&&Z$(t.charCodeAt(e))&&Y$(t.charCodeAt(e-1))&&e--;let r=An(t,e);for(e+=ei(r);e<t.length;){let i=An(t,e);if(r==jk||i==jk||n&&v9(i))e+=ei(i),r=i;else if(zk(i)){let s=0,o=e-2;for(;o>=0&&zk(An(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function w9(t,e,n){for(;e>0;){let r=X$(t,e-2,n);if(r<e)return r;e--}return 0}function Z$(t){return t>=56320&&t<57344}function Y$(t){return t>=55296&&t<56320}function An(t,e){let n=t.charCodeAt(e);if(!Y$(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Z$(r)?(n-55296<<10)+(r-56320)+65536:n}function m1(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ei(t){return t<65536?1:2}const Iv=/\r\n?|\n/;var Wn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Wn||(Wn={}));class Fi{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){Lv(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Fi(e)}composeDesc(e){return this.empty?e:e.empty?this:J$(this,e)}mapDesc(e,n=!1){return e.empty?this:Bv(this,e,n)}mapPos(e,n=-1,r=Wn.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=i+a;if(l<0){if(u>e)return s+(e-i);s+=a}else{if(r!=Wn.Simple&&u>=e&&(r==Wn.TrackDel&&i<e&&u>e||r==Wn.TrackBefore&&i<e||r==Wn.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Fi(e)}static create(e){return new Fi(e)}}class Ut extends Fi{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Lv(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return Bv(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(qe.empty);r.push(o?e.slice(s,s+o):qe.empty)}s+=o}return new Ut(n,r)}compose(e){return this.empty?e:e.empty?this:J$(this,e,!0)}map(e,n=!1){return e.empty?this:Bv(this,e,n,!0)}iterChanges(e,n=!1){Lv(this,e,n)}get desc(){return Fi.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new yd(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);mn(i,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;mn(n,c,d),d>0&&ao(r,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);mn(n,c,-1),mn(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new Ut(n,r),filtered:Fi.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!i.length)return;o<n&&mn(i,n-o,-1);let d=new Ut(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof Ut){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?qe.of(f.split(r||Iv)):f:qe.empty,g=p.length;if(d==h&&g==0)return;d<o&&l(),d>o&&mn(i,d-o,-1),mn(i,h-d,g),ao(s,i,p),o=h}}return u(e),l(!a),a}static empty(e){return new Ut(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(qe.empty);r[i]=qe.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Ut(n,r)}static createSet(e,n){return new Ut(e,n)}}function mn(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function ao(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(qe.empty);t.push(n)}}function Lv(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let u=i,c=s,d=qe.empty;for(;u+=a,c+=l,l&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,u,s,c,d),i=u,s=c}}}function Bv(t,e,n,r=!1){let i=[],s=r?[]:null,o=new yd(t),a=new yd(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);mn(i,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(mn(i,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(mn(i,0,o.ins),s&&ao(s,i,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;mn(i,u,l<o.i?o.ins:0),s&&l<o.i&&ao(s,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?Ut.createSet(i,s):Fi.create(i);throw new Error("Mismatched change set lengths")}}function J$(t,e,n=!1){let r=[],i=n?[]:null,s=new yd(t),o=new yd(e);for(let a=!1;;){if(s.done&&o.done)return i?Ut.createSet(r,i):Fi.create(r);if(s.ins==0)mn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)mn(r,0,o.ins,a),i&&ao(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=r.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;mn(r,l,c,a),i&&c&&ao(i,r,o.text)}else o.ins==-1?(mn(r,s.off?0:s.len,l,a),i&&ao(i,r,s.textBit(l))):(mn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&ao(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>u),s.forward2(l),o.forward(l)}}}}class yd{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?qe.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?qe.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class fa{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new fa(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return te.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return te.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return te.range(e.anchor,e.head)}static create(e,n,r){return new fa(e,n,r)}}class te{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:te.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new te([this.main],0)}addRange(e,n=!0){return te.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,te.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new te(e.ranges.map(n=>fa.fromJSON(n)),e.main)}static single(e,n=e){return new te([te.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return te.normalized(e.slice(),n);r=s.to}return new te(e,n)}static cursor(e,n=0,r,i){return fa.create(e,e,(n==0?0:n<0?4:8)|(r==null?3:Math.min(2,r))|(i??33554431)<<5)}static range(e,n,r,i){let s=(r??33554431)<<5|(i==null?3:Math.min(2,i));return n<e?fa.create(n,e,24|s):fa.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?te.range(l,a):te.range(a,l))}}return new te(e,n)}}function q$(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let g1=0;class Se{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=g1++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new Se(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:y1),!!e.static,e.enables)}of(e){return new If([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new If(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new If(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function y1(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class If{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=g1++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||zv(d,c)){let f=r(d);if(a?!Fk(f,d.values[o],i):!i(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let g=Vp(h,p);if(this.dependencies.every(b=>b instanceof Se?h.facet(b)===d.facet(b):b instanceof dn?h.field(b,!1)==d.field(b,!1):!0)||(a?Fk(f=r(d),g,i):i(f=r(d),g)))return d.values[o]=g,0}else f=r(d);return d.values[o]=f,1}}}}function Fk(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function zv(t,e){let n=!1;for(let r of e)Nc(t,r)&1&&(n=!0);return n}function b9(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let d=Vp(l,r[c]);if(i[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of r)Nc(l,u);return l.values[o]=a(l),1},update(l,u){if(!zv(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=zv(l,r),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&y1(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const Uk=Se.define({static:!0});class dn{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new dn(g1++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Uk).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,Uk.of({field:this,create:e})]}get extension(){return this}}const sa={lowest:4,low:3,default:2,high:1,highest:0};function Vu(t){return e=>new Q$(e,t)}const Kd={highest:Vu(sa.highest),high:Vu(sa.high),default:Vu(sa.default),low:Vu(sa.low),lowest:Vu(sa.lowest)};class Q${constructor(e,n){this.inner=e,this.prec=n}}class Xd{of(e){return new jv(this,e)}reconfigure(e){return Xd.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class jv{constructor(e,n){this.compartment=e,this.inner=n}}class Up{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let h of x9(e,n,o))h instanceof dn?i.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of i)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=r==null?void 0:r.config.facets;for(let h in s){let f=s[h],p=f[0].facet,g=c&&c[h]||[];if(f.every(b=>b.type==0))if(a[p.id]=l.length<<1|1,y1(g,f))l.push(r.facet(p));else{let b=p.combine(f.map(m=>m.value));l.push(r&&p.compare(b,r.facet(p))?r.facet(p):b)}else{for(let b of f)b.type==0?(a[b.id]=l.length<<1|1,l.push(b.value)):(a[b.id]=u.length<<1,u.push(m=>b.dynamicSlot(m)));a[p.id]=u.length<<1,u.push(b=>b9(b,p,f))}}let d=u.map(h=>h(a));return new Up(e,o,d,a,l,s)}}function x9(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof jv&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof jv){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof Q$)s(o.inner,o.prec);else if(o instanceof dn)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof If)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,sa.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,sa.default),r.reduce((o,a)=>o.concat(a))}function Nc(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Vp(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const eO=Se.define(),tO=Se.define({combine:t=>t.some(e=>e),static:!0}),nO=Se.define({combine:t=>t.length?t[0]:void 0,static:!0}),rO=Se.define(),iO=Se.define(),sO=Se.define(),oO=Se.define({combine:t=>t.length?t[0]:!1});class Rs{constructor(e,n){this.type=e,this.value=n}static define(){return new S9}}class S9{of(e){return new Rs(this,e)}}class k9{constructor(e){this.map=e}of(e){return new je(this,e)}}class je{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new je(this.type,n)}is(e){return this.type==e}static define(e={}){return new k9(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}je.reconfigure=je.define();je.appendConfig=je.define();class Wt{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&q$(r,n.newLength),s.some(a=>a.type==Wt.time)||(this.annotations=s.concat(Wt.time.of(Date.now())))}static create(e,n,r,i,s,o){return new Wt(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Wt.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Wt.time=Rs.define();Wt.userEvent=Rs.define();Wt.addToHistory=Rs.define();Wt.remote=Rs.define();function C9(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function aO(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=Ut.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:je.mapEffects(t.effects,i).concat(je.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Fv(t,e,n){let r=e.selection,i=_l(e.annotations);return e.userEvent&&(i=i.concat(Wt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ut?e.changes:Ut.of(e.changes||[],n,t.facet(nO)),selection:r&&(r instanceof te?r:te.single(r.anchor,r.head)),effects:_l(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function lO(t,e,n){let r=Fv(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=aO(r,Fv(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=Wt.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return A9(n?E9(i):i)}function E9(t){let e=t.startState,n=!0;for(let i of e.facet(rO)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:C9(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Ut.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Wt.create(e,i,t.selection&&t.selection.map(s),je.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(iO);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Wt?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Wt?t=s[0]:t=lO(e,_l(s),!1)}return t}function A9(t){let e=t.startState,n=e.facet(sO),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=aO(r,Fv(e,s,t.changes.newLength),!0))}return r==t?t:Wt.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const P9=[];function _l(t){return t==null?P9:Array.isArray(t)?t:[t]}var ln=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ln||(ln={}));const N9=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Uv;try{Uv=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function $9(t){if(Uv)return Uv.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||N9.test(n)))return!0}return!1}function O9(t){return e=>{if(!/\S/.test(e))return ln.Space;if($9(e))return ln.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ln.Word;return ln.Other}}class ze{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Nc(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Nc(this,r),Vp(this,r)}update(...e){return lO(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(Xd.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,l)=>i.set(l,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(je.reconfigure)?(n=null,r=o.value):o.is(je.appendConfig)&&(n=null,r=_l(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=Up.resolve(r,i,this),s=new ze(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new ze(n,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:te.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=_l(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=i.mapDesc(u,!0);s.push(l.range.map(d)),i=i.compose(c),o=je.mapEffects(o,c).concat(je.mapEffects(_l(l.effects),d))}return{changes:i,selection:te.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Ut?e:Ut.of(e,this.doc.length,this.facet(ze.lineSeparator))}toText(e){return qe.of(e.split(this.facet(ze.lineSeparator)||Iv))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Nc(this,n),Vp(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof dn&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ze.create({doc:e.doc,selection:te.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Up.resolve(e.extensions||[],new Map),r=e.doc instanceof qe?e.doc:qe.of((e.doc||"").split(n.staticFacet(ze.lineSeparator)||Iv)),i=e.selection?e.selection instanceof te?e.selection:te.single(e.selection.anchor,e.selection.head):te.single(0);return q$(i,r.length),n.staticFacet(tO)||(i=i.asSingle()),new ze(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ze.tabSize)}get lineBreak(){return this.facet(ze.lineSeparator)||`
`}get readOnly(){return this.facet(oO)}phrase(e,...n){for(let r of this.facet(ze.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(eO))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return O9(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=vn(n,o,!1);if(s(n.slice(l,o))!=ln.Word)break;o=l}for(;a<i;){let l=vn(n,a);if(s(n.slice(a,l))!=ln.Word)break;a=l}return o==a?null:te.range(o+r,a+r)}}ze.allowMultipleSelections=tO;ze.tabSize=Se.define({combine:t=>t.length?t[0]:4});ze.lineSeparator=nO;ze.readOnly=oO;ze.phrases=Se.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});ze.languageData=eO;ze.changeFilter=rO;ze.transactionFilter=iO;ze.transactionExtender=sO;Xd.reconfigure=je.define();function Vo(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Ra{eq(e){return this==e}range(e,n=e){return Vv.create(e,n,this)}}Ra.prototype.startSide=Ra.prototype.endSide=0;Ra.prototype.point=!1;Ra.prototype.mapMode=Wn.TrackDel;let Vv=class uO{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new uO(e,n,r)}};function Hv(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class v1{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),r.push(u),i.push(h-o),s.push(f-o))}return{mapped:r.length?new v1(i,s,r,a):null,pos:o}}}class mt{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new mt(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(Hv)),this.isEmpty)return n.length?mt.of(n):this;let a=new cO(this,null,-1).goto(0),l=0,u=[],c=new Da;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(Vv.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?mt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new mt(r,n,s||mt.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return vd.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return vd.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=Vk(o,a,r),u=new Hu(o,l,s),c=new Hu(a,l,s);r.iterGaps((d,h,f)=>Hk(u,d,c,h,f,i)),r.empty&&r.length==0&&Hk(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Vk(s,o),l=new Hu(s,a,0).goto(r),u=new Hu(o,a,0).goto(r);for(;;){if(l.to!=u.to||!Wv(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,n,r,i,s=-1){let o=new Hu(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:Math.min(c.length,l);i.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(i.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new Da;for(let i of e instanceof Vv?[e]:n?T9(e):e)r.add(i.from,i.to,i.value);return r.finish()}}mt.empty=new mt([],[],null,-1);function T9(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Hv(e,r)>0)return t.slice().sort(Hv);e=r}return t}mt.empty.nextLayer=mt.empty;class Da{finishChunk(e){this.chunks.push(new v1(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Da)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(mt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=mt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Vk(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class cO{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class vd{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new cO(o,n,r,s));return i.length==1?i[0]:new vd(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)x0(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)x0(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),x0(this.heap,0)}}}function x0(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Hu{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=vd.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Dh(this.active,e),Dh(this.activeTo,e),Dh(this.activeRank,e),this.minActive=Wk(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;Ih(this.active,n,r),Ih(this.activeTo,n,i),Ih(this.activeRank,n,s),e&&Ih(e,n,this.cursor.from),this.minActive=Wk(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Dh(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Hk(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Wv(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!Wv(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function Wv(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Dh(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Ih(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Wk(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Zd(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=vn(t,i));return r}function M9(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=vn(t,i)}return r===!0?-1:t.length}const Gv="ͼ",Gk=typeof Symbol>"u"?"__"+Gv:Symbol.for(Gv),Kv=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Kk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Mo{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>o.map(b=>g.replace(/&/,b))).reduce((g,b)=>g.concat(b)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(i(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((r&&!d&&!u?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Kk[Gk]||1;return Kk[Gk]=e+1,Gv+e.toString(36)}static mount(e,n){(e[Kv]||new _9(e)).mount(Array.isArray(n)?n:[n])}}let Xk=new Map;class _9{constructor(e){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let i=Xk.get(n);if(i)return e.adoptedStyleSheets=[i.sheet,...e.adoptedStyleSheets],e[Kv]=i;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Xk.set(n,this)}else{this.styleTag=n.createElement("style");let i=e.head||e;i.insertBefore(this.styleTag,i.firstChild)}this.modules=[],e[Kv]=this}mount(e){let n=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var _o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},wd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},R9=typeof navigator<"u"&&/Mac/.test(navigator.platform),D9=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rn=0;rn<10;rn++)_o[48+rn]=_o[96+rn]=String(rn);for(var rn=1;rn<=24;rn++)_o[rn+111]="F"+rn;for(var rn=65;rn<=90;rn++)_o[rn]=String.fromCharCode(rn+32),wd[rn]=String.fromCharCode(rn);for(var S0 in _o)wd.hasOwnProperty(S0)||(wd[S0]=_o[S0]);function I9(t){var e=R9&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||D9&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?wd:_o)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Hp(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Xv(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function L9(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Lf(t,e){if(!e.anchorNode)return!1;try{return Xv(t,e.anchorNode)}catch{return!1}}function bd(t){return t.nodeType==3?Ia(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Wp(t,e,n,r){return n?Zk(t,e,n,r,-1)||Zk(t,e,n,r,1):!1}function Gp(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Zk(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Ro(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Gp(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Ro(t):0}else return!1}}function Ro(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function w1(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function B9(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function z9(t,e,n,r,i,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body;if(f)h=B9(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let b=c.getBoundingClientRect();h={left:b.left,right:b.left+c.clientWidth,top:b.top,bottom:b.top+c.clientHeight}}let p=0,g=0;if(i=="nearest")e.top<h.top?(g=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+g&&(g=e.bottom-h.bottom+g+o)):e.bottom>h.bottom&&(g=e.bottom-h.bottom+o,n<0&&e.top-g<h.top&&(g=-(h.top+g-e.top+o)));else{let b=e.bottom-e.top,m=h.bottom-h.top;g=(i=="center"&&b<=m?e.top+b/2-m/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-m+o)-h.top}if(r=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),n>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,n<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||g)if(f)u.scrollBy(p,g);else{let b=0,m=0;if(g){let v=c.scrollTop;c.scrollTop+=g,m=c.scrollTop-v}if(p){let v=c.scrollLeft;c.scrollLeft+=p,b=c.scrollLeft-v}e={left:e.left-b,top:e.top-m,right:e.right-b,bottom:e.bottom-m},b&&Math.abs(b-p)<1&&(r="nearest"),m&&Math.abs(m-g)<1&&(i="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function j9(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class F9{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?Ro(n):0),r,Math.min(e.focusOffset,r?Ro(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Qa=null;function dO(t){if(t.setActive)return t.setActive();if(Qa)return t.focus(Qa);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Qa==null?{get preventScroll(){return Qa={preventScroll:!0},!0}}:void 0),!Qa){Qa=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Yk;function Ia(t,e,n=e){let r=Yk||(Yk=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Rl(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function U9(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function hO(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function V9(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,Ro(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=Ro(n))}else{if(n==t)return!0;r=Gp(n),n=n.parentNode}}function fO(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class $n{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new $n(e.parentNode,Gp(e),n)}static after(e,n){return new $n(e.parentNode,Gp(e)+1,n)}}const b1=[];class ct{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=ct.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=Jk(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=Jk(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=Ro(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ct.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&i==-1&&(i=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=b1){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new pO(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}ct.prototype.breakAfter=0;function Jk(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class pO{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function mO(t,e,n,r,i,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==r&&c&&!o&&!h&&s.length<2&&c.merge(n,i,s.length?d:null,n==0,a,l))){if(r<u.length){let f=u[r];f&&i<f.length?(e==r&&(f=f.split(i),i=0),!h&&d&&f.merge(0,i,d,!0,0,l)?s[s.length-1]=f:(i&&f.merge(0,i,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function gO(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of r)d+=h.length;t.length+=d,mO(t,u,c,a,l,r,0,i,s)}const wl="￿";class yO{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ze.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=wl}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=ct.get(i),l=ct.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:qk(i))||qk(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=ct.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(n,r.offset))}}function qk(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class Qk{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let dr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Zv=typeof document<"u"?document:{documentElement:{style:{}}};const Yv=/Edge\/(\d+)/.exec(dr.userAgent),vO=/MSIE \d/.test(dr.userAgent),Jv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(dr.userAgent),sg=!!(vO||Jv||Yv),eC=!sg&&/gecko\/(\d+)/i.test(dr.userAgent),k0=!sg&&/Chrome\/(\d+)/.exec(dr.userAgent),tC="webkitFontSmoothing"in Zv.documentElement.style,wO=!sg&&/Apple Computer/.test(dr.vendor),nC=wO&&(/Mobile\/\w+/.test(dr.userAgent)||dr.maxTouchPoints>2);var ke={mac:nC||/Mac/.test(dr.platform),windows:/Win/.test(dr.platform),linux:/Linux|X11/.test(dr.platform),ie:sg,ie_version:vO?Zv.documentMode||6:Jv?+Jv[1]:Yv?+Yv[1]:0,gecko:eC,gecko_version:eC?+(/Firefox\/(\d+)/.exec(dr.userAgent)||[0,0])[1]:0,chrome:!!k0,chrome_version:k0?+k0[1]:0,ios:nC,android:/Android\b/.test(dr.userAgent),webkit:tC,safari:wO,webkit_version:tC?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Zv.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const H9=256;class Gi extends ct{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Gi)||this.length-(n-e)+r.length>H9||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Gi(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new $n(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return W9(this.dom,e,n)}}class $s extends ct{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(hO(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof $s&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(gO(this,e,n,r?r.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new $s(this.mark,n,o)}domAtPos(e){return bO(this,e)}coordsAt(e,n){return SO(this,e,n)}}function W9(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?ke.chrome||ke.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=Ia(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return ke.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?w1(l,o<0):l||null}class pa extends ct{constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}static create(e,n,r){return new pa(e,n,r)}split(e){let n=pa.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof pa)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof pa&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return qe.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):qe.empty}domAtPos(e){return(this.length?e==0:this.side>0)?$n.before(this.dom):$n.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return w1(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ou extends ct{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ou&&e.side==this.side}split(){return new ou(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?$n.before(this.dom):$n.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return qe.empty}get isHidden(){return!0}}Gi.prototype.children=pa.prototype.children=ou.prototype.children=b1;function bO(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new $n(n,0)}function xO(t,e,n){let r,{children:i}=t;n>0&&e instanceof $s&&i.length&&(r=i[i.length-1])instanceof $s&&r.mark.eq(e.mark)?xO(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function SO(t,e,n){let r=null,i=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(r=f,i=c-h)),h=p}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):G9(t)}function G9(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=bd(e);return n[n.length-1]||null}function qv(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const rC=Object.create(null);function x1(t,e,n){if(t==e)return!0;t||(t=rC),e||(e=rC);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Qv(t,e,n){let r=null;if(e)for(let i in e)n&&i in n||t.removeAttribute(r=i);if(n)for(let i in n)e&&e[i]==n[i]||t.setAttribute(r=i,n[i]);return!!r}function K9(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Ha{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}destroy(e){}}var $t=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}($t||($t={}));class Ze extends Ra{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Yd(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Do(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=kO(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new Do(e,r,i,n,e.widget||null,!0)}static line(e){return new Jd(e)}static set(e,n=!1){return mt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ze.none=mt.empty;class Yd extends Ze{constructor(e){let{start:n,end:r}=kO(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Yd&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&x1(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Yd.prototype.point=!1;class Jd extends Ze{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Jd&&this.spec.class==e.spec.class&&x1(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Jd.prototype.mapMode=Wn.TrackBefore;Jd.prototype.point=!0;class Do extends Ze{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?Wn.TrackBefore:Wn.TrackAfter:Wn.TrackDel}get type(){return this.startSide<this.endSide?$t.WidgetRange:this.startSide<=0?$t.WidgetBefore:$t.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Do&&X9(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Do.prototype.point=!0;function kO(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function X9(t,e){return t==e||!!(t&&e&&t.compare(e))}function ew(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Pn extends ct{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof Pn))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),gO(this,e,n,r?r.children:[],s,o),!0}split(e){let n=new Pn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){x1(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){xO(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=qv(n,this.attrs||{})),r&&(this.attrs=qv({class:r},this.attrs||{}))}domAtPos(e){return bO(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(hO(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Qv(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&ct.get(i)instanceof $s;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ct.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!ke.ios||!this.children.some(s=>s instanceof Gi))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Gi)||/[^ -~]/.test(r.text))return null;let i=bd(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=SO(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return!1}get type(){return $t.Text}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof Pn)return s;if(o>n)break}i=o+s.breakAfter}return null}}class ba extends ct{constructor(e,n,r){super(),this.widget=e,this.length=n,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof ba)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?$n.before(this.dom):$n.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new ba(this.widget,n,this.type);return r.breakAfter=this.breakAfter,r}get children(){return b1}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):qe.empty}domBoundsAround(){return null}become(e){return e instanceof ba&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class $c{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof ba&&e.type==$t.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Pn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Lh(new ou(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Lh(new Gi(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Do){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof Do)if(r.block){let{type:l}=r;l==$t.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ba(r.widget||new iC("div"),a,l))}else{let l=pa.create(r.widget||new iC("span"),a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(d.append(Lh(new ou(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(Lh(l,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new $c(e,n,r,s);return o.openEnd=mt.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Lh(t,e){for(let n of e)t=new $s(n,[t],t.length);return t}class iC extends Ha{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const CO=Se.define(),EO=Se.define(),AO=Se.define(),PO=Se.define(),tw=Se.define(),NO=Se.define(),$O=Se.define(),OO=Se.define({combine:t=>t.some(e=>e)}),TO=Se.define({combine:t=>t.some(e=>e)});class Kp{constructor(e,n="nearest",r="nearest",i=5,s=5){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s}map(e){return e.empty?this:new Kp(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const sC=je.define({map:(t,e)=>t.map(e)});function Ir(t,e,n){let r=t.facet(PO);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const og=Se.define({combine:t=>t.length?t[0]:!0});let Z9=0;const uc=Se.define();class qt{constructor(e,n,r,i){this.id=e,this.create=n,this.domEventHandlers=r,this.extension=i(this)}static define(e,n){const{eventHandlers:r,provide:i,decorations:s}=n||{};return new qt(Z9++,e,r,o=>{let a=[uc.of(o)];return s&&a.push(xd.of(l=>{let u=l.plugin(o);return u?s(u):Ze.none})),i&&a.push(i(o)),a})}static fromClass(e,n){return qt.define(r=>new e(r),n)}}class C0{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Ir(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Ir(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Ir(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const MO=Se.define(),S1=Se.define(),xd=Se.define(),k1=Se.define(),_O=Se.define();function RO(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(_O)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const cc=Se.define();class Lr{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Lr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new Lr(f+u,p+u,f,p).addToSet(r),h>c)break;s+=2}if(!l)return r;new Lr(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class Xp{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ut.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new Lr(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new Xp(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Pt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Pt||(Pt={}));const nw=Pt.LTR,Y9=Pt.RTL;function DO(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const J9=DO("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),q9=DO("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),rw=Object.create(null),bi=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);rw[e]=n,rw[n]=-e}function Q9(t){return t<=247?J9[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?q9[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const e7=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Dl{constructor(e,n,r){this.from=e,this.to=n,this.level=r}get dir(){return this.level%2?Y9:nw}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const kt=[];function t7(t,e){let n=t.length,r=e==nw?1:2,i=e==nw?2:1;if(!t||r==1&&!e7.test(t))return IO(n);for(let o=0,a=r,l=r;o<n;o++){let u=Q9(t.charCodeAt(o));u==512?u=a:u==8&&l==4&&(u=16),kt[o]=u==4?2:u,u&7&&(l=u),a=u}for(let o=0,a=r,l=r;o<n;o++){let u=kt[o];if(u==128)o<n-1&&a==kt[o+1]&&a&24?u=kt[o]=a:kt[o]=256;else if(u==64){let c=o+1;for(;c<n&&kt[c]==64;)c++;let d=o&&a==8||c<n&&kt[c]==8?l==1?1:8:256;for(let h=o;h<c;h++)kt[h]=d;o=c-1}else u==8&&l==1&&(kt[o]=1);a=u,u&7&&(l=u)}for(let o=0,a=0,l=0,u,c,d;o<n;o++)if(c=rw[u=t.charCodeAt(o)])if(c<0){for(let h=a-3;h>=0;h-=3)if(bi[h+1]==-c){let f=bi[h+2],p=f&2?r:f&4?f&1?i:r:0;p&&(kt[o]=kt[bi[h]]=p),a=h;break}}else{if(bi.length==189)break;bi[a++]=o,bi[a++]=u,bi[a++]=l}else if((d=kt[o])==2||d==1){let h=d==r;l=h?0:1;for(let f=a-3;f>=0;f-=3){let p=bi[f+2];if(p&2)break;if(h)bi[f+2]|=2;else{if(p&4)break;bi[f+2]|=4}}}for(let o=0;o<n;o++)if(kt[o]==256){let a=o+1;for(;a<n&&kt[a]==256;)a++;let l=(o?kt[o-1]:r)==1,u=(a<n?kt[a]:r)==1,c=l==u?l?1:2:r;for(let d=o;d<a;d++)kt[d]=c;o=a-1}let s=[];if(r==1)for(let o=0;o<n;){let a=o,l=kt[o++]!=1;for(;o<n&&l==(kt[o]!=1);)o++;if(l)for(let u=o;u>a;){let c=u,d=kt[--u]!=2;for(;u>a&&d==(kt[u-1]!=2);)u--;s.push(new Dl(u,c,d?2:1))}else s.push(new Dl(a,o,0))}else for(let o=0;o<n;){let a=o,l=kt[o++]==2;for(;o<n&&l==(kt[o]==2);)o++;s.push(new Dl(a,o,l?1:2))}return s}function IO(t){return[new Dl(0,t,0)]}let LO="";function n7(t,e,n,r,i){var s;let o=r.head-t.from,a=-1;if(o==0){if(!i||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),a=0)}else if(o==t.length){if(i)return null;let h=e[e.length-1];h.level!=n&&(o=h.side(!0,n),a=e.length-1)}a<0&&(a=Dl.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc));let l=e[a];o==l.side(i,n)&&(l=e[a+=i?1:-1],o=l.side(!i,n));let u=i==(l.dir==n),c=vn(t.text,o,u);if(LO=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=l.side(i,n))return te.cursor(c+t.from,u?-1:1,l.level);let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return!d&&l.level!=n?te.cursor(i?t.to:t.from,i?-1:1,n):d&&d.level<l.level?te.cursor(d.side(!i,n)+t.from,i?1:-1,d.level):te.cursor(c+t.from,i?-1:1,l.level)}class oC extends ct{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Pn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Lr(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=this.view.inputState.composing<0?null:i7(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:a,to:l}=this.hasComposition;n=new Lr(a,l,e.changes.mapPos(a,-1),e.changes.mapPos(l,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(ke.ie||ke.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,s=this.updateDeco(),o=a7(i,s,e.changes);return n=Lr.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=ke.chrome||ke.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ba&&o.widget instanceof aC&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,g;if(r&&r.range.fromB<d&&r.range.toB>c){let S=$c.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=$c.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);f=S.breakAtStart,p=S.openStart,g=C.openEnd;let E=this.compositionView(r);C.breakAtStart?E.breakAfter=1:C.content.length&&E.merge(E.length,E.length,C.content[0],!1,C.openStart,0)&&(E.breakAfter=C.content[0].breakAfter,C.content.shift()),S.content.length&&E.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),h=S.content.concat(E).concat(C.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:g}=$c.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:b,off:m}=s.findPos(u,1),{i:v,off:w}=s.findPos(l,-1);mO(this,v,w,b,m,h,f,p,g)}r&&this.fixCompositionDOM(r)}compositionView(e){let n=new Gi(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new $s(i,[n],n.length);let r=new Pn;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let a=ct.get(s);a!=o&&(a&&(a.dom=null),o.setDOM(s))},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&Lf(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.domAtPos(a.anchor),u=a.empty?l:this.domAtPos(a.head);if(ke.gecko&&a.empty&&!this.hasComposition&&r7(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new $n(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!Wp(l.node,l.offset,c.anchorNode,c.anchorOffset)||!Wp(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{ke.android&&ke.chrome&&this.dom.contains(c.focusNode)&&l7(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Hp(this.view.root);if(d)if(a.empty){if(ke.gecko){let h=s7(l.node,l.offset);if(h&&h!=3){let f=zO(l.node,l.offset,h==1?1:-1);f&&(l=new $n(f,h==1?0:f.nodeValue.length))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new $n(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new $n(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Hp(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=Pn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(i,s)}nearest(e){for(let n=e;n;){let r=ct.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Pn)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){for(let r=this.length,i=this.children.length-1;;i--){let s=this.children[i],o=r-s.breakAfter-s.length;if(e>o||e==o&&s.type!=$t.WidgetBefore&&s.type!=$t.WidgetAfter&&(!i||n==2||this.children[i-1].breakAfter||this.children[i-1].type==$t.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);r=o}}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Pn))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof Gi))return null;let s=vn(i.text,r);if(s==r)return null;let o=Ia(i.dom,r,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Pt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>i)break;if(u>=r){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,g=p?bd(p):[];if(g.length){let b=g[g.length-1],m=l?b.right-f.left:f.right-b.left;m>a&&(a=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Pt.RTL:Pt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Pn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=bd(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new pO(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=n.lineBlockAt(o).bottom-n.lineBlockAt(r).top;e.push(Ze.replace({widget:new aC(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Ze.set(e)}updateDeco(){let e=this.view.state.facet(xd).map((n,r)=>(this.dynamicDecorationMap[r]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=RO(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom};z9(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Pt.LTR)}}function r7(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class aC extends Ha{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function BO(t){let e=t.observer.selectionRange,n=e.focusNode&&zO(e.focusNode,e.focusOffset,0);if(!n)return null;let r=ct.get(n),i,s;if(r instanceof Gi)i=r.posAtStart,s=i+r.length;else e:for(let o=0,a=n;;){for(let u=a.previousSibling,c;u;u=u.previousSibling){if(c=ct.get(u)){i=s=c.posAtEnd+o;break e}let d=new yO([],t.state);if(d.readNode(u),d.text.indexOf(wl)>-1)return null;o+=d.text.length}if(a=a.parentNode,!a)return null;let l=ct.get(a);if(l){i=s=l.posAtStart+o;break}}return{from:i,to:s,node:n}}function i7(t,e){let n=BO(t);if(!n)return null;let{from:r,to:i,node:s}=n,o=e.mapPos(r,-1),a=e.mapPos(i,1),l=s.nodeValue;if(/[\n\r]/.test(l))return null;if(a-o!=l.length){let h=e.mapPos(r,1),f=e.mapPos(i,-1);if(f-h==l.length)o=h,a=f;else if(t.state.doc.sliceString(a-l.length,a)==l)o=a-l.length;else if(t.state.doc.sliceString(o,o+l.length)==l)a=o+l.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,a)!=l||o>u.head||a<u.head)return null;let c=[],d=new Lr(r,i,o,a);for(let h=s.parentNode;;h=h.parentNode){let f=ct.get(h);if(f instanceof $s)c.push({node:h,deco:f.mark});else{if(f instanceof Pn||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:d,text:s,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new Yd({inclusive:!0,attributes:K9(h),tagName:h.tagName.toLowerCase()})});else return null}}}function zO(t,e,n){if(n<=0)for(let r=t,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i>0)r=r.childNodes[i-1],i=Ro(r);else break}if(n>=0)for(let r=t,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i<r.childNodes.length&&n>=0)r=r.childNodes[i],i=0;else break}return null}function s7(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class o7{constructor(){this.changes=[]}compareRange(e,n){ew(e,n,this.changes)}comparePoint(e,n){ew(e,n,this.changes)}}function a7(t,e,n){let r=new o7;return mt.compare(t,e,n,r),r.changes}function l7(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function u7(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return te.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=vn(i.text,s,!1):a=vn(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let u=vn(i.text,o,!1);if(r(i.text.slice(u,o))!=l)break;o=u}for(;a<i.length;){let u=vn(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return te.range(o+i.from,a+i.from)}function c7(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function d7(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function E0(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function lC(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function uC(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function iw(t,e,n){let r,i,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let g=bd(p);for(let b=0;b<g.length;b++){let m=g[b];i&&E0(i,m)&&(m=lC(uC(m,i.bottom),i.top));let v=c7(e,m),w=d7(n,m);if(v==0&&w==0)return p.nodeType==3?cC(p,e,n):iw(p,e,n);if(!r||o>w||o==w&&s>v){r=p,i=m,s=v,o=w;let S=w?n<m.top?-1:1:v?e<m.left?-1:1:0;a=!S||(S>0?b<g.length-1:b>0)}v==0?n>m.bottom&&(!c||c.bottom<m.bottom)?(l=p,c=m):n<m.top&&(!d||d.top>m.top)&&(u=p,d=m):c&&E0(c,m)?c=uC(c,m.bottom):d&&E0(d,m)&&(d=lC(d,m.top))}}if(c&&c.bottom>=n?(r=l,i=c):d&&d.top<=n&&(r=u,i=d),!r)return{node:t,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return cC(r,h,n);if(a&&r.contentEditable!="false")return iw(r,h,n);let f=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:f}}function cC(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Ia(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((ke.chrome||ke.gecko)&&Ia(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};i=a+(f?1:0),s=d}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function jO(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,C=!1;l=t.elementAtHeight(h),l.type!=$t.Text;)for(;h=r>0?l.bottom+S:l.top-S,!(h>=0&&h<=u);){if(C)return n?null:0;C=!0,r=-r}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:dC(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:dC(t,o,l,c,d);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,b=g.elementFromPoint(c,d);b&&!t.contentDOM.contains(b)&&(b=null),b||(c=Math.max(o.left+1,Math.min(o.right-1,c)),b=g.elementFromPoint(c,d),b&&!t.contentDOM.contains(b)&&(b=null));let m,v=-1;if(b&&((i=t.docView.nearest(b))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let S=p.caretPositionFromPoint(c,d);S&&({offsetNode:m,offset:v}=S)}else if(p.caretRangeFromPoint){let S=p.caretRangeFromPoint(c,d);S&&({startContainer:m,startOffset:v}=S,(!t.contentDOM.contains(m)||ke.safari&&h7(m,v,c)||ke.chrome&&f7(m,v,c))&&(m=void 0))}}if(!m||!t.docView.dom.contains(m)){let S=Pn.find(t.docView,f);if(!S)return h>l.top+l.height/2?l.to:l.from;({node:m,offset:v}=iw(S.dom,c,d))}let w=t.docView.nearest(m);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=w.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(m,v)+w.posAtStart}function dC(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+M9(o,s,t.state.tabSize)}function h7(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Ia(t,r-1,r).getBoundingClientRect().left>n}function f7(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Ia(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function sw(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==$t.Text))return r}return n}function p7(t,e,n,r){let i=sw(t,e.head),s=!r||i.type!=$t.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==Pt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return te.cursor(l,n?-1:1)}return te.cursor(n?i.to:i.from,n?-1:1)}function hC(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let u=n7(i,s,o,a,n),c=LO;if(!u){if(i.number==(n?t.state.doc.lines:1))return a;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=te.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function m7(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==ln.Space&&(i=o),i==o}}function g7(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return te.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=r??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,g=jO(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?g<i:g>i))return te.cursor(g,e.assoc,void 0,o)}}function Bf(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function A0(t,e,n){let r=Bf(t.state.facet(k1).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:te.cursor(r,r<n.from?1:-1)}class y7{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(r,i)=>{this.ignoreDuringComposition(i)||i.type=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():r(e,i))};for(let r in zt){let i=zt[r];e.contentDOM.addEventListener(r,s=>{fC(e,s)&&n(i,s)},ow[r]),this.registeredEvents.push(r)}e.scrollDOM.addEventListener("mousedown",r=>{if(r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(zt.mousedown,r),!r.defaultPrevented&&r.button==2)){let i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=i,200)}}),e.scrollDOM.addEventListener("drop",r=>{r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(zt.drop,r)}),ke.chrome&&ke.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,ke.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var r;let i;this.customHandlers=[];for(let s of n)if(i=(r=s.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});for(let o in i)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{fC(e,a)&&this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,n,r){for(let i of this.customHandlers){let s=i.handlers[e];if(s)try{if(s.call(i.plugin,r,n)||r.defaultPrevented)return!0}catch(o){Ir(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,n,e)}catch(s){Ir(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&UO.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),ke.android&&ke.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return ke.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((r=FO.find(i=>i.keyCode==n.keyCode))&&!n.ctrlKey||v7.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=r||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,Rl(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ke.safari&&!ke.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const FO=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],v7="dthko",UO=[16,17,18,20,91,92,224,225],Bh=6;function zh(t){return Math.max(0,t)*.7+8}function w7(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class b7{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=j9(e.contentDOM),this.atoms=e.state.facet(k1).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ze.allowMultipleSelections)&&x7(e,n),this.dragging=k7(e,n)&&GO(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&w7(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=RO(this.view);e.clientX-o.left<=s.left+Bh?r=-zh(s.left-e.clientX):e.clientX+o.right>=s.right-Bh&&(r=zh(e.clientX-s.right)),e.clientY-o.top<=s.top+Bh?i=-zh(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Bh&&(i=zh(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Bf(this.atoms,i.from,0);o!=i.from&&(s=te.cursor(o,-1))}else{let o=Bf(this.atoms,i.from,-1),a=Bf(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=te.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?te.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection)||r.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function x7(t,e){let n=t.state.facet(CO);return n.length?n[0](e):ke.mac?e.metaKey:e.ctrlKey}function S7(t,e){let n=t.state.facet(EO);return n.length?n[0](e):ke.mac?!e.altKey:!e.ctrlKey}function k7(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Hp(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function fC(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ct.get(n))&&r.ignoreEvent(e))return!1;return!0}const zt=Object.create(null),ow=Object.create(null),VO=ke.ie&&ke.ie_version<15||ke.ios&&ke.webkit_version<604;function C7(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),HO(t,n.value)},50)}function HO(t,e){let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(aw!=null&&n.selection.ranges.every(l=>l.empty)&&aw==s.toString()){let l=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:te.cursor(u.from+d.length)}})}else o?r=n.changeByRange(l=>{let u=s.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:te.cursor(l.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}zt.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};zt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};zt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ow.touchstart=ow.touchmove={passive:!0};zt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of t.state.facet(AO))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=P7(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new b7(t,e,n,r)),r&&t.observer.ignore(()=>dO(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function pC(t,e,n,r){if(r==1)return te.cursor(e,n);if(r==2)return u7(t.state,e,n);{let i=Pn.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,te.range(o,a)}}let WO=(t,e)=>t>=e.top&&t<=e.bottom,mC=(t,e,n)=>WO(e,n)&&t>=n.left&&t<=n.right;function E7(t,e,n,r){let i=Pn.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&mC(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&mC(n,r,a)?1:o&&WO(r,o)?-1:1}function gC(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:E7(t,n,e.clientX,e.clientY)}}const A7=ke.ie&&ke.ie_version<=11;let yC=null,vC=0,wC=0;function GO(t){if(!A7)return t.detail;let e=yC,n=wC;return yC=t,wC=Date.now(),vC=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(vC+1)%3:1}function P7(t,e){let n=gC(t,e),r=GO(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=gC(t,s),u,c=pC(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let d=pC(t,n.pos,n.bias,r),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?te.range(h,f):te.range(f,h)}return o?i.replaceRange(i.main.extend(c.from,c.to)):a&&r==1&&i.ranges.length>1&&(u=N7(i,l.pos))?u:a?i.addRange(c):te.create([c])}}}function N7(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return te.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}zt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:r}=t.inputState;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function bC(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=r&&s&&s.dragging&&S7(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"})}zt.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let r=Array(n.length),i=0,s=()=>{++i==n.length&&bC(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}}else bC(t,e,e.dataTransfer.getData("Text"),!0)};zt.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=VO?null:e.clipboardData;n?(HO(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):C7(t)};function $7(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function O7(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let aw=null;zt.copy=zt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=O7(t.state);if(!n&&!i)return;aw=i?n:null;let s=VO?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):$7(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const KO=Rs.define();function XO(t,e){let n=[];for(let r of t.facet($O)){let i=r(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:KO.of(!0)}):null}function ZO(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=XO(t.state,e);n?t.dispatch(n):t.update([])}},10)}zt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),ZO(t)};zt.blur=t=>{t.observer.clearSelectionRange(),ZO(t)};zt.compositionstart=zt.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};zt.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,ke.chrome&&ke.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};zt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};zt.beforeinput=(t,e)=>{var n;let r;if(ke.chrome&&ke.android&&(r=FO.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const xC=["pre-wrap","normal","pre-line","break-spaces"];class T7{constructor(e){this.lineWrapping=e,this.doc=qe.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return xC.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=xC.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class M7{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Di{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?$t.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Do?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Di(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var pt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(pt||(pt={}));const zf=.001;class Tn{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>zf&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return Tn.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=i[a],h=s.lineAt(l,pt.ByPosNoHeight,r.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,pt.ByPosNoHeight,r,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,pt.ByPosNoHeight,r,0,0));c+=h.from-l,l=h.from;let p=C1.build(r.setDoc(o),e,c,d);s=s.replace(l,u,p)}return s.updateHeight(r,0)}static empty(){return new lr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new _7(Tn.of(e.slice(0,n)),o,Tn.of(e.slice(r)))}}Tn.prototype.size=1;class YO extends Tn{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Di(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class lr extends YO{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Di(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof lr||i instanceof tn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof tn?i=new lr(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Tn.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class tn extends Tn{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(r,e-d/2);return new Di(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:d}=n.doc.line(s+u);return new Di(c,d,r+a*u,a,0)}}lineAt(e,n,r,i,s){if(n==pt.ByHeight)return this.blockAt(e,r,i,s);if(n==pt.ByPosNoHeight){let{from:f,to:p}=r.doc.lineAt(e);return new Di(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=i+a*d+l*(u.from-s-d);return new Di(u.from,u.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let c=e,d=i;c<=n;){let h=r.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new Di(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof tn?r[r.length-1]=new tn(s.length+i):r.push(null,new tn(i-1))}if(e>0){let s=r[0];s instanceof tn?r[0]=new tn(e+s.length):r.unshift(new tn(e-1),null)}return Tn.of(r)}decomposeLeft(e,n){n.push(new tn(e-1),null)}decomposeRight(e,n){n.push(null,new tn(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new tn(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=zf&&(l=-2);let h=new lr(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new tn(s-a).updateHeight(e,a));let u=Tn.of(o);return(l<0||Math.abs(u.height-this.height)>=zf||Math.abs(l-this.heightMetrics(e,n).perLine)>=zf)&&(e.heightChanged=!0),u}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class _7 extends Tn{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==pt.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==pt.ByPosNoHeight?pt.ByPosNoHeight:pt.ByPos;return l?u.join(this.right.lineAt(a,c,r,o,a)):this.left.lineAt(a,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let u=this.lineAt(l,pt.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&SC(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),SC(s,a)}return Tn.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Tn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function SC(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof tn&&(r=t[e+1])instanceof tn&&t.splice(e-1,3,new tn(n.length+1+r.length))}const R7=5;class C1{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof lr?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new lr(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new YO(o,i,r)):(o||s||i>=R7)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new lr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new tn(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof lr)return e;let n=new lr(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let r=(n=e.deco)===null||n===void 0?void 0:n.type;r==$t.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r!=$t.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof lr)&&!this.isCovered?this.nodes.push(new lr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof lr&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new C1(r,e);return mt.spans(n,r,i,s,0),s.finish(r)}}function D7(t,e,n){let r=new I7;return mt.compare(t,e,n,r,0),r.changes}class I7{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&ew(e,n,this.changes,5)}}function L7(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=u==t.parentNode?h.bottom:Math.min(l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function B7(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class P0{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e){return Ze.replace({widget:new z7(this.size,e)}).range(this.from,this.to)}}class z7 extends Ha{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class kC{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=CC,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Pt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(S1).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new T7(n),this.stateDeco=e.facet(xd).filter(r=>typeof r!="function"),this.heightMap=Tn.empty().applyChanges(this.stateDeco,qe.empty,this.heightOracle.setDoc(e.doc),[new Lr(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ze.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new jh(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?CC:new U7(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:dc(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(xd).filter(c=>typeof c!="function");let i=e.changedRanges,s=Lr.extendWithRanges(i,D7(r,this.stateDeco,e?e.changes:Ut.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(TO)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Pt.RTL:Pt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0,d=parseInt(r.paddingTop)||0,h=parseInt(r.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=fO(e.scrollDOM);let f=(this.printing?B7:L7)(n,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let m=a.width;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let w=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(w)&&(o=!0),o||i.lineWrapping&&Math.abs(m-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:C,textHeight:E}=e.docView.measureTextSize();o=S>0&&i.refresh(s,S,C,E,m/C,w),o&&(e.docView.minWidth=0,u|=8)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),i.heightChanged=!1;for(let S of this.viewports){let C=S.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(S);this.heightMap=(o?Tn.empty().applyChanges(this.stateDeco,qe.empty,this.heightOracle,[new Lr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new M7(S.from,C))}i.heightChanged&&(u|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new jh(i.lineAt(o-r*1e3,pt.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,pt.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(u,pt.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new jh(i.lineAt(h-1e3/2,pt.ByHeight,s,0,0).from,i.lineAt(h+c+1e3/2,pt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new jh(this.heightMap.lineAt(r,pt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,pt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,pt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,pt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new P0(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Pt.LTR&&!r)return[];let a=[],l=(u,c,d,h)=>{if(c-u<s)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let b of p)if(b>u&&b<c){l(u,b-10,d,h),l(b+10,c,d,h);return}let g=F7(e,b=>b.from>=d.from&&b.to<=d.to&&Math.abs(b.from-u)<s&&Math.abs(b.to-c)<s&&!p.some(m=>b.from<m&&b.to>m));if(!g){if(c<d.to&&n&&r&&n.visibleRanges.some(b=>b.from<=c&&b.to>=c)){let b=n.moveToLineBoundary(te.cursor(c),!1,!0).head;b>u&&(c=b)}g=new P0(u,c,this.gapSize(d,u,c,h))}a.push(g)};for(let u of this.viewportLines){if(u.length<o)continue;let c=j7(u.from,u.to,this.stateDeco);if(c.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(r){let p=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,b;if(d!=null){let m=Uh(c,d),v=((this.visibleBottom-this.visibleTop)/2+p)/u.height;g=m-v,b=m+v}else g=(this.visibleTop-u.top-p)/u.height,b=(this.visibleBottom-u.top+p)/u.height;h=Fh(c,g),f=Fh(c,b)}else{let p=c.total*this.heightOracle.charWidth,g=i*this.heightOracle.charWidth,b,m;if(d!=null){let v=Uh(c,d),w=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/p;b=v-w,m=v+w}else b=(this.pixelViewport.left-g)/p,m=(this.pixelViewport.right+g)/p;h=Fh(c,b),f=Fh(c,m)}h>u.from&&l(u.from,h,u,c),f<u.to&&l(f,u.to,u,c)}return a}gapSize(e,n,r,i){let s=Uh(i,r)-Uh(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){P0.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ze.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];mt.spans(e,this.viewport.from,this.viewport.to,{span(i,s){n.push({from:i,to:s})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=n[s].from||i.to!=n[s].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||dc(this.heightMap.lineAt(e,pt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return dc(this.heightMap.lineAt(this.scaler.fromDOM(e),pt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return dc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class jh{constructor(e,n){this.from=e,this.to=n}}function j7(t,e,n){let r=[],i=t,s=0;return mt.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Fh({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function Uh(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function F7(t,e){for(let n of t)if(e(n))return n}const CC={toDOM(t){return t},fromDOM(t){return t},scale:1};class U7{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let u=n.lineAt(a,pt.ByPos,e,0,0).top,c=n.lineAt(l,pt.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function dc(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Di(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>dc(i,e)):t._content)}const Vh=Se.define({combine:t=>t.join(" ")}),lw=Se.define({combine:t=>t.indexOf(!0)>-1}),uw=Mo.newName(),JO=Mo.newName(),qO=Mo.newName(),QO={"&light":"."+JO,"&dark":"."+qO};function cw(t,e,n){return new Mo(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const V7=cw("."+uw,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},QO);class H7{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:G7(e),l=new yO(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=K7(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Xv(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Xv(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=te.single(u,l)}}}function eT(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,u=null;(s===8||ke.android&&e.text.length<a-o)&&(l=i.to,u="end");let c=W7(t.state.doc.sliceString(o,a,wl),e.text,l-o,u);c&&(ke.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==wl+wl&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:qe.of(e.text.slice(c.from,c.toB).split(wl))})}else r&&(!t.hasFocus&&t.state.facet(og)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(ke.mac||ke.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=te.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:qe.of([" "])}):ke.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=te.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:qe.of([" "])}),n){let o=t.state;if(ke.ios&&t.inputState.flushIOSKey(t)||ke.android&&(n.from==i.from&&n.to==i.to&&n.insert.length==1&&n.insert.lines==2&&Rl(t.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&Rl(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&n.insert.length==0&&Rl(t.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(t.state.facet(NO).some(c=>c(t,n.from,n.to,a)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let l;if(n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=i.from<n.from?o.sliceDoc(i.from,n.from):"",d=i.to>n.to?o.sliceDoc(n.to,i.to):"";l=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let c=o.changes(n),d=r&&r.main.to<=c.newLength?r.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let h=t.state.sliceDoc(n.from,n.to),f=BO(t)||t.state.doc.lineAt(i.head),p=i.to-n.to,g=i.to-i.from;l=o.changeByRange(b=>{if(b.from==i.from&&b.to==i.to)return{changes:c,range:d||b.map(c)};let m=b.to-p,v=m-h.length;if(b.to-b.from!=g||t.state.sliceDoc(v,m)!=h||f&&b.to>=f.from&&b.from<=f.to)return{range:b};let w=o.changes({from:v,to:m,insert:n.insert}),S=b.to-i.to;return{changes:w,range:d?te.range(Math.max(0,d.anchor+S),Math.max(0,d.head+S)):b.map(w)}})}else l={changes:c,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(l,{scrollIntoView:!0,userEvent:u}),!0}else if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function W7(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function G7(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Qk(n,r)),(i!=n||s!=r)&&e.push(new Qk(i,s))),e}function K7(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?te.single(n+e,r+e):null}const X7={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},N0=ke.ie&&ke.ie_version<=11;class Z7{constructor(e){this.view=e,this.active=!1,this.selectionRange=new F9,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(ke.ie&&ke.ie_version<=11||ke.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),N0&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(og)?r.root.activeElement!=this.dom:!Lf(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(ke.ie&&ke.ie_version<=11||ke.android&&ke.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Wp(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=ke.safari&&e.root.nodeType==11&&L9(this.dom.ownerDocument)==this.dom&&Y7(this.view)||Hp(e.root);if(!n||this.selectionRange.eq(n))return!1;let r=Lf(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&V9(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,X7),N0&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),N0&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Rl(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Lf(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new H7(this.view,e,n,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let r=this.view.state,i=eT(this.view,n);return this.view.state==r&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=EC(n,e.previousSibling||e.target.previousSibling,-1),i=EC(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,r,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect(),(i=this.resizeContent)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function EC(t,e,n){for(;e;){let r=ct.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Y7(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return Wp(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class Pe{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||U9(e.parent)||document,this.viewState=new kC(e.state||ze.create(e)),this.plugins=this.state.facet(uc).map(n=>new C0(n));for(let n of this.plugins)n.update(this);this.observer=new Z7(this),this.inputState=new y7(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new oC(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof Wt?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(KO))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=XO(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(ze.phrases)!=this.state.facet(ze.phrases))return this.setState(s);i=Xp.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Kp(f.empty?f:te.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(sC)&&(d=f.value)}this.viewState.update(i,d),this.bidiCache=Zp.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(cc)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Vh)!=i.state.facet(Vh)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let h of this.state.facet(tw))h(i);(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!eT(this,c)&&u.force&&Rl(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new kC(e),this.plugins=e.facet(uc).map(r=>new C0(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new oC(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(uc),r=e.state.facet(uc);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new C0(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,{scrollTop:i}=r,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;i!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(fO(r))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(i);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return Ir(this.state,p),AC}}),d=Xp.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let f=0;f<u.length;f++)if(c[f]!=AC)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){Ir(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=r.scrollTop=i+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(tw))a(n)}get themeClasses(){return uw+" "+(this.state.facet(lw)?qO:JO)+" "+this.state.facet(Vh)}updateAttrs(){let e=PC(this,MO,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(og)?"true":"false",class:"cm-content",style:`${ke.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),PC(this,S1,n);let r=this.observer.ignore(()=>{let i=Qv(this.contentDOM,this.contentAttrs,n),s=Qv(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Pe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(cc),Mo.mount(this.root,this.styleModules.concat(V7).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return A0(this,e,hC(this,e,n,r))}moveByGroup(e,n){return A0(this,e,hC(this,e,n,r=>m7(this,e.head,r)))}moveToLineBoundary(e,n,r=!0){return p7(this,e,n,r)}moveVertically(e,n,r){return A0(this,e,g7(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),jO(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Dl.find(s,e-i.from,-1,n)];return w1(r,o.dir==Pt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(OO)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>J7)return IO(e.length);let n=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n)return i.order;let r=t7(e.text,n);return this.bidiCache.push(new Zp(e.from,e.to,n,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ke.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{dO(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return sC.of(new Kp(typeof e=="number"?te.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return qt.define(()=>({}),{eventHandlers:e})}static theme(e,n){let r=Mo.newName(),i=[Vh.of(r),cc.of(cw(`.${r}`,e))];return n&&n.dark&&i.push(lw.of(!0)),i}static baseTheme(e){return Kd.lowest(cc.of(cw("."+uw,e,QO)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ct.get(r)||ct.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}Pe.styleModule=cc;Pe.inputHandler=NO;Pe.focusChangeEffect=$O;Pe.perLineTextDirection=OO;Pe.exceptionSink=PO;Pe.updateListener=tw;Pe.editable=og;Pe.mouseSelectionStyle=AO;Pe.dragMovesSelection=EO;Pe.clickAddsSelectionRange=CO;Pe.decorations=xd;Pe.atomicRanges=k1;Pe.scrollMargins=_O;Pe.darkTheme=lw;Pe.contentAttributes=S1;Pe.editorAttributes=MO;Pe.lineWrapping=Pe.contentAttributes.of({class:"cm-lineWrapping"});Pe.announce=je.define();const J7=4096,AC={};class Zp{constructor(e,n,r,i){this.from=e,this.to=n,this.dir=r,this.order=i}static update(e,n){if(n.empty)return e;let r=[],i=e.length?e[e.length-1].dir:Pt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new Zp(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return r}}function PC(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&qv(o,n)}return n}const q7=ke.mac?"mac":ke.windows?"win":ke.linux?"linux":"key";function Q7(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Hh(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const ez=Kd.default(Pe.domEventHandlers({keydown(t,e){return rT(nT(e.state),t,e,"editor")}})),tT=Se.define({enables:ez}),NC=new WeakMap;function nT(t){let e=t.facet(tT),n=NC.get(e);return n||NC.set(e,n=rz(e.reduce((r,i)=>r.concat(i),[]))),n}function tz(t,e,n){return rT(nT(t.state),e,t,n)}let Qs=null;const nz=4e3;function rz(t,e=q7){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(m=>Q7(m,e));for(let m=1;m<p.length;m++){let v=p.slice(0,m).join(" ");i(v,!0),f[v]||(f[v]={preventDefault:!0,stopPropagation:!1,run:[w=>{let S=Qs={view:w,prefix:v,scope:o};return setTimeout(()=>{Qs==S&&(Qs=null)},nz),!0}]})}let g=p.join(" ");i(g,!1);let b=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&b.run.push(l),u&&(b.preventDefault=!0),c&&(b.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in c)c[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function rT(t,e,n,r){let i=I9(e),s=An(i,0),o=ei(s)==i.length&&i!=" ",a="",l=!1,u=!1,c=!1;Qs&&Qs.view==n&&Qs.scope==r&&(a=Qs.prefix+" ",UO.indexOf(e.keyCode)<0&&(u=!0,Qs=null));let d=new Set,h=b=>{if(b){for(let m of b.run)if(!d.has(m)&&(d.add(m),m(n,e)))return b.stopPropagation&&(c=!0),!0;b.preventDefault&&(b.stopPropagation&&(c=!0),u=!0)}return!1},f=t[r],p,g;return f&&(h(f[a+Hh(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ke.windows&&e.ctrlKey&&e.altKey)&&(p=_o[e.keyCode])&&p!=i?(h(f[a+Hh(p,e,!0)])||e.shiftKey&&(g=wd[e.keyCode])!=i&&g!=p&&h(f[a+Hh(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+Hh(i,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class qd{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=iT(e);return[new qd(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return iz(e,n,r)}}function iT(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Pt.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function $C(t,e,n){let r=te.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:$t.Text}}function iz(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==Pt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=iT(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=sw(t,r),p=sw(t,i),g=f.type==$t.Text?f:null,b=p.type==$t.Text?p:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=$C(t,r,g)),b&&(t.lineWrapping||p.widgetLineBreaks)&&(b=$C(t,i,b)),g&&b&&g.from==b.from)return v(w(n.from,n.to,g));{let C=g?w(n.from,null,g):S(f,!1),E=b?w(null,n.to,b):S(p,!0),$=[];return(g||f).to<(b||p).from-(g&&b?1:0)||f.widgetLineBreaks>1&&C.bottom+t.defaultLineHeight/2<E.top?$.push(m(d,C.bottom,h,E.top)):C.bottom<E.top&&t.elementAtHeight((C.bottom+E.top)/2).type==$t.Text&&(C.bottom=E.top=(C.bottom+E.top)/2),v(C).concat($).concat(v(E))}function m(C,E,$,A){return new qd(e,C-l.left,E-l.top-.01,$-C,A-E+.01)}function v({top:C,bottom:E,horizontal:$}){let A=[];for(let O=0;O<$.length;O+=2)A.push(m($[O],C,$[O+1],E));return A}function w(C,E,$){let A=1e9,O=-1e9,_=[];function T(B,K,Z,Q,V){let M=t.coordsAtPos(B,B==$.to?-2:2),U=t.coordsAtPos(Z,Z==$.from?2:-2);!M||!U||(A=Math.min(M.top,U.top,A),O=Math.max(M.bottom,U.bottom,O),V==Pt.LTR?_.push(s&&K?d:M.left,s&&Q?h:U.right):_.push(!s&&Q?d:U.left,!s&&K?h:M.right))}let z=C??$.from,j=E??$.to;for(let B of t.visibleRanges)if(B.to>z&&B.from<j)for(let K=Math.max(B.from,z),Z=Math.min(B.to,j);;){let Q=t.state.doc.lineAt(K);for(let V of t.bidiSpans(Q)){let M=V.from+Q.from,U=V.to+Q.from;if(M>=Z)break;U>K&&T(Math.max(M,K),C==null&&M<=z,Math.min(U,Z),E==null&&U>=j,V.dir)}if(K=Q.to+1,K>=Z)break}return _.length==0&&T(z,C==null,j,E==null,t.textDirection),{top:A,bottom:O,horizontal:_}}function S(C,E){let $=a.top+(E?C.top:C.bottom);return{top:$,bottom:$,horizontal:[]}}}function sz(t,e){return t.constructor==e.constructor&&t.eq(e)}class oz{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(jf)!=e.state.facet(jf)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(jf);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!sz(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const jf=Se.define();function sT(t){return[qt.define(e=>new oz(e,t)),jf.of(t)]}const oT=!ke.ios,Sd=Se.define({combine(t){return Vo(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function az(t={}){return[Sd.of(t),lz,uz,cz,TO.of(!0)]}function aT(t){return t.startState.facet(Sd)!=t.state.facet(Sd)}const lz=sT({above:!0,markers(t){let{state:e}=t,n=e.facet(Sd),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||oT:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:te.cursor(i.head,i.head>i.anchor?-1:1);for(let l of qd.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=aT(t);return n&&OC(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){OC(e.state,t)},class:"cm-cursorLayer"});function OC(t,e){e.style.animationDuration=t.facet(Sd).cursorBlinkRate+"ms"}const uz=sT({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:qd.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||aT(t)},class:"cm-selectionLayer"}),lT={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};oT&&(lT[".cm-line"].caretColor="transparent !important");const cz=Kd.highest(Pe.theme(lT)),uT=je.define({map(t,e){return t==null?null:e.mapPos(t)}}),hc=dn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(uT)?r.value:n,t)}}),dz=qt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(hc);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(hc)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(hc),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(hc)!=t&&this.view.dispatch({effects:uT.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function hz(){return[hc,dz]}function TC(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function fz(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class pz{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,u,c)=>i(c,u,u+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,u,c)=>{let d=r(a,l,u);d&&c(u,u+a[0].length,d)};else if(r)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Da,r=n.add.bind(n);for(let{from:i,to:s}of fz(e,this.maxLength))TC(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(g,b,m)=>h.push(m.range(g,b));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else TC(e.state.doc,this.regexp,c,d,(g,b)=>this.addMatch(b,e,g,p));n=n.update({filterFrom:c,filterTo:d,filter:(g,b)=>g<c||b>d,add:h})}}return n}}const dw=/x/.unicode!=null?"gu":"g",mz=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,dw),gz={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let $0=null;function yz(){var t;if($0==null&&typeof document<"u"&&document.body){let e=document.body.style;$0=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return $0||!1}const Ff=Se.define({combine(t){let e=Vo(t,{render:null,specialChars:mz,addSpecialChars:null});return(e.replaceTabs=!yz())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,dw)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,dw)),e}});function vz(t={}){return[Ff.of(t),wz()]}let MC=null;function wz(){return MC||(MC=qt.fromClass(class{constructor(t){this.view=t,this.decorations=Ze.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Ff)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new pz({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=An(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=Zd(o.text,a,r-o.from);return Ze.replace({widget:new kz((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Ze.replace({widget:new Sz(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Ff);t.startState.facet(Ff)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const bz="•";function xz(t){return t>=32?bz:t==10?"␤":String.fromCharCode(9216+t)}class Sz extends Ha{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=xz(this.code),r=e.state.phrase("Control character")+" "+(gz[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class kz extends Ha{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Cz(){return Az}const Ez=Ze.line({class:"cm-activeLine"}),Az=qt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(Ez.range(i.from)),e=i.from)}return Ze.set(n)}},{decorations:t=>t.decorations}),Wh="-10000px";class cT{constructor(e,n,r){this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var n;let r=e.state.facet(this.facet),i=r.filter(o=>o);if(r===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<i.length;o++){let a=i[o],l=-1;if(a){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==a.create&&(l=u)}if(l<0)s[o]=this.createTooltipView(a);else{let u=s[o]=this.tooltipViews[l];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=r,this.tooltips=i,this.tooltipViews=s,!0}}function Pz(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const O0=Se.define({combine:t=>{var e,n,r;return{position:ke.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||Pz}}}),_C=new WeakMap,dT=qt.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(O0);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new cT(t,E1,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(O0);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Wh,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let r=this.manager.tooltipViews[n];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(O0).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:r}=t,i=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,r.top)||u.top>=Math.min(n.bottom,r.bottom)||u.right<Math.max(n.left,r.left)-.1||u.left>Math.min(n.right,r.right)+.1){l.style.top=Wh;continue}let d=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,f=c.right-c.left,p=(e=_C.get(a))!==null&&e!==void 0?e:c.bottom-c.top,g=a.offset||$z,b=this.view.textDirection==Pt.LTR,m=c.width>r.right-r.left?b?r.left:r.right-c.width:b?Math.min(u.left-(d?14:0)+g.x,r.right-f):Math.max(r.left,u.left-f+(d?14:0)-g.x),v=!!o.above;!o.strictSide&&(v?u.top-(c.bottom-c.top)-g.y<r.top:u.bottom+(c.bottom-c.top)+g.y>r.bottom)&&v==r.bottom-u.bottom>u.top-r.top&&(v=!v);let w=(v?u.top-r.top:r.bottom-u.bottom)-h;if(w<p&&a.resize!==!1){if(w<this.view.defaultLineHeight){l.style.top=Wh;continue}_C.set(a,p),l.style.height=(p=w)+"px"}else l.style.height&&(l.style.height="");let S=v?u.top-p-h-g.y:u.bottom+h+g.y,C=m+f;if(a.overlap!==!0)for(let E of i)E.left<C&&E.right>m&&E.top<S+p&&E.bottom>S&&(S=v?E.top-p-2-h:E.bottom+h+2);this.position=="absolute"?(l.style.top=S-t.parent.top+"px",l.style.left=m-t.parent.left+"px"):(l.style.top=S+"px",l.style.left=m+"px"),d&&(d.style.left=`${u.left+(b?g.x:-g.x)-(m+14-7)}px`),a.overlap!==!0&&i.push({left:m,top:S,right:C,bottom:S+p}),l.classList.toggle("cm-tooltip-above",v),l.classList.toggle("cm-tooltip-below",!v),a.positioned&&a.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Wh}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Nz=Pe.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),$z={x:0,y:0},E1=Se.define({enables:[dT,Nz]}),Yp=Se.define();class A1{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new cT(e,Yp,n=>this.createHostedView(n))}static create(e){return new A1(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const Oz=E1.compute([Yp],t=>{let e=t.facet(Yp).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:A1.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Tz{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let r=this.view.coordsAtPos(n);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(a=>a.from<=n&&a.to>=n),s=i&&i.dir==Pt.RTL?-1:1,o=this.source(this.view,n,e.x<r.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:n};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Ir(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!RC(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,s=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:i;(i==s?this.view.posAtCoords(this.lastMove)!=i:!Mz(this.view,i,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!RC(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function RC(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function Mz(t,e,n,r,i,s){let o=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let d=u[c];if(Math.max(d.top-i,i-d.bottom,d.left-r,r-d.right)<=s)return!0}return!1}function _z(t,e={}){let n=je.define(),r=dn.define({create(){return null},update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let o=s.changes.mapPos(i.pos,-1,Wn.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),i);a.pos=o,i.end!=null&&(a.end=s.changes.mapPos(i.end)),i=a}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(Dz)&&(i=null);return i},provide:i=>Yp.from(i)});return[r,qt.define(i=>new Tz(i,t,r,n,e.hoverTime||300)),Oz]}function Rz(t,e){let n=t.plugin(dT);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const Dz=je.define(),DC=Se.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function kd(t,e){let n=t.plugin(hT),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const hT=qt.fromClass(class{constructor(t){this.input=t.state.facet(au),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(DC);this.top=new Gh(t,!0,e.topContainer),this.bottom=new Gh(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(DC);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Gh(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Gh(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(au);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:o).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Pe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Gh{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=IC(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=IC(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function IC(t){let e=t.nextSibling;return t.remove(),e}const au=Se.define({enables:hT});class Io extends Ra{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Io.prototype.elementClass="";Io.prototype.toDOM=void 0;Io.prototype.mapMode=Wn.TrackBefore;Io.prototype.startSide=Io.prototype.endSide=-1;Io.prototype.point=!0;const Uf=Se.define(),Vf=Se.define(),hw=Se.define({combine:t=>t.some(e=>e)});function Iz(t){let e=[Lz];return t&&t.fixed===!1&&e.push(hw.of(!0)),e}const Lz=qt.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Vf).map(e=>new BC(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(hw),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(hw)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=mt.iter(this.view.state.facet(Uf),this.view.viewport.from),r=[],i=this.gutters.map(s=>new Bz(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==$t.Text&&o){fw(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==$t.Text){fw(n,r,s.from);for(let o of i)o.line(this.view,s,r)}for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Vf),n=t.state.facet(Vf),r=t.docChanged||t.heightChanged||t.viewportChanged||!mt.eq(t.startState.facet(Uf),t.state.facet(Uf),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new BC(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Pe.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Pt.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function LC(t){return Array.isArray(t)?t:[t]}function fw(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Bz{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=mt.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=n.top-this.height;if(this.i==i.elements.length){let o=new fT(e,n.height,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,n.height,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];fw(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n);r&&this.addElement(e,n,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class BC{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=LC(n.markers(e)),n.initialSpacer&&(this.spacer=new fT(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=LC(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!mt.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class fT{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),zz(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function zz(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const jz=Se.define(),bl=Se.define({combine(t){return Vo(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return r}})}});class T0 extends Io{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function M0(t,e){return t.state.facet(bl).formatNumber(e,t.state)}const Fz=Vf.compute([bl],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(jz)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new T0(M0(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(bl)!=e.state.facet(bl),initialSpacer(e){return new T0(M0(e,zC(e.state.doc.lines)))},updateSpacer(e,n){let r=M0(n.view,zC(n.view.state.doc.lines));return r==e.number?e:new T0(r)},domEventHandlers:t.facet(bl).domEventHandlers}));function Uz(t={}){return[bl.of(t),Iz(),Fz]}function zC(t){let e=9;for(;e<t;)e=e*10+9;return e}const Vz=new class extends Io{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Hz=Uf.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(Vz.range(i)))}return mt.of(e)});function Wz(){return Hz}const pT=new Xd;function mT(t){window.codemirror&&window.codemirror.dispatch({effects:pT.reconfigure(ze.readOnly.of(t))})}const pw=je.define(),Gz=dn.define({create(){return Ze.none},update(t,e){let n=t.map(e.changes);for(const r of e.effects)r.is(pw)&&(n=Ze.none,r.value!==null&&(n=n.update({add:[Kz.range(r.value)]})));return n},provide:t=>Pe.decorations.from(t)}),Kz=Ze.line({class:"!bg-mantis-400/10"});function gT(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:pw.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:pw.of(e)})}}const _0=Ae(L.zero(16)),R0=Ae(L.zero(16)),D0=Ae(L.zero(16)),I0=Ae(L.zero(16)),L0=Ae(L.zero(16)),B0=Ae(L.zero(16)),Xz=Ae(L.zero(8)),z0=Ae(L.zero(16)),j0=Ae(L.zero(16)),F0=Ae(L.zero(16)),U0=Ae(L.zero(16)),V0=Ae(L.zero(16)),H0=Ae(L.zero(16)),yT=Ae(L.zero(16)),Jp=Ae(L.zero(8)),wr=t=>Ae(e=>e(t).low,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.low):r;n(t,i.withLow(s))}),br=t=>Ae(e=>e(t).high,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.high):r;n(t,i.withHigh(s))}),ft={AX:_0,AL:wr(_0),AH:br(_0),BX:R0,BL:wr(R0),BH:br(R0),CX:D0,CL:wr(D0),CH:br(D0),DX:I0,DL:wr(I0),DH:br(I0),SP:L0,"SP.l":wr(L0),"SP.h":br(L0),IP:B0,"IP.l":wr(B0),"IP.h":br(B0),IR:Xz,ri:z0,"ri.l":wr(z0),"ri.h":br(z0),id:j0,"id.l":wr(j0),"id.h":br(j0),left:F0,"left.l":wr(F0),"left.h":br(F0),right:U0,"right.l":wr(U0),"right.h":br(U0),result:V0,"result.l":wr(V0),"result.h":br(V0),FLAGS:H0,"FLAGS.l":wr(H0),"FLAGS.h":br(H0),MAR:yT,MBR:Jp},Ei=Ae({phase:"stopped"}),vT=Ae("ADD");function Zz(t){re.set(ft.AX,L.fromUnsigned(t.cpu.AX,16)),re.set(ft.BX,L.fromUnsigned(t.cpu.BX,16)),re.set(ft.CX,L.fromUnsigned(t.cpu.CX,16)),re.set(ft.DX,L.fromUnsigned(t.cpu.DX,16)),re.set(ft.SP,L.fromUnsigned(t.cpu.SP,16)),re.set(ft.IP,L.fromUnsigned(t.cpu.IP,16)),re.set(ft.IR,L.fromUnsigned(t.cpu.IR,8)),re.set(ft.ri,L.fromUnsigned(t.cpu.ri,16)),re.set(ft.id,L.fromUnsigned(t.cpu.id,16)),re.set(ft.left,L.fromUnsigned(t.cpu.left,16)),re.set(ft.right,L.fromUnsigned(t.cpu.right,16)),re.set(ft.result,L.fromUnsigned(t.cpu.result,16)),re.set(ft.FLAGS,L.fromUnsigned(t.cpu.FLAGS,16)),re.set(ft.MAR,L.fromUnsigned(t.cpu.MAR,16)),re.set(ft.MBR,L.fromUnsigned(t.cpu.MBR,8)),re.set(Ei,{phase:"stopped"})}var Yz=Object.defineProperty,Jz=(t,e)=>{for(var n in e)Yz(t,n,{get:e[n],enumerable:!0})},gi={};Jz(gi,{assign:()=>tj,colors:()=>xo,createStringInterpolator:()=>_1,skipAnimation:()=>AT,to:()=>ET,willAdvance:()=>R1});var P1=eh(),Be=t=>Qd(t,P1),N1=eh();Be.write=t=>Qd(t,N1);var ag=eh();Be.onStart=t=>Qd(t,ag);var $1=eh();Be.onFrame=t=>Qd(t,$1);var O1=eh();Be.onFinish=t=>Qd(t,O1);var Il=[];Be.setTimeout=(t,e)=>{const n=Be.now()+e,r=()=>{const s=Il.findIndex(o=>o.cancel==r);~s&&Il.splice(s,1),uo-=~s?1:0},i={time:n,handler:t,cancel:r};return Il.splice(wT(n),0,i),uo+=1,bT(),i};var wT=t=>~(~Il.findIndex(e=>e.time>t)||~Il.length);Be.cancel=t=>{ag.delete(t),$1.delete(t),O1.delete(t),P1.delete(t),N1.delete(t)};Be.sync=t=>{mw=!0,Be.batchedUpdates(t),mw=!1};Be.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,Be.onStart(n)}return r.handler=t,r.cancel=()=>{ag.delete(n),e=null},r};var T1=typeof window<"u"?window.requestAnimationFrame:()=>{};Be.use=t=>T1=t;Be.now=typeof performance<"u"?()=>performance.now():Date.now;Be.batchedUpdates=t=>t();Be.catch=console.error;Be.frameLoop="always";Be.advance=()=>{Be.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):ST()};var lo=-1,uo=0,mw=!1;function Qd(t,e){mw?(e.delete(t),t(0)):(e.add(t),bT())}function bT(){lo<0&&(lo=0,Be.frameLoop!=="demand"&&T1(xT))}function qz(){lo=-1}function xT(){~lo&&(T1(xT),Be.batchedUpdates(ST))}function ST(){const t=lo;lo=Be.now();const e=wT(lo);if(e&&(kT(Il.splice(0,e),n=>n.handler()),uo-=e),!uo){qz();return}ag.flush(),P1.flush(t?Math.min(64,lo-t):16.667),$1.flush(),N1.flush(),O1.flush()}function eh(){let t=new Set,e=t;return{add(n){uo+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return uo-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,uo-=e.size,kT(e,r=>r(n)&&t.add(r)),uo+=t.size,e=t)}}}function kT(t,e){t.forEach(n=>{try{e(n)}catch(r){Be.catch(r)}})}function Qz(){}var ej=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),pe={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ji(t,e){if(pe.arr(t)){if(!pe.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var on=(t,e)=>t.forEach(e);function Lo(t,e,n){if(pe.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var co=t=>pe.und(t)?[]:pe.arr(t)?t:[t];function CT(t,e){if(t.size){const n=Array.from(t);t.clear(),on(n,e)}}var Kh=(t,...e)=>CT(t,n=>n(...e)),M1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_1,ET,xo=null,AT=!1,R1=Qz,tj=t=>{t.to&&(ET=t.to),t.now&&(Be.now=t.now),t.colors!==void 0&&(xo=t.colors),t.skipAnimation!=null&&(AT=t.skipAnimation),t.createStringInterpolator&&(_1=t.createStringInterpolator),t.requestAnimationFrame&&Be.use(t.requestAnimationFrame),t.batchedUpdates&&(Be.batchedUpdates=t.batchedUpdates),t.willAdvance&&(R1=t.willAdvance),t.frameLoop&&(Be.frameLoop=t.frameLoop)},Oc=new Set,Tr=[],W0=[],qp=0,lg={get idle(){return!Oc.size&&!Tr.length},start(t){qp>t.priority?(Oc.add(t),Be.onStart(nj)):(PT(t),Be(gw))},advance:gw,sort(t){if(qp)Be.onFrame(()=>lg.sort(t));else{const e=Tr.indexOf(t);~e&&(Tr.splice(e,1),NT(t))}},clear(){Tr=[],Oc.clear()}};function nj(){Oc.forEach(PT),Oc.clear(),Be(gw)}function PT(t){Tr.includes(t)||NT(t)}function NT(t){Tr.splice(rj(Tr,e=>e.priority>t.priority),0,t)}function gw(t){const e=W0;for(let n=0;n<Tr.length;n++){const r=Tr[n];qp=r.priority,r.idle||(R1(r),r.advance(t),r.idle||e.push(r))}return qp=0,W0=Tr,W0.length=0,Tr=e,Tr.length>0}function rj(t,e){const n=t.findIndex(e);return n<0?t.length:n}var ij=(t,e,n)=>Math.min(Math.max(n,t),e),sj={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ni="[-+]?\\d*\\.?\\d+",Qp=ni+"%";function ug(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var oj=new RegExp("rgb"+ug(ni,ni,ni)),aj=new RegExp("rgba"+ug(ni,ni,ni,ni)),lj=new RegExp("hsl"+ug(ni,Qp,Qp)),uj=new RegExp("hsla"+ug(ni,Qp,Qp,ni)),cj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,dj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hj=/^#([0-9a-fA-F]{6})$/,fj=/^#([0-9a-fA-F]{8})$/;function pj(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=hj.exec(t))?parseInt(e[1]+"ff",16)>>>0:xo&&xo[t]!==void 0?xo[t]:(e=oj.exec(t))?(el(e[1])<<24|el(e[2])<<16|el(e[3])<<8|255)>>>0:(e=aj.exec(t))?(el(e[1])<<24|el(e[2])<<16|el(e[3])<<8|UC(e[4]))>>>0:(e=cj.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=fj.exec(t))?parseInt(e[1],16)>>>0:(e=dj.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=lj.exec(t))?(jC(FC(e[1]),Xh(e[2]),Xh(e[3]))|255)>>>0:(e=uj.exec(t))?(jC(FC(e[1]),Xh(e[2]),Xh(e[3]))|UC(e[4]))>>>0:null}function G0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function jC(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=G0(i,r,t+1/3),o=G0(i,r,t),a=G0(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function el(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function FC(t){return(parseFloat(t)%360+360)%360/360}function UC(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Xh(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function VC(t){let e=pj(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Cd=(t,e,n)=>{if(pe.fun(t))return t;if(pe.arr(t))return Cd({range:t,output:e,extrapolate:n});if(pe.str(t.output[0]))return _1(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{const c=gj(u,s);return mj(u,s[c],s[c+1],i[c],i[c+1],l,o,a,r.map)}};function mj(t,e,n,r,i,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),r===-1/0?u=-u:i===1/0?u=u+r:u=u*(i-r)+r,u)}function gj(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var yj=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return ij(0,1,i/t)},em=1.70158,Zh=em*1.525,HC=em+1,WC=2*Math.PI/3,GC=2*Math.PI/4.5,Yh=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,$T={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>HC*t*t*t-em*t*t,easeOutBack:t=>1+HC*Math.pow(t-1,3)+em*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Zh+1)*2*t-Zh)/2:(Math.pow(2*t-2,2)*((Zh+1)*(t*2-2)+Zh)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*WC),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*WC)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*GC))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*GC)/2+1,easeInBounce:t=>1-Yh(1-t),easeOutBounce:Yh,easeInOutBounce:t=>t<.5?(1-Yh(1-2*t))/2:(1+Yh(2*t-1))/2,steps:yj},Ed=Symbol.for("FluidValue.get"),lu=Symbol.for("FluidValue.observers"),Or=t=>!!(t&&t[Ed]),Vn=t=>t&&t[Ed]?t[Ed]():t,KC=t=>t[lu]||null;function vj(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Ad(t,e){const n=t[lu];n&&n.forEach(r=>{vj(r,e)})}var OT=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");wj(this,t)}},wj=(t,e)=>TT(t,Ed,e);function cg(t,e){if(t[Ed]){let n=t[lu];n||TT(t,lu,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Pd(t,e){const n=t[lu];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[lu]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var TT=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Hf=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bj=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,XC=new RegExp(`(${Hf.source})(%|[a-z]+)`,"i"),xj=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,dg=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,MT=t=>{const[e,n]=Sj(t);if(!e||M1())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&dg.test(n))return MT(n);if(n)return n}return t},Sj=t=>{const e=dg.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},K0,kj=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,_T=t=>{K0||(K0=xo?new RegExp(`(${Object.keys(xo).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Vn(s).replace(dg,MT).replace(bj,VC).replace(K0,VC)),n=e.map(s=>s.match(Hf).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Cd({...t,output:s}));return s=>{var l;const o=!XC.test(e[0])&&((l=e.find(u=>XC.test(u)))==null?void 0:l.replace(Hf,""));let a=0;return e[0].replace(Hf,()=>`${i[a++](s)}${o||""}`).replace(xj,kj)}},RT="react-spring: ",DT=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${RT}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},Cj=DT(console.warn);function Ej(){Cj(`${RT}The "interpolate" function is deprecated in v9 (use "to" instead)`)}DT(console.warn);function hg(t){return pe.str(t)&&(t[0]=="#"||/\d/.test(t)||!M1()&&dg.test(t)||t in(xo||{}))}var IT=M1()?y.useEffect:y.useLayoutEffect,Aj=()=>{const t=y.useRef(!1);return IT(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Pj(){const t=y.useState()[1],e=Aj();return()=>{e.current&&t(Math.random())}}function Nj(t,e){const[n]=y.useState(()=>({inputs:e,result:t()})),r=y.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&$j(e,s.inputs)||(s={inputs:e,result:t()}):s=n,y.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function $j(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var Oj=t=>y.useEffect(t,Tj),Tj=[],Nd=Symbol.for("Animated:node"),Mj=t=>!!t&&t[Nd]===t,Ai=t=>t&&t[Nd],D1=(t,e)=>ej(t,Nd,e),fg=t=>t&&t[Nd]&&t[Nd].getPayload(),LT=class{constructor(){D1(this,this)}getPayload(){return this.payload||[]}},th=class extends LT{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,pe.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new th(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return pe.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,pe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},$d=class extends th{constructor(t){super(0),this._string=null,this._toString=Cd({output:[t,t]})}static create(t){return new $d(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(pe.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Cd({output:[this.getValue(),t]})),this._value=0,super.reset()}},tm={dependencies:null},pg=class extends LT{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Lo(this.source,(n,r)=>{Mj(n)?e[r]=n.getValue(t):Or(n)?e[r]=Vn(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&on(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Lo(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){tm.dependencies&&Or(t)&&tm.dependencies.add(t);const e=fg(t);e&&on(e,n=>this.add(n))}},BT=class extends pg{constructor(t){super(t)}static create(t){return new BT(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(_j)),!0)}};function _j(t){return(hg(t)?$d:th).create(t)}function yw(t){const e=Ai(t);return e?e.constructor:pe.arr(t)?BT:hg(t)?$d:th}var ZC=(t,e)=>{const n=!pe.fun(t)||t.prototype&&t.prototype.isReactComponent;return y.forwardRef((r,i)=>{const s=y.useRef(null),o=n&&y.useCallback(p=>{s.current=Ij(i,p)},[i]),[a,l]=Dj(r,e),u=Pj(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new Rj(c,l),h=y.useRef();IT(()=>(h.current=d,on(l,p=>cg(p,d)),()=>{h.current&&(on(h.current.deps,p=>Pd(p,h.current)),Be.cancel(h.current.update))})),y.useEffect(c,[]),Oj(()=>()=>{const p=h.current;on(p.deps,g=>Pd(g,p))});const f=e.getComponentProps(a.getValue());return y.createElement(t,{...f,ref:o})})},Rj=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Be.write(this.update)}};function Dj(t,e){const n=new Set;return tm.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new pg(t),tm.dependencies=null,[t,n]}function Ij(t,e){return t&&(pe.fun(t)?t(e):t.current=e),e}var YC=Symbol.for("AnimatedComponent"),Lj=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new pg(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=JC(o)||"Anonymous";return pe.str(o)?o=s[o]||(s[o]=ZC(o,i)):o=o[YC]||(o[YC]=ZC(o,i)),o.displayName=`Animated(${a})`,o};return Lo(t,(o,a)=>{pe.arr(t)&&(a=JC(o)),s[a]=s(o)}),{animated:s}},JC=t=>pe.str(t)?t:t&&pe.str(t.displayName)?t.displayName:pe.fun(t)&&t.name||null;function oa(t,...e){return pe.fun(t)?t(...e):t}var Tc=(t,e)=>t===!0||!!(e&&t&&(pe.fun(t)?t(e):co(t).includes(e))),zT=(t,e)=>pe.obj(t)?e&&t[e]:t,Bj=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,zj=t=>t,jT=(t,e=zj)=>{let n=jj;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);pe.und(s)||(r[i]=s)}return r},jj=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Fj={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Uj(t){const e={};let n=0;if(Lo(t,(r,i)=>{Fj[i]||(e[i]=r,n++)}),n)return e}function FT(t){const e=Uj(t);if(e){const n={to:e};return Lo(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function Od(t){return t=Vn(t),pe.arr(t)?t.map(Od):hg(t)?gi.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function vw(t){return pe.fun(t)||pe.arr(t)&&pe.obj(t[0])}var Vj={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},ww={...Vj.default,mass:1,damping:1,easing:$T.linear,clamp:!1},Hj=class{constructor(){this.velocity=0,Object.assign(this,ww)}};function Wj(t,e,n){n&&(n={...n},qC(n,e),e={...n,...e}),qC(t,e),Object.assign(t,e);for(const o in ww)t[o]==null&&(t[o]=ww[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return pe.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function qC(t,e){if(!pe.und(e.decay))t.duration=void 0;else{const n=!pe.und(e.tension)||!pe.und(e.friction);(n||!pe.und(e.frequency)||!pe.und(e.damping)||!pe.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var QC=[],Gj=class{constructor(){this.changed=!1,this.values=QC,this.toValues=null,this.fromValues=QC,this.config=new Hj,this.immediate=!1}};function Kj(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,u,c=Tc(n.cancel??(r==null?void 0:r.cancel),e);if(c)f();else{pe.und(n.pause)||(i.paused=Tc(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=i.paused||Tc(p,e)),l=oa(n.delay||0,e),p?(i.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){i.resumeQueue.add(h),i.timeouts.delete(u),u.cancel(),l=u.time-Be.now()}function h(){l>0&&!gi.skipAnimation?(i.delayed=!0,u=Be.setTimeout(f,l),i.pauseQueue.add(d),i.timeouts.add(u)):f()}function f(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(u),t<=(i.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var Xj=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Mc(t.get()):e.every(n=>n.noop)?UT(t.get()):Qr(t.get(),e.every(n=>n.finished)),UT=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Qr=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Mc=t=>({value:t,cancelled:!0,finished:!1});function Zj(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const u=jT(e,(b,m)=>m==="onRest"?void 0:b);let c,d;const h=new Promise((b,m)=>(c=b,d=m)),f=b=>{const m=i<=(n.cancelId||0)&&Mc(r)||i!==n.asyncId&&Qr(r,!1);if(m)throw b.result=m,d(b),b},p=(b,m)=>{const v=new eE,w=new tE;return(async()=>{if(gi.skipAnimation)throw bw(n),w.result=Qr(r,!1),d(w),w;f(v);const S=pe.obj(b)?{...b}:{...m,to:b};S.parentId=i,Lo(u,(E,$)=>{pe.und(S[$])&&(S[$]=E)});const C=await r.start(S);return f(v),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),C})()};let g;if(gi.skipAnimation)return bw(n),Qr(r,!1);try{let b;pe.arr(t)?b=(async m=>{for(const v of m)await p(v)})(t):b=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([b.then(c),h]),g=Qr(r.get(),!0,!1)}catch(b){if(b instanceof eE)g=b.result;else if(b instanceof tE)g=b.result;else throw b}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return pe.fun(o)&&Be.batchedUpdates(()=>{o(g,r,r.item)}),g})()}function bw(t,e){CT(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var eE=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},tE=class extends Error{constructor(){super("SkipAnimationSignal")}},xw=t=>t instanceof I1,Yj=1,I1=class extends OT{constructor(){super(...arguments),this.id=Yj++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ai(this);return t&&t.getValue()}to(...t){return gi.to(this,t)}interpolate(...t){return Ej(),gi.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Ad(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||lg.sort(this),Ad(this,{type:"priority",parent:this,priority:t})}},La=Symbol.for("SpringPhase"),VT=1,Sw=2,kw=4,X0=t=>(t[La]&VT)>0,js=t=>(t[La]&Sw)>0,Wu=t=>(t[La]&kw)>0,nE=(t,e)=>e?t[La]|=Sw|VT:t[La]&=~Sw,rE=(t,e)=>e?t[La]|=kw:t[La]&=~kw,ht=class extends I1{constructor(t,e){if(super(),this.animation=new Gj,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!pe.und(t)||!pe.und(e)){const n=pe.obj(t)?{...t}:{...e,from:t};pe.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(js(this)||this._state.asyncTo)||Wu(this)}get goal(){return Vn(this.animation.to)}get velocity(){const t=Ai(this);return t instanceof th?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return X0(this)}get isAnimating(){return js(this)}get isPaused(){return Wu(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=fg(r.to);!o&&Or(r.to)&&(i=co(Vn(r.to))),r.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==$d?1:o?o[c].lastPosition:i[c];let h=r.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const g=r.fromValues[c],b=u.v0!=null?u.v0:u.v0=pe.arr(s.velocity)?s.velocity[c]:s.velocity;let m;const v=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(pe.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,S=Math.exp(-(1-w)*p);f=g+b/(1-w)*(1-S),h=Math.abs(u.lastPosition-f)<=v,m=b*S}else{m=u.lastVelocity==null?b:u.lastVelocity;const w=s.restVelocity||v/10,S=s.clamp?0:s.bounce,C=!pe.und(S),E=g==d?u.v0>0:g<d;let $,A=!1;const O=1,_=Math.ceil(t/O);for(let T=0;T<_&&($=Math.abs(m)>w,!(!$&&(h=Math.abs(d-f)<=v,h)));++T){C&&(A=f==d||f>d==E,A&&(m=-m*S,f=d));const z=-s.tension*1e-6*(f-d),j=-s.friction*.001*m,B=(z+j)/s.mass;m=m+B*O,f=f+m*O}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=g+s.easing(w)*(d-g),m=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=m,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=Ai(this),l=a.getValue();if(e){const u=Vn(r.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Be.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(js(this)){const{to:t,config:e}=this.animation;Be.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return pe.und(t)?(n=this.queue||[],this.queue=[]):n=[pe.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>Xj(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),bw(this._state,t&&this._lastCallId),Be.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=pe.obj(n)?n[e]:n,(n==null||vw(n))&&(n=void 0),r=pe.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return X0(this)||(t.reverse&&([n,r]=[r,n]),r=Vn(r),pe.und(r)?Ai(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,jT(t,(o,a)=>/^on/.test(a)?zT(o,n):o)),sE(this,t,"onProps"),Ku(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return Kj(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{Wu(this)||(rE(this,!0),Kh(s.pauseQueue),Ku(this,"onPause",Qr(this,Gu(this,this.animation.to)),this))},resume:()=>{Wu(this)&&(rE(this,!1),js(this)&&this._resume(),Kh(s.resumeQueue),Ku(this,"onResume",Qr(this,Gu(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=Jj(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Mc(this));const r=!pe.und(t.to),i=!pe.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Mc(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;i&&!r&&(!e.default||pe.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!Ji(d,u);h&&(a.from=d),d=Vn(d);const f=!Ji(c,l);f&&this._focus(c);const p=vw(e.to),{config:g}=a,{decay:b,velocity:m}=g;(r||i)&&(g.velocity=0),e.config&&!p&&Wj(g,oa(e.config,s),e.config!==o.config?oa(o.config,s):void 0);let v=Ai(this);if(!v||pe.und(c))return n(Qr(this,!0));const w=pe.und(e.reset)?i&&!e.default:!pe.und(d)&&Tc(e.reset,s),S=w?d:this.get(),C=Od(c),E=pe.num(C)||pe.arr(C)||hg(C),$=!p&&(!E||Tc(o.immediate||e.immediate,s));if(f){const T=yw(c);if(T!==v.constructor)if($)v=this._set(C);else throw Error(`Cannot animate between ${v.constructor.name} and ${T.name}, as the "to" prop suggests`)}const A=v.constructor;let O=Or(c),_=!1;if(!O){const T=w||!X0(this)&&h;(f||T)&&(_=Ji(Od(S),C),O=!_),(!Ji(a.immediate,$)&&!$||!Ji(g.decay,b)||!Ji(g.velocity,m))&&(O=!0)}if(_&&js(this)&&(a.changed&&!w?O=!0:O||this._stop(l)),!p&&((O||Or(l))&&(a.values=v.getPayload(),a.toValues=Or(c)?null:A==$d?[1]:co(C)),a.immediate!=$&&(a.immediate=$,!$&&!w&&this._set(l)),O)){const{onRest:T}=a;on(Qj,j=>sE(this,e,j));const z=Qr(this,Gu(this,l));Kh(this._pendingCalls,z),this._pendingCalls.add(n),a.changed&&Be.batchedUpdates(()=>{var j;a.changed=!w,T==null||T(z,this),w?oa(o.onRest,z):(j=a.onStart)==null||j.call(a,z,this)})}w&&this._set(S),p?n(Zj(e.to,e,this._state,this)):O?this._start():js(this)&&!f?this._pendingCalls.add(n):n(UT(S))}_focus(t){const e=this.animation;t!==e.to&&(KC(this)&&this._detach(),e.to=t,KC(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Or(e)&&(cg(e,this),xw(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Or(t)&&Pd(t,this)}_set(t,e=!0){const n=Vn(t);if(!pe.und(n)){const r=Ai(this);if(!r||!Ji(n,r.getValue())){const i=yw(n);!r||r.constructor!=i?D1(this,i.create(n)):r.setValue(n),r&&Be.batchedUpdates(()=>{this._onChange(n,e)})}}return Ai(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Ku(this,"onStart",Qr(this,Gu(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),oa(this.animation.onChange,t,this)),oa(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ai(this).reset(Vn(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),js(this)||(nE(this,!0),Wu(this)||this._resume())}_resume(){gi.skipAnimation?this.finish():lg.start(this)}_stop(t,e){if(js(this)){nE(this,!1);const n=this.animation;on(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ad(this,{type:"idle",parent:this});const r=e?Mc(this.get()):Qr(this.get(),Gu(this,t??n.to));Kh(this._pendingCalls,r),n.changed&&(n.changed=!1,Ku(this,"onRest",r,this))}}};function Gu(t,e){const n=Od(e),r=Od(t.get());return Ji(r,n)}function Jj(t,e=t.loop,n=t.to){const r=oa(e);if(r){const i=r!==!0&&FT(r),s=(i||t).reverse,o=!i||i.reset;return qj({...t,loop:e,default:!1,pause:void 0,to:!s||vw(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function qj(t){const{to:e,from:n}=t=FT(t),r=new Set;return pe.obj(e)&&iE(e,r),pe.obj(n)&&iE(n,r),t.keys=r.size?Array.from(r):null,t}function iE(t,e){Lo(t,(n,r)=>n!=null&&e.add(r))}var Qj=["onStart","onRest","onChange","onPause","onResume"];function sE(t,e,n){t.animation[n]=e[n]!==Bj(e,n)?zT(e[n],t.key):void 0}function Ku(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var L1=({children:t,...e})=>{const n=y.useContext(nm),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=Nj(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=nm;return y.createElement(s,{value:e},t)},nm=eF(L1,{});L1.Provider=nm.Provider;L1.Consumer=nm.Consumer;function eF(t,e){return Object.assign(t,y.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var tF=class extends I1{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Cd(...e);const n=this._get(),r=yw(n);D1(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Ji(e,n)||(Ai(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&oE(this._active)&&Z0(this)}_get(){const t=pe.arr(this.source)?this.source.map(Vn):co(Vn(this.source));return this.calc(...t)}_start(){this.idle&&!oE(this._active)&&(this.idle=!1,on(fg(this),t=>{t.done=!1}),gi.skipAnimation?(Be.batchedUpdates(()=>this.advance()),Z0(this)):lg.start(this))}_attach(){let t=1;on(co(this.source),e=>{Or(e)&&cg(e,this),xw(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){on(co(this.source),t=>{Or(t)&&Pd(t,this)}),this._active.clear(),Z0(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=co(this.source).reduce((e,n)=>Math.max(e,(xw(n)?n.priority:0)+1),0))}};function nF(t){return t.idle!==!1}function oE(t){return!t.size||Array.from(t).every(nF)}function Z0(t){t.idle||(t.idle=!0,on(fg(t),e=>{e.done=!0}),Ad(t,{type:"idle",parent:t}))}gi.assign({createStringInterpolator:_T,to:(t,e)=>new tF(t,e)});var HT=/^--/;function rF(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!HT.test(t)&&!(_c.hasOwnProperty(t)&&_c[t])?e+"px":(""+e).trim()}var aE={};function iF(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,u=Object.values(l),c=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:aE[d]||(aE[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));i!==void 0&&(t.textContent=i);for(const d in r)if(r.hasOwnProperty(d)){const h=rF(d,r[d]);HT.test(d)?t.style.setProperty(d,h):t.style[d]=h}c.forEach((d,h)=>{t.setAttribute(d,u[h])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var _c={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sF=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),oF=["Webkit","Ms","Moz","O"];_c=Object.keys(_c).reduce((t,e)=>(oF.forEach(n=>t[sF(n,e)]=t[e]),t),_c);var aF=/^(matrix|translate|scale|rotate|skew)/,lF=/^(translate)/,uF=/^(rotate|skew)/,Y0=(t,e)=>pe.num(t)&&t!==0?t+e:t,Wf=(t,e)=>pe.arr(t)?t.every(n=>Wf(n,e)):pe.num(t)?t===e:parseFloat(t)===e,cF=class extends pg{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Y0(a,"px")).join(",")})`,Wf(o,0)])),Lo(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if(aF.test(a)){if(delete r[a],pe.und(o))return;const l=lF.test(a)?"px":uF.test(a)?"deg":"";i.push(co(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${Y0(h,l)})`,Wf(h,0)]:u=>[`${a}(${u.map(c=>Y0(c,l)).join(",")})`,Wf(u,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new dF(i,s)),super(r)}},dF=class extends OT{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return on(this.inputs,(n,r)=>{const i=Vn(n[0]),[s,o]=this.transforms[r](pe.arr(i)?i:n.map(Vn));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&on(this.inputs,e=>on(e,n=>Or(n)&&cg(n,this)))}observerRemoved(t){t==0&&on(this.inputs,e=>on(e,n=>Or(n)&&Pd(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Ad(this,t)}},hF=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];gi.assign({batchedUpdates:Fo.unstable_batchedUpdates,createStringInterpolator:_T,colors:sj});var fF=Lj(hF,{applyAnimatedValues:iF,createAnimatedStyle:t=>new cF(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Dt=fF.animated;const st={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},We=(t=st.stone[800])=>({backgroundColor:new ht(t),opacity:new ht(1)}),Gt=()=>({strokeDashoffset:new ht(1),opacity:new ht(1)}),B1={bus:{address:{stroke:new ht(st.stone[700])},data:{stroke:new ht(st.stone[700])},rd:{stroke:new ht(st.stone[700])},wr:{stroke:new ht(st.stone[700])},iom:Gt(),mem:{stroke:new ht(st.red[500])},handshake:Gt(),pic:Gt(),pio:Gt(),timer:Gt(),intr:Gt(),inta:Gt(),int0:Gt(),int1:Gt(),int2:Gt(),"switches->pio":Gt(),"pio->leds":Gt(),printer:{data:Gt(),strobe:Gt(),busy:Gt()}},clock:{angle:new ht(0)},cpu:{internalBus:{address:{strokeDashoffset:new ht(1),opacity:new ht(1),path:new ht("")},data:{strokeDashoffset:new ht(1),opacity:new ht(1),path:new ht("")}},alu:{operands:Gt(),results:Gt(),cog:{rot:new ht(0)},operation:{backgroundColor:new ht(st.stone[800])}},decoder:{path:Gt(),progress:{progress:new ht(0),opacity:new ht(1)}},AX:We(),BX:We(),CX:We(),DX:We(),SP:We(),IP:We(),IR:We(),ri:We(),id:We(),left:We(),right:We(),result:We(),FLAGS:We(),MAR:We(),MBR:We()},handshake:{DATA:We(),STATE:We()},memory:{"operating-cell":{color:new ht(st.white)}},pic:{IMR:We(),IRR:We(),ISR:We(),INT0:We(),INT1:We(),INT2:We(),INT3:We(),INT4:We(),INT5:We(),INT6:We(),INT7:We()},pio:{PA:We(),PB:We(),CA:We(),CB:We()},printer:{printing:{progress:new ht(0),opacity:new ht(1)}},timer:{CONT:We(),COMP:We()}};function tt(t){return PN(B1,t)}function WT(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof ht?e[n]=r.get():e[n]=WT(r)}return e}const pF=WT(B1);function GT(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof ht?r.set(e[n]):GT(t[n],e[n])}}const mF=()=>GT(B1,pF),Td=new Set;async function Ke(t,e){const n=re.get(wn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=re.sub(wn,()=>{o(),s()})}),await Ke(t,e);const r=pi();if(!r.animations&&!e.forceMs)return null;const i={duration:e.forceMs?e.duration:e.duration*r.executionUnit,easing:$T[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;const l=tt(s);if(a===void 0)return l.set(o);{Td.add(s);const u=await tt(s).start({from:o,to:a,config:i});return Td.delete(s),u}}))}const gF=()=>Td.forEach(t=>tt(t).pause()),yF=()=>Td.forEach(t=>tt(t).resume());function vF(){Td.forEach(t=>tt(t).stop(!0)),setTimeout(()=>mF(),10)}async function Ar(t,e=st.mantis[400]){return await Ke({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function Pr(t){return await Ke({key:`${t}.backgroundColor`,to:st.stone[800]},{duration:1,easing:"easeOutQuart"})}async function uu(t){await Ke({key:"bus.data.stroke",to:st.mantis[400]},{duration:5,easing:"easeOutSine"}),await Ar("cpu.MBR"),re.set(Jp,t),await Pr("cpu.MBR")}async function Br(t,e){return await Ke([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function Nn(t){return await Ke({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function wF(t){switch(t.type){case"bus:io.selected":{await Promise.all([Ke({key:"bus.mem.stroke",to:st.stone[700]},{duration:1,easing:"easeInSine"}),Br(`bus.${t.chip}`,15)]);return}case"bus:io.error":{cu(t.error);return}case"bus:reset":{await Promise.all([Ke([{key:"bus.address.stroke",to:st.stone[700]},{key:"bus.data.stroke",to:st.stone[700]},{key:"bus.rd.stroke",to:st.stone[700]},{key:"bus.wr.stroke",to:st.stone[700]}],{duration:1,easing:"easeInSine"}),Ke({key:"bus.mem.stroke",to:st.red[500]},{duration:1,easing:"easeOutSine"}),Nn("bus.iom"),Nn("bus.handshake"),Nn("bus.pio"),Nn("bus.pic"),Nn("bus.timer")]);return}default:return t}}async function bF(t){switch(t.type){case"clock:tick":return;default:return t.type}}function xF(t){switch(t){case"IP":return"M 551 309 H 575 V 349 H 598";case"SP":return"M 551 349 H 598";case"ri":return"M 544 388 H 575 V 349 H 598";default:throw new Error(`Invalid register ${t}`)}}function SF(){const{path:t,...e}=tt("cpu.internalBus.address");return x.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[x.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598"].join(" ")}),x.jsx(Dt.path,{d:t,className:"fill-none stroke-blue-500 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var z1={exports:{}},Ll=typeof Reflect=="object"?Reflect:null,lE=Ll&&typeof Ll.apply=="function"?Ll.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Gf;Ll&&typeof Ll.ownKeys=="function"?Gf=Ll.ownKeys:Object.getOwnPropertySymbols?Gf=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Gf=function(e){return Object.getOwnPropertyNames(e)};function kF(t){console&&console.warn&&console.warn(t)}var KT=Number.isNaN||function(e){return e!==e};function nt(){nt.init.call(this)}z1.exports=nt;z1.exports.once=PF;nt.EventEmitter=nt;nt.prototype._events=void 0;nt.prototype._eventsCount=0;nt.prototype._maxListeners=void 0;var uE=10;function mg(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(nt,"defaultMaxListeners",{enumerable:!0,get:function(){return uE},set:function(t){if(typeof t!="number"||t<0||KT(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");uE=t}});nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};nt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||KT(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function XT(t){return t._maxListeners===void 0?nt.defaultMaxListeners:t._maxListeners}nt.prototype.getMaxListeners=function(){return XT(this)};nt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")lE(l,this,n);else for(var u=l.length,c=QT(l,u),r=0;r<u;++r)lE(c[r],this,n);return!0};function ZT(t,e,n,r){var i,s,o;if(mg(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=XT(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,kF(a)}return t}nt.prototype.addListener=function(e,n){return ZT(this,e,n,!1)};nt.prototype.on=nt.prototype.addListener;nt.prototype.prependListener=function(e,n){return ZT(this,e,n,!0)};function CF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function YT(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=CF.bind(r);return i.listener=n,r.wrapFn=i,i}nt.prototype.once=function(e,n){return mg(n),this.on(e,YT(this,e,n)),this};nt.prototype.prependOnceListener=function(e,n){return mg(n),this.prependListener(e,YT(this,e,n)),this};nt.prototype.removeListener=function(e,n){var r,i,s,o,a;if(mg(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():EF(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};nt.prototype.off=nt.prototype.removeListener;nt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function JT(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?AF(i):QT(i,i.length)}nt.prototype.listeners=function(e){return JT(this,e,!0)};nt.prototype.rawListeners=function(e){return JT(this,e,!1)};nt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):qT.call(t,e)};nt.prototype.listenerCount=qT;function qT(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}nt.prototype.eventNames=function(){return this._eventsCount>0?Gf(this._events):[]};function QT(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function EF(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function AF(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function PF(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}eM(t,e,s,{once:!0}),e!=="error"&&NF(t,i,{once:!0})})}function NF(t,e,n){typeof t.on=="function"&&eM(t,"error",e,n)}function eM(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var $F=z1.exports;function Ki(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Ki.prototype[Symbol.iterator]=function(){return this});Ki.of=function(){var t=arguments,e=t.length,n=0;return new Ki(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Ki.empty=function(){var t=new Ki(function(){return{done:!0}});return t};Ki.fromSequence=function(t){var e=0,n=t.length;return new Ki(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Ki.is=function(t){return t instanceof Ki?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var gg=Ki;const Ur=xu(gg);var yg={};yg.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";yg.SYMBOL_SUPPORT=typeof Symbol<"u";var OF=gg,tM=yg,TF=tM.ARRAY_BUFFER_SUPPORT,MF=tM.SYMBOL_SUPPORT;function _F(t){return typeof t=="string"||Array.isArray(t)||TF&&ArrayBuffer.isView(t)?OF.fromSequence(t):typeof t!="object"||t===null?null:MF&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var nM=function(e){var n=_F(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},RF=nM,DF=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],s,o=0,a=RF(e);;){if(o===r)return i;if(s=a.next(),s.done)return o!==n&&(i.length=o),i;i[o++]=s.value}};const rM=xu(DF);var IF=gg,LF=nM,BF=function(){var e=arguments,n=null,r=-1;return new IF(function(){var s=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=LF(e[r])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const xs=xu(BF);function zF(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let Vt=zF;typeof Object.assign=="function"&&(Vt=Object.assign);function zr(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function an(t){return typeof t=="object"&&t!==null}function iM(t){let e;for(e in t)return!1;return!0}function xr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Gr(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function cE(t){return!(!an(t)||t.attributes&&!Array.isArray(t.attributes))}function jF(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class j1 extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class fe extends j1{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fe.prototype.constructor)}}class oe extends j1{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,oe.prototype.constructor)}}class $e extends j1{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,$e.prototype.constructor)}}function sM(t,e){this.key=t,this.attributes=e,this.clear()}sM.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function oM(t,e){this.key=t,this.attributes=e,this.clear()}oM.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function aM(t,e){this.key=t,this.attributes=e,this.clear()}aM.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Nu(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}Nu.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};Nu.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};Nu.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};Nu.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const lM=0,uM=1,FF=2,cM=3;function Ds(t,e,n,r,i,s,o){let a,l,u,c;if(r=""+r,n===lM){if(a=t._nodes.get(r),!a)throw new oe(`Graph.${e}: could not find the "${r}" node in the graph.`);u=i,c=s}else if(n===cM){if(i=""+i,l=t._edges.get(i),!l)throw new oe(`Graph.${e}: could not find the "${i}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(r===d)a=l.target;else if(r===h)a=l.source;else throw new oe(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(r),!l)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===uM?a=l.source:a=l.target,u=i,c=s}return[a,u,c]}function UF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Ds(this,e,n,r,i,s);return o.attributes[a]}}function VF(t,e,n){t.prototype[e]=function(r,i){const[s]=Ds(this,e,n,r,i);return s.attributes}}function HF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Ds(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function WF(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,u]=Ds(this,e,n,r,i,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function GF(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,u]=Ds(this,e,n,r,i,s,o);if(typeof u!="function")throw new fe(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function KF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Ds(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function XF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Ds(this,e,n,r,i,s);if(!an(a))throw new fe(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function ZF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Ds(this,e,n,r,i,s);if(!an(a))throw new fe(`Graph.${e}: provided attributes are not a plain object.`);return Vt(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function YF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Ds(this,e,n,r,i,s);if(typeof a!="function")throw new fe(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const JF=[{name:t=>`get${t}Attribute`,attacher:UF},{name:t=>`get${t}Attributes`,attacher:VF},{name:t=>`has${t}Attribute`,attacher:HF},{name:t=>`set${t}Attribute`,attacher:WF},{name:t=>`update${t}Attribute`,attacher:GF},{name:t=>`remove${t}Attribute`,attacher:KF},{name:t=>`replace${t}Attributes`,attacher:XF},{name:t=>`merge${t}Attributes`,attacher:ZF},{name:t=>`update${t}Attributes`,attacher:YF}];function qF(t){JF.forEach(function({name:e,attacher:n}){n(t,e("Node"),lM),n(t,e("Source"),uM),n(t,e("Target"),FF),n(t,e("Opposite"),cM)})}function QF(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=zr(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function eU(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=zr(this,s,o,n),!i)throw new oe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function tU(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=zr(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function nU(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=zr(this,a,l,n),!o)throw new oe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function rU(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=zr(this,a,l,n),!o)throw new oe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new fe(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function iU(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=zr(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function sU(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=zr(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!an(i))throw new fe(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function oU(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=zr(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!an(i))throw new fe(`Graph.${e}: provided attributes are not a plain object.`);return Vt(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function aU(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=zr(this,o,a,n),!s)throw new oe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new oe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new fe(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const lU=[{name:t=>`get${t}Attribute`,attacher:QF},{name:t=>`get${t}Attributes`,attacher:eU},{name:t=>`has${t}Attribute`,attacher:tU},{name:t=>`set${t}Attribute`,attacher:nU},{name:t=>`update${t}Attribute`,attacher:rU},{name:t=>`remove${t}Attribute`,attacher:iU},{name:t=>`replace${t}Attributes`,attacher:sU},{name:t=>`merge${t}Attributes`,attacher:oU},{name:t=>`update${t}Attributes`,attacher:aU}];function uU(t){lU.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const cU=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function dU(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function hU(t,e,n,r){let i,s,o,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function J0(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return new Ur(function(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const a=n[s++];if(a===e){i=void 0;continue}i=t[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function fU(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function pU(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function q0(t,e){let n=t[e];return n.next!==void 0?new Ur(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Ur.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function mU(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):rM(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[o++]=l.key);return r}function dM(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=r(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function gU(t,e){if(t.size===0)return Ur.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new Ur(function(){let o,a;for(;;){if(o=i.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function F1(t,e,n,r,i,s){const o=e?hU:dU;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function yU(t,e,n,r){const i=[];return F1(!1,t,e,n,r,function(s){i.push(s)}),i}function vU(t,e,n){let r=Ur.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=xs(r,J0(n.in))),e!=="in"&&typeof n.out<"u"&&(r=xs(r,J0(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=xs(r,J0(n.undirected))),r}function U1(t,e,n,r,i,s,o){const a=n?pU:fU;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(t,i.in,s,o),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(l=a(t,i.out,s,o),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(t,i.undirected,s,o),t&&l))return l}function wU(t,e,n,r,i){const s=[];return U1(!1,t,e,n,r,i,function(o){s.push(o)}),s}function bU(t,e,n,r){let i=Ur.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=xs(i,q0(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=xs(i,q0(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=xs(i,q0(n.undirected,r))),i}function xU(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return mU(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new oe(`Graph.${n}: could not find the "${s}" node in the graph.`);return yU(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new oe(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new oe(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return wU(r,this.multi,i,a,o)}throw new fe(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function SU(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=u,dM(!1,this,r,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new oe(`Graph.${s}: could not find the "${u}" node in the graph.`);return F1(!1,this.multi,r==="mixed"?this.type:r,i,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new oe(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new oe(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return U1(!1,r,this.multi,i,h,c,d)}throw new fe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;r!=="directed"&&(h+=this.undirectedSize),r!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,g,b,m,v,w,S)=>{d[f++]=c(p,g,b,m,v,w,S)})}else d=[],u.push((h,f,p,g,b,m,v)=>{d.push(c(h,f,p,g,b,m,v))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,g,b,m,v)=>{c(h,f,p,g,b,m,v)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new fe(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new fe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,g,b,m,v,w)=>{h=c(h,f,p,g,b,m,v,w)}),this[s].apply(this,u),h}}function kU(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return c=l,dM(!0,this,r,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new oe(`Graph.${s}: could not find the "${l}" node in the graph.`);return F1(!0,this.multi,r==="mixed"?this.type:r,i,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new oe(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new oe(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return U1(!0,r,this.multi,i,d,u,c)}throw new fe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,g,b,m)=>u(d,h,f,p,g,b,m)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,g,b,m)=>!u(d,h,f,p,g,b,m)),!this[s].apply(this,l)}}function CU(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ur.empty();if(!arguments.length)return gU(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new oe(`Graph.${s}: could not find the "${o}" node in the graph.`);return vU(r,i,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new oe(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new oe(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return bU(r,i,l,a)}throw new fe(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function EU(t){cU.forEach(e=>{xU(t,e),SU(t,e),kU(t,e),CU(t,e)})}const AU=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function vg(){this.A=null,this.B=null}vg.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};vg.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Xu(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=i(u.key,u.attributes);if(t&&c)return u.key}}function V1(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return Xu(t,null,r,r.undirected,i);if(typeof n=="string")return Xu(t,null,r,r[n],i)}const s=new vg;let o;if(e!=="undirected"){if(n!=="out"){if(o=Xu(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=Xu(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=Xu(t,s,r,r.undirected,i),t&&o))return o}function PU(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return V1(!1,t,e,n,function(i){r.push(i)}),r}function Zu(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return new Ur(function(){let a=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const l=n[r[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function NU(t,e,n){if(t!=="mixed"){if(t==="undirected")return Zu(null,n,n.undirected);if(typeof e=="string")return Zu(null,n,n[e])}let r=Ur.empty();const i=new vg;return t!=="undirected"&&(e!=="out"&&(r=xs(r,Zu(i,n,n.in))),e!=="in"&&(r=xs(r,Zu(i,n,n.out)))),t!=="directed"&&(r=xs(r,Zu(i,n,n.undirected))),r}function $U(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new oe(`Graph.${n}: could not find the "${s}" node in the graph.`);return PU(r==="mixed"?this.type:r,i,o)}}function OU(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new oe(`Graph.${s}: could not find the "${u}" node in the graph.`);V1(!1,r==="mixed"?this.type:r,i,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new fe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function TU(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new oe(`Graph.${o}: could not find the "${u}" node in the graph.`);return V1(!0,r==="mixed"?this.type:r,i,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function MU(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ur.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new oe(`Graph.${s}: could not find the "${o}" node in the graph.`);return NU(r==="mixed"?this.type:r,i,a)}}function _U(t){AU.forEach(e=>{$U(t,e),OU(t,e),TU(t,e),MU(t,e)})}function Jh(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,l,u,c,d,h,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do{if(h=d.target,p=!0,f=i(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do{if(h=d.target,h.key!==u&&(h=d.source),p=!0,f=i(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(n&&!p&&(f=i(l.key,null,l.attributes,null,null,null,null),t&&f))return null}}function RU(t,e){const n={key:t};return iM(e.attributes)||(n.attributes=Vt({},e.attributes)),n}function DU(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return iM(n.attributes)||(r.attributes=Vt({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function IU(t){if(!an(t))throw new fe('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new fe("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!an(t.attributes)||t.attributes===null))throw new fe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function LU(t){if(!an(t))throw new fe('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new fe("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new fe("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!an(t.attributes)||t.attributes===null))throw new fe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new fe("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const BU=jF(),zU=new Set(["directed","undirected","mixed"]),dE=new Set(["domain","_events","_eventsCount","_maxListeners"]),jU=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],FU={allowSelfLoops:!0,multi:!1,type:"mixed"};function UU(t,e,n){if(n&&!an(n))throw new fe(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new $e(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function hE(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function hM(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new $e(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new $e(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!an(a))throw new fe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new $e(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new oe(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new oe(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new $e(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new $e(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Nu(r,i,l,u,a);t._edges.set(i,d);const h=s===o;return r?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),r?t._undirectedSize++:t._directedSize++,c.key=i,t.emit("edgeAdded",c),i}function VU(t,e,n,r,i,s,o,a,l){if(!r&&t.type==="undirected")throw new $e(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new $e(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new fe(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!an(a))throw new fe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new $e(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(i),h)){if((h.source.key!==s||h.target.key!==o)&&(!r||h.source.key!==o||h.target.key!==s))throw new $e(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=r?c.undirected[o]:c.out[o]),f){const v=[f.key,!1,!1,!1];if(l?!u:!a)return v;if(l){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Vt(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return v}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new $e(`Graph.${e}: the "${i}" edge already exists in the graph.`);let g=!1,b=!1;c||(c=hE(t,s,{}),g=!0,s===o&&(d=c,b=!0)),d||(d=hE(t,o,{}),b=!0),h=new Nu(r,i,c,d,a),t._edges.set(i,h);const m=s===o;return r?(c.undirectedDegree++,d.undirectedDegree++,m&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,m&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),[i,!0,g,b]}function tl(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class ot extends $F.EventEmitter{constructor(e){if(super(),e=Vt({},FU,e),typeof e.multi!="boolean")throw new fe(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!zU.has(e.type))throw new fe(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new fe(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?sM:e.type==="directed"?oM:aM;xr(this,"NodeDataClass",n);const r="geid_"+BU()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};xr(this,"_attributes",{}),xr(this,"_nodes",new Map),xr(this,"_edges",new Map),xr(this,"_directedSize",0),xr(this,"_undirectedSize",0),xr(this,"_directedSelfLoopCount",0),xr(this,"_undirectedSelfLoopCount",0),xr(this,"_edgeKeyGenerator",s),xr(this,"_options",e),dE.forEach(o=>xr(this,o,this[o])),Gr(this,"order",()=>this._nodes.size),Gr(this,"size",()=>this._edges.size),Gr(this,"directedSize",()=>this._directedSize),Gr(this,"undirectedSize",()=>this._undirectedSize),Gr(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Gr(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Gr(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Gr(this,"multi",this._options.multi),Gr(this,"type",this._options.type),Gr(this,"allowSelfLoops",this._options.allowSelfLoops),Gr(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new fe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new fe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new fe(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new $e("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new oe(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new oe(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new $e("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new oe(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new oe(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new $e("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new oe(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new oe(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new oe(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new oe(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new oe(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new oe(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new oe(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new oe(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new oe(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new oe(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new oe(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new oe(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new oe(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return UU(this,e,n).key}mergeNode(e,n){if(n&&!an(n))throw new fe(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(Vt(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new fe(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do tl(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do tl(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do tl(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=zr(this,r,i,this.type),!n)throw new oe(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new oe(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return tl(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new $e("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $e("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=zr(this,e,n,"directed");if(!r)throw new oe(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return tl(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new $e("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $e("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=zr(this,e,n,"undirected");if(!r)throw new oe(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return tl(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new fe("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!an(e))throw new fe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!an(e))throw new fe("Graph.mergeAttributes: provided attributes are not a plain object.");return Vt(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new fe("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new fe("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!cE(n))throw new fe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new fe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!cE(n))throw new fe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new fe("Graph.forEachAdjacencyEntry: expecting a callback.");Jh(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new fe("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Jh(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new fe("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Jh(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new fe("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Jh(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):rM(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new fe("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new fe("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new fe("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new fe("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new fe("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new fe("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new fe("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new fe("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Ur(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=RU(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=DU(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof ot)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!an(e))throw new fe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!an(e.attributes))throw new fe("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new fe("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],IU(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new fe("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],LU(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new ot(Vt({},this._options,e));return n.replaceAttributes(Vt({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=Vt({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new $e(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new $e("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new $e("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,hM(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Vt({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof r[h]>"u"?r[h]=0:r[h]++,l+=`${r[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!dE.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,xr(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(ot.prototype[Symbol.for("nodejs.util.inspect.custom")]=ot.prototype.inspect);jU.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?hM:VU;t.generateKey?ot.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:ot.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});qF(ot);uU(ot);EU(ot);_U(ot);class fM extends ot{constructor(e){const n=Vt({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new fe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new fe('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class H1 extends ot{constructor(e){const n=Vt({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new fe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new fe('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class pM extends ot{constructor(e){const n=Vt({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new fe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class mM extends ot{constructor(e){const n=Vt({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new fe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new fe('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class gM extends ot{constructor(e){const n=Vt({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new fe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new fe('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function $u(t){t.from=function(e,n){const r=Vt({},e.options,n),i=new t(r);return i.import(e),i}}$u(ot);$u(fM);$u(H1);$u(pM);$u(mM);$u(gM);ot.Graph=ot;ot.DirectedGraph=fM;ot.UndirectedGraph=H1;ot.MultiGraph=pM;ot.MultiDirectedGraph=mM;ot.MultiUndirectedGraph=gM;ot.InvalidArgumentsGraphError=fe;ot.NotFoundGraphError=oe;ot.UsageGraphError=$e;var HU=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},yM=yg,WU=yM.ARRAY_BUFFER_SUPPORT,GU=yM.SYMBOL_SUPPORT,KU=function(e,n){var r,i,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||WU&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(GU&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,s=0;a=r.next(),a.done!==!0;)n(a.value,s),s++;return}for(i in e)e.hasOwnProperty(i)&&n(e[i],i)},vM=gg,XU=KU;function jt(){this.clear()}jt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};jt.prototype.enqueue=function(t){return this.items.push(t),++this.size};jt.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};jt.prototype.peek=function(){if(this.size)return this.items[this.offset]};jt.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)t.call(e,this.items[n],r,this)};jt.prototype.toArray=function(){return this.items.slice(this.offset)};jt.prototype.values=function(){var t=this.items,e=this.offset;return new vM(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};jt.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new vM(function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:[n++,r],done:!1}})};typeof Symbol<"u"&&(jt.prototype[Symbol.iterator]=jt.prototype.values);jt.prototype.toString=function(){return this.toArray().join(",")};jt.prototype.toJSON=function(){return this.toArray()};jt.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:jt,enumerable:!1}),t};typeof Symbol<"u"&&(jt.prototype[Symbol.for("nodejs.util.inspect.custom")]=jt.prototype.inspect);jt.from=function(t){var e=new jt;return XU(t,function(n){e.enqueue(n)}),e};jt.of=function(){return jt.from(arguments)};var ZU=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var s=0;s<r;s++)e[i+s]=n[s]}},wM=HU,YU=ZU;function JU(t,e,n){if(!wM(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var r=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,g,b,m=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=i(c),p=0,b=d.length;p<b;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){m=!0;break e}}else for(u=l,l=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=r(c),p=0,b=d.length;p<b;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){m=!0;break e}if(!m)return null;for(var v=[];h;)v.unshift(h),h=s[h];for(h=o[v[v.length-1]];h;)v.push(h),h=o[h];return v.length?v:null}function bM(t,e,n){if(!wM(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,i={},s=0;i[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!r.has(u)&&(r.add(u),YU(c,e[t](u)),i[u]=s);s++,o=c}return i}bM.bind(null,"outboundNeighbors");bM.bind(null,"neighbors");var qU=JU;const xe=new H1({allowSelfLoops:!1});xe.addNode("MBR",{position:[610,250]});xe.addNode("AX",{position:[522,45]});xe.addNode("BX",{position:[522,85]});xe.addNode("CX",{position:[522,125]});xe.addNode("DX",{position:[522,165]});xe.addNode("id",{position:[522,205]});xe.addNode("IP",{position:[451,309]});xe.addNode("SP",{position:[451,349]});xe.addNode("ri",{position:[451,388]});xe.addNode("result",{position:[370,130]});xe.addNode("FLAGS",{position:[250,225]});xe.addNode("IR",{position:[205,272]});xe.addNode("left",{position:[60,85]});xe.addNode("right",{position:[60,145]});xe.addNode("AX join",{position:[492,45]});xe.addNode("BX join",{position:[492,85]});xe.addNode("CX join",{position:[492,125]});xe.addNode("DX join",{position:[492,165]});xe.addNode("id join",{position:[492,205]});xe.addNode("data mbr join",{position:[492,250]});xe.addNode("IP join",{position:[421,309]});xe.addNode("SP join",{position:[421,349]});xe.addNode("ri join",{position:[421,388]});xe.addNode("addresses mbr join",{position:[421,250]});xe.addNode("result mbr join",{position:[370,250]});xe.addNode("FLAGS mbr join",{position:[250,250]});xe.addNode("IR mbr join",{position:[205,250]});xe.addNode("left join",{position:[30,85]});xe.addNode("right join",{position:[30,145]});xe.addNode("operands mbr join",{position:[30,250]});xe.addUndirectedEdge("AX","AX join");xe.addUndirectedEdge("BX","BX join");xe.addUndirectedEdge("CX","CX join");xe.addUndirectedEdge("DX","DX join");xe.addUndirectedEdge("id","id join");xe.addUndirectedEdge("AX join","BX join");xe.addUndirectedEdge("BX join","CX join");xe.addUndirectedEdge("CX join","DX join");xe.addUndirectedEdge("DX join","id join");xe.addUndirectedEdge("id join","data mbr join");xe.addUndirectedEdge("data mbr join","MBR");xe.addUndirectedEdge("IP","IP join");xe.addUndirectedEdge("SP","SP join");xe.addUndirectedEdge("ri","ri join");xe.addUndirectedEdge("IP join","SP join");xe.addUndirectedEdge("SP join","ri join");xe.addUndirectedEdge("IP join","addresses mbr join");xe.addUndirectedEdge("addresses mbr join","data mbr join");xe.addUndirectedEdge("result","result mbr join");xe.addUndirectedEdge("result mbr join","addresses mbr join");xe.addUndirectedEdge("FLAGS","FLAGS mbr join");xe.addUndirectedEdge("FLAGS mbr join","result mbr join");xe.addUndirectedEdge("IR","IR mbr join");xe.addUndirectedEdge("IR mbr join","FLAGS mbr join");xe.addUndirectedEdge("left","left join");xe.addUndirectedEdge("right","right join");xe.addUndirectedEdge("left join","right join");xe.addUndirectedEdge("right join","operands mbr join");xe.addUndirectedEdge("operands mbr join","IR mbr join");function QU(t,e){const n=qU(xe,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const r=xe.getNodeAttribute(n[0],"position");let i=`M ${r[0]} ${r[1]}`;for(let s=1;s<n.length;s++){const[o,a]=xe.getNodeAttribute(n[s],"position");i+=` L ${o} ${a}`}return i}function eV(){const{path:t,...e}=tt("cpu.internalBus.data");return x.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[x.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 272 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),x.jsx(Dt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const Q0=(t,e)=>{const n=QU(t,e);return Ke([{key:"cpu.internalBus.data.path",from:n},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},ey=()=>Ke({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});async function tV(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await Ke([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),re.set(vT,t.operation),await Promise.all([Ke({key:"cpu.alu.operation.backgroundColor",to:st.mantis[400]},{duration:1,easing:"easeOutQuart"}),Ke({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Ke({key:"cpu.alu.operation.backgroundColor",to:st.stone[800]},{duration:1,easing:"easeOutQuart"}),Ke([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([Ar("cpu.result"),Ar("cpu.FLAGS")]),re.set(ft.FLAGS,t.flags),re.set(ft.result,t.result),await Promise.all([Pr("cpu.result"),Pr("cpu.FLAGS")]),await Ke([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{re.set(Ei,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Ke([{key:"cpu.id.opacity",to:1},{key:"cpu.ri.opacity",to:1}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{gT(t.instruction.position.start),re.set(Ei,{phase:"fetching",metadata:t.instruction}),await Ke([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:.4},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:.4}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{re.set(Ei,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await Ke([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Ke([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Ke([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{re.set(Ei,{phase:"stopped",error:t.error}),cu(t.error);return}case"cpu:halt":case"cpu:int.0":{re.set(Ei,{phase:"stopped"}),cu();return}case"cpu:int.3":{Ew();return}case"cpu:int.6":{re.set(Ei,{phase:"int6"});return}case"cpu:int.7":{re.set(Ei,{phase:"int7"});return}case"cpu:inta.off":{await Nn("bus.inta");return}case"cpu:inta.on":{await Br("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await Ke({key:`bus.${e}.stroke`,to:st.red[500]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Br("bus.iom",15);return}case"cpu:mar.set":{await Ke([{key:"cpu.internalBus.address.path",from:xF(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await Ar("cpu.MAR",st.blue[500]),re.set(yT,re.get(ft[t.register])),await Ke({key:"bus.address.stroke",to:st.blue[500]},{duration:5,easing:"easeOutSine"}),await Promise.all([Pr("cpu.MAR"),Ke({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=ia(t.register);await Q0("MBR",e),await Ar(`cpu.${e}`),re.set(ft[t.register],re.get(Jp)),await Promise.all([Pr(`cpu.${e}`),ey()]);return}case"cpu:mbr.set":{const[e]=ia(t.register);await Q0(e,"MBR"),await Ar("cpu.MBR"),re.set(Jp,re.get(ft[t.register])),await Ke({key:"bus.data.stroke",to:st.mantis[400]},{duration:5,easing:"easeOutSine"}),await Promise.all([Pr("cpu.MBR"),ey()]);return}case"cpu:register.copy":{const[e]=ia(t.src),[n]=ia(t.dest);e!==n&&await Q0(e,n),await Ar(`cpu.${n}`),re.set(ft[t.dest],re.get(ft[t.src])),await Promise.all([Pr(`cpu.${n}`),e!==n&&ey()]);return}case"cpu:register.update":{const[e]=ia(t.register);await Ar(`cpu.${e}`),re.set(ft[t.register],t.value),await Pr(`cpu.${e}`);return}default:return t}}async function nV(t){switch(t.type){case"f10:press":await Br("bus.int0",2),await Nn("bus.int0");return;default:return t.type}}const W1=Ae(L.zero(8)),G1=Ae(L.zero(8));function rV(t){"handshake"in t.io&&(re.set(W1,L.fromUnsigned(t.io.handshake.DATA,8)),re.set(G1,L.fromUnsigned(t.io.handshake.STATE,8)))}async function iV(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await uu(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await Ar(`handshake.${t.register}`),t.register){case"DATA":{re.set(W1,t.value);break}case"STATE":{re.set(G1,t.value);break}default:return t.register}await Pr(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await Nn("bus.int2");return}case"handshake:int.on":{await Br("bus.int2",10);return}default:return t}}async function sV(t){switch(t.type){case"keyboard:listen-key":{re.set(wn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{re.sub(wn,()=>{const n=re.get(wn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const K1=Ae(L.zero(8));function oV(t){"leds"in t.io&&re.set(K1,L.fromUnsigned(t.io.leds,8))}async function aV(t){switch(t.type){case"leds:update":{await Br("bus.pio->leds",2),re.set(K1,t.state),await Nn("bus.pio->leds");return}default:return t.type}}const X1=Ae(new Array(be.MAX_ADDRESS+1).fill(L.zero(8))),Md=Ae(be.from(8192)),xM=Ae(null),qh=16,lV=Ae(t=>{const e=t(xM)??t(Md);let n=e.value-e.value%qh,r=n+qh-1;r>be.MAX_ADDRESS&&(r=be.MAX_ADDRESS,n=r-qh+1);const i=t(X1),s=[];for(let o=0;o<qh;o++)s.push({address:be.from(n+o),value:i[n+o]});return s});function uV(t){re.set(X1,t.memory.map(e=>L.fromUnsigned(e,8))),re.set(Md,be.from(8192))}async function cV(t){switch(t.type){case"memory:read":return;case"memory:read.ok":{re.set(Md,be.from(t.address)),await Ke({key:"memory.operating-cell.color",to:st.mantis[400]},{duration:1,easing:"easeOutQuart"}),await uu(t.value),await Ke({key:"memory.operating-cell.color",to:st.white},{duration:1,easing:"easeOutQuart"});return}case"memory:write":return;case"memory:write.ok":{re.set(Md,be.from(t.address)),await Ke({key:"memory.operating-cell.color",to:st.mantis[400]},{duration:1,easing:"easeOutQuart"}),re.set(X1,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Ke({key:"memory.operating-cell.color",to:st.white},{duration:1,easing:"easeOutQuart"});return}case"memory:read.error":case"memory:write.error":{cu(t.error);return}default:return t}}const Z1=Ae(L.fromUnsigned(255,8)),Y1=Ae(L.fromUnsigned(0,8)),J1=Ae(L.fromUnsigned(0,8)),rm=[Ae(L.zero(8)),Ae(L.zero(8)),Ae(L.zero(8)),Ae(L.zero(8)),Ae(L.zero(8)),Ae(L.zero(8)),Ae(L.zero(8)),Ae(L.zero(8))];function dV(t){re.set(Z1,L.fromUnsigned(t.io.pic.IMR,8)),re.set(Y1,L.fromUnsigned(t.io.pic.IRR,8)),re.set(J1,L.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<rm.length;e++)re.set(rm[e],L.fromUnsigned(t.io.pic.lines[e],8))}async function hV(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await uu(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Ar(`pic.${t.register}`),t.register){case"IMR":{re.set(Z1,t.value);break}case"IRR":{re.set(Y1,t.value);break}case"ISR":{re.set(J1,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));re.set(rm[e],t.value);break}default:return t}await Pr(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await Nn("bus.intr");return}case"pic:intr.on":{await Br("bus.intr",10);return}case"pic:int.send":{await uu(t.number);return}default:return t}}const q1=Ae(L.zero(8)),Q1=Ae(L.zero(8)),ex=Ae(L.zero(8)),tx=Ae(L.zero(8));function fV(t){"pio"in t.io&&(re.set(q1,L.fromUnsigned(t.io.pio.PA,8)),re.set(Q1,L.fromUnsigned(t.io.pio.PB,8)),re.set(ex,L.fromUnsigned(t.io.pio.CA,8)),re.set(tx,L.fromUnsigned(t.io.pio.CB,8)))}async function pV(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await uu(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await Ar(`pio.${t.register}`),t.register){case"PA":{re.set(q1,t.value);break}case"PB":{re.set(Q1,t.value);break}case"CA":{re.set(ex,t.value);break}case"CB":{re.set(tx,t.value);break}default:return t.register}await Pr(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const im=Ae([]),sm=Ae("");function mV(t){"printer"in t.io&&(re.set(im,t.io.printer.buffer.map(e=>L.fromUnsigned(e,8))),re.set(sm,t.io.printer.paper))}async function gV(t){switch(t.type){case"printer:buffer.add":{re.set(im,e=>[...e,t.char]);return}case"printer:buffer.pop":{re.set(im,e=>e.slice(1));return}case"printer:busy.off":{await Nn("bus.printer.busy");return}case"printer:busy.on":{await Br("bus.printer.busy",15);return}case"printer:data.read":{await Br("bus.printer.data",15),await Nn("bus.printer.data");return}case"printer:paper.print":{re.set(sm,e=>e+t.char);return}case"printer:paper.replace":{re.set(sm,"");return}case"printer:strobe.off":{await Nn("bus.printer.strobe");return}case"printer:strobe.on":{await Br("bus.printer.strobe",15);return}default:return t}}const nx=Ae("");function yV(t){re.set(nx,t.io.screen)}async function vV(t){switch(t.type){case"screen:send-char":{re.set(nx,t.output);return}default:return t.type}}const rx=Ae(L.zero(8));function wV(t){"switches"in t.io&&re.set(rx,L.fromUnsigned(t.io.switches,8))}async function bV(t){switch(t.type){case"switches:toggle":{re.set(rx,e=>e.withBit(t.index,!e.bit(t.index))),await Br("bus.switches->pio",2),await Nn("bus.switches->pio");return}default:return t.type}}const ix=Ae(L.zero(8)),sx=Ae(L.zero(8));function xV(t){re.set(ix,L.fromUnsigned(t.io.timer.CONT,8)),re.set(sx,L.fromUnsigned(t.io.timer.COMP,8))}async function SV(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await uu(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Ar(`timer.${t.register}`),t.register){case"CONT":{re.set(ix,t.value);break}case"COMP":{re.set(sx,t.value);break}default:return t.register}await Pr(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await Nn("bus.int1");return}case"timer:int.on":{await Br("bus.int1",10);return}default:return t}}const Cw=new Set;async function kV(t){EV(t);const[e]=t.type.split(":",2);switch(Cw.add(t.type),e){case"bus":{await wF(t);break}case"clock":{await bF(t);break}case"cpu":{await tV(t);break}case"f10":{await nV(t);break}case"handshake":{await iV(t);break}case"keyboard":{await sV(t);break}case"leds":{await aV(t);break}case"memory":{await cV(t);break}case"pic":{await hV(t);break}case"pio":{await pV(t);break}case"printer":{await gV(t);break}case"screen":{await vV(t);break}case"switches":{await bV(t);break}case"timer":{await SV(t);break}default:return e}Cw.delete(t.type)}function fE(...t){for(const e of t)if(Cw.has(e))return!0;return!1}const CV={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function EV(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${CV[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const r in t)if(r!=="type"&&Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];i instanceof L?console.log(`${r}: %c${i.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):i instanceof be?console.log(`${r}: %c${i.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):i instanceof qn?console.log(`${r}: %c${i.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof i=="number"?console.log(`${r}: %c${i.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof i=="string"?console.log(`${r}: %c"${i}" %c(string)`,"color: #f97316;","color: #737373;"):typeof i=="boolean"?console.log(`${r}: %c${i}`,"color: #06b6d4;"):i===null?console.log(`${r}: %cnull`,"color: #b91c1c;"):console.log(`${r}:`,i)}console.groupEnd()}const nr=new m9,wn=Ae({type:"stopped"});function AV(t){const e=t.translate(pi().language);tu.error(e)}function cu(t){t&&AV(t),gT(null),mT(!1),re.set(wn,{type:"stopped",error:t}),re.set(Ei,{phase:"stopped",error:t}),vF()}function Ew(){re.set(wn,{type:"paused"}),gF()}function PV(){tu.error(Ym(pi().language,"messages.assemble-error"))}function Yu(){tu.error(Ym(pi().language,"messages.invalid-action"))}function NV(t){Zz(t),uV(t),rV(t),dV(t),fV(t),xV(t),oV(t),mV(t),yV(t),wV(t)}async function aa(t){try{for(;;){const e=re.get(wn),n=pi();if(e.type==="stopped")break;if(e.type==="paused"){await new Promise(i=>{const s=re.sub(wn,()=>{s(),i()})});continue}const r=t.next();if(r.done)break;await kV(r.value),r.value.type==="cpu:cycle.update"||r.value.type==="cpu:cycle.interrupt"?e.until==="cycle-change"?Ew():n.animations||await new Promise(i=>setTimeout(i,n.executionUnit)):r.value.type==="cpu:cycle.end"&&(e.until==="end-of-instruction"?Ew():n.animations||await new Promise(i=>setTimeout(i,n.executionUnit)))}t.return()}catch(e){const n=Bt.from(e);cu(n)}}async function $V(...t){const e=t[0],n=re.get(wn);switch(e){case"cpu.run":{if(n.type==="running")return Yu();const r=t[1];if(n.type==="stopped"){if(!window.codemirror)return;const i=window.codemirror.state.doc.toString(),s=j$(i);if(!s.success)return PV();mT(!0),nr.loadProgram({program:s,data:pi().dataOnLoad,devices:pi().devices}),NV(nr.getComputerState()),re.set(wn,{type:"running",until:r,waitingForInput:!1}),aa(nr.startCPU()),OV(),TV()}else re.set(wn,{type:"running",until:r,waitingForInput:!1}),yF();return}case"cpu.stop":{cu();return}case"f10.press":{if(n.type!=="running")return Yu();if(fE("f10:press"))return;aa(nr.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!nr.devices.switches.connected())return Yu();if(fE("switches:toggle"))return;const r=t[1];aa(nr.devices.switches.toggle(r));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return Yu();nr.devices.keyboard.readChar(L.fromChar(t[1])),re.set(wn,{...n,waitingForInput:!1});return}case"screen.clean":{aa(nr.devices.screen.clear());return}case"printer.clean":{if(!nr.devices.printer.connected())return Yu();aa(nr.devices.printer.clear());return}default:return e}}async function OV(){for(;re.get(wn).type!=="stopped";){const t=pi().clockSpeed;await Ke({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),aa(nr.devices.clock.tick())}}async function TV(){if(nr.devices.printer.connected())for(;re.get(wn).type!=="stopped";){const t=pi().printerSpeed;await Ke([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Ke({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),aa(nr.devices.printer.print())}}function Hr(){const t=Mn(wn),e=a6(),n=y.useMemo(()=>({preset:e,clock:!0,f10:!0,keyboard:!0,handshake:e==="handshake",leds:e==="pio-switches-and-leds",pic:!0,pio:e==="pio-switches-and-leds"||e==="pio-printer",printer:e==="pio-printer"||e==="handshake",screen:!0,switches:e==="pio-switches-and-leds",timer:!0}),[e]);return{status:t,dispatch:$V,devices:n}}function MV({className:t}){const e=yt(),{status:n,dispatch:r}=Hr(),i=y.useCallback(()=>{n.type!=="running"&&r("cpu.run","cycle-change")},[n.type,r]);Ac("F7",a=>{a.preventDefault(),i()},void 0,[i]);const s=y.useCallback(()=>{n.type!=="running"&&r("cpu.run","end-of-instruction")},[n.type,r]);Ac("F8",a=>{a.preventDefault(),s()},void 0,[s]);const o=y.useCallback(()=>{n.type!=="running"&&r("cpu.run","infinity")},[n.type,r]);return Ac("F4",a=>{a.preventDefault(),o()},void 0,[o]),x.jsxs("div",{className:Ue("flex items-center justify-center gap-4",t),children:[x.jsxs(WB,{children:[x.jsx(GB,{asChild:!0,children:x.jsx("button",{disabled:n.type==="running",className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:n.type==="stopped"?x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"icon-[lucide--play] mr-2 h-4 w-4"}),e("control.action.start")]}):n.type==="paused"?x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"icon-[lucide--play] mr-2 h-4 w-4"}),e("control.action.continue")]}):x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"icon-[lucide--refresh-cw] mr-2 h-4 w-4 animate-spin"}),e("control.action.running")]})})}),x.jsxs(L$,{className:"w-56",align:"start",children:[x.jsxs(Mf,{disabled:n.type==="running",onClick:i,children:[x.jsx("span",{className:"icon-[lucide--chevron-right] mr-2 h-4 w-4"}),e("control.action.run.cycle-change"),x.jsx("div",{className:"grow"}),x.jsx("kbd",{className:"text-stone-600",children:"F7"})]}),x.jsxs(Mf,{disabled:n.type==="running",onClick:s,children:[x.jsx("span",{className:"icon-[lucide--chevrons-right] mr-2 h-4 w-4"}),e("control.action.run.end-of-instruction"),x.jsx("div",{className:"grow"}),x.jsx("kbd",{className:"text-stone-600",children:"F8"})]}),x.jsxs(Mf,{disabled:n.type==="running",onClick:o,children:[x.jsx("span",{className:"icon-[lucide--infinity] mr-2 h-4 w-4"}),e("control.action.run.infinity"),x.jsx("div",{className:"grow"}),x.jsx("kbd",{className:"text-stone-600",children:"F4"})]})]})]}),x.jsxs("button",{disabled:n.type==="stopped",onClick:()=>r("cpu.stop"),className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[x.jsx("span",{className:"icon-[lucide--stop-circle] mr-2 h-4 w-4"}),e("control.action.stop")]})]})}function om(t,[e,n]){return Math.min(n,Math.max(e,t))}function ox(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const _V=y.forwardRef((t,e)=>y.createElement(Je.span,le({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),RV=[" ","Enter","ArrowUp","ArrowDown"],DV=[" ","Enter"],wg="Select",[bg,ax,IV]=Wm(wg),[Ou,oJ]=Xi(wg,[IV,Pu]),lx=Pu(),[LV,Wa]=Ou(wg),[BV,zV]=Ou(wg),jV=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f}=t,p=lx(e),[g,b]=y.useState(null),[m,v]=y.useState(null),[w,S]=y.useState(!1),C=Vd(u),[E=!1,$]=Ao({prop:r,defaultProp:i,onChange:s}),[A,O]=Ao({prop:o,defaultProp:a,onChange:l}),_=y.useRef(null),T=g?!!g.closest("form"):!0,[z,j]=y.useState(new Set),B=Array.from(z).map(K=>K.props.value).join(";");return y.createElement(t1,p,y.createElement(LV,{required:f,scope:e,trigger:g,onTriggerChange:b,valueNode:m,onValueNodeChange:v,valueNodeHasChildren:w,onValueNodeHasChildrenChange:S,contentId:Na(),value:A,onValueChange:O,open:E,onOpenChange:$,dir:C,triggerPointerDownPosRef:_,disabled:h},y.createElement(bg.Provider,{scope:e},y.createElement(BV,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(K=>{j(Z=>new Set(Z).add(K))},[]),onNativeOptionRemove:y.useCallback(K=>{j(Z=>{const Q=new Set(Z);return Q.delete(K),Q})},[])},n)),T?y.createElement(kM,{key:B,"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:A,onChange:K=>O(K.target.value),disabled:h},A===void 0?y.createElement("option",{value:""}):null,Array.from(z)):null))},FV="SelectTrigger",UV=y.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=lx(n),o=Wa(FV,n),a=o.disabled||r,l=Qe(e,o.onTriggerChange),u=ax(n),[c,d,h]=CM(p=>{const g=u().filter(v=>!v.disabled),b=g.find(v=>v.value===o.value),m=EM(g,p,b);m!==void 0&&o.onValueChange(m.value)}),f=()=>{a||(o.onOpenChange(!0),h())};return y.createElement(n1,le({asChild:!0},s),y.createElement(Je.button,le({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},i,{ref:l,onClick:Ce(i.onClick,p=>{p.currentTarget.focus()}),onPointerDown:Ce(i.onPointerDown,p=>{const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(f(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:Ce(i.onKeyDown,p=>{const g=c.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(g&&p.key===" ")&&RV.includes(p.key)&&(f(),p.preventDefault())})})))}),VV="SelectValue",HV=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o,...a}=t,l=Wa(VV,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=Qe(e,l.onValueNodeChange);return di(()=>{u(c)},[u,c]),y.createElement(Je.span,le({},a,{ref:d,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:s)}),WV=y.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return y.createElement(Je.span,le({"aria-hidden":!0},i,{ref:e}),r||"▼")}),GV=t=>y.createElement(i1,le({asChild:!0},t)),du="SelectContent",KV=y.forwardRef((t,e)=>{const n=Wa(du,t.__scopeSelect),[r,i]=y.useState();if(di(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Fo.createPortal(y.createElement(SM,{scope:t.__scopeSelect},y.createElement(bg.Slot,{scope:t.__scopeSelect},y.createElement("div",null,t.children))),s):null}return y.createElement(XV,le({},t,{ref:e}))}),qi=10,[SM,xg]=Ou(du),XV=y.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:b,...m}=t,v=Wa(du,n),[w,S]=y.useState(null),[C,E]=y.useState(null),$=Qe(e,k=>S(k)),[A,O]=y.useState(null),[_,T]=y.useState(null),z=ax(n),[j,B]=y.useState(!1),K=y.useRef(!1);y.useEffect(()=>{if(w)return s1(w)},[w]),Zb();const Z=y.useCallback(k=>{const[N,...D]=z().map(X=>X.ref.current),[R]=D.slice(-1),F=document.activeElement;for(const X of k)if(X===F||(X==null||X.scrollIntoView({block:"nearest"}),X===N&&C&&(C.scrollTop=0),X===R&&C&&(C.scrollTop=C.scrollHeight),X==null||X.focus(),document.activeElement!==F))return},[z,C]),Q=y.useCallback(()=>Z([A,w]),[Z,A,w]);y.useEffect(()=>{j&&Q()},[j,Q]);const{onOpenChange:V,triggerPointerDownPosRef:M}=v;y.useEffect(()=>{if(w){let k={x:0,y:0};const N=R=>{var F,X,W,Y;k={x:Math.abs(Math.round(R.pageX)-((F=(X=M.current)===null||X===void 0?void 0:X.x)!==null&&F!==void 0?F:0)),y:Math.abs(Math.round(R.pageY)-((W=(Y=M.current)===null||Y===void 0?void 0:Y.y)!==null&&W!==void 0?W:0))}},D=R=>{k.x<=10&&k.y<=10?R.preventDefault():w.contains(R.target)||V(!1),document.removeEventListener("pointermove",N),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",N),document.addEventListener("pointerup",D,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",D,{capture:!0})}}},[w,V,M]),y.useEffect(()=>{const k=()=>V(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[V]);const[U,J]=CM(k=>{const N=z().filter(F=>!F.disabled),D=N.find(F=>F.ref.current===document.activeElement),R=EM(N,k,D);R&&setTimeout(()=>R.ref.current.focus())}),ne=y.useCallback((k,N,D)=>{const R=!K.current&&!D;(v.value!==void 0&&v.value===N||R)&&(O(k),R&&(K.current=!0))},[v.value]),me=y.useCallback(()=>w==null?void 0:w.focus(),[w]),H=y.useCallback((k,N,D)=>{const R=!K.current&&!D;(v.value!==void 0&&v.value===N||R)&&T(k)},[v.value]),I=r==="popper"?pE:ZV,G=I===pE?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:b}:{};return y.createElement(SM,{scope:n,content:w,viewport:C,onViewportChange:E,itemRefCallback:ne,selectedItem:A,onItemLeave:me,itemTextRefCallback:H,focusSelectedItem:Q,selectedItemText:_,position:r,isPositioned:j,searchRef:U},y.createElement(o1,{as:Pa,allowPinchZoom:!0},y.createElement(Yb,{asChild:!0,trapped:v.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:Ce(i,k=>{var N;(N=v.trigger)===null||N===void 0||N.focus({preventScroll:!0}),k.preventDefault()})},y.createElement(Xb,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>v.onOpenChange(!1)},y.createElement(I,le({role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:k=>k.preventDefault()},m,G,{onPlaced:()=>B(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:Ce(m.onKeyDown,k=>{const N=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!N&&k.key.length===1&&J(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let R=z().filter(F=>!F.disabled).map(F=>F.ref.current);if(["ArrowUp","End"].includes(k.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const F=k.target,X=R.indexOf(F);R=R.slice(X+1)}setTimeout(()=>Z(R)),k.preventDefault()}})}))))))}),ZV=y.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Wa(du,n),o=xg(du,n),[a,l]=y.useState(null),[u,c]=y.useState(null),d=Qe(e,$=>c($)),h=ax(n),f=y.useRef(!1),p=y.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:m,focusSelectedItem:v}=o,w=y.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&g&&b&&m){const $=s.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),O=s.valueNode.getBoundingClientRect(),_=m.getBoundingClientRect();if(s.dir!=="rtl"){const F=_.left-A.left,X=O.left-F,W=$.left-X,Y=$.width+W,ee=Math.max(Y,A.width),Oe=window.innerWidth-qi,he=om(X,[qi,Oe-ee]);a.style.minWidth=Y+"px",a.style.left=he+"px"}else{const F=A.right-_.right,X=window.innerWidth-O.right-F,W=window.innerWidth-$.right-X,Y=$.width+W,ee=Math.max(Y,A.width),Oe=window.innerWidth-qi,he=om(X,[qi,Oe-ee]);a.style.minWidth=Y+"px",a.style.right=he+"px"}const T=h(),z=window.innerHeight-qi*2,j=g.scrollHeight,B=window.getComputedStyle(u),K=parseInt(B.borderTopWidth,10),Z=parseInt(B.paddingTop,10),Q=parseInt(B.borderBottomWidth,10),V=parseInt(B.paddingBottom,10),M=K+Z+j+V+Q,U=Math.min(b.offsetHeight*5,M),J=window.getComputedStyle(g),ne=parseInt(J.paddingTop,10),me=parseInt(J.paddingBottom,10),H=$.top+$.height/2-qi,I=z-H,G=b.offsetHeight/2,k=b.offsetTop+G,N=K+Z+k,D=M-N;if(N<=H){const F=b===T[T.length-1].ref.current;a.style.bottom="0px";const X=u.clientHeight-g.offsetTop-g.offsetHeight,W=Math.max(I,G+(F?me:0)+X+Q),Y=N+W;a.style.height=Y+"px"}else{const F=b===T[0].ref.current;a.style.top="0px";const W=Math.max(H,K+g.offsetTop+(F?ne:0)+G)+D;a.style.height=W+"px",g.scrollTop=N-H+g.offsetTop}a.style.margin=`${qi}px 0`,a.style.minHeight=U+"px",a.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,g,b,m,s.dir,r]);di(()=>w(),[w]);const[S,C]=y.useState();di(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const E=y.useCallback($=>{$&&p.current===!0&&(w(),v==null||v(),p.current=!1)},[w,v]);return y.createElement(YV,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:E},y.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S}},y.createElement(Je.div,le({},i,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),pE=y.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=qi,...s}=t,o=lx(n);return y.createElement(r1,le({},o,s,{ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[YV,JV]=Ou(du,{}),mE="SelectViewport",qV=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=xg(mE,n),s=JV(mE,n),o=Qe(e,i.onViewportChange),a=y.useRef(0);return y.createElement(y.Fragment,null,y.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),y.createElement(bg.Slot,{scope:n},y.createElement(Je.div,le({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:Ce(r.onScroll,l=>{const u=l.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&c){const h=Math.abs(a.current-u.scrollTop);if(h>0){const f=window.innerHeight-qi*2,p=parseFloat(c.style.minHeight),g=parseFloat(c.style.height),b=Math.max(p,g);if(b<f){const m=b+h,v=Math.min(f,m),w=m-v;c.style.height=v+"px",c.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,c.style.justifyContent="flex-end")}}}a.current=u.scrollTop})}))))}),QV="SelectGroup";Ou(QV);const Aw="SelectItem",[eH,tH]=Ou(Aw),nH=y.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=Wa(Aw,n),l=xg(Aw,n),u=a.value===r,[c,d]=y.useState(s??""),[h,f]=y.useState(!1),p=Qe(e,m=>{var v;return(v=l.itemRefCallback)===null||v===void 0?void 0:v.call(l,m,r,i)}),g=Na(),b=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};return y.createElement(eH,{scope:n,value:r,disabled:i,textId:g,isSelected:u,onItemTextChange:y.useCallback(m=>{d(v=>{var w;return v||((w=m==null?void 0:m.textContent)!==null&&w!==void 0?w:"").trim()})},[])},y.createElement(bg.ItemSlot,{scope:n,value:r,disabled:i,textValue:c},y.createElement(Je.div,le({role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:p,onFocus:Ce(o.onFocus,()=>f(!0)),onBlur:Ce(o.onBlur,()=>f(!1)),onPointerUp:Ce(o.onPointerUp,b),onPointerMove:Ce(o.onPointerMove,m=>{if(i){var v;(v=l.onItemLeave)===null||v===void 0||v.call(l)}else m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ce(o.onPointerLeave,m=>{if(m.currentTarget===document.activeElement){var v;(v=l.onItemLeave)===null||v===void 0||v.call(l)}}),onKeyDown:Ce(o.onKeyDown,m=>{var v;((v=l.searchRef)===null||v===void 0?void 0:v.current)!==""&&m.key===" "||(DV.includes(m.key)&&b(),m.key===" "&&m.preventDefault())})}))))}),Qh="SelectItemText",rH=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Wa(Qh,n),a=xg(Qh,n),l=tH(Qh,n),u=zV(Qh,n),[c,d]=y.useState(null),h=Qe(e,m=>d(m),l.onItemTextChange,m=>{var v;return(v=a.itemTextRefCallback)===null||v===void 0?void 0:v.call(a,m,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=y.useMemo(()=>y.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},f),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return di(()=>(g(p),()=>b(p)),[g,b,p]),y.createElement(y.Fragment,null,y.createElement(Je.span,le({id:l.textId},s,{ref:h})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Fo.createPortal(s.children,o.valueNode):null)}),kM=y.forwardRef((t,e)=>{const{value:n,...r}=t,i=y.useRef(null),s=Qe(e,i),o=ox(n);return y.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),y.createElement(_V,{asChild:!0},y.createElement("select",le({},r,{ref:s,defaultValue:n})))});kM.displayName="BubbleSelect";function CM(t){const e=hi(t),n=y.useRef(""),r=y.useRef(0),i=y.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function EM(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=iH(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function iH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const sH=jV,AM=UV,oH=HV,aH=WV,lH=GV,PM=KV,uH=qV,NM=nH,cH=rH,ty=sH,ny=oH,Kf=y.forwardRef(({className:t,children:e,...n},r)=>x.jsxs(AM,{ref:r,className:Ue("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,x.jsx(aH,{asChild:!0,children:x.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));Kf.displayName=AM.displayName;const Xf=y.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>x.jsx(lH,{children:x.jsx(PM,{ref:i,className:Ue("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...r,children:x.jsx(uH,{className:"p-1",children:e})})}));Xf.displayName=PM.displayName;const fc=y.forwardRef(({className:t,children:e,...n},r)=>x.jsx(NM,{ref:r,className:Ue("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:x.jsx(cH,{children:e})}));fc.displayName=NM.displayName;const $M=["PageUp","PageDown"],OM=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],TM={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},nh="Slider",[Pw,dH,hH]=Wm(nh),[MM,aJ]=Xi(nh,[hH]),[fH,Sg]=MM(nh),pH=y.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,...p}=t,[g,b]=y.useState(null),m=Qe(e,B=>b(B)),v=y.useRef(new Set),w=y.useRef(0),S=o==="horizontal",C=g?!!g.closest("form"):!0,E=S?mH:gH,[$=[],A]=Ao({prop:c,defaultProp:u,onChange:B=>{var K;(K=[...v.current][w.current])===null||K===void 0||K.focus(),d(B)}}),O=y.useRef($);function _(B){const K=EH($,B);j(B,K)}function T(B){j(B,w.current)}function z(){const B=O.current[w.current];$[w.current]!==B&&h($)}function j(B,K,{commit:Z}={commit:!1}){const Q=$H(s),V=OH(Math.round((B-r)/s)*s+r,Q),M=om(V,[r,i]);A((U=[])=>{const J=kH(U,M,K);if(NH(J,l*s)){w.current=J.indexOf(M);const ne=String(J)!==String(U);return ne&&Z&&h(J),ne?J:U}else return U})}return y.createElement(fH,{scope:t.__scopeSlider,disabled:a,min:r,max:i,valueIndexToChangeRef:w,thumbs:v.current,values:$,orientation:o},y.createElement(Pw.Provider,{scope:t.__scopeSlider},y.createElement(Pw.Slot,{scope:t.__scopeSlider},y.createElement(E,le({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:m,onPointerDown:Ce(p.onPointerDown,()=>{a||(O.current=$)}),min:r,max:i,inverted:f,onSlideStart:a?void 0:_,onSlideMove:a?void 0:T,onSlideEnd:a?void 0:z,onHomeKeyDown:()=>!a&&j(r,0,{commit:!0}),onEndKeyDown:()=>!a&&j(i,$.length-1,{commit:!0}),onStepKeyDown:({event:B,direction:K})=>{if(!a){const V=$M.includes(B.key)||B.shiftKey&&OM.includes(B.key)?10:1,M=w.current,U=$[M],J=s*V*K;j(U+J,M,{commit:!0})}}})))),C&&$.map((B,K)=>y.createElement(SH,{key:K,name:n?n+($.length>1?"[]":""):void 0,value:B})))}),[_M,RM]=MM(nh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),mH=y.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=y.useState(null),f=Qe(e,w=>h(w)),p=y.useRef(),g=Vd(i),b=g==="ltr",m=b&&!s||!b&&s;function v(w){const S=p.current||d.getBoundingClientRect(),C=[0,S.width],$=ux(C,m?[n,r]:[r,n]);return p.current=S,$(w-S.left)}return y.createElement(_M,{scope:t.__scopeSlider,startEdge:m?"left":"right",endEdge:m?"right":"left",direction:m?1:-1,size:"width"},y.createElement(DM,le({dir:g,"data-orientation":"horizontal"},c,{ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const S=v(w.clientX);o==null||o(S)},onSlideMove:w=>{const S=v(w.clientX);a==null||a(S)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:w=>{const C=TM[m?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:C?-1:1})}})))}),gH=y.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=y.useRef(null),d=Qe(e,c),h=y.useRef(),f=!i;function p(g){const b=h.current||c.current.getBoundingClientRect(),m=[0,b.height],w=ux(m,f?[r,n]:[n,r]);return h.current=b,w(g-b.top)}return y.createElement(_M,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1},y.createElement(DM,le({"data-orientation":"vertical"},u,{ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const b=p(g.clientY);s==null||s(b)},onSlideMove:g=>{const b=p(g.clientY);o==null||o(b)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:g=>{const m=TM[f?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:m?-1:1})}})))}),DM=y.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=Sg(nh,n);return y.createElement(Je.span,le({},u,{ref:e,onKeyDown:Ce(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):$M.concat(OM).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Ce(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():r(d)}),onPointerMove:Ce(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:Ce(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})}))}),yH="SliderTrack",vH=y.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Sg(yH,n);return y.createElement(Je.span,le({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:e}))}),gE="SliderRange",wH=y.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Sg(gE,n),s=RM(gE,n),o=y.useRef(null),a=Qe(e,o),l=i.values.length,u=i.values.map(h=>IM(h,i.min,i.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return y.createElement(Je.span,le({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}}))}),yE="SliderThumb",bH=y.forwardRef((t,e)=>{const n=dH(t.__scopeSlider),[r,i]=y.useState(null),s=Qe(e,a=>i(a)),o=y.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return y.createElement(xH,le({},t,{ref:s,index:o}))}),xH=y.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,...i}=t,s=Sg(yE,n),o=RM(yE,n),[a,l]=y.useState(null),u=Qe(e,b=>l(b)),c=e1(a),d=s.values[r],h=d===void 0?0:IM(d,s.min,s.max),f=CH(r,s.values.length),p=c==null?void 0:c[o.size],g=p?AH(p,h,o.direction):0;return y.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),y.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${h}% + ${g}px)`}},y.createElement(Pw.ItemSlot,{scope:t.__scopeSlider},y.createElement(Je.span,le({role:"slider","aria-label":t["aria-label"]||f,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:u,style:d===void 0?{display:"none"}:t.style,onFocus:Ce(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})}))))}),SH=t=>{const{value:e,...n}=t,r=y.useRef(null),i=ox(e);return y.useEffect(()=>{const s=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[i,e]),y.createElement("input",le({style:{display:"none"}},n,{ref:r,defaultValue:e}))};function kH(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function IM(t,e,n){const s=100/(n-e)*(t-e);return om(s,[0,100])}function CH(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function EH(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function AH(t,e,n){const r=t/2,s=ux([0,50],[0,r]);return(r-s(e)*n)*n}function PH(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function NH(t,e){if(e>0){const n=PH(t);return Math.min(...n)>=e}return!0}function ux(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function $H(t){return(String(t).split(".")[1]||"").length}function OH(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const LM=pH,TH=vH,MH=wH,_H=bH,Zf=y.forwardRef(({className:t,...e},n)=>x.jsxs(LM,{ref:n,className:Ue("relative flex touch-none select-none items-center",t),...e,children:[x.jsx(TH,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:x.jsx(MH,{className:"absolute h-full bg-mantis-400"})}),x.jsx(_H,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Zf.displayName=LM.displayName;const BM="Switch",[RH,lJ]=Xi(BM),[DH,IH]=RH(BM),LH=y.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,...c}=t,[d,h]=y.useState(null),f=Qe(e,v=>h(v)),p=y.useRef(!1),g=d?!!d.closest("form"):!0,[b=!1,m]=Ao({prop:i,defaultProp:s,onChange:u});return y.createElement(DH,{scope:n,checked:b,disabled:a},y.createElement(Je.button,le({type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":zM(b),"data-disabled":a?"":void 0,disabled:a,value:l},c,{ref:f,onClick:Ce(t.onClick,v=>{m(w=>!w),g&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})),g&&y.createElement(jH,{control:d,bubbles:!p.current,name:r,value:l,checked:b,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),BH="SwitchThumb",zH=y.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=IH(BH,n);return y.createElement(Je.span,le({"data-state":zM(i.checked),"data-disabled":i.disabled?"":void 0},r,{ref:e}))}),jH=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=y.useRef(null),o=ox(n),a=e1(e);return y.useEffect(()=>{const l=s.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(h)}},[o,n,r]),y.createElement("input",le({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function zM(t){return t?"checked":"unchecked"}const jM=LH,FH=zH,cx=y.forwardRef(({className:t,...e},n)=>x.jsx(jM,{className:Ue("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:x.jsx(FH,{className:Ue("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));cx.displayName=jM.displayName;const dx=Ae(!1);function FM({className:t}){const e=yt(),[n,r]=i6(),{status:i}=Hr();return x.jsxs("div",{className:Ue("overflow-auto scrollbar-stone-700",t),children:[x.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[x.jsx("span",{className:"icon-[lucide--settings] h-6 w-6"})," ",e("settings.title")]}),x.jsxs(Zo,{children:[x.jsx(Yo,{children:x.jsxs(Jo,{children:[x.jsx("span",{className:"icon-[lucide--languages] h-6 w-6"}),e("settings.language.label")]})}),x.jsxs(ty,{value:n.language,onValueChange:s=>r(o=>({...o,language:s})),children:[x.jsx(Kf,{className:"w-32",children:x.jsx(ny,{})}),x.jsxs(Xf,{children:[x.jsx(fc,{value:"en",children:x.jsxs("span",{className:"inline-flex items-center gap-2",children:[x.jsx("span",{className:"icon-[circle-flags--uk] h-4 w-4"})," English"]})}),x.jsx(fc,{value:"es",children:x.jsxs("span",{className:"inline-flex items-center gap-2",children:[x.jsx("span",{className:"icon-[circle-flags--ar] h-4 w-4"})," Español"]})})]})]})]}),x.jsx("hr",{className:"border-stone-600"}),x.jsxs(Zo,{children:[x.jsxs(Yo,{children:[x.jsxs(Jo,{children:[x.jsx("span",{className:"icon-[lucide--memory-stick] h-6 w-6"}),e("settings.dataOnLoad.label")]}),x.jsx(ry,{children:e("settings.dataOnLoad.description")})]}),x.jsxs(ty,{value:n.dataOnLoad,onValueChange:s=>r(o=>({...o,dataOnLoad:s})),children:[x.jsx(Kf,{className:"w-32 min-w-[theme(width.32)]",children:x.jsx(ny,{})}),x.jsx(Xf,{children:LN.map(s=>x.jsx(fc,{value:s,children:e(`settings.dataOnLoad.${s}`)},s))})]})]}),x.jsxs(Zo,{children:[x.jsxs(Yo,{children:[x.jsxs(Jo,{children:[x.jsx("span",{className:"icon-[lucide--monitor-smartphone] h-6 w-6"}),e("settings.devices.label")]}),x.jsx(ry,{children:e("settings.devices.description")})]}),x.jsxs(ty,{value:n.devices,onValueChange:s=>r(o=>({...o,devices:s})),disabled:i.type!=="stopped",children:[x.jsx(Kf,{className:"w-52 min-w-[theme(width.52)]",children:x.jsx(ny,{})}),x.jsx(Xf,{children:BN.map(s=>x.jsx(fc,{value:s,children:e(`settings.devices.${s}`)},s))})]})]}),x.jsx("hr",{className:"border-stone-600"}),x.jsxs(Zo,{children:[x.jsxs(Yo,{children:[x.jsxs(Jo,{children:[x.jsx("span",{className:"icon-[lucide--rotate-3d] h-6 w-6"}),e("settings.animations.label")]}),x.jsx(ry,{children:e("settings.animations.description")})]}),x.jsx(cx,{className:"ml-8",checked:n.animations,onCheckedChange:s=>r(o=>({...o,animations:s}))})]}),x.jsxs(Zo,{children:[x.jsx(Yo,{children:x.jsxs(Jo,{children:[x.jsx("span",{className:"icon-[lucide--gauge] h-6 w-6"}),e("settings.speeds.executionUnit")]})}),x.jsx(Zf,{className:"w-44",...iy({value:n.executionUnit,onValueChange:s=>r(o=>({...o,executionUnit:s})),min:500,max:1})})]}),x.jsxs(Zo,{children:[x.jsx(Yo,{children:x.jsxs(Jo,{children:[x.jsx("span",{className:"icon-[lucide--clock] h-6 w-6"}),e("settings.speeds.clockSpeed")]})}),x.jsx(Zf,{className:"w-44",...iy({value:n.clockSpeed,onValueChange:s=>r(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),x.jsxs(Zo,{children:[x.jsx(Yo,{children:x.jsxs(Jo,{children:[x.jsx("span",{className:"icon-[lucide--printer] h-6 w-6"}),e("settings.speeds.printerSpeed")]})}),x.jsx(Zf,{className:"w-44",...iy({value:n.printerSpeed,onValueChange:s=>r(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]})]})}function Zo({children:t}){return x.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Yo({children:t}){return x.jsx("div",{className:"grow",children:t})}function Jo({children:t}){return x.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function ry({children:t}){return x.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function iy({value:t,onValueChange:e,min:n,max:r}){const i=Math.log(n),o=(Math.log(r)-i)/100;return{value:[(Math.log(t)-i)/o],onValueChange:a=>e(Math.exp(i+o*a[0])),min:0,max:100}}function UH(){const t=yt(),[e,n]=Hd(dx);return x.jsxs("header",{className:"relative p-2 text-sm text-white",children:[x.jsx(MV,{className:" absolute inset-0"}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex select-none items-center justify-center",children:[x.jsx("img",{src:"/favicon.svg",className:"mr-2 h-10 w-10"}),x.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",x.jsx("span",{className:"text-mantis-400",children:"Sim"})]})]}),x.jsx("button",{className:Ue("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:x.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}var _r=function(t,e){return Number(t.toFixed(e))},VH=function(t,e){return typeof t=="number"?t:e},wt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},HH=function(t){return-Math.cos(t*Math.PI)/2+.5},WH=function(t){return t},GH=function(t){return t*t},KH=function(t){return t*(2-t)},XH=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},ZH=function(t){return t*t*t},YH=function(t){return--t*t*t+1},JH=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},qH=function(t){return t*t*t*t},QH=function(t){return 1- --t*t*t*t},eW=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},tW=function(t){return t*t*t*t*t},nW=function(t){return 1+--t*t*t*t*t},rW=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},UM={easeOut:HH,linear:WH,easeInQuad:GH,easeOutQuad:KH,easeInOutQuad:XH,easeInCubic:ZH,easeOutCubic:YH,easeInOutCubic:JH,easeInQuart:qH,easeOutQuart:QH,easeInOutQuart:eW,easeInQuint:tW,easeOutQuint:nW,easeInOutQuint:rW},VM=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Ii=function(t){t.mounted&&(VM(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function HM(t,e,n,r){if(t.mounted){var i=new Date().getTime(),s=1;Ii(t),t.animation=function(){if(!t.mounted)return VM(t.animation);var o=new Date().getTime()-i,a=o/n,l=UM[e],u=l(a);o>=n?(r(s),t.animation=null):t.animation&&(r(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function iW(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function Ho(t,e,n,r){var i=iW(e);if(!(!t.mounted||!i)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):HM(t,r,n,function(f){var p=a+c*f,g=l+d*f,b=u+h*f;s(p,g,b)})}}function sW(t,e,n){var r=t.offsetWidth,i=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=r-a,c=i-l;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var oW=function(t,e,n,r,i,s,o){var a=t>e?n*(o?1:.5):0,l=r>i?s*(o?1:.5):0,u=t-e-a,c=a,d=r-i-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},hx=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,i=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var s=sW(n,r,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=oW(o,l,u,a,c,d,!!i);return h},Nw=function(t,e,n,r){return r?t<e?_r(e,2):t>n?_r(n,2):_r(t,2):_r(t,2)},hu=function(t,e){var n=hx(t,e);return t.bounds=n,n};function kg(t,e,n,r,i,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=i,h=s);var f=Nw(t,a-d,u+d,r),p=Nw(e,l-h,c+h,r);return{x:f,y:p}}function Cg(t,e,n,r,i,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=r-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=kg(d,h,i,s,0,0,null);return f}function rh(t,e,n,r,i){var s=i?r:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var vE=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,i=t.wrapperComponent,s=e.target,o=i==null?void 0:i.contains(s),a=r&&s&&o;if(!a)return!1;var l=Eg(s,n);return!l},wE=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,i=r.panning.disabled,s=e&&n&&!i;return!!s},aW=function(t,e){var n=t.transformState,r=n.positionX,i=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-r,y:o-i}},lW=function(t,e){var n=e.touches,r=t.transformState,i=r.positionX,s=r.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-i,y:l-s}}};function uW(t){var e=t.transformState,n=e.positionX,r=e.positionY,i=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,g=n>d||n<h,b=r>f||r<p,m=n>d?u.offsetWidth:t.setup.minPositionX||0,v=r>f?u.offsetHeight:t.setup.minPositionY||0,w=Cg(t,m,v,i,t.bounds,a||l),S=w.x,C=w.y;return{scale:i,positionX:g?S:n,positionY:b?C:r}}}function cW(t,e,n,r,i){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=kg(e,n,a,s,r,i,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var dW=function(t,e,n){var r=t.startCoords,i=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=i.positionX,u=i.positionY;if(!r)return{x:l,y:u};var c=e-r.x,d=n-r.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},am=function(t,e){var n=t.setup,r=t.transformState,i=r.scale,s=n.minScale,o=n.disablePadding;return e>0&&i>=s&&!o?e:0},hW=function(t){var e=t.mounted,n=t.setup,r=n.disabled,i=n.velocityAnimation,s=t.transformState.scale,o=i.disabled,a=!o||s>1||!r||e;return!!a},fW=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,i=t.setup,s=i.disabled,o=i.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!r)};function pW(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,s=n.sensitivity;return r?i*e*s:i}function bE(t,e,n,r,i,s,o,a,l,u){if(i){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return r?e:Nw(t,s,o,i)}function mW(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function gW(t,e){var n=hW(t);if(n){var r=t.lastMousePosition,i=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(r&&i&&o){var u=mW(o,a),c=e.x-r.x,d=e.y-r.y,h=c/u,f=d/u,p=l-i,g=c*c+d*d,b=Math.sqrt(g)/p;t.velocity={velocityX:h,velocityY:f,total:b}}t.lastMousePosition=e,t.velocityTime=l}}function yW(t){var e=t.velocity,n=t.bounds,r=t.setup,i=t.wrapperComponent,s=fW(t);if(!(!s||!e||!n||!i)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=r.limitToBounds,p=r.alignmentAnimation,g=r.zoomAnimation,b=r.panning,m=b.lockAxisY,v=b.lockAxisX,w=g.animationType,S=p.sizeX,C=p.sizeY,E=p.velocityAlignmentTime,$=E,A=pW(t,l),O=Math.max(A,$),_=am(t,S),T=am(t,C),z=_*i.offsetWidth/100,j=T*i.offsetHeight/100,B=u+z,K=c-z,Z=d+j,Q=h-j,V=t.transformState,M=new Date().getTime();HM(t,w,O,function(U){var J=t.transformState,ne=J.scale,me=J.positionX,H=J.positionY,I=new Date().getTime()-M,G=I/$,k=UM[p.animationType],N=1-k(Math.min(1,G)),D=1-U,R=me+o*D,F=H+a*D,X=bE(R,V.positionX,me,v,f,c,u,K,B,N),W=bE(F,V.positionY,H,m,f,h,d,Q,Z,N);(me!==R||H!==F)&&t.setTransformState(ne,X,W)})}}function xE(t,e){var n=t.transformState.scale;Ii(t),hu(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?lW(t,e):aW(t,e)}function WM(t){var e=t.transformState.scale,n=t.setup,r=n.minScale,i=n.alignmentAnimation,s=i.disabled,o=i.sizeX,a=i.sizeY,l=i.animationTime,u=i.animationType,c=s||e<r||!o&&!a;if(!c){var d=uW(t);d&&Ho(t,d,l,u)}}function SE(t,e,n){var r=t.startCoords,i=t.setup,s=i.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(r){var l=dW(t,e,n),u=l.x,c=l.y,d=am(t,o),h=am(t,a);gW(t,{x:u,y:c}),cW(t,u,c,d,h)}}function vW(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,i=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=r==null?void 0:r.getBoundingClientRect(),o=i==null?void 0:i.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?yW(t):WM(t)}}function fx(t,e,n,r){var i=t.setup,s=i.minScale,o=i.maxScale,a=i.limitToBounds,l=rh(_r(e,2),s,o,0,!1),u=hu(t,l),c=Cg(t,n,r,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function GM(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||r>=o;if((r>=1||a)&&WM(t),!(h||!i||!t.mounted)){var f=e||i.offsetWidth/2,p=n||i.offsetHeight/2,g=fx(t,o,f,p);g&&Ho(t,g,c,d)}}var So=function(){return So=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},So.apply(this,arguments)};function kE(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var ef={previousScale:1,scale:1,positionX:0,positionY:0},Ju={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},KM=function(t){var e,n,r,i;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:ef.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:ef.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:ef.positionX,positionY:(i=t.initialPositionY)!==null&&i!==void 0?i:ef.positionY}},CE=function(t){var e=So({},Ju);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",i=typeof Ju[n]<"u";if(i&&r){var s=Object.prototype.toString.call(Ju[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=So(So({},Ju[n]),t[n]):a?e[n]=kE(kE([],Ju[n],!0),t[n],!0):e[n]=t[n]}}),e},XM=function(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!i)throw new Error("Wrapper is not mounted");var d=u?r*Math.exp(e*n):r+e*n,h=rh(_r(d,3),a,o,c,!1);return h};function ZM(t,e,n,r,i){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=XM(t,e,n),g=fx(t,p,h,f);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");Ho(t,g,r,i)}function YM(t,e,n,r){var i=t.setup,s=t.wrapperComponent,o=i.limitToBounds,a=KM(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=hx(t,a.scale),f=kg(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(r==null||r(),Ho(t,p,e,n))}}function wW(t,e,n,r){var i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*r.scale,l=s.y*r.scale;return{x:(i.x-o.x+a)/r.scale,y:(i.y-o.y+l)/r.scale}}function bW(t,e,n){var r=t.wrapperComponent,i=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!r||!i)return s;var c=r.getBoundingClientRect(),d=e.getBoundingClientRect(),h=wW(e,r,i,s),f=h.x,p=h.y,g=d.width/s.scale,b=d.height/s.scale,m=r.offsetWidth/g,v=r.offsetHeight/b,w=rh(n||Math.min(m,v),l,u,0,!1),S=(c.width-g*w)/2,C=(c.height-b*w)/2,E=(c.left-f)*w+S,$=(c.top-p)*w+C,A=hx(t,w),O=kg(E,$,A,a,0,0,r),_=O.x,T=O.y;return{positionX:_,positionY:T,scale:w}}var xW=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),ZM(t,1,e,n,r)}},SW=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),ZM(t,-1,e,n,r)}},kW=function(t){return function(e,n,r,i,s){i===void 0&&(i=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?u:r};Ho(t,f,i,s)}}},CW=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),YM(t,e,n)}},EW=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=JM(e||i.scale,s,o);Ho(t,a,n,r)}}},AW=function(t){return function(e,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),Ii(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=bW(t,o,n);Ho(t,a,r,i)}}},$w=function(t){return{instance:t,zoomIn:xW(t),zoomOut:SW(t),setTransform:kW(t),resetTransform:CW(t),centerView:EW(t),zoomToElement:AW(t)}},PW=function(t){return{instance:t,state:t.transformState}},it=function(t){var e={};return Object.assign(e,PW(t)),Object.assign(e,$w(t)),e},sy=!1;function oy(){try{var t={get passive(){return sy=!0,!1}};return t}catch{return sy=!1,sy}}var Eg=function(t,e){var n=t.tagName.toUpperCase(),r=e.find(function(s){return s.toUpperCase()===n});if(r)return!0;var i=e.find(function(s){return t.classList.contains(s)});return!!i},Ow=function(t){t&&clearTimeout(t)},NW=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},JM=function(t,e,n){var r=n.offsetWidth*t,i=n.offsetHeight*t,s=(e.offsetWidth-r)/2,o=(e.offsetHeight-i)/2;return{scale:t,positionX:s,positionY:o}};function $W(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var OW=function(t,e){var n=t.setup.wheel,r=n.disabled,i=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!r&&u;if(!c||i&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Eg(u,o);return!d},TW=function(t){return t?t.deltaY<0?1:-1:0};function MW(t,e){var n=TW(t),r=VH(e,n);return r}function qM(t,e,n){var r=e.getBoundingClientRect(),i=0,s=0;if("clientX"in t)i=(t.clientX-r.left)/n,s=(t.clientY-r.top)/n;else{var o=t.touches[0];i=(o.clientX-r.left)/n,s=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:i,y:s}}var _W=function(t,e,n,r,i){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(i)return p;var g=r?!1:!f,b=rh(_r(p,3),u,l,h,g&&!d);return b},RW=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,i=t.setup,s=i.maxScale,o=i.minScale;return n?r<s||r>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},DW=function(t,e){var n=t.setup.pinch,r=n.disabled,i=n.excluded,s=t.isInitialized,o=e.target,a=s&&!r&&o;if(!a)return!1;var l=Eg(o,i);return!l},IW=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,i=n&&!e&&r;return!!i},LW=function(t,e,n){var r=n.getBoundingClientRect(),i=t.touches,s=_r(i[0].clientX-r.left,5),o=_r(i[0].clientY-r.top,5),a=_r(i[1].clientX-r.left,5),l=_r(i[1].clientY-r.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},QM=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},BW=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,i=t.setup,s=i.maxScale,o=i.minScale,a=i.zoomAnimation,l=i.disablePadding,u=a.size,c=a.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/r,h=d*n;return rh(_r(h,2),o,s,u,!c&&!l)},zW=160,jW=100,FW=function(t,e){var n=t.props,r=n.onWheelStart,i=n.onZoomStart;t.wheelStopEventTimer||(Ii(t),wt(it(t),e,r),wt(it(t),e,i))},UW=function(t,e){var n=t.props,r=n.onWheel,i=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,g=d.size,b=d.disabled,m=h.step,v=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=MW(e,null),S=p?v*Math.abs(e.deltaY):m,C=_W(t,w,S,!e.ctrlKey);if(l!==C){var E=hu(t,C),$=qM(e,s,l),A=b||g===0||c||f,O=u&&A,_=Cg(t,$.x,$.y,C,E,O),T=_.x,z=_.y;t.previousWheelEvent=e,t.setTransformState(C,T,z),wt(it(t),e,r),wt(it(t),e,i)}},VW=function(t,e){var n=t.props,r=n.onWheelStop,i=n.onZoomStop;Ow(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(GM(t,e.x,e.y),t.wheelAnimationTimer=null)},jW);var s=RW(t,e);s&&(Ow(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,wt(it(t),e,r),wt(it(t),e,i))},zW))},HW=function(t,e){var n=QM(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,Ii(t)},WW=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,i=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,u=l.disabled,c=l.size;if(!(r===null||!n)){var d=LW(e,i,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var h=QM(e),f=BW(t,h);if(f!==i){var p=hu(t,f),g=u||c===0||a,b=o&&g,m=Cg(t,d.x,d.y,f,p,b),v=m.x,w=m.y;t.pinchMidpoint=d,t.lastDistance=h,t.setTransformState(f,v,w)}}}},GW=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,GM(t,e==null?void 0:e.x,e==null?void 0:e.y)},e_=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;Ow(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,wt(it(t),e,n)},r)},KW=function(t,e){var n=t.props,r=n.onZoomStart,i=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;wt(it(t),e,r),YM(t,o,a,function(){return wt(it(t),e,i)}),e_(t,e)};function XW(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,i=t.transformState,s=t.contentComponent,o=i.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,g=c.animationType;if(!d&&!r){if(h==="reset")return KW(t,e);if(!s)return console.error("No ContentComponent found");var b=h==="zoomOut"?-1:1,m=XM(t,b,f);if(o!==m){wt(it(t),e,l);var v=qM(e,s,o),w=fx(t,m,v.x,v.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");wt(it(t),e,u),Ho(t,w,p,g),e_(t,e)}}}var ZW=function(t,e){var n=t.isInitialized,r=t.setup,i=t.wrapperComponent,s=r.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=i==null?void 0:i.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=Eg(l,a);return!d},YW=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){hu(n,n.transformState.scale),n.setup=CE(r)},this.initializeWindowEvents=function(){var r,i=oy(),s=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,i),o==null||o.addEventListener("mousemove",n.onPanning,i),o==null||o.addEventListener("mouseup",n.onPanningStop,i),s==null||s.addEventListener("mouseleave",n.clearPanning,i),o==null||o.addEventListener("keyup",n.setKeyUnPressed,i),o==null||o.addEventListener("keydown",n.setKeyPressed,i)},this.cleanupWindowEvents=function(){var r,i,s=oy(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),Ii(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=oy();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r){var i=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(it(n))}),i&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(it(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(r))},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var s=OW(n,r);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(FW(n,r),UW(n,r),VW(n,r))}}},this.onPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=vE(n,r);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),Ii(n),xE(n,r),wt(it(n),r,s))}}},this.onPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(!i){var o=wE(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),SE(n,r.clientX,r.clientY),wt(it(n),r,s))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(vW(n),wt(it(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!i){var l=DW(n,r);l&&(HW(n,r),Ii(n),wt(it(n),r,o),wt(it(n),r,a))}},this.onPinch=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!i){var l=IW(n);l&&(r.preventDefault(),r.stopPropagation(),WW(n,r),wt(it(n),r,o),wt(it(n),r,a))}},this.onPinchStop=function(r){var i=n.props,s=i.onPinchingStop,o=i.onZoomStop;n.pinchStartScale&&(GW(n),wt(it(n),r,s),wt(it(n),r,o))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=vE(n,r);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&r.touches.length===1)n.onDoubleClick(r);else{n.lastTouch=+new Date,Ii(n);var l=r.touches,u=l.length===1,c=l.length===2;u&&(Ii(n),xE(n,r),wt(it(n),r,s)),c&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var o=wE(n);if(!o)return;r.preventDefault(),r.stopPropagation();var a=r.touches[0];SE(n,a.clientX,a.clientY),wt(it(n),r,s)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var s=ZW(n,r);s&&XW(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,s){var o=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(s)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=s,n.applyTransformation();var a=it(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),wt(a,{scale:r,positionX:i,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=JM(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,s){return n.props.customTransform?n.props.customTransform(r,i,s):NW(r,i,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,s=r.positionX,o=r.positionY,a=n.handleTransformStyles(s,o,i);n.contentComponent.style.transform=a}},this.getContext=function(){return it(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,hu(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(i),n.initializeWindowEvents(),n.isInitialized=!0;var s=it(n);wt(s,void 0,n.props.onInit)},this.props=e,this.setup=CE(this.props),this.transformState=KM(this.props)}return t}(),px=de.createContext(null),JW=function(t,e){return typeof t=="function"?t(e):t},qW=de.forwardRef(function(t,e){var n=y.useRef(new YW(t)).current,r=JW(t.children,$w(n));return y.useImperativeHandle(e,function(){return $w(n)},[n]),y.useEffect(function(){n.update(t)},[n,t]),de.createElement(px.Provider,{value:n},r)});de.forwardRef(function(t,e){var n=y.useRef(null),r=y.useContext(px);return y.useEffect(function(){return r.onChange(function(i){if(n.current){var s=0,o=0;n.current.style.transform=r.handleTransformStyles(s,o,1/i.instance.transformState.scale)}})},[r]),de.createElement("div",So({},t,{ref:$W([n,e])}))});function QW(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var eG=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,EE={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};QW(eG);var tG=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,i=t.contentClass,s=i===void 0?"":i,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=y.useContext(px).init,f=y.useRef(null),p=y.useRef(null);return y.useEffect(function(){var g=f.current,b=p.current;g!==null&&b!==null&&h&&h(g,b)},[]),de.createElement("div",So({},u,{ref:f,className:"react-transform-wrapper ".concat(EE.wrapper," ").concat(r),style:o}),de.createElement("div",So({},d,{ref:p,className:"react-transform-component ".concat(EE.content," ").concat(s),style:a}),e))};function nG({wrapperRef:t}){const e=yt();return x.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[x.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:x.jsx("span",{className:"icon-[lucide--zoom-in] h-4 w-4"})}),x.jsx("hr",{className:"border-stone-600"}),x.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:x.jsx("span",{className:"icon-[lucide--zoom-out] h-4 w-4"})})]})}function rG(){const t=yt();return x.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:x.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg font-bold text-white",children:t("computer.chip-select.name")})})}function iG(){const{devices:t}=Hr(),e=["M 380 420 H 800","M 780 420 V 805","M 450 805 H 900","M 583 805 V 875"].join(" "),n=["M 380 440 H 800","M 790 440 V 815","M 450 815 H 900","M 573 815 V 875"].join(" "),r="M 750 545 H 860 V 460";return x.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full",children:[x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),x.jsx(Dt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:e,style:tt("bus.rd")}),x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),x.jsx(Dt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:tt("bus.wr")}),x.jsx(Kt,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),x.jsx(Dt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:tt("bus.mem")}),x.jsx(Kt,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),x.jsx(Kt,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&x.jsx(Kt,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&x.jsx(Kt,{springs:"bus.handshake",d:"M 635 595 V 730 H 900"}),x.jsx(Kt,{springs:"bus.intr",d:"M 110 700 V 470"}),x.jsx(Kt,{springs:"bus.inta",d:"M 160 470 V 700"}),x.jsx(Kt,{springs:"bus.int0",d:"M 145 950 V 900"}),x.jsx(Kt,{springs:"bus.int1",d:"M 500 955 H 400 V 900"}),t.preset==="pio-switches-and-leds"&&x.jsxs(x.Fragment,{children:[x.jsx(Kt,{springs:"bus.switches->pio",d:"M 1300 760 H 1120"}),x.jsx(Kt,{springs:"bus.pio->leds",d:"M 1120 850 H 1300"})]}),t.preset==="pio-printer"&&x.jsxs(x.Fragment,{children:[x.jsx(Kt,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),x.jsx(Kt,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),x.jsx(Kt,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]}),t.preset==="handshake"&&x.jsxs(x.Fragment,{children:[x.jsx(Kt,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),x.jsx(Kt,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),x.jsx(Kt,{springs:"bus.printer.data",d:"M 1120 837 H 1250"}),x.jsx(Kt,{springs:"bus.int2",d:"M 930 866 V 1050 H 300 V 900"})]})]})}function Kt({d:t,springs:e}){return x.jsxs(x.Fragment,{children:[x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),x.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),x.jsx(Dt.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:tt(e)})]})}function sG(){const t=yt(),{devices:e}=Hr();return x.jsxs(x.Fragment,{children:[x.jsx(Qn,{className:"left-[384px] top-[403px]",children:"rd"}),x.jsx(Qn,{className:"left-[384px] top-[423px]",children:"wr"}),x.jsx(Qn,{className:"left-[384px] top-[443px]",children:"io/m"}),x.jsx(Qn,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")}),x.jsx(Qn,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),x.jsx(Qn,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&x.jsx(Qn,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&x.jsx(Qn,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.handshake")}),x.jsx(Qn,{className:"left-[75px] top-[478px]",children:"intr"}),x.jsx(Qn,{className:"left-[125px] top-[478px]",children:"inta"}),e.printer&&x.jsxs(x.Fragment,{children:[x.jsx(Qn,{className:"left-[1260px] top-[758px]",children:"strobe"}),x.jsx(Qn,{className:"left-[1260px] top-[773px]",children:"busy"}),x.jsx(Qn,{className:"left-[1260px] top-[828px]",children:"data"})]})]})}function Qn({className:t,children:e}){return x.jsx("span",{className:Ue("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function oG(){const t=["M 699 349 H 800","M 725 349 V 770","M 450 770 H 900","M 618 770 V 875"].join(" "),e=["M 687 249 H 800","M 765 249 V 790","M 450 790 H 900","M 598 790 V 875"].join(" ");return x.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] h-full w-full",children:[x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),x.jsx(Dt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:tt("bus.data")}),x.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:t}),x.jsx(Dt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:t,style:tt("bus.address")})]})}function aG(){return x.jsxs(x.Fragment,{children:[x.jsx(oG,{}),x.jsx(iG,{}),x.jsx(sG,{}),x.jsx(rG,{})]})}function lG(){const t=tt("clock.angle");return x.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:x.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[x.jsx("circle",{cx:"12",cy:"12",r:"10"}),x.jsx(Dt.line,{x1:t.to(e=>12+6*Math.sin(e*Math.PI/180)),y1:t.to(e=>12-6*Math.cos(e*Math.PI/180)),x2:12,y2:12})]})})}const t_="Popover",[n_,uJ]=Xi(t_,[Pu]),mx=Pu(),[uG,Tu]=n_(t_),cG=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=mx(e),l=y.useRef(null),[u,c]=y.useState(!1),[d=!1,h]=Ao({prop:r,defaultProp:i,onChange:s});return y.createElement(t1,a,y.createElement(uG,{scope:e,contentId:Na(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:y.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:u,onCustomAnchorAdd:y.useCallback(()=>c(!0),[]),onCustomAnchorRemove:y.useCallback(()=>c(!1),[]),modal:o},n))},dG="PopoverTrigger",hG=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Tu(dG,n),s=mx(n),o=Qe(e,i.triggerRef),a=y.createElement(Je.button,le({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":s_(i.open)},r,{ref:o,onClick:Ce(t.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:y.createElement(n1,le({asChild:!0},s),a)}),r_="PopoverPortal",[fG,pG]=n_(r_,{forceMount:void 0}),mG=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Tu(r_,e);return y.createElement(fG,{scope:e,forceMount:n},y.createElement(Uo,{present:n||s.open},y.createElement(i1,{asChild:!0,container:i},r)))},_d="PopoverContent",gG=y.forwardRef((t,e)=>{const n=pG(_d,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Tu(_d,t.__scopePopover);return y.createElement(Uo,{present:r||s.open},s.modal?y.createElement(yG,le({},i,{ref:e})):y.createElement(vG,le({},i,{ref:e})))}),yG=y.forwardRef((t,e)=>{const n=Tu(_d,t.__scopePopover),r=y.useRef(null),i=Qe(e,r),s=y.useRef(!1);return y.useEffect(()=>{const o=r.current;if(o)return s1(o)},[]),y.createElement(o1,{as:Pa,allowPinchZoom:!0},y.createElement(i_,le({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:Ce(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,u=a.button===2||l;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ce(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})))}),vG=y.forwardRef((t,e)=>{const n=Tu(_d,t.__scopePopover),r=y.useRef(!1),i=y.useRef(!1);return y.createElement(i_,le({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),i_=y.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=t,h=Tu(_d,n),f=mx(n);return Zb(),y.createElement(Yb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},y.createElement(Xb,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1)},y.createElement(r1,le({"data-state":s_(h.open),role:"dialog",id:h.contentId},f,d,{ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function s_(t){return t?"open":"closed"}const wG=cG,bG=hG,xG=mG,o_=gG,a_=wG,l_=bG,gx=y.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>x.jsx(xG,{children:x.jsx(o_,{ref:i,align:e,sideOffset:n,className:Ue("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...r})}));gx.displayName=o_.displayName;function pr({name:t,title:e,valueAtom:n,springs:r,emphasis:i=!1,className:s}){const o=yt(),a=Mn(n),l=a.low,u=a.is16bits()?a.high:null;return x.jsxs(a_,{children:[x.jsx(l_,{asChild:!0,children:x.jsxs(Dt.button,{title:e,className:Ue("flex w-min cursor-pointer items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",i?"border-mantis-400 text-lg":"border-stone-600 text-base",s),style:tt(r),children:[x.jsx("span",{className:"mr-2 font-bold",children:t}),u&&x.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:u.toString("hex")}),x.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:l.toString("hex")})]})}),x.jsxs(gx,{className:"w-60",children:[x.jsx("p",{className:"px-4 py-2 font-medium text-white",children:e}),x.jsx("hr",{className:"border-stone-600"}),x.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(c=>x.jsxs("li",{children:[x.jsx("b",{className:"font-medium",children:o(`generics.byte-representation.${c}`)}),":"," ",x.jsx("span",{className:"font-mono text-mantis-400",children:a.toString(c)})]},c))})]})]})}function SG(){const t=Mn(ft.FLAGS),e=Mn(vT),n=t.bit(0),r=t.bit(6),i=t.bit(7),s=t.bit(9),o=t.bit(11);return x.jsxs(x.Fragment,{children:[x.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[x.jsx(Dt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 173 85 H 220",pathLength:1,strokeDasharray:1,style:tt("cpu.alu.operands")}),x.jsx(Dt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 182 145 H 220",pathLength:1,strokeDasharray:1,style:tt("cpu.alu.operands")}),x.jsx(Dt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:tt("cpu.alu.results")}),x.jsx(Dt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:tt("cpu.alu.results")}),x.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),x.jsx(Dt.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:tt("cpu.alu.cog").rot.to(a=>`rotate(${a*60}deg)`)}}),x.jsx(Dt.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:tt("cpu.alu.operation"),children:e}),x.jsxs(Dt.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:tt("cpu.FLAGS"),children:[x.jsx("span",{className:Ue("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),x.jsx("span",{className:Ue("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"ZF"}),x.jsx("span",{className:Ue("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"SF"}),x.jsx("span",{className:Ue("rounded p-1 font-light",s?"bg-mantis-400":"bg-stone-900"),children:"IF"}),x.jsx("span",{className:Ue("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"OF"})]})]})}function kG(){const t=yt(),{status:e}=Hr(),n=Mn(Ei),r=y.useMemo(()=>{if(!("metadata"in n)||n.metadata.operands.length===0)return"";if(n.phase==="fetching-operands"){let s=" __";for(let o=1;o<n.metadata.operands.length;o++)s+=", __";return s}else return" "+n.metadata.operands.join(", ")},[n]),i=y.useMemo(()=>e.type==="running"&&e.waitingForInput?"waiting-for-input":e.type==="stopped"?e.error?"stopped-error":"stopped":n.phase==="stopped"&&n.error?"stopped-error":n.phase,[e,n]);return x.jsxs(x.Fragment,{children:[x.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:x.jsx(Dt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:tt("cpu.decoder.path")})}),x.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:x.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs font-semibold tracking-wide text-white",children:t("computer.cpu.control-unit")})}),x.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[x.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[x.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),x.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:x.jsx(Dt.div,{className:"h-full bg-mantis-400",style:{width:tt("cpu.decoder.progress.progress").to(s=>`${s*100}%`),opacity:tt("cpu.decoder.progress.opacity")}})})]}),x.jsx("span",{className:Ue("mt-4 w-48 rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",i==="stopped-error"?"bg-red-500":i==="waiting-for-input"?"bg-amber-600":i==="int6"||i==="int7"?"bg-blue-600":"bg-stone-900"),children:t(`computer.cpu.status.${i}`)}),x.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:x.jsx("p",{className:"text-center font-mono",children:!("metadata"in n)||n.phase==="fetching"?x.jsx("span",{className:"font-bold italic text-stone-400",children:"???"}):x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"font-bold text-mantis-400",children:n.metadata.name}),x.jsx("span",{className:"text-white",children:r})]})})})]})]})}function CG(){const t=yt();return x.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:t("computer.cpu.name")}),x.jsx(SF,{}),x.jsx(eV,{}),x.jsx(Bn,{name:"left",className:"left-[60px] top-[70px]"}),x.jsx(Bn,{name:"right",className:"left-[60px] top-[130px]"}),x.jsx(Bn,{name:"result",className:"left-[300px] top-[100px]"}),x.jsx(SG,{}),x.jsx(Bn,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),x.jsx(Bn,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),x.jsx(Bn,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),x.jsx(Bn,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),x.jsx(Bn,{name:"id",className:"left-[520px] top-[190px]"}),x.jsx(Bn,{name:"MBR",className:"right-[-38px] top-[233px]"}),x.jsx(Bn,{name:"IR",className:"left-[171px] top-[270px]"}),x.jsx(kG,{}),x.jsx(Bn,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),x.jsx(Bn,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),x.jsx(Bn,{name:"ri",className:"left-[450px] top-[372px]"}),x.jsx(Bn,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function Bn({name:t,emphasis:e,className:n}){const r=yt();return x.jsx(pr,{name:t,valueAtom:ft[t],springs:`cpu.${t}`,emphasis:e,title:r("computer.cpu.register",t),className:Ue("absolute",n)})}const EG="_pushable_1q0ek_2",AG="_front_1q0ek_15",PG="_shadow_1q0ek_20",NG="_edge_1q0ek_52",tf={pushable:EG,front:AG,shadow:PG,edge:NG};function $G(){const t=yt(),{status:e,dispatch:n}=Hr();return Ac("F10",r=>{r.preventDefault(),n("f10.press")},void 0,[n]),x.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:x.jsxs("button",{className:tf.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[x.jsx("div",{className:tf.shadow}),x.jsx("div",{className:tf.edge}),x.jsx("span",{className:tf.front,children:t("computer.f10")})]})})}function OG(){const t=yt(),{devices:e}=Hr();return e.handshake?x.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.handshake.name")}),x.jsx(pr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:G1,springs:"handshake.STATE",className:"mx-auto my-4"}),x.jsx("hr",{className:"border-stone-600"}),x.jsx(pr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:W1,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var u_={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.6.53 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,r){t.exports=r(y)})(HR,function(n){return function(){var r={689:function(a){a.exports=function(){var l={d:function(H,I){for(var G in I)l.o(I,G)&&!l.o(H,G)&&Object.defineProperty(H,G,{enumerable:!0,get:I[G]})},o:function(H,I){return Object.prototype.hasOwnProperty.call(H,I)},r:function(H){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})}},u={};function c(H){return function(I){if(Array.isArray(I))return h(I)}(H)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(H)||d(H)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(H,I){if(H){if(typeof H=="string")return h(H,I);var G=Object.prototype.toString.call(H).slice(8,-1);return G==="Object"&&H.constructor&&(G=H.constructor.name),G==="Map"||G==="Set"?Array.from(H):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?h(H,I):void 0}}function h(H,I){(I==null||I>H.length)&&(I=H.length);for(var G=0,k=new Array(I);G<I;G++)k[G]=H[G];return k}function f(H){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},f(H)}function p(H,I){for(var G=0;G<I.length;G++){var k=I[G];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(H,b(k.key),k)}}function g(H,I,G){return(I=b(I))in H?Object.defineProperty(H,I,{value:G,enumerable:!0,configurable:!0,writable:!0}):H[I]=G,H}function b(H){var I=function(G,k){if(f(G)!=="object"||G===null)return G;var N=G[Symbol.toPrimitive];if(N!==void 0){var D=N.call(G,k||"default");if(f(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(G)}(H,"string");return f(I)==="symbol"?I:String(I)}l.r(u),l.d(u,{SimpleKeyboard:function(){return ne},default:function(){return me}});var m=function(){function H(N){var D=N.getOptions,R=N.getCaretPosition,F=N.getCaretPositionEnd,X=N.dispatch;(function(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,H),g(this,"getOptions",void 0),g(this,"getCaretPosition",void 0),g(this,"getCaretPositionEnd",void 0),g(this,"dispatch",void 0),g(this,"maxLengthReached",void 0),g(this,"isStandardButton",function(W){return W&&!(W[0]==="{"&&W[W.length-1]==="}")}),this.getOptions=D,this.getCaretPosition=R,this.getCaretPositionEnd=F,this.dispatch=X,H.bindMethods(H,this)}var I,G,k;return I=H,G=[{key:"getButtonType",value:function(N){return N.includes("{")&&N.includes("}")&&N!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(N){var D=this.getButtonType(N),R=N.replace("{","").replace("}",""),F="";return D!=="standardBtn"&&(F=" hg-button-".concat(R)),"hg-".concat(D).concat(F)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(N,D){return(D=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),D):D||this.getDefaultDiplay())[N]||N}},{key:"getUpdatedInput",value:function(N,D,R){var F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,X=arguments.length>4&&arguments[4]!==void 0&&arguments[4],W=this.getOptions(),Y=[R,F,X],ee=D;return(N==="{bksp}"||N==="{backspace}")&&ee.length>0?ee=this.removeAt.apply(this,[ee].concat(Y)):(N==="{delete}"||N==="{forwarddelete}")&&ee.length>0?ee=this.removeForwardsAt.apply(this,[ee].concat(Y)):N==="{space}"?ee=this.addStringAt.apply(this,[ee," "].concat(Y)):N!=="{tab}"||typeof W.tabCharOnTab=="boolean"&&W.tabCharOnTab===!1?N!=="{enter}"&&N!=="{numpadenter}"||!W.newLineOnEnter?N.includes("numpad")&&Number.isInteger(Number(N[N.length-2]))?ee=this.addStringAt.apply(this,[ee,N[N.length-2]].concat(Y)):N==="{numpaddivide}"?ee=this.addStringAt.apply(this,[ee,"/"].concat(Y)):N==="{numpadmultiply}"?ee=this.addStringAt.apply(this,[ee,"*"].concat(Y)):N==="{numpadsubtract}"?ee=this.addStringAt.apply(this,[ee,"-"].concat(Y)):N==="{numpadadd}"?ee=this.addStringAt.apply(this,[ee,"+"].concat(Y)):N==="{numpaddecimal}"?ee=this.addStringAt.apply(this,[ee,"."].concat(Y)):N==="{"||N==="}"?ee=this.addStringAt.apply(this,[ee,N].concat(Y)):N.includes("{")||N.includes("}")||(ee=this.addStringAt.apply(this,[ee,N].concat(Y))):ee=this.addStringAt.apply(this,[ee,`
`].concat(Y)):ee=this.addStringAt.apply(this,[ee,"	"].concat(Y)),W.debug&&console.log("Input will be: "+ee),ee}},{key:"updateCaretPos",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],R=this.updateCaretPosAction(N,D);this.dispatch(function(F){F.setCaretPosition(R)})}},{key:"updateCaretPosAction",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],R=this.getOptions(),F=this.getCaretPosition();return F!=null&&(D?F>0&&(F-=N):F+=N),R.debug&&console.log("Caret at:",F),F}},{key:"addStringAt",value:function(N,D){var R,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:N.length,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:N.length,W=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return F||F===0?(R=[N.slice(0,F),D,N.slice(X)].join(""),this.isMaxLengthReached()||W&&this.updateCaretPos(D.length)):R=N+D,R}},{key:"removeAt",value:function(N){var D,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:N.length,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:N.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(R===0&&F===0)return N;if(R===F){var W=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;R&&R>=0?N.substring(R-2,R).match(W)?(D=N.substr(0,R-2)+N.substr(R),X&&this.updateCaretPos(2,!0)):(D=N.substr(0,R-1)+N.substr(R),X&&this.updateCaretPos(1,!0)):N.slice(-2).match(W)?(D=N.slice(0,-2),X&&this.updateCaretPos(2,!0)):(D=N.slice(0,-1),X&&this.updateCaretPos(1,!0))}else D=N.slice(0,R)+N.slice(F),X&&this.dispatch(function(Y){Y.setCaretPosition(R)});return D}},{key:"removeForwardsAt",value:function(N){var D,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:N.length,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:N.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return N!=null&&N.length&&R!==null?(R===F?D=N.substring(R,R+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?N.substr(0,R)+N.substr(R+2):N.substr(0,R)+N.substr(R+1):(D=N.slice(0,R)+N.slice(F),X&&this.dispatch(function(W){W.setCaretPosition(R)})),D):N}},{key:"handleMaxLength",value:function(N,D){var R=this.getOptions(),F=R.maxLength,X=N[R.inputName||"default"],W=D.length-1>=F;if(D.length<=X.length)return!1;if(Number.isInteger(F))return R.debug&&console.log("maxLength (num) reached:",W),W?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(f(F)==="object"){var Y=D.length-1>=F[R.inputName||"default"];return R.debug&&console.log("maxLength (obj) reached:",Y),Y?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(N){return N?N.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(D,R){return R.length?D+R[0].toUpperCase()+R.slice(1):D}):""}},{key:"chunkArray",value:function(N,D){return c(Array(Math.ceil(N.length/D))).map(function(R,F){return N.slice(D*F,D+D*F)})}},{key:"escapeRegex",value:function(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(N,D){var R=N,F=D.indexOf("‫");return F<N&&F!=-1&&R--,D.indexOf("‬")<N&&F!=-1&&R--,R<0?0:R}}],k=[{key:"bindMethods",value:function(N,D){var R,F=function(W,Y){var ee=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!ee){if(Array.isArray(W)||(ee=d(W))||Y&&W&&typeof W.length=="number"){ee&&(W=ee);var Oe=0,he=function(){};return{s:he,n:function(){return Oe>=W.length?{done:!0}:{done:!1,value:W[Oe++]}},e:function(St){throw St},f:he}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te,De=!0,ve=!1;return{s:function(){ee=ee.call(W)},n:function(){var St=ee.next();return De=St.done,St},e:function(St){ve=!0,Te=St},f:function(){try{De||ee.return==null||ee.return()}finally{if(ve)throw Te}}}}(Object.getOwnPropertyNames(N.prototype));try{for(F.s();!(R=F.n()).done;){var X=R.value;X==="constructor"||X==="bindMethods"||(D[X]=D[X].bind(D))}}catch(W){F.e(W)}finally{F.f()}}}],G&&p(I.prototype,G),k&&p(I,k),Object.defineProperty(I,"prototype",{writable:!1}),H}();g(m,"noop",function(){});var v=m;function w(H){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},w(H)}function S(H,I){for(var G=0;G<I.length;G++){var k=I[G];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(H,E(k.key),k)}}function C(H,I,G){return(I=E(I))in H?Object.defineProperty(H,I,{value:G,enumerable:!0,configurable:!0,writable:!0}):H[I]=G,H}function E(H){var I=function(G,k){if(w(G)!=="object"||G===null)return G;var N=G[Symbol.toPrimitive];if(N!==void 0){var D=N.call(G,k||"default");if(w(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(G)}(H,"string");return w(I)==="symbol"?I:String(I)}var $=function(){function H(k){var N=this,D=k.dispatch,R=k.getOptions;(function(F,X){if(!(F instanceof X))throw new TypeError("Cannot call a class as a function")})(this,H),C(this,"getOptions",void 0),C(this,"dispatch",void 0),C(this,"isMofifierKey",function(F){return F.altKey||F.ctrlKey||F.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(F.code||F.key||N.keyCodeToKey(F==null?void 0:F.keyCode))}),this.dispatch=D,this.getOptions=R,v.bindMethods(H,this)}var I,G;return I=H,(G=[{key:"handleHighlightKeyDown",value:function(k){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(R){var F,X,W=R.getButtonElement(D),Y=R.getButtonElement("{".concat(D,"}"));if(W)F=W,X=D;else{if(!Y)return;F=Y,X="{".concat(D,"}")}var ee,Oe=function(Te){Te.style.background=N.physicalKeyboardHighlightBgColor||"#dadce4",Te.style.color=N.physicalKeyboardHighlightTextColor||"black"};if(F)if(Array.isArray(F)){if(F.forEach(function(Te){return Oe(Te)}),N.physicalKeyboardHighlightPress)if(N.physicalKeyboardHighlightPressUsePointerEvents)(ee=F[0])===null||ee===void 0||ee.onpointerdown();else if(N.physicalKeyboardHighlightPressUseClick){var he;(he=F[0])===null||he===void 0||he.click()}else R.handleButtonClicked(X,k)}else Oe(F),N.physicalKeyboardHighlightPress&&(N.physicalKeyboardHighlightPressUsePointerEvents?F.onpointerdown():N.physicalKeyboardHighlightPressUseClick?F.click():R.handleButtonClicked(X,k))})}},{key:"handleHighlightKeyUp",value:function(k){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(R){var F,X=R.getButtonElement(D)||R.getButtonElement("{".concat(D,"}")),W=function(Y){Y.removeAttribute&&Y.removeAttribute("style")};X&&(Array.isArray(X)?(X.forEach(function(Y){return W(Y)}),N.physicalKeyboardHighlightPressUsePointerEvents&&((F=X[0])===null||F===void 0||F.onpointerup())):(W(X),N.physicalKeyboardHighlightPressUsePointerEvents&&X.onpointerup()))})}},{key:"getSimpleKeyboardLayoutKey",value:function(k){var N,D="",R=k.code||k.key||this.keyCodeToKey(k==null?void 0:k.keyCode);return(D=R!=null&&R.includes("Numpad")||R!=null&&R.includes("Shift")||R!=null&&R.includes("Space")||R!=null&&R.includes("Backspace")||R!=null&&R.includes("Control")||R!=null&&R.includes("Alt")||R!=null&&R.includes("Meta")?k.code||"":k.key||this.keyCodeToKey(k==null?void 0:k.keyCode)||"").length>1?(N=D)===null||N===void 0?void 0:N.toLowerCase():D}},{key:"keyCodeToKey",value:function(k){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[k]||""}}])&&S(I.prototype,G),Object.defineProperty(I,"prototype",{writable:!1}),H}();function A(H){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},A(H)}function O(H,I){for(var G=0;G<I.length;G++){var k=I[G];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(H,T(k.key),k)}}function _(H,I,G){return(I=T(I))in H?Object.defineProperty(H,I,{value:G,enumerable:!0,configurable:!0,writable:!0}):H[I]=G,H}function T(H){var I=function(G,k){if(A(G)!=="object"||G===null)return G;var N=G[Symbol.toPrimitive];if(N!==void 0){var D=N.call(G,k||"default");if(A(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(G)}(H,"string");return A(I)==="symbol"?I:String(I)}var z=function(){function H(k){var N=k.utilities,D=k.options;(function(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")})(this,H),_(this,"utilities",void 0),_(this,"options",void 0),_(this,"candidateBoxElement",void 0),_(this,"pageIndex",0),_(this,"pageSize",void 0),this.utilities=N,this.options=D,v.bindMethods(H,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var I,G;return I=H,G=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(k){var N=this,D=k.candidateValue,R=k.targetElement,F=k.onSelect;if(D&&D.length){var X=this.utilities.chunkArray(D.split(" "),this.pageSize);this.renderPage({candidateListPages:X,targetElement:R,pageIndex:this.pageIndex,nbPages:X.length,onItemSelected:function(W,Y){F(W,Y),N.destroy()}})}}},{key:"renderPage",value:function(k){var N,D=this,R=k.candidateListPages,F=k.targetElement,X=k.pageIndex,W=k.nbPages,Y=k.onItemSelected;(N=this.candidateBoxElement)===null||N===void 0||N.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var ee=document.createElement("ul");ee.className="hg-candidate-box-list",R[X].forEach(function(Ln){var Xo,vi=document.createElement("li"),Is=function(){var Ls=new(D.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Ls,"target",{value:vi}),Ls};vi.className="hg-candidate-box-list-item",vi.innerHTML=((Xo=D.options.display)===null||Xo===void 0?void 0:Xo[Ln])||Ln,D.options.useTouchEvents?vi.ontouchstart=function(Ls){return Y(Ln,Ls||Is())}:vi.onclick=function(){var Ls=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Is();return Y(Ln,Ls)},ee.appendChild(vi)});var Oe=X>0,he=document.createElement("div");he.classList.add("hg-candidate-box-prev"),Oe&&he.classList.add("hg-candidate-box-btn-active");var Te=function(){Oe&&D.renderPage({candidateListPages:R,targetElement:F,pageIndex:X-1,nbPages:W,onItemSelected:Y})};this.options.useTouchEvents?he.ontouchstart=Te:he.onclick=Te,this.candidateBoxElement.appendChild(he),this.candidateBoxElement.appendChild(ee);var De=X<W-1,ve=document.createElement("div");ve.classList.add("hg-candidate-box-next"),De&&ve.classList.add("hg-candidate-box-btn-active");var St=function(){De&&D.renderPage({candidateListPages:R,targetElement:F,pageIndex:X+1,nbPages:W,onItemSelected:Y})};this.options.useTouchEvents?ve.ontouchstart=St:ve.onclick=St,this.candidateBoxElement.appendChild(ve),F.prepend(this.candidateBoxElement)}}],G&&O(I.prototype,G),Object.defineProperty(I,"prototype",{writable:!1}),H}(),j=z;function B(H){return function(I){if(Array.isArray(I))return K(I)}(H)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(H)||function(I,G){if(I){if(typeof I=="string")return K(I,G);var k=Object.prototype.toString.call(I).slice(8,-1);return k==="Object"&&I.constructor&&(k=I.constructor.name),k==="Map"||k==="Set"?Array.from(I):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?K(I,G):void 0}}(H)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(H,I){(I==null||I>H.length)&&(I=H.length);for(var G=0,k=new Array(I);G<I;G++)k[G]=H[G];return k}function Z(H){return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},Z(H)}function Q(H,I){var G=Object.keys(H);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(H);I&&(k=k.filter(function(N){return Object.getOwnPropertyDescriptor(H,N).enumerable})),G.push.apply(G,k)}return G}function V(H,I){for(var G=0;G<I.length;G++){var k=I[G];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(H,U(k.key),k)}}function M(H,I,G){return(I=U(I))in H?Object.defineProperty(H,I,{value:G,enumerable:!0,configurable:!0,writable:!0}):H[I]=G,H}function U(H){var I=function(G,k){if(Z(G)!=="object"||G===null)return G;var N=G[Symbol.toPrimitive];if(N!==void 0){var D=N.call(G,k||"default");if(Z(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(G)}(H,"string");return Z(I)==="symbol"?I:String(I)}var J=function(){function H(k,N){var D=this;if(function(he,Te){if(!(he instanceof Te))throw new TypeError("Cannot call a class as a function")}(this,H),M(this,"input",void 0),M(this,"options",void 0),M(this,"utilities",void 0),M(this,"caretPosition",void 0),M(this,"caretPositionEnd",void 0),M(this,"keyboardDOM",void 0),M(this,"keyboardPluginClasses",void 0),M(this,"keyboardDOMClass",void 0),M(this,"buttonElements",void 0),M(this,"currentInstanceName",void 0),M(this,"allKeyboardInstances",void 0),M(this,"keyboardInstanceNames",void 0),M(this,"isFirstKeyboardInstance",void 0),M(this,"physicalKeyboard",void 0),M(this,"modules",void 0),M(this,"activeButtonClass",void 0),M(this,"holdInteractionTimeout",void 0),M(this,"holdTimeout",void 0),M(this,"isMouseHold",void 0),M(this,"initialized",void 0),M(this,"candidateBox",void 0),M(this,"keyboardRowsDOM",void 0),M(this,"defaultName","default"),M(this,"activeInputElement",null),M(this,"handleParams",function(he,Te){var De,ve,St;if(typeof he=="string")De=he.split(".").join(""),ve=document.querySelector(".".concat(De)),St=Te;else if(he instanceof HTMLDivElement){if(!he.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");De=he.className.split(" ")[0],ve=he,St=Te}else De="simple-keyboard",ve=document.querySelector(".".concat(De)),St=he;return{keyboardDOMClass:De,keyboardDOM:ve,options:St}}),M(this,"getOptions",function(){return D.options}),M(this,"getCaretPosition",function(){return D.caretPosition}),M(this,"getCaretPositionEnd",function(){return D.caretPositionEnd}),M(this,"registerModule",function(he,Te){D.modules[he]||(D.modules[he]={}),Te(D.modules[he])}),M(this,"getKeyboardClassString",function(){for(var he=arguments.length,Te=new Array(he),De=0;De<he;De++)Te[De]=arguments[De];return[D.keyboardDOMClass].concat(Te).filter(function(ve){return!!ve}).join(" ")}),typeof window<"u"){var R=this.handleParams(k,N),F=R.keyboardDOMClass,X=R.keyboardDOM,W=R.options,Y=W===void 0?{}:W;this.utilities=new v({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=X,this.options=function(he){for(var Te=1;Te<arguments.length;Te++){var De=arguments[Te]!=null?arguments[Te]:{};Te%2?Q(Object(De),!0).forEach(function(ve){M(he,ve,De[ve])}):Object.getOwnPropertyDescriptors?Object.defineProperties(he,Object.getOwnPropertyDescriptors(De)):Q(Object(De)).forEach(function(ve){Object.defineProperty(he,ve,Object.getOwnPropertyDescriptor(De,ve))})}return he}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Y),this.keyboardPluginClasses="",v.bindMethods(H,this);var ee=this.options.inputName,Oe=ee===void 0?this.defaultName:ee;if(this.input={},this.input[Oe]="",this.keyboardDOMClass=F,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new $({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new j({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(F,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var I,G;return I=H,G=[{key:"setCaretPosition",value:function(k){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k;this.caretPosition=k,this.caretPositionEnd=N}},{key:"getInputCandidates",value:function(k){var N=this,D=this.options,R=D.layoutCandidates,F=D.layoutCandidatesCaseSensitiveMatch;if(!R||Z(R)!=="object")return{};var X=Object.keys(R).filter(function(ee){var Oe=k.substring(0,N.getCaretPositionEnd()||0)||k,he=new RegExp("".concat(N.utilities.escapeRegex(ee),"$"),F?"g":"gi");return!!B(Oe.matchAll(he)).length});if(X.length>1){var W=X.sort(function(ee,Oe){return Oe.length-ee.length})[0];return{candidateKey:W,candidateValue:R[W]}}if(X.length){var Y=X[0];return{candidateKey:Y,candidateValue:R[Y]}}return{}}},{key:"showCandidatesBox",value:function(k,N,D){var R=this;this.candidateBox&&this.candidateBox.show({candidateValue:N,targetElement:D,onSelect:function(F,X){var W=R.options,Y=W.layoutCandidatesCaseSensitiveMatch,ee=W.disableCandidateNormalization,Oe=W.enableLayoutCandidatesKeyPress,he=F;ee||(he=F.normalize("NFD"));var Te=R.getInput(R.options.inputName,!0),De=R.getCaretPositionEnd()||0,ve=Te.substring(0,De||0)||Te,St=new RegExp("".concat(R.utilities.escapeRegex(k),"$"),Y?"g":"gi"),Ln=ve.replace(St,he),Xo=Te.replace(ve,Ln),vi=Ln.length-ve.length,Is=(De||Te.length)+vi;Is<0&&(Is=0),R.setInput(Xo,R.options.inputName,!0),R.setCaretPosition(Is),Oe&&typeof R.options.onKeyPress=="function"&&R.options.onKeyPress(F,X),typeof R.options.onChange=="function"&&R.options.onChange(R.getInput(R.options.inputName,!0),X),typeof R.options.onChangeAll=="function"&&R.options.onChangeAll(R.getAllInputs(),X)}})}},{key:"handleButtonClicked",value:function(k,N){var D=this.options,R=D.inputName,F=R===void 0?this.defaultName:R,X=D.debug;if(k!=="{//}"){this.input[F]||(this.input[F]="");var W=this.utilities.getUpdatedInput(k,this.input[F],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(k)&&this.activeInputElement&&this.input[F]&&this.input[F]===W&&this.caretPosition===0&&this.caretPositionEnd===W.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(k,N);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(k,N),this.input[F]!==W&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(W))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,W))return;var Y=this.utilities.getUpdatedInput(k,this.input[F],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(Y,this.options.inputName,!0),X&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),N==null?void 0:N.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),N),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),N),N!=null&&N.target&&this.options.enableLayoutCandidates){var ee,Oe=this.getInputCandidates(W),he=Oe.candidateKey,Te=Oe.candidateValue;he&&Te?this.showCandidatesBox(he,Te,this.keyboardDOM):(ee=this.candidateBox)===null||ee===void 0||ee.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),X&&console.log("Key pressed:",k)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(k){this.options.syncInstanceInputs?this.dispatch(function(N){N.isMouseHold=k}):this.isMouseHold=k}},{key:"handleButtonMouseDown",value:function(k,N){var D=this;N&&(this.options.preventMouseDownDefault&&N.preventDefault(),this.options.stopMouseDownPropagation&&N.stopPropagation(),N.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(D.getMouseHold()&&(!k.includes("{")&&!k.includes("}")||k==="{delete}"||k==="{backspace}"||k==="{bksp}"||k==="{space}"||k==="{tab}")||k==="{arrowright}"||k==="{arrowleft}"||k==="{arrowup}"||k==="{arrowdown}")&&(D.options.debug&&console.log("Button held:",k),D.handleButtonHold(k)),clearTimeout(D.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(k,N){var D=this;N&&(this.options.preventMouseUpDefault&&N.preventDefault&&N.preventDefault(),this.options.stopMouseUpPropagation&&N.stopPropagation&&N.stopPropagation(),!(N.target===this.keyboardDOM||N.target&&this.keyboardDOM.contains(N.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(N.target===this.candidateBox.candidateBoxElement||N.target&&this.candidateBox.candidateBoxElement.contains(N.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(R){R.classList.remove(D.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),k&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(k,N)}},{key:"handleKeyboardContainerMouseDown",value:function(k){this.options.preventMouseDownDefault&&k.preventDefault()}},{key:"handleButtonHold",value:function(k){var N=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){N.getMouseHold()?(N.handleButtonClicked(k),N.handleButtonHold(k)):clearTimeout(N.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var k=this;this.dispatch(function(N){N.replaceInput(k.input),N.setCaretPosition(k.caretPosition,k.caretPositionEnd)})}},{key:"clearInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[k]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,N=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!N&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[k].replace("‫","").replace("‬","")+"‬":this.input[k]}},{key:"getAllInputs",value:function(){var k=this,N={};return Object.keys(this.input).forEach(function(D){N[D]=k.getInput(D,!0)}),N}},{key:"setInput",value:function(k){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,D=arguments.length>2?arguments[2]:void 0;this.input[N]=k,!D&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(k){this.input=k}},{key:"setOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=this.changedOptions(k);this.options=Object.assign(this.options,k),N.length&&(this.options.debug&&console.log("changedOptions",N),this.onSetOptions(N),this.render())}},{key:"changedOptions",value:function(k){var N=this;return Object.keys(k).filter(function(D){return JSON.stringify(k[D])!==JSON.stringify(N.options[D])})}},{key:"onSetOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];k.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(k.includes("layoutCandidatesPageSize")||k.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new j({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(k){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(N){k(window.SimpleKeyboardInstances[N],N)})}},{key:"addButtonTheme",value:function(k,N){var D=this;N&&k&&(k.split(" ").forEach(function(R){N.split(" ").forEach(function(F){D.options.buttonTheme||(D.options.buttonTheme=[]);var X=!1;D.options.buttonTheme.map(function(W){if(W!=null&&W.class.split(" ").includes(F)){X=!0;var Y=W.buttons.split(" ");Y.includes(R)||(X=!0,Y.push(R),W.buttons=Y.join(" "))}return W}),X||D.options.buttonTheme.push({class:F,buttons:k})})}),this.render())}},{key:"removeButtonTheme",value:function(k,N){var D=this;if(!k&&!N)return this.options.buttonTheme=[],void this.render();k&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(k.split(" ").forEach(function(R){var F;(F=D.options)===null||F===void 0||(F=F.buttonTheme)===null||F===void 0||F.map(function(X,W){if(X&&N&&N.includes(X.class)||!N){var Y,ee,Oe=(Y=X)===null||Y===void 0?void 0:Y.buttons.split(" ").filter(function(he){return he!==R});X&&Oe!=null&&Oe.length?X.buttons=Oe.join(" "):((ee=D.options.buttonTheme)===null||ee===void 0||ee.splice(W,1),X=null)}return X})}),this.render())}},{key:"getButtonElement",value:function(k){var N,D=this.buttonElements[k];return D&&(N=D.length>1?D:D[0]),N}},{key:"inputPatternIsValid",value:function(k){var N,D=this.options.inputPattern;if((N=D instanceof RegExp?D:D[this.options.inputName||this.defaultName])&&k){var R=N.test(k);return this.options.debug&&console.log('inputPattern ("'.concat(N,'"): ').concat(R?"passed":"did not pass!")),R}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var k=this.options.physicalKeyboardHighlightPreventDefault,N=k!==void 0&&k;document.addEventListener("keyup",this.handleKeyUp,N),document.addEventListener("keydown",this.handleKeyDown,N),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(k){this.caretEventHandler(k),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(k)}},{key:"handleKeyDown",value:function(k){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(k)}},{key:"handleMouseUp",value:function(k){this.caretEventHandler(k)}},{key:"handleTouchEnd",value:function(k){this.caretEventHandler(k)}},{key:"handleSelect",value:function(k){this.caretEventHandler(k)}},{key:"handleSelectionChange",value:function(k){navigator.userAgent.includes("Firefox")||this.caretEventHandler(k)}},{key:"caretEventHandler",value:function(k){var N,D=this;k.target.tagName&&(N=k.target.tagName.toLowerCase()),this.dispatch(function(R){var F=k.target===R.keyboardDOM||k.target&&R.keyboardDOM.contains(k.target);if(D.options.syncInstanceInputs&&Array.isArray(k.path)&&(F=k.path.some(function(Y){var ee;return Y==null||(ee=Y.hasAttribute)===null||ee===void 0?void 0:ee.call(Y,"data-skInstance")})),(N==="textarea"||N==="input"&&["text","search","url","tel","password"].includes(k.target.type))&&!R.options.disableCaretPositioning){var X=k.target.selectionStart,W=k.target.selectionEnd;R.options.rtl&&(X=R.utilities.getRtlOffset(X,R.getInput()),W=R.utilities.getRtlOffset(W,R.getInput())),R.setCaretPosition(X,W),D.activeInputElement=k.target,R.options.debug&&console.log("Caret at: ",R.getCaretPosition(),R.getCaretPositionEnd(),k&&k.target.tagName.toLowerCase(),"(".concat(R.keyboardDOMClass,")"),k==null?void 0:k.type)}else!R.options.disableCaretPositioning&&F||(k==null?void 0:k.type)==="selectionchange"||(R.setCaretPosition(null),D.activeInputElement=null,R.options.debug&&console.log('Caret position reset due to "'.concat(k==null?void 0:k.type,'" event'),k))})}},{key:"recurseButtons",value:function(k){var N=this;k&&Object.keys(this.buttonElements).forEach(function(D){return N.buttonElements[D].forEach(k)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var k=this.options.physicalKeyboardHighlightPreventDefault,N=k!==void 0&&k;document.removeEventListener("keyup",this.handleKeyUp,N),document.removeEventListener("keydown",this.handleKeyDown,N),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(D){D&&(D.onpointerdown=null,D.onpointerup=null,D.onpointercancel=null,D.ontouchstart=null,D.ontouchend=null,D.ontouchcancel=null,D.onclick=null,D.onmousedown=null,D.onmouseup=null,D.remove(),D=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(k){var N=this.options.buttonTheme,D=[];return Array.isArray(N)&&N.forEach(function(R){if(R&&R.class&&typeof R.class=="string"&&R.buttons&&typeof R.buttons=="string"){var F=R.class.split(" ");R.buttons.split(" ").includes(k)&&(D=[].concat(B(D),B(F)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',R)}),D}},{key:"setDOMButtonAttributes",value:function(k,N){var D=this.options.buttonAttributes;Array.isArray(D)&&D.forEach(function(R){R.attribute&&typeof R.attribute=="string"&&R.value&&typeof R.value=="string"&&R.buttons&&typeof R.buttons=="string"?R.buttons.split(" ").includes(k)&&N(R.attribute,R.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',R)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(k){if(k.target.classList.contains("hg-button"))return k.preventDefault(),k.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var k=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(N){var D=new N(k);D.init&&D.init(k)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(k,N){return!!this.modules[k]&&this.modules[k][N]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(k,N,D,R){var F=this,X=Array.from(k.children),W=0;return X.length&&D.forEach(function(Y,ee){var Oe=R[ee];if(!(Oe&&Oe>Y))return!1;var he=Y-W,Te=Oe-W,De=document.createElement("div");De.className+="hg-button-container";var ve="".concat(F.options.layoutName,"-r").concat(N,"c").concat(ee);De.setAttribute("data-skUID",ve);var St=X.splice(he,Te-he+1);W=Te-he,St.forEach(function(Ln){return De.appendChild(Ln)}),X.splice(he,0,De),k.innerHTML="",X.forEach(function(Ln){return k.appendChild(Ln)}),F.options.debug&&console.log("rowDOMContainer",St,he,Te,W+1)}),k}},{key:"render",value:function(){var k=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var N="hg-layout-".concat(this.options.layoutName),D=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},R=this.options.useTouchEvents||!1,F=R?"hg-touch-events":"",X=this.options.useMouseEvents||!1,W=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,N,this.keyboardPluginClasses,F),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",D[this.options.layoutName||this.defaultName].forEach(function(Y,ee){var Oe=Y.split(" ");k.options.excludeFromLayout&&k.options.excludeFromLayout[k.options.layoutName||k.defaultName]&&(Oe=Oe.filter(function(ve){return k.options.excludeFromLayout&&!k.options.excludeFromLayout[k.options.layoutName||k.defaultName].includes(ve)}));var he=document.createElement("div");he.className+="hg-row";var Te=[],De=[];Oe.forEach(function(ve,St){var Ln,Xo=!W&&typeof ve=="string"&&ve.length>1&&ve.indexOf("[")===0,vi=!W&&typeof ve=="string"&&ve.length>1&&ve.indexOf("]")===ve.length-1;Xo&&(Te.push(St),ve=ve.replace(/\[/g,"")),vi&&(De.push(St),ve=ve.replace(/\]/g,""));var Is=k.utilities.getButtonClass(ve),Ls=k.utilities.getButtonDisplayName(ve,k.options.display,k.options.mergeDisplay),BR=k.options.useButtonTag?"button":"div",Qt=document.createElement(BR);Qt.className+="hg-button ".concat(Is),(Ln=Qt.classList).add.apply(Ln,B(k.getButtonThemeClasses(ve))),k.setDOMButtonAttributes(ve,function(Tt,jR){Qt.setAttribute(Tt,jR)}),k.activeButtonClass="hg-activeButton",!k.utilities.pointerEventsSupported()||R||X?R?(Qt.ontouchstart=function(Tt){k.handleButtonClicked(ve,Tt),k.handleButtonMouseDown(ve,Tt)},Qt.ontouchend=function(Tt){k.handleButtonMouseUp(ve,Tt)},Qt.ontouchcancel=function(Tt){k.handleButtonMouseUp(ve,Tt)}):(Qt.onclick=function(Tt){k.setMouseHold(!1),typeof k.options.onKeyReleased!="function"&&k.handleButtonClicked(ve,Tt)},Qt.onmousedown=function(Tt){typeof k.options.onKeyReleased!="function"||k.isMouseHold||k.handleButtonClicked(ve,Tt),k.handleButtonMouseDown(ve,Tt)},Qt.onmouseup=function(Tt){k.handleButtonMouseUp(ve,Tt)}):(Qt.onpointerdown=function(Tt){k.handleButtonClicked(ve,Tt),k.handleButtonMouseDown(ve,Tt)},Qt.onpointerup=function(Tt){k.handleButtonMouseUp(ve,Tt)},Qt.onpointercancel=function(Tt){k.handleButtonMouseUp(ve,Tt)}),Qt.setAttribute("data-skBtn",ve);var zR="".concat(k.options.layoutName,"-r").concat(ee,"b").concat(St);Qt.setAttribute("data-skBtnUID",zR);var Fx=document.createElement("span");Fx.innerHTML=Ls,Qt.appendChild(Fx),k.buttonElements[ve]||(k.buttonElements[ve]=[]),k.buttonElements[ve].push(Qt),he.appendChild(Qt)}),he=k.parseRowDOMContainers(he,ee,Te,De),k.keyboardRowsDOM.appendChild(he)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||R||X?R?(document.ontouchend=function(Y){return k.handleButtonMouseUp(void 0,Y)},document.ontouchcancel=function(Y){return k.handleButtonMouseUp(void 0,Y)},this.keyboardDOM.ontouchstart=function(Y){return k.handleKeyboardContainerMouseDown(Y)}):R||(document.onmouseup=function(Y){return k.handleButtonMouseUp(void 0,Y)},this.keyboardDOM.onmousedown=function(Y){return k.handleKeyboardContainerMouseDown(Y)}):(document.onpointerup=function(Y){return k.handleButtonMouseUp(void 0,Y)},this.keyboardDOM.onpointerdown=function(Y){return k.handleKeyboardContainerMouseDown(Y)}),this.onInit())}}],G&&V(I.prototype,G),Object.defineProperty(I,"prototype",{writable:!1}),H}(),ne=J,me=ne;return u}()},787:function(a){a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var u=i[a]={exports:{}};return r[a].call(u.exports,u,u.exports,s),u.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return g},default:function(){return b}});var a=s(787);function l(m){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},l(m)}function u(m,v){var w=Object.keys(m);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(m);v&&(S=S.filter(function(C){return Object.getOwnPropertyDescriptor(m,C).enumerable})),w.push.apply(w,S)}return w}function c(m){for(var v=1;v<arguments.length;v++){var w=arguments[v]!=null?arguments[v]:{};v%2?u(Object(w),!0).forEach(function(S){d(m,S,w[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(w)):u(Object(w)).forEach(function(S){Object.defineProperty(m,S,Object.getOwnPropertyDescriptor(w,S))})}return m}function d(m,v,w){return(v=function(S){var C=function(E,$){if(l(E)!=="object"||E===null)return E;var A=E[Symbol.toPrimitive];if(A!==void 0){var O=A.call(E,$||"default");if(l(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(E)}(S,"string");return l(C)==="symbol"?C:String(C)}(v))in m?Object.defineProperty(m,v,{value:w,enumerable:!0,configurable:!0,writable:!0}):m[v]=w,m}var h=function(m){return c(c({},m),{},{keyboardRef:null})},f=s(689),p=s.n(f),g=function(m){var v=m.baseClass||"react-simple-keyboard",w=a.useRef(null),S=a.useRef(null),C=a.useRef(null),E=a.useRef(m);return a.useEffect(function(){var $=function(z){return c(c({},z),{},{theme:"simple-keyboard ".concat(z.theme||"hg-theme-default")})}(m);if(!w.current){w.current=!0,$.debug&&console.log("ReactSimpleKeyboard: Init");var A=S.current,O=".".concat(v);C.current=new(p())(A||O,$),$.keyboardRef&&$.keyboardRef(C.current)}var _=function(z,j){var B=h(j),K=h(z);return Object.keys(B).filter(function(Z){return B[Z]!==K[Z]})}(E.current,$);if(_.length){var T=C.current;E.current=$,T==null||T.setOptions($),$.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",_)}},[w,v,E,m]),a.createElement("div",{className:v,ref:S})},b=g}(),o}()})})(u_);var TG=u_.exports;const MG=xu(TG),_G={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},RG={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},AE="Á É Í Ó Ú á é í ó ú ́",PE="Ü ü ̈";function DG(){const t=zN(),e=yt(),{status:n,dispatch:r}=Hr(),[i,s]=y.useState("none"),[o,a]=y.useState(!1),[l,u]=y.useState(!1),c=y.useMemo(()=>[t,t==="es"&&(o&&"accent"||l&&"diaeresis"),i!=="none"&&"shift"].filter(Boolean).join("-"),[t,i,o,l]),d=y.useCallback(h=>{n.type==="running"&&n.waitingForInput&&r("keyboard.sendChar",h)},[n,r]);return x.jsxs("div",{className:"absolute left-[1200px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl font-bold text-white",children:e("computer.keyboard")}),x.jsx(MG,{theme:Ue("hg-theme-vonsim",`hg-shift-${i}`,o&&"hg-accentDeadKey",l&&"hg-diaeresisDeadKey"),layoutName:c,layout:_G,display:RG[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:AE},{class:"hg-diaeresisDeadKeyButton",buttons:PE}],disableButtonHold:!0,onKeyPress:h=>{if(h==="{shiftleft}"||h==="{shiftright}"){s(f=>f==="none"?"once":"none");return}if(h==="{lock}"){s(f=>f==="none"?"lock":"none");return}if(t==="es"){if(o){AE.includes(h)&&(a(!1),i==="once"&&s("none"),d(h));return}else if(h==="́"){a(!0);return}if(l){PE.includes(h)&&(u(!1),i==="once"&&s("none"),d(h));return}else if(h==="̈"){u(!0);return}}i==="once"&&s("none"),d(h==="{bksp}"?"\b":h==="{enter}"?`
`:h==="{tab}"?"	":h==="{space}"?" ":h)}})]})}function IG(){const t=yt(),{devices:e}=Hr(),n=Mn(K1).toArray();return e.leds?x.jsxs("div",{className:"absolute left-[1300px] top-[820px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.leds")}),x.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((r,i)=>x.jsx("div",{className:Ue("relative h-7 w-7 rounded-full transition",r?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:x.jsx("div",{className:Ue("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",r?"opacity-100":"opacity-0")})},i))})]}):null}const c_=y.forwardRef(({className:t,type:e,...n},r)=>x.jsx("input",{type:e,className:Ue("flex h-10 w-full rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-900 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-stone-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));c_.displayName="Input";const LG=y.forwardRef((t,e)=>y.createElement(Je.label,le({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),d_=LG,h_=y.forwardRef(({className:t,...e},n)=>x.jsx(d_,{ref:n,className:Ue("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));h_.displayName=d_.displayName;function BG(){const t=yt(),e=Mn(lV),n=Math.ceil(e.length/2),[r,i]=Hd(xM),s=y.useId(),[o,a]=y.useState(""),l=y.useCallback(()=>{const u=/^(\d+)[Hh]?$/.exec(o);if(!u||!u[1]){tu.error(t("computer.memory.address-must-be-integer"));return}let c=parseInt(u[1],16);if(c===be.MAX_ADDRESS+1)c-=1;else if(!be.inRange(c)){tu.error(t("computer.memory.address-out-of-range"));return}i(be.from(c))},[t,o,i]);return x.jsxs("div",{className:"absolute left-[800px] top-0 z-10 h-[460px] w-[250px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:t("computer.memory.name")}),x.jsxs("div",{className:"mx-4 my-2",children:[x.jsx(h_,{htmlFor:s,children:t("computer.memory.fix-address")}),x.jsxs("div",{className:"relative",children:[x.jsx(c_,{className:"font-mono",placeholder:"2000h",type:"text",enterKeyHint:"go",id:s,value:o,onChange:u=>a(u.currentTarget.value),onKeyDown:u=>{u.key==="Enter"&&l()}}),x.jsx("button",{title:t("computer.memory.unfix-address"),className:Ue("absolute right-2 top-3",!r&&"hidden"),onClick:()=>{a(""),i(null)},children:x.jsx("span",{className:"icon-[lucide--x] h-4 w-4 text-stone-500 transition-colors hover:text-stone-300"})})]})]}),x.jsxs("div",{className:"m-4 flex w-min items-start overflow-hidden rounded-lg border border-stone-600",children:[x.jsx("table",{className:"border-r border-stone-600 font-mono text-lg",children:x.jsx("tbody",{children:e.slice(0,n).map((u,c)=>y.createElement(NE,{...u,key:c}))})}),x.jsx("table",{className:"font-mono text-lg",children:x.jsx("tbody",{children:e.slice(n).map((u,c)=>y.createElement(NE,{...u,key:c}))})})]})]})}function NE({address:t,value:e}){const n=yt(),r=Mn(Md),i=n("computer.memory.cell",t);return x.jsxs(a_,{children:[x.jsx(l_,{asChild:!0,children:x.jsxs(Dt.tr,{title:i,className:"cursor-pointer border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",style:t.value===r.value?tt("memory.operating-cell"):void 0,children:[x.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:t.toString()}),x.jsx("td",{className:"border-r border-stone-600 px-2 py-1 last-of-type:border-r-0",children:e.toString("hex")})]})}),x.jsxs(gx,{className:"w-60",children:[x.jsx("p",{className:"px-4 py-2 font-medium text-white",children:i}),x.jsx("hr",{className:"border-stone-600"}),x.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(s=>x.jsxs("li",{children:[x.jsx("b",{className:"font-medium",children:n(`generics.byte-representation.${s}`)}),":"," ",x.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(s)})]},s))})]})]})}function zG(){const t=yt();return x.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsxs("div",{className:"flex items-start",children:[x.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.pic")}),x.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[x.jsx(pr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:Z1,springs:"pic.IMR",emphasis:!0}),x.jsx(pr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:Y1,springs:"pic.IRR",emphasis:!0}),x.jsx(pr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:J1,springs:"pic.ISR",emphasis:!0})]})]}),x.jsx("hr",{className:"mb-2 border-stone-600"}),x.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:rm.map((e,n)=>x.jsx(pr,{name:`INT${n}`,title:t("generics.io-register",`INT${n}`,36+n),valueAtom:e,springs:`pic.INT${n}`,className:"mx-auto"},n))})]})}function jG(){const t=yt(),{devices:e}=Hr();return e.pio?x.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.pio.name")}),x.jsx("hr",{className:"border-stone-600"}),x.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[x.jsx(pr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:q1,springs:"pio.PA"}),x.jsx(pr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:ex,springs:"pio.CA"})]}),x.jsx("hr",{className:"border-stone-600"}),x.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[x.jsx(pr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:Q1,springs:"pio.PB"}),x.jsx(pr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:tx,springs:"pio.CB"})]})]}):null}const FG="_printer_fbkny_2",UG="_shadow_fbkny_6",VG="_sides_fbkny_11",HG="_front_fbkny_22",WG="_trailContainer_fbkny_27",GG="_trail_fbkny_27",KG="_paper_fbkny_33",qo={printer:FG,shadow:UG,sides:VG,front:HG,trailContainer:WG,trail:GG,paper:KG},XG=Array.from({length:5},(t,e)=>e);function ZG(){const t=yt(),{devices:e}=Hr(),n=Mn(im),r=Mn(sm);return e.printer?x.jsx("div",{className:"absolute left-[1250px] top-[750px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:x.jsxs("div",{className:qo.printer,title:t("computer.printer.name"),children:[x.jsx("div",{className:qo.shadow}),x.jsx("div",{className:qo.sides}),x.jsxs("div",{className:qo.front,children:[x.jsx("div",{className:qo.trailContainer,children:x.jsx("div",{className:qo.trail,children:x.jsx("pre",{className:qo.paper,children:r})})}),x.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:XG.map(i=>{const s=n[i]?FN(n[i].unsigned):null;return x.jsx("span",{className:Ue("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},i)})}),x.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:x.jsx(Dt.div,{className:"h-full bg-mantis-400",style:{width:tt("printer.printing.progress").to(i=>`${i*100}%`),opacity:tt("printer.printing.opacity")}})})]})]})}):null}const YG="_screen_1okia_2",JG={screen:YG};function qG(){const t=yt(),e=Mn(nx);return x.jsxs("div",{className:"absolute left-[1200px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl font-bold text-white",children:t("computer.screen")}),x.jsx("pre",{className:JG.screen,children:e})]})}function QG(){const t=yt(),{status:e,dispatch:n,devices:r}=Hr(),i=Mn(rx).toArray();return r.switches?x.jsxs("div",{className:"absolute left-[1300px] top-[690px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.switches")}),x.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((s,o)=>x.jsx("div",{className:"w-6",children:x.jsx(cx,{checked:s,onCheckedChange:()=>n("switch.toggle",o),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800",disabled:e.type!=="running"})},o))})]}):null}function eK(){const t=yt();return x.jsxs("div",{className:"absolute left-[500px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[x.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:t("computer.timer")}),x.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[x.jsx(pr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:ix,springs:"timer.CONT"}),x.jsx(pr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:sx,springs:"timer.COMP"})]})]})}function f_(){const t=y.useRef(null);return x.jsx("div",{className:"relative h-full w-full",children:x.jsxs(qW,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[x.jsx(tG,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:x.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[x.jsx(aG,{}),x.jsx(CG,{}),x.jsx(BG,{}),x.jsx(OG,{}),x.jsx(zG,{}),x.jsx(jG,{}),x.jsx(eK,{}),x.jsx(lG,{}),x.jsx($G,{}),x.jsx(DG,{}),x.jsx(IG,{}),x.jsx(ZG,{}),x.jsx(QG,{}),x.jsx(qG,{})]})}),x.jsx(nG,{wrapperRef:t})]})})}const tK=1024;let nK=0;class ay{constructor(e,n){this.from=e,this.to=n}}let Ve=class{constructor(e={}){this.id=nK++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Rn.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}};Ve.closedBy=new Ve({deserialize:t=>t.split(" ")});Ve.openedBy=new Ve({deserialize:t=>t.split(" ")});Ve.group=new Ve({deserialize:t=>t.split(" ")});Ve.contextHash=new Ve({perNode:!0});Ve.lookAhead=new Ve({perNode:!0});Ve.mounted=new Ve({perNode:!0});const rK=Object.create(null);let Rn=class p_{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):rK,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new p_(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Ve.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Ve.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}};Rn.none=new Rn("",Object.create(null),0,8);class yx{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new Rn(r.name,i,r.id,r.flags):r)}return new yx(n)}}const nf=new WeakMap,$E=new WeakMap;var Yt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Yt||(Yt={}));let ut=class Tw{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(Ve.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new cm(this.topNode,e)}cursorAt(e,n=0,r=0){let i=nf.get(this)||this.topNode,s=new cm(i);return s.moveTo(e,n),nf.set(this,s._tree),s}get topNode(){return new Rd(this,0,0,null)}resolve(e,n=0){let r=fu(nf.get(this)||this.topNode,e,n,!1);return nf.set(this,r),r}resolveInner(e,n=0){let r=fu($E.get(this)||this.topNode,e,n,!0);return $E.set(this,r),r}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Yt.IncludeAnonymous)>0;for(let l=this.cursor(o|Yt.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:wx(Rn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Tw(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Tw(Rn.none,n,r,i)))}static build(e){return oK(e)}};ut.empty=new ut(Rn.none,[],[],0);let iK=class m_{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new m_(this.buffer,this.index)}},ih=class g_{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Rn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(y_(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let u=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,u)}return new g_(s,o,this.set)}};function y_(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function v_(t,e){let n=t.childBefore(e);for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(t=n,n=r.prevSibling):n=r}return t}function fu(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Rd&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Yt.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Rd&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}let Rd=class Yf{constructor(e,n,r,i){this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(y_(i,r,d,d+c.length)){if(c instanceof ih){if(s&Yt.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,r-d,i);if(h>-1)return new Mw(new sK(o,c,e,d),null,h)}else if(s&Yt.IncludeAnonymous||!c.type.isAnonymous||vx(c)){let h;if(!(s&Yt.IgnoreMounts)&&c.props&&(h=c.prop(Ve.mounted))&&!h.overlay)return new Yf(h.tree,d,e,o);let f=new Yf(c,d,e,o);return s&Yt.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&Yt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Yt.IgnoreOverlays)&&(i=this._tree.prop(Ve.mounted))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Yf(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new cm(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return fu(this,e,n,!1)}resolveInner(e,n=0){return fu(this,e,n,!0)}enterUnfinishedNodesBefore(e){return v_(this,e)}getChild(e,n=null,r=null){let i=lm(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return lm(this,e,n,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return um(this,e)}};function lm(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function um(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}let sK=class{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}},Mw=class pc{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new pc(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Yt.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new pc(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new pc(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new pc(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new cm(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new ut(this.type,e,n,this.to-this.from)}resolve(e,n=0){return fu(this,e,n,!1)}resolveInner(e,n=0){return fu(this,e,n,!0)}enterUnfinishedNodesBefore(e){return v_(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,r=null){let i=lm(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return lm(this,e,n,r)}get node(){return this}matchContext(e){return um(this,e)}},cm=class{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Rd)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Rd?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Yt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Yt.IncludeAnonymous||a instanceof ih||!a.type.isAnonymous||vx(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Mw(this.buffer,n,this.stack[i]);return this.bufferNode=new Mw(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return um(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return um(this.node,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}};function vx(t){return t.children.some(e=>e instanceof ih||!e.type.isAnonymous||vx(e))}function oK(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=tK,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new iK(n,n.length):n,l=r.types,u=0,c=0;function d(S,C,E,$,A){let{id:O,start:_,end:T,size:z}=a,j=c;for(;z<0;)if(a.next(),z==-1){let V=s[O];E.push(V),$.push(_-S);return}else if(z==-3){u=O;return}else if(z==-4){c=O;return}else throw new RangeError(`Unrecognized record size: ${z}`);let B=l[O],K,Z,Q=_-S;if(T-_<=i&&(Z=g(a.pos-C,A))){let V=new Uint16Array(Z.size-Z.skip),M=a.pos-Z.size,U=V.length;for(;a.pos>M;)U=b(Z.start,V,U);K=new ih(V,T-Z.start,r),Q=Z.start-S}else{let V=a.pos-z;a.next();let M=[],U=[],J=O>=o?O:-1,ne=0,me=T;for(;a.pos>V;)J>=0&&a.id==J&&a.size>=0?(a.end<=me-i&&(f(M,U,_,ne,a.end,me,J,j),ne=M.length,me=a.end),a.next()):d(_,V,M,U,J);if(J>=0&&ne>0&&ne<M.length&&f(M,U,_,ne,_,me,J,j),M.reverse(),U.reverse(),J>-1&&ne>0){let H=h(B);K=wx(B,M,U,0,M.length,0,T-_,H,H)}else K=p(B,M,U,T-_,j-T)}E.push(K),$.push(Q)}function h(S){return(C,E,$)=>{let A=0,O=C.length-1,_,T;if(O>=0&&(_=C[O])instanceof ut){if(!O&&_.type==S&&_.length==$)return _;(T=_.prop(Ve.lookAhead))&&(A=E[O]+_.length+T)}return p(S,C,E,$,A)}}function f(S,C,E,$,A,O,_,T){let z=[],j=[];for(;S.length>$;)z.push(S.pop()),j.push(C.pop()+E-A);S.push(p(r.types[_],z,j,O-A,T-O)),C.push(A-E)}function p(S,C,E,$,A=0,O){if(u){let _=[Ve.contextHash,u];O=O?[_].concat(O):[_]}if(A>25){let _=[Ve.lookAhead,A];O=O?[_].concat(O):[_]}return new ut(S,C,E,$,O)}function g(S,C){let E=a.fork(),$=0,A=0,O=0,_=E.end-i,T={size:0,start:0,skip:0};e:for(let z=E.pos-S;E.pos>z;){let j=E.size;if(E.id==C&&j>=0){T.size=$,T.start=A,T.skip=O,O+=4,$+=4,E.next();continue}let B=E.pos-j;if(j<0||B<z||E.start<_)break;let K=E.id>=o?4:0,Z=E.start;for(E.next();E.pos>B;){if(E.size<0)if(E.size==-3)K+=4;else break e;else E.id>=o&&(K+=4);E.next()}A=Z,$+=j,O+=K}return(C<0||$==S)&&(T.size=$,T.start=A,T.skip=O),T.size>4?T:void 0}function b(S,C,E){let{id:$,start:A,end:O,size:_}=a;if(a.next(),_>=0&&$<o){let T=E;if(_>4){let z=a.pos-(_-4);for(;a.pos>z;)E=b(S,C,E)}C[--E]=T,C[--E]=O-S,C[--E]=A-S,C[--E]=$}else _==-3?u=$:_==-4&&(c=$);return E}let m=[],v=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,m,v,-1);let w=(e=t.length)!==null&&e!==void 0?e:m.length?v[0]+m[0].length:0;return new ut(l[t.topID],m.reverse(),v.reverse(),w)}const OE=new WeakMap;function Jf(t,e){if(!t.isAnonymous||e instanceof ih||e.type!=t)return 1;let n=OE.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof ut)){n=1;break}n+=Jf(t,r)}OE.set(e,n)}return n}function wx(t,e,n,r,i,s,o,a,l){let u=0;for(let p=r;p<i;p++)u+=Jf(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,g,b,m,v){for(let w=b;w<m;){let S=w,C=g[w],E=Jf(t,p[w]);for(w++;w<m;w++){let $=Jf(t,p[w]);if(E+$>=c)break;E+=$}if(w==S+1){if(E>c){let $=p[S];f($.children,$.positions,0,$.children.length,g[S]+v);continue}d.push(p[S])}else{let $=g[w-1]+p[w-1].length-C;d.push(wx(t,p,g,S,w,C,$,null,l))}h.push(C+v-s)}}return f(e,n,r,i,0),(a||l)(d,h,o)}class ui{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new ui(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new ui(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&i.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}class bx{startParse(e,n,r){return typeof e=="string"&&(e=new aK(e)),r=r?r.length?r.map(i=>new ay(i.from,i.to)):[new ay(0,0)]:[new ay(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class aK{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Ve({perNode:!0});const lK=1024;let uK=0;class xt{constructor(e={}){this.id=uK++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Os.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}xt.closedBy=new xt({deserialize:t=>t.split(" ")});xt.openedBy=new xt({deserialize:t=>t.split(" ")});xt.group=new xt({deserialize:t=>t.split(" ")});xt.contextHash=new xt({perNode:!0});xt.lookAhead=new xt({perNode:!0});xt.mounted=new xt({perNode:!0});const cK=Object.create(null);class Os{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):cK,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Os(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(xt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(xt.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}Os.none=new Os("",Object.create(null),0,8);const rf=new WeakMap,TE=new WeakMap;var yn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(yn||(yn={}));class Ui{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(xt.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new fm(this.topNode,e)}cursorAt(e,n=0,r=0){let i=rf.get(this)||this.topNode,s=new fm(i);return s.moveTo(e,n),rf.set(this,s._tree),s}get topNode(){return new Ss(this,0,0,null)}resolve(e,n=0){let r=pu(rf.get(this)||this.topNode,e,n,!1);return rf.set(this,r),r}resolveInner(e,n=0){let r=pu(TE.get(this)||this.topNode,e,n,!0);return TE.set(this,r),r}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&yn.IncludeAnonymous)>0;for(let l=this.cursor(o|yn.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:kx(Os.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Ui(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Ui(Os.none,n,r,i)))}static build(e){return hK(e)}}Ui.empty=new Ui(Os.none,[],[],0);class xx{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new xx(this.buffer,this.index)}}class Ga{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Os.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(w_(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let u=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,u)}return new Ga(s,o,this.set)}}function w_(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function b_(t,e){let n=t.childBefore(e);for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(t=n,n=r.prevSibling):n=r}return t}function pu(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Ss&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:yn.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Ss&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Ss{constructor(e,n,r,i){this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(w_(i,r,d,d+c.length)){if(c instanceof Ga){if(s&yn.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,r-d,i);if(h>-1)return new ho(new dK(o,c,e,d),null,h)}else if(s&yn.IncludeAnonymous||!c.type.isAnonymous||Sx(c)){let h;if(!(s&yn.IgnoreMounts)&&c.props&&(h=c.prop(xt.mounted))&&!h.overlay)return new Ss(h.tree,d,e,o);let f=new Ss(c,d,e,o);return s&yn.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&yn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&yn.IgnoreOverlays)&&(i=this._tree.prop(xt.mounted))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Ss(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new fm(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return pu(this,e,n,!1)}resolveInner(e,n=0){return pu(this,e,n,!0)}enterUnfinishedNodesBefore(e){return b_(this,e)}getChild(e,n=null,r=null){let i=dm(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return dm(this,e,n,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return hm(this,e)}}function dm(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function hm(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class dK{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class ho{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new ho(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&yn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new ho(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ho(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new ho(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new fm(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new Ui(this.type,e,n,this.to-this.from)}resolve(e,n=0){return pu(this,e,n,!1)}resolveInner(e,n=0){return pu(this,e,n,!0)}enterUnfinishedNodesBefore(e){return b_(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,r=null){let i=dm(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return dm(this,e,n,r)}get node(){return this}matchContext(e){return hm(this,e)}}class fm{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ss)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ss?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&yn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&yn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&yn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&yn.IncludeAnonymous||a instanceof Ga||!a.type.isAnonymous||Sx(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new ho(this.buffer,n,this.stack[i]);return this.bufferNode=new ho(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return hm(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return hm(this.node,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function Sx(t){return t.children.some(e=>e instanceof Ga||!e.type.isAnonymous||Sx(e))}function hK(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=lK,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new xx(n,n.length):n,l=r.types,u=0,c=0;function d(S,C,E,$,A){let{id:O,start:_,end:T,size:z}=a,j=c;for(;z<0;)if(a.next(),z==-1){let V=s[O];E.push(V),$.push(_-S);return}else if(z==-3){u=O;return}else if(z==-4){c=O;return}else throw new RangeError(`Unrecognized record size: ${z}`);let B=l[O],K,Z,Q=_-S;if(T-_<=i&&(Z=g(a.pos-C,A))){let V=new Uint16Array(Z.size-Z.skip),M=a.pos-Z.size,U=V.length;for(;a.pos>M;)U=b(Z.start,V,U);K=new Ga(V,T-Z.start,r),Q=Z.start-S}else{let V=a.pos-z;a.next();let M=[],U=[],J=O>=o?O:-1,ne=0,me=T;for(;a.pos>V;)J>=0&&a.id==J&&a.size>=0?(a.end<=me-i&&(f(M,U,_,ne,a.end,me,J,j),ne=M.length,me=a.end),a.next()):d(_,V,M,U,J);if(J>=0&&ne>0&&ne<M.length&&f(M,U,_,ne,_,me,J,j),M.reverse(),U.reverse(),J>-1&&ne>0){let H=h(B);K=kx(B,M,U,0,M.length,0,T-_,H,H)}else K=p(B,M,U,T-_,j-T)}E.push(K),$.push(Q)}function h(S){return(C,E,$)=>{let A=0,O=C.length-1,_,T;if(O>=0&&(_=C[O])instanceof Ui){if(!O&&_.type==S&&_.length==$)return _;(T=_.prop(xt.lookAhead))&&(A=E[O]+_.length+T)}return p(S,C,E,$,A)}}function f(S,C,E,$,A,O,_,T){let z=[],j=[];for(;S.length>$;)z.push(S.pop()),j.push(C.pop()+E-A);S.push(p(r.types[_],z,j,O-A,T-O)),C.push(A-E)}function p(S,C,E,$,A=0,O){if(u){let _=[xt.contextHash,u];O=O?[_].concat(O):[_]}if(A>25){let _=[xt.lookAhead,A];O=O?[_].concat(O):[_]}return new Ui(S,C,E,$,O)}function g(S,C){let E=a.fork(),$=0,A=0,O=0,_=E.end-i,T={size:0,start:0,skip:0};e:for(let z=E.pos-S;E.pos>z;){let j=E.size;if(E.id==C&&j>=0){T.size=$,T.start=A,T.skip=O,O+=4,$+=4,E.next();continue}let B=E.pos-j;if(j<0||B<z||E.start<_)break;let K=E.id>=o?4:0,Z=E.start;for(E.next();E.pos>B;){if(E.size<0)if(E.size==-3)K+=4;else break e;else E.id>=o&&(K+=4);E.next()}A=Z,$+=j,O+=K}return(C<0||$==S)&&(T.size=$,T.start=A,T.skip=O),T.size>4?T:void 0}function b(S,C,E){let{id:$,start:A,end:O,size:_}=a;if(a.next(),_>=0&&$<o){let T=E;if(_>4){let z=a.pos-(_-4);for(;a.pos>z;)E=b(S,C,E)}C[--E]=T,C[--E]=O-S,C[--E]=A-S,C[--E]=$}else _==-3?u=$:_==-4&&(c=$);return E}let m=[],v=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,m,v,-1);let w=(e=t.length)!==null&&e!==void 0?e:m.length?v[0]+m[0].length:0;return new Ui(l[t.topID],m.reverse(),v.reverse(),w)}const ME=new WeakMap;function qf(t,e){if(!t.isAnonymous||e instanceof Ga||e.type!=t)return 1;let n=ME.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Ui)){n=1;break}n+=qf(t,r)}ME.set(e,n)}return n}function kx(t,e,n,r,i,s,o,a,l){let u=0;for(let p=r;p<i;p++)u+=qf(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,g,b,m,v){for(let w=b;w<m;){let S=w,C=g[w],E=qf(t,p[w]);for(w++;w<m;w++){let $=qf(t,p[w]);if(E+$>=c)break;E+=$}if(w==S+1){if(E>c){let $=p[S];f($.children,$.positions,0,$.children.length,g[S]+v);continue}d.push(p[S])}else{let $=g[w-1]+p[w-1].length-C;d.push(kx(t,p,g,S,w,C,$,null,l))}h.push(C+v-s)}}return f(e,n,r,i,0),(a||l)(d,h,o)}new xt({perNode:!0});let fK=0;class nn{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=fK++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new nn([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new pm;return n=>n.modified.indexOf(e)>-1?n:pm.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let pK=0;class pm{constructor(){this.instances=[],this.id=pK++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&mK(n,a.modified));if(r)return r;let i=[],s=new nn(i,e,n);for(let a of n)a.instances.push(s);let o=gK(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(pm.get(a,l));return s}}function mK(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function gK(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function x_(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+i);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==i.length)break;let f=i[d++];if(d==i.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new mm(r,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return S_.add(e)}const S_=new xt;class mm{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}mm.empty=new mm([],2,null);function k_(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function yK(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function vK(t,e,n,r=0,i=t.length){let s=new wK(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class wK{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=i,c=bK(e)||mm.empty,d=yK(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(xt.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(b=>!b.scope||b.scope(h.tree.type)),g=e.firstChild();for(let b=0,m=a;;b++){let v=b<h.overlay.length?h.overlay[b]:null,w=v?v.from+a:l,S=Math.max(n,m),C=Math.min(r,w);if(S<C&&g)for(;e.from<C&&(this.highlightRange(e,S,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=w||!e.nextSibling())););if(!v||w>r)break;m=v.to+a,m>n&&(this.highlightRange(f.cursor(),Math.max(n,v.from+a),Math.min(r,m),"",p),this.startSpan(Math.min(r,m),u))}g&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function bK(t){let e=t.type.prop(S_);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const ce=nn.define,sf=ce(),Ws=ce(),_E=ce(Ws),RE=ce(Ws),Gs=ce(),of=ce(Gs),ly=ce(Gs),ki=ce(),Qo=ce(ki),xi=ce(),Si=ce(),_w=ce(),qu=ce(_w),af=ce(),_e={comment:sf,lineComment:ce(sf),blockComment:ce(sf),docComment:ce(sf),name:Ws,variableName:ce(Ws),typeName:_E,tagName:ce(_E),propertyName:RE,attributeName:ce(RE),className:ce(Ws),labelName:ce(Ws),namespace:ce(Ws),macroName:ce(Ws),literal:Gs,string:of,docString:ce(of),character:ce(of),attributeValue:ce(of),number:ly,integer:ce(ly),float:ce(ly),bool:ce(Gs),regexp:ce(Gs),escape:ce(Gs),color:ce(Gs),url:ce(Gs),keyword:xi,self:ce(xi),null:ce(xi),atom:ce(xi),unit:ce(xi),modifier:ce(xi),operatorKeyword:ce(xi),controlKeyword:ce(xi),definitionKeyword:ce(xi),moduleKeyword:ce(xi),operator:Si,derefOperator:ce(Si),arithmeticOperator:ce(Si),logicOperator:ce(Si),bitwiseOperator:ce(Si),compareOperator:ce(Si),updateOperator:ce(Si),definitionOperator:ce(Si),typeOperator:ce(Si),controlOperator:ce(Si),punctuation:_w,separator:ce(_w),bracket:qu,angleBracket:ce(qu),squareBracket:ce(qu),paren:ce(qu),brace:ce(qu),content:ki,heading:Qo,heading1:ce(Qo),heading2:ce(Qo),heading3:ce(Qo),heading4:ce(Qo),heading5:ce(Qo),heading6:ce(Qo),contentSeparator:ce(ki),list:ce(ki),quote:ce(ki),emphasis:ce(ki),strong:ce(ki),link:ce(ki),monospace:ce(ki),strikethrough:ce(ki),inserted:ce(),deleted:ce(),changed:ce(),invalid:ce(),meta:af,documentMeta:ce(af),annotation:ce(af),processingInstruction:ce(af),definition:nn.defineModifier(),constant:nn.defineModifier(),function:nn.defineModifier(),standard:nn.defineModifier(),local:nn.defineModifier(),special:nn.defineModifier()};k_([{tag:_e.link,class:"tok-link"},{tag:_e.heading,class:"tok-heading"},{tag:_e.emphasis,class:"tok-emphasis"},{tag:_e.strong,class:"tok-strong"},{tag:_e.keyword,class:"tok-keyword"},{tag:_e.atom,class:"tok-atom"},{tag:_e.bool,class:"tok-bool"},{tag:_e.url,class:"tok-url"},{tag:_e.labelName,class:"tok-labelName"},{tag:_e.inserted,class:"tok-inserted"},{tag:_e.deleted,class:"tok-deleted"},{tag:_e.literal,class:"tok-literal"},{tag:_e.string,class:"tok-string"},{tag:_e.number,class:"tok-number"},{tag:[_e.regexp,_e.escape,_e.special(_e.string)],class:"tok-string2"},{tag:_e.variableName,class:"tok-variableName"},{tag:_e.local(_e.variableName),class:"tok-variableName tok-local"},{tag:_e.definition(_e.variableName),class:"tok-variableName tok-definition"},{tag:_e.special(_e.variableName),class:"tok-variableName2"},{tag:_e.definition(_e.propertyName),class:"tok-propertyName tok-definition"},{tag:_e.typeName,class:"tok-typeName"},{tag:_e.namespace,class:"tok-namespace"},{tag:_e.className,class:"tok-className"},{tag:_e.macroName,class:"tok-macroName"},{tag:_e.propertyName,class:"tok-propertyName"},{tag:_e.operator,class:"tok-operator"},{tag:_e.comment,class:"tok-comment"},{tag:_e.meta,class:"tok-meta"},{tag:_e.invalid,class:"tok-invalid"},{tag:_e.punctuation,class:"tok-punctuation"}]);var uy;const lf=new Ve,xK=new Ve;let fs=class{constructor(e,n,r=[],i=""){this.data=e,this.name=i,ze.prototype.hasOwnProperty("tree")||Object.defineProperty(ze.prototype,"tree",{get(){return mu(this)}}),this.parser=n,this.extension=[gu.of(this),ze.languageData.of((s,o,a)=>{let l=DE(s,o,a),u=l.type.prop(lf);if(!u)return[];let c=s.facet(u),d=l.type.prop(xK);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return DE(e,n,r).type.prop(lf)==this.data}findRegions(e){let n=e.facet(gu);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(lf)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Ve.mounted);if(a){if(a.tree.prop(lf)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof ut&&i(u,s.positions[l]+o)}};return i(mu(e),0),r}get allowsNesting(){return!0}};fs.setState=je.define();function DE(t,e,n){let r=t.facet(gu),i=mu(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Yt.ExcludeBuffers))s.type.isTop&&(i=s);return i}function mu(t){let e=t.field(fs.state,!1);return e?e.tree:ut.empty}let SK=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}},Qu=null,kK=class Rw{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Rw(e,n,[],ut.empty,0,r,[],null)}startParse(){return this.parser.startParse(new SK(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=ut.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(ui.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ui.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Qu;Qu=this;try{return e()}finally{Qu=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=IE(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),r=ui.applyChanges(r,l),i=ut.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new Rw(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=IE(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends bx{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Qu;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new ut(Rn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Qu}};function IE(t,e,n){return ui.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}let Dw=class Iw{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Iw(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=kK.create(e.facet(gu).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Iw(r)}};fs.state=dn.define({create:Dw.init,update(t,e){for(let n of e.effects)if(n.is(fs.setState))return n.value;return e.startState.facet(gu)!=e.state.facet(gu)?Dw.init(e.state):t.apply(e)}});let C_=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(C_=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const cy=typeof navigator<"u"&&(!((uy=navigator.scheduling)===null||uy===void 0)&&uy.isInputPending)?()=>navigator.scheduling.isInputPending():null,CK=qt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(fs.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(fs.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=C_(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(fs.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!cy?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>cy&&cy()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:fs.setState.of(new Dw(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Ir(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),gu=Se.define({combine(t){return t.length?t[0]:null},enables:t=>[fs.state,CK,Pe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),EK=Se.define(),Cx=Se.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function gm(t){let e=t.facet(Cx);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Lw(t,e){let n="",r=t.tabSize,i=t.facet(Cx)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function AK(t,e){t instanceof ze&&(t=new Ex(t));for(let r of t.state.facet(EK)){let i=r(t,e);if(i!==void 0)return i}let n=mu(t.state);return n.length>=e?NK(t,n,e):null}let Ex=class{constructor(e,n={}){this.state=e,this.options=n,this.unit=gm(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Zd(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}};const PK=new Ve;function NK(t,e,n){return E_(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function $K(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function OK(t){let e=t.type.prop(PK);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Ve.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>DK(o,!0,1,void 0,s&&!$K(o)?i.from:void 0)}return t.parent==null?TK:null}function E_(t,e,n){for(;t;t=t.parent){let r=OK(t);if(r)return r(MK.create(n,e,t))}return null}function TK(){return 0}let MK=class A_ extends Ex{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.node=r}static create(e,n,r){return new A_(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(_K(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?E_(e,this.pos,this.base):0}};function _K(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function RK(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function DK(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?RK(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const IK=1e4,LK="()[]{}",BK=new Ve;function Bw(t,e,n){let r=t.prop(e<0?Ve.openedBy:Ve.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function zw(t){let e=t.type.prop(BK);return e?e(t.node):t}function uf(t,e,n,r={}){let i=r.maxScanDistance||IK,s=r.brackets||LK,o=mu(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=Bw(l.type,n,s);if(u&&l.from<l.to){let c=zw(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return zK(t,e,n,l,c,u,s)}}return jK(t,e,n,o,a.type,i,s)}function zK(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=zw(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Bw(c.type,n,o))u++;else if(Bw(c.type,-n,o)){if(u==0){let d=zw(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function jK(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let g=n>0?0:f.length-1,b=n>0?f.length:-1;g!=b;g+=n){let m=o.indexOf(f[g]);if(!(m<0||r.resolveInner(p+g,1).type!=i))if(m%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+g,to:p+g+1},matched:m>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}const FK=Object.create(null),LE=[Rn.none],BE=[],UK=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])UK[t]=VK(FK,e);function dy(t,e){BE.indexOf(t)>-1||(BE.push(t),console.warn(e))}function VK(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||_e[s];o?typeof o=="function"?n?n=o(n):dy(s,`Modifier ${s} used at start of tag`):n?dy(s,`Tag ${s} used as modifier`):n=o:dy(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let r=e.replace(/ /g,"_"),i=Rn.define({id:LE.length,name:r,props:[x_({[r]:n})]});return LE.push(i),i.id}const HK=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=Ax(t.state,n.from);return r.line?WK(t):r.block?ZK(t):!1};function sh(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const WK=sh(Px,0),GK=sh(Px,1),KK=sh(Px,2),XK=sh(P_,0),ZK=sh((t,e)=>P_(t,e,JK(e)),0);function Ax(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const ec=50;function YK(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-ec,r),o=t.sliceDoc(i,i+ec),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,d;i-r<=2*ec?c=d=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+ec),d=t.sliceDoc(i-ec,i));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:r+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:i-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function JK(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function P_(t,e,n=e.selection.ranges){let r=n.map(s=>Ax(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>YK(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function Px(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,u=Ax(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>i&&(s==o||o>d.from)){i=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),r.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of r)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const jw=Rs.define(),qK=Rs.define(),QK=Se.define(),N_=Se.define({combine(t){return Vo(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}});function eX(t){let e=0;return t.iterChangedRanges((n,r)=>e=r),e}const $_=dn.define({create(){return Bi.empty},update(t,e){let n=e.state.facet(N_),r=e.annotation(jw);if(r){let l=e.docChanged?te.single(eX(e.changes)):void 0,u=Kn.fromTransaction(e,l),c=r.side,d=c==0?t.undone:t.done;return u?d=ym(d,d.length,n.minDepth,u):d=M_(d,e.startState.selection),new Bi(c==0?r.rest:d,c==0?d:r.rest)}let i=e.annotation(qK);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Wt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Kn.fromTransaction(e),o=e.annotation(Wt.time),a=e.annotation(Wt.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Bi(t.done.map(Kn.fromJSON),t.undone.map(Kn.fromJSON))}});function tX(t={}){return[$_,N_.of(t),Pe.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?O_:e.inputType=="historyRedo"?Fw:null;return r?(e.preventDefault(),r(n)):!1}})]}function Nx(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field($_,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const O_=Nx(0,!1),Fw=Nx(1,!1),nX=Nx(0,!0);class Kn{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Kn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Kn(e.changes&&Ut.fromJSON(e.changes),[],e.mapped&&Fi.fromJSON(e.mapped),e.startSelection&&te.fromJSON(e.startSelection),e.selectionsAfter.map(te.fromJSON))}static fromTransaction(e,n){let r=Rr;for(let i of e.startState.facet(QK)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Kn(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Rr)}static selection(e){return new Kn(void 0,Rr,void 0,void 0,e)}}function ym(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function rX(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(r=!0)}}),r}function iX(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function T_(t,e){return t.length?e.length?t.concat(e):t:e}const Rr=[],sX=200;function M_(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-sX));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),ym(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Kn.selection([e])]}function oX(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function hy(t,e){if(!t.length)return t;let n=t.length,r=Rr;for(;n;){let i=aX(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Kn.selection(r)]:Rr}function aX(t,e,n){let r=T_(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Rr,n);if(!t.changes)return Kn.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Kn(i,je.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const lX=/^(input\.type|delete)($|\.)/;class Bi{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Bi(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||lX.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,rX(a.changes,e.changes))||r=="input.type.compose")?o=ym(o,o.length-1,i.minDepth,new Kn(e.changes.compose(a.changes),T_(e.effects,a.effects),a.mapped,a.startSelection,Rr)):o=ym(o,o.length,i.minDepth,e),new Bi(o,Rr,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Rr;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&iX(s[s.length-1],e)?this:new Bi(M_(this.done,e),this.undone,n,r)}addMapping(e){return new Bi(hy(this.done,e),hy(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1];if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:jw.of({side:e,rest:oX(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?Rr:i.slice(0,i.length-1);return s.mapped&&(o=hy(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:jw.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Bi.empty=new Bi(Rr,Rr);function oh(t,e){return te.create(t.ranges.map(e),t.mainIndex)}function Wo(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ka({state:t,dispatch:e},n){let r=oh(t.selection,n);return r.eq(t.selection)?!1:(e(Wo(t,r)),!0)}function Ag(t,e){return te.cursor(e?t.to:t.from)}function __(t,e){return Ka(t,n=>n.empty?t.moveByChar(n,e):Ag(n,e))}function Go(t){return t.textDirectionAt(t.state.selection.main.head)==Pt.LTR}const zE=t=>__(t,!Go(t)),jE=t=>__(t,Go(t));function R_(t,e){return Ka(t,n=>n.empty?t.moveByGroup(n,e):Ag(n,e))}const uX=t=>R_(t,!Go(t)),cX=t=>R_(t,Go(t));function D_(t,e){return Ka(t,n=>{if(!n.empty)return Ag(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const FE=t=>D_(t,!1),UE=t=>D_(t,!0);function I_(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Pe.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function L_(t,e){let n=I_(t),{state:r}=t,i=oh(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):Ag(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Pe.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Wo(r,i),{effects:s}),!0}const fy=t=>L_(t,!1),py=t=>L_(t,!0);function Pg(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=te.cursor(r.from+s))}return i}const VE=t=>Ka(t,e=>Pg(t,e,!0)),HE=t=>Ka(t,e=>Pg(t,e,!1)),dX=t=>Ka(t,e=>te.cursor(t.lineBlockAt(e.head).from,1)),hX=t=>Ka(t,e=>te.cursor(t.lineBlockAt(e.head).to,-1));function fX(t,e,n){let r=!1,i=oh(t.selection,s=>{let o=uf(t,s.head,-1)||uf(t,s.head,1)||s.head>0&&uf(t,s.head-1,1)||s.head<t.doc.length&&uf(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?te.range(s.anchor,a):te.cursor(a)});return r?(e(Wo(t,i)),!0):!1}const pX=({state:t,dispatch:e})=>fX(t,e,!1);function Ko(t,e){let n=oh(t.state.selection,r=>{let i=e(r);return te.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Wo(t.state,n)),!0)}function B_(t,e){return Ko(t,n=>t.moveByChar(n,e))}const WE=t=>B_(t,!Go(t)),GE=t=>B_(t,Go(t));function z_(t,e){return Ko(t,n=>t.moveByGroup(n,e))}const mX=t=>z_(t,!Go(t)),gX=t=>z_(t,Go(t));function j_(t,e){return Ko(t,n=>t.moveVertically(n,e))}const KE=t=>j_(t,!1),XE=t=>j_(t,!0);function F_(t,e){return Ko(t,n=>t.moveVertically(n,e,I_(t).height))}const ZE=t=>F_(t,!1),YE=t=>F_(t,!0),JE=t=>Ko(t,e=>Pg(t,e,!0)),qE=t=>Ko(t,e=>Pg(t,e,!1)),yX=t=>Ko(t,e=>te.cursor(t.lineBlockAt(e.head).from)),vX=t=>Ko(t,e=>te.cursor(t.lineBlockAt(e.head).to)),QE=({state:t,dispatch:e})=>(e(Wo(t,{anchor:0})),!0),e2=({state:t,dispatch:e})=>(e(Wo(t,{anchor:t.doc.length})),!0),t2=({state:t,dispatch:e})=>(e(Wo(t,{anchor:t.selection.main.anchor,head:0})),!0),n2=({state:t,dispatch:e})=>(e(Wo(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),wX=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),bX=({state:t,dispatch:e})=>{let n=$g(t).map(({from:r,to:i})=>te.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:te.create(n),userEvent:"select"})),!0};function Ng(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(n="delete.backward",l=cf(t,l,!1)):l>o&&(n="delete.forward",l=cf(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=cf(t,o,!1),a=cf(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:te.cursor(o)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Pe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function cf(t,e,n){if(t instanceof Pe)for(let r of t.state.facet(Pe.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const U_=(t,e)=>Ng(t,n=>{let{state:r}=t,i=r.doc.lineAt(n),s,o;if(!e&&n>i.from&&n<i.from+200&&!/[^ \t]/.test(s=i.text.slice(0,n-i.from))){if(s[s.length-1]=="	")return n-1;let a=Zd(s,r.tabSize),l=a%gm(r)||gm(r);for(let u=0;u<l&&s[s.length-1-u]==" ";u++)n--;o=n}else o=vn(i.text,n-i.from,e,e)+i.from,o==n&&i.number!=(e?r.doc.lines:1)&&(o+=e?1:-1);return o}),my=t=>U_(t,!1),r2=t=>U_(t,!0),V_=(t,e)=>Ng(t,n=>{let r=n,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=vn(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||r!=n)&&(a=c),r=l}return r}),i2=t=>V_(t,!1),xX=t=>V_(t,!0),s2=t=>Ng(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),SX=t=>Ng(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),kX=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:qe.of(["",""])},range:te.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},CX=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:vn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:vn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:te.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function $g(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function H_(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of $g(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(te.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(te.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:te.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const EX=({state:t,dispatch:e})=>H_(t,e,!1),AX=({state:t,dispatch:e})=>H_(t,e,!0);function W_(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of $g(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const PX=({state:t,dispatch:e})=>W_(t,e,!1),NX=({state:t,dispatch:e})=>W_(t,e,!0),$X=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes($g(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=oh(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function OX(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=mu(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(xt.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const o2=TX(!1);function TX(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&OX(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new Ex(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=AK(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Lw(e,c)];return l&&d.push(Lw(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:qe.of(d)},range:te.cursor(s+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function G_(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:te.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const a2=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(G_(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Cx)})}),{userEvent:"input.indent"})),!0),l2=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(G_(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Zd(i,t.tabSize),o=0,a=Lw(t,Math.max(0,s-gm(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);var gy;const xl=new Ve;function MX(t){return Se.define({combine:t?e=>e.concat(t):void 0})}const _X=new Ve;class ri{constructor(e,n,r=[],i=""){this.data=e,this.name=i,ze.prototype.hasOwnProperty("tree")||Object.defineProperty(ze.prototype,"tree",{get(){return Ts(this)}}),this.parser=n,this.extension=[wu.of(this),ze.languageData.of((s,o,a)=>{let l=u2(s,o,a),u=l.type.prop(xl);if(!u)return[];let c=s.facet(u),d=l.type.prop(_X);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return u2(e,n,r).type.prop(xl)==this.data}findRegions(e){let n=e.facet(wu);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(xl)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Ve.mounted);if(a){if(a.tree.prop(xl)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof ut&&i(u,s.positions[l]+o)}};return i(Ts(e),0),r}get allowsNesting(){return!0}}ri.setState=je.define();function u2(t,e,n){let r=t.facet(wu),i=Ts(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Yt.ExcludeBuffers))s.type.isTop&&(i=s);return i}function Ts(t){let e=t.field(ri.state,!1);return e?e.tree:ut.empty}class RX{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let tc=null;class yu{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new yu(e,n,[],ut.empty,0,r,[],null)}startParse(){return this.parser.startParse(new RX(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=ut.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(ui.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ui.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=tc;tc=this;try{return e()}finally{tc=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=c2(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),r=ui.applyChanges(r,l),i=ut.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new yu(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=c2(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends bx{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=tc;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new ut(Rn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return tc}}function c2(t,e,n){return ui.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class vu{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new vu(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=yu.create(e.facet(wu).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new vu(r)}}ri.state=dn.define({create:vu.init,update(t,e){for(let n of e.effects)if(n.is(ri.setState))return n.value;return e.startState.facet(wu)!=e.state.facet(wu)?vu.init(e.state):t.apply(e)}});let K_=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(K_=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const yy=typeof navigator<"u"&&(!((gy=navigator.scheduling)===null||gy===void 0)&&gy.isInputPending)?()=>navigator.scheduling.isInputPending():null,DX=qt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ri.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ri.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=K_(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(ri.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!yy?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>yy&&yy()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ri.setState.of(new vu(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Ir(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),wu=Se.define({combine(t){return t.length?t[0]:null},enables:t=>[ri.state,DX,Pe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class IX{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const X_=Se.define(),Z_=Se.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function vm(t){let e=t.facet(Z_);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function LX(t,e){let n="",r=t.tabSize,i=t.facet(Z_)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function BX(t,e){t instanceof ze&&(t=new Y_(t));for(let r of t.state.facet(X_)){let i=r(t,e);if(i!==void 0)return i}let n=Ts(t.state);return n?jX(t,n,e):null}class Y_{constructor(e,n={}){this.state=e,this.options=n,this.unit=vm(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Zd(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const zX=new Ve;function jX(t,e,n){return J_(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function FX(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function UX(t){let e=t.type.prop(zX);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Ve.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>GX(o,!0,1,void 0,s&&!FX(o)?i.from:void 0)}return t.parent==null?VX:null}function J_(t,e,n){for(;t;t=t.parent){let r=UX(t);if(r)return r($x.create(n,e,t))}return null}function VX(){return 0}class $x extends Y_{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.node=r}static create(e,n,r){return new $x(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(HX(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?J_(e,this.pos,this.base):0}}function HX(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function WX(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function GX(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?WX(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const KX=200;function XX(){return ze.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+KX)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let d=BX(o,c.from);if(d==null)continue;let h=/^\s*/.exec(c.text)[0],f=LX(o,d);h!=f&&l.push({from:c.from,to:c.from+h.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const ZX=Se.define(),YX=new Ve;function JX(t,e,n){let r=Ts(t);if(r.length<n)return null;let i=r.resolveInner(n,1),s=null;for(let o=i;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(YX);if(a&&(o.to<r.length-50||r.length==t.doc.length||!qX(o))){let l=a(o,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(s=l)}}return s}function qX(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function q_(t,e,n){for(let r of t.facet(ZX)){let i=r(t,e,n);if(i)return i}return JX(t,e,n)}function Q_(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Ox=je.define({map:Q_}),Og=je.define({map:Q_});function eR(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const ah=dn.define({create(){return Ze.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(Ox)&&!QX(t,n.value.from,n.value.to)?t=t.update({add:[d2.range(n.value.from,n.value.to)]}):n.is(Og)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,s)=>{i<r&&s>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return t},provide:t=>Pe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(d2.range(r,i))}return Ze.set(e,!0)}});function tR(t,e,n){var r;let i=null;return(r=t.field(ah,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function QX(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function nR(t,e){return t.field(ah,!1)?e:e.concat(je.appendConfig.of(sZ()))}const eZ=t=>{for(let e of eR(t)){let n=q_(t.state,e.from,e.to);if(n)return t.dispatch({effects:nR(t.state,[Ox.of(n),rR(t,n)])}),!0}return!1},tZ=t=>{if(!t.state.field(ah,!1))return!1;let e=[];for(let n of eR(t)){let r=tR(t.state,n.from,n.to);r&&e.push(Og.of(r),rR(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function rR(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Pe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const nZ=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=q_(e,i.from,i.to);s&&n.push(Ox.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:nR(t.state,n)}),!!n.length},rZ=t=>{let e=t.state.field(ah,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(Og.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},iZ={placeholderDOM:null,placeholderText:"…"},iR=Se.define({combine(t){return Vo(t,iZ)}});function sZ(t){let e=[ah,oZ];return t&&e.push(iR.of(t)),e}const d2=Ze.replace({widget:new class extends Ha{toDOM(t){let{state:e}=t,n=e.facet(iR),r=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),a=tR(t.state,o.from,o.to);a&&t.dispatch({effects:Og.of(a)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),oZ=Pe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Tg{constructor(e,n){this.specs=e;let r;function i(a){let l=Mo.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof ri?a=>a.prop(xl)==o.data:o?a=>a==o:void 0,this.style=k_(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new Mo(r):null,this.themeType=n.themeType}static define(e,n){return new Tg(e,n||{})}}const Uw=Se.define(),sR=Se.define({combine(t){return t.length?[t[0]]:null}});function vy(t){let e=t.facet(Uw);return e.length?e:t.facet(sR)}function aZ(t,e){let n=[uZ],r;return t instanceof Tg&&(t.module&&n.push(Pe.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(sR.of(t)):r?n.push(Uw.computeN([Pe.darkTheme],i=>i.facet(Pe.darkTheme)==(r=="dark")?[t]:[])):n.push(Uw.of(t)),n}class lZ{constructor(e){this.markCache=Object.create(null),this.tree=Ts(e.state),this.decorations=this.buildDeco(e,vy(e.state))}update(e){let n=Ts(e.state),r=vy(e.state),i=r!=vy(e.startState);n.length<e.view.viewport.to&&!i&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,n){if(!n||!this.tree.length)return Ze.none;let r=new Da;for(let{from:i,to:s}of e.visibleRanges)vK(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Ze.mark({class:l})))},i,s);return r.finish()}}const uZ=Kd.high(qt.fromClass(lZ,{decorations:t=>t.decorations}));function h2(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=r;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class oR{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=h2(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:h2(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function cZ(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||dZ,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||_x}}function dZ(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const f2=new WeakMap;class Tx extends ri{constructor(e){let n=MX(e.languageData),r=cZ(e),i,s=new class extends bx{createParse(o,a,l){return new fZ(i,o,a,l)}};super(n,s,[X_.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=gZ(n),i=this,this.streamParser=r,this.stateAfter=new Ve({perNode:!0}),this.tokenTable=e.tokenTable?new cR(r.tokenTable):mZ}static define(e){return new Tx(e)}getIndent(e,n){let r=Ts(e.state),i=r.resolve(n);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let s,{overrideIndentation:o}=e.options;o&&(s=f2.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=Mx(this,r,0,i.from,s??n),l,u;if(a?(u=a.state,l=a.pos+1):(u=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),h=Math.min(n,d.to);if(d.length){let f=o?o(d.from):-1,p=new oR(d.text,e.state.tabSize,e.unit,f<0?void 0:f);for(;p.pos<h-d.from;)lR(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==n)break;l=d.to+1}let c=e.lineAt(n);return o&&s==null&&f2.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function Mx(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof ut&&l<i&&Mx(t,a,l,r,i);if(u)return u}return null}function aR(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<r&&a instanceof ut){if(!(l=aR(t,a,n-o,r-o,i)))break;return i?new ut(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function hZ(t,e,n,r){for(let i of e){let s=i.from+(i.openStart?25:0),o=i.to-(i.openEnd?25:0),a=s<=n&&o>n&&Mx(t,i.tree,0-i.offset,n,o),l;if(a&&(l=aR(t,i.tree,n+i.offset,a.pos+i.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(r?vm(r):4),tree:ut.empty}}class fZ{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=yu.get(),o=i[0].from,{state:a,tree:l}=hZ(e,r,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(vm(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=yu.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);n+=a,r=o+a.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(r,s,-1),r+=s,i+=this.chunk.length-o}return this.chunk.push(e,n,r,i),s}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new oR(n,e?e.state.tabSize:4,e?vm(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=lR(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=ut.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:pZ,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new ut(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new ut(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function lR(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const _x=Object.create(null),Dd=[Rn.none],pZ=new yx(Dd),p2=[],uR=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])uR[t]=dR(_x,e);class cR{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),uR)}resolve(e){return e?this.table[e]||(this.table[e]=dR(this.extra,e)):0}}const mZ=new cR(_x);function wy(t,e){p2.indexOf(t)>-1||(p2.push(t),console.warn(e))}function dR(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||_e[s];o?typeof o=="function"?n?n=o(n):wy(s,`Modifier ${s} used at start of tag`):n?wy(s,`Tag ${s} used as modifier`):n=o:wy(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let r=e.replace(/ /g,"_"),i=Rn.define({id:Dd.length,name:r,props:[x_({[r]:n})]});return Dd.push(i),i.id}function gZ(t){let e=Rn.define({id:Dd.length,name:"Document",props:[xl.add(()=>t)]});return Dd.push(e),e}function at(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)hR(t,arguments[e]);return t}function hR(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)hR(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const m2=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Id{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(m2(a)):m2,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return An(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=m1(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=ei(e);let i=this.normalize(n);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(Id.prototype[Symbol.iterator]=function(){return this});const fR={from:-1,to:-1,match:/.*/.exec("")},Rx="gm"+(/x/.unicode==null?"":"u");class pR{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=fR,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new mR(e,n,r,i,s);this.re=new RegExp(n,Rx+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=wm(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=wm(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const by=new WeakMap;class Bl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=by.get(e);if(!i||i.from>=r||i.to<=n){let a=new Bl(n,e.sliceString(n,r));return by.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),by.set(e,new Bl(o,s)),new Bl(n,s.slice(n-o,r-o))}}class mR{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=fR,this.matchPos=wm(e,i),this.re=new RegExp(n,Rx+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Bl.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=wm(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Bl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(pR.prototype[Symbol.iterator]=mR.prototype[Symbol.iterator]=function(){return this});function yZ(t){try{return new RegExp(t,Rx),!0}catch{return!1}}function wm(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Vw(t){let e=at("input",{class:"cm-textfield",name:"line"}),n=at("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),t.dispatch({effects:bm.of(!1)}),t.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},at("label",t.state.phrase("Go to line"),": ",e)," ",at("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,a,l,u,c]=i,d=u?+u.slice(1):0,h=l?+l:o.number;if(l&&c){let g=h/100;a&&(g=g*(a=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*g)}else l&&a&&(h=h*(a=="-"?-1:1)+o.number);let f=s.doc.line(Math.max(1,Math.min(s.doc.lines,h))),p=te.cursor(f.from+Math.max(0,Math.min(d,f.length)));t.dispatch({effects:[bm.of(!1),Pe.scrollIntoView(p.from,{y:"center"})],selection:p}),t.focus()}return{dom:n}}const bm=je.define(),g2=dn.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(bm)&&(t=n.value);return t},provide:t=>au.from(t,e=>e?Vw:null)}),vZ=t=>{let e=kd(t,Vw);if(!e){let n=[bm.of(!0)];t.state.field(g2,!1)==null&&n.push(je.appendConfig.of([g2,wZ])),t.dispatch({effects:n}),e=kd(t,Vw)}return e&&e.dom.querySelector("input").focus(),!0},wZ=Pe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),bZ=({state:t,dispatch:e})=>{let{selection:n}=t,r=te.create(n.ranges.map(i=>t.wordAt(i.head)||te.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function xZ(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new Id(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Id(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const SZ=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return bZ({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=xZ(t,r);return i?(e(t.update({selection:t.selection.addRange(te.range(i.from,i.to),!1),effects:Pe.scrollIntoView(i.to)})),!0):!1},Mu=Se.define({combine(t){return Vo(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new TZ(e),scrollToMatch:e=>Pe.scrollIntoView(e)})}});class gR{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||yZ(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new AZ(this):new CZ(this)}getCursor(e,n=0,r){let i=e.doc?e:ze.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?sl(this,i,n,r):il(this,i,n,r)}}class yR{constructor(e){this.spec=e}}function il(t,e,n,r){return new Id(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?kZ(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function kZ(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(xm(i,n-s))!=ln.Word||e(Sm(i,n-s))!=ln.Word)&&(e(Sm(i,r-s))!=ln.Word||e(xm(i,r-s))!=ln.Word))}class CZ extends yR{constructor(e){super(e)}nextMatch(e,n,r){let i=il(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=il(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=il(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=il(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=il(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function sl(t,e,n,r){return new pR(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?EZ(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function xm(t,e){return t.slice(vn(t,e,!1),e)}function Sm(t,e){return t.slice(e,vn(t,e))}function EZ(t){return(e,n,r)=>!r[0].length||(t(xm(r.input,r.index))!=ln.Word||t(Sm(r.input,r.index))!=ln.Word)&&(t(Sm(r.input,r.index+r[0].length))!=ln.Word||t(xm(r.input,r.index+r[0].length))!=ln.Word)}class AZ extends yR{nextMatch(e,n,r){let i=sl(this.spec,e,r,e.doc.length).next();return i.done&&(i=sl(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=sl(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n))}matchAll(e,n){let r=sl(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=sl(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Ld=je.define(),Dx=je.define(),ko=dn.define({create(t){return new xy(Hw(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ld)?t=new xy(n.value.create(),t.panel):n.is(Dx)&&(t=new xy(t.query,n.value?Ix:null));return t},provide:t=>au.from(t,e=>e.panel)});class xy{constructor(e,n){this.query=e,this.panel=n}}const PZ=Ze.mark({class:"cm-searchMatch"}),NZ=Ze.mark({class:"cm-searchMatch cm-searchMatch-selected"}),$Z=qt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ko))}update(t){let e=t.state.field(ko);(e!=t.startState.field(ko)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ze.none;let{view:n}=this,r=new Da;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);r.add(u,c,d?NZ:PZ)})}return r.finish()}},{decorations:t=>t.decorations});function lh(t){return e=>{let n=e.state.field(ko,!1);return n&&n.query.spec.valid?t(e,n):SR(e)}}const y2=lh((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=te.single(r.from,r.to),s=t.state.facet(Mu);return t.dispatch({selection:i,effects:[Lx(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),xR(t),!0}),v2=lh((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=te.single(i.from,i.to),o=t.state.facet(Mu);return t.dispatch({selection:s,effects:[Lx(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),xR(t),!0}),vR=lh((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:te.create(n.map(r=>te.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),OZ=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new Id(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(te.range(a.value.from,a.value.to))}return e(t.update({selection:te.create(s,o),userEvent:"select.search.matches"})),!0},w2=lh((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=[],a,l,u=[];if(s.from==r&&s.to==i&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),u.push(Pe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=te.single(s.from-c,s.to-c),u.push(Lx(t,s)),u.push(n.facet(Mu).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:u,userEvent:"input.replace"}),!0}),wR=lh((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Pe.announce.of(r),userEvent:"input.replace.all"}),!0});function Ix(t){return t.state.facet(Mu).createPanel(t)}function Hw(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(Mu);return new gR({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function bR(t){let e=kd(t,Ix);return e&&e.dom.querySelector("[main-field]")}function xR(t){let e=bR(t);e&&e==t.root.activeElement&&e.select()}const SR=t=>{let e=t.state.field(ko,!1);if(e&&e.panel){let n=bR(t);if(n&&n!=t.root.activeElement){let r=Hw(t.state,e.query.spec);r.valid&&t.dispatch({effects:Ld.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Dx.of(!0),e?Ld.of(Hw(t.state,e.query.spec)):je.appendConfig.of(_Z)]});return!0},kR=t=>{let e=t.state.field(ko,!1);if(!e||!e.panel)return!1;let n=kd(t,Ix);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Dx.of(!1)}),!0};class TZ{constructor(e){this.view=e;let n=this.query=e.state.field(ko).query.spec;this.commit=this.commit.bind(this),this.searchField=at("input",{value:n.search,placeholder:er(e,"Find"),"aria-label":er(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=at("input",{value:n.replace,placeholder:er(e,"Replace"),"aria-label":er(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=at("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=at("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=at("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return at("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=at("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>y2(e),[er(e,"next")]),r("prev",()=>v2(e),[er(e,"previous")]),r("select",()=>vR(e),[er(e,"all")]),at("label",null,[this.caseField,er(e,"match case")]),at("label",null,[this.reField,er(e,"regexp")]),at("label",null,[this.wordField,er(e,"by word")]),...e.state.readOnly?[]:[at("br"),this.replaceField,r("replace",()=>w2(e),[er(e,"replace")]),r("replaceAll",()=>wR(e),[er(e,"replace all")])],at("button",{name:"close",onclick:()=>kR(e),"aria-label":er(e,"close"),type:"button"},["×"])])}commit(){let e=new gR({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ld.of(e)}))}keydown(e){tz(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?v2:y2)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),w2(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Ld)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Mu).top}}function er(t,e){return t.state.phrase(e)}const df=30,hf=/[\s\.,:;?!]/;function Lx(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-df),o=Math.min(i,n+df),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<df;l++)if(!hf.test(a[l+1])&&hf.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-df;l--)if(!hf.test(a[l-1])&&hf.test(a[l])){a=a.slice(0,l);break}}return Pe.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const MZ=Pe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),_Z=[ko,Kd.lowest($Z),MZ];class RZ{constructor(e,n,r){this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let n=Ts(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(CR(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function b2(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function DZ(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=b2(e)+b2(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function IZ(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:DZ(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class x2{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function zl(t){return t.selection.main.from}function CR(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const LZ=Rs.define();function BZ(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r)?{range:a}:{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:e},range:te.cursor(a.from+s+e.length)})),{userEvent:"input.complete"})}const S2=new WeakMap;function zZ(t){if(!Array.isArray(t))return t;let e=S2.get(t);return e||S2.set(t,e=IZ(t)),e}const ER=je.define(),Bx=je.define();class jZ{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=An(e,n),i=ei(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(An(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let v=An(e,0),w=ei(v),S=w==e.length?0:-100;if(v!=n[0])if(v==r[0])S+=-200;else return!1;return this.ret(S,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let v=0,w=Math.min(e.length,200);v<w&&u<l;){let S=An(e,v);(S==n[u]||S==r[u])&&(i[u++]=v),v+=ei(S)}if(u<l)return!1}let c=0,d=0,h=!1,f=0,p=-1,g=-1,b=/[a-z]/.test(e),m=!0;for(let v=0,w=Math.min(e.length,200),S=0;v<w&&d<l;){let C=An(e,v);a<0&&(c<l&&C==n[c]&&(s[c++]=v),f<l&&(C==n[f]||C==r[f]?(f==0&&(p=v),g=v+1,f++):f=0));let E,$=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(E=m1(C))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!v||$==1&&b||S==0&&$!=0)&&(n[d]==C||r[d]==C&&(h=!0)?o[d++]=v:o.length&&(m=!1)),S=$,v+=ei(C)}return d==l&&o[0]==0&&m?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-200+-700-e.length,[p,g]):d==l?this.result(-100+(h?-200:0)+-700+(m?0:-1100),o,e):n.length==2?!1:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?ei(An(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}const ps=Se.define({combine(t){return Vo(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:FZ,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>k2(e(r),n(r)),optionClass:(e,n)=>r=>k2(e(r),n(r)),addToOptions:(e,n)=>e.concat(n)})}});function k2(t,e){return t?e?t+" "+e:t:e}function FZ(t,e,n,r,i){let s=t.textDirection==Pt.RTL,o=s,a=!1,l="top",u,c,d=e.left-i.left,h=i.right-e.right,f=r.right-r.left,p=r.bottom-r.top;if(o&&d<Math.min(f,h)?o=!1:!o&&h<Math.min(f,d)&&(o=!0),f<=(o?d:h))u=Math.max(i.top,Math.min(n.top,i.bottom-p))-e.top,c=Math.min(400,o?d:h);else{a=!0,c=Math.min(400,(s?e.right:i.right-e.left)-30);let g=i.bottom-e.bottom;g>=p||g>e.top?u=n.bottom-e.top:(l="bottom",u=e.bottom-n.top)}return{style:`${l}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":o?"left":"right")}}function UZ(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i){let s=document.createElement("span");s.className="cm-completionLabel";let o=n.displayLabel||n.label,a=0;for(let l=0;l<i.length;){let u=i[l++],c=i[l++];u>a&&s.appendChild(document.createTextNode(o.slice(a,u)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(u,c))),d.className="cm-completionMatchedText",a=c}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function C2(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class VZ{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(ps);this.optionContent=UZ(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=C2(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let u=l.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<s.length){this.applyCompletion(e,s[+c[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(ps).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Bx.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,r,i;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((i=s.open)===null||i===void 0)&&i.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=C2(n.options.length,n.selected,this.view.state.facet(ps).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Ir(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&WZ(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(ps).positionInfo(this.view,n,i,r,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>r.from||r.from==0))if(s=h,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let f=i.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=i.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,l);f&&c.appendChild(f)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function HZ(t,e){return n=>new VZ(n,t,e)}function WZ(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}function E2(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function GZ(t,e){let n=[],r=null,i=l=>{n.push(l);let{section:u}=l.completion;if(u){r||(r=[]);let c=typeof u=="string"?u:u.name;r.some(d=>d.name==c)||r.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult()){let u=l.result.getMatch;if(l.result.filter===!1)for(let c of l.result.options)i(new x2(c,l.source,u?u(c):[],1e9-n.length));else{let c=new jZ(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(c.match(d.label)){let h=d.displayLabel?u?u(d,c.matched):[]:c.matched;i(new x2(d,l.source,h,c.score+(d.boost||0)))}}}if(r){let l=Object.create(null),u=0,c=(d,h)=>{var f,p;return((f=d.rank)!==null&&f!==void 0?f:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(d.name<h.name?-1:1)};for(let d of r.sort(c))u-=1e5,l[d.name]=u;for(let d of n){let{section:h}=d.completion;h&&(d.score+=l[typeof h=="string"?h:h.name])}}let s=[],o=null,a=e.facet(ps).compareCompletions;for(let l of n.sort((u,c)=>c.score-u.score||a(u.completion,c.completion))){let u=l.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?s.push(l):E2(l.completion)>E2(o)&&(s[s.length-1]=l),o=l.completion}return s}class Sl{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Sl(this.options,A2(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s){let o=GZ(e,n);if(!o.length)return i&&e.some(l=>l.state==1)?new Sl(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=n.facet(ps).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){a=u;break}}return new Sl(o,A2(r,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:HZ(_u,PR),above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Sl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class km{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new km(ZZ,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(ps),s=(r.override||n.languageDataAt("autocomplete",zl(n)).map(zZ)).map(a=>(this.active.find(u=>u.source==a)||new cr(a,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!KZ(s,this.active)?o=Sl.build(s,n,this.id,o,r):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new cr(a.source,0):a));for(let a of e.effects)a.is(AR)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new km(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:XZ}}function KZ(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const XZ={"aria-autocomplete":"list"};function A2(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const ZZ=[];function YZ(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class cr{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=YZ(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new cr(i.source,0));for(let s of e.effects)if(s.is(ER))i=new cr(i.source,1,s.value?zl(e.state):-1);else if(s.is(Bx))i=new cr(i.source,0);else if(s.is(qZ))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new cr(this.source,1)}handleChange(e){return e.changes.touchesRange(zl(e.startState))?new cr(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new cr(this.source,this.state,e.mapPos(this.explicitPos))}}class Rc extends cr{constructor(e,n,r,i,s){super(e,2,n),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,n,r){var i;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=zl(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&zl(e.startState)==this.from)return new cr(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return JZ(this.result.validFor,e.state,s,o)?new Rc(this.source,l,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new RZ(e.state,a,l>=0)))?new Rc(this.source,l,u,u.from,(i=u.to)!==null&&i!==void 0?i:zl(e.state)):new cr(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new cr(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Rc(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function JZ(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):CR(t,!0).test(i)}const qZ=je.define({map(t,e){return t.map(n=>n.map(e))}}),AR=je.define(),_u=dn.define({create(){return km.start()},update(t,e){return t.update(e)},provide:t=>[E1.from(t,e=>e.tooltip),Pe.contentAttributes.from(t,e=>e.attrs)]});function PR(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(_u).active.find(i=>i.source==e.source);return r instanceof Rc?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},BZ(t.state,n,r.from,r.to)),{annotations:LZ.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}function ff(t,e="option"){return n=>{let r=n.state.field(_u,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(ps).interactionDelay)return!1;let i=1,s;e=="page"&&(s=Rz(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:AR.of(a)}),!0}}const P2=t=>{let e=t.state.field(_u,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(ps).interactionDelay?!1:PR(t,e.open.options[e.open.selected])},QZ=t=>t.state.field(_u,!1)?(t.dispatch({effects:ER.of(!0)}),!0):!1,eY=t=>{let e=t.state.field(_u,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Bx.of(null)}),!0)},NR={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},$R=new class extends Ra{};$R.startSide=1;$R.endSide=-1;const Sy="()[]{}<>";function tY(t){for(let e=0;e<Sy.length;e+=2)if(Sy.charCodeAt(e)==t)return Sy.charAt(e+1);return m1(t<128?t:t+1)}function nY(t,e){return t.languageDataAt("closeBrackets",e)[0]||NR}const rY=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=nY(t,t.selection.main.head).brackets||NR.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=sY(t.doc,o.head);for(let l of r)if(l==a&&iY(t.doc,o.head)==tY(An(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:te.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i};function iY(t,e){let n=t.sliceString(e,e+2);return n.slice(0,ei(An(n,0)))}function sY(t,e){let n=t.sliceString(e-2,e);return ei(An(n,0))==n.length?n:n.slice(1)}class oY{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class la{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,s=r.facet(ma).markerFilter;s&&(i=s(i));let o=Ze.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?Ze.widget({widget:new yY(a),diagnostic:a}).range(a.from):Ze.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new la(o,n,bu(o))}}function bu(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new oY(i,s,o.diagnostic),!1}),r}function aY(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(r=>r.is(zx))||t.changes.touchesRange(n.from,n.to))}function OR(t,e){return t.field(Xn,!1)?e:e.concat(je.appendConfig.of(RR))}function lY(t,e){return{effects:OR(t,[zx.of(e)])}}const zx=je.define(),jx=je.define(),TR=je.define(),Xn=dn.define({create(){return new la(Ze.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=bu(n,t.selected.diagnostic,i)||bu(n,null,i)}t=new la(n,t.panel,r)}for(let n of e.effects)n.is(zx)?t=la.init(n.value,t.panel,e.state):n.is(jx)?t=new la(t.diagnostics,n.value?Mg.open:null,t.selected):n.is(TR)&&(t=new la(t.diagnostics,t.panel,n.value));return t},provide:t=>[au.from(t,e=>e.panel),Pe.decorations.from(t,e=>e.diagnostics)]});function uY(t){let e=t.field(Xn,!1);return e?e.diagnostics.size:0}const cY=Ze.mark({class:"cm-lintRange cm-lintRange-active"});function dY(t,e,n){let{diagnostics:r}=t.state.field(Xn),i=[],s=2e8,o=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(i.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(ma).tooltipFilter;return a&&(i=a(i)),i.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:hY(t,i)}}}:null}function hY(t,e){return at("ul",{class:"cm-tooltip-lint"},e.map(n=>_R(t,n,!1)))}const fY=t=>{let e=t.state.field(Xn,!1);(!e||!e.panel)&&t.dispatch({effects:OR(t.state,[jx.of(!0)])});let n=kd(t,Mg.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},N2=t=>{let e=t.state.field(Xn,!1);return!e||!e.panel?!1:(t.dispatch({effects:jx.of(!1)}),!0)},pY=t=>{let e=t.state.field(Xn,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},mY=qt.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(ma);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(ma);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(lY(this.view.state,i))},r=>{Ir(this.view.state,r)})}}update(t){let e=t.state.facet(ma);(t.docChanged||e!=t.startState.facet(ma)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),ma=Se.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Vo(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function gY(t,e={}){return[ma.of({source:t,config:e}),mY,RR]}function MR(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function _R(t,e,n){var r;let i=n?MR(e.actions):[];return at("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},at("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=bu(t.state.field(Xn).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=i[o]?u.indexOf(i[o]):-1,d=c<0?u:[u.slice(0,c),at("u",u.slice(c,c+1)),u.slice(c+1)];return at("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&at("div",{class:"cm-diagnosticSource"},e.source))}class yY extends Ha{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return at("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class $2{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=_R(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Mg{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)N2(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=MR(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=bu(this.view.state.field(Xn).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=at("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=at("div",{class:"cm-panel-lint"},this.list,at("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>N2(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Xn).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Xn),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new $2(this.view,l.diagnostic),this.items.splice(r,0,c),i=!0):(c=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new $2(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Xn),r=bu(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:TR.of(r)})}static open(e){return new Mg(e)}}function vY(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function pf(t){return vY(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const wY=Pe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:pf("#d11")},".cm-lintRange-warning":{backgroundImage:pf("orange")},".cm-lintRange-info":{backgroundImage:pf("#999")},".cm-lintRange-hint":{backgroundImage:pf("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),RR=[Xn,Pe.decorations.compute([Xn],t=>{let{selected:e,panel:n}=t.field(Xn);return!e||!n||e.from==e.to?Ze.none:Ze.set([cY.range(e.from,e.to)])}),_z(dY,{hideOn:aY}),wY],DR=t=>e=>{const n=t==="down";let r=e.state.selection;for(const i of r.ranges)r=r.addRange(e.moveVertically(i,n));return e.dispatch({selection:r}),!0},bY=DR("up"),xY=DR("down"),SY=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let r=n.from;r<=n.to;){const i=t.state.doc.lineAt(r),s=Math.min(i.to,n.to);e?e=e.addRange(te.range(s,s)):e=te.single(s),r=i.to+1}return e?(t.dispatch({selection:e}),!0):!1},kY=[{key:"Ctrl-Space",run:QZ},{key:"Escape",run:eY},{key:"ArrowDown",run:ff(!0)},{key:"ArrowUp",run:ff(!1)},{key:"PageDown",run:ff(!0,"page")},{key:"PageUp",run:ff(!1,"page")},{key:"Enter",run:P2},{key:"Tab",run:P2},{key:"Mod-f",run:SR,scope:"editor search-panel"},{key:"Escape",run:kR,scope:"editor search-panel"},{key:"Alt-Enter",run:vR,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:wR,scope:"editor search-panel"},{key:"Ctrl-g",run:vZ},{key:"Mod-d",run:SZ,preventDefault:!0},{key:"Shift-Mod-l",run:OZ},{key:"Enter",run:o2,shift:o2},{key:"ArrowLeft",run:zE,shift:WE,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:uX,shift:mX},{key:"ArrowRight",run:jE,shift:GE,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cX,shift:gX},{key:"ArrowUp",run:FE,shift:KE,preventDefault:!0},{key:"ArrowDown",run:UE,shift:XE,preventDefault:!0},{key:"Home",run:HE,shift:qE},{mac:"Cmd-ArrowLeft",run:HE,shift:qE},{key:"Mod-Home",run:QE,shift:t2},{mac:"Cmd-ArrowUp",run:QE,shift:t2},{key:"PageUp",run:fy,shift:ZE},{mac:"Ctrl-ArrowUp",run:fy,shift:ZE},{key:"PageDown",run:py,shift:YE},{mac:"Ctrl-ArrowDown",run:py,shift:YE},{key:"End",run:VE,shift:JE},{mac:"Cmd-ArrowRight",run:VE,shift:JE},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:bY,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:xY,preventDefault:!0},{key:"Shift-Alt-i",run:SY},{key:"Mod-End",run:e2,shift:n2},{mac:"Cmd-ArrowDown",run:e2,shift:n2},{key:"Mod-a",run:wX},{key:"Backspace",run:rY},{key:"Backspace",run:my,shift:my},{key:"Delete",run:r2},{key:"Mod-Backspace",mac:"Alt-Backspace",run:i2},{key:"Mod-Delete",mac:"Alt-Delete",run:xX},{mac:"Mod-Backspace",run:SX},{mac:"Mod-Delete",run:s2},{mac:"Ctrl-b",run:zE,shift:WE,preventDefault:!0},{mac:"Ctrl-f",run:jE,shift:GE},{mac:"Ctrl-p",run:FE,shift:KE},{mac:"Ctrl-n",run:UE,shift:XE},{mac:"Ctrl-a",run:dX,shift:yX},{mac:"Ctrl-e",run:hX,shift:vX},{mac:"Ctrl-d",run:r2},{mac:"Ctrl-h",run:my},{mac:"Ctrl-k",run:s2},{mac:"Ctrl-Alt-h",run:i2},{mac:"Ctrl-o",run:kX},{mac:"Ctrl-t",run:CX},{mac:"Ctrl-v",run:py},{mac:"Alt-v",run:fy},{key:"Shift-Mod-k",run:$X},{key:"Alt-ArrowDown",run:AX},{key:"Alt-ArrowUp",run:EX},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:NX},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:PX},{key:"Mod-l",run:bX,preventDefault:!0},{key:"Shift-Mod-\\",run:pX},{key:"Tab",run:a2,shift:l2,preventDefault:!0},{key:"Mod-[",run:l2},{key:"Mod-]",run:a2},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:eZ},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:tZ},{key:"Mod-k Mod-0",run:nZ},{key:"Mod-k Mod-j",run:rZ},{key:"Mod-k Mod-c",run:GK},{key:"Mod-k Mod-u",run:KK},{key:"Mod-/",run:HK},{key:"Shift-Alt-a",run:XK},{key:"Mod-z",run:O_,preventDefault:!0},{key:"Mod-y",run:Fw,preventDefault:!0},{key:"Mod-Shift-z",run:Fw,preventDefault:!0},{key:"Mod-u",run:nX,preventDefault:!0},{key:"Mod-Shift-m",run:fY},{key:"F8",run:pY}];function CY(t){const e=document.createElement("div");return O2(t.state,e),{dom:e,update(n){O2(n.view.state,e)}}}function O2(t,e){const n=uY(t);e.textContent=Ym(pi().language,"editor.lintSummary",n),e.className=Ue("border-t border-stone-600 bg-stone-800 pr-3 text-right font-sans text-xs tracking-wider",n===0?"text-stone-400":"font-semibold text-red-400")}const IR="vonsim-program",EY=qt.fromClass(class{constructor(t){ue(this,"timeout",null);this.view=t}update(t){t.docChanged&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=this.view.state.doc.toString();localStorage.setItem(IR,e),this.timeout=null},500))}}),AY=`; ¡Bienvenido a VonSim!
; Este es un ejemplo de código que calcula los primeros
; n números de la sucesión de Fibonacci, y se guardan a
; partir de la posición 1000h de la memoria.

     n EQU 10    ; Calcula los primeros 10 números

       ORG 1000h
inicio DB 1

       ORG 2000h
       MOV BX, OFFSET inicio + 1
       MOV AL, 0
       MOV AH, inicio

BUCLE: CMP BX, OFFSET inicio + n
       JNS FIN
       MOV CL, AH
       ADD CL, AL
       MOV AL, AH
       MOV AH, CL
       MOV [BX], CL
       INC BX
       JMP BUCLE
  FIN: HLT
       END
`,PY=localStorage.getItem(IR)||AY,tr={comment:_e.comment,"data-directive":nn.define(),identifier:_e.variableName,instruction:nn.define(),label:_e.labelName,number:_e.number,operator:_e.operator,offset:nn.define(),"ptr-size":nn.define(),punctuation:_e.punctuation,register:nn.define(),special:nn.define(),string:_e.string,unassigned:nn.define()},NY=Tx.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":h1.includes(e)?"data-directive":f1.includes(e)?"instruction":jp.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:tr}),$Y=aZ(Tg.define([{tag:tr.comment,class:"text-stone-500 italic"},{tag:tr["data-directive"],class:"text-rose-400/80"},{tag:tr.instruction,class:"text-mantis-400"},{tag:tr.number,class:"text-cyan-300/60"},{tag:tr.operator,class:"text-rose-300"},{tag:tr.offset,class:"text-rose-400/80 italic"},{tag:tr["ptr-size"],class:"text-rose-400/80 italic"},{tag:tr.punctuation,class:"text-stone-600"},{tag:tr.register,class:"text-emerald-400/80"},{tag:tr.special,class:"text-yellow-300/80"},{tag:tr.string,class:"text-orange-300"},{tag:tr.unassigned,class:"text-rose-400/80"}])),OY=gY(t=>{const e=t.state.doc.toString(),n=j$(e);if(n.success)return[];const r=pi().language;return n.errors.map(i=>{var a,l;const s=((a=i.position)==null?void 0:a.start)??0,o=((l=i.position)==null?void 0:l.end)??e.length;return{message:i.translate(r),severity:"error",from:s,to:o}})},{delay:200});function TY(){return new IX(NY,[$Y,OY])}function LR({className:t}){const[e,n]=y.useState(),r=y.useCallback(i=>{i&&n(i)},[]);return y.useEffect(()=>{if(e)return window.codemirror=new Pe({state:ze.create({doc:PY,extensions:[ze.tabSize.of(2),pT.of(ze.readOnly.of(!1)),EY,Uz(),Gz,Wz(),vz(),tX(),az(),hz(),ze.allowMultipleSelections.of(!0),XX(),Cz(),tT.of([...kY,{key:"Escape",run:i=>(i.dispatch({selection:te.create([i.state.selection.main],0)}),!0)}]),TY(),au.of(CY)]}),parent:e}),()=>{var i;return(i=window.codemirror)==null?void 0:i.destroy()}},[e]),Ac(i=>i.ctrlKey&&i.key==="s",i=>{if(i.preventDefault(),!window.codemirror)return;const s=new Blob([window.codemirror.state.doc.toString()],{type:"text/plain"}),o=URL.createObjectURL(s),a=document.createElement("a");a.style.display="none",a.href=o,a.download=`vonsim-${new Date().toISOString().slice(0,16)}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}),x.jsx("div",{ref:r,className:Ue("overflow-auto font-mono",t)})}function MY(){const t=yt(),e=GL("(max-width: 640px)"),{updateServiceWorker:n}=JL({onNeedRefresh(){tu(t("update.update-available"),{action:{label:t("update.reload"),onClick:()=>n(!0)}})}});return x.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",children:[x.jsx(UH,{}),e?x.jsx(RY,{}):x.jsx(_Y,{}),x.jsx(f6,{})]})}function _Y(){const[t]=Hd(dx);return x.jsxs(EN,{autoSaveId:"layout",direction:"horizontal",units:"pixels",tagName:"main",className:"overflow-auto px-2",children:[x.jsx(Pf,{id:"panel-editor",order:1,minSize:250,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:x.jsx(LR,{className:"h-full w-full"})}),x.jsx(kv,{className:"w-2"}),x.jsx(Pf,{id:"panel-computer",order:2,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:x.jsx(f_,{})}),t&&x.jsxs(x.Fragment,{children:[x.jsx(kv,{className:"w-2"}),x.jsx(Pf,{id:"panel-settings",order:3,minSize:450,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:x.jsx(FM,{className:"h-full w-full"})})]})]})}function RY(){const t=yt(),[e,n]=y.useState("editor"),[r,i]=Hd(dx),s=r?"settings":e,o=a=>{r&&i(!1),n(a)};return x.jsx(sL,{value:s,onValueChange:o,asChild:!0,children:x.jsxs(x.Fragment,{children:[x.jsx(a0,{value:"editor",asChild:!0,children:x.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:x.jsx(LR,{className:"h-full w-full"})})}),x.jsx(a0,{value:"computer",asChild:!0,children:x.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:x.jsx(f_,{})})}),x.jsx(a0,{value:"settings",asChild:!0,children:x.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:x.jsx(FM,{className:"h-full w-full"})})}),x.jsxs(aL,{className:"grid grid-cols-2 gap-2 p-2",children:[x.jsxs(JS,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[x.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 h-4 w-4"}),t("control.tabs.editor")]}),x.jsxs(JS,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[x.jsx("span",{className:"icon-[lucide--computer] mr-2 h-4 w-4"}),t("control.tabs.computer")]})]})]})})}window.codemirror=null;ky.createRoot(document.getElementById("root")).render(x.jsxs(de.StrictMode,{children:[x.jsx(TI,{richColors:!0,closeButton:!0,position:"top-center"}),x.jsx(r5,{children:x.jsx(MY,{})})]}));
