var uM=Object.defineProperty;var cM=(t,e,n)=>e in t?uM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oe=(t,e,n)=>(cM(t,typeof e!="symbol"?e+"":e,n),n),Fm=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var C=(t,e,n)=>(Fm(t,e,"read from private field"),n?n.call(t):e.get(t)),xe=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},q=(t,e,n,i)=>(Fm(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var Qe=(t,e,n)=>(Fm(t,e,"access private method"),n);function dM(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var hM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nC={exports:{}},Ip={},iC={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad=Symbol.for("react.element"),fM=Symbol.for("react.portal"),pM=Symbol.for("react.fragment"),mM=Symbol.for("react.strict_mode"),gM=Symbol.for("react.profiler"),yM=Symbol.for("react.provider"),vM=Symbol.for("react.context"),wM=Symbol.for("react.forward_ref"),bM=Symbol.for("react.suspense"),xM=Symbol.for("react.memo"),SM=Symbol.for("react.lazy"),ub=Symbol.iterator;function kM(t){return t===null||typeof t!="object"?null:(t=ub&&t[ub]||t["@@iterator"],typeof t=="function"?t:null)}var rC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sC=Object.assign,oC={};function ru(t,e,n){this.props=t,this.context=e,this.refs=oC,this.updater=n||rC}ru.prototype.isReactComponent={};ru.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ru.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aC(){}aC.prototype=ru.prototype;function $v(t,e,n){this.props=t,this.context=e,this.refs=oC,this.updater=n||rC}var Lv=$v.prototype=new aC;Lv.constructor=$v;sC(Lv,ru.prototype);Lv.isPureReactComponent=!0;var cb=Array.isArray,lC=Object.prototype.hasOwnProperty,Iv={current:null},uC={key:!0,ref:!0,__self:!0,__source:!0};function cC(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)lC.call(e,i)&&!uC.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:ad,type:t,key:s,ref:o,props:r,_owner:Iv.current}}function EM(t,e){return{$$typeof:ad,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bv(t){return typeof t=="object"&&t!==null&&t.$$typeof===ad}function CM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var db=/\/+/g;function Um(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CM(""+t.key):e.toString(36)}function Oh(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ad:case fM:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Um(o,0):i,cb(r)?(n="",t!=null&&(n=t.replace(db,"$&/")+"/"),Oh(r,e,n,"",function(u){return u})):r!=null&&(Bv(r)&&(r=EM(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(db,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",cb(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Um(s,a);o+=Oh(s,e,n,l,r)}else if(l=kM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Um(s,a++),o+=Oh(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Od(t,e,n){if(t==null)return t;var i=[],r=0;return Oh(t,i,"","",function(s){return e.call(n,s,r++)}),i}function AM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},Nh={transition:null},PM={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:Nh,ReactCurrentOwner:Iv};Ue.Children={map:Od,forEach:function(t,e,n){Od(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Od(t,function(){e++}),e},toArray:function(t){return Od(t,function(e){return e})||[]},only:function(t){if(!Bv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=ru;Ue.Fragment=pM;Ue.Profiler=gM;Ue.PureComponent=$v;Ue.StrictMode=mM;Ue.Suspense=bM;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PM;Ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=sC({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Iv.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)lC.call(e,l)&&!uC.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:ad,type:t.type,key:r,ref:s,props:i,_owner:o}};Ue.createContext=function(t){return t={$$typeof:vM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yM,_context:t},t.Consumer=t};Ue.createElement=cC;Ue.createFactory=function(t){var e=cC.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:wM,render:t}};Ue.isValidElement=Bv;Ue.lazy=function(t){return{$$typeof:SM,_payload:{_status:-1,_result:t},_init:AM}};Ue.memo=function(t,e){return{$$typeof:xM,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=Nh.transition;Nh.transition={};try{t()}finally{Nh.transition=e}};Ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ue.useCallback=function(t,e){return Tn.current.useCallback(t,e)};Ue.useContext=function(t){return Tn.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return Tn.current.useEffect(t,e)};Ue.useId=function(){return Tn.current.useId()};Ue.useImperativeHandle=function(t,e,n){return Tn.current.useImperativeHandle(t,e,n)};Ue.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return Tn.current.useMemo(t,e)};Ue.useReducer=function(t,e,n){return Tn.current.useReducer(t,e,n)};Ue.useRef=function(t){return Tn.current.useRef(t)};Ue.useState=function(t){return Tn.current.useState(t)};Ue.useSyncExternalStore=function(t,e,n){return Tn.current.useSyncExternalStore(t,e,n)};Ue.useTransition=function(){return Tn.current.useTransition()};Ue.version="18.2.0";iC.exports=Ue;var k=iC.exports;const ue=iu(k),zv=dM({__proto__:null,default:ue},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OM=k,NM=Symbol.for("react.element"),TM=Symbol.for("react.fragment"),RM=Object.prototype.hasOwnProperty,MM=OM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DM={key:!0,ref:!0,__self:!0,__source:!0};function dC(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)RM.call(e,i)&&!DM.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:NM,type:t,key:s,ref:o,props:r,_owner:MM.current}}Ip.Fragment=TM;Ip.jsx=dC;Ip.jsxs=dC;nC.exports=Ip;var S=nC.exports;var ky={},hC={exports:{}},fi={},fC={exports:{}},pC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,I){var Y=L.length;L.push(I);e:for(;0<Y;){var ae=Y-1>>>1,ve=L[ae];if(0<r(ve,I))L[ae]=I,L[Y]=ve,Y=ae;else break e}}function n(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var I=L[0],Y=L.pop();if(Y!==I){L[0]=Y;e:for(var ae=0,ve=L.length,Se=ve>>>1;ae<Se;){var U=2*(ae+1)-1,B=L[U],W=U+1,b=L[W];if(0>r(B,Y))W<ve&&0>r(b,B)?(L[ae]=b,L[W]=Y,ae=W):(L[ae]=B,L[U]=Y,ae=U);else if(W<ve&&0>r(b,Y))L[ae]=b,L[W]=Y,ae=W;else break e}}return I}function r(L,I){var Y=L.sortIndex-I.sortIndex;return Y!==0?Y:L.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var I=n(u);I!==null;){if(I.callback===null)i(u);else if(I.startTime<=L)i(u),I.sortIndex=I.expirationTime,e(l,I);else break;I=n(u)}}function x(L){if(y=!1,v(L),!p)if(n(l)!==null)p=!0,J(E);else{var I=n(u);I!==null&&G(x,I.startTime-L)}}function E(L,I){p=!1,y&&(y=!1,m(P),P=-1),f=!0;var Y=h;try{for(v(I),d=n(l);d!==null&&(!(d.expirationTime>I)||L&&!M());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,h=d.priorityLevel;var ve=ae(d.expirationTime<=I);I=t.unstable_now(),typeof ve=="function"?d.callback=ve:d===n(l)&&i(l),v(I)}else i(l);d=n(l)}if(d!==null)var Se=!0;else{var U=n(u);U!==null&&G(x,U.startTime-I),Se=!1}return Se}finally{d=null,h=Y,f=!1}}var O=!1,N=null,P=-1,R=5,_=-1;function M(){return!(t.unstable_now()-_<R)}function H(){if(N!==null){var L=t.unstable_now();_=L;var I=!0;try{I=N(!0,L)}finally{I?F():(O=!1,N=null)}}else O=!1}var F;if(typeof g=="function")F=function(){g(H)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,X=j.port2;j.port1.onmessage=H,F=function(){X.postMessage(null)}}else F=function(){w(H,0)};function J(L){N=L,O||(O=!0,F())}function G(L,I){P=w(function(){L(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,J(E))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var Y=h;h=I;try{return L()}finally{h=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,I){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Y=h;h=L;try{return I()}finally{h=Y}},t.unstable_scheduleCallback=function(L,I,Y){var ae=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ae+Y:ae):Y=ae,L){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Y+ve,L={id:c++,callback:I,priorityLevel:L,startTime:Y,expirationTime:ve,sortIndex:-1},Y>ae?(L.sortIndex=Y,e(u,L),n(l)===null&&L===n(u)&&(y?(m(P),P=-1):y=!0,G(x,Y-ae))):(L.sortIndex=ve,e(l,L),p||f||(p=!0,J(E))),L},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(L){var I=h;return function(){var Y=h;h=I;try{return L.apply(this,arguments)}finally{h=Y}}}})(pC);fC.exports=pC;var _M=fC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=k,hi=_M;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gC=new Set,hc={};function ka(t,e){$l(t,e),$l(t+"Capture",e)}function $l(t,e){for(hc[t]=e,t=0;t<e.length;t++)gC.add(e[t])}var hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ey=Object.prototype.hasOwnProperty,$M=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hb={},fb={};function LM(t){return Ey.call(fb,t)?!0:Ey.call(hb,t)?!1:$M.test(t)?fb[t]=!0:(hb[t]=!0,!1)}function IM(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BM(t,e,n,i){if(e===null||typeof e>"u"||IM(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ln[t]=new Rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ln[e]=new Rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ln[t]=new Rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ln[t]=new Rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ln[t]=new Rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ln[t]=new Rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ln[t]=new Rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ln[t]=new Rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ln[t]=new Rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var jv=/[\-:]([a-z])/g;function Fv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jv,Fv);ln[e]=new Rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jv,Fv);ln[e]=new Rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jv,Fv);ln[e]=new Rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ln[t]=new Rn(t,1,!1,t.toLowerCase(),null,!1,!1)});ln.xlinkHref=new Rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ln[t]=new Rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uv(t,e,n,i){var r=ln.hasOwnProperty(e)?ln[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BM(e,n,r,i)&&(n=null),i||r===null?LM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var xs=mC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nd=Symbol.for("react.element"),Ka=Symbol.for("react.portal"),Xa=Symbol.for("react.fragment"),Vv=Symbol.for("react.strict_mode"),Cy=Symbol.for("react.profiler"),yC=Symbol.for("react.provider"),vC=Symbol.for("react.context"),Hv=Symbol.for("react.forward_ref"),Ay=Symbol.for("react.suspense"),Py=Symbol.for("react.suspense_list"),Wv=Symbol.for("react.memo"),Rs=Symbol.for("react.lazy"),wC=Symbol.for("react.offscreen"),pb=Symbol.iterator;function pu(t){return t===null||typeof t!="object"?null:(t=pb&&t[pb]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Object.assign,Vm;function $u(t){if(Vm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vm=e&&e[1]||""}return`
`+Vm+t}var Hm=!1;function Wm(t,e){if(!t||Hm)return"";Hm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$u(t):""}function zM(t){switch(t.tag){case 5:return $u(t.type);case 16:return $u("Lazy");case 13:return $u("Suspense");case 19:return $u("SuspenseList");case 0:case 2:case 15:return t=Wm(t.type,!1),t;case 11:return t=Wm(t.type.render,!1),t;case 1:return t=Wm(t.type,!0),t;default:return""}}function Oy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xa:return"Fragment";case Ka:return"Portal";case Cy:return"Profiler";case Vv:return"StrictMode";case Ay:return"Suspense";case Py:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vC:return(t.displayName||"Context")+".Consumer";case yC:return(t._context.displayName||"Context")+".Provider";case Hv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wv:return e=t.displayName||null,e!==null?e:Oy(t.type)||"Memo";case Rs:e=t._payload,t=t._init;try{return Oy(t(e))}catch{}}return null}function jM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oy(e);case 8:return e===Vv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FM(t){var e=bC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Td(t){t._valueTracker||(t._valueTracker=FM(t))}function xC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=bC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function cf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ny(t,e){var n=e.checked;return kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function mb(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=fo(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function SC(t,e){e=e.checked,e!=null&&Uv(t,"checked",e,!1)}function Ty(t,e){SC(t,e);var n=fo(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ry(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ry(t,e.type,fo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ry(t,e,n){(e!=="number"||cf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lu=Array.isArray;function cl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+fo(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function My(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(Lu(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fo(n)}}function kC(t,e){var n=fo(e.value),i=fo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function vb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function EC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?EC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rd,CC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rd=Rd||document.createElement("div"),Rd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ku={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UM=["Webkit","ms","Moz","O"];Object.keys(Ku).forEach(function(t){UM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ku[e]=Ku[t]})});function AC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ku.hasOwnProperty(t)&&Ku[t]?(""+e).trim():e+"px"}function PC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=AC(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var VM=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _y(t,e){if(e){if(VM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function $y(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ly=null;function Gv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Iy=null,dl=null,hl=null;function wb(t){if(t=cd(t)){if(typeof Iy!="function")throw Error(te(280));var e=t.stateNode;e&&(e=Up(e),Iy(t.stateNode,t.type,e))}}function OC(t){dl?hl?hl.push(t):hl=[t]:dl=t}function NC(){if(dl){var t=dl,e=hl;if(hl=dl=null,wb(t),e)for(t=0;t<e.length;t++)wb(e[t])}}function TC(t,e){return t(e)}function RC(){}var Gm=!1;function MC(t,e,n){if(Gm)return t(e,n);Gm=!0;try{return TC(t,e,n)}finally{Gm=!1,(dl!==null||hl!==null)&&(RC(),NC())}}function pc(t,e){var n=t.stateNode;if(n===null)return null;var i=Up(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var By=!1;if(hs)try{var mu={};Object.defineProperty(mu,"passive",{get:function(){By=!0}}),window.addEventListener("test",mu,mu),window.removeEventListener("test",mu,mu)}catch{By=!1}function HM(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Xu=!1,df=null,hf=!1,zy=null,WM={onError:function(t){Xu=!0,df=t}};function GM(t,e,n,i,r,s,o,a,l){Xu=!1,df=null,HM.apply(WM,arguments)}function KM(t,e,n,i,r,s,o,a,l){if(GM.apply(this,arguments),Xu){if(Xu){var u=df;Xu=!1,df=null}else throw Error(te(198));hf||(hf=!0,zy=u)}}function Ea(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bb(t){if(Ea(t)!==t)throw Error(te(188))}function XM(t){var e=t.alternate;if(!e){if(e=Ea(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return bb(r),t;if(s===i)return bb(r),e;s=s.sibling}throw Error(te(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==i)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function _C(t){return t=XM(t),t!==null?$C(t):null}function $C(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$C(t);if(e!==null)return e;t=t.sibling}return null}var LC=hi.unstable_scheduleCallback,xb=hi.unstable_cancelCallback,ZM=hi.unstable_shouldYield,JM=hi.unstable_requestPaint,Mt=hi.unstable_now,YM=hi.unstable_getCurrentPriorityLevel,Kv=hi.unstable_ImmediatePriority,IC=hi.unstable_UserBlockingPriority,ff=hi.unstable_NormalPriority,qM=hi.unstable_LowPriority,BC=hi.unstable_IdlePriority,Bp=null,Tr=null;function QM(t){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Bp,t,void 0,(t.current.flags&128)===128)}catch{}}var qi=Math.clz32?Math.clz32:nD,eD=Math.log,tD=Math.LN2;function nD(t){return t>>>=0,t===0?32:31-(eD(t)/tD|0)|0}var Md=64,Dd=4194304;function Iu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pf(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Iu(a):(s&=o,s!==0&&(i=Iu(s)))}else o=n&~r,o!==0?i=Iu(o):s!==0&&(i=Iu(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-qi(e),r=1<<n,i|=t[n],e&=~r;return i}function iD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rD(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-qi(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=iD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zC(){var t=Md;return Md<<=1,!(Md&4194240)&&(Md=64),t}function Km(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ld(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qi(e),t[e]=n}function sD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-qi(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Xv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-qi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ye=0;function jC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FC,Zv,UC,VC,HC,Fy=!1,_d=[],to=null,no=null,io=null,mc=new Map,gc=new Map,Bs=[],oD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sb(t,e){switch(t){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":mc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gc.delete(e.pointerId)}}function gu(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=cd(e),e!==null&&Zv(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function aD(t,e,n,i,r){switch(e){case"focusin":return to=gu(to,t,e,n,i,r),!0;case"dragenter":return no=gu(no,t,e,n,i,r),!0;case"mouseover":return io=gu(io,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return mc.set(s,gu(mc.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,gc.set(s,gu(gc.get(s)||null,t,e,n,i,r)),!0}return!1}function WC(t){var e=Xo(t.target);if(e!==null){var n=Ea(e);if(n!==null){if(e=n.tag,e===13){if(e=DC(n),e!==null){t.blockedOn=e,HC(t.priority,function(){UC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Th(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ly=i,n.target.dispatchEvent(i),Ly=null}else return e=cd(n),e!==null&&Zv(e),t.blockedOn=n,!1;e.shift()}return!0}function kb(t,e,n){Th(t)&&n.delete(e)}function lD(){Fy=!1,to!==null&&Th(to)&&(to=null),no!==null&&Th(no)&&(no=null),io!==null&&Th(io)&&(io=null),mc.forEach(kb),gc.forEach(kb)}function yu(t,e){t.blockedOn===e&&(t.blockedOn=null,Fy||(Fy=!0,hi.unstable_scheduleCallback(hi.unstable_NormalPriority,lD)))}function yc(t){function e(r){return yu(r,t)}if(0<_d.length){yu(_d[0],t);for(var n=1;n<_d.length;n++){var i=_d[n];i.blockedOn===t&&(i.blockedOn=null)}}for(to!==null&&yu(to,t),no!==null&&yu(no,t),io!==null&&yu(io,t),mc.forEach(e),gc.forEach(e),n=0;n<Bs.length;n++)i=Bs[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Bs.length&&(n=Bs[0],n.blockedOn===null);)WC(n),n.blockedOn===null&&Bs.shift()}var fl=xs.ReactCurrentBatchConfig,mf=!0;function uD(t,e,n,i){var r=Ye,s=fl.transition;fl.transition=null;try{Ye=1,Jv(t,e,n,i)}finally{Ye=r,fl.transition=s}}function cD(t,e,n,i){var r=Ye,s=fl.transition;fl.transition=null;try{Ye=4,Jv(t,e,n,i)}finally{Ye=r,fl.transition=s}}function Jv(t,e,n,i){if(mf){var r=Uy(t,e,n,i);if(r===null)ig(t,e,i,gf,n),Sb(t,i);else if(aD(r,t,e,n,i))i.stopPropagation();else if(Sb(t,i),e&4&&-1<oD.indexOf(t)){for(;r!==null;){var s=cd(r);if(s!==null&&FC(s),s=Uy(t,e,n,i),s===null&&ig(t,e,i,gf,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else ig(t,e,i,null,n)}}var gf=null;function Uy(t,e,n,i){if(gf=null,t=Gv(i),t=Xo(t),t!==null)if(e=Ea(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gf=t,null}function GC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YM()){case Kv:return 1;case IC:return 4;case ff:case qM:return 16;case BC:return 536870912;default:return 16}default:return 16}}var Xs=null,Yv=null,Rh=null;function KC(){if(Rh)return Rh;var t,e=Yv,n=e.length,i,r="value"in Xs?Xs.value:Xs.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Rh=r.slice(t,1<i?1-i:void 0)}function Mh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $d(){return!0}function Eb(){return!1}function pi(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$d:Eb,this.isPropagationStopped=Eb,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$d)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$d)},persist:function(){},isPersistent:$d}),e}var su={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qv=pi(su),ud=kt({},su,{view:0,detail:0}),dD=pi(ud),Xm,Zm,vu,zp=kt({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vu&&(vu&&t.type==="mousemove"?(Xm=t.screenX-vu.screenX,Zm=t.screenY-vu.screenY):Zm=Xm=0,vu=t),Xm)},movementY:function(t){return"movementY"in t?t.movementY:Zm}}),Cb=pi(zp),hD=kt({},zp,{dataTransfer:0}),fD=pi(hD),pD=kt({},ud,{relatedTarget:0}),Jm=pi(pD),mD=kt({},su,{animationName:0,elapsedTime:0,pseudoElement:0}),gD=pi(mD),yD=kt({},su,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vD=pi(yD),wD=kt({},su,{data:0}),Ab=pi(wD),bD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SD[t])?!!e[t]:!1}function Qv(){return kD}var ED=kt({},ud,{key:function(t){if(t.key){var e=bD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qv,charCode:function(t){return t.type==="keypress"?Mh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CD=pi(ED),AD=kt({},zp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pb=pi(AD),PD=kt({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qv}),OD=pi(PD),ND=kt({},su,{propertyName:0,elapsedTime:0,pseudoElement:0}),TD=pi(ND),RD=kt({},zp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MD=pi(RD),DD=[9,13,27,32],ew=hs&&"CompositionEvent"in window,Zu=null;hs&&"documentMode"in document&&(Zu=document.documentMode);var _D=hs&&"TextEvent"in window&&!Zu,XC=hs&&(!ew||Zu&&8<Zu&&11>=Zu),Ob=String.fromCharCode(32),Nb=!1;function ZC(t,e){switch(t){case"keyup":return DD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Za=!1;function $D(t,e){switch(t){case"compositionend":return JC(e);case"keypress":return e.which!==32?null:(Nb=!0,Ob);case"textInput":return t=e.data,t===Ob&&Nb?null:t;default:return null}}function LD(t,e){if(Za)return t==="compositionend"||!ew&&ZC(t,e)?(t=KC(),Rh=Yv=Xs=null,Za=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XC&&e.locale!=="ko"?null:e.data;default:return null}}var ID={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ID[t.type]:e==="textarea"}function YC(t,e,n,i){OC(i),e=yf(e,"onChange"),0<e.length&&(n=new qv("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ju=null,vc=null;function BD(t){lA(t,0)}function jp(t){var e=qa(t);if(xC(e))return t}function zD(t,e){if(t==="change")return e}var qC=!1;if(hs){var Ym;if(hs){var qm="oninput"in document;if(!qm){var Rb=document.createElement("div");Rb.setAttribute("oninput","return;"),qm=typeof Rb.oninput=="function"}Ym=qm}else Ym=!1;qC=Ym&&(!document.documentMode||9<document.documentMode)}function Mb(){Ju&&(Ju.detachEvent("onpropertychange",QC),vc=Ju=null)}function QC(t){if(t.propertyName==="value"&&jp(vc)){var e=[];YC(e,vc,t,Gv(t)),MC(BD,e)}}function jD(t,e,n){t==="focusin"?(Mb(),Ju=e,vc=n,Ju.attachEvent("onpropertychange",QC)):t==="focusout"&&Mb()}function FD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jp(vc)}function UD(t,e){if(t==="click")return jp(e)}function VD(t,e){if(t==="input"||t==="change")return jp(e)}function HD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:HD;function wc(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ey.call(e,r)||!rr(t[r],e[r]))return!1}return!0}function Db(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _b(t,e){var n=Db(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Db(n)}}function eA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tA(){for(var t=window,e=cf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cf(t.document)}return e}function tw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WD(t){var e=tA(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eA(n.ownerDocument.documentElement,n)){if(i!==null&&tw(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=_b(n,s);var o=_b(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GD=hs&&"documentMode"in document&&11>=document.documentMode,Ja=null,Vy=null,Yu=null,Hy=!1;function $b(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hy||Ja==null||Ja!==cf(i)||(i=Ja,"selectionStart"in i&&tw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Yu&&wc(Yu,i)||(Yu=i,i=yf(Vy,"onSelect"),0<i.length&&(e=new qv("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ja)))}function Ld(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ya={animationend:Ld("Animation","AnimationEnd"),animationiteration:Ld("Animation","AnimationIteration"),animationstart:Ld("Animation","AnimationStart"),transitionend:Ld("Transition","TransitionEnd")},Qm={},nA={};hs&&(nA=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Fp(t){if(Qm[t])return Qm[t];if(!Ya[t])return t;var e=Ya[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nA)return Qm[t]=e[n];return t}var iA=Fp("animationend"),rA=Fp("animationiteration"),sA=Fp("animationstart"),oA=Fp("transitionend"),aA=new Map,Lb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Po(t,e){aA.set(t,e),ka(e,[t])}for(var eg=0;eg<Lb.length;eg++){var tg=Lb[eg],KD=tg.toLowerCase(),XD=tg[0].toUpperCase()+tg.slice(1);Po(KD,"on"+XD)}Po(iA,"onAnimationEnd");Po(rA,"onAnimationIteration");Po(sA,"onAnimationStart");Po("dblclick","onDoubleClick");Po("focusin","onFocus");Po("focusout","onBlur");Po(oA,"onTransitionEnd");$l("onMouseEnter",["mouseout","mouseover"]);$l("onMouseLeave",["mouseout","mouseover"]);$l("onPointerEnter",["pointerout","pointerover"]);$l("onPointerLeave",["pointerout","pointerover"]);ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ka("onBeforeInput",["compositionend","keypress","textInput","paste"]);ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bu));function Ib(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,KM(i,e,void 0,t),t.currentTarget=null}function lA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Ib(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Ib(r,a,u),s=l}}}if(hf)throw t=zy,hf=!1,zy=null,t}function ot(t,e){var n=e[Zy];n===void 0&&(n=e[Zy]=new Set);var i=t+"__bubble";n.has(i)||(uA(e,t,2,!1),n.add(i))}function ng(t,e,n){var i=0;e&&(i|=4),uA(n,t,i,e)}var Id="_reactListening"+Math.random().toString(36).slice(2);function bc(t){if(!t[Id]){t[Id]=!0,gC.forEach(function(n){n!=="selectionchange"&&(ZD.has(n)||ng(n,!1,t),ng(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Id]||(e[Id]=!0,ng("selectionchange",!1,e))}}function uA(t,e,n,i){switch(GC(e)){case 1:var r=uD;break;case 4:r=cD;break;default:r=Jv}n=r.bind(null,e,n,t),r=void 0,!By||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ig(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Xo(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}MC(function(){var u=s,c=Gv(n),d=[];e:{var h=aA.get(t);if(h!==void 0){var f=qv,p=t;switch(t){case"keypress":if(Mh(n)===0)break e;case"keydown":case"keyup":f=CD;break;case"focusin":p="focus",f=Jm;break;case"focusout":p="blur",f=Jm;break;case"beforeblur":case"afterblur":f=Jm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Cb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=fD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=OD;break;case iA:case rA:case sA:f=gD;break;case oA:f=TD;break;case"scroll":f=dD;break;case"wheel":f=MD;break;case"copy":case"cut":case"paste":f=vD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Pb}var y=(e&4)!==0,w=!y&&t==="scroll",m=y?h!==null?h+"Capture":null:h;y=[];for(var g=u,v;g!==null;){v=g;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,m!==null&&(x=pc(g,m),x!=null&&y.push(xc(g,x,v)))),w)break;g=g.return}0<y.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Ly&&(p=n.relatedTarget||n.fromElement)&&(Xo(p)||p[fs]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Xo(p):null,p!==null&&(w=Ea(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(y=Cb,x="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=Pb,x="onPointerLeave",m="onPointerEnter",g="pointer"),w=f==null?h:qa(f),v=p==null?h:qa(p),h=new y(x,g+"leave",f,n,c),h.target=w,h.relatedTarget=v,x=null,Xo(c)===u&&(y=new y(m,g+"enter",p,n,c),y.target=v,y.relatedTarget=w,x=y),w=x,f&&p)t:{for(y=f,m=p,g=0,v=y;v;v=Ma(v))g++;for(v=0,x=m;x;x=Ma(x))v++;for(;0<g-v;)y=Ma(y),g--;for(;0<v-g;)m=Ma(m),v--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break t;y=Ma(y),m=Ma(m)}y=null}else y=null;f!==null&&Bb(d,h,f,y,!1),p!==null&&w!==null&&Bb(d,w,p,y,!0)}}e:{if(h=u?qa(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=zD;else if(Tb(h))if(qC)E=VD;else{E=FD;var O=jD}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=UD);if(E&&(E=E(t,u))){YC(d,E,n,c);break e}O&&O(t,h,u),t==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&Ry(h,"number",h.value)}switch(O=u?qa(u):window,t){case"focusin":(Tb(O)||O.contentEditable==="true")&&(Ja=O,Vy=u,Yu=null);break;case"focusout":Yu=Vy=Ja=null;break;case"mousedown":Hy=!0;break;case"contextmenu":case"mouseup":case"dragend":Hy=!1,$b(d,n,c);break;case"selectionchange":if(GD)break;case"keydown":case"keyup":$b(d,n,c)}var N;if(ew)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Za?ZC(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(XC&&n.locale!=="ko"&&(Za||P!=="onCompositionStart"?P==="onCompositionEnd"&&Za&&(N=KC()):(Xs=c,Yv="value"in Xs?Xs.value:Xs.textContent,Za=!0)),O=yf(u,P),0<O.length&&(P=new Ab(P,t,null,n,c),d.push({event:P,listeners:O}),N?P.data=N:(N=JC(n),N!==null&&(P.data=N)))),(N=_D?$D(t,n):LD(t,n))&&(u=yf(u,"onBeforeInput"),0<u.length&&(c=new Ab("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=N))}lA(d,e)})}function xc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=pc(t,n),s!=null&&i.unshift(xc(t,s,r)),s=pc(t,e),s!=null&&i.push(xc(t,s,r))),t=t.return}return i}function Ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bb(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=pc(n,s),l!=null&&o.unshift(xc(n,l,a))):r||(l=pc(n,s),l!=null&&o.push(xc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var JD=/\r\n?/g,YD=/\u0000|\uFFFD/g;function zb(t){return(typeof t=="string"?t:""+t).replace(JD,`
`).replace(YD,"")}function Bd(t,e,n){if(e=zb(e),zb(t)!==e&&n)throw Error(te(425))}function vf(){}var Wy=null,Gy=null;function Ky(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xy=typeof setTimeout=="function"?setTimeout:void 0,qD=typeof clearTimeout=="function"?clearTimeout:void 0,jb=typeof Promise=="function"?Promise:void 0,QD=typeof queueMicrotask=="function"?queueMicrotask:typeof jb<"u"?function(t){return jb.resolve(null).then(t).catch(e_)}:Xy;function e_(t){setTimeout(function(){throw t})}function rg(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),yc(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);yc(e)}function ro(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ou=Math.random().toString(36).slice(2),kr="__reactFiber$"+ou,Sc="__reactProps$"+ou,fs="__reactContainer$"+ou,Zy="__reactEvents$"+ou,t_="__reactListeners$"+ou,n_="__reactHandles$"+ou;function Xo(t){var e=t[kr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fs]||n[kr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fb(t);t!==null;){if(n=t[kr])return n;t=Fb(t)}return e}t=n,n=t.parentNode}return null}function cd(t){return t=t[kr]||t[fs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function Up(t){return t[Sc]||null}var Jy=[],Qa=-1;function Oo(t){return{current:t}}function ct(t){0>Qa||(t.current=Jy[Qa],Jy[Qa]=null,Qa--)}function rt(t,e){Qa++,Jy[Qa]=t.current,t.current=e}var po={},gn=Oo(po),Hn=Oo(!1),la=po;function Ll(t,e){var n=t.type.contextTypes;if(!n)return po;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Wn(t){return t=t.childContextTypes,t!=null}function wf(){ct(Hn),ct(gn)}function Ub(t,e,n){if(gn.current!==po)throw Error(te(168));rt(gn,e),rt(Hn,n)}function cA(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(te(108,jM(t)||"Unknown",r));return kt({},n,i)}function bf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||po,la=gn.current,rt(gn,t),rt(Hn,Hn.current),!0}function Vb(t,e,n){var i=t.stateNode;if(!i)throw Error(te(169));n?(t=cA(t,e,la),i.__reactInternalMemoizedMergedChildContext=t,ct(Hn),ct(gn),rt(gn,t)):ct(Hn),rt(Hn,n)}var Vr=null,Vp=!1,sg=!1;function dA(t){Vr===null?Vr=[t]:Vr.push(t)}function i_(t){Vp=!0,dA(t)}function No(){if(!sg&&Vr!==null){sg=!0;var t=0,e=Ye;try{var n=Vr;for(Ye=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Vr=null,Vp=!1}catch(r){throw Vr!==null&&(Vr=Vr.slice(t+1)),LC(Kv,No),r}finally{Ye=e,sg=!1}}return null}var el=[],tl=0,xf=null,Sf=0,Ci=[],Ai=0,ua=null,ts=1,ns="";function zo(t,e){el[tl++]=Sf,el[tl++]=xf,xf=t,Sf=e}function hA(t,e,n){Ci[Ai++]=ts,Ci[Ai++]=ns,Ci[Ai++]=ua,ua=t;var i=ts;t=ns;var r=32-qi(i)-1;i&=~(1<<r),n+=1;var s=32-qi(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ts=1<<32-qi(e)+r|n<<r|i,ns=s+t}else ts=1<<s|n<<r|i,ns=t}function nw(t){t.return!==null&&(zo(t,1),hA(t,1,0))}function iw(t){for(;t===xf;)xf=el[--tl],el[tl]=null,Sf=el[--tl],el[tl]=null;for(;t===ua;)ua=Ci[--Ai],Ci[Ai]=null,ns=Ci[--Ai],Ci[Ai]=null,ts=Ci[--Ai],Ci[Ai]=null}var di=null,li=null,ft=!1,Gi=null;function fA(t,e){var n=Ni(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,di=t,li=ro(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,di=t,li=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ua!==null?{id:ts,overflow:ns}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ni(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,di=t,li=null,!0):!1;default:return!1}}function Yy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qy(t){if(ft){var e=li;if(e){var n=e;if(!Hb(t,e)){if(Yy(t))throw Error(te(418));e=ro(n.nextSibling);var i=di;e&&Hb(t,e)?fA(i,n):(t.flags=t.flags&-4097|2,ft=!1,di=t)}}else{if(Yy(t))throw Error(te(418));t.flags=t.flags&-4097|2,ft=!1,di=t}}}function Wb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;di=t}function zd(t){if(t!==di)return!1;if(!ft)return Wb(t),ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ky(t.type,t.memoizedProps)),e&&(e=li)){if(Yy(t))throw pA(),Error(te(418));for(;e;)fA(t,e),e=ro(e.nextSibling)}if(Wb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){li=ro(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}li=null}}else li=di?ro(t.stateNode.nextSibling):null;return!0}function pA(){for(var t=li;t;)t=ro(t.nextSibling)}function Il(){li=di=null,ft=!1}function rw(t){Gi===null?Gi=[t]:Gi.push(t)}var r_=xs.ReactCurrentBatchConfig;function Fi(t,e){if(t&&t.defaultProps){e=kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var kf=Oo(null),Ef=null,nl=null,sw=null;function ow(){sw=nl=Ef=null}function aw(t){var e=kf.current;ct(kf),t._currentValue=e}function Qy(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function pl(t,e){Ef=t,sw=nl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jn=!0),t.firstContext=null)}function Li(t){var e=t._currentValue;if(sw!==t)if(t={context:t,memoizedValue:e,next:null},nl===null){if(Ef===null)throw Error(te(308));nl=t,Ef.dependencies={lanes:0,firstContext:t}}else nl=nl.next=t;return e}var Zo=null;function lw(t){Zo===null?Zo=[t]:Zo.push(t)}function mA(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,lw(e)):(n.next=r.next,r.next=n),e.interleaved=n,ps(t,i)}function ps(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ms=!1;function uw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function so(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ps(t,n)}return r=i.interleaved,r===null?(e.next=e,lw(i)):(e.next=r.next,r.next=e),i.interleaved=e,ps(t,n)}function Dh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xv(t,n)}}function Gb(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cf(t,e,n,i){var r=t.updateQueue;Ms=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(h=e,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=kt({},d,h);break e;case 2:Ms=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);da|=o,t.lanes=o,t.memoizedState=d}}function Kb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(te(191,r));r.call(i)}}}var yA=new mC.Component().refs;function e0(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hp={isMounted:function(t){return(t=t._reactInternals)?Ea(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=An(),r=ao(t),s=rs(i,r);s.payload=e,n!=null&&(s.callback=n),e=so(t,s,r),e!==null&&(Qi(e,t,r,i),Dh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=An(),r=ao(t),s=rs(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=so(t,s,r),e!==null&&(Qi(e,t,r,i),Dh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=An(),i=ao(t),r=rs(n,i);r.tag=2,e!=null&&(r.callback=e),e=so(t,r,i),e!==null&&(Qi(e,t,i,n),Dh(e,t,i))}};function Xb(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!wc(n,i)||!wc(r,s):!0}function vA(t,e,n){var i=!1,r=po,s=e.contextType;return typeof s=="object"&&s!==null?s=Li(s):(r=Wn(e)?la:gn.current,i=e.contextTypes,s=(i=i!=null)?Ll(t,r):po),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hp,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Zb(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Hp.enqueueReplaceState(e,e.state,null)}function t0(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=yA,uw(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Li(s):(s=Wn(e)?la:gn.current,r.context=Ll(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(e0(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Hp.enqueueReplaceState(r,r.state,null),Cf(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function wu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var i=n.stateNode}if(!i)throw Error(te(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===yA&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function jd(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jb(t){var e=t._init;return e(t._payload)}function wA(t){function e(m,g){if(t){var v=m.deletions;v===null?(m.deletions=[g],m.flags|=16):v.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function i(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function r(m,g){return m=lo(m,g),m.index=0,m.sibling=null,m}function s(m,g,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<g?(m.flags|=2,g):v):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,g,v,x){return g===null||g.tag!==6?(g=hg(v,m.mode,x),g.return=m,g):(g=r(g,v),g.return=m,g)}function l(m,g,v,x){var E=v.type;return E===Xa?c(m,g,v.props.children,x,v.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Rs&&Jb(E)===g.type)?(x=r(g,v.props),x.ref=wu(m,g,v),x.return=m,x):(x=zh(v.type,v.key,v.props,null,m.mode,x),x.ref=wu(m,g,v),x.return=m,x)}function u(m,g,v,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=fg(v,m.mode,x),g.return=m,g):(g=r(g,v.children||[]),g.return=m,g)}function c(m,g,v,x,E){return g===null||g.tag!==7?(g=ia(v,m.mode,x,E),g.return=m,g):(g=r(g,v),g.return=m,g)}function d(m,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=hg(""+g,m.mode,v),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Nd:return v=zh(g.type,g.key,g.props,null,m.mode,v),v.ref=wu(m,null,g),v.return=m,v;case Ka:return g=fg(g,m.mode,v),g.return=m,g;case Rs:var x=g._init;return d(m,x(g._payload),v)}if(Lu(g)||pu(g))return g=ia(g,m.mode,v,null),g.return=m,g;jd(m,g)}return null}function h(m,g,v,x){var E=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(m,g,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Nd:return v.key===E?l(m,g,v,x):null;case Ka:return v.key===E?u(m,g,v,x):null;case Rs:return E=v._init,h(m,g,E(v._payload),x)}if(Lu(v)||pu(v))return E!==null?null:c(m,g,v,x,null);jd(m,v)}return null}function f(m,g,v,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(v)||null,a(g,m,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Nd:return m=m.get(x.key===null?v:x.key)||null,l(g,m,x,E);case Ka:return m=m.get(x.key===null?v:x.key)||null,u(g,m,x,E);case Rs:var O=x._init;return f(m,g,v,O(x._payload),E)}if(Lu(x)||pu(x))return m=m.get(v)||null,c(g,m,x,E,null);jd(g,x)}return null}function p(m,g,v,x){for(var E=null,O=null,N=g,P=g=0,R=null;N!==null&&P<v.length;P++){N.index>P?(R=N,N=null):R=N.sibling;var _=h(m,N,v[P],x);if(_===null){N===null&&(N=R);break}t&&N&&_.alternate===null&&e(m,N),g=s(_,g,P),O===null?E=_:O.sibling=_,O=_,N=R}if(P===v.length)return n(m,N),ft&&zo(m,P),E;if(N===null){for(;P<v.length;P++)N=d(m,v[P],x),N!==null&&(g=s(N,g,P),O===null?E=N:O.sibling=N,O=N);return ft&&zo(m,P),E}for(N=i(m,N);P<v.length;P++)R=f(N,m,P,v[P],x),R!==null&&(t&&R.alternate!==null&&N.delete(R.key===null?P:R.key),g=s(R,g,P),O===null?E=R:O.sibling=R,O=R);return t&&N.forEach(function(M){return e(m,M)}),ft&&zo(m,P),E}function y(m,g,v,x){var E=pu(v);if(typeof E!="function")throw Error(te(150));if(v=E.call(v),v==null)throw Error(te(151));for(var O=E=null,N=g,P=g=0,R=null,_=v.next();N!==null&&!_.done;P++,_=v.next()){N.index>P?(R=N,N=null):R=N.sibling;var M=h(m,N,_.value,x);if(M===null){N===null&&(N=R);break}t&&N&&M.alternate===null&&e(m,N),g=s(M,g,P),O===null?E=M:O.sibling=M,O=M,N=R}if(_.done)return n(m,N),ft&&zo(m,P),E;if(N===null){for(;!_.done;P++,_=v.next())_=d(m,_.value,x),_!==null&&(g=s(_,g,P),O===null?E=_:O.sibling=_,O=_);return ft&&zo(m,P),E}for(N=i(m,N);!_.done;P++,_=v.next())_=f(N,m,P,_.value,x),_!==null&&(t&&_.alternate!==null&&N.delete(_.key===null?P:_.key),g=s(_,g,P),O===null?E=_:O.sibling=_,O=_);return t&&N.forEach(function(H){return e(m,H)}),ft&&zo(m,P),E}function w(m,g,v,x){if(typeof v=="object"&&v!==null&&v.type===Xa&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Nd:e:{for(var E=v.key,O=g;O!==null;){if(O.key===E){if(E=v.type,E===Xa){if(O.tag===7){n(m,O.sibling),g=r(O,v.props.children),g.return=m,m=g;break e}}else if(O.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Rs&&Jb(E)===O.type){n(m,O.sibling),g=r(O,v.props),g.ref=wu(m,O,v),g.return=m,m=g;break e}n(m,O);break}else e(m,O);O=O.sibling}v.type===Xa?(g=ia(v.props.children,m.mode,x,v.key),g.return=m,m=g):(x=zh(v.type,v.key,v.props,null,m.mode,x),x.ref=wu(m,g,v),x.return=m,m=x)}return o(m);case Ka:e:{for(O=v.key;g!==null;){if(g.key===O)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(m,g.sibling),g=r(g,v.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=fg(v,m.mode,x),g.return=m,m=g}return o(m);case Rs:return O=v._init,w(m,g,O(v._payload),x)}if(Lu(v))return p(m,g,v,x);if(pu(v))return y(m,g,v,x);jd(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(m,g.sibling),g=r(g,v),g.return=m,m=g):(n(m,g),g=hg(v,m.mode,x),g.return=m,m=g),o(m)):n(m,g)}return w}var Bl=wA(!0),bA=wA(!1),dd={},Rr=Oo(dd),kc=Oo(dd),Ec=Oo(dd);function Jo(t){if(t===dd)throw Error(te(174));return t}function cw(t,e){switch(rt(Ec,e),rt(kc,t),rt(Rr,dd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dy(e,t)}ct(Rr),rt(Rr,e)}function zl(){ct(Rr),ct(kc),ct(Ec)}function xA(t){Jo(Ec.current);var e=Jo(Rr.current),n=Dy(e,t.type);e!==n&&(rt(kc,t),rt(Rr,n))}function dw(t){kc.current===t&&(ct(Rr),ct(kc))}var vt=Oo(0);function Af(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var og=[];function hw(){for(var t=0;t<og.length;t++)og[t]._workInProgressVersionPrimary=null;og.length=0}var _h=xs.ReactCurrentDispatcher,ag=xs.ReactCurrentBatchConfig,ca=0,xt=null,zt=null,Kt=null,Pf=!1,qu=!1,Cc=0,s_=0;function cn(){throw Error(te(321))}function fw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function pw(t,e,n,i,r,s){if(ca=s,xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_h.current=t===null||t.memoizedState===null?u_:c_,t=n(i,r),qu){s=0;do{if(qu=!1,Cc=0,25<=s)throw Error(te(301));s+=1,Kt=zt=null,e.updateQueue=null,_h.current=d_,t=n(i,r)}while(qu)}if(_h.current=Of,e=zt!==null&&zt.next!==null,ca=0,Kt=zt=xt=null,Pf=!1,e)throw Error(te(300));return t}function mw(){var t=Cc!==0;return Cc=0,t}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?xt.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function Ii(){if(zt===null){var t=xt.alternate;t=t!==null?t.memoizedState:null}else t=zt.next;var e=Kt===null?xt.memoizedState:Kt.next;if(e!==null)Kt=e,zt=t;else{if(t===null)throw Error(te(310));zt=t,t={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Kt===null?xt.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function Ac(t,e){return typeof e=="function"?e(t):e}function lg(t){var e=Ii(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var i=zt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((ca&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,xt.lanes|=c,da|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,rr(i,e.memoizedState)||(jn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,xt.lanes|=s,da|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ug(t){var e=Ii(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);rr(s,e.memoizedState)||(jn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function SA(){}function kA(t,e){var n=xt,i=Ii(),r=e(),s=!rr(i.memoizedState,r);if(s&&(i.memoizedState=r,jn=!0),i=i.queue,gw(AA.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Kt!==null&&Kt.memoizedState.tag&1){if(n.flags|=2048,Pc(9,CA.bind(null,n,i,r,e),void 0,null),Zt===null)throw Error(te(349));ca&30||EA(n,e,r)}return r}function EA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CA(t,e,n,i){e.value=n,e.getSnapshot=i,PA(e)&&OA(t)}function AA(t,e,n){return n(function(){PA(e)&&OA(t)})}function PA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function OA(t){var e=ps(t,1);e!==null&&Qi(e,t,1,-1)}function Yb(t){var e=gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ac,lastRenderedState:t},e.queue=t,t=t.dispatch=l_.bind(null,xt,t),[e.memoizedState,t]}function Pc(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function NA(){return Ii().memoizedState}function $h(t,e,n,i){var r=gr();xt.flags|=t,r.memoizedState=Pc(1|e,n,void 0,i===void 0?null:i)}function Wp(t,e,n,i){var r=Ii();i=i===void 0?null:i;var s=void 0;if(zt!==null){var o=zt.memoizedState;if(s=o.destroy,i!==null&&fw(i,o.deps)){r.memoizedState=Pc(e,n,s,i);return}}xt.flags|=t,r.memoizedState=Pc(1|e,n,s,i)}function qb(t,e){return $h(8390656,8,t,e)}function gw(t,e){return Wp(2048,8,t,e)}function TA(t,e){return Wp(4,2,t,e)}function RA(t,e){return Wp(4,4,t,e)}function MA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DA(t,e,n){return n=n!=null?n.concat([t]):null,Wp(4,4,MA.bind(null,e,t),n)}function yw(){}function _A(t,e){var n=Ii();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fw(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function $A(t,e){var n=Ii();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fw(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function LA(t,e,n){return ca&21?(rr(n,e)||(n=zC(),xt.lanes|=n,da|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jn=!0),t.memoizedState=n)}function o_(t,e){var n=Ye;Ye=n!==0&&4>n?n:4,t(!0);var i=ag.transition;ag.transition={};try{t(!1),e()}finally{Ye=n,ag.transition=i}}function IA(){return Ii().memoizedState}function a_(t,e,n){var i=ao(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},BA(t))zA(e,n);else if(n=mA(t,e,n,i),n!==null){var r=An();Qi(n,t,i,r),jA(n,e,i)}}function l_(t,e,n){var i=ao(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(BA(t))zA(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,rr(a,o)){var l=e.interleaved;l===null?(r.next=r,lw(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=mA(t,e,r,i),n!==null&&(r=An(),Qi(n,t,i,r),jA(n,e,i))}}function BA(t){var e=t.alternate;return t===xt||e!==null&&e===xt}function zA(t,e){qu=Pf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jA(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xv(t,n)}}var Of={readContext:Li,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},u_={readContext:Li,useCallback:function(t,e){return gr().memoizedState=[t,e===void 0?null:e],t},useContext:Li,useEffect:qb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$h(4194308,4,MA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $h(4194308,4,t,e)},useInsertionEffect:function(t,e){return $h(4,2,t,e)},useMemo:function(t,e){var n=gr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=gr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=a_.bind(null,xt,t),[i.memoizedState,t]},useRef:function(t){var e=gr();return t={current:t},e.memoizedState=t},useState:Yb,useDebugValue:yw,useDeferredValue:function(t){return gr().memoizedState=t},useTransition:function(){var t=Yb(!1),e=t[0];return t=o_.bind(null,t[1]),gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=xt,r=gr();if(ft){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),Zt===null)throw Error(te(349));ca&30||EA(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,qb(AA.bind(null,i,s,t),[t]),i.flags|=2048,Pc(9,CA.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=gr(),e=Zt.identifierPrefix;if(ft){var n=ns,i=ts;n=(i&~(1<<32-qi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Cc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=s_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},c_={readContext:Li,useCallback:_A,useContext:Li,useEffect:gw,useImperativeHandle:DA,useInsertionEffect:TA,useLayoutEffect:RA,useMemo:$A,useReducer:lg,useRef:NA,useState:function(){return lg(Ac)},useDebugValue:yw,useDeferredValue:function(t){var e=Ii();return LA(e,zt.memoizedState,t)},useTransition:function(){var t=lg(Ac)[0],e=Ii().memoizedState;return[t,e]},useMutableSource:SA,useSyncExternalStore:kA,useId:IA,unstable_isNewReconciler:!1},d_={readContext:Li,useCallback:_A,useContext:Li,useEffect:gw,useImperativeHandle:DA,useInsertionEffect:TA,useLayoutEffect:RA,useMemo:$A,useReducer:ug,useRef:NA,useState:function(){return ug(Ac)},useDebugValue:yw,useDeferredValue:function(t){var e=Ii();return zt===null?e.memoizedState=t:LA(e,zt.memoizedState,t)},useTransition:function(){var t=ug(Ac)[0],e=Ii().memoizedState;return[t,e]},useMutableSource:SA,useSyncExternalStore:kA,useId:IA,unstable_isNewReconciler:!1};function jl(t,e){try{var n="",i=e;do n+=zM(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function cg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function n0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var h_=typeof WeakMap=="function"?WeakMap:Map;function FA(t,e,n){n=rs(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Tf||(Tf=!0,h0=i),n0(t,e)},n}function UA(t,e,n){n=rs(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){n0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){n0(t,e),typeof i!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Qb(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new h_;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=A_.bind(null,t,e,n),e.then(t,t))}function ex(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function tx(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rs(-1,1),e.tag=2,so(n,e,1))),n.lanes|=1),t)}var f_=xs.ReactCurrentOwner,jn=!1;function Sn(t,e,n,i){e.child=t===null?bA(e,null,n,i):Bl(e,t.child,n,i)}function nx(t,e,n,i,r){n=n.render;var s=e.ref;return pl(e,r),i=pw(t,e,n,i,s,r),n=mw(),t!==null&&!jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ms(t,e,r)):(ft&&n&&nw(e),e.flags|=1,Sn(t,e,i,r),e.child)}function ix(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Cw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,VA(t,e,s,i,r)):(t=zh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wc,n(o,i)&&t.ref===e.ref)return ms(t,e,r)}return e.flags|=1,t=lo(s,i),t.ref=e.ref,t.return=e,e.child=t}function VA(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(wc(s,i)&&t.ref===e.ref)if(jn=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(jn=!0);else return e.lanes=t.lanes,ms(t,e,r)}return i0(t,e,n,i,r)}function HA(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(rl,ii),ii|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(rl,ii),ii|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,rt(rl,ii),ii|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,rt(rl,ii),ii|=i;return Sn(t,e,r,n),e.child}function WA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function i0(t,e,n,i,r){var s=Wn(n)?la:gn.current;return s=Ll(e,s),pl(e,r),n=pw(t,e,n,i,s,r),i=mw(),t!==null&&!jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ms(t,e,r)):(ft&&i&&nw(e),e.flags|=1,Sn(t,e,n,r),e.child)}function rx(t,e,n,i,r){if(Wn(n)){var s=!0;bf(e)}else s=!1;if(pl(e,r),e.stateNode===null)Lh(t,e),vA(e,n,i),t0(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Li(u):(u=Wn(n)?la:gn.current,u=Ll(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Zb(e,o,i,u),Ms=!1;var h=e.memoizedState;o.state=h,Cf(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Hn.current||Ms?(typeof c=="function"&&(e0(e,n,c,i),l=e.memoizedState),(a=Ms||Xb(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,gA(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Fi(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Li(l):(l=Wn(n)?la:gn.current,l=Ll(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Zb(e,o,i,l),Ms=!1,h=e.memoizedState,o.state=h,Cf(e,i,o,r);var p=e.memoizedState;a!==d||h!==p||Hn.current||Ms?(typeof f=="function"&&(e0(e,n,f,i),p=e.memoizedState),(u=Ms||Xb(e,n,u,i,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return r0(t,e,n,i,s,r)}function r0(t,e,n,i,r,s){WA(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Vb(e,n,!1),ms(t,e,s);i=e.stateNode,f_.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Bl(e,t.child,null,s),e.child=Bl(e,null,a,s)):Sn(t,e,a,s),e.memoizedState=i.state,r&&Vb(e,n,!0),e.child}function GA(t){var e=t.stateNode;e.pendingContext?Ub(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ub(t,e.context,!1),cw(t,e.containerInfo)}function sx(t,e,n,i,r){return Il(),rw(r),e.flags|=256,Sn(t,e,n,i),e.child}var s0={dehydrated:null,treeContext:null,retryLane:0};function o0(t){return{baseLanes:t,cachePool:null,transitions:null}}function KA(t,e,n){var i=e.pendingProps,r=vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),rt(vt,r&1),t===null)return qy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Xp(o,i,0,null),t=ia(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=o0(n),e.memoizedState=s0,t):vw(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return p_(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=lo(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=lo(a,s):(s=ia(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?o0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=s0,i}return s=t.child,t=s.sibling,i=lo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function vw(t,e){return e=Xp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fd(t,e,n,i){return i!==null&&rw(i),Bl(e,t.child,null,n),t=vw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function p_(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=cg(Error(te(422))),Fd(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Xp({mode:"visible",children:i.children},r,0,null),s=ia(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Bl(e,t.child,null,o),e.child.memoizedState=o0(o),e.memoizedState=s0,s);if(!(e.mode&1))return Fd(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(te(419)),i=cg(s,i,void 0),Fd(t,e,o,i)}if(a=(o&t.childLanes)!==0,jn||a){if(i=Zt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ps(t,r),Qi(i,t,r,-1))}return Ew(),i=cg(Error(te(421))),Fd(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=P_.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,li=ro(r.nextSibling),di=e,ft=!0,Gi=null,t!==null&&(Ci[Ai++]=ts,Ci[Ai++]=ns,Ci[Ai++]=ua,ts=t.id,ns=t.overflow,ua=e),e=vw(e,i.children),e.flags|=4096,e)}function ox(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Qy(t.return,e,n)}function dg(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function XA(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Sn(t,e,i.children,n),i=vt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ox(t,n,e);else if(t.tag===19)ox(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(rt(vt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Af(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),dg(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Af(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}dg(e,!0,n,null,s);break;case"together":dg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ms(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),da|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=lo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function m_(t,e,n){switch(e.tag){case 3:GA(e),Il();break;case 5:xA(e);break;case 1:Wn(e.type)&&bf(e);break;case 4:cw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;rt(kf,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(rt(vt,vt.current&1),e.flags|=128,null):n&e.child.childLanes?KA(t,e,n):(rt(vt,vt.current&1),t=ms(t,e,n),t!==null?t.sibling:null);rt(vt,vt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return XA(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),rt(vt,vt.current),i)break;return null;case 22:case 23:return e.lanes=0,HA(t,e,n)}return ms(t,e,n)}var ZA,a0,JA,YA;ZA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};a0=function(){};JA=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Jo(Rr.current);var s=null;switch(n){case"input":r=Ny(t,r),i=Ny(t,i),s=[];break;case"select":r=kt({},r,{value:void 0}),i=kt({},i,{value:void 0}),s=[];break;case"textarea":r=My(t,r),i=My(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=vf)}_y(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ot("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};YA=function(t,e,n,i){n!==i&&(e.flags|=4)};function bu(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function dn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function g_(t,e,n){var i=e.pendingProps;switch(iw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(e),null;case 1:return Wn(e.type)&&wf(),dn(e),null;case 3:return i=e.stateNode,zl(),ct(Hn),ct(gn),hw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(zd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gi!==null&&(m0(Gi),Gi=null))),a0(t,e),dn(e),null;case 5:dw(e);var r=Jo(Ec.current);if(n=e.type,t!==null&&e.stateNode!=null)JA(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(te(166));return dn(e),null}if(t=Jo(Rr.current),zd(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[kr]=e,i[Sc]=s,t=(e.mode&1)!==0,n){case"dialog":ot("cancel",i),ot("close",i);break;case"iframe":case"object":case"embed":ot("load",i);break;case"video":case"audio":for(r=0;r<Bu.length;r++)ot(Bu[r],i);break;case"source":ot("error",i);break;case"img":case"image":case"link":ot("error",i),ot("load",i);break;case"details":ot("toggle",i);break;case"input":mb(i,s),ot("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ot("invalid",i);break;case"textarea":yb(i,s),ot("invalid",i)}_y(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bd(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bd(i.textContent,a,t),r=["children",""+a]):hc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ot("scroll",i)}switch(n){case"input":Td(i),gb(i,s,!0);break;case"textarea":Td(i),vb(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=vf)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=EC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[kr]=e,t[Sc]=i,ZA(t,e,!1,!1),e.stateNode=t;e:{switch(o=$y(n,i),n){case"dialog":ot("cancel",t),ot("close",t),r=i;break;case"iframe":case"object":case"embed":ot("load",t),r=i;break;case"video":case"audio":for(r=0;r<Bu.length;r++)ot(Bu[r],t);r=i;break;case"source":ot("error",t),r=i;break;case"img":case"image":case"link":ot("error",t),ot("load",t),r=i;break;case"details":ot("toggle",t),r=i;break;case"input":mb(t,i),r=Ny(t,i),ot("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=kt({},i,{value:void 0}),ot("invalid",t);break;case"textarea":yb(t,i),r=My(t,i),ot("invalid",t);break;default:r=i}_y(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?PC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&fc(t,l):typeof l=="number"&&fc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ot("scroll",t):l!=null&&Uv(t,s,l,o))}switch(n){case"input":Td(t),gb(t,i,!1);break;case"textarea":Td(t),vb(t);break;case"option":i.value!=null&&t.setAttribute("value",""+fo(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?cl(t,!!i.multiple,s,!1):i.defaultValue!=null&&cl(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=vf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dn(e),null;case 6:if(t&&e.stateNode!=null)YA(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(te(166));if(n=Jo(Ec.current),Jo(Rr.current),zd(e)){if(i=e.stateNode,n=e.memoizedProps,i[kr]=e,(s=i.nodeValue!==n)&&(t=di,t!==null))switch(t.tag){case 3:Bd(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bd(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[kr]=e,e.stateNode=i}return dn(e),null;case 13:if(ct(vt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&li!==null&&e.mode&1&&!(e.flags&128))pA(),Il(),e.flags|=98560,s=!1;else if(s=zd(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(te(317));s[kr]=e}else Il(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dn(e),s=!1}else Gi!==null&&(m0(Gi),Gi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Ut===0&&(Ut=3):Ew())),e.updateQueue!==null&&(e.flags|=4),dn(e),null);case 4:return zl(),a0(t,e),t===null&&bc(e.stateNode.containerInfo),dn(e),null;case 10:return aw(e.type._context),dn(e),null;case 17:return Wn(e.type)&&wf(),dn(e),null;case 19:if(ct(vt),s=e.memoizedState,s===null)return dn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)bu(s,!1);else{if(Ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Af(t),o!==null){for(e.flags|=128,bu(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rt(vt,vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Mt()>Fl&&(e.flags|=128,i=!0,bu(s,!1),e.lanes=4194304)}else{if(!i)if(t=Af(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ft)return dn(e),null}else 2*Mt()-s.renderingStartTime>Fl&&n!==1073741824&&(e.flags|=128,i=!0,bu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Mt(),e.sibling=null,n=vt.current,rt(vt,i?n&1|2:n&1),e):(dn(e),null);case 22:case 23:return kw(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ii&1073741824&&(dn(e),e.subtreeFlags&6&&(e.flags|=8192)):dn(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function y_(t,e){switch(iw(e),e.tag){case 1:return Wn(e.type)&&wf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zl(),ct(Hn),ct(gn),hw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dw(e),null;case 13:if(ct(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Il()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(vt),null;case 4:return zl(),null;case 10:return aw(e.type._context),null;case 22:case 23:return kw(),null;case 24:return null;default:return null}}var Ud=!1,pn=!1,v_=typeof WeakSet=="function"?WeakSet:Set,ge=null;function il(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){At(t,e,i)}else n.current=null}function l0(t,e,n){try{n()}catch(i){At(t,e,i)}}var ax=!1;function w_(t,e){if(Wy=mf,t=tA(),tw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gy={focusedElem:t,selectionRange:n},mf=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,w=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:Fi(e.type,y),w);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(x){At(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return p=ax,ax=!1,p}function Qu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&l0(e,n,s)}r=r.next}while(r!==i)}}function Gp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function u0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qA(t){var e=t.alternate;e!==null&&(t.alternate=null,qA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kr],delete e[Sc],delete e[Zy],delete e[t_],delete e[n_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QA(t){return t.tag===5||t.tag===3||t.tag===4}function lx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function c0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vf));else if(i!==4&&(t=t.child,t!==null))for(c0(t,e,n),t=t.sibling;t!==null;)c0(t,e,n),t=t.sibling}function d0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(d0(t,e,n),t=t.sibling;t!==null;)d0(t,e,n),t=t.sibling}var Yt=null,Wi=!1;function Ps(t,e,n){for(n=n.child;n!==null;)e2(t,e,n),n=n.sibling}function e2(t,e,n){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Bp,n)}catch{}switch(n.tag){case 5:pn||il(n,e);case 6:var i=Yt,r=Wi;Yt=null,Ps(t,e,n),Yt=i,Wi=r,Yt!==null&&(Wi?(t=Yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yt.removeChild(n.stateNode));break;case 18:Yt!==null&&(Wi?(t=Yt,n=n.stateNode,t.nodeType===8?rg(t.parentNode,n):t.nodeType===1&&rg(t,n),yc(t)):rg(Yt,n.stateNode));break;case 4:i=Yt,r=Wi,Yt=n.stateNode.containerInfo,Wi=!0,Ps(t,e,n),Yt=i,Wi=r;break;case 0:case 11:case 14:case 15:if(!pn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&l0(n,e,o),r=r.next}while(r!==i)}Ps(t,e,n);break;case 1:if(!pn&&(il(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){At(n,e,a)}Ps(t,e,n);break;case 21:Ps(t,e,n);break;case 22:n.mode&1?(pn=(i=pn)||n.memoizedState!==null,Ps(t,e,n),pn=i):Ps(t,e,n);break;default:Ps(t,e,n)}}function ux(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new v_),e.forEach(function(i){var r=O_.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function zi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yt=a.stateNode,Wi=!1;break e;case 3:Yt=a.stateNode.containerInfo,Wi=!0;break e;case 4:Yt=a.stateNode.containerInfo,Wi=!0;break e}a=a.return}if(Yt===null)throw Error(te(160));e2(s,o,r),Yt=null,Wi=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){At(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t2(e,t),e=e.sibling}function t2(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zi(e,t),dr(t),i&4){try{Qu(3,t,t.return),Gp(3,t)}catch(y){At(t,t.return,y)}try{Qu(5,t,t.return)}catch(y){At(t,t.return,y)}}break;case 1:zi(e,t),dr(t),i&512&&n!==null&&il(n,n.return);break;case 5:if(zi(e,t),dr(t),i&512&&n!==null&&il(n,n.return),t.flags&32){var r=t.stateNode;try{fc(r,"")}catch(y){At(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&SC(r,s),$y(a,o);var u=$y(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?PC(r,d):c==="dangerouslySetInnerHTML"?CC(r,d):c==="children"?fc(r,d):Uv(r,c,d,u)}switch(a){case"input":Ty(r,s);break;case"textarea":kC(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?cl(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?cl(r,!!s.multiple,s.defaultValue,!0):cl(r,!!s.multiple,s.multiple?[]:"",!1))}r[Sc]=s}catch(y){At(t,t.return,y)}}break;case 6:if(zi(e,t),dr(t),i&4){if(t.stateNode===null)throw Error(te(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){At(t,t.return,y)}}break;case 3:if(zi(e,t),dr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{yc(e.containerInfo)}catch(y){At(t,t.return,y)}break;case 4:zi(e,t),dr(t);break;case 13:zi(e,t),dr(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(xw=Mt())),i&4&&ux(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(pn=(u=pn)||c,zi(e,t),pn=u):zi(e,t),dr(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ge=t,c=t.child;c!==null;){for(d=ge=c;ge!==null;){switch(h=ge,f=h.child,h.tag){case 0:case 11:case 14:case 15:Qu(4,h,h.return);break;case 1:il(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){At(i,n,y)}}break;case 5:il(h,h.return);break;case 22:if(h.memoizedState!==null){dx(d);continue}}f!==null?(f.return=h,ge=f):dx(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=AC("display",o))}catch(y){At(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){At(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zi(e,t),dr(t),i&4&&ux(t);break;case 21:break;default:zi(e,t),dr(t)}}function dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(QA(n)){var i=n;break e}n=n.return}throw Error(te(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(fc(r,""),i.flags&=-33);var s=lx(t);d0(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=lx(t);c0(t,a,o);break;default:throw Error(te(161))}}catch(l){At(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b_(t,e,n){ge=t,n2(t)}function n2(t,e,n){for(var i=(t.mode&1)!==0;ge!==null;){var r=ge,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Ud;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||pn;a=Ud;var u=pn;if(Ud=o,(pn=l)&&!u)for(ge=r;ge!==null;)o=ge,l=o.child,o.tag===22&&o.memoizedState!==null?hx(r):l!==null?(l.return=o,ge=l):hx(r);for(;s!==null;)ge=s,n2(s),s=s.sibling;ge=r,Ud=a,pn=u}cx(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ge=s):cx(t)}}function cx(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pn||Gp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!pn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Fi(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Kb(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Kb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&yc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}pn||e.flags&512&&u0(e)}catch(h){At(e,e.return,h)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function dx(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function hx(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gp(4,e)}catch(l){At(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){At(e,r,l)}}var s=e.return;try{u0(e)}catch(l){At(e,s,l)}break;case 5:var o=e.return;try{u0(e)}catch(l){At(e,o,l)}}}catch(l){At(e,e.return,l)}if(e===t){ge=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ge=a;break}ge=e.return}}var x_=Math.ceil,Nf=xs.ReactCurrentDispatcher,ww=xs.ReactCurrentOwner,Mi=xs.ReactCurrentBatchConfig,Ge=0,Zt=null,Lt=null,an=0,ii=0,rl=Oo(0),Ut=0,Oc=null,da=0,Kp=0,bw=0,ec=null,Bn=null,xw=0,Fl=1/0,jr=null,Tf=!1,h0=null,oo=null,Vd=!1,Zs=null,Rf=0,tc=0,f0=null,Ih=-1,Bh=0;function An(){return Ge&6?Mt():Ih!==-1?Ih:Ih=Mt()}function ao(t){return t.mode&1?Ge&2&&an!==0?an&-an:r_.transition!==null?(Bh===0&&(Bh=zC()),Bh):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:GC(t.type)),t):1}function Qi(t,e,n,i){if(50<tc)throw tc=0,f0=null,Error(te(185));ld(t,n,i),(!(Ge&2)||t!==Zt)&&(t===Zt&&(!(Ge&2)&&(Kp|=n),Ut===4&&zs(t,an)),Gn(t,i),n===1&&Ge===0&&!(e.mode&1)&&(Fl=Mt()+500,Vp&&No()))}function Gn(t,e){var n=t.callbackNode;rD(t,e);var i=pf(t,t===Zt?an:0);if(i===0)n!==null&&xb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&xb(n),e===1)t.tag===0?i_(fx.bind(null,t)):dA(fx.bind(null,t)),QD(function(){!(Ge&6)&&No()}),n=null;else{switch(jC(i)){case 1:n=Kv;break;case 4:n=IC;break;case 16:n=ff;break;case 536870912:n=BC;break;default:n=ff}n=c2(n,i2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function i2(t,e){if(Ih=-1,Bh=0,Ge&6)throw Error(te(327));var n=t.callbackNode;if(ml()&&t.callbackNode!==n)return null;var i=pf(t,t===Zt?an:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Mf(t,i);else{e=i;var r=Ge;Ge|=2;var s=s2();(Zt!==t||an!==e)&&(jr=null,Fl=Mt()+500,na(t,e));do try{E_();break}catch(a){r2(t,a)}while(1);ow(),Nf.current=s,Ge=r,Lt!==null?e=0:(Zt=null,an=0,e=Ut)}if(e!==0){if(e===2&&(r=jy(t),r!==0&&(i=r,e=p0(t,r))),e===1)throw n=Oc,na(t,0),zs(t,i),Gn(t,Mt()),n;if(e===6)zs(t,i);else{if(r=t.current.alternate,!(i&30)&&!S_(r)&&(e=Mf(t,i),e===2&&(s=jy(t),s!==0&&(i=s,e=p0(t,s))),e===1))throw n=Oc,na(t,0),zs(t,i),Gn(t,Mt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(te(345));case 2:jo(t,Bn,jr);break;case 3:if(zs(t,i),(i&130023424)===i&&(e=xw+500-Mt(),10<e)){if(pf(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){An(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Xy(jo.bind(null,t,Bn,jr),e);break}jo(t,Bn,jr);break;case 4:if(zs(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-qi(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Mt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*x_(i/1960))-i,10<i){t.timeoutHandle=Xy(jo.bind(null,t,Bn,jr),i);break}jo(t,Bn,jr);break;case 5:jo(t,Bn,jr);break;default:throw Error(te(329))}}}return Gn(t,Mt()),t.callbackNode===n?i2.bind(null,t):null}function p0(t,e){var n=ec;return t.current.memoizedState.isDehydrated&&(na(t,e).flags|=256),t=Mf(t,e),t!==2&&(e=Bn,Bn=n,e!==null&&m0(e)),t}function m0(t){Bn===null?Bn=t:Bn.push.apply(Bn,t)}function S_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!rr(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zs(t,e){for(e&=~bw,e&=~Kp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qi(e),i=1<<n;t[n]=-1,e&=~i}}function fx(t){if(Ge&6)throw Error(te(327));ml();var e=pf(t,0);if(!(e&1))return Gn(t,Mt()),null;var n=Mf(t,e);if(t.tag!==0&&n===2){var i=jy(t);i!==0&&(e=i,n=p0(t,i))}if(n===1)throw n=Oc,na(t,0),zs(t,e),Gn(t,Mt()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jo(t,Bn,jr),Gn(t,Mt()),null}function Sw(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(Fl=Mt()+500,Vp&&No())}}function ha(t){Zs!==null&&Zs.tag===0&&!(Ge&6)&&ml();var e=Ge;Ge|=1;var n=Mi.transition,i=Ye;try{if(Mi.transition=null,Ye=1,t)return t()}finally{Ye=i,Mi.transition=n,Ge=e,!(Ge&6)&&No()}}function kw(){ii=rl.current,ct(rl)}function na(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qD(n)),Lt!==null)for(n=Lt.return;n!==null;){var i=n;switch(iw(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wf();break;case 3:zl(),ct(Hn),ct(gn),hw();break;case 5:dw(i);break;case 4:zl();break;case 13:ct(vt);break;case 19:ct(vt);break;case 10:aw(i.type._context);break;case 22:case 23:kw()}n=n.return}if(Zt=t,Lt=t=lo(t.current,null),an=ii=e,Ut=0,Oc=null,bw=Kp=da=0,Bn=ec=null,Zo!==null){for(e=0;e<Zo.length;e++)if(n=Zo[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Zo=null}return t}function r2(t,e){do{var n=Lt;try{if(ow(),_h.current=Of,Pf){for(var i=xt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Pf=!1}if(ca=0,Kt=zt=xt=null,qu=!1,Cc=0,ww.current=null,n===null||n.return===null){Ut=1,Oc=e,Lt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=an,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=ex(o);if(f!==null){f.flags&=-257,tx(f,o,a,s,e),f.mode&1&&Qb(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if(!(e&1)){Qb(s,u,e),Ew();break e}l=Error(te(426))}}else if(ft&&a.mode&1){var w=ex(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),tx(w,o,a,s,e),rw(jl(l,a));break e}}s=l=jl(l,a),Ut!==4&&(Ut=2),ec===null?ec=[s]:ec.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=FA(s,l,e);Gb(s,m);break e;case 1:a=l;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(oo===null||!oo.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=UA(s,a,e);Gb(s,x);break e}}s=s.return}while(s!==null)}a2(n)}catch(E){e=E,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(1)}function s2(){var t=Nf.current;return Nf.current=Of,t===null?Of:t}function Ew(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Zt===null||!(da&268435455)&&!(Kp&268435455)||zs(Zt,an)}function Mf(t,e){var n=Ge;Ge|=2;var i=s2();(Zt!==t||an!==e)&&(jr=null,na(t,e));do try{k_();break}catch(r){r2(t,r)}while(1);if(ow(),Ge=n,Nf.current=i,Lt!==null)throw Error(te(261));return Zt=null,an=0,Ut}function k_(){for(;Lt!==null;)o2(Lt)}function E_(){for(;Lt!==null&&!ZM();)o2(Lt)}function o2(t){var e=u2(t.alternate,t,ii);t.memoizedProps=t.pendingProps,e===null?a2(t):Lt=e,ww.current=null}function a2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=y_(n,e),n!==null){n.flags&=32767,Lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ut=6,Lt=null;return}}else if(n=g_(n,e,ii),n!==null){Lt=n;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=t}while(e!==null);Ut===0&&(Ut=5)}function jo(t,e,n){var i=Ye,r=Mi.transition;try{Mi.transition=null,Ye=1,C_(t,e,n,i)}finally{Mi.transition=r,Ye=i}return null}function C_(t,e,n,i){do ml();while(Zs!==null);if(Ge&6)throw Error(te(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(sD(t,s),t===Zt&&(Lt=Zt=null,an=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vd||(Vd=!0,c2(ff,function(){return ml(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Mi.transition,Mi.transition=null;var o=Ye;Ye=1;var a=Ge;Ge|=4,ww.current=null,w_(t,n),t2(n,t),WD(Gy),mf=!!Wy,Gy=Wy=null,t.current=n,b_(n),JM(),Ge=a,Ye=o,Mi.transition=s}else t.current=n;if(Vd&&(Vd=!1,Zs=t,Rf=r),s=t.pendingLanes,s===0&&(oo=null),QM(n.stateNode),Gn(t,Mt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Tf)throw Tf=!1,t=h0,h0=null,t;return Rf&1&&t.tag!==0&&ml(),s=t.pendingLanes,s&1?t===f0?tc++:(tc=0,f0=t):tc=0,No(),null}function ml(){if(Zs!==null){var t=jC(Rf),e=Mi.transition,n=Ye;try{if(Mi.transition=null,Ye=16>t?16:t,Zs===null)var i=!1;else{if(t=Zs,Zs=null,Rf=0,Ge&6)throw Error(te(331));var r=Ge;for(Ge|=4,ge=t.current;ge!==null;){var s=ge,o=s.child;if(ge.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ge=u;ge!==null;){var c=ge;switch(c.tag){case 0:case 11:case 15:Qu(8,c,s)}var d=c.child;if(d!==null)d.return=c,ge=d;else for(;ge!==null;){c=ge;var h=c.sibling,f=c.return;if(qA(c),c===u){ge=null;break}if(h!==null){h.return=f,ge=h;break}ge=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ge=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ge=o;else e:for(;ge!==null;){if(s=ge,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qu(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,ge=m;break e}ge=s.return}}var g=t.current;for(ge=g;ge!==null;){o=ge;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ge=v;else e:for(o=g;ge!==null;){if(a=ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gp(9,a)}}catch(E){At(a,a.return,E)}if(a===o){ge=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ge=x;break e}ge=a.return}}if(Ge=r,No(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Bp,t)}catch{}i=!0}return i}finally{Ye=n,Mi.transition=e}}return!1}function px(t,e,n){e=jl(n,e),e=FA(t,e,1),t=so(t,e,1),e=An(),t!==null&&(ld(t,1,e),Gn(t,e))}function At(t,e,n){if(t.tag===3)px(t,t,n);else for(;e!==null;){if(e.tag===3){px(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(oo===null||!oo.has(i))){t=jl(n,t),t=UA(e,t,1),e=so(e,t,1),t=An(),e!==null&&(ld(e,1,t),Gn(e,t));break}}e=e.return}}function A_(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=An(),t.pingedLanes|=t.suspendedLanes&n,Zt===t&&(an&n)===n&&(Ut===4||Ut===3&&(an&130023424)===an&&500>Mt()-xw?na(t,0):bw|=n),Gn(t,e)}function l2(t,e){e===0&&(t.mode&1?(e=Dd,Dd<<=1,!(Dd&130023424)&&(Dd=4194304)):e=1);var n=An();t=ps(t,e),t!==null&&(ld(t,e,n),Gn(t,n))}function P_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),l2(t,n)}function O_(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(te(314))}i!==null&&i.delete(e),l2(t,n)}var u2;u2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Hn.current)jn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jn=!1,m_(t,e,n);jn=!!(t.flags&131072)}else jn=!1,ft&&e.flags&1048576&&hA(e,Sf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Lh(t,e),t=e.pendingProps;var r=Ll(e,gn.current);pl(e,n),r=pw(null,e,i,t,r,n);var s=mw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wn(i)?(s=!0,bf(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,uw(e),r.updater=Hp,e.stateNode=r,r._reactInternals=e,t0(e,i,t,n),e=r0(null,e,i,!0,s,n)):(e.tag=0,ft&&s&&nw(e),Sn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Lh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=T_(i),t=Fi(i,t),r){case 0:e=i0(null,e,i,t,n);break e;case 1:e=rx(null,e,i,t,n);break e;case 11:e=nx(null,e,i,t,n);break e;case 14:e=ix(null,e,i,Fi(i.type,t),n);break e}throw Error(te(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fi(i,r),i0(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fi(i,r),rx(t,e,i,r,n);case 3:e:{if(GA(e),t===null)throw Error(te(387));i=e.pendingProps,s=e.memoizedState,r=s.element,gA(t,e),Cf(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=jl(Error(te(423)),e),e=sx(t,e,i,n,r);break e}else if(i!==r){r=jl(Error(te(424)),e),e=sx(t,e,i,n,r);break e}else for(li=ro(e.stateNode.containerInfo.firstChild),di=e,ft=!0,Gi=null,n=bA(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Il(),i===r){e=ms(t,e,n);break e}Sn(t,e,i,n)}e=e.child}return e;case 5:return xA(e),t===null&&qy(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Ky(i,r)?o=null:s!==null&&Ky(i,s)&&(e.flags|=32),WA(t,e),Sn(t,e,o,n),e.child;case 6:return t===null&&qy(e),null;case 13:return KA(t,e,n);case 4:return cw(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Bl(e,null,i,n):Sn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fi(i,r),nx(t,e,i,r,n);case 7:return Sn(t,e,e.pendingProps,n),e.child;case 8:return Sn(t,e,e.pendingProps.children,n),e.child;case 12:return Sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,rt(kf,i._currentValue),i._currentValue=o,s!==null)if(rr(s.value,o)){if(s.children===r.children&&!Hn.current){e=ms(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=rs(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(te(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Sn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,pl(e,n),r=Li(r),i=i(r),e.flags|=1,Sn(t,e,i,n),e.child;case 14:return i=e.type,r=Fi(i,e.pendingProps),r=Fi(i.type,r),ix(t,e,i,r,n);case 15:return VA(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Fi(i,r),Lh(t,e),e.tag=1,Wn(i)?(t=!0,bf(e)):t=!1,pl(e,n),vA(e,i,r),t0(e,i,r,n),r0(null,e,i,!0,t,n);case 19:return XA(t,e,n);case 22:return HA(t,e,n)}throw Error(te(156,e.tag))};function c2(t,e){return LC(t,e)}function N_(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ni(t,e,n,i){return new N_(t,e,n,i)}function Cw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function T_(t){if(typeof t=="function")return Cw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hv)return 11;if(t===Wv)return 14}return 2}function lo(t,e){var n=t.alternate;return n===null?(n=Ni(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zh(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Cw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xa:return ia(n.children,r,s,e);case Vv:o=8,r|=8;break;case Cy:return t=Ni(12,n,e,r|2),t.elementType=Cy,t.lanes=s,t;case Ay:return t=Ni(13,n,e,r),t.elementType=Ay,t.lanes=s,t;case Py:return t=Ni(19,n,e,r),t.elementType=Py,t.lanes=s,t;case wC:return Xp(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yC:o=10;break e;case vC:o=9;break e;case Hv:o=11;break e;case Wv:o=14;break e;case Rs:o=16,i=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Ni(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function ia(t,e,n,i){return t=Ni(7,t,i,e),t.lanes=n,t}function Xp(t,e,n,i){return t=Ni(22,t,i,e),t.elementType=wC,t.lanes=n,t.stateNode={isHidden:!1},t}function hg(t,e,n){return t=Ni(6,t,null,e),t.lanes=n,t}function fg(t,e,n){return e=Ni(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function R_(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Km(0),this.expirationTimes=Km(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Km(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Aw(t,e,n,i,r,s,o,a,l){return t=new R_(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ni(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uw(s),t}function M_(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ka,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function d2(t){if(!t)return po;t=t._reactInternals;e:{if(Ea(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(Wn(n))return cA(t,n,e)}return e}function h2(t,e,n,i,r,s,o,a,l){return t=Aw(n,i,!0,t,r,s,o,a,l),t.context=d2(null),n=t.current,i=An(),r=ao(n),s=rs(i,r),s.callback=e??null,so(n,s,r),t.current.lanes=r,ld(t,r,i),Gn(t,i),t}function Zp(t,e,n,i){var r=e.current,s=An(),o=ao(r);return n=d2(n),e.context===null?e.context=n:e.pendingContext=n,e=rs(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=so(r,e,o),t!==null&&(Qi(t,r,o,s),Dh(t,r,o)),o}function Df(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Pw(t,e){mx(t,e),(t=t.alternate)&&mx(t,e)}function D_(){return null}var f2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ow(t){this._internalRoot=t}Jp.prototype.render=Ow.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));Zp(t,e,null,null)};Jp.prototype.unmount=Ow.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ha(function(){Zp(null,t,null,null)}),e[fs]=null}};function Jp(t){this._internalRoot=t}Jp.prototype.unstable_scheduleHydration=function(t){if(t){var e=VC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bs.length&&e!==0&&e<Bs[n].priority;n++);Bs.splice(n,0,t),n===0&&WC(t)}};function Nw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gx(){}function __(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Df(o);s.call(u)}}var o=h2(e,i,t,0,null,!1,!1,"",gx);return t._reactRootContainer=o,t[fs]=o.current,bc(t.nodeType===8?t.parentNode:t),ha(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Df(l);a.call(u)}}var l=Aw(t,0,!1,null,null,!1,!1,"",gx);return t._reactRootContainer=l,t[fs]=l.current,bc(t.nodeType===8?t.parentNode:t),ha(function(){Zp(e,l,n,i)}),l}function qp(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Df(o);a.call(l)}}Zp(e,o,t,r)}else o=__(n,e,t,r,i);return Df(o)}FC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Iu(e.pendingLanes);n!==0&&(Xv(e,n|1),Gn(e,Mt()),!(Ge&6)&&(Fl=Mt()+500,No()))}break;case 13:ha(function(){var i=ps(t,1);if(i!==null){var r=An();Qi(i,t,1,r)}}),Pw(t,1)}};Zv=function(t){if(t.tag===13){var e=ps(t,134217728);if(e!==null){var n=An();Qi(e,t,134217728,n)}Pw(t,134217728)}};UC=function(t){if(t.tag===13){var e=ao(t),n=ps(t,e);if(n!==null){var i=An();Qi(n,t,e,i)}Pw(t,e)}};VC=function(){return Ye};HC=function(t,e){var n=Ye;try{return Ye=t,e()}finally{Ye=n}};Iy=function(t,e,n){switch(e){case"input":if(Ty(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Up(i);if(!r)throw Error(te(90));xC(i),Ty(i,r)}}}break;case"textarea":kC(t,n);break;case"select":e=n.value,e!=null&&cl(t,!!n.multiple,e,!1)}};TC=Sw;RC=ha;var $_={usingClientEntryPoint:!1,Events:[cd,qa,Up,OC,NC,Sw]},xu={findFiberByHostInstance:Xo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},L_={bundleType:xu.bundleType,version:xu.version,rendererPackageName:xu.rendererPackageName,rendererConfig:xu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_C(t),t===null?null:t.stateNode},findFiberByHostInstance:xu.findFiberByHostInstance||D_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{Bp=Hd.inject(L_),Tr=Hd}catch{}}fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$_;fi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nw(e))throw Error(te(200));return M_(t,e,null,n)};fi.createRoot=function(t,e){if(!Nw(t))throw Error(te(299));var n=!1,i="",r=f2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Aw(t,1,!1,null,null,n,!1,i,r),t[fs]=e.current,bc(t.nodeType===8?t.parentNode:t),new Ow(e)};fi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=_C(e),t=t===null?null:t.stateNode,t};fi.flushSync=function(t){return ha(t)};fi.hydrate=function(t,e,n){if(!Yp(e))throw Error(te(200));return qp(null,t,e,!0,n)};fi.hydrateRoot=function(t,e,n){if(!Nw(t))throw Error(te(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=f2;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=h2(e,null,t,1,n??null,r,!1,s,o),t[fs]=e.current,bc(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Jp(e)};fi.render=function(t,e,n){if(!Yp(e))throw Error(te(200));return qp(null,t,e,!1,n)};fi.unmountComponentAtNode=function(t){if(!Yp(t))throw Error(te(40));return t._reactRootContainer?(ha(function(){qp(null,null,t,!1,function(){t._reactRootContainer=null,t[fs]=null})}),!0):!1};fi.unstable_batchedUpdates=Sw;fi.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Yp(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return qp(t,e,n,!1,i)};fi.version="18.2.0-next-9e3b772b8-20220608";function p2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p2)}catch(t){console.error(t)}}p2(),hC.exports=fi;var Ca=hC.exports;const m2=iu(Ca);var yx=Ca;ky.createRoot=yx.createRoot,ky.hydrateRoot=yx.hydrateRoot;function I_(t,{insertAt:e}={}){if(!t||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}I_(`[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 6px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:-3px;margin-right:4px}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:-1px}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:auto;border:none;cursor:pointer;outline:none;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:auto}[data-sonner-toast] [data-cancel]{color:var(--color);background:var(--border-color)}[data-sonner-toast] [data-close-button]{position:absolute;left:0;top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:translate(-35%,-35%);border-radius:50%;opacity:0;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]{opacity:1}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}
`);var B_=t=>{switch(t){case"success":return F_;case"error":return U_;default:return null}},z_=Array(12).fill(0),j_=({visible:t})=>ue.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},ue.createElement("div",{className:"sonner-spinner"},z_.map((e,n)=>ue.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),F_=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),U_=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),g0=0,V_=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...i}=t,r=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:g0++;return this.toasts.find(s=>s.id===r)?this.toasts=this.toasts.map(s=>s.id===r?(this.publish({...s,...t,id:r,title:n}),{...s,...t,id:r,title:n}):s):this.addToast({title:n,...i,id:r}),r},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.promise=(t,e)=>{let n=this.create({...e,promise:t,type:"loading",message:e.loading});return(t instanceof Promise?t:t()).then(i=>{let r=typeof e.success=="function"?e.success(i):e.success;this.create({id:n,type:"success",message:r})}).catch(i=>{let r=typeof e.error=="function"?e.error(i):e.error;this.create({id:n,type:"error",message:r})}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||g0++;this.publish({jsx:t(n),id:n,...e})},this.subscribers=[],this.toasts=[]}},Ds=new V_,H_=(t,e)=>{let n=(e==null?void 0:e.id)||g0++;return Ds.addToast({title:t,...e,id:n}),n},W_=H_,Qp=Object.assign(W_,{success:Ds.success,error:Ds.error,custom:Ds.custom,message:Ds.message,promise:Ds.promise,dismiss:Ds.dismiss}),G_=3,K_="32px",X_=4e3,Z_=356,g2=14,J_=20,Y_=200,q_=t=>{let{invert:e,toast:n,interacting:i,setHeights:r,visibleToasts:s,heights:o,index:a,toasts:l,expanded:u,removeToast:c,closeButton:d,style:h,className:f="",descriptionClassName:p="",duration:y,position:w,expandByDefault:m}=t,[g,v]=ue.useState(!1),[x,E]=ue.useState(!1),[O,N]=ue.useState(!1),[P,R]=ue.useState(!1),[_,M]=ue.useState(0),[H,F]=ue.useState(0),j=ue.useRef(null),X=a===0,J=a+1<=s,G=n.type,L=n.className||"",I=n.descriptionClassName||"",Y=ue.useMemo(()=>o.findIndex(V=>V.toastId===n.id)||0,[o,n.id]),ae=ue.useMemo(()=>n.duration||y||X_,[n.duration,y]),ve=ue.useRef(0),Se=ue.useRef(0),U=ue.useRef(ae),B=ue.useRef(0),W=ue.useRef(null),[b,A]=w.split("-"),D=ue.useMemo(()=>o.reduce((V,Z,Q)=>Q>=Y?V:V+Z.height,0),[o,Y]),T=n.invert||e,z=G==="loading";Se.current=ue.useMemo(()=>Y*g2+D,[Y,D]),ue.useEffect(()=>{v(!0)},[]),ue.useLayoutEffect(()=>{if(!g)return;let V=j.current,Z=V.style.height;V.style.height="auto";let Q=V.getBoundingClientRect().height;V.style.height=Z,F(Q),r(Ne=>Ne.find(de=>de.toastId===n.id)?Ne.map(de=>de.toastId===n.id?{...de,height:Q}:de):[{toastId:n.id,height:Q},...Ne])},[g,n.title,n.description,r,n.id]);let K=ue.useCallback(()=>{E(!0),M(Se.current),r(V=>V.filter(Z=>Z.toastId!==n.id)),setTimeout(()=>{c(n)},Y_)},[n,c,r,Se]);return ue.useEffect(()=>{if(n.promise&&G==="loading"||n.duration===1/0)return;let V;return u||i?(()=>{if(B.current<ve.current){let Z=new Date().getTime()-ve.current;U.current=U.current-Z}B.current=new Date().getTime()})():(ve.current=new Date().getTime(),V=setTimeout(()=>{var Z;(Z=n.onAutoClose)==null||Z.call(n,n),K()},U.current)),()=>clearTimeout(V)},[u,i,m,n,ae,K,n.promise,G]),ue.useEffect(()=>{let V=j.current;if(V){let Z=V.getBoundingClientRect().height;return F(Z),r(Q=>[{toastId:n.id,height:Z},...Q]),()=>r(Q=>Q.filter(Ne=>Ne.toastId!==n.id))}},[r,n.id]),ue.useEffect(()=>{n.delete&&K()},[K,n.delete]),ue.createElement("li",{"aria-live":n.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:j,className:f+" "+L,"data-sonner-toast":"","data-styled":!n.jsx,"data-mounted":g,"data-promise":!!n.promise,"data-removed":x,"data-visible":J,"data-y-position":b,"data-x-position":A,"data-index":a,"data-front":X,"data-swiping":O,"data-type":G,"data-invert":T,"data-swipe-out":P,"data-expanded":!!(u||m&&g),style:{"--index":a,"--toasts-before":a,"--z-index":l.length-a,"--offset":`${x?_:Se.current}px`,"--initial-height":m?"auto":`${H}px`,...h,...n.style},onPointerDown:V=>{z||(M(Se.current),V.target.setPointerCapture(V.pointerId),V.target.tagName!=="BUTTON"&&(N(!0),W.current={x:V.clientX,y:V.clientY}))},onPointerUp:()=>{var V,Z,Q;if(P)return;W.current=null;let Ne=Number(((V=j.current)==null?void 0:V.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(Ne)>=J_){M(Se.current),(Z=n.onDismiss)==null||Z.call(n,n),K(),R(!0);return}(Q=j.current)==null||Q.style.setProperty("--swipe-amount","0px"),N(!1)},onPointerMove:V=>{var Z;if(!W.current)return;let Q=V.clientY-W.current.y,Ne=V.clientX-W.current.x,de=(b==="top"?Math.min:Math.max)(0,Q),Te=V.pointerType==="touch"?10:2;Math.abs(de)>Te?(Z=j.current)==null||Z.style.setProperty("--swipe-amount",`${Q}px`):Math.abs(Ne)>Te&&(W.current=null)}},d&&!n.jsx?ue.createElement("button",{"aria-label":"Close toast","data-disabled":z,"data-close-button":!0,onClick:z?void 0:()=>{var V;K(),(V=n.onDismiss)==null||V.call(n,n)}},ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ue.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ue.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,n.jsx||ue.isValidElement(n.title)?n.jsx||n.title:ue.createElement(ue.Fragment,null,G||n.icon||n.promise?ue.createElement("div",{"data-icon":""},n.promise?ue.createElement(j_,{visible:G==="loading"}):null,n.icon||B_(G)):null,ue.createElement("div",{"data-content":""},ue.createElement("div",{"data-title":""},n.title),n.description?ue.createElement("div",{"data-description":"",className:p+I},n.description):null),n.cancel?ue.createElement("button",{"data-button":!0,"data-cancel":!0,onClick:()=>{var V;K(),(V=n.cancel)!=null&&V.onClick&&n.cancel.onClick()}},n.cancel.label):null,n.action?ue.createElement("button",{"data-button":"",onClick:V=>{var Z;(Z=n.action)==null||Z.onClick(V),!V.defaultPrevented&&K()}},n.action.label):null))},Q_=t=>{var e;let{invert:n,position:i="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,theme:u="light",richColors:c,duration:d,style:h,visibleToasts:f=G_,toastOptions:p}=t,[y,w]=ue.useState([]),[m,g]=ue.useState([]),[v,x]=ue.useState(!1),[E,O]=ue.useState(!1),[N,P]=ue.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),[R,_]=i.split("-"),M=ue.useRef(null),H=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=ue.useCallback(j=>w(X=>X.filter(({id:J})=>J!==j.id)),[]);return ue.useEffect(()=>Ds.subscribe(j=>{if(j.dismiss){w(X=>X.map(J=>J.id===j.id?{...J,delete:!0}:J));return}setTimeout(()=>{m2.flushSync(()=>{w(X=>{let J=X.findIndex(G=>G.id===j.id);return J!==-1?[...X.slice(0,J),{...X[J],...j},...X.slice(J+1)]:[j,...X]})})})}),[]),ue.useEffect(()=>{if(u!=="system"){P(u);return}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:j})=>{P(j?"dark":"light")})},[u]),ue.useEffect(()=>{y.length<=1&&x(!1)},[y]),ue.useEffect(()=>{let j=X=>{var J,G;r.every(L=>X[L]||X.code===L)&&(x(!0),(J=M.current)==null||J.focus()),X.code==="Escape"&&(document.activeElement===M.current||(G=M.current)!=null&&G.contains(document.activeElement))&&x(!1)};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[r]),y.length?ue.createElement("section",{"aria-label":`Notifications ${H}`,tabIndex:-1},ue.createElement("ol",{tabIndex:-1,ref:M,className:a,"data-sonner-toaster":!0,"data-theme":N,"data-rich-colors":c,"data-y-position":R,"data-x-position":_,style:{"--front-toast-height":`${(e=m[0])==null?void 0:e.height}px`,"--offset":typeof l=="number"?`${l}px`:l||K_,"--width":`${Z_}px`,"--gap":`${g2}px`,...h},onMouseEnter:()=>x(!0),onMouseMove:()=>x(!0),onMouseLeave:()=>{E||x(!1)},onPointerDown:()=>{O(!0)},onPointerUp:()=>O(!1)},y.map((j,X)=>ue.createElement(q_,{key:j.id,index:X,toast:j,duration:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:f,closeButton:o,interacting:E,position:i,style:p==null?void 0:p.style,removeToast:F,toasts:y,heights:m,setHeights:g,expandByDefault:s,expanded:v})))):null};let e$=0;function ke(t,e){const n=`atom${++e$}`,i={toString:()=>n};return typeof t=="function"?i.read=t:(i.init=t,i.read=r=>r(i),i.write=(r,s,o)=>s(i,typeof o=="function"?o(r(i)):o)),e&&(i.write=e),i}const vx=t=>"init"in t,wx=t=>!!t.write,_f=new WeakMap,t$=(t,e)=>{_f.set(t,e),t.catch(()=>{}).finally(()=>_f.delete(t))},bx=(t,e)=>{const n=_f.get(t);n&&(_f.delete(t),n(e))},xx=(t,e)=>{t.status="fulfilled",t.value=e},Sx=(t,e)=>{t.status="rejected",t.reason=e},n$=t=>typeof(t==null?void 0:t.then)=="function",Wd=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),kx=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),Su=t=>"v"in t&&t.v instanceof Promise,i$=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Gd=t=>{if("e"in t)throw t.e;return t.v},Tw=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let i,r;const s=P=>t.get(P),o=(P,R)=>{const _=t.get(P);if(t.set(P,R),n.has(P)||n.set(P,_),_&&Su(_)){const M="v"in R?R.v instanceof Promise?R.v:Promise.resolve(R.v):Promise.reject(R.e);bx(_.v,M)}},a=(P,R,_)=>{const M=new Map;let H=!1;_.forEach((F,j)=>{!F&&j===P&&(F=R),F&&(M.set(j,F),R.d.get(j)!==F&&(H=!0))}),(H||R.d.size!==M.size)&&(R.d=M)},l=(P,R,_)=>{const M=s(P),H={d:(M==null?void 0:M.d)||new Map,v:R};if(_&&a(P,H,_),M&&Wd(M,H)&&M.d===H.d)return M;if(M&&Su(M)&&Su(H)&&i$(M,H)){if(M.d===H.d)return M;H.v=M.v}return o(P,H),H},u=(P,R,_,M)=>{if(n$(R)){let H;const F=new Promise((j,X)=>{let J=!1;R.then(G=>{if(!J){J=!0;const L=s(P),I=l(P,F,_);xx(F,G),j(G),(L==null?void 0:L.d)!==I.d&&E(P,I,L==null?void 0:L.d)}},G=>{if(!J){J=!0;const L=s(P),I=l(P,F,_);Sx(F,G),X(G),(L==null?void 0:L.d)!==I.d&&E(P,I,L==null?void 0:L.d)}}),H=G=>{J||(J=!0,G.then(L=>xx(F,L),L=>Sx(F,L)),j(G))}});return F.orig=R,F.status="pending",t$(F,j=>{j&&H(j),M==null||M()}),l(P,F,_)}return l(P,R,_)},c=(P,R,_)=>{const M=s(P),H={d:(M==null?void 0:M.d)||new Map,e:R};return _&&a(P,H,_),M&&kx(M,H)&&M.d===H.d?M:(o(P,H),H)},d=(P,R)=>{const _=s(P);if(!R&&_&&(e.has(P)||Array.from(_.d).every(([G,L])=>G===P||d(G)===L)))return _;const M=new Map;let H=!0;const F=G=>{if(G===P){const I=s(G);if(I)return M.set(G,I),Gd(I);if(vx(G))return M.set(G,void 0),G.init;throw new Error("no atom init")}const L=d(G);return M.set(G,L),Gd(L)};let j,X;const J={get signal(){return j||(j=new AbortController),j.signal},get setSelf(){return!X&&wx(P)&&(X=(...G)=>{if(!H)return g(P,...G)}),X}};try{const G=P.read(F,J);return u(P,G,M,()=>j==null?void 0:j.abort())}catch(G){return c(P,G,M)}finally{H=!1}},h=P=>Gd(d(P)),f=P=>{let R=e.get(P);return R||(R=v(P)),R},p=(P,R)=>!R.l.size&&(!R.t.size||R.t.size===1&&R.t.has(P)),y=P=>{const R=e.get(P);R&&p(P,R)&&x(P)},w=P=>{const R=new Map,_=new WeakMap,M=F=>{const j=e.get(F);j==null||j.t.forEach(X=>{X!==F&&(R.set(X,(R.get(X)||new Set).add(F)),_.set(X,(_.get(X)||0)+1),M(X))})};M(P);const H=F=>{const j=e.get(F);j==null||j.t.forEach(X=>{var J;if(X!==F){let G=_.get(X);if(G&&_.set(X,--G),!G){let L=!!((J=R.get(X))!=null&&J.size);if(L){const I=s(X),Y=d(X,!0);L=!I||!Wd(I,Y)}L||R.forEach(I=>I.delete(X))}H(X)}})};H(P)},m=(P,...R)=>{let _=!0;const M=j=>Gd(d(j)),H=(j,...X)=>{let J;if(j===P){if(!vx(j))throw new Error("atom not writable");const G=s(j),L=u(j,X[0]);(!G||!Wd(G,L))&&w(j)}else J=m(j,...X);if(!_){const G=O()}return J},F=P.write(M,H,...R);return _=!1,F},g=(P,...R)=>{const _=m(P,...R),M=O();return _},v=(P,R)=>{var _;(_=s(P))==null||_.d.forEach((H,F)=>{const j=e.get(F);j?j.t.add(P):F!==P&&v(F,P)}),d(P);const M={t:new Set(R&&[R]),l:new Set};if(e.set(P,M),wx(P)&&P.onMount){const H=P.onMount((...F)=>g(P,...F));H&&(M.u=H)}return M},x=P=>{var R;const _=(R=e.get(P))==null?void 0:R.u;_&&_(),e.delete(P);const M=s(P);M&&(Su(M)&&bx(M.v),M.d.forEach((H,F)=>{if(F!==P){const j=e.get(F);j&&(j.t.delete(P),p(F,j)&&x(F))}}))},E=(P,R,_)=>{const M=new Set(R.d.keys());_==null||_.forEach((H,F)=>{if(M.has(F)){M.delete(F);return}const j=e.get(F);j&&(j.t.delete(P),p(F,j)&&x(F))}),M.forEach(H=>{const F=e.get(H);F?F.t.add(P):e.has(P)&&v(H,P)})},O=()=>{let P;for(;n.size;){const R=Array.from(n);n.clear(),R.forEach(([_,M])=>{const H=s(_);if(H){H.d!==(M==null?void 0:M.d)&&E(_,H,M==null?void 0:M.d);const F=e.get(_);F&&!(M&&!Su(M)&&(Wd(M,H)||kx(M,H)))&&F.l.forEach(j=>j())}})}};return{get:h,set:g,sub:(P,R)=>{const _=f(P),M=O(),H=_.l;return H.add(R),()=>{H.delete(R),y(P)}}}};let pg;const r$=()=>(pg||(pg=Tw()),pg),y2=k.createContext(void 0),v2=t=>{const e=k.useContext(y2);return(t==null?void 0:t.store)||e||r$()},s$=({children:t,store:e})=>{const n=k.useRef();return!e&&!n.current&&(n.current=Tw()),k.createElement(y2.Provider,{value:e||n.current},t)},o$=t=>typeof(t==null?void 0:t.then)=="function",a$=ue.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function On(t,e){const n=v2(e),[[i,r,s],o]=k.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=i;(r!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return k.useEffect(()=>{const u=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),u},[n,t,l]),k.useDebugValue(a),o$(a)?a$(a):a}function l$(t,e){const n=v2(e);return k.useCallback((...r)=>n.set(t,...r),[n,t])}function w2(t,e){return[On(t,e),l$(t,e)]}const{createElement:Ul,createContext:u$,forwardRef:b2,useCallback:Ns,useContext:x2,useEffect:ss,useImperativeHandle:S2,useLayoutEffect:c$,useMemo:d$,useRef:si,useState:nc}=zv,Ex=zv["useId".toString()],$f=c$,h$=typeof Ex=="function"?Ex:()=>null;let f$=0;function Rw(t=null){const e=h$(),n=si(t||e||null);return n.current===null&&(n.current=""+f$++),n.current}const em=u$(null);em.displayName="PanelGroupContext";function k2({children:t=null,className:e="",collapsedSize:n=0,collapsible:i=!1,defaultSize:r=null,forwardedRef:s,id:o=null,maxSize:a=100,minSize:l=10,onCollapse:u=null,onResize:c=null,order:d=null,style:h={},tagName:f="div"}){const p=x2(em);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const y=Rw(o),{collapsePanel:w,expandPanel:m,getPanelStyle:g,registerPanel:v,resizePanel:x,unregisterPanel:E}=p,O=si({onCollapse:u,onResize:c});if(ss(()=>{O.current.onCollapse=u,O.current.onResize=c}),l<0||l>100)throw Error(`Panel minSize must be between 0 and 100, but was ${l}`);if(a<0||a>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${a}`);if(r!==null){if(r<0||r>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${r}`);l>r&&!i&&(console.error(`Panel minSize ${l} cannot be greater than defaultSize ${r}`),r=l)}const N=g(y,r),P=si({size:Cx(N)}),R=si({callbacksRef:O,collapsedSize:n,collapsible:i,defaultSize:r,id:y,idWasAutoGenerated:o==null,maxSize:a,minSize:l,order:d});return $f(()=>{P.current.size=Cx(N),R.current.callbacksRef=O,R.current.collapsedSize=n,R.current.collapsible=i,R.current.defaultSize=r,R.current.id=y,R.current.idWasAutoGenerated=o==null,R.current.maxSize=a,R.current.minSize=l,R.current.order=d}),$f(()=>(v(y,R),()=>{E(y)}),[d,y,v,E]),S2(s,()=>({collapse:()=>w(y),expand:()=>m(y),getCollapsed(){return P.current.size===0},getSize(){return P.current.size},resize:_=>x(y,_)}),[w,m,y,x]),Ul(f,{children:t,className:e,"data-panel":"","data-panel-collapsible":i||void 0,"data-panel-id":y,"data-panel-size":parseFloat(""+N.flexGrow).toFixed(1),id:`data-panel-id-${y}`,style:{...N,...h}})}const jh=b2((t,e)=>Ul(k2,{...t,forwardedRef:e}));k2.displayName="Panel";jh.displayName="forwardRef(Panel)";function Cx(t){const{flexGrow:e}=t;return typeof e=="string"?parseFloat(e):e}const fa=10;function zu(t,e,n,i,r,s,o,a){const{sizes:l}=a||{},u=l||s;if(r===0)return u;const c=wi(e),d=u.concat();let h=0;{const y=r<0?i:n,w=c.findIndex(x=>x.current.id===y),m=c[w],g=u[w],v=Ax(m,Math.abs(r),g,t);if(g===v)return u;v===0&&g>0&&o.set(y,g),r=r<0?g-v:v-g}let f=r<0?n:i,p=c.findIndex(y=>y.current.id===f);for(;;){const y=c[p],w=u[p],m=Math.abs(r)-Math.abs(h),g=Ax(y,0-m,w,t);if(w!==g&&(g===0&&w>0&&o.set(y.current.id,w),h+=w-g,d[p]=g,h.toPrecision(fa).localeCompare(Math.abs(r).toPrecision(fa),void 0,{numeric:!0})>=0))break;if(r<0){if(--p<0)break}else if(++p>=c.length)break}return h===0?u:(f=r<0?i:n,p=c.findIndex(y=>y.current.id===f),d[p]=u[p]+h,d)}function Da(t,e,n){e.forEach((i,r)=>{const s=t[r];if(!s)return;const{callbacksRef:o,collapsedSize:a,collapsible:l,id:u}=s.current,c=n[u];if(c!==i){n[u]=i;const{onCollapse:d,onResize:h}=o.current;h&&h(i,c),l&&d&&((c==null||c===a)&&i!==a?d(!1):c!==a&&i===a&&d(!0))}})}function mg(t,e){if(e.length<2)return[null,null];const n=e.findIndex(o=>o.current.id===t);if(n<0)return[null,null];const i=n===e.length-1,r=i?e[n-1].current.id:t,s=i?t:e[n+1].current.id;return[r,s]}function E2(t,e,n){if(t.size===1)return"100";const r=wi(t).findIndex(o=>o.current.id===e),s=n[r];return s==null?"0":s.toPrecision(fa)}function p$(t){const e=document.querySelector(`[data-panel-id="${t}"]`);return e||null}function Mw(t){const e=document.querySelector(`[data-panel-group-id="${t}"]`);return e||null}function tm(t){const e=document.querySelector(`[data-panel-resize-handle-id="${t}"]`);return e||null}function m$(t){return C2().findIndex(i=>i.getAttribute("data-panel-resize-handle-id")===t)??null}function C2(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function A2(t){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Dw(t,e,n){var l,u,c,d;const i=tm(e),r=A2(t),s=i?r.indexOf(i):-1,o=((u=(l=n[s])==null?void 0:l.current)==null?void 0:u.id)??null,a=((d=(c=n[s+1])==null?void 0:c.current)==null?void 0:d.id)??null;return[o,a]}function wi(t){return Array.from(t.values()).sort((e,n)=>{const i=e.current.order,r=n.current.order;return i==null&&r==null?0:i==null?-1:r==null?1:i-r})}function Ax(t,e,n,i){var c;const r=n+e,{collapsedSize:s,collapsible:o,maxSize:a,minSize:l}=t.current;if(o){if(n>s){if(r<=l/2+s)return s}else if(!((c=i==null?void 0:i.type)==null?void 0:c.startsWith("key"))&&r<l)return s}return Math.min(a,Math.max(l,r))}function P2(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}function g$({committedValuesRef:t,groupId:e,panels:n,setSizes:i,sizes:r,panelSizeBeforeCollapse:s}){ss(()=>{const{direction:o,panels:a}=t.current,l=Mw(e),{height:u,width:c}=l.getBoundingClientRect(),h=A2(e).map(f=>{const p=f.getAttribute("data-panel-resize-handle-id"),y=wi(a),[w,m]=Dw(e,p,y);if(w==null||m==null)return()=>{};let g=0,v=100,x=0,E=0;y.forEach(M=>{M.current.id===w?(v=M.current.maxSize,g=M.current.minSize):(x+=M.current.minSize,E+=M.current.maxSize)});const O=Math.min(v,100-x),N=Math.max(g,(y.length-1)*100-E),P=E2(a,w,r);f.setAttribute("aria-valuemax",""+Math.round(O)),f.setAttribute("aria-valuemin",""+Math.round(N)),f.setAttribute("aria-valuenow",""+Math.round(parseInt(P)));const R=M=>{if(!M.defaultPrevented)switch(M.key){case"Enter":{M.preventDefault();const H=y.findIndex(F=>F.current.id===w);if(H>=0){const F=y[H],j=r[H];if(j!=null){let X=0;j.toPrecision(fa)<=F.current.minSize.toPrecision(fa)?X=o==="horizontal"?c:u:X=-(o==="horizontal"?c:u);const J=zu(M,a,w,m,X,r,s.current,null);r!==J&&i(J)}}break}}};f.addEventListener("keydown",R);const _=p$(w);return _!=null&&f.setAttribute("aria-controls",_.id),()=>{f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow"),f.removeEventListener("keydown",R),_!=null&&f.removeAttribute("aria-controls")}});return()=>{h.forEach(f=>f())}},[t,e,n,s,i,r])}function y$({disabled:t,handleId:e,resizeHandler:n}){ss(()=>{if(t||n==null)return;const i=tm(e);if(i==null)return;const r=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),n(s);break}case"F6":{s.preventDefault();const o=C2(),a=m$(e);P2(a!==null);const l=s.shiftKey?a>0?a-1:o.length-1:a+1<o.length?a+1:0;o[l].focus();break}}};return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}},[t,e,n])}function v$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function O2(t,e,n,i=0,r=null){const s=n==="horizontal";let o=0;if(y0(t))o=s?t.clientX:t.clientY;else if(v0(t)){const c=t.touches[0];o=s?c.screenX:c.screenY}else return 0;const a=tm(e),l=r||a.getBoundingClientRect(),u=s?l.left:l.top;return o-u-i}function w$(t,e,n,i,r,s,o){const{dragOffset:a=0,dragHandleRect:l,sizes:u}=o||{},c=u||s;if(b$(t)){const d=r==="horizontal",f=Mw(e).getBoundingClientRect(),p=d?f.width:f.height,y=t.shiftKey?10:100,w=p/y;let m=0;switch(t.key){case"ArrowDown":m=d?0:w;break;case"ArrowLeft":m=d?-w:0;break;case"ArrowRight":m=d?w:0;break;case"ArrowUp":m=d?0:-w;break;case"End":m=p;break;case"Home":m=-p;break}const[g,v]=Dw(e,n,i),x=m<0?g:v,E=i.findIndex(N=>N.current.id===x),O=i[E];if(O.current.collapsible){const N=c[E];(N===0||N.toPrecision(fa)===O.current.minSize.toPrecision(fa))&&(m=m<0?-O.current.minSize*p:O.current.minSize*p)}return m}else return O2(t,n,r,a,l)}function b$(t){return t.type==="keydown"}function y0(t){return t.type.startsWith("mouse")}function v0(t){return t.type.startsWith("touch")}let w0=null,Yo=null;function N2(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function x$(){Yo!==null&&(document.head.removeChild(Yo),w0=null,Yo=null)}function gg(t){if(w0===t)return;w0=t;const e=N2(t);Yo===null&&(Yo=document.createElement("style"),document.head.appendChild(Yo)),Yo.innerHTML=`*{cursor: ${e}!important;}`}function S$(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function T2(t){return t.map(e=>{const{minSize:n,order:i}=e.current;return i?`${i}:${n}`:`${n}`}).sort((e,n)=>e.localeCompare(n)).join(",")}function R2(t,e){try{const n=e.getItem(`PanelGroup:sizes:${t}`);if(n){const i=JSON.parse(n);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function k$(t,e,n){const i=R2(t,n);if(i){const r=T2(e);return i[r]??null}return null}function E$(t,e,n,i){const r=T2(e),s=R2(t,i)||{};s[r]=n;try{i.setItem(`PanelGroup:sizes:${t}`,JSON.stringify(s))}catch(o){console.error(o)}}const yg={};function Px(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}const ju={getItem:t=>(Px(ju),ju.getItem(t)),setItem:(t,e)=>{Px(ju),ju.setItem(t,e)}};function M2({autoSaveId:t,children:e=null,className:n="",direction:i,disablePointerEventsDuringResize:r=!1,forwardedRef:s,id:o=null,onLayout:a,storage:l=ju,style:u={},tagName:c="div"}){const d=Rw(o),[h,f]=nc(null),[p,y]=nc(new Map),w=si(null);si({didLogDefaultSizeWarning:!1,didLogIdAndOrderWarning:!1,prevPanelIds:[]});const m=si({onLayout:a});ss(()=>{m.current.onLayout=a});const g=si({}),[v,x]=nc([]),E=si(new Map),O=si(0),N=si({direction:i,panels:p,sizes:v});S2(s,()=>({getLayout:()=>{const{sizes:G}=N.current;return G},setLayout:G=>{const L=G.reduce((ve,Se)=>ve+Se,0);P2(L===100,"Panel sizes must add up to 100%");const{panels:I}=N.current,Y=g.current,ae=wi(I);x(G),Da(ae,G,Y)}}),[]),$f(()=>{N.current.direction=i,N.current.panels=p,N.current.sizes=v}),g$({committedValuesRef:N,groupId:d,panels:p,setSizes:x,sizes:v,panelSizeBeforeCollapse:E}),ss(()=>{const{onLayout:G}=m.current,{panels:L,sizes:I}=N.current;if(I.length>0){G&&G(I);const Y=g.current,ae=wi(L);Da(ae,I,Y)}},[v]),$f(()=>{if(N.current.sizes.length===p.size)return;let L=null;if(t){const I=wi(p);L=k$(t,I,l)}if(L!=null)x(L);else{const I=wi(p);let Y=0,ae=0,ve=0;if(I.forEach(Se=>{ve+=Se.current.minSize,Se.current.defaultSize===null?Y++:ae+=Se.current.defaultSize}),ae>100)throw new Error("Default panel sizes cannot exceed 100%");if(I.length>1&&Y===0&&ae!==100)throw new Error("Invalid default sizes specified for panels");if(ve>100)throw new Error("Minimum panel sizes cannot exceed 100%");x(I.map(Se=>Se.current.defaultSize===null?(100-ae)/Y:Se.current.defaultSize))}},[t,p,l]),ss(()=>{if(t){if(v.length===0||v.length!==p.size)return;const G=wi(p);yg[t]||(yg[t]=S$(E$,100)),yg[t](t,G,v,l)}},[t,p,v,l]);const P=Ns((G,L)=>{const{panels:I}=N.current;return I.size===0?{flexBasis:0,flexGrow:L??void 0,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:E2(I,G,v),flexShrink:1,overflow:"hidden",pointerEvents:r&&h!==null?"none":void 0}},[h,r,v]),R=Ns((G,L)=>{y(I=>{if(I.has(G))return I;const Y=new Map(I);return Y.set(G,L),Y})},[]),_=Ns(G=>I=>{I.preventDefault();const{direction:Y,panels:ae,sizes:ve}=N.current,Se=wi(ae),[U,B]=Dw(d,G,Se);if(U==null||B==null)return;let W=w$(I,d,G,Se,Y,ve,w.current);if(W===0)return;const A=Mw(d).getBoundingClientRect(),D=Y==="horizontal";document.dir==="rtl"&&D&&(W=-W);const T=D?A.width:A.height,z=W/T*100,K=zu(I,ae,U,B,z,ve,E.current,w.current),V=!v$(ve,K);if((y0(I)||v0(I))&&O.current!=z&&gg(V?D?"horizontal":"vertical":D?W<0?"horizontal-min":"horizontal-max":W<0?"vertical-min":"vertical-max"),V){const Z=g.current;x(K),Da(Se,K,Z)}O.current=z},[d]),M=Ns(G=>{y(L=>{if(!L.has(G))return L;const I=new Map(L);return I.delete(G),I})},[]),H=Ns(G=>{const{panels:L,sizes:I}=N.current,Y=L.get(G);if(Y==null)return;const{collapsedSize:ae,collapsible:ve}=Y.current;if(!ve)return;const Se=wi(L),U=Se.indexOf(Y);if(U<0)return;const B=I[U];if(B===ae)return;E.current.set(G,B);const[W,b]=mg(G,Se);if(W==null||b==null)return;const D=U===Se.length-1?B:ae-B,T=zu(null,L,W,b,D,I,E.current,null);if(I!==T){const z=g.current;x(T),Da(Se,T,z)}},[]),F=Ns(G=>{const{panels:L,sizes:I}=N.current,Y=L.get(G);if(Y==null)return;const{collapsedSize:ae,minSize:ve}=Y.current,Se=E.current.get(G)||ve;if(!Se)return;const U=wi(L),B=U.indexOf(Y);if(B<0||I[B]!==ae)return;const[b,A]=mg(G,U);if(b==null||A==null)return;const T=B===U.length-1?ae-Se:Se,z=zu(null,L,b,A,T,I,E.current,null);if(I!==z){const K=g.current;x(z),Da(U,z,K)}},[]),j=Ns((G,L)=>{const{panels:I,sizes:Y}=N.current,ae=I.get(G);if(ae==null)return;const{collapsedSize:ve,collapsible:Se,maxSize:U,minSize:B}=ae.current,W=wi(I),b=W.indexOf(ae);if(b<0)return;const A=Y[b];if(A===L)return;Se&&L===ve||(L=Math.min(U,Math.max(B,L)));const[D,T]=mg(G,W);if(D==null||T==null)return;const K=b===W.length-1?A-L:L-A,V=zu(null,I,D,T,K,Y,E.current,null);if(Y!==V){const Z=g.current;x(V),Da(W,V,Z)}},[]),X=d$(()=>({activeHandleId:h,collapsePanel:H,direction:i,expandPanel:F,getPanelStyle:P,groupId:d,registerPanel:R,registerResizeHandle:_,resizePanel:j,startDragging:(G,L)=>{if(f(G),y0(L)||v0(L)){const I=tm(G);w.current={dragHandleRect:I.getBoundingClientRect(),dragOffset:O2(L,G,i),sizes:N.current.sizes}}},stopDragging:()=>{x$(),f(null),w.current=null},unregisterPanel:M}),[h,H,i,F,P,d,R,_,j,M]),J={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Ul(em.Provider,{children:Ul(c,{children:e,className:n,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":d,style:{...J,...u}}),value:X})}const D2=b2((t,e)=>Ul(M2,{...t,forwardedRef:e}));M2.displayName="PanelGroup";D2.displayName="forwardRef(PanelGroup)";function b0({children:t=null,className:e="",disabled:n=!1,id:i=null,onDragging:r,style:s={},tagName:o="div"}){const a=si(null),l=si({onDragging:r});ss(()=>{l.current.onDragging=r});const u=x2(em);if(u===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:c,direction:d,groupId:h,registerResizeHandle:f,startDragging:p,stopDragging:y}=u,w=Rw(i),m=c===w,[g,v]=nc(!1),[x,E]=nc(null),O=Ns(()=>{a.current.blur(),y();const{onDragging:R}=l.current;R&&R(!1)},[y]);ss(()=>{if(n)E(null);else{const P=f(w);E(()=>P)}},[n,w,f]),ss(()=>{if(n||x==null||!m)return;const P=H=>{x(H)},R=H=>{x(H)},M=a.current.ownerDocument;return M.body.addEventListener("contextmenu",O),M.body.addEventListener("mousemove",P),M.body.addEventListener("touchmove",P),M.body.addEventListener("mouseleave",R),window.addEventListener("mouseup",O),window.addEventListener("touchend",O),()=>{M.body.removeEventListener("contextmenu",O),M.body.removeEventListener("mousemove",P),M.body.removeEventListener("touchmove",P),M.body.removeEventListener("mouseleave",R),window.removeEventListener("mouseup",O),window.removeEventListener("touchend",O)}},[d,n,m,x,O]),y$({disabled:n,handleId:w,resizeHandler:x});const N={cursor:N2(d),touchAction:"none",userSelect:"none"};return Ul(o,{children:t,className:e,"data-resize-handle-active":m?"pointer":g?"keyboard":void 0,"data-panel-group-direction":d,"data-panel-group-id":h,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w,onBlur:()=>v(!1),onFocus:()=>v(!0),onMouseDown:P=>{p(w,P.nativeEvent);const{onDragging:R}=l.current;R&&R(!0)},onMouseUp:O,onTouchCancel:O,onTouchEnd:O,onTouchStart:P=>{p(w,P.nativeEvent);const{onDragging:R}=l.current;R&&R(!0)},ref:a,role:"separator",style:{...N,...s},tabIndex:0})}b0.displayName="PanelResizeHandle";const C$="modulepreload",A$=function(t){return"/vonsim-next/"+t},Ox={},P$=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=A$(s),s in Ox)return;Ox[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let c=r.length-1;c>=0;c--){const d=r[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":C$,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function O$(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){const{Workbox:h}=await P$(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);a=new h("/vonsim-next/sw.js",{scope:"/vonsim-next/",type:"classic"}),u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let f=!1;const p=()=>{f=!0,a==null||a.addEventListener("controlling",y=>{y.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",y=>{typeof y.isUpdate>"u"?typeof y.isExternal<"u"?y.isExternal?p():!f&&(i==null||i()):y.isExternal?window.location.reload():!f&&(i==null||i()):y.isUpdate||i==null||i()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(f=>{s?s("/vonsim-next/sw.js",f):r==null||r(f)}).catch(f=>{o==null||o(f)})}}return l=d(),c}function N$(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=k.useState(!1),[u,c]=k.useState(!1),[d]=k.useState(()=>O$({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}function _2(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=_2(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function Le(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=_2(t))&&(i&&(i+=" "),i+=e);return i}var T$=function(){};function R$(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function M$(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var D$=typeof window<"u",_$=D$?window:null,Nx=function(t){return!!t.addEventListener},Tx=function(t){return!!t.on},$$=function(t,e,n,i){n===void 0&&(n=_$),k.useEffect(function(){if(e&&n)return Nx(n)?R$(n,t,e,i):Tx(n)&&n.on(t,e,i),function(){Nx(n)?M$(n,t,e,i):Tx(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])};const $2=$$;var L$=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},I$=function(t,e,n,i){e===void 0&&(e=T$),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=k.useMemo(function(){var u=L$(t),c=function(d){if(u(d))return e(d)};return c},i);$2(s,l,o,a)};const L2=I$;function Lf(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}function I2(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const B2=["en","es"];function _w(t){return function(n,i,...r){const s=I2(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}class Xt{constructor(e,n){oe(this,"start");oe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new Xt(i,r)}toJSON(){return this.range}}function z2(t){const e=t.charCodeAt(0);return $.fitsUnsigned(e,8)?e:null}function $w(t){return $.fitsUnsigned(t,8)?String.fromCharCode(t):null}function B$(t){return z$.at(t)??null}const z$=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var gt,Ct;const He=class He{constructor(e,n){xe(this,gt,void 0);xe(this,Ct,void 0);q(this,gt,e|0),q(this,Ct,n)}get size(){return C(this,Ct)}is8bits(){return C(this,Ct)===8}is16bits(){return C(this,Ct)===16}get unsigned(){return C(this,gt)}get signed(){return C(this,gt)<=He.maxSignedValue(C(this,Ct))?C(this,gt):C(this,gt)-(He.maxValue(C(this,Ct))+1)}get low(){return this.is8bits()?this:He.fromUnsigned(C(this,gt)&He.maxValue(8),8)}get high(){return this.is8bits()?new He(0,8):He.fromUnsigned(C(this,gt)>>8&He.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return He.fromUnsigned(C(this,gt)&~He.maxValue(8)|e.unsigned,C(this,Ct))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return He.fromUnsigned(C(this,gt)&He.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=C(this,Ct))throw new RangeError(`Index ${e} out of bounds for byte of size ${C(this,Ct)}`);return(C(this,gt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=C(this,Ct))throw new RangeError(`Index ${e} out of bounds for byte of size ${C(this,Ct)}`);return n?He.fromUnsigned(C(this,gt)|1<<e,C(this,Ct)):He.fromUnsigned(C(this,gt)&~(1<<e),C(this,Ct))}add(e){return e=Number(e),He.fromUnsigned(C(this,gt)+e,C(this,Ct))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:C(this,gt)===C(e,gt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(C(this,Ct));for(let n=0;n<C(this,Ct);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return C(this,gt).toString(16).padStart(C(this,Ct)/4,"0").toUpperCase();case"bin":return C(this,gt).toString(2).padStart(C(this,Ct),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return C(this,Ct)===8?$w(C(this,gt))??"---":this.low.toString("ascii")+this.high.toString("ascii")}}toJSON(){return C(this,gt)}valueOf(){return C(this,gt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=He.minSignedValue(n)&&e<=He.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=He.minValue()&&e<=He.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=He.minSignedValue(n)&&e<=He.maxSignedValue(n)}static fromUnsigned(e,n){if(!He.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new He(e,n)}static fromSigned(e,n){if(!He.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new He(e+He.maxValue(n)+1,n):new He(e,n)}static fromNumber(e,n){return e<0?He.fromSigned(e,n):He.fromUnsigned(e,n)}static fromChar(e){const n=z2(e)??-1;return He.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*He.maxValue(e));return new He(n,e)}static zero(e){return new He(0,e)}};gt=new WeakMap,Ct=new WeakMap;let $=He;var Hr;const Ls=class Ls{constructor(e){xe(this,Hr,void 0);q(this,Hr,e)}get value(){return C(this,Hr).unsigned}get byte(){return C(this,Hr)}toString(e=!0){let n=C(this,Hr).toString("hex");return e&&(n+="h"),n}toJSON(){return C(this,Hr).toJSON()}valueOf(){return C(this,Hr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ls.MIN_ADDRESS&&e<=Ls.MAX_ADDRESS}static from(e){if(e=Number(e),!Ls.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=$.fromUnsigned(e,16);return new Ls(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i}};Hr=new WeakMap,oe(Ls,"MIN_ADDRESS",0),oe(Ls,"MAX_ADDRESS",32767);let Ae=Ls;var Wr;const Is=class Is{constructor(e){xe(this,Wr,void 0);q(this,Wr,e)}get value(){return C(this,Wr).unsigned}get byte(){return C(this,Wr)}toString(e=!0){let n=C(this,Wr).toString("hex");return e&&(n+="h"),n}toJSON(){return C(this,Wr).toJSON()}valueOf(){return C(this,Wr).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Is.MIN_ADDRESS&&e<=Is.MAX_ADDRESS}static from(e){if(e=Number(e),!Is.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=$.fromUnsigned(e,8);return new Is(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Wr=new WeakMap,oe(Is,"MIN_ADDRESS",0),oe(Is,"MAX_ADDRESS",127);let Kn=Is;const Rx=Ae.from(Ae.MAX_ADDRESS).toString(),j$=Kn.from(Kn.MAX_ADDRESS).toString(),F$={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Ae.format(t)} is out of range (max memory address: ${Rx}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${Ae.format(t)}, which is outside the memory range (max memory address: ${Rx}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${j$}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"label-should-be-writable":t=>`Label ${t} doesn't point to a writable memory address  should point to a DB or DW declaration.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},Mx=Ae.from(Ae.MAX_ADDRESS).toString(),U$=Kn.from(Kn.MAX_ADDRESS).toString(),V$={"address-has-code":t=>`La direccin de memoria ${Ae.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${t} est fuera de rango (direccin mxima de memoria: ${Mx}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${Ae.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${Mx}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${U$}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"label-should-be-writable":t=>`La etiqueta ${t} no apunta a una direccin de memoria modificable  debera apuntar a una declaracin DB o DW.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${t}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},H$=_w({en:F$,es:V$});class se extends Error{constructor(n,...i){super();oe(this,"code");oe(this,"context");oe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof Xt?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return H$(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof se?n:new se("unexpected-error",n)}}var Vs,Pl;class W${constructor(){oe(this,"codeMemory",new Set);oe(this,"labels",new Map);xe(this,Vs,!1);xe(this,Pl,!1)}loadStatements(e){if(C(this,Vs))throw new Error("Tried to load statements twice");q(this,Vs,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new se("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Ae.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Ae.from(0)})}return n}computeAddresses(e){if(C(this,Pl))throw new Error("Tried to compute addresses twice");q(this,Pl,!0),this.codeMemory.clear();const n=new Set;let i=null;return Lf(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){i=s.newAddress;return}if(i===null)throw new se("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!Ae.inRange(i+l))throw new se("instruction-out-of-range",i+l).at(s);const u=Ae.from(i+l);if(n.has(u.value))throw new se("occupied-address",u).at(s);n.add(u.value),s.isInstruction()&&this.codeMemory.add(u.value)}const a=Ae.from(i);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),i+=o},se.from)}labelExists(e){if(!C(this,Vs))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!C(this,Vs))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!C(this,Vs))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!C(this,Pl))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Ae&&(e=e.value),this.codeMemory.has(e)}}Vs=new WeakMap,Pl=new WeakMap;const G$=["AL","BL","CL","DL","AH","BH","CH","DH"],j2=["AX","BX","CX","DX","SP"],If=[...G$,...j2],Lw=["DB","DW","EQU"],Iw=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],K$=["OFFSET","ORG","BYTE","WORD","PTR","END",...If,...Iw,...Lw];class X${constructor(e,n,i){oe(this,"type");oe(this,"lexeme");oe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class Z${constructor(e){oe(this,"scanned",!1);oe(this,"tokens",[]);oe(this,"position",new Xt(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new Xt(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-string").at(this.position);if(this.peek().charCodeAt(0)>255)throw new se("lexer.only-ascii").at(new Xt(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new se("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new se("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();K$.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new se("lexer.unexpected-character",e).at(this.position)}return this.position=new Xt(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new X$(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new Xt(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class nn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}oe(nn,"numberLiteral",(...e)=>new J$(...e)),oe(nn,"label",(...e)=>new Y$(...e)),oe(nn,"unaryOperation",(...e)=>new q$(...e)),oe(nn,"binaryOperation",(...e)=>new Q$(...e));class J$ extends nn{constructor(n,i){super(i);oe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class Y$ extends nn{constructor(n,i,r){super(r);oe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new se("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new se("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new se("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class q$ extends nn{constructor(n,i,r){super(r);oe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class Q$ extends nn{constructor(n,i,r,s){super(s);oe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class nm{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Gr;class F2 extends nm{constructor(n,i,r){super(r);oe(this,"type","data-directive");oe(this,"label");oe(this,"values");xe(this,Gr,null);this.values=n,this.label=i}get start(){if(C(this,Gr)===null)throw new Error("Start not set");return C(this,Gr)}setStart(n){if(C(this,Gr)!==null)throw new Error("Start already set");q(this,Gr,n)}toJSON(){return{...super.toJSON(),...C(this,Gr)?{start:C(this,Gr).toJSON()}:{},directive:this.directive,label:this.label}}}Gr=new WeakMap;var ta,Hs,Ol;class eL extends F2{constructor(n,i,r){super(n,i,r);oe(this,"directive","EQU");xe(this,ta,"not-processed");xe(this,Hs,null);xe(this,Ol,null)}toJSON(){var n;return{...super.toJSON(),value:C(this,Ol)??((n=C(this,Hs))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(C(this,Hs))throw new Error("Constant already validated");if(!this.label)throw new se("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new se("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new se("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new se("cannot-be-unassinged","EQU").at(n);q(this,Hs,n.value)}evaluateExpressions(n){if(!C(this,Hs))throw new Error("Constant not validated");if(C(this,ta)==="processed")return C(this,Ol);if(C(this,ta)==="processing")throw new se("circular-reference").at(this.position);q(this,ta,"processed");const i=C(this,Hs).evaluate(n);return q(this,ta,"processed"),q(this,Ol,i),i}evaluate(n){return this.evaluateExpressions(n)}}ta=new WeakMap,Hs=new WeakMap,Ol=new WeakMap;const Fu=Symbol("unassigned");var _n,Ui;class tL extends F2{constructor(n,i,r,s){super(i,r,s);oe(this,"size");xe(this,_n,null);xe(this,Ui,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!C(this,_n))throw new Error("Data directive not validated");return C(this,_n).length*(this.size/8)}getValues(){if(!C(this,Ui))throw new Error("Data directive not evaluated");return C(this,Ui)}toJSON(){return{...super.toJSON(),values:(C(this,Ui)??C(this,_n)??this.values).map(n=>n===Fu?"?":n.toJSON())}}validate(){if(C(this,_n))throw new Error("Data directive already validated");q(this,_n,[]);for(const n of this.values)if(n.isUnassigned())C(this,_n).push(Fu);else if(n.isString()){if(this.directive!=="DB")throw new se("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=z2(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new Xt(n.position.start+r,n.position.start+r+1),a=nn.numberLiteral(s,o);C(this,_n).push(a)}}else C(this,_n).push(n.value);if(C(this,_n).length===0)throw new se("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!C(this,_n))throw new Error("Data directive not validated");if(C(this,Ui))throw new Error("Data directive already evaluated");q(this,Ui,[]);const i=Lf(C(this,_n),r=>{if(r===Fu)C(this,Ui).push(Fu);else{const s=r.evaluate(n);if(!$.fits(s,this.size))throw new se("value-out-of-range",s,this.size).at(this);const o=$.fromNumber(s,this.size);C(this,Ui).push(o)}},se.from);return i.length>0&&q(this,Ui,null),i}}_n=new WeakMap,Ui=new WeakMap;class Bw{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class nL extends Bw{constructor(n,i){super(i);oe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class iL extends Bw{constructor(n){super(n);oe(this,"type","unassigned")}}class rL extends Bw{constructor(n){super(n.position);oe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function sL(t,e,n){const i=Xt.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new tL(t.type,e,n,i);case"EQU":return new eL(e,n,i)}}class oL extends nm{constructor(n){super(n);oe(this,"type","end")}}function Uo(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var Kr;class Aa extends nm{constructor(n,i,r){super(r);oe(this,"type","instruction");oe(this,"label");oe(this,"operands");xe(this,Kr,null);this.operands=n,this.label=i}get start(){if(C(this,Kr)===null)throw new Error("Start not set");return C(this,Kr)}setStart(n){if(C(this,Kr)!==null)throw new Error("Start already set");q(this,Kr,n)}toJSON(){return{...super.toJSON(),...C(this,Kr)?{start:C(this,Kr).toJSON()}:{},instruction:this.instruction,label:this.label}}}Kr=new WeakMap;var hn,bi;class aL extends Aa{constructor(n,i,r,s){super(i,r,s);xe(this,hn,null);xe(this,bi,null);this.instruction=n}get length(){if(!C(this,hn))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=C(this,hn);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!C(this,bi))throw new Error("Instruction not evaluated");return C(this,bi)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=Uo(s)<<3,o[1]|=Uo(r)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=Uo(r)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=Uo(r)<<0,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}case"mem<-reg":{r.mode==="direct"?(o[1]=192,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=208,o[1]|=Uo(s)<<0;break}case"mem<-imd":{r.mode==="direct"?(o[1]=200,o.push(r.address.byte.low.unsigned),o.push(r.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...C(this,bi)??C(this,hn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(C(this,hn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new se("size-mismatch",r.size,i.size).at(this);q(this,hn,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);q(this,hn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);q(this,hn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}if(r.value.isLabel()){const s=r.isDataDirectiveLabel(n);if(s){if(s!==i.size)throw new se("size-mismatch",s,i.size).at(this);q(this,hn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:nn.label(r.value.value,!0,r.value.position)}});return}}q(this,hn,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else if(i.value.isLabel()){if(s=i.isDataDirectiveLabel(n)||"auto",s==="auto")throw new se("label-should-be-writable",i.value.value).at(i);o={mode:"direct",address:nn.label(i.value.value,!0,i.value.position)}}else throw new se("destination-cannot-be-immediate").at(i);if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new se("size-mismatch",s,r.size).at(this);q(this,hn,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.isDataDirectiveLabel(n))throw new se("double-memory-access").at(this);if(s==="auto")throw new se("unknown-size").at(i);q(this,hn,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new se("double-memory-access").at(this)}}evaluateExpressions(n){if(!C(this,hn))throw new Error("Instruction not validated");if(C(this,bi))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=C(this,hn),a=l=>{const u=l.evaluate(n);if(!Ae.inRange(u))throw new se("address-out-of-range",u).at(l);const c=Ae.from(u);if(n.addressIsReserved(c))throw new se("address-has-code",c).at(l);return c};switch(i){case"reg<-reg":{q(this,bi,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{q(this,bi,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!$.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const u=$.fromNumber(l,r);q(this,bi,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{q(this,bi,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!$.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const u=$.fromNumber(l,r);q(this,bi,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}hn=new WeakMap,bi=new WeakMap;var vr,Xr;class lL extends Aa{constructor(n,i,r,s){super(i,r,s);xe(this,vr,null);xe(this,Xr,null);oe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!C(this,Xr))throw new Error("Instruction not evaluated");return C(this,Xr)}toJSON(){return{...super.toJSON(),...C(this,Xr)?{value:C(this,Xr).toJSON()}:C(this,vr)?{initialValue:C(this,vr).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(C(this,vr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new se("expects-immediate").at(n);q(this,vr,n.value)}evaluateExpressions(n){if(!C(this,vr))throw new Error("Instruction not validated");if(C(this,Xr))throw new Error("Instruction aready evaluated");const i=C(this,vr).evaluate(n);if(!$.fitsUnsigned(i,8))throw new se("invalid-interrupt",i).at(C(this,vr));q(this,Xr,$.fromUnsigned(i,8))}}vr=new WeakMap,Xr=new WeakMap;var Vi,Zr,GE;let uL=(GE=class extends Aa{constructor(n,i,r,s){super(i,r,s);xe(this,Vi,null);xe(this,Zr,null);this.instruction=n}get length(){if(!C(this,Vi))throw new Error("Instruction not validated");return C(this,Vi).port==="fixed"?2:1}toBytes(){const n=[],i={IN:80,OUT:84};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(C(this,Zr)===null)throw new Error("Operation not set");return C(this,Zr)}toJSON(){return{...super.toJSON(),...C(this,Zr)??C(this,Vi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(C(this,Vi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new se("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new se("expects-dx").at(i);q(this,Vi,{port:"variable",size:r});return}if(i.isNumberExpression()){q(this,Vi,{port:"fixed",size:r,address:i.value});return}throw new se("expects-immediate").at(i)}evaluateExpressions(n){if(!C(this,Vi))throw new Error("Instruction not validated");if(C(this,Zr))throw new Error("Instruction aready evaluated");const i=C(this,Vi);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Kn.inRange(r))throw new se("io-address-out-of-range",r).at(this);const s=Kn.from(r);q(this,Zr,{port:"fixed",size:i.size,address:s})}else q(this,Zr,{port:"variable",size:i.size})}},Vi=new WeakMap,Zr=new WeakMap,GE);var Jr,Yr,KE;let cL=(KE=class extends Aa{constructor(n,i,r,s){super(i,r,s);xe(this,Jr,null);xe(this,Yr,null);oe(this,"length",3);this.instruction=n}toBytes(){const n=[],i={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(C(this,Yr)===null)throw new Error("Instruction not evaluated");return C(this,Yr)}toJSON(){return{...super.toJSON(),...C(this,Yr)?{address:C(this,Yr).toJSON()}:C(this,Jr)?{jumpTo:C(this,Jr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(C(this,Jr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new se("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new se("label-not-found",r).at(i);if(s!=="instruction")throw new se("label-should-be-an-instruction",r).at(i);q(this,Jr,r)}evaluateExpressions(n){if(!C(this,Jr))throw new Error("Instruction not validated");if(C(this,Yr))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(C(this,Jr));if(!Ae.inRange(i))throw new se("address-out-of-range",i).at(this);q(this,Yr,Ae.from(i))}},Jr=new WeakMap,Yr=new WeakMap,KE);var wr,XE;let dL=(XE=class extends Aa{constructor(n,i,r,s){super(i,r,s);xe(this,wr,null);oe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:96,POP:104}[this.instruction];return i|=Uo(this.register),new Uint8Array([i])}get register(){if(!C(this,wr))throw new Error("Instruction not evaluated");return C(this,wr)}toJSON(){return{...super.toJSON(),...C(this,wr)?{register:C(this,wr)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(C(this,wr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new se("expects-word-register").at(n);q(this,wr,n.value)}evaluateExpressions(){if(!C(this,wr))throw new Error("Instruction not validated")}},wr=new WeakMap,XE);var Qn,br;class hL extends Aa{constructor(n,i,r,s){super(i,r,s);xe(this,Qn,null);xe(this,br,null);this.instruction=n}get length(){if(!C(this,Qn))throw new Error("Instruction not validated");const{mode:n}=C(this,Qn);let i=2;return n==="mem-direct"&&(i+=2),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=Uo(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!C(this,br))throw new Error("Instruction not evaluated");return C(this,br)}toJSON(){return{...super.toJSON(),...C(this,br)??C(this,Qn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(C(this,Qn))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){q(this,Qn,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);q(this,Qn,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);q(this,Qn,{mode:"mem-indirect",size:i.size});return}if(i.value.isLabel()){const r=i.isDataDirectiveLabel(n);if(r){q(this,Qn,{mode:"mem-direct",size:r,address:nn.label(i.value.value,!0,i.value.position)});return}}throw new se("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!C(this,Qn))throw new Error("Instruction not validated");if(C(this,br))throw new Error("Instruction aready evaluated");const i=C(this,Qn);switch(i.mode){case"reg":{q(this,br,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Ae.inRange(r))throw new se("address-out-of-range",r).at(i.address);const s=Ae.from(r);if(n.addressIsReserved(s))throw new se("address-has-code",s).at(i.address);q(this,br,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{q(this,br,{mode:"mem-indirect",size:i.size});return}default:return i}}}Qn=new WeakMap,br=new WeakMap;var Nl;class fL extends Aa{constructor(n,i,r,s){super(i,r,s);xe(this,Nl,!1);oe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(C(this,Nl))throw new Error("Instruction already validated");if(this.operands.length>0)throw new se("expects-no-operands").at(this);q(this,Nl,!0)}evaluateExpressions(){if(!C(this,Nl))throw new Error("Instruction not validated")}}Nl=new WeakMap;class im{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class pL extends im{constructor(n){super(n.position);oe(this,"type","register");oe(this,"value");this.value=n.type}get size(){return j2.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class mL extends im{constructor(n,i){super(i);oe(this,"type","indirect-address");oe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class gL extends im{constructor(n,i,r){super(r);oe(this,"type","direct-address");oe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class yL extends im{constructor(n){super(n.position);oe(this,"type","number-expression");this.value=n}isDataDirectiveLabel(n){if(!this.value.isLabel())return!1;const i=this.value;if(i.offset)return!1;if(!n.labelExists(i.value))throw new se("label-not-found",i.value).at(this.position);const r=n.getLabelType(i.value);return r==="DB"?8:r==="DW"?16:!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function Dx(t,e,n){const i=Xt.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new fL(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new aL(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new hL(t.type,e,n,i);case"PUSH":case"POP":return new dL(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new cL(t.type,e,n,i);case"IN":case"OUT":return new uL(t.type,e,n,i);case"INT":return new lL(t.type,e,n,i)}}class vL extends nm{constructor(n,i){super(i);oe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let wL=class{constructor(e){oe(this,"tokens");oe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new se("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new se("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new vL(i,Xt.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new se("end-must-be-the-last-statement").at(e);return new oL(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...Lw);if(e&&!n)throw new se("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),sL(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new nL(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new iL(e.position)}return new rL(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...Iw);if(e&&!n){const s=this.peek();throw new se("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return Dx(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),Dx(n,r,i)}instructionOperand(){if(this.match(...If)){const n=this.previous();return new pL(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new se("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...If)){this.consume("BX",new se("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-literal","]","BX"));return new mL(e==null?void 0:e.type,Xt.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-expression","]"));return new gL(i,e==null?void 0:e.type,Xt.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new se("parser.expected-literal-after-literal","[","PTR");return new yL(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new se("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new se("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return nn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new se("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new se("parser.expected-label-after-offset").at(this.peek());if(!n)throw new se("parser.expected-argument").at(this.peek());return nn.label(n.lexeme.toUpperCase(),e!==null,Xt.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new se("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return nn.unaryOperation(e.type==="PLUS"?"+":"-",n,Xt.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=nn.binaryOperation(e,"*",n,Xt.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=nn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,Xt.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function U2(t){try{const n=new Z$(t).scanTokens(),r=new wL(n).parse(),s=r.at(-1);if(!s)throw new se("empty-program");if(!s.isEnd())throw new se("end-must-be-the-last-statement").at(s);let o=[];const a=new W$;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Lf(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},se.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=Lf(r,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},se.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u}}catch(e){return{success:!1,errors:[se.from(e)]}}}class ur{constructor(e){oe(this,"computer");this.computer=e.computer}}const bL=Ae.from(Ae.MAX_ADDRESS).toString(),xL={"address-has-instruction":t=>`Memory address ${Ae.format(t)} has an instruction, and cannot be read nor written.`,"address-out-of-range":t=>`Memory address ${Ae.format(t)} is out of range (max memory address: ${bL}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-implemented":t=>`I/O memory address ${Kn.format(t)} has no implementation.`,"no-instruction":t=>`Expected instruction at memory address ${Ae.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},SL=Ae.from(Ae.MAX_ADDRESS).toString(),kL={"address-has-instruction":t=>`La direccin de memoria ${t} tiene una instruccin, y no se puede leer ni escribir.`,"address-out-of-range":t=>`La direccin de memoria ${Ae.format(t)} est fuera de rango (direccin mxima de memoria: ${SL}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-implemented":t=>`La direccin de memoria E/S ${Kn.format(t)} no est implementada.`,"no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${t} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},EL=_w({en:xL,es:kL});class Nt extends Error{constructor(n,...i){super();oe(this,"code");oe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return EL(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Nt?n:new Nt("unexpected-error",n)}}class Ss{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const r=e.cpu.getRegister("IP").toString("hex");throw new Nt("unexpected-error",`Could not read instruction byte at address ${r}h`)}yield*e.cpu.updateWordRegister("IP",r=>r.add(1)),yield*e.cpu.getMBR(n)}}var Dp,V2;class CL extends Ss{constructor(){super(...arguments);xe(this,Dp)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Qe(this,Dp,V2).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=$.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>$.maxValue(r)?(c.CF=!0,u=$.fromUnsigned(h-$.maxValue(r)-1,r)):(c.CF=!1,u=$.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=$.fromUnsigned(h+$.maxValue(r)+1,r)):(c.CF=!1,u=$.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Dp=new WeakSet,V2=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};var _p,H2;class AL extends Ss{constructor(){super(...arguments);xe(this,_p)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Qe(this,_p,H2).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=$.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=$.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===$.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",$.fromSigned(1,16));const o=i.unsigned+1;o>$.maxValue(this.operation.size)?(s.CF=!0,r=$.fromUnsigned(o-$.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=$.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",$.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=$.fromUnsigned(o+$.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=$.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}_p=new WeakSet,H2=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class PL extends Ss{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var $p,W2;class OL extends Ss{constructor(){super(...arguments);xe(this,$p)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Qe(this,$p,W2).call(this),willUse:{ri:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",$.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Nt("io-memory-not-implemented",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Nt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Nt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}$p=new WeakSet,W2=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class NL extends Ss{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class TL extends Ss{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function Vo(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function RL(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Lp,G2;class ML extends Ss{constructor(){super(...arguments);xe(this,Lp)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Qe(this,Lp,G2).call(this),willUse:{ri:i==="reg<-mem"||i==="mem<-reg"||i==="mem<-imd",id:i==="reg<-mem"||i==="reg<-imd"||i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return r===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[a,l]=RL(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(!(yield*n.cpu.useBus("mem-write"))||l&&(yield*n.cpu.updateWordRegister("ri",u=>u.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Lp=new WeakSet,G2=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BX";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BX"}]`,`${r.toString("hex")}h`];default:return n}};class DL extends Ss{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class _L extends Ss{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function $L(t){switch(t.instruction){case"MOV":return new ML(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new CL(t);case"NOT":case"NEG":case"INC":case"DEC":return new AL(t);case"IN":case"OUT":return new OL(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new _L(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new NL(t);case"RET":case"IRET":return new DL(t);case"INT":return new PL(t);case"CLI":case"STI":case"NOP":case"HLT":return new TL(t)}}const sl={0:32768,3:32771,6:32774,7:32775};function LL(t){return Object.values(sl).includes(t.unsigned)}function*IL(t,e){switch(e.unsigned){case sl[0]:return yield{type:"cpu:int.0"},!1;case sl[3]:return yield{type:"cpu:int.3"},!0;case sl[6]:{yield*t.cpu.copyWordRegister("BX","ri");const n=yield*t.io.keyboard.readChar();if(yield*t.cpu.updateWordRegister("id",n.withHigh($.zero(8))),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("id.l"),!(yield*t.cpu.useBus("mem-write")))return!1;break}case sl[7]:{if(yield*t.cpu.copyWordRegister("AX","id"),!(yield*t.cpu.pushToStack())||(yield*t.cpu.copyWordRegister("BX","id"),!(yield*t.cpu.pushToStack())))return!1;yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",$.zero(8));const n=t.cpu.getRegister("AL");for(yield*t.cpu.aluExecute("SUB",n,{CF:!1,OF:!1,SF:n.signed<0,ZF:n.isZero()});!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read")))return!1;yield*t.cpu.getMBR("id.l");const i=t.cpu.getRegister("id.l");yield*t.io.screen.sendChar(i),yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",$.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",$.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===$.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","BX"),!(yield*t.cpu.popFromStack())))return!1;yield*t.cpu.copyWordRegister("id","AX");break}default:throw new Error("Invalid interrupt number")}return!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","IP"),!(yield*t.cpu.popFromStack()))?!1:(yield*t.cpu.copyWordRegister("id","FLAGS"),!0)}var Tl,De,ei,wn,Ws,Va,$n,vi,ZE;let BL=(ZE=class extends ur{constructor(n){super(n);xe(this,Ws);xe(this,$n);xe(this,Tl,void 0);xe(this,De,void 0);xe(this,ei,void 0);xe(this,wn,void 0);n.data==="unchanged"?(q(this,De,C(n.previous.cpu,De)),q(this,ei,C(n.previous.cpu,ei)),q(this,wn,C(n.previous.cpu,wn))):n.data==="randomize"?(q(this,De,{AX:$.random(16),BX:$.random(16),CX:$.random(16),DX:$.random(16),SP:$.random(16),IP:$.random(16),IR:$.random(8),ri:$.random(16),id:$.random(16),left:$.random(16),right:$.random(16),result:$.random(16),FLAGS:$.random(16)}),q(this,ei,$.random(16)),q(this,wn,$.random(8))):(q(this,De,{AX:$.zero(16),BX:$.zero(16),CX:$.zero(16),DX:$.zero(16),SP:$.zero(16),IP:$.zero(16),IR:$.zero(8),ri:$.zero(16),id:$.zero(16),left:$.zero(16),right:$.zero(16),result:$.zero(16),FLAGS:$.zero(16)}),q(this,ei,$.zero(16)),q(this,wn,$.zero(8))),C(this,De).SP=$.fromUnsigned(Ae.MAX_ADDRESS+1,16),C(this,De).IP=$.fromUnsigned(8192,16),Qe(this,$n,vi).call(this,"IF",!0),q(this,Tl,new Map);for(const i of n.program.instructions){const r=$L(i);C(this,Tl).set(r.start.value,r)}}*run(){for(;;){const n=C(this,De).IP;if(LL(n)){if(!(yield*IL(this.computer,n)))return}else{const i=C(this,Tl).get(n.unsigned);if(!i){yield{type:"cpu:error",error:new Nt("no-instruction",C(this,De).IP)};return}if(!(yield*i.execute(this.computer)))return}if(this.getFlag("IF")&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const i=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",$.zero(8)),yield*this.startInterrupt(i)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;let i=$.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),i=i.add(1),yield*this.updateWordRegister("ri",i),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(C(this,De)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:C(this,ei).toJSON(),MBR:C(this,wn).toJSON()}}getRegister(n){const[i,r]=Vo(n);return r==="low"?C(this,De)[i].low:r==="high"?C(this,De)[i].high:C(this,De)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Qe(this,Ws,Va).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Qe(this,Ws,Va).call(this,i,r),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Qe(this,Ws,Va).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Qe(this,Ws,Va).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return C(this,De).FLAGS.bit(0);case"ZF":return C(this,De).FLAGS.bit(6);case"SF":return C(this,De).FLAGS.bit(7);case"IF":return C(this,De).FLAGS.bit(9);case"OF":return C(this,De).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Qe(this,$n,vi).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Qe(this,$n,vi).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Qe(this,$n,vi).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Qe(this,$n,vi).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Qe(this,$n,vi).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:C(this,De).FLAGS}}*aluExecute(n,i,r){C(this,De).result=i.is8bits()?C(this,De).result.withLow(i):i,typeof r.CF=="boolean"&&Qe(this,$n,vi).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Qe(this,$n,vi).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Qe(this,$n,vi).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Qe(this,$n,vi).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Qe(this,$n,vi).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:C(this,De).result,flags:C(this,De).FLAGS}}*setMAR(n){const i=this.getRegister(n);q(this,ei,i),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Qe(this,Ws,Va).call(this,n,C(this,wn)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);q(this,wn,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(C(this,ei));return i?(q(this,wn,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(C(this,ei),C(this,wn)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(C(this,ei).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(q(this,wn,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(C(this,ei).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,C(this,wn))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{const i=yield*this.computer.io.pic.handleINTR();return q(this,wn,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return Ae.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?Ae.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new Nt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new Nt("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return Ae.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),Ae.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new Nt("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new Nt("stack-underflow")},!1)}},Tl=new WeakMap,De=new WeakMap,ei=new WeakMap,wn=new WeakMap,Ws=new WeakSet,Va=function(n,i){const[r,s]=Vo(n);if(s===null){if(C(this,De)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);C(this,De)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?C(this,De)[r]=C(this,De)[r].withLow(i):C(this,De)[r]=C(this,De)[r].withHigh(i)}},$n=new WeakSet,vi=function(n,i){switch(n){case"CF":C(this,De).FLAGS=C(this,De).FLAGS.withBit(0,i);return;case"ZF":C(this,De).FLAGS=C(this,De).FLAGS.withBit(6,i);return;case"SF":C(this,De).FLAGS=C(this,De).FLAGS.withBit(7,i);return;case"IF":C(this,De).FLAGS=C(this,De).FLAGS.withBit(9,i);return;case"OF":C(this,De).FLAGS=C(this,De).FLAGS.withBit(11,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},ZE),zL=class extends ur{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}},jL=class extends ur{*press(){yield{type:"f10:press"},yield*this.computer.io.pic.interrupt(0)}toJSON(){return null}};var Rl,JE;let FL=(JE=class extends ur{constructor(){super(...arguments);xe(this,Rl,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=C(this,Rl);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},q(this,Rl,null),n}setLastCharRead(n){q(this,Rl,n)}toJSON(){return null}},Rl=new WeakMap,JE);var ti,YE;let UL=(YE=class extends ur{constructor(n){super(n);xe(this,ti,void 0);n.data==="unchanged"?q(this,ti,C(n.previous.io.screen,ti)):q(this,ti,"")}clear(){return this.sendChar($.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:q(this,ti,C(this,ti).slice(0,-1));break;case 10:q(this,ti,C(this,ti)+`
`);break;case 12:q(this,ti,"");break;default:q(this,ti,C(this,ti)+$w(n.unsigned));break}yield{type:"screen:send-char",char:n,output:C(this,ti)}}toJSON(){return C(this,ti)}},ti=new WeakMap,YE);class rm extends ur{}var Or,qr,Ln,bn,Hi,Ml,Fh,Dl,Uh;let VL=(Or=class extends rm{constructor(n){super(n);xe(this,Ml);xe(this,Dl);xe(this,qr,void 0);xe(this,Ln,void 0);xe(this,bn,void 0);xe(this,Hi,void 0);q(this,qr,$.fromUnsigned(255,8)),q(this,Ln,$.fromUnsigned(0,8)),q(this,bn,$.fromUnsigned(0,8)),n.data==="unchanged"?q(this,Hi,C(n.previous.io.pic,Hi)):n.data==="randomize"?q(this,Hi,new Array(Or.LINES).fill($.zero(8)).map(()=>$.random(8))):q(this,Hi,new Array(Or.LINES).fill($.zero(8)))}chipSelect(n){const r=4+Or.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=$.zero(8);else if(n==="IMR")i=C(this,qr);else if(n==="IRR")i=C(this,Ln);else if(n==="ISR")i=C(this,bn);else{const r=Number(n.slice(3));i=C(this,Hi)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")C(this,bn).isZero()||(yield{type:"pic:intr.off"},q(this,bn,$.zero(8)),yield{type:"pic:register.update",register:"ISR",value:C(this,bn)},yield*Qe(this,Dl,Uh).call(this));else if(n==="IMR")q(this,qr,i),yield{type:"pic:register.update",register:"IMR",value:C(this,qr)},yield*Qe(this,Dl,Uh).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));C(this,Hi)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=Or.LINES)throw new RangeError(`Invalid interrupt line ${n}`);C(this,Ln).bit(n)||(q(this,Ln,C(this,Ln).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:C(this,Ln)},yield*Qe(this,Dl,Uh).call(this))}isINTRActive(){return C(this,bn).isZero()&&Qe(this,Ml,Fh).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!C(this,bn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Qe(this,Ml,Fh).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");q(this,bn,C(this,bn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:C(this,bn)},q(this,Ln,C(this,Ln).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:C(this,Ln)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=C(this,Hi)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:C(this,qr).toJSON(),IRR:C(this,Ln).toJSON(),ISR:C(this,bn).toJSON(),lines:C(this,Hi).map(n=>n.toJSON())}}},qr=new WeakMap,Ln=new WeakMap,bn=new WeakMap,Hi=new WeakMap,Ml=new WeakSet,Fh=function(){for(let n=0;n<Or.LINES;n++)if(C(this,Ln).bit(n)&&!C(this,qr).bit(n))return n;return null},Dl=new WeakSet,Uh=function*(){C(this,bn).isZero()&&Qe(this,Ml,Fh).call(this)!==null&&(yield{type:"pic:intr.on"})},oe(Or,"LINES",8),Or);var xr,Gs,qE;let HL=(qE=class extends rm{constructor(n){super(n);xe(this,xr,void 0);xe(this,Gs,void 0);q(this,xr,$.zero(8)),q(this,Gs,$.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=C(this,xr);else if(n==="COMP")i=C(this,Gs);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")q(this,xr,i);else if(n==="COMP")q(this,Gs,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=C(this,xr).unsigned===$.maxValue(8)?$.zero(8):C(this,xr).add(1);q(this,xr,n),yield{type:"timer:register.update",register:"CONT",value:n},C(this,Gs).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:C(this,xr).toJSON(),COMP:C(this,Gs).toJSON()}}},xr=new WeakMap,Gs=new WeakMap,qE);class sm extends ur{constructor(n){super(n);oe(this,"clock");oe(this,"f10");oe(this,"keyboard");oe(this,"screen");oe(this,"pic");oe(this,"timer");this.clock=new zL(n),this.f10=new jL(n),this.keyboard=new FL(n),this.screen=new UL(n),this.pic=new VL(n),this.timer=new HL(n)}*chipSelect(n){const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const r=this.timer.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:r}):(yield{type:"bus:io.error",error:new Nt("io-memory-not-implemented",n)},null)}*read(n){const{chip:i,register:r}=n;return i==="pic"?yield*this.pic.read(r):i==="timer"?yield*this.timer.read(r):(yield{type:"bus:io.error",error:new Nt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return r==="pic"?(yield*this.pic.write(s,i),!0):r==="timer"?(yield*this.timer.write(s,i),!0):(yield{type:"bus:io.error",error:new Nt("device-not-connected",r)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),screen:this.screen.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}}oe(sm,"SIZE",Kn.MAX_ADDRESS+1);var Sr,xn,QE;let WL=(QE=class extends rm{constructor(n){super(n);xe(this,Sr,void 0);xe(this,xn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?q(this,Sr,$.zero(8)):n.data==="randomize"?q(this,Sr,$.random(8)):q(this,Sr,$.zero(8)),q(this,xn,$.zero(8))}get interrupts(){return C(this,xn).bit(7)}get DATA(){return C(this,Sr)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=C(this,Sr);else if(n==="STATE")i=C(this,xn);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")q(this,Sr,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.computer.io.printer.busy),q(this,xn,i),yield{type:"handshake:register.update",register:n,value:i},C(this,xn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),q(this,xn,C(this,xn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:C(this,xn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){q(this,xn,C(this,xn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:C(this,xn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:C(this,Sr).toJSON(),STATE:C(this,xn).toJSON()}}},Sr=new WeakMap,xn=new WeakMap,QE);var xi,Qr,Ks;const dc=class dc extends ur{constructor(n){super(n);xe(this,xi,void 0);xe(this,Qr,void 0);xe(this,Ks,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(q(this,xi,C(n.previous.io.printer,xi)),q(this,Qr,C(n.previous.io.printer,Qr)),q(this,Ks,C(n.previous.io.printer,Ks))):(q(this,xi,[]),q(this,Qr,""),q(this,Ks,!1))}get busy(){return C(this,xi).length>=dc.BUFFER_SIZE}*setStrobe(n){const i=C(this,Ks);if(i===n)return;if(q(this,Ks,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();C(this,xi).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){q(this,Qr,""),yield{type:"printer:paper.replace"}}*print(){if(C(this,xi).length===0)return;const[n,...i]=C(this,xi);if(q(this,xi,i),yield{type:"printer:buffer.pop",char:n},i.length===dc.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=$w(n.unsigned);q(this,Qr,C(this,Qr)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:C(this,Qr),buffer:[...C(this,xi).map(n=>n.unsigned)]}}};xi=new WeakMap,Qr=new WeakMap,Ks=new WeakMap,oe(dc,"BUFFER_SIZE",5);let Bf=dc,GL=class extends Bf{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}},KL=class extends sm{constructor(n){super(n);oe(this,"printer");oe(this,"handshake");this.printer=new GL(n),this.handshake=new WL(n)}*chipSelect(n){const i=this.handshake.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="handshake"?yield*this.handshake.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="handshake"?(yield*this.handshake.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),handshake:this.handshake.toJSON()}}};class K2 extends rm{constructor(n){super(n);oe(this,"PA");oe(this,"PB");oe(this,"CA");oe(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=$.random(8),this.PB=$.random(8),this.CA=$.random(8),this.CB=$.random(8)):(this.PA=$.zero(8),this.PB=$.zero(8),this.CA=$.zero(8),this.CB=$.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let XL=class extends K2{readData(){const e=this.PB.unsigned&~this.CB.unsigned;return $.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.computer.io.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=$.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1)))}},ZL=class extends Bf{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}};class JL extends sm{constructor(n){super(n);oe(this,"printer");oe(this,"pio");this.printer=new ZL(n),this.pio=new XL(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),pio:this.pio.toJSON()}}}var es,eC;let YL=(eC=class extends ur{constructor(n){super(n);xe(this,es,void 0);n.data==="unchanged"&&"leds"in n.previous.io?q(this,es,C(n.previous.io.leds,es)):n.data==="randomize"?q(this,es,$.random(8)):q(this,es,$.zero(8))}get state(){return C(this,es)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return C(this,es).toJSON()}},es=new WeakMap,eC),qL=class extends K2{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=$.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.computer.io.leds.update($.fromUnsigned(n,8))}}};var Si,tC;let QL=(tC=class extends ur{constructor(n){super(n);xe(this,Si,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?q(this,Si,C(n.previous.io.switches,Si)):n.data==="randomize"?q(this,Si,$.random(8)):q(this,Si,$.zero(8))}get state(){return C(this,Si)}*toggle(n){q(this,Si,C(this,Si).withBit(n,!C(this,Si).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return C(this,Si).toJSON()}},Si=new WeakMap,tC);class eI extends sm{constructor(n){super(n);oe(this,"leds");oe(this,"switches");oe(this,"pio");this.leds=new YL(n),this.switches=new QL(n),this.pio=new qL(n)}*chipSelect(n){const i=this.pio.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,i){return n.chip==="pio"?(yield*this.pio.write(n.register,i),!0):yield*super.write(n,i)}toJSON(){return{...super.toJSON(),leds:this.leds.toJSON(),switches:this.switches.toJSON(),pio:this.pio.toJSON()}}}var aa,ni,_l;let tI=(aa=class extends ur{constructor(n){super(n);xe(this,ni,void 0);xe(this,_l,void 0);n.data==="unchanged"?q(this,ni,C(n.previous.memory,ni)):n.data==="randomize"?q(this,ni,new Uint8Array(aa.SIZE).map(()=>$.random(8).unsigned)):q(this,ni,new Uint8Array(aa.SIZE));for(const[i,r]of Object.entries(sl)){const s=$.fromUnsigned(r,16);C(this,ni).set(s.toUint8Array(),Number(i)*4)}for(const i of n.program.data){let r=i.start.value;for(const s of i.getValues())s!==Fu&&C(this,ni).set(s.toUint8Array(),r),r+=i.size/8}q(this,_l,new Set);for(const i of n.program.instructions){C(this,ni).set(i.toBytes(),i.start.value);for(let r=0;r<i.length;r++)C(this,_l).add(i.start.value+r)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Ae.inRange(n))return yield{type:"memory:read.error",error:new Nt("address-out-of-range",n)},null;const i=$.fromUnsigned(C(this,ni).at(n),8);return yield{type:"memory:read.ok",value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Ae.inRange(n)?C(this,_l).has(n)?(yield{type:"memory:write.error",error:new Nt("address-has-instruction",n)},!1):(C(this,ni).set([i.unsigned],n),yield{type:"memory:write.ok"},!0):(yield{type:"memory:write.error",error:new Nt("address-out-of-range",n)},!1)}toJSON(){return[...C(this,ni)]}},ni=new WeakMap,_l=new WeakMap,oe(aa,"SIZE",Ae.MAX_ADDRESS+1),aa);class _x{constructor(e){oe(this,"cpu");oe(this,"memory");oe(this,"io");const n={computer:this,...e};switch(this.cpu=new BL(n),this.memory=new tI(n),e.devices){case"pio-switches-and-leds":{this.io=new eI(n);break}case"pio-printer":{this.io=new JL(n);break}case"handshake":{this.io=new KL(n);break}default:throw new Error("Invalid devices configuration")}}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var Tt;class nI{constructor(){xe(this,Tt,new _x({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){q(this,Tt,new _x({...e,previous:C(this,Tt)}))}getComputerState(){var e;return((e=C(this,Tt))==null?void 0:e.toJSON())||null}startCPU(){if(!C(this,Tt))throw new Nt("no-program");return C(this,Tt).cpu.run()}get devices(){if(!C(this,Tt))throw new Error("No computer loaded!");return{clock:{tick:()=>C(this,Tt).io.clock.tick()},f10:{press:()=>C(this,Tt).io.f10.press()},keyboard:{readChar:e=>C(this,Tt).io.keyboard.setLastCharRead(e)},printer:{connected:()=>"printer"in C(this,Tt).io,clear:()=>{if("printer"in C(this,Tt).io)return C(this,Tt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in C(this,Tt).io)return C(this,Tt).io.printer.print();console.warn("No printer connected to the computer!")}},screen:{clear:()=>C(this,Tt).io.screen.clear()},switches:{connected:()=>"switches"in C(this,Tt).io,toggle:e=>{if("switches"in C(this,Tt).io)return C(this,Tt).io.switches.toggle(e);console.warn("No switches connected to the computer!")}}}}}Tt=new WeakMap;class Ze{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Er.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let i=[];return this.decompose(e,n,i,0),Er.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new ic(this),s=new ic(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new ic(this,e)}iterRange(e,n=this.length){return new X2(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new Z2(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ze.empty:e.length<=32?new Rt(e):Er.from(Rt.split(e,[]))}}class Rt extends Ze{constructor(e,n=iI(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new rI(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new Rt($x(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=Vh(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Rt(a,o.length+s.length));else{let l=a.length>>1;i.push(new Rt(a.slice(0,l)),new Rt(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof Rt))return super.replace(e,n,i);let r=Vh(this.text,Vh(i.text,$x(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new Rt(r,s):Er.from(Rt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new Rt(i,r)),i=[],r=-1);return r>-1&&n.push(new Rt(i,r)),n}}class Er extends Ze{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?i.push(a):a.decompose(e-o,n-o,i,u)}o=l+1}}replace(e,n,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),u=this.lines-o.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[r]=l,new Er(c,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Er))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],u=e.children[s];if(l!=u)return i+l.scanIdentical(u,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new Rt(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof Er)for(let y of f.children)d(y);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Rt&&l&&(p=c[c.length-1])instanceof Rt&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Rt(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:Er.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new Er(a,n)}}Ze.empty=new Rt([""],0);function iI(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Vh(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function $x(t,e,n){return Vh(t,[""],e,n)}class ic{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Rt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Rt?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Rt){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Rt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class X2{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new ic(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Z2{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ze.prototype[Symbol.iterator]=function(){return this.iter()},ic.prototype[Symbol.iterator]=X2.prototype[Symbol.iterator]=Z2.prototype[Symbol.iterator]=function(){return this});class rI{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}let gl="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<gl.length;t++)gl[t]+=gl[t-1];function sI(t){for(let e=1;e<gl.length;e+=2)if(gl[e]>t)return gl[e-1]<=t;return!1}function Lx(t){return t>=127462&&t<=127487}const Ix=8205;function mn(t,e,n=!0,i=!0){return(n?J2:oI)(t,e,i)}function J2(t,e,n){if(e==t.length)return e;e&&Y2(t.charCodeAt(e))&&q2(t.charCodeAt(e-1))&&e--;let i=kn(t,e);for(e+=Xi(i);e<t.length;){let r=kn(t,e);if(i==Ix||r==Ix||n&&sI(r))e+=Xi(r),i=r;else if(Lx(r)){let s=0,o=e-2;for(;o>=0&&Lx(kn(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function oI(t,e,n){for(;e>0;){let i=J2(t,e-2,n);if(i<e)return i;e--}return 0}function Y2(t){return t>=56320&&t<57344}function q2(t){return t>=55296&&t<56320}function kn(t,e){let n=t.charCodeAt(e);if(!q2(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return Y2(i)?(n-55296<<10)+(i-56320)+65536:n}function zw(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Xi(t){return t<65536?1:2}const x0=/\r\n?|\n/;var zn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(zn||(zn={}));class Mr{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){S0(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Mr(e)}composeDesc(e){return this.empty?e:e.empty?this:Q2(this,e)}mapDesc(e,n=!1){return e.empty?this:k0(this,e,n)}mapPos(e,n=-1,i=zn.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=r+a;if(l<0){if(u>e)return s+(e-r);s+=a}else{if(i!=zn.Simple&&u>=e&&(i==zn.TrackDel&&r<e&&u>e||i==zn.TrackBefore&&r<e||i==zn.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Mr(e)}static create(e){return new Mr(e)}}class jt extends Mr{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return S0(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return k0(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(Ze.empty);i.push(o?e.slice(s,s+o):Ze.empty)}s+=o}return new jt(n,i)}compose(e){return this.empty?e:e.empty?this:Q2(this,e,!0)}map(e,n=!1){return e.empty?this:k0(this,e,n,!0)}iterChanges(e,n=!1){S0(this,e,n)}get desc(){return Mr.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Nc(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);fn(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;fn(n,c,d),d>0&&Js(i,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);fn(n,c,-1),fn(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new jt(n,i),filtered:Mr.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!r.length)return;o<n&&fn(r,n-o,-1);let d=new jt(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof jt){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?Ze.of(f.split(i||x0)):f:Ze.empty,y=p.length;if(d==h&&y==0)return;d<o&&l(),d>o&&fn(r,d-o,-1),fn(r,h-d,y),Js(s,r,p),o=h}}return u(e),l(!a),a}static empty(e){return new jt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(Ze.empty);i[r]=Ze.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new jt(n,i)}static createSet(e,n){return new jt(e,n)}}function fn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Js(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Ze.empty);t.push(n)}}function S0(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let u=r,c=s,d=Ze.empty;for(;u+=a,c+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function k0(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Nc(t),a=new Nc(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);fn(r,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(fn(r,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(fn(r,0,o.ins),s&&Js(s,r,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;fn(r,u,l<o.i?o.ins:0),s&&l<o.i&&Js(s,r,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?jt.createSet(r,s):Mr.create(r);throw new Error("Mismatched change set lengths")}}function Q2(t,e,n=!1){let i=[],r=n?[]:null,s=new Nc(t),o=new Nc(e);for(let a=!1;;){if(s.done&&o.done)return r?jt.createSet(i,r):Mr.create(i);if(s.ins==0)fn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)fn(i,0,o.ins,a),r&&Js(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;fn(i,l,c,a),r&&c&&Js(r,i,o.text)}else o.ins==-1?(fn(i,s.off?0:s.len,l,a),r&&Js(r,i,s.textBit(l))):(fn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Js(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>u),s.forward2(l),o.forward(l)}}}}class Nc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Ze.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Ze.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class qo{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new qo(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ee.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ee.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ee.range(e.anchor,e.head)}static create(e,n,i){return new qo(e,n,i)}}class ee{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ee.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ee([this.main],0)}addRange(e,n=!0){return ee.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,ee.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ee(e.ranges.map(n=>qo.fromJSON(n)),e.main)}static single(e,n=e){return new ee([ee.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return ee.normalized(e.slice(),n);i=s.to}return new ee(e,n)}static cursor(e,n=0,i,r){return qo.create(e,e,(n==0?0:n<0?4:8)|(i==null?3:Math.min(2,i))|(r??33554431)<<5)}static range(e,n,i,r){let s=(i??33554431)<<5|(r==null?3:Math.min(2,r));return n<e?qo.create(n,e,24|s):qo.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?ee.range(l,a):ee.range(a,l))}}return new ee(e,n)}}function eP(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let jw=0;class be{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=jw++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new be(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:Fw),!!e.static,e.enables)}of(e){return new Hh([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Hh(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Hh(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function Fw(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Hh{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=jw++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||E0(d,c)){let f=i(d);if(a?!Bx(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let y=jf(h,p);if(this.dependencies.every(w=>w instanceof be?h.facet(w)===d.facet(w):w instanceof vn?h.field(w,!1)==d.field(w,!1):!0)||(a?Bx(f=i(d),y,r):r(f=i(d),y)))return d.values[o]=y,0}else f=i(d);return d.values[o]=f,1}}}}function Bx(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function E0(t,e){let n=!1;for(let i of e)rc(t,i)&1&&(n=!0);return n}function aI(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<i.length;c++){let d=jf(l,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of i)rc(l,u);return l.values[o]=a(l),1},update(l,u){if(!E0(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=E0(l,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&Fw(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const zx=be.define({static:!0});class vn{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new vn(jw++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(zx).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,zx.of({field:this,create:e})]}get extension(){return this}}const Ho={lowest:4,low:3,default:2,high:1,highest:0};function ku(t){return e=>new tP(e,t)}const hd={highest:ku(Ho.highest),high:ku(Ho.high),default:ku(Ho.default),low:ku(Ho.low),lowest:ku(Ho.lowest)};class tP{constructor(e,n){this.inner=e,this.prec=n}}class fd{of(e){return new C0(this,e)}reconfigure(e){return fd.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class C0{constructor(e,n){this.compartment=e,this.inner=n}}class zf{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of lI(e,n,o))h instanceof vn?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of r)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,y=c&&c[h]||[];if(f.every(w=>w.type==0))if(a[p.id]=l.length<<1|1,Fw(y,f))l.push(i.facet(p));else{let w=p.combine(f.map(m=>m.value));l.push(i&&p.compare(w,i.facet(p))?i.facet(p):w)}else{for(let w of f)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=u.length<<1,u.push(m=>w.dynamicSlot(m)));a[p.id]=u.length<<1,u.push(w=>aI(w,p,f))}}let d=u.map(h=>h(a));return new zf(e,o,d,a,l,s)}}function lI(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let u=i[l].indexOf(o);u>-1&&i[l].splice(u,1),o instanceof C0&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof C0){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof tP)s(o.inner,o.prec);else if(o instanceof vn)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Hh)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Ho.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Ho.default),i.reduce((o,a)=>o.concat(a))}function rc(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function jf(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const nP=be.define(),iP=be.define({combine:t=>t.some(e=>e),static:!0}),rP=be.define({combine:t=>t.length?t[0]:void 0,static:!0}),sP=be.define(),oP=be.define(),aP=be.define(),lP=be.define({combine:t=>t.length?t[0]:!1});class ks{constructor(e,n){this.type=e,this.value=n}static define(){return new uI}}class uI{of(e){return new ks(this,e)}}class cI{constructor(e){this.map=e}of(e){return new Ie(this,e)}}class Ie{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ie(this.type,n)}is(e){return this.type==e}static define(e={}){return new cI(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}Ie.reconfigure=Ie.define();Ie.appendConfig=Ie.define();class Vt{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&eP(i,n.newLength),s.some(a=>a.type==Vt.time)||(this.annotations=s.concat(Vt.time.of(Date.now())))}static create(e,n,i,r,s,o){return new Vt(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Vt.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Vt.time=ks.define();Vt.userEvent=ks.define();Vt.addToHistory=ks.define();Vt.remote=ks.define();function dI(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function uP(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=jt.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:Ie.mapEffects(t.effects,r).concat(Ie.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function A0(t,e,n){let i=e.selection,r=yl(e.annotations);return e.userEvent&&(r=r.concat(Vt.userEvent.of(e.userEvent))),{changes:e.changes instanceof jt?e.changes:jt.of(e.changes||[],n,t.facet(rP)),selection:i&&(i instanceof ee?i:ee.single(i.anchor,i.head)),effects:yl(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function cP(t,e,n){let i=A0(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=uP(i,A0(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=Vt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return fI(n?hI(r):r)}function hI(t){let e=t.startState,n=!0;for(let r of e.facet(sP)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:dI(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=jt.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Vt.create(e,r,t.selection&&t.selection.map(s),Ie.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(oP);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof Vt?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Vt?t=s[0]:t=cP(e,yl(s),!1)}return t}function fI(t){let e=t.startState,n=e.facet(aP),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=uP(i,A0(e,s,t.changes.newLength),!0))}return i==t?t:Vt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const pI=[];function yl(t){return t==null?pI:Array.isArray(t)?t:[t]}var on=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(on||(on={}));const mI=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let P0;try{P0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function gI(t){if(P0)return P0.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||mI.test(n)))return!0}return!1}function yI(t){return e=>{if(!/\S/.test(e))return on.Space;if(gI(e))return on.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return on.Word;return on.Other}}class je{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)rc(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return rc(this,i),jf(this,i)}update(...e){return cP(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(fd.reconfigure)?(n&&(r=new Map,n.compartments.forEach((a,l)=>r.set(l,a)),n=null),r.set(o.value.compartment,o.value.extension)):o.is(Ie.reconfigure)?(n=null,i=o.value):o.is(Ie.appendConfig)&&(n=null,i=yl(i).concat(o.value));let s;n?s=e.startState.values.slice():(n=zf.resolve(i,r,this),s=new je(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new je(n,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ee.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=yl(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(l.range.map(d)),r=r.compose(c),o=Ie.mapEffects(o,c).concat(Ie.mapEffects(yl(l.effects),d))}return{changes:r,selection:ee.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof jt?e:jt.of(e,this.doc.length,this.facet(je.lineSeparator))}toText(e){return Ze.of(e.split(this.facet(je.lineSeparator)||x0))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(rc(this,n),jf(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof vn&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return je.create({doc:e.doc,selection:ee.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=zf.resolve(e.extensions||[],new Map),i=e.doc instanceof Ze?e.doc:Ze.of((e.doc||"").split(n.staticFacet(je.lineSeparator)||x0)),r=e.selection?e.selection instanceof ee?e.selection:ee.single(e.selection.anchor,e.selection.head):ee.single(0);return eP(r,i.length),n.staticFacet(iP)||(r=r.asSingle()),new je(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(je.tabSize)}get lineBreak(){return this.facet(je.lineSeparator)||`
`}get readOnly(){return this.facet(lP)}phrase(e,...n){for(let i of this.facet(je.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(nP))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return yI(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=mn(n,o,!1);if(s(n.slice(l,o))!=on.Word)break;o=l}for(;a<r;){let l=mn(n,a);if(s(n.slice(a,l))!=on.Word)break;a=l}return o==a?null:ee.range(o+i,a+i)}}je.allowMultipleSelections=iP;je.tabSize=be.define({combine:t=>t.length?t[0]:4});je.lineSeparator=rP;je.readOnly=lP;je.phrases=be.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});je.languageData=nP;je.changeFilter=sP;je.transactionFilter=oP;je.transactionExtender=aP;fd.reconfigure=Ie.define();function To(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class pa{eq(e){return this==e}range(e,n=e){return O0.create(e,n,this)}}pa.prototype.startSide=pa.prototype.endSide=0;pa.prototype.point=!1;pa.prototype.mapMode=zn.TrackDel;let O0=class dP{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new dP(e,n,i)}};function N0(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Uw{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new Uw(r,s,i,a):null,pos:o}}}class ut{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new ut(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(N0)),this.isEmpty)return n.length?ut.of(n):this;let a=new hP(this,null,-1).goto(0),l=0,u=[],c=new ma;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(O0.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?ut.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new ut(i,n,s||ut.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Tc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Tc.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=jx(o,a,i),u=new Eu(o,l,s),c=new Eu(a,l,s);i.iterGaps((d,h,f)=>Fx(u,d,c,h,f,r)),i.empty&&i.length==0&&Fx(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=jx(s,o),l=new Eu(s,a,0).goto(i),u=new Eu(o,a,0).goto(i);for(;;){if(l.to!=u.to||!T0(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>r)return!0;l.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new Eu(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:Math.min(c.length,l);r.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(r.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new ma;for(let r of e instanceof O0?[e]:n?vI(e):e)i.add(r.from,r.to,r.value);return i.finish()}}ut.empty=new ut([],[],null,-1);function vI(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(N0(e,i)>0)return t.slice().sort(N0);e=i}return t}ut.empty.nextLayer=ut.empty;class ma{finishChunk(e){this.chunks.push(new Uw(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new ma)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(ut.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ut.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function jx(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class hP{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Tc{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new hP(o,n,i,s));return r.length==1?r[0]:new Tc(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)vg(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)vg(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),vg(this.heap,0)}}}function vg(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Eu{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Tc.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Kd(this.active,e),Kd(this.activeTo,e),Kd(this.activeRank,e),this.minActive=Ux(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;Xd(this.active,n,i),Xd(this.activeTo,n,r),Xd(this.activeRank,n,s),e&&Xd(e,n,this.cursor.from),this.minActive=Ux(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Kd(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function Fx(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&T0(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!T0(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function T0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Kd(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Xd(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function Ux(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function om(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=mn(t,r));return i}function wI(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=mn(t,r)}return i===!0?-1:t.length}const R0="",Vx=typeof Symbol>"u"?"__"+R0:Symbol.for(R0),M0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Hx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class mo{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(y=>o.map(w=>y.replace(/&/,w))).reduce((y,w)=>y.concat(w)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Hx[Vx]||1;return Hx[Vx]=e+1,R0+e.toString(36)}static mount(e,n){(e[M0]||new bI(e)).mount(Array.isArray(n)?n:[n])}}let Wx=new Map;class bI{constructor(e){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=Wx.get(n);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[M0]=r;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Wx.set(n,this)}else{this.styleTag=n.createElement("style");let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[M0]=this}mount(e){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var go={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Rc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},xI=typeof navigator<"u"&&/Mac/.test(navigator.platform),SI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var en=0;en<10;en++)go[48+en]=go[96+en]=String(en);for(var en=1;en<=24;en++)go[en+111]="F"+en;for(var en=65;en<=90;en++)go[en]=String.fromCharCode(en+32),Rc[en]=String.fromCharCode(en);for(var wg in go)Rc.hasOwnProperty(wg)||(Rc[wg]=go[wg]);function kI(t){var e=xI&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||SI&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Rc:go)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Ff(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function D0(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function EI(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Wh(t,e){if(!e.anchorNode)return!1;try{return D0(t,e.anchorNode)}catch{return!1}}function Mc(t){return t.nodeType==3?ga(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Uf(t,e,n,i){return n?Gx(t,e,n,i,-1)||Gx(t,e,n,i,1):!1}function Vf(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Gx(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:yo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Vf(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?yo(t):0}else return!1}}function yo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Vw(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function CI(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function AI(t,e,n,i,r,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body;if(f)h=CI(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let w=c.getBoundingClientRect();h={left:w.left,right:w.left+c.clientWidth,top:w.top,bottom:w.top+c.clientHeight}}let p=0,y=0;if(r=="nearest")e.top<h.top?(y=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+y&&(y=e.bottom-h.bottom+y+o)):e.bottom>h.bottom&&(y=e.bottom-h.bottom+o,n<0&&e.top-y<h.top&&(y=-(h.top+y-e.top+o)));else{let w=e.bottom-e.top,m=h.bottom-h.top;y=(r=="center"&&w<=m?e.top+w/2-m/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-m+o)-h.top}if(i=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),n>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,n<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||y)if(f)u.scrollBy(p,y);else{let w=0,m=0;if(y){let g=c.scrollTop;c.scrollTop+=y,m=c.scrollTop-g}if(p){let g=c.scrollLeft;c.scrollLeft+=p,w=c.scrollLeft-g}e={left:e.left-w,top:e.top-m,right:e.right-w,bottom:e.bottom-m},w&&Math.abs(w-p)<1&&(i="nearest"),m&&Math.abs(m-y)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function PI(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class OI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?yo(n):0),i,Math.min(e.focusOffset,i?yo(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let _a=null;function fP(t){if(t.setActive)return t.setActive();if(_a)return t.focus(_a);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(_a==null?{get preventScroll(){return _a={preventScroll:!0},!0}}:void 0),!_a){_a=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Kx;function ga(t,e,n=e){let i=Kx||(Kx=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function vl(t,e,n){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function NI(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function pP(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function TI(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,yo(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=yo(n))}else{if(n==t)return!0;i=Vf(n),n=n.parentNode}}function mP(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class Cn{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Cn(e.parentNode,Vf(e),n)}static after(e,n){return new Cn(e.parentNode,Vf(e)+1,n)}}const Hw=[];class st{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=st.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=Xx(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=Xx(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=yo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!st.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=Hw){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new gP(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}st.prototype.breakAfter=0;function Xx(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class gP{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function yP(t,e,n,i,r,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,a,l))){if(i<u.length){let f=u[i];f&&r<f.length?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,l)?s[s.length-1]=f:(r&&f.merge(0,r,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function vP(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,yP(t,u,c,a,l,i,0,r,s)}const ol="";class wP{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(je.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ol}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=st.get(r),l=st.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Zx(r))||Zx(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=st.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(n,i.offset))}}function Zx(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class Jx{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let ai=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},_0=typeof document<"u"?document:{documentElement:{style:{}}};const $0=/Edge\/(\d+)/.exec(ai.userAgent),bP=/MSIE \d/.test(ai.userAgent),L0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ai.userAgent),am=!!(bP||L0||$0),Yx=!am&&/gecko\/(\d+)/i.test(ai.userAgent),bg=!am&&/Chrome\/(\d+)/.exec(ai.userAgent),qx="webkitFontSmoothing"in _0.documentElement.style,xP=!am&&/Apple Computer/.test(ai.vendor),Qx=xP&&(/Mobile\/\w+/.test(ai.userAgent)||ai.maxTouchPoints>2);var we={mac:Qx||/Mac/.test(ai.platform),windows:/Win/.test(ai.platform),linux:/Linux|X11/.test(ai.platform),ie:am,ie_version:bP?_0.documentMode||6:L0?+L0[1]:$0?+$0[1]:0,gecko:Yx,gecko_version:Yx?+(/Firefox\/(\d+)/.exec(ai.userAgent)||[0,0])[1]:0,chrome:!!bg,chrome_version:bg?+bg[1]:0,ios:Qx,android:/Android\b/.test(ai.userAgent),webkit:qx,safari:xP,webkit_version:qx?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:_0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const RI=256;class Dr extends st{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Dr)||this.length-(n-e)+i.length>RI||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Dr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Cn(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return MI(this.dom,e,n)}}class gs extends st{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(pP(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof gs&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(vP(this,e,n,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new gs(this.mark,n,o)}domAtPos(e){return SP(this,e)}coordsAt(e,n){return EP(this,e,n)}}function MI(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?we.chrome||we.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=ga(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return we.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?Vw(l,o<0):l||null}class Qo extends st{constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}static create(e,n,i){return new Qo(e,n,i)}split(e){let n=Qo.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Qo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Qo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ze.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Ze.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Cn.before(this.dom):Cn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Vw(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Vl extends st{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Vl&&e.side==this.side}split(){return new Vl(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Cn.before(this.dom):Cn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ze.empty}get isHidden(){return!0}}Dr.prototype.children=Qo.prototype.children=Vl.prototype.children=Hw;function SP(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Cn(n,0)}function kP(t,e,n){let i,{children:r}=t;n>0&&e instanceof gs&&r.length&&(i=r[r.length-1])instanceof gs&&i.mark.eq(e.mark)?kP(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function EP(t,e,n){let i=null,r=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):DI(t)}function DI(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Mc(e);return n[n.length-1]||null}function I0(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const eS=Object.create(null);function Ww(t,e,n){if(t==e)return!0;t||(t=eS),e||(e=eS);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function B0(t,e,n){let i=null;if(e)for(let r in e)n&&r in n||t.removeAttribute(i=r);if(n)for(let r in n)e&&e[r]==n[r]||t.setAttribute(i=r,n[r]);return!!i}function _I(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Pa{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}destroy(e){}}var St=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(St||(St={}));class Ke extends pa{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new pd(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new vo(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=CP(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new vo(e,i,r,n,e.widget||null,!0)}static line(e){return new md(e)}static set(e,n=!1){return ut.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ke.none=ut.empty;class pd extends Ke{constructor(e){let{start:n,end:i}=CP(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof pd&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Ww(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}pd.prototype.point=!1;class md extends Ke{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof md&&this.spec.class==e.spec.class&&Ww(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}md.prototype.mapMode=zn.TrackBefore;md.prototype.point=!0;class vo extends Ke{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?zn.TrackBefore:zn.TrackAfter:zn.TrackDel}get type(){return this.startSide<this.endSide?St.WidgetRange:this.startSide<=0?St.WidgetBefore:St.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof vo&&$I(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}vo.prototype.point=!0;function CP(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function $I(t,e){return t==e||!!(t&&e&&t.compare(e))}function z0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class En extends st{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof En))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),vP(this,e,n,i?i.children:[],s,o),!0}split(e){let n=new En;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ww(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){kP(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=I0(n,this.attrs||{})),i&&(this.attrs=I0({class:i},this.attrs||{}))}domAtPos(e){return SP(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(pP(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(B0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&st.get(r)instanceof gs;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=st.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!we.ios||!this.children.some(s=>s instanceof Dr))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Dr)||/[^ -~]/.test(i.text))return null;let r=Mc(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=EP(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}get type(){return St.Text}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof En)return s;if(o>n)break}r=o+s.breakAfter}return null}}class ra extends st{constructor(e,n,i){super(),this.widget=e,this.length=n,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof ra)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Cn.before(this.dom):Cn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new ra(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i}get children(){return Hw}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ze.empty}domBoundsAround(){return null}become(e){return e instanceof ra&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class sc{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof ra&&e.type==St.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new En),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Zd(new Vl(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Zd(new Dr(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof vo){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof vo)if(i.block){let{type:l}=i;l==St.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ra(i.widget||new tS("div"),a,l))}else{let l=Qo.create(i.widget||new tS("span"),a,a?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(Zd(new Vl(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Zd(l,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new sc(e,n,i,s);return o.openEnd=ut.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Zd(t,e){for(let n of e)t=new gs(n,[t],t.length);return t}class tS extends Pa{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const AP=be.define(),PP=be.define(),OP=be.define(),NP=be.define(),j0=be.define(),TP=be.define(),RP=be.define(),MP=be.define({combine:t=>t.some(e=>e)}),DP=be.define({combine:t=>t.some(e=>e)});class Hf{constructor(e,n="nearest",i="nearest",r=5,s=5){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new Hf(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const nS=Ie.define({map:(t,e)=>t.map(e)});function er(t,e,n){let i=t.facet(NP);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const lm=be.define({combine:t=>t.length?t[0]:!0});let LI=0;const Uu=be.define();class un{constructor(e,n,i,r){this.id=e,this.create=n,this.domEventHandlers=i,this.extension=r(this)}static define(e,n){const{eventHandlers:i,provide:r,decorations:s}=n||{};return new un(LI++,e,i,o=>{let a=[Uu.of(o)];return s&&a.push(Dc.of(l=>{let u=l.plugin(o);return u?s(u):Ke.none})),r&&a.push(r(o)),a})}static fromClass(e,n){return un.define(i=>new e(i),n)}}class xg{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(er(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){er(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){er(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const _P=be.define(),Gw=be.define(),Dc=be.define(),Kw=be.define(),$P=be.define();function LP(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet($P)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Vu=be.define();class Di{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Di(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new Di(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!l)return i;new Di(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class Wf{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=jt.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Di(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new Wf(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var wt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(wt||(wt={}));const F0=wt.LTR,II=wt.RTL;function IP(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const BI=IP("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),zI=IP("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),U0=Object.create(null),hr=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);U0[e]=n,U0[n]=-e}function jI(t){return t<=247?BI[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?zI[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const FI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class wl{constructor(e,n,i){this.from=e,this.to=n,this.level=i}get dir(){return this.level%2?II:F0}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const mt=[];function UI(t,e){let n=t.length,i=e==F0?1:2,r=e==F0?2:1;if(!t||i==1&&!FI.test(t))return BP(n);for(let o=0,a=i,l=i;o<n;o++){let u=jI(t.charCodeAt(o));u==512?u=a:u==8&&l==4&&(u=16),mt[o]=u==4?2:u,u&7&&(l=u),a=u}for(let o=0,a=i,l=i;o<n;o++){let u=mt[o];if(u==128)o<n-1&&a==mt[o+1]&&a&24?u=mt[o]=a:mt[o]=256;else if(u==64){let c=o+1;for(;c<n&&mt[c]==64;)c++;let d=o&&a==8||c<n&&mt[c]==8?l==1?1:8:256;for(let h=o;h<c;h++)mt[h]=d;o=c-1}else u==8&&l==1&&(mt[o]=1);a=u,u&7&&(l=u)}for(let o=0,a=0,l=0,u,c,d;o<n;o++)if(c=U0[u=t.charCodeAt(o)])if(c<0){for(let h=a-3;h>=0;h-=3)if(hr[h+1]==-c){let f=hr[h+2],p=f&2?i:f&4?f&1?r:i:0;p&&(mt[o]=mt[hr[h]]=p),a=h;break}}else{if(hr.length==189)break;hr[a++]=o,hr[a++]=u,hr[a++]=l}else if((d=mt[o])==2||d==1){let h=d==i;l=h?0:1;for(let f=a-3;f>=0;f-=3){let p=hr[f+2];if(p&2)break;if(h)hr[f+2]|=2;else{if(p&4)break;hr[f+2]|=4}}}for(let o=0;o<n;o++)if(mt[o]==256){let a=o+1;for(;a<n&&mt[a]==256;)a++;let l=(o?mt[o-1]:i)==1,u=(a<n?mt[a]:i)==1,c=l==u?l?1:2:i;for(let d=o;d<a;d++)mt[d]=c;o=a-1}let s=[];if(i==1)for(let o=0;o<n;){let a=o,l=mt[o++]!=1;for(;o<n&&l==(mt[o]!=1);)o++;if(l)for(let u=o;u>a;){let c=u,d=mt[--u]!=2;for(;u>a&&d==(mt[u-1]!=2);)u--;s.push(new wl(u,c,d?2:1))}else s.push(new wl(a,o,0))}else for(let o=0;o<n;){let a=o,l=mt[o++]==2;for(;o<n&&l==(mt[o]==2);)o++;s.push(new wl(a,o,l?1:2))}return s}function BP(t){return[new wl(0,t,0)]}let zP="";function VI(t,e,n,i,r){var s;let o=i.head-t.from,a=-1;if(o==0){if(!r||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),a=0)}else if(o==t.length){if(r)return null;let h=e[e.length-1];h.level!=n&&(o=h.side(!0,n),a=e.length-1)}a<0&&(a=wl.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let l=e[a];o==l.side(r,n)&&(l=e[a+=r?1:-1],o=l.side(!r,n));let u=r==(l.dir==n),c=mn(t.text,o,u);if(zP=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=l.side(r,n))return ee.cursor(c+t.from,u?-1:1,l.level);let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return!d&&l.level!=n?ee.cursor(r?t.to:t.from,r?-1:1,n):d&&d.level<l.level?ee.cursor(d.side(!r,n)+t.from,r?1:-1,d.level):ee.cursor(c+t.from,r?-1:1,l.level)}class iS extends st{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new En],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Di(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=this.view.inputState.composing<0?null:WI(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:a,to:l}=this.hasComposition;n=new Di(a,l,e.changes.mapPos(a,-1),e.changes.mapPos(l,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(we.ie||we.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),o=XI(r,s,e.changes);return n=Di.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=we.chrome||we.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ra&&o.widget instanceof rS&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,y;if(i&&i.range.fromB<d&&i.range.toB>c){let x=sc.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),E=sc.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=x.breakAtStart,p=x.openStart,y=E.openEnd;let O=this.compositionView(i);E.breakAtStart?O.breakAfter=1:E.content.length&&O.merge(O.length,O.length,E.content[0],!1,E.openStart,0)&&(O.breakAfter=E.content[0].breakAfter,E.content.shift()),x.content.length&&O.merge(0,0,x.content[x.content.length-1],!0,0,x.openEnd)&&x.content.pop(),h=x.content.concat(O).concat(E.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:y}=sc.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:w,off:m}=s.findPos(u,1),{i:g,off:v}=s.findPos(l,-1);yP(this,g,v,w,m,h,f,p,y)}i&&this.fixCompositionDOM(i)}compositionView(e){let n=new Dr(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new gs(r,[n],n.length);let i=new En;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let a=st.get(s);a!=o&&(a&&(a.dom=null),o.setDOM(s))},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&Wh(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.domAtPos(a.anchor),u=a.empty?l:this.domAtPos(a.head);if(we.gecko&&a.empty&&!this.hasComposition&&HI(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new Cn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!Uf(l.node,l.offset,c.anchorNode,c.anchorOffset)||!Uf(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{we.android&&we.chrome&&this.dom.contains(c.focusNode)&&ZI(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Ff(this.view.root);if(d)if(a.empty){if(we.gecko){let h=GI(l.node,l.offset);if(h&&h!=3){let f=FP(l.node,l.offset,h==1?1:-1);f&&(l=new Cn(f,h==1?0:f.nodeValue.length))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Cn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Cn(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Ff(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=En.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}nearest(e){for(let n=e;n;){let i=st.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof En)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=St.WidgetBefore&&s.type!=St.WidgetAfter&&(!r||n==2||this.children[r-1].breakAfter||this.children[r-1].type==St.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);i=o}}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof En))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof Dr))return null;let s=mn(r.text,i);if(s==i)return null;let o=ga(r.dom,i,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==wt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,y=p?Mc(p):[];if(y.length){let w=y[y.length-1],m=l?w.right-f.left:f.right-w.left;m>a&&(a=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?wt.RTL:wt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof En){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Mc(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new gP(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=n.lineBlockAt(o).bottom-n.lineBlockAt(i).top;e.push(Ke.replace({widget:new rS(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Ke.set(e)}updateDeco(){let e=this.view.state.facet(Dc).map((n,i)=>(this.dynamicDecorationMap[i]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=LP(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom};AI(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==wt.LTR)}}function HI(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class rS extends Pa{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function jP(t){let e=t.observer.selectionRange,n=e.focusNode&&FP(e.focusNode,e.focusOffset,0);if(!n)return null;let i=st.get(n),r,s;if(i instanceof Dr)r=i.posAtStart,s=r+i.length;else e:for(let o=0,a=n;;){for(let u=a.previousSibling,c;u;u=u.previousSibling){if(c=st.get(u)){r=s=c.posAtEnd+o;break e}let d=new wP([],t.state);if(d.readNode(u),d.text.indexOf(ol)>-1)return null;o+=d.text.length}if(a=a.parentNode,!a)return null;let l=st.get(a);if(l){r=s=l.posAtStart+o;break}}return{from:r,to:s,node:n}}function WI(t,e){let n=jP(t);if(!n)return null;let{from:i,to:r,node:s}=n,o=e.mapPos(i,-1),a=e.mapPos(r,1),l=s.nodeValue;if(/[\n\r]/.test(l))return null;if(a-o!=l.length){let h=e.mapPos(i,1),f=e.mapPos(r,-1);if(f-h==l.length)o=h,a=f;else if(t.state.doc.sliceString(a-l.length,a)==l)o=a-l.length;else if(t.state.doc.sliceString(o,o+l.length)==l)a=o+l.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,a)!=l||o>u.head||a<u.head)return null;let c=[],d=new Di(i,r,o,a);for(let h=s.parentNode;;h=h.parentNode){let f=st.get(h);if(f instanceof gs)c.push({node:h,deco:f.mark});else{if(f instanceof En||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:d,text:s,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new pd({inclusive:!0,attributes:_I(h),tagName:h.tagName.toLowerCase()})});else return null}}}function FP(t,e,n){if(n<=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=yo(i);else break}if(n>=0)for(let i=t,r=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&r<i.childNodes.length&&n>=0)i=i.childNodes[r],r=0;else break}return null}function GI(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class KI{constructor(){this.changes=[]}compareRange(e,n){z0(e,n,this.changes)}comparePoint(e,n){z0(e,n,this.changes)}}function XI(t,e,n){let i=new KI;return ut.compare(t,e,n,i),i.changes}function ZI(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function JI(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return ee.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=mn(r.text,s,!1):a=mn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let u=mn(r.text,o,!1);if(i(r.text.slice(u,o))!=l)break;o=u}for(;a<r.length;){let u=mn(r.text,a);if(i(r.text.slice(a,u))!=l)break;a=u}return ee.range(o+r.from,a+r.from)}function YI(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function qI(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Sg(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function sS(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function oS(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function V0(t,e,n){let i,r,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let y=Mc(p);for(let w=0;w<y.length;w++){let m=y[w];r&&Sg(r,m)&&(m=sS(oS(m,r.bottom),r.top));let g=YI(e,m),v=qI(n,m);if(g==0&&v==0)return p.nodeType==3?aS(p,e,n):V0(p,e,n);if(!i||o>v||o==v&&s>g){i=p,r=m,s=g,o=v;let x=v?n<m.top?-1:1:g?e<m.left?-1:1:0;a=!x||(x>0?w<y.length-1:w>0)}g==0?n>m.bottom&&(!c||c.bottom<m.bottom)?(l=p,c=m):n<m.top&&(!d||d.top>m.top)&&(u=p,d=m):c&&Sg(c,m)?c=oS(c,m.bottom):d&&Sg(d,m)&&(d=sS(d,m.top))}}if(c&&c.bottom>=n?(i=l,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return aS(i,h,n);if(a&&i.contentEditable!="false")return V0(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function aS(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=ga(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((we.chrome||we.gecko)&&ga(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};r=a+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function UP(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let x=t.viewState.heightOracle.textHeight/2,E=!1;l=t.elementAtHeight(h),l.type!=St.Text;)for(;h=i>0?l.bottom+x:l.top-x,!(h>=0&&h<=u);){if(E)return n?null:0;E=!0,i=-i}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:lS(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:lS(t,o,l,c,d);let p=t.dom.ownerDocument,y=t.root.elementFromPoint?t.root:p,w=y.elementFromPoint(c,d);w&&!t.contentDOM.contains(w)&&(w=null),w||(c=Math.max(o.left+1,Math.min(o.right-1,c)),w=y.elementFromPoint(c,d),w&&!t.contentDOM.contains(w)&&(w=null));let m,g=-1;if(w&&((r=t.docView.nearest(w))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let x=p.caretPositionFromPoint(c,d);x&&({offsetNode:m,offset:g}=x)}else if(p.caretRangeFromPoint){let x=p.caretRangeFromPoint(c,d);x&&({startContainer:m,startOffset:g}=x,(!t.contentDOM.contains(m)||we.safari&&QI(m,g,c)||we.chrome&&e3(m,g,c))&&(m=void 0))}}if(!m||!t.docView.dom.contains(m)){let x=En.find(t.docView,f);if(!x)return h>l.top+l.height/2?l.to:l.from;({node:m,offset:g}=V0(x.dom,c,d))}let v=t.docView.nearest(m);if(!v)return null;if(v.isWidget&&((s=v.dom)===null||s===void 0?void 0:s.nodeType)==1){let x=v.dom.getBoundingClientRect();return e.y<x.top||e.y<=x.bottom&&e.x<=(x.left+x.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(m,g)+v.posAtStart}function lS(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+wI(o,s,t.state.tabSize)}function QI(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return ga(t,i-1,i).getBoundingClientRect().left>n}function e3(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():ga(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function H0(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==St.Text))return i}return n}function t3(t,e,n,i){let r=H0(t,e.head),s=!i||r.type!=St.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==wt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ee.cursor(l,n?-1:1)}return ee.cursor(n?r.to:r.from,n?-1:1)}function uS(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let u=VI(r,s,o,a,n),c=zP;if(!u){if(r.number==(n?t.state.doc.lines:1))return a;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=ee.cursor(n?r.from:r.to)}if(l){if(!l(c))return a}else{if(!i)return u;l=i(c)}a=u}}function n3(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==on.Space&&(r=o),r==o}}function i3(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return ee.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,y=UP(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?y<r:y>r))return ee.cursor(y,e.assoc,void 0,o)}}function Gh(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function kg(t,e,n){let i=Gh(t.state.facet(Kw).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:ee.cursor(i,i<n.from?1:-1)}class r3{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(i,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(r.type,e,r)?r.preventDefault():i(e,r))};for(let i in It){let r=It[i];e.contentDOM.addEventListener(i,s=>{cS(e,s)&&n(r,s)},W0[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{if(i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(It.mousedown,i),!i.defaultPrevented&&i.button==2)){let r=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=r,200)}}),e.scrollDOM.addEventListener("drop",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(It.drop,i)}),we.chrome&&we.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,we.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var i;let r;this.customHandlers=[];for(let s of n)if(r=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{cS(e,a)&&this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,n,i){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,i,n)||i.defaultPrevented)return!0}catch(o){er(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,n,e)}catch(s){er(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&HP.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),we.android&&we.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let i;return we.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((i=VP.find(r=>r.keyCode==n.keyCode))&&!n.ctrlKey||s3.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=i||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,vl(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:we.safari&&!we.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const VP=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],s3="dthko",HP=[16,17,18,20,91,92,224,225],Jd=6;function Yd(t){return Math.max(0,t)*.7+8}function o3(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class a3{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=PI(e.contentDOM),this.atoms=e.state.facet(Kw).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(je.allowMultipleSelections)&&l3(e,n),this.dragging=c3(e,n)&&XP(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&o3(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=LP(this.view);e.clientX-o.left<=s.left+Jd?i=-Yd(s.left-e.clientX):e.clientX+o.right>=s.right-Jd&&(i=Yd(e.clientX-s.right)),e.clientY-o.top<=s.top+Jd?r=-Yd(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Jd&&(r=Yd(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=Gh(this.atoms,r.from,0);o!=r.from&&(s=ee.cursor(o,-1))}else{let o=Gh(this.atoms,r.from,-1),a=Gh(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=ee.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?ee.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection)||i.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function l3(t,e){let n=t.state.facet(AP);return n.length?n[0](e):we.mac?e.metaKey:e.ctrlKey}function u3(t,e){let n=t.state.facet(PP);return n.length?n[0](e):we.mac?!e.altKey:!e.ctrlKey}function c3(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Ff(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function cS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=st.get(n))&&i.ignoreEvent(e))return!1;return!0}const It=Object.create(null),W0=Object.create(null),WP=we.ie&&we.ie_version<15||we.ios&&we.webkit_version<604;function d3(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),GP(t,n.value)},50)}function GP(t,e){let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(G0!=null&&n.selection.ranges.every(l=>l.empty)&&G0==s.toString()){let l=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:ee.cursor(u.from+d.length)}})}else o?i=n.changeByRange(l=>{let u=s.line(r++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ee.cursor(l.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}It.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};It.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};It.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};W0.touchstart=W0.touchmove={passive:!0};It.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let i of t.state.facet(OP))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=p3(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new a3(t,e,n,i)),i&&t.observer.ignore(()=>fP(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function dS(t,e,n,i){if(i==1)return ee.cursor(e,n);if(i==2)return JI(t.state,e,n);{let r=En.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,ee.range(o,a)}}let KP=(t,e)=>t>=e.top&&t<=e.bottom,hS=(t,e,n)=>KP(e,n)&&t>=n.left&&t<=n.right;function h3(t,e,n,i){let r=En.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&hS(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&hS(n,i,a)?1:o&&KP(i,o)?-1:1}function fS(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:h3(t,n,e.clientX,e.clientY)}}const f3=we.ie&&we.ie_version<=11;let pS=null,mS=0,gS=0;function XP(t){if(!f3)return t.detail;let e=pS,n=gS;return pS=t,gS=Date.now(),mS=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(mS+1)%3:1}function p3(t,e){let n=fS(t,e),i=XP(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=fS(t,s),u,c=dS(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=dS(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?ee.range(h,f):ee.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(u=m3(r,l.pos))?u:a?r.addRange(c):ee.create([c])}}}function m3(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ee.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}It.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:i}=t.inputState;i&&(i.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function yS(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=i&&s&&s.dragging&&u3(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}It.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let i=Array(n.length),r=0,s=()=>{++r==n.length&&yS(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}}else yS(t,e,e.dataTransfer.getData("Text"),!0)};It.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=WP?null:e.clipboardData;n?(GP(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):d3(t)};function g3(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function y3(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}let G0=null;It.copy=It.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=y3(t.state);if(!n&&!r)return;G0=r?n:null;let s=WP?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):g3(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const ZP=ks.define();function JP(t,e){let n=[];for(let i of t.facet(RP)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:ZP.of(!0)}):null}function YP(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=JP(t.state,e);n?t.dispatch(n):t.update([])}},10)}It.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),YP(t)};It.blur=t=>{t.observer.clearSelectionRange(),YP(t)};It.compositionstart=It.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};It.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,we.chrome&&we.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};It.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};It.beforeinput=(t,e)=>{var n;let i;if(we.chrome&&we.android&&(i=VP.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const vS=["pre-wrap","normal","pre-line","break-spaces"];class v3{constructor(e){this.lineWrapping=e,this.doc=Ze.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return vS.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=vS.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class w3{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Cr{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?St.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof vo?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Cr(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var lt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(lt||(lt={}));const Kh=.001;class Pn{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>Kh&&(e.heightChanged=!0),this.height=n)}replace(e,n,i){return Pn.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=r[a],h=s.lineAt(l,lt.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,lt.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,lt.ByPosNoHeight,i,0,0));c+=h.from-l,l=h.from;let p=Xw.build(i.setDoc(o),e,c,d);s=s.replace(l,u,p)}return s.updateHeight(i,0)}static empty(){return new ri(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new b3(Pn.of(e.slice(0,n)),o,Pn.of(e.slice(i)))}}Pn.prototype.size=1;class qP extends Pn{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Cr(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ri extends qP{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Cr(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof ri||r instanceof qt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof qt?r=new ri(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Pn.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class qt extends Pn{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(i,e-d/2);return new Cr(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:d}=n.doc.line(s+u);return new Cr(c,d,i+a*u,a,0)}}lineAt(e,n,i,r,s){if(n==lt.ByHeight)return this.blockAt(e,i,r,s);if(n==lt.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new Cr(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=r+a*d+l*(u.from-s-d);return new Cr(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new Cr(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof qt?i[i.length-1]=new qt(s.length+r):i.push(null,new qt(r-1))}if(e>0){let s=i[0];s instanceof qt?i[0]=new qt(e+s.length):i.unshift(new qt(e-1),null)}return Pn.of(i)}decomposeLeft(e,n){n.push(new qt(e-1),null)}decomposeRight(e,n){n.push(null,new qt(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new qt(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=Kh&&(l=-2);let h=new ri(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new qt(s-a).updateHeight(e,a));let u=Pn.of(o);return(l<0||Math.abs(u.height-this.height)>=Kh||Math.abs(l-this.heightMetrics(e,n).perLine)>=Kh)&&(e.heightChanged=!0),u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class b3 extends Pn{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==lt.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==lt.ByPosNoHeight?lt.ByPosNoHeight:lt.ByPos;return l?u.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let u=this.lineAt(l,lt.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&wS(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),wS(s,a)}return Pn.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Pn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function wS(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof qt&&(i=t[e+1])instanceof qt&&t.splice(e-1,3,new qt(n.length+1+i.length))}const x3=5;class Xw{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof ri?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new ri(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new qP(o,r,i)):(o||s||r>=x3)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ri(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new qt(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ri)return e;let n=new ri(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let i=(n=e.deco)===null||n===void 0?void 0:n.type;i==St.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i!=St.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof ri)&&!this.isCovered?this.nodes.push(new ri(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof ri&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new Xw(i,e);return ut.spans(n,i,r,s,0),s.finish(i)}}function S3(t,e,n){let i=new k3;return ut.compare(t,e,n,i,0),i.changes}class k3{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&z0(e,n,this.changes,5)}}function E3(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=u==t.parentNode?h.bottom:Math.min(l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function C3(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Eg{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return Ke.replace({widget:new A3(this.size,e)}).range(this.from,this.to)}}class A3 extends Pa{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class bS{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=xS,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=wt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Gw).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new v3(n),this.stateDeco=e.facet(Dc).filter(i=>typeof i!="function"),this.heightMap=Pn.empty().applyChanges(this.stateDeco,Ze.empty,this.heightOracle.setDoc(e.doc),[new Di(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ke.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new qd(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?xS:new N3(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Hu(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Dc).filter(c=>typeof c!="function");let r=e.changedRanges,s=Di.extendWithRanges(r,S3(i,this.stateDeco,e?e.changes:jt.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(DP)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?wt.RTL:wt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0,d=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=mP(e.scrollDOM);let f=(this.printing?C3:E3)(n,this.paddingTop),p=f.top-this.pixelViewport.top,y=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let m=a.width;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let v=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(v)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:x,charWidth:E,textHeight:O}=e.docView.measureTextSize();o=x>0&&r.refresh(s,x,E,O,m/E,v),o&&(e.docView.minWidth=0,u|=8)}p>0&&y>0?c=Math.max(p,y):p<0&&y<0&&(c=Math.min(p,y)),r.heightChanged=!1;for(let x of this.viewports){let E=x.from==this.viewport.from?v:e.docView.measureVisibleLineHeights(x);this.heightMap=(o?Pn.empty().applyChanges(this.stateDeco,Ze.empty,this.heightOracle,[new Di(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new w3(x.from,E))}r.heightChanged&&(u|=2)}let g=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return g&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||g)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new qd(r.lineAt(o-i*1e3,lt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,lt.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,lt.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new qd(r.lineAt(h-1e3/2,lt.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,lt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new qd(this.heightMap.lineAt(i,lt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,lt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,lt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,lt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Eg(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=wt.LTR&&!i)return[];let a=[],l=(u,c,d,h)=>{if(c-u<s)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let w of p)if(w>u&&w<c){l(u,w-10,d,h),l(w+10,c,d,h);return}let y=O3(e,w=>w.from>=d.from&&w.to<=d.to&&Math.abs(w.from-u)<s&&Math.abs(w.to-c)<s&&!p.some(m=>w.from<m&&w.to>m));if(!y){if(c<d.to&&n&&i&&n.visibleRanges.some(w=>w.from<=c&&w.to>=c)){let w=n.moveToLineBoundary(ee.cursor(c),!1,!0).head;w>u&&(c=w)}y=new Eg(u,c,this.gapSize(d,u,c,h))}a.push(y)};for(let u of this.viewportLines){if(u.length<o)continue;let c=P3(u.from,u.to,this.stateDeco);if(c.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,w;if(d!=null){let m=eh(c,d),g=((this.visibleBottom-this.visibleTop)/2+p)/u.height;y=m-g,w=m+g}else y=(this.visibleTop-u.top-p)/u.height,w=(this.visibleBottom-u.top+p)/u.height;h=Qd(c,y),f=Qd(c,w)}else{let p=c.total*this.heightOracle.charWidth,y=r*this.heightOracle.charWidth,w,m;if(d!=null){let g=eh(c,d),v=((this.pixelViewport.right-this.pixelViewport.left)/2+y)/p;w=g-v,m=g+v}else w=(this.pixelViewport.left-y)/p,m=(this.pixelViewport.right+y)/p;h=Qd(c,w),f=Qd(c,m)}h>u.from&&l(u.from,h,u,c),f<u.to&&l(f,u.to,u,c)}return a}gapSize(e,n,i,r){let s=eh(r,i)-eh(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Eg.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ke.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ut.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Hu(this.heightMap.lineAt(e,lt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Hu(this.heightMap.lineAt(this.scaler.fromDOM(e),lt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Hu(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class qd{constructor(e,n){this.from=e,this.to=n}}function P3(t,e,n){let i=[],r=t,s=0;return ut.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Qd({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function eh(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function O3(t,e){for(let n of t)if(e(n))return n}const xS={toDOM(t){return t},fromDOM(t){return t},scale:1};class N3{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let u=n.lineAt(a,lt.ByPos,e,0,0).top,c=n.lineAt(l,lt.ByPos,e,0,0).bottom;return r+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function Hu(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Cr(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Hu(r,e)):t._content)}const th=be.define({combine:t=>t.join(" ")}),K0=be.define({combine:t=>t.indexOf(!0)>-1}),X0=mo.newName(),QP=mo.newName(),eO=mo.newName(),tO={"&light":"."+QP,"&dark":"."+eO};function Z0(t,e,n){return new mo(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const T3=Z0("."+X0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},tO);class R3{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:D3(e),l=new wP(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=_3(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!D0(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!D0(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=ee.single(u,l)}}}function nO(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,u=null;(s===8||we.android&&e.text.length<a-o)&&(l=r.to,u="end");let c=M3(t.state.doc.sliceString(o,a,ol),e.text,l-o,u);c&&(we.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==ol+ol&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:Ze.of(e.text.slice(c.from,c.toB).split(ol))})}else i&&(!t.hasFocus&&t.state.facet(lm)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(we.mac||we.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=ee.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ze.of([" "])}):we.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ee.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ze.of([" "])}),n){let o=t.state;if(we.ios&&t.inputState.flushIOSKey(t)||we.android&&(n.from==r.from&&n.to==r.to&&n.insert.length==1&&n.insert.lines==2&&vl(t.contentDOM,"Enter",13)||(n.from==r.from-1&&n.to==r.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&vl(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&n.insert.length==0&&vl(t.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(t.state.facet(TP).some(c=>c(t,n.from,n.to,a)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let l;if(n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=r.from<n.from?o.sliceDoc(r.from,n.from):"",d=r.to>n.to?o.sliceDoc(n.to,r.to):"";l=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let c=o.changes(n),d=i&&i.main.to<=c.newLength?i.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){let h=t.state.sliceDoc(n.from,n.to),f=jP(t)||t.state.doc.lineAt(r.head),p=r.to-n.to,y=r.to-r.from;l=o.changeByRange(w=>{if(w.from==r.from&&w.to==r.to)return{changes:c,range:d||w.map(c)};let m=w.to-p,g=m-h.length;if(w.to-w.from!=y||t.state.sliceDoc(g,m)!=h||f&&w.to>=f.from&&w.from<=f.to)return{range:w};let v=o.changes({from:g,to:m,insert:n.insert}),x=w.to-r.to;return{changes:v,range:d?ee.range(Math.max(0,d.anchor+x),Math.max(0,d.head+x)):w.map(v)}})}else l={changes:c,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(l,{scrollIntoView:!0,userEvent:u}),!0}else if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function M3(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function D3(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Jx(n,i)),(r!=n||s!=i)&&e.push(new Jx(r,s))),e}function _3(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?ee.single(n+e,i+e):null}const $3={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Cg=we.ie&&we.ie_version<=11;class L3{constructor(e){this.view=e,this.active=!1,this.selectionRange=new OI,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(we.ie&&we.ie_version<=11||we.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Cg&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(lm)?i.root.activeElement!=this.dom:!Wh(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(we.ie&&we.ie_version<=11||we.android&&we.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Uf(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=we.safari&&e.root.nodeType==11&&EI(this.dom.ownerDocument)==this.dom&&I3(this.view)||Ff(e.root);if(!n||this.selectionRange.eq(n))return!1;let i=Wh(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&TI(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,$3),Cg&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Cg&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&vl(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Wh(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new R3(this.view,e,n,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let i=this.view.state,r=nO(this.view,n);return this.view.state==i&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=SS(n,e.previousSibling||e.target.previousSibling,-1),r=SS(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function SS(t,e,n){for(;e;){let i=st.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function I3(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return Uf(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}class Ce{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||NI(e.parent)||document,this.viewState=new bS(e.state||je.create(e)),this.plugins=this.state.facet(Uu).map(n=>new xg(n));for(let n of this.plugins)n.update(this);this.observer=new L3(this),this.inputState=new r3(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new iS(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof Vt?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(ZP))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=JP(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(je.phrases)!=this.state.facet(je.phrases))return this.setState(s);r=Wf.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Hf(f.empty?f:ee.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(nS)&&(d=f.value)}this.viewState.update(r,d),this.bidiCache=Gf.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Vu)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(th)!=r.state.facet(th)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let h of this.state.facet(j0))h(r);(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!nO(this,c)&&u.force&&vl(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new bS(e),this.plugins=e.facet(Uu).map(i=>new xg(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new iS(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Uu),i=e.state.facet(Uu);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new xg(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,{scrollTop:r}=i,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;r!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(mP(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return er(this.state,p),kS}}),d=Wf.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let f=0;f<u.length;f++)if(c[f]!=kS)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){er(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=i.scrollTop=r+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(j0))a(n)}get themeClasses(){return X0+" "+(this.state.facet(K0)?eO:QP)+" "+this.state.facet(th)}updateAttrs(){let e=ES(this,_P,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(lm)?"true":"false",class:"cm-content",style:`${we.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),ES(this,Gw,n);let i=this.observer.ignore(()=>{let r=B0(this.contentDOM,this.contentAttrs,n),s=B0(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Ce.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Vu),mo.mount(this.root,this.styleModules.concat(T3).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return kg(this,e,uS(this,e,n,i))}moveByGroup(e,n){return kg(this,e,uS(this,e,n,i=>n3(this,e.head,i)))}moveToLineBoundary(e,n,i=!0){return t3(this,e,n,i)}moveVertically(e,n,i){return kg(this,e,i3(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),UP(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[wl.find(s,e-r.from,-1,n)];return Vw(i,o.dir==wt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(MP)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>B3)return BP(e.length);let n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n)return r.order;let i=UI(e.text,n);return this.bidiCache.push(new Gf(e.from,e.to,n,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||we.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{fP(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return nS.of(new Hf(typeof e=="number"?ee.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return un.define(()=>({}),{eventHandlers:e})}static theme(e,n){let i=mo.newName(),r=[th.of(i),Vu.of(Z0(`.${i}`,e))];return n&&n.dark&&r.push(K0.of(!0)),r}static baseTheme(e){return hd.lowest(Vu.of(Z0("."+X0,e,tO)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&st.get(i)||st.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Ce.styleModule=Vu;Ce.inputHandler=TP;Ce.focusChangeEffect=RP;Ce.perLineTextDirection=MP;Ce.exceptionSink=NP;Ce.updateListener=j0;Ce.editable=lm;Ce.mouseSelectionStyle=OP;Ce.dragMovesSelection=PP;Ce.clickAddsSelectionRange=AP;Ce.decorations=Dc;Ce.atomicRanges=Kw;Ce.scrollMargins=$P;Ce.darkTheme=K0;Ce.contentAttributes=Gw;Ce.editorAttributes=_P;Ce.lineWrapping=Ce.contentAttributes.of({class:"cm-lineWrapping"});Ce.announce=Ie.define();const B3=4096,kS={};class Gf{constructor(e,n,i,r){this.from=e,this.to=n,this.dir=i,this.order=r}static update(e,n){if(n.empty)return e;let i=[],r=e.length?e[e.length-1].dir:wt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Gf(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return i}}function ES(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&I0(o,n)}return n}const z3=we.mac?"mac":we.windows?"win":we.linux?"linux":"key";function j3(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function nh(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const F3=hd.default(Ce.domEventHandlers({keydown(t,e){return sO(rO(e.state),t,e,"editor")}})),iO=be.define({enables:F3}),CS=new WeakMap;function rO(t){let e=t.facet(iO),n=CS.get(e);return n||CS.set(e,n=H3(e.reduce((i,r)=>i.concat(r),[]))),n}function U3(t,e,n){return sO(rO(t.state),e,t,n)}let js=null;const V3=4e3;function H3(t,e=z3){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(m=>j3(m,e));for(let m=1;m<p.length;m++){let g=p.slice(0,m).join(" ");r(g,!0),f[g]||(f[g]={preventDefault:!0,stopPropagation:!1,run:[v=>{let x=js={view:v,prefix:g,scope:o};return setTimeout(()=>{js==x&&(js=null)},V3),!0}]})}let y=p.join(" ");r(y,!1);let w=f[y]||(f[y]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&w.run.push(l),u&&(w.preventDefault=!0),c&&(w.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in c)c[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function sO(t,e,n,i){let r=kI(e),s=kn(r,0),o=Xi(s)==r.length&&r!=" ",a="",l=!1,u=!1,c=!1;js&&js.view==n&&js.scope==i&&(a=js.prefix+" ",HP.indexOf(e.keyCode)<0&&(u=!0,js=null));let d=new Set,h=w=>{if(w){for(let m of w.run)if(!d.has(m)&&(d.add(m),m(n,e)))return w.stopPropagation&&(c=!0),!0;w.preventDefault&&(w.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,y;return f&&(h(f[a+nh(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(we.windows&&e.ctrlKey&&e.altKey)&&(p=go[e.keyCode])&&p!=r?(h(f[a+nh(p,e,!0)])||e.shiftKey&&(y=Rc[e.keyCode])!=r&&y!=p&&h(f[a+nh(y,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+nh(r,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class gd{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=oO(e);return[new gd(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return W3(e,n,i)}}function oO(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==wt.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function AS(t,e,n){let i=ee.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:St.Text}}function W3(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==wt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=oO(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=H0(t,i),p=H0(t,r),y=f.type==St.Text?f:null,w=p.type==St.Text?p:null;if(y&&(t.lineWrapping||f.widgetLineBreaks)&&(y=AS(t,i,y)),w&&(t.lineWrapping||p.widgetLineBreaks)&&(w=AS(t,r,w)),y&&w&&y.from==w.from)return g(v(n.from,n.to,y));{let E=y?v(n.from,null,y):x(f,!1),O=w?v(null,n.to,w):x(p,!0),N=[];return(y||f).to<(w||p).from-(y&&w?1:0)||f.widgetLineBreaks>1&&E.bottom+t.defaultLineHeight/2<O.top?N.push(m(d,E.bottom,h,O.top)):E.bottom<O.top&&t.elementAtHeight((E.bottom+O.top)/2).type==St.Text&&(E.bottom=O.top=(E.bottom+O.top)/2),g(E).concat(N).concat(g(O))}function m(E,O,N,P){return new gd(e,E-l.left,O-l.top-.01,N-E,P-O+.01)}function g({top:E,bottom:O,horizontal:N}){let P=[];for(let R=0;R<N.length;R+=2)P.push(m(N[R],E,N[R+1],O));return P}function v(E,O,N){let P=1e9,R=-1e9,_=[];function M(j,X,J,G,L){let I=t.coordsAtPos(j,j==N.to?-2:2),Y=t.coordsAtPos(J,J==N.from?2:-2);!I||!Y||(P=Math.min(I.top,Y.top,P),R=Math.max(I.bottom,Y.bottom,R),L==wt.LTR?_.push(s&&X?d:I.left,s&&G?h:Y.right):_.push(!s&&G?d:Y.left,!s&&X?h:I.right))}let H=E??N.from,F=O??N.to;for(let j of t.visibleRanges)if(j.to>H&&j.from<F)for(let X=Math.max(j.from,H),J=Math.min(j.to,F);;){let G=t.state.doc.lineAt(X);for(let L of t.bidiSpans(G)){let I=L.from+G.from,Y=L.to+G.from;if(I>=J)break;Y>X&&M(Math.max(I,X),E==null&&I<=H,Math.min(Y,J),O==null&&Y>=F,L.dir)}if(X=G.to+1,X>=J)break}return _.length==0&&M(H,E==null,F,O==null,t.textDirection),{top:P,bottom:R,horizontal:_}}function x(E,O){let N=a.top+(O?E.top:E.bottom);return{top:N,bottom:N,horizontal:[]}}}function G3(t,e){return t.constructor==e.constructor&&t.eq(e)}class K3{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Xh)!=e.state.facet(Xh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(Xh);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!G3(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Xh=be.define();function aO(t){return[un.define(e=>new K3(e,t)),Xh.of(t)]}const lO=!we.ios,_c=be.define({combine(t){return To(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function X3(t={}){return[_c.of(t),Z3,J3,Y3,DP.of(!0)]}function uO(t){return t.startState.facet(_c)!=t.state.facet(_c)}const Z3=aO({above:!0,markers(t){let{state:e}=t,n=e.facet(_c),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||lO:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:ee.cursor(r.head,r.head>r.anchor?-1:1);for(let l of gd.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=uO(t);return n&&PS(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){PS(e.state,t)},class:"cm-cursorLayer"});function PS(t,e){e.style.animationDuration=t.facet(_c).cursorBlinkRate+"ms"}const J3=aO({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:gd.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||uO(t)},class:"cm-selectionLayer"}),cO={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};lO&&(cO[".cm-line"].caretColor="transparent !important");const Y3=hd.highest(Ce.theme(cO)),dO=Ie.define({map(t,e){return t==null?null:e.mapPos(t)}}),Wu=vn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(dO)?i.value:n,t)}}),q3=un.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Wu);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Wu)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Wu),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Wu)!=t&&this.view.dispatch({effects:dO.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Q3(){return[Wu,q3]}function OS(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function e5(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class t5{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,u,c)=>r(c,u,u+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,u,c)=>{let d=i(a,l,u);d&&c(u,u+a[0].length,d)};else if(i)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new ma,i=n.add.bind(n);for(let{from:r,to:s}of e5(e,this.maxLength))OS(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(y,w,m)=>h.push(m.range(y,w));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else OS(e.state.doc,this.regexp,c,d,(y,w)=>this.addMatch(w,e,y,p));n=n.update({filterFrom:c,filterTo:d,filter:(y,w)=>y<c||w>d,add:h})}}return n}}const J0=/x/.unicode!=null?"gu":"g",n5=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,J0),i5={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ag=null;function r5(){var t;if(Ag==null&&typeof document<"u"&&document.body){let e=document.body.style;Ag=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Ag||!1}const Zh=be.define({combine(t){let e=To(t,{render:null,specialChars:n5,addSpecialChars:null});return(e.replaceTabs=!r5())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,J0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,J0)),e}});function s5(t={}){return[Zh.of(t),o5()]}let NS=null;function o5(){return NS||(NS=un.fromClass(class{constructor(t){this.view=t,this.decorations=Ke.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Zh)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new t5({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=kn(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=om(o.text,a,i-o.from);return Ke.replace({widget:new c5((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Ke.replace({widget:new u5(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Zh);t.startState.facet(Zh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const a5="";function l5(t){return t>=32?a5:t==10?"":String.fromCharCode(9216+t)}class u5 extends Pa{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=l5(this.code),i=e.state.phrase("Control character")+" "+(i5[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class c5 extends Pa{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function d5(){return f5}const h5=Ke.line({class:"cm-activeLine"}),f5=un.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(h5.range(r.from)),e=r.from)}return Ke.set(n)}},{decorations:t=>t.decorations}),ih="-10000px";class hO{constructor(e,n,i){this.facet=n,this.createTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){var n;let i=e.state.facet(this.facet),r=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let a=r[o],l=-1;if(a){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==a.create&&(l=u)}if(l<0)s[o]=this.createTooltipView(a);else{let u=s[o]=this.tooltipViews[l];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function p5(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Pg=be.define({combine:t=>{var e,n,i;return{position:we.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||p5}}}),TS=new WeakMap,fO=un.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Pg);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new hO(t,Zw,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Pg);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=ih,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let i=this.manager.tooltipViews[n];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Pg).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:i}=t,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){l.style.top=ih;continue}let d=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,f=c.right-c.left,p=(e=TS.get(a))!==null&&e!==void 0?e:c.bottom-c.top,y=a.offset||g5,w=this.view.textDirection==wt.LTR,m=c.width>i.right-i.left?w?i.left:i.right-c.width:w?Math.min(u.left-(d?14:0)+y.x,i.right-f):Math.max(i.left,u.left-f+(d?14:0)-y.x),g=!!o.above;!o.strictSide&&(g?u.top-(c.bottom-c.top)-y.y<i.top:u.bottom+(c.bottom-c.top)+y.y>i.bottom)&&g==i.bottom-u.bottom>u.top-i.top&&(g=!g);let v=(g?u.top-i.top:i.bottom-u.bottom)-h;if(v<p&&a.resize!==!1){if(v<this.view.defaultLineHeight){l.style.top=ih;continue}TS.set(a,p),l.style.height=(p=v)+"px"}else l.style.height&&(l.style.height="");let x=g?u.top-p-h-y.y:u.bottom+h+y.y,E=m+f;if(a.overlap!==!0)for(let O of r)O.left<E&&O.right>m&&O.top<x+p&&O.bottom>x&&(x=g?O.top-p-2-h:O.bottom+h+2);this.position=="absolute"?(l.style.top=x-t.parent.top+"px",l.style.left=m-t.parent.left+"px"):(l.style.top=x+"px",l.style.left=m+"px"),d&&(d.style.left=`${u.left+(w?y.x:-y.x)-(m+14-7)}px`),a.overlap!==!0&&r.push({left:m,top:x,right:E,bottom:x+p}),l.classList.toggle("cm-tooltip-above",g),l.classList.toggle("cm-tooltip-below",!g),a.positioned&&a.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=ih}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),m5=Ce.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),g5={x:0,y:0},Zw=be.define({enables:[fO,m5]}),Kf=be.define();class Jw{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new hO(e,Kf,n=>this.createHostedView(n))}static create(e){return new Jw(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const y5=Zw.compute([Kf],t=>{let e=t.facet(Kf).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:Jw.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class v5{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let i=this.view.coordsAtPos(n);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(a=>a.from<=n&&a.to>=n),s=r&&r.dir==wt.RTL?-1:1,o=this.source(this.view,n,e.x<i.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:n};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>er(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!RS(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=(n=i==null?void 0:i.end)!==null&&n!==void 0?n:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!w5(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!RS(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function RS(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function w5(t,e,n,i,r,s){let o=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let d=u[c];if(Math.max(d.top-r,r-d.bottom,d.left-i,i-d.right)<=s)return!0}return!1}function b5(t,e={}){let n=Ie.define(),i=vn.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,zn.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),r);a.pos=o,r.end!=null&&(a.end=s.changes.mapPos(r.end)),r=a}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(S5)&&(r=null);return r},provide:r=>Kf.from(r)});return[i,un.define(r=>new v5(r,t,i,n,e.hoverTime||300)),y5]}function x5(t,e){let n=t.plugin(fO);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const S5=Ie.define(),MS=be.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function $c(t,e){let n=t.plugin(pO),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const pO=un.fromClass(class{constructor(t){this.input=t.state.facet(Hl),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(MS);this.top=new rh(t,!0,e.topContainer),this.bottom=new rh(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(MS);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new rh(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new rh(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Hl);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Ce.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class rh{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=DS(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=DS(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function DS(t){let e=t.nextSibling;return t.remove(),e}const Hl=be.define({enables:pO});class wo extends pa{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}wo.prototype.elementClass="";wo.prototype.toDOM=void 0;wo.prototype.mapMode=zn.TrackBefore;wo.prototype.startSide=wo.prototype.endSide=-1;wo.prototype.point=!0;const Jh=be.define(),Yh=be.define(),Y0=be.define({combine:t=>t.some(e=>e)});function k5(t){let e=[E5];return t&&t.fixed===!1&&e.push(Y0.of(!0)),e}const E5=un.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Yh).map(e=>new $S(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Y0),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Y0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ut.iter(this.view.state.facet(Jh),this.view.viewport.from),i=[],r=this.gutters.map(s=>new C5(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==St.Text&&o){q0(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==St.Text){q0(n,i,s.from);for(let o of r)o.line(this.view,s,i)}for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Yh),n=t.state.facet(Yh),i=t.docChanged||t.heightChanged||t.viewportChanged||!ut.eq(t.startState.facet(Jh),t.state.facet(Jh),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new $S(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Ce.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==wt.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function _S(t){return Array.isArray(t)?t:[t]}function q0(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class C5{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ut.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=n.top-this.height;if(this.i==r.elements.length){let o=new mO(e,n.height,s,i);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,n.height,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];q0(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n);i&&this.addElement(e,n,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class $S{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=_S(n.markers(e)),n.initialSpacer&&(this.spacer=new mO(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=_S(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!ut.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class mO{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),A5(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function A5(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const P5=be.define(),al=be.define({combine(t){return To(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return i}})}});class Og extends wo{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ng(t,e){return t.state.facet(al).formatNumber(e,t.state)}const O5=Yh.compute([al],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(P5)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Og(Ng(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(al)!=e.state.facet(al),initialSpacer(e){return new Og(Ng(e,LS(e.state.doc.lines)))},updateSpacer(e,n){let i=Ng(n.view,LS(n.view.state.doc.lines));return i==e.number?e:new Og(i)},domEventHandlers:t.facet(al).domEventHandlers}));function N5(t={}){return[al.of(t),k5(),O5]}function LS(t){let e=9;for(;e<t;)e=e*10+9;return e}const T5=new class extends wo{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},R5=Jh.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(T5.range(r)))}return ut.of(e)});function M5(){return R5}const gO=new fd;function yO(t){window.codemirror&&window.codemirror.dispatch({effects:gO.reconfigure(je.readOnly.of(t))})}const Q0=Ie.define(),D5=vn.define({create(){return Ke.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(Q0)&&(n=Ke.none,i.value!==null&&(n=n.update({add:[_5.range(i.value)]})));return n},provide:t=>Ce.decorations.from(t)}),_5=Ke.line({class:"!bg-mantis-400/10"});function vO(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:Q0.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:Q0.of(e)})}}const $5=Symbol(),L5=t=>typeof(t==null?void 0:t.then)=="function";function I5(t){let e,n;const i={getItem:(r,s)=>{var o,a;const l=c=>{if(c=c||"",e!==c){try{n=JSON.parse(c)}catch{return s}e=c}return n},u=(a=(o=t())==null?void 0:o.getItem(r))!=null?a:null;return L5(u)?u.then(l):l(u)},setItem:(r,s)=>{var o;return(o=t())==null?void 0:o.setItem(r,JSON.stringify(s))},removeItem:r=>{var s;return(s=t())==null?void 0:s.removeItem(r)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&(i.subscribe=(r,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===r){let u;try{u=JSON.parse(l.newValue||"")}catch{u=o}s(u)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),i}const B5=I5(()=>typeof window<"u"?window.localStorage:void 0);function z5(t,e,n=B5,i){const r=i==null?void 0:i.unstable_getOnInit,s=ke(r?n.getItem(t,e):e);return s.onMount=a=>{r||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},ke(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===$5?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}var Xe;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Xe||(Xe={}));var ev;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(ev||(ev={}));const fe=Xe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fs=t=>{switch(typeof t){case"undefined":return fe.undefined;case"string":return fe.string;case"number":return isNaN(t)?fe.nan:fe.number;case"boolean":return fe.boolean;case"function":return fe.function;case"bigint":return fe.bigint;case"symbol":return fe.symbol;case"object":return Array.isArray(t)?fe.array:t===null?fe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?fe.promise:typeof Map<"u"&&t instanceof Map?fe.map:typeof Set<"u"&&t instanceof Set?fe.set:typeof Date<"u"&&t instanceof Date?fe.date:fe.object;default:return fe.unknown}},ne=Xe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),j5=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class tr extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return r(this),i}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}tr.create=t=>new tr(t);const Lc=(t,e)=>{let n;switch(t.code){case ne.invalid_type:t.received===fe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ne.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Xe.jsonStringifyReplacer)}`;break;case ne.unrecognized_keys:n=`Unrecognized key(s) in object: ${Xe.joinValues(t.keys,", ")}`;break;case ne.invalid_union:n="Invalid input";break;case ne.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Xe.joinValues(t.options)}`;break;case ne.invalid_enum_value:n=`Invalid enum value. Expected ${Xe.joinValues(t.options)}, received '${t.received}'`;break;case ne.invalid_arguments:n="Invalid function arguments";break;case ne.invalid_return_type:n="Invalid function return type";break;case ne.invalid_date:n="Invalid date";break;case ne.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Xe.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ne.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ne.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ne.custom:n="Invalid input";break;case ne.invalid_intersection_types:n="Intersection results could not be merged";break;case ne.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ne.not_finite:n="Number must be finite";break;default:n=e.defaultError,Xe.assertNever(t)}return{message:n}};let wO=Lc;function F5(t){wO=t}function Xf(){return wO}const Zf=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};let a="";const l=i.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...r,path:s,message:r.message||a}},U5=[];function pe(t,e){const n=Zf({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Xf(),Lc].filter(i=>!!i)});t.common.issues.push(n)}class yn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Me;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n)i.push({key:await r.key,value:await r.value});return yn.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Me;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Me=Object.freeze({status:"aborted"}),bO=t=>({status:"dirty",value:t}),Nn=t=>({status:"valid",value:t}),tv=t=>t.status==="aborted",nv=t=>t.status==="dirty",Jf=t=>t.status==="valid",Yf=t=>typeof Promise<"u"&&t instanceof Promise;var Ee;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ee||(Ee={}));class _r{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const IS=(t,e)=>{if(Jf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new tr(t.common.issues);return this._error=n,this._error}}};function $e(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:i??a.defaultError}:{message:n??a.defaultError},description:r}}class Be{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Fs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Fs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new yn,ctx:{common:e.parent.common,data:e.data,parsedType:Fs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Yf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fs(e)},s=this._parseSync({data:e,path:r.path,parent:r});return IS(r,s)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fs(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Yf(r)?r:Promise.resolve(r));return IS(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ne.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new sr({schema:this,typeName:Oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return os.create(this,this._def)}nullable(){return wa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return nr.create(this,this._def)}promise(){return Gl.create(this,this._def)}or(e){return jc.create([this,e],this._def)}and(e){return Fc.create(this,e,this._def)}transform(e){return new sr({...$e(this._def),schema:this,typeName:Oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Gc({...$e(this._def),innerType:this,defaultValue:n,typeName:Oe.ZodDefault})}brand(){return new SO({typeName:Oe.ZodBranded,type:this,...$e(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new tp({...$e(this._def),innerType:this,catchValue:n,typeName:Oe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return yd.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const V5=/^c[^\s-]{8,}$/i,H5=/^[a-z][a-z0-9]*$/,W5=/[0-9A-HJKMNP-TV-Z]{26}/,G5=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,K5=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,X5=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Z5=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,J5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Y5=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function q5(t,e){return!!((e==="v4"||!e)&&Z5.test(t)||(e==="v6"||!e)&&J5.test(t))}class Zi extends Be{constructor(){super(...arguments),this._regex=(e,n,i)=>this.refinement(r=>e.test(r),{validation:n,code:ne.invalid_string,...Ee.errToObj(i)}),this.nonempty=e=>this.min(1,Ee.errToObj(e)),this.trim=()=>new Zi({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Zi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Zi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==fe.string){const s=this._getOrReturnCtx(e);return pe(s,{code:ne.invalid_type,expected:fe.string,received:s.parsedType}),Me}const i=new yn;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),pe(r,{code:ne.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),pe(r,{code:ne.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?pe(r,{code:ne.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&pe(r,{code:ne.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")K5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"email",code:ne.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")X5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"emoji",code:ne.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")G5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"uuid",code:ne.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")V5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"cuid",code:ne.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")H5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"cuid2",code:ne.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")W5.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"ulid",code:ne.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),pe(r,{validation:"url",code:ne.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"regex",code:ne.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),pe(r,{code:ne.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),pe(r,{code:ne.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),pe(r,{code:ne.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?Y5(s).test(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{code:ne.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="ip"?q5(e.data,s.version)||(r=this._getOrReturnCtx(e,r),pe(r,{validation:"ip",code:ne.invalid_string,message:s.message}),i.dirty()):Xe.assertNever(s);return{status:i.value,value:e.data}}_addCheck(e){return new Zi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ee.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ee.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ee.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ee.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ee.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ee.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ee.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ee.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ee.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Zi.create=t=>{var e;return new Zi({checks:[],typeName:Oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...$e(t)})};function Q5(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class bo extends Be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==fe.number){const s=this._getOrReturnCtx(e);return pe(s,{code:ne.invalid_type,expected:fe.number,received:s.parsedType}),Me}let i;const r=new yn;for(const s of this._def.checks)s.kind==="int"?Xe.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:ne.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ne.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ne.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?Q5(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ne.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:ne.not_finite,message:s.message}),r.dirty()):Xe.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ee.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ee.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ee.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ee.toString(n))}setLimit(e,n,i,r){return new bo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ee.toString(r)}]})}_addCheck(e){return new bo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Xe.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}bo.create=t=>new bo({checks:[],typeName:Oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...$e(t)});class xo extends Be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==fe.bigint){const s=this._getOrReturnCtx(e);return pe(s,{code:ne.invalid_type,expected:fe.bigint,received:s.parsedType}),Me}let i;const r=new yn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ne.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ne.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),pe(i,{code:ne.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Xe.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ee.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ee.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ee.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ee.toString(n))}setLimit(e,n,i,r){return new xo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ee.toString(r)}]})}_addCheck(e){return new xo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}xo.create=t=>{var e;return new xo({checks:[],typeName:Oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...$e(t)})};class Ic extends Be{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==fe.boolean){const i=this._getOrReturnCtx(e);return pe(i,{code:ne.invalid_type,expected:fe.boolean,received:i.parsedType}),Me}return Nn(e.data)}}Ic.create=t=>new Ic({typeName:Oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...$e(t)});class ya extends Be{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==fe.date){const s=this._getOrReturnCtx(e);return pe(s,{code:ne.invalid_type,expected:fe.date,received:s.parsedType}),Me}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return pe(s,{code:ne.invalid_date}),Me}const i=new yn;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),pe(r,{code:ne.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),pe(r,{code:ne.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Xe.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ya({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ee.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ee.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ya.create=t=>new ya({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Oe.ZodDate,...$e(t)});class qf extends Be{_parse(e){if(this._getType(e)!==fe.symbol){const i=this._getOrReturnCtx(e);return pe(i,{code:ne.invalid_type,expected:fe.symbol,received:i.parsedType}),Me}return Nn(e.data)}}qf.create=t=>new qf({typeName:Oe.ZodSymbol,...$e(t)});class Bc extends Be{_parse(e){if(this._getType(e)!==fe.undefined){const i=this._getOrReturnCtx(e);return pe(i,{code:ne.invalid_type,expected:fe.undefined,received:i.parsedType}),Me}return Nn(e.data)}}Bc.create=t=>new Bc({typeName:Oe.ZodUndefined,...$e(t)});class zc extends Be{_parse(e){if(this._getType(e)!==fe.null){const i=this._getOrReturnCtx(e);return pe(i,{code:ne.invalid_type,expected:fe.null,received:i.parsedType}),Me}return Nn(e.data)}}zc.create=t=>new zc({typeName:Oe.ZodNull,...$e(t)});class Wl extends Be{constructor(){super(...arguments),this._any=!0}_parse(e){return Nn(e.data)}}Wl.create=t=>new Wl({typeName:Oe.ZodAny,...$e(t)});class sa extends Be{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Nn(e.data)}}sa.create=t=>new sa({typeName:Oe.ZodUnknown,...$e(t)});class ys extends Be{_parse(e){const n=this._getOrReturnCtx(e);return pe(n,{code:ne.invalid_type,expected:fe.never,received:n.parsedType}),Me}}ys.create=t=>new ys({typeName:Oe.ZodNever,...$e(t)});class Qf extends Be{_parse(e){if(this._getType(e)!==fe.undefined){const i=this._getOrReturnCtx(e);return pe(i,{code:ne.invalid_type,expected:fe.void,received:i.parsedType}),Me}return Nn(e.data)}}Qf.create=t=>new Qf({typeName:Oe.ZodVoid,...$e(t)});class nr extends Be{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==fe.array)return pe(n,{code:ne.invalid_type,expected:fe.array,received:n.parsedType}),Me;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(pe(n,{code:o?ne.too_big:ne.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(pe(n,{code:ne.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(pe(n,{code:ne.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new _r(n,o,n.path,a)))).then(o=>yn.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new _r(n,o,n.path,a)));return yn.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new nr({...this._def,minLength:{value:e,message:Ee.toString(n)}})}max(e,n){return new nr({...this._def,maxLength:{value:e,message:Ee.toString(n)}})}length(e,n){return new nr({...this._def,exactLength:{value:e,message:Ee.toString(n)}})}nonempty(e){return this.min(1,e)}}nr.create=(t,e)=>new nr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Oe.ZodArray,...$e(e)});function Ha(t){if(t instanceof yt){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=os.create(Ha(i))}return new yt({...t._def,shape:()=>e})}else return t instanceof nr?new nr({...t._def,type:Ha(t.element)}):t instanceof os?os.create(Ha(t.unwrap())):t instanceof wa?wa.create(Ha(t.unwrap())):t instanceof $r?$r.create(t.items.map(e=>Ha(e))):t}class yt extends Be{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Xe.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==fe.object){const u=this._getOrReturnCtx(e);return pe(u,{code:ne.invalid_type,expected:fe.object,received:u.parsedType}),Me}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ys&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new _r(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof ys){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")a.length>0&&(pe(r,{code:ne.unrecognized_keys,keys:a}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new _r(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key;u.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>yn.mergeObjectSync(i,u)):yn.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Ee.errToObj,new yt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&o!==void 0?o:i.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ee.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new yt({...this._def,unknownKeys:"strip"})}passthrough(){return new yt({...this._def,unknownKeys:"passthrough"})}extend(e){return new yt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new yt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Oe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new yt({...this._def,catchall:e})}pick(e){const n={};return Xe.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new yt({...this._def,shape:()=>n})}omit(e){const n={};return Xe.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new yt({...this._def,shape:()=>n})}deepPartial(){return Ha(this)}partial(e){const n={};return Xe.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new yt({...this._def,shape:()=>n})}required(e){const n={};return Xe.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof os;)s=s._def.innerType;n[i]=s}}),new yt({...this._def,shape:()=>n})}keyof(){return xO(Xe.objectKeys(this.shape))}}yt.create=(t,e)=>new yt({shape:()=>t,unknownKeys:"strip",catchall:ys.create(),typeName:Oe.ZodObject,...$e(e)});yt.strictCreate=(t,e)=>new yt({shape:()=>t,unknownKeys:"strict",catchall:ys.create(),typeName:Oe.ZodObject,...$e(e)});yt.lazycreate=(t,e)=>new yt({shape:t,unknownKeys:"strip",catchall:ys.create(),typeName:Oe.ZodObject,...$e(e)});class jc extends Be{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new tr(a.ctx.common.issues));return pe(n,{code:ne.invalid_union,unionErrors:o}),Me}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new tr(l));return pe(n,{code:ne.invalid_union,unionErrors:a}),Me}}get options(){return this._def.options}}jc.create=(t,e)=>new jc({options:t,typeName:Oe.ZodUnion,...$e(e)});const qh=t=>t instanceof Vc?qh(t.schema):t instanceof sr?qh(t.innerType()):t instanceof Hc?[t.value]:t instanceof So?t.options:t instanceof Wc?Object.keys(t.enum):t instanceof Gc?qh(t._def.innerType):t instanceof Bc?[void 0]:t instanceof zc?[null]:null;class um extends Be{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==fe.object)return pe(n,{code:ne.invalid_type,expected:fe.object,received:n.parsedType}),Me;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(pe(n,{code:ne.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const o=qh(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new um({typeName:Oe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,...$e(i)})}}function iv(t,e){const n=Fs(t),i=Fs(e);if(t===e)return{valid:!0,data:t};if(n===fe.object&&i===fe.object){const r=Xe.objectKeys(e),s=Xe.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=iv(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===fe.array&&i===fe.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=iv(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===fe.date&&i===fe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Fc extends Be{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(tv(s)||tv(o))return Me;const a=iv(s.value,o.value);return a.valid?((nv(s)||nv(o))&&n.dirty(),{status:n.value,value:a.data}):(pe(i,{code:ne.invalid_intersection_types}),Me)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Fc.create=(t,e,n)=>new Fc({left:t,right:e,typeName:Oe.ZodIntersection,...$e(n)});class $r extends Be{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==fe.array)return pe(i,{code:ne.invalid_type,expected:fe.array,received:i.parsedType}),Me;if(i.data.length<this._def.items.length)return pe(i,{code:ne.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Me;!this._def.rest&&i.data.length>this._def.items.length&&(pe(i,{code:ne.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new _r(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>yn.mergeArray(n,o)):yn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new $r({...this._def,rest:e})}}$r.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $r({items:t,typeName:Oe.ZodTuple,rest:null,...$e(e)})};class Uc extends Be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==fe.object)return pe(i,{code:ne.invalid_type,expected:fe.object,received:i.parsedType}),Me;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new _r(i,a,i.path,a)),value:o._parse(new _r(i,i.data[a],i.path,a))});return i.common.async?yn.mergeObjectAsync(n,r):yn.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof Be?new Uc({keyType:e,valueType:n,typeName:Oe.ZodRecord,...$e(i)}):new Uc({keyType:Zi.create(),valueType:e,typeName:Oe.ZodRecord,...$e(n)})}}class ep extends Be{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==fe.map)return pe(i,{code:ne.invalid_type,expected:fe.map,received:i.parsedType}),Me;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],u)=>({key:r._parse(new _r(i,a,i.path,[u,"key"])),value:s._parse(new _r(i,l,i.path,[u,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Me;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Me;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}ep.create=(t,e,n)=>new ep({valueType:e,keyType:t,typeName:Oe.ZodMap,...$e(n)});class va extends Be{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==fe.set)return pe(i,{code:ne.invalid_type,expected:fe.set,received:i.parsedType}),Me;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(pe(i,{code:ne.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(pe(i,{code:ne.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Me;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...i.data.values()].map((l,u)=>s._parse(new _r(i,l,i.path,u)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new va({...this._def,minSize:{value:e,message:Ee.toString(n)}})}max(e,n){return new va({...this._def,maxSize:{value:e,message:Ee.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}va.create=(t,e)=>new va({valueType:t,minSize:null,maxSize:null,typeName:Oe.ZodSet,...$e(e)});class bl extends Be{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==fe.function)return pe(n,{code:ne.invalid_type,expected:fe.function,received:n.parsedType}),Me;function i(a,l){return Zf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Xf(),Lc].filter(u=>!!u),issueData:{code:ne.invalid_arguments,argumentsError:l}})}function r(a,l){return Zf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Xf(),Lc].filter(u=>!!u),issueData:{code:ne.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof Gl?Nn(async(...a)=>{const l=new tr([]),u=await this._def.args.parseAsync(a,s).catch(h=>{throw l.addIssue(i(a,h)),l}),c=await o(...u);return await this._def.returns._def.type.parseAsync(c,s).catch(h=>{throw l.addIssue(r(c,h)),l})}):Nn((...a)=>{const l=this._def.args.safeParse(a,s);if(!l.success)throw new tr([i(a,l.error)]);const u=o(...l.data),c=this._def.returns.safeParse(u,s);if(!c.success)throw new tr([r(u,c.error)]);return c.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new bl({...this._def,args:$r.create(e).rest(sa.create())})}returns(e){return new bl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new bl({args:e||$r.create([]).rest(sa.create()),returns:n||sa.create(),typeName:Oe.ZodFunction,...$e(i)})}}class Vc extends Be{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Vc.create=(t,e)=>new Vc({getter:t,typeName:Oe.ZodLazy,...$e(e)});class Hc extends Be{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return pe(n,{received:n.data,code:ne.invalid_literal,expected:this._def.value}),Me}return{status:"valid",value:e.data}}get value(){return this._def.value}}Hc.create=(t,e)=>new Hc({value:t,typeName:Oe.ZodLiteral,...$e(e)});function xO(t,e){return new So({values:t,typeName:Oe.ZodEnum,...$e(e)})}class So extends Be{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return pe(n,{expected:Xe.joinValues(i),received:n.parsedType,code:ne.invalid_type}),Me}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),i=this._def.values;return pe(n,{received:n.data,code:ne.invalid_enum_value,options:i}),Me}return Nn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return So.create(e)}exclude(e){return So.create(this.options.filter(n=>!e.includes(n)))}}So.create=xO;class Wc extends Be{_parse(e){const n=Xe.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==fe.string&&i.parsedType!==fe.number){const r=Xe.objectValues(n);return pe(i,{expected:Xe.joinValues(r),received:i.parsedType,code:ne.invalid_type}),Me}if(n.indexOf(e.data)===-1){const r=Xe.objectValues(n);return pe(i,{received:i.data,code:ne.invalid_enum_value,options:r}),Me}return Nn(e.data)}get enum(){return this._def.values}}Wc.create=(t,e)=>new Wc({values:t,typeName:Oe.ZodNativeEnum,...$e(e)});class Gl extends Be{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==fe.promise&&n.common.async===!1)return pe(n,{code:ne.invalid_type,expected:fe.promise,received:n.parsedType}),Me;const i=n.parsedType===fe.promise?n.data:Promise.resolve(n.data);return Nn(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Gl.create=(t,e)=>new Gl({type:t,typeName:Oe.ZodPromise,...$e(e)});class sr extends Be{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null;if(r.type==="preprocess"){const o=r.transform(i.data);return i.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:i.path,parent:i})):this._def.schema._parseSync({data:o,path:i.path,parent:i})}const s={addIssue:o=>{pe(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Me:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Me:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Jf(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Jf(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Xe.assertNever(r)}}sr.create=(t,e,n)=>new sr({schema:t,typeName:Oe.ZodEffects,effect:e,...$e(n)});sr.createWithPreprocess=(t,e,n)=>new sr({schema:e,effect:{type:"preprocess",transform:t},typeName:Oe.ZodEffects,...$e(n)});class os extends Be{_parse(e){return this._getType(e)===fe.undefined?Nn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}os.create=(t,e)=>new os({innerType:t,typeName:Oe.ZodOptional,...$e(e)});class wa extends Be{_parse(e){return this._getType(e)===fe.null?Nn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wa.create=(t,e)=>new wa({innerType:t,typeName:Oe.ZodNullable,...$e(e)});class Gc extends Be{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===fe.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Gc.create=(t,e)=>new Gc({innerType:t,typeName:Oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$e(e)});class tp extends Be{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Yf(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new tr(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new tr(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}tp.create=(t,e)=>new tp({innerType:t,typeName:Oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$e(e)});class np extends Be{_parse(e){if(this._getType(e)!==fe.nan){const i=this._getOrReturnCtx(e);return pe(i,{code:ne.invalid_type,expected:fe.nan,received:i.parsedType}),Me}return{status:"valid",value:e.data}}}np.create=t=>new np({typeName:Oe.ZodNaN,...$e(t)});const e4=Symbol("zod_brand");class SO extends Be{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class yd extends Be{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Me:s.status==="dirty"?(n.dirty(),bO(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Me:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new yd({in:e,out:n,typeName:Oe.ZodPipeline})}}const kO=(t,e={},n)=>t?Wl.create().superRefine((i,r)=>{var s,o;if(!t(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;r.addIssue({code:"custom",...u,fatal:l})}}):Wl.create(),t4={object:yt.lazycreate};var Oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(Oe||(Oe={}));const n4=(t,e={message:`Input not instance of ${t.name}`})=>kO(n=>n instanceof t,e),EO=Zi.create,CO=bo.create,i4=np.create,r4=xo.create,AO=Ic.create,s4=ya.create,o4=qf.create,a4=Bc.create,l4=zc.create,u4=Wl.create,c4=sa.create,d4=ys.create,h4=Qf.create,f4=nr.create,p4=yt.create,m4=yt.strictCreate,g4=jc.create,y4=um.create,v4=Fc.create,w4=$r.create,b4=Uc.create,x4=ep.create,S4=va.create,k4=bl.create,E4=Vc.create,C4=Hc.create,A4=So.create,P4=Wc.create,O4=Gl.create,BS=sr.create,N4=os.create,T4=wa.create,R4=sr.createWithPreprocess,M4=yd.create,D4=()=>EO().optional(),_4=()=>CO().optional(),$4=()=>AO().optional(),L4={string:t=>Zi.create({...t,coerce:!0}),number:t=>bo.create({...t,coerce:!0}),boolean:t=>Ic.create({...t,coerce:!0}),bigint:t=>xo.create({...t,coerce:!0}),date:t=>ya.create({...t,coerce:!0})},I4=Me;var Lo=Object.freeze({__proto__:null,defaultErrorMap:Lc,setErrorMap:F5,getErrorMap:Xf,makeIssue:Zf,EMPTY_PATH:U5,addIssueToContext:pe,ParseStatus:yn,INVALID:Me,DIRTY:bO,OK:Nn,isAborted:tv,isDirty:nv,isValid:Jf,isAsync:Yf,get util(){return Xe},get objectUtil(){return ev},ZodParsedType:fe,getParsedType:Fs,ZodType:Be,ZodString:Zi,ZodNumber:bo,ZodBigInt:xo,ZodBoolean:Ic,ZodDate:ya,ZodSymbol:qf,ZodUndefined:Bc,ZodNull:zc,ZodAny:Wl,ZodUnknown:sa,ZodNever:ys,ZodVoid:Qf,ZodArray:nr,ZodObject:yt,ZodUnion:jc,ZodDiscriminatedUnion:um,ZodIntersection:Fc,ZodTuple:$r,ZodRecord:Uc,ZodMap:ep,ZodSet:va,ZodFunction:bl,ZodLazy:Vc,ZodLiteral:Hc,ZodEnum:So,ZodNativeEnum:Wc,ZodPromise:Gl,ZodEffects:sr,ZodTransformer:sr,ZodOptional:os,ZodNullable:wa,ZodDefault:Gc,ZodCatch:tp,ZodNaN:np,BRAND:e4,ZodBranded:SO,ZodPipeline:yd,custom:kO,Schema:Be,ZodSchema:Be,late:t4,get ZodFirstPartyTypeKind(){return Oe},coerce:L4,any:u4,array:f4,bigint:r4,boolean:AO,date:s4,discriminatedUnion:y4,effect:BS,enum:A4,function:k4,instanceof:n4,intersection:v4,lazy:E4,literal:C4,map:x4,nan:i4,nativeEnum:P4,never:d4,null:l4,nullable:T4,number:CO,object:p4,oboolean:$4,onumber:_4,optional:N4,ostring:D4,pipeline:M4,preprocess:R4,promise:O4,record:b4,set:S4,strictObject:m4,string:EO,symbol:o4,transformer:BS,tuple:w4,undefined:a4,union:g4,unknown:c4,void:h4,NEVER:I4,ZodIssueCode:ne,quotelessJson:j5,ZodError:tr});const ie=Tw();function B4(t){return S.jsx(s$,{store:ie,children:t.children})}const PO=["randomize","clean","unchanged"],OO=["pio-switches-and-leds","pio-printer","handshake"],rv=Lo.object({language:Lo.enum(B2).catch(j4),dataOnLoad:Lo.enum(PO).catch("randomize"),devices:Lo.enum(OO).catch("pio-switches-and-leds"),executionUnit:Lo.number().min(1).max(500).catch(150),clockSpeed:Lo.number().min(10).max(1e3).catch(30),printerSpeed:Lo.number().min(10).max(1e3).catch(1e3)}),z4=rv.parse({}),au=z5("vonsim-settings",z4,{getItem(t,e){try{const n=localStorage.getItem(t);return rv.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=rv.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{unstable_getOnInit:!0}),Lr=()=>ie.get(au);function j4(){const t=navigator.language.toLowerCase();for(const e of B2)if(t.startsWith(e))return e;return"en"}const F4=()=>w2(au),U4=ke(t=>t(au).language),NO=()=>On(U4);ke(t=>t(au).dataOnLoad);const V4=ke(t=>t(au).devices),H4=()=>On(V4);ke(t=>{const e=t(au);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const W4=Ae.from(Ae.MAX_ADDRESS).toString(),G4={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Kn.format(e)})`},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`},control:{action:{start:"Start",stop:"Stop"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input..."}},memory:{name:"Memory",cell:t=>`Cell ${Ae.format(t)}`,"start-address":"Start address","start-address-must-be-integer":"Start address must be an integer.","start-address-too-big":`Start address must be less or equal to ${W4}.`},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:{name:"F10",interrupt:"Interrupt"},keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",language:{label:"Language"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which preset of devices to use.","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer (PIO)",handshake:"Printer (Handshake)"},speeds:{label:"Speeds",executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"}},footer:{documentation:"Documentation","report-issue":"Report an issue",copyright:"III-LIDI, FI, UNLP"}},K4=Ae.from(Ae.MAX_ADDRESS).toString(),X4={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Kn.format(e)})`},update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},control:{action:{start:"Ejecutar",stop:"Detener"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",status:{fetching:"Leyendo instruccin...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla..."}},memory:{name:"Memoria",cell:t=>`Celda ${Ae.format(t)}`,"start-address":"Direccin de inicio","start-address-must-be-integer":"El valor de inicio debe ser un nmero entero.","start-address-too-big":`El valor de inicio debe ser menor o igual a ${K4}.`},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:{name:"F10",interrupt:"Interrumpir"},keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Teclas",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",language:{label:"Idioma"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu conjunto de dispositivos usar.","pio-switches-and-leds":"Teclas y luces","pio-printer":"Impresora (PIO)",handshake:"Impresora (Handshake)"},speeds:{label:"Velocidades",executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"}},footer:{documentation:"Documentacin","report-issue":"Reportar un error",copyright:"III-LIDI, FI, UNLP"}},cm=_w({en:G4,es:X4}),Tg=ke($.zero(16)),Rg=ke($.zero(16)),Mg=ke($.zero(16)),Dg=ke($.zero(16)),_g=ke($.zero(16)),$g=ke($.zero(16)),Z4=ke($.zero(8)),Lg=ke($.zero(16)),Ig=ke($.zero(16)),Bg=ke($.zero(16)),zg=ke($.zero(16)),jg=ke($.zero(16)),Fg=ke($.zero(16)),TO=ke($.zero(16)),ip=ke($.zero(8)),mi=t=>ke(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),gi=t=>ke(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),at={AX:Tg,AL:mi(Tg),AH:gi(Tg),BX:Rg,BL:mi(Rg),BH:gi(Rg),CX:Mg,CL:mi(Mg),CH:gi(Mg),DX:Dg,DL:mi(Dg),DH:gi(Dg),SP:_g,"SP.l":mi(_g),"SP.h":gi(_g),IP:$g,"IP.l":mi($g),"IP.h":gi($g),IR:Z4,ri:Lg,"ri.l":mi(Lg),"ri.h":gi(Lg),id:Ig,"id.l":mi(Ig),"id.h":gi(Ig),left:Bg,"left.l":mi(Bg),"left.h":gi(Bg),right:zg,"right.l":mi(zg),"right.h":gi(zg),result:jg,"result.l":mi(jg),"result.h":gi(jg),FLAGS:Fg,"FLAGS.l":mi(Fg),"FLAGS.h":gi(Fg),MAR:TO,MBR:ip},Us=ke({phase:"stopped"}),RO=ke("ADD");function J4(t){ie.set(at.AX,$.fromUnsigned(t.cpu.AX,16)),ie.set(at.BX,$.fromUnsigned(t.cpu.BX,16)),ie.set(at.CX,$.fromUnsigned(t.cpu.CX,16)),ie.set(at.DX,$.fromUnsigned(t.cpu.DX,16)),ie.set(at.SP,$.fromUnsigned(t.cpu.SP,16)),ie.set(at.IP,$.fromUnsigned(t.cpu.IP,16)),ie.set(at.IR,$.fromUnsigned(t.cpu.IR,8)),ie.set(at.ri,$.fromUnsigned(t.cpu.ri,16)),ie.set(at.id,$.fromUnsigned(t.cpu.id,16)),ie.set(at.left,$.fromUnsigned(t.cpu.left,16)),ie.set(at.right,$.fromUnsigned(t.cpu.right,16)),ie.set(at.result,$.fromUnsigned(t.cpu.result,16)),ie.set(at.FLAGS,$.fromUnsigned(t.cpu.FLAGS,16)),ie.set(at.MAR,$.fromUnsigned(t.cpu.MAR,16)),ie.set(at.MBR,$.fromUnsigned(t.cpu.MBR,8)),ie.set(Us,{phase:"stopped"})}var Y4=Object.defineProperty,q4=(t,e)=>{for(var n in e)Y4(t,n,{get:e[n],enumerable:!0})},or={};q4(or,{assign:()=>nB,colors:()=>uo,createStringInterpolator:()=>i1,skipAnimation:()=>zO,to:()=>BO,willAdvance:()=>r1});var Yw=wd(),_e=t=>vd(t,Yw),qw=wd();_e.write=t=>vd(t,qw);var dm=wd();_e.onStart=t=>vd(t,dm);var Qw=wd();_e.onFrame=t=>vd(t,Qw);var e1=wd();_e.onFinish=t=>vd(t,e1);var xl=[];_e.setTimeout=(t,e)=>{const n=_e.now()+e,i=()=>{const s=xl.findIndex(o=>o.cancel==i);~s&&xl.splice(s,1),qs-=~s?1:0},r={time:n,handler:t,cancel:i};return xl.splice(MO(n),0,r),qs+=1,DO(),r};var MO=t=>~(~xl.findIndex(e=>e.time>t)||~xl.length);_e.cancel=t=>{dm.delete(t),Qw.delete(t),e1.delete(t),Yw.delete(t),qw.delete(t)};_e.sync=t=>{sv=!0,_e.batchedUpdates(t),sv=!1};_e.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,_e.onStart(n)}return i.handler=t,i.cancel=()=>{dm.delete(n),e=null},i};var t1=typeof window<"u"?window.requestAnimationFrame:()=>{};_e.use=t=>t1=t;_e.now=typeof performance<"u"?()=>performance.now():Date.now;_e.batchedUpdates=t=>t();_e.catch=console.error;_e.frameLoop="always";_e.advance=()=>{_e.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):$O()};var Ys=-1,qs=0,sv=!1;function vd(t,e){sv?(e.delete(t),t(0)):(e.add(t),DO())}function DO(){Ys<0&&(Ys=0,_e.frameLoop!=="demand"&&t1(_O))}function Q4(){Ys=-1}function _O(){~Ys&&(t1(_O),_e.batchedUpdates($O))}function $O(){const t=Ys;Ys=_e.now();const e=MO(Ys);if(e&&(LO(xl.splice(0,e),n=>n.handler()),qs-=e),!qs){Q4();return}dm.flush(),Yw.flush(t?Math.min(64,Ys-t):16.667),Qw.flush(),qw.flush(),e1.flush()}function wd(){let t=new Set,e=t;return{add(n){qs+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return qs-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,qs-=e.size,LO(e,i=>i(n)&&t.add(i)),qs+=t.size,e=t)}}}function LO(t,e){t.forEach(n=>{try{e(n)}catch(i){_e.catch(i)}})}function eB(){}var tB=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),he={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Fr(t,e){if(he.arr(t)){if(!he.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var rn=(t,e)=>t.forEach(e);function ko(t,e,n){if(he.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Qs=t=>he.und(t)?[]:he.arr(t)?t:[t];function IO(t,e){if(t.size){const n=Array.from(t);t.clear(),rn(n,e)}}var sh=(t,...e)=>IO(t,n=>n(...e)),n1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),i1,BO,uo=null,zO=!1,r1=eB,nB=t=>{t.to&&(BO=t.to),t.now&&(_e.now=t.now),t.colors!==void 0&&(uo=t.colors),t.skipAnimation!=null&&(zO=t.skipAnimation),t.createStringInterpolator&&(i1=t.createStringInterpolator),t.requestAnimationFrame&&_e.use(t.requestAnimationFrame),t.batchedUpdates&&(_e.batchedUpdates=t.batchedUpdates),t.willAdvance&&(r1=t.willAdvance),t.frameLoop&&(_e.frameLoop=t.frameLoop)},oc=new Set,Oi=[],Ug=[],rp=0,hm={get idle(){return!oc.size&&!Oi.length},start(t){rp>t.priority?(oc.add(t),_e.onStart(iB)):(jO(t),_e(ov))},advance:ov,sort(t){if(rp)_e.onFrame(()=>hm.sort(t));else{const e=Oi.indexOf(t);~e&&(Oi.splice(e,1),FO(t))}},clear(){Oi=[],oc.clear()}};function iB(){oc.forEach(jO),oc.clear(),_e(ov)}function jO(t){Oi.includes(t)||FO(t)}function FO(t){Oi.splice(rB(Oi,e=>e.priority>t.priority),0,t)}function ov(t){const e=Ug;for(let n=0;n<Oi.length;n++){const i=Oi[n];rp=i.priority,i.idle||(r1(i),i.advance(t),i.idle||e.push(i))}return rp=0,Ug=Oi,Ug.length=0,Oi=e,Oi.length>0}function rB(t,e){const n=t.findIndex(e);return n<0?t.length:n}var sB=(t,e,n)=>Math.min(Math.max(n,t),e),oB={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ji="[-+]?\\d*\\.?\\d+",sp=Ji+"%";function fm(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var aB=new RegExp("rgb"+fm(Ji,Ji,Ji)),lB=new RegExp("rgba"+fm(Ji,Ji,Ji,Ji)),uB=new RegExp("hsl"+fm(Ji,sp,sp)),cB=new RegExp("hsla"+fm(Ji,sp,sp,Ji)),dB=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hB=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,fB=/^#([0-9a-fA-F]{6})$/,pB=/^#([0-9a-fA-F]{8})$/;function mB(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=fB.exec(t))?parseInt(e[1]+"ff",16)>>>0:uo&&uo[t]!==void 0?uo[t]:(e=aB.exec(t))?($a(e[1])<<24|$a(e[2])<<16|$a(e[3])<<8|255)>>>0:(e=lB.exec(t))?($a(e[1])<<24|$a(e[2])<<16|$a(e[3])<<8|FS(e[4]))>>>0:(e=dB.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=pB.exec(t))?parseInt(e[1],16)>>>0:(e=hB.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=uB.exec(t))?(zS(jS(e[1]),oh(e[2]),oh(e[3]))|255)>>>0:(e=cB.exec(t))?(zS(jS(e[1]),oh(e[2]),oh(e[3]))|FS(e[4]))>>>0:null}function Vg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function zS(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Vg(r,i,t+1/3),o=Vg(r,i,t),a=Vg(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function $a(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function jS(t){return(parseFloat(t)%360+360)%360/360}function FS(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function oh(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function US(t){let e=mB(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Kc=(t,e,n)=>{if(he.fun(t))return t;if(he.arr(t))return Kc({range:t,output:e,extrapolate:n});if(he.str(t.output[0]))return i1(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=yB(u,s);return gB(u,s[c],s[c+1],r[c],r[c+1],l,o,a,i.map)}};function gB(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function yB(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var vB=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return sB(0,1,r/t)},op=1.70158,ah=op*1.525,VS=op+1,HS=2*Math.PI/3,WS=2*Math.PI/4.5,lh=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,UO={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>VS*t*t*t-op*t*t,easeOutBack:t=>1+VS*Math.pow(t-1,3)+op*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((ah+1)*2*t-ah)/2:(Math.pow(2*t-2,2)*((ah+1)*(t*2-2)+ah)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*HS),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*HS)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*WS))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*WS)/2+1,easeInBounce:t=>1-lh(1-t),easeOutBounce:lh,easeInOutBounce:t=>t<.5?(1-lh(1-2*t))/2:(1+lh(2*t-1))/2,steps:vB},Xc=Symbol.for("FluidValue.get"),Kl=Symbol.for("FluidValue.observers"),Pi=t=>!!(t&&t[Xc]),In=t=>t&&t[Xc]?t[Xc]():t,GS=t=>t[Kl]||null;function wB(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Zc(t,e){const n=t[Kl];n&&n.forEach(i=>{wB(i,e)})}var VO=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");bB(this,t)}},bB=(t,e)=>HO(t,Xc,e);function pm(t,e){if(t[Xc]){let n=t[Kl];n||HO(t,Kl,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Jc(t,e){const n=t[Kl];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Kl]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var HO=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Qh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,xB=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,KS=new RegExp(`(${Qh.source})(%|[a-z]+)`,"i"),SB=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,mm=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,WO=t=>{const[e,n]=kB(t);if(!e||n1())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&mm.test(n))return WO(n);if(n)return n}return t},kB=t=>{const e=mm.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Hg,EB=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,GO=t=>{Hg||(Hg=uo?new RegExp(`(${Object.keys(uo).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>In(s).replace(mm,WO).replace(xB,US).replace(Hg,US)),n=e.map(s=>s.match(Qh).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Kc({...t,output:s}));return s=>{var l;const o=!KS.test(e[0])&&((l=e.find(u=>KS.test(u)))==null?void 0:l.replace(Qh,""));let a=0;return e[0].replace(Qh,()=>`${r[a++](s)}${o||""}`).replace(SB,EB)}},KO="react-spring: ",XO=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${KO}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},CB=XO(console.warn);function AB(){CB(`${KO}The "interpolate" function is deprecated in v9 (use "to" instead)`)}XO(console.warn);function gm(t){return he.str(t)&&(t[0]=="#"||/\d/.test(t)||!n1()&&mm.test(t)||t in(uo||{}))}var ZO=n1()?k.useEffect:k.useLayoutEffect,PB=()=>{const t=k.useRef(!1);return ZO(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function OB(){const t=k.useState()[1],e=PB();return()=>{e.current&&t(Math.random())}}function NB(t,e){const[n]=k.useState(()=>({inputs:e,result:t()})),i=k.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&TB(e,s.inputs)||(s={inputs:e,result:t()}):s=n,k.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function TB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var RB=t=>k.useEffect(t,MB),MB=[],Yc=Symbol.for("Animated:node"),DB=t=>!!t&&t[Yc]===t,yr=t=>t&&t[Yc],s1=(t,e)=>tB(t,Yc,e),ym=t=>t&&t[Yc]&&t[Yc].getPayload(),JO=class{constructor(){s1(this,this)}getPayload(){return this.payload||[]}},bd=class extends JO{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,he.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new bd(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return he.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,he.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},qc=class extends bd{constructor(t){super(0),this._string=null,this._toString=Kc({output:[t,t]})}static create(t){return new qc(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(he.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Kc({output:[this.getValue(),t]})),this._value=0,super.reset()}},ap={dependencies:null},vm=class extends JO{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return ko(this.source,(n,i)=>{DB(n)?e[i]=n.getValue(t):Pi(n)?e[i]=In(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&rn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return ko(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){ap.dependencies&&Pi(t)&&ap.dependencies.add(t);const e=ym(t);e&&rn(e,n=>this.add(n))}},YO=class extends vm{constructor(t){super(t)}static create(t){return new YO(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(_B)),!0)}};function _B(t){return(gm(t)?qc:bd).create(t)}function av(t){const e=yr(t);return e?e.constructor:he.arr(t)?YO:gm(t)?qc:bd}var XS=(t,e)=>{const n=!he.fun(t)||t.prototype&&t.prototype.isReactComponent;return k.forwardRef((i,r)=>{const s=k.useRef(null),o=n&&k.useCallback(p=>{s.current=IB(r,p)},[r]),[a,l]=LB(i,e),u=OB(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new $B(c,l),h=k.useRef();ZO(()=>(h.current=d,rn(l,p=>pm(p,d)),()=>{h.current&&(rn(h.current.deps,p=>Jc(p,h.current)),_e.cancel(h.current.update))})),k.useEffect(c,[]),RB(()=>()=>{const p=h.current;rn(p.deps,y=>Jc(y,p))});const f=e.getComponentProps(a.getValue());return k.createElement(t,{...f,ref:o})})},$B=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&_e.write(this.update)}};function LB(t,e){const n=new Set;return ap.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new vm(t),ap.dependencies=null,[t,n]}function IB(t,e){return t&&(he.fun(t)?t(e):t.current=e),e}var ZS=Symbol.for("AnimatedComponent"),BB=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new vm(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=JS(o)||"Anonymous";return he.str(o)?o=s[o]||(s[o]=XS(o,r)):o=o[ZS]||(o[ZS]=XS(o,r)),o.displayName=`Animated(${a})`,o};return ko(t,(o,a)=>{he.arr(t)&&(a=JS(o)),s[a]=s(o)}),{animated:s}},JS=t=>he.str(t)?t:t&&he.str(t.displayName)?t.displayName:he.fun(t)&&t.name||null;function Wo(t,...e){return he.fun(t)?t(...e):t}var ac=(t,e)=>t===!0||!!(e&&t&&(he.fun(t)?t(e):Qs(t).includes(e))),qO=(t,e)=>he.obj(t)?e&&t[e]:t,zB=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,jB=t=>t,QO=(t,e=jB)=>{let n=FB;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);he.und(s)||(i[r]=s)}return i},FB=["config","onProps","onStart","onChange","onPause","onResume","onRest"],UB={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function VB(t){const e={};let n=0;if(ko(t,(i,r)=>{UB[r]||(e[r]=i,n++)}),n)return e}function eN(t){const e=VB(t);if(e){const n={to:e};return ko(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Qc(t){return t=In(t),he.arr(t)?t.map(Qc):gm(t)?or.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function lv(t){return he.fun(t)||he.arr(t)&&he.obj(t[0])}var HB={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},uv={...HB.default,mass:1,damping:1,easing:UO.linear,clamp:!1},WB=class{constructor(){this.velocity=0,Object.assign(this,uv)}};function GB(t,e,n){n&&(n={...n},YS(n,e),e={...n,...e}),YS(t,e),Object.assign(t,e);for(const o in uv)t[o]==null&&(t[o]=uv[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return he.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function YS(t,e){if(!he.und(e.decay))t.duration=void 0;else{const n=!he.und(e.tension)||!he.und(e.friction);(n||!he.und(e.frequency)||!he.und(e.damping)||!he.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var qS=[],KB=class{constructor(){this.changed=!1,this.values=qS,this.toValues=null,this.fromValues=qS,this.config=new WB,this.immediate=!1}};function XB(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,c=ac(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{he.und(n.pause)||(r.paused=ac(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||ac(p,e)),l=Wo(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),l=u.time-_e.now()}function h(){l>0&&!or.skipAnimation?(r.delayed=!0,u=_e.setTimeout(f,l),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var ZB=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?lc(t.get()):e.every(n=>n.noop)?tN(t.get()):Ki(t.get(),e.every(n=>n.finished)),tN=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ki=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),lc=t=>({value:t,cancelled:!0,finished:!1});function JB(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=QO(e,(w,m)=>m==="onRest"?void 0:w);let c,d;const h=new Promise((w,m)=>(c=w,d=m)),f=w=>{const m=r<=(n.cancelId||0)&&lc(i)||r!==n.asyncId&&Ki(i,!1);if(m)throw w.result=m,d(w),w},p=(w,m)=>{const g=new QS,v=new ek;return(async()=>{if(or.skipAnimation)throw cv(n),v.result=Ki(i,!1),d(v),v;f(g);const x=he.obj(w)?{...w}:{...m,to:w};x.parentId=r,ko(u,(O,N)=>{he.und(x[N])&&(x[N]=O)});const E=await i.start(x);return f(g),n.paused&&await new Promise(O=>{n.resumeQueue.add(O)}),E})()};let y;if(or.skipAnimation)return cv(n),Ki(i,!1);try{let w;he.arr(t)?w=(async m=>{for(const g of m)await p(g)})(t):w=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([w.then(c),h]),y=Ki(i.get(),!0,!1)}catch(w){if(w instanceof QS)y=w.result;else if(w instanceof ek)y=w.result;else throw w}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return he.fun(o)&&_e.batchedUpdates(()=>{o(y,i,i.item)}),y})()}function cv(t,e){IO(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var QS=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},ek=class extends Error{constructor(){super("SkipAnimationSignal")}},dv=t=>t instanceof o1,YB=1,o1=class extends VO{constructor(){super(...arguments),this.id=YB++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=yr(this);return t&&t.getValue()}to(...t){return or.to(this,t)}interpolate(...t){return AB(),or.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Zc(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||hm.sort(this),Zc(this,{type:"priority",parent:this,priority:t})}},ba=Symbol.for("SpringPhase"),nN=1,hv=2,fv=4,Wg=t=>(t[ba]&nN)>0,Os=t=>(t[ba]&hv)>0,Cu=t=>(t[ba]&fv)>0,tk=(t,e)=>e?t[ba]|=hv|nN:t[ba]&=~hv,nk=(t,e)=>e?t[ba]|=fv:t[ba]&=~fv,dt=class extends o1{constructor(t,e){if(super(),this.animation=new KB,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!he.und(t)||!he.und(e)){const n=he.obj(t)?{...t}:{...e,from:t};he.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Os(this)||this._state.asyncTo)||Cu(this)}get goal(){return In(this.animation.to)}get velocity(){const t=yr(this);return t instanceof bd?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Wg(this)}get isAnimating(){return Os(this)}get isPaused(){return Cu(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=ym(i.to);!o&&Pi(i.to)&&(r=Qs(In(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==qc?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const y=i.fromValues[c],w=u.v0!=null?u.v0:u.v0=he.arr(s.velocity)?s.velocity[c]:s.velocity;let m;const g=s.precision||(y==d?.005:Math.min(1,Math.abs(d-y)*.001));if(he.und(s.duration))if(s.decay){const v=s.decay===!0?.998:s.decay,x=Math.exp(-(1-v)*p);f=y+w/(1-v)*(1-x),h=Math.abs(u.lastPosition-f)<=g,m=w*x}else{m=u.lastVelocity==null?w:u.lastVelocity;const v=s.restVelocity||g/10,x=s.clamp?0:s.bounce,E=!he.und(x),O=y==d?u.v0>0:y<d;let N,P=!1;const R=1,_=Math.ceil(t/R);for(let M=0;M<_&&(N=Math.abs(m)>v,!(!N&&(h=Math.abs(d-f)<=g,h)));++M){E&&(P=f==d||f>d==O,P&&(m=-m*x,f=d));const H=-s.tension*1e-6*(f-d),F=-s.friction*.001*m,j=(H+F)/s.mass;m=m+j*R,f=f+m*R}}else{let v=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),v=(s.progress||0)+p/this._memoizedDuration,v=v>1?1:v<0?0:v,u.durationProgress=v),f=y+s.easing(v)*(d-y),m=(f-u.lastPosition)/t,h=v==1}u.lastVelocity=m,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=yr(this),l=a.getValue();if(e){const u=In(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return _e.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Os(this)){const{to:t,config:e}=this.animation;_e.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return he.und(t)?(n=this.queue||[],this.queue=[]):n=[he.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>ZB(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),cv(this._state,t&&this._lastCallId),_e.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=he.obj(n)?n[e]:n,(n==null||lv(n))&&(n=void 0),i=he.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Wg(this)||(t.reverse&&([n,i]=[i,n]),i=In(i),he.und(i)?yr(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,QO(t,(o,a)=>/^on/.test(a)?qO(o,n):o)),rk(this,t,"onProps"),Pu(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return XB(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Cu(this)||(nk(this,!0),sh(s.pauseQueue),Pu(this,"onPause",Ki(this,Au(this,this.animation.to)),this))},resume:()=>{Cu(this)&&(nk(this,!1),Os(this)&&this._resume(),sh(s.resumeQueue),Pu(this,"onResume",Ki(this,Au(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=qB(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(lc(this));const i=!he.und(t.to),r=!he.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(lc(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;r&&!i&&(!e.default||he.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!Fr(d,u);h&&(a.from=d),d=In(d);const f=!Fr(c,l);f&&this._focus(c);const p=lv(e.to),{config:y}=a,{decay:w,velocity:m}=y;(i||r)&&(y.velocity=0),e.config&&!p&&GB(y,Wo(e.config,s),e.config!==o.config?Wo(o.config,s):void 0);let g=yr(this);if(!g||he.und(c))return n(Ki(this,!0));const v=he.und(e.reset)?r&&!e.default:!he.und(d)&&ac(e.reset,s),x=v?d:this.get(),E=Qc(c),O=he.num(E)||he.arr(E)||gm(E),N=!p&&(!O||ac(o.immediate||e.immediate,s));if(f){const M=av(c);if(M!==g.constructor)if(N)g=this._set(E);else throw Error(`Cannot animate between ${g.constructor.name} and ${M.name}, as the "to" prop suggests`)}const P=g.constructor;let R=Pi(c),_=!1;if(!R){const M=v||!Wg(this)&&h;(f||M)&&(_=Fr(Qc(x),E),R=!_),(!Fr(a.immediate,N)&&!N||!Fr(y.decay,w)||!Fr(y.velocity,m))&&(R=!0)}if(_&&Os(this)&&(a.changed&&!v?R=!0:R||this._stop(l)),!p&&((R||Pi(l))&&(a.values=g.getPayload(),a.toValues=Pi(c)?null:P==qc?[1]:Qs(E)),a.immediate!=N&&(a.immediate=N,!N&&!v&&this._set(l)),R)){const{onRest:M}=a;rn(e8,F=>rk(this,e,F));const H=Ki(this,Au(this,l));sh(this._pendingCalls,H),this._pendingCalls.add(n),a.changed&&_e.batchedUpdates(()=>{var F;a.changed=!v,M==null||M(H,this),v?Wo(o.onRest,H):(F=a.onStart)==null||F.call(a,H,this)})}v&&this._set(x),p?n(JB(e.to,e,this._state,this)):R?this._start():Os(this)&&!f?this._pendingCalls.add(n):n(tN(x))}_focus(t){const e=this.animation;t!==e.to&&(GS(this)&&this._detach(),e.to=t,GS(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Pi(e)&&(pm(e,this),dv(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Pi(t)&&Jc(t,this)}_set(t,e=!0){const n=In(t);if(!he.und(n)){const i=yr(this);if(!i||!Fr(n,i.getValue())){const r=av(n);!i||i.constructor!=r?s1(this,r.create(n)):i.setValue(n),i&&_e.batchedUpdates(()=>{this._onChange(n,e)})}}return yr(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Pu(this,"onStart",Ki(this,Au(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Wo(this.animation.onChange,t,this)),Wo(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;yr(this).reset(In(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Os(this)||(tk(this,!0),Cu(this)||this._resume())}_resume(){or.skipAnimation?this.finish():hm.start(this)}_stop(t,e){if(Os(this)){tk(this,!1);const n=this.animation;rn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Zc(this,{type:"idle",parent:this});const i=e?lc(this.get()):Ki(this.get(),Au(this,t??n.to));sh(this._pendingCalls,i),n.changed&&(n.changed=!1,Pu(this,"onRest",i,this))}}};function Au(t,e){const n=Qc(e),i=Qc(t.get());return Fr(i,n)}function qB(t,e=t.loop,n=t.to){const i=Wo(e);if(i){const r=i!==!0&&eN(i),s=(r||t).reverse,o=!r||r.reset;return QB({...t,loop:e,default:!1,pause:void 0,to:!s||lv(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function QB(t){const{to:e,from:n}=t=eN(t),i=new Set;return he.obj(e)&&ik(e,i),he.obj(n)&&ik(n,i),t.keys=i.size?Array.from(i):null,t}function ik(t,e){ko(t,(n,i)=>n!=null&&e.add(i))}var e8=["onStart","onRest","onChange","onPause","onResume"];function rk(t,e,n){t.animation[n]=e[n]!==zB(e,n)?qO(e[n],t.key):void 0}function Pu(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var a1=({children:t,...e})=>{const n=k.useContext(lp),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=NB(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=lp;return k.createElement(s,{value:e},t)},lp=t8(a1,{});a1.Provider=lp.Provider;a1.Consumer=lp.Consumer;function t8(t,e){return Object.assign(t,k.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var n8=class extends o1{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Kc(...e);const n=this._get(),i=av(n);s1(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Fr(e,n)||(yr(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&sk(this._active)&&Gg(this)}_get(){const t=he.arr(this.source)?this.source.map(In):Qs(In(this.source));return this.calc(...t)}_start(){this.idle&&!sk(this._active)&&(this.idle=!1,rn(ym(this),t=>{t.done=!1}),or.skipAnimation?(_e.batchedUpdates(()=>this.advance()),Gg(this)):hm.start(this))}_attach(){let t=1;rn(Qs(this.source),e=>{Pi(e)&&pm(e,this),dv(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){rn(Qs(this.source),t=>{Pi(t)&&Jc(t,this)}),this._active.clear(),Gg(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Qs(this.source).reduce((e,n)=>Math.max(e,(dv(n)?n.priority:0)+1),0))}};function i8(t){return t.idle!==!1}function sk(t){return!t.size||Array.from(t).every(i8)}function Gg(t){t.idle||(t.idle=!0,rn(ym(t),e=>{e.done=!0}),Zc(t,{type:"idle",parent:t}))}or.assign({createStringInterpolator:GO,to:(t,e)=>new n8(t,e)});var iN=/^--/;function r8(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!iN.test(t)&&!(uc.hasOwnProperty(t)&&uc[t])?e+"px":(""+e).trim()}var ok={};function s8(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,u=Object.values(l),c=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:ok[d]||(ok[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in i)if(i.hasOwnProperty(d)){const h=r8(d,i[d]);iN.test(d)?t.style.setProperty(d,h):t.style[d]=h}c.forEach((d,h)=>{t.setAttribute(d,u[h])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var uc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o8=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),a8=["Webkit","Ms","Moz","O"];uc=Object.keys(uc).reduce((t,e)=>(a8.forEach(n=>t[o8(n,e)]=t[e]),t),uc);var l8=/^(matrix|translate|scale|rotate|skew)/,u8=/^(translate)/,c8=/^(rotate|skew)/,Kg=(t,e)=>he.num(t)&&t!==0?t+e:t,ef=(t,e)=>he.arr(t)?t.every(n=>ef(n,e)):he.num(t)?t===e:parseFloat(t)===e,d8=class extends vm{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Kg(a,"px")).join(",")})`,ef(o,0)])),ko(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(l8.test(a)){if(delete i[a],he.und(o))return;const l=u8.test(a)?"px":c8.test(a)?"deg":"";r.push(Qs(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${Kg(h,l)})`,ef(h,0)]:u=>[`${a}(${u.map(c=>Kg(c,l)).join(",")})`,ef(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new h8(r,s)),super(i)}},h8=class extends VO{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return rn(this.inputs,(n,i)=>{const r=In(n[0]),[s,o]=this.transforms[i](he.arr(r)?r:n.map(In));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&rn(this.inputs,e=>rn(e,n=>Pi(n)&&pm(n,this)))}observerRemoved(t){t==0&&rn(this.inputs,e=>rn(e,n=>Pi(n)&&Jc(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Zc(this,t)}},f8=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];or.assign({batchedUpdates:Ca.unstable_batchedUpdates,createStringInterpolator:GO,colors:oB});var p8=BB(f8,{applyAnimatedValues:s8,createAnimatedStyle:t=>new d8(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),$t=p8.animated;const Pt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"}},Ve=(t=Pt.stone[800])=>({backgroundColor:new dt(t),opacity:new dt(1)}),Wt=()=>({strokeDashoffset:new dt(1),opacity:new dt(1)}),l1={bus:{address:{stroke:new dt(Pt.stone[700])},data:{stroke:new dt(Pt.stone[700])},rd:{stroke:new dt(Pt.stone[700])},wr:{stroke:new dt(Pt.stone[700])},iom:Wt(),mem:{stroke:new dt(Pt.red[500])},handshake:Wt(),pic:Wt(),pio:Wt(),timer:Wt(),intr:Wt(),inta:Wt(),int0:Wt(),int1:Wt(),int2:Wt(),"switches->pio":Wt(),"pio->leds":Wt(),printer:{data:Wt(),strobe:Wt(),busy:Wt()}},clock:{angle:new dt(0)},cpu:{internalBus:{address:{strokeDashoffset:new dt(1),opacity:new dt(1),path:new dt("")},data:{strokeDashoffset:new dt(1),opacity:new dt(1),path:new dt("")}},alu:{operands:Wt(),results:Wt(),cog:{rot:new dt(0)},operation:{backgroundColor:new dt(Pt.stone[800])}},decoder:{path:Wt(),progress:{progress:new dt(0),opacity:new dt(1)}},AX:Ve(),BX:Ve(),CX:Ve(),DX:Ve(),SP:Ve(),IP:Ve(),IR:Ve(),ri:Ve(),id:Ve(),left:Ve(),right:Ve(),result:Ve(),FLAGS:Ve(),MAR:Ve(),MBR:Ve()},handshake:{DATA:Ve(),STATE:Ve()},pic:{IMR:Ve(),IRR:Ve(),ISR:Ve(),INT0:Ve(),INT1:Ve(),INT2:Ve(),INT3:Ve(),INT4:Ve(),INT5:Ve(),INT6:Ve(),INT7:Ve()},pio:{PA:Ve(),PB:Ve(),CA:Ve(),CB:Ve()},printer:{printing:{progress:new dt(0),opacity:new dt(1)}},timer:{CONT:Ve(),COMP:Ve()}};function it(t){return I2(l1,t)}function rN(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof dt?e[n]=i.get():e[n]=rN(i)}return e}const m8=rN(l1);function sN(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof dt?i.set(e[n]):sN(t[n],e[n])}}const g8=()=>sN(l1,m8),up=new Set;async function Je(t,e){if(ie.get(ir).type!=="running")return null;Array.isArray(t)||(t=[t]);const n={duration:Lr().executionUnit*e.duration,easing:UO[e.easing]};return await Promise.all(t.map(async({key:i,from:r,to:s})=>{if(s===void 0&&r===void 0)return null;const o=it(i);if(s===void 0)return o.set(r);{up.add(i);const a=await it(i).start({from:r,to:s,config:n});return up.delete(i),a}}))}const y8=()=>up.forEach(t=>it(t).resume());function v8(){up.forEach(t=>it(t).stop(!0)),setTimeout(()=>g8(),10)}async function ki(t,e=Pt.mantis[400]){return await Je({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function Ei(t){return await Je({key:`${t}.backgroundColor`,to:Pt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function Xl(t){await Je({key:"bus.data.stroke",to:Pt.mantis[400]},{duration:5,easing:"easeOutSine"}),await ki("cpu.MBR"),ie.set(ip,t),await Ei("cpu.MBR")}async function _i(t,e){return await Je([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function Fn(t){return await Je({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function w8(t){switch(t.type){case"bus:io.selected":{await Promise.all([Je({key:"bus.mem.stroke",to:Pt.stone[700]},{duration:1,easing:"easeInSine"}),_i(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Eo(t.error);return}case"bus:reset":{await Promise.all([Je([{key:"bus.address.stroke",to:Pt.stone[700]},{key:"bus.data.stroke",to:Pt.stone[700]},{key:"bus.rd.stroke",to:Pt.stone[700]},{key:"bus.wr.stroke",to:Pt.stone[700]}],{duration:1,easing:"easeInSine"}),Je({key:"bus.mem.stroke",to:Pt.red[500]},{duration:1,easing:"easeOutSine"}),Fn("bus.iom"),Fn("bus.pic"),Fn("bus.timer"),Fn("bus.pio")]);return}default:return t}}async function b8(t){switch(t.type){case"clock:tick":return;default:return t.type}}function x8(t){switch(t){case"IP":return"M 551 309 H 575 V 349 H 598";case"SP":return"M 551 349 H 598";case"ri":return"M 544 388 H 575 V 349 H 598";default:throw new Error(`Invalid register ${t}`)}}function S8(){const{path:t,...e}=it("cpu.internalBus.address");return S.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[S.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598"].join(" ")}),S.jsx($t.path,{d:t,className:"fill-none stroke-blue-500 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var u1={exports:{}},Sl=typeof Reflect=="object"?Reflect:null,ak=Sl&&typeof Sl.apply=="function"?Sl.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},tf;Sl&&typeof Sl.ownKeys=="function"?tf=Sl.ownKeys:Object.getOwnPropertySymbols?tf=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:tf=function(e){return Object.getOwnPropertyNames(e)};function k8(t){console&&console.warn&&console.warn(t)}var oN=Number.isNaN||function(e){return e!==e};function qe(){qe.init.call(this)}u1.exports=qe;u1.exports.once=P8;qe.EventEmitter=qe;qe.prototype._events=void 0;qe.prototype._eventsCount=0;qe.prototype._maxListeners=void 0;var lk=10;function wm(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(qe,"defaultMaxListeners",{enumerable:!0,get:function(){return lk},set:function(t){if(typeof t!="number"||t<0||oN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");lk=t}});qe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};qe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||oN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function aN(t){return t._maxListeners===void 0?qe.defaultMaxListeners:t._maxListeners}qe.prototype.getMaxListeners=function(){return aN(this)};qe.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")ak(l,this,n);else for(var u=l.length,c=hN(l,u),i=0;i<u;++i)ak(c[i],this,n);return!0};function lN(t,e,n,i){var r,s,o;if(wm(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=aN(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,k8(a)}return t}qe.prototype.addListener=function(e,n){return lN(this,e,n,!1)};qe.prototype.on=qe.prototype.addListener;qe.prototype.prependListener=function(e,n){return lN(this,e,n,!0)};function E8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function uN(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=E8.bind(i);return r.listener=n,i.wrapFn=r,r}qe.prototype.once=function(e,n){return wm(n),this.on(e,uN(this,e,n)),this};qe.prototype.prependOnceListener=function(e,n){return wm(n),this.prependListener(e,uN(this,e,n)),this};qe.prototype.removeListener=function(e,n){var i,r,s,o,a;if(wm(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():C8(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};qe.prototype.off=qe.prototype.removeListener;qe.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function cN(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?A8(r):hN(r,r.length)}qe.prototype.listeners=function(e){return cN(this,e,!0)};qe.prototype.rawListeners=function(e){return cN(this,e,!1)};qe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):dN.call(t,e)};qe.prototype.listenerCount=dN;function dN(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}qe.prototype.eventNames=function(){return this._eventsCount>0?tf(this._events):[]};function hN(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function C8(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function A8(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function P8(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}fN(t,e,s,{once:!0}),e!=="error"&&O8(t,r,{once:!0})})}function O8(t,e,n){typeof t.on=="function"&&fN(t,"error",e,n)}function fN(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var N8=u1.exports;function Ir(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Ir.prototype[Symbol.iterator]=function(){return this});Ir.of=function(){var t=arguments,e=t.length,n=0;return new Ir(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Ir.empty=function(){var t=new Ir(function(){return{done:!0}});return t};Ir.fromSequence=function(t){var e=0,n=t.length;return new Ir(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Ir.is=function(t){return t instanceof Ir?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var bm=Ir;const Bi=iu(bm);var xm={};xm.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";xm.SYMBOL_SUPPORT=typeof Symbol<"u";var T8=bm,pN=xm,R8=pN.ARRAY_BUFFER_SUPPORT,M8=pN.SYMBOL_SUPPORT;function D8(t){return typeof t=="string"||Array.isArray(t)||R8&&ArrayBuffer.isView(t)?T8.fromSequence(t):typeof t!="object"||t===null?null:M8&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var mN=function(e){var n=D8(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},_8=mN,$8=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=_8(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const gN=iu($8);var L8=bm,I8=mN,B8=function(){var e=arguments,n=null,i=-1;return new L8(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=I8(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const as=iu(B8);function z8(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let Ft=z8;typeof Object.assign=="function"&&(Ft=Object.assign);function $i(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function sn(t){return typeof t=="object"&&t!==null}function yN(t){let e;for(e in t)return!1;return!0}function yi(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function ji(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function uk(t){return!(!sn(t)||t.attributes&&!Array.isArray(t.attributes))}function j8(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class c1 extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ce extends c1{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ce.prototype.constructor)}}class re extends c1{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,re.prototype.constructor)}}class Pe extends c1{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Pe.prototype.constructor)}}function vN(t,e){this.key=t,this.attributes=e,this.clear()}vN.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function wN(t,e){this.key=t,this.attributes=e,this.clear()}wN.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function bN(t,e){this.key=t,this.attributes=e,this.clear()}bN.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function lu(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}lu.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};lu.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};lu.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};lu.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const xN=0,SN=1,F8=2,kN=3;function Es(t,e,n,i,r,s,o){let a,l,u,c;if(i=""+i,n===xN){if(a=t._nodes.get(i),!a)throw new re(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===kN){if(r=""+r,l=t._edges.get(r),!l)throw new re(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new re(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(i),!l)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===SN?a=l.source:a=l.target,u=r,c=s}return[a,u,c]}function U8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Es(this,e,n,i,r,s);return o.attributes[a]}}function V8(t,e,n){t.prototype[e]=function(i,r){const[s]=Es(this,e,n,i,r);return s.attributes}}function H8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Es(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function W8(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=Es(this,e,n,i,r,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function G8(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=Es(this,e,n,i,r,s,o);if(typeof u!="function")throw new ce(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function K8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Es(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function X8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Es(this,e,n,i,r,s);if(!sn(a))throw new ce(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Z8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Es(this,e,n,i,r,s);if(!sn(a))throw new ce(`Graph.${e}: provided attributes are not a plain object.`);return Ft(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function J8(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Es(this,e,n,i,r,s);if(typeof a!="function")throw new ce(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Y8=[{name:t=>`get${t}Attribute`,attacher:U8},{name:t=>`get${t}Attributes`,attacher:V8},{name:t=>`has${t}Attribute`,attacher:H8},{name:t=>`set${t}Attribute`,attacher:W8},{name:t=>`update${t}Attribute`,attacher:G8},{name:t=>`remove${t}Attribute`,attacher:K8},{name:t=>`replace${t}Attributes`,attacher:X8},{name:t=>`merge${t}Attributes`,attacher:Z8},{name:t=>`update${t}Attributes`,attacher:J8}];function q8(t){Y8.forEach(function({name:e,attacher:n}){n(t,e("Node"),xN),n(t,e("Source"),SN),n(t,e("Target"),F8),n(t,e("Opposite"),kN)})}function Q8(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$i(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function e6(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=$i(this,s,o,n),!r)throw new re(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function t6(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$i(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function n6(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=$i(this,a,l,n),!o)throw new re(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function i6(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=$i(this,a,l,n),!o)throw new re(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new ce(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function r6(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$i(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function s6(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$i(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!sn(r))throw new ce(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function o6(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$i(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!sn(r))throw new ce(`Graph.${e}: provided attributes are not a plain object.`);return Ft(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function a6(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$i(this,o,a,n),!s)throw new re(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new re(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new ce(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const l6=[{name:t=>`get${t}Attribute`,attacher:Q8},{name:t=>`get${t}Attributes`,attacher:e6},{name:t=>`has${t}Attribute`,attacher:t6},{name:t=>`set${t}Attribute`,attacher:n6},{name:t=>`update${t}Attribute`,attacher:i6},{name:t=>`remove${t}Attribute`,attacher:r6},{name:t=>`replace${t}Attributes`,attacher:s6},{name:t=>`merge${t}Attributes`,attacher:o6},{name:t=>`update${t}Attributes`,attacher:a6}];function u6(t){l6.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const c6=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function d6(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function h6(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Xg(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Bi(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function f6(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function p6(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function Zg(t,e){let n=t[e];return n.next!==void 0?new Bi(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Bi.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function m6(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):gN(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function EN(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=i(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function g6(t,e){if(t.size===0)return Bi.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Bi(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function d1(t,e,n,i,r,s){const o=e?h6:d6;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function y6(t,e,n,i){const r=[];return d1(!1,t,e,n,i,function(s){r.push(s)}),r}function v6(t,e,n){let i=Bi.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=as(i,Xg(n.in))),e!=="in"&&typeof n.out<"u"&&(i=as(i,Xg(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=as(i,Xg(n.undirected))),i}function h1(t,e,n,i,r,s,o){const a=n?p6:f6;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function w6(t,e,n,i,r){const s=[];return h1(!1,t,e,n,i,r,function(o){s.push(o)}),s}function b6(t,e,n,i){let r=Bi.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=as(r,Zg(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=as(r,Zg(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=as(r,Zg(n.undirected,i))),r}function x6(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return m6(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new re(`Graph.${n}: could not find the "${s}" node in the graph.`);return y6(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new re(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new re(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return w6(i,this.multi,r,a,o)}throw new ce(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function S6(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,EN(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new re(`Graph.${s}: could not find the "${u}" node in the graph.`);return d1(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new re(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new re(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return h1(!1,i,this.multi,r,h,c,d)}throw new ce(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,y,w,m,g,v,x)=>{d[f++]=c(p,y,w,m,g,v,x)})}else d=[],u.push((h,f,p,y,w,m,g)=>{d.push(c(h,f,p,y,w,m,g))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,y,w,m,g)=>{c(h,f,p,y,w,m,g)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new ce(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new ce(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,y,w,m,g,v)=>{h=c(h,f,p,y,w,m,g,v)}),this[s].apply(this,u),h}}function k6(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=l,EN(!0,this,i,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new re(`Graph.${s}: could not find the "${l}" node in the graph.`);return d1(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new re(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new re(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return h1(!0,i,this.multi,r,d,u,c)}throw new ce(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,y,w,m)=>u(d,h,f,p,y,w,m)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,y,w,m)=>!u(d,h,f,p,y,w,m)),!this[s].apply(this,l)}}function E6(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Bi.empty();if(!arguments.length)return g6(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new re(`Graph.${s}: could not find the "${o}" node in the graph.`);return v6(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new re(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new re(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return b6(i,r,l,a)}throw new ce(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function C6(t){c6.forEach(e=>{x6(t,e),S6(t,e),k6(t,e),E6(t,e)})}const A6=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Sm(){this.A=null,this.B=null}Sm.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Sm.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Ou(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function f1(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Ou(t,null,i,i.undirected,r);if(typeof n=="string")return Ou(t,null,i,i[n],r)}const s=new Sm;let o;if(e!=="undirected"){if(n!=="out"){if(o=Ou(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Ou(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Ou(t,s,i,i.undirected,r),t&&o))return o}function P6(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return f1(!1,t,e,n,function(r){i.push(r)}),i}function Nu(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Bi(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function O6(t,e,n){if(t!=="mixed"){if(t==="undirected")return Nu(null,n,n.undirected);if(typeof e=="string")return Nu(null,n,n[e])}let i=Bi.empty();const r=new Sm;return t!=="undirected"&&(e!=="out"&&(i=as(i,Nu(r,n,n.in))),e!=="in"&&(i=as(i,Nu(r,n,n.out)))),t!=="directed"&&(i=as(i,Nu(r,n,n.undirected))),i}function N6(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new re(`Graph.${n}: could not find the "${s}" node in the graph.`);return P6(i==="mixed"?this.type:i,r,o)}}function T6(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new re(`Graph.${s}: could not find the "${u}" node in the graph.`);f1(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new ce(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function R6(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new re(`Graph.${o}: could not find the "${u}" node in the graph.`);return f1(!0,i==="mixed"?this.type:i,r,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function M6(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Bi.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new re(`Graph.${s}: could not find the "${o}" node in the graph.`);return O6(i==="mixed"?this.type:i,r,a)}}function D6(t){A6.forEach(e=>{N6(t,e),T6(t,e),R6(t,e),M6(t,e)})}function uh(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,u,c,d,h,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do{if(h=d.target,p=!0,f=r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do{if(h=d.target,h.key!==u&&(h=d.source),p=!0,f=r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(n&&!p&&(f=r(l.key,null,l.attributes,null,null,null,null),t&&f))return null}}function _6(t,e){const n={key:t};return yN(e.attributes)||(n.attributes=Ft({},e.attributes)),n}function $6(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return yN(n.attributes)||(i.attributes=Ft({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function L6(t){if(!sn(t))throw new ce('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ce("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!sn(t.attributes)||t.attributes===null))throw new ce("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function I6(t){if(!sn(t))throw new ce('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ce("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ce("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!sn(t.attributes)||t.attributes===null))throw new ce("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ce("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const B6=j8(),z6=new Set(["directed","undirected","mixed"]),ck=new Set(["domain","_events","_eventsCount","_maxListeners"]),j6=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],F6={allowSelfLoops:!0,multi:!1,type:"mixed"};function U6(t,e,n){if(n&&!sn(n))throw new ce(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Pe(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function dk(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function CN(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new Pe(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Pe(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!sn(a))throw new ce(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Pe(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new re(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new re(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Pe(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Pe(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new lu(i,r,l,u,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function V6(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new Pe(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Pe(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ce(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!sn(a))throw new ce(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Pe(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new Pe(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const g=[f.key,!1,!1,!1];if(l?!u:!a)return g;if(l){const v=f.attributes;f.attributes=u(v),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Ft(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return g}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Pe(`Graph.${e}: the "${r}" edge already exists in the graph.`);let y=!1,w=!1;c||(c=dk(t,s,{}),y=!0,s===o&&(d=c,w=!0)),d||(d=dk(t,o,{}),w=!0),h=new lu(i,r,c,d,a),t._edges.set(r,h);const m=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,m&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,m&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,y,w]}function La(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class tt extends N8.EventEmitter{constructor(e){if(super(),e=Ft({},F6,e),typeof e.multi!="boolean")throw new ce(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!z6.has(e.type))throw new ce(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ce(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?vN:e.type==="directed"?wN:bN;yi(this,"NodeDataClass",n);const i="geid_"+B6()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};yi(this,"_attributes",{}),yi(this,"_nodes",new Map),yi(this,"_edges",new Map),yi(this,"_directedSize",0),yi(this,"_undirectedSize",0),yi(this,"_directedSelfLoopCount",0),yi(this,"_undirectedSelfLoopCount",0),yi(this,"_edgeKeyGenerator",s),yi(this,"_options",e),ck.forEach(o=>yi(this,o,this[o])),ji(this,"order",()=>this._nodes.size),ji(this,"size",()=>this._edges.size),ji(this,"directedSize",()=>this._directedSize),ji(this,"undirectedSize",()=>this._undirectedSize),ji(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ji(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ji(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ji(this,"multi",this._options.multi),ji(this,"type",this._options.type),ji(this,"allowSelfLoops",this._options.allowSelfLoops),ji(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new ce(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new ce(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new ce(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Pe("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new re(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new re(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Pe("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new re(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new re(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new Pe("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new re(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new re(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new re(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new re(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new re(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new re(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return U6(this,e,n).key}mergeNode(e,n){if(n&&!sn(n))throw new ce(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(Ft(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ce(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new re(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do La(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do La(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do La(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=$i(this,i,r,this.type),!n)throw new re(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new re(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return La(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Pe("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Pe("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=$i(this,e,n,"directed");if(!i)throw new re(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return La(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Pe("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Pe("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=$i(this,e,n,"undirected");if(!i)throw new re(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return La(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ce("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!sn(e))throw new ce("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!sn(e))throw new ce("Graph.mergeAttributes: provided attributes are not a plain object.");return Ft(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ce("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ce("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!uk(n))throw new ce("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ce("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!uk(n))throw new ce("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ce("Graph.forEachAdjacencyEntry: expecting a callback.");uh(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ce("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");uh(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ce("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");uh(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ce("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");uh(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):gN(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ce("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new ce("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new ce("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new ce("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ce("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ce("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ce("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ce("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Bi(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=_6(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=$6(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof tt)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!sn(e))throw new ce("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!sn(e.attributes))throw new ce("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ce("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],L6(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ce("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],I6(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new tt(Ft({},this._options,e));return n.replaceAttributes(Ft({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Ft({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Pe(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Pe("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Pe("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,CN(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Ft({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!ck.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,yi(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(tt.prototype[Symbol.for("nodejs.util.inspect.custom")]=tt.prototype.inspect);j6.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?CN:V6;t.generateKey?tt.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:tt.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});q8(tt);u6(tt);C6(tt);D6(tt);class AN extends tt{constructor(e){const n=Ft({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ce("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ce('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class p1 extends tt{constructor(e){const n=Ft({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ce("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ce('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class PN extends tt{constructor(e){const n=Ft({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ce("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class ON extends tt{constructor(e){const n=Ft({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ce("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ce('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class NN extends tt{constructor(e){const n=Ft({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ce("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ce('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function uu(t){t.from=function(e,n){const i=Ft({},e.options,n),r=new t(i);return r.import(e),r}}uu(tt);uu(AN);uu(p1);uu(PN);uu(ON);uu(NN);tt.Graph=tt;tt.DirectedGraph=AN;tt.UndirectedGraph=p1;tt.MultiGraph=PN;tt.MultiDirectedGraph=ON;tt.MultiUndirectedGraph=NN;tt.InvalidArgumentsGraphError=ce;tt.NotFoundGraphError=re;tt.UsageGraphError=Pe;var H6=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},TN=xm,W6=TN.ARRAY_BUFFER_SUPPORT,G6=TN.SYMBOL_SUPPORT,K6=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||W6&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(G6&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},RN=bm,X6=K6;function Bt(){this.clear()}Bt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Bt.prototype.enqueue=function(t){return this.items.push(t),++this.size};Bt.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};Bt.prototype.peek=function(){if(this.size)return this.items[this.offset]};Bt.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};Bt.prototype.toArray=function(){return this.items.slice(this.offset)};Bt.prototype.values=function(){var t=this.items,e=this.offset;return new RN(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};Bt.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new RN(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(Bt.prototype[Symbol.iterator]=Bt.prototype.values);Bt.prototype.toString=function(){return this.toArray().join(",")};Bt.prototype.toJSON=function(){return this.toArray()};Bt.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Bt,enumerable:!1}),t};typeof Symbol<"u"&&(Bt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Bt.prototype.inspect);Bt.from=function(t){var e=new Bt;return X6(t,function(n){e.enqueue(n)}),e};Bt.of=function(){return Bt.from(arguments)};var Z6=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},MN=H6,J6=Z6;function Y6(t,e,n){if(!MN(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,y,w,m=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,y=u.length;f<y;f++)for(c=u[f],d=r(c),p=0,w=d.length;p<w;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){m=!0;break e}}else for(u=l,l=[],f=0,y=u.length;f<y;f++)for(c=u[f],d=i(c),p=0,w=d.length;p<w;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){m=!0;break e}if(!m)return null;for(var g=[];h;)g.unshift(h),h=s[h];for(h=o[g[g.length-1]];h;)g.push(h),h=o[h];return g.length?g:null}function DN(t,e,n){if(!MN(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!i.has(u)&&(i.add(u),J6(c,e[t](u)),r[u]=s);s++,o=c}return r}DN.bind(null,"outboundNeighbors");DN.bind(null,"neighbors");var q6=Y6;const ye=new p1({allowSelfLoops:!1});ye.addNode("MBR",{position:[610,250]});ye.addNode("AX",{position:[522,45]});ye.addNode("BX",{position:[522,85]});ye.addNode("CX",{position:[522,125]});ye.addNode("DX",{position:[522,165]});ye.addNode("id",{position:[522,205]});ye.addNode("IP",{position:[451,309]});ye.addNode("SP",{position:[451,349]});ye.addNode("ri",{position:[451,388]});ye.addNode("result",{position:[370,130]});ye.addNode("FLAGS",{position:[250,225]});ye.addNode("IR",{position:[205,272]});ye.addNode("left",{position:[60,85]});ye.addNode("right",{position:[60,145]});ye.addNode("AX join",{position:[492,45]});ye.addNode("BX join",{position:[492,85]});ye.addNode("CX join",{position:[492,125]});ye.addNode("DX join",{position:[492,165]});ye.addNode("id join",{position:[492,205]});ye.addNode("data mbr join",{position:[492,250]});ye.addNode("IP join",{position:[421,309]});ye.addNode("SP join",{position:[421,349]});ye.addNode("ri join",{position:[421,388]});ye.addNode("addresses mbr join",{position:[421,250]});ye.addNode("result mbr join",{position:[370,250]});ye.addNode("FLAGS mbr join",{position:[250,250]});ye.addNode("IR mbr join",{position:[205,250]});ye.addNode("left join",{position:[30,85]});ye.addNode("right join",{position:[30,145]});ye.addNode("operands mbr join",{position:[30,250]});ye.addUndirectedEdge("AX","AX join");ye.addUndirectedEdge("BX","BX join");ye.addUndirectedEdge("CX","CX join");ye.addUndirectedEdge("DX","DX join");ye.addUndirectedEdge("id","id join");ye.addUndirectedEdge("AX join","BX join");ye.addUndirectedEdge("BX join","CX join");ye.addUndirectedEdge("CX join","DX join");ye.addUndirectedEdge("DX join","id join");ye.addUndirectedEdge("id join","data mbr join");ye.addUndirectedEdge("data mbr join","MBR");ye.addUndirectedEdge("IP","IP join");ye.addUndirectedEdge("SP","SP join");ye.addUndirectedEdge("ri","ri join");ye.addUndirectedEdge("IP join","SP join");ye.addUndirectedEdge("SP join","ri join");ye.addUndirectedEdge("IP join","addresses mbr join");ye.addUndirectedEdge("addresses mbr join","data mbr join");ye.addUndirectedEdge("result","result mbr join");ye.addUndirectedEdge("result mbr join","addresses mbr join");ye.addUndirectedEdge("FLAGS","FLAGS mbr join");ye.addUndirectedEdge("FLAGS mbr join","result mbr join");ye.addUndirectedEdge("IR","IR mbr join");ye.addUndirectedEdge("IR mbr join","FLAGS mbr join");ye.addUndirectedEdge("left","left join");ye.addUndirectedEdge("right","right join");ye.addUndirectedEdge("left join","right join");ye.addUndirectedEdge("right join","operands mbr join");ye.addUndirectedEdge("operands mbr join","IR mbr join");function Q6(t,e){const n=q6(ye,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const i=ye.getNodeAttribute(n[0],"position");let r=`M ${i[0]} ${i[1]}`;for(let s=1;s<n.length;s++){const[o,a]=ye.getNodeAttribute(n[s],"position");r+=` L ${o} ${a}`}return r}function ez(){const{path:t,...e}=it("cpu.internalBus.data");return S.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[S.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 272 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),S.jsx($t.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const Jg=(t,e)=>{const n=Q6(t,e);return Je([{key:"cpu.internalBus.data.path",from:n},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},Yg=()=>Je({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});async function tz(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await Je([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),ie.set(RO,t.operation),await Promise.all([Je({key:"cpu.alu.operation.backgroundColor",to:Pt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Je({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Je({key:"cpu.alu.operation.backgroundColor",to:Pt.stone[800]},{duration:1,easing:"easeOutQuart"}),Je([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([ki("cpu.result"),ki("cpu.FLAGS")]),ie.set(at.FLAGS,t.flags),ie.set(at.result,t.result),await Promise.all([Ei("cpu.result"),Ei("cpu.FLAGS")]),await Je([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{ie.set(Us,e=>e.phase==="stopped"?e:{...e,phase:"interrupt"}),await Je([{key:"cpu.id.opacity",to:1},{key:"cpu.ri.opacity",to:1}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{vO(t.instruction.position.start),ie.set(Us,{phase:"fetching",metadata:t.instruction}),await Je([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:.4},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:.4}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{ie.set(Us,e=>e.phase==="stopped"?e:{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase});return}case"cpu:decode":{await Je([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Je([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Je([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{ie.set(Us,{phase:"stopped",error:t.error}),Eo(t.error);return}case"cpu:halt":case"cpu:int.0":{ie.set(Us,{phase:"stopped"}),Eo();return}case"cpu:int.3":{Pz();return}case"cpu:int.6":return;case"cpu:int.7":return;case"cpu:inta.off":{await Fn("bus.inta");return}case"cpu:inta.on":{await _i("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await Je({key:`bus.${e}.stroke`,to:Pt.red[500]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await _i("bus.iom",15);return}case"cpu:mar.set":{await Je([{key:"cpu.internalBus.address.path",from:x8(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await ki("cpu.MAR",Pt.blue[500]),ie.set(TO,ie.get(at[t.register])),await Je({key:"bus.address.stroke",to:Pt.blue[500]},{duration:5,easing:"easeOutSine"}),await Promise.all([Ei("cpu.MAR"),Je({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=Vo(t.register);await Jg("MBR",e),await ki(`cpu.${e}`),ie.set(at[t.register],ie.get(ip)),await Promise.all([Ei(`cpu.${e}`),Yg()]);return}case"cpu:mbr.set":{const[e]=Vo(t.register);await Jg(e,"MBR"),await ki("cpu.MBR"),ie.set(ip,ie.get(at[t.register])),await Je({key:"bus.data.stroke",to:Pt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Promise.all([Ei("cpu.MBR"),Yg()]);return}case"cpu:register.copy":{const[e]=Vo(t.src),[n]=Vo(t.dest);e!==n&&await Jg(e,n),await ki(`cpu.${n}`),ie.set(at[t.dest],ie.get(at[t.src])),await Promise.all([Ei(`cpu.${n}`),e!==n&&Yg()]);return}case"cpu:register.update":{const[e]=Vo(t.register);await ki(`cpu.${e}`),ie.set(at[t.register],t.value),await Ei(`cpu.${e}`);return}default:return t}}async function nz(t){switch(t.type){case"f10:press":await _i("bus.int0",15),await Fn("bus.int0");return;default:return t.type}}const m1=ke($.zero(8)),g1=ke($.zero(8));function iz(t){"handshake"in t.io&&(ie.set(m1,$.fromUnsigned(t.io.handshake.DATA,8)),ie.set(g1,$.fromUnsigned(t.io.handshake.STATE,8)))}async function rz(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await Xl(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await ki(`handshake.${t.register}`),t.register){case"DATA":{ie.set(m1,t.value);break}case"STATE":{ie.set(g1,t.value);break}default:return t.register}await Ei(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await Fn("bus.int2");return}case"handshake:int.on":{await _i("bus.int2",10);return}default:return t}}async function sz(t){switch(t.type){case"keyboard:listen-key":{ie.set(ir,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{ie.sub(ir,()=>{const n=ie.get(ir);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const y1=ke($.zero(8));function oz(t){"leds"in t.io&&ie.set(y1,$.fromUnsigned(t.io.leds,8))}async function az(t){switch(t.type){case"leds:update":{await _i("bus.pio->leds",10),ie.set(y1,t.state),await Fn("bus.pio->leds");return}default:return t.type}}const v1=ke(new Array(Ae.MAX_ADDRESS+1).fill($.zero(8))),pv=ke(Ae.from(4096)),hk=8,lz=ke(t=>{const e=t(pv),n=e.value-e.value%hk,i=t(v1),r=[];for(let s=0;s<hk;s++)r.push({address:Ae.from(n+s),value:i[n+s]});return r});function uz(t){ie.set(v1,t.memory.map(e=>$.fromUnsigned(e,8)))}async function cz(t){switch(t.type){case"memory:read":{Ae.inRange(t.address)&&ie.set(pv,Ae.from(t.address));return}case"memory:read.ok":{await Xl(t.value);return}case"memory:write":{if(Ae.inRange(t.address)){const e=Number(t.address);ie.set(pv,Ae.from(t.address)),ie.set(v1,n=>[...n.slice(0,e),t.value,...n.slice(e+1)])}return}case"memory:write.ok":return;case"memory:read.error":case"memory:write.error":{Eo(t.error);return}default:return t}}const w1=ke($.fromUnsigned(255,8)),b1=ke($.fromUnsigned(0,8)),x1=ke($.fromUnsigned(0,8)),cp=[ke($.zero(8)),ke($.zero(8)),ke($.zero(8)),ke($.zero(8)),ke($.zero(8)),ke($.zero(8)),ke($.zero(8)),ke($.zero(8))];function dz(t){ie.set(w1,$.fromUnsigned(t.io.pic.IMR,8)),ie.set(b1,$.fromUnsigned(t.io.pic.IRR,8)),ie.set(x1,$.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<cp.length;e++)ie.set(cp[e],$.fromUnsigned(t.io.pic.lines[e],8))}async function hz(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Xl(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await ki(`pic.${t.register}`),t.register){case"IMR":{ie.set(w1,t.value);break}case"IRR":{ie.set(b1,t.value);break}case"ISR":{ie.set(x1,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));ie.set(cp[e],t.value);break}default:return t}await Ei(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await Fn("bus.intr");return}case"pic:intr.on":{await _i("bus.intr",10);return}case"pic:int.send":{await Xl(t.number);return}default:return t}}const S1=ke($.zero(8)),k1=ke($.zero(8)),E1=ke($.zero(8)),C1=ke($.zero(8));function fz(t){"pio"in t.io&&(ie.set(S1,$.fromUnsigned(t.io.pio.PA,8)),ie.set(k1,$.fromUnsigned(t.io.pio.PB,8)),ie.set(E1,$.fromUnsigned(t.io.pio.CA,8)),ie.set(C1,$.fromUnsigned(t.io.pio.CB,8)))}async function pz(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await Xl(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await ki(`pio.${t.register}`),t.register){case"PA":{ie.set(S1,t.value);break}case"PB":{ie.set(k1,t.value);break}case"CA":{ie.set(E1,t.value);break}case"CB":{ie.set(C1,t.value);break}default:return t.register}await Ei(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const dp=ke([]),hp=ke("");function mz(t){"printer"in t.io&&(ie.set(dp,t.io.printer.buffer.map(e=>$.fromUnsigned(e,8))),ie.set(hp,t.io.printer.paper))}async function gz(t){switch(t.type){case"printer:buffer.add":{ie.set(dp,e=>[...e,t.char]);return}case"printer:buffer.pop":{ie.set(dp,e=>e.slice(1));return}case"printer:busy.off":{await Fn("bus.printer.busy");return}case"printer:busy.on":{await _i("bus.printer.busy",15);return}case"printer:data.read":{await _i("bus.printer.data",15),await Fn("bus.printer.data");return}case"printer:paper.print":{ie.set(hp,e=>e+t.char);return}case"printer:paper.replace":{ie.set(hp,"");return}case"printer:strobe.off":{await Fn("bus.printer.strobe");return}case"printer:strobe.on":{await _i("bus.printer.strobe",15);return}default:return t}}const A1=ke("");function yz(t){ie.set(A1,t.io.screen)}async function vz(t){switch(t.type){case"screen:send-char":{ie.set(A1,t.output);return}default:return t.type}}const P1=ke($.zero(8));function wz(t){"switches"in t.io&&ie.set(P1,$.fromUnsigned(t.io.switches,8))}async function bz(t){switch(t.type){case"switches:toggle":{ie.set(P1,e=>e.withBit(t.index,!e.bit(t.index))),await _i("bus.switches->pio",15),await Fn("bus.switches->pio");return}default:return t.type}}const O1=ke($.zero(8)),N1=ke($.zero(8));function xz(t){ie.set(O1,$.fromUnsigned(t.io.timer.CONT,8)),ie.set(N1,$.fromUnsigned(t.io.timer.COMP,8))}async function Sz(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Xl(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await ki(`timer.${t.register}`),t.register){case"CONT":{ie.set(O1,t.value);break}case"COMP":{ie.set(N1,t.value);break}default:return t.register}await Ei(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await Fn("bus.int1");return}case"timer:int.on":{await _i("bus.int1",10);return}default:return t}}const mv=new Set;async function kz(t){Cz(t);const[e]=t.type.split(":",2);switch(mv.add(t.type),e){case"bus":{await w8(t);break}case"clock":{await b8(t);break}case"cpu":{await tz(t);break}case"f10":{await nz(t);break}case"handshake":{await rz(t);break}case"keyboard":{await sz(t);break}case"leds":{await az(t);break}case"memory":{await cz(t);break}case"pic":{await hz(t);break}case"pio":{await pz(t);break}case"printer":{await gz(t);break}case"screen":{await vz(t);break}case"switches":{await bz(t);break}case"timer":{await Sz(t);break}default:return e}mv.delete(t.type)}function fk(...t){for(const e of t)if(mv.has(e))return!0;return!1}const Ez={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function Cz(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${Ez[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof $?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Ae?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Kn?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const qn=new nI,ir=ke({type:"stopped"}),km=()=>ie.get(ir);function Az(t){const e=t.translate(Lr().language);Qp.error(e)}function Eo(t){t&&Az(t),vO(null),yO(!1),ie.set(ir,{type:"stopped",error:t}),ie.set(Us,{phase:"stopped",error:t}),v8()}function Pz(){ie.set(ir,{type:"paused"})}function Oz(){Qp.error(cm(Lr().language,"messages.assemble-error"))}function Tu(){Qp.error(cm(Lr().language,"messages.invalid-action"))}function Nz(t){J4(t),uz(t),iz(t),dz(t),fz(t),xz(t),oz(t),mz(t),yz(t),wz(t)}async function Tz(...t){const e=t[0],n=km();switch(e){case"cpu.run":{if(n.type==="running")return Tu();if(n.type==="stopped"){if(!window.codemirror)return;const i=window.codemirror.state.doc.toString(),r=U2(i);if(!r.success)return Oz();yO(!0),qn.loadProgram({program:r,data:Lr().dataOnLoad,devices:Lr().devices}),Nz(qn.getComputerState()),ie.set(ir,{type:"running",until:"infinity"}),Go(qn.startCPU()),Rz(),Mz()}else ie.set(ir,{type:"running",until:"infinity",waitingForInput:!1}),y8();return}case"cpu.stop":{Eo();return}case"f10.press":{if(n.type!=="running")return Tu();if(fk("f10:press"))return;Go(qn.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!qn.devices.switches.connected())return Tu();if(fk("switches:toggle"))return;const i=t[1];Go(qn.devices.switches.toggle(i));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return Tu();qn.devices.keyboard.readChar($.fromChar(t[1])),ie.set(ir,{...n,waitingForInput:!1});return}case"screen.clean":{Go(qn.devices.screen.clear());return}case"printer.clean":{if(!qn.devices.printer.connected())return Tu();Go(qn.devices.printer.clear());return}default:return e}}async function Go(t){try{for(;km().type==="running";){const e=t.next();if(e.done)break;await kz(e.value)}t.return()}catch(e){const n=Nt.from(e);Eo(n)}}async function Rz(){try{for(;km().type==="running";){const t=Lr().clockSpeed;await Je({key:"clock.angle",from:0,to:360},{duration:t,easing:"linear"}),Go(qn.devices.clock.tick())}}catch(t){const e=Nt.from(t);Eo(e)}}async function Mz(){if(qn.devices.printer.connected())try{for(;km().type==="running";){const t=Lr().printerSpeed;await Je([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,easing:"easeInOutSine"}),await Je({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),Go(qn.devices.printer.print())}}catch(t){const e=Nt.from(t);Eo(e)}}function zr(){const t=On(ir),e=H4(),n=k.useMemo(()=>({preset:e,clock:!0,f10:!0,keyboard:!0,handshake:e==="handshake",leds:e==="pio-switches-and-leds",pic:!0,pio:e==="pio-switches-and-leds"||e==="pio-printer",printer:e==="pio-printer"||e==="handshake",screen:!0,switches:e==="pio-switches-and-leds",timer:!0}),[e]);return{status:t,dispatch:Tz,devices:n}}function _t(){const t=NO();return(e,...n)=>cm(t,e,...n)}function Dz({className:t}){const e=_t(),{status:n,dispatch:i}=zr(),r=k.useCallback(s=>{s.key==="F5"?(s.preventDefault(),s.shiftKey?i("cpu.stop"):i("cpu.run")):s.key==="F11"&&(s.preventDefault(),i("cpu.step"))},[i]);return $2("keydown",r,void 0,[i]),S.jsx("div",{className:Le("flex items-center justify-center gap-4",t),children:n.type==="stopped"?S.jsxs("button",{className:"flex w-min items-center gap-1 rounded-md bg-mantis-500 p-2 text-mantis-50 transition-colors hover:enabled:bg-mantis-600 hover:enabled:text-white disabled:opacity-40",onClick:()=>i("cpu.run"),children:[S.jsx("span",{className:"icon-[lucide--play] block h-5 w-5"}),S.jsx("span",{className:"whitespace-nowrap font-semibold tracking-wide",children:e("control.action.start")})]}):S.jsxs("button",{className:"flex w-min items-center gap-1 rounded-md bg-mantis-500 p-2 text-mantis-50 transition-colors hover:enabled:bg-mantis-600 hover:enabled:text-white disabled:opacity-40",onClick:()=>i("cpu.stop"),children:[S.jsx("span",{className:"icon-[lucide--stop-circle] block h-5 w-5"}),S.jsx("span",{className:"whitespace-nowrap font-semibold tracking-wide",children:e("control.action.stop")})]})})}function Fe(){return Fe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Fe.apply(this,arguments)}function fp(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ot(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function xd(t,e=[]){let n=[];function i(s,o){const a=k.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,y=(h==null?void 0:h[t][l])||a,w=k.useMemo(()=>p,Object.values(p));return k.createElement(y.Provider,{value:w},f)}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=k.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const r=()=>{const s=n.map(o=>k.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return k.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,_z(r,...e)]}function _z(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function $z(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function _N(...t){return e=>t.forEach(n=>$z(n,e))}function Dt(...t){return k.useCallback(_N(...t),t)}const ed=k.forwardRef((t,e)=>{const{children:n,...i}=t,r=k.Children.toArray(n),s=r.find(Iz);if(s){const o=s.props.children,a=r.map(l=>l===s?k.Children.count(o)>1?k.Children.only(null):k.isValidElement(o)?o.props.children:null:l);return k.createElement(gv,Fe({},i,{ref:e}),k.isValidElement(o)?k.cloneElement(o,void 0,a):null)}return k.createElement(gv,Fe({},i,{ref:e}),n)});ed.displayName="Slot";const gv=k.forwardRef((t,e)=>{const{children:n,...i}=t;return k.isValidElement(n)?k.cloneElement(n,{...Bz(i,n.props),ref:e?_N(e,n.ref):n.ref}):k.Children.count(n)>1?k.Children.only(null):null});gv.displayName="SlotClone";const Lz=({children:t})=>k.createElement(k.Fragment,null,t);function Iz(t){return k.isValidElement(t)&&t.type===Lz}function Bz(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function $N(t){const e=t+"CollectionProvider",[n,i]=xd(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:y}=f,w=ue.useRef(null),m=ue.useRef(new Map).current;return ue.createElement(r,{scope:p,itemMap:m,collectionRef:w},y)},a=t+"CollectionSlot",l=ue.forwardRef((f,p)=>{const{scope:y,children:w}=f,m=s(a,y),g=Dt(p,m.collectionRef);return ue.createElement(ed,{ref:g},w)}),u=t+"CollectionItemSlot",c="data-radix-collection-item",d=ue.forwardRef((f,p)=>{const{scope:y,children:w,...m}=f,g=ue.useRef(null),v=Dt(p,g),x=s(u,y);return ue.useEffect(()=>(x.itemMap.set(g,{ref:g,...m}),()=>void x.itemMap.delete(g))),ue.createElement(ed,{[c]:"",ref:v},w)});function h(f){const p=s(t+"CollectionConsumer",f);return ue.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const m=Array.from(w.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((x,E)=>m.indexOf(x.ref.current)-m.indexOf(E.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,i]}const zz=k.createContext(void 0);function LN(t){const e=k.useContext(zz);return t||e||"ltr"}const jz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ht=jz.reduce((t,e)=>{const n=k.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?ed:e;return k.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),k.createElement(a,Fe({},o,{ref:r}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Fz(t,e){t&&Ca.flushSync(()=>t.dispatchEvent(e))}function vs(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...n)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...n)},[])}function Uz(t,e=globalThis==null?void 0:globalThis.document){const n=vs(t);k.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[n,e])}const yv="dismissableLayer.update",Vz="dismissableLayer.pointerDownOutside",Hz="dismissableLayer.focusOutside";let pk;const Wz=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Gz=k.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=t,c=k.useContext(Wz),[d,h]=k.useState(null),f=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=k.useState({}),y=Dt(e,P=>h(P)),w=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=w.indexOf(m),v=d?w.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,E=v>=g,O=Kz(P=>{const R=P.target,_=[...c.branches].some(M=>M.contains(R));!E||_||(s==null||s(P),a==null||a(P),P.defaultPrevented||l==null||l())},f),N=Xz(P=>{const R=P.target;[...c.branches].some(M=>M.contains(R))||(o==null||o(P),a==null||a(P),P.defaultPrevented||l==null||l())},f);return Uz(P=>{v===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&l&&(P.preventDefault(),l()))},f),k.useEffect(()=>{if(d)return i&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(pk=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),mk(),()=>{i&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=pk)}},[d,f,i,c]),k.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),mk())},[d,c]),k.useEffect(()=>{const P=()=>p({});return document.addEventListener(yv,P),()=>document.removeEventListener(yv,P)},[]),k.createElement(Ht.div,Fe({},u,{ref:y,style:{pointerEvents:x?E?"auto":"none":void 0,...t.style},onFocusCapture:Ot(t.onFocusCapture,N.onFocusCapture),onBlurCapture:Ot(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Ot(t.onPointerDownCapture,O.onPointerDownCapture)}))});function Kz(t,e=globalThis==null?void 0:globalThis.document){const n=vs(t),i=k.useRef(!1),r=k.useRef(()=>{});return k.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let c=function(){IN(Vz,n,u,{discrete:!0})};var l=c;const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function Xz(t,e=globalThis==null?void 0:globalThis.document){const n=vs(t),i=k.useRef(!1);return k.useEffect(()=>{const r=s=>{s.target&&!i.current&&IN(Hz,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function mk(){const t=new CustomEvent(yv);document.dispatchEvent(t)}function IN(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?Fz(r,s):r.dispatchEvent(s)}let qg=0;function Zz(){k.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:gk()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:gk()),qg++,()=>{qg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(i=>i.remove()),qg--}},[])}function gk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const Qg="focusScope.autoFocusOnMount",ey="focusScope.autoFocusOnUnmount",yk={bubbles:!1,cancelable:!0},Jz=k.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=k.useState(null),u=vs(r),c=vs(s),d=k.useRef(null),h=Dt(e,y=>l(y)),f=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(i){let g=function(O){if(f.paused||!a)return;const N=O.target;a.contains(N)?d.current=N:Ts(d.current,{select:!0})},v=function(O){if(f.paused||!a)return;const N=O.relatedTarget;N!==null&&(a.contains(N)||Ts(d.current,{select:!0}))},x=function(O){const N=document.activeElement;for(const P of O)P.removedNodes.length>0&&(a!=null&&a.contains(N)||Ts(a))};var y=g,w=v,m=x;document.addEventListener("focusin",g),document.addEventListener("focusout",v);const E=new MutationObserver(x);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),E.disconnect()}}},[i,a,f.paused]),k.useEffect(()=>{if(a){wk.add(f);const y=document.activeElement;if(!a.contains(y)){const m=new CustomEvent(Qg,yk);a.addEventListener(Qg,u),a.dispatchEvent(m),m.defaultPrevented||(Yz(nj(BN(a)),{select:!0}),document.activeElement===y&&Ts(a))}return()=>{a.removeEventListener(Qg,u),setTimeout(()=>{const m=new CustomEvent(ey,yk);a.addEventListener(ey,c),a.dispatchEvent(m),m.defaultPrevented||Ts(y??document.body,{select:!0}),a.removeEventListener(ey,c),wk.remove(f)},0)}}},[a,u,c,f]);const p=k.useCallback(y=>{if(!n&&!i||f.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,m=document.activeElement;if(w&&m){const g=y.currentTarget,[v,x]=qz(g);v&&x?!y.shiftKey&&m===x?(y.preventDefault(),n&&Ts(v,{select:!0})):y.shiftKey&&m===v&&(y.preventDefault(),n&&Ts(x,{select:!0})):m===g&&y.preventDefault()}},[n,i,f.paused]);return k.createElement(Ht.div,Fe({tabIndex:-1},o,{ref:h,onKeyDown:p}))});function Yz(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Ts(i,{select:e}),document.activeElement!==n)return}function qz(t){const e=BN(t),n=vk(e,t),i=vk(e.reverse(),t);return[n,i]}function BN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function vk(t,e){for(const n of t)if(!Qz(n,{upTo:e}))return n}function Qz(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function ej(t){return t instanceof HTMLInputElement&&"select"in t}function Ts(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&ej(t)&&e&&t.select()}}const wk=tj();function tj(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=bk(t,e),t.unshift(e)},remove(e){var n;t=bk(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function bk(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function nj(t){return t.filter(e=>e.tagName!=="A")}const ws=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},ij=zv["useId".toString()]||(()=>{});let rj=0;function zN(t){const[e,n]=k.useState(ij());return ws(()=>{t||n(i=>i??String(rj++))},[t]),t||(e?`radix-${e}`:"")}function cu(t){return t.split("-")[1]}function T1(t){return t==="y"?"height":"width"}function ls(t){return t.split("-")[0]}function Oa(t){return["top","bottom"].includes(ls(t))?"x":"y"}function xk(t,e,n){let{reference:i,floating:r}=t;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,a=Oa(e),l=T1(a),u=i[l]/2-r[l]/2,c=a==="x";let d;switch(ls(e)){case"top":d={x:s,y:i.y-r.height};break;case"bottom":d={x:s,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:o};break;case"left":d={x:i.x-r.width,y:o};break;default:d={x:i.x,y:i.y}}switch(cu(e)){case"start":d[a]-=u*(n&&c?-1:1);break;case"end":d[a]+=u*(n&&c?-1:1)}return d}const sj=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=xk(u,i,l),h=i,f={},p=0;for(let y=0;y<a.length;y++){const{name:w,fn:m}=a[y],{x:g,y:v,data:x,reset:E}=await m({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=g??c,d=v??d,f={...f,[w]:{...f[w],...x}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(u=E.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):E.rects),{x:c,y:d}=xk(u,h,l)),y=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};function bs(t,e){return typeof t=="function"?t(e):t}function jN(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function pp(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function td(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=bs(e,t),p=jN(f),y=a[h?d==="floating"?"reference":"floating":d],w=pp(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),m=d==="floating"?{...o.floating,x:i,y:r}:o.reference,g=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),v=await(s.isElement==null?void 0:s.isElement(g))&&await(s.getScale==null?void 0:s.getScale(g))||{x:1,y:1},x=pp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m,offsetParent:g,strategy:l}):m);return{top:(w.top-x.top+p.top)/v.y,bottom:(x.bottom-w.bottom+p.bottom)/v.y,left:(w.left-x.left+p.left)/v.x,right:(x.right-w.right+p.right)/v.x}}const nd=Math.min,Fo=Math.max;function vv(t,e,n){return Fo(t,nd(e,n))}const Sk=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a}=e,{element:l,padding:u=0}=bs(t,e)||{};if(l==null)return{};const c=jN(u),d={x:n,y:i},h=Oa(r),f=T1(h),p=await o.getDimensions(l),y=h==="y",w=y?"top":"left",m=y?"bottom":"right",g=y?"clientHeight":"clientWidth",v=s.reference[f]+s.reference[h]-d[h]-s.floating[f],x=d[h]-s.reference[h],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let O=E?E[g]:0;O&&await(o.isElement==null?void 0:o.isElement(E))||(O=a.floating[g]||s.floating[f]);const N=v/2-x/2,P=O/2-p[f]/2-1,R=nd(c[w],P),_=nd(c[m],P),M=R,H=O-p[f]-_,F=O/2-p[f]/2+N,j=vv(M,F,H),X=cu(r)!=null&&F!=j&&s.reference[f]/2-(F<M?R:_)-p[f]/2<0?F<M?M-F:H-F:0;return{[h]:d[h]-X,data:{[h]:j,centerOffset:F-j+X}}}}),FN=["top","right","bottom","left"];FN.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const oj={left:"right",right:"left",bottom:"top",top:"bottom"};function mp(t){return t.replace(/left|right|bottom|top/g,e=>oj[e])}function aj(t,e,n){n===void 0&&(n=!1);const i=cu(t),r=Oa(t),s=T1(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=mp(o)),{main:o,cross:mp(o)}}const lj={start:"end",end:"start"};function ty(t){return t.replace(/start|end/g,e=>lj[e])}const uj=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...y}=bs(t,e),w=ls(i),m=ls(o)===o,g=await(a.isRTL==null?void 0:a.isRTL(l.floating)),v=d||(m||!p?[mp(o)]:function(M){const H=mp(M);return[ty(M),H,ty(H)]}(o));d||f==="none"||v.push(...function(M,H,F,j){const X=cu(M);let J=function(G,L,I){const Y=["left","right"],ae=["right","left"],ve=["top","bottom"],Se=["bottom","top"];switch(G){case"top":case"bottom":return I?L?ae:Y:L?Y:ae;case"left":case"right":return L?ve:Se;default:return[]}}(ls(M),F==="start",j);return X&&(J=J.map(G=>G+"-"+X),H&&(J=J.concat(J.map(ty)))),J}(o,p,f,g));const x=[o,...v],E=await td(e,y),O=[];let N=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&O.push(E[w]),c){const{main:M,cross:H}=aj(i,s,g);O.push(E[M],E[H])}if(N=[...N,{placement:i,overflows:O}],!O.every(M=>M<=0)){var P,R;const M=(((P=r.flip)==null?void 0:P.index)||0)+1,H=x[M];if(H)return{data:{index:M,overflows:N},reset:{placement:H}};let F=(R=N.filter(j=>j.overflows[0]<=0).sort((j,X)=>j.overflows[1]-X.overflows[1])[0])==null?void 0:R.placement;if(!F)switch(h){case"bestFit":{var _;const j=(_=N.map(X=>[X.placement,X.overflows.filter(J=>J>0).reduce((J,G)=>J+G,0)]).sort((X,J)=>X[1]-J[1])[0])==null?void 0:_[0];j&&(F=j);break}case"initialPlacement":F=o}if(i!==F)return{reset:{placement:F}}}return{}}}};function kk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ek(t){return FN.some(e=>t[e]>=0)}const cj=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=bs(t,e);switch(i){case"referenceHidden":{const s=kk(await td(e,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Ek(s)}}}case"escaped":{const s=kk(await td(e,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:Ek(s)}}}default:return{}}}}},dj=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,r=await async function(s,o){const{placement:a,platform:l,elements:u}=s,c=await(l.isRTL==null?void 0:l.isRTL(u.floating)),d=ls(a),h=cu(a),f=Oa(a)==="x",p=["left","top"].includes(d)?-1:1,y=c&&f?-1:1,w=bs(o,s);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...w};return h&&typeof v=="number"&&(g=h==="end"?-1*v:v),f?{x:g*y,y:m*p}:{x:m*p,y:g*y}}(e,t);return{x:n+r.x,y:i+r.y,data:r}}}};function UN(t){return t==="x"?"y":"x"}const hj=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:m,y:g}=w;return{x:m,y:g}}},...l}=bs(t,e),u={x:n,y:i},c=await td(e,l),d=Oa(ls(r)),h=UN(d);let f=u[d],p=u[h];if(s){const w=d==="y"?"bottom":"right";f=vv(f+c[d==="y"?"top":"left"],f,f-c[w])}if(o){const w=h==="y"?"bottom":"right";p=vv(p+c[h==="y"?"top":"left"],p,p-c[w])}const y=a.fn({...e,[d]:f,[h]:p});return{...y,data:{x:y.x-n,y:y.y-i}}}}},fj=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=bs(t,e),c={x:n,y:i},d=Oa(r),h=UN(d);let f=c[d],p=c[h];const y=bs(a,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const v=d==="y"?"height":"width",x=s.reference[d]-s.floating[v]+w.mainAxis,E=s.reference[d]+s.reference[v]-w.mainAxis;f<x?f=x:f>E&&(f=E)}if(u){var m,g;const v=d==="y"?"width":"height",x=["top","left"].includes(ls(r)),E=s.reference[h]-s.floating[v]+(x&&((m=o.offset)==null?void 0:m[h])||0)+(x?0:w.crossAxis),O=s.reference[h]+s.reference[v]+(x?0:((g=o.offset)==null?void 0:g[h])||0)-(x?w.crossAxis:0);p<E?p=E:p>O&&(p=O)}return{[d]:f,[h]:p}}}},pj=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:i,platform:r,elements:s}=e,{apply:o=()=>{},...a}=bs(t,e),l=await td(e,a),u=ls(n),c=cu(n),d=Oa(n)==="x",{width:h,height:f}=i.floating;let p,y;u==="top"||u==="bottom"?(p=u,y=c===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(y=u,p=c==="end"?"top":"bottom");const w=f-l[p],m=h-l[y],g=!e.middlewareData.shift;let v=w,x=m;if(d){const O=h-l.left-l.right;x=c||g?nd(m,O):O}else{const O=f-l.top-l.bottom;v=c||g?nd(w,O):O}if(g&&!c){const O=Fo(l.left,0),N=Fo(l.right,0),P=Fo(l.top,0),R=Fo(l.bottom,0);d?x=h-2*(O!==0||N!==0?O+N:Fo(l.left,l.right)):v=f-2*(P!==0||R!==0?P+R:Fo(l.top,l.bottom))}await o({...e,availableWidth:x,availableHeight:v});const E=await r.getDimensions(s.floating);return h!==E.width||f!==E.height?{reset:{rects:!0}}:{}}}};function ui(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Br(t){return ui(t).getComputedStyle(t)}function VN(t){return t instanceof ui(t).Node}function Co(t){return VN(t)?(t.nodeName||"").toLowerCase():"#document"}function ar(t){return t instanceof HTMLElement||t instanceof ui(t).HTMLElement}function Ck(t){return typeof ShadowRoot<"u"&&(t instanceof ui(t).ShadowRoot||t instanceof ShadowRoot)}function id(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Br(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function mj(t){return["table","td","th"].includes(Co(t))}function wv(t){const e=R1(),n=Br(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function R1(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Em(t){return["html","body","#document"].includes(Co(t))}const bv=Math.min,kl=Math.max,gp=Math.round,ch=Math.floor,Ao=t=>({x:t,y:t});function HN(t){const e=Br(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=ar(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=gp(n)!==s||gp(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function us(t){return t instanceof Element||t instanceof ui(t).Element}function M1(t){return us(t)?t:t.contextElement}function El(t){const e=M1(t);if(!ar(e))return Ao(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=HN(e);let o=(s?gp(n.width):n.width)/i,a=(s?gp(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const gj=Ao(0);function WN(t){const e=ui(t);return R1()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:gj}function xa(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=M1(t);let o=Ao(1);e&&(i?us(i)&&(o=El(i)):o=El(t));const a=function(h,f,p){return f===void 0&&(f=!1),!(!p||f&&p!==ui(h))&&f}(s,n,i)?WN(s):Ao(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=ui(s),f=i&&us(i)?ui(i):i;let p=h.frameElement;for(;p&&i&&f!==h;){const y=El(p),w=p.getBoundingClientRect(),m=getComputedStyle(p),g=w.left+(p.clientLeft+parseFloat(m.paddingLeft))*y.x,v=w.top+(p.clientTop+parseFloat(m.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,d*=y.y,l+=g,u+=v,p=ui(p).frameElement}}return pp({width:c,height:d,x:l,y:u})}function Cm(t){return us(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function cs(t){var e;return(e=(VN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function GN(t){return xa(cs(t)).left+Cm(t).scrollLeft}function Zl(t){if(Co(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ck(t)&&t.host||cs(t);return Ck(e)?e.host:e}function KN(t){const e=Zl(t);return Em(e)?t.ownerDocument?t.ownerDocument.body:t.body:ar(e)&&id(e)?e:KN(e)}function yp(t,e){var n;e===void 0&&(e=[]);const i=KN(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=ui(i);return r?e.concat(s,s.visualViewport||[],id(i)?i:[]):e.concat(i,yp(i))}function Ak(t,e,n){let i;if(e==="viewport")i=function(r,s){const o=ui(r),a=cs(r),l=o.visualViewport;let u=a.clientWidth,c=a.clientHeight,d=0,h=0;if(l){u=l.width,c=l.height;const f=R1();(!f||f&&s==="fixed")&&(d=l.offsetLeft,h=l.offsetTop)}return{width:u,height:c,x:d,y:h}}(t,n);else if(e==="document")i=function(r){const s=cs(r),o=Cm(r),a=r.ownerDocument.body,l=kl(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),u=kl(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let c=-o.scrollLeft+GN(r);const d=-o.scrollTop;return Br(a).direction==="rtl"&&(c+=kl(s.clientWidth,a.clientWidth)-l),{width:l,height:u,x:c,y:d}}(cs(t));else if(us(e))i=function(r,s){const o=xa(r,!0,s==="fixed"),a=o.top+r.clientTop,l=o.left+r.clientLeft,u=ar(r)?El(r):Ao(1);return{width:r.clientWidth*u.x,height:r.clientHeight*u.y,x:l*u.x,y:a*u.y}}(e,n);else{const r=WN(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return pp(i)}function XN(t,e){const n=Zl(t);return!(n===e||!us(n)||Em(n))&&(Br(n).position==="fixed"||XN(n,e))}function yj(t,e,n){const i=ar(e),r=cs(e),s=n==="fixed",o=xa(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ao(0);if(i||!i&&!s)if((Co(e)!=="body"||id(r))&&(a=Cm(e)),ar(e)){const u=xa(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else r&&(l.x=GN(r));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Pk(t,e){return ar(t)&&Br(t).position!=="fixed"?e?e(t):t.offsetParent:null}function Ok(t,e){const n=ui(t);if(!ar(t))return n;let i=Pk(t,e);for(;i&&mj(i)&&Br(i).position==="static";)i=Pk(i,e);return i&&(Co(i)==="html"||Co(i)==="body"&&Br(i).position==="static"&&!wv(i))?n:i||function(r){let s=Zl(r);for(;ar(s)&&!Em(s);){if(wv(s))return s;s=Zl(s)}return null}(t)||n}const vj={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=ar(n),s=cs(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=Ao(1);const l=Ao(0);if((r||!r&&i!=="fixed")&&((Co(n)!=="body"||id(s))&&(o=Cm(n)),ar(n))){const u=xa(n);a=El(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},getDocumentElement:cs,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[...n==="clippingAncestors"?function(l,u){const c=u.get(l);if(c)return c;let d=yp(l).filter(y=>us(y)&&Co(y)!=="body"),h=null;const f=Br(l).position==="fixed";let p=f?Zl(l):l;for(;us(p)&&!Em(p);){const y=Br(p),w=wv(p);w||y.position!=="fixed"||(h=null),(f?!w&&!h:!w&&y.position==="static"&&h&&["absolute","fixed"].includes(h.position)||id(p)&&!w&&XN(l,p))?d=d.filter(m=>m!==p):h=y,p=Zl(p)}return u.set(l,d),d}(e,this._c):[].concat(n),i],o=s[0],a=s.reduce((l,u)=>{const c=Ak(e,u,r);return l.top=kl(c.top,l.top),l.right=bv(c.right,l.right),l.bottom=bv(c.bottom,l.bottom),l.left=kl(c.left,l.left),l},Ak(e,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:Ok,getElementRects:async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||Ok,s=this.getDimensions;return{reference:yj(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return HN(t)},getScale:El,isElement:us,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function wj(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=M1(t),c=r||s?[...u?yp(u):[],...yp(e)]:[];c.forEach(w=>{r&&w.addEventListener("scroll",n,{passive:!0}),s&&w.addEventListener("resize",n)});const d=u&&a?function(w,m){let g,v=null;const x=cs(w);function E(){clearTimeout(g),v&&v.disconnect(),v=null}return function O(N,P){N===void 0&&(N=!1),P===void 0&&(P=1),E();const{left:R,top:_,width:M,height:H}=w.getBoundingClientRect();if(N||m(),!M||!H)return;const F={rootMargin:-ch(_)+"px "+-ch(x.clientWidth-(R+M))+"px "+-ch(x.clientHeight-(_+H))+"px "+-ch(R)+"px",threshold:kl(0,bv(1,P))||1};let j=!0;function X(J){const G=J[0].intersectionRatio;if(G!==P){if(!j)return O();G?O(!1,G):g=setTimeout(()=>{O(!1,1e-7)},100)}j=!1}try{v=new IntersectionObserver(X,{...F,root:x.ownerDocument})}catch{v=new IntersectionObserver(X,F)}v.observe(w)}(!0),E}(u,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(w=>{let[m]=w;m&&m.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let y=l?xa(t):null;return l&&function w(){const m=xa(t);!y||m.x===y.x&&m.y===y.y&&m.width===y.width&&m.height===y.height||n(),y=m,h=requestAnimationFrame(w)}(),n(),()=>{c.forEach(w=>{r&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const bj=(t,e,n)=>{const i=new Map,r={platform:vj,...n},s={...r.platform,_c:i};return sj(t,e,{...r,platform:s})},xj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?Sk({element:i.current,padding:r}).fn(n):{}:i?Sk({element:i,padding:r}).fn(n):{}}}};var nf=typeof document<"u"?k.useLayoutEffect:k.useEffect;function vp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!vp(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!vp(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function ZN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Nk(t,e){const n=ZN(t);return Math.round(e*n)/n}function Tk(t){const e=k.useRef(t);return nf(()=>{e.current=t}),e}function Sj(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=k.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=k.useState(i);vp(h,i)||f(i);const[p,y]=k.useState(null),[w,m]=k.useState(null),g=k.useCallback(J=>{J!=O.current&&(O.current=J,y(J))},[y]),v=k.useCallback(J=>{J!==N.current&&(N.current=J,m(J))},[m]),x=s||p,E=o||w,O=k.useRef(null),N=k.useRef(null),P=k.useRef(c),R=Tk(l),_=Tk(r),M=k.useCallback(()=>{if(!O.current||!N.current)return;const J={placement:e,strategy:n,middleware:h};_.current&&(J.platform=_.current),bj(O.current,N.current,J).then(G=>{const L={...G,isPositioned:!0};H.current&&!vp(P.current,L)&&(P.current=L,Ca.flushSync(()=>{d(L)}))})},[h,e,n,_]);nf(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(J=>({...J,isPositioned:!1})))},[u]);const H=k.useRef(!1);nf(()=>(H.current=!0,()=>{H.current=!1}),[]),nf(()=>{if(x&&(O.current=x),E&&(N.current=E),x&&E){if(R.current)return R.current(x,E,M);M()}},[x,E,M,R]);const F=k.useMemo(()=>({reference:O,floating:N,setReference:g,setFloating:v}),[g,v]),j=k.useMemo(()=>({reference:x,floating:E}),[x,E]),X=k.useMemo(()=>{const J={position:n,left:0,top:0};if(!j.floating)return J;const G=Nk(j.floating,c.x),L=Nk(j.floating,c.y);return a?{...J,transform:"translate("+G+"px, "+L+"px)",...ZN(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:L}},[n,a,j.floating,c.x,c.y]);return k.useMemo(()=>({...c,update:M,refs:F,elements:j,floatingStyles:X}),[c,M,F,j,X])}function D1(t){const[e,n]=k.useState(void 0);return ws(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}const JN="Popper",[YN,qN]=xd(JN),[kj,QN]=YN(JN),Ej=t=>{const{__scopePopper:e,children:n}=t,[i,r]=k.useState(null);return k.createElement(kj,{scope:e,anchor:i,onAnchorChange:r},n)},Cj="PopperAnchor",Aj=k.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=QN(Cj,n),o=k.useRef(null),a=Dt(e,o);return k.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:k.createElement(Ht.div,Fe({},r,{ref:a}))}),eT="PopperContent",[Pj,iG]=YN(eT),Oj=k.forwardRef((t,e)=>{var n,i,r,s,o,a,l,u;const{__scopePopper:c,side:d="bottom",sideOffset:h=0,align:f="center",alignOffset:p=0,arrowPadding:y=0,collisionBoundary:w=[],collisionPadding:m=0,sticky:g="partial",hideWhenDetached:v=!1,avoidCollisions:x=!0,onPlaced:E,...O}=t,N=QN(eT,c),[P,R]=k.useState(null),_=Dt(e,Z=>R(Z)),[M,H]=k.useState(null),F=D1(M),j=(n=F==null?void 0:F.width)!==null&&n!==void 0?n:0,X=(i=F==null?void 0:F.height)!==null&&i!==void 0?i:0,J=d+(f!=="center"?"-"+f:""),G=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},L=Array.isArray(w)?w:[w],I=L.length>0,Y={padding:G,boundary:L.filter(Nj),altBoundary:I},{refs:ae,floatingStyles:ve,placement:Se,isPositioned:U,middlewareData:B}=Sj({strategy:"fixed",placement:J,whileElementsMounted:wj,elements:{reference:N.anchor},middleware:[dj({mainAxis:h+X,alignmentAxis:p}),x&&hj({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?fj():void 0,...Y}),x&&uj({...Y}),pj({...Y,apply:({elements:Z,rects:Q,availableWidth:Ne,availableHeight:de})=>{const{width:Te,height:ze}=Q.reference,me=Z.floating.style;me.setProperty("--radix-popper-available-width",`${Ne}px`),me.setProperty("--radix-popper-available-height",`${de}px`),me.setProperty("--radix-popper-anchor-width",`${Te}px`),me.setProperty("--radix-popper-anchor-height",`${ze}px`)}}),M&&xj({element:M,padding:y}),Tj({arrowWidth:j,arrowHeight:X}),v&&cj({strategy:"referenceHidden"})]}),[W,b]=tT(Se),A=vs(E);ws(()=>{U&&(A==null||A())},[U,A]);const D=(r=B.arrow)===null||r===void 0?void 0:r.x,T=(s=B.arrow)===null||s===void 0?void 0:s.y,z=((o=B.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[K,V]=k.useState();return ws(()=>{P&&V(window.getComputedStyle(P).zIndex)},[P]),k.createElement("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...ve,transform:U?ve.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(a=B.transformOrigin)===null||a===void 0?void 0:a.x,(l=B.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},k.createElement(Pj,{scope:c,placedSide:W,onArrowChange:H,arrowX:D,arrowY:T,shouldHideArrow:z},k.createElement(Ht.div,Fe({"data-side":W,"data-align":b},O,{ref:_,style:{...O.style,animation:U?void 0:"none",opacity:(u=B.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function Nj(t){return t!==null}const Tj=t=>({name:"transformOrigin",options:t,fn(e){var n,i,r,s,o;const{placement:a,rects:l,middlewareData:u}=e,d=((n=u.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=d?0:t.arrowWidth,f=d?0:t.arrowHeight,[p,y]=tT(a),w={start:"0%",center:"50%",end:"100%"}[y],m=((i=(r=u.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+h/2,g=((s=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+f/2;let v="",x="";return p==="bottom"?(v=d?w:`${m}px`,x=`${-f}px`):p==="top"?(v=d?w:`${m}px`,x=`${l.floating.height+f}px`):p==="right"?(v=`${-f}px`,x=d?w:`${g}px`):p==="left"&&(v=`${l.floating.width+f}px`,x=d?w:`${g}px`),{data:{x:v,y:x}}}});function tT(t){const[e,n="center"]=t.split("-");return[e,n]}const Rj=Ej,Mj=Aj,Dj=Oj,_j=k.forwardRef((t,e)=>{var n;const{container:i=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...r}=t;return i?m2.createPortal(k.createElement(Ht.div,Fe({},r,{ref:e})),i):null});function wp({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=$j({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:i,a=vs(n),l=k.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else r(u)},[s,t,r,a]);return[o,l]}function $j({defaultProp:t,onChange:e}){const n=k.useState(t),[i]=n,r=k.useRef(i),s=vs(e);return k.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}function _1(t){const e=k.useRef({value:t,previous:t});return k.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const Lj=k.forwardRef((t,e)=>k.createElement(Ht.span,Fe({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var Ij=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ia=new WeakMap,dh=new WeakMap,hh={},ny=0,nT=function(t){return t&&(t.host||nT(t.parentNode))},Bj=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=nT(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},zj=function(t,e,n,i){var r=Bj(e,Array.isArray(t)?t:[t]);hh[n]||(hh[n]=new WeakMap);var s=hh[n],o=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else{var f=h.getAttribute(i),p=f!==null&&f!=="false",y=(Ia.get(h)||0)+1,w=(s.get(h)||0)+1;Ia.set(h,y),s.set(h,w),o.push(h),y===1&&p&&dh.set(h,!0),w===1&&h.setAttribute(n,"true"),p||h.setAttribute(i,"true")}})};return c(e),a.clear(),ny++,function(){o.forEach(function(d){var h=Ia.get(d)-1,f=s.get(d)-1;Ia.set(d,h),s.set(d,f),h||(dh.has(d)||d.removeAttribute(i),dh.delete(d)),f||d.removeAttribute(n)}),ny--,ny||(Ia=new WeakMap,Ia=new WeakMap,dh=new WeakMap,hh={})}},jj=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=e||Ij(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),zj(i,r,n,"aria-hidden")):function(){return null}},Ar=function(){return Ar=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ar.apply(this,arguments)};function iT(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Fj(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var rf="right-scroll-bar-position",sf="width-before-scroll-bar",Uj="with-scroll-bars-hidden",Vj="--removed-body-scroll-bar-size";function Hj(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Wj(t,e){var n=k.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}function Gj(t,e){return Wj(e||null,function(n){return t.forEach(function(i){return Hj(i,n)})})}function Kj(t){return t}function Xj(t,e){e===void 0&&(e=Kj);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return r}function Zj(t){t===void 0&&(t={});var e=Xj(null);return e.options=Ar({async:!0,ssr:!1},t),e}var rT=function(t){var e=t.sideCar,n=iT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return k.createElement(i,Ar({},n))};rT.isSideCarExport=!0;function Jj(t,e){return t.useMedium(e),rT}var sT=Zj(),iy=function(){},Am=k.forwardRef(function(t,e){var n=k.useRef(null),i=k.useState({onScrollCapture:iy,onWheelCapture:iy,onTouchMoveCapture:iy}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,y=t.allowPinchZoom,w=t.as,m=w===void 0?"div":w,g=iT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),v=h,x=Gj([n,e]),E=Ar(Ar({},g),r);return k.createElement(k.Fragment,null,c&&k.createElement(v,{sideCar:sT,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!y,lockRef:n}),o?k.cloneElement(k.Children.only(a),Ar(Ar({},E),{ref:x})):k.createElement(m,Ar({},E,{className:l,ref:x}),a))});Am.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Am.classNames={fullWidth:sf,zeroRight:rf};var Rk,Yj=function(){if(Rk)return Rk;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qj(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Yj();return e&&t.setAttribute("nonce",e),t}function Qj(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function e9(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var t9=function(){var t=0,e=null;return{add:function(n){t==0&&(e=qj())&&(Qj(e,n),e9(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},n9=function(){var t=t9();return function(e,n){k.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},oT=function(){var t=n9(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},i9={left:0,top:0,right:0,gap:0},ry=function(t){return parseInt(t||"",10)||0},r9=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[ry(n),ry(i),ry(r)]},s9=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return i9;var e=r9(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},o9=oT(),a9=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Uj,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rf,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(sf,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(rf," .").concat(rf,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(sf," .").concat(sf,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body {
    `).concat(Vj,": ").concat(a,`px;
  }
`)},l9=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i,s=k.useMemo(function(){return s9(r)},[r]);return k.createElement(o9,{styles:a9(s,!e,r,n?"":"!important")})},xv=!1;if(typeof window<"u")try{var fh=Object.defineProperty({},"passive",{get:function(){return xv=!0,!0}});window.addEventListener("test",fh,fh),window.removeEventListener("test",fh,fh)}catch{xv=!1}var Ba=xv?{passive:!1}:!1,u9=function(t){return t.tagName==="TEXTAREA"},aT=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!u9(t)&&n[e]==="visible")},c9=function(t){return aT(t,"overflowY")},d9=function(t){return aT(t,"overflowX")},Mk=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=lT(t,n);if(i){var r=uT(t,n),s=r[1],o=r[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},h9=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},f9=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},lT=function(t,e){return t==="v"?c9(e):d9(e)},uT=function(t,e){return t==="v"?h9(e):f9(e)},p9=function(t,e){return t==="h"&&e==="rtl"?-1:1},m9=function(t,e,n,i,r){var s=p9(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=uT(t,a),p=f[0],y=f[1],w=f[2],m=y-w-s*p;(p||m)&&lT(t,a)&&(d+=m,h+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(r&&d===0||!r&&o>d)||!c&&(r&&h===0||!r&&-o>h))&&(u=!0),u},ph=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Dk=function(t){return[t.deltaX,t.deltaY]},_k=function(t){return t&&"current"in t?t.current:t},g9=function(t,e){return t[0]===e[0]&&t[1]===e[1]},y9=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},v9=0,za=[];function w9(t){var e=k.useRef([]),n=k.useRef([0,0]),i=k.useRef(),r=k.useState(v9++)[0],s=k.useState(function(){return oT()})[0],o=k.useRef(t);k.useEffect(function(){o.current=t},[t]),k.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var y=Fj([t.lockRef.current],(t.shards||[]).map(_k),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=k.useCallback(function(y,w){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var m=ph(y),g=n.current,v="deltaX"in y?y.deltaX:g[0]-m[0],x="deltaY"in y?y.deltaY:g[1]-m[1],E,O=y.target,N=Math.abs(v)>Math.abs(x)?"h":"v";if("touches"in y&&N==="h"&&O.type==="range")return!1;var P=Mk(N,O);if(!P)return!0;if(P?E=N:(E=N==="v"?"h":"v",P=Mk(N,O)),!P)return!1;if(!i.current&&"changedTouches"in y&&(v||x)&&(i.current=E),!E)return!0;var R=i.current||E;return m9(R,w,y,R==="h"?v:x,!0)},[]),l=k.useCallback(function(y){var w=y;if(!(!za.length||za[za.length-1]!==s)){var m="deltaY"in w?Dk(w):ph(w),g=e.current.filter(function(E){return E.name===w.type&&E.target===w.target&&g9(E.delta,m)})[0];if(g&&g.should){w.cancelable&&w.preventDefault();return}if(!g){var v=(o.current.shards||[]).map(_k).filter(Boolean).filter(function(E){return E.contains(w.target)}),x=v.length>0?a(w,v[0]):!o.current.noIsolation;x&&w.cancelable&&w.preventDefault()}}},[]),u=k.useCallback(function(y,w,m,g){var v={name:y,delta:w,target:m,should:g};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(x){return x!==v})},1)},[]),c=k.useCallback(function(y){n.current=ph(y),i.current=void 0},[]),d=k.useCallback(function(y){u(y.type,Dk(y),y.target,a(y,t.lockRef.current))},[]),h=k.useCallback(function(y){u(y.type,ph(y),y.target,a(y,t.lockRef.current))},[]);k.useEffect(function(){return za.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ba),document.addEventListener("touchmove",l,Ba),document.addEventListener("touchstart",c,Ba),function(){za=za.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,Ba),document.removeEventListener("touchmove",l,Ba),document.removeEventListener("touchstart",c,Ba)}},[]);var f=t.removeScrollBar,p=t.inert;return k.createElement(k.Fragment,null,p?k.createElement(s,{styles:y9(r)}):null,f?k.createElement(l9,{gapMode:"margin"}):null)}const b9=Jj(sT,w9);var cT=k.forwardRef(function(t,e){return k.createElement(Am,Ar({},t,{ref:e,sideCar:b9}))});cT.classNames=Am.classNames;const x9=cT,S9=[" ","Enter","ArrowUp","ArrowDown"],k9=[" ","Enter"],Pm="Select",[Om,$1,E9]=$N(Pm),[du,rG]=xd(Pm,[E9,qN]),L1=qN(),[C9,Na]=du(Pm),[A9,P9]=du(Pm),O9=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f}=t,p=L1(e),[y,w]=k.useState(null),[m,g]=k.useState(null),[v,x]=k.useState(!1),E=LN(u),[O=!1,N]=wp({prop:i,defaultProp:r,onChange:s}),[P,R]=wp({prop:o,defaultProp:a,onChange:l}),_=k.useRef(null),M=y?!!y.closest("form"):!0,[H,F]=k.useState(new Set),j=Array.from(H).map(X=>X.props.value).join(";");return k.createElement(Rj,p,k.createElement(C9,{required:f,scope:e,trigger:y,onTriggerChange:w,valueNode:m,onValueNodeChange:g,valueNodeHasChildren:v,onValueNodeHasChildrenChange:x,contentId:zN(),value:P,onValueChange:R,open:O,onOpenChange:N,dir:E,triggerPointerDownPosRef:_,disabled:h},k.createElement(Om.Provider,{scope:e},k.createElement(A9,{scope:t.__scopeSelect,onNativeOptionAdd:k.useCallback(X=>{F(J=>new Set(J).add(X))},[]),onNativeOptionRemove:k.useCallback(X=>{F(J=>{const G=new Set(J);return G.delete(X),G})},[])},n)),M?k.createElement(hT,{key:j,"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:P,onChange:X=>R(X.target.value),disabled:h},P===void 0?k.createElement("option",{value:""}):null,Array.from(H)):null))},N9="SelectTrigger",T9=k.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=L1(n),o=Na(N9,n),a=o.disabled||i,l=Dt(e,o.onTriggerChange),u=$1(n),[c,d,h]=fT(p=>{const y=u().filter(g=>!g.disabled),w=y.find(g=>g.value===o.value),m=pT(y,p,w);m!==void 0&&o.onValueChange(m.value)}),f=()=>{a||(o.onOpenChange(!0),h())};return k.createElement(Mj,Fe({asChild:!0},s),k.createElement(Ht.button,Fe({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},r,{ref:l,onClick:Ot(r.onClick,p=>{p.currentTarget.focus()}),onPointerDown:Ot(r.onPointerDown,p=>{const y=p.target;y.hasPointerCapture(p.pointerId)&&y.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(f(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:Ot(r.onKeyDown,p=>{const y=c.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(y&&p.key===" ")&&S9.includes(p.key)&&(f(),p.preventDefault())})})))}),R9="SelectValue",M9=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o,...a}=t,l=Na(R9,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=Dt(e,l.onValueNodeChange);return ws(()=>{u(c)},[u,c]),k.createElement(Ht.span,Fe({},a,{ref:d,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:s)}),D9=k.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return k.createElement(Ht.span,Fe({"aria-hidden":!0},r,{ref:e}),i||"")}),_9=t=>k.createElement(_j,Fe({asChild:!0},t)),Jl="SelectContent",$9=k.forwardRef((t,e)=>{const n=Na(Jl,t.__scopeSelect),[i,r]=k.useState();if(ws(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Ca.createPortal(k.createElement(dT,{scope:t.__scopeSelect},k.createElement(Om.Slot,{scope:t.__scopeSelect},k.createElement("div",null,t.children))),s):null}return k.createElement(L9,Fe({},t,{ref:e}))}),Ur=10,[dT,Nm]=du(Jl),L9=k.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:y,avoidCollisions:w,...m}=t,g=Na(Jl,n),[v,x]=k.useState(null),[E,O]=k.useState(null),N=Dt(e,b=>x(b)),[P,R]=k.useState(null),[_,M]=k.useState(null),H=$1(n),[F,j]=k.useState(!1),X=k.useRef(!1);k.useEffect(()=>{if(v)return jj(v)},[v]),Zz();const J=k.useCallback(b=>{const[A,...D]=H().map(K=>K.ref.current),[T]=D.slice(-1),z=document.activeElement;for(const K of b)if(K===z||(K==null||K.scrollIntoView({block:"nearest"}),K===A&&E&&(E.scrollTop=0),K===T&&E&&(E.scrollTop=E.scrollHeight),K==null||K.focus(),document.activeElement!==z))return},[H,E]),G=k.useCallback(()=>J([P,v]),[J,P,v]);k.useEffect(()=>{F&&G()},[F,G]);const{onOpenChange:L,triggerPointerDownPosRef:I}=g;k.useEffect(()=>{if(v){let b={x:0,y:0};const A=T=>{var z,K,V,Z;b={x:Math.abs(Math.round(T.pageX)-((z=(K=I.current)===null||K===void 0?void 0:K.x)!==null&&z!==void 0?z:0)),y:Math.abs(Math.round(T.pageY)-((V=(Z=I.current)===null||Z===void 0?void 0:Z.y)!==null&&V!==void 0?V:0))}},D=T=>{b.x<=10&&b.y<=10?T.preventDefault():v.contains(T.target)||L(!1),document.removeEventListener("pointermove",A),I.current=null};return I.current!==null&&(document.addEventListener("pointermove",A),document.addEventListener("pointerup",D,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",D,{capture:!0})}}},[v,L,I]),k.useEffect(()=>{const b=()=>L(!1);return window.addEventListener("blur",b),window.addEventListener("resize",b),()=>{window.removeEventListener("blur",b),window.removeEventListener("resize",b)}},[L]);const[Y,ae]=fT(b=>{const A=H().filter(z=>!z.disabled),D=A.find(z=>z.ref.current===document.activeElement),T=pT(A,b,D);T&&setTimeout(()=>T.ref.current.focus())}),ve=k.useCallback((b,A,D)=>{const T=!X.current&&!D;(g.value!==void 0&&g.value===A||T)&&(R(b),T&&(X.current=!0))},[g.value]),Se=k.useCallback(()=>v==null?void 0:v.focus(),[v]),U=k.useCallback((b,A,D)=>{const T=!X.current&&!D;(g.value!==void 0&&g.value===A||T)&&M(b)},[g.value]),B=i==="popper"?$k:I9,W=B===$k?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:y,avoidCollisions:w}:{};return k.createElement(dT,{scope:n,content:v,viewport:E,onViewportChange:O,itemRefCallback:ve,selectedItem:P,onItemLeave:Se,itemTextRefCallback:U,focusSelectedItem:G,selectedItemText:_,position:i,isPositioned:F,searchRef:Y},k.createElement(x9,{as:ed,allowPinchZoom:!0},k.createElement(Jz,{asChild:!0,trapped:g.open,onMountAutoFocus:b=>{b.preventDefault()},onUnmountAutoFocus:Ot(r,b=>{var A;(A=g.trigger)===null||A===void 0||A.focus({preventScroll:!0}),b.preventDefault()})},k.createElement(Gz,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:b=>b.preventDefault(),onDismiss:()=>g.onOpenChange(!1)},k.createElement(B,Fe({role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:b=>b.preventDefault()},m,W,{onPlaced:()=>j(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:Ot(m.onKeyDown,b=>{const A=b.ctrlKey||b.altKey||b.metaKey;if(b.key==="Tab"&&b.preventDefault(),!A&&b.key.length===1&&ae(b.key),["ArrowUp","ArrowDown","Home","End"].includes(b.key)){let T=H().filter(z=>!z.disabled).map(z=>z.ref.current);if(["ArrowUp","End"].includes(b.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(b.key)){const z=b.target,K=T.indexOf(z);T=T.slice(K+1)}setTimeout(()=>J(T)),b.preventDefault()}})}))))))}),I9=k.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Na(Jl,n),o=Nm(Jl,n),[a,l]=k.useState(null),[u,c]=k.useState(null),d=Dt(e,N=>c(N)),h=$1(n),f=k.useRef(!1),p=k.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:m,focusSelectedItem:g}=o,v=k.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&y&&w&&m){const N=s.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),R=s.valueNode.getBoundingClientRect(),_=m.getBoundingClientRect();if(s.dir!=="rtl"){const z=_.left-P.left,K=R.left-z,V=N.left-K,Z=N.width+V,Q=Math.max(Z,P.width),Ne=window.innerWidth-Ur,de=fp(K,[Ur,Ne-Q]);a.style.minWidth=Z+"px",a.style.left=de+"px"}else{const z=P.right-_.right,K=window.innerWidth-R.right-z,V=window.innerWidth-N.right-K,Z=N.width+V,Q=Math.max(Z,P.width),Ne=window.innerWidth-Ur,de=fp(K,[Ur,Ne-Q]);a.style.minWidth=Z+"px",a.style.right=de+"px"}const M=h(),H=window.innerHeight-Ur*2,F=y.scrollHeight,j=window.getComputedStyle(u),X=parseInt(j.borderTopWidth,10),J=parseInt(j.paddingTop,10),G=parseInt(j.borderBottomWidth,10),L=parseInt(j.paddingBottom,10),I=X+J+F+L+G,Y=Math.min(w.offsetHeight*5,I),ae=window.getComputedStyle(y),ve=parseInt(ae.paddingTop,10),Se=parseInt(ae.paddingBottom,10),U=N.top+N.height/2-Ur,B=H-U,W=w.offsetHeight/2,b=w.offsetTop+W,A=X+J+b,D=I-A;if(A<=U){const z=w===M[M.length-1].ref.current;a.style.bottom="0px";const K=u.clientHeight-y.offsetTop-y.offsetHeight,V=Math.max(B,W+(z?Se:0)+K+G),Z=A+V;a.style.height=Z+"px"}else{const z=w===M[0].ref.current;a.style.top="0px";const V=Math.max(U,X+y.offsetTop+(z?ve:0)+W)+D;a.style.height=V+"px",y.scrollTop=A-U+y.offsetTop}a.style.margin=`${Ur}px 0`,a.style.minHeight=Y+"px",a.style.maxHeight=H+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,y,w,m,s.dir,i]);ws(()=>v(),[v]);const[x,E]=k.useState();ws(()=>{u&&E(window.getComputedStyle(u).zIndex)},[u]);const O=k.useCallback(N=>{N&&p.current===!0&&(v(),g==null||g(),p.current=!1)},[v,g]);return k.createElement(B9,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:O},k.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x}},k.createElement(Ht.div,Fe({},r,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}}))))}),$k=k.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Ur,...s}=t,o=L1(n);return k.createElement(Dj,Fe({},o,s,{ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[B9,z9]=du(Jl,{}),Lk="SelectViewport",j9=k.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Nm(Lk,n),s=z9(Lk,n),o=Dt(e,r.onViewportChange),a=k.useRef(0);return k.createElement(k.Fragment,null,k.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),k.createElement(Om.Slot,{scope:n},k.createElement(Ht.div,Fe({"data-radix-select-viewport":"",role:"presentation"},i,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...i.style},onScroll:Ot(i.onScroll,l=>{const u=l.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&c){const h=Math.abs(a.current-u.scrollTop);if(h>0){const f=window.innerHeight-Ur*2,p=parseFloat(c.style.minHeight),y=parseFloat(c.style.height),w=Math.max(p,y);if(w<f){const m=w+h,g=Math.min(f,m),v=m-g;c.style.height=g+"px",c.style.bottom==="0px"&&(u.scrollTop=v>0?v:0,c.style.justifyContent="flex-end")}}}a.current=u.scrollTop})}))))}),F9="SelectGroup";du(F9);const Sv="SelectItem",[U9,V9]=du(Sv),H9=k.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Na(Sv,n),l=Nm(Sv,n),u=a.value===i,[c,d]=k.useState(s??""),[h,f]=k.useState(!1),p=Dt(e,m=>{var g;return(g=l.itemRefCallback)===null||g===void 0?void 0:g.call(l,m,i,r)}),y=zN(),w=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};return k.createElement(U9,{scope:n,value:i,disabled:r,textId:y,isSelected:u,onItemTextChange:k.useCallback(m=>{d(g=>{var v;return g||((v=m==null?void 0:m.textContent)!==null&&v!==void 0?v:"").trim()})},[])},k.createElement(Om.ItemSlot,{scope:n,value:i,disabled:r,textValue:c},k.createElement(Ht.div,Fe({role:"option","aria-labelledby":y,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1},o,{ref:p,onFocus:Ot(o.onFocus,()=>f(!0)),onBlur:Ot(o.onBlur,()=>f(!1)),onPointerUp:Ot(o.onPointerUp,w),onPointerMove:Ot(o.onPointerMove,m=>{if(r){var g;(g=l.onItemLeave)===null||g===void 0||g.call(l)}else m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ot(o.onPointerLeave,m=>{if(m.currentTarget===document.activeElement){var g;(g=l.onItemLeave)===null||g===void 0||g.call(l)}}),onKeyDown:Ot(o.onKeyDown,m=>{var g;((g=l.searchRef)===null||g===void 0?void 0:g.current)!==""&&m.key===" "||(k9.includes(m.key)&&w(),m.key===" "&&m.preventDefault())})}))))}),mh="SelectItemText",W9=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Na(mh,n),a=Nm(mh,n),l=V9(mh,n),u=P9(mh,n),[c,d]=k.useState(null),h=Dt(e,m=>d(m),l.onItemTextChange,m=>{var g;return(g=a.itemTextRefCallback)===null||g===void 0?void 0:g.call(a,m,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=k.useMemo(()=>k.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},f),[l.disabled,l.value,f]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=u;return ws(()=>(y(p),()=>w(p)),[y,w,p]),k.createElement(k.Fragment,null,k.createElement(Ht.span,Fe({id:l.textId},s,{ref:h})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ca.createPortal(s.children,o.valueNode):null)}),hT=k.forwardRef((t,e)=>{const{value:n,...i}=t,r=k.useRef(null),s=Dt(e,r),o=_1(n);return k.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),k.createElement(Lj,{asChild:!0},k.createElement("select",Fe({},i,{ref:s,defaultValue:n})))});hT.displayName="BubbleSelect";function fT(t){const e=vs(t),n=k.useRef(""),i=k.useRef(0),r=k.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(i.current),u!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=k.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function pT(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=G9(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function G9(t,e){return t.map((n,i)=>t[(e+i)%t.length])}const K9=O9,mT=T9,X9=M9,Z9=D9,J9=_9,gT=$9,Y9=j9,yT=H9,q9=W9,sy=K9,oy=X9,of=k.forwardRef(({className:t,children:e,...n},i)=>S.jsxs(mT,{ref:i,className:Le("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,S.jsx(Z9,{asChild:!0,children:S.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));of.displayName=mT.displayName;const af=k.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>S.jsx(J9,{children:S.jsx(gT,{ref:r,className:Le("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:S.jsx(Y9,{className:"p-1",children:e})})}));af.displayName=gT.displayName;const Gu=k.forwardRef(({className:t,children:e,...n},i)=>S.jsx(yT,{ref:i,className:Le("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:S.jsx(q9,{children:e})}));Gu.displayName=yT.displayName;const vT=["PageUp","PageDown"],wT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],bT={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Sd="Slider",[kv,Q9,eF]=$N(Sd),[xT,sG]=xd(Sd,[eF]),[tF,Tm]=xT(Sd),nF=k.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[i],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,...p}=t,[y,w]=k.useState(null),m=Dt(e,j=>w(j)),g=k.useRef(new Set),v=k.useRef(0),x=o==="horizontal",E=y?!!y.closest("form"):!0,O=x?iF:rF,[N=[],P]=wp({prop:c,defaultProp:u,onChange:j=>{var X;(X=[...g.current][v.current])===null||X===void 0||X.focus(),d(j)}}),R=k.useRef(N);function _(j){const X=fF(N,j);F(j,X)}function M(j){F(j,v.current)}function H(){const j=R.current[v.current];N[v.current]!==j&&h(N)}function F(j,X,{commit:J}={commit:!1}){const G=yF(s),L=vF(Math.round((j-i)/s)*s+i,G),I=fp(L,[i,r]);P((Y=[])=>{const ae=dF(Y,I,X);if(gF(ae,l*s)){v.current=ae.indexOf(I);const ve=String(ae)!==String(Y);return ve&&J&&h(ae),ve?ae:Y}else return Y})}return k.createElement(tF,{scope:t.__scopeSlider,disabled:a,min:i,max:r,valueIndexToChangeRef:v,thumbs:g.current,values:N,orientation:o},k.createElement(kv.Provider,{scope:t.__scopeSlider},k.createElement(kv.Slot,{scope:t.__scopeSlider},k.createElement(O,Fe({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:m,onPointerDown:Ot(p.onPointerDown,()=>{a||(R.current=N)}),min:i,max:r,inverted:f,onSlideStart:a?void 0:_,onSlideMove:a?void 0:M,onSlideEnd:a?void 0:H,onHomeKeyDown:()=>!a&&F(i,0,{commit:!0}),onEndKeyDown:()=>!a&&F(r,N.length-1,{commit:!0}),onStepKeyDown:({event:j,direction:X})=>{if(!a){const L=vT.includes(j.key)||j.shiftKey&&wT.includes(j.key)?10:1,I=v.current,Y=N[I],ae=s*L*X;F(Y+ae,I,{commit:!0})}}})))),E&&N.map((j,X)=>k.createElement(cF,{key:X,name:n?n+(N.length>1?"[]":""):void 0,value:j})))}),[ST,kT]=xT(Sd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),iF=k.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=k.useState(null),f=Dt(e,v=>h(v)),p=k.useRef(),y=LN(r),w=y==="ltr",m=w&&!s||!w&&s;function g(v){const x=p.current||d.getBoundingClientRect(),E=[0,x.width],N=I1(E,m?[n,i]:[i,n]);return p.current=x,N(v-x.left)}return k.createElement(ST,{scope:t.__scopeSlider,startEdge:m?"left":"right",endEdge:m?"right":"left",direction:m?1:-1,size:"width"},k.createElement(ET,Fe({dir:y,"data-orientation":"horizontal"},c,{ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const x=g(v.clientX);o==null||o(x)},onSlideMove:v=>{const x=g(v.clientX);a==null||a(x)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:v=>{const E=bT[m?"from-left":"from-right"].includes(v.key);u==null||u({event:v,direction:E?-1:1})}})))}),rF=k.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=k.useRef(null),d=Dt(e,c),h=k.useRef(),f=!r;function p(y){const w=h.current||c.current.getBoundingClientRect(),m=[0,w.height],v=I1(m,f?[i,n]:[n,i]);return h.current=w,v(y-w.top)}return k.createElement(ST,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1},k.createElement(ET,Fe({"data-orientation":"vertical"},u,{ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const w=p(y.clientY);s==null||s(w)},onSlideMove:y=>{const w=p(y.clientY);o==null||o(w)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:y=>{const m=bT[f?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:m?-1:1})}})))}),ET=k.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=Tm(Sd,n);return k.createElement(Ht.span,Fe({},u,{ref:e,onKeyDown:Ot(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):vT.concat(wT).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Ot(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():i(d)}),onPointerMove:Ot(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:Ot(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})}))}),sF="SliderTrack",oF=k.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Tm(sF,n);return k.createElement(Ht.span,Fe({"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation},i,{ref:e}))}),Ik="SliderRange",aF=k.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Tm(Ik,n),s=kT(Ik,n),o=k.useRef(null),a=Dt(e,o),l=r.values.length,u=r.values.map(h=>CT(h,r.min,r.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return k.createElement(Ht.span,Fe({"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0},i,{ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}}))}),Bk="SliderThumb",lF=k.forwardRef((t,e)=>{const n=Q9(t.__scopeSlider),[i,r]=k.useState(null),s=Dt(e,a=>r(a)),o=k.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return k.createElement(uF,Fe({},t,{ref:s,index:o}))}),uF=k.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,...r}=t,s=Tm(Bk,n),o=kT(Bk,n),[a,l]=k.useState(null),u=Dt(e,w=>l(w)),c=D1(a),d=s.values[i],h=d===void 0?0:CT(d,s.min,s.max),f=hF(i,s.values.length),p=c==null?void 0:c[o.size],y=p?pF(p,h,o.direction):0;return k.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),k.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${h}% + ${y}px)`}},k.createElement(kv.ItemSlot,{scope:t.__scopeSlider},k.createElement(Ht.span,Fe({role:"slider","aria-label":t["aria-label"]||f,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},r,{ref:u,style:d===void 0?{display:"none"}:t.style,onFocus:Ot(t.onFocus,()=>{s.valueIndexToChangeRef.current=i})}))))}),cF=t=>{const{value:e,...n}=t,i=k.useRef(null),r=_1(e);return k.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[r,e]),k.createElement("input",Fe({style:{display:"none"}},n,{ref:i,defaultValue:e}))};function dF(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function CT(t,e,n){const s=100/(n-e)*(t-e);return fp(s,[0,100])}function hF(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function fF(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function pF(t,e,n){const i=t/2,s=I1([0,50],[0,i]);return(i-s(e)*n)*n}function mF(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function gF(t,e){if(e>0){const n=mF(t);return Math.min(...n)>=e}return!0}function I1(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function yF(t){return(String(t).split(".")[1]||"").length}function vF(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const AT=nF,wF=oF,bF=aF,xF=lF,lf=k.forwardRef(({className:t,...e},n)=>S.jsxs(AT,{ref:n,className:Le("relative flex touch-none select-none items-center",t),...e,children:[S.jsx(wF,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:S.jsx(bF,{className:"absolute h-full bg-mantis-400"})}),S.jsx(xF,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));lf.displayName=AT.displayName;const PT=ke(!1);function SF({className:t}){const e=_t(),[n,i]=F4();return S.jsxs("div",{className:t,children:[S.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[S.jsx("span",{className:"icon-[lucide--settings] h-6 w-6"})," ",e("settings.title")]}),S.jsxs(ja,{children:[S.jsx(Fa,{children:S.jsxs(Ua,{children:[S.jsx("span",{className:"icon-[lucide--languages] h-6 w-6"}),e("settings.language.label")]})}),S.jsxs(sy,{value:n.language,onValueChange:r=>i(s=>({...s,language:r})),children:[S.jsx(of,{className:"w-32",children:S.jsx(oy,{})}),S.jsxs(af,{children:[S.jsx(Gu,{value:"en",children:S.jsxs("span",{className:"inline-flex items-center gap-2",children:[S.jsx("span",{className:"icon-[circle-flags--uk] h-4 w-4"})," English"]})}),S.jsx(Gu,{value:"es",children:S.jsxs("span",{className:"inline-flex items-center gap-2",children:[S.jsx("span",{className:"icon-[circle-flags--ar] h-4 w-4"})," Espaol"]})})]})]})]}),S.jsx("hr",{className:"border-stone-600"}),S.jsxs(ja,{children:[S.jsxs(Fa,{children:[S.jsxs(Ua,{children:[S.jsx("span",{className:"icon-[lucide--memory-stick] h-6 w-6"}),e("settings.dataOnLoad.label")]}),S.jsx(zk,{children:e("settings.dataOnLoad.description")})]}),S.jsxs(sy,{value:n.dataOnLoad,onValueChange:r=>i(s=>({...s,dataOnLoad:r})),children:[S.jsx(of,{className:"w-32 min-w-[theme(width.32)]",children:S.jsx(oy,{})}),S.jsx(af,{children:PO.map(r=>S.jsx(Gu,{value:r,children:e(`settings.dataOnLoad.${r}`)},r))})]})]}),S.jsxs(ja,{children:[S.jsxs(Fa,{children:[S.jsxs(Ua,{children:[S.jsx("span",{className:"icon-[lucide--monitor-smartphone] h-6 w-6"}),e("settings.devices.label")]}),S.jsx(zk,{children:e("settings.devices.description")})]}),S.jsxs(sy,{value:n.devices,onValueChange:r=>i(s=>({...s,devices:r})),children:[S.jsx(of,{className:"w-48 min-w-[theme(width.48)]",children:S.jsx(oy,{})}),S.jsx(af,{children:OO.map(r=>S.jsx(Gu,{value:r,children:e(`settings.devices.${r}`)},r))})]})]}),S.jsx("hr",{className:"border-stone-600"}),S.jsxs(ja,{children:[S.jsx(Fa,{children:S.jsxs(Ua,{children:[S.jsx("span",{className:"icon-[lucide--gauge] h-6 w-6"}),e("settings.speeds.executionUnit")]})}),S.jsx(lf,{className:"w-44",...ay({value:n.executionUnit,onValueChange:r=>i(s=>({...s,executionUnit:r})),min:500,max:1})})]}),S.jsxs(ja,{children:[S.jsx(Fa,{children:S.jsxs(Ua,{children:[S.jsx("span",{className:"icon-[lucide--clock] h-6 w-6"}),e("settings.speeds.clockSpeed")]})}),S.jsx(lf,{className:"w-44",...ay({value:n.clockSpeed,onValueChange:r=>i(s=>({...s,clockSpeed:r})),min:1e3,max:10})})]}),S.jsxs(ja,{children:[S.jsx(Fa,{children:S.jsxs(Ua,{children:[S.jsx("span",{className:"icon-[lucide--printer] h-6 w-6"}),e("settings.speeds.printerSpeed")]})}),S.jsx(lf,{className:"w-44",...ay({value:n.printerSpeed,onValueChange:r=>i(s=>({...s,printerSpeed:r})),min:1e3,max:10})})]})]})}function ja({children:t}){return S.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Fa({children:t}){return S.jsx("div",{className:"grow",children:t})}function Ua({children:t}){return S.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function zk({children:t}){return S.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function ay({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}function kF(){const t=_t(),[e,n]=w2(PT);return S.jsxs("header",{className:"relative p-2 text-sm text-white",children:[S.jsx(Dz,{className:" absolute inset-0"}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex select-none items-center justify-center",children:[S.jsx("img",{src:"/favicon.svg",className:"mr-2 h-10 w-10"}),S.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",S.jsx("span",{className:"text-mantis-400",children:"Sim"})]})]}),S.jsx("button",{className:Le("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:S.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}var Ti=function(t,e){return Number(t.toFixed(e))},EF=function(t,e){return typeof t=="number"?t:e},ht=function(t,e,n){n&&typeof n=="function"&&n(t,e)},CF=function(t){return-Math.cos(t*Math.PI)/2+.5},AF=function(t){return t},PF=function(t){return t*t},OF=function(t){return t*(2-t)},NF=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},TF=function(t){return t*t*t},RF=function(t){return--t*t*t+1},MF=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},DF=function(t){return t*t*t*t},_F=function(t){return 1- --t*t*t*t},$F=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},LF=function(t){return t*t*t*t*t},IF=function(t){return 1+--t*t*t*t*t},BF=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},OT={easeOut:CF,linear:AF,easeInQuad:PF,easeOutQuad:OF,easeInOutQuad:NF,easeInCubic:TF,easeOutCubic:RF,easeInOutCubic:MF,easeInQuart:DF,easeOutQuart:_F,easeInOutQuart:$F,easeInQuint:LF,easeOutQuint:IF,easeInOutQuint:BF},NT=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Pr=function(t){t.mounted&&(NT(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function TT(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;Pr(t),t.animation=function(){if(!t.mounted)return NT(t.animation);var o=new Date().getTime()-r,a=o/n,l=OT[e],u=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function zF(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Ro(t,e,n,i){var r=zF(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):TT(t,i,n,function(f){var p=a+c*f,y=l+d*f,w=u+h*f;s(p,y,w)})}}function jF(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=i-a,c=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var FF=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,u=t-e-a,c=a,d=i-r-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},B1=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=jF(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=FF(o,l,u,a,c,d,!!r);return h},Ev=function(t,e,n,i){return i?t<e?Ti(e,2):t>n?Ti(n,2):Ti(t,2):Ti(t,2)},Yl=function(t,e){var n=B1(t,e);return t.bounds=n,n};function Rm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=Ev(t,a-d,u+d,i),p=Ev(e,l-h,c+h,i);return{x:f,y:p}}function Mm(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=Rm(d,h,r,s,0,0,null);return f}function kd(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var jk=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o=r==null?void 0:r.contains(s),a=i&&s&&o;if(!a)return!1;var l=Dm(s,n);return!l},Fk=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},UF=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},VF=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function HF(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,y=n>d||n<h,w=i>f||i<p,m=n>d?u.offsetWidth:t.setup.minPositionX||0,g=i>f?u.offsetHeight:t.setup.minPositionY||0,v=Mm(t,m,g,r,t.bounds,a||l),x=v.x,E=v.y;return{scale:r,positionX:y?x:n,positionY:w?E:i}}}function WF(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=Rm(e,n,a,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var GF=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,u=r.positionY;if(!i)return{x:l,y:u};var c=e-i.x,d=n-i.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},bp=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},KF=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},XF=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!i)};function ZF(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function Uk(t,e,n,i,r,s,o,a,l,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return i?e:Ev(t,s,o,r)}function JF(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function YF(t,e){var n=KF(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var u=JF(o,a),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=l-r,y=c*c+d*d,w=Math.sqrt(y)/p;t.velocity={velocityX:h,velocityY:f,total:w}}t.lastMousePosition=e,t.velocityTime=l}}function qF(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=XF(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,y=i.zoomAnimation,w=i.panning,m=w.lockAxisY,g=w.lockAxisX,v=y.animationType,x=p.sizeX,E=p.sizeY,O=p.velocityAlignmentTime,N=O,P=ZF(t,l),R=Math.max(P,N),_=bp(t,x),M=bp(t,E),H=_*r.offsetWidth/100,F=M*r.offsetHeight/100,j=u+H,X=c-H,J=d+F,G=h-F,L=t.transformState,I=new Date().getTime();TT(t,v,R,function(Y){var ae=t.transformState,ve=ae.scale,Se=ae.positionX,U=ae.positionY,B=new Date().getTime()-I,W=B/N,b=OT[p.animationType],A=1-b(Math.min(1,W)),D=1-Y,T=Se+o*D,z=U+a*D,K=Uk(T,L.positionX,Se,g,f,c,u,X,j,A),V=Uk(z,L.positionY,U,m,f,h,d,G,J,A);(Se!==T||U!==z)&&t.setTransformState(ve,K,V)})}}function Vk(t,e){var n=t.transformState.scale;Pr(t),Yl(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?VF(t,e):UF(t,e)}function RT(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,a=r.sizeY,l=r.animationTime,u=r.animationType,c=s||e<i||!o&&!a;if(!c){var d=HF(t);d&&Ro(t,d,l,u)}}function Hk(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=GF(t,e,n),u=l.x,c=l.y,d=bp(t,o),h=bp(t,a);YF(t,{x:u,y:c}),WF(t,u,c,d,h)}}function QF(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?qF(t):RT(t)}}function z1(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=kd(Ti(e,2),s,o,0,!1),u=Yl(t,l),c=Mm(t,n,i,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function MT(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||i>=o;if((i>=1||a)&&RT(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,y=z1(t,o,f,p);y&&Ro(t,y,c,d)}}var co=function(){return co=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},co.apply(this,arguments)};function Wk(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var gh={previousScale:1,scale:1,positionX:0,positionY:0},Ru={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},DT=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:gh.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:gh.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:gh.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:gh.positionY}},Gk=function(t){var e=co({},Ru);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Ru[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Ru[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=co(co({},Ru[n]),t[n]):a?e[n]=Wk(Wk([],Ru[n],!0),t[n],!0):e[n]=t[n]}}),e},_T=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=kd(Ti(d,3),a,o,c,!1);return h};function $T(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=_T(t,e,n),y=z1(t,p,h,f);if(!y)return console.error("Error during zoom event. New transformation state was not calculated.");Ro(t,y,i,r)}function LT(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=DT(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=B1(t,a.scale),f=Rm(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(i==null||i(),Ro(t,p,e,n))}}function e7(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function t7(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=e7(e,i,r,s),f=h.x,p=h.y,y=d.width/s.scale,w=d.height/s.scale,m=i.offsetWidth/y,g=i.offsetHeight/w,v=kd(n||Math.min(m,g),l,u,0,!1),x=(c.width-y*v)/2,E=(c.height-w*v)/2,O=(c.left-f)*v+x,N=(c.top-p)*v+E,P=B1(t,v),R=Rm(O,N,P,a,0,0,i),_=R.x,M=R.y;return{positionX:_,positionY:M,scale:v}}var n7=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),$T(t,1,e,n,i)}},i7=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),$T(t,-1,e,n,i)}},r7=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?u:i};Ro(t,f,r,s)}}},s7=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),LT(t,e,n)}},o7=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=IT(e||r.scale,s,o);Ro(t,a,n,i)}}},a7=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),Pr(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=t7(t,o,n);Ro(t,a,i,r)}}},Cv=function(t){return{instance:t,zoomIn:n7(t),zoomOut:i7(t),setTransform:r7(t),resetTransform:s7(t),centerView:o7(t),zoomToElement:a7(t)}},l7=function(t){return{instance:t,state:t.transformState}},et=function(t){var e={};return Object.assign(e,l7(t)),Object.assign(e,Cv(t)),e},ly=!1;function uy(){try{var t={get passive(){return ly=!0,!1}};return t}catch{return ly=!1,ly}}var Dm=function(t,e){var n=t.tagName.toUpperCase(),i=e.find(function(s){return s.toUpperCase()===n});if(i)return!0;var r=e.find(function(s){return t.classList.contains(s)});return!!r},Av=function(t){t&&clearTimeout(t)},u7=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},IT=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function c7(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var d7=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Dm(u,o);return!d},h7=function(t){return t?t.deltaY<0?1:-1:0};function f7(t,e){var n=h7(t),i=EF(e,n);return i}function BT(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var p7=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(r)return p;var y=i?!1:!f,w=kd(Ti(p,3),u,l,h,y&&!d);return w},m7=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},g7=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Dm(o,r);return!l},y7=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},v7=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Ti(r[0].clientX-i.left,5),o=Ti(r[0].clientY-i.top,5),a=Ti(r[1].clientX-i.left,5),l=Ti(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},zT=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},w7=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,u=a.size,c=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return kd(Ti(h,2),o,s,u,!c&&!l)},b7=160,x7=100,S7=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(Pr(t),ht(et(t),e,i),ht(et(t),e,r))},k7=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,y=d.size,w=d.disabled,m=h.step,g=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var v=f7(e,null),x=p?g*Math.abs(e.deltaY):m,E=p7(t,v,x,!e.ctrlKey);if(l!==E){var O=Yl(t,E),N=BT(e,s,l),P=w||y===0||c||f,R=u&&P,_=Mm(t,N.x,N.y,E,O,R),M=_.x,H=_.y;t.previousWheelEvent=e,t.setTransformState(E,M,H),ht(et(t),e,i),ht(et(t),e,r)}},E7=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;Av(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(MT(t,e.x,e.y),t.wheelAnimationTimer=null)},x7);var s=m7(t,e);s&&(Av(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,ht(et(t),e,i),ht(et(t),e,r))},b7))},C7=function(t,e){var n=zT(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,Pr(t)},A7=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,u=l.disabled,c=l.size;if(!(i===null||!n)){var d=v7(e,r,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var h=zT(e),f=w7(t,h);if(f!==r){var p=Yl(t,f),y=u||c===0||a,w=o&&y,m=Mm(t,d.x,d.y,f,p,w),g=m.x,v=m.y;t.pinchMidpoint=d,t.lastDistance=h,t.setTransformState(f,g,v)}}}},P7=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,MT(t,e==null?void 0:e.x,e==null?void 0:e.y)},jT=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;Av(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,ht(et(t),e,n)},i)},O7=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;ht(et(t),e,i),LT(t,o,a,function(){return ht(et(t),e,r)}),jT(t,e)};function N7(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,y=c.animationType;if(!d&&!i){if(h==="reset")return O7(t,e);if(!s)return console.error("No ContentComponent found");var w=h==="zoomOut"?-1:1,m=_T(t,w,f);if(o!==m){ht(et(t),e,l);var g=BT(e,s,o),v=z1(t,m,g.x,g.y);if(!v)return console.error("Error during zoom event. New transformation state was not calculated.");ht(et(t),e,u),Ro(t,v,p,y),jT(t,e)}}}var T7=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=r==null?void 0:r.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=Dm(l,a);return!d},R7=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){Yl(n,n.transformState.scale),n.setup=Gk(i)},this.initializeWindowEvents=function(){var i,r=uy(),s=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,r),o==null||o.addEventListener("mousemove",n.onPanning,r),o==null||o.addEventListener("mouseup",n.onPanningStop,r),s==null||s.addEventListener("mouseleave",n.clearPanning,r),o==null||o.addEventListener("keyup",n.setKeyUnPressed,r),o==null||o.addEventListener("keydown",n.setKeyPressed,r)},this.cleanupWindowEvents=function(){var i,r,s=uy(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),Pr(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=uy();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(et(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(et(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=d7(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(S7(n,i),k7(n,i),E7(n,i))}}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=jk(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),Pr(n),Vk(n,i),ht(et(n),i,s))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=Fk(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),Hk(n,i.clientX,i.clientY),ht(et(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(QF(n),ht(et(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=g7(n,i);l&&(C7(n,i),Pr(n),ht(et(n),i,o),ht(et(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=y7(n);l&&(i.preventDefault(),i.stopPropagation(),A7(n,i),ht(et(n),i,o),ht(et(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(P7(n),ht(et(n),i,s),ht(et(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=jk(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&i.touches.length===1)n.onDoubleClick(i);else{n.lastTouch=+new Date,Pr(n);var l=i.touches,u=l.length===1,c=l.length===2;u&&(Pr(n),Vk(n,i),ht(et(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=Fk(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];Hk(n,a.clientX,a.clientY),ht(et(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=T7(n,i);s&&N7(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=et(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),ht(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=IT(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):u7(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return et(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Yl(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=et(n);ht(s,void 0,n.props.onInit)},this.props=e,this.setup=Gk(this.props),this.transformState=DT(this.props)}return t}(),j1=ue.createContext(null),M7=function(t,e){return typeof t=="function"?t(e):t},D7=ue.forwardRef(function(t,e){var n=k.useRef(new R7(t)).current,i=M7(t.children,Cv(n));return k.useImperativeHandle(e,function(){return Cv(n)},[n]),k.useEffect(function(){n.update(t)},[n,t]),ue.createElement(j1.Provider,{value:n},i)});ue.forwardRef(function(t,e){var n=k.useRef(null),i=k.useContext(j1);return k.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),ue.createElement("div",co({},t,{ref:c7([n,e])}))});function _7(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var $7=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Kk={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};_7($7);var L7=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=k.useContext(j1).init,f=k.useRef(null),p=k.useRef(null);return k.useEffect(function(){var y=f.current,w=p.current;y!==null&&w!==null&&h&&h(y,w)},[]),ue.createElement("div",co({},u,{ref:f,className:"react-transform-wrapper ".concat(Kk.wrapper," ").concat(i),style:o}),ue.createElement("div",co({},d,{ref:p,className:"react-transform-component ".concat(Kk.content," ").concat(s),style:a}),e))};function I7({wrapperRef:t}){const e=_t();return S.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[S.jsxs("button",{className:"m-0.5 h-8 w-8 rounded-t-lg text-white hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},children:[S.jsx("span",{className:"sr-only",children:e("control.zoom.in")}),S.jsx("span",{className:"icon-[lucide--zoom-in] h-4 w-4"})]}),S.jsx("hr",{className:"border-stone-600"}),S.jsxs("button",{className:"m-0.5 h-8 w-8 rounded-b-lg text-white hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},children:[S.jsx("span",{className:"sr-only",children:e("control.zoom.out")}),S.jsx("span",{className:"icon-[lucide--zoom-out] h-4 w-4"})]})]})}function B7({className:t}){const e=_t();return S.jsx("div",{className:Le("absolute z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",t),children:S.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg font-bold text-white",children:e("computer.chip-select.name")})})}function z7({className:t}){const e=_t(),{devices:n}=zr(),i=["M 380 420 H 820 V 400","M 820 420 V 805","M 450 805 H 900","M 583 805 V 875"].join(" "),r=["M 380 440 H 840 V 400","M 840 440 V 815","M 450 815 H 900","M 573 815 V 875"].join(" "),s="M 750 545 H 860 V 400";return S.jsxs("svg",{viewBox:"0 0 1700 1100",className:Le("pointer-events-none absolute z-[15] h-[1100px] w-[1700px]",t),children:[S.jsx(Zn,{x:384,y:415,children:"rd"}),S.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),S.jsx($t.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:it("bus.rd")}),S.jsx(Zn,{x:384,y:435,children:"wr"}),S.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),S.jsx($t.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:it("bus.wr")}),S.jsx(Zn,{x:384,y:455,children:"io/m"}),S.jsx(Gt,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),S.jsx(Zn,{x:715,y:550,children:e("computer.chip-select.mem")}),S.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:s}),S.jsx($t.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:s,style:it("bus.mem")}),S.jsx(Zn,{x:510,y:585,children:e("computer.chip-select.pic")}),S.jsx(Gt,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),S.jsx(Zn,{x:545,y:585,children:e("computer.chip-select.timer")}),S.jsx(Gt,{springs:"bus.timer",d:"M 563 595 V 875"}),n.pio&&S.jsxs(S.Fragment,{children:[S.jsx(Zn,{x:600,y:585,children:e("computer.chip-select.pio")}),S.jsx(Gt,{springs:"bus.pio",d:"M 612 595 V 730 H 900"})]}),n.handshake&&S.jsxs(S.Fragment,{children:[S.jsx(Zn,{x:600,y:585,children:e("computer.chip-select.handshake")}),S.jsx(Gt,{springs:"bus.handshake",d:"M 635 595 V 730 H 900"})]}),S.jsx(Zn,{x:75,y:490,children:"intr"}),S.jsx(Gt,{springs:"bus.intr",d:"M 110 700 V 470"}),S.jsx(Zn,{x:125,y:490,children:"inta"}),S.jsx(Gt,{springs:"bus.inta",d:"M 160 470 V 700"}),S.jsx(Gt,{springs:"bus.int0",d:"M 145 950 V 900"}),S.jsx(Gt,{springs:"bus.int1",d:"M 500 955 H 400 V 900"}),n.printer&&S.jsxs(S.Fragment,{children:[S.jsx(Zn,{x:1260,y:770,children:"strobe"}),S.jsx(Zn,{x:1260,y:785,children:"busy"}),S.jsx(Zn,{x:1260,y:840,children:"data"})]}),n.preset==="pio-switches-and-leds"&&S.jsxs(S.Fragment,{children:[S.jsx(Gt,{springs:"bus.switches->pio",d:"M 1300 760 H 1120"}),S.jsx(Gt,{springs:"bus.pio->leds",d:"M 1120 850 H 1300"})]}),n.preset==="pio-printer"&&S.jsxs(S.Fragment,{children:[S.jsx(Gt,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),S.jsx(Gt,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),S.jsx(Gt,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]}),n.preset==="handshake"&&S.jsxs(S.Fragment,{children:[S.jsx(Gt,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),S.jsx(Gt,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),S.jsx(Gt,{springs:"bus.printer.data",d:"M 1120 837 H 1250"}),S.jsx(Gt,{springs:"bus.int2",d:"M 930 866 V 1050 H 300 V 900"})]})]})}function Zn({x:t,y:e,children:n}){return S.jsx("text",{className:"fill-stone-400 font-mono text-xs font-bold tracking-wider",x:t,y:e,children:n})}function Gt({d:t,springs:e}){return S.jsxs(S.Fragment,{children:[S.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),S.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),S.jsx($t.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:it(e)})]})}function j7({className:t}){const e=["M 699 349 H 800","M 725 349 V 770","M 450 770 H 900","M 618 770 V 875"].join(" "),n=["M 687 249 H 800","M 770 249 V 790","M 450 790 H 900","M 598 790 V 875"].join(" ");return S.jsxs("svg",{viewBox:"0 0 1700 1100",className:Le("pointer-events-none absolute z-[5] h-[1100px] w-[1700px]",t),children:[S.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),S.jsx($t.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:it("bus.data")}),S.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),S.jsx($t.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:it("bus.address")})]})}function F7({className:t}){return S.jsxs("div",{className:Le("absolute",t),children:[S.jsx(j7,{className:"inset-0"}),S.jsx(z7,{className:"inset-0"}),S.jsx(B7,{className:"left-[500px] top-[525px]"})]})}function U7({className:t}){const e=it("clock.angle");return S.jsx("div",{className:Le("absolute z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",t),children:S.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[S.jsx("circle",{cx:"12",cy:"12",r:"10"}),S.jsx($t.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}function ci({name:t,valueAtom:e,springs:n,emphasis:i=!1,title:r,className:s}){const o=On(e),a=o.low,l=o.is16bits()?o.high:null;return S.jsxs($t.div,{title:r,className:Le("flex w-min items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",i?"border-mantis-400 text-lg":"border-stone-600 text-base",s),style:it(n),children:[S.jsx("span",{className:"mr-2 font-bold",children:t}),l&&S.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:l.toString("hex")}),S.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:a.toString("hex")})]})}function V7(){const t=On(at.FLAGS),e=On(RO),n=t.bit(0),i=t.bit(6),r=t.bit(7),s=t.bit(9),o=t.bit(11);return S.jsxs(S.Fragment,{children:[S.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[S.jsx($t.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 173 85 H 220",pathLength:1,strokeDasharray:1,style:it("cpu.alu.operands")}),S.jsx($t.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 182 145 H 220",pathLength:1,strokeDasharray:1,style:it("cpu.alu.operands")}),S.jsx($t.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:it("cpu.alu.results")}),S.jsx($t.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:it("cpu.alu.results")}),S.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),S.jsx($t.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:it("cpu.alu.cog").rot.to(a=>`rotate(${a*60}deg)`)}}),S.jsx($t.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:it("cpu.alu.operation"),children:e}),S.jsxs($t.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:it("cpu.FLAGS"),children:[S.jsx("span",{className:Le("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),S.jsx("span",{className:Le("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"ZF"}),S.jsx("span",{className:Le("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"SF"}),S.jsx("span",{className:Le("rounded p-1 font-light",s?"bg-mantis-400":"bg-stone-900"),children:"IF"}),S.jsx("span",{className:Le("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"OF"})]})]})}function H7(){const t=_t(),{status:e}=zr(),n=On(Us),i=k.useMemo(()=>{if(!("metadata"in n)||n.metadata.operands.length===0)return"";if(n.phase==="fetching-operands"){let s=" __";for(let o=1;o<n.metadata.operands.length;o++)s+=", __";return s}else return" "+n.metadata.operands.join(", ")},[n]),r=k.useMemo(()=>e.type==="running"&&e.waitingForInput?"waiting-for-input":e.type==="stopped"?e.error?"stopped-error":"stopped":n.phase==="stopped"&&n.error?"stopped-error":n.phase,[e,n]);return S.jsxs(S.Fragment,{children:[S.jsx("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:S.jsx($t.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:it("cpu.decoder.path")})}),S.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:S.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs font-semibold tracking-wide text-white",children:t("computer.cpu.control-unit")})}),S.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[S.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[S.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),S.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:S.jsx($t.div,{className:"h-full bg-mantis-400",style:{width:it("cpu.decoder.progress.progress").to(s=>`${s*100}%`),opacity:it("cpu.decoder.progress.opacity")}})})]}),S.jsx("span",{className:Le("mt-4 w-48 rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",r==="stopped-error"?"bg-red-500":r==="waiting-for-input"?"bg-amber-600":"bg-stone-900"),children:t(`computer.cpu.status.${r}`)}),S.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:S.jsx("p",{className:"text-center font-mono",children:n.phase==="fetching"||n.phase==="stopped"?S.jsx("span",{className:"font-bold italic text-stone-400",children:"???"}):S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"font-bold text-mantis-400",children:n.metadata.name}),S.jsx("span",{className:"text-white",children:i})]})})})]})]})}function W7({className:t}){const e=_t();return S.jsxs("div",{className:Le("absolute z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[S.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:e("computer.cpu.name")}),S.jsx(S8,{}),S.jsx(ez,{}),S.jsx(Dn,{name:"left",className:"left-[60px] top-[70px]"}),S.jsx(Dn,{name:"right",className:"left-[60px] top-[130px]"}),S.jsx(Dn,{name:"result",className:"left-[300px] top-[100px]"}),S.jsx(V7,{}),S.jsx(Dn,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),S.jsx(Dn,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),S.jsx(Dn,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),S.jsx(Dn,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),S.jsx(Dn,{name:"id",className:"left-[520px] top-[190px]"}),S.jsx(Dn,{name:"MBR",className:"right-[-38px] top-[233px]"}),S.jsx(Dn,{name:"IR",className:"left-[171px] top-[270px]"}),S.jsx(H7,{}),S.jsx(Dn,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),S.jsx(Dn,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),S.jsx(Dn,{name:"ri",className:"left-[450px] top-[372px]"}),S.jsx(Dn,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function Dn({name:t,emphasis:e,className:n}){const i=_t();return S.jsx(ci,{name:t,valueAtom:at[t],springs:`cpu.${t}`,emphasis:e,title:i("computer.cpu.register",t),className:Le("absolute",n)})}const G7="_pushable_1nhoa_2",K7="_front_1nhoa_15",X7="_shadow_1nhoa_20",Z7="_edge_1nhoa_52",yh={pushable:G7,front:K7,shadow:X7,edge:Z7};function J7({className:t}){const e=_t(),{status:n,dispatch:i}=zr();return L2("F10",r=>{r.preventDefault(),i("f10.press")}),S.jsx("div",{className:Le("absolute z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:S.jsxs("button",{className:yh.pushable,disabled:n.type!=="running",onClick:()=>i("f10.press"),title:e("computer.f10.name"),children:[S.jsx("div",{className:yh.shadow}),S.jsx("div",{className:yh.edge}),S.jsx("span",{className:yh.front,children:e("computer.f10.interrupt")})]})})}function Y7({className:t}){const e=_t(),{devices:n}=zr();return n.handshake?S.jsxs("div",{className:Le("absolute z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[S.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:e("computer.handshake.name")}),S.jsx(ci,{name:e("computer.handshake.state"),title:e("generics.io-register","STATE",65),valueAtom:g1,springs:"handshake.STATE",className:"mx-auto my-4"}),S.jsx("hr",{className:"border-stone-600"}),S.jsx(ci,{name:e("computer.handshake.data"),title:e("generics.io-register","DATA",64),valueAtom:m1,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var FT={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.6.51 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(k)})(hM,function(n){return function(){var i={689:function(a){a.exports=function(){var l={d:function(U,B){for(var W in B)l.o(B,W)&&!l.o(U,W)&&Object.defineProperty(U,W,{enumerable:!0,get:B[W]})},o:function(U,B){return Object.prototype.hasOwnProperty.call(U,B)},r:function(U){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})}},u={};function c(U){return function(B){if(Array.isArray(B))return h(B)}(U)||function(B){if(typeof Symbol<"u"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}(U)||d(U)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(U,B){if(U){if(typeof U=="string")return h(U,B);var W=Object.prototype.toString.call(U).slice(8,-1);return W==="Object"&&U.constructor&&(W=U.constructor.name),W==="Map"||W==="Set"?Array.from(U):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?h(U,B):void 0}}function h(U,B){(B==null||B>U.length)&&(B=U.length);for(var W=0,b=new Array(B);W<B;W++)b[W]=U[W];return b}function f(U){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},f(U)}function p(U,B){for(var W=0;W<B.length;W++){var b=B[W];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(U,w(b.key),b)}}function y(U,B,W){return(B=w(B))in U?Object.defineProperty(U,B,{value:W,enumerable:!0,configurable:!0,writable:!0}):U[B]=W,U}function w(U){var B=function(W,b){if(f(W)!=="object"||W===null)return W;var A=W[Symbol.toPrimitive];if(A!==void 0){var D=A.call(W,b||"default");if(f(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(W)}(U,"string");return f(B)==="symbol"?B:String(B)}l.r(u),l.d(u,{SimpleKeyboard:function(){return ve},default:function(){return Se}});var m=function(){function U(A){var D=A.getOptions,T=A.getCaretPosition,z=A.getCaretPositionEnd,K=A.dispatch;(function(V,Z){if(!(V instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,U),y(this,"getOptions",void 0),y(this,"getCaretPosition",void 0),y(this,"getCaretPositionEnd",void 0),y(this,"dispatch",void 0),y(this,"maxLengthReached",void 0),y(this,"isStandardButton",function(V){return V&&!(V[0]==="{"&&V[V.length-1]==="}")}),this.getOptions=D,this.getCaretPosition=T,this.getCaretPositionEnd=z,this.dispatch=K,U.bindMethods(U,this)}var B,W,b;return B=U,W=[{key:"getButtonType",value:function(A){return A.includes("{")&&A.includes("}")&&A!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(A){var D=this.getButtonType(A),T=A.replace("{","").replace("}",""),z="";return D!=="standardBtn"&&(z=" hg-button-".concat(T)),"hg-".concat(D).concat(z)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(A,D){return(D=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),D):D||this.getDefaultDiplay())[A]||A}},{key:"getUpdatedInput",value:function(A,D,T){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T,K=arguments.length>4&&arguments[4]!==void 0&&arguments[4],V=this.getOptions(),Z=[T,z,K],Q=D;return(A==="{bksp}"||A==="{backspace}")&&Q.length>0?Q=this.removeAt.apply(this,[Q].concat(Z)):(A==="{delete}"||A==="{forwarddelete}")&&Q.length>0?Q=this.removeForwardsAt.apply(this,[Q].concat(Z)):A==="{space}"?Q=this.addStringAt.apply(this,[Q," "].concat(Z)):A!=="{tab}"||typeof V.tabCharOnTab=="boolean"&&V.tabCharOnTab===!1?A!=="{enter}"&&A!=="{numpadenter}"||!V.newLineOnEnter?A.includes("numpad")&&Number.isInteger(Number(A[A.length-2]))?Q=this.addStringAt.apply(this,[Q,A[A.length-2]].concat(Z)):A==="{numpaddivide}"?Q=this.addStringAt.apply(this,[Q,"/"].concat(Z)):A==="{numpadmultiply}"?Q=this.addStringAt.apply(this,[Q,"*"].concat(Z)):A==="{numpadsubtract}"?Q=this.addStringAt.apply(this,[Q,"-"].concat(Z)):A==="{numpadadd}"?Q=this.addStringAt.apply(this,[Q,"+"].concat(Z)):A==="{numpaddecimal}"?Q=this.addStringAt.apply(this,[Q,"."].concat(Z)):A==="{"||A==="}"?Q=this.addStringAt.apply(this,[Q,A].concat(Z)):A.includes("{")||A.includes("}")||(Q=this.addStringAt.apply(this,[Q,A].concat(Z))):Q=this.addStringAt.apply(this,[Q,`
`].concat(Z)):Q=this.addStringAt.apply(this,[Q,"	"].concat(Z)),V.debug&&console.log("Input will be: "+Q),Q}},{key:"updateCaretPos",value:function(A){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],T=this.updateCaretPosAction(A,D);this.dispatch(function(z){z.setCaretPosition(T)})}},{key:"updateCaretPosAction",value:function(A){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],T=this.getOptions(),z=this.getCaretPosition();return z!=null&&(D?z>0&&(z-=A):z+=A),T.debug&&console.log("Caret at:",z),z}},{key:"addStringAt",value:function(A,D){var T,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A.length,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:A.length,V=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return z||z===0?(T=[A.slice(0,z),D,A.slice(K)].join(""),this.isMaxLengthReached()||V&&this.updateCaretPos(D.length)):T=A+D,T}},{key:"removeAt",value:function(A){var D,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A.length,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(T===0&&z===0)return A;if(T===z){var V=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;T&&T>=0?A.substring(T-2,T).match(V)?(D=A.substr(0,T-2)+A.substr(T),K&&this.updateCaretPos(2,!0)):(D=A.substr(0,T-1)+A.substr(T),K&&this.updateCaretPos(1,!0)):A.slice(-2).match(V)?(D=A.slice(0,-2),K&&this.updateCaretPos(2,!0)):(D=A.slice(0,-1),K&&this.updateCaretPos(1,!0))}else D=A.slice(0,T)+A.slice(z),K&&this.dispatch(function(Z){Z.setCaretPosition(T)});return D}},{key:"removeForwardsAt",value:function(A){var D,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A.length,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return A!=null&&A.length&&T!==null?(T===z?D=A.substring(T,T+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?A.substr(0,T)+A.substr(T+2):A.substr(0,T)+A.substr(T+1):(D=A.slice(0,T)+A.slice(z),K&&this.dispatch(function(V){V.setCaretPosition(T)})),D):A}},{key:"handleMaxLength",value:function(A,D){var T=this.getOptions(),z=T.maxLength,K=A[T.inputName||"default"],V=D.length-1>=z;if(D.length<=K.length)return!1;if(Number.isInteger(z))return T.debug&&console.log("maxLength (num) reached:",V),V?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(f(z)==="object"){var Z=D.length-1>=z[T.inputName||"default"];return T.debug&&console.log("maxLength (obj) reached:",Z),Z?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(A){return A?A.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(D,T){return T.length?D+T[0].toUpperCase()+T.slice(1):D}):""}},{key:"chunkArray",value:function(A,D){return c(Array(Math.ceil(A.length/D))).map(function(T,z){return A.slice(D*z,D+D*z)})}},{key:"escapeRegex",value:function(A){return A.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(A,D){var T=A,z=D.indexOf("");return z<A&&z!=-1&&T--,D.indexOf("")<A&&z!=-1&&T--,T<0?0:T}}],b=[{key:"bindMethods",value:function(A,D){var T,z=function(V,Z){var Q=typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(!Q){if(Array.isArray(V)||(Q=d(V))||Z&&V&&typeof V.length=="number"){Q&&(V=Q);var Ne=0,de=function(){};return{s:de,n:function(){return Ne>=V.length?{done:!0}:{done:!1,value:V[Ne++]}},e:function(pt){throw pt},f:de}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te,ze=!0,me=!1;return{s:function(){Q=Q.call(V)},n:function(){var pt=Q.next();return ze=pt.done,pt},e:function(pt){me=!0,Te=pt},f:function(){try{ze||Q.return==null||Q.return()}finally{if(me)throw Te}}}}(Object.getOwnPropertyNames(A.prototype));try{for(z.s();!(T=z.n()).done;){var K=T.value;K==="constructor"||K==="bindMethods"||(D[K]=D[K].bind(D))}}catch(V){z.e(V)}finally{z.f()}}}],W&&p(B.prototype,W),b&&p(B,b),Object.defineProperty(B,"prototype",{writable:!1}),U}();y(m,"noop",function(){});var g=m;function v(U){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},v(U)}function x(U,B){for(var W=0;W<B.length;W++){var b=B[W];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(U,O(b.key),b)}}function E(U,B,W){return(B=O(B))in U?Object.defineProperty(U,B,{value:W,enumerable:!0,configurable:!0,writable:!0}):U[B]=W,U}function O(U){var B=function(W,b){if(v(W)!=="object"||W===null)return W;var A=W[Symbol.toPrimitive];if(A!==void 0){var D=A.call(W,b||"default");if(v(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(W)}(U,"string");return v(B)==="symbol"?B:String(B)}var N=function(){function U(b){var A=this,D=b.dispatch,T=b.getOptions;(function(z,K){if(!(z instanceof K))throw new TypeError("Cannot call a class as a function")})(this,U),E(this,"getOptions",void 0),E(this,"dispatch",void 0),E(this,"isMofifierKey",function(z){return z.altKey||z.ctrlKey||z.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(z.code||z.key||A.keyCodeToKey(z==null?void 0:z.keyCode))}),this.dispatch=D,this.getOptions=T,g.bindMethods(U,this)}var B,W;return B=U,(W=[{key:"handleHighlightKeyDown",value:function(b){var A=this.getOptions();A.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(b)&&(b.preventDefault(),b.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(b);this.dispatch(function(T){var z,K,V=T.getButtonElement(D),Z=T.getButtonElement("{".concat(D,"}"));if(V)z=V,K=D;else{if(!Z)return;z=Z,K="{".concat(D,"}")}var Q,Ne=function(Te){Te.style.background=A.physicalKeyboardHighlightBgColor||"#dadce4",Te.style.color=A.physicalKeyboardHighlightTextColor||"black"};if(z)if(Array.isArray(z)){if(z.forEach(function(Te){return Ne(Te)}),A.physicalKeyboardHighlightPress)if(A.physicalKeyboardHighlightPressUsePointerEvents)(Q=z[0])===null||Q===void 0||Q.onpointerdown();else if(A.physicalKeyboardHighlightPressUseClick){var de;(de=z[0])===null||de===void 0||de.click()}else T.handleButtonClicked(K,b)}else Ne(z),A.physicalKeyboardHighlightPress&&(A.physicalKeyboardHighlightPressUsePointerEvents?z.onpointerdown():A.physicalKeyboardHighlightPressUseClick?z.click():T.handleButtonClicked(K,b))})}},{key:"handleHighlightKeyUp",value:function(b){var A=this.getOptions();A.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(b)&&(b.preventDefault(),b.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(b);this.dispatch(function(T){var z,K=T.getButtonElement(D)||T.getButtonElement("{".concat(D,"}")),V=function(Z){Z.removeAttribute&&Z.removeAttribute("style")};K&&(Array.isArray(K)?(K.forEach(function(Z){return V(Z)}),A.physicalKeyboardHighlightPressUsePointerEvents&&((z=K[0])===null||z===void 0||z.onpointerup())):(V(K),A.physicalKeyboardHighlightPressUsePointerEvents&&K.onpointerup()))})}},{key:"getSimpleKeyboardLayoutKey",value:function(b){var A,D="",T=b.code||b.key||this.keyCodeToKey(b==null?void 0:b.keyCode);return(D=T!=null&&T.includes("Numpad")||T!=null&&T.includes("Shift")||T!=null&&T.includes("Space")||T!=null&&T.includes("Backspace")||T!=null&&T.includes("Control")||T!=null&&T.includes("Alt")||T!=null&&T.includes("Meta")?b.code||"":b.key||this.keyCodeToKey(b==null?void 0:b.keyCode)||"").length>1?(A=D)===null||A===void 0?void 0:A.toLowerCase():D}},{key:"keyCodeToKey",value:function(b){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[b]||""}}])&&x(B.prototype,W),Object.defineProperty(B,"prototype",{writable:!1}),U}();function P(U){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},P(U)}function R(U,B){for(var W=0;W<B.length;W++){var b=B[W];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(U,M(b.key),b)}}function _(U,B,W){return(B=M(B))in U?Object.defineProperty(U,B,{value:W,enumerable:!0,configurable:!0,writable:!0}):U[B]=W,U}function M(U){var B=function(W,b){if(P(W)!=="object"||W===null)return W;var A=W[Symbol.toPrimitive];if(A!==void 0){var D=A.call(W,b||"default");if(P(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(W)}(U,"string");return P(B)==="symbol"?B:String(B)}var H=function(){function U(b){var A=b.utilities,D=b.options;(function(T,z){if(!(T instanceof z))throw new TypeError("Cannot call a class as a function")})(this,U),_(this,"utilities",void 0),_(this,"options",void 0),_(this,"candidateBoxElement",void 0),_(this,"pageIndex",0),_(this,"pageSize",void 0),this.utilities=A,this.options=D,g.bindMethods(U,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var B,W;return B=U,W=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(b){var A=this,D=b.candidateValue,T=b.targetElement,z=b.onSelect;if(D&&D.length){var K=this.utilities.chunkArray(D.split(" "),this.pageSize);this.renderPage({candidateListPages:K,targetElement:T,pageIndex:this.pageIndex,nbPages:K.length,onItemSelected:function(V,Z){z(V,Z),A.destroy()}})}}},{key:"renderPage",value:function(b){var A,D=this,T=b.candidateListPages,z=b.targetElement,K=b.pageIndex,V=b.nbPages,Z=b.onItemSelected;(A=this.candidateBoxElement)===null||A===void 0||A.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Q=document.createElement("ul");Q.className="hg-candidate-box-list",T[K].forEach(function(Mn){var $o,cr=document.createElement("li"),Cs=function(){var As=new(D.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(As,"target",{value:cr}),As};cr.className="hg-candidate-box-list-item",cr.innerHTML=(($o=D.options.display)===null||$o===void 0?void 0:$o[Mn])||Mn,D.options.useTouchEvents?cr.ontouchstart=function(As){return Z(Mn,As||Cs())}:cr.onclick=function(){var As=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cs();return Z(Mn,As)},Q.appendChild(cr)});var Ne=K>0,de=document.createElement("div");de.classList.add("hg-candidate-box-prev"),Ne&&de.classList.add("hg-candidate-box-btn-active");var Te=function(){Ne&&D.renderPage({candidateListPages:T,targetElement:z,pageIndex:K-1,nbPages:V,onItemSelected:Z})};this.options.useTouchEvents?de.ontouchstart=Te:de.onclick=Te,this.candidateBoxElement.appendChild(de),this.candidateBoxElement.appendChild(Q);var ze=K<V-1,me=document.createElement("div");me.classList.add("hg-candidate-box-next"),ze&&me.classList.add("hg-candidate-box-btn-active");var pt=function(){ze&&D.renderPage({candidateListPages:T,targetElement:z,pageIndex:K+1,nbPages:V,onItemSelected:Z})};this.options.useTouchEvents?me.ontouchstart=pt:me.onclick=pt,this.candidateBoxElement.appendChild(me),z.prepend(this.candidateBoxElement)}}],W&&R(B.prototype,W),Object.defineProperty(B,"prototype",{writable:!1}),U}(),F=H;function j(U){return function(B){if(Array.isArray(B))return X(B)}(U)||function(B){if(typeof Symbol<"u"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}(U)||function(B,W){if(B){if(typeof B=="string")return X(B,W);var b=Object.prototype.toString.call(B).slice(8,-1);return b==="Object"&&B.constructor&&(b=B.constructor.name),b==="Map"||b==="Set"?Array.from(B):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?X(B,W):void 0}}(U)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(U,B){(B==null||B>U.length)&&(B=U.length);for(var W=0,b=new Array(B);W<B;W++)b[W]=U[W];return b}function J(U){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},J(U)}function G(U,B){var W=Object.keys(U);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(U);B&&(b=b.filter(function(A){return Object.getOwnPropertyDescriptor(U,A).enumerable})),W.push.apply(W,b)}return W}function L(U,B){for(var W=0;W<B.length;W++){var b=B[W];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(U,Y(b.key),b)}}function I(U,B,W){return(B=Y(B))in U?Object.defineProperty(U,B,{value:W,enumerable:!0,configurable:!0,writable:!0}):U[B]=W,U}function Y(U){var B=function(W,b){if(J(W)!=="object"||W===null)return W;var A=W[Symbol.toPrimitive];if(A!==void 0){var D=A.call(W,b||"default");if(J(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(W)}(U,"string");return J(B)==="symbol"?B:String(B)}var ae=function(){function U(b,A){var D=this;if(function(de,Te){if(!(de instanceof Te))throw new TypeError("Cannot call a class as a function")}(this,U),I(this,"input",void 0),I(this,"options",void 0),I(this,"utilities",void 0),I(this,"caretPosition",void 0),I(this,"caretPositionEnd",void 0),I(this,"keyboardDOM",void 0),I(this,"keyboardPluginClasses",void 0),I(this,"keyboardDOMClass",void 0),I(this,"buttonElements",void 0),I(this,"currentInstanceName",void 0),I(this,"allKeyboardInstances",void 0),I(this,"keyboardInstanceNames",void 0),I(this,"isFirstKeyboardInstance",void 0),I(this,"physicalKeyboard",void 0),I(this,"modules",void 0),I(this,"activeButtonClass",void 0),I(this,"holdInteractionTimeout",void 0),I(this,"holdTimeout",void 0),I(this,"isMouseHold",void 0),I(this,"initialized",void 0),I(this,"candidateBox",void 0),I(this,"keyboardRowsDOM",void 0),I(this,"defaultName","default"),I(this,"activeInputElement",null),I(this,"handleParams",function(de,Te){var ze,me,pt;if(typeof de=="string")ze=de.split(".").join(""),me=document.querySelector(".".concat(ze)),pt=Te;else if(de instanceof HTMLDivElement){if(!de.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ze=de.className.split(" ")[0],me=de,pt=Te}else ze="simple-keyboard",me=document.querySelector(".".concat(ze)),pt=de;return{keyboardDOMClass:ze,keyboardDOM:me,options:pt}}),I(this,"getOptions",function(){return D.options}),I(this,"getCaretPosition",function(){return D.caretPosition}),I(this,"getCaretPositionEnd",function(){return D.caretPositionEnd}),I(this,"registerModule",function(de,Te){D.modules[de]||(D.modules[de]={}),Te(D.modules[de])}),I(this,"getKeyboardClassString",function(){for(var de=arguments.length,Te=new Array(de),ze=0;ze<de;ze++)Te[ze]=arguments[ze];return[D.keyboardDOMClass].concat(Te).filter(function(me){return!!me}).join(" ")}),typeof window<"u"){var T=this.handleParams(b,A),z=T.keyboardDOMClass,K=T.keyboardDOM,V=T.options,Z=V===void 0?{}:V;this.utilities=new g({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=K,this.options=function(de){for(var Te=1;Te<arguments.length;Te++){var ze=arguments[Te]!=null?arguments[Te]:{};Te%2?G(Object(ze),!0).forEach(function(me){I(de,me,ze[me])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(ze)):G(Object(ze)).forEach(function(me){Object.defineProperty(de,me,Object.getOwnPropertyDescriptor(ze,me))})}return de}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Z),this.keyboardPluginClasses="",g.bindMethods(U,this);var Q=this.options.inputName,Ne=Q===void 0?this.defaultName:Q;if(this.input={},this.input[Ne]="",this.keyboardDOMClass=z,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new N({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new F({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(z,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var B,W;return B=U,W=[{key:"setCaretPosition",value:function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b;this.caretPosition=b,this.caretPositionEnd=A}},{key:"getInputCandidates",value:function(b){var A=this,D=this.options,T=D.layoutCandidates,z=D.layoutCandidatesCaseSensitiveMatch;if(!T||J(T)!=="object")return{};var K=Object.keys(T).filter(function(Q){var Ne=b.substring(0,A.getCaretPositionEnd()||0)||b,de=new RegExp("".concat(A.utilities.escapeRegex(Q),"$"),z?"g":"gi");return!!j(Ne.matchAll(de)).length});if(K.length>1){var V=K.sort(function(Q,Ne){return Ne.length-Q.length})[0];return{candidateKey:V,candidateValue:T[V]}}if(K.length){var Z=K[0];return{candidateKey:Z,candidateValue:T[Z]}}return{}}},{key:"showCandidatesBox",value:function(b,A,D){var T=this;this.candidateBox&&this.candidateBox.show({candidateValue:A,targetElement:D,onSelect:function(z,K){var V=T.options,Z=V.layoutCandidatesCaseSensitiveMatch,Q=V.disableCandidateNormalization,Ne=V.enableLayoutCandidatesKeyPress,de=z;Q||(de=z.normalize("NFD"));var Te=T.getInput(T.options.inputName,!0),ze=T.getCaretPositionEnd()||0,me=Te.substring(0,ze||0)||Te,pt=new RegExp("".concat(T.utilities.escapeRegex(b),"$"),Z?"g":"gi"),Mn=me.replace(pt,de),$o=Te.replace(me,Mn),cr=Mn.length-me.length,Cs=(ze||Te.length)+cr;Cs<0&&(Cs=0),T.setInput($o,T.options.inputName,!0),T.setCaretPosition(Cs),Ne&&typeof T.options.onKeyPress=="function"&&T.options.onKeyPress(z,K),typeof T.options.onChange=="function"&&T.options.onChange(T.getInput(T.options.inputName,!0),K),typeof T.options.onChangeAll=="function"&&T.options.onChangeAll(T.getAllInputs(),K)}})}},{key:"handleButtonClicked",value:function(b,A){var D=this.options,T=D.inputName,z=T===void 0?this.defaultName:T,K=D.debug;if(b!=="{//}"){this.input[z]||(this.input[z]="");var V=this.utilities.getUpdatedInput(b,this.input[z],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(b)&&this.activeInputElement&&this.input[z]&&this.input[z]===V&&this.caretPosition===0&&this.caretPositionEnd===V.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(b,A);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(b,A),this.input[z]!==V&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(V))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,V))return;var Z=this.utilities.getUpdatedInput(b,this.input[z],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(Z,this.options.inputName,!0),K&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),A==null?void 0:A.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),A),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),A),A!=null&&A.target&&this.options.enableLayoutCandidates){var Q,Ne=this.getInputCandidates(V),de=Ne.candidateKey,Te=Ne.candidateValue;de&&Te?this.showCandidatesBox(de,Te,this.keyboardDOM):(Q=this.candidateBox)===null||Q===void 0||Q.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),K&&console.log("Key pressed:",b)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(b){this.options.syncInstanceInputs?this.dispatch(function(A){A.isMouseHold=b}):this.isMouseHold=b}},{key:"handleButtonMouseDown",value:function(b,A){var D=this;A&&(this.options.preventMouseDownDefault&&A.preventDefault(),this.options.stopMouseDownPropagation&&A.stopPropagation(),A.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(D.getMouseHold()&&(!b.includes("{")&&!b.includes("}")||b==="{delete}"||b==="{backspace}"||b==="{bksp}"||b==="{space}"||b==="{tab}")||b==="{arrowright}"||b==="{arrowleft}"||b==="{arrowup}"||b==="{arrowdown}")&&(D.options.debug&&console.log("Button held:",b),D.handleButtonHold(b)),clearTimeout(D.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(b,A){var D=this;A&&(this.options.preventMouseUpDefault&&A.preventDefault&&A.preventDefault(),this.options.stopMouseUpPropagation&&A.stopPropagation&&A.stopPropagation(),!(A.target===this.keyboardDOM||A.target&&this.keyboardDOM.contains(A.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(A.target===this.candidateBox.candidateBoxElement||A.target&&this.candidateBox.candidateBoxElement.contains(A.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(T){T.classList.remove(D.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),b&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(b,A)}},{key:"handleKeyboardContainerMouseDown",value:function(b){this.options.preventMouseDownDefault&&b.preventDefault()}},{key:"handleButtonHold",value:function(b){var A=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){A.getMouseHold()?(A.handleButtonClicked(b),A.handleButtonHold(b)):clearTimeout(A.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var b=this;this.dispatch(function(A){A.replaceInput(b.input),A.setCaretPosition(b.caretPosition,b.caretPositionEnd)})}},{key:"clearInput",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[b]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,A=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!A&&this.syncInstanceInputs(),this.options.rtl?""+this.input[b].replace("","").replace("","")+"":this.input[b]}},{key:"getAllInputs",value:function(){var b=this,A={};return Object.keys(this.input).forEach(function(D){A[D]=b.getInput(D,!0)}),A}},{key:"setInput",value:function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,D=arguments.length>2?arguments[2]:void 0;this.input[A]=b,!D&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(b){this.input=b}},{key:"setOptions",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=this.changedOptions(b);this.options=Object.assign(this.options,b),A.length&&(this.options.debug&&console.log("changedOptions",A),this.onSetOptions(A),this.render())}},{key:"changedOptions",value:function(b){var A=this;return Object.keys(b).filter(function(D){return JSON.stringify(b[D])!==JSON.stringify(A.options[D])})}},{key:"onSetOptions",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];b.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(b.includes("layoutCandidatesPageSize")||b.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new F({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(b){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(A){b(window.SimpleKeyboardInstances[A],A)})}},{key:"addButtonTheme",value:function(b,A){var D=this;A&&b&&(b.split(" ").forEach(function(T){A.split(" ").forEach(function(z){D.options.buttonTheme||(D.options.buttonTheme=[]);var K=!1;D.options.buttonTheme.map(function(V){if(V!=null&&V.class.split(" ").includes(z)){K=!0;var Z=V.buttons.split(" ");Z.includes(T)||(K=!0,Z.push(T),V.buttons=Z.join(" "))}return V}),K||D.options.buttonTheme.push({class:z,buttons:b})})}),this.render())}},{key:"removeButtonTheme",value:function(b,A){var D=this;if(!b&&!A)return this.options.buttonTheme=[],void this.render();b&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(b.split(" ").forEach(function(T){var z;(z=D.options)===null||z===void 0||(z=z.buttonTheme)===null||z===void 0||z.map(function(K,V){if(K&&A&&A.includes(K.class)||!A){var Z,Q,Ne=(Z=K)===null||Z===void 0?void 0:Z.buttons.split(" ").filter(function(de){return de!==T});K&&Ne!=null&&Ne.length?K.buttons=Ne.join(" "):((Q=D.options.buttonTheme)===null||Q===void 0||Q.splice(V,1),K=null)}return K})}),this.render())}},{key:"getButtonElement",value:function(b){var A,D=this.buttonElements[b];return D&&(A=D.length>1?D:D[0]),A}},{key:"inputPatternIsValid",value:function(b){var A,D=this.options.inputPattern;if((A=D instanceof RegExp?D:D[this.options.inputName||this.defaultName])&&b){var T=A.test(b);return this.options.debug&&console.log('inputPattern ("'.concat(A,'"): ').concat(T?"passed":"did not pass!")),T}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var b=this.options.physicalKeyboardHighlightPreventDefault,A=b!==void 0&&b;document.addEventListener("keyup",this.handleKeyUp,A),document.addEventListener("keydown",this.handleKeyDown,A),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(b){this.caretEventHandler(b),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(b)}},{key:"handleKeyDown",value:function(b){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(b)}},{key:"handleMouseUp",value:function(b){this.caretEventHandler(b)}},{key:"handleTouchEnd",value:function(b){this.caretEventHandler(b)}},{key:"handleSelect",value:function(b){this.caretEventHandler(b)}},{key:"handleSelectionChange",value:function(b){navigator.userAgent.includes("Firefox")||this.caretEventHandler(b)}},{key:"caretEventHandler",value:function(b){var A,D=this;b.target.tagName&&(A=b.target.tagName.toLowerCase()),this.dispatch(function(T){var z=b.target===T.keyboardDOM||b.target&&T.keyboardDOM.contains(b.target);if(D.options.syncInstanceInputs&&Array.isArray(b.path)&&(z=b.path.some(function(Z){var Q;return Z==null||(Q=Z.hasAttribute)===null||Q===void 0?void 0:Q.call(Z,"data-skInstance")})),(A==="textarea"||A==="input"&&["text","search","url","tel","password"].includes(b.target.type))&&!T.options.disableCaretPositioning){var K=b.target.selectionStart,V=b.target.selectionEnd;T.options.rtl&&(K=T.utilities.getRtlOffset(K,T.getInput()),V=T.utilities.getRtlOffset(V,T.getInput())),T.setCaretPosition(K,V),D.activeInputElement=b.target,T.options.debug&&console.log("Caret at: ",T.getCaretPosition(),T.getCaretPositionEnd(),b&&b.target.tagName.toLowerCase(),"(".concat(T.keyboardDOMClass,")"),b==null?void 0:b.type)}else!T.options.disableCaretPositioning&&z||(b==null?void 0:b.type)==="selectionchange"||(T.setCaretPosition(null),D.activeInputElement=null,T.options.debug&&console.log('Caret position reset due to "'.concat(b==null?void 0:b.type,'" event'),b))})}},{key:"recurseButtons",value:function(b){var A=this;b&&Object.keys(this.buttonElements).forEach(function(D){return A.buttonElements[D].forEach(b)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var b=this.options.physicalKeyboardHighlightPreventDefault,A=b!==void 0&&b;document.removeEventListener("keyup",this.handleKeyUp,A),document.removeEventListener("keydown",this.handleKeyDown,A),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(D){D&&(D.onpointerdown=null,D.onpointerup=null,D.onpointercancel=null,D.ontouchstart=null,D.ontouchend=null,D.ontouchcancel=null,D.onclick=null,D.onmousedown=null,D.onmouseup=null,D.remove(),D=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(b){var A=this.options.buttonTheme,D=[];return Array.isArray(A)&&A.forEach(function(T){if(T&&T.class&&typeof T.class=="string"&&T.buttons&&typeof T.buttons=="string"){var z=T.class.split(" ");T.buttons.split(" ").includes(b)&&(D=[].concat(j(D),j(z)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',T)}),D}},{key:"setDOMButtonAttributes",value:function(b,A){var D=this.options.buttonAttributes;Array.isArray(D)&&D.forEach(function(T){T.attribute&&typeof T.attribute=="string"&&T.value&&typeof T.value=="string"&&T.buttons&&typeof T.buttons=="string"?T.buttons.split(" ").includes(b)&&A(T.attribute,T.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',T)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(b){if(b.target.classList.contains("hg-button"))return b.preventDefault(),b.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var b=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(A){var D=new A(b);D.init&&D.init(b)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(b,A){return!!this.modules[b]&&this.modules[b][A]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(b,A,D,T){var z=this,K=Array.from(b.children),V=0;return K.length&&D.forEach(function(Z,Q){var Ne=T[Q];if(!(Ne&&Ne>Z))return!1;var de=Z-V,Te=Ne-V,ze=document.createElement("div");ze.className+="hg-button-container";var me="".concat(z.options.layoutName,"-r").concat(A,"c").concat(Q);ze.setAttribute("data-skUID",me);var pt=K.splice(de,Te-de+1);V=Te-de,pt.forEach(function(Mn){return ze.appendChild(Mn)}),K.splice(de,0,ze),b.innerHTML="",K.forEach(function(Mn){return b.appendChild(Mn)}),z.options.debug&&console.log("rowDOMContainer",pt,de,Te,V+1)}),b}},{key:"render",value:function(){var b=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var A="hg-layout-".concat(this.options.layoutName),D=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},T=this.options.useTouchEvents||!1,z=T?"hg-touch-events":"",K=this.options.useMouseEvents||!1,V=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,A,this.keyboardPluginClasses,z),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",D[this.options.layoutName||this.defaultName].forEach(function(Z,Q){var Ne=Z.split(" ");b.options.excludeFromLayout&&b.options.excludeFromLayout[b.options.layoutName||b.defaultName]&&(Ne=Ne.filter(function(me){return b.options.excludeFromLayout&&!b.options.excludeFromLayout[b.options.layoutName||b.defaultName].includes(me)}));var de=document.createElement("div");de.className+="hg-row";var Te=[],ze=[];Ne.forEach(function(me,pt){var Mn,$o=!V&&typeof me=="string"&&me.length>1&&me.indexOf("[")===0,cr=!V&&typeof me=="string"&&me.length>1&&me.indexOf("]")===me.length-1;$o&&(Te.push(pt),me=me.replace(/\[/g,"")),cr&&(ze.push(pt),me=me.replace(/\]/g,""));var Cs=b.utilities.getButtonClass(me),As=b.utilities.getButtonDisplayName(me,b.options.display,b.options.mergeDisplay),oM=b.options.useButtonTag?"button":"div",Jt=document.createElement(oM);Jt.className+="hg-button ".concat(Cs),(Mn=Jt.classList).add.apply(Mn,j(b.getButtonThemeClasses(me))),b.setDOMButtonAttributes(me,function(Et,lM){Jt.setAttribute(Et,lM)}),b.activeButtonClass="hg-activeButton",!b.utilities.pointerEventsSupported()||T||K?T?(Jt.ontouchstart=function(Et){b.handleButtonClicked(me,Et),b.handleButtonMouseDown(me,Et)},Jt.ontouchend=function(Et){b.handleButtonMouseUp(me,Et)},Jt.ontouchcancel=function(Et){b.handleButtonMouseUp(me,Et)}):(Jt.onclick=function(Et){b.setMouseHold(!1),typeof b.options.onKeyReleased!="function"&&b.handleButtonClicked(me,Et)},Jt.onmousedown=function(Et){typeof b.options.onKeyReleased!="function"||b.isMouseHold||b.handleButtonClicked(me,Et),b.handleButtonMouseDown(me,Et)},Jt.onmouseup=function(Et){b.handleButtonMouseUp(me,Et)}):(Jt.onpointerdown=function(Et){b.handleButtonClicked(me,Et),b.handleButtonMouseDown(me,Et)},Jt.onpointerup=function(Et){b.handleButtonMouseUp(me,Et)},Jt.onpointercancel=function(Et){b.handleButtonMouseUp(me,Et)}),Jt.setAttribute("data-skBtn",me);var aM="".concat(b.options.layoutName,"-r").concat(Q,"b").concat(pt);Jt.setAttribute("data-skBtnUID",aM);var lb=document.createElement("span");lb.innerHTML=As,Jt.appendChild(lb),b.buttonElements[me]||(b.buttonElements[me]=[]),b.buttonElements[me].push(Jt),de.appendChild(Jt)}),de=b.parseRowDOMContainers(de,Q,Te,ze),b.keyboardRowsDOM.appendChild(de)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||T||K?T?(document.ontouchend=function(Z){return b.handleButtonMouseUp(void 0,Z)},document.ontouchcancel=function(Z){return b.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.ontouchstart=function(Z){return b.handleKeyboardContainerMouseDown(Z)}):T||(document.onmouseup=function(Z){return b.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onmousedown=function(Z){return b.handleKeyboardContainerMouseDown(Z)}):(document.onpointerup=function(Z){return b.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onpointerdown=function(Z){return b.handleKeyboardContainerMouseDown(Z)}),this.onInit())}}],W&&L(B.prototype,W),Object.defineProperty(B,"prototype",{writable:!1}),U}(),ve=ae,Se=ve;return u}()},787:function(a){a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var u=r[a]={exports:{}};return i[a].call(u.exports,u,u.exports,s),u.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return y},default:function(){return w}});var a=s(787);function l(m){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},l(m)}function u(m,g){var v=Object.keys(m);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(m);g&&(x=x.filter(function(E){return Object.getOwnPropertyDescriptor(m,E).enumerable})),v.push.apply(v,x)}return v}function c(m){for(var g=1;g<arguments.length;g++){var v=arguments[g]!=null?arguments[g]:{};g%2?u(Object(v),!0).forEach(function(x){d(m,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(v)):u(Object(v)).forEach(function(x){Object.defineProperty(m,x,Object.getOwnPropertyDescriptor(v,x))})}return m}function d(m,g,v){return(g=function(x){var E=function(O,N){if(l(O)!=="object"||O===null)return O;var P=O[Symbol.toPrimitive];if(P!==void 0){var R=P.call(O,N||"default");if(l(R)!=="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(O)}(x,"string");return l(E)==="symbol"?E:String(E)}(g))in m?Object.defineProperty(m,g,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[g]=v,m}var h=function(m){return c(c({},m),{},{keyboardRef:null})},f=s(689),p=s.n(f),y=function(m){var g=m.baseClass||"react-simple-keyboard",v=a.useRef(null),x=a.useRef(null),E=a.useRef(null),O=a.useRef(m);return a.useEffect(function(){var N=function(H){return c(c({},H),{},{theme:"simple-keyboard ".concat(H.theme||"hg-theme-default")})}(m);if(!v.current){v.current=!0,N.debug&&console.log("ReactSimpleKeyboard: Init");var P=x.current,R=".".concat(g);E.current=new(p())(P||R,N),N.keyboardRef&&N.keyboardRef(E.current)}var _=function(H,F){var j=h(F),X=h(H);return Object.keys(j).filter(function(J){return j[J]!==X[J]})}(O.current,N);if(_.length){var M=E.current;O.current=N,M==null||M.setOptions(N),N.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",_)}},[v,g,O,m]),a.createElement("div",{className:g,ref:x})},w=y}(),o}()})})(FT);var q7=FT.exports;const Q7=iu(q7),eU={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},tU={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},Xk="          ",Zk="  ";function nU({className:t}){const e=NO(),n=_t(),{status:i,dispatch:r}=zr(),[s,o]=k.useState("none"),[a,l]=k.useState(!1),[u,c]=k.useState(!1),d=k.useMemo(()=>[e,e==="es"&&(a&&"accent"||u&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[e,s,a,u]),h=k.useCallback(f=>{i.type==="running"&&i.waitingForInput&&r("keyboard.sendChar",f)},[i,r]);return S.jsxs("div",{className:Le("absolute z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[S.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl font-bold text-white",children:n("computer.keyboard")}),S.jsx(Q7,{theme:Le("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",u&&"hg-diaeresisDeadKey"),layoutName:d,layout:eU,display:tU[e],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:Xk},{class:"hg-diaeresisDeadKeyButton",buttons:Zk}],disableButtonHold:!0,onKeyPress:f=>{if(f==="{shiftleft}"||f==="{shiftright}"){o(p=>p==="none"?"once":"none");return}if(f==="{lock}"){o(p=>p==="none"?"lock":"none");return}if(e==="es"){if(a){Xk.includes(f)&&(l(!1),s==="once"&&o("none"),h(f));return}else if(f===""){l(!0);return}if(u){Zk.includes(f)&&(c(!1),s==="once"&&o("none"),h(f));return}else if(f===""){c(!0);return}}s==="once"&&o("none"),h(f==="{bksp}"?"\b":f==="{enter}"?`
`:f==="{tab}"?"	":f==="{space}"?" ":f)}})]})}function iU({className:t}){const e=_t(),{devices:n}=zr(),i=On(y1).toArray();return n.leds?S.jsxs("div",{className:Le("absolute z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[S.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:e("computer.leds")}),S.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:i.map((r,s)=>S.jsx("div",{className:Le("relative h-7 w-7 rounded-full transition",r?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:S.jsx("div",{className:Le("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",r?"opacity-100":"opacity-0")})},s))})]}):null}function rU({className:t}){const e=_t(),n=On(lz);return S.jsxs("div",{className:Le("absolute z-10 h-[400px] w-[150px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[S.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:e("computer.memory.name")}),S.jsx("div",{className:"m-4 w-min overflow-hidden rounded-lg border border-stone-600",children:S.jsx("table",{className:"font-mono text-lg",children:S.jsx("tbody",{children:n.map((i,r)=>S.jsxs("tr",{title:e("computer.memory.cell",i.address),className:"border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",children:[S.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:i.address.toString()}),S.jsx("td",{className:"px-2 py-1",children:i.value.toString("hex")})]},r))})})})]})}function sU({className:t}){const e=_t();return S.jsxs("div",{className:Le("absolute z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[S.jsxs("div",{className:"flex items-start",children:[S.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:e("computer.pic")}),S.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[S.jsx(ci,{name:"IMR",title:e("generics.io-register","IMR",33),valueAtom:w1,springs:"pic.IMR",emphasis:!0}),S.jsx(ci,{name:"IRR",title:e("generics.io-register","IRR",34),valueAtom:b1,springs:"pic.IRR",emphasis:!0}),S.jsx(ci,{name:"ISR",title:e("generics.io-register","ISR",35),valueAtom:x1,springs:"pic.ISR",emphasis:!0})]})]}),S.jsx("hr",{className:"mb-2 border-stone-600"}),S.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:cp.map((n,i)=>S.jsx(ci,{name:`INT${i}`,title:e("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]})}function oU({className:t}){const e=_t(),{devices:n}=zr();return n.pio?S.jsxs("div",{className:Le("absolute z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[S.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:e("computer.pio.name")}),S.jsx("hr",{className:"border-stone-600"}),S.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[S.jsx(ci,{name:"PA",title:e("generics.io-register","PA",48),valueAtom:S1,springs:"pio.PA"}),S.jsx(ci,{name:"CA",title:e("generics.io-register","CA",50),valueAtom:E1,springs:"pio.CA"})]}),S.jsx("hr",{className:"border-stone-600"}),S.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[S.jsx(ci,{name:"PB",title:e("generics.io-register","PB",49),valueAtom:k1,springs:"pio.PB"}),S.jsx(ci,{name:"CB",title:e("generics.io-register","CB",51),valueAtom:C1,springs:"pio.CB"})]})]}):null}const aU="_printer_fbkny_2",lU="_shadow_fbkny_6",uU="_sides_fbkny_11",cU="_front_fbkny_22",dU="_trailContainer_fbkny_27",hU="_trail_fbkny_27",fU="_paper_fbkny_33",Io={printer:aU,shadow:lU,sides:uU,front:cU,trailContainer:dU,trail:hU,paper:fU},pU=Array.from({length:5},(t,e)=>e);function mU({className:t}){const e=_t(),{devices:n}=zr(),i=On(dp),r=On(hp);return n.printer?S.jsx("div",{className:Le("absolute z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",t),children:S.jsxs("div",{className:Io.printer,title:e("computer.printer.name"),children:[S.jsx("div",{className:Io.shadow}),S.jsx("div",{className:Io.sides}),S.jsxs("div",{className:Io.front,children:[S.jsx("div",{className:Io.trailContainer,children:S.jsx("div",{className:Io.trail,children:S.jsx("pre",{className:Io.paper,children:r})})}),S.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:pU.map(s=>{const o=i[s]?B$(i[s].unsigned):null;return S.jsx("span",{className:Le("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",o===null?"bg-zinc-400":"bg-mantis-500"),children:o},s)})}),S.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:S.jsx($t.div,{className:"h-full bg-mantis-400",style:{width:it("printer.printing.progress").to(s=>`${s*100}%`),opacity:it("printer.printing.opacity")}})})]})]})}):null}const gU="_screen_1okia_2",yU={screen:gU};function vU({className:t}){const e=_t(),n=On(A1);return S.jsxs("div",{className:Le("absolute z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[S.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl font-bold text-white",children:e("computer.screen")}),S.jsx("pre",{className:yU.screen,children:n})]})}const UT="Switch",[wU,oG]=xd(UT),[bU,xU]=wU(UT),SU=k.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,...c}=t,[d,h]=k.useState(null),f=Dt(e,g=>h(g)),p=k.useRef(!1),y=d?!!d.closest("form"):!0,[w=!1,m]=wp({prop:r,defaultProp:s,onChange:u});return k.createElement(bU,{scope:n,checked:w,disabled:a},k.createElement(Ht.button,Fe({type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":VT(w),"data-disabled":a?"":void 0,disabled:a,value:l},c,{ref:f,onClick:Ot(t.onClick,g=>{m(v=>!v),y&&(p.current=g.isPropagationStopped(),p.current||g.stopPropagation())})})),y&&k.createElement(CU,{control:d,bubbles:!p.current,name:i,value:l,checked:w,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),kU="SwitchThumb",EU=k.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=xU(kU,n);return k.createElement(Ht.span,Fe({"data-state":VT(r.checked),"data-disabled":r.disabled?"":void 0},i,{ref:e}))}),CU=t=>{const{control:e,checked:n,bubbles:i=!0,...r}=t,s=k.useRef(null),o=_1(n),a=D1(e);return k.useEffect(()=>{const l=s.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:i});d.call(l,n),l.dispatchEvent(h)}},[o,n,i]),k.createElement("input",Fe({type:"checkbox","aria-hidden":!0,defaultChecked:n},r,{tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function VT(t){return t?"checked":"unchecked"}const HT=SU,AU=EU,WT=k.forwardRef(({className:t,...e},n)=>S.jsx(HT,{className:Le("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:S.jsx(AU,{className:Le("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));WT.displayName=HT.displayName;function PU({className:t}){const e=_t(),{status:n,dispatch:i,devices:r}=zr(),s=On(P1).toArray();return r.switches?S.jsxs("div",{className:Le("absolute z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[S.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:e("computer.switches")}),S.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:s.map((o,a)=>S.jsx("div",{className:"w-6",children:S.jsx(WT,{checked:o,onCheckedChange:()=>i("switch.toggle",a),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800",disabled:n.type!=="running"})},a))})]}):null}function OU({className:t}){const e=_t();return S.jsxs("div",{className:Le("absolute z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[S.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:e("computer.timer")}),S.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[S.jsx(ci,{name:"CONT",title:e("generics.io-register","CONT",16),valueAtom:O1,springs:"timer.CONT"}),S.jsx(ci,{name:"COMP",title:e("generics.io-register","COMP",17),valueAtom:N1,springs:"timer.COMP"})]})]})}function NU(){const t=k.useRef(null);return S.jsx("div",{className:"relative h-full w-full",children:S.jsxs(D7,{minScale:.5,initialPositionX:0,initialPositionY:0,ref:t,children:[S.jsx(L7,{wrapperClass:"!w-full !h-full",contentClass:"!p-[100px]",children:S.jsxs("div",{className:"relative h-[1100px] w-[1700px]",children:[S.jsx(F7,{className:"left-0 top-0"}),S.jsx(W7,{className:"left-0 top-0"}),S.jsx(rU,{className:"left-[800px] top-0"}),S.jsx(Y7,{className:"left-[900px] top-[700px]"}),S.jsx(sU,{className:"left-0 top-[700px]"}),S.jsx(oU,{className:"left-[900px] top-[700px]"}),S.jsx(OU,{className:"left-[500px] top-[875px]"}),S.jsx(U7,{className:"left-[520px] top-[930px]"}),S.jsx(J7,{className:"left-[50px] top-[950px]"}),S.jsx(nU,{className:"left-[1200px] top-[300px]"}),S.jsx(iU,{className:"left-[1300px] top-[820px]"}),S.jsx(mU,{className:"left-[1250px] top-[750px]"}),S.jsx(PU,{className:"left-[1300px] top-[690px]"}),S.jsx(vU,{className:"left-[1200px] top-0"})]})}),S.jsx(I7,{wrapperRef:t})]})})}const TU=1024;let RU=0;class cy{constructor(e,n){this.from=e,this.to=n}}class We{constructor(e={}){this.id=RU++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Xn.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}We.closedBy=new We({deserialize:t=>t.split(" ")});We.openedBy=new We({deserialize:t=>t.split(" ")});We.group=new We({deserialize:t=>t.split(" ")});We.contextHash=new We({perNode:!0});We.lookAhead=new We({perNode:!0});We.mounted=new We({perNode:!0});const MU=Object.create(null);class Xn{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):MU,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Xn(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(We.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(We.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Xn.none=new Xn("",Object.create(null),0,8);class F1{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Xn(i.name,r,i.id,i.flags):i)}return new F1(n)}}const vh=new WeakMap,Jk=new WeakMap;var tn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(tn||(tn={}));class bt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(We.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new kp(this.topNode,e)}cursorAt(e,n=0,i=0){let r=vh.get(this)||this.topNode,s=new kp(r);return s.moveTo(e,n),vh.set(this,s._tree),s}get topNode(){return new ds(this,0,0,null)}resolve(e,n=0){let i=ql(vh.get(this)||this.topNode,e,n,!1);return vh.set(this,i),i}resolveInner(e,n=0){let i=ql(Jk.get(this)||this.topNode,e,n,!0);return Jk.set(this,i),i}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&tn.IncludeAnonymous)>0;for(let l=this.cursor(o|tn.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:H1(Xn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new bt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new bt(Xn.none,n,i,r)))}static build(e){return _U(e)}}bt.empty=new bt(Xn.none,[],[],0);class U1{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new U1(this.buffer,this.index)}}class Ta{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Xn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(GT(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let u=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,u)}return new Ta(s,o,this.set)}}function GT(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function KT(t,e){let n=t.childBefore(e);for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(t=n,n=i.prevSibling):n=i}return t}function ql(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof ds&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:tn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof ds&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class ds{constructor(e,n,i,r){this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(GT(r,i,d,d+c.length)){if(c instanceof Ta){if(s&tn.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new eo(new DU(o,c,e,d),null,h)}else if(s&tn.IncludeAnonymous||!c.type.isAnonymous||V1(c)){let h;if(!(s&tn.IgnoreMounts)&&c.props&&(h=c.prop(We.mounted))&&!h.overlay)return new ds(h.tree,d,e,o);let f=new ds(c,d,e,o);return s&tn.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&tn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&tn.IgnoreOverlays)&&(r=this._tree.prop(We.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new ds(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new kp(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return ql(this,e,n,!1)}resolveInner(e,n=0){return ql(this,e,n,!0)}enterUnfinishedNodesBefore(e){return KT(this,e)}getChild(e,n=null,i=null){let r=xp(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return xp(this,e,n,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Sp(this,e)}}function xp(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(;!r.type.is(n);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Sp(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class DU{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class eo{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new eo(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&tn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new eo(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new eo(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new eo(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new kp(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new bt(this.type,e,n,this.to-this.from)}resolve(e,n=0){return ql(this,e,n,!1)}resolveInner(e,n=0){return ql(this,e,n,!0)}enterUnfinishedNodesBefore(e){return KT(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,i=null){let r=xp(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return xp(this,e,n,i)}get node(){return this}matchContext(e){return Sp(this,e)}}class kp{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ds)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof ds?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&tn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&tn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&tn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&tn.IncludeAnonymous||a instanceof Ta||!a.type.isAnonymous||V1(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new eo(this.buffer,n,this.stack[r]);return this.bufferNode=new eo(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Sp(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Sp(this.node,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function V1(t){return t.children.some(e=>e instanceof Ta||!e.type.isAnonymous||V1(e))}function _U(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=TU,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new U1(n,n.length):n,l=i.types,u=0,c=0;function d(x,E,O,N,P){let{id:R,start:_,end:M,size:H}=a,F=c;for(;H<0;)if(a.next(),H==-1){let L=s[R];O.push(L),N.push(_-x);return}else if(H==-3){u=R;return}else if(H==-4){c=R;return}else throw new RangeError(`Unrecognized record size: ${H}`);let j=l[R],X,J,G=_-x;if(M-_<=r&&(J=y(a.pos-E,P))){let L=new Uint16Array(J.size-J.skip),I=a.pos-J.size,Y=L.length;for(;a.pos>I;)Y=w(J.start,L,Y);X=new Ta(L,M-J.start,i),G=J.start-x}else{let L=a.pos-H;a.next();let I=[],Y=[],ae=R>=o?R:-1,ve=0,Se=M;for(;a.pos>L;)ae>=0&&a.id==ae&&a.size>=0?(a.end<=Se-r&&(f(I,Y,_,ve,a.end,Se,ae,F),ve=I.length,Se=a.end),a.next()):d(_,L,I,Y,ae);if(ae>=0&&ve>0&&ve<I.length&&f(I,Y,_,ve,_,Se,ae,F),I.reverse(),Y.reverse(),ae>-1&&ve>0){let U=h(j);X=H1(j,I,Y,0,I.length,0,M-_,U,U)}else X=p(j,I,Y,M-_,F-M)}O.push(X),N.push(G)}function h(x){return(E,O,N)=>{let P=0,R=E.length-1,_,M;if(R>=0&&(_=E[R])instanceof bt){if(!R&&_.type==x&&_.length==N)return _;(M=_.prop(We.lookAhead))&&(P=O[R]+_.length+M)}return p(x,E,O,N,P)}}function f(x,E,O,N,P,R,_,M){let H=[],F=[];for(;x.length>N;)H.push(x.pop()),F.push(E.pop()+O-P);x.push(p(i.types[_],H,F,R-P,M-R)),E.push(P-O)}function p(x,E,O,N,P=0,R){if(u){let _=[We.contextHash,u];R=R?[_].concat(R):[_]}if(P>25){let _=[We.lookAhead,P];R=R?[_].concat(R):[_]}return new bt(x,E,O,N,R)}function y(x,E){let O=a.fork(),N=0,P=0,R=0,_=O.end-r,M={size:0,start:0,skip:0};e:for(let H=O.pos-x;O.pos>H;){let F=O.size;if(O.id==E&&F>=0){M.size=N,M.start=P,M.skip=R,R+=4,N+=4,O.next();continue}let j=O.pos-F;if(F<0||j<H||O.start<_)break;let X=O.id>=o?4:0,J=O.start;for(O.next();O.pos>j;){if(O.size<0)if(O.size==-3)X+=4;else break e;else O.id>=o&&(X+=4);O.next()}P=J,N+=F,R+=X}return(E<0||N==x)&&(M.size=N,M.start=P,M.skip=R),M.size>4?M:void 0}function w(x,E,O){let{id:N,start:P,end:R,size:_}=a;if(a.next(),_>=0&&N<o){let M=O;if(_>4){let H=a.pos-(_-4);for(;a.pos>H;)O=w(x,E,O)}E[--O]=M,E[--O]=R-x,E[--O]=P-x,E[--O]=N}else _==-3?u=N:_==-4&&(c=N);return O}let m=[],g=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,m,g,-1);let v=(e=t.length)!==null&&e!==void 0?e:m.length?g[0]+m[0].length:0;return new bt(l[t.topID],m.reverse(),g.reverse(),v)}const Yk=new WeakMap;function uf(t,e){if(!t.isAnonymous||e instanceof Ta||e.type!=t)return 1;let n=Yk.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof bt)){n=1;break}n+=uf(t,i)}Yk.set(e,n)}return n}function H1(t,e,n,i,r,s,o,a,l){let u=0;for(let p=i;p<r;p++)u+=uf(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,y,w,m,g){for(let v=w;v<m;){let x=v,E=y[v],O=uf(t,p[v]);for(v++;v<m;v++){let N=uf(t,p[v]);if(O+N>=c)break;O+=N}if(v==x+1){if(O>c){let N=p[x];f(N.children,N.positions,0,N.children.length,y[x]+g);continue}d.push(p[x])}else{let N=y[v-1]+p[v-1].length-E;d.push(H1(t,p,y,x,v,E,N,null,l))}h.push(E+g-s)}}return f(e,n,i,r,0),(a||l)(d,h,o)}class oa{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new oa(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new oa(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return r}}class XT{startParse(e,n,i){return typeof e=="string"&&(e=new $U(e)),i=i?i.length?i.map(r=>new cy(r.from,r.to)):[new cy(0,0)]:[new cy(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class $U{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new We({perNode:!0});let LU=0;class Qt{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=LU++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Qt([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new Ep;return n=>n.modified.indexOf(e)>-1?n:Ep.get(n.base||n,n.modified.concat(e).sort((i,r)=>i.id-r.id))}}let IU=0;class Ep{constructor(){this.instances=[],this.id=IU++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&BU(n,a.modified));if(i)return i;let r=[],s=new Qt(r,e,n);for(let a of n)a.instances.push(s);let o=zU(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Ep.get(a,l));return s}}function BU(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function zU(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function jU(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+r);let c=new Cp(i,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return ZT.add(e)}const ZT=new We;class Cp{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Cp.empty=new Cp([],2,null);function JT(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function FU(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function UU(t,e,n,i=0,r=t.length){let s=new VU(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class VU{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=HU(e)||Cp.empty,d=FU(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(We.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(w=>!w.scope||w.scope(h.tree.type)),y=e.firstChild();for(let w=0,m=a;;w++){let g=w<h.overlay.length?h.overlay[w]:null,v=g?g.from+a:l,x=Math.max(n,m),E=Math.min(i,v);if(x<E&&y)for(;e.from<E&&(this.highlightRange(e,x,E,r,s),this.startSpan(Math.min(E,e.to),u),!(e.to>=v||!e.nextSibling())););if(!g||v>i)break;m=g.to+a,m>n&&(this.highlightRange(f.cursor(),Math.max(n,g.from+a),Math.min(i,m),"",p),this.startSpan(Math.min(i,m),u))}y&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function HU(t){let e=t.type.prop(ZT);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const le=Qt.define,wh=le(),_s=le(),qk=le(_s),Qk=le(_s),$s=le(),bh=le($s),dy=le($s),mr=le(),Bo=le(mr),fr=le(),pr=le(),Pv=le(),Mu=le(Pv),xh=le(),Re={comment:wh,lineComment:le(wh),blockComment:le(wh),docComment:le(wh),name:_s,variableName:le(_s),typeName:qk,tagName:le(qk),propertyName:Qk,attributeName:le(Qk),className:le(_s),labelName:le(_s),namespace:le(_s),macroName:le(_s),literal:$s,string:bh,docString:le(bh),character:le(bh),attributeValue:le(bh),number:dy,integer:le(dy),float:le(dy),bool:le($s),regexp:le($s),escape:le($s),color:le($s),url:le($s),keyword:fr,self:le(fr),null:le(fr),atom:le(fr),unit:le(fr),modifier:le(fr),operatorKeyword:le(fr),controlKeyword:le(fr),definitionKeyword:le(fr),moduleKeyword:le(fr),operator:pr,derefOperator:le(pr),arithmeticOperator:le(pr),logicOperator:le(pr),bitwiseOperator:le(pr),compareOperator:le(pr),updateOperator:le(pr),definitionOperator:le(pr),typeOperator:le(pr),controlOperator:le(pr),punctuation:Pv,separator:le(Pv),bracket:Mu,angleBracket:le(Mu),squareBracket:le(Mu),paren:le(Mu),brace:le(Mu),content:mr,heading:Bo,heading1:le(Bo),heading2:le(Bo),heading3:le(Bo),heading4:le(Bo),heading5:le(Bo),heading6:le(Bo),contentSeparator:le(mr),list:le(mr),quote:le(mr),emphasis:le(mr),strong:le(mr),link:le(mr),monospace:le(mr),strikethrough:le(mr),inserted:le(),deleted:le(),changed:le(),invalid:le(),meta:xh,documentMeta:le(xh),annotation:le(xh),processingInstruction:le(xh),definition:Qt.defineModifier(),constant:Qt.defineModifier(),function:Qt.defineModifier(),standard:Qt.defineModifier(),local:Qt.defineModifier(),special:Qt.defineModifier()};JT([{tag:Re.link,class:"tok-link"},{tag:Re.heading,class:"tok-heading"},{tag:Re.emphasis,class:"tok-emphasis"},{tag:Re.strong,class:"tok-strong"},{tag:Re.keyword,class:"tok-keyword"},{tag:Re.atom,class:"tok-atom"},{tag:Re.bool,class:"tok-bool"},{tag:Re.url,class:"tok-url"},{tag:Re.labelName,class:"tok-labelName"},{tag:Re.inserted,class:"tok-inserted"},{tag:Re.deleted,class:"tok-deleted"},{tag:Re.literal,class:"tok-literal"},{tag:Re.string,class:"tok-string"},{tag:Re.number,class:"tok-number"},{tag:[Re.regexp,Re.escape,Re.special(Re.string)],class:"tok-string2"},{tag:Re.variableName,class:"tok-variableName"},{tag:Re.local(Re.variableName),class:"tok-variableName tok-local"},{tag:Re.definition(Re.variableName),class:"tok-variableName tok-definition"},{tag:Re.special(Re.variableName),class:"tok-variableName2"},{tag:Re.definition(Re.propertyName),class:"tok-propertyName tok-definition"},{tag:Re.typeName,class:"tok-typeName"},{tag:Re.namespace,class:"tok-namespace"},{tag:Re.className,class:"tok-className"},{tag:Re.macroName,class:"tok-macroName"},{tag:Re.propertyName,class:"tok-propertyName"},{tag:Re.operator,class:"tok-operator"},{tag:Re.comment,class:"tok-comment"},{tag:Re.meta,class:"tok-meta"},{tag:Re.invalid,class:"tok-invalid"},{tag:Re.punctuation,class:"tok-punctuation"}]);var hy;const ll=new We;function WU(t){return be.define({combine:t?e=>e.concat(t):void 0})}const GU=new We;class Yi{constructor(e,n,i=[],r=""){this.data=e,this.name=r,je.prototype.hasOwnProperty("tree")||Object.defineProperty(je.prototype,"tree",{get(){return lr(this)}}),this.parser=n,this.extension=[tu.of(this),je.languageData.of((s,o,a)=>{let l=eE(s,o,a),u=l.type.prop(ll);if(!u)return[];let c=s.facet(u),d=l.type.prop(GU);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return eE(e,n,i).type.prop(ll)==this.data}findRegions(e){let n=e.facet(tu);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(ll)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(We.mounted);if(a){if(a.tree.prop(ll)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof bt&&r(u,s.positions[l]+o)}};return r(lr(e),0),i}get allowsNesting(){return!0}}Yi.setState=Ie.define();function eE(t,e,n){let i=t.facet(tu),r=lr(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,tn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function lr(t){let e=t.field(Yi.state,!1);return e?e.tree:bt.empty}class KU{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Du=null;class Ql{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Ql(e,n,[],bt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new KU(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=bt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(oa.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(oa.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Du;Du=this;try{return e()}finally{Du=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=tE(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),i=oa.applyChanges(i,l),r=bt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new Ql(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=tE(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends XT{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Du;if(l){for(let u of r)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new bt(Xn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Du}}function tE(t,e,n){return oa.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class eu{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new eu(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Ql.create(e.facet(tu).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new eu(i)}}Yi.state=vn.define({create:eu.init,update(t,e){for(let n of e.effects)if(n.is(Yi.setState))return n.value;return e.startState.facet(tu)!=e.state.facet(tu)?eu.init(e.state):t.apply(e)}});let YT=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(YT=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const fy=typeof navigator<"u"&&(!((hy=navigator.scheduling)===null||hy===void 0)&&hy.isInputPending)?()=>navigator.scheduling.isInputPending():null,XU=un.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Yi.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Yi.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=YT(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Yi.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!fy?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>fy&&fy()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Yi.setState.of(new eu(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>er(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),tu=be.define({combine(t){return t.length?t[0]:null},enables:t=>[Yi.state,XU,Ce.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class ZU{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const qT=be.define(),W1=be.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Sa(t){let e=t.facet(W1);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Ap(t,e){let n="",i=t.tabSize,r=t.facet(W1)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function QT(t,e){t instanceof je&&(t=new G1(t));for(let i of t.state.facet(qT)){let r=i(t,e);if(r!==void 0)return r}let n=lr(t.state);return n?YU(t,n,e):null}class G1{constructor(e,n={}){this.state=e,this.options=n,this.unit=Sa(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return om(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const JU=new We;function YU(t,e,n){return eR(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function qU(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function QU(t){let e=t.type.prop(JU);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(We.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>iV(o,!0,1,void 0,s&&!qU(o)?r.from:void 0)}return t.parent==null?eV:null}function eR(t,e,n){for(;t;t=t.parent){let i=QU(t);if(i)return i(K1.create(n,e,t))}return null}function eV(){return 0}class K1 extends G1{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.node=i}static create(e,n,i){return new K1(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(tV(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?eR(e,this.pos,this.base):0}}function tV(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function nV(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function iV(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=e?nV(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const rV=200;function sV(){return je.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+rV)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let d=QT(o,c.from);if(d==null)continue;let h=/^\s*/.exec(c.text)[0],f=Ap(o,d);h!=f&&l.push({from:c.from,to:c.from+h.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const oV=be.define(),aV=new We;function lV(t,e,n){let i=lr(t);if(i.length<n)return null;let r=i.resolveInner(n,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(aV);if(a&&(o.to<i.length-50||i.length==t.doc.length||!uV(o))){let l=a(o,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(s=l)}}return s}function uV(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function tR(t,e,n){for(let i of t.facet(oV)){let r=i(t,e,n);if(r)return r}return lV(t,e,n)}function nR(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const X1=Ie.define({map:nR}),_m=Ie.define({map:nR});function iR(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Ed=vn.define({create(){return Ke.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(X1)&&!cV(t,n.value.from,n.value.to)?t=t.update({add:[nE.range(n.value.from,n.value.to)]}):n.is(_m)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>Ce.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(nE.range(i,r))}return Ke.set(e,!0)}});function rR(t,e,n){var i;let r=null;return(i=t.field(Ed,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function cV(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function sR(t,e){return t.field(Ed,!1)?e:e.concat(Ie.appendConfig.of(gV()))}const dV=t=>{for(let e of iR(t)){let n=tR(t.state,e.from,e.to);if(n)return t.dispatch({effects:sR(t.state,[X1.of(n),oR(t,n)])}),!0}return!1},hV=t=>{if(!t.state.field(Ed,!1))return!1;let e=[];for(let n of iR(t)){let i=rR(t.state,n.from,n.to);i&&e.push(_m.of(i),oR(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function oR(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Ce.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const fV=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=tR(e,r.from,r.to);s&&n.push(X1.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:sR(t.state,n)}),!!n.length},pV=t=>{let e=t.state.field(Ed,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(_m.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},mV={placeholderDOM:null,placeholderText:""},aR=be.define({combine(t){return To(t,mV)}});function gV(t){let e=[Ed,yV];return t&&e.push(aR.of(t)),e}const nE=Ke.replace({widget:new class extends Pa{toDOM(t){let{state:e}=t,n=e.facet(aR),i=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),a=rR(t.state,o.from,o.to);a&&t.dispatch({effects:_m.of(a)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),yV=Ce.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class $m{constructor(e,n){this.specs=e;let i;function r(a){let l=mo.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof Yi?a=>a.prop(ll)==o.data:o?a=>a==o:void 0,this.style=JT(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new mo(i):null,this.themeType=n.themeType}static define(e,n){return new $m(e,n||{})}}const Ov=be.define(),lR=be.define({combine(t){return t.length?[t[0]]:null}});function py(t){let e=t.facet(Ov);return e.length?e:t.facet(lR)}function vV(t,e){let n=[bV],i;return t instanceof $m&&(t.module&&n.push(Ce.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(lR.of(t)):i?n.push(Ov.computeN([Ce.darkTheme],r=>r.facet(Ce.darkTheme)==(i=="dark")?[t]:[])):n.push(Ov.of(t)),n}class wV{constructor(e){this.markCache=Object.create(null),this.tree=lr(e.state),this.decorations=this.buildDeco(e,py(e.state))}update(e){let n=lr(e.state),i=py(e.state),r=i!=py(e.startState);n.length<e.view.viewport.to&&!r&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,n){if(!n||!this.tree.length)return Ke.none;let i=new ma;for(let{from:r,to:s}of e.visibleRanges)UU(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=Ke.mark({class:l})))},r,s);return i.finish()}}const bV=hd.high(un.fromClass(wV,{decorations:t=>t.decorations})),xV=1e4,SV="()[]{}",kV=new We;function Nv(t,e,n){let i=t.prop(e<0?We.openedBy:We.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Tv(t){let e=t.type.prop(kV);return e?e(t.node):t}function Sh(t,e,n,i={}){let r=i.maxScanDistance||xV,s=i.brackets||SV,o=lr(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=Nv(l.type,n,s);if(u&&l.from<l.to){let c=Tv(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return EV(t,e,n,l,c,u,s)}}return CV(t,e,n,o,a.type,r,s)}function EV(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=Tv(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Nv(c.type,n,o))u++;else if(Nv(c.type,-n,o)){if(u==0){let d=Tv(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function CV(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let y=n>0?0:f.length-1,w=n>0?f.length:-1;y!=w;y+=n){let m=o.indexOf(f[y]);if(!(m<0||i.resolveInner(p+y,1).type!=r))if(m%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+y,to:p+y+1},matched:m>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function iE(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class uR{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=iE(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:iE(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function AV(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||PV,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Y1}}function PV(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const rE=new WeakMap;class Z1 extends Yi{constructor(e){let n=WU(e.languageData),i=AV(e),r,s=new class extends XT{createParse(o,a,l){return new NV(r,o,a,l)}};super(n,s,[qT.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=MV(n),r=this,this.streamParser=i,this.stateAfter=new We({perNode:!0}),this.tokenTable=e.tokenTable?new fR(i.tokenTable):RV}static define(e){return new Z1(e)}getIndent(e,n){let i=lr(e.state),r=i.resolve(n);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=rE.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=J1(this,i,0,r.from,s??n),l,u;if(a?(u=a.state,l=a.pos+1):(u=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),h=Math.min(n,d.to);if(d.length){let f=o?o(d.from):-1,p=new uR(d.text,e.state.tabSize,e.unit,f<0?void 0:f);for(;p.pos<h-d.from;)dR(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==n)break;l=d.to+1}let c=e.lineAt(n);return o&&s==null&&rE.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function J1(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof bt&&l<r&&J1(t,a,l,i,r);if(u)return u}return null}function cR(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof bt){if(!(l=cR(t,a,n-o,i-o,r)))break;return r?new bt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function OV(t,e,n,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),a=s<=n&&o>n&&J1(t,r.tree,0-r.offset,n,o),l;if(a&&(l=cR(t,r.tree,n+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(i?Sa(i):4),tree:bt.empty}}class NV{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Ql.get(),o=r[0].from,{state:a,tree:l}=OV(e,i,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Sa(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Ql.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,n,i,r),s}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new uR(n,e?e.state.tabSize:4,e?Sa(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=dR(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=bt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:TV,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new bt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new bt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function dR(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const Y1=Object.create(null),rd=[Xn.none],TV=new F1(rd),sE=[],hR=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])hR[t]=pR(Y1,e);class fR{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),hR)}resolve(e){return e?this.table[e]||(this.table[e]=pR(this.extra,e)):0}}const RV=new fR(Y1);function my(t,e){sE.indexOf(t)>-1||(sE.push(t),console.warn(e))}function pR(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||Re[s];o?typeof o=="function"?n?n=o(n):my(s,`Modifier ${s} used at start of tag`):n?my(s,`Tag ${s} used as modifier`):n=o:my(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let i=e.replace(/ /g,"_"),r=Xn.define({id:rd.length,name:i,props:[jU({[i]:n})]});return rd.push(r),r.id}function MV(t){let e=Xn.define({id:rd.length,name:"Document",props:[ll.add(()=>t)]});return rd.push(e),e}const DV=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=q1(t.state,n.from);return i.line?_V(t):i.block?BV(t):!1};function Cd(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const _V=Cd(Q1,0),$V=Cd(Q1,1),LV=Cd(Q1,2),IV=Cd(mR,0),BV=Cd((t,e)=>mR(t,e,jV(e)),0);function q1(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const _u=50;function zV(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-_u,i),o=t.sliceDoc(r,r+_u),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,d;r-i<=2*_u?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+_u),d=t.sliceDoc(r-_u,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function jV(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function mR(t,e,n=e.selection.ranges){let i=n.map(s=>q1(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>zV(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function Q1(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,u=q1(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const Rv=ks.define(),FV=ks.define(),UV=be.define(),gR=be.define({combine(t){return To(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}});function VV(t){let e=0;return t.iterChangedRanges((n,i)=>e=i),e}const yR=vn.define({create(){return Nr.empty},update(t,e){let n=e.state.facet(gR),i=e.annotation(Rv);if(i){let l=e.docChanged?ee.single(VV(e.changes)):void 0,u=Un.fromTransaction(e,l),c=i.side,d=c==0?t.undone:t.done;return u?d=Pp(d,d.length,n.minDepth,u):d=bR(d,e.startState.selection),new Nr(c==0?i.rest:d,c==0?d:i.rest)}let r=e.annotation(FV);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Vt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Un.fromTransaction(e),o=e.annotation(Vt.time),a=e.annotation(Vt.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Nr(t.done.map(Un.fromJSON),t.undone.map(Un.fromJSON))}});function HV(t={}){return[yR,gR.of(t),Ce.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?vR:e.inputType=="historyRedo"?Mv:null;return i?(e.preventDefault(),i(n)):!1}})]}function eb(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(yR,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const vR=eb(0,!1),Mv=eb(1,!1),WV=eb(0,!0);class Un{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Un(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Un(e.changes&&jt.fromJSON(e.changes),[],e.mapped&&Mr.fromJSON(e.mapped),e.startSelection&&ee.fromJSON(e.startSelection),e.selectionsAfter.map(ee.fromJSON))}static fromTransaction(e,n){let i=Ri;for(let r of e.startState.facet(UV)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Un(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Ri)}static selection(e){return new Un(void 0,Ri,void 0,void 0,e)}}function Pp(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function GV(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(i=!0)}}),i}function KV(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function wR(t,e){return t.length?e.length?t.concat(e):t:e}const Ri=[],XV=200;function bR(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-XV));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Pp(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Un.selection([e])]}function ZV(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function gy(t,e){if(!t.length)return t;let n=t.length,i=Ri;for(;n;){let r=JV(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Un.selection(i)]:Ri}function JV(t,e,n){let i=wR(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Ri,n);if(!t.changes)return Un.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Un(r,Ie.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const YV=/^(input\.type|delete)($|\.)/;class Nr{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Nr(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||YV.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,GV(a.changes,e.changes))||i=="input.type.compose")?o=Pp(o,o.length-1,r.minDepth,new Un(e.changes.compose(a.changes),wR(e.effects,a.effects),a.mapped,a.startSelection,Ri)):o=Pp(o,o.length,r.minDepth,e),new Nr(o,Ri,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Ri;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&KV(s[s.length-1],e)?this:new Nr(bR(this.done,e),this.undone,n,i)}addMapping(e){return new Nr(gy(this.done,e),gy(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Rv.of({side:e,rest:ZV(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?Ri:r.slice(0,r.length-1);return s.mapped&&(o=gy(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Rv.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Nr.empty=new Nr(Ri,Ri);function Ad(t,e){return ee.create(t.ranges.map(e),t.mainIndex)}function Mo(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ra({state:t,dispatch:e},n){let i=Ad(t.selection,n);return i.eq(t.selection)?!1:(e(Mo(t,i)),!0)}function Lm(t,e){return ee.cursor(e?t.to:t.from)}function xR(t,e){return Ra(t,n=>n.empty?t.moveByChar(n,e):Lm(n,e))}function Do(t){return t.textDirectionAt(t.state.selection.main.head)==wt.LTR}const oE=t=>xR(t,!Do(t)),aE=t=>xR(t,Do(t));function SR(t,e){return Ra(t,n=>n.empty?t.moveByGroup(n,e):Lm(n,e))}const qV=t=>SR(t,!Do(t)),QV=t=>SR(t,Do(t));function kR(t,e){return Ra(t,n=>{if(!n.empty)return Lm(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const lE=t=>kR(t,!1),uE=t=>kR(t,!0);function ER(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Ce.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function CR(t,e){let n=ER(t),{state:i}=t,r=Ad(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Lm(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Ce.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Mo(i,r),{effects:s}),!0}const yy=t=>CR(t,!1),vy=t=>CR(t,!0);function Im(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=ee.cursor(i.from+s))}return r}const cE=t=>Ra(t,e=>Im(t,e,!0)),dE=t=>Ra(t,e=>Im(t,e,!1)),eH=t=>Ra(t,e=>ee.cursor(t.lineBlockAt(e.head).from,1)),tH=t=>Ra(t,e=>ee.cursor(t.lineBlockAt(e.head).to,-1));function nH(t,e,n){let i=!1,r=Ad(t.selection,s=>{let o=Sh(t,s.head,-1)||Sh(t,s.head,1)||s.head>0&&Sh(t,s.head-1,1)||s.head<t.doc.length&&Sh(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?ee.range(s.anchor,a):ee.cursor(a)});return i?(e(Mo(t,r)),!0):!1}const iH=({state:t,dispatch:e})=>nH(t,e,!1);function _o(t,e){let n=Ad(t.state.selection,i=>{let r=e(i);return ee.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Mo(t.state,n)),!0)}function AR(t,e){return _o(t,n=>t.moveByChar(n,e))}const hE=t=>AR(t,!Do(t)),fE=t=>AR(t,Do(t));function PR(t,e){return _o(t,n=>t.moveByGroup(n,e))}const rH=t=>PR(t,!Do(t)),sH=t=>PR(t,Do(t));function OR(t,e){return _o(t,n=>t.moveVertically(n,e))}const pE=t=>OR(t,!1),mE=t=>OR(t,!0);function NR(t,e){return _o(t,n=>t.moveVertically(n,e,ER(t).height))}const gE=t=>NR(t,!1),yE=t=>NR(t,!0),vE=t=>_o(t,e=>Im(t,e,!0)),wE=t=>_o(t,e=>Im(t,e,!1)),oH=t=>_o(t,e=>ee.cursor(t.lineBlockAt(e.head).from)),aH=t=>_o(t,e=>ee.cursor(t.lineBlockAt(e.head).to)),bE=({state:t,dispatch:e})=>(e(Mo(t,{anchor:0})),!0),xE=({state:t,dispatch:e})=>(e(Mo(t,{anchor:t.doc.length})),!0),SE=({state:t,dispatch:e})=>(e(Mo(t,{anchor:t.selection.main.anchor,head:0})),!0),kE=({state:t,dispatch:e})=>(e(Mo(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),lH=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),uH=({state:t,dispatch:e})=>{let n=zm(t).map(({from:i,to:r})=>ee.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:ee.create(n),userEvent:"select"})),!0};function Bm(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(n="delete.backward",l=kh(t,l,!1)):l>o&&(n="delete.forward",l=kh(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=kh(t,o,!1),a=kh(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ee.cursor(o)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Ce.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function kh(t,e,n){if(t instanceof Ce)for(let i of t.state.facet(Ce.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const TR=(t,e)=>Bm(t,n=>{let{state:i}=t,r=i.doc.lineAt(n),s,o;if(!e&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,n-r.from))){if(s[s.length-1]=="	")return n-1;let a=om(s,i.tabSize),l=a%Sa(i)||Sa(i);for(let u=0;u<l&&s[s.length-1-u]==" ";u++)n--;o=n}else o=mn(r.text,n-r.from,e,e)+r.from,o==n&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),wy=t=>TR(t,!1),EE=t=>TR(t,!0),RR=(t,e)=>Bm(t,n=>{let i=n,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=mn(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||i!=n)&&(a=c),i=l}return i}),CE=t=>RR(t,!1),cH=t=>RR(t,!0),AE=t=>Bm(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),dH=t=>Bm(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),hH=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ze.of(["",""])},range:ee.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},fH=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:mn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:mn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:ee.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function zm(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function MR(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of zm(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(ee.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(ee.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ee.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const pH=({state:t,dispatch:e})=>MR(t,e,!1),mH=({state:t,dispatch:e})=>MR(t,e,!0);function DR(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of zm(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const gH=({state:t,dispatch:e})=>DR(t,e,!1),yH=({state:t,dispatch:e})=>DR(t,e,!0),vH=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(zm(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Ad(e.selection,r=>t.moveVertically(r,!0)).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function wH(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=lr(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(We.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const PE=bH(!1);function bH(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&wH(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new G1(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=QT(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Ap(e,c)];return l&&d.push(Ap(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ze.of(d)},range:ee.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function _R(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:ee.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const OE=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(_R(t,(n,i)=>{i.push({from:n.from,insert:t.facet(W1)})}),{userEvent:"input.indent"})),!0),NE=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(_R(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=om(r,t.tabSize),o=0,a=Ap(t,Math.max(0,s-Sa(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function nt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)$R(t,arguments[e]);return t}function $R(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)$R(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const TE=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class sd{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(TE(a)):TE,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return kn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=zw(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Xi(e);let r=this.normalize(n);for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:n+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(sd.prototype[Symbol.iterator]=function(){return this});const LR={from:-1,to:-1,match:/.*/.exec("")},tb="gm"+(/x/.unicode==null?"":"u");class IR{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=LR,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new BR(e,n,i,r,s);this.re=new RegExp(n,tb+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Op(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Op(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const by=new WeakMap;class Cl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=by.get(e);if(!r||r.from>=i||r.to<=n){let a=new Cl(n,e.sliceString(n,i));return by.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),by.set(e,new Cl(o,s)),new Cl(n,s.slice(n-o,i-o))}}class BR{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=LR,this.matchPos=Op(e,r),this.re=new RegExp(n,tb+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Cl.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Op(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Cl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(IR.prototype[Symbol.iterator]=BR.prototype[Symbol.iterator]=function(){return this});function xH(t){try{return new RegExp(t,tb),!0}catch{return!1}}function Op(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function Dv(t){let e=nt("input",{class:"cm-textfield",name:"line"}),n=nt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:Np.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},nt("label",t.state.phrase("Go to line"),": ",e)," ",nt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,a,l,u,c]=r,d=u?+u.slice(1):0,h=l?+l:o.number;if(l&&c){let y=h/100;a&&(y=y*(a=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*y)}else l&&a&&(h=h*(a=="-"?-1:1)+o.number);let f=s.doc.line(Math.max(1,Math.min(s.doc.lines,h))),p=ee.cursor(f.from+Math.max(0,Math.min(d,f.length)));t.dispatch({effects:[Np.of(!1),Ce.scrollIntoView(p.from,{y:"center"})],selection:p}),t.focus()}return{dom:n}}const Np=Ie.define(),RE=vn.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Np)&&(t=n.value);return t},provide:t=>Hl.from(t,e=>e?Dv:null)}),SH=t=>{let e=$c(t,Dv);if(!e){let n=[Np.of(!0)];t.state.field(RE,!1)==null&&n.push(Ie.appendConfig.of([RE,kH])),t.dispatch({effects:n}),e=$c(t,Dv)}return e&&e.dom.querySelector("input").focus(),!0},kH=Ce.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),EH=({state:t,dispatch:e})=>{let{selection:n}=t,i=ee.create(n.ranges.map(r=>t.wordAt(r.head)||ee.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function CH(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new sd(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new sd(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const AH=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return EH({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=CH(t,i);return r?(e(t.update({selection:t.selection.addRange(ee.range(r.from,r.to),!1),effects:Ce.scrollIntoView(r.to)})),!0):!1},hu=be.define({combine(t){return To(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new $H(e),scrollToMatch:e=>Ce.scrollIntoView(e)})}});class zR{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||xH(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new TH(this):new OH(this)}getCursor(e,n=0,i){let r=e.doc?e:je.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Ga(this,r,n,i):Wa(this,r,n,i)}}class jR{constructor(e){this.spec=e}}function Wa(t,e,n,i){return new sd(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?PH(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function PH(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Tp(r,n-s))!=on.Word||e(Rp(r,n-s))!=on.Word)&&(e(Rp(r,i-s))!=on.Word||e(Tp(r,i-s))!=on.Word))}class OH extends jR{constructor(e){super(e)}nextMatch(e,n,i){let r=Wa(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=Wa(this.spec,e,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Wa(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Wa(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Wa(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Ga(t,e,n,i){return new IR(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?NH(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Tp(t,e){return t.slice(mn(t,e,!1),e)}function Rp(t,e){return t.slice(e,mn(t,e))}function NH(t){return(e,n,i)=>!i[0].length||(t(Tp(i.input,i.index))!=on.Word||t(Rp(i.input,i.index))!=on.Word)&&(t(Rp(i.input,i.index+i[0].length))!=on.Word||t(Tp(i.input,i.index+i[0].length))!=on.Word)}class TH extends jR{nextMatch(e,n,i){let r=Ga(this.spec,e,i,e.doc.length).next();return r.done&&(r=Ga(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Ga(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n))}matchAll(e,n){let i=Ga(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Ga(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const od=Ie.define(),nb=Ie.define(),ho=vn.define({create(t){return new xy(_v(t).create(),null)},update(t,e){for(let n of e.effects)n.is(od)?t=new xy(n.value.create(),t.panel):n.is(nb)&&(t=new xy(t.query,n.value?ib:null));return t},provide:t=>Hl.from(t,e=>e.panel)});class xy{constructor(e,n){this.query=e,this.panel=n}}const RH=Ke.mark({class:"cm-searchMatch"}),MH=Ke.mark({class:"cm-searchMatch cm-searchMatch-selected"}),DH=un.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ho))}update(t){let e=t.state.field(ho);(e!=t.startState.field(ho)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ke.none;let{view:n}=this,i=new ma;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?MH:RH)})}return i.finish()}},{decorations:t=>t.decorations});function Pd(t){return e=>{let n=e.state.field(ho,!1);return n&&n.query.spec.valid?t(e,n):WR(e)}}const ME=Pd((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=ee.single(i.from,i.to),s=t.state.facet(hu);return t.dispatch({selection:r,effects:[rb(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),HR(t),!0}),DE=Pd((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=ee.single(r.from,r.to),o=t.state.facet(hu);return t.dispatch({selection:s,effects:[rb(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),HR(t),!0}),FR=Pd((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ee.create(n.map(i=>ee.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),_H=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new sd(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(ee.range(a.value.from,a.value.to))}return e(t.update({selection:ee.create(s,o),userEvent:"select.search.matches"})),!0},_E=Pd((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=[],a,l,u=[];if(s.from==i&&s.to==r&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),u.push(Ce.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=ee.single(s.from-c,s.to-c),u.push(rb(t,s)),u.push(n.facet(hu).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:u,userEvent:"input.replace"}),!0}),UR=Pd((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Ce.announce.of(i),userEvent:"input.replace.all"}),!0});function ib(t){return t.state.facet(hu).createPanel(t)}function _v(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(hu);return new zR({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function VR(t){let e=$c(t,ib);return e&&e.dom.querySelector("[main-field]")}function HR(t){let e=VR(t);e&&e==t.root.activeElement&&e.select()}const WR=t=>{let e=t.state.field(ho,!1);if(e&&e.panel){let n=VR(t);if(n&&n!=t.root.activeElement){let i=_v(t.state,e.query.spec);i.valid&&t.dispatch({effects:od.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[nb.of(!0),e?od.of(_v(t.state,e.query.spec)):Ie.appendConfig.of(IH)]});return!0},GR=t=>{let e=t.state.field(ho,!1);if(!e||!e.panel)return!1;let n=$c(t,ib);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:nb.of(!1)}),!0};class $H{constructor(e){this.view=e;let n=this.query=e.state.field(ho).query.spec;this.commit=this.commit.bind(this),this.searchField=nt("input",{value:n.search,placeholder:Jn(e,"Find"),"aria-label":Jn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=nt("input",{value:n.replace,placeholder:Jn(e,"Replace"),"aria-label":Jn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=nt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=nt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=nt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return nt("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=nt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>ME(e),[Jn(e,"next")]),i("prev",()=>DE(e),[Jn(e,"previous")]),i("select",()=>FR(e),[Jn(e,"all")]),nt("label",null,[this.caseField,Jn(e,"match case")]),nt("label",null,[this.reField,Jn(e,"regexp")]),nt("label",null,[this.wordField,Jn(e,"by word")]),...e.state.readOnly?[]:[nt("br"),this.replaceField,i("replace",()=>_E(e),[Jn(e,"replace")]),i("replaceAll",()=>UR(e),[Jn(e,"replace all")])],nt("button",{name:"close",onclick:()=>GR(e),"aria-label":Jn(e,"close"),type:"button"},[""])])}commit(){let e=new zR({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:od.of(e)}))}keydown(e){U3(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?DE:ME)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),_E(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(od)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(hu).top}}function Jn(t,e){return t.state.phrase(e)}const Eh=30,Ch=/[\s\.,:;?!]/;function rb(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Eh),o=Math.min(r,n+Eh),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Eh;l++)if(!Ch.test(a[l+1])&&Ch.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Eh;l--)if(!Ch.test(a[l-1])&&Ch.test(a[l])){a=a.slice(0,l);break}}return Ce.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const LH=Ce.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),IH=[ho,hd.lowest(DH),LH];class BH{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=lr(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(KR(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function $E(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function zH(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=$E(e)+$E(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function jH(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:zH(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class LE{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Al(t){return t.selection.main.from}function KR(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const FH=ks.define();function UH(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i)?{range:a}:{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:e},range:ee.cursor(a.from+s+e.length)})),{userEvent:"input.complete"})}const IE=new WeakMap;function VH(t){if(!Array.isArray(t))return t;let e=IE.get(t);return e||IE.set(t,e=jH(t)),e}const XR=Ie.define(),sb=Ie.define();class HH{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=kn(e,n),r=Xi(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(kn(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let g=kn(e,0),v=Xi(g),x=v==e.length?0:-100;if(g!=n[0])if(g==i[0])x+=-200;else return!1;return this.ret(x,[0,v])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let g=0,v=Math.min(e.length,200);g<v&&u<l;){let x=kn(e,g);(x==n[u]||x==i[u])&&(r[u++]=g),g+=Xi(x)}if(u<l)return!1}let c=0,d=0,h=!1,f=0,p=-1,y=-1,w=/[a-z]/.test(e),m=!0;for(let g=0,v=Math.min(e.length,200),x=0;g<v&&d<l;){let E=kn(e,g);a<0&&(c<l&&E==n[c]&&(s[c++]=g),f<l&&(E==n[f]||E==i[f]?(f==0&&(p=g),y=g+1,f++):f=0));let O,N=E<255?E>=48&&E<=57||E>=97&&E<=122?2:E>=65&&E<=90?1:0:(O=zw(E))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!g||N==1&&w||x==0&&N!=0)&&(n[d]==E||i[d]==E&&(h=!0)?o[d++]=g:o.length&&(m=!1)),x=N,g+=Xi(E)}return d==l&&o[0]==0&&m?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(y==e.length?0:-100),[0,y]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-200+-700-e.length,[p,y]):d==l?this.result(-100+(h?-200:0)+-700+(m?0:-1100),o,e):n.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Xi(kn(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}const is=be.define({combine(t){return To(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:WH,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>BE(e(i),n(i)),optionClass:(e,n)=>i=>BE(e(i),n(i)),addToOptions:(e,n)=>e.concat(n)})}});function BE(t,e){return t?e?t+" "+e:t:e}function WH(t,e,n,i,r){let s=t.textDirection==wt.RTL,o=s,a=!1,l="top",u,c,d=e.left-r.left,h=r.right-e.right,f=i.right-i.left,p=i.bottom-i.top;if(o&&d<Math.min(f,h)?o=!1:!o&&h<Math.min(f,d)&&(o=!0),f<=(o?d:h))u=Math.max(r.top,Math.min(n.top,r.bottom-p))-e.top,c=Math.min(400,o?d:h);else{a=!0,c=Math.min(400,(s?e.right:r.right-e.left)-30);let y=r.bottom-e.bottom;y>=p||y>e.top?u=n.bottom-e.top:(l="bottom",u=e.bottom-n.top)}return{style:`${l}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":o?"left":"right")}}function GH(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r){let s=document.createElement("span");s.className="cm-completionLabel";let o=n.displayLabel||n.label,a=0;for(let l=0;l<r.length;){let u=r[l++],c=r[l++];u>a&&s.appendChild(document.createTextNode(o.slice(a,u)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(u,c))),d.className="cm-completionMatchedText",a=c}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function zE(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class KH{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(is);this.optionContent=GH(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=zE(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let u=l.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<s.length){this.applyCompletion(e,s[+c[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(is).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:sb.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,i,r;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=s.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=zE(n.options.length,n.selected,this.view.state.facet(is).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>er(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&ZH(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(is).positionInfo(this.view,n,r,i,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,l);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function XH(t,e){return n=>new KH(n,t,e)}function ZH(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<n.top?t.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(t.scrollTop+=i.bottom-n.bottom)}function jE(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function JH(t,e){let n=[],i=null,r=l=>{n.push(l);let{section:u}=l.completion;if(u){i||(i=[]);let c=typeof u=="string"?u:u.name;i.some(d=>d.name==c)||i.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult()){let u=l.result.getMatch;if(l.result.filter===!1)for(let c of l.result.options)r(new LE(c,l.source,u?u(c):[],1e9-n.length));else{let c=new HH(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(c.match(d.label)){let h=d.displayLabel?u?u(d,c.matched):[]:c.matched;r(new LE(d,l.source,h,c.score+(d.boost||0)))}}}if(i){let l=Object.create(null),u=0,c=(d,h)=>{var f,p;return((f=d.rank)!==null&&f!==void 0?f:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(d.name<h.name?-1:1)};for(let d of i.sort(c))u-=1e5,l[d.name]=u;for(let d of n){let{section:h}=d.completion;h&&(d.score+=l[typeof h=="string"?h:h.name])}}let s=[],o=null,a=e.facet(is).compareCompletions;for(let l of n.sort((u,c)=>c.score-u.score||a(u.completion,c.completion))){let u=l.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?s.push(l):jE(l.completion)>jE(o)&&(s[s.length-1]=l),o=l.completion}return s}class ul{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new ul(this.options,FE(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s){let o=JH(e,n);if(!o.length)return r&&e.some(l=>l.state==1)?new ul(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let a=n.facet(is).selectOnOpen?0:-1;if(r&&r.selected!=a&&r.selected!=-1){let l=r.options[r.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){a=u;break}}return new ul(o,FE(i,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:XH(fu,JR),above:s.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new ul(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Mp{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Mp(QH,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(is),s=(i.override||n.languageDataAt("autocomplete",Al(n)).map(VH)).map(a=>(this.active.find(u=>u.source==a)||new oi(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!YH(s,this.active)?o=ul.build(s,n,this.id,o,i):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new oi(a.source,0):a));for(let a of e.effects)a.is(ZR)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Mp(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:qH}}function YH(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const qH={"aria-autocomplete":"list"};function FE(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const QH=[];function eW(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class oi{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=eW(e),r=this;i?r=r.handleUserEvent(e,i,n):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new oi(r.source,0));for(let s of e.effects)if(s.is(XR))r=new oi(r.source,1,s.value?Al(e.state):-1);else if(s.is(sb))r=new oi(r.source,0);else if(s.is(nW))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new oi(this.source,1)}handleChange(e){return e.changes.touchesRange(Al(e.startState))?new oi(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new oi(this.source,this.state,e.mapPos(this.explicitPos))}}class cc extends oi{constructor(e,n,i,r,s){super(e,2,n),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,n,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Al(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&Al(e.startState)==this.from)return new oi(this.source,n=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return tW(this.result.validFor,e.state,s,o)?new cc(this.source,l,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new BH(e.state,a,l>=0)))?new cc(this.source,l,u,u.from,(r=u.to)!==null&&r!==void 0?r:Al(e.state)):new oi(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new oi(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new cc(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function tW(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):KR(t,!0).test(r)}const nW=Ie.define({map(t,e){return t.map(n=>n.map(e))}}),ZR=Ie.define(),fu=vn.define({create(){return Mp.start()},update(t,e){return t.update(e)},provide:t=>[Zw.from(t,e=>e.tooltip),Ce.contentAttributes.from(t,e=>e.attrs)]});function JR(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(fu).active.find(r=>r.source==e.source);return i instanceof cc?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},UH(t.state,n,i.from,i.to)),{annotations:FH.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}function Ah(t,e="option"){return n=>{let i=n.state.field(fu,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(is).interactionDelay)return!1;let r=1,s;e=="page"&&(s=x5(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:ZR.of(a)}),!0}}const UE=t=>{let e=t.state.field(fu,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(is).interactionDelay?!1:JR(t,e.open.options[e.open.selected])},iW=t=>t.state.field(fu,!1)?(t.dispatch({effects:XR.of(!0)}),!0):!1,rW=t=>{let e=t.state.field(fu,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:sb.of(null)}),!0)},YR={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},qR=new class extends pa{};qR.startSide=1;qR.endSide=-1;const Sy="()[]{}<>";function sW(t){for(let e=0;e<Sy.length;e+=2)if(Sy.charCodeAt(e)==t)return Sy.charAt(e+1);return zw(t<128?t:t+1)}function oW(t,e){return t.languageDataAt("closeBrackets",e)[0]||YR}const aW=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=oW(t,t.selection.main.head).brackets||YR.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=uW(t.doc,o.head);for(let l of i)if(l==a&&lW(t.doc,o.head)==sW(kn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ee.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function lW(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Xi(kn(n,0)))}function uW(t,e){let n=t.sliceString(e-2,e);return Xi(kn(n,0))==n.length?n:n.slice(1)}class cW{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Ko{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(ea).markerFilter;s&&(r=s(r));let o=Ke.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?Ke.widget({widget:new xW(a),diagnostic:a}).range(a.from):Ke.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new Ko(o,n,nu(o))}}function nu(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new cW(r,s,o.diagnostic),!1}),i}function dW(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(i=>i.is(ob))||t.changes.touchesRange(n.from,n.to))}function QR(t,e){return t.field(Vn,!1)?e:e.concat(Ie.appendConfig.of(iM))}function hW(t,e){return{effects:QR(t,[ob.of(e)])}}const ob=Ie.define(),ab=Ie.define(),eM=Ie.define(),Vn=vn.define({create(){return new Ko(Ke.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=nu(n,t.selected.diagnostic,r)||nu(n,null,r)}t=new Ko(n,t.panel,i)}for(let n of e.effects)n.is(ob)?t=Ko.init(n.value,t.panel,e.state):n.is(ab)?t=new Ko(t.diagnostics,n.value?jm.open:null,t.selected):n.is(eM)&&(t=new Ko(t.diagnostics,t.panel,n.value));return t},provide:t=>[Hl.from(t,e=>e.panel),Ce.decorations.from(t,e=>e.diagnostics)]});function fW(t){let e=t.field(Vn,!1);return e?e.diagnostics.size:0}const pW=Ke.mark({class:"cm-lintRange cm-lintRange-active"});function mW(t,e,n){let{diagnostics:i}=t.state.field(Vn),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(ea).tooltipFilter;return a&&(r=a(r)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:gW(t,r)}}}:null}function gW(t,e){return nt("ul",{class:"cm-tooltip-lint"},e.map(n=>nM(t,n,!1)))}const yW=t=>{let e=t.state.field(Vn,!1);(!e||!e.panel)&&t.dispatch({effects:QR(t.state,[ab.of(!0)])});let n=$c(t,jm.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},VE=t=>{let e=t.state.field(Vn,!1);return!e||!e.panel?!1:(t.dispatch({effects:ab.of(!1)}),!0)},vW=t=>{let e=t.state.field(Vn,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},wW=un.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(ea);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(ea);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(hW(this.view.state,r))},i=>{er(this.view.state,i)})}}update(t){let e=t.state.facet(ea);(t.docChanged||e!=t.startState.facet(ea)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),ea=be.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},To(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function bW(t,e={}){return[ea.of({source:t,config:e}),wW,iM]}function tM(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function nM(t,e,n){var i;let r=n?tM(e.actions):[];return nt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},nt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=nu(t.state.field(Vn).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),nt("u",u.slice(c,c+1)),u.slice(c+1)];return nt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&nt("div",{class:"cm-diagnosticSource"},e.source))}class xW extends Pa{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return nt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class HE{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=nM(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class jm{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)VE(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=tM(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=nu(this.view.state.field(Vn).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=nt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=nt("div",{class:"cm-panel-lint"},this.list,nt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>VE(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Vn).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Vn),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new HE(this.view,l.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new HE(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Vn),i=nu(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:eM.of(i)})}static open(e){return new jm(e)}}function SW(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Ph(t){return SW(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const kW=Ce.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ph("#d11")},".cm-lintRange-warning":{backgroundImage:Ph("orange")},".cm-lintRange-info":{backgroundImage:Ph("#999")},".cm-lintRange-hint":{backgroundImage:Ph("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),iM=[Vn,Ce.decorations.compute([Vn],t=>{let{selected:e,panel:n}=t.field(Vn);return!e||!n||e.from==e.to?Ke.none:Ke.set([pW.range(e.from,e.to)])}),b5(mW,{hideOn:dW}),kW],rM=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},EW=rM("up"),CW=rM("down"),AW=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(ee.range(s,s)):e=ee.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},PW=[{key:"Ctrl-Space",run:iW},{key:"Escape",run:rW},{key:"ArrowDown",run:Ah(!0)},{key:"ArrowUp",run:Ah(!1)},{key:"PageDown",run:Ah(!0,"page")},{key:"PageUp",run:Ah(!1,"page")},{key:"Enter",run:UE},{key:"Tab",run:UE},{key:"Mod-f",run:WR,scope:"editor search-panel"},{key:"Escape",run:GR,scope:"editor search-panel"},{key:"Alt-Enter",run:FR,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:UR,scope:"editor search-panel"},{key:"Ctrl-g",run:SH},{key:"Mod-d",run:AH,preventDefault:!0},{key:"Shift-Mod-l",run:_H},{key:"Enter",run:PE,shift:PE},{key:"ArrowLeft",run:oE,shift:hE,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:qV,shift:rH},{key:"ArrowRight",run:aE,shift:fE,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:QV,shift:sH},{key:"ArrowUp",run:lE,shift:pE,preventDefault:!0},{key:"ArrowDown",run:uE,shift:mE,preventDefault:!0},{key:"Home",run:dE,shift:wE},{mac:"Cmd-ArrowLeft",run:dE,shift:wE},{key:"Mod-Home",run:bE,shift:SE},{mac:"Cmd-ArrowUp",run:bE,shift:SE},{key:"PageUp",run:yy,shift:gE},{mac:"Ctrl-ArrowUp",run:yy,shift:gE},{key:"PageDown",run:vy,shift:yE},{mac:"Ctrl-ArrowDown",run:vy,shift:yE},{key:"End",run:cE,shift:vE},{mac:"Cmd-ArrowRight",run:cE,shift:vE},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:EW,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:CW,preventDefault:!0},{key:"Shift-Alt-i",run:AW},{key:"Mod-End",run:xE,shift:kE},{mac:"Cmd-ArrowDown",run:xE,shift:kE},{key:"Mod-a",run:lH},{key:"Backspace",run:aW},{key:"Backspace",run:wy,shift:wy},{key:"Delete",run:EE},{key:"Mod-Backspace",mac:"Alt-Backspace",run:CE},{key:"Mod-Delete",mac:"Alt-Delete",run:cH},{mac:"Mod-Backspace",run:dH},{mac:"Mod-Delete",run:AE},{mac:"Ctrl-b",run:oE,shift:hE,preventDefault:!0},{mac:"Ctrl-f",run:aE,shift:fE},{mac:"Ctrl-p",run:lE,shift:pE},{mac:"Ctrl-n",run:uE,shift:mE},{mac:"Ctrl-a",run:eH,shift:oH},{mac:"Ctrl-e",run:tH,shift:aH},{mac:"Ctrl-d",run:EE},{mac:"Ctrl-h",run:wy},{mac:"Ctrl-k",run:AE},{mac:"Ctrl-Alt-h",run:CE},{mac:"Ctrl-o",run:hH},{mac:"Ctrl-t",run:fH},{mac:"Ctrl-v",run:vy},{mac:"Alt-v",run:yy},{key:"Shift-Mod-k",run:vH},{key:"Alt-ArrowDown",run:mH},{key:"Alt-ArrowUp",run:pH},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:yH},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:gH},{key:"Mod-l",run:uH,preventDefault:!0},{key:"Shift-Mod-\\",run:iH},{key:"Tab",run:OE,shift:NE,preventDefault:!0},{key:"Mod-[",run:NE},{key:"Mod-]",run:OE},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:dV},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:hV},{key:"Mod-k Mod-0",run:fV},{key:"Mod-k Mod-j",run:pV},{key:"Mod-k Mod-c",run:$V},{key:"Mod-k Mod-u",run:LV},{key:"Mod-/",run:DV},{key:"Shift-Alt-a",run:IV},{key:"Mod-z",run:vR,preventDefault:!0},{key:"Mod-y",run:Mv,preventDefault:!0},{key:"Mod-Shift-z",run:Mv,preventDefault:!0},{key:"Mod-u",run:WV,preventDefault:!0},{key:"Mod-Shift-m",run:yW},{key:"F8",run:vW}];function OW(t){const e=document.createElement("div");return WE(t.state,e),{dom:e,update(n){WE(n.view.state,e)}}}function WE(t,e){const n=fW(t);e.textContent=cm(Lr().language,"editor.lintSummary",n),e.className=Le("border-t border-stone-600 bg-stone-800 pr-3 text-right font-sans text-xs tracking-wider",n===0?"text-stone-400":"font-semibold text-red-400")}const sM="vonsim-program",NW=un.fromClass(class{constructor(t){oe(this,"timeout",null);this.view=t}update(t){t.docChanged&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=this.view.state.doc.toString();localStorage.setItem(sM,e),this.timeout=null},500))}}),TW=`; Bienvenido a VonSim!
; Este es un ejemplo de cdigo que calcula los primeros
; n nmeros de la sucesin de Fibonacci, y se guardan a
; partir de la posicin 1000h de la memoria.

     n EQU 10    ; Calcula los primeros 10 nmeros

       ORG 1000h
inicio DB 1

       ORG 2000h
       MOV BX, OFFSET inicio + 1
       MOV AL, 0
       MOV AH, inicio

BUCLE: CMP BX, OFFSET inicio + n
       JNS FIN
       MOV CL, AH
       ADD CL, AL
       MOV AL, AH
       MOV AH, CL
       MOV [BX], CL
       INC BX
       JMP BUCLE
  FIN: HLT
       END
`,RW=localStorage.getItem(sM)||TW,Yn={comment:Re.comment,"data-directive":Qt.define(),identifier:Re.variableName,instruction:Qt.define(),label:Re.labelName,number:Re.number,operator:Re.operator,offset:Qt.define(),"ptr-size":Qt.define(),punctuation:Re.punctuation,register:Qt.define(),special:Qt.define(),string:Re.string,unassigned:Qt.define()},MW=Z1.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":Lw.includes(e)?"data-directive":Iw.includes(e)?"instruction":If.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Yn}),DW=vV($m.define([{tag:Yn.comment,class:"text-stone-500 italic"},{tag:Yn["data-directive"],class:"text-rose-400/80"},{tag:Yn.instruction,class:"text-mantis-400"},{tag:Yn.number,class:"text-cyan-300/60"},{tag:Yn.operator,class:"text-rose-300"},{tag:Yn.offset,class:"text-rose-400/80 italic"},{tag:Yn["ptr-size"],class:"text-rose-400/80 italic"},{tag:Yn.punctuation,class:"text-stone-600"},{tag:Yn.register,class:"text-emerald-400/80"},{tag:Yn.special,class:"text-yellow-300/80"},{tag:Yn.string,class:"text-orange-300"},{tag:Yn.unassigned,class:"text-rose-400/80"}])),_W=bW(t=>{const e=t.state.doc.toString(),n=U2(e);if(n.success)return[];const i=Lr().language;return n.errors.map(r=>{var a,l;const s=((a=r.position)==null?void 0:a.start)??0,o=((l=r.position)==null?void 0:l.end)??e.length;return{message:r.translate(i),severity:"error",from:s,to:o}})},{delay:200});function $W(){return new ZU(MW,[DW,_W])}function LW({className:t}){const[e,n]=k.useState(),i=k.useCallback(r=>{r&&n(r)},[]);return k.useEffect(()=>{if(e)return window.codemirror=new Ce({state:je.create({doc:RW,extensions:[je.tabSize.of(2),gO.of(je.readOnly.of(!1)),NW,N5(),D5,M5(),s5(),HV(),X3(),Q3(),je.allowMultipleSelections.of(!0),sV(),d5(),iO.of([...PW,{key:"Escape",run:r=>(r.dispatch({selection:ee.create([r.state.selection.main],0)}),!0)}]),$W(),Hl.of(OW)]}),parent:e}),()=>{var r;return(r=window.codemirror)==null?void 0:r.destroy()}},[e]),L2(r=>r.ctrlKey&&r.key==="s",r=>{if(r.preventDefault(),!window.codemirror)return;const s=new Blob([window.codemirror.state.doc.toString()],{type:"text/plain"}),o=URL.createObjectURL(s),a=document.createElement("a");a.style.display="none",a.href=o,a.download=`vonsim-${new Date().toISOString().slice(0,16)}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}),S.jsx("div",{ref:i,className:Le("overflow-auto font-mono",t)})}function IW(){const t=_t(),e=On(PT),{updateServiceWorker:n}=N$({onNeedRefresh(){Qp(t("update.update-available"),{action:{label:t("update.reload"),onClick:()=>n(!0)}})}});return S.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",children:[S.jsx(kF,{}),S.jsxs(D2,{autoSaveId:"layout",tagName:"main",direction:"horizontal",className:"overflow-auto px-2",children:[S.jsx(jh,{id:"panel-editor",order:1,minSize:20,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:S.jsx(LW,{className:"h-full w-full"})}),S.jsx(b0,{className:"w-2"}),S.jsx(jh,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:S.jsx(NU,{})}),e&&S.jsxs(S.Fragment,{children:[S.jsx(b0,{className:"w-2"}),S.jsx(jh,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:S.jsx(SF,{className:"h-full w-full"})})]})]}),S.jsxs("footer",{className:"py-1 text-center text-xs font-semibold tracking-wider text-stone-500",children:[S.jsx("a",{href:"/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),S.jsx("span",{className:"px-2",children:""}),S.jsx("a",{href:"https://github.com/vonsim/vonsim",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),S.jsx("span",{className:"px-2",children:""}),S.jsx("a",{href:"https://github.com/vonsim/vonsim/issues/new?labels=new+version",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.report-issue")}),S.jsx("span",{className:"px-2",children:""}),S.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:[" Copyright 2017-",new Date().getFullYear(),"  ",t("footer.copyright")]})]})]})}window.codemirror=null;ky.createRoot(document.getElementById("root")).render(S.jsxs(ue.StrictMode,{children:[S.jsx(Q_,{richColors:!0,closeButton:!0,position:"top-center"}),S.jsx(B4,{children:S.jsx(IW,{})})]}));
