var S_=Object.defineProperty;var k_=(t,e,n)=>e in t?S_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(k_(t,typeof e!="symbol"?e+"":e,n),n),Fm=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var k=(t,e,n)=>(Fm(t,e,"read from private field"),n?n.call(t):e.get(t)),ce=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},j=(t,e,n,r)=>(Fm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Ze=(t,e,n)=>(Fm(t,e,"access private method"),n);function C_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function od(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rE={exports:{}},$p={},iE={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad=Symbol.for("react.element"),E_=Symbol.for("react.portal"),A_=Symbol.for("react.fragment"),P_=Symbol.for("react.strict_mode"),R_=Symbol.for("react.profiler"),T_=Symbol.for("react.provider"),O_=Symbol.for("react.context"),N_=Symbol.for("react.forward_ref"),__=Symbol.for("react.suspense"),M_=Symbol.for("react.memo"),D_=Symbol.for("react.lazy"),db=Symbol.iterator;function $_(t){return t===null||typeof t!="object"?null:(t=db&&t[db]||t["@@iterator"],typeof t=="function"?t:null)}var sE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oE=Object.assign,aE={};function Yl(t,e,n){this.props=t,this.context=e,this.refs=aE,this.updater=n||sE}Yl.prototype.isReactComponent={};Yl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lE(){}lE.prototype=Yl.prototype;function Uv(t,e,n){this.props=t,this.context=e,this.refs=aE,this.updater=n||sE}var Vv=Uv.prototype=new lE;Vv.constructor=Uv;oE(Vv,Yl.prototype);Vv.isPureReactComponent=!0;var hb=Array.isArray,uE=Object.prototype.hasOwnProperty,Wv={current:null},cE={key:!0,ref:!0,__self:!0,__source:!0};function dE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uE.call(e,r)&&!cE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ad,type:t,key:s,ref:o,props:i,_owner:Wv.current}}function L_(t,e){return{$$typeof:ad,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hv(t){return typeof t=="object"&&t!==null&&t.$$typeof===ad}function I_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fb=/\/+/g;function jm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?I_(""+t.key):e.toString(36)}function Oh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ad:case E_:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+jm(o,0):r,hb(i)?(n="",t!=null&&(n=t.replace(fb,"$&/")+"/"),Oh(i,e,n,"",function(u){return u})):i!=null&&(Hv(i)&&(i=L_(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(fb,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",hb(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+jm(s,a);o+=Oh(s,e,n,l,i)}else if(l=$_(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+jm(s,a++),o+=Oh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Od(t,e,n){if(t==null)return t;var r=[],i=0;return Oh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function B_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sn={current:null},Nh={transition:null},z_={ReactCurrentDispatcher:Sn,ReactCurrentBatchConfig:Nh,ReactCurrentOwner:Wv};Be.Children={map:Od,forEach:function(t,e,n){Od(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Od(t,function(){e++}),e},toArray:function(t){return Od(t,function(e){return e})||[]},only:function(t){if(!Hv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Be.Component=Yl;Be.Fragment=A_;Be.Profiler=R_;Be.PureComponent=Uv;Be.StrictMode=P_;Be.Suspense=__;Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z_;Be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uE.call(e,l)&&!cE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ad,type:t.type,key:i,ref:s,props:r,_owner:o}};Be.createContext=function(t){return t={$$typeof:O_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:T_,_context:t},t.Consumer=t};Be.createElement=dE;Be.createFactory=function(t){var e=dE.bind(null,t);return e.type=t,e};Be.createRef=function(){return{current:null}};Be.forwardRef=function(t){return{$$typeof:N_,render:t}};Be.isValidElement=Hv;Be.lazy=function(t){return{$$typeof:D_,_payload:{_status:-1,_result:t},_init:B_}};Be.memo=function(t,e){return{$$typeof:M_,type:t,compare:e===void 0?null:e}};Be.startTransition=function(t){var e=Nh.transition;Nh.transition={};try{t()}finally{Nh.transition=e}};Be.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Be.useCallback=function(t,e){return Sn.current.useCallback(t,e)};Be.useContext=function(t){return Sn.current.useContext(t)};Be.useDebugValue=function(){};Be.useDeferredValue=function(t){return Sn.current.useDeferredValue(t)};Be.useEffect=function(t,e){return Sn.current.useEffect(t,e)};Be.useId=function(){return Sn.current.useId()};Be.useImperativeHandle=function(t,e,n){return Sn.current.useImperativeHandle(t,e,n)};Be.useInsertionEffect=function(t,e){return Sn.current.useInsertionEffect(t,e)};Be.useLayoutEffect=function(t,e){return Sn.current.useLayoutEffect(t,e)};Be.useMemo=function(t,e){return Sn.current.useMemo(t,e)};Be.useReducer=function(t,e,n){return Sn.current.useReducer(t,e,n)};Be.useRef=function(t){return Sn.current.useRef(t)};Be.useState=function(t){return Sn.current.useState(t)};Be.useSyncExternalStore=function(t,e,n){return Sn.current.useSyncExternalStore(t,e,n)};Be.useTransition=function(){return Sn.current.useTransition()};Be.version="18.2.0";iE.exports=Be;var x=iE.exports;const q=od(x),Gv=C_({__proto__:null,default:q},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_=x,j_=Symbol.for("react.element"),U_=Symbol.for("react.fragment"),V_=Object.prototype.hasOwnProperty,W_=F_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H_={key:!0,ref:!0,__self:!0,__source:!0};function hE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)V_.call(e,r)&&!H_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:j_,type:t,key:s,ref:o,props:i,_owner:W_.current}}$p.Fragment=U_;$p.jsx=hE;$p.jsxs=hE;rE.exports=$p;var E=rE.exports;var x0={},fE={exports:{}},nr={},pE={exports:{}},mE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,$){var F=O.length;O.push($);e:for(;0<F;){var X=F-1>>>1,ee=O[X];if(0<i(ee,$))O[X]=$,O[F]=ee,F=X;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var $=O[0],F=O.pop();if(F!==$){O[0]=F;e:for(var X=0,ee=O.length,re=ee>>>1;X<re;){var we=2*(X+1)-1,Se=O[we],be=we+1,Q=O[be];if(0>i(Se,F))be<ee&&0>i(Q,Se)?(O[X]=Q,O[be]=F,X=be):(O[X]=Se,O[we]=F,X=we);else if(be<ee&&0>i(Q,F))O[X]=Q,O[be]=F,X=be;else break e}}return $}function i(O,$){var F=O.sortIndex-$.sortIndex;return F!==0?F:O.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=O)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function b(O){if(m=!1,w(O),!p)if(n(l)!==null)p=!0,z(S);else{var $=n(u);$!==null&&I(b,$.startTime-O)}}function S(O,$){p=!1,m&&(m=!1,g(C),C=-1),f=!0;var F=h;try{for(w($),d=n(l);d!==null&&(!(d.expirationTime>$)||O&&!T());){var X=d.callback;if(typeof X=="function"){d.callback=null,h=d.priorityLevel;var ee=X(d.expirationTime<=$);$=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&r(l),w($)}else r(l);d=n(l)}if(d!==null)var re=!0;else{var we=n(u);we!==null&&I(b,we.startTime-$),re=!1}return re}finally{d=null,h=F,f=!1}}var A=!1,P=null,C=-1,R=5,_=-1;function T(){return!(t.unstable_now()-_<R)}function D(){if(P!==null){var O=t.unstable_now();_=O;var $=!0;try{$=P(!0,O)}finally{$?B():(A=!1,P=null)}}else A=!1}var B;if(typeof y=="function")B=function(){y(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,L=N.port2;N.port1.onmessage=D,B=function(){L.postMessage(null)}}else B=function(){v(D,0)};function z(O){P=O,A||(A=!0,B())}function I(O,$){C=v(function(){O(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,z(S))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var F=h;h=$;try{return O()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=h;h=O;try{return $()}finally{h=F}},t.unstable_scheduleCallback=function(O,$,F){var X=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?X+F:X):F=X,O){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=F+ee,O={id:c++,callback:$,priorityLevel:O,startTime:F,expirationTime:ee,sortIndex:-1},F>X?(O.sortIndex=F,e(u,O),n(l)===null&&O===n(u)&&(m?(g(C),C=-1):m=!0,I(b,F-X))):(O.sortIndex=ee,e(l,O),p||f||(p=!0,z(S))),O},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(O){var $=h;return function(){var F=h;h=$;try{return O.apply(this,arguments)}finally{h=F}}}})(mE);pE.exports=mE;var G_=pE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gE=x,tr=G_;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yE=new Set,uc={};function da(t,e){Al(t,e),Al(t+"Capture",e)}function Al(t,e){for(uc[t]=e,t=0;t<e.length;t++)yE.add(e[t])}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S0=Object.prototype.hasOwnProperty,X_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pb={},mb={};function K_(t){return S0.call(mb,t)?!0:S0.call(pb,t)?!1:X_.test(t)?mb[t]=!0:(pb[t]=!0,!1)}function Z_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y_(t,e,n,r){if(e===null||typeof e>"u"||Z_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jt[t]=new kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jt[e]=new kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jt[t]=new kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jt[t]=new kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jt[t]=new kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jt[t]=new kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jt[t]=new kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jt[t]=new kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jt[t]=new kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xv=/[\-:]([a-z])/g;function Kv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xv,Kv);Jt[e]=new kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xv,Kv);Jt[e]=new kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xv,Kv);Jt[e]=new kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jt[t]=new kn(t,1,!1,t.toLowerCase(),null,!1,!1)});Jt.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jt[t]=new kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zv(t,e,n,r){var i=Jt.hasOwnProperty(e)?Jt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Y_(e,n,i,r)&&(n=null),r||i===null?K_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ds=gE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nd=Symbol.for("react.element"),Ia=Symbol.for("react.portal"),Ba=Symbol.for("react.fragment"),Yv=Symbol.for("react.strict_mode"),k0=Symbol.for("react.profiler"),vE=Symbol.for("react.provider"),wE=Symbol.for("react.context"),Jv=Symbol.for("react.forward_ref"),C0=Symbol.for("react.suspense"),E0=Symbol.for("react.suspense_list"),qv=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),bE=Symbol.for("react.offscreen"),gb=Symbol.iterator;function lu(t){return t===null||typeof t!="object"?null:(t=gb&&t[gb]||t["@@iterator"],typeof t=="function"?t:null)}var vt=Object.assign,Um;function Nu(t){if(Um===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Um=e&&e[1]||""}return`
`+Um+t}var Vm=!1;function Wm(t,e){if(!t||Vm)return"";Vm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Nu(t):""}function J_(t){switch(t.tag){case 5:return Nu(t.type);case 16:return Nu("Lazy");case 13:return Nu("Suspense");case 19:return Nu("SuspenseList");case 0:case 2:case 15:return t=Wm(t.type,!1),t;case 11:return t=Wm(t.type.render,!1),t;case 1:return t=Wm(t.type,!0),t;default:return""}}function A0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ba:return"Fragment";case Ia:return"Portal";case k0:return"Profiler";case Yv:return"StrictMode";case C0:return"Suspense";case E0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wE:return(t.displayName||"Context")+".Consumer";case vE:return(t._context.displayName||"Context")+".Provider";case Jv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qv:return e=t.displayName||null,e!==null?e:A0(t.type)||"Memo";case xs:e=t._payload,t=t._init;try{return A0(t(e))}catch{}}return null}function q_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A0(e);case 8:return e===Yv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function eo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q_(t){var e=xE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _d(t){t._valueTracker||(t._valueTracker=Q_(t))}function SE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function P0(t,e){var n=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=eo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kE(t,e){e=e.checked,e!=null&&Zv(t,"checked",e,!1)}function R0(t,e){kE(t,e);var n=eo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?T0(t,e.type,n):e.hasOwnProperty("defaultValue")&&T0(t,e.type,eo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function T0(t,e,n){(e!=="number"||hf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _u=Array.isArray;function el(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+eo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function O0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(_u(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:eo(n)}}function CE(t,e){var n=eo(e.value),r=eo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function EE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function N0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?EE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Md,AE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Md=Md||document.createElement("div"),Md.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Md.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eM=["Webkit","ms","Moz","O"];Object.keys(Wu).forEach(function(t){eM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wu[e]=Wu[t]})});function PE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wu.hasOwnProperty(t)&&Wu[t]?(""+e).trim():e+"px"}function RE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=PE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tM=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _0(t,e){if(e){if(tM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function M0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D0=null;function Qv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $0=null,tl=null,nl=null;function xb(t){if(t=cd(t)){if(typeof $0!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Fp(e),$0(t.stateNode,t.type,e))}}function TE(t){tl?nl?nl.push(t):nl=[t]:tl=t}function OE(){if(tl){var t=tl,e=nl;if(nl=tl=null,xb(t),e)for(t=0;t<e.length;t++)xb(e[t])}}function NE(t,e){return t(e)}function _E(){}var Hm=!1;function ME(t,e,n){if(Hm)return t(e,n);Hm=!0;try{return NE(t,e,n)}finally{Hm=!1,(tl!==null||nl!==null)&&(_E(),OE())}}function dc(t,e){var n=t.stateNode;if(n===null)return null;var r=Fp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var L0=!1;if(ts)try{var uu={};Object.defineProperty(uu,"passive",{get:function(){L0=!0}}),window.addEventListener("test",uu,uu),window.removeEventListener("test",uu,uu)}catch{L0=!1}function nM(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Hu=!1,ff=null,pf=!1,I0=null,rM={onError:function(t){Hu=!0,ff=t}};function iM(t,e,n,r,i,s,o,a,l){Hu=!1,ff=null,nM.apply(rM,arguments)}function sM(t,e,n,r,i,s,o,a,l){if(iM.apply(this,arguments),Hu){if(Hu){var u=ff;Hu=!1,ff=null}else throw Error(W(198));pf||(pf=!0,I0=u)}}function ha(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sb(t){if(ha(t)!==t)throw Error(W(188))}function oM(t){var e=t.alternate;if(!e){if(e=ha(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Sb(i),t;if(s===r)return Sb(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function $E(t){return t=oM(t),t!==null?LE(t):null}function LE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LE(t);if(e!==null)return e;t=t.sibling}return null}var IE=tr.unstable_scheduleCallback,kb=tr.unstable_cancelCallback,aM=tr.unstable_shouldYield,lM=tr.unstable_requestPaint,Et=tr.unstable_now,uM=tr.unstable_getCurrentPriorityLevel,ew=tr.unstable_ImmediatePriority,BE=tr.unstable_UserBlockingPriority,mf=tr.unstable_NormalPriority,cM=tr.unstable_LowPriority,zE=tr.unstable_IdlePriority,Lp=null,mi=null;function dM(t){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(Lp,t,void 0,(t.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:pM,hM=Math.log,fM=Math.LN2;function pM(t){return t>>>=0,t===0?32:31-(hM(t)/fM|0)|0}var Dd=64,$d=4194304;function Mu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Mu(a):(s&=o,s!==0&&(r=Mu(s)))}else o=n&~i,o!==0?r=Mu(o):s!==0&&(r=Mu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fr(e),i=1<<n,r|=t[n],e&=~i;return r}function mM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=mM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function B0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function FE(){var t=Dd;return Dd<<=1,!(Dd&4194240)&&(Dd=64),t}function Gm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ld(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fr(e),t[e]=n}function yM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function tw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Xe=0;function jE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UE,nw,VE,WE,HE,z0=!1,Ld=[],Vs=null,Ws=null,Hs=null,hc=new Map,fc=new Map,Rs=[],vM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cb(t,e){switch(t){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":hc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(e.pointerId)}}function cu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=cd(e),e!==null&&nw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wM(t,e,n,r,i){switch(e){case"focusin":return Vs=cu(Vs,t,e,n,r,i),!0;case"dragenter":return Ws=cu(Ws,t,e,n,r,i),!0;case"mouseover":return Hs=cu(Hs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return hc.set(s,cu(hc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,fc.set(s,cu(fc.get(s)||null,t,e,n,r,i)),!0}return!1}function GE(t){var e=_o(t.target);if(e!==null){var n=ha(e);if(n!==null){if(e=n.tag,e===13){if(e=DE(n),e!==null){t.blockedOn=e,HE(t.priority,function(){VE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _h(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=F0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);D0=r,n.target.dispatchEvent(r),D0=null}else return e=cd(n),e!==null&&nw(e),t.blockedOn=n,!1;e.shift()}return!0}function Eb(t,e,n){_h(t)&&n.delete(e)}function bM(){z0=!1,Vs!==null&&_h(Vs)&&(Vs=null),Ws!==null&&_h(Ws)&&(Ws=null),Hs!==null&&_h(Hs)&&(Hs=null),hc.forEach(Eb),fc.forEach(Eb)}function du(t,e){t.blockedOn===e&&(t.blockedOn=null,z0||(z0=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,bM)))}function pc(t){function e(i){return du(i,t)}if(0<Ld.length){du(Ld[0],t);for(var n=1;n<Ld.length;n++){var r=Ld[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vs!==null&&du(Vs,t),Ws!==null&&du(Ws,t),Hs!==null&&du(Hs,t),hc.forEach(e),fc.forEach(e),n=0;n<Rs.length;n++)r=Rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rs.length&&(n=Rs[0],n.blockedOn===null);)GE(n),n.blockedOn===null&&Rs.shift()}var rl=ds.ReactCurrentBatchConfig,yf=!0;function xM(t,e,n,r){var i=Xe,s=rl.transition;rl.transition=null;try{Xe=1,rw(t,e,n,r)}finally{Xe=i,rl.transition=s}}function SM(t,e,n,r){var i=Xe,s=rl.transition;rl.transition=null;try{Xe=4,rw(t,e,n,r)}finally{Xe=i,rl.transition=s}}function rw(t,e,n,r){if(yf){var i=F0(t,e,n,r);if(i===null)ng(t,e,r,vf,n),Cb(t,r);else if(wM(i,t,e,n,r))r.stopPropagation();else if(Cb(t,r),e&4&&-1<vM.indexOf(t)){for(;i!==null;){var s=cd(i);if(s!==null&&UE(s),s=F0(t,e,n,r),s===null&&ng(t,e,r,vf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ng(t,e,r,null,n)}}var vf=null;function F0(t,e,n,r){if(vf=null,t=Qv(r),t=_o(t),t!==null)if(e=ha(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vf=t,null}function XE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uM()){case ew:return 1;case BE:return 4;case mf:case cM:return 16;case zE:return 536870912;default:return 16}default:return 16}}var Is=null,iw=null,Mh=null;function KE(){if(Mh)return Mh;var t,e=iw,n=e.length,r,i="value"in Is?Is.value:Is.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Mh=i.slice(t,1<r?1-r:void 0)}function Dh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Id(){return!0}function Ab(){return!1}function rr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Id:Ab,this.isPropagationStopped=Ab,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Id)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Id)},persist:function(){},isPersistent:Id}),e}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sw=rr(Jl),ud=vt({},Jl,{view:0,detail:0}),kM=rr(ud),Xm,Km,hu,Ip=vt({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ow,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hu&&(hu&&t.type==="mousemove"?(Xm=t.screenX-hu.screenX,Km=t.screenY-hu.screenY):Km=Xm=0,hu=t),Xm)},movementY:function(t){return"movementY"in t?t.movementY:Km}}),Pb=rr(Ip),CM=vt({},Ip,{dataTransfer:0}),EM=rr(CM),AM=vt({},ud,{relatedTarget:0}),Zm=rr(AM),PM=vt({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),RM=rr(PM),TM=vt({},Jl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OM=rr(TM),NM=vt({},Jl,{data:0}),Rb=rr(NM),_M={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $M(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DM[t])?!!e[t]:!1}function ow(){return $M}var LM=vt({},ud,{key:function(t){if(t.key){var e=_M[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ow,charCode:function(t){return t.type==="keypress"?Dh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IM=rr(LM),BM=vt({},Ip,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tb=rr(BM),zM=vt({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ow}),FM=rr(zM),jM=vt({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),UM=rr(jM),VM=vt({},Ip,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WM=rr(VM),HM=[9,13,27,32],aw=ts&&"CompositionEvent"in window,Gu=null;ts&&"documentMode"in document&&(Gu=document.documentMode);var GM=ts&&"TextEvent"in window&&!Gu,ZE=ts&&(!aw||Gu&&8<Gu&&11>=Gu),Ob=String.fromCharCode(32),Nb=!1;function YE(t,e){switch(t){case"keyup":return HM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var za=!1;function XM(t,e){switch(t){case"compositionend":return JE(e);case"keypress":return e.which!==32?null:(Nb=!0,Ob);case"textInput":return t=e.data,t===Ob&&Nb?null:t;default:return null}}function KM(t,e){if(za)return t==="compositionend"||!aw&&YE(t,e)?(t=KE(),Mh=iw=Is=null,za=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZE&&e.locale!=="ko"?null:e.data;default:return null}}var ZM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _b(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZM[t.type]:e==="textarea"}function qE(t,e,n,r){TE(r),e=wf(e,"onChange"),0<e.length&&(n=new sw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xu=null,mc=null;function YM(t){uA(t,0)}function Bp(t){var e=Ua(t);if(SE(e))return t}function JM(t,e){if(t==="change")return e}var QE=!1;if(ts){var Ym;if(ts){var Jm="oninput"in document;if(!Jm){var Mb=document.createElement("div");Mb.setAttribute("oninput","return;"),Jm=typeof Mb.oninput=="function"}Ym=Jm}else Ym=!1;QE=Ym&&(!document.documentMode||9<document.documentMode)}function Db(){Xu&&(Xu.detachEvent("onpropertychange",eA),mc=Xu=null)}function eA(t){if(t.propertyName==="value"&&Bp(mc)){var e=[];qE(e,mc,t,Qv(t)),ME(YM,e)}}function qM(t,e,n){t==="focusin"?(Db(),Xu=e,mc=n,Xu.attachEvent("onpropertychange",eA)):t==="focusout"&&Db()}function QM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bp(mc)}function eD(t,e){if(t==="click")return Bp(e)}function tD(t,e){if(t==="input"||t==="change")return Bp(e)}function nD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hr=typeof Object.is=="function"?Object.is:nD;function gc(t,e){if(Hr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!S0.call(e,i)||!Hr(t[i],e[i]))return!1}return!0}function $b(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lb(t,e){var n=$b(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$b(n)}}function tA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nA(){for(var t=window,e=hf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hf(t.document)}return e}function lw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rD(t){var e=nA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tA(n.ownerDocument.documentElement,n)){if(r!==null&&lw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Lb(n,s);var o=Lb(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iD=ts&&"documentMode"in document&&11>=document.documentMode,Fa=null,j0=null,Ku=null,U0=!1;function Ib(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;U0||Fa==null||Fa!==hf(r)||(r=Fa,"selectionStart"in r&&lw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ku&&gc(Ku,r)||(Ku=r,r=wf(j0,"onSelect"),0<r.length&&(e=new sw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fa)))}function Bd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ja={animationend:Bd("Animation","AnimationEnd"),animationiteration:Bd("Animation","AnimationIteration"),animationstart:Bd("Animation","AnimationStart"),transitionend:Bd("Transition","TransitionEnd")},qm={},rA={};ts&&(rA=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function zp(t){if(qm[t])return qm[t];if(!ja[t])return t;var e=ja[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rA)return qm[t]=e[n];return t}var iA=zp("animationend"),sA=zp("animationiteration"),oA=zp("animationstart"),aA=zp("transitionend"),lA=new Map,Bb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fo(t,e){lA.set(t,e),da(e,[t])}for(var Qm=0;Qm<Bb.length;Qm++){var eg=Bb[Qm],sD=eg.toLowerCase(),oD=eg[0].toUpperCase()+eg.slice(1);fo(sD,"on"+oD)}fo(iA,"onAnimationEnd");fo(sA,"onAnimationIteration");fo(oA,"onAnimationStart");fo("dblclick","onDoubleClick");fo("focusin","onFocus");fo("focusout","onBlur");fo(aA,"onTransitionEnd");Al("onMouseEnter",["mouseout","mouseover"]);Al("onMouseLeave",["mouseout","mouseover"]);Al("onPointerEnter",["pointerout","pointerover"]);Al("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Du));function zb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sM(r,e,void 0,t),t.currentTarget=null}function uA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;zb(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;zb(i,a,u),s=l}}}if(pf)throw t=I0,pf=!1,I0=null,t}function nt(t,e){var n=e[X0];n===void 0&&(n=e[X0]=new Set);var r=t+"__bubble";n.has(r)||(cA(e,t,2,!1),n.add(r))}function tg(t,e,n){var r=0;e&&(r|=4),cA(n,t,r,e)}var zd="_reactListening"+Math.random().toString(36).slice(2);function yc(t){if(!t[zd]){t[zd]=!0,yE.forEach(function(n){n!=="selectionchange"&&(aD.has(n)||tg(n,!1,t),tg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zd]||(e[zd]=!0,tg("selectionchange",!1,e))}}function cA(t,e,n,r){switch(XE(e)){case 1:var i=xM;break;case 4:i=SM;break;default:i=rw}n=i.bind(null,e,n,t),i=void 0,!L0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ng(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_o(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ME(function(){var u=s,c=Qv(n),d=[];e:{var h=lA.get(t);if(h!==void 0){var f=sw,p=t;switch(t){case"keypress":if(Dh(n)===0)break e;case"keydown":case"keyup":f=IM;break;case"focusin":p="focus",f=Zm;break;case"focusout":p="blur",f=Zm;break;case"beforeblur":case"afterblur":f=Zm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Pb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=EM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=FM;break;case iA:case sA:case oA:f=RM;break;case aA:f=UM;break;case"scroll":f=kM;break;case"wheel":f=WM;break;case"copy":case"cut":case"paste":f=OM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Tb}var m=(e&4)!==0,v=!m&&t==="scroll",g=m?h!==null?h+"Capture":null:h;m=[];for(var y=u,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,g!==null&&(b=dc(y,g),b!=null&&m.push(vc(y,b,w)))),v)break;y=y.return}0<m.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==D0&&(p=n.relatedTarget||n.fromElement)&&(_o(p)||p[ns]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?_o(p):null,p!==null&&(v=ha(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(m=Pb,b="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=Tb,b="onPointerLeave",g="onPointerEnter",y="pointer"),v=f==null?h:Ua(f),w=p==null?h:Ua(p),h=new m(b,y+"leave",f,n,c),h.target=v,h.relatedTarget=w,b=null,_o(c)===u&&(m=new m(g,y+"enter",p,n,c),m.target=w,m.relatedTarget=v,b=m),v=b,f&&p)t:{for(m=f,g=p,y=0,w=m;w;w=xa(w))y++;for(w=0,b=g;b;b=xa(b))w++;for(;0<y-w;)m=xa(m),y--;for(;0<w-y;)g=xa(g),w--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=xa(m),g=xa(g)}m=null}else m=null;f!==null&&Fb(d,h,f,m,!1),p!==null&&v!==null&&Fb(d,v,p,m,!0)}}e:{if(h=u?Ua(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=JM;else if(_b(h))if(QE)S=tD;else{S=QM;var A=qM}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=eD);if(S&&(S=S(t,u))){qE(d,S,n,c);break e}A&&A(t,h,u),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&T0(h,"number",h.value)}switch(A=u?Ua(u):window,t){case"focusin":(_b(A)||A.contentEditable==="true")&&(Fa=A,j0=u,Ku=null);break;case"focusout":Ku=j0=Fa=null;break;case"mousedown":U0=!0;break;case"contextmenu":case"mouseup":case"dragend":U0=!1,Ib(d,n,c);break;case"selectionchange":if(iD)break;case"keydown":case"keyup":Ib(d,n,c)}var P;if(aw)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else za?YE(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(ZE&&n.locale!=="ko"&&(za||C!=="onCompositionStart"?C==="onCompositionEnd"&&za&&(P=KE()):(Is=c,iw="value"in Is?Is.value:Is.textContent,za=!0)),A=wf(u,C),0<A.length&&(C=new Rb(C,t,null,n,c),d.push({event:C,listeners:A}),P?C.data=P:(P=JE(n),P!==null&&(C.data=P)))),(P=GM?XM(t,n):KM(t,n))&&(u=wf(u,"onBeforeInput"),0<u.length&&(c=new Rb("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=P))}uA(d,e)})}function vc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=dc(t,n),s!=null&&r.unshift(vc(t,s,i)),s=dc(t,e),s!=null&&r.push(vc(t,s,i))),t=t.return}return r}function xa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fb(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=dc(n,s),l!=null&&o.unshift(vc(n,l,a))):i||(l=dc(n,s),l!=null&&o.push(vc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var lD=/\r\n?/g,uD=/\u0000|\uFFFD/g;function jb(t){return(typeof t=="string"?t:""+t).replace(lD,`
`).replace(uD,"")}function Fd(t,e,n){if(e=jb(e),jb(t)!==e&&n)throw Error(W(425))}function bf(){}var V0=null,W0=null;function H0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var G0=typeof setTimeout=="function"?setTimeout:void 0,cD=typeof clearTimeout=="function"?clearTimeout:void 0,Ub=typeof Promise=="function"?Promise:void 0,dD=typeof queueMicrotask=="function"?queueMicrotask:typeof Ub<"u"?function(t){return Ub.resolve(null).then(t).catch(hD)}:G0;function hD(t){setTimeout(function(){throw t})}function rg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),pc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pc(e)}function Gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ql=Math.random().toString(36).slice(2),li="__reactFiber$"+ql,wc="__reactProps$"+ql,ns="__reactContainer$"+ql,X0="__reactEvents$"+ql,fD="__reactListeners$"+ql,pD="__reactHandles$"+ql;function _o(t){var e=t[li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ns]||n[li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vb(t);t!==null;){if(n=t[li])return n;t=Vb(t)}return e}t=n,n=t.parentNode}return null}function cd(t){return t=t[li]||t[ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ua(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Fp(t){return t[wc]||null}var K0=[],Va=-1;function po(t){return{current:t}}function at(t){0>Va||(t.current=K0[Va],K0[Va]=null,Va--)}function Qe(t,e){Va++,K0[Va]=t.current,t.current=e}var to={},an=po(to),$n=po(!1),Zo=to;function Pl(t,e){var n=t.type.contextTypes;if(!n)return to;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ln(t){return t=t.childContextTypes,t!=null}function xf(){at($n),at(an)}function Wb(t,e,n){if(an.current!==to)throw Error(W(168));Qe(an,e),Qe($n,n)}function dA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,q_(t)||"Unknown",i));return vt({},n,r)}function Sf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||to,Zo=an.current,Qe(an,t),Qe($n,$n.current),!0}function Hb(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=dA(t,e,Zo),r.__reactInternalMemoizedMergedChildContext=t,at($n),at(an),Qe(an,t)):at($n),Qe($n,n)}var _i=null,jp=!1,ig=!1;function hA(t){_i===null?_i=[t]:_i.push(t)}function mD(t){jp=!0,hA(t)}function mo(){if(!ig&&_i!==null){ig=!0;var t=0,e=Xe;try{var n=_i;for(Xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_i=null,jp=!1}catch(i){throw _i!==null&&(_i=_i.slice(t+1)),IE(ew,mo),i}finally{Xe=e,ig=!1}}return null}var Wa=[],Ha=0,kf=null,Cf=0,fr=[],pr=0,Yo=null,Wi=1,Hi="";function Co(t,e){Wa[Ha++]=Cf,Wa[Ha++]=kf,kf=t,Cf=e}function fA(t,e,n){fr[pr++]=Wi,fr[pr++]=Hi,fr[pr++]=Yo,Yo=t;var r=Wi;t=Hi;var i=32-Fr(r)-1;r&=~(1<<i),n+=1;var s=32-Fr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wi=1<<32-Fr(e)+i|n<<i|r,Hi=s+t}else Wi=1<<s|n<<i|r,Hi=t}function uw(t){t.return!==null&&(Co(t,1),fA(t,1,0))}function cw(t){for(;t===kf;)kf=Wa[--Ha],Wa[Ha]=null,Cf=Wa[--Ha],Wa[Ha]=null;for(;t===Yo;)Yo=fr[--pr],fr[pr]=null,Hi=fr[--pr],fr[pr]=null,Wi=fr[--pr],fr[pr]=null}var er=null,qn=null,ut=!1,Dr=null;function pA(t,e){var n=yr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,er=t,qn=Gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,er=t,qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yo!==null?{id:Wi,overflow:Hi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,er=t,qn=null,!0):!1;default:return!1}}function Z0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Y0(t){if(ut){var e=qn;if(e){var n=e;if(!Gb(t,e)){if(Z0(t))throw Error(W(418));e=Gs(n.nextSibling);var r=er;e&&Gb(t,e)?pA(r,n):(t.flags=t.flags&-4097|2,ut=!1,er=t)}}else{if(Z0(t))throw Error(W(418));t.flags=t.flags&-4097|2,ut=!1,er=t}}}function Xb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;er=t}function jd(t){if(t!==er)return!1;if(!ut)return Xb(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!H0(t.type,t.memoizedProps)),e&&(e=qn)){if(Z0(t))throw mA(),Error(W(418));for(;e;)pA(t,e),e=Gs(e.nextSibling)}if(Xb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qn=Gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qn=null}}else qn=er?Gs(t.stateNode.nextSibling):null;return!0}function mA(){for(var t=qn;t;)t=Gs(t.nextSibling)}function Rl(){qn=er=null,ut=!1}function dw(t){Dr===null?Dr=[t]:Dr.push(t)}var gD=ds.ReactCurrentBatchConfig;function Tr(t,e){if(t&&t.defaultProps){e=vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ef=po(null),Af=null,Ga=null,hw=null;function fw(){hw=Ga=Af=null}function pw(t){var e=Ef.current;at(Ef),t._currentValue=e}function J0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function il(t,e){Af=t,hw=Ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function kr(t){var e=t._currentValue;if(hw!==t)if(t={context:t,memoizedValue:e,next:null},Ga===null){if(Af===null)throw Error(W(308));Ga=t,Af.dependencies={lanes:0,firstContext:t}}else Ga=Ga.next=t;return e}var Mo=null;function mw(t){Mo===null?Mo=[t]:Mo.push(t)}function gA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,mw(e)):(n.next=i.next,i.next=n),e.interleaved=n,rs(t,r)}function rs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ss=!1;function gw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rs(t,n)}return i=r.interleaved,i===null?(e.next=e,mw(r)):(e.next=i.next,i.next=e),r.interleaved=e,rs(t,n)}function $h(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tw(t,n)}}function Kb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pf(t,e,n,r){var i=t.updateQueue;Ss=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=vt({},d,h);break e;case 2:Ss=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qo|=o,t.lanes=o,t.memoizedState=d}}function Zb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var vA=new gE.Component().refs;function q0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Up={isMounted:function(t){return(t=t._reactInternals)?ha(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wn(),i=Zs(t),s=Xi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Xs(t,s,i),e!==null&&(jr(e,t,i,r),$h(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wn(),i=Zs(t),s=Xi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Xs(t,s,i),e!==null&&(jr(e,t,i,r),$h(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wn(),r=Zs(t),i=Xi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Xs(t,i,r),e!==null&&(jr(e,t,r,n),$h(e,t,r))}};function Yb(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!gc(n,r)||!gc(i,s):!0}function wA(t,e,n){var r=!1,i=to,s=e.contextType;return typeof s=="object"&&s!==null?s=kr(s):(i=Ln(e)?Zo:an.current,r=e.contextTypes,s=(r=r!=null)?Pl(t,i):to),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Up,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Jb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Up.enqueueReplaceState(e,e.state,null)}function Q0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=vA,gw(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=kr(s):(s=Ln(e)?Zo:an.current,i.context=Pl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(q0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Up.enqueueReplaceState(i,i.state,null),Pf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===vA&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Ud(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qb(t){var e=t._init;return e(t._payload)}function bA(t){function e(g,y){if(t){var w=g.deletions;w===null?(g.deletions=[y],g.flags|=16):w.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=Ys(g,y),g.index=0,g.sibling=null,g}function s(g,y,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<y?(g.flags|=2,y):w):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,w,b){return y===null||y.tag!==6?(y=dg(w,g.mode,b),y.return=g,y):(y=i(y,w),y.return=g,y)}function l(g,y,w,b){var S=w.type;return S===Ba?c(g,y,w.props.children,b,w.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xs&&qb(S)===y.type)?(b=i(y,w.props),b.ref=fu(g,y,w),b.return=g,b):(b=jh(w.type,w.key,w.props,null,g.mode,b),b.ref=fu(g,y,w),b.return=g,b)}function u(g,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=hg(w,g.mode,b),y.return=g,y):(y=i(y,w.children||[]),y.return=g,y)}function c(g,y,w,b,S){return y===null||y.tag!==7?(y=Wo(w,g.mode,b,S),y.return=g,y):(y=i(y,w),y.return=g,y)}function d(g,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=dg(""+y,g.mode,w),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Nd:return w=jh(y.type,y.key,y.props,null,g.mode,w),w.ref=fu(g,null,y),w.return=g,w;case Ia:return y=hg(y,g.mode,w),y.return=g,y;case xs:var b=y._init;return d(g,b(y._payload),w)}if(_u(y)||lu(y))return y=Wo(y,g.mode,w,null),y.return=g,y;Ud(g,y)}return null}function h(g,y,w,b){var S=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(g,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Nd:return w.key===S?l(g,y,w,b):null;case Ia:return w.key===S?u(g,y,w,b):null;case xs:return S=w._init,h(g,y,S(w._payload),b)}if(_u(w)||lu(w))return S!==null?null:c(g,y,w,b,null);Ud(g,w)}return null}function f(g,y,w,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(w)||null,a(y,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Nd:return g=g.get(b.key===null?w:b.key)||null,l(y,g,b,S);case Ia:return g=g.get(b.key===null?w:b.key)||null,u(y,g,b,S);case xs:var A=b._init;return f(g,y,w,A(b._payload),S)}if(_u(b)||lu(b))return g=g.get(w)||null,c(y,g,b,S,null);Ud(y,b)}return null}function p(g,y,w,b){for(var S=null,A=null,P=y,C=y=0,R=null;P!==null&&C<w.length;C++){P.index>C?(R=P,P=null):R=P.sibling;var _=h(g,P,w[C],b);if(_===null){P===null&&(P=R);break}t&&P&&_.alternate===null&&e(g,P),y=s(_,y,C),A===null?S=_:A.sibling=_,A=_,P=R}if(C===w.length)return n(g,P),ut&&Co(g,C),S;if(P===null){for(;C<w.length;C++)P=d(g,w[C],b),P!==null&&(y=s(P,y,C),A===null?S=P:A.sibling=P,A=P);return ut&&Co(g,C),S}for(P=r(g,P);C<w.length;C++)R=f(P,g,C,w[C],b),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?C:R.key),y=s(R,y,C),A===null?S=R:A.sibling=R,A=R);return t&&P.forEach(function(T){return e(g,T)}),ut&&Co(g,C),S}function m(g,y,w,b){var S=lu(w);if(typeof S!="function")throw Error(W(150));if(w=S.call(w),w==null)throw Error(W(151));for(var A=S=null,P=y,C=y=0,R=null,_=w.next();P!==null&&!_.done;C++,_=w.next()){P.index>C?(R=P,P=null):R=P.sibling;var T=h(g,P,_.value,b);if(T===null){P===null&&(P=R);break}t&&P&&T.alternate===null&&e(g,P),y=s(T,y,C),A===null?S=T:A.sibling=T,A=T,P=R}if(_.done)return n(g,P),ut&&Co(g,C),S;if(P===null){for(;!_.done;C++,_=w.next())_=d(g,_.value,b),_!==null&&(y=s(_,y,C),A===null?S=_:A.sibling=_,A=_);return ut&&Co(g,C),S}for(P=r(g,P);!_.done;C++,_=w.next())_=f(P,g,C,_.value,b),_!==null&&(t&&_.alternate!==null&&P.delete(_.key===null?C:_.key),y=s(_,y,C),A===null?S=_:A.sibling=_,A=_);return t&&P.forEach(function(D){return e(g,D)}),ut&&Co(g,C),S}function v(g,y,w,b){if(typeof w=="object"&&w!==null&&w.type===Ba&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Nd:e:{for(var S=w.key,A=y;A!==null;){if(A.key===S){if(S=w.type,S===Ba){if(A.tag===7){n(g,A.sibling),y=i(A,w.props.children),y.return=g,g=y;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xs&&qb(S)===A.type){n(g,A.sibling),y=i(A,w.props),y.ref=fu(g,A,w),y.return=g,g=y;break e}n(g,A);break}else e(g,A);A=A.sibling}w.type===Ba?(y=Wo(w.props.children,g.mode,b,w.key),y.return=g,g=y):(b=jh(w.type,w.key,w.props,null,g.mode,b),b.ref=fu(g,y,w),b.return=g,g=b)}return o(g);case Ia:e:{for(A=w.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(g,y.sibling),y=i(y,w.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=hg(w,g.mode,b),y.return=g,g=y}return o(g);case xs:return A=w._init,v(g,y,A(w._payload),b)}if(_u(w))return p(g,y,w,b);if(lu(w))return m(g,y,w,b);Ud(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,w),y.return=g,g=y):(n(g,y),y=dg(w,g.mode,b),y.return=g,g=y),o(g)):n(g,y)}return v}var Tl=bA(!0),xA=bA(!1),dd={},gi=po(dd),bc=po(dd),xc=po(dd);function Do(t){if(t===dd)throw Error(W(174));return t}function yw(t,e){switch(Qe(xc,e),Qe(bc,t),Qe(gi,dd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:N0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=N0(e,t)}at(gi),Qe(gi,e)}function Ol(){at(gi),at(bc),at(xc)}function SA(t){Do(xc.current);var e=Do(gi.current),n=N0(e,t.type);e!==n&&(Qe(bc,t),Qe(gi,n))}function vw(t){bc.current===t&&(at(gi),at(bc))}var ft=po(0);function Rf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sg=[];function ww(){for(var t=0;t<sg.length;t++)sg[t]._workInProgressVersionPrimary=null;sg.length=0}var Lh=ds.ReactCurrentDispatcher,og=ds.ReactCurrentBatchConfig,Jo=0,gt=null,Mt=null,Bt=null,Tf=!1,Zu=!1,Sc=0,yD=0;function en(){throw Error(W(321))}function bw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hr(t[n],e[n]))return!1;return!0}function xw(t,e,n,r,i,s){if(Jo=s,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lh.current=t===null||t.memoizedState===null?xD:SD,t=n(r,i),Zu){s=0;do{if(Zu=!1,Sc=0,25<=s)throw Error(W(301));s+=1,Bt=Mt=null,e.updateQueue=null,Lh.current=kD,t=n(r,i)}while(Zu)}if(Lh.current=Of,e=Mt!==null&&Mt.next!==null,Jo=0,Bt=Mt=gt=null,Tf=!1,e)throw Error(W(300));return t}function Sw(){var t=Sc!==0;return Sc=0,t}function ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?gt.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Cr(){if(Mt===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var e=Bt===null?gt.memoizedState:Bt.next;if(e!==null)Bt=e,Mt=t;else{if(t===null)throw Error(W(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Bt===null?gt.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function kc(t,e){return typeof e=="function"?e(t):e}function ag(t){var e=Cr(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Mt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Jo&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,gt.lanes|=c,qo|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Hr(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gt.lanes|=s,qo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lg(t){var e=Cr(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hr(s,e.memoizedState)||(_n=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function kA(){}function CA(t,e){var n=gt,r=Cr(),i=e(),s=!Hr(r.memoizedState,i);if(s&&(r.memoizedState=i,_n=!0),r=r.queue,kw(PA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,Cc(9,AA.bind(null,n,r,i,e),void 0,null),Ft===null)throw Error(W(349));Jo&30||EA(n,e,i)}return i}function EA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AA(t,e,n,r){e.value=n,e.getSnapshot=r,RA(e)&&TA(t)}function PA(t,e,n){return n(function(){RA(e)&&TA(t)})}function RA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hr(t,n)}catch{return!0}}function TA(t){var e=rs(t,1);e!==null&&jr(e,t,1,-1)}function Qb(t){var e=ti();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kc,lastRenderedState:t},e.queue=t,t=t.dispatch=bD.bind(null,gt,t),[e.memoizedState,t]}function Cc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function OA(){return Cr().memoizedState}function Ih(t,e,n,r){var i=ti();gt.flags|=t,i.memoizedState=Cc(1|e,n,void 0,r===void 0?null:r)}function Vp(t,e,n,r){var i=Cr();r=r===void 0?null:r;var s=void 0;if(Mt!==null){var o=Mt.memoizedState;if(s=o.destroy,r!==null&&bw(r,o.deps)){i.memoizedState=Cc(e,n,s,r);return}}gt.flags|=t,i.memoizedState=Cc(1|e,n,s,r)}function ex(t,e){return Ih(8390656,8,t,e)}function kw(t,e){return Vp(2048,8,t,e)}function NA(t,e){return Vp(4,2,t,e)}function _A(t,e){return Vp(4,4,t,e)}function MA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DA(t,e,n){return n=n!=null?n.concat([t]):null,Vp(4,4,MA.bind(null,e,t),n)}function Cw(){}function $A(t,e){var n=Cr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function LA(t,e){var n=Cr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function IA(t,e,n){return Jo&21?(Hr(n,e)||(n=FE(),gt.lanes|=n,qo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function vD(t,e){var n=Xe;Xe=n!==0&&4>n?n:4,t(!0);var r=og.transition;og.transition={};try{t(!1),e()}finally{Xe=n,og.transition=r}}function BA(){return Cr().memoizedState}function wD(t,e,n){var r=Zs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zA(t))FA(e,n);else if(n=gA(t,e,n,r),n!==null){var i=wn();jr(n,t,r,i),jA(n,e,r)}}function bD(t,e,n){var r=Zs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zA(t))FA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hr(a,o)){var l=e.interleaved;l===null?(i.next=i,mw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=gA(t,e,i,r),n!==null&&(i=wn(),jr(n,t,r,i),jA(n,e,r))}}function zA(t){var e=t.alternate;return t===gt||e!==null&&e===gt}function FA(t,e){Zu=Tf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tw(t,n)}}var Of={readContext:kr,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},xD={readContext:kr,useCallback:function(t,e){return ti().memoizedState=[t,e===void 0?null:e],t},useContext:kr,useEffect:ex,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ih(4194308,4,MA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ih(4,2,t,e)},useMemo:function(t,e){var n=ti();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ti();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wD.bind(null,gt,t),[r.memoizedState,t]},useRef:function(t){var e=ti();return t={current:t},e.memoizedState=t},useState:Qb,useDebugValue:Cw,useDeferredValue:function(t){return ti().memoizedState=t},useTransition:function(){var t=Qb(!1),e=t[0];return t=vD.bind(null,t[1]),ti().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gt,i=ti();if(ut){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Ft===null)throw Error(W(349));Jo&30||EA(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ex(PA.bind(null,r,s,t),[t]),r.flags|=2048,Cc(9,AA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ti(),e=Ft.identifierPrefix;if(ut){var n=Hi,r=Wi;n=(r&~(1<<32-Fr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},SD={readContext:kr,useCallback:$A,useContext:kr,useEffect:kw,useImperativeHandle:DA,useInsertionEffect:NA,useLayoutEffect:_A,useMemo:LA,useReducer:ag,useRef:OA,useState:function(){return ag(kc)},useDebugValue:Cw,useDeferredValue:function(t){var e=Cr();return IA(e,Mt.memoizedState,t)},useTransition:function(){var t=ag(kc)[0],e=Cr().memoizedState;return[t,e]},useMutableSource:kA,useSyncExternalStore:CA,useId:BA,unstable_isNewReconciler:!1},kD={readContext:kr,useCallback:$A,useContext:kr,useEffect:kw,useImperativeHandle:DA,useInsertionEffect:NA,useLayoutEffect:_A,useMemo:LA,useReducer:lg,useRef:OA,useState:function(){return lg(kc)},useDebugValue:Cw,useDeferredValue:function(t){var e=Cr();return Mt===null?e.memoizedState=t:IA(e,Mt.memoizedState,t)},useTransition:function(){var t=lg(kc)[0],e=Cr().memoizedState;return[t,e]},useMutableSource:kA,useSyncExternalStore:CA,useId:BA,unstable_isNewReconciler:!1};function Nl(t,e){try{var n="",r=e;do n+=J_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ug(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ey(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CD=typeof WeakMap=="function"?WeakMap:Map;function UA(t,e,n){n=Xi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_f||(_f=!0,cy=r),ey(t,e)},n}function VA(t,e,n){n=Xi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ey(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ey(t,e),typeof r!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function tx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=BD.bind(null,t,e,n),e.then(t,t))}function nx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xi(-1,1),e.tag=2,Xs(n,e,1))),n.lanes|=1),t)}var ED=ds.ReactCurrentOwner,_n=!1;function pn(t,e,n,r){e.child=t===null?xA(e,null,n,r):Tl(e,t.child,n,r)}function ix(t,e,n,r,i){n=n.render;var s=e.ref;return il(e,i),r=xw(t,e,n,r,s,i),n=Sw(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,is(t,e,i)):(ut&&n&&uw(e),e.flags|=1,pn(t,e,r,i),e.child)}function sx(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!_w(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,WA(t,e,s,r,i)):(t=jh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:gc,n(o,r)&&t.ref===e.ref)return is(t,e,i)}return e.flags|=1,t=Ys(s,r),t.ref=e.ref,t.return=e,e.child=t}function WA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(gc(s,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,is(t,e,i)}return ty(t,e,n,r,i)}function HA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Ka,Xn),Xn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(Ka,Xn),Xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Qe(Ka,Xn),Xn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Qe(Ka,Xn),Xn|=r;return pn(t,e,i,n),e.child}function GA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ty(t,e,n,r,i){var s=Ln(n)?Zo:an.current;return s=Pl(e,s),il(e,i),n=xw(t,e,n,r,s,i),r=Sw(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,is(t,e,i)):(ut&&r&&uw(e),e.flags|=1,pn(t,e,n,i),e.child)}function ox(t,e,n,r,i){if(Ln(n)){var s=!0;Sf(e)}else s=!1;if(il(e,i),e.stateNode===null)Bh(t,e),wA(e,n,r),Q0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=kr(u):(u=Ln(n)?Zo:an.current,u=Pl(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Jb(e,o,r,u),Ss=!1;var h=e.memoizedState;o.state=h,Pf(e,r,o,i),l=e.memoizedState,a!==r||h!==l||$n.current||Ss?(typeof c=="function"&&(q0(e,n,c,r),l=e.memoizedState),(a=Ss||Yb(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yA(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Tr(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=kr(l):(l=Ln(n)?Zo:an.current,l=Pl(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Jb(e,o,r,l),Ss=!1,h=e.memoizedState,o.state=h,Pf(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||$n.current||Ss?(typeof f=="function"&&(q0(e,n,f,r),p=e.memoizedState),(u=Ss||Yb(e,n,u,r,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return ny(t,e,n,r,s,i)}function ny(t,e,n,r,i,s){GA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Hb(e,n,!1),is(t,e,s);r=e.stateNode,ED.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Tl(e,t.child,null,s),e.child=Tl(e,null,a,s)):pn(t,e,a,s),e.memoizedState=r.state,i&&Hb(e,n,!0),e.child}function XA(t){var e=t.stateNode;e.pendingContext?Wb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wb(t,e.context,!1),yw(t,e.containerInfo)}function ax(t,e,n,r,i){return Rl(),dw(i),e.flags|=256,pn(t,e,n,r),e.child}var ry={dehydrated:null,treeContext:null,retryLane:0};function iy(t){return{baseLanes:t,cachePool:null,transitions:null}}function KA(t,e,n){var r=e.pendingProps,i=ft.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Qe(ft,i&1),t===null)return Y0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gp(o,r,0,null),t=Wo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=iy(n),e.memoizedState=ry,t):Ew(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return AD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ys(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ys(a,s):(s=Wo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?iy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ry,r}return s=t.child,t=s.sibling,r=Ys(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ew(t,e){return e=Gp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vd(t,e,n,r){return r!==null&&dw(r),Tl(e,t.child,null,n),t=Ew(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ug(Error(W(422))),Vd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Gp({mode:"visible",children:r.children},i,0,null),s=Wo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Tl(e,t.child,null,o),e.child.memoizedState=iy(o),e.memoizedState=ry,s);if(!(e.mode&1))return Vd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=ug(s,r,void 0),Vd(t,e,o,r)}if(a=(o&t.childLanes)!==0,_n||a){if(r=Ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rs(t,i),jr(r,t,i,-1))}return Nw(),r=ug(Error(W(421))),Vd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=zD.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qn=Gs(i.nextSibling),er=e,ut=!0,Dr=null,t!==null&&(fr[pr++]=Wi,fr[pr++]=Hi,fr[pr++]=Yo,Wi=t.id,Hi=t.overflow,Yo=e),e=Ew(e,r.children),e.flags|=4096,e)}function lx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),J0(t.return,e,n)}function cg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ZA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(pn(t,e,r.children,n),r=ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lx(t,n,e);else if(t.tag===19)lx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qe(ft,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cg(e,!0,n,null,s);break;case"together":cg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function is(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Ys(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ys(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PD(t,e,n){switch(e.tag){case 3:XA(e),Rl();break;case 5:SA(e);break;case 1:Ln(e.type)&&Sf(e);break;case 4:yw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Qe(Ef,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(ft,ft.current&1),e.flags|=128,null):n&e.child.childLanes?KA(t,e,n):(Qe(ft,ft.current&1),t=is(t,e,n),t!==null?t.sibling:null);Qe(ft,ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ZA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Qe(ft,ft.current),r)break;return null;case 22:case 23:return e.lanes=0,HA(t,e,n)}return is(t,e,n)}var YA,sy,JA,qA;YA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sy=function(){};JA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Do(gi.current);var s=null;switch(n){case"input":i=P0(t,i),r=P0(t,r),s=[];break;case"select":i=vt({},i,{value:void 0}),r=vt({},r,{value:void 0}),s=[];break;case"textarea":i=O0(t,i),r=O0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bf)}_0(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(uc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(uc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&nt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};qA=function(t,e,n,r){n!==r&&(e.flags|=4)};function pu(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RD(t,e,n){var r=e.pendingProps;switch(cw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(e),null;case 1:return Ln(e.type)&&xf(),tn(e),null;case 3:return r=e.stateNode,Ol(),at($n),at(an),ww(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dr!==null&&(fy(Dr),Dr=null))),sy(t,e),tn(e),null;case 5:vw(e);var i=Do(xc.current);if(n=e.type,t!==null&&e.stateNode!=null)JA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return tn(e),null}if(t=Do(gi.current),jd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[li]=e,r[wc]=s,t=(e.mode&1)!==0,n){case"dialog":nt("cancel",r),nt("close",r);break;case"iframe":case"object":case"embed":nt("load",r);break;case"video":case"audio":for(i=0;i<Du.length;i++)nt(Du[i],r);break;case"source":nt("error",r);break;case"img":case"image":case"link":nt("error",r),nt("load",r);break;case"details":nt("toggle",r);break;case"input":yb(r,s),nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},nt("invalid",r);break;case"textarea":wb(r,s),nt("invalid",r)}_0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Fd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Fd(r.textContent,a,t),i=["children",""+a]):uc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&nt("scroll",r)}switch(n){case"input":_d(r),vb(r,s,!0);break;case"textarea":_d(r),bb(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=EE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[li]=e,t[wc]=r,YA(t,e,!1,!1),e.stateNode=t;e:{switch(o=M0(n,r),n){case"dialog":nt("cancel",t),nt("close",t),i=r;break;case"iframe":case"object":case"embed":nt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Du.length;i++)nt(Du[i],t);i=r;break;case"source":nt("error",t),i=r;break;case"img":case"image":case"link":nt("error",t),nt("load",t),i=r;break;case"details":nt("toggle",t),i=r;break;case"input":yb(t,r),i=P0(t,r),nt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=vt({},r,{value:void 0}),nt("invalid",t);break;case"textarea":wb(t,r),i=O0(t,r),nt("invalid",t);break;default:i=r}_0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?RE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cc(t,l):typeof l=="number"&&cc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(uc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&nt("scroll",t):l!=null&&Zv(t,s,l,o))}switch(n){case"input":_d(t),vb(t,r,!1);break;case"textarea":_d(t),bb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+eo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?el(t,!!r.multiple,s,!1):r.defaultValue!=null&&el(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=bf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tn(e),null;case 6:if(t&&e.stateNode!=null)qA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Do(xc.current),Do(gi.current),jd(e)){if(r=e.stateNode,n=e.memoizedProps,r[li]=e,(s=r.nodeValue!==n)&&(t=er,t!==null))switch(t.tag){case 3:Fd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[li]=e,e.stateNode=r}return tn(e),null;case 13:if(at(ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&qn!==null&&e.mode&1&&!(e.flags&128))mA(),Rl(),e.flags|=98560,s=!1;else if(s=jd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[li]=e}else Rl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tn(e),s=!1}else Dr!==null&&(fy(Dr),Dr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?Lt===0&&(Lt=3):Nw())),e.updateQueue!==null&&(e.flags|=4),tn(e),null);case 4:return Ol(),sy(t,e),t===null&&yc(e.stateNode.containerInfo),tn(e),null;case 10:return pw(e.type._context),tn(e),null;case 17:return Ln(e.type)&&xf(),tn(e),null;case 19:if(at(ft),s=e.memoizedState,s===null)return tn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)pu(s,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rf(t),o!==null){for(e.flags|=128,pu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qe(ft,ft.current&1|2),e.child}t=t.sibling}s.tail!==null&&Et()>_l&&(e.flags|=128,r=!0,pu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ut)return tn(e),null}else 2*Et()-s.renderingStartTime>_l&&n!==1073741824&&(e.flags|=128,r=!0,pu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Et(),e.sibling=null,n=ft.current,Qe(ft,r?n&1|2:n&1),e):(tn(e),null);case 22:case 23:return Ow(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xn&1073741824&&(tn(e),e.subtreeFlags&6&&(e.flags|=8192)):tn(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function TD(t,e){switch(cw(e),e.tag){case 1:return Ln(e.type)&&xf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ol(),at($n),at(an),ww(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vw(e),null;case 13:if(at(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Rl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(ft),null;case 4:return Ol(),null;case 10:return pw(e.type._context),null;case 22:case 23:return Ow(),null;case 24:return null;default:return null}}var Wd=!1,sn=!1,OD=typeof WeakSet=="function"?WeakSet:Set,se=null;function Xa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(t,e,r)}else n.current=null}function oy(t,e,n){try{n()}catch(r){bt(t,e,r)}}var ux=!1;function ND(t,e){if(V0=yf,t=nA(),lw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(W0={focusedElem:t,selectionRange:n},yf=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Tr(e.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(b){bt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return p=ux,ux=!1,p}function Yu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&oy(e,n,s)}i=i.next}while(i!==r)}}function Wp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ay(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QA(t){var e=t.alternate;e!==null&&(t.alternate=null,QA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[li],delete e[wc],delete e[X0],delete e[fD],delete e[pD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function e2(t){return t.tag===5||t.tag===3||t.tag===4}function cx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||e2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ly(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bf));else if(r!==4&&(t=t.child,t!==null))for(ly(t,e,n),t=t.sibling;t!==null;)ly(t,e,n),t=t.sibling}function uy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uy(t,e,n),t=t.sibling;t!==null;)uy(t,e,n),t=t.sibling}var jt=null,Mr=!1;function ms(t,e,n){for(n=n.child;n!==null;)t2(t,e,n),n=n.sibling}function t2(t,e,n){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(Lp,n)}catch{}switch(n.tag){case 5:sn||Xa(n,e);case 6:var r=jt,i=Mr;jt=null,ms(t,e,n),jt=r,Mr=i,jt!==null&&(Mr?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(Mr?(t=jt,n=n.stateNode,t.nodeType===8?rg(t.parentNode,n):t.nodeType===1&&rg(t,n),pc(t)):rg(jt,n.stateNode));break;case 4:r=jt,i=Mr,jt=n.stateNode.containerInfo,Mr=!0,ms(t,e,n),jt=r,Mr=i;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&oy(n,e,o),i=i.next}while(i!==r)}ms(t,e,n);break;case 1:if(!sn&&(Xa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){bt(n,e,a)}ms(t,e,n);break;case 21:ms(t,e,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,ms(t,e,n),sn=r):ms(t,e,n);break;default:ms(t,e,n)}}function dx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new OD),e.forEach(function(r){var i=FD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ar(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jt=a.stateNode,Mr=!1;break e;case 3:jt=a.stateNode.containerInfo,Mr=!0;break e;case 4:jt=a.stateNode.containerInfo,Mr=!0;break e}a=a.return}if(jt===null)throw Error(W(160));t2(s,o,i),jt=null,Mr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){bt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)n2(e,t),e=e.sibling}function n2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ar(e,t),Yr(t),r&4){try{Yu(3,t,t.return),Wp(3,t)}catch(m){bt(t,t.return,m)}try{Yu(5,t,t.return)}catch(m){bt(t,t.return,m)}}break;case 1:Ar(e,t),Yr(t),r&512&&n!==null&&Xa(n,n.return);break;case 5:if(Ar(e,t),Yr(t),r&512&&n!==null&&Xa(n,n.return),t.flags&32){var i=t.stateNode;try{cc(i,"")}catch(m){bt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&kE(i,s),M0(a,o);var u=M0(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?RE(i,d):c==="dangerouslySetInnerHTML"?AE(i,d):c==="children"?cc(i,d):Zv(i,c,d,u)}switch(a){case"input":R0(i,s);break;case"textarea":CE(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?el(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?el(i,!!s.multiple,s.defaultValue,!0):el(i,!!s.multiple,s.multiple?[]:"",!1))}i[wc]=s}catch(m){bt(t,t.return,m)}}break;case 6:if(Ar(e,t),Yr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){bt(t,t.return,m)}}break;case 3:if(Ar(e,t),Yr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pc(e.containerInfo)}catch(m){bt(t,t.return,m)}break;case 4:Ar(e,t),Yr(t);break;case 13:Ar(e,t),Yr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Rw=Et())),r&4&&dx(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(sn=(u=sn)||c,Ar(e,t),sn=u):Ar(e,t),Yr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(se=t,c=t.child;c!==null;){for(d=se=c;se!==null;){switch(h=se,f=h.child,h.tag){case 0:case 11:case 14:case 15:Yu(4,h,h.return);break;case 1:Xa(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){bt(r,n,m)}}break;case 5:Xa(h,h.return);break;case 22:if(h.memoizedState!==null){fx(d);continue}}f!==null?(f.return=h,se=f):fx(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=PE("display",o))}catch(m){bt(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){bt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ar(e,t),Yr(t),r&4&&dx(t);break;case 21:break;default:Ar(e,t),Yr(t)}}function Yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(e2(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cc(i,""),r.flags&=-33);var s=cx(t);uy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cx(t);ly(t,a,o);break;default:throw Error(W(161))}}catch(l){bt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _D(t,e,n){se=t,r2(t)}function r2(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Wd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||sn;a=Wd;var u=sn;if(Wd=o,(sn=l)&&!u)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?px(i):l!==null?(l.return=o,se=l):px(i);for(;s!==null;)se=s,r2(s),s=s.sibling;se=i,Wd=a,sn=u}hx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):hx(t)}}function hx(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||Wp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Tr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Zb(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&pc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}sn||e.flags&512&&ay(e)}catch(h){bt(e,e.return,h)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function fx(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function px(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wp(4,e)}catch(l){bt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){bt(e,i,l)}}var s=e.return;try{ay(e)}catch(l){bt(e,s,l)}break;case 5:var o=e.return;try{ay(e)}catch(l){bt(e,o,l)}}}catch(l){bt(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var MD=Math.ceil,Nf=ds.ReactCurrentDispatcher,Aw=ds.ReactCurrentOwner,br=ds.ReactCurrentBatchConfig,je=0,Ft=null,Tt=null,Yt=0,Xn=0,Ka=po(0),Lt=0,Ec=null,qo=0,Hp=0,Pw=0,Ju=null,On=null,Rw=0,_l=1/0,Pi=null,_f=!1,cy=null,Ks=null,Hd=!1,Bs=null,Mf=0,qu=0,dy=null,zh=-1,Fh=0;function wn(){return je&6?Et():zh!==-1?zh:zh=Et()}function Zs(t){return t.mode&1?je&2&&Yt!==0?Yt&-Yt:gD.transition!==null?(Fh===0&&(Fh=FE()),Fh):(t=Xe,t!==0||(t=window.event,t=t===void 0?16:XE(t.type)),t):1}function jr(t,e,n,r){if(50<qu)throw qu=0,dy=null,Error(W(185));ld(t,n,r),(!(je&2)||t!==Ft)&&(t===Ft&&(!(je&2)&&(Hp|=n),Lt===4&&Ts(t,Yt)),In(t,r),n===1&&je===0&&!(e.mode&1)&&(_l=Et()+500,jp&&mo()))}function In(t,e){var n=t.callbackNode;gM(t,e);var r=gf(t,t===Ft?Yt:0);if(r===0)n!==null&&kb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kb(n),e===1)t.tag===0?mD(mx.bind(null,t)):hA(mx.bind(null,t)),dD(function(){!(je&6)&&mo()}),n=null;else{switch(jE(r)){case 1:n=ew;break;case 4:n=BE;break;case 16:n=mf;break;case 536870912:n=zE;break;default:n=mf}n=d2(n,i2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function i2(t,e){if(zh=-1,Fh=0,je&6)throw Error(W(327));var n=t.callbackNode;if(sl()&&t.callbackNode!==n)return null;var r=gf(t,t===Ft?Yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Df(t,r);else{e=r;var i=je;je|=2;var s=o2();(Ft!==t||Yt!==e)&&(Pi=null,_l=Et()+500,Vo(t,e));do try{LD();break}catch(a){s2(t,a)}while(1);fw(),Nf.current=s,je=i,Tt!==null?e=0:(Ft=null,Yt=0,e=Lt)}if(e!==0){if(e===2&&(i=B0(t),i!==0&&(r=i,e=hy(t,i))),e===1)throw n=Ec,Vo(t,0),Ts(t,r),In(t,Et()),n;if(e===6)Ts(t,r);else{if(i=t.current.alternate,!(r&30)&&!DD(i)&&(e=Df(t,r),e===2&&(s=B0(t),s!==0&&(r=s,e=hy(t,s))),e===1))throw n=Ec,Vo(t,0),Ts(t,r),In(t,Et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Eo(t,On,Pi);break;case 3:if(Ts(t,r),(r&130023424)===r&&(e=Rw+500-Et(),10<e)){if(gf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=G0(Eo.bind(null,t,On,Pi),e);break}Eo(t,On,Pi);break;case 4:if(Ts(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MD(r/1960))-r,10<r){t.timeoutHandle=G0(Eo.bind(null,t,On,Pi),r);break}Eo(t,On,Pi);break;case 5:Eo(t,On,Pi);break;default:throw Error(W(329))}}}return In(t,Et()),t.callbackNode===n?i2.bind(null,t):null}function hy(t,e){var n=Ju;return t.current.memoizedState.isDehydrated&&(Vo(t,e).flags|=256),t=Df(t,e),t!==2&&(e=On,On=n,e!==null&&fy(e)),t}function fy(t){On===null?On=t:On.push.apply(On,t)}function DD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ts(t,e){for(e&=~Pw,e&=~Hp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fr(e),r=1<<n;t[n]=-1,e&=~r}}function mx(t){if(je&6)throw Error(W(327));sl();var e=gf(t,0);if(!(e&1))return In(t,Et()),null;var n=Df(t,e);if(t.tag!==0&&n===2){var r=B0(t);r!==0&&(e=r,n=hy(t,r))}if(n===1)throw n=Ec,Vo(t,0),Ts(t,e),In(t,Et()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Eo(t,On,Pi),In(t,Et()),null}function Tw(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(_l=Et()+500,jp&&mo())}}function Qo(t){Bs!==null&&Bs.tag===0&&!(je&6)&&sl();var e=je;je|=1;var n=br.transition,r=Xe;try{if(br.transition=null,Xe=1,t)return t()}finally{Xe=r,br.transition=n,je=e,!(je&6)&&mo()}}function Ow(){Xn=Ka.current,at(Ka)}function Vo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cD(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(cw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xf();break;case 3:Ol(),at($n),at(an),ww();break;case 5:vw(r);break;case 4:Ol();break;case 13:at(ft);break;case 19:at(ft);break;case 10:pw(r.type._context);break;case 22:case 23:Ow()}n=n.return}if(Ft=t,Tt=t=Ys(t.current,null),Yt=Xn=e,Lt=0,Ec=null,Pw=Hp=qo=0,On=Ju=null,Mo!==null){for(e=0;e<Mo.length;e++)if(n=Mo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mo=null}return t}function s2(t,e){do{var n=Tt;try{if(fw(),Lh.current=Of,Tf){for(var r=gt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Tf=!1}if(Jo=0,Bt=Mt=gt=null,Zu=!1,Sc=0,Aw.current=null,n===null||n.return===null){Lt=1,Ec=e,Tt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=nx(o);if(f!==null){f.flags&=-257,rx(f,o,a,s,e),f.mode&1&&tx(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){tx(s,u,e),Nw();break e}l=Error(W(426))}}else if(ut&&a.mode&1){var v=nx(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),rx(v,o,a,s,e),dw(Nl(l,a));break e}}s=l=Nl(l,a),Lt!==4&&(Lt=2),Ju===null?Ju=[s]:Ju.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=UA(s,l,e);Kb(s,g);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ks===null||!Ks.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=VA(s,a,e);Kb(s,b);break e}}s=s.return}while(s!==null)}l2(n)}catch(S){e=S,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(1)}function o2(){var t=Nf.current;return Nf.current=Of,t===null?Of:t}function Nw(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Ft===null||!(qo&268435455)&&!(Hp&268435455)||Ts(Ft,Yt)}function Df(t,e){var n=je;je|=2;var r=o2();(Ft!==t||Yt!==e)&&(Pi=null,Vo(t,e));do try{$D();break}catch(i){s2(t,i)}while(1);if(fw(),je=n,Nf.current=r,Tt!==null)throw Error(W(261));return Ft=null,Yt=0,Lt}function $D(){for(;Tt!==null;)a2(Tt)}function LD(){for(;Tt!==null&&!aM();)a2(Tt)}function a2(t){var e=c2(t.alternate,t,Xn);t.memoizedProps=t.pendingProps,e===null?l2(t):Tt=e,Aw.current=null}function l2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TD(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,Tt=null;return}}else if(n=RD(n,e,Xn),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);Lt===0&&(Lt=5)}function Eo(t,e,n){var r=Xe,i=br.transition;try{br.transition=null,Xe=1,ID(t,e,n,r)}finally{br.transition=i,Xe=r}return null}function ID(t,e,n,r){do sl();while(Bs!==null);if(je&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yM(t,s),t===Ft&&(Tt=Ft=null,Yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hd||(Hd=!0,d2(mf,function(){return sl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=br.transition,br.transition=null;var o=Xe;Xe=1;var a=je;je|=4,Aw.current=null,ND(t,n),n2(n,t),rD(W0),yf=!!V0,W0=V0=null,t.current=n,_D(n),lM(),je=a,Xe=o,br.transition=s}else t.current=n;if(Hd&&(Hd=!1,Bs=t,Mf=i),s=t.pendingLanes,s===0&&(Ks=null),dM(n.stateNode),In(t,Et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_f)throw _f=!1,t=cy,cy=null,t;return Mf&1&&t.tag!==0&&sl(),s=t.pendingLanes,s&1?t===dy?qu++:(qu=0,dy=t):qu=0,mo(),null}function sl(){if(Bs!==null){var t=jE(Mf),e=br.transition,n=Xe;try{if(br.transition=null,Xe=16>t?16:t,Bs===null)var r=!1;else{if(t=Bs,Bs=null,Mf=0,je&6)throw Error(W(331));var i=je;for(je|=4,se=t.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(se=u;se!==null;){var c=se;switch(c.tag){case 0:case 11:case 15:Yu(8,c,s)}var d=c.child;if(d!==null)d.return=c,se=d;else for(;se!==null;){c=se;var h=c.sibling,f=c.return;if(QA(c),c===u){se=null;break}if(h!==null){h.return=f,se=h;break}se=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yu(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,se=g;break e}se=s.return}}var y=t.current;for(se=y;se!==null;){o=se;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,se=w;else e:for(o=y;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wp(9,a)}}catch(S){bt(a,a.return,S)}if(a===o){se=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,se=b;break e}se=a.return}}if(je=i,mo(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(Lp,t)}catch{}r=!0}return r}finally{Xe=n,br.transition=e}}return!1}function gx(t,e,n){e=Nl(n,e),e=UA(t,e,1),t=Xs(t,e,1),e=wn(),t!==null&&(ld(t,1,e),In(t,e))}function bt(t,e,n){if(t.tag===3)gx(t,t,n);else for(;e!==null;){if(e.tag===3){gx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ks===null||!Ks.has(r))){t=Nl(n,t),t=VA(e,t,1),e=Xs(e,t,1),t=wn(),e!==null&&(ld(e,1,t),In(e,t));break}}e=e.return}}function BD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wn(),t.pingedLanes|=t.suspendedLanes&n,Ft===t&&(Yt&n)===n&&(Lt===4||Lt===3&&(Yt&130023424)===Yt&&500>Et()-Rw?Vo(t,0):Pw|=n),In(t,e)}function u2(t,e){e===0&&(t.mode&1?(e=$d,$d<<=1,!($d&130023424)&&($d=4194304)):e=1);var n=wn();t=rs(t,e),t!==null&&(ld(t,e,n),In(t,n))}function zD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),u2(t,n)}function FD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),u2(t,n)}var c2;c2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$n.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,PD(t,e,n);_n=!!(t.flags&131072)}else _n=!1,ut&&e.flags&1048576&&fA(e,Cf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bh(t,e),t=e.pendingProps;var i=Pl(e,an.current);il(e,n),i=xw(null,e,r,t,i,n);var s=Sw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ln(r)?(s=!0,Sf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gw(e),i.updater=Up,e.stateNode=i,i._reactInternals=e,Q0(e,r,t,n),e=ny(null,e,r,!0,s,n)):(e.tag=0,ut&&s&&uw(e),pn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=UD(r),t=Tr(r,t),i){case 0:e=ty(null,e,r,t,n);break e;case 1:e=ox(null,e,r,t,n);break e;case 11:e=ix(null,e,r,t,n);break e;case 14:e=sx(null,e,r,Tr(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tr(r,i),ty(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tr(r,i),ox(t,e,r,i,n);case 3:e:{if(XA(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,yA(t,e),Pf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Nl(Error(W(423)),e),e=ax(t,e,r,n,i);break e}else if(r!==i){i=Nl(Error(W(424)),e),e=ax(t,e,r,n,i);break e}else for(qn=Gs(e.stateNode.containerInfo.firstChild),er=e,ut=!0,Dr=null,n=xA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rl(),r===i){e=is(t,e,n);break e}pn(t,e,r,n)}e=e.child}return e;case 5:return SA(e),t===null&&Y0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,H0(r,i)?o=null:s!==null&&H0(r,s)&&(e.flags|=32),GA(t,e),pn(t,e,o,n),e.child;case 6:return t===null&&Y0(e),null;case 13:return KA(t,e,n);case 4:return yw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tl(e,null,r,n):pn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tr(r,i),ix(t,e,r,i,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Qe(Ef,r._currentValue),r._currentValue=o,s!==null)if(Hr(s.value,o)){if(s.children===i.children&&!$n.current){e=is(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Xi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),J0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),J0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}pn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,il(e,n),i=kr(i),r=r(i),e.flags|=1,pn(t,e,r,n),e.child;case 14:return r=e.type,i=Tr(r,e.pendingProps),i=Tr(r.type,i),sx(t,e,r,i,n);case 15:return WA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tr(r,i),Bh(t,e),e.tag=1,Ln(r)?(t=!0,Sf(e)):t=!1,il(e,n),wA(e,r,i),Q0(e,r,i,n),ny(null,e,r,!0,t,n);case 19:return ZA(t,e,n);case 22:return HA(t,e,n)}throw Error(W(156,e.tag))};function d2(t,e){return IE(t,e)}function jD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(t,e,n,r){return new jD(t,e,n,r)}function _w(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UD(t){if(typeof t=="function")return _w(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jv)return 11;if(t===qv)return 14}return 2}function Ys(t,e){var n=t.alternate;return n===null?(n=yr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")_w(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ba:return Wo(n.children,i,s,e);case Yv:o=8,i|=8;break;case k0:return t=yr(12,n,e,i|2),t.elementType=k0,t.lanes=s,t;case C0:return t=yr(13,n,e,i),t.elementType=C0,t.lanes=s,t;case E0:return t=yr(19,n,e,i),t.elementType=E0,t.lanes=s,t;case bE:return Gp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vE:o=10;break e;case wE:o=9;break e;case Jv:o=11;break e;case qv:o=14;break e;case xs:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=yr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Wo(t,e,n,r){return t=yr(7,t,r,e),t.lanes=n,t}function Gp(t,e,n,r){return t=yr(22,t,r,e),t.elementType=bE,t.lanes=n,t.stateNode={isHidden:!1},t}function dg(t,e,n){return t=yr(6,t,null,e),t.lanes=n,t}function hg(t,e,n){return e=yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gm(0),this.expirationTimes=Gm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mw(t,e,n,r,i,s,o,a,l){return t=new VD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gw(s),t}function WD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ia,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function h2(t){if(!t)return to;t=t._reactInternals;e:{if(ha(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Ln(n))return dA(t,n,e)}return e}function f2(t,e,n,r,i,s,o,a,l){return t=Mw(n,r,!0,t,i,s,o,a,l),t.context=h2(null),n=t.current,r=wn(),i=Zs(n),s=Xi(r,i),s.callback=e??null,Xs(n,s,i),t.current.lanes=i,ld(t,i,r),In(t,r),t}function Xp(t,e,n,r){var i=e.current,s=wn(),o=Zs(i);return n=h2(n),e.context===null?e.context=n:e.pendingContext=n,e=Xi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xs(i,e,o),t!==null&&(jr(t,i,o,s),$h(t,i,o)),o}function $f(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dw(t,e){yx(t,e),(t=t.alternate)&&yx(t,e)}function HD(){return null}var p2=typeof reportError=="function"?reportError:function(t){console.error(t)};function $w(t){this._internalRoot=t}Kp.prototype.render=$w.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Xp(t,e,null,null)};Kp.prototype.unmount=$w.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qo(function(){Xp(null,t,null,null)}),e[ns]=null}};function Kp(t){this._internalRoot=t}Kp.prototype.unstable_scheduleHydration=function(t){if(t){var e=WE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rs.length&&e!==0&&e<Rs[n].priority;n++);Rs.splice(n,0,t),n===0&&GE(t)}};function Lw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vx(){}function GD(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=$f(o);s.call(u)}}var o=f2(e,r,t,0,null,!1,!1,"",vx);return t._reactRootContainer=o,t[ns]=o.current,yc(t.nodeType===8?t.parentNode:t),Qo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=$f(l);a.call(u)}}var l=Mw(t,0,!1,null,null,!1,!1,"",vx);return t._reactRootContainer=l,t[ns]=l.current,yc(t.nodeType===8?t.parentNode:t),Qo(function(){Xp(e,l,n,r)}),l}function Yp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=$f(o);a.call(l)}}Xp(e,o,t,i)}else o=GD(n,e,t,i,r);return $f(o)}UE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mu(e.pendingLanes);n!==0&&(tw(e,n|1),In(e,Et()),!(je&6)&&(_l=Et()+500,mo()))}break;case 13:Qo(function(){var r=rs(t,1);if(r!==null){var i=wn();jr(r,t,1,i)}}),Dw(t,1)}};nw=function(t){if(t.tag===13){var e=rs(t,134217728);if(e!==null){var n=wn();jr(e,t,134217728,n)}Dw(t,134217728)}};VE=function(t){if(t.tag===13){var e=Zs(t),n=rs(t,e);if(n!==null){var r=wn();jr(n,t,e,r)}Dw(t,e)}};WE=function(){return Xe};HE=function(t,e){var n=Xe;try{return Xe=t,e()}finally{Xe=n}};$0=function(t,e,n){switch(e){case"input":if(R0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fp(r);if(!i)throw Error(W(90));SE(r),R0(r,i)}}}break;case"textarea":CE(t,n);break;case"select":e=n.value,e!=null&&el(t,!!n.multiple,e,!1)}};NE=Tw;_E=Qo;var XD={usingClientEntryPoint:!1,Events:[cd,Ua,Fp,TE,OE,Tw]},mu={findFiberByHostInstance:_o,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},KD={bundleType:mu.bundleType,version:mu.version,rendererPackageName:mu.rendererPackageName,rendererConfig:mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$E(t),t===null?null:t.stateNode},findFiberByHostInstance:mu.findFiberByHostInstance||HD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{Lp=Gd.inject(KD),mi=Gd}catch{}}nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XD;nr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lw(e))throw Error(W(200));return WD(t,e,null,n)};nr.createRoot=function(t,e){if(!Lw(t))throw Error(W(299));var n=!1,r="",i=p2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Mw(t,1,!1,null,null,n,!1,r,i),t[ns]=e.current,yc(t.nodeType===8?t.parentNode:t),new $w(e)};nr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=$E(e),t=t===null?null:t.stateNode,t};nr.flushSync=function(t){return Qo(t)};nr.hydrate=function(t,e,n){if(!Zp(e))throw Error(W(200));return Yp(null,t,e,!0,n)};nr.hydrateRoot=function(t,e,n){if(!Lw(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=p2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=f2(e,null,t,1,n??null,i,!1,s,o),t[ns]=e.current,yc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Kp(e)};nr.render=function(t,e,n){if(!Zp(e))throw Error(W(200));return Yp(null,t,e,!1,n)};nr.unmountComponentAtNode=function(t){if(!Zp(t))throw Error(W(40));return t._reactRootContainer?(Qo(function(){Yp(null,null,t,!1,function(){t._reactRootContainer=null,t[ns]=null})}),!0):!1};nr.unstable_batchedUpdates=Tw;nr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zp(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Yp(t,e,n,!1,r)};nr.version="18.2.0-next-9e3b772b8-20220608";function m2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m2)}catch(t){console.error(t)}}m2(),fE.exports=nr;var fa=fE.exports;const g2=od(fa);var wx=fa;x0.createRoot=wx.createRoot,x0.hydrateRoot=wx.hydrateRoot;function ZD(t,{insertAt:e}={}){if(!t||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}ZD(`[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 6px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:-3px;margin-right:4px}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:-1px}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:auto;border:none;cursor:pointer;outline:none;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:auto}[data-sonner-toast] [data-cancel]{color:var(--color);background:var(--border-color)}[data-sonner-toast] [data-close-button]{position:absolute;left:0;top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:translate(-35%,-35%);border-radius:50%;opacity:0;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]{opacity:1}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}
`);var YD=t=>{switch(t){case"success":return QD;case"error":return e$;default:return null}},JD=Array(12).fill(0),qD=({visible:t})=>q.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},q.createElement("div",{className:"sonner-spinner"},JD.map((e,n)=>q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),QD=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),e$=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),py=0,t$=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:py++;return this.toasts.find(s=>s.id===i)?this.toasts=this.toasts.map(s=>s.id===i?(this.publish({...s,...t,id:i,title:n}),{...s,...t,id:i,title:n}):s):this.addToast({title:n,...r,id:i}),i},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.promise=(t,e)=>{let n=this.create({...e,promise:t,type:"loading",message:e.loading});return(t instanceof Promise?t:t()).then(r=>{let i=typeof e.success=="function"?e.success(r):e.success;this.create({id:n,type:"success",message:i})}).catch(r=>{let i=typeof e.error=="function"?e.error(r):e.error;this.create({id:n,type:"error",message:i})}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||py++;this.publish({jsx:t(n),id:n,...e})},this.subscribers=[],this.toasts=[]}},ks=new t$,n$=(t,e)=>{let n=(e==null?void 0:e.id)||py++;return ks.addToast({title:t,...e,id:n}),n},r$=n$,Jp=Object.assign(r$,{success:ks.success,error:ks.error,custom:ks.custom,message:ks.message,promise:ks.promise,dismiss:ks.dismiss}),i$=3,s$="32px",o$=4e3,a$=356,y2=14,l$=20,u$=200,c$=t=>{let{invert:e,toast:n,interacting:r,setHeights:i,visibleToasts:s,heights:o,index:a,toasts:l,expanded:u,removeToast:c,closeButton:d,style:h,className:f="",descriptionClassName:p="",duration:m,position:v,expandByDefault:g}=t,[y,w]=q.useState(!1),[b,S]=q.useState(!1),[A,P]=q.useState(!1),[C,R]=q.useState(!1),[_,T]=q.useState(0),[D,B]=q.useState(0),N=q.useRef(null),L=a===0,z=a+1<=s,I=n.type,O=n.className||"",$=n.descriptionClassName||"",F=q.useMemo(()=>o.findIndex(oe=>oe.toastId===n.id)||0,[o,n.id]),X=q.useMemo(()=>n.duration||m||o$,[n.duration,m]),ee=q.useRef(0),re=q.useRef(0),we=q.useRef(X),Se=q.useRef(0),be=q.useRef(null),[Q,ye]=v.split("-"),_e=q.useMemo(()=>o.reduce((oe,Te,St)=>St>=F?oe:oe+Te.height,0),[o,F]),Ce=n.invert||e,ke=I==="loading";re.current=q.useMemo(()=>F*y2+_e,[F,_e]),q.useEffect(()=>{w(!0)},[]),q.useLayoutEffect(()=>{if(!y)return;let oe=N.current,Te=oe.style.height;oe.style.height="auto";let St=oe.getBoundingClientRect().height;oe.style.height=Te,B(St),i(cn=>cn.find(Fn=>Fn.toastId===n.id)?cn.map(Fn=>Fn.toastId===n.id?{...Fn,height:St}:Fn):[{toastId:n.id,height:St},...cn])},[y,n.title,n.description,i,n.id]);let xe=q.useCallback(()=>{S(!0),T(re.current),i(oe=>oe.filter(Te=>Te.toastId!==n.id)),setTimeout(()=>{c(n)},u$)},[n,c,i,re]);return q.useEffect(()=>{if(n.promise&&I==="loading"||n.duration===1/0)return;let oe;return u||r?(()=>{if(Se.current<ee.current){let Te=new Date().getTime()-ee.current;we.current=we.current-Te}Se.current=new Date().getTime()})():(ee.current=new Date().getTime(),oe=setTimeout(()=>{var Te;(Te=n.onAutoClose)==null||Te.call(n,n),xe()},we.current)),()=>clearTimeout(oe)},[u,r,g,n,X,xe,n.promise,I]),q.useEffect(()=>{let oe=N.current;if(oe){let Te=oe.getBoundingClientRect().height;return B(Te),i(St=>[{toastId:n.id,height:Te},...St]),()=>i(St=>St.filter(cn=>cn.toastId!==n.id))}},[i,n.id]),q.useEffect(()=>{n.delete&&xe()},[xe,n.delete]),q.createElement("li",{"aria-live":n.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:N,className:f+" "+O,"data-sonner-toast":"","data-styled":!n.jsx,"data-mounted":y,"data-promise":!!n.promise,"data-removed":b,"data-visible":z,"data-y-position":Q,"data-x-position":ye,"data-index":a,"data-front":L,"data-swiping":A,"data-type":I,"data-invert":Ce,"data-swipe-out":C,"data-expanded":!!(u||g&&y),style:{"--index":a,"--toasts-before":a,"--z-index":l.length-a,"--offset":`${b?_:re.current}px`,"--initial-height":g?"auto":`${D}px`,...h,...n.style},onPointerDown:oe=>{ke||(T(re.current),oe.target.setPointerCapture(oe.pointerId),oe.target.tagName!=="BUTTON"&&(P(!0),be.current={x:oe.clientX,y:oe.clientY}))},onPointerUp:()=>{var oe,Te,St;if(C)return;be.current=null;let cn=Number(((oe=N.current)==null?void 0:oe.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(cn)>=l$){T(re.current),(Te=n.onDismiss)==null||Te.call(n,n),xe(),R(!0);return}(St=N.current)==null||St.style.setProperty("--swipe-amount","0px"),P(!1)},onPointerMove:oe=>{var Te;if(!be.current)return;let St=oe.clientY-be.current.y,cn=oe.clientX-be.current.x,Fn=(Q==="top"?Math.min:Math.max)(0,St),Rd=oe.pointerType==="touch"?10:2;Math.abs(Fn)>Rd?(Te=N.current)==null||Te.style.setProperty("--swipe-amount",`${St}px`):Math.abs(cn)>Rd&&(be.current=null)}},d&&!n.jsx?q.createElement("button",{"aria-label":"Close toast","data-disabled":ke,"data-close-button":!0,onClick:ke?void 0:()=>{var oe;xe(),(oe=n.onDismiss)==null||oe.call(n,n)}},q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,n.jsx||q.isValidElement(n.title)?n.jsx||n.title:q.createElement(q.Fragment,null,I||n.icon||n.promise?q.createElement("div",{"data-icon":""},n.promise?q.createElement(qD,{visible:I==="loading"}):null,n.icon||YD(I)):null,q.createElement("div",{"data-content":""},q.createElement("div",{"data-title":""},n.title),n.description?q.createElement("div",{"data-description":"",className:p+$},n.description):null),n.cancel?q.createElement("button",{"data-button":!0,"data-cancel":!0,onClick:()=>{var oe;xe(),(oe=n.cancel)!=null&&oe.onClick&&n.cancel.onClick()}},n.cancel.label):null,n.action?q.createElement("button",{"data-button":"",onClick:oe=>{var Te;(Te=n.action)==null||Te.onClick(oe),!oe.defaultPrevented&&xe()}},n.action.label):null))},d$=t=>{var e;let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,theme:u="light",richColors:c,duration:d,style:h,visibleToasts:f=i$,toastOptions:p}=t,[m,v]=q.useState([]),[g,y]=q.useState([]),[w,b]=q.useState(!1),[S,A]=q.useState(!1),[P,C]=q.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),[R,_]=r.split("-"),T=q.useRef(null),D=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=q.useCallback(N=>v(L=>L.filter(({id:z})=>z!==N.id)),[]);return q.useEffect(()=>ks.subscribe(N=>{if(N.dismiss){v(L=>L.map(z=>z.id===N.id?{...z,delete:!0}:z));return}setTimeout(()=>{g2.flushSync(()=>{v(L=>{let z=L.findIndex(I=>I.id===N.id);return z!==-1?[...L.slice(0,z),{...L[z],...N},...L.slice(z+1)]:[N,...L]})})})}),[]),q.useEffect(()=>{if(u!=="system"){C(u);return}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:N})=>{C(N?"dark":"light")})},[u]),q.useEffect(()=>{m.length<=1&&b(!1)},[m]),q.useEffect(()=>{let N=L=>{var z,I;i.every(O=>L[O]||L.code===O)&&(b(!0),(z=T.current)==null||z.focus()),L.code==="Escape"&&(document.activeElement===T.current||(I=T.current)!=null&&I.contains(document.activeElement))&&b(!1)};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[i]),m.length?q.createElement("section",{"aria-label":`Notifications ${D}`,tabIndex:-1},q.createElement("ol",{tabIndex:-1,ref:T,className:a,"data-sonner-toaster":!0,"data-theme":P,"data-rich-colors":c,"data-y-position":R,"data-x-position":_,style:{"--front-toast-height":`${(e=g[0])==null?void 0:e.height}px`,"--offset":typeof l=="number"?`${l}px`:l||s$,"--width":`${a$}px`,"--gap":`${y2}px`,...h},onMouseEnter:()=>b(!0),onMouseMove:()=>b(!0),onMouseLeave:()=>{S||b(!1)},onPointerDown:()=>{A(!0)},onPointerUp:()=>A(!1)},m.map((N,L)=>q.createElement(c$,{key:N.id,index:L,toast:N,duration:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:f,closeButton:o,interacting:S,position:r,style:p==null?void 0:p.style,removeToast:B,toasts:m,heights:g,setHeights:y,expandByDefault:s,expanded:w})))):null};let h$=0;function de(t,e){const n=`atom${++h$}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=i=>i(r),r.write=(i,s,o)=>s(r,typeof o=="function"?o(i(r)):o)),e&&(r.write=e),r}const bx=t=>"init"in t,xx=t=>!!t.write,Lf=new WeakMap,f$=(t,e)=>{Lf.set(t,e),t.catch(()=>{}).finally(()=>Lf.delete(t))},Sx=(t,e)=>{const n=Lf.get(t);n&&(Lf.delete(t),n(e))},kx=(t,e)=>{t.status="fulfilled",t.value=e},Cx=(t,e)=>{t.status="rejected",t.reason=e},p$=t=>typeof(t==null?void 0:t.then)=="function",Xd=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),Ex=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),gu=t=>"v"in t&&t.v instanceof Promise,m$=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Kd=t=>{if("e"in t)throw t.e;return t.v},Iw=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let r,i;const s=C=>t.get(C),o=(C,R)=>{const _=t.get(C);if(t.set(C,R),n.has(C)||n.set(C,_),_&&gu(_)){const T="v"in R?R.v instanceof Promise?R.v:Promise.resolve(R.v):Promise.reject(R.e);Sx(_.v,T)}},a=(C,R,_)=>{const T=new Map;let D=!1;_.forEach((B,N)=>{!B&&N===C&&(B=R),B&&(T.set(N,B),R.d.get(N)!==B&&(D=!0))}),(D||R.d.size!==T.size)&&(R.d=T)},l=(C,R,_)=>{const T=s(C),D={d:(T==null?void 0:T.d)||new Map,v:R};if(_&&a(C,D,_),T&&Xd(T,D)&&T.d===D.d)return T;if(T&&gu(T)&&gu(D)&&m$(T,D)){if(T.d===D.d)return T;D.v=T.v}return o(C,D),D},u=(C,R,_,T)=>{if(p$(R)){let D;const B=new Promise((N,L)=>{let z=!1;R.then(I=>{if(!z){z=!0;const O=s(C),$=l(C,B,_);kx(B,I),N(I),(O==null?void 0:O.d)!==$.d&&S(C,$,O==null?void 0:O.d)}},I=>{if(!z){z=!0;const O=s(C),$=l(C,B,_);Cx(B,I),L(I),(O==null?void 0:O.d)!==$.d&&S(C,$,O==null?void 0:O.d)}}),D=I=>{z||(z=!0,I.then(O=>kx(B,O),O=>Cx(B,O)),N(I))}});return B.orig=R,B.status="pending",f$(B,N=>{N&&D(N),T==null||T()}),l(C,B,_)}return l(C,R,_)},c=(C,R,_)=>{const T=s(C),D={d:(T==null?void 0:T.d)||new Map,e:R};return _&&a(C,D,_),T&&Ex(T,D)&&T.d===D.d?T:(o(C,D),D)},d=(C,R)=>{const _=s(C);if(!R&&_&&(e.has(C)||Array.from(_.d).every(([I,O])=>I===C||d(I)===O)))return _;const T=new Map;let D=!0;const B=I=>{if(I===C){const $=s(I);if($)return T.set(I,$),Kd($);if(bx(I))return T.set(I,void 0),I.init;throw new Error("no atom init")}const O=d(I);return T.set(I,O),Kd(O)};let N,L;const z={get signal(){return N||(N=new AbortController),N.signal},get setSelf(){return!L&&xx(C)&&(L=(...I)=>{if(!D)return y(C,...I)}),L}};try{const I=C.read(B,z);return u(C,I,T,()=>N==null?void 0:N.abort())}catch(I){return c(C,I,T)}finally{D=!1}},h=C=>Kd(d(C)),f=C=>{let R=e.get(C);return R||(R=w(C)),R},p=(C,R)=>!R.l.size&&(!R.t.size||R.t.size===1&&R.t.has(C)),m=C=>{const R=e.get(C);R&&p(C,R)&&b(C)},v=C=>{const R=new Map,_=new WeakMap,T=B=>{const N=e.get(B);N==null||N.t.forEach(L=>{L!==B&&(R.set(L,(R.get(L)||new Set).add(B)),_.set(L,(_.get(L)||0)+1),T(L))})};T(C);const D=B=>{const N=e.get(B);N==null||N.t.forEach(L=>{var z;if(L!==B){let I=_.get(L);if(I&&_.set(L,--I),!I){let O=!!((z=R.get(L))!=null&&z.size);if(O){const $=s(L),F=d(L,!0);O=!$||!Xd($,F)}O||R.forEach($=>$.delete(L))}D(L)}})};D(C)},g=(C,...R)=>{let _=!0;const T=N=>Kd(d(N)),D=(N,...L)=>{let z;if(N===C){if(!bx(N))throw new Error("atom not writable");const I=s(N),O=u(N,L[0]);(!I||!Xd(I,O))&&v(N)}else z=g(N,...L);if(!_){const I=A()}return z},B=C.write(T,D,...R);return _=!1,B},y=(C,...R)=>{const _=g(C,...R),T=A();return _},w=(C,R)=>{var _;(_=s(C))==null||_.d.forEach((D,B)=>{const N=e.get(B);N?N.t.add(C):B!==C&&w(B,C)}),d(C);const T={t:new Set(R&&[R]),l:new Set};if(e.set(C,T),xx(C)&&C.onMount){const D=C.onMount((...B)=>y(C,...B));D&&(T.u=D)}return T},b=C=>{var R;const _=(R=e.get(C))==null?void 0:R.u;_&&_(),e.delete(C);const T=s(C);T&&(gu(T)&&Sx(T.v),T.d.forEach((D,B)=>{if(B!==C){const N=e.get(B);N&&(N.t.delete(C),p(B,N)&&b(B))}}))},S=(C,R,_)=>{const T=new Set(R.d.keys());_==null||_.forEach((D,B)=>{if(T.has(B)){T.delete(B);return}const N=e.get(B);N&&(N.t.delete(C),p(B,N)&&b(B))}),T.forEach(D=>{const B=e.get(D);B?B.t.add(C):e.has(C)&&w(D,C)})},A=()=>{let C;for(;n.size;){const R=Array.from(n);n.clear(),R.forEach(([_,T])=>{const D=s(_);if(D){D.d!==(T==null?void 0:T.d)&&S(_,D,T==null?void 0:T.d);const B=e.get(_);B&&!(T&&!gu(T)&&(Xd(T,D)||Ex(T,D)))&&B.l.forEach(N=>N())}})}};return{get:h,set:y,sub:(C,R)=>{const _=f(C),T=A(),D=_.l;return D.add(R),()=>{D.delete(R),m(C)}}}};let fg;const g$=()=>(fg||(fg=Iw()),fg),v2=x.createContext(void 0),w2=t=>{const e=x.useContext(v2);return(t==null?void 0:t.store)||e||g$()},y$=({children:t,store:e})=>{const n=x.useRef();return!e&&!n.current&&(n.current=Iw()),x.createElement(v2.Provider,{value:e||n.current},t)},v$=t=>typeof(t==null?void 0:t.then)=="function",w$=q.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function wi(t,e){const n=w2(e),[[r,i,s],o]=x.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;(i!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return x.useEffect(()=>{const u=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),u},[n,t,l]),x.useDebugValue(a),v$(a)?w$(a):a}function b$(t,e){const n=w2(e);return x.useCallback((...i)=>n.set(t,...i),[n,t])}function b2(t,e){return[wi(t,e),b$(t,e)]}const{createElement:Ml,createContext:x$,forwardRef:x2,useCallback:ws,useContext:S2,useEffect:Ki,useImperativeHandle:k2,useLayoutEffect:S$,useMemo:k$,useRef:Zn,useState:Qu}=Gv,Ax=Gv["useId".toString()],If=S$,C$=typeof Ax=="function"?Ax:()=>null;let E$=0;function Bw(t=null){const e=C$(),n=Zn(t||e||null);return n.current===null&&(n.current=""+E$++),n.current}const qp=x$(null);qp.displayName="PanelGroupContext";function C2({children:t=null,className:e="",collapsedSize:n=0,collapsible:r=!1,defaultSize:i=null,forwardedRef:s,id:o=null,maxSize:a=100,minSize:l=10,onCollapse:u=null,onResize:c=null,order:d=null,style:h={},tagName:f="div"}){const p=S2(qp);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const m=Bw(o),{collapsePanel:v,expandPanel:g,getPanelStyle:y,registerPanel:w,resizePanel:b,unregisterPanel:S}=p,A=Zn({onCollapse:u,onResize:c});if(Ki(()=>{A.current.onCollapse=u,A.current.onResize=c}),l<0||l>100)throw Error(`Panel minSize must be between 0 and 100, but was ${l}`);if(a<0||a>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${a}`);if(i!==null){if(i<0||i>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${i}`);l>i&&!r&&(console.error(`Panel minSize ${l} cannot be greater than defaultSize ${i}`),i=l)}const P=y(m,i),C=Zn({size:Px(P)}),R=Zn({callbacksRef:A,collapsedSize:n,collapsible:r,defaultSize:i,id:m,idWasAutoGenerated:o==null,maxSize:a,minSize:l,order:d});return If(()=>{C.current.size=Px(P),R.current.callbacksRef=A,R.current.collapsedSize=n,R.current.collapsible=r,R.current.defaultSize=i,R.current.id=m,R.current.idWasAutoGenerated=o==null,R.current.maxSize=a,R.current.minSize=l,R.current.order=d}),If(()=>(w(m,R),()=>{S(m)}),[d,m,w,S]),k2(s,()=>({collapse:()=>v(m),expand:()=>g(m),getCollapsed(){return C.current.size===0},getSize(){return C.current.size},resize:_=>b(m,_)}),[v,g,m,b]),Ml(f,{children:t,className:e,"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-id":m,"data-panel-size":parseFloat(""+P.flexGrow).toFixed(1),id:`data-panel-id-${m}`,style:{...P,...h}})}const Uh=x2((t,e)=>Ml(C2,{...t,forwardedRef:e}));C2.displayName="Panel";Uh.displayName="forwardRef(Panel)";function Px(t){const{flexGrow:e}=t;return typeof e=="string"?parseFloat(e):e}const ea=10;function $u(t,e,n,r,i,s,o,a){const{sizes:l}=a||{},u=l||s;if(i===0)return u;const c=lr(e),d=u.concat();let h=0;{const m=i<0?r:n,v=c.findIndex(b=>b.current.id===m),g=c[v],y=u[v],w=Rx(g,Math.abs(i),y,t);if(y===w)return u;w===0&&y>0&&o.set(m,y),i=i<0?y-w:w-y}let f=i<0?n:r,p=c.findIndex(m=>m.current.id===f);for(;;){const m=c[p],v=u[p],g=Math.abs(i)-Math.abs(h),y=Rx(m,0-g,v,t);if(v!==y&&(y===0&&v>0&&o.set(m.current.id,v),h+=v-y,d[p]=y,h.toPrecision(ea).localeCompare(Math.abs(i).toPrecision(ea),void 0,{numeric:!0})>=0))break;if(i<0){if(--p<0)break}else if(++p>=c.length)break}return h===0?u:(f=i<0?r:n,p=c.findIndex(m=>m.current.id===f),d[p]=u[p]+h,d)}function Sa(t,e,n){e.forEach((r,i)=>{const s=t[i];if(!s)return;const{callbacksRef:o,collapsedSize:a,collapsible:l,id:u}=s.current,c=n[u];if(c!==r){n[u]=r;const{onCollapse:d,onResize:h}=o.current;h&&h(r,c),l&&d&&((c==null||c===a)&&r!==a?d(!1):c!==a&&r===a&&d(!0))}})}function pg(t,e){if(e.length<2)return[null,null];const n=e.findIndex(o=>o.current.id===t);if(n<0)return[null,null];const r=n===e.length-1,i=r?e[n-1].current.id:t,s=r?t:e[n+1].current.id;return[i,s]}function E2(t,e,n){if(t.size===1)return"100";const i=lr(t).findIndex(o=>o.current.id===e),s=n[i];return s==null?"0":s.toPrecision(ea)}function A$(t){const e=document.querySelector(`[data-panel-id="${t}"]`);return e||null}function zw(t){const e=document.querySelector(`[data-panel-group-id="${t}"]`);return e||null}function Qp(t){const e=document.querySelector(`[data-panel-resize-handle-id="${t}"]`);return e||null}function P$(t){return A2().findIndex(r=>r.getAttribute("data-panel-resize-handle-id")===t)??null}function A2(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function P2(t){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Fw(t,e,n){var l,u,c,d;const r=Qp(e),i=P2(t),s=r?i.indexOf(r):-1,o=((u=(l=n[s])==null?void 0:l.current)==null?void 0:u.id)??null,a=((d=(c=n[s+1])==null?void 0:c.current)==null?void 0:d.id)??null;return[o,a]}function lr(t){return Array.from(t.values()).sort((e,n)=>{const r=e.current.order,i=n.current.order;return r==null&&i==null?0:r==null?-1:i==null?1:r-i})}function Rx(t,e,n,r){var c;const i=n+e,{collapsedSize:s,collapsible:o,maxSize:a,minSize:l}=t.current;if(o){if(n>s){if(i<=l/2+s)return s}else if(!((c=r==null?void 0:r.type)==null?void 0:c.startsWith("key"))&&i<l)return s}return Math.min(a,Math.max(l,i))}function R2(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}function R$({committedValuesRef:t,groupId:e,panels:n,setSizes:r,sizes:i,panelSizeBeforeCollapse:s}){Ki(()=>{const{direction:o,panels:a}=t.current,l=zw(e),{height:u,width:c}=l.getBoundingClientRect(),h=P2(e).map(f=>{const p=f.getAttribute("data-panel-resize-handle-id"),m=lr(a),[v,g]=Fw(e,p,m);if(v==null||g==null)return()=>{};let y=0,w=100,b=0,S=0;m.forEach(T=>{T.current.id===v?(w=T.current.maxSize,y=T.current.minSize):(b+=T.current.minSize,S+=T.current.maxSize)});const A=Math.min(w,100-b),P=Math.max(y,(m.length-1)*100-S),C=E2(a,v,i);f.setAttribute("aria-valuemax",""+Math.round(A)),f.setAttribute("aria-valuemin",""+Math.round(P)),f.setAttribute("aria-valuenow",""+Math.round(parseInt(C)));const R=T=>{if(!T.defaultPrevented)switch(T.key){case"Enter":{T.preventDefault();const D=m.findIndex(B=>B.current.id===v);if(D>=0){const B=m[D],N=i[D];if(N!=null){let L=0;N.toPrecision(ea)<=B.current.minSize.toPrecision(ea)?L=o==="horizontal"?c:u:L=-(o==="horizontal"?c:u);const z=$u(T,a,v,g,L,i,s.current,null);i!==z&&r(z)}}break}}};f.addEventListener("keydown",R);const _=A$(v);return _!=null&&f.setAttribute("aria-controls",_.id),()=>{f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow"),f.removeEventListener("keydown",R),_!=null&&f.removeAttribute("aria-controls")}});return()=>{h.forEach(f=>f())}},[t,e,n,s,r,i])}function T$({disabled:t,handleId:e,resizeHandler:n}){Ki(()=>{if(t||n==null)return;const r=Qp(e);if(r==null)return;const i=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),n(s);break}case"F6":{s.preventDefault();const o=A2(),a=P$(e);R2(a!==null);const l=s.shiftKey?a>0?a-1:o.length-1:a+1<o.length?a+1:0;o[l].focus();break}}};return r.addEventListener("keydown",i),()=>{r.removeEventListener("keydown",i)}},[t,e,n])}function O$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function T2(t,e,n,r=0,i=null){const s=n==="horizontal";let o=0;if(my(t))o=s?t.clientX:t.clientY;else if(gy(t)){const c=t.touches[0];o=s?c.screenX:c.screenY}else return 0;const a=Qp(e),l=i||a.getBoundingClientRect(),u=s?l.left:l.top;return o-u-r}function N$(t,e,n,r,i,s,o){const{dragOffset:a=0,dragHandleRect:l,sizes:u}=o||{},c=u||s;if(_$(t)){const d=i==="horizontal",f=zw(e).getBoundingClientRect(),p=d?f.width:f.height,m=t.shiftKey?10:100,v=p/m;let g=0;switch(t.key){case"ArrowDown":g=d?0:v;break;case"ArrowLeft":g=d?-v:0;break;case"ArrowRight":g=d?v:0;break;case"ArrowUp":g=d?0:-v;break;case"End":g=p;break;case"Home":g=-p;break}const[y,w]=Fw(e,n,r),b=g<0?y:w,S=r.findIndex(P=>P.current.id===b),A=r[S];if(A.current.collapsible){const P=c[S];(P===0||P.toPrecision(ea)===A.current.minSize.toPrecision(ea))&&(g=g<0?-A.current.minSize*p:A.current.minSize*p)}return g}else return T2(t,n,i,a,l)}function _$(t){return t.type==="keydown"}function my(t){return t.type.startsWith("mouse")}function gy(t){return t.type.startsWith("touch")}let yy=null,$o=null;function O2(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function M$(){$o!==null&&(document.head.removeChild($o),yy=null,$o=null)}function mg(t){if(yy===t)return;yy=t;const e=O2(t);$o===null&&($o=document.createElement("style"),document.head.appendChild($o)),$o.innerHTML=`*{cursor: ${e}!important;}`}function D$(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function N2(t){return t.map(e=>{const{minSize:n,order:r}=e.current;return r?`${r}:${n}`:`${n}`}).sort((e,n)=>e.localeCompare(n)).join(",")}function _2(t,e){try{const n=e.getItem(`PanelGroup:sizes:${t}`);if(n){const r=JSON.parse(n);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function $$(t,e,n){const r=_2(t,n);if(r){const i=N2(e);return r[i]??null}return null}function L$(t,e,n,r){const i=N2(e),s=_2(t,r)||{};s[i]=n;try{r.setItem(`PanelGroup:sizes:${t}`,JSON.stringify(s))}catch(o){console.error(o)}}const gg={};function Tx(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}const Lu={getItem:t=>(Tx(Lu),Lu.getItem(t)),setItem:(t,e)=>{Tx(Lu),Lu.setItem(t,e)}};function M2({autoSaveId:t,children:e=null,className:n="",direction:r,disablePointerEventsDuringResize:i=!1,forwardedRef:s,id:o=null,onLayout:a,storage:l=Lu,style:u={},tagName:c="div"}){const d=Bw(o),[h,f]=Qu(null),[p,m]=Qu(new Map),v=Zn(null);Zn({didLogDefaultSizeWarning:!1,didLogIdAndOrderWarning:!1,prevPanelIds:[]});const g=Zn({onLayout:a});Ki(()=>{g.current.onLayout=a});const y=Zn({}),[w,b]=Qu([]),S=Zn(new Map),A=Zn(0),P=Zn({direction:r,panels:p,sizes:w});k2(s,()=>({getLayout:()=>{const{sizes:I}=P.current;return I},setLayout:I=>{const O=I.reduce((ee,re)=>ee+re,0);R2(O===100,"Panel sizes must add up to 100%");const{panels:$}=P.current,F=y.current,X=lr($);b(I),Sa(X,I,F)}}),[]),If(()=>{P.current.direction=r,P.current.panels=p,P.current.sizes=w}),R$({committedValuesRef:P,groupId:d,panels:p,setSizes:b,sizes:w,panelSizeBeforeCollapse:S}),Ki(()=>{const{onLayout:I}=g.current,{panels:O,sizes:$}=P.current;if($.length>0){I&&I($);const F=y.current,X=lr(O);Sa(X,$,F)}},[w]),If(()=>{if(P.current.sizes.length===p.size)return;let O=null;if(t){const $=lr(p);O=$$(t,$,l)}if(O!=null)b(O);else{const $=lr(p);let F=0,X=0,ee=0;if($.forEach(re=>{ee+=re.current.minSize,re.current.defaultSize===null?F++:X+=re.current.defaultSize}),X>100)throw new Error("Default panel sizes cannot exceed 100%");if($.length>1&&F===0&&X!==100)throw new Error("Invalid default sizes specified for panels");if(ee>100)throw new Error("Minimum panel sizes cannot exceed 100%");b($.map(re=>re.current.defaultSize===null?(100-X)/F:re.current.defaultSize))}},[t,p,l]),Ki(()=>{if(t){if(w.length===0||w.length!==p.size)return;const I=lr(p);gg[t]||(gg[t]=D$(L$,100)),gg[t](t,I,w,l)}},[t,p,w,l]);const C=ws((I,O)=>{const{panels:$}=P.current;return $.size===0?{flexBasis:0,flexGrow:O??void 0,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:E2($,I,w),flexShrink:1,overflow:"hidden",pointerEvents:i&&h!==null?"none":void 0}},[h,i,w]),R=ws((I,O)=>{m($=>{if($.has(I))return $;const F=new Map($);return F.set(I,O),F})},[]),_=ws(I=>$=>{$.preventDefault();const{direction:F,panels:X,sizes:ee}=P.current,re=lr(X),[we,Se]=Fw(d,I,re);if(we==null||Se==null)return;let be=N$($,d,I,re,F,ee,v.current);if(be===0)return;const ye=zw(d).getBoundingClientRect(),_e=F==="horizontal";document.dir==="rtl"&&_e&&(be=-be);const Ce=_e?ye.width:ye.height,ke=be/Ce*100,xe=$u($,X,we,Se,ke,ee,S.current,v.current),oe=!O$(ee,xe);if((my($)||gy($))&&A.current!=ke&&mg(oe?_e?"horizontal":"vertical":_e?be<0?"horizontal-min":"horizontal-max":be<0?"vertical-min":"vertical-max"),oe){const Te=y.current;b(xe),Sa(re,xe,Te)}A.current=ke},[d]),T=ws(I=>{m(O=>{if(!O.has(I))return O;const $=new Map(O);return $.delete(I),$})},[]),D=ws(I=>{const{panels:O,sizes:$}=P.current,F=O.get(I);if(F==null)return;const{collapsedSize:X,collapsible:ee}=F.current;if(!ee)return;const re=lr(O),we=re.indexOf(F);if(we<0)return;const Se=$[we];if(Se===X)return;S.current.set(I,Se);const[be,Q]=pg(I,re);if(be==null||Q==null)return;const _e=we===re.length-1?Se:X-Se,Ce=$u(null,O,be,Q,_e,$,S.current,null);if($!==Ce){const ke=y.current;b(Ce),Sa(re,Ce,ke)}},[]),B=ws(I=>{const{panels:O,sizes:$}=P.current,F=O.get(I);if(F==null)return;const{collapsedSize:X,minSize:ee}=F.current,re=S.current.get(I)||ee;if(!re)return;const we=lr(O),Se=we.indexOf(F);if(Se<0||$[Se]!==X)return;const[Q,ye]=pg(I,we);if(Q==null||ye==null)return;const Ce=Se===we.length-1?X-re:re,ke=$u(null,O,Q,ye,Ce,$,S.current,null);if($!==ke){const xe=y.current;b(ke),Sa(we,ke,xe)}},[]),N=ws((I,O)=>{const{panels:$,sizes:F}=P.current,X=$.get(I);if(X==null)return;const{collapsedSize:ee,collapsible:re,maxSize:we,minSize:Se}=X.current,be=lr($),Q=be.indexOf(X);if(Q<0)return;const ye=F[Q];if(ye===O)return;re&&O===ee||(O=Math.min(we,Math.max(Se,O)));const[_e,Ce]=pg(I,be);if(_e==null||Ce==null)return;const xe=Q===be.length-1?ye-O:O-ye,oe=$u(null,$,_e,Ce,xe,F,S.current,null);if(F!==oe){const Te=y.current;b(oe),Sa(be,oe,Te)}},[]),L=k$(()=>({activeHandleId:h,collapsePanel:D,direction:r,expandPanel:B,getPanelStyle:C,groupId:d,registerPanel:R,registerResizeHandle:_,resizePanel:N,startDragging:(I,O)=>{if(f(I),my(O)||gy(O)){const $=Qp(I);v.current={dragHandleRect:$.getBoundingClientRect(),dragOffset:T2(O,I,r),sizes:P.current.sizes}}},stopDragging:()=>{M$(),f(null),v.current=null},unregisterPanel:T}),[h,D,r,B,C,d,R,_,N,T]),z={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Ml(qp.Provider,{children:Ml(c,{children:e,className:n,"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":d,style:{...z,...u}}),value:L})}const D2=x2((t,e)=>Ml(M2,{...t,forwardedRef:e}));M2.displayName="PanelGroup";D2.displayName="forwardRef(PanelGroup)";function vy({children:t=null,className:e="",disabled:n=!1,id:r=null,onDragging:i,style:s={},tagName:o="div"}){const a=Zn(null),l=Zn({onDragging:i});Ki(()=>{l.current.onDragging=i});const u=S2(qp);if(u===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:c,direction:d,groupId:h,registerResizeHandle:f,startDragging:p,stopDragging:m}=u,v=Bw(r),g=c===v,[y,w]=Qu(!1),[b,S]=Qu(null),A=ws(()=>{a.current.blur(),m();const{onDragging:R}=l.current;R&&R(!1)},[m]);Ki(()=>{if(n)S(null);else{const C=f(v);S(()=>C)}},[n,v,f]),Ki(()=>{if(n||b==null||!g)return;const C=D=>{b(D)},R=D=>{b(D)},T=a.current.ownerDocument;return T.body.addEventListener("contextmenu",A),T.body.addEventListener("mousemove",C),T.body.addEventListener("touchmove",C),T.body.addEventListener("mouseleave",R),window.addEventListener("mouseup",A),window.addEventListener("touchend",A),()=>{T.body.removeEventListener("contextmenu",A),T.body.removeEventListener("mousemove",C),T.body.removeEventListener("touchmove",C),T.body.removeEventListener("mouseleave",R),window.removeEventListener("mouseup",A),window.removeEventListener("touchend",A)}},[d,n,g,b,A]),T$({disabled:n,handleId:v,resizeHandler:b});const P={cursor:O2(d),touchAction:"none",userSelect:"none"};return Ml(o,{children:t,className:e,"data-resize-handle-active":g?"pointer":y?"keyboard":void 0,"data-panel-group-direction":d,"data-panel-group-id":h,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":v,onBlur:()=>w(!1),onFocus:()=>w(!0),onMouseDown:C=>{p(v,C.nativeEvent);const{onDragging:R}=l.current;R&&R(!0)},onMouseUp:A,onTouchCancel:A,onTouchEnd:A,onTouchStart:C=>{p(v,C.nativeEvent);const{onDragging:R}=l.current;R&&R(!0)},ref:a,role:"separator",style:{...P,...s},tabIndex:0})}vy.displayName="PanelResizeHandle";const I$="modulepreload",B$=function(t){return"/vonsim-next/"+t},Ox={},z$=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=B$(s),s in Ox)return;Ox[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const d=i[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":I$,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function F$(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){const{Workbox:h}=await z$(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);a=new h("/vonsim-next/sw.js",{scope:"/vonsim-next/",type:"classic"}),u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let f=!1;const p=()=>{f=!0,a==null||a.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?p():!f&&(r==null||r()):m.isExternal?window.location.reload():!f&&(r==null||r()):m.isUpdate||r==null||r()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(f=>{s?s("/vonsim-next/sw.js",f):i==null||i(f)}).catch(f=>{o==null||o(f)})}}return l=d(),c}function j$(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=x.useState(!1),[u,c]=x.useState(!1),[d]=x.useState(()=>F$({immediate:e,onOfflineReady(){c(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:i,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}function $2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=$2(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function st(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=$2(t))&&(r&&(r+=" "),r+=e);return r}var U$=function(){};function L2(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function I2(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var B2=typeof window<"u",V$=function(t,e){return typeof e=="boolean"?e:!t},W$=function(t){return x.useReducer(V$,t)};const H$=W$;var G$=B2?window:null,Nx=function(t){return!!t.addEventListener},_x=function(t){return!!t.on},X$=function(t,e,n,r){n===void 0&&(n=G$),x.useEffect(function(){if(e&&n)return Nx(n)?L2(n,t,e,r):_x(n)&&n.on(t,e,r),function(){Nx(n)?I2(n,t,e,r):_x(n)&&n.off(t,e,r)}},[t,e,n,JSON.stringify(r)])};const z2=X$;var K$=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},Z$=function(t,e,n,r){e===void 0&&(e=U$),n===void 0&&(n={}),r===void 0&&(r=[t]);var i=n.event,s=i===void 0?"keydown":i,o=n.target,a=n.options,l=x.useMemo(function(){var u=K$(t),c=function(d){if(u(d))return e(d)};return c},r);z2(s,l,o,a)};const F2=Z$;var Y$=function(t){return"touches"in t},Mx=function(t){Y$(t)&&t.touches.length<2&&t.preventDefault&&t.preventDefault()},J$=function(t,e){var n=e===void 0?{}:e,r=n.isPreventDefault,i=r===void 0?!0:r,s=n.delay,o=s===void 0?300:s,a=x.useRef(),l=x.useRef(),u=x.useCallback(function(d){i&&d.target&&(L2(d.target,"touchend",Mx,{passive:!1}),l.current=d.target),a.current=setTimeout(function(){return t(d)},o)},[t,o,i]),c=x.useCallback(function(){a.current&&clearTimeout(a.current),i&&l.current&&I2(l.current,"touchend",Mx)},[i]);return{onMouseDown:function(d){return u(d)},onTouchStart:function(d){return u(d)},onMouseUp:c,onMouseLeave:c,onTouchEnd:c}};const q$=J$;var Q$=function(t,e){return e!==void 0?e:B2?window.matchMedia(t).matches:!1},eL=function(t,e){var n=x.useState(Q$(t,e)),r=n[0],i=n[1];return x.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&i(!!o.matches)};return o.addListener(a),i(o.matches),function(){s=!1,o.removeListener(a)}},[t]),r};const tL=eL;function Ve(){return Ve=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ve.apply(this,arguments)}function Bf(t,[e,n]){return Math.min(n,Math.max(e,t))}function At(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function em(t,e=[]){let n=[];function r(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,m=(h==null?void 0:h[t][l])||a,v=x.useMemo(()=>p,Object.values(p));return x.createElement(m.Provider,{value:v},f)}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=x.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const i=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,nL(i,...e)]}function nL(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function rL(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function j2(...t){return e=>t.forEach(n=>rL(n,e))}function Nt(...t){return x.useCallback(j2(...t),t)}const Ac=x.forwardRef((t,e)=>{const{children:n,...r}=t,i=x.Children.toArray(n),s=i.find(sL);if(s){const o=s.props.children,a=i.map(l=>l===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:l);return x.createElement(wy,Ve({},r,{ref:e}),x.isValidElement(o)?x.cloneElement(o,void 0,a):null)}return x.createElement(wy,Ve({},r,{ref:e}),n)});Ac.displayName="Slot";const wy=x.forwardRef((t,e)=>{const{children:n,...r}=t;return x.isValidElement(n)?x.cloneElement(n,{...oL(r,n.props),ref:e?j2(e,n.ref):n.ref}):x.Children.count(n)>1?x.Children.only(null):null});wy.displayName="SlotClone";const iL=({children:t})=>x.createElement(x.Fragment,null,t);function sL(t){return x.isValidElement(t)&&t.type===iL}function oL(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function U2(t){const e=t+"CollectionProvider",[n,r]=em(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:m}=f,v=q.useRef(null),g=q.useRef(new Map).current;return q.createElement(i,{scope:p,itemMap:g,collectionRef:v},m)},a=t+"CollectionSlot",l=q.forwardRef((f,p)=>{const{scope:m,children:v}=f,g=s(a,m),y=Nt(p,g.collectionRef);return q.createElement(Ac,{ref:y},v)}),u=t+"CollectionItemSlot",c="data-radix-collection-item",d=q.forwardRef((f,p)=>{const{scope:m,children:v,...g}=f,y=q.useRef(null),w=Nt(p,y),b=s(u,m);return q.useEffect(()=>(b.itemMap.set(y,{ref:y,...g}),()=>void b.itemMap.delete(y))),q.createElement(Ac,{[c]:"",ref:w},v)});function h(f){const p=s(t+"CollectionConsumer",f);return q.useCallback(()=>{const v=p.collectionRef.current;if(!v)return[];const g=Array.from(v.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((b,S)=>g.indexOf(b.ref.current)-g.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,r]}const aL=x.createContext(void 0);function V2(t){const e=x.useContext(aL);return t||e||"ltr"}const lL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Qt=lL.reduce((t,e)=>{const n=x.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Ac:e;return x.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),x.createElement(a,Ve({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function uL(t,e){t&&fa.flushSync(()=>t.dispatchEvent(e))}function ss(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function cL(t,e=globalThis==null?void 0:globalThis.document){const n=ss(t);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const by="dismissableLayer.update",dL="dismissableLayer.pointerDownOutside",hL="dismissableLayer.focusOutside";let Dx;const fL=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pL=x.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=t,c=x.useContext(fL),[d,h]=x.useState(null),f=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=x.useState({}),m=Nt(e,C=>h(C)),v=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(g),w=d?v.indexOf(d):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,A=mL(C=>{const R=C.target,_=[...c.branches].some(T=>T.contains(R));!S||_||(s==null||s(C),a==null||a(C),C.defaultPrevented||l==null||l())},f),P=gL(C=>{const R=C.target;[...c.branches].some(T=>T.contains(R))||(o==null||o(C),a==null||a(C),C.defaultPrevented||l==null||l())},f);return cL(C=>{w===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},f),x.useEffect(()=>{if(d)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Dx=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),$x(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Dx)}},[d,f,r,c]),x.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),$x())},[d,c]),x.useEffect(()=>{const C=()=>p({});return document.addEventListener(by,C),()=>document.removeEventListener(by,C)},[]),x.createElement(Qt.div,Ve({},u,{ref:m,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:At(t.onFocusCapture,P.onFocusCapture),onBlurCapture:At(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:At(t.onPointerDownCapture,A.onPointerDownCapture)}))});function mL(t,e=globalThis==null?void 0:globalThis.document){const n=ss(t),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){W2(dL,n,u,{discrete:!0})};var l=c;const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function gL(t,e=globalThis==null?void 0:globalThis.document){const n=ss(t),r=x.useRef(!1);return x.useEffect(()=>{const i=s=>{s.target&&!r.current&&W2(hL,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $x(){const t=new CustomEvent(by);document.dispatchEvent(t)}function W2(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?uL(i,s):i.dispatchEvent(s)}let yg=0;function yL(){x.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:Lx()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:Lx()),yg++,()=>{yg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),yg--}},[])}function Lx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const vg="focusScope.autoFocusOnMount",wg="focusScope.autoFocusOnUnmount",Ix={bubbles:!1,cancelable:!0},vL=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=x.useState(null),u=ss(i),c=ss(s),d=x.useRef(null),h=Nt(e,m=>l(m)),f=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let y=function(A){if(f.paused||!a)return;const P=A.target;a.contains(P)?d.current=P:bs(d.current,{select:!0})},w=function(A){if(f.paused||!a)return;const P=A.relatedTarget;P!==null&&(a.contains(P)||bs(d.current,{select:!0}))},b=function(A){const P=document.activeElement;for(const C of A)C.removedNodes.length>0&&(a!=null&&a.contains(P)||bs(a))};var m=y,v=w,g=b;document.addEventListener("focusin",y),document.addEventListener("focusout",w);const S=new MutationObserver(b);return a&&S.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),S.disconnect()}}},[r,a,f.paused]),x.useEffect(()=>{if(a){zx.add(f);const m=document.activeElement;if(!a.contains(m)){const g=new CustomEvent(vg,Ix);a.addEventListener(vg,u),a.dispatchEvent(g),g.defaultPrevented||(wL(CL(H2(a)),{select:!0}),document.activeElement===m&&bs(a))}return()=>{a.removeEventListener(vg,u),setTimeout(()=>{const g=new CustomEvent(wg,Ix);a.addEventListener(wg,c),a.dispatchEvent(g),g.defaultPrevented||bs(m??document.body,{select:!0}),a.removeEventListener(wg,c),zx.remove(f)},0)}}},[a,u,c,f]);const p=x.useCallback(m=>{if(!n&&!r||f.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,g=document.activeElement;if(v&&g){const y=m.currentTarget,[w,b]=bL(y);w&&b?!m.shiftKey&&g===b?(m.preventDefault(),n&&bs(w,{select:!0})):m.shiftKey&&g===w&&(m.preventDefault(),n&&bs(b,{select:!0})):g===y&&m.preventDefault()}},[n,r,f.paused]);return x.createElement(Qt.div,Ve({tabIndex:-1},o,{ref:h,onKeyDown:p}))});function wL(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(bs(r,{select:e}),document.activeElement!==n)return}function bL(t){const e=H2(t),n=Bx(e,t),r=Bx(e.reverse(),t);return[n,r]}function H2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Bx(t,e){for(const n of t)if(!xL(n,{upTo:e}))return n}function xL(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function SL(t){return t instanceof HTMLInputElement&&"select"in t}function bs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&SL(t)&&e&&t.select()}}const zx=kL();function kL(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Fx(t,e),t.unshift(e)},remove(e){var n;t=Fx(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function Fx(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function CL(t){return t.filter(e=>e.tagName!=="A")}const os=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},EL=Gv["useId".toString()]||(()=>{});let AL=0;function G2(t){const[e,n]=x.useState(EL());return os(()=>{t||n(r=>r??String(AL++))},[t]),t||(e?`radix-${e}`:"")}function Ql(t){return t.split("-")[1]}function jw(t){return t==="y"?"height":"width"}function Zi(t){return t.split("-")[0]}function pa(t){return["top","bottom"].includes(Zi(t))?"x":"y"}function jx(t,e,n){let{reference:r,floating:i}=t;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=pa(e),l=jw(a),u=r[l]/2-i[l]/2,c=a==="x";let d;switch(Zi(e)){case"top":d={x:s,y:r.y-i.height};break;case"bottom":d={x:s,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:o};break;case"left":d={x:r.x-i.width,y:o};break;default:d={x:r.x,y:r.y}}switch(Ql(e)){case"start":d[a]-=u*(n&&c?-1:1);break;case"end":d[a]+=u*(n&&c?-1:1)}return d}const PL=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:d}=jx(u,r,l),h=r,f={},p=0;for(let m=0;m<a.length;m++){const{name:v,fn:g}=a[m],{x:y,y:w,data:b,reset:S}=await g({x:c,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=w??d,f={...f,[v]:{...f[v],...b}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:c,y:d}=jx(u,h,l)),m=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:f}};function as(t,e){return typeof t=="function"?t(e):t}function X2(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function zf(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Pc(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=as(e,t),p=X2(f),m=a[h?d==="floating"?"reference":"floating":d],v=zf(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),g=d==="floating"?{...o.floating,x:r,y:i}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(y))&&await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1},b=zf(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:y,strategy:l}):g);return{top:(v.top-b.top+p.top)/w.y,bottom:(b.bottom-v.bottom+p.bottom)/w.y,left:(v.left-b.left+p.left)/w.x,right:(b.right-v.right+p.right)/w.x}}const Rc=Math.min,Ao=Math.max;function xy(t,e,n){return Ao(t,Rc(e,n))}const Ux=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a}=e,{element:l,padding:u=0}=as(t,e)||{};if(l==null)return{};const c=X2(u),d={x:n,y:r},h=pa(i),f=jw(h),p=await o.getDimensions(l),m=h==="y",v=m?"top":"left",g=m?"bottom":"right",y=m?"clientHeight":"clientWidth",w=s.reference[f]+s.reference[h]-d[h]-s.floating[f],b=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let A=S?S[y]:0;A&&await(o.isElement==null?void 0:o.isElement(S))||(A=a.floating[y]||s.floating[f]);const P=w/2-b/2,C=A/2-p[f]/2-1,R=Rc(c[v],C),_=Rc(c[g],C),T=R,D=A-p[f]-_,B=A/2-p[f]/2+P,N=xy(T,B,D),L=Ql(i)!=null&&B!=N&&s.reference[f]/2-(B<T?R:_)-p[f]/2<0?B<T?T-B:D-B:0;return{[h]:d[h]-L,data:{[h]:N,centerOffset:B-N+L}}}}),K2=["top","right","bottom","left"];K2.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const RL={left:"right",right:"left",bottom:"top",top:"bottom"};function Ff(t){return t.replace(/left|right|bottom|top/g,e=>RL[e])}function TL(t,e,n){n===void 0&&(n=!1);const r=Ql(t),i=pa(t),s=jw(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ff(o)),{main:o,cross:Ff(o)}}const OL={start:"end",end:"start"};function bg(t){return t.replace(/start|end/g,e=>OL[e])}const NL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...m}=as(t,e),v=Zi(r),g=Zi(o)===o,y=await(a.isRTL==null?void 0:a.isRTL(l.floating)),w=d||(g||!p?[Ff(o)]:function(T){const D=Ff(T);return[bg(T),D,bg(D)]}(o));d||f==="none"||w.push(...function(T,D,B,N){const L=Ql(T);let z=function(I,O,$){const F=["left","right"],X=["right","left"],ee=["top","bottom"],re=["bottom","top"];switch(I){case"top":case"bottom":return $?O?X:F:O?F:X;case"left":case"right":return O?ee:re;default:return[]}}(Zi(T),B==="start",N);return L&&(z=z.map(I=>I+"-"+L),D&&(z=z.concat(z.map(bg)))),z}(o,p,f,y));const b=[o,...w],S=await Pc(e,m),A=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&A.push(S[v]),c){const{main:T,cross:D}=TL(r,s,y);A.push(S[T],S[D])}if(P=[...P,{placement:r,overflows:A}],!A.every(T=>T<=0)){var C,R;const T=(((C=i.flip)==null?void 0:C.index)||0)+1,D=b[T];if(D)return{data:{index:T,overflows:P},reset:{placement:D}};let B=(R=P.filter(N=>N.overflows[0]<=0).sort((N,L)=>N.overflows[1]-L.overflows[1])[0])==null?void 0:R.placement;if(!B)switch(h){case"bestFit":{var _;const N=(_=P.map(L=>[L.placement,L.overflows.filter(z=>z>0).reduce((z,I)=>z+I,0)]).sort((L,z)=>L[1]-z[1])[0])==null?void 0:_[0];N&&(B=N);break}case"initialPlacement":B=o}if(r!==B)return{reset:{placement:B}}}return{}}}};function Vx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Wx(t){return K2.some(e=>t[e]>=0)}const _L=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=as(t,e);switch(r){case"referenceHidden":{const s=Vx(await Pc(e,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Wx(s)}}}case"escaped":{const s=Vx(await Pc(e,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:Wx(s)}}}default:return{}}}}},ML=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await async function(s,o){const{placement:a,platform:l,elements:u}=s,c=await(l.isRTL==null?void 0:l.isRTL(u.floating)),d=Zi(a),h=Ql(a),f=pa(a)==="x",p=["left","top"].includes(d)?-1:1,m=c&&f?-1:1,v=as(o,s);let{mainAxis:g,crossAxis:y,alignmentAxis:w}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...v};return h&&typeof w=="number"&&(y=h==="end"?-1*w:w),f?{x:y*m,y:g*p}:{x:g*p,y:y*m}}(e,t);return{x:n+i.x,y:r+i.y,data:i}}}};function Z2(t){return t==="x"?"y":"x"}const DL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...l}=as(t,e),u={x:n,y:r},c=await Pc(e,l),d=pa(Zi(i)),h=Z2(d);let f=u[d],p=u[h];if(s){const v=d==="y"?"bottom":"right";f=xy(f+c[d==="y"?"top":"left"],f,f-c[v])}if(o){const v=h==="y"?"bottom":"right";p=xy(p+c[h==="y"?"top":"left"],p,p-c[v])}const m=a.fn({...e,[d]:f,[h]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},$L=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=as(t,e),c={x:n,y:r},d=pa(i),h=Z2(d);let f=c[d],p=c[h];const m=as(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=d==="y"?"height":"width",b=s.reference[d]-s.floating[w]+v.mainAxis,S=s.reference[d]+s.reference[w]-v.mainAxis;f<b?f=b:f>S&&(f=S)}if(u){var g,y;const w=d==="y"?"width":"height",b=["top","left"].includes(Zi(i)),S=s.reference[h]-s.floating[w]+(b&&((g=o.offset)==null?void 0:g[h])||0)+(b?0:v.crossAxis),A=s.reference[h]+s.reference[w]+(b?0:((y=o.offset)==null?void 0:y[h])||0)-(b?v.crossAxis:0);p<S?p=S:p>A&&(p=A)}return{[d]:f,[h]:p}}}},LL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=as(t,e),l=await Pc(e,a),u=Zi(n),c=Ql(n),d=pa(n)==="x",{width:h,height:f}=r.floating;let p,m;u==="top"||u==="bottom"?(p=u,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=u,p=c==="end"?"top":"bottom");const v=f-l[p],g=h-l[m],y=!e.middlewareData.shift;let w=v,b=g;if(d){const A=h-l.left-l.right;b=c||y?Rc(g,A):A}else{const A=f-l.top-l.bottom;w=c||y?Rc(v,A):A}if(y&&!c){const A=Ao(l.left,0),P=Ao(l.right,0),C=Ao(l.top,0),R=Ao(l.bottom,0);d?b=h-2*(A!==0||P!==0?A+P:Ao(l.left,l.right)):w=f-2*(C!==0||R!==0?C+R:Ao(l.top,l.bottom))}await o({...e,availableWidth:b,availableHeight:w});const S=await i.getDimensions(s.floating);return h!==S.width||f!==S.height?{reset:{rects:!0}}:{}}}};function Qn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function bi(t){return Qn(t).getComputedStyle(t)}function Y2(t){return t instanceof Qn(t).Node}function no(t){return Y2(t)?(t.nodeName||"").toLowerCase():"#document"}function Gr(t){return t instanceof HTMLElement||t instanceof Qn(t).HTMLElement}function Hx(t){return typeof ShadowRoot<"u"&&(t instanceof Qn(t).ShadowRoot||t instanceof ShadowRoot)}function Tc(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=bi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function IL(t){return["table","td","th"].includes(no(t))}function Sy(t){const e=Uw(),n=bi(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Uw(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function tm(t){return["html","body","#document"].includes(no(t))}const ky=Math.min,ol=Math.max,jf=Math.round,Zd=Math.floor,ro=t=>({x:t,y:t});function J2(t){const e=bi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Gr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=jf(n)!==s||jf(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Yi(t){return t instanceof Element||t instanceof Qn(t).Element}function Vw(t){return Yi(t)?t:t.contextElement}function al(t){const e=Vw(t);if(!Gr(e))return ro(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=J2(e);let o=(s?jf(n.width):n.width)/r,a=(s?jf(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const BL=ro(0);function q2(t){const e=Qn(t);return Uw()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:BL}function ta(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Vw(t);let o=ro(1);e&&(r?Yi(r)&&(o=al(r)):o=al(t));const a=function(h,f,p){return f===void 0&&(f=!1),!(!p||f&&p!==Qn(h))&&f}(s,n,r)?q2(s):ro(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const h=Qn(s),f=r&&Yi(r)?Qn(r):r;let p=h.frameElement;for(;p&&r&&f!==h;){const m=al(p),v=p.getBoundingClientRect(),g=getComputedStyle(p),y=v.left+(p.clientLeft+parseFloat(g.paddingLeft))*m.x,w=v.top+(p.clientTop+parseFloat(g.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,d*=m.y,l+=y,u+=w,p=Qn(p).frameElement}}return zf({width:c,height:d,x:l,y:u})}function nm(t){return Yi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ji(t){var e;return(e=(Y2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Q2(t){return ta(Ji(t)).left+nm(t).scrollLeft}function Dl(t){if(no(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Hx(t)&&t.host||Ji(t);return Hx(e)?e.host:e}function eP(t){const e=Dl(t);return tm(e)?t.ownerDocument?t.ownerDocument.body:t.body:Gr(e)&&Tc(e)?e:eP(e)}function Uf(t,e){var n;e===void 0&&(e=[]);const r=eP(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Qn(r);return i?e.concat(s,s.visualViewport||[],Tc(r)?r:[]):e.concat(r,Uf(r))}function Gx(t,e,n){let r;if(e==="viewport")r=function(i,s){const o=Qn(i),a=Ji(i),l=o.visualViewport;let u=a.clientWidth,c=a.clientHeight,d=0,h=0;if(l){u=l.width,c=l.height;const f=Uw();(!f||f&&s==="fixed")&&(d=l.offsetLeft,h=l.offsetTop)}return{width:u,height:c,x:d,y:h}}(t,n);else if(e==="document")r=function(i){const s=Ji(i),o=nm(i),a=i.ownerDocument.body,l=ol(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),u=ol(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let c=-o.scrollLeft+Q2(i);const d=-o.scrollTop;return bi(a).direction==="rtl"&&(c+=ol(s.clientWidth,a.clientWidth)-l),{width:l,height:u,x:c,y:d}}(Ji(t));else if(Yi(e))r=function(i,s){const o=ta(i,!0,s==="fixed"),a=o.top+i.clientTop,l=o.left+i.clientLeft,u=Gr(i)?al(i):ro(1);return{width:i.clientWidth*u.x,height:i.clientHeight*u.y,x:l*u.x,y:a*u.y}}(e,n);else{const i=q2(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return zf(r)}function tP(t,e){const n=Dl(t);return!(n===e||!Yi(n)||tm(n))&&(bi(n).position==="fixed"||tP(n,e))}function zL(t,e,n){const r=Gr(e),i=Ji(e),s=n==="fixed",o=ta(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ro(0);if(r||!r&&!s)if((no(e)!=="body"||Tc(i))&&(a=nm(e)),Gr(e)){const u=ta(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else i&&(l.x=Q2(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Xx(t,e){return Gr(t)&&bi(t).position!=="fixed"?e?e(t):t.offsetParent:null}function Kx(t,e){const n=Qn(t);if(!Gr(t))return n;let r=Xx(t,e);for(;r&&IL(r)&&bi(r).position==="static";)r=Xx(r,e);return r&&(no(r)==="html"||no(r)==="body"&&bi(r).position==="static"&&!Sy(r))?n:r||function(i){let s=Dl(i);for(;Gr(s)&&!tm(s);){if(Sy(s))return s;s=Dl(s)}return null}(t)||n}const FL={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=Gr(n),s=Ji(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=ro(1);const l=ro(0);if((i||!i&&r!=="fixed")&&((no(n)!=="body"||Tc(s))&&(o=nm(n)),Gr(n))){const u=ta(n);a=al(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},getDocumentElement:Ji,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?function(l,u){const c=u.get(l);if(c)return c;let d=Uf(l).filter(m=>Yi(m)&&no(m)!=="body"),h=null;const f=bi(l).position==="fixed";let p=f?Dl(l):l;for(;Yi(p)&&!tm(p);){const m=bi(p),v=Sy(p);v||m.position!=="fixed"||(h=null),(f?!v&&!h:!v&&m.position==="static"&&h&&["absolute","fixed"].includes(h.position)||Tc(p)&&!v&&tP(l,p))?d=d.filter(g=>g!==p):h=m,p=Dl(p)}return u.set(l,d),d}(e,this._c):[].concat(n),r],o=s[0],a=s.reduce((l,u)=>{const c=Gx(e,u,i);return l.top=ol(c.top,l.top),l.right=ky(c.right,l.right),l.bottom=ky(c.bottom,l.bottom),l.left=ol(c.left,l.left),l},Gx(e,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:Kx,getElementRects:async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||Kx,s=this.getDimensions;return{reference:zL(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return J2(t)},getScale:al,isElement:Yi,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function jL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Vw(t),c=i||s?[...u?Uf(u):[],...Uf(e)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&a?function(v,g){let y,w=null;const b=Ji(v);function S(){clearTimeout(y),w&&w.disconnect(),w=null}return function A(P,C){P===void 0&&(P=!1),C===void 0&&(C=1),S();const{left:R,top:_,width:T,height:D}=v.getBoundingClientRect();if(P||g(),!T||!D)return;const B={rootMargin:-Zd(_)+"px "+-Zd(b.clientWidth-(R+T))+"px "+-Zd(b.clientHeight-(_+D))+"px "+-Zd(R)+"px",threshold:ol(0,ky(1,C))||1};let N=!0;function L(z){const I=z[0].intersectionRatio;if(I!==C){if(!N)return A();I?A(!1,I):y=setTimeout(()=>{A(!1,1e-7)},100)}N=!1}try{w=new IntersectionObserver(L,{...B,root:b.ownerDocument})}catch{w=new IntersectionObserver(L,B)}w.observe(v)}(!0),S}(u,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[g]=v;g&&g.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let m=l?ta(t):null;return l&&function v(){const g=ta(t);!m||g.x===m.x&&g.y===m.y&&g.width===m.width&&g.height===m.height||n(),m=g,h=requestAnimationFrame(v)}(),n(),()=>{c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const UL=(t,e,n)=>{const r=new Map,i={platform:FL,...n},s={...i.platform,_c:r};return PL(t,e,{...i,platform:s})},VL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Ux({element:r.current,padding:i}).fn(n):{}:r?Ux({element:r,padding:i}).fn(n):{}}}};var Vh=typeof document<"u"?x.useLayoutEffect:x.useEffect;function Vf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Vf(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Vf(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function nP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Zx(t,e){const n=nP(t);return Math.round(e*n)/n}function Yx(t){const e=x.useRef(t);return Vh(()=>{e.current=t}),e}function WL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=x.useState(r);Vf(h,r)||f(r);const[p,m]=x.useState(null),[v,g]=x.useState(null),y=x.useCallback(z=>{z!=A.current&&(A.current=z,m(z))},[m]),w=x.useCallback(z=>{z!==P.current&&(P.current=z,g(z))},[g]),b=s||p,S=o||v,A=x.useRef(null),P=x.useRef(null),C=x.useRef(c),R=Yx(l),_=Yx(i),T=x.useCallback(()=>{if(!A.current||!P.current)return;const z={placement:e,strategy:n,middleware:h};_.current&&(z.platform=_.current),UL(A.current,P.current,z).then(I=>{const O={...I,isPositioned:!0};D.current&&!Vf(C.current,O)&&(C.current=O,fa.flushSync(()=>{d(O)}))})},[h,e,n,_]);Vh(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[u]);const D=x.useRef(!1);Vh(()=>(D.current=!0,()=>{D.current=!1}),[]),Vh(()=>{if(b&&(A.current=b),S&&(P.current=S),b&&S){if(R.current)return R.current(b,S,T);T()}},[b,S,T,R]);const B=x.useMemo(()=>({reference:A,floating:P,setReference:y,setFloating:w}),[y,w]),N=x.useMemo(()=>({reference:b,floating:S}),[b,S]),L=x.useMemo(()=>{const z={position:n,left:0,top:0};if(!N.floating)return z;const I=Zx(N.floating,c.x),O=Zx(N.floating,c.y);return a?{...z,transform:"translate("+I+"px, "+O+"px)",...nP(N.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:O}},[n,a,N.floating,c.x,c.y]);return x.useMemo(()=>({...c,update:T,refs:B,elements:N,floatingStyles:L}),[c,T,B,N,L])}function rP(t){const[e,n]=x.useState(void 0);return os(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const iP="Popper",[sP,oP]=em(iP),[HL,aP]=sP(iP),GL=t=>{const{__scopePopper:e,children:n}=t,[r,i]=x.useState(null);return x.createElement(HL,{scope:e,anchor:r,onAnchorChange:i},n)},XL="PopperAnchor",KL=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=aP(XL,n),o=x.useRef(null),a=Nt(e,o);return x.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:x.createElement(Qt.div,Ve({},i,{ref:a}))}),lP="PopperContent",[ZL,XH]=sP(lP),YL=x.forwardRef((t,e)=>{var n,r,i,s,o,a,l,u;const{__scopePopper:c,side:d="bottom",sideOffset:h=0,align:f="center",alignOffset:p=0,arrowPadding:m=0,collisionBoundary:v=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:w=!1,avoidCollisions:b=!0,onPlaced:S,...A}=t,P=aP(lP,c),[C,R]=x.useState(null),_=Nt(e,Te=>R(Te)),[T,D]=x.useState(null),B=rP(T),N=(n=B==null?void 0:B.width)!==null&&n!==void 0?n:0,L=(r=B==null?void 0:B.height)!==null&&r!==void 0?r:0,z=d+(f!=="center"?"-"+f:""),I=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},O=Array.isArray(v)?v:[v],$=O.length>0,F={padding:I,boundary:O.filter(JL),altBoundary:$},{refs:X,floatingStyles:ee,placement:re,isPositioned:we,middlewareData:Se}=WL({strategy:"fixed",placement:z,whileElementsMounted:jL,elements:{reference:P.anchor},middleware:[ML({mainAxis:h+L,alignmentAxis:p}),b&&DL({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?$L():void 0,...F}),b&&NL({...F}),LL({...F,apply:({elements:Te,rects:St,availableWidth:cn,availableHeight:Fn})=>{const{width:Rd,height:x_}=St.reference,Td=Te.floating.style;Td.setProperty("--radix-popper-available-width",`${cn}px`),Td.setProperty("--radix-popper-available-height",`${Fn}px`),Td.setProperty("--radix-popper-anchor-width",`${Rd}px`),Td.setProperty("--radix-popper-anchor-height",`${x_}px`)}}),T&&VL({element:T,padding:m}),qL({arrowWidth:N,arrowHeight:L}),w&&_L({strategy:"referenceHidden"})]}),[be,Q]=uP(re),ye=ss(S);os(()=>{we&&(ye==null||ye())},[we,ye]);const _e=(i=Se.arrow)===null||i===void 0?void 0:i.x,Ce=(s=Se.arrow)===null||s===void 0?void 0:s.y,ke=((o=Se.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[xe,oe]=x.useState();return os(()=>{C&&oe(window.getComputedStyle(C).zIndex)},[C]),x.createElement("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:we?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(a=Se.transformOrigin)===null||a===void 0?void 0:a.x,(l=Se.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},x.createElement(ZL,{scope:c,placedSide:be,onArrowChange:D,arrowX:_e,arrowY:Ce,shouldHideArrow:ke},x.createElement(Qt.div,Ve({"data-side":be,"data-align":Q},A,{ref:_,style:{...A.style,animation:we?void 0:"none",opacity:(u=Se.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function JL(t){return t!==null}const qL=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:u}=e,d=((n=u.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=d?0:t.arrowWidth,f=d?0:t.arrowHeight,[p,m]=uP(a),v={start:"0%",center:"50%",end:"100%"}[m],g=((r=(i=u.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+h/2,y=((s=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+f/2;let w="",b="";return p==="bottom"?(w=d?v:`${g}px`,b=`${-f}px`):p==="top"?(w=d?v:`${g}px`,b=`${l.floating.height+f}px`):p==="right"?(w=`${-f}px`,b=d?v:`${y}px`):p==="left"&&(w=`${l.floating.width+f}px`,b=d?v:`${y}px`),{data:{x:w,y:b}}}});function uP(t){const[e,n="center"]=t.split("-");return[e,n]}const QL=GL,eI=KL,tI=YL,nI=x.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?g2.createPortal(x.createElement(Qt.div,Ve({},i,{ref:e})),r):null});function Cy({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=rI({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=ss(n),l=x.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else i(u)},[s,t,i,a]);return[o,l]}function rI({defaultProp:t,onChange:e}){const n=x.useState(t),[r]=n,i=x.useRef(r),s=ss(e);return x.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function cP(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const iI=x.forwardRef((t,e)=>x.createElement(Qt.span,Ve({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var sI=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ka=new WeakMap,Yd=new WeakMap,Jd={},xg=0,dP=function(t){return t&&(t.host||dP(t.parentNode))},oI=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=dP(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},aI=function(t,e,n,r){var i=oI(e,Array.isArray(t)?t:[t]);Jd[n]||(Jd[n]=new WeakMap);var s=Jd[n],o=[],a=new Set,l=new Set(i),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};i.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else{var f=h.getAttribute(r),p=f!==null&&f!=="false",m=(ka.get(h)||0)+1,v=(s.get(h)||0)+1;ka.set(h,m),s.set(h,v),o.push(h),m===1&&p&&Yd.set(h,!0),v===1&&h.setAttribute(n,"true"),p||h.setAttribute(r,"true")}})};return c(e),a.clear(),xg++,function(){o.forEach(function(d){var h=ka.get(d)-1,f=s.get(d)-1;ka.set(d,h),s.set(d,f),h||(Yd.has(d)||d.removeAttribute(r),Yd.delete(d)),f||d.removeAttribute(n)}),xg--,xg||(ka=new WeakMap,ka=new WeakMap,Yd=new WeakMap,Jd={})}},lI=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||sI(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),aI(r,i,n,"aria-hidden")):function(){return null}},ui=function(){return ui=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ui.apply(this,arguments)};function hP(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function uI(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Wh="right-scroll-bar-position",Hh="width-before-scroll-bar",cI="with-scroll-bars-hidden",dI="--removed-body-scroll-bar-size";function hI(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function fI(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}function pI(t,e){return fI(e||null,function(n){return t.forEach(function(r){return hI(r,n)})})}function mI(t){return t}function gI(t,e){e===void 0&&(e=mI);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return i}function yI(t){t===void 0&&(t={});var e=gI(null);return e.options=ui({async:!0,ssr:!1},t),e}var fP=function(t){var e=t.sideCar,n=hP(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,ui({},n))};fP.isSideCarExport=!0;function vI(t,e){return t.useMedium(e),fP}var pP=yI(),Sg=function(){},rm=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:Sg,onWheelCapture:Sg,onTouchMoveCapture:Sg}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,m=t.allowPinchZoom,v=t.as,g=v===void 0?"div":v,y=hP(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,b=pI([n,e]),S=ui(ui({},y),i);return x.createElement(x.Fragment,null,c&&x.createElement(w,{sideCar:pP,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n}),o?x.cloneElement(x.Children.only(a),ui(ui({},S),{ref:b})):x.createElement(g,ui({},S,{className:l,ref:b}),a))});rm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rm.classNames={fullWidth:Hh,zeroRight:Wh};var Jx,wI=function(){if(Jx)return Jx;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function bI(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wI();return e&&t.setAttribute("nonce",e),t}function xI(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function SI(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var kI=function(){var t=0,e=null;return{add:function(n){t==0&&(e=bI())&&(xI(e,n),SI(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},CI=function(){var t=kI();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},mP=function(){var t=CI(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},EI={left:0,top:0,right:0,gap:0},kg=function(t){return parseInt(t||"",10)||0},AI=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[kg(n),kg(r),kg(i)]},PI=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return EI;var e=AI(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},RI=mP(),TI=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(cI,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Hh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Wh," .").concat(Wh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Hh," .").concat(Hh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(dI,": ").concat(a,`px;
  }
`)},OI=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r,s=x.useMemo(function(){return PI(i)},[i]);return x.createElement(RI,{styles:TI(s,!e,i,n?"":"!important")})},Ey=!1;if(typeof window<"u")try{var qd=Object.defineProperty({},"passive",{get:function(){return Ey=!0,!0}});window.addEventListener("test",qd,qd),window.removeEventListener("test",qd,qd)}catch{Ey=!1}var Ca=Ey?{passive:!1}:!1,NI=function(t){return t.tagName==="TEXTAREA"},gP=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!NI(t)&&n[e]==="visible")},_I=function(t){return gP(t,"overflowY")},MI=function(t){return gP(t,"overflowX")},qx=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=yP(t,n);if(r){var i=vP(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},DI=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},$I=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},yP=function(t,e){return t==="v"?_I(e):MI(e)},vP=function(t,e){return t==="v"?DI(e):$I(e)},LI=function(t,e){return t==="h"&&e==="rtl"?-1:1},II=function(t,e,n,r,i){var s=LI(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=vP(t,a),p=f[0],m=f[1],v=f[2],g=m-v-s*p;(p||g)&&yP(t,a)&&(d+=g,h+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(i&&d===0||!i&&o>d)||!c&&(i&&h===0||!i&&-o>h))&&(u=!0),u},Qd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Qx=function(t){return[t.deltaX,t.deltaY]},eS=function(t){return t&&"current"in t?t.current:t},BI=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zI=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},FI=0,Ea=[];function jI(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(FI++)[0],s=x.useState(function(){return mP()})[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=uI([t.lockRef.current],(t.shards||[]).map(eS),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(m,v){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var g=Qd(m),y=n.current,w="deltaX"in m?m.deltaX:y[0]-g[0],b="deltaY"in m?m.deltaY:y[1]-g[1],S,A=m.target,P=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in m&&P==="h"&&A.type==="range")return!1;var C=qx(P,A);if(!C)return!0;if(C?S=P:(S=P==="v"?"h":"v",C=qx(P,A)),!C)return!1;if(!r.current&&"changedTouches"in m&&(w||b)&&(r.current=S),!S)return!0;var R=r.current||S;return II(R,v,m,R==="h"?w:b,!0)},[]),l=x.useCallback(function(m){var v=m;if(!(!Ea.length||Ea[Ea.length-1]!==s)){var g="deltaY"in v?Qx(v):Qd(v),y=e.current.filter(function(S){return S.name===v.type&&S.target===v.target&&BI(S.delta,g)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(eS).filter(Boolean).filter(function(S){return S.contains(v.target)}),b=w.length>0?a(v,w[0]):!o.current.noIsolation;b&&v.cancelable&&v.preventDefault()}}},[]),u=x.useCallback(function(m,v,g,y){var w={name:m,delta:v,target:g,should:y};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(b){return b!==w})},1)},[]),c=x.useCallback(function(m){n.current=Qd(m),r.current=void 0},[]),d=x.useCallback(function(m){u(m.type,Qx(m),m.target,a(m,t.lockRef.current))},[]),h=x.useCallback(function(m){u(m.type,Qd(m),m.target,a(m,t.lockRef.current))},[]);x.useEffect(function(){return Ea.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ca),document.addEventListener("touchmove",l,Ca),document.addEventListener("touchstart",c,Ca),function(){Ea=Ea.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Ca),document.removeEventListener("touchmove",l,Ca),document.removeEventListener("touchstart",c,Ca)}},[]);var f=t.removeScrollBar,p=t.inert;return x.createElement(x.Fragment,null,p?x.createElement(s,{styles:zI(i)}):null,f?x.createElement(OI,{gapMode:"margin"}):null)}const UI=vI(pP,jI);var wP=x.forwardRef(function(t,e){return x.createElement(rm,ui({},t,{ref:e,sideCar:UI}))});wP.classNames=rm.classNames;const VI=wP,WI=[" ","Enter","ArrowUp","ArrowDown"],HI=[" ","Enter"],im="Select",[sm,Ww,GI]=U2(im),[eu,KH]=em(im,[GI,oP]),Hw=oP(),[XI,ma]=eu(im),[KI,ZI]=eu(im),YI=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f}=t,p=Hw(e),[m,v]=x.useState(null),[g,y]=x.useState(null),[w,b]=x.useState(!1),S=V2(u),[A=!1,P]=Cy({prop:r,defaultProp:i,onChange:s}),[C,R]=Cy({prop:o,defaultProp:a,onChange:l}),_=x.useRef(null),T=m?!!m.closest("form"):!0,[D,B]=x.useState(new Set),N=Array.from(D).map(L=>L.props.value).join(";");return x.createElement(QL,p,x.createElement(XI,{required:f,scope:e,trigger:m,onTriggerChange:v,valueNode:g,onValueNodeChange:y,valueNodeHasChildren:w,onValueNodeHasChildrenChange:b,contentId:G2(),value:C,onValueChange:R,open:A,onOpenChange:P,dir:S,triggerPointerDownPosRef:_,disabled:h},x.createElement(sm.Provider,{scope:e},x.createElement(KI,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(L=>{B(z=>new Set(z).add(L))},[]),onNativeOptionRemove:x.useCallback(L=>{B(z=>{const I=new Set(z);return I.delete(L),I})},[])},n)),T?x.createElement(xP,{key:N,"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:C,onChange:L=>R(L.target.value),disabled:h},C===void 0?x.createElement("option",{value:""}):null,Array.from(D)):null))},JI="SelectTrigger",qI=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Hw(n),o=ma(JI,n),a=o.disabled||r,l=Nt(e,o.onTriggerChange),u=Ww(n),[c,d,h]=SP(p=>{const m=u().filter(y=>!y.disabled),v=m.find(y=>y.value===o.value),g=kP(m,p,v);g!==void 0&&o.onValueChange(g.value)}),f=()=>{a||(o.onOpenChange(!0),h())};return x.createElement(eI,Ve({asChild:!0},s),x.createElement(Qt.button,Ve({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},i,{ref:l,onClick:At(i.onClick,p=>{p.currentTarget.focus()}),onPointerDown:At(i.onPointerDown,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(f(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:At(i.onKeyDown,p=>{const m=c.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(m&&p.key===" ")&&WI.includes(p.key)&&(f(),p.preventDefault())})})))}),QI="SelectValue",e3=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o,...a}=t,l=ma(QI,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=Nt(e,l.onValueNodeChange);return os(()=>{u(c)},[u,c]),x.createElement(Qt.span,Ve({},a,{ref:d,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:s)}),t3=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return x.createElement(Qt.span,Ve({"aria-hidden":!0},i,{ref:e}),r||"▼")}),n3=t=>x.createElement(nI,Ve({asChild:!0},t)),$l="SelectContent",r3=x.forwardRef((t,e)=>{const n=ma($l,t.__scopeSelect),[r,i]=x.useState();if(os(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?fa.createPortal(x.createElement(bP,{scope:t.__scopeSelect},x.createElement(sm.Slot,{scope:t.__scopeSelect},x.createElement("div",null,t.children))),s):null}return x.createElement(i3,Ve({},t,{ref:e}))}),Ri=10,[bP,om]=eu($l),i3=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:v,...g}=t,y=ma($l,n),[w,b]=x.useState(null),[S,A]=x.useState(null),P=Nt(e,Q=>b(Q)),[C,R]=x.useState(null),[_,T]=x.useState(null),D=Ww(n),[B,N]=x.useState(!1),L=x.useRef(!1);x.useEffect(()=>{if(w)return lI(w)},[w]),yL();const z=x.useCallback(Q=>{const[ye,..._e]=D().map(xe=>xe.ref.current),[Ce]=_e.slice(-1),ke=document.activeElement;for(const xe of Q)if(xe===ke||(xe==null||xe.scrollIntoView({block:"nearest"}),xe===ye&&S&&(S.scrollTop=0),xe===Ce&&S&&(S.scrollTop=S.scrollHeight),xe==null||xe.focus(),document.activeElement!==ke))return},[D,S]),I=x.useCallback(()=>z([C,w]),[z,C,w]);x.useEffect(()=>{B&&I()},[B,I]);const{onOpenChange:O,triggerPointerDownPosRef:$}=y;x.useEffect(()=>{if(w){let Q={x:0,y:0};const ye=Ce=>{var ke,xe,oe,Te;Q={x:Math.abs(Math.round(Ce.pageX)-((ke=(xe=$.current)===null||xe===void 0?void 0:xe.x)!==null&&ke!==void 0?ke:0)),y:Math.abs(Math.round(Ce.pageY)-((oe=(Te=$.current)===null||Te===void 0?void 0:Te.y)!==null&&oe!==void 0?oe:0))}},_e=Ce=>{Q.x<=10&&Q.y<=10?Ce.preventDefault():w.contains(Ce.target)||O(!1),document.removeEventListener("pointermove",ye),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",_e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",_e,{capture:!0})}}},[w,O,$]),x.useEffect(()=>{const Q=()=>O(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[O]);const[F,X]=SP(Q=>{const ye=D().filter(ke=>!ke.disabled),_e=ye.find(ke=>ke.ref.current===document.activeElement),Ce=kP(ye,Q,_e);Ce&&setTimeout(()=>Ce.ref.current.focus())}),ee=x.useCallback((Q,ye,_e)=>{const Ce=!L.current&&!_e;(y.value!==void 0&&y.value===ye||Ce)&&(R(Q),Ce&&(L.current=!0))},[y.value]),re=x.useCallback(()=>w==null?void 0:w.focus(),[w]),we=x.useCallback((Q,ye,_e)=>{const Ce=!L.current&&!_e;(y.value!==void 0&&y.value===ye||Ce)&&T(Q)},[y.value]),Se=r==="popper"?tS:s3,be=Se===tS?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:v}:{};return x.createElement(bP,{scope:n,content:w,viewport:S,onViewportChange:A,itemRefCallback:ee,selectedItem:C,onItemLeave:re,itemTextRefCallback:we,focusSelectedItem:I,selectedItemText:_,position:r,isPositioned:B,searchRef:F},x.createElement(VI,{as:Ac,allowPinchZoom:!0},x.createElement(vL,{asChild:!0,trapped:y.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:At(i,Q=>{var ye;(ye=y.trigger)===null||ye===void 0||ye.focus({preventScroll:!0}),Q.preventDefault()})},x.createElement(pL,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},x.createElement(Se,Ve({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Q=>Q.preventDefault()},g,be,{onPlaced:()=>N(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:At(g.onKeyDown,Q=>{const ye=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!ye&&Q.key.length===1&&X(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let Ce=D().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const ke=Q.target,xe=Ce.indexOf(ke);Ce=Ce.slice(xe+1)}setTimeout(()=>z(Ce)),Q.preventDefault()}})}))))))}),s3=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=ma($l,n),o=om($l,n),[a,l]=x.useState(null),[u,c]=x.useState(null),d=Nt(e,P=>c(P)),h=Ww(n),f=x.useRef(!1),p=x.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:g,focusSelectedItem:y}=o,w=x.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&m&&v&&g){const P=s.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),R=s.valueNode.getBoundingClientRect(),_=g.getBoundingClientRect();if(s.dir!=="rtl"){const ke=_.left-C.left,xe=R.left-ke,oe=P.left-xe,Te=P.width+oe,St=Math.max(Te,C.width),cn=window.innerWidth-Ri,Fn=Bf(xe,[Ri,cn-St]);a.style.minWidth=Te+"px",a.style.left=Fn+"px"}else{const ke=C.right-_.right,xe=window.innerWidth-R.right-ke,oe=window.innerWidth-P.right-xe,Te=P.width+oe,St=Math.max(Te,C.width),cn=window.innerWidth-Ri,Fn=Bf(xe,[Ri,cn-St]);a.style.minWidth=Te+"px",a.style.right=Fn+"px"}const T=h(),D=window.innerHeight-Ri*2,B=m.scrollHeight,N=window.getComputedStyle(u),L=parseInt(N.borderTopWidth,10),z=parseInt(N.paddingTop,10),I=parseInt(N.borderBottomWidth,10),O=parseInt(N.paddingBottom,10),$=L+z+B+O+I,F=Math.min(v.offsetHeight*5,$),X=window.getComputedStyle(m),ee=parseInt(X.paddingTop,10),re=parseInt(X.paddingBottom,10),we=P.top+P.height/2-Ri,Se=D-we,be=v.offsetHeight/2,Q=v.offsetTop+be,ye=L+z+Q,_e=$-ye;if(ye<=we){const ke=v===T[T.length-1].ref.current;a.style.bottom="0px";const xe=u.clientHeight-m.offsetTop-m.offsetHeight,oe=Math.max(Se,be+(ke?re:0)+xe+I),Te=ye+oe;a.style.height=Te+"px"}else{const ke=v===T[0].ref.current;a.style.top="0px";const oe=Math.max(we,L+m.offsetTop+(ke?ee:0)+be)+_e;a.style.height=oe+"px",m.scrollTop=ye-we+m.offsetTop}a.style.margin=`${Ri}px 0`,a.style.minHeight=F+"px",a.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,m,v,g,s.dir,r]);os(()=>w(),[w]);const[b,S]=x.useState();os(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const A=x.useCallback(P=>{P&&p.current===!0&&(w(),y==null||y(),p.current=!1)},[w,y]);return x.createElement(o3,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:A},x.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b}},x.createElement(Qt.div,Ve({},i,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),tS=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Ri,...s}=t,o=Hw(n);return x.createElement(tI,Ve({},o,s,{ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[o3,a3]=eu($l,{}),nS="SelectViewport",l3=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=om(nS,n),s=a3(nS,n),o=Nt(e,i.onViewportChange),a=x.useRef(0);return x.createElement(x.Fragment,null,x.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),x.createElement(sm.Slot,{scope:n},x.createElement(Qt.div,Ve({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:At(r.onScroll,l=>{const u=l.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&c){const h=Math.abs(a.current-u.scrollTop);if(h>0){const f=window.innerHeight-Ri*2,p=parseFloat(c.style.minHeight),m=parseFloat(c.style.height),v=Math.max(p,m);if(v<f){const g=v+h,y=Math.min(f,g),w=g-y;c.style.height=y+"px",c.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,c.style.justifyContent="flex-end")}}}a.current=u.scrollTop})}))))}),u3="SelectGroup";eu(u3);const Ay="SelectItem",[c3,d3]=eu(Ay),h3=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=ma(Ay,n),l=om(Ay,n),u=a.value===r,[c,d]=x.useState(s??""),[h,f]=x.useState(!1),p=Nt(e,g=>{var y;return(y=l.itemRefCallback)===null||y===void 0?void 0:y.call(l,g,r,i)}),m=G2(),v=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};return x.createElement(c3,{scope:n,value:r,disabled:i,textId:m,isSelected:u,onItemTextChange:x.useCallback(g=>{d(y=>{var w;return y||((w=g==null?void 0:g.textContent)!==null&&w!==void 0?w:"").trim()})},[])},x.createElement(sm.ItemSlot,{scope:n,value:r,disabled:i,textValue:c},x.createElement(Qt.div,Ve({role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:p,onFocus:At(o.onFocus,()=>f(!0)),onBlur:At(o.onBlur,()=>f(!1)),onPointerUp:At(o.onPointerUp,v),onPointerMove:At(o.onPointerMove,g=>{if(i){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}else g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:At(o.onPointerLeave,g=>{if(g.currentTarget===document.activeElement){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}}),onKeyDown:At(o.onKeyDown,g=>{var y;((y=l.searchRef)===null||y===void 0?void 0:y.current)!==""&&g.key===" "||(HI.includes(g.key)&&v(),g.key===" "&&g.preventDefault())})}))))}),eh="SelectItemText",f3=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=ma(eh,n),a=om(eh,n),l=d3(eh,n),u=ZI(eh,n),[c,d]=x.useState(null),h=Nt(e,g=>d(g),l.onItemTextChange,g=>{var y;return(y=a.itemTextRefCallback)===null||y===void 0?void 0:y.call(a,g,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=x.useMemo(()=>x.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},f),[l.disabled,l.value,f]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=u;return os(()=>(m(p),()=>v(p)),[m,v,p]),x.createElement(x.Fragment,null,x.createElement(Qt.span,Ve({id:l.textId},s,{ref:h})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?fa.createPortal(s.children,o.valueNode):null)}),xP=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=x.useRef(null),s=Nt(e,i),o=cP(n);return x.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),x.createElement(iI,{asChild:!0},x.createElement("select",Ve({},r,{ref:s,defaultValue:n})))});xP.displayName="BubbleSelect";function SP(t){const e=ss(t),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function kP(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=p3(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function p3(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const m3=YI,CP=qI,g3=e3,y3=t3,v3=n3,EP=r3,w3=l3,AP=h3,b3=f3,Cg=m3,Eg=g3,Gh=x.forwardRef(({className:t,children:e,...n},r)=>E.jsxs(CP,{ref:r,className:st("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,E.jsx(y3,{asChild:!0,children:E.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));Gh.displayName=CP.displayName;const Xh=x.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>E.jsx(v3,{children:E.jsx(EP,{ref:i,className:st("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...r,children:E.jsx(w3,{className:"p-1",children:e})})}));Xh.displayName=EP.displayName;const Iu=x.forwardRef(({className:t,children:e,...n},r)=>E.jsx(AP,{ref:r,className:st("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:E.jsx(b3,{children:e})}));Iu.displayName=AP.displayName;const PP=["PageUp","PageDown"],RP=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],TP={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},hd="Slider",[Py,x3,S3]=U2(hd),[OP,ZH]=em(hd,[S3]),[k3,am]=OP(hd),C3=x.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,...p}=t,[m,v]=x.useState(null),g=Nt(e,N=>v(N)),y=x.useRef(new Set),w=x.useRef(0),b=o==="horizontal",S=m?!!m.closest("form"):!0,A=b?E3:A3,[P=[],C]=Cy({prop:c,defaultProp:u,onChange:N=>{var L;(L=[...y.current][w.current])===null||L===void 0||L.focus(),d(N)}}),R=x.useRef(P);function _(N){const L=$3(P,N);B(N,L)}function T(N){B(N,w.current)}function D(){const N=R.current[w.current];P[w.current]!==N&&h(P)}function B(N,L,{commit:z}={commit:!1}){const I=z3(s),O=F3(Math.round((N-r)/s)*s+r,I),$=Bf(O,[r,i]);C((F=[])=>{const X=M3(F,$,L);if(B3(X,l*s)){w.current=X.indexOf($);const ee=String(X)!==String(F);return ee&&z&&h(X),ee?X:F}else return F})}return x.createElement(k3,{scope:t.__scopeSlider,disabled:a,min:r,max:i,valueIndexToChangeRef:w,thumbs:y.current,values:P,orientation:o},x.createElement(Py.Provider,{scope:t.__scopeSlider},x.createElement(Py.Slot,{scope:t.__scopeSlider},x.createElement(A,Ve({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:g,onPointerDown:At(p.onPointerDown,()=>{a||(R.current=P)}),min:r,max:i,inverted:f,onSlideStart:a?void 0:_,onSlideMove:a?void 0:T,onSlideEnd:a?void 0:D,onHomeKeyDown:()=>!a&&B(r,0,{commit:!0}),onEndKeyDown:()=>!a&&B(i,P.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:L})=>{if(!a){const O=PP.includes(N.key)||N.shiftKey&&RP.includes(N.key)?10:1,$=w.current,F=P[$],X=s*O*L;B(F+X,$,{commit:!0})}}})))),S&&P.map((N,L)=>x.createElement(_3,{key:L,name:n?n+(P.length>1?"[]":""):void 0,value:N})))}),[NP,_P]=OP(hd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),E3=x.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=x.useState(null),f=Nt(e,w=>h(w)),p=x.useRef(),m=V2(i),v=m==="ltr",g=v&&!s||!v&&s;function y(w){const b=p.current||d.getBoundingClientRect(),S=[0,b.width],P=Gw(S,g?[n,r]:[r,n]);return p.current=b,P(w-b.left)}return x.createElement(NP,{scope:t.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width"},x.createElement(MP,Ve({dir:m,"data-orientation":"horizontal"},c,{ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const b=y(w.clientX);o==null||o(b)},onSlideMove:w=>{const b=y(w.clientX);a==null||a(b)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:w=>{const S=TP[g?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:S?-1:1})}})))}),A3=x.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=x.useRef(null),d=Nt(e,c),h=x.useRef(),f=!i;function p(m){const v=h.current||c.current.getBoundingClientRect(),g=[0,v.height],w=Gw(g,f?[r,n]:[n,r]);return h.current=v,w(m-v.top)}return x.createElement(NP,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1},x.createElement(MP,Ve({"data-orientation":"vertical"},u,{ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=p(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=p(m.clientY);o==null||o(v)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:m=>{const g=TP[f?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:g?-1:1})}})))}),MP=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=am(hd,n);return x.createElement(Qt.span,Ve({},u,{ref:e,onKeyDown:At(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):PP.concat(RP).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:At(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():r(d)}),onPointerMove:At(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:At(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})}))}),P3="SliderTrack",R3=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=am(P3,n);return x.createElement(Qt.span,Ve({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:e}))}),rS="SliderRange",T3=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=am(rS,n),s=_P(rS,n),o=x.useRef(null),a=Nt(e,o),l=i.values.length,u=i.values.map(h=>DP(h,i.min,i.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return x.createElement(Qt.span,Ve({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}}))}),iS="SliderThumb",O3=x.forwardRef((t,e)=>{const n=x3(t.__scopeSlider),[r,i]=x.useState(null),s=Nt(e,a=>i(a)),o=x.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return x.createElement(N3,Ve({},t,{ref:s,index:o}))}),N3=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,...i}=t,s=am(iS,n),o=_P(iS,n),[a,l]=x.useState(null),u=Nt(e,v=>l(v)),c=rP(a),d=s.values[r],h=d===void 0?0:DP(d,s.min,s.max),f=D3(r,s.values.length),p=c==null?void 0:c[o.size],m=p?L3(p,h,o.direction):0;return x.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),x.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${h}% + ${m}px)`}},x.createElement(Py.ItemSlot,{scope:t.__scopeSlider},x.createElement(Qt.span,Ve({role:"slider","aria-label":t["aria-label"]||f,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:u,style:d===void 0?{display:"none"}:t.style,onFocus:At(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})}))))}),_3=t=>{const{value:e,...n}=t,r=x.useRef(null),i=cP(e);return x.useEffect(()=>{const s=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[i,e]),x.createElement("input",Ve({style:{display:"none"}},n,{ref:r,defaultValue:e}))};function M3(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function DP(t,e,n){const s=100/(n-e)*(t-e);return Bf(s,[0,100])}function D3(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function $3(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function L3(t,e,n){const r=t/2,s=Gw([0,50],[0,r]);return(r-s(e)*n)*n}function I3(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function B3(t,e){if(e>0){const n=I3(t);return Math.min(...n)>=e}return!0}function Gw(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function z3(t){return(String(t).split(".")[1]||"").length}function F3(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const $P=C3,j3=R3,U3=T3,V3=O3,Kh=x.forwardRef(({className:t,...e},n)=>E.jsxs($P,{ref:n,className:st("relative flex touch-none select-none items-center",t),...e,children:[E.jsx(j3,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:E.jsx(U3,{className:"absolute h-full bg-mantis-400"})}),E.jsx(V3,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Kh.displayName=$P.displayName;function lm(t,e,n,r,i){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:i;return t===i?n:t}const sS=["en","es"];function Xw(t){return function(n,r,...i){const s=lm(t,`${n}.${r}`,null);if(typeof s=="function")return s(...i);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${r}`)}}const W3=Symbol(),H3=t=>typeof(t==null?void 0:t.then)=="function";function G3(t){let e,n;const r={getItem:(i,s)=>{var o,a;const l=c=>{if(c=c||"",e!==c){try{n=JSON.parse(c)}catch{return s}e=c}return n},u=(a=(o=t())==null?void 0:o.getItem(i))!=null?a:null;return H3(u)?u.then(l):l(u)},setItem:(i,s)=>{var o;return(o=t())==null?void 0:o.setItem(i,JSON.stringify(s))},removeItem:i=>{var s;return(s=t())==null?void 0:s.removeItem(i)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&(r.subscribe=(i,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===i){let u;try{u=JSON.parse(l.newValue||"")}catch{u=o}s(u)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),r}const X3=G3(()=>typeof window<"u"?window.localStorage:void 0);function K3(t,e,n=X3,r){const i=r==null?void 0:r.unstable_getOnInit,s=de(i?n.getItem(t,e):e);return s.onMount=a=>{i||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},de(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===W3?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}var He;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(He||(He={}));var Ry;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Ry||(Ry={}));const ne=He.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Os=t=>{switch(typeof t){case"undefined":return ne.undefined;case"string":return ne.string;case"number":return isNaN(t)?ne.nan:ne.number;case"boolean":return ne.boolean;case"function":return ne.function;case"bigint":return ne.bigint;case"symbol":return ne.symbol;case"object":return Array.isArray(t)?ne.array:t===null?ne.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ne.promise:typeof Map<"u"&&t instanceof Map?ne.map:typeof Set<"u"&&t instanceof Set?ne.set:typeof Date<"u"&&t instanceof Date?ne.date:ne.object;default:return ne.unknown}},H=He.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Z3=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ur extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,He.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ur.create=t=>new Ur(t);const Oc=(t,e)=>{let n;switch(t.code){case H.invalid_type:t.received===ne.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case H.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,He.jsonStringifyReplacer)}`;break;case H.unrecognized_keys:n=`Unrecognized key(s) in object: ${He.joinValues(t.keys,", ")}`;break;case H.invalid_union:n="Invalid input";break;case H.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${He.joinValues(t.options)}`;break;case H.invalid_enum_value:n=`Invalid enum value. Expected ${He.joinValues(t.options)}, received '${t.received}'`;break;case H.invalid_arguments:n="Invalid function arguments";break;case H.invalid_return_type:n="Invalid function return type";break;case H.invalid_date:n="Invalid date";break;case H.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:He.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case H.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case H.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case H.custom:n="Invalid input";break;case H.invalid_intersection_types:n="Intersection results could not be merged";break;case H.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case H.not_finite:n="Number must be finite";break;default:n=e.defaultError,He.assertNever(t)}return{message:n}};let LP=Oc;function Y3(t){LP=t}function Wf(){return LP}const Hf=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},J3=[];function ie(t,e){const n=Hf({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Wf(),Oc].filter(r=>!!r)});t.common.issues.push(n)}class ln{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Pe;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return ln.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Pe;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Pe=Object.freeze({status:"aborted"}),IP=t=>({status:"dirty",value:t}),xn=t=>({status:"valid",value:t}),Ty=t=>t.status==="aborted",Oy=t=>t.status==="dirty",Gf=t=>t.status==="valid",Xf=t=>typeof Promise<"u"&&t instanceof Promise;var he;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(he||(he={}));class xi{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const oS=(t,e)=>{if(Gf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ur(t.common.issues);return this._error=n,this._error}}};function Ne(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class De{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Os(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Os(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ln,ctx:{common:e.parent.common,data:e.data,parsedType:Os(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Xf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Os(e)},s=this._parseSync({data:e,path:i.path,parent:i});return oS(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Os(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Xf(i)?i:Promise.resolve(i));return oS(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:H.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Xr({schema:this,typeName:ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return qi.create(this,this._def)}nullable(){return ia.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Vr.create(this,this._def)}promise(){return Il.create(this,this._def)}or(e){return Dc.create([this,e],this._def)}and(e){return $c.create(this,e,this._def)}transform(e){return new Xr({...Ne(this._def),schema:this,typeName:ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Fc({...Ne(this._def),innerType:this,defaultValue:n,typeName:ve.ZodDefault})}brand(){return new zP({typeName:ve.ZodBranded,type:this,...Ne(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Jf({...Ne(this._def),innerType:this,catchValue:n,typeName:ve.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return fd.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const q3=/^c[^\s-]{8,}$/i,Q3=/^[a-z][a-z0-9]*$/,e5=/[0-9A-HJKMNP-TV-Z]{26}/,t5=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,n5=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,r5=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,i5=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,s5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,o5=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function a5(t,e){return!!((e==="v4"||!e)&&i5.test(t)||(e==="v6"||!e)&&s5.test(t))}class Ir extends De{constructor(){super(...arguments),this._regex=(e,n,r)=>this.refinement(i=>e.test(i),{validation:n,code:H.invalid_string,...he.errToObj(r)}),this.nonempty=e=>this.min(1,he.errToObj(e)),this.trim=()=>new Ir({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Ir({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Ir({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ne.string){const s=this._getOrReturnCtx(e);return ie(s,{code:H.invalid_type,expected:ne.string,received:s.parsedType}),Pe}const r=new ln;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:H.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:H.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?ie(i,{code:H.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ie(i,{code:H.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")n5.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"email",code:H.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")r5.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"emoji",code:H.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")t5.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"uuid",code:H.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")q3.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cuid",code:H.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")Q3.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cuid2",code:H.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")e5.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"ulid",code:H.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ie(i,{validation:"url",code:H.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"regex",code:H.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ie(i,{code:H.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ie(i,{code:H.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ie(i,{code:H.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?o5(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:H.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?a5(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"ip",code:H.invalid_string,message:s.message}),r.dirty()):He.assertNever(s);return{status:r.value,value:e.data}}_addCheck(e){return new Ir({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...he.errToObj(e)})}url(e){return this._addCheck({kind:"url",...he.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...he.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...he.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...he.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...he.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...he.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...he.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...he.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...he.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...he.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...he.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...he.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...he.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...he.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...he.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ir.create=t=>{var e;return new Ir({checks:[],typeName:ve.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ne(t)})};function l5(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class io extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ne.number){const s=this._getOrReturnCtx(e);return ie(s,{code:H.invalid_type,expected:ne.number,received:s.parsedType}),Pe}let r;const i=new ln;for(const s of this._def.checks)s.kind==="int"?He.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ie(r,{code:H.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?l5(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ie(r,{code:H.not_finite,message:s.message}),i.dirty()):He.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,r,i){return new io({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:he.toString(i)}]})}_addCheck(e){return new io({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:he.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:he.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:he.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:he.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&He.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}io.create=t=>new io({checks:[],typeName:ve.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ne(t)});class so extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ne.bigint){const s=this._getOrReturnCtx(e);return ie(s,{code:H.invalid_type,expected:ne.bigint,received:s.parsedType}),Pe}let r;const i=new ln;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):He.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,r,i){return new so({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:he.toString(i)}]})}_addCheck(e){return new so({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}so.create=t=>{var e;return new so({checks:[],typeName:ve.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ne(t)})};class Nc extends De{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ne.boolean){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:ne.boolean,received:r.parsedType}),Pe}return xn(e.data)}}Nc.create=t=>new Nc({typeName:ve.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ne(t)});class na extends De{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ne.date){const s=this._getOrReturnCtx(e);return ie(s,{code:H.invalid_type,expected:ne.date,received:s.parsedType}),Pe}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ie(s,{code:H.invalid_date}),Pe}const r=new ln;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:H.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:H.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):He.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new na({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:he.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:he.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}na.create=t=>new na({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ve.ZodDate,...Ne(t)});class Kf extends De{_parse(e){if(this._getType(e)!==ne.symbol){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:ne.symbol,received:r.parsedType}),Pe}return xn(e.data)}}Kf.create=t=>new Kf({typeName:ve.ZodSymbol,...Ne(t)});class _c extends De{_parse(e){if(this._getType(e)!==ne.undefined){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:ne.undefined,received:r.parsedType}),Pe}return xn(e.data)}}_c.create=t=>new _c({typeName:ve.ZodUndefined,...Ne(t)});class Mc extends De{_parse(e){if(this._getType(e)!==ne.null){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:ne.null,received:r.parsedType}),Pe}return xn(e.data)}}Mc.create=t=>new Mc({typeName:ve.ZodNull,...Ne(t)});class Ll extends De{constructor(){super(...arguments),this._any=!0}_parse(e){return xn(e.data)}}Ll.create=t=>new Ll({typeName:ve.ZodAny,...Ne(t)});class Ho extends De{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xn(e.data)}}Ho.create=t=>new Ho({typeName:ve.ZodUnknown,...Ne(t)});class ls extends De{_parse(e){const n=this._getOrReturnCtx(e);return ie(n,{code:H.invalid_type,expected:ne.never,received:n.parsedType}),Pe}}ls.create=t=>new ls({typeName:ve.ZodNever,...Ne(t)});class Zf extends De{_parse(e){if(this._getType(e)!==ne.undefined){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:ne.void,received:r.parsedType}),Pe}return xn(e.data)}}Zf.create=t=>new Zf({typeName:ve.ZodVoid,...Ne(t)});class Vr extends De{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ne.array)return ie(n,{code:H.invalid_type,expected:ne.array,received:n.parsedType}),Pe;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(ie(n,{code:o?H.too_big:H.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ie(n,{code:H.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ie(n,{code:H.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new xi(n,o,n.path,a)))).then(o=>ln.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new xi(n,o,n.path,a)));return ln.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Vr({...this._def,minLength:{value:e,message:he.toString(n)}})}max(e,n){return new Vr({...this._def,maxLength:{value:e,message:he.toString(n)}})}length(e,n){return new Vr({...this._def,exactLength:{value:e,message:he.toString(n)}})}nonempty(e){return this.min(1,e)}}Vr.create=(t,e)=>new Vr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ve.ZodArray,...Ne(e)});function _a(t){if(t instanceof ht){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=qi.create(_a(r))}return new ht({...t._def,shape:()=>e})}else return t instanceof Vr?new Vr({...t._def,type:_a(t.element)}):t instanceof qi?qi.create(_a(t.unwrap())):t instanceof ia?ia.create(_a(t.unwrap())):t instanceof Si?Si.create(t.items.map(e=>_a(e))):t}class ht extends De{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=He.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ne.object){const u=this._getOrReturnCtx(e);return ie(u,{code:H.invalid_type,expected:ne.object,received:u.parsedType}),Pe}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ls&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new xi(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof ls){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")a.length>0&&(ie(i,{code:H.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new xi(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key;u.push({key:d,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>ln.mergeObjectSync(r,u)):ln.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return he.errToObj,new ht({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=he.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new ht({...this._def,unknownKeys:"strip"})}passthrough(){return new ht({...this._def,unknownKeys:"passthrough"})}extend(e){return new ht({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ht({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ve.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ht({...this._def,catchall:e})}pick(e){const n={};return He.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new ht({...this._def,shape:()=>n})}omit(e){const n={};return He.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new ht({...this._def,shape:()=>n})}deepPartial(){return _a(this)}partial(e){const n={};return He.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new ht({...this._def,shape:()=>n})}required(e){const n={};return He.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof qi;)s=s._def.innerType;n[r]=s}}),new ht({...this._def,shape:()=>n})}keyof(){return BP(He.objectKeys(this.shape))}}ht.create=(t,e)=>new ht({shape:()=>t,unknownKeys:"strip",catchall:ls.create(),typeName:ve.ZodObject,...Ne(e)});ht.strictCreate=(t,e)=>new ht({shape:()=>t,unknownKeys:"strict",catchall:ls.create(),typeName:ve.ZodObject,...Ne(e)});ht.lazycreate=(t,e)=>new ht({shape:t,unknownKeys:"strip",catchall:ls.create(),typeName:ve.ZodObject,...Ne(e)});class Dc extends De{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Ur(a.ctx.common.issues));return ie(n,{code:H.invalid_union,unionErrors:o}),Pe}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Ur(l));return ie(n,{code:H.invalid_union,unionErrors:a}),Pe}}get options(){return this._def.options}}Dc.create=(t,e)=>new Dc({options:t,typeName:ve.ZodUnion,...Ne(e)});const Zh=t=>t instanceof Ic?Zh(t.schema):t instanceof Xr?Zh(t.innerType()):t instanceof Bc?[t.value]:t instanceof oo?t.options:t instanceof zc?Object.keys(t.enum):t instanceof Fc?Zh(t._def.innerType):t instanceof _c?[void 0]:t instanceof Mc?[null]:null;class um extends De{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ne.object)return ie(n,{code:H.invalid_type,expected:ne.object,received:n.parsedType}),Pe;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(ie(n,{code:H.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=Zh(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new um({typeName:ve.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Ne(r)})}}function Ny(t,e){const n=Os(t),r=Os(e);if(t===e)return{valid:!0,data:t};if(n===ne.object&&r===ne.object){const i=He.objectKeys(e),s=He.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=Ny(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ne.array&&r===ne.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=Ny(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===ne.date&&r===ne.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class $c extends De{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(Ty(s)||Ty(o))return Pe;const a=Ny(s.value,o.value);return a.valid?((Oy(s)||Oy(o))&&n.dirty(),{status:n.value,value:a.data}):(ie(r,{code:H.invalid_intersection_types}),Pe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}$c.create=(t,e,n)=>new $c({left:t,right:e,typeName:ve.ZodIntersection,...Ne(n)});class Si extends De{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.array)return ie(r,{code:H.invalid_type,expected:ne.array,received:r.parsedType}),Pe;if(r.data.length<this._def.items.length)return ie(r,{code:H.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pe;!this._def.rest&&r.data.length>this._def.items.length&&(ie(r,{code:H.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new xi(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>ln.mergeArray(n,o)):ln.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Si({...this._def,rest:e})}}Si.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Si({items:t,typeName:ve.ZodTuple,rest:null,...Ne(e)})};class Lc extends De{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.object)return ie(r,{code:H.invalid_type,expected:ne.object,received:r.parsedType}),Pe;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new xi(r,a,r.path,a)),value:o._parse(new xi(r,r.data[a],r.path,a))});return r.common.async?ln.mergeObjectAsync(n,i):ln.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof De?new Lc({keyType:e,valueType:n,typeName:ve.ZodRecord,...Ne(r)}):new Lc({keyType:Ir.create(),valueType:e,typeName:ve.ZodRecord,...Ne(n)})}}class Yf extends De{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.map)return ie(r,{code:H.invalid_type,expected:ne.map,received:r.parsedType}),Pe;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],u)=>({key:i._parse(new xi(r,a,r.path,[u,"key"])),value:s._parse(new xi(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Pe;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Pe;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}Yf.create=(t,e,n)=>new Yf({valueType:e,keyType:t,typeName:ve.ZodMap,...Ne(n)});class ra extends De{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.set)return ie(r,{code:H.invalid_type,expected:ne.set,received:r.parsedType}),Pe;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ie(r,{code:H.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ie(r,{code:H.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Pe;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>s._parse(new xi(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new ra({...this._def,minSize:{value:e,message:he.toString(n)}})}max(e,n){return new ra({...this._def,maxSize:{value:e,message:he.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ra.create=(t,e)=>new ra({valueType:t,minSize:null,maxSize:null,typeName:ve.ZodSet,...Ne(e)});class ll extends De{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ne.function)return ie(n,{code:H.invalid_type,expected:ne.function,received:n.parsedType}),Pe;function r(a,l){return Hf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Wf(),Oc].filter(u=>!!u),issueData:{code:H.invalid_arguments,argumentsError:l}})}function i(a,l){return Hf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Wf(),Oc].filter(u=>!!u),issueData:{code:H.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof Il?xn(async(...a)=>{const l=new Ur([]),u=await this._def.args.parseAsync(a,s).catch(h=>{throw l.addIssue(r(a,h)),l}),c=await o(...u);return await this._def.returns._def.type.parseAsync(c,s).catch(h=>{throw l.addIssue(i(c,h)),l})}):xn((...a)=>{const l=this._def.args.safeParse(a,s);if(!l.success)throw new Ur([r(a,l.error)]);const u=o(...l.data),c=this._def.returns.safeParse(u,s);if(!c.success)throw new Ur([i(u,c.error)]);return c.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ll({...this._def,args:Si.create(e).rest(Ho.create())})}returns(e){return new ll({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new ll({args:e||Si.create([]).rest(Ho.create()),returns:n||Ho.create(),typeName:ve.ZodFunction,...Ne(r)})}}class Ic extends De{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ic.create=(t,e)=>new Ic({getter:t,typeName:ve.ZodLazy,...Ne(e)});class Bc extends De{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ie(n,{received:n.data,code:H.invalid_literal,expected:this._def.value}),Pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Bc.create=(t,e)=>new Bc({value:t,typeName:ve.ZodLiteral,...Ne(e)});function BP(t,e){return new oo({values:t,typeName:ve.ZodEnum,...Ne(e)})}class oo extends De{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ie(n,{expected:He.joinValues(r),received:n.parsedType,code:H.invalid_type}),Pe}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return ie(n,{received:n.data,code:H.invalid_enum_value,options:r}),Pe}return xn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return oo.create(e)}exclude(e){return oo.create(this.options.filter(n=>!e.includes(n)))}}oo.create=BP;class zc extends De{_parse(e){const n=He.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ne.string&&r.parsedType!==ne.number){const i=He.objectValues(n);return ie(r,{expected:He.joinValues(i),received:r.parsedType,code:H.invalid_type}),Pe}if(n.indexOf(e.data)===-1){const i=He.objectValues(n);return ie(r,{received:r.data,code:H.invalid_enum_value,options:i}),Pe}return xn(e.data)}get enum(){return this._def.values}}zc.create=(t,e)=>new zc({values:t,typeName:ve.ZodNativeEnum,...Ne(e)});class Il extends De{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ne.promise&&n.common.async===!1)return ie(n,{code:H.invalid_type,expected:ne.promise,received:n.parsedType}),Pe;const r=n.parsedType===ne.promise?n.data:Promise.resolve(n.data);return xn(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Il.create=(t,e)=>new Il({type:t,typeName:ve.ZodPromise,...Ne(e)});class Xr extends De{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(r.data);return r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}const s={addIssue:o=>{ie(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Pe:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Pe:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Gf(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Gf(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);He.assertNever(i)}}Xr.create=(t,e,n)=>new Xr({schema:t,typeName:ve.ZodEffects,effect:e,...Ne(n)});Xr.createWithPreprocess=(t,e,n)=>new Xr({schema:e,effect:{type:"preprocess",transform:t},typeName:ve.ZodEffects,...Ne(n)});class qi extends De{_parse(e){return this._getType(e)===ne.undefined?xn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qi.create=(t,e)=>new qi({innerType:t,typeName:ve.ZodOptional,...Ne(e)});class ia extends De{_parse(e){return this._getType(e)===ne.null?xn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ia.create=(t,e)=>new ia({innerType:t,typeName:ve.ZodNullable,...Ne(e)});class Fc extends De{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ne.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Fc.create=(t,e)=>new Fc({innerType:t,typeName:ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ne(e)});class Jf extends De{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Xf(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ur(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ur(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Jf.create=(t,e)=>new Jf({innerType:t,typeName:ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ne(e)});class qf extends De{_parse(e){if(this._getType(e)!==ne.nan){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:ne.nan,received:r.parsedType}),Pe}return{status:"valid",value:e.data}}}qf.create=t=>new qf({typeName:ve.ZodNaN,...Ne(t)});const u5=Symbol("zod_brand");class zP extends De{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class fd extends De{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Pe:s.status==="dirty"?(n.dirty(),IP(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Pe:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new fd({in:e,out:n,typeName:ve.ZodPipeline})}}const FP=(t,e={},n)=>t?Ll.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...u,fatal:l})}}):Ll.create(),c5={object:ht.lazycreate};var ve;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(ve||(ve={}));const d5=(t,e={message:`Input not instance of ${t.name}`})=>FP(n=>n instanceof t,e),jP=Ir.create,UP=io.create,h5=qf.create,f5=so.create,VP=Nc.create,p5=na.create,m5=Kf.create,g5=_c.create,y5=Mc.create,v5=Ll.create,w5=Ho.create,b5=ls.create,x5=Zf.create,S5=Vr.create,k5=ht.create,C5=ht.strictCreate,E5=Dc.create,A5=um.create,P5=$c.create,R5=Si.create,T5=Lc.create,O5=Yf.create,N5=ra.create,_5=ll.create,M5=Ic.create,D5=Bc.create,$5=oo.create,L5=zc.create,I5=Il.create,aS=Xr.create,B5=qi.create,z5=ia.create,F5=Xr.createWithPreprocess,j5=fd.create,U5=()=>jP().optional(),V5=()=>UP().optional(),W5=()=>VP().optional(),H5={string:t=>Ir.create({...t,coerce:!0}),number:t=>io.create({...t,coerce:!0}),boolean:t=>Nc.create({...t,coerce:!0}),bigint:t=>so.create({...t,coerce:!0}),date:t=>na.create({...t,coerce:!0})},G5=Pe;var xo=Object.freeze({__proto__:null,defaultErrorMap:Oc,setErrorMap:Y3,getErrorMap:Wf,makeIssue:Hf,EMPTY_PATH:J3,addIssueToContext:ie,ParseStatus:ln,INVALID:Pe,DIRTY:IP,OK:xn,isAborted:Ty,isDirty:Oy,isValid:Gf,isAsync:Xf,get util(){return He},get objectUtil(){return Ry},ZodParsedType:ne,getParsedType:Os,ZodType:De,ZodString:Ir,ZodNumber:io,ZodBigInt:so,ZodBoolean:Nc,ZodDate:na,ZodSymbol:Kf,ZodUndefined:_c,ZodNull:Mc,ZodAny:Ll,ZodUnknown:Ho,ZodNever:ls,ZodVoid:Zf,ZodArray:Vr,ZodObject:ht,ZodUnion:Dc,ZodDiscriminatedUnion:um,ZodIntersection:$c,ZodTuple:Si,ZodRecord:Lc,ZodMap:Yf,ZodSet:ra,ZodFunction:ll,ZodLazy:Ic,ZodLiteral:Bc,ZodEnum:oo,ZodNativeEnum:zc,ZodPromise:Il,ZodEffects:Xr,ZodTransformer:Xr,ZodOptional:qi,ZodNullable:ia,ZodDefault:Fc,ZodCatch:Jf,ZodNaN:qf,BRAND:u5,ZodBranded:zP,ZodPipeline:fd,custom:FP,Schema:De,ZodSchema:De,late:c5,get ZodFirstPartyTypeKind(){return ve},coerce:H5,any:v5,array:S5,bigint:f5,boolean:VP,date:p5,discriminatedUnion:A5,effect:aS,enum:$5,function:_5,instanceof:d5,intersection:P5,lazy:M5,literal:D5,map:O5,nan:h5,nativeEnum:L5,never:b5,null:y5,nullable:z5,number:UP,object:k5,oboolean:W5,onumber:V5,optional:B5,ostring:U5,pipeline:j5,preprocess:F5,promise:I5,record:T5,set:N5,strictObject:C5,string:jP,symbol:m5,transformer:aS,tuple:R5,undefined:g5,union:E5,unknown:w5,void:x5,NEVER:G5,ZodIssueCode:H,quotelessJson:Z3,ZodError:Ur});const G=Iw();function X5(t){return E.jsx(y$,{store:G,children:t.children})}const WP=["randomize","clean","unchanged"],HP=["pio-switches-and-leds","pio-printer","handshake"],_y=xo.object({language:xo.enum(sS).catch(()=>{const t=navigator.language.toLowerCase();for(const e of sS)if(t.startsWith(e))return e;return"en"}),dataOnLoad:xo.enum(WP).catch("randomize"),devices:xo.enum(HP).catch("pio-switches-and-leds"),executionUnit:xo.number().int().min(5).max(500).catch(150),clockSpeed:xo.number().int().min(10).max(1e3).catch(30),printerSpeed:xo.number().int().min(10).max(1e3).catch(1e3)}),K5=_y.parse({}),tu=K3("vonsim-settings",K5,{getItem(t,e){try{const n=localStorage.getItem(t);return _y.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const r=i=>{if(i.storageArea===localStorage&&i.key===t){let s;try{s=_y.parse(JSON.parse(i.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",r),()=>window==null?void 0:window.removeEventListener("storage",r)}},{unstable_getOnInit:!0}),us=()=>G.get(tu),Z5=()=>b2(tu),Y5=de(t=>t(tu).language),J5=()=>wi(Y5);de(t=>t(tu).dataOnLoad);de(t=>t(tu).devices);const q5=de(t=>{const e=t(tu);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}}),Q5=()=>wi(q5);function GP(t){const e=t.charCodeAt(0);return M.fitsUnsigned(e,8)?e:null}function Kw(t){return M.fitsUnsigned(t,8)?String.fromCharCode(t):null}var dt,wt;const ze=class ze{constructor(e,n){ce(this,dt,void 0);ce(this,wt,void 0);j(this,dt,e|0),j(this,wt,n)}get size(){return k(this,wt)}is8bits(){return k(this,wt)===8}is16bits(){return k(this,wt)===16}get unsigned(){return k(this,dt)}get signed(){return k(this,dt)<=ze.maxSignedValue(k(this,wt))?k(this,dt):k(this,dt)-(ze.maxValue(k(this,wt))+1)}get low(){return this.is8bits()?this:ze.fromUnsigned(k(this,dt)&ze.maxValue(8),8)}get high(){return this.is8bits()?new ze(0,8):ze.fromUnsigned(k(this,dt)>>8&ze.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return ze.fromUnsigned(k(this,dt)&~ze.maxValue(8)|e.unsigned,k(this,wt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return ze.fromUnsigned(k(this,dt)&ze.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=k(this,wt))throw new RangeError(`Index ${e} out of bounds for byte of size ${k(this,wt)}`);return(k(this,dt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=k(this,wt))throw new RangeError(`Index ${e} out of bounds for byte of size ${k(this,wt)}`);return n?ze.fromUnsigned(k(this,dt)|1<<e,k(this,wt)):ze.fromUnsigned(k(this,dt)&~(1<<e),k(this,wt))}add(e){return e=Number(e),ze.fromUnsigned(k(this,dt)+e,k(this,wt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:k(this,dt)===k(e,dt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(k(this,wt));for(let n=0;n<k(this,wt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return k(this,dt).toString(16).padStart(k(this,wt)/4,"0").toUpperCase();case"bin":return k(this,dt).toString(2).padStart(k(this,wt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return k(this,wt)===8?Kw(k(this,dt))??"---":this.low.toString("ascii")+this.high.toString("ascii")}}toJSON(){return k(this,dt)}valueOf(){return k(this,dt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=ze.minSignedValue(n)&&e<=ze.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=ze.minValue()&&e<=ze.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=ze.minSignedValue(n)&&e<=ze.maxSignedValue(n)}static fromUnsigned(e,n){if(!ze.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new ze(e,n)}static fromSigned(e,n){if(!ze.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new ze(e+ze.maxValue(n)+1,n):new ze(e,n)}static fromNumber(e,n){return e<0?ze.fromSigned(e,n):ze.fromUnsigned(e,n)}static fromChar(e){const n=GP(e)??-1;return ze.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*ze.maxValue(e));return new ze(n,e)}static zero(e){return new ze(0,e)}};dt=new WeakMap,wt=new WeakMap;let M=ze;var Mi;const As=class As{constructor(e){ce(this,Mi,void 0);j(this,Mi,e)}get value(){return k(this,Mi).unsigned}get byte(){return k(this,Mi)}toString(e=!0){let n=k(this,Mi).toString("hex");return e&&(n+="h"),n}toJSON(){return k(this,Mi).toJSON()}valueOf(){return k(this,Mi).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=As.MIN_ADDRESS&&e<=As.MAX_ADDRESS}static from(e){if(e=Number(e),!As.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=M.fromUnsigned(e,16);return new As(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let r=e.toString(16).padStart(4,"0").toUpperCase();return n&&(r+="h"),r}};Mi=new WeakMap,Y(As,"MIN_ADDRESS",0),Y(As,"MAX_ADDRESS",32767);let me=As;var Di;const Ps=class Ps{constructor(e){ce(this,Di,void 0);j(this,Di,e)}get value(){return k(this,Di).unsigned}get byte(){return k(this,Di)}toString(e=!0){let n=k(this,Di).toString("hex");return e&&(n+="h"),n}toJSON(){return k(this,Di).toJSON()}valueOf(){return k(this,Di).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ps.MIN_ADDRESS&&e<=Ps.MAX_ADDRESS}static from(e){if(e=Number(e),!Ps.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=M.fromUnsigned(e,8);return new Ps(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let r=e.toString(16).padStart(2,"0").toUpperCase();return n&&(r+="h"),r}};Di=new WeakMap,Y(Ps,"MIN_ADDRESS",0),Y(Ps,"MAX_ADDRESS",127);let Bn=Ps;const e4=me.from(me.MAX_ADDRESS).toString(),t4=new Intl.NumberFormat("en",{style:"decimal"}).format,n4={clean:"Clean",computer:"Computer",frequency:"Frequency",hertz:t=>`${t4(t)} Hz`,update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},cpu:{name:"CPU","general-registers":"General-purpose registers","special-registers":"Special registers",register:t=>`${t} register`,alu:"ALU",memory:{name:"Memory",cell:t=>`Cell ${me.format(t)}`,"start-address":"Start address","start-address-must-be-integer":"Start address must be an integer.","start-address-too-big":`Start address must be less or equal to ${e4}.`},interrups:{label:"Interrupts",enabled:"Enabled",disabled:"Disabled"}},devices:{internal:{label:"Internal devices",handshake:{name:"Handshake",data:"Data",state:"State"},pic:{name:"PIC",state:"State",connections:"Connections"},pio:{name:"PIO",data:"Data",config:"Configuration",port:t=>`Port ${t}`},timer:"Timer"},external:{label:"External devices",console:"Console",f10:{name:"F10",interrupt:"Interrupt"},leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},switches:"Switches"},ioRegister:(t,e)=>`${t} register (${Bn.format(e)})`},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},runner:{action:{start:"Start",debug:"Debug","run-until-halt":"Finish",step:"Next",stop:"Abort"},state:{running:"Running",paused:"Paused","waiting-for-input":"Wating for key",stopped:"Stopped"}},settings:{title:"Settings",language:{label:"Language"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which preset of devices to use.","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer (PIO)",handshake:"Printer (Handshake)"},speeds:{label:"Speeds",executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"}},footer:{documentation:"Documentation","report-issue":"Report an issue",copyright:"III-LIDI, FI, UNLP"}},r4=me.from(me.MAX_ADDRESS).toString(),i4=new Intl.NumberFormat("es",{style:"decimal"}).format,s4={clean:"Limpiar",computer:"Computadora",frequency:"Frecuencia",hertz:t=>`${i4(t)} Hz`,update:{"update-available":"¡Hay una nueva versión disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},cpu:{name:"CPU","general-registers":"Registros de propósito general","special-registers":"Registros especiales",register:t=>`Registro ${t}`,alu:"ALU",memory:{name:"Memoria",cell:t=>`Celda ${me.format(t)}`,"start-address":"Dirección de inicio","start-address-must-be-integer":"El valor de inicio debe ser un número entero.","start-address-too-big":`El valor de inicio debe ser menor o igual a ${r4}.`},interrups:{label:"Interrupciones",enabled:"Habilitadas",disabled:"Inhabilitadas"}},devices:{internal:{label:"Dispositivos internos",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:{name:"PIC",state:"Estado",connections:"Conexiones"},pio:{name:"PIO",data:"Datos",config:"Configuración",port:t=>`Puerto ${t}`},timer:"Timer"},external:{label:"Dispositivos externos",console:"Consola",f10:{name:"F10",interrupt:"Interrumpir"},leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},switches:"Teclas"},ioRegister:(t,e)=>`Registro ${t} (${Bn.format(e)})`},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`},runner:{action:{start:"Ejecutar",debug:"Depurar","run-until-halt":"Finalizar",step:"Siguiente",stop:"Abortar"},state:{running:"Ejecutando",paused:"Pausado","waiting-for-input":"Esperando tecla",stopped:"Detenido"}},settings:{title:"Configuración",language:{label:"Idioma"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué conjunto de dispositivos usar.","pio-switches-and-leds":"Teclas y luces","pio-printer":"Impresora (PIO)",handshake:"Impresora (Handshake)"},speeds:{label:"Velocidades",executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"}},footer:{documentation:"Documentación","report-issue":"Reportar un error",copyright:"III-LIDI, FI, UNLP"}},cm=Xw({en:n4,es:s4});function nu(){const t=J5();return(e,...n)=>cm(t,e,...n)}const XP=de(!1);function o4({className:t}){const e=nu(),[n,r]=Z5();return E.jsxs("div",{className:t,children:[E.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[E.jsx("span",{className:"icon-[lucide--settings] h-6 w-6"})," ",e("settings.title")]}),E.jsxs(Aa,{children:[E.jsx(Pa,{children:E.jsxs(Ra,{children:[E.jsx("span",{className:"icon-[lucide--languages] h-6 w-6"}),e("settings.language.label")]})}),E.jsxs(Cg,{value:n.language,onValueChange:i=>r(s=>({...s,language:i})),children:[E.jsx(Gh,{className:"w-32",children:E.jsx(Eg,{})}),E.jsxs(Xh,{children:[E.jsx(Iu,{value:"en",children:E.jsxs("span",{className:"inline-flex items-center gap-2",children:[E.jsx("span",{className:"icon-[circle-flags--uk] h-4 w-4"})," English"]})}),E.jsx(Iu,{value:"es",children:E.jsxs("span",{className:"inline-flex items-center gap-2",children:[E.jsx("span",{className:"icon-[circle-flags--ar] h-4 w-4"})," Español"]})})]})]})]}),E.jsx("hr",{className:"border-stone-600"}),E.jsxs(Aa,{children:[E.jsxs(Pa,{children:[E.jsxs(Ra,{children:[E.jsx("span",{className:"icon-[lucide--memory-stick] h-6 w-6"}),e("settings.dataOnLoad.label")]}),E.jsx(lS,{children:e("settings.dataOnLoad.description")})]}),E.jsxs(Cg,{value:n.dataOnLoad,onValueChange:i=>r(s=>({...s,dataOnLoad:i})),children:[E.jsx(Gh,{className:"w-32 min-w-[theme(width.32)]",children:E.jsx(Eg,{})}),E.jsx(Xh,{children:WP.map(i=>E.jsx(Iu,{value:i,children:e(`settings.dataOnLoad.${i}`)},i))})]})]}),E.jsxs(Aa,{children:[E.jsxs(Pa,{children:[E.jsxs(Ra,{children:[E.jsx("span",{className:"icon-[lucide--monitor-smartphone] h-6 w-6"}),e("settings.devices.label")]}),E.jsx(lS,{children:e("settings.devices.description")})]}),E.jsxs(Cg,{value:n.devices,onValueChange:i=>r(s=>({...s,devices:i})),children:[E.jsx(Gh,{className:"w-48 min-w-[theme(width.48)]",children:E.jsx(Eg,{})}),E.jsx(Xh,{children:HP.map(i=>E.jsx(Iu,{value:i,children:e(`settings.devices.${i}`)},i))})]})]}),E.jsx("hr",{className:"border-stone-600"}),E.jsxs(Aa,{children:[E.jsx(Pa,{children:E.jsxs(Ra,{children:[E.jsx("span",{className:"icon-[lucide--gauge] h-6 w-6"}),e("settings.speeds.executionUnit")]})}),E.jsx(Kh,{className:"w-44",value:[500-n.executionUnit],onValueChange:i=>r(s=>({...s,executionUnit:500-i[0]})),min:0,max:495,step:1})]}),E.jsxs(Aa,{children:[E.jsx(Pa,{children:E.jsxs(Ra,{children:[E.jsx("span",{className:"icon-[lucide--clock] h-6 w-6"}),e("settings.speeds.clockSpeed")]})}),E.jsx(Kh,{className:"w-44",value:[1e3-n.clockSpeed],onValueChange:i=>r(s=>({...s,clockSpeed:1e3-i[0]})),min:0,max:990,step:10})]}),E.jsxs(Aa,{children:[E.jsx(Pa,{children:E.jsxs(Ra,{children:[E.jsx("span",{className:"icon-[lucide--printer] h-6 w-6"}),e("settings.speeds.printerSpeed")]})}),E.jsx(Kh,{className:"w-44",value:[1e3-n.printerSpeed],onValueChange:i=>r(s=>({...s,printerSpeed:1e3-i[0]})),min:0,max:990,step:10})]})]})}function Aa({children:t}){return E.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Pa({children:t}){return E.jsx("div",{className:"grow",children:t})}function Ra({children:t}){return E.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function lS({children:t}){return E.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function a4(){return tL("(max-width: 1024px)")}function l4(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=KP(e))&&(r&&(r+=" "),r+=n);return r}function KP(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=KP(t[r]))&&(n&&(n+=" "),n+=e);return n}var Zw="-";function u4(t){var e=d4(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var l=a.split(Zw);return l[0]===""&&l.length!==1&&l.shift(),ZP(l,e)||c4(a)}function o(a,l){var u=n[a]||[];return l&&i[a]?[].concat(u,i[a]):u}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function ZP(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),i=r?ZP(t.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=t.join(Zw);return(o=e.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var uS=/^\[(.+)\]$/;function c4(t){if(uS.test(t)){var e=uS.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function d4(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=f4(Object.entries(t.classGroups),n);return i.forEach(function(s){var o=s[0],a=s[1];My(a,r,o,e)}),r}function My(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var s=i===""?e:cS(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(h4(i)){My(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];My(l,cS(e,a),n,r)})})}function cS(t,e){var n=t;return e.split(Zw).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function h4(t){return t.isThemeGetter}function f4(t,e){return e?t.map(function(n){var r=n[0],i=n[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],u=a[1];return[e+l,u]})):o});return[r,s]}):t}function p4(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):i(o,a)}}}var YP="!";function m4(t){var e=t.separator||":",n=e.length===1,r=e[0],i=e.length;return function(o){for(var a=[],l=0,u=0,c,d=0;d<o.length;d++){var h=o[d];if(l===0){if(h===r&&(n||o.slice(d,d+i)===e)){a.push(o.slice(u,d)),u=d+i;continue}if(h==="/"){c=d;continue}}h==="["?l++:h==="]"&&l--}var f=a.length===0?o:o.substring(u),p=f.startsWith(YP),m=p?f.substring(1):f,v=c&&c>u?c-u:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:v}}}function g4(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function y4(t){return{cache:p4(t.cacheSize),splitModifiers:m4(t),...u4(t)}}var v4=/\s+/;function w4(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(v4).map(function(o){var a=n(o),l=a.modifiers,u=a.hasImportantModifier,c=a.baseClassName,d=a.maybePostfixModifierPosition,h=r(d?c.substring(0,d):c),f=!!d;if(!h){if(!d)return{isTailwindClass:!1,originalClassName:o};if(h=r(c),!h)return{isTailwindClass:!1,originalClassName:o};f=!1}var p=g4(l).join(":"),m=u?p+YP:p;return{isTailwindClass:!0,modifierId:m,classGroupId:h,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,u=o.hasPostfixModifier,c=a+l;return s.has(c)?!1:(s.add(c),i(l,u).forEach(function(d){return s.add(a+d)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function b4(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,s,o=a;function a(u){var c=e[0],d=e.slice(1),h=d.reduce(function(f,p){return p(f)},c());return r=y4(h),i=r.cache.get,s=r.cache.set,o=l,l(u)}function l(u){var c=i(u);if(c)return c;var d=w4(u,r);return s(u,d),d}return function(){return o(l4.apply(null,arguments))}}function tt(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var JP=/^\[(?:([a-z-]+):)?(.+)\]$/i,x4=/^\d+\/\d+$/,S4=new Set(["px","full","screen"]),k4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,C4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E4=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Pr(t){return Lo(t)||S4.has(t)||x4.test(t)||Dy(t)}function Dy(t){return ga(t,"length",N4)}function A4(t){return ga(t,"size",qP)}function P4(t){return ga(t,"position",qP)}function R4(t){return ga(t,"url",_4)}function th(t){return ga(t,"number",Lo)}function Lo(t){return!Number.isNaN(Number(t))}function T4(t){return t.endsWith("%")&&Lo(t.slice(0,-1))}function yu(t){return dS(t)||ga(t,"number",dS)}function $e(t){return JP.test(t)}function vu(){return!0}function gs(t){return k4.test(t)}function O4(t){return ga(t,"",M4)}function ga(t,e,n){var r=JP.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function N4(t){return C4.test(t)}function qP(){return!1}function _4(t){return t.startsWith("url(")}function dS(t){return Number.isInteger(Number(t))}function M4(t){return E4.test(t)}function D4(){var t=tt("colors"),e=tt("spacing"),n=tt("blur"),r=tt("brightness"),i=tt("borderColor"),s=tt("borderRadius"),o=tt("borderSpacing"),a=tt("borderWidth"),l=tt("contrast"),u=tt("grayscale"),c=tt("hueRotate"),d=tt("invert"),h=tt("gap"),f=tt("gradientColorStops"),p=tt("gradientColorStopPositions"),m=tt("inset"),v=tt("margin"),g=tt("opacity"),y=tt("padding"),w=tt("saturate"),b=tt("scale"),S=tt("sepia"),A=tt("skew"),P=tt("space"),C=tt("translate"),R=function(){return["auto","contain","none"]},_=function(){return["auto","hidden","clip","visible","scroll"]},T=function(){return["auto",$e,e]},D=function(){return[$e,e]},B=function(){return["",Pr]},N=function(){return["auto",Lo,$e]},L=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},z=function(){return["solid","dashed","dotted","double","none"]},I=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},O=function(){return["start","end","center","between","around","evenly","stretch"]},$=function(){return["","0",$e]},F=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},X=function(){return[Lo,th]},ee=function(){return[Lo,$e]};return{cacheSize:500,theme:{colors:[vu],spacing:[Pr],blur:["none","",gs,$e],brightness:X(),borderColor:[t],borderRadius:["none","","full",gs,$e],borderSpacing:D(),borderWidth:B(),contrast:X(),grayscale:$(),hueRotate:ee(),invert:$(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[T4,Dy],inset:T(),margin:T(),opacity:X(),padding:D(),saturate:X(),scale:X(),sepia:$(),skew:ee(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",$e]}],container:["container"],columns:[{columns:[gs]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(L(),[$e])}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",yu]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",$e]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",yu]}],"grid-cols":[{"grid-cols":[vu]}],"col-start-end":[{col:["auto",{span:["full",yu]},$e]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[vu]}],"row-start-end":[{row:["auto",{span:[yu]},$e]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",$e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",$e]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(O())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(O(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(O(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",$e,e]}],"min-w":[{"min-w":["min","max","fit",$e,Pr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[gs]},gs,$e]}],h:[{h:[$e,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",$e,Pr]}],"max-h":[{"max-h":[$e,e,"min","max","fit"]}],"font-size":[{text:["base",gs,Dy]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",th]}],"font-family":[{font:[vu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",$e]}],"line-clamp":[{"line-clamp":["none",Lo,th]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$e,Pr]}],"list-image":[{"list-image":["none",$e]}],"list-style-type":[{list:["none","disc","decimal",$e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(z(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Pr]}],"underline-offset":[{"underline-offset":["auto",$e,Pr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(L(),[P4])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",A4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},R4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[].concat(z(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(z())}],"outline-offset":[{"outline-offset":[$e,Pr]}],"outline-w":[{outline:[Pr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Pr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",gs,O4]}],"shadow-color":[{shadow:[vu]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":I()}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",gs,$e]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",$e]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",$e]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",$e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[yu,$e]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$e]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$e]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$e]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Pr,th]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var $4=b4(D4);function $y(...t){return $4(st(t))}function Qf(t,e,n){const r=[];for(let i=0;i<t.length;i++)try{const s=e(t[i],i,t);s&&(Array.isArray(s)?s.forEach(o=>o&&r.push(n(o,i,t))):r.push(n(s,i,t)))}catch(s){r.push(n(s,i,t))}return r}class zt{constructor(e,n){Y(this,"start");Y(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let r=n[0].start,i=n[0].end;for(const s of n)s.start<r&&(r=s.start),s.end>i&&(i=s.end);return new zt(r,i)}toJSON(){return this.range}}const hS=me.from(me.MAX_ADDRESS).toString(),L4=Bn.from(Bn.MAX_ADDRESS).toString(),I4={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${me.format(t)} is out of range (max memory address: ${hS}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${me.format(t)}, which is outside the memory range (max memory address: ${hS}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${L4}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"label-should-be-writable":t=>`Label ${t} doesn't point to a writable memory address — should point to a DB or DW declaration.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},fS=me.from(me.MAX_ADDRESS).toString(),B4=Bn.from(Bn.MAX_ADDRESS).toString(),z4={"address-has-code":t=>`La dirección de memoria ${me.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${t} está fuera de rango (dirección máxima de memoria: ${fS}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vacío. El programa debe tener, al menos, una instrucción END.","end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${me.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${fS}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${B4}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"label-should-be-writable":t=>`La etiqueta ${t} no apunta a una dirección de memoria modificable — debería apuntar a una declaración DB o DW.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${t}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},F4=Xw({en:I4,es:z4});class Z extends Error{constructor(n,...r){super();Y(this,"code");Y(this,"context");Y(this,"position");this.code=n,this.context=r,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...r)}at(n){return n&&(n instanceof zt?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return F4(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof Z?n:new Z("unexpected-error",n)}}var _s,vl;class j4{constructor(){Y(this,"codeMemory",new Set);Y(this,"labels",new Map);ce(this,_s,!1);ce(this,vl,!1)}loadStatements(e){if(k(this,_s))throw new Error("Tried to load statements twice");j(this,_s,!0),this.labels.clear();const n=[];for(const r of e)if("label"in r&&r.label){if(this.labels.has(r.label)){n.push(new Z("duplicated-label",r.label).at(r.position));continue}r.isInstruction()?this.labels.set(r.label,{type:"instruction",address:me.from(0)}):r.directive==="EQU"?this.labels.set(r.label,{type:"EQU",constant:r}):this.labels.set(r.label,{type:r.directive,address:me.from(0)})}return n}computeAddresses(e){if(k(this,vl))throw new Error("Tried to compute addresses twice");j(this,vl,!0),this.codeMemory.clear();const n=new Set;let r=null;return Qf(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){r=s.newAddress;return}if(r===null)throw new Z("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!me.inRange(r+l))throw new Z("instruction-out-of-range",r+l).at(s);const u=me.from(r+l);if(n.has(u.value))throw new Z("occupied-address",u).at(s);n.add(u.value),s.isInstruction()&&this.codeMemory.add(u.value)}const a=me.from(r);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),r+=o},Z.from)}labelExists(e){if(!k(this,_s))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!k(this,_s))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!k(this,_s))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!k(this,vl))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof me&&(e=e.value),this.codeMemory.has(e)}}_s=new WeakMap,vl=new WeakMap;const U4=["AL","BL","CL","DL","AH","BH","CH","DH"],QP=["AX","BX","CX","DX","SP"],ep=[...U4,...QP],Yw=["DB","DW","EQU"],Jw=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],V4=["OFFSET","ORG","BYTE","WORD","PTR","END",...ep,...Jw,...Yw];class W4{constructor(e,n,r){Y(this,"type");Y(this,"lexeme");Y(this,"position");this.type=e,this.lexeme=n,this.position=r}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class H4{constructor(e){Y(this,"scanned",!1);Y(this,"tokens",[]);Y(this,"position",new zt(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new zt(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new Z("lexer.unterminated-string").at(this.position);if(this.peek().charCodeAt(0)>255)throw new Z("lexer.only-ascii").at(new zt(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new Z("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new Z("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();V4.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new Z("lexer.unexpected-character",e).at(this.position)}return this.position=new zt(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new W4(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new zt(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Gt{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}Y(Gt,"numberLiteral",(...e)=>new G4(...e)),Y(Gt,"label",(...e)=>new X4(...e)),Y(Gt,"unaryOperation",(...e)=>new K4(...e)),Y(Gt,"binaryOperation",(...e)=>new Z4(...e));class G4 extends Gt{constructor(n,r){super(r);Y(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class X4 extends Gt{constructor(n,r,i){super(i);Y(this,"type","label");this.value=n,this.offset=r}evaluate(n){if(!n.labelExists(this.value))throw new Z("label-not-found",this.value).at(this.position);const r=n.getLabelType(this.value);if((r==="DB"||r==="DW")&&!this.offset)throw new Z("label-should-be-a-number",this.value).at(this.position);if((r==="EQU"||r==="instruction")&&this.offset)throw new Z("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class K4 extends Gt{constructor(n,r,i){super(i);Y(this,"type","unary-operation");this.operator=n,this.right=r}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class Z4 extends Gt{constructor(n,r,i,s){super(s);Y(this,"type","binary-operation");this.left=n,this.operator=r,this.right=i}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class dm{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var $i;class eR extends dm{constructor(n,r,i){super(i);Y(this,"type","data-directive");Y(this,"label");Y(this,"values");ce(this,$i,null);this.values=n,this.label=r}get start(){if(k(this,$i)===null)throw new Error("Start not set");return k(this,$i)}setStart(n){if(k(this,$i)!==null)throw new Error("Start already set");j(this,$i,n)}toJSON(){return{...super.toJSON(),...k(this,$i)?{start:k(this,$i).toJSON()}:{},directive:this.directive,label:this.label}}}$i=new WeakMap;var Uo,Ms,wl;class Y4 extends eR{constructor(n,r,i){super(n,r,i);Y(this,"directive","EQU");ce(this,Uo,"not-processed");ce(this,Ms,null);ce(this,wl,null)}toJSON(){var n;return{...super.toJSON(),value:k(this,wl)??((n=k(this,Ms))==null?void 0:n.toJSON())??this.values.map(r=>r.toJSON())}}validate(){if(k(this,Ms))throw new Error("Constant already validated");if(!this.label)throw new Z("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new Z("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new Z("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new Z("cannot-be-unassinged","EQU").at(n);j(this,Ms,n.value)}evaluateExpressions(n){if(!k(this,Ms))throw new Error("Constant not validated");if(k(this,Uo)==="processed")return k(this,wl);if(k(this,Uo)==="processing")throw new Z("circular-reference").at(this.position);j(this,Uo,"processed");const r=k(this,Ms).evaluate(n);return j(this,Uo,"processed"),j(this,wl,r),r}evaluate(n){return this.evaluateExpressions(n)}}Uo=new WeakMap,Ms=new WeakMap,wl=new WeakMap;const Bu=Symbol("unassigned");var En,Or;class J4 extends eR{constructor(n,r,i,s){super(r,i,s);Y(this,"size");ce(this,En,null);ce(this,Or,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!k(this,En))throw new Error("Data directive not validated");return k(this,En).length*(this.size/8)}getValues(){if(!k(this,Or))throw new Error("Data directive not evaluated");return k(this,Or)}toJSON(){return{...super.toJSON(),values:(k(this,Or)??k(this,En)??this.values).map(n=>n===Bu?"?":n.toJSON())}}validate(){if(k(this,En))throw new Error("Data directive already validated");j(this,En,[]);for(const n of this.values)if(n.isUnassigned())k(this,En).push(Bu);else if(n.isString()){if(this.directive!=="DB")throw new Z("cannot-accept-strings",this.directive).at(n);const r=n.value;for(let i=0;i<r.length;i++){const s=GP(r[i]);if(s===null)throw new Error("Invalid character, should not happen");const o=new zt(n.position.start+i,n.position.start+i+1),a=Gt.numberLiteral(s,o);k(this,En).push(a)}}else k(this,En).push(n.value);if(k(this,En).length===0)throw new Z("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!k(this,En))throw new Error("Data directive not validated");if(k(this,Or))throw new Error("Data directive already evaluated");j(this,Or,[]);const r=Qf(k(this,En),i=>{if(i===Bu)k(this,Or).push(Bu);else{const s=i.evaluate(n);if(!M.fits(s,this.size))throw new Z("value-out-of-range",s,this.size).at(this);const o=M.fromNumber(s,this.size);k(this,Or).push(o)}},Z.from);return r.length>0&&j(this,Or,null),r}}En=new WeakMap,Or=new WeakMap;class qw{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class q4 extends qw{constructor(n,r){super(r);Y(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class Q4 extends qw{constructor(n){super(n);Y(this,"type","unassigned")}}class eB extends qw{constructor(n){super(n.position);Y(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function tB(t,e,n){const r=zt.merge(t.position,...e.map(i=>i.position));switch(t.type){case"DB":case"DW":return new J4(t.type,e,n,r);case"EQU":return new Y4(e,n,r)}}class nB extends dm{constructor(n){super(n);Y(this,"type","end")}}function Po(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var Li;class ya extends dm{constructor(n,r,i){super(i);Y(this,"type","instruction");Y(this,"label");Y(this,"operands");ce(this,Li,null);this.operands=n,this.label=r}get start(){if(k(this,Li)===null)throw new Error("Start not set");return k(this,Li)}setStart(n){if(k(this,Li)!==null)throw new Error("Start already set");j(this,Li,n)}toJSON(){return{...super.toJSON(),...k(this,Li)?{start:k(this,Li).toJSON()}:{},instruction:this.instruction,label:this.label}}}Li=new WeakMap;var nn,ur;class rB extends ya{constructor(n,r,i,s){super(r,i,s);ce(this,nn,null);ce(this,ur,null);this.instruction=n}get length(){if(!k(this,nn))throw new Error("Instruction not validated");const{mode:n,size:r,out:i,src:s}=k(this,nn);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&i.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=r/8),o}get operation(){if(!k(this,ur))throw new Error("Instruction not evaluated");return k(this,ur)}toBytes(){const{mode:n,size:r,out:i,src:s}=this.operation,o=[],a={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],r===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=Po(s)<<3,o[1]|=Po(i)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=Po(i)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=Po(i)<<0,o.push(s.low.unsigned),r===16&&o.push(s.high.unsigned);break}case"mem<-reg":{i.mode==="direct"?(o[1]=192,o.push(i.address.byte.low.unsigned),o.push(i.address.byte.high.unsigned)):o[1]=208,o[1]|=Po(s)<<0;break}case"mem<-imd":{i.mode==="direct"?(o[1]=200,o.push(i.address.byte.low.unsigned),o.push(i.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),r===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...k(this,ur)??k(this,nn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(k(this,nn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new Z("expects-two-operands").at(this);const[r,i]=this.operands;if(r.isRegister()){if(i.isRegister()){if(r.size!==i.size)throw new Z("size-mismatch",i.size,r.size).at(this);j(this,nn,{mode:"reg<-reg",size:r.size,out:r.value,src:i.value});return}if(i.isDirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new Z("size-mismatch",i.size,r.size).at(this);j(this,nn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:i.value}});return}if(i.isIndirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new Z("size-mismatch",i.size,r.size).at(this);j(this,nn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"indirect"}});return}if(i.value.isLabel()){const s=i.isDataDirectiveLabel(n);if(s){if(s!==r.size)throw new Z("size-mismatch",s,r.size).at(this);j(this,nn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:Gt.label(i.value.value,!0,i.value.position)}});return}}j(this,nn,{mode:"reg<-imd",size:r.size,out:r.value,src:i.value});return}else{let s,o;if(r.isIndirectAddress())s=r.size,o={mode:"indirect"};else if(r.isDirectAddress())s=r.size,o={mode:"direct",address:r.value};else if(r.value.isLabel()){if(s=r.isDataDirectiveLabel(n)||"auto",s==="auto")throw new Z("label-should-be-writable",r.value.value).at(r);o={mode:"direct",address:Gt.label(r.value.value,!0,r.value.position)}}else throw new Z("destination-cannot-be-immediate").at(r);if(i.isRegister()){if(s!=="auto"&&s!==i.size)throw new Z("size-mismatch",s,i.size).at(this);j(this,nn,{mode:"mem<-reg",size:i.size,out:o,src:i.value});return}if(i.isNumberExpression()){if(i.isDataDirectiveLabel(n))throw new Z("double-memory-access").at(this);if(s==="auto")throw new Z("unknown-size").at(r);j(this,nn,{mode:"mem<-imd",size:s,out:o,src:i.value});return}throw new Z("double-memory-access").at(this)}}evaluateExpressions(n){if(!k(this,nn))throw new Error("Instruction not validated");if(k(this,ur))throw new Error("Instruction aready evaluated");const{mode:r,size:i,out:s,src:o}=k(this,nn),a=l=>{const u=l.evaluate(n);if(!me.inRange(u))throw new Z("address-out-of-range",u).at(l);const c=me.from(u);if(n.addressIsReserved(c))throw new Z("address-has-code",c).at(l);return c};switch(r){case"reg<-reg":{j(this,ur,{mode:r,size:i,out:s,src:o});return}case"reg<-mem":{j(this,ur,{mode:r,size:i,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!M.fits(l,i))throw new Z("value-out-of-range",l,i).at(o);const u=M.fromNumber(l,i);j(this,ur,{mode:r,size:i,out:s,src:u});return}case"mem<-reg":{j(this,ur,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!M.fits(l,i))throw new Z("value-out-of-range",l,i).at(o);const u=M.fromNumber(l,i);j(this,ur,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return r}}}nn=new WeakMap,ur=new WeakMap;var ri,Ii;class iB extends ya{constructor(n,r,i,s){super(r,i,s);ce(this,ri,null);ce(this,Ii,null);Y(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!k(this,Ii))throw new Error("Instruction not evaluated");return k(this,Ii)}toJSON(){return{...super.toJSON(),...k(this,Ii)?{value:k(this,Ii).toJSON()}:k(this,ri)?{initialValue:k(this,ri).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(k(this,ri))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new Z("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new Z("expects-immediate").at(n);j(this,ri,n.value)}evaluateExpressions(n){if(!k(this,ri))throw new Error("Instruction not validated");if(k(this,Ii))throw new Error("Instruction aready evaluated");const r=k(this,ri).evaluate(n);if(!M.fitsUnsigned(r,8))throw new Z("invalid-interrupt",r).at(k(this,ri));j(this,Ii,M.fromUnsigned(r,8))}}ri=new WeakMap,Ii=new WeakMap;var Nr,Bi,JC;let sB=(JC=class extends ya{constructor(n,r,i,s){super(r,i,s);ce(this,Nr,null);ce(this,Bi,null);this.instruction=n}get length(){if(!k(this,Nr))throw new Error("Instruction not validated");return k(this,Nr).port==="fixed"?2:1}toBytes(){const n=[],r={IN:80,OUT:84};return n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(k(this,Bi)===null)throw new Error("Operation not set");return k(this,Bi)}toJSON(){return{...super.toJSON(),...k(this,Bi)??k(this,Nr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(k(this,Nr))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new Z("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],r=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new Z("expects-ax").at(n);const i=n.value==="AX"?16:8;if(r.isRegister()){if(r.value!=="DX")throw new Z("expects-dx").at(r);j(this,Nr,{port:"variable",size:i});return}if(r.isNumberExpression()){j(this,Nr,{port:"fixed",size:i,address:r.value});return}throw new Z("expects-immediate").at(r)}evaluateExpressions(n){if(!k(this,Nr))throw new Error("Instruction not validated");if(k(this,Bi))throw new Error("Instruction aready evaluated");const r=k(this,Nr);if(r.port==="fixed"){const i=r.address.evaluate(n);if(!Bn.inRange(i))throw new Z("io-address-out-of-range",i).at(this);const s=Bn.from(i);j(this,Bi,{port:"fixed",size:r.size,address:s})}else j(this,Bi,{port:"variable",size:r.size})}},Nr=new WeakMap,Bi=new WeakMap,JC);var zi,Fi,qC;let oB=(qC=class extends ya{constructor(n,r,i,s){super(r,i,s);ce(this,zi,null);ce(this,Fi,null);Y(this,"length",3);this.instruction=n}toBytes(){const n=[],r={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(r[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(k(this,Fi)===null)throw new Error("Instruction not evaluated");return k(this,Fi)}toJSON(){return{...super.toJSON(),...k(this,Fi)?{address:k(this,Fi).toJSON()}:k(this,zi)?{jumpTo:k(this,zi)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(k(this,zi))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new Z("expects-one-operand").at(this);const r=this.operands[0];if(!r.isNumberExpression()||!r.value.isLabel())throw new Z("expects-label").at(r);const i=r.value.value,s=n.getLabelType(i);if(!s)throw new Z("label-not-found",i).at(r);if(s!=="instruction")throw new Z("label-should-be-an-instruction",i).at(r);j(this,zi,i)}evaluateExpressions(n){if(!k(this,zi))throw new Error("Instruction not validated");if(k(this,Fi))throw new Error("Instruction aready evaluated");const r=n.getLabelValue(k(this,zi));if(!me.inRange(r))throw new Z("address-out-of-range",r).at(this);j(this,Fi,me.from(r))}},zi=new WeakMap,Fi=new WeakMap,qC);var ii,QC;let aB=(QC=class extends ya{constructor(n,r,i,s){super(r,i,s);ce(this,ii,null);Y(this,"length",1);this.instruction=n}toBytes(){let r={PUSH:96,POP:104}[this.instruction];return r|=Po(this.register),new Uint8Array([r])}get register(){if(!k(this,ii))throw new Error("Instruction not evaluated");return k(this,ii)}toJSON(){return{...super.toJSON(),...k(this,ii)?{register:k(this,ii)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(k(this,ii))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new Z("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new Z("expects-word-register").at(n);j(this,ii,n.value)}evaluateExpressions(){if(!k(this,ii))throw new Error("Instruction not validated")}},ii=new WeakMap,QC);var Wn,si;class lB extends ya{constructor(n,r,i,s){super(r,i,s);ce(this,Wn,null);ce(this,si,null);this.instruction=n}get length(){if(!k(this,Wn))throw new Error("Instruction not validated");const{mode:n}=k(this,Wn);let r=2;return n==="mem-direct"&&(r+=2),r}toBytes(){const n=[],r={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=Po(this.operation.reg);break}case"mem-direct":{n[1]=192;const i=this.operation.address.byte;n.push(i.low.unsigned),n.push(i.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!k(this,si))throw new Error("Instruction not evaluated");return k(this,si)}toJSON(){return{...super.toJSON(),...k(this,si)??k(this,Wn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(k(this,Wn))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new Z("expects-one-operand").at(this);const r=this.operands[0];if(r.isRegister()){j(this,Wn,{mode:"reg",size:r.size,reg:r.value});return}if(r.isDirectAddress()){if(r.size==="auto")throw new Z("unknown-size").at(r);j(this,Wn,{mode:"mem-direct",size:r.size,address:r.value});return}if(r.isIndirectAddress()){if(r.size==="auto")throw new Z("unknown-size").at(r);j(this,Wn,{mode:"mem-indirect",size:r.size});return}if(r.value.isLabel()){const i=r.isDataDirectiveLabel(n);if(i){j(this,Wn,{mode:"mem-direct",size:i,address:Gt.label(r.value.value,!0,r.value.position)});return}}throw new Z("destination-cannot-be-immediate").at(r)}evaluateExpressions(n){if(!k(this,Wn))throw new Error("Instruction not validated");if(k(this,si))throw new Error("Instruction aready evaluated");const r=k(this,Wn);switch(r.mode){case"reg":{j(this,si,{mode:"reg",size:r.size,reg:r.reg});return}case"mem-direct":{const i=r.address.evaluate(n);if(!me.inRange(i))throw new Z("address-out-of-range",i).at(r.address);const s=me.from(i);if(n.addressIsReserved(s))throw new Z("address-has-code",s).at(r.address);j(this,si,{mode:"mem-direct",size:r.size,address:s});return}case"mem-indirect":{j(this,si,{mode:"mem-indirect",size:r.size});return}default:return r}}}Wn=new WeakMap,si=new WeakMap;var bl;class uB extends ya{constructor(n,r,i,s){super(r,i,s);ce(this,bl,!1);Y(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(k(this,bl))throw new Error("Instruction already validated");if(this.operands.length>0)throw new Z("expects-no-operands").at(this);j(this,bl,!0)}evaluateExpressions(){if(!k(this,bl))throw new Error("Instruction not validated")}}bl=new WeakMap;class hm{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class cB extends hm{constructor(n){super(n.position);Y(this,"type","register");Y(this,"value");this.value=n.type}get size(){return QP.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class dB extends hm{constructor(n,r){super(r);Y(this,"type","indirect-address");Y(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class hB extends hm{constructor(n,r,i){super(i);Y(this,"type","direct-address");Y(this,"size");this.value=n,r?this.size=r==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class fB extends hm{constructor(n){super(n.position);Y(this,"type","number-expression");this.value=n}isDataDirectiveLabel(n){if(!this.value.isLabel())return!1;const r=this.value;if(r.offset)return!1;if(!n.labelExists(r.value))throw new Z("label-not-found",r.value).at(this.position);const i=n.getLabelType(r.value);return i==="DB"?8:i==="DW"?16:!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function pS(t,e,n){const r=zt.merge(t.position,...e.map(i=>i.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new uB(t.type,e,n,r);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new rB(t.type,e,n,r);case"NEG":case"INC":case"DEC":case"NOT":return new lB(t.type,e,n,r);case"PUSH":case"POP":return new aB(t.type,e,n,r);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new oB(t.type,e,n,r);case"IN":case"OUT":return new sB(t.type,e,n,r);case"INT":return new iB(t.type,e,n,r)}}class pB extends dm{constructor(n,r){super(r);Y(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let mB=class{constructor(e){Y(this,"tokens");Y(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new Z("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new Z("parser.expected-address-after-org")),r=this.parseNumber(n);return this.endOfStatement(),new pB(r,zt.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new Z("end-must-be-the-last-statement").at(e);return new nB(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...Yw);if(e&&!n)throw new Z("parser.unexpected-identifier").at(e);if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase())||null,i=[this.dataDirectiveValue()];for(;this.match("COMMA");)i.push(this.dataDirectiveValue());return this.endOfStatement(),tB(n,i,r)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new q4(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new Q4(e.position)}return new eB(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...Jw);if(e&&!n){const s=this.peek();throw new Z("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return pS(n,[],r);const i=[this.instructionOperand()];for(;this.match("COMMA");)i.push(this.instructionOperand());return this.endOfStatement(),pS(n,i,r)}instructionOperand(){if(this.match(...ep)){const n=this.previous();return new cB(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new Z("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...ep)){this.consume("BX",new Z("parser.indirect-addressing-must-be-bx"));const r=this.consume("RIGHT_BRACKET",new Z("parser.expected-literal-after-literal","]","BX"));return new dB(e==null?void 0:e.type,zt.merge(e==null?void 0:e.position,n.position,r.position))}else{const r=this.numberExpression(),i=this.consume("RIGHT_BRACKET",new Z("parser.expected-literal-after-expression","]"));return new hB(r,e==null?void 0:e.type,zt.merge(e==null?void 0:e.position,n.position,i.position))}}else if(e)throw new Z("parser.expected-literal-after-literal","[","PTR");return new fB(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const r=this.match(...e);if(r)return r;throw n||(n=new Z("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new Z("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const r=this.previous(),i=this.parseNumber(r);return Gt.numberLiteral(i,r.position)}if(this.match("LEFT_PAREN")){const r=this.numberExpression();return this.consume("RIGHT_PAREN",new Z("parser.unclosed-parenthesis")),r}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new Z("parser.expected-label-after-offset").at(this.peek());if(!n)throw new Z("parser.expected-argument").at(this.peek());return Gt.label(n.lexeme.toUpperCase(),e!==null,zt.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new Z("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Gt.unaryOperation(e.type==="PLUS"?"+":"-",n,zt.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Gt.binaryOperation(e,"*",n,zt.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),r=this.factorNE();e=Gt.binaryOperation(e,n.type==="PLUS"?"+":"-",r,zt.merge(e.position,r.position))}return e}numberExpression(){return this.termNE()}};function tR(t){try{const n=new H4(t).scanTokens(),i=new mB(n).parse(),s=i.at(-1);if(!s)throw new Z("empty-program");if(!s.isEnd())throw new Z("end-must-be-the-last-statement").at(s);let o=[];const a=new j4;if(o=a.loadStatements(i),o.length>0)return{success:!1,errors:o};if(o=Qf(i,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},Z.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(i),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=Qf(i,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},Z.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u}}catch(e){return{success:!1,errors:[Z.from(e)]}}}class Ai{constructor(e){Y(this,"computer");this.computer=e.computer}}const gB=me.from(me.MAX_ADDRESS).toString(),yB={"address-has-instruction":t=>`Memory address ${me.format(t)} has an instruction, and cannot be read nor written.`,"address-out-of-range":t=>`Memory address ${me.format(t)} is out of range (max memory address: ${gB}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-implemented":t=>`I/O memory address ${Bn.format(t)} has no implementation.`,"no-instruction":t=>`Expected instruction at memory address ${me.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},vB=me.from(me.MAX_ADDRESS).toString(),wB={"address-has-instruction":t=>`La dirección de memoria ${t} tiene una instrucción, y no se puede leer ni escribir.`,"address-out-of-range":t=>`La dirección de memoria ${me.format(t)} está fuera de rango (dirección máxima de memoria: ${vB}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-implemented":t=>`La dirección de memoria E/S ${Bn.format(t)} no está implementada.`,"no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${t} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},bB=Xw({en:yB,es:wB});class Pt extends Error{constructor(n,...r){super();Y(this,"code");Y(this,"context");this.code=n,this.context=r,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...r)}translate(n){return bB(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Pt?n:new Pt("unexpected-error",n)}}class hs{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const i=e.cpu.getRegister("IP").toString("hex");throw new Pt("unexpected-error",`Could not read instruction byte at address ${i}h`)}yield*e.cpu.updateWordRegister("IP",i=>i.add(1)),yield*e.cpu.getMBR(n)}}var Np,nR;class xB extends hs{constructor(){super(...arguments);ce(this,Np)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ze(this,Np,nR).call(this),willUse:{ri:r==="reg<-mem"||r==="mem<-reg"||r==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(r==="reg<-reg"||r==="mem<-reg")i===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(r==="reg<-imd"||r==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),i===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=i===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=i===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=M.fromSigned(d,i),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>M.maxValue(i)?(c.CF=!0,u=M.fromUnsigned(h-M.maxValue(i)-1,i)):(c.CF=!1,u=M.fromUnsigned(h,i)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=M.fromUnsigned(h+M.maxValue(i)+1,i)):(c.CF=!1,u=M.fromUnsigned(h,i)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(i===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Np=new WeakSet,nR=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BX";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,`${i.toString("hex")}h`];default:return n}};var _p,rR;class SB extends hs{constructor(){super(...arguments);ce(this,_p)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ze(this,_p,rR).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const r=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let i;const s={};switch(this.name){case"NOT":{i=M.fromSigned(~r.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{i=M.fromSigned(-r.signed,this.operation.size),s.CF=!r.isZero(),s.OF=r.signed===M.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",M.fromSigned(1,16));const o=r.unsigned+1;o>M.maxValue(this.operation.size)?(s.CF=!0,i=M.fromUnsigned(o-M.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,i=M.fromUnsigned(o,this.operation.size)),s.OF=r.signed>=0&&i.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",M.fromSigned(1,16));const o=r.unsigned-1;o<0?(s.CF=!0,i=M.fromUnsigned(o+M.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,i=M.fromUnsigned(o,this.operation.size)),s.OF=r.signed<0&&i.signed>=0;break}}if(s.ZF=i.isZero(),s.SF=i.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,i,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}_p=new WeakSet,rR=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class kB extends hs{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Mp,iR;class CB extends hs{constructor(){super(...arguments);ce(this,Mp)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ze(this,Mp,iR).call(this),willUse:{ri:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",M.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Pt("io-memory-not-implemented",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Pt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Pt("io-memory-not-implemented",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Mp=new WeakSet,iR=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class EB extends hs{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class AB extends hs{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function Ro(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function PB(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Dp,sR;class RB extends hs{constructor(){super(...arguments);ce(this,Dp)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ze(this,Dp,sR).call(this),willUse:{ri:r==="reg<-mem"||r==="mem<-reg"||r==="mem<-imd",id:r==="reg<-mem"||r==="reg<-imd"||r==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},r){case"reg<-reg":return i===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return i===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[a,l]=PB(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(!(yield*n.cpu.useBus("mem-write"))||l&&(yield*n.cpu.updateWordRegister("ri",u=>u.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||i===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return r}}}Dp=new WeakSet,sR=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BX";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,`${i.toString("hex")}h`];default:return n}};class TB extends hs{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class OB extends hs{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function NB(t){switch(t.instruction){case"MOV":return new RB(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new xB(t);case"NOT":case"NEG":case"INC":case"DEC":return new SB(t);case"IN":case"OUT":return new CB(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new OB(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new EB(t);case"RET":case"IRET":return new TB(t);case"INT":return new kB(t);case"CLI":case"STI":case"NOP":case"HLT":return new AB(t)}}const _B=[0,3,6,7];function MB(t){return _B.includes(t.unsigned)}function*DB(t,e){switch(e.unsigned){case 0:return yield{type:"cpu:int.0"},!1;case 3:return yield{type:"cpu:int.3"},!0;case 6:{yield*t.cpu.copyWordRegister("BX","ri");const n=yield*t.io.console.read();if(yield*t.cpu.updateWordRegister("id",n.withHigh(M.zero(8))),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("id.l"),!(yield*t.cpu.useBus("mem-write")))return!1;break}case 7:{if(yield*t.cpu.copyWordRegister("AX","id"),!(yield*t.cpu.pushToStack())||(yield*t.cpu.copyWordRegister("BX","id"),!(yield*t.cpu.pushToStack())))return!1;yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",M.zero(8));const n=t.cpu.getRegister("AL");for(yield*t.cpu.aluExecute("SUB",n,{CF:!1,OF:!1,SF:n.signed<0,ZF:n.isZero()});!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read")))return!1;yield*t.cpu.getMBR("id.l");const r=t.cpu.getRegister("id.l");yield*t.io.console.write(r),yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",M.fromUnsigned(1,16));const i=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",i,{CF:!1,OF:i.signed<0,SF:i.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",M.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===M.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","BX"),!(yield*t.cpu.popFromStack())))return!1;yield*t.cpu.copyWordRegister("id","AX");break}default:throw new Error("Invalid interrupt number")}return!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","IP"),!(yield*t.cpu.popFromStack()))?!1:(yield*t.cpu.copyWordRegister("id","FLAGS"),!0)}var xl,Oe,Hn,dn,Ds,Ma,An,ar,eE;let $B=(eE=class extends Ai{constructor(n){super(n);ce(this,Ds);ce(this,An);ce(this,xl,void 0);ce(this,Oe,void 0);ce(this,Hn,void 0);ce(this,dn,void 0);n.data==="unchanged"?(j(this,Oe,k(n.previous.cpu,Oe)),j(this,Hn,k(n.previous.cpu,Hn)),j(this,dn,k(n.previous.cpu,dn))):n.data==="randomize"?(j(this,Oe,{AX:M.random(16),BX:M.random(16),CX:M.random(16),DX:M.random(16),SP:M.random(16),IP:M.random(16),IR:M.random(8),ri:M.random(16),id:M.random(16),left:M.random(16),right:M.random(16),result:M.random(16),FLAGS:M.random(16)}),j(this,Hn,M.random(16)),j(this,dn,M.random(8))):(j(this,Oe,{AX:M.zero(16),BX:M.zero(16),CX:M.zero(16),DX:M.zero(16),SP:M.zero(16),IP:M.zero(16),IR:M.zero(8),ri:M.zero(16),id:M.zero(16),left:M.zero(16),right:M.zero(16),result:M.zero(16),FLAGS:M.zero(16)}),j(this,Hn,M.zero(16)),j(this,dn,M.zero(8))),k(this,Oe).SP=M.fromUnsigned(me.MAX_ADDRESS+1,16),k(this,Oe).IP=M.fromUnsigned(8192,16),Ze(this,An,ar).call(this,"IF",!0),j(this,xl,new Map);for(const r of n.program.instructions){const i=NB(r);k(this,xl).set(i.start.value,i)}}*run(){for(;;){const n=k(this,xl).get(k(this,Oe).IP.unsigned);if(!n){yield{type:"cpu:error",error:new Pt("no-instruction",k(this,Oe).IP)};return}if(!(yield*n.execute(this.computer)))return;if(this.getFlag("IF")&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const i=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",M.zero(8)),yield*this.startInterrupt(i)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;if(MB(n))return yield*DB(this.computer,n);let r=M.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",r),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),r=r.add(1),yield*this.updateWordRegister("ri",r),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(k(this,Oe)).reduce((r,[i,s])=>({...r,[i]:s.toJSON()}),{}),MAR:k(this,Hn).toJSON(),MBR:k(this,dn).toJSON()}}getRegister(n){const[r,i]=Ro(n);return i==="low"?k(this,Oe)[r].low:i==="high"?k(this,Oe)[r].high:k(this,Oe)[r]}*copyByteRegister(n,r){const i=this.getRegister(n);Ze(this,Ds,Ma).call(this,r,i),yield{type:"cpu:register.copy",size:8,src:n,dest:r}}*copyWordRegister(n,r){const i=this.getRegister(n);Ze(this,Ds,Ma).call(this,r,i),yield{type:"cpu:register.copy",size:16,src:n,dest:r}}*updateByteRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,Ze(this,Ds,Ma).call(this,n,r),yield{type:"cpu:register.update",size:8,register:n,value:r}}*updateWordRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,Ze(this,Ds,Ma).call(this,n,r),yield{type:"cpu:register.update",size:16,register:n,value:r}}getFlag(n){switch(n){case"CF":return k(this,Oe).FLAGS.bit(0);case"ZF":return k(this,Oe).FLAGS.bit(6);case"SF":return k(this,Oe).FLAGS.bit(7);case"IF":return k(this,Oe).FLAGS.bit(9);case"OF":return k(this,Oe).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Ze(this,An,ar).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Ze(this,An,ar).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Ze(this,An,ar).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Ze(this,An,ar).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Ze(this,An,ar).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:k(this,Oe).FLAGS}}*aluExecute(n,r,i){k(this,Oe).result=r.is8bits()?k(this,Oe).result.withLow(r):r,typeof i.CF=="boolean"&&Ze(this,An,ar).call(this,"CF",i.CF),typeof i.ZF=="boolean"&&Ze(this,An,ar).call(this,"ZF",i.ZF),typeof i.SF=="boolean"&&Ze(this,An,ar).call(this,"SF",i.SF),typeof i.IF=="boolean"&&Ze(this,An,ar).call(this,"IF",i.IF),typeof i.OF=="boolean"&&Ze(this,An,ar).call(this,"OF",i.OF),yield{type:"cpu:alu.execute",operation:n,size:r.size,result:k(this,Oe).result,flags:k(this,Oe).FLAGS}}*setMAR(n){const r=this.getRegister(n);j(this,Hn,r),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Ze(this,Ds,Ma).call(this,n,k(this,dn)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const r=this.getRegister(n);j(this,dn,r),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const r=yield*this.computer.memory.read(k(this,Hn));return r?(j(this,dn,r),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(k(this,Hn),k(this,dn)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(k(this,Hn).low);if(!r)return!1;yield{type:"cpu:rd.on"};const i=yield*this.computer.io.read(r);return i?(j(this,dn,i),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(k(this,Hn).low);return!r||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(r,k(this,dn))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{const r=yield*this.computer.io.pic.handleINTR();return j(this,dn,r),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return me.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?me.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new Pt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new Pt("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return me.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),me.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new Pt("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new Pt("stack-underflow")},!1)}},xl=new WeakMap,Oe=new WeakMap,Hn=new WeakMap,dn=new WeakMap,Ds=new WeakSet,Ma=function(n,r){const[i,s]=Ro(n);if(s===null){if(k(this,Oe)[i].size!==r.size)throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);k(this,Oe)[i]=r}else{if(!r.is8bits())throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);s==="low"?k(this,Oe)[i]=k(this,Oe)[i].withLow(r):k(this,Oe)[i]=k(this,Oe)[i].withHigh(r)}},An=new WeakSet,ar=function(n,r){switch(n){case"CF":k(this,Oe).FLAGS=k(this,Oe).FLAGS.withBit(0,r);return;case"ZF":k(this,Oe).FLAGS=k(this,Oe).FLAGS.withBit(6,r);return;case"SF":k(this,Oe).FLAGS=k(this,Oe).FLAGS.withBit(7,r);return;case"IF":k(this,Oe).FLAGS=k(this,Oe).FLAGS.withBit(9,r);return;case"OF":k(this,Oe).FLAGS=k(this,Oe).FLAGS.withBit(11,r);return;default:throw new TypeError(`Invalid flag ${n}`)}},eE),LB=class extends Ai{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}};var Gn,Sl;class IB extends Ai{constructor(n){super(n);ce(this,Gn,void 0);ce(this,Sl,null);n.data==="unchanged"?j(this,Gn,k(n.previous.io.console,Gn)):j(this,Gn,"")}get screen(){return k(this,Gn)}clear(){return this.write(M.fromUnsigned(12,8))}*read(){yield{type:"console:read"};const n=k(this,Sl);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return j(this,Sl,null),n}setLastCharRead(n){j(this,Sl,n)}*write(n){switch(n.unsigned){case 8:j(this,Gn,k(this,Gn).slice(0,-1));break;case 10:j(this,Gn,k(this,Gn)+`
`);break;case 12:j(this,Gn,"");break;default:j(this,Gn,k(this,Gn)+Kw(n.unsigned));break}yield{type:"console:write",char:n}}toJSON(){return k(this,Gn)}}Gn=new WeakMap,Sl=new WeakMap;let BB=class extends Ai{*press(){yield{type:"f10:press"},yield{type:"f10:int.on"},yield*this.computer.io.pic.interrupt(0),yield{type:"f10:int.off"}}toJSON(){return null}};class fm extends Ai{}var fi,ji,Pn,hn,_r,kl,Yh,Cl,Jh;let zB=(fi=class extends fm{constructor(n){super(n);ce(this,kl);ce(this,Cl);ce(this,ji,void 0);ce(this,Pn,void 0);ce(this,hn,void 0);ce(this,_r,void 0);j(this,ji,M.fromUnsigned(255,8)),j(this,Pn,M.fromUnsigned(0,8)),j(this,hn,M.fromUnsigned(0,8)),n.data==="unchanged"?j(this,_r,k(n.previous.io.pic,_r)):n.data==="randomize"?j(this,_r,new Array(fi.LINES).fill(M.zero(8)).map(()=>M.random(8))):j(this,_r,new Array(fi.LINES).fill(M.zero(8)))}chipSelect(n){const i=4+fi.LINES;return n=Number(n)-32,n<0||n>=i?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let r;if(n==="EOI")r=M.zero(8);else if(n==="IMR")r=k(this,ji);else if(n==="IRR")r=k(this,Pn);else if(n==="ISR")r=k(this,hn);else{const i=Number(n.slice(3));r=k(this,_r)[i]}return yield{type:"pic:read.ok",value:r},r}*write(n,r){if(yield{type:"pic:write",register:n,value:r},n==="EOI")k(this,hn).isZero()||(yield{type:"pic:intr.off"},j(this,hn,M.zero(8)),yield{type:"pic:register.update",register:"ISR",value:k(this,hn)},yield*Ze(this,Cl,Jh).call(this));else if(n==="IMR")j(this,ji,r),yield{type:"pic:register.update",register:"IMR",value:k(this,ji)},yield*Ze(this,Cl,Jh).call(this);else if(!(n==="IRR"||n==="ISR")){const i=Number(n.slice(3));k(this,_r)[i]=r,yield{type:"pic:register.update",register:n,value:r}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=fi.LINES)throw new RangeError(`Invalid interrupt line ${n}`);k(this,Pn).bit(n)||(j(this,Pn,k(this,Pn).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:k(this,Pn)},yield*Ze(this,Cl,Jh).call(this))}isINTRActive(){return k(this,hn).isZero()&&Ze(this,kl,Yh).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!k(this,hn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Ze(this,kl,Yh).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");j(this,hn,k(this,hn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:k(this,hn)},j(this,Pn,k(this,Pn).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:k(this,Pn)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const r=k(this,_r)[n];return yield{type:"pic:int.send",number:r},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},r}toJSON(){return{IMR:k(this,ji).toJSON(),IRR:k(this,Pn).toJSON(),ISR:k(this,hn).toJSON(),lines:k(this,_r).map(n=>n.toJSON())}}},ji=new WeakMap,Pn=new WeakMap,hn=new WeakMap,_r=new WeakMap,kl=new WeakSet,Yh=function(){for(let n=0;n<fi.LINES;n++)if(k(this,Pn).bit(n)&&!k(this,ji).bit(n))return n;return null},Cl=new WeakSet,Jh=function*(){k(this,hn).isZero()&&Ze(this,kl,Yh).call(this)!==null&&(yield{type:"pic:intr.on"})},Y(fi,"LINES",8),fi);var oi,$s,tE;let FB=(tE=class extends fm{constructor(n){super(n);ce(this,oi,void 0);ce(this,$s,void 0);j(this,oi,M.zero(8)),j(this,$s,M.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let r;if(n==="CONT")r=k(this,oi);else if(n==="COMP")r=k(this,$s);else return n;return yield{type:"timer:read.ok",value:r},r}*write(n,r){if(yield{type:"timer:write",register:n,value:r},n==="CONT")j(this,oi,r);else if(n==="COMP")j(this,$s,r);else return n;yield{type:"timer:register.update",register:n,value:r},yield{type:"timer:write.ok"}}*tick(){const n=k(this,oi).unsigned===M.maxValue(8)?M.zero(8):k(this,oi).add(1);j(this,oi,n),yield{type:"timer:register.update",register:"CONT",value:n},k(this,$s).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:k(this,oi).toJSON(),COMP:k(this,$s).toJSON()}}},oi=new WeakMap,$s=new WeakMap,tE);class pm extends Ai{constructor(n){super(n);Y(this,"clock");Y(this,"console");Y(this,"f10");Y(this,"pic");Y(this,"timer");this.clock=new LB(n),this.console=new IB(n),this.f10=new BB(n),this.pic=new zB(n),this.timer=new FB(n)}*chipSelect(n){const r=this.pic.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const i=this.timer.chipSelect(n);return i?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:i}):(yield{type:"bus:io.error",error:new Pt("io-memory-not-implemented",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="pic"?yield*this.pic.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new Pt("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="pic"?(yield*this.pic.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new Pt("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),console:this.console.toJSON(),f10:this.f10.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}}Y(pm,"SIZE",Bn.MAX_ADDRESS+1);var ai,fn,nE;let jB=(nE=class extends fm{constructor(n){super(n);ce(this,ai,void 0);ce(this,fn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?j(this,ai,M.zero(8)):n.data==="randomize"?j(this,ai,M.random(8)):j(this,ai,M.zero(8)),j(this,fn,M.zero(8))}get interrupts(){return k(this,fn).bit(7)}get DATA(){return k(this,ai)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let r;if(n==="DATA")r=k(this,ai);else if(n==="STATE")r=k(this,fn);else return n;return yield{type:"handshake:read.ok",value:r},r}*write(n,r){if(yield{type:"handshake:write",register:n,value:r},n==="DATA")j(this,ai,r),yield{type:"handshake:register.update",register:n,value:r},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")r=r.withBit(0,this.computer.io.printer.busy),j(this,fn,r),yield{type:"handshake:register.update",register:n,value:r},k(this,fn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),j(this,fn,k(this,fn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:k(this,fn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){j(this,fn,k(this,fn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:k(this,fn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:k(this,ai).toJSON(),STATE:k(this,fn).toJSON()}}},ai=new WeakMap,fn=new WeakMap,nE);var cr,Ui,Ls;const lc=class lc extends Ai{constructor(n){super(n);ce(this,cr,void 0);ce(this,Ui,void 0);ce(this,Ls,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(j(this,cr,k(n.previous.io.printer,cr)),j(this,Ui,k(n.previous.io.printer,Ui)),j(this,Ls,k(n.previous.io.printer,Ls))):(j(this,cr,[]),j(this,Ui,""),j(this,Ls,!1))}get busy(){return k(this,cr).length>=lc.BUFFER_SIZE}*setStrobe(n){const r=k(this,Ls);if(r===n)return;if(j(this,Ls,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!r&&!this.busy){const s=yield*this.readData();k(this,cr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){j(this,Ui,""),yield{type:"printer:paper.replace"}}*print(){if(k(this,cr).length===0)return;const[n,...r]=k(this,cr);if(j(this,cr,r),yield{type:"printer:buffer.pop",char:n},r.length===lc.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const i=Kw(n.unsigned);j(this,Ui,k(this,Ui)+i),yield{type:"printer:paper.print",char:i}}}toJSON(){return{paper:k(this,Ui),buffer:[...k(this,cr).map(n=>n.unsigned)]}}};cr=new WeakMap,Ui=new WeakMap,Ls=new WeakMap,Y(lc,"BUFFER_SIZE",5);let tp=lc,UB=class extends tp{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}};class VB extends pm{constructor(n){super(n);Y(this,"printer");Y(this,"handshake");this.printer=new UB(n),this.handshake=new jB(n)}*chipSelect(n){const r=this.handshake.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:r}):yield*super.chipSelect(n)}*read(n){return n.chip==="handshake"?yield*this.handshake.read(n.register):yield*super.read(n)}*write(n,r){return n.chip==="handshake"?(yield*this.handshake.write(n.register,r),!0):yield*super.write(n,r)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),handshake:this.handshake.toJSON()}}}class oR extends fm{constructor(n){super(n);Y(this,"PA");Y(this,"PB");Y(this,"CA");Y(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=M.random(8),this.PB=M.random(8),this.CA=M.random(8),this.CB=M.random(8)):(this.PA=M.zero(8),this.PB=M.zero(8),this.CA=M.zero(8),this.CB=M.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let r;if(n==="PA")r=this.PA;else if(n==="PB")r=this.PB;else if(n==="CA")r=this.CA;else if(n==="CB")r=this.CB;else return n;return yield{type:"pio:read.ok",value:r},r}*write(n,r){if(yield{type:"pio:write",register:n,value:r},n==="PA")this.PA=r;else if(n==="PB")this.PB=r;else if(n==="CA")this.CA=r;else if(n==="CB")this.CB=r;else return n;yield{type:"pio:register.update",register:n,value:r},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,r){return n==="A"?this.CA.bit(r)?"input":"output":this.CB.bit(r)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let WB=class extends oR{readData(){const e=this.PB.unsigned&~this.CB.unsigned;return M.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const r=this.CA.unsigned,i=this.computer.io.printer.busy;n=n&~r,this.line("A",0)==="input"&&i&&(n|=1),n!==this.PA.unsigned&&(this.PA=M.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA},this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1))))}};class HB extends tp{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}}class GB extends pm{constructor(n){super(n);Y(this,"printer");Y(this,"pio");this.printer=new HB(n),this.pio=new WB(n)}*chipSelect(n){const r=this.pio.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:r}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,r){return n.chip==="pio"?(yield*this.pio.write(n.register,r),!0):yield*super.write(n,r)}toJSON(){return{...super.toJSON(),printer:this.printer.toJSON(),pio:this.pio.toJSON()}}}var Vi;class XB extends Ai{constructor(n){super(n);ce(this,Vi,void 0);n.data==="unchanged"&&"leds"in n.previous.io?j(this,Vi,k(n.previous.io.leds,Vi)):n.data==="randomize"?j(this,Vi,M.random(8)):j(this,Vi,M.zero(8))}get state(){return k(this,Vi)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return k(this,Vi).toJSON()}}Vi=new WeakMap;class KB extends oR{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let r=this.PA.unsigned;const i=this.CA.unsigned;r=n&i|r&~i,r!==this.PA.unsigned&&(this.PA=M.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const r=this.CB.unsigned;n=n&~r,yield*this.computer.io.leds.update(M.fromUnsigned(n,8))}}}var dr;class ZB extends Ai{constructor(n){super(n);ce(this,dr,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?j(this,dr,k(n.previous.io.switches,dr)):n.data==="randomize"?j(this,dr,M.random(8)):j(this,dr,M.zero(8))}get state(){return k(this,dr)}*toggle(n){j(this,dr,k(this,dr).withBit(n,!k(this,dr).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return k(this,dr).toJSON()}}dr=new WeakMap;class YB extends pm{constructor(n){super(n);Y(this,"leds");Y(this,"switches");Y(this,"pio");this.leds=new XB(n),this.switches=new ZB(n),this.pio=new KB(n)}*chipSelect(n){const r=this.pio.chipSelect(n);return r?(yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:r}):yield*super.chipSelect(n)}*read(n){return n.chip==="pio"?yield*this.pio.read(n.register):yield*super.read(n)}*write(n,r){return n.chip==="pio"?(yield*this.pio.write(n.register,r),!0):yield*super.write(n,r)}toJSON(){return{...super.toJSON(),leds:this.leds.toJSON(),switches:this.switches.toJSON(),pio:this.pio.toJSON()}}}var Ko,hr,El;let JB=(Ko=class extends Ai{constructor(n){super(n);ce(this,hr,void 0);ce(this,El,void 0);n.data==="unchanged"?j(this,hr,k(n.previous.memory,hr)):n.data==="randomize"?j(this,hr,new Uint8Array(Ko.SIZE).map(()=>M.random(8).unsigned)):j(this,hr,new Uint8Array(Ko.SIZE));for(const r of n.program.data){let i=r.start.value;for(const s of r.getValues())s!==Bu&&k(this,hr).set(s.toUint8Array(),i),i+=r.size/8}j(this,El,new Set);for(const r of n.program.instructions){k(this,hr).set(r.toBytes(),r.start.value);for(let i=0;i<r.length;i++)k(this,El).add(r.start.value+i)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!me.inRange(n))return yield{type:"memory:read.error",error:new Pt("address-out-of-range",n)},null;const r=M.fromUnsigned(k(this,hr).at(n),8);return yield{type:"memory:read.ok",value:r},r}*write(n,r){return n=Number(n),yield{type:"memory:write",address:n,value:r},me.inRange(n)?k(this,El).has(n)?(yield{type:"memory:write.error",error:new Pt("address-has-instruction",n)},!1):(k(this,hr).set([r.unsigned],n),yield{type:"memory:write.ok"},!0):(yield{type:"memory:write.error",error:new Pt("address-out-of-range",n)},!1)}toJSON(){return[...k(this,hr)]}},hr=new WeakMap,El=new WeakMap,Y(Ko,"SIZE",me.MAX_ADDRESS+1),Ko);class mS{constructor(e){Y(this,"cpu");Y(this,"memory");Y(this,"io");const n={computer:this,...e};if(this.cpu=new $B(n),this.memory=new JB(n),e.devices==="pio-switches-and-leds")this.io=new YB(n);else if(e.devices==="pio-printer")this.io=new GB(n);else if(e.devices==="handshake")this.io=new VB(n);else throw new Error("Invalid devices configuration")}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var kt;class qB{constructor(){ce(this,kt,new mS({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){j(this,kt,new mS({...e,previous:k(this,kt)}))}getComputerState(){var e;return((e=k(this,kt))==null?void 0:e.toJSON())||null}startCPU(){if(!k(this,kt))throw new Pt("no-program");return k(this,kt).cpu.run()}get devices(){if(!k(this,kt))throw new Error("No computer loaded!");return{clock:{tick:()=>k(this,kt).io.clock.tick()},console:{readChar:e=>k(this,kt).io.console.setLastCharRead(e),clear:()=>k(this,kt).io.console.clear()},f10:{press:()=>k(this,kt).io.f10.press()},printer:{connected:()=>"printer"in k(this,kt).io,clear:()=>{if("printer"in k(this,kt).io)return k(this,kt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in k(this,kt).io)return k(this,kt).io.printer.print();console.warn("No printer connected to the computer!")}},switches:{connected:()=>"printer"in k(this,kt).io,toggle:e=>{if("switches"in k(this,kt).io)return k(this,kt).io.switches.toggle(e);console.warn("No switches connected to the computer!")}}}}}kt=new WeakMap;class Ge{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),ci.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let r=[];return this.decompose(e,n,r,0),ci.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new ec(this),s=new ec(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new ec(this,e)}iterRange(e,n=this.length){return new aR(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new lR(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ge.empty:e.length<=32?new Ct(e):ci.from(Ct.split(e,[]))}}class Ct extends Ge{constructor(e,n=QB(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new e8(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Ct(gS(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=qh(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Ct(a,o.length+s.length));else{let l=a.length>>1;r.push(new Ct(a.slice(0,l)),new Ct(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Ct))return super.replace(e,n,r);let i=qh(this.text,qh(r.text,gS(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Ct(i,s):ci.from(Ct.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Ct(r,i)),r=[],i=-1);return i>-1&&n.push(new Ct(r,i)),n}}class ci extends Ge{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?r.push(a):a.decompose(e-o,n-o,r,u)}o=l+1}}replace(e,n,r){if(r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[i]=l,new ci(c,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof ci))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let f of e)r+=f.lines;if(r<32){let f=[];for(let p of e)p.flatten(f);return new Ct(f,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof ci)for(let m of f.children)d(m);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Ct&&l&&(p=c[c.length-1])instanceof Ct&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Ct(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>i&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:ci.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new ci(a,n)}}Ge.empty=new Ct([""],0);function QB(t){let e=-1;for(let n of t)e+=n.length+1;return e}function qh(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function gS(t,e,n){return qh(t,[""],e,n)}class ec{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Ct?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Ct?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Ct){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Ct?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class aR{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new ec(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class lR{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ge.prototype[Symbol.iterator]=function(){return this.iter()},ec.prototype[Symbol.iterator]=aR.prototype[Symbol.iterator]=lR.prototype[Symbol.iterator]=function(){return this});class e8{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}let ul="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<ul.length;t++)ul[t]+=ul[t-1];function t8(t){for(let e=1;e<ul.length;e+=2)if(ul[e]>t)return ul[e-1]<=t;return!1}function yS(t){return t>=127462&&t<=127487}const vS=8205;function on(t,e,n=!0,r=!0){return(n?uR:n8)(t,e,r)}function uR(t,e,n){if(e==t.length)return e;e&&cR(t.charCodeAt(e))&&dR(t.charCodeAt(e-1))&&e--;let r=mn(t,e);for(e+=Lr(r);e<t.length;){let i=mn(t,e);if(r==vS||i==vS||n&&t8(i))e+=Lr(i),r=i;else if(yS(i)){let s=0,o=e-2;for(;o>=0&&yS(mn(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function n8(t,e,n){for(;e>0;){let r=uR(t,e-2,n);if(r<e)return r;e--}return 0}function cR(t){return t>=56320&&t<57344}function dR(t){return t>=55296&&t<56320}function mn(t,e){let n=t.charCodeAt(e);if(!dR(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return cR(r)?(n-55296<<10)+(r-56320)+65536:n}function Qw(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Lr(t){return t<65536?1:2}const Ly=/\r\n?|\n/;var Nn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Nn||(Nn={}));class yi{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){Iy(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new yi(e)}composeDesc(e){return this.empty?e:e.empty?this:hR(this,e)}mapDesc(e,n=!1){return e.empty?this:By(this,e,n)}mapPos(e,n=-1,r=Nn.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=i+a;if(l<0){if(u>e)return s+(e-i);s+=a}else{if(r!=Nn.Simple&&u>=e&&(r==Nn.TrackDel&&i<e&&u>e||r==Nn.TrackBefore&&i<e||r==Nn.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new yi(e)}static create(e){return new yi(e)}}class Dt extends yi{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Iy(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return By(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Ge.empty);r.push(o?e.slice(s,s+o):Ge.empty)}s+=o}return new Dt(n,r)}compose(e){return this.empty?e:e.empty?this:hR(this,e,!0)}map(e,n=!1){return e.empty?this:By(this,e,n,!0)}iterChanges(e,n=!1){Iy(this,e,n)}get desc(){return yi.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new jc(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);rn(i,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;rn(n,c,d),d>0&&zs(r,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);rn(n,c,-1),rn(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new Dt(n,r),filtered:yi.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!i.length)return;o<n&&rn(i,n-o,-1);let d=new Dt(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof Dt){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?Ge.of(f.split(r||Ly)):f:Ge.empty,m=p.length;if(d==h&&m==0)return;d<o&&l(),d>o&&rn(i,d-o,-1),rn(i,h-d,m),zs(s,i,p),o=h}}return u(e),l(!a),a}static empty(e){return new Dt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(Ge.empty);r[i]=Ge.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Dt(n,r)}static createSet(e,n){return new Dt(e,n)}}function rn(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function zs(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Ge.empty);t.push(n)}}function Iy(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let u=i,c=s,d=Ge.empty;for(;u+=a,c+=l,l&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,u,s,c,d),i=u,s=c}}}function By(t,e,n,r=!1){let i=[],s=r?[]:null,o=new jc(t),a=new jc(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);rn(i,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(rn(i,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(rn(i,0,o.ins),s&&zs(s,i,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;rn(i,u,l<o.i?o.ins:0),s&&l<o.i&&zs(s,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?Dt.createSet(i,s):yi.create(i);throw new Error("Mismatched change set lengths")}}function hR(t,e,n=!1){let r=[],i=n?[]:null,s=new jc(t),o=new jc(e);for(let a=!1;;){if(s.done&&o.done)return i?Dt.createSet(r,i):yi.create(r);if(s.ins==0)rn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)rn(r,0,o.ins,a),i&&zs(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=r.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;rn(r,l,c,a),i&&c&&zs(i,r,o.text)}else o.ins==-1?(rn(r,s.off?0:s.len,l,a),i&&zs(i,r,s.textBit(l))):(rn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&zs(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>u),s.forward2(l),o.forward(l)}}}}class jc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Ge.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Ge.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Io{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Io(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return U.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return U.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return U.range(e.anchor,e.head)}static create(e,n,r){return new Io(e,n,r)}}class U{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:U.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new U([this.main],0)}addRange(e,n=!0){return U.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,U.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new U(e.ranges.map(n=>Io.fromJSON(n)),e.main)}static single(e,n=e){return new U([U.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return U.normalized(e.slice(),n);r=s.to}return new U(e,n)}static cursor(e,n=0,r,i){return Io.create(e,e,(n==0?0:n<0?4:8)|(r==null?3:Math.min(2,r))|(i??33554431)<<5)}static range(e,n,r,i){let s=(r??33554431)<<5|(i==null?3:Math.min(2,i));return n<e?Io.create(n,e,24|s):Io.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?U.range(l,a):U.range(a,l))}}return new U(e,n)}}function fR(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let e1=0;class ue{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=e1++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new ue(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:t1),!!e.static,e.enables)}of(e){return new Qh([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Qh(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Qh(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function t1(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Qh{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=e1++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||zy(d,c)){let f=r(d);if(a?!wS(f,d.values[o],i):!i(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let m=rp(h,p);if(this.dependencies.every(v=>v instanceof ue?h.facet(v)===d.facet(v):v instanceof un?h.field(v,!1)==d.field(v,!1):!0)||(a?wS(f=r(d),m,i):i(f=r(d),m)))return d.values[o]=m,0}else f=r(d);return d.values[o]=f,1}}}}function wS(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function zy(t,e){let n=!1;for(let r of e)tc(t,r)&1&&(n=!0);return n}function r8(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let d=rp(l,r[c]);if(i[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of r)tc(l,u);return l.values[o]=a(l),1},update(l,u){if(!zy(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=zy(l,r),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&t1(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const bS=ue.define({static:!0});class un{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new un(e1++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(bS).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,bS.of({field:this,create:e})]}get extension(){return this}}const To={lowest:4,low:3,default:2,high:1,highest:0};function wu(t){return e=>new pR(e,t)}const pd={highest:wu(To.highest),high:wu(To.high),default:wu(To.default),low:wu(To.low),lowest:wu(To.lowest)};class pR{constructor(e,n){this.inner=e,this.prec=n}}class md{of(e){return new Fy(this,e)}reconfigure(e){return md.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Fy{constructor(e,n){this.compartment=e,this.inner=n}}class np{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let h of i8(e,n,o))h instanceof un?i.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of i)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=r==null?void 0:r.config.facets;for(let h in s){let f=s[h],p=f[0].facet,m=c&&c[h]||[];if(f.every(v=>v.type==0))if(a[p.id]=l.length<<1|1,t1(m,f))l.push(r.facet(p));else{let v=p.combine(f.map(g=>g.value));l.push(r&&p.compare(v,r.facet(p))?r.facet(p):v)}else{for(let v of f)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=u.length<<1,u.push(g=>v.dynamicSlot(g)));a[p.id]=u.length<<1,u.push(v=>r8(v,p,f))}}let d=u.map(h=>h(a));return new np(e,o,d,a,l,s)}}function i8(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof Fy&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof Fy){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof pR)s(o.inner,o.prec);else if(o instanceof un)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Qh)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,To.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,To.default),r.reduce((o,a)=>o.concat(a))}function tc(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function rp(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const mR=ue.define(),gR=ue.define({combine:t=>t.some(e=>e),static:!0}),yR=ue.define({combine:t=>t.length?t[0]:void 0,static:!0}),vR=ue.define(),wR=ue.define(),bR=ue.define(),xR=ue.define({combine:t=>t.length?t[0]:!1});class fs{constructor(e,n){this.type=e,this.value=n}static define(){return new s8}}class s8{of(e){return new fs(this,e)}}class o8{constructor(e){this.map=e}of(e){return new Me(this,e)}}class Me{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Me(this.type,n)}is(e){return this.type==e}static define(e={}){return new o8(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Me.reconfigure=Me.define();Me.appendConfig=Me.define();class It{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&fR(r,n.newLength),s.some(a=>a.type==It.time)||(this.annotations=s.concat(It.time.of(Date.now())))}static create(e,n,r,i,s,o){return new It(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(It.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}It.time=fs.define();It.userEvent=fs.define();It.addToHistory=fs.define();It.remote=fs.define();function a8(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function SR(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=Dt.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Me.mapEffects(t.effects,i).concat(Me.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function jy(t,e,n){let r=e.selection,i=cl(e.annotations);return e.userEvent&&(i=i.concat(It.userEvent.of(e.userEvent))),{changes:e.changes instanceof Dt?e.changes:Dt.of(e.changes||[],n,t.facet(yR)),selection:r&&(r instanceof U?r:U.single(r.anchor,r.head)),effects:cl(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function kR(t,e,n){let r=jy(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=SR(r,jy(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=It.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return u8(n?l8(i):i)}function l8(t){let e=t.startState,n=!0;for(let i of e.facet(vR)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:a8(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Dt.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=It.create(e,i,t.selection&&t.selection.map(s),Me.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(wR);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof It?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof It?t=s[0]:t=kR(e,cl(s),!1)}return t}function u8(t){let e=t.startState,n=e.facet(bR),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=SR(r,jy(e,s,t.changes.newLength),!0))}return r==t?t:It.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const c8=[];function cl(t){return t==null?c8:Array.isArray(t)?t:[t]}var Zt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Zt||(Zt={}));const d8=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Uy;try{Uy=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function h8(t){if(Uy)return Uy.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||d8.test(n)))return!0}return!1}function f8(t){return e=>{if(!/\S/.test(e))return Zt.Space;if(h8(e))return Zt.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Zt.Word;return Zt.Other}}class Ie{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)tc(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return tc(this,r),rp(this,r)}update(...e){return kR(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(md.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,l)=>i.set(l,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(Me.reconfigure)?(n=null,r=o.value):o.is(Me.appendConfig)&&(n=null,r=cl(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=np.resolve(r,i,this),s=new Ie(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new Ie(n,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:U.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=cl(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=i.mapDesc(u,!0);s.push(l.range.map(d)),i=i.compose(c),o=Me.mapEffects(o,c).concat(Me.mapEffects(cl(l.effects),d))}return{changes:i,selection:U.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Dt?e:Dt.of(e,this.doc.length,this.facet(Ie.lineSeparator))}toText(e){return Ge.of(e.split(this.facet(Ie.lineSeparator)||Ly))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(tc(this,n),rp(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof un&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Ie.create({doc:e.doc,selection:U.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=np.resolve(e.extensions||[],new Map),r=e.doc instanceof Ge?e.doc:Ge.of((e.doc||"").split(n.staticFacet(Ie.lineSeparator)||Ly)),i=e.selection?e.selection instanceof U?e.selection:U.single(e.selection.anchor,e.selection.head):U.single(0);return fR(i,r.length),n.staticFacet(gR)||(i=i.asSingle()),new Ie(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ie.tabSize)}get lineBreak(){return this.facet(Ie.lineSeparator)||`
`}get readOnly(){return this.facet(xR)}phrase(e,...n){for(let r of this.facet(Ie.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(mR))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return f8(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=on(n,o,!1);if(s(n.slice(l,o))!=Zt.Word)break;o=l}for(;a<i;){let l=on(n,a);if(s(n.slice(a,l))!=Zt.Word)break;a=l}return o==a?null:U.range(o+r,a+r)}}Ie.allowMultipleSelections=gR;Ie.tabSize=ue.define({combine:t=>t.length?t[0]:4});Ie.lineSeparator=yR;Ie.readOnly=xR;Ie.phrases=ue.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Ie.languageData=mR;Ie.changeFilter=vR;Ie.transactionFilter=wR;Ie.transactionExtender=bR;md.reconfigure=Me.define();function go(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class sa{eq(e){return this==e}range(e,n=e){return Vy.create(e,n,this)}}sa.prototype.startSide=sa.prototype.endSide=0;sa.prototype.point=!1;sa.prototype.mapMode=Nn.TrackDel;let Vy=class CR{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new CR(e,n,r)}};function Wy(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class n1{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),r.push(u),i.push(h-o),s.push(f-o))}return{mapped:r.length?new n1(i,s,r,a):null,pos:o}}}class ot{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ot(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(Wy)),this.isEmpty)return n.length?ot.of(n):this;let a=new ER(this,null,-1).goto(0),l=0,u=[],c=new oa;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(Vy.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?ot.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new ot(r,n,s||ot.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Uc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Uc.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=xS(o,a,r),u=new bu(o,l,s),c=new bu(a,l,s);r.iterGaps((d,h,f)=>SS(u,d,c,h,f,i)),r.empty&&r.length==0&&SS(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=xS(s,o),l=new bu(s,a,0).goto(r),u=new bu(o,a,0).goto(r);for(;;){if(l.to!=u.to||!Hy(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,n,r,i,s=-1){let o=new bu(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:Math.min(c.length,l);i.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(i.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new oa;for(let i of e instanceof Vy?[e]:n?p8(e):e)r.add(i.from,i.to,i.value);return r.finish()}}ot.empty=new ot([],[],null,-1);function p8(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Wy(e,r)>0)return t.slice().sort(Wy);e=r}return t}ot.empty.nextLayer=ot.empty;class oa{finishChunk(e){this.chunks.push(new n1(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new oa)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ot.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ot.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function xS(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class ER{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Uc{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new ER(o,n,r,s));return i.length==1?i[0]:new Uc(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ag(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ag(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ag(this.heap,0)}}}function Ag(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class bu{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Uc.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){nh(this.active,e),nh(this.activeTo,e),nh(this.activeRank,e),this.minActive=kS(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;rh(this.active,n,r),rh(this.activeTo,n,i),rh(this.activeRank,n,s),e&&rh(e,n,this.cursor.from),this.minActive=kS(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&nh(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function SS(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Hy(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!Hy(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function Hy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function nh(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function rh(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function kS(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function mm(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=on(t,i));return r}function m8(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=on(t,i)}return r===!0?-1:t.length}const Gy="ͼ",CS=typeof Symbol>"u"?"__"+Gy:Symbol.for(Gy),Xy=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ES=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ao{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(i(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((r&&!d&&!u?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ES[CS]||1;return ES[CS]=e+1,Gy+e.toString(36)}static mount(e,n){(e[Xy]||new g8(e)).mount(Array.isArray(n)?n:[n])}}let AS=new Map;class g8{constructor(e){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let i=AS.get(n);if(i)return e.adoptedStyleSheets=[i.sheet,...e.adoptedStyleSheets],e[Xy]=i;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],AS.set(n,this)}else{this.styleTag=n.createElement("style");let i=e.head||e;i.insertBefore(this.styleTag,i.firstChild)}this.modules=[],e[Xy]=this}mount(e){let n=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var lo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},y8=typeof navigator<"u"&&/Mac/.test(navigator.platform),v8=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Wt=0;Wt<10;Wt++)lo[48+Wt]=lo[96+Wt]=String(Wt);for(var Wt=1;Wt<=24;Wt++)lo[Wt+111]="F"+Wt;for(var Wt=65;Wt<=90;Wt++)lo[Wt]=String.fromCharCode(Wt+32),Vc[Wt]=String.fromCharCode(Wt);for(var Pg in lo)Vc.hasOwnProperty(Pg)||(Vc[Pg]=lo[Pg]);function w8(t){var e=y8&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||v8&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Vc:lo)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function ip(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Ky(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function b8(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function ef(t,e){if(!e.anchorNode)return!1;try{return Ky(t,e.anchorNode)}catch{return!1}}function Wc(t){return t.nodeType==3?aa(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function sp(t,e,n,r){return n?PS(t,e,n,r,-1)||PS(t,e,n,r,1):!1}function op(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function PS(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:uo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=op(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?uo(t):0}else return!1}}function uo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function r1(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function x8(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function S8(t,e,n,r,i,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body;if(f)h=x8(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let v=c.getBoundingClientRect();h={left:v.left,right:v.left+c.clientWidth,top:v.top,bottom:v.top+c.clientHeight}}let p=0,m=0;if(i=="nearest")e.top<h.top?(m=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+m&&(m=e.bottom-h.bottom+m+o)):e.bottom>h.bottom&&(m=e.bottom-h.bottom+o,n<0&&e.top-m<h.top&&(m=-(h.top+m-e.top+o)));else{let v=e.bottom-e.top,g=h.bottom-h.top;m=(i=="center"&&v<=g?e.top+v/2-g/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-g+o)-h.top}if(r=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),n>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,n<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||m)if(f)u.scrollBy(p,m);else{let v=0,g=0;if(m){let y=c.scrollTop;c.scrollTop+=m,g=c.scrollTop-y}if(p){let y=c.scrollLeft;c.scrollLeft+=p,v=c.scrollLeft-y}e={left:e.left-v,top:e.top-g,right:e.right-v,bottom:e.bottom-g},v&&Math.abs(v-p)<1&&(r="nearest"),g&&Math.abs(g-m)<1&&(i="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function k8(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class C8{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?uo(n):0),r,Math.min(e.focusOffset,r?uo(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Ta=null;function AR(t){if(t.setActive)return t.setActive();if(Ta)return t.focus(Ta);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Ta==null?{get preventScroll(){return Ta={preventScroll:!0},!0}}:void 0),!Ta){Ta=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let RS;function aa(t,e,n=e){let r=RS||(RS=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function dl(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function E8(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function PR(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function A8(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,uo(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=uo(n))}else{if(n==t)return!0;r=op(n),n=n.parentNode}}function RR(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class yn{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new yn(e.parentNode,op(e),n)}static after(e,n){return new yn(e.parentNode,op(e)+1,n)}}const i1=[];class et{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=et.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=TS(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=TS(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=uo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!et.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&i==-1&&(i=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=i1){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new TR(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}et.prototype.breakAfter=0;function TS(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class TR{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function OR(t,e,n,r,i,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==r&&c&&!o&&!h&&s.length<2&&c.merge(n,i,s.length?d:null,n==0,a,l))){if(r<u.length){let f=u[r];f&&i<f.length?(e==r&&(f=f.split(i),i=0),!h&&d&&f.merge(0,i,d,!0,0,l)?s[s.length-1]=f:(i&&f.merge(0,i,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function NR(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of r)d+=h.length;t.length+=d,OR(t,u,c,a,l,r,0,i,s)}const Za="￿";class _R{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Ie.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Za}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=et.get(i),l=et.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:OS(i))||OS(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=et.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(n,r.offset))}}function OS(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class NS{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let Jn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Zy=typeof document<"u"?document:{documentElement:{style:{}}};const Yy=/Edge\/(\d+)/.exec(Jn.userAgent),MR=/MSIE \d/.test(Jn.userAgent),Jy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jn.userAgent),gm=!!(MR||Jy||Yy),_S=!gm&&/gecko\/(\d+)/i.test(Jn.userAgent),Rg=!gm&&/Chrome\/(\d+)/.exec(Jn.userAgent),MS="webkitFontSmoothing"in Zy.documentElement.style,DR=!gm&&/Apple Computer/.test(Jn.vendor),DS=DR&&(/Mobile\/\w+/.test(Jn.userAgent)||Jn.maxTouchPoints>2);var le={mac:DS||/Mac/.test(Jn.platform),windows:/Win/.test(Jn.platform),linux:/Linux|X11/.test(Jn.platform),ie:gm,ie_version:MR?Zy.documentMode||6:Jy?+Jy[1]:Yy?+Yy[1]:0,gecko:_S,gecko_version:_S?+(/Firefox\/(\d+)/.exec(Jn.userAgent)||[0,0])[1]:0,chrome:!!Rg,chrome_version:Rg?+Rg[1]:0,ios:DS,android:/Android\b/.test(Jn.userAgent),webkit:MS,safari:DR,webkit_version:MS?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Zy.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const P8=256;class ki extends et{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof ki)||this.length-(n-e)+r.length>P8||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new ki(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new yn(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return R8(this.dom,e,n)}}class cs extends et{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(PR(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof cs&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(NR(this,e,n,r?r.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new cs(this.mark,n,o)}domAtPos(e){return $R(this,e)}coordsAt(e,n){return IR(this,e,n)}}function R8(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?le.chrome||le.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=aa(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return le.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?r1(l,o<0):l||null}class Bo extends et{constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}static create(e,n,r){return new Bo(e,n,r)}split(e){let n=Bo.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof Bo)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Bo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ge.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Ge.empty}domAtPos(e){return(this.length?e==0:this.side>0)?yn.before(this.dom):yn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return r1(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Bl extends et{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Bl&&e.side==this.side}split(){return new Bl(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?yn.before(this.dom):yn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ge.empty}get isHidden(){return!0}}ki.prototype.children=Bo.prototype.children=Bl.prototype.children=i1;function $R(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new yn(n,0)}function LR(t,e,n){let r,{children:i}=t;n>0&&e instanceof cs&&i.length&&(r=i[i.length-1])instanceof cs&&r.mark.eq(e.mark)?LR(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function IR(t,e,n){let r=null,i=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(r=f,i=c-h)),h=p}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):T8(t)}function T8(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Wc(e);return n[n.length-1]||null}function qy(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const $S=Object.create(null);function s1(t,e,n){if(t==e)return!0;t||(t=$S),e||(e=$S);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Qy(t,e,n){let r=null;if(e)for(let i in e)n&&i in n||t.removeAttribute(r=i);if(n)for(let i in n)e&&e[i]==n[i]||t.setAttribute(r=i,n[i]);return!!r}function O8(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class va{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}destroy(e){}}var yt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(yt||(yt={}));class Ue extends sa{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new gd(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new co(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=BR(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new co(e,r,i,n,e.widget||null,!0)}static line(e){return new yd(e)}static set(e,n=!1){return ot.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ue.none=ot.empty;class gd extends Ue{constructor(e){let{start:n,end:r}=BR(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof gd&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&s1(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}gd.prototype.point=!1;class yd extends Ue{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof yd&&this.spec.class==e.spec.class&&s1(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}yd.prototype.mapMode=Nn.TrackBefore;yd.prototype.point=!0;class co extends Ue{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?Nn.TrackBefore:Nn.TrackAfter:Nn.TrackDel}get type(){return this.startSide<this.endSide?yt.WidgetRange:this.startSide<=0?yt.WidgetBefore:yt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof co&&N8(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}co.prototype.point=!0;function BR(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function N8(t,e){return t==e||!!(t&&e&&t.compare(e))}function ev(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class gn extends et{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof gn))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),NR(this,e,n,r?r.children:[],s,o),!0}split(e){let n=new gn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){s1(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){LR(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=qy(n,this.attrs||{})),r&&(this.attrs=qy({class:r},this.attrs||{}))}domAtPos(e){return $R(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(PR(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Qy(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&et.get(i)instanceof cs;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=et.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!le.ios||!this.children.some(s=>s instanceof ki))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof ki)||/[^ -~]/.test(r.text))return null;let i=Wc(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=IR(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return!1}get type(){return yt.Text}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof gn)return s;if(o>n)break}i=o+s.breakAfter}return null}}class Go extends et{constructor(e,n,r){super(),this.widget=e,this.length=n,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof Go)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?yn.before(this.dom):yn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Go(this.widget,n,this.type);return r.breakAfter=this.breakAfter,r}get children(){return i1}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ge.empty}domBoundsAround(){return null}become(e){return e instanceof Go&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class nc{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Go&&e.type==yt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new gn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ih(new Bl(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(ih(new ki(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof co){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof co)if(r.block){let{type:l}=r;l==yt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Go(r.widget||new LS("div"),a,l))}else{let l=Bo.create(r.widget||new LS("span"),a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(d.append(ih(new Bl(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(ih(l,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new nc(e,n,r,s);return o.openEnd=ot.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ih(t,e){for(let n of e)t=new cs(n,[t],t.length);return t}class LS extends va{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const zR=ue.define(),FR=ue.define(),jR=ue.define(),UR=ue.define(),tv=ue.define(),VR=ue.define(),WR=ue.define(),HR=ue.define({combine:t=>t.some(e=>e)}),GR=ue.define({combine:t=>t.some(e=>e)});class ap{constructor(e,n="nearest",r="nearest",i=5,s=5){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s}map(e){return e.empty?this:new ap(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const IS=Me.define({map:(t,e)=>t.map(e)});function Wr(t,e,n){let r=t.facet(UR);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const ym=ue.define({combine:t=>t.length?t[0]:!0});let _8=0;const zu=ue.define();class qt{constructor(e,n,r,i){this.id=e,this.create=n,this.domEventHandlers=r,this.extension=i(this)}static define(e,n){const{eventHandlers:r,provide:i,decorations:s}=n||{};return new qt(_8++,e,r,o=>{let a=[zu.of(o)];return s&&a.push(Hc.of(l=>{let u=l.plugin(o);return u?s(u):Ue.none})),i&&a.push(i(o)),a})}static fromClass(e,n){return qt.define(r=>new e(r),n)}}class Tg{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Wr(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Wr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Wr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const XR=ue.define(),o1=ue.define(),Hc=ue.define(),a1=ue.define(),KR=ue.define();function ZR(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(KR)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Fu=ue.define();class xr{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new xr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new xr(f+u,p+u,f,p).addToSet(r),h>c)break;s+=2}if(!l)return r;new xr(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class lp{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Dt.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new xr(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new lp(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var pt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(pt||(pt={}));const nv=pt.LTR,M8=pt.RTL;function YR(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const D8=YR("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),$8=YR("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),rv=Object.create(null),Jr=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);rv[e]=n,rv[n]=-e}function L8(t){return t<=247?D8[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?$8[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const I8=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class hl{constructor(e,n,r){this.from=e,this.to=n,this.level=r}get dir(){return this.level%2?M8:nv}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const ct=[];function B8(t,e){let n=t.length,r=e==nv?1:2,i=e==nv?2:1;if(!t||r==1&&!I8.test(t))return JR(n);for(let o=0,a=r,l=r;o<n;o++){let u=L8(t.charCodeAt(o));u==512?u=a:u==8&&l==4&&(u=16),ct[o]=u==4?2:u,u&7&&(l=u),a=u}for(let o=0,a=r,l=r;o<n;o++){let u=ct[o];if(u==128)o<n-1&&a==ct[o+1]&&a&24?u=ct[o]=a:ct[o]=256;else if(u==64){let c=o+1;for(;c<n&&ct[c]==64;)c++;let d=o&&a==8||c<n&&ct[c]==8?l==1?1:8:256;for(let h=o;h<c;h++)ct[h]=d;o=c-1}else u==8&&l==1&&(ct[o]=1);a=u,u&7&&(l=u)}for(let o=0,a=0,l=0,u,c,d;o<n;o++)if(c=rv[u=t.charCodeAt(o)])if(c<0){for(let h=a-3;h>=0;h-=3)if(Jr[h+1]==-c){let f=Jr[h+2],p=f&2?r:f&4?f&1?i:r:0;p&&(ct[o]=ct[Jr[h]]=p),a=h;break}}else{if(Jr.length==189)break;Jr[a++]=o,Jr[a++]=u,Jr[a++]=l}else if((d=ct[o])==2||d==1){let h=d==r;l=h?0:1;for(let f=a-3;f>=0;f-=3){let p=Jr[f+2];if(p&2)break;if(h)Jr[f+2]|=2;else{if(p&4)break;Jr[f+2]|=4}}}for(let o=0;o<n;o++)if(ct[o]==256){let a=o+1;for(;a<n&&ct[a]==256;)a++;let l=(o?ct[o-1]:r)==1,u=(a<n?ct[a]:r)==1,c=l==u?l?1:2:r;for(let d=o;d<a;d++)ct[d]=c;o=a-1}let s=[];if(r==1)for(let o=0;o<n;){let a=o,l=ct[o++]!=1;for(;o<n&&l==(ct[o]!=1);)o++;if(l)for(let u=o;u>a;){let c=u,d=ct[--u]!=2;for(;u>a&&d==(ct[u-1]!=2);)u--;s.push(new hl(u,c,d?2:1))}else s.push(new hl(a,o,0))}else for(let o=0;o<n;){let a=o,l=ct[o++]==2;for(;o<n&&l==(ct[o]==2);)o++;s.push(new hl(a,o,l?1:2))}return s}function JR(t){return[new hl(0,t,0)]}let qR="";function z8(t,e,n,r,i){var s;let o=r.head-t.from,a=-1;if(o==0){if(!i||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),a=0)}else if(o==t.length){if(i)return null;let h=e[e.length-1];h.level!=n&&(o=h.side(!0,n),a=e.length-1)}a<0&&(a=hl.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc));let l=e[a];o==l.side(i,n)&&(l=e[a+=i?1:-1],o=l.side(!i,n));let u=i==(l.dir==n),c=on(t.text,o,u);if(qR=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=l.side(i,n))return U.cursor(c+t.from,u?-1:1,l.level);let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return!d&&l.level!=n?U.cursor(i?t.to:t.from,i?-1:1,n):d&&d.level<l.level?U.cursor(d.side(!i,n)+t.from,i?1:-1,d.level):U.cursor(c+t.from,i?-1:1,l.level)}class BS extends et{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new gn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xr(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=this.view.inputState.composing<0?null:j8(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:a,to:l}=this.hasComposition;n=new xr(a,l,e.changes.mapPos(a,-1),e.changes.mapPos(l,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(le.ie||le.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,s=this.updateDeco(),o=W8(i,s,e.changes);return n=xr.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=le.chrome||le.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Go&&o.widget instanceof zS&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,m;if(r&&r.range.fromB<d&&r.range.toB>c){let b=nc.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),S=nc.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);f=b.breakAtStart,p=b.openStart,m=S.openEnd;let A=this.compositionView(r);S.breakAtStart?A.breakAfter=1:S.content.length&&A.merge(A.length,A.length,S.content[0],!1,S.openStart,0)&&(A.breakAfter=S.content[0].breakAfter,S.content.shift()),b.content.length&&A.merge(0,0,b.content[b.content.length-1],!0,0,b.openEnd)&&b.content.pop(),h=b.content.concat(A).concat(S.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:m}=nc.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:g}=s.findPos(u,1),{i:y,off:w}=s.findPos(l,-1);OR(this,y,w,v,g,h,f,p,m)}r&&this.fixCompositionDOM(r)}compositionView(e){let n=new ki(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new cs(i,[n],n.length);let r=new gn;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let a=et.get(s);a!=o&&(a&&(a.dom=null),o.setDOM(s))},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&ef(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.domAtPos(a.anchor),u=a.empty?l:this.domAtPos(a.head);if(le.gecko&&a.empty&&!this.hasComposition&&F8(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new yn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!sp(l.node,l.offset,c.anchorNode,c.anchorOffset)||!sp(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{le.android&&le.chrome&&this.dom.contains(c.focusNode)&&H8(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=ip(this.view.root);if(d)if(a.empty){if(le.gecko){let h=U8(l.node,l.offset);if(h&&h!=3){let f=eT(l.node,l.offset,h==1?1:-1);f&&(l=new yn(f,h==1?0:f.nodeValue.length))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new yn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new yn(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=ip(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=gn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(i,s)}nearest(e){for(let n=e;n;){let r=et.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof gn)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){for(let r=this.length,i=this.children.length-1;;i--){let s=this.children[i],o=r-s.breakAfter-s.length;if(e>o||e==o&&s.type!=yt.WidgetBefore&&s.type!=yt.WidgetAfter&&(!i||n==2||this.children[i-1].breakAfter||this.children[i-1].type==yt.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);r=o}}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof gn))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof ki))return null;let s=on(i.text,r);if(s==r)return null;let o=aa(i.dom,r,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==pt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>i)break;if(u>=r){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,m=p?Wc(p):[];if(m.length){let v=m[m.length-1],g=l?v.right-f.left:f.right-v.left;g>a&&(a=g,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?pt.RTL:pt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof gn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Wc(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new TR(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=n.lineBlockAt(o).bottom-n.lineBlockAt(r).top;e.push(Ue.replace({widget:new zS(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Ue.set(e)}updateDeco(){let e=this.view.state.facet(Hc).map((n,r)=>(this.dynamicDecorationMap[r]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=ZR(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom};S8(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==pt.LTR)}}function F8(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class zS extends va{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function QR(t){let e=t.observer.selectionRange,n=e.focusNode&&eT(e.focusNode,e.focusOffset,0);if(!n)return null;let r=et.get(n),i,s;if(r instanceof ki)i=r.posAtStart,s=i+r.length;else e:for(let o=0,a=n;;){for(let u=a.previousSibling,c;u;u=u.previousSibling){if(c=et.get(u)){i=s=c.posAtEnd+o;break e}let d=new _R([],t.state);if(d.readNode(u),d.text.indexOf(Za)>-1)return null;o+=d.text.length}if(a=a.parentNode,!a)return null;let l=et.get(a);if(l){i=s=l.posAtStart+o;break}}return{from:i,to:s,node:n}}function j8(t,e){let n=QR(t);if(!n)return null;let{from:r,to:i,node:s}=n,o=e.mapPos(r,-1),a=e.mapPos(i,1),l=s.nodeValue;if(/[\n\r]/.test(l))return null;if(a-o!=l.length){let h=e.mapPos(r,1),f=e.mapPos(i,-1);if(f-h==l.length)o=h,a=f;else if(t.state.doc.sliceString(a-l.length,a)==l)o=a-l.length;else if(t.state.doc.sliceString(o,o+l.length)==l)a=o+l.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,a)!=l||o>u.head||a<u.head)return null;let c=[],d=new xr(r,i,o,a);for(let h=s.parentNode;;h=h.parentNode){let f=et.get(h);if(f instanceof cs)c.push({node:h,deco:f.mark});else{if(f instanceof gn||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:d,text:s,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new gd({inclusive:!0,attributes:O8(h),tagName:h.tagName.toLowerCase()})});else return null}}}function eT(t,e,n){if(n<=0)for(let r=t,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i>0)r=r.childNodes[i-1],i=uo(r);else break}if(n>=0)for(let r=t,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i<r.childNodes.length&&n>=0)r=r.childNodes[i],i=0;else break}return null}function U8(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class V8{constructor(){this.changes=[]}compareRange(e,n){ev(e,n,this.changes)}comparePoint(e,n){ev(e,n,this.changes)}}function W8(t,e,n){let r=new V8;return ot.compare(t,e,n,r),r.changes}function H8(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function G8(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return U.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=on(i.text,s,!1):a=on(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let u=on(i.text,o,!1);if(r(i.text.slice(u,o))!=l)break;o=u}for(;a<i.length;){let u=on(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return U.range(o+i.from,a+i.from)}function X8(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function K8(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Og(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function FS(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function jS(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function iv(t,e,n){let r,i,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let m=Wc(p);for(let v=0;v<m.length;v++){let g=m[v];i&&Og(i,g)&&(g=FS(jS(g,i.bottom),i.top));let y=X8(e,g),w=K8(n,g);if(y==0&&w==0)return p.nodeType==3?US(p,e,n):iv(p,e,n);if(!r||o>w||o==w&&s>y){r=p,i=g,s=y,o=w;let b=w?n<g.top?-1:1:y?e<g.left?-1:1:0;a=!b||(b>0?v<m.length-1:v>0)}y==0?n>g.bottom&&(!c||c.bottom<g.bottom)?(l=p,c=g):n<g.top&&(!d||d.top>g.top)&&(u=p,d=g):c&&Og(c,g)?c=jS(c,g.bottom):d&&Og(d,g)&&(d=FS(d,g.top))}}if(c&&c.bottom>=n?(r=l,i=c):d&&d.top<=n&&(r=u,i=d),!r)return{node:t,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return US(r,h,n);if(a&&r.contentEditable!="false")return iv(r,h,n);let f=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:f}}function US(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=aa(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((le.chrome||le.gecko)&&aa(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};i=a+(f?1:0),s=d}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function tT(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let b=t.viewState.heightOracle.textHeight/2,S=!1;l=t.elementAtHeight(h),l.type!=yt.Text;)for(;h=r>0?l.bottom+b:l.top-b,!(h>=0&&h<=u);){if(S)return n?null:0;S=!0,r=-r}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:VS(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:VS(t,o,l,c,d);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,v=m.elementFromPoint(c,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(c=Math.max(o.left+1,Math.min(o.right-1,c)),v=m.elementFromPoint(c,d),v&&!t.contentDOM.contains(v)&&(v=null));let g,y=-1;if(v&&((i=t.docView.nearest(v))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let b=p.caretPositionFromPoint(c,d);b&&({offsetNode:g,offset:y}=b)}else if(p.caretRangeFromPoint){let b=p.caretRangeFromPoint(c,d);b&&({startContainer:g,startOffset:y}=b,(!t.contentDOM.contains(g)||le.safari&&Z8(g,y,c)||le.chrome&&Y8(g,y,c))&&(g=void 0))}}if(!g||!t.docView.dom.contains(g)){let b=gn.find(t.docView,f);if(!b)return h>l.top+l.height/2?l.to:l.from;({node:g,offset:y}=iv(b.dom,c,d))}let w=t.docView.nearest(g);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let b=w.dom.getBoundingClientRect();return e.y<b.top||e.y<=b.bottom&&e.x<=(b.left+b.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(g,y)+w.posAtStart}function VS(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+m8(o,s,t.state.tabSize)}function Z8(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return aa(t,r-1,r).getBoundingClientRect().left>n}function Y8(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():aa(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function sv(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==yt.Text))return r}return n}function J8(t,e,n,r){let i=sv(t,e.head),s=!r||i.type!=yt.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==pt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return U.cursor(l,n?-1:1)}return U.cursor(n?i.to:i.from,n?-1:1)}function WS(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let u=z8(i,s,o,a,n),c=qR;if(!u){if(i.number==(n?t.state.doc.lines:1))return a;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=U.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function q8(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==Zt.Space&&(i=o),i==o}}function Q8(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return U.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=r??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,m=tT(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<i:m>i))return U.cursor(m,e.assoc,void 0,o)}}function tf(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function Ng(t,e,n){let r=tf(t.state.facet(a1).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:U.cursor(r,r<n.from?1:-1)}class ez{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(r,i)=>{this.ignoreDuringComposition(i)||i.type=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():r(e,i))};for(let r in Ot){let i=Ot[r];e.contentDOM.addEventListener(r,s=>{HS(e,s)&&n(i,s)},ov[r]),this.registeredEvents.push(r)}e.scrollDOM.addEventListener("mousedown",r=>{if(r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(Ot.mousedown,r),!r.defaultPrevented&&r.button==2)){let i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=i,200)}}),e.scrollDOM.addEventListener("drop",r=>{r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(Ot.drop,r)}),le.chrome&&le.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,le.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var r;let i;this.customHandlers=[];for(let s of n)if(i=(r=s.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});for(let o in i)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{HS(e,a)&&this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,n,r){for(let i of this.customHandlers){let s=i.handlers[e];if(s)try{if(s.call(i.plugin,r,n)||r.defaultPrevented)return!0}catch(o){Wr(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,n,e)}catch(s){Wr(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&rT.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),le.android&&le.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return le.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((r=nT.find(i=>i.keyCode==n.keyCode))&&!n.ctrlKey||tz.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=r||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,dl(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:le.safari&&!le.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const nT=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tz="dthko",rT=[16,17,18,20,91,92,224,225],sh=6;function oh(t){return Math.max(0,t)*.7+8}function nz(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class rz{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=k8(e.contentDOM),this.atoms=e.state.facet(a1).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Ie.allowMultipleSelections)&&iz(e,n),this.dragging=oz(e,n)&&aT(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&nz(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=ZR(this.view);e.clientX-o.left<=s.left+sh?r=-oh(s.left-e.clientX):e.clientX+o.right>=s.right-sh&&(r=oh(e.clientX-s.right)),e.clientY-o.top<=s.top+sh?i=-oh(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-sh&&(i=oh(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=tf(this.atoms,i.from,0);o!=i.from&&(s=U.cursor(o,-1))}else{let o=tf(this.atoms,i.from,-1),a=tf(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=U.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?U.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection)||r.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function iz(t,e){let n=t.state.facet(zR);return n.length?n[0](e):le.mac?e.metaKey:e.ctrlKey}function sz(t,e){let n=t.state.facet(FR);return n.length?n[0](e):le.mac?!e.altKey:!e.ctrlKey}function oz(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=ip(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function HS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=et.get(n))&&r.ignoreEvent(e))return!1;return!0}const Ot=Object.create(null),ov=Object.create(null),iT=le.ie&&le.ie_version<15||le.ios&&le.webkit_version<604;function az(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),sT(t,n.value)},50)}function sT(t,e){let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(av!=null&&n.selection.ranges.every(l=>l.empty)&&av==s.toString()){let l=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:U.cursor(u.from+d.length)}})}else o?r=n.changeByRange(l=>{let u=s.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:U.cursor(l.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Ot.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};Ot.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ot.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ov.touchstart=ov.touchmove={passive:!0};Ot.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of t.state.facet(jR))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=cz(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new rz(t,e,n,r)),r&&t.observer.ignore(()=>AR(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function GS(t,e,n,r){if(r==1)return U.cursor(e,n);if(r==2)return G8(t.state,e,n);{let i=gn.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,U.range(o,a)}}let oT=(t,e)=>t>=e.top&&t<=e.bottom,XS=(t,e,n)=>oT(e,n)&&t>=n.left&&t<=n.right;function lz(t,e,n,r){let i=gn.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&XS(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&XS(n,r,a)?1:o&&oT(r,o)?-1:1}function KS(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:lz(t,n,e.clientX,e.clientY)}}const uz=le.ie&&le.ie_version<=11;let ZS=null,YS=0,JS=0;function aT(t){if(!uz)return t.detail;let e=ZS,n=JS;return ZS=t,JS=Date.now(),YS=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(YS+1)%3:1}function cz(t,e){let n=KS(t,e),r=aT(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=KS(t,s),u,c=GS(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let d=GS(t,n.pos,n.bias,r),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?U.range(h,f):U.range(f,h)}return o?i.replaceRange(i.main.extend(c.from,c.to)):a&&r==1&&i.ranges.length>1&&(u=dz(i,l.pos))?u:a?i.addRange(c):U.create([c])}}}function dz(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return U.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Ot.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:r}=t.inputState;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function qS(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=r&&s&&s.dragging&&sz(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"})}Ot.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let r=Array(n.length),i=0,s=()=>{++i==n.length&&qS(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}}else qS(t,e,e.dataTransfer.getData("Text"),!0)};Ot.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=iT?null:e.clipboardData;n?(sT(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):az(t)};function hz(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function fz(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let av=null;Ot.copy=Ot.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=fz(t.state);if(!n&&!i)return;av=i?n:null;let s=iT?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):hz(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const lT=fs.define();function uT(t,e){let n=[];for(let r of t.facet(WR)){let i=r(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:lT.of(!0)}):null}function cT(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=uT(t.state,e);n?t.dispatch(n):t.update([])}},10)}Ot.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),cT(t)};Ot.blur=t=>{t.observer.clearSelectionRange(),cT(t)};Ot.compositionstart=Ot.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};Ot.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,le.chrome&&le.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};Ot.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Ot.beforeinput=(t,e)=>{var n;let r;if(le.chrome&&le.android&&(r=nT.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const QS=["pre-wrap","normal","pre-line","break-spaces"];class pz{constructor(e){this.lineWrapping=e,this.doc=Ge.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return QS.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=QS.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class mz{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class di{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?yt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof co?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new di(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var it=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(it||(it={}));const nf=.001;class bn{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>nf&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return bn.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=i[a],h=s.lineAt(l,it.ByPosNoHeight,r.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,it.ByPosNoHeight,r,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,it.ByPosNoHeight,r,0,0));c+=h.from-l,l=h.from;let p=l1.build(r.setDoc(o),e,c,d);s=s.replace(l,u,p)}return s.updateHeight(r,0)}static empty(){return new Kn(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new gz(bn.of(e.slice(0,n)),o,bn.of(e.slice(r)))}}bn.prototype.size=1;class dT extends bn{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new di(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Kn extends dT{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new di(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Kn||i instanceof Ut&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Ut?i=new Kn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):bn.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ut extends bn{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(r,e-d/2);return new di(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:d}=n.doc.line(s+u);return new di(c,d,r+a*u,a,0)}}lineAt(e,n,r,i,s){if(n==it.ByHeight)return this.blockAt(e,r,i,s);if(n==it.ByPosNoHeight){let{from:f,to:p}=r.doc.lineAt(e);return new di(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=i+a*d+l*(u.from-s-d);return new di(u.from,u.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let c=e,d=i;c<=n;){let h=r.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new di(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Ut?r[r.length-1]=new Ut(s.length+i):r.push(null,new Ut(i-1))}if(e>0){let s=r[0];s instanceof Ut?r[0]=new Ut(e+s.length):r.unshift(new Ut(e-1),null)}return bn.of(r)}decomposeLeft(e,n){n.push(new Ut(e-1),null)}decomposeRight(e,n){n.push(null,new Ut(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new Ut(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=nf&&(l=-2);let h=new Kn(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new Ut(s-a).updateHeight(e,a));let u=bn.of(o);return(l<0||Math.abs(u.height-this.height)>=nf||Math.abs(l-this.heightMetrics(e,n).perLine)>=nf)&&(e.heightChanged=!0),u}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class gz extends bn{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==it.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==it.ByPosNoHeight?it.ByPosNoHeight:it.ByPos;return l?u.join(this.right.lineAt(a,c,r,o,a)):this.left.lineAt(a,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let u=this.lineAt(l,it.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&ek(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),ek(s,a)}return bn.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?bn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ek(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Ut&&(r=t[e+1])instanceof Ut&&t.splice(e-1,3,new Ut(n.length+1+r.length))}const yz=5;class l1{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Kn?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Kn(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new dT(o,i,r)):(o||s||i>=yz)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Kn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Ut(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Kn)return e;let n=new Kn(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let r=(n=e.deco)===null||n===void 0?void 0:n.type;r==yt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r!=yt.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Kn)&&!this.isCovered?this.nodes.push(new Kn(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Kn&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new l1(r,e);return ot.spans(n,r,i,s,0),s.finish(r)}}function vz(t,e,n){let r=new wz;return ot.compare(t,e,n,r,0),r.changes}class wz{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&ev(e,n,this.changes,5)}}function bz(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=u==t.parentNode?h.bottom:Math.min(l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function xz(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class _g{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e){return Ue.replace({widget:new Sz(this.size,e)}).range(this.from,this.to)}}class Sz extends va{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class tk{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=nk,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=pt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(o1).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new pz(n),this.stateDeco=e.facet(Hc).filter(r=>typeof r!="function"),this.heightMap=bn.empty().applyChanges(this.stateDeco,Ge.empty,this.heightOracle.setDoc(e.doc),[new xr(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ue.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new ah(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?nk:new Ez(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:ju(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Hc).filter(c=>typeof c!="function");let i=e.changedRanges,s=xr.extendWithRanges(i,vz(r,this.stateDeco,e?e.changes:Dt.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(GR)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?pt.RTL:pt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0,d=parseInt(r.paddingTop)||0,h=parseInt(r.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=RR(e.scrollDOM);let f=(this.printing?xz:bz)(n,this.paddingTop),p=f.top-this.pixelViewport.top,m=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let g=a.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let w=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(w)&&(o=!0),o||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:b,charWidth:S,textHeight:A}=e.docView.measureTextSize();o=b>0&&i.refresh(s,b,S,A,g/S,w),o&&(e.docView.minWidth=0,u|=8)}p>0&&m>0?c=Math.max(p,m):p<0&&m<0&&(c=Math.min(p,m)),i.heightChanged=!1;for(let b of this.viewports){let S=b.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(b);this.heightMap=(o?bn.empty().applyChanges(this.stateDeco,Ge.empty,this.heightOracle,[new xr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new mz(b.from,S))}i.heightChanged&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new ah(i.lineAt(o-r*1e3,it.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,it.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(u,it.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new ah(i.lineAt(h-1e3/2,it.ByHeight,s,0,0).from,i.lineAt(h+c+1e3/2,it.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new ah(this.heightMap.lineAt(r,it.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,it.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,it.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,it.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new _g(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=pt.LTR&&!r)return[];let a=[],l=(u,c,d,h)=>{if(c-u<s)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let v of p)if(v>u&&v<c){l(u,v-10,d,h),l(v+10,c,d,h);return}let m=Cz(e,v=>v.from>=d.from&&v.to<=d.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-c)<s&&!p.some(g=>v.from<g&&v.to>g));if(!m){if(c<d.to&&n&&r&&n.visibleRanges.some(v=>v.from<=c&&v.to>=c)){let v=n.moveToLineBoundary(U.cursor(c),!1,!0).head;v>u&&(c=v)}m=new _g(u,c,this.gapSize(d,u,c,h))}a.push(m)};for(let u of this.viewportLines){if(u.length<o)continue;let c=kz(u.from,u.to,this.stateDeco);if(c.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(r){let p=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,v;if(d!=null){let g=uh(c,d),y=((this.visibleBottom-this.visibleTop)/2+p)/u.height;m=g-y,v=g+y}else m=(this.visibleTop-u.top-p)/u.height,v=(this.visibleBottom-u.top+p)/u.height;h=lh(c,m),f=lh(c,v)}else{let p=c.total*this.heightOracle.charWidth,m=i*this.heightOracle.charWidth,v,g;if(d!=null){let y=uh(c,d),w=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/p;v=y-w,g=y+w}else v=(this.pixelViewport.left-m)/p,g=(this.pixelViewport.right+m)/p;h=lh(c,v),f=lh(c,g)}h>u.from&&l(u.from,h,u,c),f<u.to&&l(f,u.to,u,c)}return a}gapSize(e,n,r,i){let s=uh(i,r)-uh(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){_g.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ue.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ot.spans(e,this.viewport.from,this.viewport.to,{span(i,s){n.push({from:i,to:s})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=n[s].from||i.to!=n[s].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||ju(this.heightMap.lineAt(e,it.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return ju(this.heightMap.lineAt(this.scaler.fromDOM(e),it.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return ju(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ah{constructor(e,n){this.from=e,this.to=n}}function kz(t,e,n){let r=[],i=t,s=0;return ot.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function lh({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function uh(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function Cz(t,e){for(let n of t)if(e(n))return n}const nk={toDOM(t){return t},fromDOM(t){return t},scale:1};class Ez{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let u=n.lineAt(a,it.ByPos,e,0,0).top,c=n.lineAt(l,it.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function ju(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new di(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>ju(i,e)):t._content)}const ch=ue.define({combine:t=>t.join(" ")}),lv=ue.define({combine:t=>t.indexOf(!0)>-1}),uv=ao.newName(),hT=ao.newName(),fT=ao.newName(),pT={"&light":"."+hT,"&dark":"."+fT};function cv(t,e,n){return new ao(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const Az=cv("."+uv,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},pT);class Pz{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:Tz(e),l=new _R(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Oz(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Ky(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Ky(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=U.single(u,l)}}}function mT(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,u=null;(s===8||le.android&&e.text.length<a-o)&&(l=i.to,u="end");let c=Rz(t.state.doc.sliceString(o,a,Za),e.text,l-o,u);c&&(le.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Za+Za&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:Ge.of(e.text.slice(c.from,c.toB).split(Za))})}else r&&(!t.hasFocus&&t.state.facet(ym)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(le.mac||le.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=U.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Ge.of([" "])}):le.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=U.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Ge.of([" "])}),n){let o=t.state;if(le.ios&&t.inputState.flushIOSKey(t)||le.android&&(n.from==i.from&&n.to==i.to&&n.insert.length==1&&n.insert.lines==2&&dl(t.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&dl(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&n.insert.length==0&&dl(t.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(t.state.facet(VR).some(c=>c(t,n.from,n.to,a)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let l;if(n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=i.from<n.from?o.sliceDoc(i.from,n.from):"",d=i.to>n.to?o.sliceDoc(n.to,i.to):"";l=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let c=o.changes(n),d=r&&r.main.to<=c.newLength?r.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let h=t.state.sliceDoc(n.from,n.to),f=QR(t)||t.state.doc.lineAt(i.head),p=i.to-n.to,m=i.to-i.from;l=o.changeByRange(v=>{if(v.from==i.from&&v.to==i.to)return{changes:c,range:d||v.map(c)};let g=v.to-p,y=g-h.length;if(v.to-v.from!=m||t.state.sliceDoc(y,g)!=h||f&&v.to>=f.from&&v.from<=f.to)return{range:v};let w=o.changes({from:y,to:g,insert:n.insert}),b=v.to-i.to;return{changes:w,range:d?U.range(Math.max(0,d.anchor+b),Math.max(0,d.head+b)):v.map(w)}})}else l={changes:c,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(l,{scrollIntoView:!0,userEvent:u}),!0}else if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function Rz(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Tz(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new NS(n,r)),(i!=n||s!=r)&&e.push(new NS(i,s))),e}function Oz(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?U.single(n+e,r+e):null}const Nz={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Mg=le.ie&&le.ie_version<=11;class _z{constructor(e){this.view=e,this.active=!1,this.selectionRange=new C8,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(le.ie&&le.ie_version<=11||le.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Mg&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(ym)?r.root.activeElement!=this.dom:!ef(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(le.ie&&le.ie_version<=11||le.android&&le.chrome)&&!r.state.selection.main.empty&&i.focusNode&&sp(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=le.safari&&e.root.nodeType==11&&b8(this.dom.ownerDocument)==this.dom&&Mz(this.view)||ip(e.root);if(!n||this.selectionRange.eq(n))return!1;let r=ef(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&A8(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Nz),Mg&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Mg&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&dl(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&ef(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Pz(this.view,e,n,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let r=this.view.state,i=mT(this.view,n);return this.view.state==r&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=rk(n,e.previousSibling||e.target.previousSibling,-1),i=rk(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,r,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect(),(i=this.resizeContent)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function rk(t,e,n){for(;e;){let r=et.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Mz(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return sp(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class fe{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||E8(e.parent)||document,this.viewState=new tk(e.state||Ie.create(e)),this.plugins=this.state.facet(zu).map(n=>new Tg(n));for(let n of this.plugins)n.update(this);this.observer=new _z(this),this.inputState=new ez(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new BS(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof It?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(lT))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=uT(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(Ie.phrases)!=this.state.facet(Ie.phrases))return this.setState(s);i=lp.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new ap(f.empty?f:U.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(IS)&&(d=f.value)}this.viewState.update(i,d),this.bidiCache=up.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Fu)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(ch)!=i.state.facet(ch)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let h of this.state.facet(tv))h(i);(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!mT(this,c)&&u.force&&dl(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new tk(e),this.plugins=e.facet(zu).map(r=>new Tg(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new BS(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(zu),r=e.state.facet(zu);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new Tg(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,{scrollTop:i}=r,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;i!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(RR(r))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(i);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return Wr(this.state,p),ik}}),d=lp.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let f=0;f<u.length;f++)if(c[f]!=ik)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){Wr(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=r.scrollTop=i+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(tv))a(n)}get themeClasses(){return uv+" "+(this.state.facet(lv)?fT:hT)+" "+this.state.facet(ch)}updateAttrs(){let e=sk(this,XR,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ym)?"true":"false",class:"cm-content",style:`${le.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),sk(this,o1,n);let r=this.observer.ignore(()=>{let i=Qy(this.contentDOM,this.contentAttrs,n),s=Qy(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(fe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Fu),ao.mount(this.root,this.styleModules.concat(Az).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Ng(this,e,WS(this,e,n,r))}moveByGroup(e,n){return Ng(this,e,WS(this,e,n,r=>q8(this,e.head,r)))}moveToLineBoundary(e,n,r=!0){return J8(this,e,n,r)}moveVertically(e,n,r){return Ng(this,e,Q8(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),tT(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[hl.find(s,e-i.from,-1,n)];return r1(r,o.dir==pt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(HR)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Dz)return JR(e.length);let n=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n)return i.order;let r=B8(e.text,n);return this.bidiCache.push(new up(e.from,e.to,n,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||le.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{AR(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return IS.of(new ap(typeof e=="number"?U.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return qt.define(()=>({}),{eventHandlers:e})}static theme(e,n){let r=ao.newName(),i=[ch.of(r),Fu.of(cv(`.${r}`,e))];return n&&n.dark&&i.push(lv.of(!0)),i}static baseTheme(e){return pd.lowest(Fu.of(cv("."+uv,e,pT)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&et.get(r)||et.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}fe.styleModule=Fu;fe.inputHandler=VR;fe.focusChangeEffect=WR;fe.perLineTextDirection=HR;fe.exceptionSink=UR;fe.updateListener=tv;fe.editable=ym;fe.mouseSelectionStyle=jR;fe.dragMovesSelection=FR;fe.clickAddsSelectionRange=zR;fe.decorations=Hc;fe.atomicRanges=a1;fe.scrollMargins=KR;fe.darkTheme=lv;fe.contentAttributes=o1;fe.editorAttributes=XR;fe.lineWrapping=fe.contentAttributes.of({class:"cm-lineWrapping"});fe.announce=Me.define();const Dz=4096,ik={};class up{constructor(e,n,r,i){this.from=e,this.to=n,this.dir=r,this.order=i}static update(e,n){if(n.empty)return e;let r=[],i=e.length?e[e.length-1].dir:pt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new up(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return r}}function sk(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&qy(o,n)}return n}const $z=le.mac?"mac":le.windows?"win":le.linux?"linux":"key";function Lz(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function dh(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Iz=pd.default(fe.domEventHandlers({keydown(t,e){return vT(yT(e.state),t,e,"editor")}})),gT=ue.define({enables:Iz}),ok=new WeakMap;function yT(t){let e=t.facet(gT),n=ok.get(e);return n||ok.set(e,n=Fz(e.reduce((r,i)=>r.concat(i),[]))),n}function Bz(t,e,n){return vT(yT(t.state),e,t,n)}let Ns=null;const zz=4e3;function Fz(t,e=$z){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(g=>Lz(g,e));for(let g=1;g<p.length;g++){let y=p.slice(0,g).join(" ");i(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let b=Ns={view:w,prefix:y,scope:o};return setTimeout(()=>{Ns==b&&(Ns=null)},zz),!0}]})}let m=p.join(" ");i(m,!1);let v=f[m]||(f[m]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&v.run.push(l),u&&(v.preventDefault=!0),c&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in c)c[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function vT(t,e,n,r){let i=w8(e),s=mn(i,0),o=Lr(s)==i.length&&i!=" ",a="",l=!1,u=!1,c=!1;Ns&&Ns.view==n&&Ns.scope==r&&(a=Ns.prefix+" ",rT.indexOf(e.keyCode)<0&&(u=!0,Ns=null));let d=new Set,h=v=>{if(v){for(let g of v.run)if(!d.has(g)&&(d.add(g),g(n,e)))return v.stopPropagation&&(c=!0),!0;v.preventDefault&&(v.stopPropagation&&(c=!0),u=!0)}return!1},f=t[r],p,m;return f&&(h(f[a+dh(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(le.windows&&e.ctrlKey&&e.altKey)&&(p=lo[e.keyCode])&&p!=i?(h(f[a+dh(p,e,!0)])||e.shiftKey&&(m=Vc[e.keyCode])!=i&&m!=p&&h(f[a+dh(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+dh(i,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class vd{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=wT(e);return[new vd(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return jz(e,n,r)}}function wT(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==pt.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function ak(t,e,n){let r=U.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:yt.Text}}function jz(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==pt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=wT(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=sv(t,r),p=sv(t,i),m=f.type==yt.Text?f:null,v=p.type==yt.Text?p:null;if(m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=ak(t,r,m)),v&&(t.lineWrapping||p.widgetLineBreaks)&&(v=ak(t,i,v)),m&&v&&m.from==v.from)return y(w(n.from,n.to,m));{let S=m?w(n.from,null,m):b(f,!1),A=v?w(null,n.to,v):b(p,!0),P=[];return(m||f).to<(v||p).from-(m&&v?1:0)||f.widgetLineBreaks>1&&S.bottom+t.defaultLineHeight/2<A.top?P.push(g(d,S.bottom,h,A.top)):S.bottom<A.top&&t.elementAtHeight((S.bottom+A.top)/2).type==yt.Text&&(S.bottom=A.top=(S.bottom+A.top)/2),y(S).concat(P).concat(y(A))}function g(S,A,P,C){return new vd(e,S-l.left,A-l.top-.01,P-S,C-A+.01)}function y({top:S,bottom:A,horizontal:P}){let C=[];for(let R=0;R<P.length;R+=2)C.push(g(P[R],S,P[R+1],A));return C}function w(S,A,P){let C=1e9,R=-1e9,_=[];function T(N,L,z,I,O){let $=t.coordsAtPos(N,N==P.to?-2:2),F=t.coordsAtPos(z,z==P.from?2:-2);!$||!F||(C=Math.min($.top,F.top,C),R=Math.max($.bottom,F.bottom,R),O==pt.LTR?_.push(s&&L?d:$.left,s&&I?h:F.right):_.push(!s&&I?d:F.left,!s&&L?h:$.right))}let D=S??P.from,B=A??P.to;for(let N of t.visibleRanges)if(N.to>D&&N.from<B)for(let L=Math.max(N.from,D),z=Math.min(N.to,B);;){let I=t.state.doc.lineAt(L);for(let O of t.bidiSpans(I)){let $=O.from+I.from,F=O.to+I.from;if($>=z)break;F>L&&T(Math.max($,L),S==null&&$<=D,Math.min(F,z),A==null&&F>=B,O.dir)}if(L=I.to+1,L>=z)break}return _.length==0&&T(D,S==null,B,A==null,t.textDirection),{top:C,bottom:R,horizontal:_}}function b(S,A){let P=a.top+(A?S.top:S.bottom);return{top:P,bottom:P,horizontal:[]}}}function Uz(t,e){return t.constructor==e.constructor&&t.eq(e)}class Vz{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(rf)!=e.state.facet(rf)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(rf);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!Uz(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const rf=ue.define();function bT(t){return[qt.define(e=>new Vz(e,t)),rf.of(t)]}const xT=!le.ios,Gc=ue.define({combine(t){return go(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Wz(t={}){return[Gc.of(t),Hz,Gz,Xz,GR.of(!0)]}function ST(t){return t.startState.facet(Gc)!=t.state.facet(Gc)}const Hz=bT({above:!0,markers(t){let{state:e}=t,n=e.facet(Gc),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||xT:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:U.cursor(i.head,i.head>i.anchor?-1:1);for(let l of vd.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=ST(t);return n&&lk(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){lk(e.state,t)},class:"cm-cursorLayer"});function lk(t,e){e.style.animationDuration=t.facet(Gc).cursorBlinkRate+"ms"}const Gz=bT({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:vd.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||ST(t)},class:"cm-selectionLayer"}),kT={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};xT&&(kT[".cm-line"].caretColor="transparent !important");const Xz=pd.highest(fe.theme(kT)),CT=Me.define({map(t,e){return t==null?null:e.mapPos(t)}}),Uu=un.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(CT)?r.value:n,t)}}),Kz=qt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Uu);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Uu)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Uu),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Uu)!=t&&this.view.dispatch({effects:CT.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Zz(){return[Uu,Kz]}function uk(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function Yz(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class Jz{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,u,c)=>i(c,u,u+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,u,c)=>{let d=r(a,l,u);d&&c(u,u+a[0].length,d)};else if(r)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new oa,r=n.add.bind(n);for(let{from:i,to:s}of Yz(e,this.maxLength))uk(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(m,v,g)=>h.push(g.range(m,v));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else uk(e.state.doc,this.regexp,c,d,(m,v)=>this.addMatch(v,e,m,p));n=n.update({filterFrom:c,filterTo:d,filter:(m,v)=>m<c||v>d,add:h})}}return n}}const dv=/x/.unicode!=null?"gu":"g",qz=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,dv),Qz={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Dg=null;function e6(){var t;if(Dg==null&&typeof document<"u"&&document.body){let e=document.body.style;Dg=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Dg||!1}const sf=ue.define({combine(t){let e=go(t,{render:null,specialChars:qz,addSpecialChars:null});return(e.replaceTabs=!e6())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,dv)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,dv)),e}});function t6(t={}){return[sf.of(t),n6()]}let ck=null;function n6(){return ck||(ck=qt.fromClass(class{constructor(t){this.view=t,this.decorations=Ue.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(sf)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Jz({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=mn(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=mm(o.text,a,r-o.from);return Ue.replace({widget:new o6((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Ue.replace({widget:new s6(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(sf);t.startState.facet(sf)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const r6="•";function i6(t){return t>=32?r6:t==10?"␤":String.fromCharCode(9216+t)}class s6 extends va{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=i6(this.code),r=e.state.phrase("Control character")+" "+(Qz[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class o6 extends va{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function a6(){return u6}const l6=Ue.line({class:"cm-activeLine"}),u6=qt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(l6.range(i.from)),e=i.from)}return Ue.set(n)}},{decorations:t=>t.decorations}),hh="-10000px";class ET{constructor(e,n,r){this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var n;let r=e.state.facet(this.facet),i=r.filter(o=>o);if(r===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<i.length;o++){let a=i[o],l=-1;if(a){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==a.create&&(l=u)}if(l<0)s[o]=this.createTooltipView(a);else{let u=s[o]=this.tooltipViews[l];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=r,this.tooltips=i,this.tooltipViews=s,!0}}function c6(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const $g=ue.define({combine:t=>{var e,n,r;return{position:le.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||c6}}}),dk=new WeakMap,AT=qt.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet($g);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new ET(t,u1,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet($g);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=hh,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let r=this.manager.tooltipViews[n];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet($g).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:r}=t,i=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,r.top)||u.top>=Math.min(n.bottom,r.bottom)||u.right<Math.max(n.left,r.left)-.1||u.left>Math.min(n.right,r.right)+.1){l.style.top=hh;continue}let d=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,f=c.right-c.left,p=(e=dk.get(a))!==null&&e!==void 0?e:c.bottom-c.top,m=a.offset||h6,v=this.view.textDirection==pt.LTR,g=c.width>r.right-r.left?v?r.left:r.right-c.width:v?Math.min(u.left-(d?14:0)+m.x,r.right-f):Math.max(r.left,u.left-f+(d?14:0)-m.x),y=!!o.above;!o.strictSide&&(y?u.top-(c.bottom-c.top)-m.y<r.top:u.bottom+(c.bottom-c.top)+m.y>r.bottom)&&y==r.bottom-u.bottom>u.top-r.top&&(y=!y);let w=(y?u.top-r.top:r.bottom-u.bottom)-h;if(w<p&&a.resize!==!1){if(w<this.view.defaultLineHeight){l.style.top=hh;continue}dk.set(a,p),l.style.height=(p=w)+"px"}else l.style.height&&(l.style.height="");let b=y?u.top-p-h-m.y:u.bottom+h+m.y,S=g+f;if(a.overlap!==!0)for(let A of i)A.left<S&&A.right>g&&A.top<b+p&&A.bottom>b&&(b=y?A.top-p-2-h:A.bottom+h+2);this.position=="absolute"?(l.style.top=b-t.parent.top+"px",l.style.left=g-t.parent.left+"px"):(l.style.top=b+"px",l.style.left=g+"px"),d&&(d.style.left=`${u.left+(v?m.x:-m.x)-(g+14-7)}px`),a.overlap!==!0&&i.push({left:g,top:b,right:S,bottom:b+p}),l.classList.toggle("cm-tooltip-above",y),l.classList.toggle("cm-tooltip-below",!y),a.positioned&&a.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=hh}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),d6=fe.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),h6={x:0,y:0},u1=ue.define({enables:[AT,d6]}),cp=ue.define();class c1{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ET(e,cp,n=>this.createHostedView(n))}static create(e){return new c1(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const f6=u1.compute([cp],t=>{let e=t.facet(cp).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:c1.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class p6{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let r=this.view.coordsAtPos(n);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(a=>a.from<=n&&a.to>=n),s=i&&i.dir==pt.RTL?-1:1,o=this.source(this.view,n,e.x<r.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:n};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Wr(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!hk(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,s=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:i;(i==s?this.view.posAtCoords(this.lastMove)!=i:!m6(this.view,i,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!hk(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function hk(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function m6(t,e,n,r,i,s){let o=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let d=u[c];if(Math.max(d.top-i,i-d.bottom,d.left-r,r-d.right)<=s)return!0}return!1}function g6(t,e={}){let n=Me.define(),r=un.define({create(){return null},update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let o=s.changes.mapPos(i.pos,-1,Nn.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),i);a.pos=o,i.end!=null&&(a.end=s.changes.mapPos(i.end)),i=a}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(v6)&&(i=null);return i},provide:i=>cp.from(i)});return[r,qt.define(i=>new p6(i,t,r,n,e.hoverTime||300)),f6]}function y6(t,e){let n=t.plugin(AT);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const v6=Me.define(),fk=ue.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Xc(t,e){let n=t.plugin(PT),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const PT=qt.fromClass(class{constructor(t){this.input=t.state.facet(zl),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(fk);this.top=new fh(t,!0,e.topContainer),this.bottom=new fh(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(fk);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new fh(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new fh(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(zl);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:o).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>fe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class fh{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=pk(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=pk(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function pk(t){let e=t.nextSibling;return t.remove(),e}const zl=ue.define({enables:PT});class ho extends sa{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ho.prototype.elementClass="";ho.prototype.toDOM=void 0;ho.prototype.mapMode=Nn.TrackBefore;ho.prototype.startSide=ho.prototype.endSide=-1;ho.prototype.point=!0;const of=ue.define(),af=ue.define(),hv=ue.define({combine:t=>t.some(e=>e)});function w6(t){let e=[b6];return t&&t.fixed===!1&&e.push(hv.of(!0)),e}const b6=qt.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(af).map(e=>new gk(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(hv),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(hv)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ot.iter(this.view.state.facet(of),this.view.viewport.from),r=[],i=this.gutters.map(s=>new x6(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==yt.Text&&o){fv(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==yt.Text){fv(n,r,s.from);for(let o of i)o.line(this.view,s,r)}for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(af),n=t.state.facet(af),r=t.docChanged||t.heightChanged||t.viewportChanged||!ot.eq(t.startState.facet(of),t.state.facet(of),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new gk(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>fe.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==pt.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function mk(t){return Array.isArray(t)?t:[t]}function fv(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class x6{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ot.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=n.top-this.height;if(this.i==i.elements.length){let o=new RT(e,n.height,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,n.height,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];fv(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n);r&&this.addElement(e,n,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class gk{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=mk(n.markers(e)),n.initialSpacer&&(this.spacer=new RT(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=mk(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ot.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class RT{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),S6(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function S6(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const k6=ue.define(),Ya=ue.define({combine(t){return go(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return r}})}});class Lg extends ho{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ig(t,e){return t.state.facet(Ya).formatNumber(e,t.state)}const C6=af.compute([Ya],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(k6)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new Lg(Ig(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Ya)!=e.state.facet(Ya),initialSpacer(e){return new Lg(Ig(e,yk(e.state.doc.lines)))},updateSpacer(e,n){let r=Ig(n.view,yk(n.view.state.doc.lines));return r==e.number?e:new Lg(r)},domEventHandlers:t.facet(Ya).domEventHandlers}));function E6(t={}){return[Ya.of(t),w6(),C6]}function yk(t){let e=9;for(;e<t;)e=e*10+9;return e}const A6=new class extends ho{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},P6=of.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(A6.range(i)))}return ot.of(e)});function R6(){return P6}const TT=new md;function OT(t){window.codemirror&&window.codemirror.dispatch({effects:TT.reconfigure(Ie.readOnly.of(t))})}const pv=Me.define(),T6=un.define({create(){return Ue.none},update(t,e){let n=t.map(e.changes);for(const r of e.effects)r.is(pv)&&(n=Ue.none,r.value!==null&&(n=n.update({add:[O6.range(r.value)]})));return n},provide:t=>fe.decorations.from(t)}),O6=Ue.line({class:"!bg-sky-400/30"});function NT(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:pv.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:pv.of(e)})}}const Bg=de(M.zero(16)),zg=de(M.zero(16)),Fg=de(M.zero(16)),jg=de(M.zero(16)),Ug=de(M.zero(16)),Vg=de(M.zero(16)),N6=de(M.zero(8)),Wg=de(M.zero(16)),Hg=de(M.zero(16)),Gg=de(M.zero(16)),Xg=de(M.zero(16)),Kg=de(M.zero(16)),Zg=de(M.zero(16)),_T=de(M.zero(16)),Fl=de(M.zero(8)),ir=t=>de(e=>e(t).low,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.low):r;n(t,i.withLow(s))}),sr=t=>de(e=>e(t).high,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.high):r;n(t,i.withHigh(s))}),rt={AX:Bg,AL:ir(Bg),AH:sr(Bg),BX:zg,BL:ir(zg),BH:sr(zg),CX:Fg,CL:ir(Fg),CH:sr(Fg),DX:jg,DL:ir(jg),DH:sr(jg),SP:Ug,"SP.l":ir(Ug),"SP.h":sr(Ug),IP:Vg,"IP.l":ir(Vg),"IP.h":sr(Vg),IR:N6,ri:Wg,"ri.l":ir(Wg),"ri.h":sr(Wg),id:Hg,"id.l":ir(Hg),"id.h":sr(Hg),left:Gg,"left.l":ir(Gg),"left.h":sr(Gg),right:Xg,"right.l":ir(Xg),"right.h":sr(Xg),result:Kg,"result.l":ir(Kg),"result.h":sr(Kg),FLAGS:Zg,"FLAGS.l":ir(Zg),"FLAGS.h":sr(Zg),MAR:_T,MBR:Fl},Oo=de({phase:"stopped"}),MT=de("ADD");function _6(t){G.set(rt.AX,M.fromUnsigned(t.cpu.AX,16)),G.set(rt.BX,M.fromUnsigned(t.cpu.BX,16)),G.set(rt.CX,M.fromUnsigned(t.cpu.CX,16)),G.set(rt.DX,M.fromUnsigned(t.cpu.DX,16)),G.set(rt.SP,M.fromUnsigned(t.cpu.SP,16)),G.set(rt.IP,M.fromUnsigned(t.cpu.IP,16)),G.set(rt.IR,M.fromUnsigned(t.cpu.IR,8)),G.set(rt.ri,M.fromUnsigned(t.cpu.ri,16)),G.set(rt.id,M.fromUnsigned(t.cpu.id,16)),G.set(rt.left,M.fromUnsigned(t.cpu.left,16)),G.set(rt.right,M.fromUnsigned(t.cpu.right,16)),G.set(rt.result,M.fromUnsigned(t.cpu.result,16)),G.set(rt.FLAGS,M.fromUnsigned(t.cpu.FLAGS,16)),G.set(rt.MAR,M.fromUnsigned(t.cpu.MAR,16)),G.set(rt.MBR,M.fromUnsigned(t.cpu.MBR,8)),G.set(Oo,{phase:"stopped"})}const d1=de(new Array(me.MAX_ADDRESS+1).fill(M.zero(8))),mv=de(me.from(4096)),vk=8,M6=de(t=>{const e=t(mv),n=e.value-e.value%vk,r=t(d1),i=[];for(let s=0;s<vk;s++)i.push({address:me.from(n+s),value:r[n+s]});return i});function D6(t){G.set(d1,t.memory.map(e=>M.fromUnsigned(e,8)))}const h1=de(M.fromUnsigned(255,8)),f1=de(M.fromUnsigned(0,8)),p1=de(M.fromUnsigned(0,8)),dp=[de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8)),de(M.zero(8))];function $6(t){G.set(h1,M.fromUnsigned(t.io.pic.IMR,8)),G.set(f1,M.fromUnsigned(t.io.pic.IRR,8)),G.set(p1,M.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<dp.length;e++)G.set(dp[e],M.fromUnsigned(t.io.pic.lines[e],8))}var L6=Object.defineProperty,I6=(t,e)=>{for(var n in e)L6(t,n,{get:e[n],enumerable:!0})},Kr={};I6(Kr,{assign:()=>F6,colors:()=>Js,createStringInterpolator:()=>x1,skipAnimation:()=>FT,to:()=>zT,willAdvance:()=>S1});var m1=bd(),Re=t=>wd(t,m1),g1=bd();Re.write=t=>wd(t,g1);var vm=bd();Re.onStart=t=>wd(t,vm);var y1=bd();Re.onFrame=t=>wd(t,y1);var v1=bd();Re.onFinish=t=>wd(t,v1);var fl=[];Re.setTimeout=(t,e)=>{const n=Re.now()+e,r=()=>{const s=fl.findIndex(o=>o.cancel==r);~s&&fl.splice(s,1),js-=~s?1:0},i={time:n,handler:t,cancel:r};return fl.splice(DT(n),0,i),js+=1,$T(),i};var DT=t=>~(~fl.findIndex(e=>e.time>t)||~fl.length);Re.cancel=t=>{vm.delete(t),y1.delete(t),v1.delete(t),m1.delete(t),g1.delete(t)};Re.sync=t=>{gv=!0,Re.batchedUpdates(t),gv=!1};Re.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,Re.onStart(n)}return r.handler=t,r.cancel=()=>{vm.delete(n),e=null},r};var w1=typeof window<"u"?window.requestAnimationFrame:()=>{};Re.use=t=>w1=t;Re.now=typeof performance<"u"?()=>performance.now():Date.now;Re.batchedUpdates=t=>t();Re.catch=console.error;Re.frameLoop="always";Re.advance=()=>{Re.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):IT()};var Fs=-1,js=0,gv=!1;function wd(t,e){gv?(e.delete(t),t(0)):(e.add(t),$T())}function $T(){Fs<0&&(Fs=0,Re.frameLoop!=="demand"&&w1(LT))}function B6(){Fs=-1}function LT(){~Fs&&(w1(LT),Re.batchedUpdates(IT))}function IT(){const t=Fs;Fs=Re.now();const e=DT(Fs);if(e&&(BT(fl.splice(0,e),n=>n.handler()),js-=e),!js){B6();return}vm.flush(),m1.flush(t?Math.min(64,Fs-t):16.667),y1.flush(),g1.flush(),v1.flush()}function bd(){let t=new Set,e=t;return{add(n){js+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return js-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,js-=e.size,BT(e,r=>r(n)&&t.add(r)),js+=t.size,e=t)}}}function BT(t,e){t.forEach(n=>{try{e(n)}catch(r){Re.catch(r)}})}function yv(){}var z6=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),V={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ti(t,e){if(V.arr(t)){if(!V.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Ae=(t,e)=>t.forEach(e);function Ci(t,e,n){if(V.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var vn=t=>V.und(t)?[]:V.arr(t)?t:[t];function rc(t,e){if(t.size){const n=Array.from(t);t.clear(),Ae(n,e)}}var Vu=(t,...e)=>rc(t,n=>n(...e)),b1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),x1,zT,Js=null,FT=!1,S1=yv,F6=t=>{t.to&&(zT=t.to),t.now&&(Re.now=t.now),t.colors!==void 0&&(Js=t.colors),t.skipAnimation!=null&&(FT=t.skipAnimation),t.createStringInterpolator&&(x1=t.createStringInterpolator),t.requestAnimationFrame&&Re.use(t.requestAnimationFrame),t.batchedUpdates&&(Re.batchedUpdates=t.batchedUpdates),t.willAdvance&&(S1=t.willAdvance),t.frameLoop&&(Re.frameLoop=t.frameLoop)},ic=new Set,gr=[],Yg=[],hp=0,wm={get idle(){return!ic.size&&!gr.length},start(t){hp>t.priority?(ic.add(t),Re.onStart(j6)):(jT(t),Re(vv))},advance:vv,sort(t){if(hp)Re.onFrame(()=>wm.sort(t));else{const e=gr.indexOf(t);~e&&(gr.splice(e,1),UT(t))}},clear(){gr=[],ic.clear()}};function j6(){ic.forEach(jT),ic.clear(),Re(vv)}function jT(t){gr.includes(t)||UT(t)}function UT(t){gr.splice(U6(gr,e=>e.priority>t.priority),0,t)}function vv(t){const e=Yg;for(let n=0;n<gr.length;n++){const r=gr[n];hp=r.priority,r.idle||(S1(r),r.advance(t),r.idle||e.push(r))}return hp=0,Yg=gr,Yg.length=0,gr=e,gr.length>0}function U6(t,e){const n=t.findIndex(e);return n<0?t.length:n}var V6=(t,e,n)=>Math.min(Math.max(n,t),e),W6={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Br="[-+]?\\d*\\.?\\d+",fp=Br+"%";function bm(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var H6=new RegExp("rgb"+bm(Br,Br,Br)),G6=new RegExp("rgba"+bm(Br,Br,Br,Br)),X6=new RegExp("hsl"+bm(Br,fp,fp)),K6=new RegExp("hsla"+bm(Br,fp,fp,Br)),Z6=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Y6=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,J6=/^#([0-9a-fA-F]{6})$/,q6=/^#([0-9a-fA-F]{8})$/;function Q6(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=J6.exec(t))?parseInt(e[1]+"ff",16)>>>0:Js&&Js[t]!==void 0?Js[t]:(e=H6.exec(t))?(Oa(e[1])<<24|Oa(e[2])<<16|Oa(e[3])<<8|255)>>>0:(e=G6.exec(t))?(Oa(e[1])<<24|Oa(e[2])<<16|Oa(e[3])<<8|xk(e[4]))>>>0:(e=Z6.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=q6.exec(t))?parseInt(e[1],16)>>>0:(e=Y6.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=X6.exec(t))?(wk(bk(e[1]),ph(e[2]),ph(e[3]))|255)>>>0:(e=K6.exec(t))?(wk(bk(e[1]),ph(e[2]),ph(e[3]))|xk(e[4]))>>>0:null}function Jg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function wk(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=Jg(i,r,t+1/3),o=Jg(i,r,t),a=Jg(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Oa(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function bk(t){return(parseFloat(t)%360+360)%360/360}function xk(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ph(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function Sk(t){let e=Q6(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Kc=(t,e,n)=>{if(V.fun(t))return t;if(V.arr(t))return Kc({range:t,output:e,extrapolate:n});if(V.str(t.output[0]))return x1(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{const c=t9(u,s);return e9(u,s[c],s[c+1],i[c],i[c+1],l,o,a,r.map)}};function e9(t,e,n,r,i,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),r===-1/0?u=-u:i===1/0?u=u+r:u=u*(i-r)+r,u)}function t9(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var n9=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return V6(0,1,i/t)},pp=1.70158,mh=pp*1.525,kk=pp+1,Ck=2*Math.PI/3,Ek=2*Math.PI/4.5,gh=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,k1={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>kk*t*t*t-pp*t*t,easeOutBack:t=>1+kk*Math.pow(t-1,3)+pp*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((mh+1)*2*t-mh)/2:(Math.pow(2*t-2,2)*((mh+1)*(t*2-2)+mh)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Ck),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Ck)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Ek))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Ek)/2+1,easeInBounce:t=>1-gh(1-t),easeOutBounce:gh,easeInOutBounce:t=>t<.5?(1-gh(1-2*t))/2:(1+gh(2*t-1))/2,steps:n9},Zc=Symbol.for("FluidValue.get"),jl=Symbol.for("FluidValue.observers"),mr=t=>!!(t&&t[Zc]),Rn=t=>t&&t[Zc]?t[Zc]():t,Ak=t=>t[jl]||null;function r9(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Yc(t,e){const n=t[jl];n&&n.forEach(r=>{r9(r,e)})}var VT=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");i9(this,t)}},i9=(t,e)=>WT(t,Zc,e);function ru(t,e){if(t[Zc]){let n=t[jl];n||WT(t,jl,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Jc(t,e){const n=t[jl];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[jl]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var WT=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),lf=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s9=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Pk=new RegExp(`(${lf.source})(%|[a-z]+)`,"i"),o9=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,xm=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,HT=t=>{const[e,n]=a9(t);if(!e||b1())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&xm.test(n))return HT(n);if(n)return n}return t},a9=t=>{const e=xm.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},qg,l9=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,GT=t=>{qg||(qg=Js?new RegExp(`(${Object.keys(Js).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Rn(s).replace(xm,HT).replace(s9,Sk).replace(qg,Sk)),n=e.map(s=>s.match(lf).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Kc({...t,output:s}));return s=>{var l;const o=!Pk.test(e[0])&&((l=e.find(u=>Pk.test(u)))==null?void 0:l.replace(lf,""));let a=0;return e[0].replace(lf,()=>`${i[a++](s)}${o||""}`).replace(o9,l9)}},C1="react-spring: ",XT=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${C1}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},u9=XT(console.warn);function c9(){u9(`${C1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var d9=XT(console.warn);function h9(){d9(`${C1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Sm(t){return V.str(t)&&(t[0]=="#"||/\d/.test(t)||!b1()&&xm.test(t)||t in(Js||{}))}var zo=b1()?x.useEffect:x.useLayoutEffect,f9=()=>{const t=x.useRef(!1);return zo(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function E1(){const t=x.useState()[1],e=f9();return()=>{e.current&&t(Math.random())}}function p9(t,e){const[n]=x.useState(()=>({inputs:e,result:t()})),r=x.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&m9(e,s.inputs)||(s={inputs:e,result:t()}):s=n,x.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function m9(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var A1=t=>x.useEffect(t,g9),g9=[];function wv(t){const e=x.useRef();return x.useEffect(()=>{e.current=t}),e.current}var qc=Symbol.for("Animated:node"),y9=t=>!!t&&t[qc]===t,ni=t=>t&&t[qc],P1=(t,e)=>z6(t,qc,e),km=t=>t&&t[qc]&&t[qc].getPayload(),KT=class{constructor(){P1(this,this)}getPayload(){return this.payload||[]}},xd=class extends KT{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,V.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new xd(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return V.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,V.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Qc=class extends xd{constructor(t){super(0),this._string=null,this._toString=Kc({output:[t,t]})}static create(t){return new Qc(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(V.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Kc({output:[this.getValue(),t]})),this._value=0,super.reset()}},mp={dependencies:null},Cm=class extends KT{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Ci(this.source,(n,r)=>{y9(n)?e[r]=n.getValue(t):mr(n)?e[r]=Rn(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Ae(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Ci(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){mp.dependencies&&mr(t)&&mp.dependencies.add(t);const e=km(t);e&&Ae(e,n=>this.add(n))}},ZT=class extends Cm{constructor(t){super(t)}static create(t){return new ZT(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(v9)),!0)}};function v9(t){return(Sm(t)?Qc:xd).create(t)}function bv(t){const e=ni(t);return e?e.constructor:V.arr(t)?ZT:Sm(t)?Qc:xd}var Rk=(t,e)=>{const n=!V.fun(t)||t.prototype&&t.prototype.isReactComponent;return x.forwardRef((r,i)=>{const s=x.useRef(null),o=n&&x.useCallback(p=>{s.current=x9(i,p)},[i]),[a,l]=b9(r,e),u=E1(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new w9(c,l),h=x.useRef();zo(()=>(h.current=d,Ae(l,p=>ru(p,d)),()=>{h.current&&(Ae(h.current.deps,p=>Jc(p,h.current)),Re.cancel(h.current.update))})),x.useEffect(c,[]),A1(()=>()=>{const p=h.current;Ae(p.deps,m=>Jc(m,p))});const f=e.getComponentProps(a.getValue());return x.createElement(t,{...f,ref:o})})},w9=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Re.write(this.update)}};function b9(t,e){const n=new Set;return mp.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Cm(t),mp.dependencies=null,[t,n]}function x9(t,e){return t&&(V.fun(t)?t(e):t.current=e),e}var Tk=Symbol.for("AnimatedComponent"),S9=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new Cm(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=Ok(o)||"Anonymous";return V.str(o)?o=s[o]||(s[o]=Rk(o,i)):o=o[Tk]||(o[Tk]=Rk(o,i)),o.displayName=`Animated(${a})`,o};return Ci(t,(o,a)=>{V.arr(t)&&(a=Ok(o)),s[a]=s(o)}),{animated:s}},Ok=t=>V.str(t)?t:t&&V.str(t.displayName)?t.displayName:V.fun(t)&&t.name||null;function Tn(t,...e){return V.fun(t)?t(...e):t}var sc=(t,e)=>t===!0||!!(e&&t&&(V.fun(t)?t(e):vn(t).includes(e))),YT=(t,e)=>V.obj(t)?e&&t[e]:t,JT=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,k9=t=>t,Em=(t,e=k9)=>{let n=C9;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);V.und(s)||(r[i]=s)}return r},C9=["config","onProps","onStart","onChange","onPause","onResume","onRest"],E9={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function A9(t){const e={};let n=0;if(Ci(t,(r,i)=>{E9[i]||(e[i]=r,n++)}),n)return e}function R1(t){const e=A9(t);if(e){const n={to:e};return Ci(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function ed(t){return t=Rn(t),V.arr(t)?t.map(ed):Sm(t)?Kr.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function qT(t){for(const e in t)return!0;return!1}function xv(t){return V.fun(t)||V.arr(t)&&V.obj(t[0])}function Sv(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function QT(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var P9={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},kv={...P9.default,mass:1,damping:1,easing:k1.linear,clamp:!1},R9=class{constructor(){this.velocity=0,Object.assign(this,kv)}};function T9(t,e,n){n&&(n={...n},Nk(n,e),e={...n,...e}),Nk(t,e),Object.assign(t,e);for(const o in kv)t[o]==null&&(t[o]=kv[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return V.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function Nk(t,e){if(!V.und(e.decay))t.duration=void 0;else{const n=!V.und(e.tension)||!V.und(e.friction);(n||!V.und(e.frequency)||!V.und(e.damping)||!V.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var _k=[],O9=class{constructor(){this.changed=!1,this.values=_k,this.toValues=null,this.fromValues=_k,this.config=new R9,this.immediate=!1}};function eO(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,u,c=sc(n.cancel??(r==null?void 0:r.cancel),e);if(c)f();else{V.und(n.pause)||(i.paused=sc(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=i.paused||sc(p,e)),l=Tn(n.delay||0,e),p?(i.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){i.resumeQueue.add(h),i.timeouts.delete(u),u.cancel(),l=u.time-Re.now()}function h(){l>0&&!Kr.skipAnimation?(i.delayed=!0,u=Re.setTimeout(f,l),i.pauseQueue.add(d),i.timeouts.add(u)):f()}function f(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(u),t<=(i.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var T1=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?pl(t.get()):e.every(n=>n.noop)?tO(t.get()):$r(t.get(),e.every(n=>n.finished)),tO=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),$r=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),pl=t=>({value:t,cancelled:!0,finished:!1});function nO(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const u=Em(e,(v,g)=>g==="onRest"?void 0:v);let c,d;const h=new Promise((v,g)=>(c=v,d=g)),f=v=>{const g=i<=(n.cancelId||0)&&pl(r)||i!==n.asyncId&&$r(r,!1);if(g)throw v.result=g,d(v),v},p=(v,g)=>{const y=new Mk,w=new Dk;return(async()=>{if(Kr.skipAnimation)throw td(n),w.result=$r(r,!1),d(w),w;f(y);const b=V.obj(v)?{...v}:{...g,to:v};b.parentId=i,Ci(u,(A,P)=>{V.und(b[P])&&(b[P]=A)});const S=await r.start(b);return f(y),n.paused&&await new Promise(A=>{n.resumeQueue.add(A)}),S})()};let m;if(Kr.skipAnimation)return td(n),$r(r,!1);try{let v;V.arr(t)?v=(async g=>{for(const y of g)await p(y)})(t):v=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([v.then(c),h]),m=$r(r.get(),!0,!1)}catch(v){if(v instanceof Mk)m=v.result;else if(v instanceof Dk)m=v.result;else throw v}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return V.fun(o)&&Re.batchedUpdates(()=>{o(m,r,r.item)}),m})()}function td(t,e){rc(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Mk=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Dk=class extends Error{constructor(){super("SkipAnimationSignal")}},Cv=t=>t instanceof O1,N9=1,O1=class extends VT{constructor(){super(...arguments),this.id=N9++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=ni(this);return t&&t.getValue()}to(...t){return Kr.to(this,t)}interpolate(...t){return c9(),Kr.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Yc(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||wm.sort(this),Yc(this,{type:"priority",parent:this,priority:t})}},la=Symbol.for("SpringPhase"),rO=1,Ev=2,Av=4,Qg=t=>(t[la]&rO)>0,ys=t=>(t[la]&Ev)>0,xu=t=>(t[la]&Av)>0,$k=(t,e)=>e?t[la]|=Ev|rO:t[la]&=~Ev,Lk=(t,e)=>e?t[la]|=Av:t[la]&=~Av,_9=class extends O1{constructor(t,e){if(super(),this.animation=new O9,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!V.und(t)||!V.und(e)){const n=V.obj(t)?{...t}:{...e,from:t};V.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ys(this)||this._state.asyncTo)||xu(this)}get goal(){return Rn(this.animation.to)}get velocity(){const t=ni(this);return t instanceof xd?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Qg(this)}get isAnimating(){return ys(this)}get isPaused(){return xu(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=km(r.to);!o&&mr(r.to)&&(i=vn(Rn(r.to))),r.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Qc?1:o?o[c].lastPosition:i[c];let h=r.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const m=r.fromValues[c],v=u.v0!=null?u.v0:u.v0=V.arr(s.velocity)?s.velocity[c]:s.velocity;let g;const y=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(V.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,b=Math.exp(-(1-w)*p);f=m+v/(1-w)*(1-b),h=Math.abs(u.lastPosition-f)<=y,g=v*b}else{g=u.lastVelocity==null?v:u.lastVelocity;const w=s.restVelocity||y/10,b=s.clamp?0:s.bounce,S=!V.und(b),A=m==d?u.v0>0:m<d;let P,C=!1;const R=1,_=Math.ceil(t/R);for(let T=0;T<_&&(P=Math.abs(g)>w,!(!P&&(h=Math.abs(d-f)<=y,h)));++T){S&&(C=f==d||f>d==A,C&&(g=-g*b,f=d));const D=-s.tension*1e-6*(f-d),B=-s.friction*.001*g,N=(D+B)/s.mass;g=g+N*R,f=f+g*R}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=m+s.easing(w)*(d-m),g=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=g,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=ni(this),l=a.getValue();if(e){const u=Rn(r.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Re.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ys(this)){const{to:t,config:e}=this.animation;Re.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return V.und(t)?(n=this.queue||[],this.queue=[]):n=[V.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>T1(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),td(this._state,t&&this._lastCallId),Re.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=V.obj(n)?n[e]:n,(n==null||xv(n))&&(n=void 0),r=V.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return Qg(this)||(t.reverse&&([n,r]=[r,n]),r=Rn(r),V.und(r)?ni(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,Em(t,(o,a)=>/^on/.test(a)?YT(o,n):o)),Bk(this,t,"onProps"),ku(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return eO(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{xu(this)||(Lk(this,!0),Vu(s.pauseQueue),ku(this,"onPause",$r(this,Su(this,this.animation.to)),this))},resume:()=>{xu(this)&&(Lk(this,!1),ys(this)&&this._resume(),Vu(s.resumeQueue),ku(this,"onResume",$r(this,Su(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=iO(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(pl(this));const r=!V.und(t.to),i=!V.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(pl(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;i&&!r&&(!e.default||V.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!Ti(d,u);h&&(a.from=d),d=Rn(d);const f=!Ti(c,l);f&&this._focus(c);const p=xv(e.to),{config:m}=a,{decay:v,velocity:g}=m;(r||i)&&(m.velocity=0),e.config&&!p&&T9(m,Tn(e.config,s),e.config!==o.config?Tn(o.config,s):void 0);let y=ni(this);if(!y||V.und(c))return n($r(this,!0));const w=V.und(e.reset)?i&&!e.default:!V.und(d)&&sc(e.reset,s),b=w?d:this.get(),S=ed(c),A=V.num(S)||V.arr(S)||Sm(S),P=!p&&(!A||sc(o.immediate||e.immediate,s));if(f){const T=bv(c);if(T!==y.constructor)if(P)y=this._set(S);else throw Error(`Cannot animate between ${y.constructor.name} and ${T.name}, as the "to" prop suggests`)}const C=y.constructor;let R=mr(c),_=!1;if(!R){const T=w||!Qg(this)&&h;(f||T)&&(_=Ti(ed(b),S),R=!_),(!Ti(a.immediate,P)&&!P||!Ti(m.decay,v)||!Ti(m.velocity,g))&&(R=!0)}if(_&&ys(this)&&(a.changed&&!w?R=!0:R||this._stop(l)),!p&&((R||mr(l))&&(a.values=y.getPayload(),a.toValues=mr(c)?null:C==Qc?[1]:vn(S)),a.immediate!=P&&(a.immediate=P,!P&&!w&&this._set(l)),R)){const{onRest:T}=a;Ae(D9,B=>Bk(this,e,B));const D=$r(this,Su(this,l));Vu(this._pendingCalls,D),this._pendingCalls.add(n),a.changed&&Re.batchedUpdates(()=>{var B;a.changed=!w,T==null||T(D,this),w?Tn(o.onRest,D):(B=a.onStart)==null||B.call(a,D,this)})}w&&this._set(b),p?n(nO(e.to,e,this._state,this)):R?this._start():ys(this)&&!f?this._pendingCalls.add(n):n(tO(b))}_focus(t){const e=this.animation;t!==e.to&&(Ak(this)&&this._detach(),e.to=t,Ak(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;mr(e)&&(ru(e,this),Cv(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;mr(t)&&Jc(t,this)}_set(t,e=!0){const n=Rn(t);if(!V.und(n)){const r=ni(this);if(!r||!Ti(n,r.getValue())){const i=bv(n);!r||r.constructor!=i?P1(this,i.create(n)):r.setValue(n),r&&Re.batchedUpdates(()=>{this._onChange(n,e)})}}return ni(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,ku(this,"onStart",$r(this,Su(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Tn(this.animation.onChange,t,this)),Tn(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;ni(this).reset(Rn(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),ys(this)||($k(this,!0),xu(this)||this._resume())}_resume(){Kr.skipAnimation?this.finish():wm.start(this)}_stop(t,e){if(ys(this)){$k(this,!1);const n=this.animation;Ae(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Yc(this,{type:"idle",parent:this});const r=e?pl(this.get()):$r(this.get(),Su(this,t??n.to));Vu(this._pendingCalls,r),n.changed&&(n.changed=!1,ku(this,"onRest",r,this))}}};function Su(t,e){const n=ed(e),r=ed(t.get());return Ti(r,n)}function iO(t,e=t.loop,n=t.to){const r=Tn(e);if(r){const i=r!==!0&&R1(r),s=(i||t).reverse,o=!i||i.reset;return nd({...t,loop:e,default:!1,pause:void 0,to:!s||xv(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function nd(t){const{to:e,from:n}=t=R1(t),r=new Set;return V.obj(e)&&Ik(e,r),V.obj(n)&&Ik(n,r),t.keys=r.size?Array.from(r):null,t}function M9(t){const e=nd(t);return V.und(e.default)&&(e.default=Em(e)),e}function Ik(t,e){Ci(t,(n,r)=>n!=null&&e.add(r))}var D9=["onStart","onRest","onChange","onPause","onResume"];function Bk(t,e,n){t.animation[n]=e[n]!==JT(e,n)?YT(e[n],t.key):void 0}function ku(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var $9=["onStart","onChange","onRest"],L9=1,sO=class{constructor(t,e){this.id=L9++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];V.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(nd(t)),this}start(t){let{queue:e}=this;return t?e=vn(t).map(nd):this.queue=[],this._flush?this._flush(this,e):(cO(this,e),Pv(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;Ae(vn(e),r=>n[r].stop(!!t))}else td(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(V.und(t))this.start({pause:!0});else{const e=this.springs;Ae(vn(t),n=>e[n].pause())}return this}resume(t){if(V.und(t))this.start({pause:!1});else{const e=this.springs;Ae(vn(t),n=>e[n].resume())}return this}each(t){Ci(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,rc(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&e.size&&rc(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,rc(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Re.onFrame(this._onFrame)}};function Pv(t,e){return Promise.all(e.map(n=>oO(t,n))).then(n=>T1(t,n))}async function oO(t,e,n){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,u=V.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const c=V.arr(i)||V.fun(i)?i:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):Ae($9,m=>{const v=e[m];if(V.fun(v)){const g=t._events[m];e[m]=({finished:y,cancelled:w})=>{const b=g.get(v);b?(y||(b.finished=!1),w&&(b.cancelled=!0)):g.set(v,{value:null,finished:y||!1,cancelled:w||!1})},u&&(u[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,Vu(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(r||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),f=e.cancel===!0||JT(e,"cancel")===!0;(c||f&&d.asyncId)&&h.push(eO(++t._lastAsyncId,{props:e,state:d,actions:{pause:yv,resume:yv,start(m,v){f?(td(d,t._lastAsyncId),v(pl(t))):(m.onRest=a,v(nO(c,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const p=T1(t,await Promise.all(h));if(o&&p.finished&&!(n&&p.noop)){const m=iO(e,o,i);if(m)return cO(t,[m]),oO(t,m,!0)}return l&&Re.batchedUpdates(()=>l(p,t,t.item)),p}function Rv(t,e){const n={...t.springs};return e&&Ae(vn(e),r=>{V.und(r.keys)&&(r=nd(r)),V.obj(r.to)||(r={...r,to:void 0}),uO(n,r,i=>lO(i))}),aO(t,n),n}function aO(t,e){Ci(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,ru(n,t))})}function lO(t,e){const n=new _9;return n.key=t,e&&ru(n,e),n}function uO(t,e,n){e.keys&&Ae(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function cO(t,e){Ae(e,n=>{uO(t.springs,n,r=>lO(r,t))})}var Sd=({children:t,...e})=>{const n=x.useContext(gp),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=p9(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=gp;return x.createElement(s,{value:e},t)},gp=I9(Sd,{});Sd.Provider=gp.Provider;Sd.Consumer=gp.Consumer;function I9(t,e){return Object.assign(t,x.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var pe=()=>{const t=[],e=function(r){h9();const i=[];return Ae(t,(s,o)=>{if(V.und(r))i.push(s.start());else{const a=n(r,s,o);a&&i.push(s.start(a))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return Ae(t,r=>r.pause(...arguments)),this},e.resume=function(){return Ae(t,r=>r.resume(...arguments)),this},e.set=function(r){Ae(t,(i,s)=>{const o=V.fun(r)?r(s,i):r;o&&i.set(o)})},e.start=function(r){const i=[];return Ae(t,(s,o)=>{if(V.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return Ae(t,r=>r.stop(...arguments)),this},e.update=function(r){return Ae(t,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(r,i,s){return V.fun(r)?r(s,i):r};return e._getProps=n,e};function B9(t,e,n){const r=V.fun(e)&&e;r&&!n&&(n=[]);const i=x.useMemo(()=>r||arguments.length==3?pe():void 0,[]),s=x.useRef(0),o=E1(),a=x.useMemo(()=>({ctrls:[],queue:[],flush(g,y){const w=Rv(g,y);return s.current>0&&!a.queue.length&&!Object.keys(w).some(S=>!g.springs[S])?Pv(g,y):new Promise(S=>{aO(g,w),a.queue.push(()=>{S(Pv(g,y))}),o()})}}),[]),l=x.useRef([...a.ctrls]),u=[],c=wv(t)||0;x.useMemo(()=>{Ae(l.current.slice(t,c),g=>{Sv(g,i),g.stop(!0)}),l.current.length=t,d(c,t)},[t]),x.useMemo(()=>{d(0,Math.min(c,t))},n);function d(g,y){for(let w=g;w<y;w++){const b=l.current[w]||(l.current[w]=new sO(null,a.flush)),S=r?r(w,b):e[w];S&&(u[w]=M9(S))}}const h=l.current.map((g,y)=>Rv(g,u[y])),f=x.useContext(Sd),p=wv(f),m=f!==p&&qT(f);zo(()=>{s.current++,a.ctrls=l.current;const{queue:g}=a;g.length&&(a.queue=[],Ae(g,y=>y())),Ae(l.current,(y,w)=>{i==null||i.add(y),m&&y.start({default:f});const b=u[w];b&&(QT(y,b.ref),y.ref?y.queue.push(b):y.start(b))})}),A1(()=>()=>{Ae(a.ctrls,g=>g.stop(!0))});const v=h.map(g=>({...g}));return i?[v,i]:v}function Xt(t,e){const n=V.fun(t),[[r],i]=B9(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}function z9(t,e,n){const r=V.fun(e)&&e,{reset:i,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:u,ref:c,config:d}=r?r():e,h=x.useMemo(()=>r||arguments.length==3?pe():void 0,[]),f=vn(t),p=[],m=x.useRef(null),v=i?null:m.current;zo(()=>{m.current=p}),A1(()=>(Ae(p,N=>{h==null||h.add(N.ctrl),N.ctrl.ref=h}),()=>{Ae(m.current,N=>{N.expired&&clearTimeout(N.expirationId),Sv(N.ctrl,h),N.ctrl.stop(!0)})}));const g=j9(f,r?r():e,v),y=i&&m.current||[];zo(()=>Ae(y,({ctrl:N,item:L,key:z})=>{Sv(N,h),Tn(u,L,z)}));const w=[];if(v&&Ae(v,(N,L)=>{N.expired?(clearTimeout(N.expirationId),y.push(N)):(L=w[L]=g.indexOf(N.key),~L&&(p[L]=N))}),Ae(f,(N,L)=>{p[L]||(p[L]={key:g[L],item:N,phase:"mount",ctrl:new sO},p[L].ctrl.item=N)}),w.length){let N=-1;const{leave:L}=r?r():e;Ae(w,(z,I)=>{const O=v[I];~z?(N=p.indexOf(O),p[N]={...O,item:f[z]}):L&&p.splice(++N,0,O)})}V.fun(s)&&p.sort((N,L)=>s(N.item,L.item));let b=-o;const S=E1(),A=Em(e),P=new Map,C=x.useRef(new Map),R=x.useRef(!1);Ae(p,(N,L)=>{const z=N.key,I=N.phase,O=r?r():e;let $,F;const X=Tn(O.delay||0,z);if(I=="mount")$=O.enter,F="enter";else{const Se=g.indexOf(z)<0;if(I!="leave")if(Se)$=O.leave,F="leave";else if($=O.update)F="update";else return;else if(!Se)$=O.enter,F="enter";else return}if($=Tn($,N.item,L),$=V.obj($)?R1($):{to:$},!$.config){const Se=d||A.config;$.config=Tn(Se,N.item,L,F)}b+=o;const ee={...A,delay:X+b,ref:c,immediate:O.immediate,reset:!1,...$};if(F=="enter"&&V.und(ee.from)){const Se=r?r():e,be=V.und(Se.initial)||v?Se.from:Se.initial;ee.from=Tn(be,N.item,L)}const{onResolve:re}=ee;ee.onResolve=Se=>{Tn(re,Se);const be=m.current,Q=be.find(ye=>ye.key===z);if(Q&&!(Se.cancelled&&Q.phase!="update")&&Q.ctrl.idle){const ye=be.every(_e=>_e.ctrl.idle);if(Q.phase=="leave"){const _e=Tn(a,Q.item);if(_e!==!1){const Ce=_e===!0?0:_e;if(Q.expired=!0,!ye&&Ce>0){Ce<=2147483647&&(Q.expirationId=setTimeout(S,Ce));return}}}ye&&be.some(_e=>_e.expired)&&(C.current.delete(Q),l&&(R.current=!0),S())}};const we=Rv(N.ctrl,ee);F==="leave"&&l?C.current.set(N,{phase:F,springs:we,payload:ee}):P.set(N,{phase:F,springs:we,payload:ee})});const _=x.useContext(Sd),T=wv(_),D=_!==T&&qT(_);zo(()=>{D&&Ae(p,N=>{N.ctrl.start({default:_})})},[_]),Ae(P,(N,L)=>{if(C.current.size){const z=p.findIndex(I=>I.key===L.key);p.splice(z,1)}}),zo(()=>{Ae(C.current.size?C.current:P,({phase:N,payload:L},z)=>{const{ctrl:I}=z;z.phase=N,h==null||h.add(I),D&&N=="enter"&&I.start({default:_}),L&&(QT(I,L.ref),(I.ref||h)&&!R.current?I.update(L):(I.start(L),R.current&&(R.current=!1)))})},i?void 0:n);const B=N=>x.createElement(x.Fragment,null,p.map((L,z)=>{const{springs:I}=P.get(L)||L.ctrl,O=N({...I},L.item,L,z);return O&&O.type?x.createElement(O.type,{...O.props,key:V.str(L.key)||V.num(L.key)?L.key:L.ctrl.id,ref:O.ref}):O}));return h?[B,h]:B}var F9=1;function j9(t,{key:e,keys:n=e},r){if(n===null){const i=new Set;return t.map(s=>{const o=r&&r.find(a=>a.item===s&&a.phase!=="leave"&&!i.has(a));return o?(i.add(o),o.key):F9++})}return V.und(n)?t:V.fun(n)?t.map(n):vn(n)}var U9=class extends O1{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Kc(...e);const n=this._get(),r=bv(n);P1(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Ti(e,n)||(ni(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&zk(this._active)&&e0(this)}_get(){const t=V.arr(this.source)?this.source.map(Rn):vn(Rn(this.source));return this.calc(...t)}_start(){this.idle&&!zk(this._active)&&(this.idle=!1,Ae(km(this),t=>{t.done=!1}),Kr.skipAnimation?(Re.batchedUpdates(()=>this.advance()),e0(this)):wm.start(this))}_attach(){let t=1;Ae(vn(this.source),e=>{mr(e)&&ru(e,this),Cv(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Ae(vn(this.source),t=>{mr(t)&&Jc(t,this)}),this._active.clear(),e0(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=vn(this.source).reduce((e,n)=>Math.max(e,(Cv(n)?n.priority:0)+1),0))}};function V9(t){return t.idle!==!1}function zk(t){return!t.size||Array.from(t).every(V9)}function e0(t){t.idle||(t.idle=!0,Ae(km(t),e=>{e.done=!0}),Yc(t,{type:"idle",parent:t}))}Kr.assign({createStringInterpolator:GT,to:(t,e)=>new U9(t,e)});var dO=/^--/;function W9(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!dO.test(t)&&!(oc.hasOwnProperty(t)&&oc[t])?e+"px":(""+e).trim()}var Fk={};function H9(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,u=Object.values(l),c=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:Fk[d]||(Fk[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));i!==void 0&&(t.textContent=i);for(const d in r)if(r.hasOwnProperty(d)){const h=W9(d,r[d]);dO.test(d)?t.style.setProperty(d,h):t.style[d]=h}c.forEach((d,h)=>{t.setAttribute(d,u[h])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var oc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G9=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),X9=["Webkit","Ms","Moz","O"];oc=Object.keys(oc).reduce((t,e)=>(X9.forEach(n=>t[G9(n,e)]=t[e]),t),oc);var K9=/^(matrix|translate|scale|rotate|skew)/,Z9=/^(translate)/,Y9=/^(rotate|skew)/,t0=(t,e)=>V.num(t)&&t!==0?t+e:t,uf=(t,e)=>V.arr(t)?t.every(n=>uf(n,e)):V.num(t)?t===e:parseFloat(t)===e,J9=class extends Cm{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>t0(a,"px")).join(",")})`,uf(o,0)])),Ci(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if(K9.test(a)){if(delete r[a],V.und(o))return;const l=Z9.test(a)?"px":Y9.test(a)?"deg":"";i.push(vn(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${t0(h,l)})`,uf(h,0)]:u=>[`${a}(${u.map(c=>t0(c,l)).join(",")})`,uf(u,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new q9(i,s)),super(r)}},q9=class extends VT{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Ae(this.inputs,(n,r)=>{const i=Rn(n[0]),[s,o]=this.transforms[r](V.arr(i)?i:n.map(Rn));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Ae(this.inputs,e=>Ae(e,n=>mr(n)&&ru(n,this)))}observerRemoved(t){t==0&&Ae(this.inputs,e=>Ae(e,n=>mr(n)&&Jc(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Yc(this,t)}},Q9=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Kr.assign({batchedUpdates:fa.unstable_batchedUpdates,createStringInterpolator:GT,colors:W6});var eF=S9(Q9,{applyAnimatedValues:H9,createAnimatedStyle:t=>new J9(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Rt=eF.animated;const xt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"}},We={bus:{address:pe(),data:pe(),rd:pe(),wr:pe(),iom:pe(),mem:pe(),pic:pe(),timer:pe(),intr:pe(),inta:pe(),int0:pe(),int1:pe(),int2:pe()},clock:pe(),cpu:{internalBus:{address:pe(),data:pe()},alu:{operands:pe(),results:pe(),cog:pe(),operation:pe()},decoder:{path:pe(),progress:pe()},AX:pe(),BX:pe(),CX:pe(),DX:pe(),SP:pe(),IP:pe(),IR:pe(),ri:pe(),id:pe(),left:pe(),right:pe(),result:pe(),FLAGS:pe(),MAR:pe(),MBR:pe()},pic:{IMR:pe(),IRR:pe(),ISR:pe(),INT0:pe(),INT1:pe(),INT2:pe(),INT3:pe(),INT4:pe(),INT5:pe(),INT6:pe(),INT7:pe()},timer:{CONT:pe(),COMP:pe()}},Ja=new Set;async function Le(t,e,n){const r=lm(We,t);if(!r)throw new Error(`No animation ref found for key ${t}`);Ja.has(t)&&await new Promise(s=>{const o=setInterval(()=>{Ja.has(t)||(clearInterval(o),s())},5)}),Ja.add(t);const i=await Promise.all(r.start({...e,config:{duration:us().executionUnit*n.duration,easing:k1[n.easing]}}));return Ja.delete(t),i}const tF=()=>Ja.forEach(t=>lm(We,t).resume()),nF=()=>Ja.forEach(t=>lm(We,t).stop());async function Oi(t,e=xt.mantis[400]){await Le(t,{backgroundColor:e},{duration:1,easing:"easeOutQuart"})}async function Ni(t){await Le(t,{backgroundColor:xt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function yp(t){await Le("bus.data",{stroke:xt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Le("cpu.MBR",{backgroundColor:xt.mantis[400]},{duration:1,easing:"easeOutQuart"}),G.set(Fl,t),await Le("cpu.MBR",{backgroundColor:xt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function Ul(t,e){await Le(`bus.${t}`,{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},{duration:e,easing:"easeInOutSine"})}async function Vl(t){await Le(`bus.${t}`,{opacity:0},{duration:1,easing:"easeInSine"})}const N1=de(M.zero(8)),_1=de(M.zero(8));function rF(t){G.set(N1,M.fromUnsigned(t.io.timer.CONT,8)),G.set(_1,M.fromUnsigned(t.io.timer.COMP,8))}const hO=de(M.fromUnsigned(0,8)),fO=de(M.fromUnsigned(1,8));function iF(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{G.set(Fl,t.value);return}case"handshake:write":case"handshake:register.update":switch(t.register){case"DATA":{G.set(hO,t.value);return}case"STATE":{G.set(fO,t.value);return}default:return t.register}case"handshake:write.ok":return;case"handshake:interrupt":return;default:return t}}const pO=de(M.zero(8));function sF(t){switch(t.type){case"leds:update":{G.set(pO,t.state);return}default:return t}}const mO=de(M.zero(8)),gO=de(M.zero(8)),yO=de(M.zero(8)),vO=de(M.zero(8));function oF(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{G.set(Fl,t.value);return}case"pio:write":case"pio:register.update":switch(t.register){case"PA":{G.set(mO,t.value);return}case"PB":{G.set(gO,t.value);return}case"CA":{G.set(yO,t.value);return}case"CB":{G.set(vO,t.value);return}default:return t.register}case"pio:write.ok":return;default:return t}}const Tv=de([]),Ov=de("");function aF(t){switch(t.type){case"printer:buffer.add":{G.set(Tv,e=>[...e,t.char]);return}case"printer:buffer.pop":{G.set(Tv,e=>e.slice(1));return}case"printer:busy.off":return;case"printer:busy.on":return;case"printer:data.read":return;case"printer:paper.print":{const e=Vn.getComputerState().io;"printer"in e&&G.set(Ov,e.printer.paper);return}case"printer:paper.replace":{G.set(Ov,"");return}case"printer:strobe.off":return;case"printer:strobe.on":return;default:return t}}const wO=de(M.zero(8));function lF(t){switch(t.type){case"switches:toggle":{G.set(wO,e=>e.withBit(t.index,!e.bit(t.index)));return}default:return t}}async function uF(t){switch(t.type){case"bus:io.selected":{await Promise.all([Le("bus.mem",{stroke:xt.stone[700]},{duration:1,easing:"easeInSine"}),Ul(t.chip,15)]);return}case"bus:io.error":{ua(t.error);return}case"bus:reset":{const e={stroke:xt.stone[700]},n={duration:1,easing:"easeInSine"};await Promise.all([Le("bus.address",e,n),Le("bus.data",e,n),Le("bus.rd",e,n),Le("bus.wr",e,n),Vl("iom"),Le("bus.mem",{stroke:xt.red[500]},{duration:1,easing:"easeOutSine"}),Vl("pic")]);return}default:return t}}async function cF(t){switch(t.type){case"clock:tick":return;default:return t.type}}function dF(t){switch(t){case"IP":return"M 551 309 H 575 V 349 H 598";case"SP":return"M 551 349 H 598";case"ri":return"M 544 388 H 575 V 349 H 598";default:throw new Error(`Invalid register ${t}`)}}function hF(){const{path:t,...e}=Xt({ref:We.cpu.internalBus.address,from:{strokeDashoffset:1,opacity:1,path:""}});return E.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[E.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598"].join(" ")}),E.jsx(Rt.path,{d:t,className:"fill-none stroke-blue-500 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var M1={exports:{}},ml=typeof Reflect=="object"?Reflect:null,jk=ml&&typeof ml.apply=="function"?ml.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},cf;ml&&typeof ml.ownKeys=="function"?cf=ml.ownKeys:Object.getOwnPropertySymbols?cf=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:cf=function(e){return Object.getOwnPropertyNames(e)};function fF(t){console&&console.warn&&console.warn(t)}var bO=Number.isNaN||function(e){return e!==e};function Ke(){Ke.init.call(this)}M1.exports=Ke;M1.exports.once=yF;Ke.EventEmitter=Ke;Ke.prototype._events=void 0;Ke.prototype._eventsCount=0;Ke.prototype._maxListeners=void 0;var Uk=10;function Am(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ke,"defaultMaxListeners",{enumerable:!0,get:function(){return Uk},set:function(t){if(typeof t!="number"||t<0||bO(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Uk=t}});Ke.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ke.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||bO(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function xO(t){return t._maxListeners===void 0?Ke.defaultMaxListeners:t._maxListeners}Ke.prototype.getMaxListeners=function(){return xO(this)};Ke.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")jk(l,this,n);else for(var u=l.length,c=AO(l,u),r=0;r<u;++r)jk(c[r],this,n);return!0};function SO(t,e,n,r){var i,s,o;if(Am(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=xO(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,fF(a)}return t}Ke.prototype.addListener=function(e,n){return SO(this,e,n,!1)};Ke.prototype.on=Ke.prototype.addListener;Ke.prototype.prependListener=function(e,n){return SO(this,e,n,!0)};function pF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function kO(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=pF.bind(r);return i.listener=n,r.wrapFn=i,i}Ke.prototype.once=function(e,n){return Am(n),this.on(e,kO(this,e,n)),this};Ke.prototype.prependOnceListener=function(e,n){return Am(n),this.prependListener(e,kO(this,e,n)),this};Ke.prototype.removeListener=function(e,n){var r,i,s,o,a;if(Am(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():mF(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Ke.prototype.off=Ke.prototype.removeListener;Ke.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function CO(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?gF(i):AO(i,i.length)}Ke.prototype.listeners=function(e){return CO(this,e,!0)};Ke.prototype.rawListeners=function(e){return CO(this,e,!1)};Ke.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):EO.call(t,e)};Ke.prototype.listenerCount=EO;function EO(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ke.prototype.eventNames=function(){return this._eventsCount>0?cf(this._events):[]};function AO(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function mF(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function gF(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function yF(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}PO(t,e,s,{once:!0}),e!=="error"&&vF(t,i,{once:!0})})}function vF(t,e,n){typeof t.on=="function"&&PO(t,"error",e,n)}function PO(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var wF=M1.exports;function Ei(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Ei.prototype[Symbol.iterator]=function(){return this});Ei.of=function(){var t=arguments,e=t.length,n=0;return new Ei(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Ei.empty=function(){var t=new Ei(function(){return{done:!0}});return t};Ei.fromSequence=function(t){var e=0,n=t.length;return new Ei(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Ei.is=function(t){return t instanceof Ei?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Pm=Ei;const Er=od(Pm);var Rm={};Rm.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Rm.SYMBOL_SUPPORT=typeof Symbol<"u";var bF=Pm,RO=Rm,xF=RO.ARRAY_BUFFER_SUPPORT,SF=RO.SYMBOL_SUPPORT;function kF(t){return typeof t=="string"||Array.isArray(t)||xF&&ArrayBuffer.isView(t)?bF.fromSequence(t):typeof t!="object"||t===null?null:SF&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var TO=function(e){var n=kF(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},CF=TO,EF=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],s,o=0,a=CF(e);;){if(o===r)return i;if(s=a.next(),s.done)return o!==n&&(i.length=o),i;i[o++]=s.value}};const OO=od(EF);var AF=Pm,PF=TO,RF=function(){var e=arguments,n=null,r=-1;return new AF(function(){var s=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=PF(e[r])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Qi=od(RF);function TF(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let $t=TF;typeof Object.assign=="function"&&($t=Object.assign);function Sr(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function Kt(t){return typeof t=="object"&&t!==null}function NO(t){let e;for(e in t)return!1;return!0}function or(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Rr(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function Vk(t){return!(!Kt(t)||t.attributes&&!Array.isArray(t.attributes))}function OF(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class D1 extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class te extends D1{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,te.prototype.constructor)}}class K extends D1{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,K.prototype.constructor)}}class ge extends D1{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ge.prototype.constructor)}}function _O(t,e){this.key=t,this.attributes=e,this.clear()}_O.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function MO(t,e){this.key=t,this.attributes=e,this.clear()}MO.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function DO(t,e){this.key=t,this.attributes=e,this.clear()}DO.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function iu(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}iu.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};iu.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};iu.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};iu.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const $O=0,LO=1,NF=2,IO=3;function ps(t,e,n,r,i,s,o){let a,l,u,c;if(r=""+r,n===$O){if(a=t._nodes.get(r),!a)throw new K(`Graph.${e}: could not find the "${r}" node in the graph.`);u=i,c=s}else if(n===IO){if(i=""+i,l=t._edges.get(i),!l)throw new K(`Graph.${e}: could not find the "${i}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(r===d)a=l.target;else if(r===h)a=l.source;else throw new K(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(r),!l)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===LO?a=l.source:a=l.target,u=i,c=s}return[a,u,c]}function _F(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ps(this,e,n,r,i,s);return o.attributes[a]}}function MF(t,e,n){t.prototype[e]=function(r,i){const[s]=ps(this,e,n,r,i);return s.attributes}}function DF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ps(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function $F(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,u]=ps(this,e,n,r,i,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function LF(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,u]=ps(this,e,n,r,i,s,o);if(typeof u!="function")throw new te(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function IF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ps(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function BF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ps(this,e,n,r,i,s);if(!Kt(a))throw new te(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function zF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ps(this,e,n,r,i,s);if(!Kt(a))throw new te(`Graph.${e}: provided attributes are not a plain object.`);return $t(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function FF(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=ps(this,e,n,r,i,s);if(typeof a!="function")throw new te(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const jF=[{name:t=>`get${t}Attribute`,attacher:_F},{name:t=>`get${t}Attributes`,attacher:MF},{name:t=>`has${t}Attribute`,attacher:DF},{name:t=>`set${t}Attribute`,attacher:$F},{name:t=>`update${t}Attribute`,attacher:LF},{name:t=>`remove${t}Attribute`,attacher:IF},{name:t=>`replace${t}Attributes`,attacher:BF},{name:t=>`merge${t}Attributes`,attacher:zF},{name:t=>`update${t}Attributes`,attacher:FF}];function UF(t){jF.forEach(function({name:e,attacher:n}){n(t,e("Node"),$O),n(t,e("Source"),LO),n(t,e("Target"),NF),n(t,e("Opposite"),IO)})}function VF(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Sr(this,o,a,n),!s)throw new K(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function WF(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=Sr(this,s,o,n),!i)throw new K(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function HF(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Sr(this,o,a,n),!s)throw new K(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function GF(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Sr(this,a,l,n),!o)throw new K(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function XF(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Sr(this,a,l,n),!o)throw new K(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new te(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function KF(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Sr(this,o,a,n),!s)throw new K(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function ZF(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Sr(this,o,a,n),!s)throw new K(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Kt(i))throw new te(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function YF(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Sr(this,o,a,n),!s)throw new K(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Kt(i))throw new te(`Graph.${e}: provided attributes are not a plain object.`);return $t(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function JF(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Sr(this,o,a,n),!s)throw new K(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new te(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const qF=[{name:t=>`get${t}Attribute`,attacher:VF},{name:t=>`get${t}Attributes`,attacher:WF},{name:t=>`has${t}Attribute`,attacher:HF},{name:t=>`set${t}Attribute`,attacher:GF},{name:t=>`update${t}Attribute`,attacher:XF},{name:t=>`remove${t}Attribute`,attacher:KF},{name:t=>`replace${t}Attributes`,attacher:ZF},{name:t=>`merge${t}Attributes`,attacher:YF},{name:t=>`update${t}Attributes`,attacher:JF}];function QF(t){qF.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const ej=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function tj(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function nj(t,e,n,r){let i,s,o,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function n0(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return new Er(function(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const a=n[s++];if(a===e){i=void 0;continue}i=t[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function rj(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function ij(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function r0(t,e){let n=t[e];return n.next!==void 0?new Er(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Er.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function sj(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):OO(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[o++]=l.key);return r}function BO(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=r(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function oj(t,e){if(t.size===0)return Er.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new Er(function(){let o,a;for(;;){if(o=i.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function $1(t,e,n,r,i,s){const o=e?nj:tj;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function aj(t,e,n,r){const i=[];return $1(!1,t,e,n,r,function(s){i.push(s)}),i}function lj(t,e,n){let r=Er.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Qi(r,n0(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Qi(r,n0(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Qi(r,n0(n.undirected))),r}function L1(t,e,n,r,i,s,o){const a=n?ij:rj;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(t,i.in,s,o),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(l=a(t,i.out,s,o),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(t,i.undirected,s,o),t&&l))return l}function uj(t,e,n,r,i){const s=[];return L1(!1,t,e,n,r,i,function(o){s.push(o)}),s}function cj(t,e,n,r){let i=Er.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Qi(i,r0(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Qi(i,r0(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Qi(i,r0(n.undirected,r))),i}function dj(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return sj(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new K(`Graph.${n}: could not find the "${s}" node in the graph.`);return aj(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new K(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new K(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return uj(r,this.multi,i,a,o)}throw new te(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function hj(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=u,BO(!1,this,r,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new K(`Graph.${s}: could not find the "${u}" node in the graph.`);return $1(!1,this.multi,r==="mixed"?this.type:r,i,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new K(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new K(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return L1(!1,r,this.multi,i,h,c,d)}throw new te(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;r!=="directed"&&(h+=this.undirectedSize),r!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,m,v,g,y,w,b)=>{d[f++]=c(p,m,v,g,y,w,b)})}else d=[],u.push((h,f,p,m,v,g,y)=>{d.push(c(h,f,p,m,v,g,y))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,m,v,g,y)=>{c(h,f,p,m,v,g,y)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new te(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new te(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,m,v,g,y,w)=>{h=c(h,f,p,m,v,g,y,w)}),this[s].apply(this,u),h}}function fj(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return c=l,BO(!0,this,r,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new K(`Graph.${s}: could not find the "${l}" node in the graph.`);return $1(!0,this.multi,r==="mixed"?this.type:r,i,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new K(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new K(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return L1(!0,r,this.multi,i,d,u,c)}throw new te(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,m,v,g)=>u(d,h,f,p,m,v,g)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,m,v,g)=>!u(d,h,f,p,m,v,g)),!this[s].apply(this,l)}}function pj(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Er.empty();if(!arguments.length)return oj(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new K(`Graph.${s}: could not find the "${o}" node in the graph.`);return lj(r,i,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new K(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new K(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return cj(r,i,l,a)}throw new te(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function mj(t){ej.forEach(e=>{dj(t,e),hj(t,e),fj(t,e),pj(t,e)})}const gj=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Tm(){this.A=null,this.B=null}Tm.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Tm.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Cu(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=i(u.key,u.attributes);if(t&&c)return u.key}}function I1(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return Cu(t,null,r,r.undirected,i);if(typeof n=="string")return Cu(t,null,r,r[n],i)}const s=new Tm;let o;if(e!=="undirected"){if(n!=="out"){if(o=Cu(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=Cu(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=Cu(t,s,r,r.undirected,i),t&&o))return o}function yj(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return I1(!1,t,e,n,function(i){r.push(i)}),r}function Eu(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return new Er(function(){let a=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const l=n[r[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function vj(t,e,n){if(t!=="mixed"){if(t==="undirected")return Eu(null,n,n.undirected);if(typeof e=="string")return Eu(null,n,n[e])}let r=Er.empty();const i=new Tm;return t!=="undirected"&&(e!=="out"&&(r=Qi(r,Eu(i,n,n.in))),e!=="in"&&(r=Qi(r,Eu(i,n,n.out)))),t!=="directed"&&(r=Qi(r,Eu(i,n,n.undirected))),r}function wj(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new K(`Graph.${n}: could not find the "${s}" node in the graph.`);return yj(r==="mixed"?this.type:r,i,o)}}function bj(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new K(`Graph.${s}: could not find the "${u}" node in the graph.`);I1(!1,r==="mixed"?this.type:r,i,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new te(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function xj(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new K(`Graph.${o}: could not find the "${u}" node in the graph.`);return I1(!0,r==="mixed"?this.type:r,i,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function Sj(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Er.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new K(`Graph.${s}: could not find the "${o}" node in the graph.`);return vj(r==="mixed"?this.type:r,i,a)}}function kj(t){gj.forEach(e=>{wj(t,e),bj(t,e),xj(t,e),Sj(t,e)})}function yh(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,l,u,c,d,h,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do{if(h=d.target,p=!0,f=i(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do{if(h=d.target,h.key!==u&&(h=d.source),p=!0,f=i(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),t&&f)return d;d=d.next}while(d)}}if(n&&!p&&(f=i(l.key,null,l.attributes,null,null,null,null),t&&f))return null}}function Cj(t,e){const n={key:t};return NO(e.attributes)||(n.attributes=$t({},e.attributes)),n}function Ej(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return NO(n.attributes)||(r.attributes=$t({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function Aj(t){if(!Kt(t))throw new te('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new te("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Kt(t.attributes)||t.attributes===null))throw new te("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Pj(t){if(!Kt(t))throw new te('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new te("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new te("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Kt(t.attributes)||t.attributes===null))throw new te("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new te("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Rj=OF(),Tj=new Set(["directed","undirected","mixed"]),Wk=new Set(["domain","_events","_eventsCount","_maxListeners"]),Oj=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Nj={allowSelfLoops:!0,multi:!1,type:"mixed"};function _j(t,e,n){if(n&&!Kt(n))throw new te(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new ge(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function Hk(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function zO(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new ge(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new ge(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Kt(a))throw new te(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new ge(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new K(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new K(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new ge(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new ge(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new iu(r,i,l,u,a);t._edges.set(i,d);const h=s===o;return r?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),r?t._undirectedSize++:t._directedSize++,c.key=i,t.emit("edgeAdded",c),i}function Mj(t,e,n,r,i,s,o,a,l){if(!r&&t.type==="undirected")throw new ge(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new ge(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new te(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Kt(a))throw new te(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new ge(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(i),h)){if((h.source.key!==s||h.target.key!==o)&&(!r||h.source.key!==o||h.target.key!==s))throw new ge(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=r?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!u:!a)return y;if(l){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else $t(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new ge(`Graph.${e}: the "${i}" edge already exists in the graph.`);let m=!1,v=!1;c||(c=Hk(t,s,{}),m=!0,s===o&&(d=c,v=!0)),d||(d=Hk(t,o,{}),v=!0),h=new iu(r,i,c,d,a),t._edges.set(i,h);const g=s===o;return r?(c.undirectedDegree++,d.undirectedDegree++,g&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,g&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),[i,!0,m,v]}function Na(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class Je extends wF.EventEmitter{constructor(e){if(super(),e=$t({},Nj,e),typeof e.multi!="boolean")throw new te(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Tj.has(e.type))throw new te(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new te(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?_O:e.type==="directed"?MO:DO;or(this,"NodeDataClass",n);const r="geid_"+Rj()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};or(this,"_attributes",{}),or(this,"_nodes",new Map),or(this,"_edges",new Map),or(this,"_directedSize",0),or(this,"_undirectedSize",0),or(this,"_directedSelfLoopCount",0),or(this,"_undirectedSelfLoopCount",0),or(this,"_edgeKeyGenerator",s),or(this,"_options",e),Wk.forEach(o=>or(this,o,this[o])),Rr(this,"order",()=>this._nodes.size),Rr(this,"size",()=>this._edges.size),Rr(this,"directedSize",()=>this._directedSize),Rr(this,"undirectedSize",()=>this._undirectedSize),Rr(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Rr(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Rr(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Rr(this,"multi",this._options.multi),Rr(this,"type",this._options.type),Rr(this,"allowSelfLoops",this._options.allowSelfLoops),Rr(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new te(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new te(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new te(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new ge("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new K(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new K(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new ge("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new K(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new K(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new ge("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new K(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new K(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new K(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new K(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new K(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new K(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new K(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new K(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new K(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new K(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new K(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return _j(this,e,n).key}mergeNode(e,n){if(n&&!Kt(n))throw new te(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&($t(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new te(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new K(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do Na(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do Na(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do Na(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=Sr(this,r,i,this.type),!n)throw new K(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new K(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Na(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new ge("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ge("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=Sr(this,e,n,"directed");if(!r)throw new K(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Na(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new ge("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ge("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Sr(this,e,n,"undirected");if(!r)throw new K(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Na(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new te("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Kt(e))throw new te("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Kt(e))throw new te("Graph.mergeAttributes: provided attributes are not a plain object.");return $t(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new te("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new te("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!Vk(n))throw new te("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new te("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!Vk(n))throw new te("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new te("Graph.forEachAdjacencyEntry: expecting a callback.");yh(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new te("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");yh(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new te("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");yh(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new te("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");yh(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):OO(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new te("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new te("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new te("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new te("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new te("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new te("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new te("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new te("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Er(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=Cj(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=Ej(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof Je)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!Kt(e))throw new te("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Kt(e.attributes))throw new te("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new te("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],Aj(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new te("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],Pj(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new Je($t({},this._options,e));return n.replaceAttributes($t({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=$t({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new ge(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new ge("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new ge("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,zO(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,$t({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof r[h]>"u"?r[h]=0:r[h]++,l+=`${r[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!Wk.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,or(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(Je.prototype[Symbol.for("nodejs.util.inspect.custom")]=Je.prototype.inspect);Oj.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?zO:Mj;t.generateKey?Je.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:Je.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});UF(Je);QF(Je);mj(Je);kj(Je);class FO extends Je{constructor(e){const n=$t({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new te("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new te('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class B1 extends Je{constructor(e){const n=$t({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new te("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new te('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class jO extends Je{constructor(e){const n=$t({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new te("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class UO extends Je{constructor(e){const n=$t({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new te("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new te('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class VO extends Je{constructor(e){const n=$t({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new te("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new te('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function su(t){t.from=function(e,n){const r=$t({},e.options,n),i=new t(r);return i.import(e),i}}su(Je);su(FO);su(B1);su(jO);su(UO);su(VO);Je.Graph=Je;Je.DirectedGraph=FO;Je.UndirectedGraph=B1;Je.MultiGraph=jO;Je.MultiDirectedGraph=UO;Je.MultiUndirectedGraph=VO;Je.InvalidArgumentsGraphError=te;Je.NotFoundGraphError=K;Je.UsageGraphError=ge;var Dj=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},WO=Rm,$j=WO.ARRAY_BUFFER_SUPPORT,Lj=WO.SYMBOL_SUPPORT,Ij=function(e,n){var r,i,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||$j&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(Lj&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,s=0;a=r.next(),a.done!==!0;)n(a.value,s),s++;return}for(i in e)e.hasOwnProperty(i)&&n(e[i],i)},HO=Pm,Bj=Ij;function _t(){this.clear()}_t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};_t.prototype.enqueue=function(t){return this.items.push(t),++this.size};_t.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};_t.prototype.peek=function(){if(this.size)return this.items[this.offset]};_t.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)t.call(e,this.items[n],r,this)};_t.prototype.toArray=function(){return this.items.slice(this.offset)};_t.prototype.values=function(){var t=this.items,e=this.offset;return new HO(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};_t.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new HO(function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:[n++,r],done:!1}})};typeof Symbol<"u"&&(_t.prototype[Symbol.iterator]=_t.prototype.values);_t.prototype.toString=function(){return this.toArray().join(",")};_t.prototype.toJSON=function(){return this.toArray()};_t.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:_t,enumerable:!1}),t};typeof Symbol<"u"&&(_t.prototype[Symbol.for("nodejs.util.inspect.custom")]=_t.prototype.inspect);_t.from=function(t){var e=new _t;return Bj(t,function(n){e.enqueue(n)}),e};_t.of=function(){return _t.from(arguments)};var zj=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var s=0;s<r;s++)e[i+s]=n[s]}},GO=Dj,Fj=zj;function jj(t,e,n){if(!GO(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var r=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,m,v,g=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,m=u.length;f<m;f++)for(c=u[f],d=i(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){g=!0;break e}}else for(u=l,l=[],f=0,m=u.length;f<m;f++)for(c=u[f],d=r(c),p=0,v=d.length;p<v;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){g=!0;break e}if(!g)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function XO(t,e,n){if(!GO(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,i={},s=0;i[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!r.has(u)&&(r.add(u),Fj(c,e[t](u)),i[u]=s);s++,o=c}return i}XO.bind(null,"outboundNeighbors");XO.bind(null,"neighbors");var Uj=jj;const ae=new B1({allowSelfLoops:!1});ae.addNode("MBR",{position:[610,250]});ae.addNode("AX",{position:[522,45]});ae.addNode("BX",{position:[522,85]});ae.addNode("CX",{position:[522,125]});ae.addNode("DX",{position:[522,165]});ae.addNode("id",{position:[522,205]});ae.addNode("IP",{position:[451,309]});ae.addNode("SP",{position:[451,349]});ae.addNode("ri",{position:[451,388]});ae.addNode("result",{position:[370,130]});ae.addNode("FLAGS",{position:[250,225]});ae.addNode("IR",{position:[205,272]});ae.addNode("left",{position:[60,85]});ae.addNode("right",{position:[60,145]});ae.addNode("AX join",{position:[492,45]});ae.addNode("BX join",{position:[492,85]});ae.addNode("CX join",{position:[492,125]});ae.addNode("DX join",{position:[492,165]});ae.addNode("id join",{position:[492,205]});ae.addNode("data mbr join",{position:[492,250]});ae.addNode("IP join",{position:[421,309]});ae.addNode("SP join",{position:[421,349]});ae.addNode("ri join",{position:[421,388]});ae.addNode("addresses mbr join",{position:[421,250]});ae.addNode("result mbr join",{position:[370,250]});ae.addNode("FLAGS mbr join",{position:[250,250]});ae.addNode("IR mbr join",{position:[205,250]});ae.addNode("left join",{position:[30,85]});ae.addNode("right join",{position:[30,145]});ae.addNode("operands mbr join",{position:[30,250]});ae.addUndirectedEdge("AX","AX join");ae.addUndirectedEdge("BX","BX join");ae.addUndirectedEdge("CX","CX join");ae.addUndirectedEdge("DX","DX join");ae.addUndirectedEdge("id","id join");ae.addUndirectedEdge("AX join","BX join");ae.addUndirectedEdge("BX join","CX join");ae.addUndirectedEdge("CX join","DX join");ae.addUndirectedEdge("DX join","id join");ae.addUndirectedEdge("id join","data mbr join");ae.addUndirectedEdge("data mbr join","MBR");ae.addUndirectedEdge("IP","IP join");ae.addUndirectedEdge("SP","SP join");ae.addUndirectedEdge("ri","ri join");ae.addUndirectedEdge("IP join","SP join");ae.addUndirectedEdge("SP join","ri join");ae.addUndirectedEdge("IP join","addresses mbr join");ae.addUndirectedEdge("addresses mbr join","data mbr join");ae.addUndirectedEdge("result","result mbr join");ae.addUndirectedEdge("result mbr join","addresses mbr join");ae.addUndirectedEdge("FLAGS","FLAGS mbr join");ae.addUndirectedEdge("FLAGS mbr join","result mbr join");ae.addUndirectedEdge("IR","IR mbr join");ae.addUndirectedEdge("IR mbr join","FLAGS mbr join");ae.addUndirectedEdge("left","left join");ae.addUndirectedEdge("right","right join");ae.addUndirectedEdge("left join","right join");ae.addUndirectedEdge("right join","operands mbr join");ae.addUndirectedEdge("operands mbr join","IR mbr join");function Vj(t,e){const n=Uj(ae,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const r=ae.getNodeAttribute(n[0],"position");let i=`M ${r[0]} ${r[1]}`;for(let s=1;s<n.length;s++){const[o,a]=ae.getNodeAttribute(n[s],"position");i+=` L ${o} ${a}`}return i}function Wj(){const{path:t,...e}=Xt({ref:We.cpu.internalBus.data,from:{strokeDashoffset:1,opacity:1,path:""}});return E.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[E.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 272 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),E.jsx(Rt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const i0=(t,e)=>{const n=Vj(t,e);return Le("cpu.internalBus.data",{from:{strokeDashoffset:1,opacity:1,path:n},to:{strokeDashoffset:0}},{duration:5,easing:"easeInOutSine"})},s0=()=>Le("cpu.internalBus.data",{opacity:0},{duration:1,easing:"easeInSine"});async function Hj(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"},n={duration:1,easing:"easeInSine"};await Le("cpu.alu.operands",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},e),G.set(MT,t.operation),await Promise.all([Le("cpu.alu.operation",{backgroundColor:xt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Le("cpu.alu.cog",{rot:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Le("cpu.alu.operation",{backgroundColor:xt.stone[800]},{duration:1,easing:"easeOutQuart"}),Le("cpu.alu.results",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},e)]),await Promise.all([Oi("cpu.result"),Oi("cpu.FLAGS")]),G.set(rt.FLAGS,t.flags),G.set(rt.result,t.result),await Promise.all([Ni("cpu.result"),Ni("cpu.FLAGS")]),await Promise.all([Le("cpu.alu.operands",{opacity:0},n),Le("cpu.alu.results",{opacity:0},n)]);return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{G.set(Oo,e=>e.phase==="stopped"?e:{...e,phase:"interrupt"}),await Promise.all([Le("cpu.id",{opacity:1},{duration:.5,easing:"easeInOutQuad"}),Le("cpu.ri",{opacity:1},{duration:.5,easing:"easeInOutQuad"})]);return}case"cpu:cycle.start":{NT(t.instruction.position.start),G.set(Oo,{phase:"fetching",metadata:t.instruction}),await Promise.all([Le("cpu.id",{opacity:t.instruction.willUse.id?1:.4},{duration:.5,easing:"easeInOutQuad"}),Le("cpu.ri",{opacity:t.instruction.willUse.ri?1:.4},{duration:.5,easing:"easeInOutQuad"})]);return}case"cpu:cycle.update":{G.set(Oo,e=>e.phase==="stopped"?e:{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase});return}case"cpu:decode":{await Le("cpu.decoder.path",{from:{strokeDashoffset:1,opacity:1},to:{strokeDashoffset:0}},{duration:3,easing:"easeInOutSine"}),await Le("cpu.decoder.progress",{from:{progress:0,opacity:1},to:{progress:1}},{duration:3,easing:"easeInOutSine"}),await Promise.all([Le("cpu.decoder.progress",{opacity:0},{duration:1,easing:"easeInSine"}),Le("cpu.decoder.path",{opacity:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:error":{G.set(Oo,{phase:"stopped",error:t.error}),ua(t.error);return}case"cpu:halt":case"cpu:int.0":{G.set(Oo,{phase:"stopped"}),ua();return}case"cpu:int.3":{t7();return}case"cpu:int.6":return;case"cpu:int.7":return;case"cpu:inta.off":{await Vl("inta");return}case"cpu:inta.on":{await Ul("inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type==="cpu:rd.on"?"rd":"wr";await Le(`bus.${e}`,{stroke:xt.red[500]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Ul("iom",15);return}case"cpu:mar.set":{const e=dF(t.register);await Le("cpu.internalBus.address",{from:{strokeDashoffset:1,opacity:1,path:e},to:{strokeDashoffset:0}},{duration:5,easing:"easeInOutSine"}),await Oi("cpu.MAR",xt.blue[500]),G.set(_T,G.get(rt[t.register])),await Le("bus.address",{stroke:xt.blue[500]},{duration:5,easing:"easeOutSine"}),await Promise.all([Ni("cpu.MAR"),Le("cpu.internalBus.address",{opacity:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=Ro(t.register);await i0("MBR",e),await Oi(`cpu.${e}`),G.set(rt[t.register],G.get(Fl)),await Promise.all([Ni(`cpu.${e}`),s0()]);return}case"cpu:mbr.set":{const[e]=Ro(t.register);await i0(e,"MBR"),await Oi("cpu.MBR"),G.set(Fl,G.get(rt[t.register])),await Le("bus.data",{stroke:xt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Promise.all([Ni("cpu.MBR"),s0()]);return}case"cpu:register.copy":{const[e]=Ro(t.src),[n]=Ro(t.dest);e!==n&&await i0(e,n),await Oi(`cpu.${n}`),G.set(rt[t.dest],G.get(rt[t.src])),await Promise.all([Ni(`cpu.${n}`),e!==n&&s0()]);return}case"cpu:register.update":{const[e]=Ro(t.register);await Oi(`cpu.${e}`),G.set(rt[t.register],t.value),await Ni(`cpu.${e}`);return}default:return t}}async function Gj(t){switch(t.type){case"f10:press":return;case"f10:int.off":{await Vl("int0");return}case"f10:int.on":{await Ul("int0",10);return}default:return t}}async function Xj(t){switch(t.type){case"memory:read":{me.inRange(t.address)&&G.set(mv,me.from(t.address));return}case"memory:read.ok":{await yp(t.value);return}case"memory:write":{if(me.inRange(t.address)){const e=Number(t.address);G.set(mv,me.from(t.address)),G.set(d1,n=>[...n.slice(0,e),t.value,...n.slice(e+1)])}return}case"memory:write.ok":return;case"memory:read.error":case"memory:write.error":{ua(t.error);return}default:return t}}async function Kj(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await yp(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Oi(`pic.${t.register}`),t.register){case"IMR":{G.set(h1,t.value);break}case"IRR":{G.set(f1,t.value);break}case"ISR":{G.set(p1,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));G.set(dp[e],t.value);break}default:return t}await Ni(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await Vl("intr");return}case"pic:intr.on":{await Ul("intr",10);return}case"pic:int.send":{await yp(t.number);return}default:return t}}async function Zj(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await yp(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Oi(`timer.${t.register}`),t.register){case"CONT":{G.set(N1,t.value);break}case"COMP":{G.set(_1,t.value);break}default:return t.register}await Ni(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await Vl("int1");return}case"timer:int.on":{await Ul("int1",10);return}default:return t}}const Yj=de("");async function Jj(t){switch(t.type){case"console:read":{G.set(vi,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{G.sub(vi,()=>{const n=G.get(vi);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"console:write":{G.set(Yj,Vn.getComputerState().io.console);return}default:return t}}const qj={bus:"#2563eb",clock:"#65a30d",console:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",switches:"#65a30d",timer:"#2563eb"};async function Qj(t){const[e,n]=t.type.split(":");console.group(`%c ${e} %c ${n}`,`background: ${qj[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const r in t)if(r!=="type"&&Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];i instanceof M?console.log(`${r}: %c${i.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):i instanceof me?console.log(`${r}: %c${i.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):i instanceof Bn?console.log(`${r}: %c${i.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof i=="number"?console.log(`${r}: %c${i} %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof i=="string"?console.log(`${r}: %c"${i}" %c(string)`,"color: #f97316;","color: #737373;"):typeof i=="boolean"?console.log(`${r}: %c${i}`,"color: #06b6d4;"):i===null?console.log(`${r}: %cnull`,"color: #b91c1c;"):console.log(`${r}:`,i)}if(console.groupEnd(),e==="bus")return await uF(t);if(e==="clock")return await cF(t);if(e==="console")return Jj(t);if(e==="cpu")return await Hj(t);if(e==="f10")return await Gj(t);if(e==="handshake")return iF(t);if(e==="leds")return sF(t);if(e==="memory")return await Xj(t);if(e==="pic")return await Kj(t);if(e==="pio")return oF(t);if(e==="printer")return aF(t);if(e==="switches")return lF(t);if(e==="timer")return await Zj(t);throw new Error(`Unknown event type: ${t.type}`)}function e7(t){const e=t.translate(us().language);Jp.error(e)}const Vn=new qB,vi=de({type:"stopped"}),z1=()=>G.get(vi);function ua(t){t&&e7(t),NT(null),OT(!1),G.set(vi,{type:"stopped",error:t}),nF()}function t7(){G.set(vi,{type:"paused"})}function n7(){Jp.error(cm(us().language,"messages.assemble-error"))}function Au(){Jp.error(cm(us().language,"messages.invalid-action"))}function r7(t){_6(t),D6(t),$6(t),rF(t),"handshake"in t.io&&(G.set(hO,M.fromUnsigned(t.io.handshake.DATA,8)),G.set(fO,M.fromUnsigned(t.io.handshake.STATE,8))),"leds"in t.io&&G.set(pO,M.fromUnsigned(t.io.leds,8)),"pio"in t.io&&(G.set(mO,M.fromUnsigned(t.io.pio.PA,8)),G.set(gO,M.fromUnsigned(t.io.pio.PB,8)),G.set(yO,M.fromUnsigned(t.io.pio.CA,8)),G.set(vO,M.fromUnsigned(t.io.pio.CB,8))),"printer"in t.io&&(G.set(Tv,t.io.printer.buffer.map(e=>M.fromUnsigned(e,8))),G.set(Ov,t.io.printer.paper)),"switches"in t.io&&G.set(wO,M.fromUnsigned(t.io.switches,8))}async function i7(...t){const e=t[0],n=z1();switch(e){case"cpu.run":{if(n.type==="running")return Au();if(n.type==="stopped"){if(!window.codemirror)return;const r=window.codemirror.state.doc.toString(),i=tR(r);if(!i.success)return n7();OT(!0),Vn.loadProgram({program:i,data:us().dataOnLoad,devices:us().devices}),r7(Vn.getComputerState()),G.set(vi,{type:"running",until:"infinity"}),Da(Vn.startCPU()),s7()}else G.set(vi,{type:"running",until:"infinity",waitingForInput:!1}),tF();return}case"cpu.stop":{ua();return}case"f10.press":{if(n.type!=="running")return Au();Da(Vn.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!Vn.devices.switches.connected())return Au();const r=t[1];Da(Vn.devices.switches.toggle(r));return}case"console.handleKey":{if(n.type!=="running"||!n.waitingForInput)return Au();const r=t[1];let i;if(r.inputType==="insertLineBreak")i=`
`;else if(r.inputType==="insertText"||r.inputType==="insertCompositionText"){if(!r.data)return;i=r.data}else return;Vn.devices.console.readChar(M.fromChar(i)),G.set(vi,{...n,waitingForInput:!1});return}case"console.clean":{Da(Vn.devices.console.clear());return}case"printer.clean":{if(!Vn.devices.printer.connected())return Au();Da(Vn.devices.printer.clear());return}default:return e}}async function Da(t){try{for(;z1().type==="running";){const e=t.next();if(e.done)break;await Qj(e.value)}t.return()}catch(e){const n=Pt.from(e);ua(n)}}async function s7(){try{for(;z1().type==="running";){const t=us().clockSpeed;await Le("clock",{from:{angle:0},to:{angle:360}},{duration:t,easing:"linear"}),Da(Vn.devices.clock.tick())}}catch(t){const e=Pt.from(t);ua(e)}}function F1(){return[wi(vi),i7]}function Gk(){const t=nu(),[e,n]=F1(),r=x.useCallback(i=>{i.key==="F5"?(i.preventDefault(),i.shiftKey?n("cpu.stop"):n("cpu.run")):i.key==="F11"&&(i.preventDefault(),n("cpu.step"))},[n]);return z2("keydown",r,void 0,[n]),E.jsx("div",{className:"flex items-center justify-center gap-4 lg:h-full lg:justify-start",children:E.jsxs("button",{className:"flex w-min items-center gap-1 rounded-md bg-mantis-500 p-2 text-mantis-50 transition-colors hover:enabled:bg-mantis-600 hover:enabled:text-white disabled:opacity-40",disabled:e.type==="running",onClick:()=>n("cpu.run"),children:[E.jsx("span",{className:"icon-[lucide--play] block h-5 w-5"}),E.jsx("span",{className:"whitespace-nowrap font-semibold tracking-wide",children:t("runner.action.start")})]})})}function o7(){const t=nu(),[e]=F1();return E.jsxs("div",{className:$y("mx-auto flex h-6 w-40 select-none items-center justify-center gap-1 rounded-full lg:mx-8","text-center text-sm font-semibold",e.type==="running"&&"bg-emerald-200 text-emerald-700",e.type==="paused"&&"bg-amber-200 text-amber-700",e.type==="waiting-for-input"&&"bg-amber-200 text-amber-700",e.type==="stopped"&&(e.reason==="halt"?"bg-sky-200 text-sky-700":"bg-red-200 text-red-700")),children:[E.jsx("span",{className:$y("h-4 w-4",e.type==="running"&&"icon-[carbon--settings] animate-spin",e.type==="paused"&&"icon-[carbon--pause] animate-pulse",e.type==="waiting-for-input"&&"icon-[carbon--keyboard] animate-bounce",e.type==="stopped"&&[e.reason==="halt"&&"icon-[carbon--stop-sign]",e.reason==="error"&&"icon-[carbon--error]"])}),E.jsx("span",{children:t(`runner.state.${e.type}`)})]})}function a7(){const t=a4(),e=nu(),[n,r]=b2(XP),[i,s]=H$(!1),o=q$(()=>{window.navigator.vibrate(100),s()},{isPreventDefault:!0,delay:1500});return E.jsxs("header",{className:"text-sm text-white",children:[E.jsxs("div",{className:"flex items-center lg:h-full",children:[E.jsxs("div",{className:"flex select-none items-center justify-center px-4 py-2",children:[E.jsx("span",{className:$y("icon-[carbon--machine-learning] mr-2 block h-8 w-8",i&&"animate-spin"),...o}),E.jsxs("h1",{className:"text-xl font-bold",children:["Von",E.jsx("span",{className:"text-mantis-400",children:"Sim"})]})]}),E.jsx(o7,{}),!t&&E.jsxs(E.Fragment,{children:[E.jsx(Gk,{}),E.jsx("div",{className:"grow"})]}),E.jsx("button",{className:st("mr-2 h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",n?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:e("settings.title"),onClick:()=>r(!n),children:E.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]}),t&&E.jsx(Gk,{})]})}const l7=1024;let u7=0;class o0{constructor(e,n){this.from=e,this.to=n}}class Fe{constructor(e={}){this.id=u7++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=zn.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Fe.closedBy=new Fe({deserialize:t=>t.split(" ")});Fe.openedBy=new Fe({deserialize:t=>t.split(" ")});Fe.group=new Fe({deserialize:t=>t.split(" ")});Fe.contextHash=new Fe({perNode:!0});Fe.lookAhead=new Fe({perNode:!0});Fe.mounted=new Fe({perNode:!0});const c7=Object.create(null);class zn{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):c7,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new zn(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Fe.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Fe.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}zn.none=new zn("",Object.create(null),0,8);class j1{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new zn(r.name,i,r.id,r.flags):r)}return new j1(n)}}const vh=new WeakMap,Xk=new WeakMap;var Ht;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Ht||(Ht={}));class mt{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(Fe.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new bp(this.topNode,e)}cursorAt(e,n=0,r=0){let i=vh.get(this)||this.topNode,s=new bp(i);return s.moveTo(e,n),vh.set(this,s._tree),s}get topNode(){return new es(this,0,0,null)}resolve(e,n=0){let r=Wl(vh.get(this)||this.topNode,e,n,!1);return vh.set(this,r),r}resolveInner(e,n=0){let r=Wl(Xk.get(this)||this.topNode,e,n,!0);return Xk.set(this,r),r}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Ht.IncludeAnonymous)>0;for(let l=this.cursor(o|Ht.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:W1(zn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new mt(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new mt(zn.none,n,r,i)))}static build(e){return h7(e)}}mt.empty=new mt(zn.none,[],[],0);class U1{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new U1(this.buffer,this.index)}}class wa{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return zn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(KO(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let u=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,u)}return new wa(s,o,this.set)}}function KO(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function ZO(t,e){let n=t.childBefore(e);for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(t=n,n=r.prevSibling):n=r}return t}function Wl(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof es&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Ht.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof es&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class es{constructor(e,n,r,i){this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(KO(i,r,d,d+c.length)){if(c instanceof wa){if(s&Ht.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,r-d,i);if(h>-1)return new Us(new d7(o,c,e,d),null,h)}else if(s&Ht.IncludeAnonymous||!c.type.isAnonymous||V1(c)){let h;if(!(s&Ht.IgnoreMounts)&&c.props&&(h=c.prop(Fe.mounted))&&!h.overlay)return new es(h.tree,d,e,o);let f=new es(c,d,e,o);return s&Ht.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&Ht.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Ht.IgnoreOverlays)&&(i=this._tree.prop(Fe.mounted))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new es(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new bp(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return Wl(this,e,n,!1)}resolveInner(e,n=0){return Wl(this,e,n,!0)}enterUnfinishedNodesBefore(e){return ZO(this,e)}getChild(e,n=null,r=null){let i=vp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return vp(this,e,n,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return wp(this,e)}}function vp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function wp(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class d7{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Us{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Us(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Ht.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Us(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Us(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Us(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new bp(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new mt(this.type,e,n,this.to-this.from)}resolve(e,n=0){return Wl(this,e,n,!1)}resolveInner(e,n=0){return Wl(this,e,n,!0)}enterUnfinishedNodesBefore(e){return ZO(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,r=null){let i=vp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return vp(this,e,n,r)}get node(){return this}matchContext(e){return wp(this,e)}}class bp{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof es)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof es?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Ht.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ht.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ht.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Ht.IncludeAnonymous||a instanceof wa||!a.type.isAnonymous||V1(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Us(this.buffer,n,this.stack[i]);return this.bufferNode=new Us(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return wp(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return wp(this.node,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function V1(t){return t.children.some(e=>e instanceof wa||!e.type.isAnonymous||V1(e))}function h7(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=l7,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new U1(n,n.length):n,l=r.types,u=0,c=0;function d(b,S,A,P,C){let{id:R,start:_,end:T,size:D}=a,B=c;for(;D<0;)if(a.next(),D==-1){let O=s[R];A.push(O),P.push(_-b);return}else if(D==-3){u=R;return}else if(D==-4){c=R;return}else throw new RangeError(`Unrecognized record size: ${D}`);let N=l[R],L,z,I=_-b;if(T-_<=i&&(z=m(a.pos-S,C))){let O=new Uint16Array(z.size-z.skip),$=a.pos-z.size,F=O.length;for(;a.pos>$;)F=v(z.start,O,F);L=new wa(O,T-z.start,r),I=z.start-b}else{let O=a.pos-D;a.next();let $=[],F=[],X=R>=o?R:-1,ee=0,re=T;for(;a.pos>O;)X>=0&&a.id==X&&a.size>=0?(a.end<=re-i&&(f($,F,_,ee,a.end,re,X,B),ee=$.length,re=a.end),a.next()):d(_,O,$,F,X);if(X>=0&&ee>0&&ee<$.length&&f($,F,_,ee,_,re,X,B),$.reverse(),F.reverse(),X>-1&&ee>0){let we=h(N);L=W1(N,$,F,0,$.length,0,T-_,we,we)}else L=p(N,$,F,T-_,B-T)}A.push(L),P.push(I)}function h(b){return(S,A,P)=>{let C=0,R=S.length-1,_,T;if(R>=0&&(_=S[R])instanceof mt){if(!R&&_.type==b&&_.length==P)return _;(T=_.prop(Fe.lookAhead))&&(C=A[R]+_.length+T)}return p(b,S,A,P,C)}}function f(b,S,A,P,C,R,_,T){let D=[],B=[];for(;b.length>P;)D.push(b.pop()),B.push(S.pop()+A-C);b.push(p(r.types[_],D,B,R-C,T-R)),S.push(C-A)}function p(b,S,A,P,C=0,R){if(u){let _=[Fe.contextHash,u];R=R?[_].concat(R):[_]}if(C>25){let _=[Fe.lookAhead,C];R=R?[_].concat(R):[_]}return new mt(b,S,A,P,R)}function m(b,S){let A=a.fork(),P=0,C=0,R=0,_=A.end-i,T={size:0,start:0,skip:0};e:for(let D=A.pos-b;A.pos>D;){let B=A.size;if(A.id==S&&B>=0){T.size=P,T.start=C,T.skip=R,R+=4,P+=4,A.next();continue}let N=A.pos-B;if(B<0||N<D||A.start<_)break;let L=A.id>=o?4:0,z=A.start;for(A.next();A.pos>N;){if(A.size<0)if(A.size==-3)L+=4;else break e;else A.id>=o&&(L+=4);A.next()}C=z,P+=B,R+=L}return(S<0||P==b)&&(T.size=P,T.start=C,T.skip=R),T.size>4?T:void 0}function v(b,S,A){let{id:P,start:C,end:R,size:_}=a;if(a.next(),_>=0&&P<o){let T=A;if(_>4){let D=a.pos-(_-4);for(;a.pos>D;)A=v(b,S,A)}S[--A]=T,S[--A]=R-b,S[--A]=C-b,S[--A]=P}else _==-3?u=P:_==-4&&(c=P);return A}let g=[],y=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,g,y,-1);let w=(e=t.length)!==null&&e!==void 0?e:g.length?y[0]+g[0].length:0;return new mt(l[t.topID],g.reverse(),y.reverse(),w)}const Kk=new WeakMap;function df(t,e){if(!t.isAnonymous||e instanceof wa||e.type!=t)return 1;let n=Kk.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof mt)){n=1;break}n+=df(t,r)}Kk.set(e,n)}return n}function W1(t,e,n,r,i,s,o,a,l){let u=0;for(let p=r;p<i;p++)u+=df(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,m,v,g,y){for(let w=v;w<g;){let b=w,S=m[w],A=df(t,p[w]);for(w++;w<g;w++){let P=df(t,p[w]);if(A+P>=c)break;A+=P}if(w==b+1){if(A>c){let P=p[b];f(P.children,P.positions,0,P.children.length,m[b]+y);continue}d.push(p[b])}else{let P=m[w-1]+p[w-1].length-S;d.push(W1(t,p,m,b,w,S,P,null,l))}h.push(S+y-s)}}return f(e,n,r,i,0),(a||l)(d,h,o)}class Xo{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Xo(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new Xo(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&i.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}class YO{startParse(e,n,r){return typeof e=="string"&&(e=new f7(e)),r=r?r.length?r.map(i=>new o0(i.from,i.to)):[new o0(0,0)]:[new o0(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class f7{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Fe({perNode:!0});let p7=0;class Vt{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=p7++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Vt([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new xp;return n=>n.modified.indexOf(e)>-1?n:xp.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let m7=0;class xp{constructor(){this.instances=[],this.id=m7++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&g7(n,a.modified));if(r)return r;let i=[],s=new Vt(i,e,n);for(let a of n)a.instances.push(s);let o=y7(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(xp.get(a,l));return s}}function g7(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function y7(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function v7(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+i);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==i.length)break;let f=i[d++];if(d==i.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new Sp(r,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return JO.add(e)}const JO=new Fe;class Sp{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Sp.empty=new Sp([],2,null);function qO(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function w7(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function b7(t,e,n,r=0,i=t.length){let s=new x7(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class x7{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=i,c=S7(e)||Sp.empty,d=w7(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(Fe.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),m=e.firstChild();for(let v=0,g=a;;v++){let y=v<h.overlay.length?h.overlay[v]:null,w=y?y.from+a:l,b=Math.max(n,g),S=Math.min(r,w);if(b<S&&m)for(;e.from<S&&(this.highlightRange(e,b,S,i,s),this.startSpan(Math.min(S,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>r)break;g=y.to+a,g>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+a),Math.min(r,g),"",p),this.startSpan(Math.min(r,g),u))}m&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function S7(t){let e=t.type.prop(JO);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const J=Vt.define,wh=J(),Cs=J(),Zk=J(Cs),Yk=J(Cs),Es=J(),bh=J(Es),a0=J(Es),ei=J(),So=J(ei),qr=J(),Qr=J(),Nv=J(),Pu=J(Nv),xh=J(),Ee={comment:wh,lineComment:J(wh),blockComment:J(wh),docComment:J(wh),name:Cs,variableName:J(Cs),typeName:Zk,tagName:J(Zk),propertyName:Yk,attributeName:J(Yk),className:J(Cs),labelName:J(Cs),namespace:J(Cs),macroName:J(Cs),literal:Es,string:bh,docString:J(bh),character:J(bh),attributeValue:J(bh),number:a0,integer:J(a0),float:J(a0),bool:J(Es),regexp:J(Es),escape:J(Es),color:J(Es),url:J(Es),keyword:qr,self:J(qr),null:J(qr),atom:J(qr),unit:J(qr),modifier:J(qr),operatorKeyword:J(qr),controlKeyword:J(qr),definitionKeyword:J(qr),moduleKeyword:J(qr),operator:Qr,derefOperator:J(Qr),arithmeticOperator:J(Qr),logicOperator:J(Qr),bitwiseOperator:J(Qr),compareOperator:J(Qr),updateOperator:J(Qr),definitionOperator:J(Qr),typeOperator:J(Qr),controlOperator:J(Qr),punctuation:Nv,separator:J(Nv),bracket:Pu,angleBracket:J(Pu),squareBracket:J(Pu),paren:J(Pu),brace:J(Pu),content:ei,heading:So,heading1:J(So),heading2:J(So),heading3:J(So),heading4:J(So),heading5:J(So),heading6:J(So),contentSeparator:J(ei),list:J(ei),quote:J(ei),emphasis:J(ei),strong:J(ei),link:J(ei),monospace:J(ei),strikethrough:J(ei),inserted:J(),deleted:J(),changed:J(),invalid:J(),meta:xh,documentMeta:J(xh),annotation:J(xh),processingInstruction:J(xh),definition:Vt.defineModifier(),constant:Vt.defineModifier(),function:Vt.defineModifier(),standard:Vt.defineModifier(),local:Vt.defineModifier(),special:Vt.defineModifier()};qO([{tag:Ee.link,class:"tok-link"},{tag:Ee.heading,class:"tok-heading"},{tag:Ee.emphasis,class:"tok-emphasis"},{tag:Ee.strong,class:"tok-strong"},{tag:Ee.keyword,class:"tok-keyword"},{tag:Ee.atom,class:"tok-atom"},{tag:Ee.bool,class:"tok-bool"},{tag:Ee.url,class:"tok-url"},{tag:Ee.labelName,class:"tok-labelName"},{tag:Ee.inserted,class:"tok-inserted"},{tag:Ee.deleted,class:"tok-deleted"},{tag:Ee.literal,class:"tok-literal"},{tag:Ee.string,class:"tok-string"},{tag:Ee.number,class:"tok-number"},{tag:[Ee.regexp,Ee.escape,Ee.special(Ee.string)],class:"tok-string2"},{tag:Ee.variableName,class:"tok-variableName"},{tag:Ee.local(Ee.variableName),class:"tok-variableName tok-local"},{tag:Ee.definition(Ee.variableName),class:"tok-variableName tok-definition"},{tag:Ee.special(Ee.variableName),class:"tok-variableName2"},{tag:Ee.definition(Ee.propertyName),class:"tok-propertyName tok-definition"},{tag:Ee.typeName,class:"tok-typeName"},{tag:Ee.namespace,class:"tok-namespace"},{tag:Ee.className,class:"tok-className"},{tag:Ee.macroName,class:"tok-macroName"},{tag:Ee.propertyName,class:"tok-propertyName"},{tag:Ee.operator,class:"tok-operator"},{tag:Ee.comment,class:"tok-comment"},{tag:Ee.meta,class:"tok-meta"},{tag:Ee.invalid,class:"tok-invalid"},{tag:Ee.punctuation,class:"tok-punctuation"}]);var l0;const qa=new Fe;function k7(t){return ue.define({combine:t?e=>e.concat(t):void 0})}const C7=new Fe;class zr{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Ie.prototype.hasOwnProperty("tree")||Object.defineProperty(Ie.prototype,"tree",{get(){return Zr(this)}}),this.parser=n,this.extension=[Xl.of(this),Ie.languageData.of((s,o,a)=>{let l=Jk(s,o,a),u=l.type.prop(qa);if(!u)return[];let c=s.facet(u),d=l.type.prop(C7);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return Jk(e,n,r).type.prop(qa)==this.data}findRegions(e){let n=e.facet(Xl);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(qa)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Fe.mounted);if(a){if(a.tree.prop(qa)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof mt&&i(u,s.positions[l]+o)}};return i(Zr(e),0),r}get allowsNesting(){return!0}}zr.setState=Me.define();function Jk(t,e,n){let r=t.facet(Xl),i=Zr(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Ht.ExcludeBuffers))s.type.isTop&&(i=s);return i}function Zr(t){let e=t.field(zr.state,!1);return e?e.tree:mt.empty}class E7{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ru=null;class Hl{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Hl(e,n,[],mt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new E7(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=mt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Xo.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Xo.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ru;Ru=this;try{return e()}finally{Ru=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=qk(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),r=Xo.applyChanges(r,l),i=mt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new Hl(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=qk(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends YO{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Ru;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new mt(zn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ru}}function qk(t,e,n){return Xo.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Gl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Gl(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Hl.create(e.facet(Xl).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Gl(r)}}zr.state=un.define({create:Gl.init,update(t,e){for(let n of e.effects)if(n.is(zr.setState))return n.value;return e.startState.facet(Xl)!=e.state.facet(Xl)?Gl.init(e.state):t.apply(e)}});let QO=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(QO=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const u0=typeof navigator<"u"&&(!((l0=navigator.scheduling)===null||l0===void 0)&&l0.isInputPending)?()=>navigator.scheduling.isInputPending():null,A7=qt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(zr.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(zr.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=QO(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(zr.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!u0?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>u0&&u0()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:zr.setState.of(new Gl(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Wr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Xl=ue.define({combine(t){return t.length?t[0]:null},enables:t=>[zr.state,A7,fe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class P7{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const eN=ue.define(),H1=ue.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function ca(t){let e=t.facet(H1);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function kp(t,e){let n="",r=t.tabSize,i=t.facet(H1)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function tN(t,e){t instanceof Ie&&(t=new G1(t));for(let r of t.state.facet(eN)){let i=r(t,e);if(i!==void 0)return i}let n=Zr(t.state);return n?T7(t,n,e):null}class G1{constructor(e,n={}){this.state=e,this.options=n,this.unit=ca(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return mm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const R7=new Fe;function T7(t,e,n){return nN(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function O7(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function N7(t){let e=t.type.prop(R7);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Fe.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>$7(o,!0,1,void 0,s&&!O7(o)?i.from:void 0)}return t.parent==null?_7:null}function nN(t,e,n){for(;t;t=t.parent){let r=N7(t);if(r)return r(X1.create(n,e,t))}return null}function _7(){return 0}class X1 extends G1{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.node=r}static create(e,n,r){return new X1(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(M7(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?nN(e,this.pos,this.base):0}}function M7(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function D7(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function $7(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?D7(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const L7=200;function I7(){return Ie.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+L7)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let d=tN(o,c.from);if(d==null)continue;let h=/^\s*/.exec(c.text)[0],f=kp(o,d);h!=f&&l.push({from:c.from,to:c.from+h.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const B7=ue.define(),z7=new Fe;function F7(t,e,n){let r=Zr(t);if(r.length<n)return null;let i=r.resolveInner(n,1),s=null;for(let o=i;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(z7);if(a&&(o.to<r.length-50||r.length==t.doc.length||!j7(o))){let l=a(o,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(s=l)}}return s}function j7(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function rN(t,e,n){for(let r of t.facet(B7)){let i=r(t,e,n);if(i)return i}return F7(t,e,n)}function iN(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const K1=Me.define({map:iN}),Om=Me.define({map:iN});function sN(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const kd=un.define({create(){return Ue.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(K1)&&!U7(t,n.value.from,n.value.to)?t=t.update({add:[Qk.range(n.value.from,n.value.to)]}):n.is(Om)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,s)=>{i<r&&s>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return t},provide:t=>fe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Qk.range(r,i))}return Ue.set(e,!0)}});function oN(t,e,n){var r;let i=null;return(r=t.field(kd,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function U7(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function aN(t,e){return t.field(kd,!1)?e:e.concat(Me.appendConfig.of(K7()))}const V7=t=>{for(let e of sN(t)){let n=rN(t.state,e.from,e.to);if(n)return t.dispatch({effects:aN(t.state,[K1.of(n),lN(t,n)])}),!0}return!1},W7=t=>{if(!t.state.field(kd,!1))return!1;let e=[];for(let n of sN(t)){let r=oN(t.state,n.from,n.to);r&&e.push(Om.of(r),lN(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function lN(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return fe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const H7=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=rN(e,i.from,i.to);s&&n.push(K1.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:aN(t.state,n)}),!!n.length},G7=t=>{let e=t.state.field(kd,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(Om.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},X7={placeholderDOM:null,placeholderText:"…"},uN=ue.define({combine(t){return go(t,X7)}});function K7(t){let e=[kd,Z7];return t&&e.push(uN.of(t)),e}const Qk=Ue.replace({widget:new class extends va{toDOM(t){let{state:e}=t,n=e.facet(uN),r=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),a=oN(t.state,o.from,o.to);a&&t.dispatch({effects:Om.of(a)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),Z7=fe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Nm{constructor(e,n){this.specs=e;let r;function i(a){let l=ao.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof zr?a=>a.prop(qa)==o.data:o?a=>a==o:void 0,this.style=qO(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new ao(r):null,this.themeType=n.themeType}static define(e,n){return new Nm(e,n||{})}}const _v=ue.define(),cN=ue.define({combine(t){return t.length?[t[0]]:null}});function c0(t){let e=t.facet(_v);return e.length?e:t.facet(cN)}function Y7(t,e){let n=[q7],r;return t instanceof Nm&&(t.module&&n.push(fe.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(cN.of(t)):r?n.push(_v.computeN([fe.darkTheme],i=>i.facet(fe.darkTheme)==(r=="dark")?[t]:[])):n.push(_v.of(t)),n}class J7{constructor(e){this.markCache=Object.create(null),this.tree=Zr(e.state),this.decorations=this.buildDeco(e,c0(e.state))}update(e){let n=Zr(e.state),r=c0(e.state),i=r!=c0(e.startState);n.length<e.view.viewport.to&&!i&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,n){if(!n||!this.tree.length)return Ue.none;let r=new oa;for(let{from:i,to:s}of e.visibleRanges)b7(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Ue.mark({class:l})))},i,s);return r.finish()}}const q7=pd.high(qt.fromClass(J7,{decorations:t=>t.decorations})),Q7=1e4,eU="()[]{}",tU=new Fe;function Mv(t,e,n){let r=t.prop(e<0?Fe.openedBy:Fe.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Dv(t){let e=t.type.prop(tU);return e?e(t.node):t}function Sh(t,e,n,r={}){let i=r.maxScanDistance||Q7,s=r.brackets||eU,o=Zr(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=Mv(l.type,n,s);if(u&&l.from<l.to){let c=Dv(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return nU(t,e,n,l,c,u,s)}}return rU(t,e,n,o,a.type,i,s)}function nU(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=Dv(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Mv(c.type,n,o))u++;else if(Mv(c.type,-n,o)){if(u==0){let d=Dv(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function rU(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let m=n>0?0:f.length-1,v=n>0?f.length:-1;m!=v;m+=n){let g=o.indexOf(f[m]);if(!(g<0||r.resolveInner(p+m,1).type!=i))if(g%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+m,to:p+m+1},matched:g>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function eC(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=r;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class dN{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=eC(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:eC(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function iU(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||sU,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||J1}}function sU(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const tC=new WeakMap;class Z1 extends zr{constructor(e){let n=k7(e.languageData),r=iU(e),i,s=new class extends YO{createParse(o,a,l){return new aU(i,o,a,l)}};super(n,s,[eN.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=cU(n),i=this,this.streamParser=r,this.stateAfter=new Fe({perNode:!0}),this.tokenTable=e.tokenTable?new mN(r.tokenTable):uU}static define(e){return new Z1(e)}getIndent(e,n){let r=Zr(e.state),i=r.resolve(n);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let s,{overrideIndentation:o}=e.options;o&&(s=tC.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=Y1(this,r,0,i.from,s??n),l,u;if(a?(u=a.state,l=a.pos+1):(u=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),h=Math.min(n,d.to);if(d.length){let f=o?o(d.from):-1,p=new dN(d.text,e.state.tabSize,e.unit,f<0?void 0:f);for(;p.pos<h-d.from;)fN(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==n)break;l=d.to+1}let c=e.lineAt(n);return o&&s==null&&tC.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function Y1(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof mt&&l<i&&Y1(t,a,l,r,i);if(u)return u}return null}function hN(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<r&&a instanceof mt){if(!(l=hN(t,a,n-o,r-o,i)))break;return i?new mt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function oU(t,e,n,r){for(let i of e){let s=i.from+(i.openStart?25:0),o=i.to-(i.openEnd?25:0),a=s<=n&&o>n&&Y1(t,i.tree,0-i.offset,n,o),l;if(a&&(l=hN(t,i.tree,n+i.offset,a.pos+i.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(r?ca(r):4),tree:mt.empty}}class aU{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=Hl.get(),o=i[0].from,{state:a,tree:l}=oU(e,r,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(ca(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Hl.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);n+=a,r=o+a.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(r,s,-1),r+=s,i+=this.chunk.length-o}return this.chunk.push(e,n,r,i),s}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new dN(n,e?e.state.tabSize:4,e?ca(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=fN(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=mt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:lU,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new mt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new mt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function fN(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const J1=Object.create(null),rd=[zn.none],lU=new j1(rd),nC=[],pN=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])pN[t]=gN(J1,e);class mN{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),pN)}resolve(e){return e?this.table[e]||(this.table[e]=gN(this.extra,e)):0}}const uU=new mN(J1);function d0(t,e){nC.indexOf(t)>-1||(nC.push(t),console.warn(e))}function gN(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||Ee[s];o?typeof o=="function"?n?n=o(n):d0(s,`Modifier ${s} used at start of tag`):n?d0(s,`Tag ${s} used as modifier`):n=o:d0(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let r=e.replace(/ /g,"_"),i=zn.define({id:rd.length,name:r,props:[v7({[r]:n})]});return rd.push(i),i.id}function cU(t){let e=zn.define({id:rd.length,name:"Document",props:[qa.add(()=>t)]});return rd.push(e),e}const dU=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=q1(t.state,n.from);return r.line?hU(t):r.block?gU(t):!1};function Cd(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const hU=Cd(Q1,0),fU=Cd(Q1,1),pU=Cd(Q1,2),mU=Cd(yN,0),gU=Cd((t,e)=>yN(t,e,vU(e)),0);function q1(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Tu=50;function yU(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Tu,r),o=t.sliceDoc(i,i+Tu),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,d;i-r<=2*Tu?c=d=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+Tu),d=t.sliceDoc(i-Tu,i));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:r+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:i-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function vU(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function yN(t,e,n=e.selection.ranges){let r=n.map(s=>q1(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>yU(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function Q1(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,u=q1(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>i&&(s==o||o>d.from)){i=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),r.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of r)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const $v=fs.define(),wU=fs.define(),bU=ue.define(),vN=ue.define({combine(t){return go(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}});function xU(t){let e=0;return t.iterChangedRanges((n,r)=>e=r),e}const wN=un.define({create(){return pi.empty},update(t,e){let n=e.state.facet(vN),r=e.annotation($v);if(r){let l=e.docChanged?U.single(xU(e.changes)):void 0,u=Mn.fromTransaction(e,l),c=r.side,d=c==0?t.undone:t.done;return u?d=Cp(d,d.length,n.minDepth,u):d=SN(d,e.startState.selection),new pi(c==0?r.rest:d,c==0?d:r.rest)}let i=e.annotation(wU);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(It.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Mn.fromTransaction(e),o=e.annotation(It.time),a=e.annotation(It.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new pi(t.done.map(Mn.fromJSON),t.undone.map(Mn.fromJSON))}});function SU(t={}){return[wN,vN.of(t),fe.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?bN:e.inputType=="historyRedo"?Lv:null;return r?(e.preventDefault(),r(n)):!1}})]}function eb(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(wN,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const bN=eb(0,!1),Lv=eb(1,!1),kU=eb(0,!0);class Mn{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Mn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Mn(e.changes&&Dt.fromJSON(e.changes),[],e.mapped&&yi.fromJSON(e.mapped),e.startSelection&&U.fromJSON(e.startSelection),e.selectionsAfter.map(U.fromJSON))}static fromTransaction(e,n){let r=vr;for(let i of e.startState.facet(bU)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Mn(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,vr)}static selection(e){return new Mn(void 0,vr,void 0,void 0,e)}}function Cp(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function CU(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(r=!0)}}),r}function EU(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function xN(t,e){return t.length?e.length?t.concat(e):t:e}const vr=[],AU=200;function SN(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-AU));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Cp(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Mn.selection([e])]}function PU(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function h0(t,e){if(!t.length)return t;let n=t.length,r=vr;for(;n;){let i=RU(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Mn.selection(r)]:vr}function RU(t,e,n){let r=xN(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):vr,n);if(!t.changes)return Mn.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Mn(i,Me.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const TU=/^(input\.type|delete)($|\.)/;class pi{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new pi(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||TU.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,CU(a.changes,e.changes))||r=="input.type.compose")?o=Cp(o,o.length-1,i.minDepth,new Mn(e.changes.compose(a.changes),xN(e.effects,a.effects),a.mapped,a.startSelection,vr)):o=Cp(o,o.length,i.minDepth,e),new pi(o,vr,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:vr;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&EU(s[s.length-1],e)?this:new pi(SN(this.done,e),this.undone,n,r)}addMapping(e){return new pi(h0(this.done,e),h0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1];if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:$v.of({side:e,rest:PU(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?vr:i.slice(0,i.length-1);return s.mapped&&(o=h0(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:$v.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}pi.empty=new pi(vr,vr);function Ed(t,e){return U.create(t.ranges.map(e),t.mainIndex)}function yo(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ba({state:t,dispatch:e},n){let r=Ed(t.selection,n);return r.eq(t.selection)?!1:(e(yo(t,r)),!0)}function _m(t,e){return U.cursor(e?t.to:t.from)}function kN(t,e){return ba(t,n=>n.empty?t.moveByChar(n,e):_m(n,e))}function vo(t){return t.textDirectionAt(t.state.selection.main.head)==pt.LTR}const rC=t=>kN(t,!vo(t)),iC=t=>kN(t,vo(t));function CN(t,e){return ba(t,n=>n.empty?t.moveByGroup(n,e):_m(n,e))}const OU=t=>CN(t,!vo(t)),NU=t=>CN(t,vo(t));function EN(t,e){return ba(t,n=>{if(!n.empty)return _m(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const sC=t=>EN(t,!1),oC=t=>EN(t,!0);function AN(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(fe.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function PN(t,e){let n=AN(t),{state:r}=t,i=Ed(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):_m(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=fe.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(yo(r,i),{effects:s}),!0}const f0=t=>PN(t,!1),p0=t=>PN(t,!0);function Mm(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=U.cursor(r.from+s))}return i}const aC=t=>ba(t,e=>Mm(t,e,!0)),lC=t=>ba(t,e=>Mm(t,e,!1)),_U=t=>ba(t,e=>U.cursor(t.lineBlockAt(e.head).from,1)),MU=t=>ba(t,e=>U.cursor(t.lineBlockAt(e.head).to,-1));function DU(t,e,n){let r=!1,i=Ed(t.selection,s=>{let o=Sh(t,s.head,-1)||Sh(t,s.head,1)||s.head>0&&Sh(t,s.head-1,1)||s.head<t.doc.length&&Sh(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?U.range(s.anchor,a):U.cursor(a)});return r?(e(yo(t,i)),!0):!1}const $U=({state:t,dispatch:e})=>DU(t,e,!1);function wo(t,e){let n=Ed(t.state.selection,r=>{let i=e(r);return U.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(yo(t.state,n)),!0)}function RN(t,e){return wo(t,n=>t.moveByChar(n,e))}const uC=t=>RN(t,!vo(t)),cC=t=>RN(t,vo(t));function TN(t,e){return wo(t,n=>t.moveByGroup(n,e))}const LU=t=>TN(t,!vo(t)),IU=t=>TN(t,vo(t));function ON(t,e){return wo(t,n=>t.moveVertically(n,e))}const dC=t=>ON(t,!1),hC=t=>ON(t,!0);function NN(t,e){return wo(t,n=>t.moveVertically(n,e,AN(t).height))}const fC=t=>NN(t,!1),pC=t=>NN(t,!0),mC=t=>wo(t,e=>Mm(t,e,!0)),gC=t=>wo(t,e=>Mm(t,e,!1)),BU=t=>wo(t,e=>U.cursor(t.lineBlockAt(e.head).from)),zU=t=>wo(t,e=>U.cursor(t.lineBlockAt(e.head).to)),yC=({state:t,dispatch:e})=>(e(yo(t,{anchor:0})),!0),vC=({state:t,dispatch:e})=>(e(yo(t,{anchor:t.doc.length})),!0),wC=({state:t,dispatch:e})=>(e(yo(t,{anchor:t.selection.main.anchor,head:0})),!0),bC=({state:t,dispatch:e})=>(e(yo(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),FU=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),jU=({state:t,dispatch:e})=>{let n=$m(t).map(({from:r,to:i})=>U.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:U.create(n),userEvent:"select"})),!0};function Dm(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(n="delete.backward",l=kh(t,l,!1)):l>o&&(n="delete.forward",l=kh(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=kh(t,o,!1),a=kh(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:U.cursor(o)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?fe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function kh(t,e,n){if(t instanceof fe)for(let r of t.state.facet(fe.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const _N=(t,e)=>Dm(t,n=>{let{state:r}=t,i=r.doc.lineAt(n),s,o;if(!e&&n>i.from&&n<i.from+200&&!/[^ \t]/.test(s=i.text.slice(0,n-i.from))){if(s[s.length-1]=="	")return n-1;let a=mm(s,r.tabSize),l=a%ca(r)||ca(r);for(let u=0;u<l&&s[s.length-1-u]==" ";u++)n--;o=n}else o=on(i.text,n-i.from,e,e)+i.from,o==n&&i.number!=(e?r.doc.lines:1)&&(o+=e?1:-1);return o}),m0=t=>_N(t,!1),xC=t=>_N(t,!0),MN=(t,e)=>Dm(t,n=>{let r=n,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=on(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||r!=n)&&(a=c),r=l}return r}),SC=t=>MN(t,!1),UU=t=>MN(t,!0),kC=t=>Dm(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),VU=t=>Dm(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),WU=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Ge.of(["",""])},range:U.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},HU=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:on(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:on(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:U.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function $m(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function DN(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of $m(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(U.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(U.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:U.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const GU=({state:t,dispatch:e})=>DN(t,e,!1),XU=({state:t,dispatch:e})=>DN(t,e,!0);function $N(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of $m(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const KU=({state:t,dispatch:e})=>$N(t,e,!1),ZU=({state:t,dispatch:e})=>$N(t,e,!0),YU=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes($m(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Ed(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function JU(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Zr(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Fe.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const CC=qU(!1);function qU(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&JU(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new G1(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=tN(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",kp(e,c)];return l&&d.push(kp(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ge.of(d)},range:U.cursor(s+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function LN(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:U.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const EC=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(LN(t,(n,r)=>{r.push({from:n.from,insert:t.facet(H1)})}),{userEvent:"input.indent"})),!0),AC=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(LN(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=mm(i,t.tabSize),o=0,a=kp(t,Math.max(0,s-ca(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function qe(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)IN(t,arguments[e]);return t}function IN(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)IN(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const PC=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class id{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(PC(a)):PC,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return mn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Qw(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Lr(e);let i=this.normalize(n);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(id.prototype[Symbol.iterator]=function(){return this});const BN={from:-1,to:-1,match:/.*/.exec("")},tb="gm"+(/x/.unicode==null?"":"u");class zN{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=BN,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new FN(e,n,r,i,s);this.re=new RegExp(n,tb+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Ep(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Ep(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const g0=new WeakMap;class gl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=g0.get(e);if(!i||i.from>=r||i.to<=n){let a=new gl(n,e.sliceString(n,r));return g0.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),g0.set(e,new gl(o,s)),new gl(n,s.slice(n-o,r-o))}}class FN{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=BN,this.matchPos=Ep(e,i),this.re=new RegExp(n,tb+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=gl.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Ep(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=gl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(zN.prototype[Symbol.iterator]=FN.prototype[Symbol.iterator]=function(){return this});function QU(t){try{return new RegExp(t,tb),!0}catch{return!1}}function Ep(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Iv(t){let e=qe("input",{class:"cm-textfield",name:"line"}),n=qe("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),t.dispatch({effects:Ap.of(!1)}),t.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},qe("label",t.state.phrase("Go to line"),": ",e)," ",qe("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,a,l,u,c]=i,d=u?+u.slice(1):0,h=l?+l:o.number;if(l&&c){let m=h/100;a&&(m=m*(a=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*m)}else l&&a&&(h=h*(a=="-"?-1:1)+o.number);let f=s.doc.line(Math.max(1,Math.min(s.doc.lines,h))),p=U.cursor(f.from+Math.max(0,Math.min(d,f.length)));t.dispatch({effects:[Ap.of(!1),fe.scrollIntoView(p.from,{y:"center"})],selection:p}),t.focus()}return{dom:n}}const Ap=Me.define(),RC=un.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Ap)&&(t=n.value);return t},provide:t=>zl.from(t,e=>e?Iv:null)}),eV=t=>{let e=Xc(t,Iv);if(!e){let n=[Ap.of(!0)];t.state.field(RC,!1)==null&&n.push(Me.appendConfig.of([RC,tV])),t.dispatch({effects:n}),e=Xc(t,Iv)}return e&&e.dom.querySelector("input").focus(),!0},tV=fe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),nV=({state:t,dispatch:e})=>{let{selection:n}=t,r=U.create(n.ranges.map(i=>t.wordAt(i.head)||U.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function rV(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new id(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new id(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const iV=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return nV({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=rV(t,r);return i?(e(t.update({selection:t.selection.addRange(U.range(i.from,i.to),!1),effects:fe.scrollIntoView(i.to)})),!0):!1},ou=ue.define({combine(t){return go(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new fV(e),scrollToMatch:e=>fe.scrollIntoView(e)})}});class jN{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||QU(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new lV(this):new oV(this)}getCursor(e,n=0,r){let i=e.doc?e:Ie.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?La(this,i,n,r):$a(this,i,n,r)}}class UN{constructor(e){this.spec=e}}function $a(t,e,n,r){return new id(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?sV(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function sV(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Pp(i,n-s))!=Zt.Word||e(Rp(i,n-s))!=Zt.Word)&&(e(Rp(i,r-s))!=Zt.Word||e(Pp(i,r-s))!=Zt.Word))}class oV extends UN{constructor(e){super(e)}nextMatch(e,n,r){let i=$a(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=$a(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=$a(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=$a(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=$a(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function La(t,e,n,r){return new zN(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?aV(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Pp(t,e){return t.slice(on(t,e,!1),e)}function Rp(t,e){return t.slice(e,on(t,e))}function aV(t){return(e,n,r)=>!r[0].length||(t(Pp(r.input,r.index))!=Zt.Word||t(Rp(r.input,r.index))!=Zt.Word)&&(t(Rp(r.input,r.index+r[0].length))!=Zt.Word||t(Pp(r.input,r.index+r[0].length))!=Zt.Word)}class lV extends UN{nextMatch(e,n,r){let i=La(this.spec,e,r,e.doc.length).next();return i.done&&(i=La(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=La(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n))}matchAll(e,n){let r=La(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=La(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const sd=Me.define(),nb=Me.define(),qs=un.define({create(t){return new y0(Bv(t).create(),null)},update(t,e){for(let n of e.effects)n.is(sd)?t=new y0(n.value.create(),t.panel):n.is(nb)&&(t=new y0(t.query,n.value?rb:null));return t},provide:t=>zl.from(t,e=>e.panel)});class y0{constructor(e,n){this.query=e,this.panel=n}}const uV=Ue.mark({class:"cm-searchMatch"}),cV=Ue.mark({class:"cm-searchMatch cm-searchMatch-selected"}),dV=qt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(qs))}update(t){let e=t.state.field(qs);(e!=t.startState.field(qs)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ue.none;let{view:n}=this,r=new oa;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);r.add(u,c,d?cV:uV)})}return r.finish()}},{decorations:t=>t.decorations});function Ad(t){return e=>{let n=e.state.field(qs,!1);return n&&n.query.spec.valid?t(e,n):XN(e)}}const TC=Ad((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=U.single(r.from,r.to),s=t.state.facet(ou);return t.dispatch({selection:i,effects:[ib(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),GN(t),!0}),OC=Ad((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=U.single(i.from,i.to),o=t.state.facet(ou);return t.dispatch({selection:s,effects:[ib(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),GN(t),!0}),VN=Ad((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:U.create(n.map(r=>U.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),hV=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new id(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(U.range(a.value.from,a.value.to))}return e(t.update({selection:U.create(s,o),userEvent:"select.search.matches"})),!0},NC=Ad((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=[],a,l,u=[];if(s.from==r&&s.to==i&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),u.push(fe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=U.single(s.from-c,s.to-c),u.push(ib(t,s)),u.push(n.facet(ou).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:u,userEvent:"input.replace"}),!0}),WN=Ad((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:fe.announce.of(r),userEvent:"input.replace.all"}),!0});function rb(t){return t.state.facet(ou).createPanel(t)}function Bv(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(ou);return new jN({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function HN(t){let e=Xc(t,rb);return e&&e.dom.querySelector("[main-field]")}function GN(t){let e=HN(t);e&&e==t.root.activeElement&&e.select()}const XN=t=>{let e=t.state.field(qs,!1);if(e&&e.panel){let n=HN(t);if(n&&n!=t.root.activeElement){let r=Bv(t.state,e.query.spec);r.valid&&t.dispatch({effects:sd.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[nb.of(!0),e?sd.of(Bv(t.state,e.query.spec)):Me.appendConfig.of(mV)]});return!0},KN=t=>{let e=t.state.field(qs,!1);if(!e||!e.panel)return!1;let n=Xc(t,rb);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:nb.of(!1)}),!0};class fV{constructor(e){this.view=e;let n=this.query=e.state.field(qs).query.spec;this.commit=this.commit.bind(this),this.searchField=qe("input",{value:n.search,placeholder:jn(e,"Find"),"aria-label":jn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=qe("input",{value:n.replace,placeholder:jn(e,"Replace"),"aria-label":jn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=qe("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=qe("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=qe("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return qe("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=qe("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>TC(e),[jn(e,"next")]),r("prev",()=>OC(e),[jn(e,"previous")]),r("select",()=>VN(e),[jn(e,"all")]),qe("label",null,[this.caseField,jn(e,"match case")]),qe("label",null,[this.reField,jn(e,"regexp")]),qe("label",null,[this.wordField,jn(e,"by word")]),...e.state.readOnly?[]:[qe("br"),this.replaceField,r("replace",()=>NC(e),[jn(e,"replace")]),r("replaceAll",()=>WN(e),[jn(e,"replace all")])],qe("button",{name:"close",onclick:()=>KN(e),"aria-label":jn(e,"close"),type:"button"},["×"])])}commit(){let e=new jN({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:sd.of(e)}))}keydown(e){Bz(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?OC:TC)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),NC(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(sd)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ou).top}}function jn(t,e){return t.state.phrase(e)}const Ch=30,Eh=/[\s\.,:;?!]/;function ib(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Ch),o=Math.min(i,n+Ch),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Ch;l++)if(!Eh.test(a[l+1])&&Eh.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Ch;l--)if(!Eh.test(a[l-1])&&Eh.test(a[l])){a=a.slice(0,l);break}}return fe.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const pV=fe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),mV=[qs,pd.lowest(dV),pV];class gV{constructor(e,n,r){this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let n=Zr(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(ZN(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function _C(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function yV(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=_C(e)+_C(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function vV(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:yV(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class MC{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function yl(t){return t.selection.main.from}function ZN(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const wV=fs.define();function bV(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r)?{range:a}:{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:e},range:U.cursor(a.from+s+e.length)})),{userEvent:"input.complete"})}const DC=new WeakMap;function xV(t){if(!Array.isArray(t))return t;let e=DC.get(t);return e||DC.set(t,e=vV(t)),e}const YN=Me.define(),sb=Me.define();class SV{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=mn(e,n),i=Lr(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(mn(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let y=mn(e,0),w=Lr(y),b=w==e.length?0:-100;if(y!=n[0])if(y==r[0])b+=-200;else return!1;return this.ret(b,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<l;){let b=mn(e,y);(b==n[u]||b==r[u])&&(i[u++]=y),y+=Lr(b)}if(u<l)return!1}let c=0,d=0,h=!1,f=0,p=-1,m=-1,v=/[a-z]/.test(e),g=!0;for(let y=0,w=Math.min(e.length,200),b=0;y<w&&d<l;){let S=mn(e,y);a<0&&(c<l&&S==n[c]&&(s[c++]=y),f<l&&(S==n[f]||S==r[f]?(f==0&&(p=y),m=y+1,f++):f=0));let A,P=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(A=Qw(S))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!y||P==1&&v||b==0&&P!=0)&&(n[d]==S||r[d]==S&&(h=!0)?o[d++]=y:o.length&&(g=!1)),b=P,y+=Lr(S)}return d==l&&o[0]==0&&g?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-200+-700-e.length,[p,m]):d==l?this.result(-100+(h?-200:0)+-700+(g?0:-1100),o,e):n.length==2?!1:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?Lr(mn(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}const Gi=ue.define({combine(t){return go(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:kV,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>$C(e(r),n(r)),optionClass:(e,n)=>r=>$C(e(r),n(r)),addToOptions:(e,n)=>e.concat(n)})}});function $C(t,e){return t?e?t+" "+e:t:e}function kV(t,e,n,r,i){let s=t.textDirection==pt.RTL,o=s,a=!1,l="top",u,c,d=e.left-i.left,h=i.right-e.right,f=r.right-r.left,p=r.bottom-r.top;if(o&&d<Math.min(f,h)?o=!1:!o&&h<Math.min(f,d)&&(o=!0),f<=(o?d:h))u=Math.max(i.top,Math.min(n.top,i.bottom-p))-e.top,c=Math.min(400,o?d:h);else{a=!0,c=Math.min(400,(s?e.right:i.right-e.left)-30);let m=i.bottom-e.bottom;m>=p||m>e.top?u=n.bottom-e.top:(l="bottom",u=e.bottom-n.top)}return{style:`${l}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":o?"left":"right")}}function CV(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i){let s=document.createElement("span");s.className="cm-completionLabel";let o=n.displayLabel||n.label,a=0;for(let l=0;l<i.length;){let u=i[l++],c=i[l++];u>a&&s.appendChild(document.createTextNode(o.slice(a,u)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(u,c))),d.className="cm-completionMatchedText",a=c}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function LC(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class EV{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(Gi);this.optionContent=CV(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=LC(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let u=l.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<s.length){this.applyCompletion(e,s[+c[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Gi).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:sb.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,r,i;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((i=s.open)===null||i===void 0)&&i.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=LC(n.options.length,n.selected,this.view.state.facet(Gi).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Wr(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&PV(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Gi).positionInfo(this.view,n,i,r,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>r.from||r.from==0))if(s=h,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let f=i.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=i.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,l);f&&c.appendChild(f)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function AV(t,e){return n=>new EV(n,t,e)}function PV(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}function IC(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function RV(t,e){let n=[],r=null,i=l=>{n.push(l);let{section:u}=l.completion;if(u){r||(r=[]);let c=typeof u=="string"?u:u.name;r.some(d=>d.name==c)||r.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult()){let u=l.result.getMatch;if(l.result.filter===!1)for(let c of l.result.options)i(new MC(c,l.source,u?u(c):[],1e9-n.length));else{let c=new SV(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(c.match(d.label)){let h=d.displayLabel?u?u(d,c.matched):[]:c.matched;i(new MC(d,l.source,h,c.score+(d.boost||0)))}}}if(r){let l=Object.create(null),u=0,c=(d,h)=>{var f,p;return((f=d.rank)!==null&&f!==void 0?f:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(d.name<h.name?-1:1)};for(let d of r.sort(c))u-=1e5,l[d.name]=u;for(let d of n){let{section:h}=d.completion;h&&(d.score+=l[typeof h=="string"?h:h.name])}}let s=[],o=null,a=e.facet(Gi).compareCompletions;for(let l of n.sort((u,c)=>c.score-u.score||a(u.completion,c.completion))){let u=l.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?s.push(l):IC(l.completion)>IC(o)&&(s[s.length-1]=l),o=l.completion}return s}class Qa{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Qa(this.options,BC(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s){let o=RV(e,n);if(!o.length)return i&&e.some(l=>l.state==1)?new Qa(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=n.facet(Gi).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){a=u;break}}return new Qa(o,BC(r,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:AV(au,qN),above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Qa(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Tp{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new Tp(NV,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Gi),s=(r.override||n.languageDataAt("autocomplete",yl(n)).map(xV)).map(a=>(this.active.find(u=>u.source==a)||new Yn(a,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!TV(s,this.active)?o=Qa.build(s,n,this.id,o,r):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Yn(a.source,0):a));for(let a of e.effects)a.is(JN)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Tp(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:OV}}function TV(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const OV={"aria-autocomplete":"list"};function BC(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const NV=[];function _V(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Yn{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=_V(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Yn(i.source,0));for(let s of e.effects)if(s.is(YN))i=new Yn(i.source,1,s.value?yl(e.state):-1);else if(s.is(sb))i=new Yn(i.source,0);else if(s.is(DV))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new Yn(this.source,1)}handleChange(e){return e.changes.touchesRange(yl(e.startState))?new Yn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Yn(this.source,this.state,e.mapPos(this.explicitPos))}}class ac extends Yn{constructor(e,n,r,i,s){super(e,2,n),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,n,r){var i;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=yl(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&yl(e.startState)==this.from)return new Yn(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return MV(this.result.validFor,e.state,s,o)?new ac(this.source,l,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new gV(e.state,a,l>=0)))?new ac(this.source,l,u,u.from,(i=u.to)!==null&&i!==void 0?i:yl(e.state)):new Yn(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Yn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ac(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function MV(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):ZN(t,!0).test(i)}const DV=Me.define({map(t,e){return t.map(n=>n.map(e))}}),JN=Me.define(),au=un.define({create(){return Tp.start()},update(t,e){return t.update(e)},provide:t=>[u1.from(t,e=>e.tooltip),fe.contentAttributes.from(t,e=>e.attrs)]});function qN(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(au).active.find(i=>i.source==e.source);return r instanceof ac?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},bV(t.state,n,r.from,r.to)),{annotations:wV.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}function Ah(t,e="option"){return n=>{let r=n.state.field(au,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Gi).interactionDelay)return!1;let i=1,s;e=="page"&&(s=y6(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:JN.of(a)}),!0}}const zC=t=>{let e=t.state.field(au,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Gi).interactionDelay?!1:qN(t,e.open.options[e.open.selected])},$V=t=>t.state.field(au,!1)?(t.dispatch({effects:YN.of(!0)}),!0):!1,LV=t=>{let e=t.state.field(au,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:sb.of(null)}),!0)},QN={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},e_=new class extends sa{};e_.startSide=1;e_.endSide=-1;const v0="()[]{}<>";function IV(t){for(let e=0;e<v0.length;e+=2)if(v0.charCodeAt(e)==t)return v0.charAt(e+1);return Qw(t<128?t:t+1)}function BV(t,e){return t.languageDataAt("closeBrackets",e)[0]||QN}const zV=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=BV(t,t.selection.main.head).brackets||QN.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=jV(t.doc,o.head);for(let l of r)if(l==a&&FV(t.doc,o.head)==IV(mn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:U.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i};function FV(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Lr(mn(n,0)))}function jV(t,e){let n=t.sliceString(e-2,e);return Lr(mn(n,0))==n.length?n:n.slice(1)}class UV{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class No{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,s=r.facet(Fo).markerFilter;s&&(i=s(i));let o=Ue.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?Ue.widget({widget:new QV(a),diagnostic:a}).range(a.from):Ue.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new No(o,n,Kl(o))}}function Kl(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new UV(i,s,o.diagnostic),!1}),r}function VV(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(r=>r.is(ob))||t.changes.touchesRange(n.from,n.to))}function t_(t,e){return t.field(Dn,!1)?e:e.concat(Me.appendConfig.of(s_))}function WV(t,e){return{effects:t_(t,[ob.of(e)])}}const ob=Me.define(),ab=Me.define(),n_=Me.define(),Dn=un.define({create(){return new No(Ue.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=Kl(n,t.selected.diagnostic,i)||Kl(n,null,i)}t=new No(n,t.panel,r)}for(let n of e.effects)n.is(ob)?t=No.init(n.value,t.panel,e.state):n.is(ab)?t=new No(t.diagnostics,n.value?Lm.open:null,t.selected):n.is(n_)&&(t=new No(t.diagnostics,t.panel,n.value));return t},provide:t=>[zl.from(t,e=>e.panel),fe.decorations.from(t,e=>e.diagnostics)]});function HV(t){let e=t.field(Dn,!1);return e?e.diagnostics.size:0}const GV=Ue.mark({class:"cm-lintRange cm-lintRange-active"});function XV(t,e,n){let{diagnostics:r}=t.state.field(Dn),i=[],s=2e8,o=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(i.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(Fo).tooltipFilter;return a&&(i=a(i)),i.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:KV(t,i)}}}:null}function KV(t,e){return qe("ul",{class:"cm-tooltip-lint"},e.map(n=>i_(t,n,!1)))}const ZV=t=>{let e=t.state.field(Dn,!1);(!e||!e.panel)&&t.dispatch({effects:t_(t.state,[ab.of(!0)])});let n=Xc(t,Lm.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},FC=t=>{let e=t.state.field(Dn,!1);return!e||!e.panel?!1:(t.dispatch({effects:ab.of(!1)}),!0)},YV=t=>{let e=t.state.field(Dn,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},JV=qt.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Fo);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Fo);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(WV(this.view.state,i))},r=>{Wr(this.view.state,r)})}}update(t){let e=t.state.facet(Fo);(t.docChanged||e!=t.startState.facet(Fo)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Fo=ue.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},go(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function qV(t,e={}){return[Fo.of({source:t,config:e}),JV,s_]}function r_(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function i_(t,e,n){var r;let i=n?r_(e.actions):[];return qe("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},qe("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=Kl(t.state.field(Dn).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=i[o]?u.indexOf(i[o]):-1,d=c<0?u:[u.slice(0,c),qe("u",u.slice(c,c+1)),u.slice(c+1)];return qe("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&qe("div",{class:"cm-diagnosticSource"},e.source))}class QV extends va{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return qe("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class jC{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=i_(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Lm{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)FC(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=r_(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Kl(this.view.state.field(Dn).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=qe("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=qe("div",{class:"cm-panel-lint"},this.list,qe("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>FC(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Dn).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Dn),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new jC(this.view,l.diagnostic),this.items.splice(r,0,c),i=!0):(c=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new jC(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Dn),r=Kl(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:n_.of(r)})}static open(e){return new Lm(e)}}function eW(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Ph(t){return eW(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const tW=fe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ph("#d11")},".cm-lintRange-warning":{backgroundImage:Ph("orange")},".cm-lintRange-info":{backgroundImage:Ph("#999")},".cm-lintRange-hint":{backgroundImage:Ph("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),s_=[Dn,fe.decorations.compute([Dn],t=>{let{selected:e,panel:n}=t.field(Dn);return!e||!n||e.from==e.to?Ue.none:Ue.set([GV.range(e.from,e.to)])}),g6(XV,{hideOn:VV}),tW],o_=t=>e=>{const n=t==="down";let r=e.state.selection;for(const i of r.ranges)r=r.addRange(e.moveVertically(i,n));return e.dispatch({selection:r}),!0},nW=o_("up"),rW=o_("down"),iW=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let r=n.from;r<=n.to;){const i=t.state.doc.lineAt(r),s=Math.min(i.to,n.to);e?e=e.addRange(U.range(s,s)):e=U.single(s),r=i.to+1}return e?(t.dispatch({selection:e}),!0):!1},sW=[{key:"Ctrl-Space",run:$V},{key:"Escape",run:LV},{key:"ArrowDown",run:Ah(!0)},{key:"ArrowUp",run:Ah(!1)},{key:"PageDown",run:Ah(!0,"page")},{key:"PageUp",run:Ah(!1,"page")},{key:"Enter",run:zC},{key:"Tab",run:zC},{key:"Mod-f",run:XN,scope:"editor search-panel"},{key:"Escape",run:KN,scope:"editor search-panel"},{key:"Alt-Enter",run:VN,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:WN,scope:"editor search-panel"},{key:"Ctrl-g",run:eV},{key:"Mod-d",run:iV,preventDefault:!0},{key:"Shift-Mod-l",run:hV},{key:"Enter",run:CC,shift:CC},{key:"ArrowLeft",run:rC,shift:uC,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:OU,shift:LU},{key:"ArrowRight",run:iC,shift:cC,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:NU,shift:IU},{key:"ArrowUp",run:sC,shift:dC,preventDefault:!0},{key:"ArrowDown",run:oC,shift:hC,preventDefault:!0},{key:"Home",run:lC,shift:gC},{mac:"Cmd-ArrowLeft",run:lC,shift:gC},{key:"Mod-Home",run:yC,shift:wC},{mac:"Cmd-ArrowUp",run:yC,shift:wC},{key:"PageUp",run:f0,shift:fC},{mac:"Ctrl-ArrowUp",run:f0,shift:fC},{key:"PageDown",run:p0,shift:pC},{mac:"Ctrl-ArrowDown",run:p0,shift:pC},{key:"End",run:aC,shift:mC},{mac:"Cmd-ArrowRight",run:aC,shift:mC},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:nW,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:rW,preventDefault:!0},{key:"Shift-Alt-i",run:iW},{key:"Mod-End",run:vC,shift:bC},{mac:"Cmd-ArrowDown",run:vC,shift:bC},{key:"Mod-a",run:FU},{key:"Backspace",run:zV},{key:"Backspace",run:m0,shift:m0},{key:"Delete",run:xC},{key:"Mod-Backspace",mac:"Alt-Backspace",run:SC},{key:"Mod-Delete",mac:"Alt-Delete",run:UU},{mac:"Mod-Backspace",run:VU},{mac:"Mod-Delete",run:kC},{mac:"Ctrl-b",run:rC,shift:uC,preventDefault:!0},{mac:"Ctrl-f",run:iC,shift:cC},{mac:"Ctrl-p",run:sC,shift:dC},{mac:"Ctrl-n",run:oC,shift:hC},{mac:"Ctrl-a",run:_U,shift:BU},{mac:"Ctrl-e",run:MU,shift:zU},{mac:"Ctrl-d",run:xC},{mac:"Ctrl-h",run:m0},{mac:"Ctrl-k",run:kC},{mac:"Ctrl-Alt-h",run:SC},{mac:"Ctrl-o",run:WU},{mac:"Ctrl-t",run:HU},{mac:"Ctrl-v",run:p0},{mac:"Alt-v",run:f0},{key:"Shift-Mod-k",run:YU},{key:"Alt-ArrowDown",run:XU},{key:"Alt-ArrowUp",run:GU},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:ZU},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:KU},{key:"Mod-l",run:jU,preventDefault:!0},{key:"Shift-Mod-\\",run:$U},{key:"Tab",run:EC,shift:AC,preventDefault:!0},{key:"Mod-[",run:AC},{key:"Mod-]",run:EC},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:V7},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:W7},{key:"Mod-k Mod-0",run:H7},{key:"Mod-k Mod-j",run:G7},{key:"Mod-k Mod-c",run:fU},{key:"Mod-k Mod-u",run:pU},{key:"Mod-/",run:dU},{key:"Shift-Alt-a",run:mU},{key:"Mod-z",run:bN,preventDefault:!0},{key:"Mod-y",run:Lv,preventDefault:!0},{key:"Mod-Shift-z",run:Lv,preventDefault:!0},{key:"Mod-u",run:kU,preventDefault:!0},{key:"Mod-Shift-m",run:ZV},{key:"F8",run:YV}];function oW(t){const e=document.createElement("div");return UC(t.state,e),{dom:e,update(n){UC(n.view.state,e)}}}function UC(t,e){const n=HV(t);e.textContent=cm(us().language,"editor.lintSummary",n),e.className=st("border-t border-stone-600 bg-stone-800 pr-3 text-right font-sans text-xs tracking-wider",n===0?"text-stone-400":"font-semibold text-red-400")}const a_="vonsim-program",aW=qt.fromClass(class{constructor(t){Y(this,"timeout",null);this.view=t}update(t){t.docChanged&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=this.view.state.doc.toString();localStorage.setItem(a_,e),this.timeout=null},500))}}),lW=`; ¡Bienvenido a VonSim!
; Este es un ejemplo de código que calcula los primeros
; n números de la sucesión de Fibonacci, y se guardan a
; partir de la posición 1000h de la memoria.

     n EQU 10    ; Calcula los primeros 10 números

       ORG 1000h
inicio DB 1

       ORG 2000h
       MOV BX, OFFSET inicio + 1
       MOV AL, 0
       MOV AH, inicio

BUCLE: CMP BX, OFFSET inicio + n
       JNS FIN
       MOV CL, AH
       ADD CL, AL
       MOV AL, AH
       MOV AH, CL
       MOV [BX], CL
       INC BX
       JMP BUCLE
  FIN: HLT
       END
`,uW=localStorage.getItem(a_)||lW,Un={comment:Ee.comment,"data-directive":Vt.define(),identifier:Ee.variableName,instruction:Vt.define(),label:Ee.labelName,number:Ee.number,operator:Ee.operator,offset:Vt.define(),"ptr-size":Vt.define(),punctuation:Ee.punctuation,register:Vt.define(),special:Vt.define(),string:Ee.string,unassigned:Vt.define()},cW=Z1.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":Yw.includes(e)?"data-directive":Jw.includes(e)?"instruction":ep.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Un}),dW=Y7(Nm.define([{tag:Un.comment,class:"text-stone-400 italic"},{tag:Un["data-directive"],class:"text-rose-400"},{tag:Un.instruction,class:"text-mantis-400"},{tag:Un.number,class:"text-amber-500 font-semibold"},{tag:Un.operator,class:"text-rose-400"},{tag:Un.offset,class:"text-rose-400 italic"},{tag:Un["ptr-size"],class:"text-rose-400 italic"},{tag:Un.punctuation,class:"text-stone-500"},{tag:Un.register,class:"text-amber-500 italic"},{tag:Un.special,class:"text-sky-300 italic"},{tag:Un.string,class:"text-emerald-300"},{tag:Un.unassigned,class:"text-rose-400"}])),hW=qV(t=>{const e=t.state.doc.toString(),n=tR(e);if(n.success)return[];const r=us().language;return n.errors.map(i=>{var a,l;const s=((a=i.position)==null?void 0:a.start)??0,o=((l=i.position)==null?void 0:l.end)??e.length;return{message:i.translate(r),severity:"error",from:s,to:o}})},{delay:200});function fW(){return new P7(cW,[dW,hW])}function pW({className:t}){const[e,n]=x.useState(),r=x.useCallback(i=>{i&&n(i)},[]);return x.useEffect(()=>{if(e)return window.codemirror=new fe({state:Ie.create({doc:uW,extensions:[Ie.tabSize.of(2),TT.of(Ie.readOnly.of(!1)),aW,E6(),T6,R6(),t6(),SU(),Wz(),Zz(),Ie.allowMultipleSelections.of(!0),I7(),a6(),gT.of([...sW,{key:"Escape",run:i=>(i.dispatch({selection:U.create([i.state.selection.main],0)}),!0)}]),fW(),zl.of(oW)]}),parent:e}),()=>{var i;return(i=window.codemirror)==null?void 0:i.destroy()}},[e]),F2(i=>i.ctrlKey&&i.key==="s",i=>{if(i.preventDefault(),!window.codemirror)return;const s=new Blob([window.codemirror.state.doc.toString()],{type:"text/plain"}),o=URL.createObjectURL(s),a=document.createElement("a");a.style.display="none",a.href=o,a.download=`vonsim-${new Date().toISOString().slice(0,16)}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}),E.jsx("div",{ref:r,className:st("overflow-auto font-mono",t)})}var wr=function(t,e){return Number(t.toFixed(e))},mW=function(t,e){return typeof t=="number"?t:e},lt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},gW=function(t){return-Math.cos(t*Math.PI)/2+.5},yW=function(t){return t},vW=function(t){return t*t},wW=function(t){return t*(2-t)},bW=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},xW=function(t){return t*t*t},SW=function(t){return--t*t*t+1},kW=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},CW=function(t){return t*t*t*t},EW=function(t){return 1- --t*t*t*t},AW=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},PW=function(t){return t*t*t*t*t},RW=function(t){return 1+--t*t*t*t*t},TW=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},l_={easeOut:gW,linear:yW,easeInQuad:vW,easeOutQuad:wW,easeInOutQuad:bW,easeInCubic:xW,easeOutCubic:SW,easeInOutCubic:kW,easeInQuart:CW,easeOutQuart:EW,easeInOutQuart:AW,easeInQuint:PW,easeOutQuint:RW,easeInOutQuint:TW},u_=function(t){typeof t=="number"&&cancelAnimationFrame(t)},hi=function(t){t.mounted&&(u_(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function c_(t,e,n,r){if(t.mounted){var i=new Date().getTime(),s=1;hi(t),t.animation=function(){if(!t.mounted)return u_(t.animation);var o=new Date().getTime()-i,a=o/n,l=l_[e],u=l(a);o>=n?(r(s),t.animation=null):t.animation&&(r(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function OW(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function bo(t,e,n,r){var i=OW(e);if(!(!t.mounted||!i)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):c_(t,r,n,function(f){var p=a+c*f,m=l+d*f,v=u+h*f;s(p,m,v)})}}function NW(t,e,n){var r=t.offsetWidth,i=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=r-a,c=i-l;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var _W=function(t,e,n,r,i,s,o){var a=t>e?n*(o?1:.5):0,l=r>i?s*(o?1:.5):0,u=t-e-a,c=a,d=r-i-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},lb=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,i=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var s=NW(n,r,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=_W(o,l,u,a,c,d,!!i);return h},zv=function(t,e,n,r){return r?t<e?wr(e,2):t>n?wr(n,2):wr(t,2):wr(t,2)},Zl=function(t,e){var n=lb(t,e);return t.bounds=n,n};function Im(t,e,n,r,i,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=i,h=s);var f=zv(t,a-d,u+d,r),p=zv(e,l-h,c+h,r);return{x:f,y:p}}function Bm(t,e,n,r,i,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=r-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=Im(d,h,i,s,0,0,null);return f}function Pd(t,e,n,r,i){var s=i?r:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var VC=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,i=t.wrapperComponent,s=e.target,o=i==null?void 0:i.contains(s),a=r&&s&&o;if(!a)return!1;var l=zm(s,n);return!l},WC=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,i=r.panning.disabled,s=e&&n&&!i;return!!s},MW=function(t,e){var n=t.transformState,r=n.positionX,i=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-r,y:o-i}},DW=function(t,e){var n=e.touches,r=t.transformState,i=r.positionX,s=r.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-i,y:l-s}}};function $W(t){var e=t.transformState,n=e.positionX,r=e.positionY,i=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,m=n>d||n<h,v=r>f||r<p,g=n>d?u.offsetWidth:t.setup.minPositionX||0,y=r>f?u.offsetHeight:t.setup.minPositionY||0,w=Bm(t,g,y,i,t.bounds,a||l),b=w.x,S=w.y;return{scale:i,positionX:m?b:n,positionY:v?S:r}}}function LW(t,e,n,r,i){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=Im(e,n,a,s,r,i,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var IW=function(t,e,n){var r=t.startCoords,i=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=i.positionX,u=i.positionY;if(!r)return{x:l,y:u};var c=e-r.x,d=n-r.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},Op=function(t,e){var n=t.setup,r=t.transformState,i=r.scale,s=n.minScale,o=n.disablePadding;return e>0&&i>=s&&!o?e:0},BW=function(t){var e=t.mounted,n=t.setup,r=n.disabled,i=n.velocityAnimation,s=t.transformState.scale,o=i.disabled,a=!o||s>1||!r||e;return!!a},zW=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,i=t.setup,s=i.disabled,o=i.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!r)};function FW(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,s=n.sensitivity;return r?i*e*s:i}function HC(t,e,n,r,i,s,o,a,l,u){if(i){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return r?e:zv(t,s,o,i)}function jW(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function UW(t,e){var n=BW(t);if(n){var r=t.lastMousePosition,i=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(r&&i&&o){var u=jW(o,a),c=e.x-r.x,d=e.y-r.y,h=c/u,f=d/u,p=l-i,m=c*c+d*d,v=Math.sqrt(m)/p;t.velocity={velocityX:h,velocityY:f,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function VW(t){var e=t.velocity,n=t.bounds,r=t.setup,i=t.wrapperComponent,s=zW(t);if(!(!s||!e||!n||!i)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=r.limitToBounds,p=r.alignmentAnimation,m=r.zoomAnimation,v=r.panning,g=v.lockAxisY,y=v.lockAxisX,w=m.animationType,b=p.sizeX,S=p.sizeY,A=p.velocityAlignmentTime,P=A,C=FW(t,l),R=Math.max(C,P),_=Op(t,b),T=Op(t,S),D=_*i.offsetWidth/100,B=T*i.offsetHeight/100,N=u+D,L=c-D,z=d+B,I=h-B,O=t.transformState,$=new Date().getTime();c_(t,w,R,function(F){var X=t.transformState,ee=X.scale,re=X.positionX,we=X.positionY,Se=new Date().getTime()-$,be=Se/P,Q=l_[p.animationType],ye=1-Q(Math.min(1,be)),_e=1-F,Ce=re+o*_e,ke=we+a*_e,xe=HC(Ce,O.positionX,re,y,f,c,u,L,N,ye),oe=HC(ke,O.positionY,we,g,f,h,d,I,z,ye);(re!==Ce||we!==ke)&&t.setTransformState(ee,xe,oe)})}}function GC(t,e){var n=t.transformState.scale;hi(t),Zl(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?DW(t,e):MW(t,e)}function d_(t){var e=t.transformState.scale,n=t.setup,r=n.minScale,i=n.alignmentAnimation,s=i.disabled,o=i.sizeX,a=i.sizeY,l=i.animationTime,u=i.animationType,c=s||e<r||!o&&!a;if(!c){var d=$W(t);d&&bo(t,d,l,u)}}function XC(t,e,n){var r=t.startCoords,i=t.setup,s=i.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(r){var l=IW(t,e,n),u=l.x,c=l.y,d=Op(t,o),h=Op(t,a);UW(t,{x:u,y:c}),LW(t,u,c,d,h)}}function WW(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,i=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=r==null?void 0:r.getBoundingClientRect(),o=i==null?void 0:i.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?VW(t):d_(t)}}function ub(t,e,n,r){var i=t.setup,s=i.minScale,o=i.maxScale,a=i.limitToBounds,l=Pd(wr(e,2),s,o,0,!1),u=Zl(t,l),c=Bm(t,n,r,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function h_(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||r>=o;if((r>=1||a)&&d_(t),!(h||!i||!t.mounted)){var f=e||i.offsetWidth/2,p=n||i.offsetHeight/2,m=ub(t,o,f,p);m&&bo(t,m,c,d)}}var Qs=function(){return Qs=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Qs.apply(this,arguments)};function KC(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Rh={previousScale:1,scale:1,positionX:0,positionY:0},Ou={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},f_=function(t){var e,n,r,i;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Rh.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Rh.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:Rh.positionX,positionY:(i=t.initialPositionY)!==null&&i!==void 0?i:Rh.positionY}},ZC=function(t){var e=Qs({},Ou);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",i=typeof Ou[n]<"u";if(i&&r){var s=Object.prototype.toString.call(Ou[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=Qs(Qs({},Ou[n]),t[n]):a?e[n]=KC(KC([],Ou[n],!0),t[n],!0):e[n]=t[n]}}),e},p_=function(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!i)throw new Error("Wrapper is not mounted");var d=u?r*Math.exp(e*n):r+e*n,h=Pd(wr(d,3),a,o,c,!1);return h};function m_(t,e,n,r,i){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=p_(t,e,n),m=ub(t,p,h,f);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");bo(t,m,r,i)}function g_(t,e,n,r){var i=t.setup,s=t.wrapperComponent,o=i.limitToBounds,a=f_(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=lb(t,a.scale),f=Im(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(r==null||r(),bo(t,p,e,n))}}function HW(t,e,n,r){var i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*r.scale,l=s.y*r.scale;return{x:(i.x-o.x+a)/r.scale,y:(i.y-o.y+l)/r.scale}}function GW(t,e,n){var r=t.wrapperComponent,i=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!r||!i)return s;var c=r.getBoundingClientRect(),d=e.getBoundingClientRect(),h=HW(e,r,i,s),f=h.x,p=h.y,m=d.width/s.scale,v=d.height/s.scale,g=r.offsetWidth/m,y=r.offsetHeight/v,w=Pd(n||Math.min(g,y),l,u,0,!1),b=(c.width-m*w)/2,S=(c.height-v*w)/2,A=(c.left-f)*w+b,P=(c.top-p)*w+S,C=lb(t,w),R=Im(A,P,C,a,0,0,r),_=R.x,T=R.y;return{positionX:_,positionY:T,scale:w}}var XW=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),m_(t,1,e,n,r)}},KW=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),m_(t,-1,e,n,r)}},ZW=function(t){return function(e,n,r,i,s){i===void 0&&(i=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?u:r};bo(t,f,i,s)}}},YW=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),g_(t,e,n)}},JW=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=y_(e||i.scale,s,o);bo(t,a,n,r)}}},qW=function(t){return function(e,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),hi(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=GW(t,o,n);bo(t,a,r,i)}}},Fv=function(t){return{instance:t,zoomIn:XW(t),zoomOut:KW(t),setTransform:ZW(t),resetTransform:YW(t),centerView:JW(t),zoomToElement:qW(t)}},QW=function(t){return{instance:t,state:t.transformState}},Ye=function(t){var e={};return Object.assign(e,QW(t)),Object.assign(e,Fv(t)),e},w0=!1;function b0(){try{var t={get passive(){return w0=!0,!1}};return t}catch{return w0=!1,w0}}var zm=function(t,e){var n=t.tagName.toUpperCase(),r=e.find(function(s){return s.toUpperCase()===n});if(r)return!0;var i=e.find(function(s){return t.classList.contains(s)});return!!i},jv=function(t){t&&clearTimeout(t)},eH=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},y_=function(t,e,n){var r=n.offsetWidth*t,i=n.offsetHeight*t,s=(e.offsetWidth-r)/2,o=(e.offsetHeight-i)/2;return{scale:t,positionX:s,positionY:o}};function tH(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var nH=function(t,e){var n=t.setup.wheel,r=n.disabled,i=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!r&&u;if(!c||i&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=zm(u,o);return!d},rH=function(t){return t?t.deltaY<0?1:-1:0};function iH(t,e){var n=rH(t),r=mW(e,n);return r}function v_(t,e,n){var r=e.getBoundingClientRect(),i=0,s=0;if("clientX"in t)i=(t.clientX-r.left)/n,s=(t.clientY-r.top)/n;else{var o=t.touches[0];i=(o.clientX-r.left)/n,s=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:i,y:s}}var sH=function(t,e,n,r,i){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(i)return p;var m=r?!1:!f,v=Pd(wr(p,3),u,l,h,m&&!d);return v},oH=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,i=t.setup,s=i.maxScale,o=i.minScale;return n?r<s||r>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},aH=function(t,e){var n=t.setup.pinch,r=n.disabled,i=n.excluded,s=t.isInitialized,o=e.target,a=s&&!r&&o;if(!a)return!1;var l=zm(o,i);return!l},lH=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,i=n&&!e&&r;return!!i},uH=function(t,e,n){var r=n.getBoundingClientRect(),i=t.touches,s=wr(i[0].clientX-r.left,5),o=wr(i[0].clientY-r.top,5),a=wr(i[1].clientX-r.left,5),l=wr(i[1].clientY-r.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},w_=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},cH=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,i=t.setup,s=i.maxScale,o=i.minScale,a=i.zoomAnimation,l=i.disablePadding,u=a.size,c=a.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/r,h=d*n;return Pd(wr(h,2),o,s,u,!c&&!l)},dH=160,hH=100,fH=function(t,e){var n=t.props,r=n.onWheelStart,i=n.onZoomStart;t.wheelStopEventTimer||(hi(t),lt(Ye(t),e,r),lt(Ye(t),e,i))},pH=function(t,e){var n=t.props,r=n.onWheel,i=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,m=d.size,v=d.disabled,g=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=iH(e,null),b=p?y*Math.abs(e.deltaY):g,S=sH(t,w,b,!e.ctrlKey);if(l!==S){var A=Zl(t,S),P=v_(e,s,l),C=v||m===0||c||f,R=u&&C,_=Bm(t,P.x,P.y,S,A,R),T=_.x,D=_.y;t.previousWheelEvent=e,t.setTransformState(S,T,D),lt(Ye(t),e,r),lt(Ye(t),e,i)}},mH=function(t,e){var n=t.props,r=n.onWheelStop,i=n.onZoomStop;jv(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(h_(t,e.x,e.y),t.wheelAnimationTimer=null)},hH);var s=oH(t,e);s&&(jv(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,lt(Ye(t),e,r),lt(Ye(t),e,i))},dH))},gH=function(t,e){var n=w_(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,hi(t)},yH=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,i=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,u=l.disabled,c=l.size;if(!(r===null||!n)){var d=uH(e,i,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var h=w_(e),f=cH(t,h);if(f!==i){var p=Zl(t,f),m=u||c===0||a,v=o&&m,g=Bm(t,d.x,d.y,f,p,v),y=g.x,w=g.y;t.pinchMidpoint=d,t.lastDistance=h,t.setTransformState(f,y,w)}}}},vH=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,h_(t,e==null?void 0:e.x,e==null?void 0:e.y)},b_=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;jv(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,lt(Ye(t),e,n)},r)},wH=function(t,e){var n=t.props,r=n.onZoomStart,i=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;lt(Ye(t),e,r),g_(t,o,a,function(){return lt(Ye(t),e,i)}),b_(t,e)};function bH(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,i=t.transformState,s=t.contentComponent,o=i.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,m=c.animationType;if(!d&&!r){if(h==="reset")return wH(t,e);if(!s)return console.error("No ContentComponent found");var v=h==="zoomOut"?-1:1,g=p_(t,v,f);if(o!==g){lt(Ye(t),e,l);var y=v_(e,s,o),w=ub(t,g,y.x,y.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");lt(Ye(t),e,u),bo(t,w,p,m),b_(t,e)}}}var xH=function(t,e){var n=t.isInitialized,r=t.setup,i=t.wrapperComponent,s=r.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=i==null?void 0:i.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=zm(l,a);return!d},SH=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){Zl(n,n.transformState.scale),n.setup=ZC(r)},this.initializeWindowEvents=function(){var r,i=b0(),s=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,i),o==null||o.addEventListener("mousemove",n.onPanning,i),o==null||o.addEventListener("mouseup",n.onPanningStop,i),s==null||s.addEventListener("mouseleave",n.clearPanning,i),o==null||o.addEventListener("keyup",n.setKeyUnPressed,i),o==null||o.addEventListener("keydown",n.setKeyPressed,i)},this.cleanupWindowEvents=function(){var r,i,s=b0(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),hi(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=b0();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r){var i=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(Ye(n))}),i&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(Ye(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(r))},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var s=nH(n,r);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(fH(n,r),pH(n,r),mH(n,r))}}},this.onPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=VC(n,r);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),hi(n),GC(n,r),lt(Ye(n),r,s))}}},this.onPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(!i){var o=WC(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),XC(n,r.clientX,r.clientY),lt(Ye(n),r,s))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(WW(n),lt(Ye(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!i){var l=aH(n,r);l&&(gH(n,r),hi(n),lt(Ye(n),r,o),lt(Ye(n),r,a))}},this.onPinch=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!i){var l=lH(n);l&&(r.preventDefault(),r.stopPropagation(),yH(n,r),lt(Ye(n),r,o),lt(Ye(n),r,a))}},this.onPinchStop=function(r){var i=n.props,s=i.onPinchingStop,o=i.onZoomStop;n.pinchStartScale&&(vH(n),lt(Ye(n),r,s),lt(Ye(n),r,o))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=VC(n,r);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&r.touches.length===1)n.onDoubleClick(r);else{n.lastTouch=+new Date,hi(n);var l=r.touches,u=l.length===1,c=l.length===2;u&&(hi(n),GC(n,r),lt(Ye(n),r,s)),c&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var o=WC(n);if(!o)return;r.preventDefault(),r.stopPropagation();var a=r.touches[0];XC(n,a.clientX,a.clientY),lt(Ye(n),r,s)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var s=xH(n,r);s&&bH(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,s){var o=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(s)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=s,n.applyTransformation();var a=Ye(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),lt(a,{scale:r,positionX:i,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=y_(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,s){return n.props.customTransform?n.props.customTransform(r,i,s):eH(r,i,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,s=r.positionX,o=r.positionY,a=n.handleTransformStyles(s,o,i);n.contentComponent.style.transform=a}},this.getContext=function(){return Ye(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,Zl(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(i),n.initializeWindowEvents(),n.isInitialized=!0;var s=Ye(n);lt(s,void 0,n.props.onInit)},this.props=e,this.setup=ZC(this.props),this.transformState=f_(this.props)}return t}(),cb=q.createContext(null),kH=function(t,e){return typeof t=="function"?t(e):t},CH=q.forwardRef(function(t,e){var n=x.useRef(new SH(t)).current,r=kH(t.children,Fv(n));return x.useImperativeHandle(e,function(){return Fv(n)},[n]),x.useEffect(function(){n.update(t)},[n,t]),q.createElement(cb.Provider,{value:n},r)});q.forwardRef(function(t,e){var n=x.useRef(null),r=x.useContext(cb);return x.useEffect(function(){return r.onChange(function(i){if(n.current){var s=0,o=0;n.current.style.transform=r.handleTransformStyles(s,o,1/i.instance.transformState.scale)}})},[r]),q.createElement("div",Qs({},t,{ref:tH([n,e])}))});function EH(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var AH=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,YC={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};EH(AH);var PH=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,i=t.contentClass,s=i===void 0?"":i,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=x.useContext(cb).init,f=x.useRef(null),p=x.useRef(null);return x.useEffect(function(){var m=f.current,v=p.current;m!==null&&v!==null&&h&&h(m,v)},[]),q.createElement("div",Qs({},u,{ref:f,className:"react-transform-wrapper ".concat(YC.wrapper," ").concat(r),style:o}),q.createElement("div",Qs({},d,{ref:p,className:"react-transform-component ".concat(YC.content," ").concat(s),style:a}),e))};function RH({className:t}){return E.jsx("div",{className:st("absolute z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",t),children:E.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg font-bold text-white",children:"Chip select"})})}function TH({className:t}){const e=Xt({ref:We.bus.rd,from:{stroke:xt.stone[700]}}),n=Xt({ref:We.bus.wr,from:{stroke:xt.stone[700]}}),r=Xt({ref:We.bus.mem,from:{stroke:xt.red[500]}}),i=["M 380 420 H 820 V 400","M 820 420 V 805","M 450 805 H 999","M 583 805 V 875"].join(" "),s=["M 380 440 H 840 V 400","M 840 440 V 815","M 450 815 H 999","M 573 815 V 875"].join(" "),o="M 750 545 H 860 V 400";return E.jsxs("svg",{viewBox:"0 0 1500 1100",className:st("pointer-events-none absolute z-[15] h-[1100px] w-[1500px]",t),children:[E.jsx(vs,{x:384,y:415,children:"rd"}),E.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),E.jsx(Rt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:e}),E.jsx(vs,{x:384,y:435,children:"wr"}),E.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:s}),E.jsx(Rt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:s,style:n}),E.jsx(vs,{x:384,y:455,children:"io/m"}),E.jsx(ko,{springRef:We.bus.iom,d:"M 380 460 H 675 V 525"}),E.jsx(vs,{x:715,y:550,children:"mem"}),E.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),E.jsx(Rt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:o,style:r}),E.jsx(vs,{x:510,y:585,children:"pic"}),E.jsx(ko,{springRef:We.bus.pic,d:"M 521 595 V 730 H 450"}),E.jsx(vs,{x:545,y:585,children:"timer"}),E.jsx(ko,{springRef:We.bus.pic,d:"M 563 595 V 875"}),E.jsx(vs,{x:75,y:490,children:"intr"}),E.jsx(ko,{springRef:We.bus.intr,d:"M 110 700 V 470"}),E.jsx(vs,{x:125,y:490,children:"inta"}),E.jsx(ko,{springRef:We.bus.inta,d:"M 160 470 V 700"}),E.jsx(ko,{springRef:We.bus.int0,d:"M 145 950 V 900"}),E.jsx(ko,{springRef:We.bus.int1,d:"M 500 955 H 400 V 900"})]})}function vs({x:t,y:e,children:n}){return E.jsx("text",{className:"fill-stone-400 font-mono text-xs font-bold tracking-wider",x:t,y:e,children:n})}function ko({d:t,springRef:e}){const n=Xt({ref:e,from:{strokeDashoffset:1,opacity:1}});return E.jsxs(E.Fragment,{children:[E.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),E.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),E.jsx(Rt.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:n})]})}function OH({className:t}){const e=Xt({ref:We.bus.address,from:{stroke:xt.stone[700]}}),n=Xt({ref:We.bus.data,from:{stroke:xt.stone[700]}}),r=["M 699 349 H 800","M 725 349 V 770","M 450 770 H 999","M 618 770 V 875"].join(" "),i=["M 687 249 H 800","M 770 249 V 790","M 450 790 H 999","M 598 790 V 875"].join(" ");return E.jsxs("svg",{viewBox:"0 0 1500 1100",className:st("pointer-events-none absolute z-[5] h-[1100px] w-[1500px]",t),children:[E.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:i}),E.jsx(Rt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:i,style:n}),E.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:r}),E.jsx(Rt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:r,style:e})]})}function NH({className:t}){return E.jsxs("div",{className:st("absolute",t),children:[E.jsx(OH,{className:"inset-0"}),E.jsx(TH,{className:"inset-0"}),E.jsx(RH,{className:"left-[500px] top-[525px]"})]})}function _H({className:t}){const{angle:e}=Xt({ref:We.clock,from:{angle:0}});return E.jsx("div",{className:st("absolute z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",t),children:E.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[E.jsx("circle",{cx:"12",cy:"12",r:"10"}),E.jsx(Rt.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}function jo({name:t,valueAtom:e,emphasis:n=!1,className:r,springRef:i}){const s=wi(e),o=s.low,a=s.is16bits()?s.high:null,l=Xt({ref:i,from:{backgroundColor:xt.stone[800],opacity:1}});return E.jsxs(Rt.div,{className:st("flex w-min items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",n?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:l,children:[E.jsx("span",{className:"mr-2 font-bold",children:t}),a&&E.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:a.toString("hex")}),E.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:o.toString("hex")})]})}function MH(){const t=wi(rt.FLAGS),e=wi(MT),n=t.bit(0),r=t.bit(6),i=t.bit(7),s=t.bit(9),o=t.bit(11),a=Xt({ref:We.cpu.FLAGS,from:{backgroundColor:xt.stone[800],opacity:1}}),l=Xt({ref:We.cpu.alu.operands,from:{strokeDashoffset:1,opacity:1}}),u=Xt({ref:We.cpu.alu.operation,from:{backgroundColor:xt.stone[800]}}),c=Xt({ref:We.cpu.alu.cog,from:{rot:0}}),d=Xt({ref:We.cpu.alu.results,from:{strokeDashoffset:1,opacity:1}});return E.jsxs(E.Fragment,{children:[E.jsxs("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:[E.jsx(Rt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 173 85 H 220",pathLength:1,strokeDasharray:1,style:l}),E.jsx(Rt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 182 145 H 220",pathLength:1,strokeDasharray:1,style:l}),E.jsx(Rt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:d}),E.jsx(Rt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:d}),E.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),E.jsx(Rt.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:c.rot.to(h=>`rotate(${h*60}deg)`)}}),E.jsx(Rt.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:u,children:e}),E.jsxs(Rt.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:a,children:[E.jsx("span",{className:st("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),E.jsx("span",{className:st("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"ZF"}),E.jsx("span",{className:st("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"SF"}),E.jsx("span",{className:st("rounded p-1 font-light",s?"bg-mantis-400":"bg-stone-900"),children:"IF"}),E.jsx("span",{className:st("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"OF"})]})]})}function DH(){const t=wi(Oo),e=x.useMemo(()=>{if(!("metadata"in t)||t.metadata.operands.length===0)return"";if(t.phase==="fetching-operands"){let o=" __";for(let a=1;a<t.metadata.operands.length;a++)o+=", __";return o}else return" "+t.metadata.operands.join(", ")},[t]),{executionUnit:n}=Q5(),r=z9(t.phase,{from:{transform:"translateY(-100%)"},enter:{transform:"translateY(0%)"},leave:{transform:"translateY(100%)"},config:{duration:5*n,easing:k1.easeOutElastic}}),i=Xt({ref:We.cpu.decoder.path,from:{strokeDashoffset:1,opacity:1}}),s=Xt({ref:We.cpu.decoder.progress,from:{progress:0,opacity:1}});return E.jsxs(E.Fragment,{children:[E.jsx("svg",{viewBox:"0 0 650 500",className:"absolute inset-0",children:E.jsx(Rt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:i})}),E.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:E.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs font-semibold tracking-wide text-white",children:"Unidad de control"})}),E.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[E.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[E.jsx("span",{className:"text-sm leading-none",children:"Decodificador"}),E.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:E.jsx(Rt.div,{className:"h-full bg-mantis-400",style:{width:s.progress.to(o=>`${o*100}%`),opacity:s.opacity}})})]}),E.jsx("div",{className:"relative mt-4 h-8 w-48 overflow-hidden rounded-lg border border-stone-600 bg-stone-900",children:r((o,a)=>E.jsx(Rt.div,{className:"absolute inset-0 flex items-center",style:o,children:E.jsx("span",{className:"w-full text-center align-middle text-sm leading-none",children:a==="fetching"?"Leyendo instrucción...":a==="fetching-operands"?"Leyendo operandos...":a==="executing"?"Ejecutando...":a==="writeback"?"Escribiendo resultados...":a==="interrupt"?"Manejando interrupción...":a==="stopped"?"Detenido":null})}))}),E.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:E.jsx("p",{className:"text-center font-mono",children:t.phase==="fetching"||t.phase==="stopped"?E.jsx("span",{className:"font-bold italic text-stone-400",children:"???"}):E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"font-bold text-mantis-400",children:t.metadata.name}),E.jsx("span",{className:"text-white",children:e})]})})})]})]})}function $H({className:t}){return E.jsxs("div",{className:st("absolute z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[E.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:"CPU"}),E.jsx(hF,{}),E.jsx(Wj,{}),E.jsx(Cn,{name:"left",className:"left-[60px] top-[70px]"}),E.jsx(Cn,{name:"right",className:"left-[60px] top-[130px]"}),E.jsx(Cn,{name:"result",className:"left-[300px] top-[100px]"}),E.jsx(MH,{}),E.jsx(Cn,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),E.jsx(Cn,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),E.jsx(Cn,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),E.jsx(Cn,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),E.jsx(Cn,{name:"id",className:"left-[520px] top-[190px]"}),E.jsx(Cn,{name:"MBR",className:"right-[-38px] top-[233px]"}),E.jsx(Cn,{name:"IR",className:"left-[171px] top-[270px]"}),E.jsx(DH,{}),E.jsx(Cn,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),E.jsx(Cn,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),E.jsx(Cn,{name:"ri",className:"left-[450px] top-[372px]"}),E.jsx(Cn,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function Cn({name:t,emphasis:e,className:n}){return E.jsx(jo,{name:t,valueAtom:rt[t],springRef:We.cpu[t],emphasis:e,className:st("absolute",n)})}const LH="_pushable_1nhoa_2",IH="_front_1nhoa_15",BH="_shadow_1nhoa_20",zH="_edge_1nhoa_52",Th={pushable:LH,front:IH,shadow:BH,edge:zH};function FH({className:t}){const e=nu(),[n,r]=F1();return F2("F10",i=>{i.preventDefault(),r("f10.press")}),E.jsx("div",{className:st("absolute z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:E.jsxs("button",{className:Th.pushable,disabled:n.type!=="running",onClick:()=>r("f10.press"),title:"F10",children:[E.jsx("div",{className:Th.shadow}),E.jsx("div",{className:Th.edge}),E.jsx("span",{className:Th.front,children:e("devices.external.f10.interrupt")})]})})}function jH({className:t}){const e=wi(M6);return E.jsxs("div",{className:st("absolute z-10 h-[400px] w-[150px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[E.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl font-bold text-white",children:"Memory"}),E.jsx("div",{className:"m-4 w-min overflow-hidden rounded-lg border border-stone-600",children:E.jsx("table",{className:"font-mono text-lg",children:E.jsx("tbody",{children:e.map((n,r)=>E.jsxs("tr",{className:"border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",children:[E.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:n.address.toString()}),E.jsx("td",{className:"px-2 py-1",children:n.value.toString("hex")})]},r))})})})]})}function UH({className:t}){return E.jsxs("div",{className:st("absolute z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[E.jsxs("div",{className:"flex items-start",children:[E.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:"PIC"}),E.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[E.jsx(jo,{name:"IMR",valueAtom:h1,springRef:We.pic.IMR,emphasis:!0}),E.jsx(jo,{name:"IRR",valueAtom:f1,springRef:We.pic.IRR,emphasis:!0}),E.jsx(jo,{name:"ISR",valueAtom:p1,springRef:We.pic.ISR,emphasis:!0})]})]}),E.jsx("hr",{className:"mb-2 border-stone-600"}),E.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:dp.map((e,n)=>E.jsx(jo,{name:`INT${n}`,valueAtom:e,springRef:We.pic[`INT${n}`],className:"mx-auto"},n))})]})}function VH({className:t}){return E.jsxs("div",{className:st("absolute z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",t),children:[E.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl font-bold text-white",children:"Timer"}),E.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[E.jsx(jo,{name:"CONT",valueAtom:N1,springRef:We.timer.CONT}),E.jsx(jo,{name:"COMP",valueAtom:_1,springRef:We.timer.COMP})]})]})}function WH(){return E.jsx(CH,{minScale:.5,initialPositionX:0,initialPositionY:0,children:E.jsx(PH,{wrapperClass:"!w-full !h-full",contentClass:"!p-[100px]",children:E.jsxs("div",{className:"relative h-[1100px] w-[1500px] border border-red-500",children:[E.jsx(NH,{className:"left-0 top-0"}),E.jsx($H,{className:"left-0 top-0"}),E.jsx(jH,{className:"left-[800px] top-0"}),E.jsx(UH,{className:"left-0 top-[700px]"}),E.jsx(VH,{className:"left-[500px] top-[875px]"}),E.jsx(_H,{className:"left-[520px] top-[930px]"}),E.jsx(FH,{className:"left-[50px] top-[950px]"})]})})})}function HH(){const t=nu(),e=wi(XP),{updateServiceWorker:n}=j$({onNeedRefresh(){Jp(t("update.update-available"),{action:{label:t("update.reload"),onClick:()=>n(!0)}})}});return E.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",children:[E.jsx(a7,{}),E.jsxs(D2,{autoSaveId:"layout",tagName:"main",direction:"horizontal",className:"overflow-auto px-2",children:[E.jsx(Uh,{id:"panel-editor",order:1,minSize:20,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:E.jsx(pW,{className:"h-full w-full"})}),E.jsx(vy,{className:"w-2"}),E.jsx(Uh,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='rgb(120 113 108)' fill-opacity='0.4'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`},children:E.jsx(WH,{})}),e&&E.jsxs(E.Fragment,{children:[E.jsx(vy,{className:"w-2"}),E.jsx(Uh,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:E.jsx(o4,{className:"h-full w-full"})})]})]}),E.jsxs("footer",{className:"py-1 text-center text-xs font-semibold tracking-wider text-stone-500",children:[E.jsx("a",{href:"/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),E.jsx("span",{className:"px-2",children:"·"}),E.jsx("a",{href:"https://github.com/vonsim/vonsim",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),E.jsx("span",{className:"px-2",children:"·"}),E.jsx("a",{href:"https://github.com/vonsim/vonsim/issues/new?labels=new+version",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.report-issue")}),E.jsx("span",{className:"px-2",children:"·"}),E.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:["© Copyright 2017-",new Date().getFullYear()," — ",t("footer.copyright")]})]})]})}window.codemirror=null;x0.createRoot(document.getElementById("root")).render(E.jsxs(q.StrictMode,{children:[E.jsx(d$,{richColors:!0,closeButton:!0,position:"top-center"}),E.jsx(X5,{children:E.jsx(HH,{})})]}));
